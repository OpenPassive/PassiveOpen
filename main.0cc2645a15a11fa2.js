(self.webpackChunkpassiveopen=self.webpackChunkpassiveopen||[]).push([[179],{6683:(Nt,nt,Me)=>{"use strict";function ue(n){return"function"==typeof n}function Ee(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Ne=Ee(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ze(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Re{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(ue(i))try{i()}catch(s){e=s instanceof Ne?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{ct(s)}catch(o){e=e??[],o instanceof Ne?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ne(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ct(e);else{if(e instanceof Re){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ze(t,e)}remove(e){const{_finalizers:t}=this;t&&ze(t,e),e instanceof Re&&e._removeParent(this)}}Re.EMPTY=(()=>{const n=new Re;return n.closed=!0,n})();const Ie=Re.EMPTY;function We(n){return n instanceof Re||n&&"closed"in n&&ue(n.remove)&&ue(n.add)&&ue(n.unsubscribe)}function ct(n){ue(n)?n():n.unsubscribe()}const ft={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Vt={setTimeout(n,e,...t){const{delegate:i}=Vt;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Vt;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ct(n){Vt.setTimeout(()=>{const{onUnhandledError:e}=ft;if(!e)throw n;e(n)})}function st(){}const yt=Xe("C",void 0,void 0);function Xe(n,e,t){return{kind:n,value:e,error:t}}let j=null;function X(n){if(ft.useDeprecatedSynchronousErrorHandling){const e=!j;if(e&&(j={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=j;if(j=null,t)throw i}}else n()}class we extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,We(e)&&e.add(this)):this.destination=oe}static create(e,t,i){return new $(e,t,i)}next(e){this.isStopped?He(function Ve(n){return Xe("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?He(function qt(n){return Xe("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?He(yt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Z=Function.prototype.bind;function se(n,e){return Z.call(n,e)}class ce{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){je(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){je(i)}else je(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){je(t)}}}class $ extends we{constructor(e,t,i){let r;if(super(),ue(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&ft.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&se(e.next,s),error:e.error&&se(e.error,s),complete:e.complete&&se(e.complete,s)}):r=e}this.destination=new ce(r)}}function je(n){ft.useDeprecatedSynchronousErrorHandling?function Y(n){ft.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=n)}(n):Ct(n)}function He(n,e){const{onStoppedNotification:t}=ft;t&&Vt.setTimeout(()=>t(n,e))}const oe={closed:!0,next:st,error:function Be(n){throw n},complete:st},kt="function"==typeof Symbol&&Symbol.observable||"@@observable";function At(n){return n}function qe(n){return 0===n.length?At:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function _e(n){return n&&n instanceof we||function rt(n){return n&&ue(n.next)&&ue(n.error)&&ue(n.complete)}(n)&&We(n)}(t)?t:new $(t,i,r);return X(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Qe(i))((r,s)=>{const o=new $({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[kt](){return this}pipe(...t){return qe(t)(this)}toPromise(t){return new(t=Qe(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Qe(n){var e;return null!==(e=n??ft.Promise)&&void 0!==e?e:Promise}const St=Ee(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Je=(()=>{class n extends Ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new nn(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new St}next(t){X(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){X(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){X(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Ie:(this.currentObservers=null,s.push(t),new Re(()=>{this.currentObservers=null,ze(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new Ce;return t.source=this,t}}return n.create=(e,t)=>new nn(e,t),n})();class nn extends Je{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:Ie}}function vt(n){return ue(n?.lift)}function xn(n){return e=>{if(vt(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function _n(n,e,t,i,r){return new ci(n,e,t,i,r)}class ci extends we{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function $t(n,e){return xn((t,i)=>{let r=0;t.subscribe(_n(i,s=>{i.next(n.call(e,s,r++))}))})}function Mt(n){return this instanceof Mt?(this.v=n,this):new Mt(n)}function bi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(p){i[p]&&(r[p]=function(g){return new Promise(function(_,y){s.push([p,g,_,y])>1||a(p,g)})})}function a(p,g){try{!function c(p){p.value instanceof Mt?Promise.resolve(p.value.v).then(l,u):f(s[0][2],p)}(i[p](g))}catch(_){f(s[0][3],_)}}function l(p){a("next",p)}function u(p){a("throw",p)}function f(p,g){p(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function yn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Te(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}const Eo=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function wa(n){return ue(n?.then)}function ys(n){return ue(n[kt])}function j1(n){return Symbol.asyncIterator&&ue(n?.[Symbol.asyncIterator])}function Qo(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const H2=function rn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function lc(n){return ue(n?.[H2])}function Bi(n){return bi(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Mt(t.read());if(r)return yield Mt(void 0);yield yield Mt(i)}}finally{t.releaseLock()}})}function Yc(n){return ue(n?.getReader)}function uo(n){if(n instanceof Ce)return n;if(null!=n){if(ys(n))return function ul(n){return new Ce(e=>{const t=n[kt]();if(ue(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Eo(n))return function iu(n){return new Ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(wa(n))return function Pm(n){return new Ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ct)})}(n);if(j1(n))return Tr(n);if(lc(n))return function zf(n){return new Ce(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Yc(n))return function m2(n){return Tr(Bi(n))}(n)}throw Qo(n)}function Tr(n){return new Ce(e=>{(function ru(n,e){var t,i,r,s;return function it(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(f){o(f)}}function c(u){try{l(i.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=yn(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Ra(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function xi(n,e,t=1/0){return ue(e)?xi((i,r)=>$t((s,o)=>e(i,s,r,o))(uo(n(i,r))),t):("number"==typeof e&&(t=e),xn((i,r)=>function $l(n,e,t,i,r,s,o,a){const c=[];let l=0,u=0,f=!1;const p=()=>{f&&!c.length&&!l&&e.complete()},g=y=>l<i?_(y):c.push(y),_=y=>{s&&e.next(y),l++;let w=!1;uo(t(y,u++)).subscribe(_n(e,C=>{r?.(C),s?g(C):e.next(C)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<i;){const C=c.shift();o?Ra(e,o,()=>_(C)):_(C)}p()}catch(C){e.error(C)}}))};return n.subscribe(_n(e,g,()=>{f=!0,p()})),()=>{a?.()}}(i,r,n,t)))}function t1(n=1/0){return xi(At,n)}const Fa=new Ce(n=>n.complete());function T3(n){return n&&ue(n.schedule)}function y1(n){return n[n.length-1]}function r0(n){return ue(y1(n))?n.pop():void 0}function w1(n){return T3(y1(n))?n.pop():void 0}function vo(n,e=0){return xn((t,i)=>{t.subscribe(_n(i,r=>Ra(i,n,()=>i.next(r),e),()=>Ra(i,n,()=>i.complete(),e),r=>Ra(i,n,()=>i.error(r),e)))})}function ho(n,e=0){return xn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function ql(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ce(t=>{Ra(t,e,()=>{const i=n[Symbol.asyncIterator]();Ra(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function hs(n,e){return e?function Ic(n,e){if(null!=n){if(ys(n))return function uh(n,e){return uo(n).pipe(ho(e),vo(e))}(n,e);if(Eo(n))return function v2(n,e){return new Ce(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(wa(n))return function uc(n,e){return uo(n).pipe(ho(e),vo(e))}(n,e);if(j1(n))return ql(n,e);if(lc(n))return function Wo(n,e){return new Ce(t=>{let i;return Ra(t,e,()=>{i=n[H2](),Ra(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>ue(i?.return)&&i.return()})}(n,e);if(Yc(n))return function z2(n,e){return ql(Bi(n),e)}(n,e)}throw Qo(n)}(n,e):uo(n)}function Zc(...n){const e=w1(n),t=function R6(n,e){return"number"==typeof y1(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?uo(i[0]):t1(t)(hs(i,e)):Fa}function L3(n={}){const{connector:e=(()=>new Je),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,l=0,u=!1,f=!1;const p=()=>{a?.unsubscribe(),a=void 0},g=()=>{p(),o=c=void 0,u=f=!1},_=()=>{const y=o;g(),y?.unsubscribe()};return xn((y,w)=>{l++,!f&&!u&&p();const C=c=c??e();w.add(()=>{l--,0===l&&!f&&!u&&(a=hl(_,r))}),C.subscribe(w),!o&&l>0&&(o=new $({next:x=>C.next(x),error:x=>{f=!0,p(),a=hl(g,t,x),C.error(x)},complete:()=>{u=!0,p(),a=hl(g,i),C.complete()}}),uo(y).subscribe(o))})(s)}}function hl(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new $({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function Rs(n){for(let e in n)if(n[e]===Rs)return e;throw Error("Could not find renamed property on target object.")}function fo(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function oo(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(oo).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function hc(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const s0=Rs({__forward_ref__:Rs});function pr(n){return n.__forward_ref__=pr,n.toString=function(){return oo(this())},n}function Ln(n){return C1(n)?n():n}function C1(n){return"function"==typeof n&&n.hasOwnProperty(s0)&&n.__forward_ref__===pr}class jt extends Error{constructor(e,t){super(function qi(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function tr(n){return"string"==typeof n?n:null==n?"":String(n)}function D3(n,e){throw new jt(-201,!1)}function fc(n,e){null==n&&function ur(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Lt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}const su=Lt;function wn(n){return{providers:n.providers||[],imports:n.imports||[]}}function r1(n){return t2(n,_o)||t2(n,Ks)}function t2(n,e){return n.hasOwnProperty(e)?n[e]:null}function I3(n){return n&&(n.hasOwnProperty(Gf)||n.hasOwnProperty($o))?n[Gf]:null}const _o=Rs({\u0275prov:Rs}),Gf=Rs({\u0275inj:Rs}),Ks=Rs({ngInjectableDef:Rs}),$o=Rs({ngInjectorDef:Rs});var zn=(()=>((zn=zn||{})[zn.Default=0]="Default",zn[zn.Host=1]="Host",zn[zn.Self=2]="Self",zn[zn.SkipSelf=4]="SkipSelf",zn[zn.Optional=8]="Optional",zn))();let a0;function $1(n){const e=a0;return a0=n,e}function F6(n,e,t){const i=r1(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&zn.Optional?null:void 0!==e?e:void D3(oo(n))}function go(n){return{toString:n}.toString()}var ka=(()=>((ka=ka||{})[ka.OnPush=0]="OnPush",ka[ka.Default=1]="Default",ka))(),qo=(()=>{return(n=qo||(qo={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",qo;var n})();const ws=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ou={},Pr=[],s1=Rs({\u0275cmp:Rs}),n2=Rs({\u0275dir:Rs}),Yl=Rs({\u0275pipe:Rs}),c0=Rs({\u0275mod:Rs}),ml=Rs({\u0275fac:Rs}),l0=Rs({__NG_ELEMENT_ID__:Rs});let Lr=0;function Rn(n){return go(()=>{const t=!0===n.standalone,i={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ka.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Pr,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||qo.Emulated,id:"c"+Lr++,styles:n.styles||Pr,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.dependencies,o=n.features;return r.inputs=_4(n.inputs,i),r.outputs=_4(n.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(u0).filter(dc):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(K1).filter(dc):null,r})}function u0(n){return nr(n)||ta(n)}function dc(n){return null!==n}function oi(n){return go(()=>({type:n.type,bootstrap:n.bootstrap||Pr,declarations:n.declarations||Pr,imports:n.imports||Pr,exports:n.exports||Pr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function _4(n,e){if(null==n)return ou;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const ht=Rn;function b1(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function nr(n){return n[s1]||null}function ta(n){return n[n2]||null}function K1(n){return n[Yl]||null}function Li(n,e){const t=n[c0]||null;if(!t&&!0===e)throw new Error(`Type ${oo(n)} does not have '\u0275mod' property.`);return t}function Ps(n){return Array.isArray(n)&&"object"==typeof n[1]}function To(n){return Array.isArray(n)&&!0===n[1]}function S1(n){return 0!=(8&n.flags)}function h0(n){return 2==(2&n.flags)}function Zl(n){return 1==(1&n.flags)}function fa(n){return null!==n.template}function vl(n){return 0!=(256&n[2])}function a1(n,e){return n.hasOwnProperty(ml)?n[ml]:null}class lu{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function yr(){return G2}function G2(n){return n.type.prototype.ngOnChanges&&(n.setInput=mp),Lo}function Lo(){const n=c1(this),e=n?.current;if(e){const t=n.previous;if(t===ou)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function mp(n,e,t,i){const r=c1(n)||function P3(n,e){return n[k3]=e}(n,{previous:ou,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],c=o[a];s[a]=new lu(c&&c.currentValue,e,o===ou),n[i]=e}yr.ngInherit=!0;const k3="__ngSimpleChanges__";function c1(n){return n[k3]||null}function ra(n){for(;Array.isArray(n);)n=n[0];return n}function o2(n,e){return ra(e[n])}function b2(n,e){return ra(e[n.index])}function z6(n,e){return n.data[e]}function H3(n,e){return n[e]}function sa(n,e){const t=e[n];return Ps(t)?t:t[0]}function z3(n){return 64==(64&n[2])}function x2(n,e){return null==e?null:n[e]}function O3(n){n[18]=0}function hu(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const zi={lFrame:vy(null),bindingsEnabled:!0};function X1(){return zi.bindingsEnabled}function Dt(){return zi.lFrame.lView}function Mr(){return zi.lFrame.tView}function gi(n){return zi.lFrame.contextLView=n,n[8]}function h(n){return zi.lFrame.contextLView=null,n}function d(){let n=m();for(;null!==n&&64===n.type;)n=n.parent;return n}function m(){return zi.lFrame.currentTNode}function b(n,e){const t=zi.lFrame;t.currentTNode=n,t.isParent=e}function B(){return zi.lFrame.isParent}function z(){zi.lFrame.isParent=!1}function pt(){const n=zi.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function hn(){return zi.lFrame.bindingIndex}function Fn(){return zi.lFrame.bindingIndex++}function Jn(n){const e=zi.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function l1(n,e){const t=zi.lFrame;t.bindingIndex=t.bindingRootIndex=n,yl(e)}function yl(n){zi.lFrame.currentDirectiveIndex=n}function dh(n){const e=zi.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function ph(){return zi.lFrame.currentQueryIndex}function Om(n){zi.lFrame.currentQueryIndex=n}function HT(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Nm(n,e,t){if(t&zn.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&zn.Host||(r=HT(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=zi.lFrame=Ay();return i.currentTNode=e,i.lView=n,!0}function Vm(n){const e=Ay(),t=n[1];zi.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Ay(){const n=zi.lFrame,e=null===n?null:n.child;return null===e?vy(n):e}function vy(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function _y(){const n=zi.lFrame;return zi.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const yy=_y;function Um(){const n=_y();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Hs(){return zi.lFrame.selectedIndex}function m0(n){zi.lFrame.selectedIndex=n}function Ga(){const n=zi.lFrame;return z6(n.tView,n.selectedIndex)}function Io(){zi.lFrame.currentNamespace="svg"}function _p(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),l&&((n.viewHooks||(n.viewHooks=[])).push(t,l),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,l)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function yp(n,e,t){Qm(n,e,3,t)}function wp(n,e,t,i){(3&n[2])===t&&Qm(n,e,t,i)}function Gm(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Qm(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[18]+=65536),(a<s||-1==s)&&(si(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function si(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class N6{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function xp(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];Mp(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function v0(n){return 3===n||4===n||6===n}function Mp(n){return 64===n.charCodeAt(0)}function jf(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||by(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function by(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function jm(n){return-1!==n}function $f(n){return 32767&n}function qf(n,e){let t=function $m(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let qm=!0;function Sp(n){const e=qm;return qm=n,e}let GT=0;const x4={};function G6(n,e){const t=Xm(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,Km(i.data,n),Km(e,null),Km(i.blueprint,null));const r=Q6(n,e),s=n.injectorIndex;if(jm(r)){const o=$f(r),a=qf(r,e),c=a[1].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function Km(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Xm(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Q6(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=Dy(r),null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Ep(n,e,t){!function Sy(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(l0)&&(i=t[l0]),null==i&&(i=t[l0]=GT++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function Ey(n,e,t){if(t&zn.Optional||void 0!==n)return n;D3()}function Lp(n,e,t,i){if(t&zn.Optional&&void 0===i&&(i=null),0==(t&(zn.Self|zn.Host))){const r=n[9],s=$1(void 0);try{return r?r.get(e,i,t&zn.Optional):F6(e,i,t&zn.Optional)}finally{$1(s)}}return Ey(i,0,t)}function Dp(n,e,t,i=zn.Default,r){if(null!==n){if(1024&e[2]){const o=function QT(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=Ym(s,o,t,i|zn.Self,x4);if(a!==x4)return a;let c=s.parent;if(!c){const l=o[21];if(l){const u=l.get(t,x4,i);if(u!==x4)return u}c=Dy(o),o=o[15]}s=c}return r}(n,e,t,i,x4);if(o!==x4)return o}const s=Ym(n,e,t,i,x4);if(s!==x4)return s}return Lp(e,t,i,r)}function Ym(n,e,t,i,r){const s=function Zm(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(l0)?n[l0]:void 0;return"number"==typeof e?e>=0?255&e:Ly:e}(t);if("function"==typeof s){if(!Nm(e,n,i))return i&zn.Host?Ey(r,0,i):Lp(e,t,i,r);try{const o=s(i);if(null!=o||i&zn.Optional)return o;D3()}finally{yy()}}else if("number"==typeof s){let o=null,a=Xm(n,e),c=-1,l=i&zn.Host?e[16][6]:null;for((-1===a||i&zn.SkipSelf)&&(c=-1===a?Q6(n,e):e[a+8],-1!==c&&Jm(i,!1)?(o=e[1],a=$f(c),e=qf(c,e)):a=-1);-1!==a;){const u=e[1];if(Bp(s,a,u.data)){const f=Ty(a,e,t,o,i,l);if(f!==x4)return f}c=e[a+8],-1!==c&&Jm(i,e[1].data[a+8]===l)&&Bp(s,a,e)?(o=u,a=$f(c),e=qf(c,e)):a=-1}}return r}function Ty(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=Ip(a,o,t,null==i?h0(a)&&qm:i!=o&&0!=(3&a.type),r&zn.Host&&s===a);return null!==u?Kf(e,o,u,a):x4}function Ip(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,p=r?a+u:n.directiveEnd;for(let g=i?a:a+u;g<p;g++){const _=o[g];if(g<c&&t===_||g>=c&&_.type===t)return g}if(r){const g=o[c];if(g&&fa(g)&&g.type===t)return c}return null}function Kf(n,e,t,i){let r=n[t];const s=e.data;if(function Wm(n){return n instanceof N6}(r)){const o=r;o.resolving&&function Of(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new jt(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Fs(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():tr(n)}(s[t]));const a=Sp(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?$1(o.injectImpl):null;Nm(n,i,zn.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function UT(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=G2(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==c&&$1(c),Sp(a),o.resolving=!1,yy()}}return r}function Bp(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Jm(n,e){return!(n&zn.Self||n&zn.Host&&e)}class gh{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Dp(this._tNode,this._lView,e,i,t)}}function Ly(){return new gh(d(),Dt())}function On(n){return go(()=>{const e=n.prototype.constructor,t=e[ml]||W6(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[ml]||W6(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function W6(n){return C1(n)?()=>{const e=W6(Ln(n));return e&&e()}:a1(n)}function Dy(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function e3(n){return function Tp(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(v0(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(d(),n)}const _0="__parameters__";function Yf(n,e,t){return go(()=>{const i=function eA(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,u){const f=c.hasOwnProperty(_0)?c[_0]:Object.defineProperty(c,_0,{value:[]})[_0];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class Bt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Lt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function wl(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),wl(i,e)):e!==n&&e.push(i)}return e}function du(n,e){n.forEach(t=>Array.isArray(t)?du(t,e):e(t))}function Ry(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Rp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function q6(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Cl(n,e,t){let i=Zf(n,e);return i>=0?n[1|i]=t:(i=~i,function ky(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function nA(n,e){const t=Zf(n,e);if(t>=0)return n[1|t]}function Zf(n,e){return function K6(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const Jf={},oA="__NG_DI_FLAG__",Fp="ngTempTokenPath",ed=/\n/gm,X6="__source";let Y6;function td(n){const e=Y6;return Y6=n,e}function ZT(n,e=zn.Default){if(void 0===Y6)throw new jt(-203,!1);return null===Y6?F6(n,void 0,e):Y6.get(n,e&zn.Optional?null:void 0,e)}function Ye(n,e=zn.Default){return(function zm(){return a0}()||ZT)(Ln(n),e)}function Cs(n,e=zn.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),Ye(n,e)}function kp(n){const e=[];for(let t=0;t<n.length;t++){const i=Ln(n[t]);if(Array.isArray(i)){if(0===i.length)throw new jt(900,!1);let r,s=zn.Default;for(let o=0;o<i.length;o++){const a=i[o],c=lA(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(Ye(r,s))}else e.push(Ye(i))}return e}function nd(n,e){return n[oA]=e,n.prototype[oA]=e,n}function lA(n){return n[oA]}const t3=nd(Yf("Optional"),8),y0=nd(Yf("SkipSelf"),4);let fA,zp,Op;function sd(n){return function r8(){if(void 0===zp&&(zp=null,ws.trustedTypes))try{zp=ws.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return zp}()?.createHTML(n)||n}function Np(n){return function s8(){if(void 0===Op&&(Op=null,ws.trustedTypes))try{Op=ws.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Op}()?.createHTML(n)||n}class yh{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Zy extends yh{getTypeName(){return"HTML"}}class rL extends yh{getTypeName(){return"Style"}}class sL extends yh{getTypeName(){return"Script"}}class oL extends yh{getTypeName(){return"URL"}}class aL extends yh{getTypeName(){return"ResourceURL"}}function bl(n){return n instanceof yh?n.changingThisBreaksApplicationSecurity:n}function n3(n,e){const t=function cL(n){return n instanceof yh&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class uL{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(sd(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class Ys{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=sd(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=sd(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const Up=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Gp(n){return(n=String(n)).match(Up)?n:"unsafe:"+n}function r3(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function o8(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const a8=r3("area,br,col,hr,img,wbr"),Jy=r3("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ew=r3("rp,rt"),gA=o8(a8,o8(Jy,r3("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),o8(ew,r3("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),o8(ew,Jy)),Qp=r3("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),mA=o8(Qp,r3("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),r3("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),pL=r3("script,style,template");class nw{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!gA.hasOwnProperty(t))return this.sanitizedSomething=!0,!pL.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!mA.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;Qp[a]&&(c=Gp(c)),this.buf.push(" ",o,'="',iw(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();gA.hasOwnProperty(t)&&!a8.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(iw(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const gL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mL=/([^\#-~ |!])/g;function iw(n){return n.replace(/&/g,"&amp;").replace(gL,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(mL,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let wh;function Ml(n,e){let t=null;try{wh=wh||function xl(n){const e=new Ys(n);return function pa(){try{return!!(new window.DOMParser).parseFromString(sd(""),"text/html")}catch{return!1}}()?new uL(e):e}(n);let i=e?String(e):"";t=wh.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=wh.getInertBodyElement(i)}while(i!==s);return sd((new nw).sanitizeChildren(Wp(t)||t))}finally{if(t){const i=Wp(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Wp(n){return"content"in n&&function jp(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Qs=(()=>((Qs=Qs||{})[Qs.NONE=0]="NONE",Qs[Qs.HTML=1]="HTML",Qs[Qs.STYLE=2]="STYLE",Qs[Qs.SCRIPT=3]="SCRIPT",Qs[Qs.URL=4]="URL",Qs[Qs.RESOURCE_URL=5]="RESOURCE_URL",Qs))();function V3(n){const e=l8();return e?Np(e.sanitize(Qs.HTML,n)||""):n3(n,"HTML")?Np(bl(n)):Ml(function Xy(){return void 0!==fA?fA:typeof document<"u"?document:void 0}(),tr(n))}function kc(n){const e=l8();return e?e.sanitize(Qs.URL,n)||"":n3(n,"URL")?bl(n):Gp(tr(n))}function l8(){const n=Dt();return n&&n[12]}const vA=new Bt("ENVIRONMENT_INITIALIZER"),sw=new Bt("INJECTOR",-1),ow=new Bt("INJECTOR_DEF_TYPES");class aw{get(e,t=Jf){if(t===Jf){const i=new Error(`NullInjectorError: No provider for ${oo(e)}!`);throw i.name="NullInjectorError",i}return t}}function wL(...n){return{\u0275providers:cw(0,n)}}function cw(n,...e){const t=[],i=new Set;let r;return du(e,s=>{const o=s;_A(o,t,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&lw(r,t),t}function lw(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];du(r,s=>{e.push(s)})}}function _A(n,e,t,i){if(!(n=Ln(n)))return!1;let r=null,s=I3(n);const o=!s&&nr(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=I3(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)_A(l,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{du(s.imports,u=>{_A(u,e,t,i)&&(l||(l=[]),l.push(u))})}finally{}void 0!==l&&lw(l,e)}if(!a){const l=a1(r)||(()=>new r);e.push({provide:r,useFactory:l,deps:Pr},{provide:ow,useValue:r,multi:!0},{provide:vA,useValue:()=>Ye(r),multi:!0})}const c=s.providers;null==c||a||du(c,u=>{e.push(u)})}}return r!==n&&void 0!==n.providers}const CL=Rs({provide:String,useValue:Rs});function yA(n){return null!==n&&"object"==typeof n&&CL in n}function E(n){return"function"==typeof n}const D=new Bt("Set Injector scope."),L={},O={};let G;function ie(){return void 0===G&&(G=new aw),G}class ye{}class xe extends ye{constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ui(e,o=>this.processProvider(o)),this.records.set(sw,Gn(void 0,this)),r.has("environment")&&this.records.set(ye,Gn(void 0,this));const s=this.records.get(D);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(ow.multi,Pr,zn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=td(this),i=$1(void 0);try{return e()}finally{td(t),$1(i)}}get(e,t=Jf,i=zn.Default){this.assertNotDestroyed();const r=td(this),s=$1(void 0);try{if(!(i&zn.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function wr(n){return"function"==typeof n||"object"==typeof n&&n instanceof Bt}(e)&&r1(e);a=c&&this.injectableDefInScope(c)?Gn(Ze(e),L):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&zn.Self?ie():this.parent).get(e,t=i&zn.Optional&&t===Jf?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Fp]=o[Fp]||[]).unshift(oo(e)),r)throw o;return function Gy(n,e,t,i){const r=n[Fp];throw e[X6]&&r.unshift(e[X6]),n.message=function Qy(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=oo(e);if(Array.isArray(e))r=e.map(oo).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):oo(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(ed,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Fp]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{$1(s),td(r)}}resolveInjectorInitializers(){const e=td(this),t=$1(void 0);try{const i=this.get(vA.multi,Pr,zn.Self);for(const r of i)r()}finally{td(e),$1(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(oo(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new jt(205,!1)}processProvider(e){let t=E(e=Ln(e))?e:Ln(e&&e.provide);const i=function dt(n){return yA(n)?Gn(void 0,n.useValue):Gn(Ft(n),L)}(e);if(E(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Gn(void 0,L,!0),r.factory=()=>kp(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===L&&(t.value=O,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Qn(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ln(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Ze(n){const e=r1(n),t=null!==e?e.factory:a1(n);if(null!==t)return t;if(n instanceof Bt)throw new jt(204,!1);if(n instanceof Function)return function lt(n){const e=n.length;if(e>0)throw q6(e,"?"),new jt(204,!1);const t=function gl(n){const e=n&&(n[_o]||n[Ks]);if(e){const t=function Xl(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new jt(204,!1)}function Ft(n,e,t){let i;if(E(n)){const r=Ln(n);return a1(r)||Ze(r)}if(yA(n))i=()=>Ln(n.useValue);else if(function hw(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...kp(n.deps||[]));else if(function uw(n){return!(!n||!n.useExisting)}(n))i=()=>Ye(Ln(n.useExisting));else{const r=Ln(n&&(n.useClass||n.provide));if(!function Tn(n){return!!n.deps}(n))return a1(r)||Ze(r);i=()=>new r(...kp(n.deps))}return i}function Gn(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function _i(n){return!!n.\u0275providers}function ui(n,e){for(const t of n)Array.isArray(t)?ui(t,e):_i(t)?ui(t.\u0275providers,e):e(t)}class Cr{}class Is{resolveComponentFactory(e){throw function ir(n){const e=Error(`No component factory found for ${oo(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ni=(()=>{class n{}return n.NULL=new Is,n})();function D1(){return Y1(d(),Dt())}function Y1(n,e){return new fn(b2(n,e))}let fn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=D1,n})();function yo(n){return n instanceof fn?n.nativeElement:n}class s3{}let Yo=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Q2(){const n=Dt(),t=sa(d().index,n);return(Ps(t)?t:n)[11]}(),n})(),Ch=(()=>{class n{}return n.\u0275prov=Lt({token:n,providedIn:"root",factory:()=>null}),n})();class Pc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const C0=new Pc("14.2.2"),mu={};function ML(n){return n.ngOriginalError}class Mh{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&ML(e);for(;t&&ML(t);)t=ML(t);return t||null}}const SL=new Map;let x6e=0;const TL="__ngContext__";function W2(n,e){Ps(e)?(n[TL]=e[20],function S6e(n){SL.set(n[20],n)}(e)):n[TL]=e}function LL(n){return n.ownerDocument.defaultView}function DL(n){return n.ownerDocument}function Sh(n){return n instanceof Function?n():n}var o3=(()=>((o3=o3||{})[o3.Important=1]="Important",o3[o3.DashCase=2]="DashCase",o3))();function BL(n,e){return undefined(n,e)}function CA(n){const e=n[3];return To(e)?e[3]:e}function RL(n){return fU(n[13])}function FL(n){return fU(n[4])}function fU(n){for(;null!==n&&!To(n);)n=n[4];return n}function qp(n,e,t,i,r){if(null!=i){let s,o=!1;To(i)?s=i:Ps(i)&&(o=!0,i=i[0]);const a=ra(i);0===n&&null!==t?null==r?vU(e,t,a):h8(e,t,a,r||null,!0):1===n&&null!==t?h8(e,t,a,r||null,!0):2===n?function MU(n,e,t){const i=fw(n,e);i&&function Y6e(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function e8e(n,e,t,i,r){const s=t[7];s!==ra(t)&&qp(e,n,i,s,r);for(let a=10;a<t.length;a++){const c=t[a];bA(c[1],c,n,e,i,s)}}(e,n,s,t,r)}}function PL(n,e,t){return n.createElement(e,t)}function pU(n,e){const t=n[9],i=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,hu(r,-1)),t.splice(i,1)}function HL(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&pU(r,i),e>0&&(n[t-1][4]=i[4]);const s=Rp(n,10+e);!function G6e(n,e){bA(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function gU(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&bA(n,e,t,3,null,null),function j6e(n){let e=n[13];if(!e)return zL(n[1],n);for(;e;){let t=null;if(Ps(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Ps(e)&&zL(e[1],e),e=e[3];null===e&&(e=n),Ps(e)&&zL(e[1],e),t=e&&e[4]}e=t}}(e)}}function zL(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function X6e(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof N6)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];try{c.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function K6e(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):ra(e[o]),c=i[r=t[s+2]],l=t[s+3];"boolean"==typeof l?a.removeEventListener(t[s],c,l):l>=0?i[r=l]():i[r=-l].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&To(e[3])){t!==e[3]&&pU(t,e);const i=e[19];null!==i&&i.detachView(n)}!function E6e(n){SL.delete(n[20])}(e)}}function mU(n,e,t){return function AU(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===qo.None||r===qo.Emulated)return null}return b2(i,t)}(n,e.parent,t)}function h8(n,e,t,i,r){n.insertBefore(e,t,i,r)}function vU(n,e,t){n.appendChild(e,t)}function _U(n,e,t,i,r){null!==i?h8(n,e,t,i,r):vU(n,e,t)}function fw(n,e){return n.parentNode(e)}function yU(n,e,t){return CU(n,e,t)}let CU=function wU(n,e,t){return 40&n.type?b2(n,t):null};function dw(n,e,t,i){const r=mU(n,i,e),s=e[11],a=yU(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)_U(s,r,t[c],a,!1);else _U(s,r,t,a,!1)}function pw(n,e){if(null!==e){const t=e.type;if(3&t)return b2(e,n);if(4&t)return NL(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return pw(n,i);{const r=n[e.index];return To(r)?NL(-1,r):ra(r)}}if(32&t)return BL(e,n)()||ra(n[e.index]);{const i=xU(n,e);return null!==i?Array.isArray(i)?i[0]:pw(CA(n[16]),i):pw(n,e.next)}}return null}function xU(n,e){return null!==e?n[16][6].projection[e.projection]:null}function NL(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return pw(i,r)}return e[7]}function VL(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&W2(ra(a),i),t.flags|=4),64!=(64&t.flags))if(8&c)VL(n,e,t.child,i,r,s,!1),qp(e,n,r,a,s);else if(32&c){const l=BL(t,i);let u;for(;u=l();)qp(e,n,r,u,s);qp(e,n,r,a,s)}else 16&c?SU(n,e,i,t,r,s):qp(e,n,r,a,s);t=o?t.projectionNext:t.next}}function bA(n,e,t,i,r,s){VL(t,i,n.firstChild,e,r,s,!1)}function SU(n,e,t,i,r,s){const o=t[16],c=o[6].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)qp(e,n,r,c[l],s);else VL(n,e,c,o[3],r,s,!0)}function EU(n,e,t){n.setAttribute(e,"style",t)}function UL(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function TU(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const LU="ng-template";function n8e(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==TU(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function DU(n){return 4===n.type&&n.value!==LU}function i8e(n,e,t){return e===(4!==n.type||t?n.value:LU)}function r8e(n,e,t){let i=4;const r=n.attrs||[],s=function a8e(n){for(let e=0;e<n.length;e++)if(v0(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!i8e(n,c,t)||""===c&&1===e.length){if(_u(i))return!1;o=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!n8e(n.attrs,l,t)){if(_u(i))return!1;o=!0}continue}const f=s8e(8&i?"class":c,r,DU(n),t);if(-1===f){if(_u(i))return!1;o=!0;continue}if(""!==l){let p;p=f>s?"":r[f+1].toLowerCase();const g=8&i?p:null;if(g&&-1!==TU(g,l,0)||2&i&&l!==p){if(_u(i))return!1;o=!0}}}}else{if(!o&&!_u(i)&&!_u(c))return!1;if(o&&_u(c))continue;o=!1,i=c|1&i}}return _u(i)||o}function _u(n){return 0==(1&n)}function s8e(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function c8e(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function IU(n,e,t=!1){for(let i=0;i<e.length;i++)if(r8e(n,e[i],t))return!0;return!1}function l8e(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function BU(n,e){return n?":not("+e.trim()+")":e}function u8e(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!_u(o)&&(e+=BU(s,r),r=""),i=o,s=s||!_u(i);t++}return""!==r&&(e+=BU(s,r)),e}const mr={};function ee(n){RU(Mr(),Dt(),Hs()+n,!1)}function RU(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&yp(e,s,t)}else{const s=n.preOrderHooks;null!==s&&wp(e,s,0,t)}m0(t)}function HU(n,e=null,t=null,i){const r=zU(n,e,t,i);return r.resolveInjectorInitializers(),r}function zU(n,e=null,t=null,i,r=new Set){const s=[t||Pr,wL(n)];return i=i||("object"==typeof n?void 0:oo(n)),new xe(s,e||ie(),i||null,r)}let yc=(()=>{class n{static create(t,i){if(Array.isArray(t))return HU({name:""},i,t,"");{const r=t.name??"";return HU({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=Jf,n.NULL=new aw,n.\u0275prov=Lt({token:n,providedIn:"any",factory:()=>Ye(sw)}),n.__NG_ELEMENT_ID__=-1,n})();function U(n,e=zn.Default){const t=Dt();return null===t?Ye(n,e):Dp(d(),t,Ln(n),e)}function f8(){throw new Error("invalid")}function mw(n,e){return n<<17|e<<2}function yu(n){return n>>17&32767}function $L(n){return 2|n}function Eh(n){return(131068&n)>>2}function qL(n,e){return-131069&n|e<<2}function KL(n){return 1|n}function tG(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];Om(r),o.contentQueries(2,e[s],s)}}}function _w(n,e,t,i,r,s,o,a,c,l,u){const f=e.blueprint.slice();return f[0]=r,f[2]=76|i,(null!==u||n&&1024&n[2])&&(f[2]|=1024),O3(f),f[3]=f[15]=n,f[8]=t,f[10]=o||n&&n[10],f[11]=a||n&&n[11],f[12]=c||n&&n[12]||null,f[9]=l||n&&n[9]||null,f[6]=s,f[20]=function M6e(){return x6e++}(),f[21]=u,f[16]=2==e.type?n[16]:f,f}function Xp(n,e,t,i,r){let s=n.data[e];if(null===s)s=function iD(n,e,t,i,r){const s=m(),o=B(),c=n.data[e]=function j8e(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(n,e,t,i,r),function Hr(){return zi.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function v(){const n=zi.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return b(s,!0),s}function Yp(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function rD(n,e,t){Vm(e);try{const i=n.viewQuery;null!==i&&fD(1,i,t);const r=n.template;null!==r&&nG(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&tG(n,e),n.staticViewQueries&&fD(2,n.viewQuery,t);const s=n.components;null!==s&&function G8e(n,e){for(let t=0;t<e.length;t++)c5e(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,Um()}}function yw(n,e,t,i){const r=e[2];if(128!=(128&r)){Vm(e);try{O3(e),function Mn(n){return zi.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&nG(n,e,t,2,i);const o=3==(3&r);if(o){const l=n.preOrderCheckHooks;null!==l&&yp(e,l,null)}else{const l=n.preOrderHooks;null!==l&&wp(e,l,0,null),Gm(e,0)}if(function o5e(n){for(let e=RL(n);null!==e;e=FL(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(512&r[2])&&hu(s,1),r[2]|=512}}}(e),function s5e(n){for(let e=RL(n);null!==e;e=FL(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];z3(i)&&yw(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&tG(n,e),o){const l=n.contentCheckHooks;null!==l&&yp(e,l)}else{const l=n.contentHooks;null!==l&&wp(e,l,1),Gm(e,1)}!function V8e(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)m0(~r);else{const s=r,o=t[++i],a=t[++i];l1(o,s),a(2,e[s])}}}finally{m0(-1)}}(n,e);const a=n.components;null!==a&&function U8e(n,e){for(let t=0;t<e.length;t++)a5e(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&fD(2,c,i),o){const l=n.viewCheckHooks;null!==l&&yp(e,l)}else{const l=n.viewHooks;null!==l&&wp(e,l,2),Gm(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,hu(e[3],-1))}finally{Um()}}}function nG(n,e,t,i,r){const s=Hs(),o=2&i;try{m0(-1),o&&e.length>22&&RU(n,e,22,!1),t(i,r)}finally{m0(s)}}function iG(n,e,t){if(S1(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function sD(n,e,t){!X1()||(function Y8e(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||G6(t,e),W2(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],l=fa(c);l&&n5e(e,t,c);const u=Kf(e,n,a,t);W2(u,e),null!==o&&i5e(0,a-r,u,c,0,o),l&&(sa(t.index,e)[8]=u)}}(n,e,t,b2(t,e)),128==(128&t.flags)&&function Z8e(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function _l(){return zi.lFrame.currentDirectiveIndex}();try{m0(s);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];yl(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&uG(c,l)}}finally{m0(-1),yl(o)}}(n,e,t))}function oD(n,e,t=b2){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function rG(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=aD(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function aD(n,e,t,i,r,s,o,a,c,l){const u=22+i,f=u+r,p=function Q8e(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:mr);return t}(u,f),g="function"==typeof l?l():l;return p[1]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1}}function sG(n,e,t,i){const r=gG(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&mG(n).push(i,r.length-1))}function oG(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function aG(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,c=null;for(let l=e.directiveStart;l<i;l++){const u=r[l],f=u.inputs,p=null===s||DU(e)?null:r5e(f,s);o.push(p),a=oG(f,l,a),c=oG(u.outputs,l,c)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=c}function U3(n,e,t,i,r,s,o,a){const c=b2(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?(dD(n,t,u,i,r),h0(e)&&cG(t,e.index)):3&e.type&&(i=function $8e(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function cG(n,e){const t=sa(e,n);16&t[2]||(t[2]|=32)}function cD(n,e,t,i){let r=!1;if(X1()){const s=function J8e(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];IU(t,o.selectors,!1)&&(r||(r=[]),Ep(G6(t,e),n,o.type),fa(o)?(hG(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,fG(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const f=s[u];f.providersResolver&&f.providersResolver(f)}let a=!1,c=!1,l=Yp(n,e,s.length,null);for(let u=0;u<s.length;u++){const f=s[u];t.mergedAttrs=jf(t.mergedAttrs,f.hostAttrs),dG(n,t,e,l,f),t5e(l,f,o),null!==f.contentQueries&&(t.flags|=8),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=128);const p=f.type.prototype;!a&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!c&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),c=!0),l++}aG(n,t)}o&&function e5e(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new jt(-301,!1);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=jf(t.mergedAttrs,t.attrs),r}function lG(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const c=~e.index;(function X8e(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=c&&a.push(c),a.push(i,r,o)}}function uG(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function hG(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function t5e(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;fa(e)&&(t[""]=n)}}function fG(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function dG(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=a1(r.type)),o=new N6(s,fa(r),U);n.blueprint[i]=o,t[i]=o,lG(n,e,0,i,Yp(n,t,r.hostVars,mr),r)}function n5e(n,e,t){const i=b2(e,n),r=rG(t),s=n[10],o=ww(n,_w(n,r,null,t.onPush?32:16,i,e,s,s.createRenderer(i,t),null,null,null));n[e.index]=o}function x0(n,e,t,i,r,s){const o=b2(n,e);!function lD(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?tr(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[11],o,s,n.value,t,i,r)}function i5e(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let c=0;c<o.length;){const l=o[c++],u=o[c++],f=o[c++];null!==a?i.setInput(t,f,l,u):t[u]=f}}}function r5e(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function pG(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function a5e(n,e){const t=sa(e,n);if(z3(t)){const i=t[1];48&t[2]?yw(i,t,i.template,t[8]):t[5]>0&&uD(t)}}function uD(n){for(let i=RL(n);null!==i;i=FL(i))for(let r=10;r<i.length;r++){const s=i[r];if(z3(s))if(512&s[2]){const o=s[1];yw(o,s,o.template,s[8])}else s[5]>0&&uD(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=sa(t[i],n);z3(r)&&r[5]>0&&uD(r)}}function c5e(n,e){const t=sa(e,n),i=t[1];(function l5e(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),rD(i,t,t[8])}function ww(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function hD(n){for(;n;){n[2]|=32;const e=CA(n);if(vl(n)&&!e)return n;n=e}return null}function Cw(n,e,t,i=!0){const r=e[10];r.begin&&r.begin();try{yw(n,e,n.template,t)}catch(o){throw i&&vG(e,o),o}finally{r.end&&r.end()}}function fD(n,e,t){Om(0),e(n,t)}function gG(n){return n[7]||(n[7]=[])}function mG(n){return n.cleanup||(n.cleanup=[])}function AG(n,e,t){return(null===n||fa(n))&&(t=function Ua(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function vG(n,e){const t=n[9],i=t?t.get(Mh,null):null;i&&i.handleError(e)}function dD(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=e[o],l=n.data[o];null!==l.setInput?l.setInput(c,r,i,a):c[a]=r}}function Th(n,e,t){const i=o2(e,n);!function dU(n,e,t){n.setValue(e,t)}(n[11],i,t)}function bw(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=hc(r,a):2==s&&(i=hc(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function xw(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(ra(s)),To(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1].firstChild;null!==l&&xw(c[1],c,l,i)}const o=t.type;if(8&o)xw(n,e,t.child,i);else if(32&o){const a=BL(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=xU(e,t);if(Array.isArray(a))i.push(...a);else{const c=CA(e[16]);xw(c[1],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class xA{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return xw(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(To(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(HL(e,i),Rp(t,i))}this._attachedToViewContainer=!1}gU(this._lView[1],this._lView)}onDestroy(e){sG(this._lView[1],this._lView,null,e)}markForCheck(){hD(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Cw(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new jt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function W6e(n,e){bA(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new jt(902,!1);this._appRef=e}}class u5e extends xA{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Cw(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class pD extends Ni{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=nr(e);return new MA(t,this.ngModule)}}function _G(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class f5e{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){const r=this.injector.get(e,mu,i);return r!==mu||t===mu?r:this.parentInjector.get(e,t,i)}}class MA extends Cr{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function h8e(n){return n.map(u8e).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return _G(this.componentDef.inputs)}get outputs(){return _G(this.componentDef.outputs)}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof ye?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new f5e(e,s):e,a=o.get(s3,null);if(null===a)throw new jt(407,!1);const c=o.get(Ch,null),l=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",f=i?function W8e(n,e,t){return n.selectRootElement(e,t===qo.ShadowDom)}(l,i,this.componentDef.encapsulation):PL(a.createRenderer(null,this.componentDef),u,function h5e(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),p=this.componentDef.onPush?288:272,g=aD(0,null,null,1,0,null,null,null,null,null),_=_w(null,g,null,p,null,null,a,l,c,o,null);let y,w;Vm(_);try{const C=function g5e(n,e,t,i,r,s){const o=t[1];t[22]=n;const c=Xp(o,22,2,"#host",null),l=c.mergedAttrs=e.hostAttrs;null!==l&&(bw(c,l,!0),null!==n&&(xp(r,n,l),null!==c.classes&&UL(r,n,c.classes),null!==c.styles&&EU(r,n,c.styles)));const u=i.createRenderer(n,e),f=_w(t,rG(e),null,e.onPush?32:16,t[22],c,i,u,s||null,null,null);return o.firstCreatePass&&(Ep(G6(c,t),o,e.type),hG(o,c),fG(c,t.length,1)),ww(t,f),t[22]=f}(f,this.componentDef,_,a,l);if(f)if(i)xp(l,f,["ng-version",C0.full]);else{const{attrs:x,classes:M}=function f8e(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!_u(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);x&&xp(l,f,x),M&&M.length>0&&UL(l,f,M.join(" "))}if(w=z6(g,22),void 0!==t){const x=w.projection=[];for(let M=0;M<this.ngContentSelectors.length;M++){const T=t[M];x.push(null!=T?Array.from(T):null)}}y=function m5e(n,e,t,i){const r=t[1],s=function K8e(n,e,t){const i=d();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),dG(n,i,e,Yp(n,e,1,null),t),aG(n,i));const r=Kf(e,n,i.directiveStart,i);W2(r,e);const s=b2(i,e);return s&&W2(s,e),r}(r,t,e);if(n[8]=t[8]=s,null!==i)for(const a of i)a(s,e);if(e.contentQueries){const a=d();e.contentQueries(1,s,a.directiveStart)}const o=d();return!r.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(m0(o.index),lG(t[1],o,0,o.directiveStart,o.directiveEnd,e),uG(e,s)),s}(C,this.componentDef,_,[A5e]),rD(g,_,null)}finally{Um()}return new p5e(this.componentType,y,Y1(w,_),_,w)}}class p5e extends class Ws{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new u5e(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;dD(s[1],s,r,e,t),cG(s,this._tNode.index)}}get injector(){return new gh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function A5e(){const n=d();_p(Dt()[1],n)}function zt(n){let e=function yG(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(fa(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new jt(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=gD(n.inputs),o.declaredInputs=gD(n.declaredInputs),o.outputs=gD(n.outputs);const a=r.hostBindings;a&&w5e(n,a);const c=r.viewQuery,l=r.contentQueries;if(c&&_5e(n,c),l&&y5e(n,l),fo(n.inputs,r.inputs),fo(n.declaredInputs,r.declaredInputs),fo(n.outputs,r.outputs),fa(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===zt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function v5e(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=jf(r.hostAttrs,t=jf(t,r.hostAttrs))}}(i)}function gD(n){return n===ou?{}:n===Pr?[]:n}function _5e(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function y5e(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function w5e(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let Mw=null;function d8(){if(!Mw){const n=ws.Symbol;if(n&&n.iterator)Mw=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Mw=i)}}}return Mw}function SA(n){return!!mD(n)&&(Array.isArray(n)||!(n instanceof Map)&&d8()in n)}function mD(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function M0(n,e,t){return n[e]=t}function j2(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function p8(n,e,t,i){const r=j2(n,e,t);return j2(n,e+1,i)||r}function M4(n,e,t,i,r,s){const o=p8(n,e,t,i);return p8(n,e+2,r,s)||o}function ds(n,e,t,i){const r=Dt();return j2(r,Fn(),e)&&(Mr(),x0(Ga(),r,n,e,t,i)),ds}function Jp(n,e,t,i){return j2(n,Fn(),t)?e+tr(t)+i:mr}function e7(n,e,t,i,r,s){const a=p8(n,hn(),t,r);return Jn(2),a?e+tr(t)+i+tr(r)+s:mr}function t7(n,e,t,i,r,s,o,a){const l=function Sw(n,e,t,i,r){const s=p8(n,e,t,i);return j2(n,e+2,r)||s}(n,hn(),t,r,o);return Jn(3),l?e+tr(t)+i+tr(r)+s+tr(o)+a:mr}function Yt(n,e,t,i,r,s,o,a){const c=Dt(),l=Mr(),u=n+22,f=l.firstCreatePass?function L5e(n,e,t,i,r,s,o,a,c){const l=e.consts,u=Xp(e,n,4,o||null,x2(l,a));cD(e,t,u,x2(l,c)),_p(e,u);const f=u.tViews=aD(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,u),f.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,i,r,s,o):l.data[u];b(f,!1);const p=c[11].createComment("");dw(l,c,p,f),W2(p,c),ww(c,c[u]=pG(p,c,p,f)),Zl(f)&&sD(l,c,f),null!=o&&oD(c,f,a)}function Ir(n){return H3(function pe(){return zi.lFrame.contextLView}(),22+n)}function Se(n,e,t){const i=Dt();return j2(i,Fn(),e)&&U3(Mr(),Ga(),i,n,e,i[11],t,!1),Se}function AD(n,e,t,i,r){const o=r?"class":"style";dD(n,t,e.inputs[o],o,i)}function H(n,e,t,i){const r=Dt(),s=Mr(),o=22+n,a=r[11],c=r[o]=PL(a,e,function VT(){return zi.lFrame.currentNamespace}()),l=s.firstCreatePass?function I5e(n,e,t,i,r,s,o){const a=e.consts,l=Xp(e,n,2,r,x2(a,s));return cD(e,t,l,x2(a,o)),null!==l.attrs&&bw(l,l.attrs,!1),null!==l.mergedAttrs&&bw(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,0,e,t,i):s.data[o];b(l,!0);const u=l.mergedAttrs;null!==u&&xp(a,c,u);const f=l.classes;null!==f&&UL(a,c,f);const p=l.styles;return null!==p&&EU(a,c,p),64!=(64&l.flags)&&dw(s,r,c,l),0===function M2(){return zi.lFrame.elementDepthCount}()&&W2(c,r),function g0(){zi.lFrame.elementDepthCount++}(),Zl(l)&&(sD(s,r,l),iG(s,l,r)),null!==i&&oD(r,l),H}function N(){let n=d();B()?z():(n=n.parent,b(n,!1));const e=n;!function C4(){zi.lFrame.elementDepthCount--}();const t=Mr();return t.firstCreatePass&&(_p(t,n),S1(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function U6(n){return 0!=(16&n.flags)}(e)&&AD(t,e,Dt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function bp(n){return 0!=(32&n.flags)}(e)&&AD(t,e,Dt(),e.stylesWithoutHost,!1),N}function Ke(n,e,t,i){return H(n,e,t,i),N(),Ke}function Zs(n,e,t){const i=Dt(),r=Mr(),s=n+22,o=r.firstCreatePass?function B5e(n,e,t,i,r){const s=e.consts,o=x2(s,i),a=Xp(e,n,8,"ng-container",o);return null!==o&&bw(a,o,!0),cD(e,t,a,x2(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];b(o,!0);const a=i[s]=i[11].createComment("");return dw(r,i,a,o),W2(a,i),Zl(o)&&(sD(r,i,o),iG(r,o,i)),null!=t&&oD(i,o),Zs}function Js(){let n=d();const e=Mr();return B()?z():(n=n.parent,b(n,!1)),e.firstCreatePass&&(_p(e,n),S1(n)&&e.queries.elementEnd(n)),Js}function S2(n,e,t){return Zs(n,e,t),Js(),S2}function Qa(){return Dt()}function TA(n){return!!n&&"function"==typeof n.then}function DG(n){return!!n&&"function"==typeof n.subscribe}const vD=DG;function dn(n,e,t,i){const r=Dt(),s=Mr(),o=d();return IG(s,r,r[11],o,n,e,0,i),dn}function _D(n,e){const t=d(),i=Dt(),r=Mr();return IG(r,i,AG(dh(r.data),t,i),t,n,e),_D}function IG(n,e,t,i,r,s,o,a){const c=Zl(i),u=n.firstCreatePass&&mG(n),f=e[8],p=gG(e);let g=!0;if(3&i.type||a){const w=b2(i,e),C=a?a(w):w,x=p.length,M=a?I=>a(ra(I[i.index])):i.index;let T=null;if(!a&&c&&(T=function R5e(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==T)(T.__ngLastListenerFn__||T).__ngNextListenerFn__=s,T.__ngLastListenerFn__=s,g=!1;else{s=RG(i,e,f,s,!1);const I=t.listen(C,r,s);p.push(s,I),u&&u.push(r,M,x,x+1)}}else s=RG(i,e,f,s,!1);const _=i.outputs;let y;if(g&&null!==_&&(y=_[r])){const w=y.length;if(w)for(let C=0;C<w;C+=2){const F=e[y[C]][y[C+1]].subscribe(s),P=p.length;p.push(s,F),u&&u.push(r,i.index,P,-(P+1))}}}function BG(n,e,t,i){try{return!1!==t(i)}catch(r){return vG(n,r),!1}}function RG(n,e,t,i,r){return function s(o){if(o===Function)return i;hD(2&n.flags?sa(n.index,e):e);let c=BG(e,0,i,o),l=s.__ngNextListenerFn__;for(;l;)c=BG(e,0,l,o)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function Xt(n=1){return function zT(n){return(zi.lFrame.contextLView=function OT(n,e){for(;n>0;)e=e[15],n--;return e}(n,zi.lFrame.contextLView))[8]}(n)}function F5e(n,e){let t=null;const i=function o8e(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?IU(n,s,!0):l8e(i,s))return r}else t=r}return t}function Z1(n){const e=Dt()[16][6];if(!e.projection){const i=e.projection=q6(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?F5e(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Bo(n,e=0,t){const i=Dt(),r=Mr(),s=Xp(r,22+n,16,null,t||null);null===s.projection&&(s.projection=e),z(),64!=(64&s.flags)&&function J6e(n,e,t){SU(e[11],0,e,t,mU(n,t,e),yU(t.parent||e[6],t,e))}(r,i,s)}function El(n,e,t){return bs(n,"",e,"",t),El}function bs(n,e,t,i,r){const s=Dt(),o=Jp(s,e,t,i);return o!==mr&&U3(Mr(),Ga(),s,n,o,s[11],r,!1),bs}function UG(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?yu(s):Eh(s),c=!1;for(;0!==a&&(!1===c||o);){const u=n[a+1];H5e(n[a],e)&&(c=!0,n[a+1]=i?KL(u):$L(u)),a=i?yu(u):Eh(u)}c&&(n[t+1]=i?$L(s):KL(s))}function H5e(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Zf(n,e)>=0}const Hc={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function GG(n){return n.substring(Hc.key,Hc.keyEnd)}function z5e(n){return n.substring(Hc.value,Hc.valueEnd)}function QG(n,e){const t=Hc.textEnd;return t===e?-1:(e=Hc.keyEnd=function V5e(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Hc.key=e,t),c7(n,e,t))}function WG(n,e){const t=Hc.textEnd;let i=Hc.key=c7(n,e,t);return t===i?-1:(i=Hc.keyEnd=function U5e(n,e,t){let i;for(;e<t&&(45===(i=n.charCodeAt(e))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)e++;return e}(n,i,t),i=$G(n,i,t),i=Hc.value=c7(n,i,t),i=Hc.valueEnd=function G5e(n,e,t){let i=-1,r=-1,s=-1,o=e,a=o;for(;o<t;){const c=n.charCodeAt(o++);if(59===c)return a;34===c||39===c?a=o=qG(n,c,o,t):e===o-4&&85===s&&82===r&&76===i&&40===c?a=o=qG(n,41,o,t):c>32&&(a=o),s=r,r=i,i=-33&c}return a}(n,i,t),$G(n,i,t))}function jG(n){Hc.key=0,Hc.keyEnd=0,Hc.value=0,Hc.valueEnd=0,Hc.textEnd=n.length}function c7(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function $G(n,e,t,i){return(e=c7(n,e,t))<t&&e++,e}function qG(n,e,t,i){let r=-1,s=t;for(;s<i;){const o=n.charCodeAt(s++);if(o==e&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function a3(n,e,t){return Cu(n,e,t,!1),a3}function Br(n,e){return Cu(n,e,null,!0),Br}function Q5e(n,e){for(let t=function N5e(n){return jG(n),WG(n,c7(n,0,Hc.textEnd))}(e);t>=0;t=WG(e,t))YG(n,GG(e),z5e(e))}function yD(n){bu(Cl,S0,n,!0)}function S0(n,e){for(let t=function O5e(n){return jG(n),QG(n,c7(n,0,Hc.textEnd))}(e);t>=0;t=QG(e,t))Cl(n,GG(e),!0)}function Cu(n,e,t,i){const r=Dt(),s=Mr(),o=Jn(2);s.firstUpdatePass&&XG(s,n,o,i),e!==mr&&j2(r,o,e)&&ZG(s,s.data[Hs()],r,r[11],n,r[o+1]=function Y5e(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=oo(bl(n)))),n}(e,t),i,o)}function bu(n,e,t,i){const r=Mr(),s=Jn(2);r.firstUpdatePass&&XG(r,null,s,i);const o=Dt();if(t!==mr&&j2(o,s,t)){const a=r.data[Hs()];if(eQ(a,i)&&!KG(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=hc(c,t||"")),AD(r,a,o,t,i)}else!function X5e(n,e,t,i,r,s,o,a){r===mr&&(r=Pr);let c=0,l=0,u=0<r.length?r[0]:null,f=0<s.length?s[0]:null;for(;null!==u||null!==f;){const p=c<r.length?r[c+1]:void 0,g=l<s.length?s[l+1]:void 0;let y,_=null;u===f?(c+=2,l+=2,p!==g&&(_=f,y=g)):null===f||null!==u&&u<f?(c+=2,_=u):(l+=2,_=f,y=g),null!==_&&ZG(n,e,t,i,_,y,o,a),u=c<r.length?r[c]:null,f=l<s.length?s[l]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function K5e(n,e,t){if(null==t||""===t)return Pr;const i=[],r=bl(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}function KG(n,e){return e>=n.expandoStartIndex}function XG(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Hs()],o=KG(n,t);eQ(s,i)&&null===e&&!o&&(e=!1),e=function W5e(n,e,t,i){const r=dh(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=LA(t=wD(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=wD(r,n,e,t,i),null===s){let c=function j5e(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Eh(i))return n[yu(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=wD(null,n,e,c[1],i),c=LA(c,e.attrs,i),function $5e(n,e,t,i){n[yu(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function q5e(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=LA(i,n[s].hostAttrs,t);return LA(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function k5e(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=yu(o),c=Eh(o);n[i]=t;let u,l=!1;if(Array.isArray(t)){const f=t;u=f[1],(null===u||Zf(f,u)>0)&&(l=!0)}else u=t;if(r)if(0!==c){const p=yu(n[a+1]);n[i+1]=mw(p,a),0!==p&&(n[p+1]=qL(n[p+1],i)),n[a+1]=function I8e(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=mw(a,0),0!==a&&(n[a+1]=qL(n[a+1],i)),a=i;else n[i+1]=mw(c,0),0===a?a=i:n[c+1]=qL(n[c+1],i),c=i;l&&(n[i+1]=$L(n[i+1])),UG(n,u,i,!0),UG(n,u,i,!1),function P5e(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Zf(s,e)>=0&&(t[i+1]=KL(t[i+1]))}(e,u,n,i,s),o=mw(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function wD(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=LA(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function LA(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Cl(n,o,!!t||e[++s]))}return void 0===n?null:n}function YG(n,e,t){Cl(n,e,bl(t))}function ZG(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1];Ew(function $U(n){return 1==(1&n)}(l)?JG(c,e,t,r,Eh(l),o):void 0)||(Ew(s)||function jU(n){return 2==(2&n)}(l)&&(s=JG(c,null,t,r,a,o)),function t8e(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:o3.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=o3.Important),n.setStyle(t,i,r,s))}}(i,o,o2(Hs(),t),r,s))}function JG(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),u=l?c[1]:c,f=null===u;let p=t[r+1];p===mr&&(p=f?Pr:void 0);let g=f?nA(p,i):u===i?p:void 0;if(l&&!Ew(g)&&(g=nA(c,i)),Ew(g)&&(a=g,o))return a;const _=n[r+1];r=o?yu(_):Eh(_)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=nA(c,i))}return a}function Ew(n){return void 0!==n}function eQ(n,e){return 0!=(n.flags&(e?16:32))}function V(n,e=""){const t=Dt(),i=Mr(),r=n+22,s=i.firstCreatePass?Xp(i,r,1,e,null):i.data[r],o=t[r]=function kL(n,e){return n.createText(e)}(t[11],e);dw(i,t,o,s),b(s,!1)}function Lh(n){return Kn("",n,""),Lh}function Kn(n,e,t){const i=Dt(),r=Jp(i,n,e,t);return r!==mr&&Th(i,Hs(),r),Kn}function ud(n,e,t,i,r){const s=Dt(),o=e7(s,n,e,t,i,r);return o!==mr&&Th(s,Hs(),o),ud}function CD(n,e,t,i,r,s,o){const a=Dt(),c=t7(a,n,e,t,i,r,s,o);return c!==mr&&Th(a,Hs(),c),CD}function aa(n,e,t){bu(Cl,S0,Jp(Dt(),n,e,t),!0)}function Tw(n,e,t,i,r){bu(Cl,S0,e7(Dt(),n,e,t,i,r),!0)}function aQ(n,e,t,i,r,s,o,a,c,l,u,f,p,g,_,y,w){bu(Cl,S0,function a7(n,e,t,i,r,s,o,a,c,l,u,f,p,g,_,y,w,C){const x=hn();let M=M4(n,x,t,r,o,c);return M=M4(n,x+4,u,p,_,w)||M,Jn(8),M?e+tr(t)+i+tr(r)+s+tr(o)+a+tr(c)+l+tr(u)+f+tr(p)+g+tr(_)+y+tr(w)+C:mr}(Dt(),n,e,t,i,r,s,o,a,c,l,u,f,p,g,_,y,w),!0)}function DA(n,e,t,i,r){return Cu(n,Jp(Dt(),e,t,i),r,!1),DA}function g8(n,e,t){const i=Dt();return j2(i,Fn(),e)&&U3(Mr(),Ga(),i,n,e,i[11],t,!0),g8}function bD(n,e,t){const i=Dt();if(j2(i,Fn(),e)){const s=Mr(),o=Ga();U3(s,o,i,n,e,AG(dh(s.data),o,i),t,!0)}return bD}const m8=void 0;var ppe=["en",[["a","p"],["AM","PM"],m8],[["AM","PM"],m8,m8],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],m8,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],m8,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",m8,"{1} 'at' {0}",m8],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dpe(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let l7={};function Tl(n){const e=function gpe(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=AQ(e);if(t)return t;const i=e.split("-")[0];if(t=AQ(i),t)return t;if("en"===i)return ppe;throw new jt(701,!1)}function AQ(n){return n in l7||(l7[n]=ws.ng&&ws.ng.common&&ws.ng.common.locales&&ws.ng.common.locales[n]),l7[n]}var ti=(()=>((ti=ti||{})[ti.LocaleId=0]="LocaleId",ti[ti.DayPeriodsFormat=1]="DayPeriodsFormat",ti[ti.DayPeriodsStandalone=2]="DayPeriodsStandalone",ti[ti.DaysFormat=3]="DaysFormat",ti[ti.DaysStandalone=4]="DaysStandalone",ti[ti.MonthsFormat=5]="MonthsFormat",ti[ti.MonthsStandalone=6]="MonthsStandalone",ti[ti.Eras=7]="Eras",ti[ti.FirstDayOfWeek=8]="FirstDayOfWeek",ti[ti.WeekendRange=9]="WeekendRange",ti[ti.DateFormat=10]="DateFormat",ti[ti.TimeFormat=11]="TimeFormat",ti[ti.DateTimeFormat=12]="DateTimeFormat",ti[ti.NumberSymbols=13]="NumberSymbols",ti[ti.NumberFormats=14]="NumberFormats",ti[ti.CurrencyCode=15]="CurrencyCode",ti[ti.CurrencySymbol=16]="CurrencySymbol",ti[ti.CurrencyName=17]="CurrencyName",ti[ti.Currencies=18]="Currencies",ti[ti.Directionality=19]="Directionality",ti[ti.PluralCase=20]="PluralCase",ti[ti.ExtraData=21]="ExtraData",ti))();const u7="en-US";let vQ=u7;function SD(n,e,t,i,r){if(n=Ln(n),Array.isArray(n))for(let s=0;s<n.length;s++)SD(n[s],e,t,i,r);else{const s=Mr(),o=Dt();let a=E(n)?n:Ln(n.provide),c=Ft(n);const l=d(),u=1048575&l.providerIndexes,f=l.directiveStart,p=l.providerIndexes>>20;if(E(n)||!n.multi){const g=new N6(c,r,U),_=TD(a,e,r?u:u+p,f);-1===_?(Ep(G6(l,o),s,a),ED(s,n,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(g),o.push(g)):(t[_]=g,o[_]=g)}else{const g=TD(a,e,u+p,f),_=TD(a,e,u,u+p),y=g>=0&&t[g],w=_>=0&&t[_];if(r&&!w||!r&&!y){Ep(G6(l,o),s,a);const C=function f7e(n,e,t,i,r){const s=new N6(n,t,U);return s.multi=[],s.index=e,s.componentProviders=0,GQ(s,r,i&&!t),s}(r?h7e:u7e,t.length,r,i,c);!r&&w&&(t[_].providerFactory=C),ED(s,n,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(C),o.push(C)}else ED(s,n,g>-1?g:_,GQ(t[r?_:g],c,!r&&i));!r&&i&&w&&t[_].componentProviders++}}}function ED(n,e,t,i){const r=E(e),s=function S(n){return!!n.useClass}(e);if(r||s){const c=(s?Ln(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=l.indexOf(t);-1===u?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function GQ(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function TD(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function u7e(n,e,t,i){return LD(this.multi,[])}function h7e(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Kf(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),LD(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],LD(r,s);return s}function LD(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Ki(n,e=[]){return t=>{t.providersResolver=(i,r)=>function l7e(n,e,t){const i=Mr();if(i.firstCreatePass){const r=fa(n);SD(t,i.data,i.blueprint,r,!0),SD(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class A8{}class QQ{}class WQ extends A8{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pD(this);const i=Li(e);this._bootstrapComponents=Sh(i.bootstrap),this._r3Injector=zU(e,t,[{provide:A8,useValue:this},{provide:Ni,useValue:this.componentFactoryResolver}],oo(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class DD extends QQ{constructor(e){super(),this.moduleType=e}create(e){return new WQ(this.moduleType,e)}}class p7e extends A8{constructor(e,t,i){super(),this.componentFactoryResolver=new pD(this),this.instance=null;const r=new xe([...e,{provide:A8,useValue:this},{provide:Ni,useValue:this.componentFactoryResolver}],t||ie(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Rw(n,e,t=null){return new p7e(n,e,t).injector}let g7e=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=cw(0,t.type),r=i.length>0?Rw([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Lt({token:n,providedIn:"environment",factory:()=>new n(Ye(ye))}),n})();function jQ(n){n.getStandaloneInjector=e=>e.get(g7e).getOrCreateStandaloneInjector(n)}function xu(n,e,t){const i=pt()+n,r=Dt();return r[i]===mr?M0(r,i,t?e.call(t):e()):function EA(n,e){return n[e]}(r,i)}function G3(n,e,t,i){return eW(Dt(),pt(),n,e,t,i)}function PA(n,e){const t=n[e];return t===mr?void 0:t}function eW(n,e,t,i,r,s){const o=e+t;return j2(n,o,r)?M0(n,o+1,s?i.call(s,r):i(r)):PA(n,o+1)}function tW(n,e,t,i,r,s,o){const a=e+t;return p8(n,a,r,s)?M0(n,a+2,o?i.call(o,r,s):i(r,s)):PA(n,a+2)}function ba(n,e){const t=Mr();let i;const r=n+22;t.firstCreatePass?(i=function I7e(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=a1(i.type)),o=$1(U);try{const a=Sp(!1),c=s();return Sp(a),function D5e(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Dt(),r,c),c}finally{$1(o)}}function J1(n,e,t){const i=n+22,r=Dt(),s=H3(r,i);return zA(r,i)?eW(r,pt(),e,s.transform,t,s):s.transform(t)}function HA(n,e,t,i){const r=n+22,s=Dt(),o=H3(s,r);return zA(s,r)?tW(s,pt(),e,o.transform,t,i,o):o.transform(t,i)}function zA(n,e){return n[1].data[e].pure}function BD(n){return e=>{setTimeout(n,void 0,e)}}const Ji=class k7e extends Je{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=BD(s),r&&(r=BD(r)),o&&(o=BD(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Re&&e.add(a),a}};function P7e(){return this._results[d8()]()}class h7{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=d8(),i=h7.prototype;i[t]||(i[t]=P7e)}get changes(){return this._changes||(this._changes=new Ji)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=wl(e);(this._changesDetected=!function qT(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let zc=(()=>{class n{}return n.__NG_ELEMENT_ID__=O7e,n})();const H7e=zc,z7e=class extends H7e{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tViews,r=_w(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(i)),rD(i,r,e),new xA(r)}};function O7e(){return Fw(d(),Dt())}function Fw(n,e){return 4&n.type?new z7e(e,n,Y1(n,e)):null}let Oc=(()=>{class n{}return n.__NG_ELEMENT_ID__=N7e,n})();function N7e(){return aW(d(),Dt())}const V7e=Oc,sW=class extends V7e{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Y1(this._hostTNode,this._hostLView)}get injector(){return new gh(this._hostTNode,this._hostLView)}get parentInjector(){const e=Q6(this._hostTNode,this._hostLView);if(jm(e)){const t=qf(e,this._hostLView),i=$f(e);return new gh(t[1].data[i+8],t)}return new gh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=oW(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,i,r,s){const o=e&&!function $6(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const f=t||{};a=f.index,i=f.injector,r=f.projectableNodes,s=f.environmentInjector||f.ngModuleRef}const c=o?e:new MA(nr(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const p=(o?l:this.parentInjector).get(ye,null);p&&(s=p)}const u=c.create(l,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function O6(n){return To(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const f=i[3],p=new sW(f,f[6],f[3]);p.detach(p.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function $6e(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],Ry(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function q6e(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(r,i,o,s);const a=NL(s,o),c=i[11],l=fw(c,o[7]);return null!==l&&function Q6e(n,e,t,i,r,s){i[0]=r,i[6]=e,bA(n,i,t,1,r,s)}(r,o[6],c,i,l,a),e.attachToViewContainerRef(),Ry(RD(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=oW(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=HL(this._lContainer,t);i&&(Rp(RD(this._lContainer),t),gU(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=HL(this._lContainer,t);return i&&null!=Rp(RD(this._lContainer),t)?new xA(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function oW(n){return n[8]}function RD(n){return n[8]||(n[8]=[])}function aW(n,e){let t;const i=e[n.index];if(To(i))t=i;else{let r;if(8&n.type)r=ra(i);else{const s=e[11];r=s.createComment("");const o=b2(n,e);h8(s,fw(s,o),r,function Z6e(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=pG(i,e,r,n),ww(e,t)}return new sW(t,n,e)}class FD{constructor(e){this.queryList=e,this.matches=null}clone(){return new FD(this.queryList)}setDirty(){this.queryList.setDirty()}}class kD{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new kD(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==fW(e,t).matches&&this.queries[t].setDirty()}}class cW{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class PD{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new PD(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class HD{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new HD(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,Q7e(t,s)),this.matchTNodeWithReadOption(e,t,Ip(t,e,s,!1,!1))}else i===zc?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ip(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===fn||r===Oc||r===zc&&4&t.type)this.addMatch(t.index,-2);else{const s=Ip(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Q7e(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function j7e(n,e,t,i){return-1===t?function W7e(n,e){return 11&n.type?Y1(n,e):4&n.type?Fw(n,e):null}(e,n):-2===t?function $7e(n,e,t){return t===fn?Y1(e,n):t===zc?Fw(e,n):t===Oc?aW(e,n):void 0}(n,e,i):Kf(n,n[1],t,e)}function lW(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:j7e(e,s[l],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function zD(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=lW(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let f=10;f<u.length;f++){const p=u[f];p[17]===p[3]&&zD(p[1],p,l,i)}if(null!==u[9]){const f=u[9];for(let p=0;p<f.length;p++){const g=f[p];zD(g[1],g,l,i)}}}}}return i}function Qi(n){const e=Dt(),t=Mr(),i=ph();Om(i+1);const r=fW(t,i);if(n.dirty&&function p0(n){return 4==(4&n[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?zD(t,e,i,[]):lW(t,e,r,i);n.reset(s,yo),n.notifyOnChanges()}return!0}return!1}function wo(n,e,t){const i=Mr();i.firstCreatePass&&(hW(i,new cW(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),uW(i,Dt(),e)}function Wa(n,e,t,i){const r=Mr();if(r.firstCreatePass){const s=d();hW(r,new cW(e,t,i),s.index),function K7e(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}uW(r,Dt(),t)}function Wi(){return function q7e(n,e){return n[19].queries[e].queryList}(Dt(),ph())}function uW(n,e,t){const i=new h7(4==(4&t));sG(n,e,i,i.destroy),null===e[19]&&(e[19]=new kD),e[19].queries.push(new FD(i))}function hW(n,e,t){null===n.queries&&(n.queries=new PD),n.queries.track(new HD(e,t))}function fW(n,e){return n.queries.getByIndex(e)}function c3(n,e){return Fw(n,e)}function Pw(...n){}const NA=new Bt("Application Initializer");let Hw=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Pw,this.reject=Pw,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(TA(s))t.push(s);else if(vD(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Ye(NA,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const VA=new Bt("AppId",{providedIn:"root",factory:function IW(){return`${GD()}${GD()}${GD()}`}});function GD(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const BW=new Bt("Platform Initializer"),Q3=new Bt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),zw=new Bt("appBootstrapListener"),S4=new Bt("AnimationModuleType");let gge=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const E0=new Bt("LocaleId",{providedIn:"root",factory:()=>Cs(E0,zn.Optional|zn.SkipSelf)||function mge(){return typeof $localize<"u"&&$localize.locale||u7}()});class vge{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let QD=(()=>{class n{compileModuleSync(t){return new DD(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=Sh(Li(t).declarations).reduce((o,a)=>{const c=nr(a);return c&&o.push(new MA(c)),o},[]);return new vge(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wge=(()=>Promise.resolve(0))();function WD(n){typeof Zone>"u"?wge.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Xi{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ji(!1),this.onMicrotaskEmpty=new Ji(!1),this.onStable=new Ji(!1),this.onError=new Ji(!1),typeof Zone>"u")throw new jt(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Cge(){let n=ws.requestAnimationFrame,e=ws.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Mge(n){const e=()=>{!function xge(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ws,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,$D(n),n.isCheckStableRunning=!0,jD(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),$D(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return kW(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),PW(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return kW(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),PW(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,$D(n),jD(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xi.isInAngularZone())throw new jt(909,!1)}static assertNotInAngularZone(){if(Xi.isInAngularZone())throw new jt(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,bge,Pw,Pw);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const bge={};function jD(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function $D(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function kW(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function PW(n){n._nesting--,jD(n)}class Sge{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ji,this.onMicrotaskEmpty=new Ji,this.onStable=new Ji,this.onError=new Ji}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const HW=new Bt(""),Ow=new Bt("");let XD,qD=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,XD||(function Ege(n){XD=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xi.assertNotInAngularZone(),WD(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())WD(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(Ye(Xi),Ye(KD),Ye(Ow))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),KD=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return XD?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),hd=null;const zW=new Bt("AllowMultipleToken"),YD=new Bt("PlatformDestroyListeners");class OW{constructor(e,t){this.name=e,this.token=t}}function VW(n,e,t=[]){const i=`Platform: ${e}`,r=new Bt(i);return(s=[])=>{let o=ZD();if(!o||o.injector.get(zW,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function Dge(n){if(hd&&!hd.get(zW,!1))throw new jt(400,!1);hd=n;const e=n.get(GW);(function NW(n){const e=n.get(BW,null);e&&e.forEach(t=>t())})(n)}(function UW(n=[],e){return yc.create({name:e,providers:[{provide:D,useValue:"platform"},{provide:YD,useValue:new Set([()=>hd=null])},...n]})}(a,i))}return function Bge(n){const e=ZD();if(!e)throw new jt(401,!1);return e}()}}function ZD(){return hd?.get(GW)??null}let GW=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function WW(n,e){let t;return t="noop"===n?new Sge:("zone.js"===n?void 0:n)||new Xi(e),t}(i?.ngZone,function QW(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:Xi,useValue:r}];return r.run(()=>{const o=yc.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),c=a.injector.get(Mh,null);if(!c)throw new jt(402,!1);return r.runOutsideAngular(()=>{const l=r.onError.subscribe({next:u=>{c.handleError(u)}});a.onDestroy(()=>{Nw(this._modules,a),l.unsubscribe()})}),function jW(n,e,t){try{const i=t();return TA(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(c,r,()=>{const l=a.injector.get(Hw);return l.runInitializers(),l.donePromise.then(()=>(function _Q(n){fc(n,"Expected localeId to be defined"),"string"==typeof n&&(vQ=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(E0,u7)||u7),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=$W({},i);return function Tge(n,e,t){const i=new DD(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(p7);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new jt(403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new jt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(YD,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Ye(yc))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function $W(n,e){return Array.isArray(e)?e.reduce($W,n):{...n,...e}}let p7=(()=>{class n{constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Ce(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Ce(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{Xi.assertNotInAngularZone(),WD(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{Xi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),l.unsubscribe()}});this.isStable=Zc(s,o.pipe(L3()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof Cr;if(!this._injector.get(Hw).done)throw!r&&function r2(n){const e=nr(n)||ta(n)||K1(n);return null!==e&&e.standalone}(t),new jt(405,false);let o;o=r?t:this._injector.get(Ni).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Lge(n){return n.isBoundToModule}(o)?void 0:this._injector.get(A8),l=o.create(yc.NULL,[],i||o.selector,a),u=l.location.nativeElement,f=l.injector.get(HW,null);return f?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Nw(this.components,l),f?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new jt(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Nw(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(zw,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Nw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new jt(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(Ye(Xi),Ye(ye),Ye(Mh))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Nw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let KW=!0,XW=!1;function Vw(){return XW=!0,KW}let wc=(()=>{class n{}return n.__NG_ELEMENT_ID__=kge,n})();function kge(n){return function Pge(n,e,t){if(h0(n)&&!t){const i=sa(n.index,e);return new xA(i,i)}return 47&n.type?new xA(e[16],e):null}(d(),Dt(),16==(16&n))}class ej{constructor(){}supports(e){return SA(e)}create(e){return new Uge(e)}}const Vge=(n,e)=>e;class Uge{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Vge}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<nj(i,r,s)?t:i,a=nj(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,u=c-r;if(l!=u){for(let p=0;p<l;p++){const g=p<s.length?s[p]:s[p]=0,_=g+p;u<=_&&_<l&&(s[p]=g+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!SA(e))throw new jt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function S5e(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[d8()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new Gge(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new tj),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tj),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Gge{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Qge{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class tj{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new Qge,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nj(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class ij{constructor(){}supports(e){return e instanceof Map||mD(e)}create(){return new Wge}}class Wge{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||mD(e)))throw new jt(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new jge(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class jge{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function rj(){return new T0([new ej])}let T0=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||rj()),deps:[[n,new y0,new t3]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new jt(901,!1)}}return n.\u0275prov=Lt({token:n,providedIn:"root",factory:rj}),n})();function sj(){return new _8([new ij])}let _8=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||sj()),deps:[[n,new y0,new t3]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new jt(901,!1)}}return n.\u0275prov=Lt({token:n,providedIn:"root",factory:sj}),n})();const Kge=VW(null,"core",[]);let Xge=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Ye(p7))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})();function Ih(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Qw=null;function L0(){return Qw}const Fi=new Bt("DocumentToken");let iI=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:function(){return function eme(){return Ye(oj)}()},providedIn:"platform"}),n})();const tme=new Bt("Location Initialized");let oj=(()=>{class n extends iI{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L0().getBaseHref(this._doc)}onPopState(t){const i=L0().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=L0().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){aj()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){aj()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Ye(Fi))},n.\u0275prov=Lt({token:n,factory:function(){return function nme(){return new oj(Ye(Fi))}()},providedIn:"platform"}),n})();function aj(){return!!window.history.pushState}function rI(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function cj(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Bh(n){return n&&"?"!==n[0]?"?"+n:n}let y8=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:function(){return Cs(uj)},providedIn:"root"}),n})();const lj=new Bt("appBaseHref");let uj=(()=>{class n extends y8{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Cs(Fi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return rI(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Bh(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Bh(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Bh(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Ye(iI),Ye(lj,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ime=(()=>{class n extends y8{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=rI(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Bh(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Bh(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Ye(iI),Ye(lj,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),UA=(()=>{class n{constructor(t){this._subject=new Ji,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._baseHref=cj(hj(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Bh(i))}normalize(t){return n.stripTrailingSlash(function sme(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,hj(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Bh(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Bh(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Bh,n.joinWithSlash=rI,n.stripTrailingSlash=cj,n.\u0275fac=function(t){return new(t||n)(Ye(y8))},n.\u0275prov=Lt({token:n,factory:function(){return function rme(){return new UA(Ye(y8))}()},providedIn:"root"}),n})();function hj(n){return n.replace(/\/index.html$/,"")}var ec=(()=>((ec=ec||{})[ec.Format=0]="Format",ec[ec.Standalone=1]="Standalone",ec))(),xs=(()=>((xs=xs||{})[xs.Narrow=0]="Narrow",xs[xs.Abbreviated=1]="Abbreviated",xs[xs.Wide=2]="Wide",xs[xs.Short=3]="Short",xs))(),u1=(()=>((u1=u1||{})[u1.Short=0]="Short",u1[u1.Medium=1]="Medium",u1[u1.Long=2]="Long",u1[u1.Full=3]="Full",u1))(),Yi=(()=>((Yi=Yi||{})[Yi.Decimal=0]="Decimal",Yi[Yi.Group=1]="Group",Yi[Yi.List=2]="List",Yi[Yi.PercentSign=3]="PercentSign",Yi[Yi.PlusSign=4]="PlusSign",Yi[Yi.MinusSign=5]="MinusSign",Yi[Yi.Exponential=6]="Exponential",Yi[Yi.SuperscriptingExponent=7]="SuperscriptingExponent",Yi[Yi.PerMille=8]="PerMille",Yi[Yi.Infinity=9]="Infinity",Yi[Yi.NaN=10]="NaN",Yi[Yi.TimeSeparator=11]="TimeSeparator",Yi[Yi.CurrencyDecimal=12]="CurrencyDecimal",Yi[Yi.CurrencyGroup=13]="CurrencyGroup",Yi))();function Ww(n,e){return T4(Tl(n)[ti.DateFormat],e)}function jw(n,e){return T4(Tl(n)[ti.TimeFormat],e)}function $w(n,e){return T4(Tl(n)[ti.DateTimeFormat],e)}function E4(n,e){const t=Tl(n),i=t[ti.NumberSymbols][e];if(typeof i>"u"){if(e===Yi.CurrencyDecimal)return t[ti.NumberSymbols][Yi.Decimal];if(e===Yi.CurrencyGroup)return t[ti.NumberSymbols][Yi.Group]}return i}function dj(n){if(!n[ti.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[ti.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function T4(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function oI(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const vme=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,GA={},_me=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Nc=(()=>((Nc=Nc||{})[Nc.Short=0]="Short",Nc[Nc.ShortGMT=1]="ShortGMT",Nc[Nc.Long=2]="Long",Nc[Nc.Extended=3]="Extended",Nc))(),rr=(()=>((rr=rr||{})[rr.FullYear=0]="FullYear",rr[rr.Month=1]="Month",rr[rr.Date=2]="Date",rr[rr.Hours=3]="Hours",rr[rr.Minutes=4]="Minutes",rr[rr.Seconds=5]="Seconds",rr[rr.FractionalSeconds=6]="FractionalSeconds",rr[rr.Day=7]="Day",rr))(),Rr=(()=>((Rr=Rr||{})[Rr.DayPeriods=0]="DayPeriods",Rr[Rr.Days=1]="Days",Rr[Rr.Months=2]="Months",Rr[Rr.Eras=3]="Eras",Rr))();function yme(n,e,t,i){let r=function Lme(n){if(mj(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(a=>+a);return qw(r,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(vme))return function Dme(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-i,c=Number(n[6]||0),l=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,c,l),e}(i)}const e=new Date(n);if(!mj(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Rh(t,e)||e;let a,o=[];for(;e;){if(a=_me.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;e=u}}let c=r.getTimezoneOffset();i&&(c=gj(i,c),r=function Tme(n,e,t){const i=t?-1:1,r=n.getTimezoneOffset();return function Eme(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,i*(gj(e,r)-r))}(r,i,!0));let l="";return o.forEach(u=>{const f=function Sme(n){if(cI[n])return cI[n];let e;switch(n){case"G":case"GG":case"GGG":e=ga(Rr.Eras,xs.Abbreviated);break;case"GGGG":e=ga(Rr.Eras,xs.Wide);break;case"GGGGG":e=ga(Rr.Eras,xs.Narrow);break;case"y":e=bc(rr.FullYear,1,0,!1,!0);break;case"yy":e=bc(rr.FullYear,2,0,!0,!0);break;case"yyy":e=bc(rr.FullYear,3,0,!1,!0);break;case"yyyy":e=bc(rr.FullYear,4,0,!1,!0);break;case"Y":e=Zw(1);break;case"YY":e=Zw(2,!0);break;case"YYY":e=Zw(3);break;case"YYYY":e=Zw(4);break;case"M":case"L":e=bc(rr.Month,1,1);break;case"MM":case"LL":e=bc(rr.Month,2,1);break;case"MMM":e=ga(Rr.Months,xs.Abbreviated);break;case"MMMM":e=ga(Rr.Months,xs.Wide);break;case"MMMMM":e=ga(Rr.Months,xs.Narrow);break;case"LLL":e=ga(Rr.Months,xs.Abbreviated,ec.Standalone);break;case"LLLL":e=ga(Rr.Months,xs.Wide,ec.Standalone);break;case"LLLLL":e=ga(Rr.Months,xs.Narrow,ec.Standalone);break;case"w":e=aI(1);break;case"ww":e=aI(2);break;case"W":e=aI(1,!0);break;case"d":e=bc(rr.Date,1);break;case"dd":e=bc(rr.Date,2);break;case"c":case"cc":e=bc(rr.Day,1);break;case"ccc":e=ga(Rr.Days,xs.Abbreviated,ec.Standalone);break;case"cccc":e=ga(Rr.Days,xs.Wide,ec.Standalone);break;case"ccccc":e=ga(Rr.Days,xs.Narrow,ec.Standalone);break;case"cccccc":e=ga(Rr.Days,xs.Short,ec.Standalone);break;case"E":case"EE":case"EEE":e=ga(Rr.Days,xs.Abbreviated);break;case"EEEE":e=ga(Rr.Days,xs.Wide);break;case"EEEEE":e=ga(Rr.Days,xs.Narrow);break;case"EEEEEE":e=ga(Rr.Days,xs.Short);break;case"a":case"aa":case"aaa":e=ga(Rr.DayPeriods,xs.Abbreviated);break;case"aaaa":e=ga(Rr.DayPeriods,xs.Wide);break;case"aaaaa":e=ga(Rr.DayPeriods,xs.Narrow);break;case"b":case"bb":case"bbb":e=ga(Rr.DayPeriods,xs.Abbreviated,ec.Standalone,!0);break;case"bbbb":e=ga(Rr.DayPeriods,xs.Wide,ec.Standalone,!0);break;case"bbbbb":e=ga(Rr.DayPeriods,xs.Narrow,ec.Standalone,!0);break;case"B":case"BB":case"BBB":e=ga(Rr.DayPeriods,xs.Abbreviated,ec.Format,!0);break;case"BBBB":e=ga(Rr.DayPeriods,xs.Wide,ec.Format,!0);break;case"BBBBB":e=ga(Rr.DayPeriods,xs.Narrow,ec.Format,!0);break;case"h":e=bc(rr.Hours,1,-12);break;case"hh":e=bc(rr.Hours,2,-12);break;case"H":e=bc(rr.Hours,1);break;case"HH":e=bc(rr.Hours,2);break;case"m":e=bc(rr.Minutes,1);break;case"mm":e=bc(rr.Minutes,2);break;case"s":e=bc(rr.Seconds,1);break;case"ss":e=bc(rr.Seconds,2);break;case"S":e=bc(rr.FractionalSeconds,1);break;case"SS":e=bc(rr.FractionalSeconds,2);break;case"SSS":e=bc(rr.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Xw(Nc.Short);break;case"ZZZZZ":e=Xw(Nc.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Xw(Nc.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Xw(Nc.Long);break;default:return null}return cI[n]=e,e}(u);l+=f?f(r,t,c):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function qw(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Rh(n,e){const t=function ome(n){return Tl(n)[ti.LocaleId]}(n);if(GA[t]=GA[t]||{},GA[t][e])return GA[t][e];let i="";switch(e){case"shortDate":i=Ww(n,u1.Short);break;case"mediumDate":i=Ww(n,u1.Medium);break;case"longDate":i=Ww(n,u1.Long);break;case"fullDate":i=Ww(n,u1.Full);break;case"shortTime":i=jw(n,u1.Short);break;case"mediumTime":i=jw(n,u1.Medium);break;case"longTime":i=jw(n,u1.Long);break;case"fullTime":i=jw(n,u1.Full);break;case"short":const r=Rh(n,"shortTime"),s=Rh(n,"shortDate");i=Kw($w(n,u1.Short),[r,s]);break;case"medium":const o=Rh(n,"mediumTime"),a=Rh(n,"mediumDate");i=Kw($w(n,u1.Medium),[o,a]);break;case"long":const c=Rh(n,"longTime"),l=Rh(n,"longDate");i=Kw($w(n,u1.Long),[c,l]);break;case"full":const u=Rh(n,"fullTime"),f=Rh(n,"fullDate");i=Kw($w(n,u1.Full),[u,f])}return i&&(GA[t][e]=i),i}function Kw(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function Su(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function bc(n,e,t=0,i=!1,r=!1){return function(s,o){let a=function Cme(n,e){switch(n){case rr.FullYear:return e.getFullYear();case rr.Month:return e.getMonth();case rr.Date:return e.getDate();case rr.Hours:return e.getHours();case rr.Minutes:return e.getMinutes();case rr.Seconds:return e.getSeconds();case rr.FractionalSeconds:return e.getMilliseconds();case rr.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===rr.Hours)0===a&&-12===t&&(a=12);else if(n===rr.FractionalSeconds)return function wme(n,e){return Su(n,3).substring(0,e)}(a,e);const c=E4(o,Yi.MinusSign);return Su(a,e,c,i,r)}}function ga(n,e,t=ec.Format,i=!1){return function(r,s){return function bme(n,e,t,i,r,s){switch(t){case Rr.Months:return function lme(n,e,t){const i=Tl(n),s=T4([i[ti.MonthsFormat],i[ti.MonthsStandalone]],e);return T4(s,t)}(e,r,i)[n.getMonth()];case Rr.Days:return function cme(n,e,t){const i=Tl(n),s=T4([i[ti.DaysFormat],i[ti.DaysStandalone]],e);return T4(s,t)}(e,r,i)[n.getDay()];case Rr.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const l=function dme(n){const e=Tl(n);return dj(e),(e[ti.ExtraData][2]||[]).map(i=>"string"==typeof i?oI(i):[oI(i[0]),oI(i[1])])}(e),u=function pme(n,e,t){const i=Tl(n);dj(i);const s=T4([i[ti.ExtraData][0],i[ti.ExtraData][1]],e)||[];return T4(s,t)||[]}(e,r,i),f=l.findIndex(p=>{if(Array.isArray(p)){const[g,_]=p,y=o>=g.hours&&a>=g.minutes,w=o<_.hours||o===_.hours&&a<_.minutes;if(g.hours<_.hours){if(y&&w)return!0}else if(y||w)return!0}else if(p.hours===o&&p.minutes===a)return!0;return!1});if(-1!==f)return u[f]}return function ame(n,e,t){const i=Tl(n),s=T4([i[ti.DayPeriodsFormat],i[ti.DayPeriodsStandalone]],e);return T4(s,t)}(e,r,i)[o<12?0:1];case Rr.Eras:return function ume(n,e){return T4(Tl(n)[ti.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,s,n,e,t,i)}}function Xw(n){return function(e,t,i){const r=-1*i,s=E4(t,Yi.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Nc.Short:return(r>=0?"+":"")+Su(o,2,s)+Su(Math.abs(r%60),2,s);case Nc.ShortGMT:return"GMT"+(r>=0?"+":"")+Su(o,1,s);case Nc.Long:return"GMT"+(r>=0?"+":"")+Su(o,2,s)+":"+Su(Math.abs(r%60),2,s);case Nc.Extended:return 0===i?"Z":(r>=0?"+":"")+Su(o,2,s)+":"+Su(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function pj(n){return qw(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function aI(n,e=!1){return function(t,i){let r;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{const s=pj(t),o=function Mme(n){const e=qw(n,0,1).getDay();return qw(n,0,1+(e<=4?4:11)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return Su(r,n,E4(i,Yi.MinusSign))}}function Zw(n,e=!1){return function(t,i){return Su(pj(t).getFullYear(),n,E4(i,Yi.MinusSign),e)}}const cI={};function gj(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function mj(n){return n instanceof Date&&!isNaN(n.valueOf())}function yj(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let WA=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(SA(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${oo(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(U(T0),U(_8),U(fn),U(Yo))},n.\u0275dir=ht({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Gme{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let W3=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Gme(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),bj(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{bj(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(U(Oc),U(zc),U(T0))},n.\u0275dir=ht({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function bj(n,e){n.context.$implicit=e.item}let u3=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Wme,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){xj("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){xj("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(U(Oc),U(zc))},n.\u0275dir=ht({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Wme{constructor(){this.$implicit=null,this.ngIf=null}}function xj(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${oo(e)}'.`)}class pI{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let eC=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),Mj=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new pI(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(U(Oc),U(zc),U(eC,9))},n.\u0275dir=ht({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),fd=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:o3.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(_8),U(Yo))},n.\u0275dir=ht({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),gI=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(U(Oc))},n.\u0275dir=ht({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[yr]}),n})();function Eu(n,e){return new jt(2100,!1)}class qme{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}}class Kme{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const Xme=new Kme,Yme=new qme;let dd=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(TA(t))return Xme;if(DG(t))return Yme;throw Eu()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(U(wc,16))},n.\u0275pipe=b1({name:"async",type:n,pure:!1,standalone:!0}),n})();const nAe=new Bt("DATE_PIPE_DEFAULT_TIMEZONE");let tC=(()=>{class n{constructor(t,i){this.locale=t,this.defaultTimezone=i}transform(t,i="mediumDate",r,s){if(null==t||""===t||t!=t)return null;try{return yme(t,i,s||this.locale,r??this.defaultTimezone??void 0)}catch(o){throw Eu()}}}return n.\u0275fac=function(t){return new(t||n)(U(E0,16),U(nAe,24))},n.\u0275pipe=b1({name:"date",type:n,pure:!0,standalone:!0}),n})(),Dl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})();const Tj="browser";function pd(n){return n===Tj}function g7(n){return"server"===n}let mAe=(()=>{class n{}return n.\u0275prov=Lt({token:n,providedIn:"root",factory:()=>new AAe(Ye(Fi),window)}),n})();class AAe{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function vAe(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Lj(this.window.history)||Lj(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Lj(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Dj{}class yI extends class PAe extends class Jge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Zge(n){Qw||(Qw=n)}(new yI)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function HAe(){return $A=$A||document.querySelector("base"),$A?$A.getAttribute("href"):null}();return null==t?null:function zAe(n){iC=iC||document.createElement("a"),iC.setAttribute("href",n);const e=iC.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){$A=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return yj(document.cookie,e)}}let iC,$A=null;const Fj=new Bt("TRANSITION_ID"),NAe=[{provide:NA,useFactory:function OAe(n,e,t){return()=>{t.get(Hw).donePromise.then(()=>{const i=L0(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Fj,Fi,yc],multi:!0}];let UAe=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const rC=new Bt("EventManagerPlugins");let sC=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Ye(rC),Ye(Xi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();class kj{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=L0().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Pj=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),qA=(()=>{class n extends Pj{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(Hj),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Hj))}}return n.\u0275fac=function(t){return new(t||n)(Ye(Fi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();function Hj(n){L0().remove(n)}const wI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},CI=/%COMP%/g;function oC(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?oC(n,r,t):(r=r.replace(CI,n),t.push(r))}return t}function Nj(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let aC=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new bI(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case qo.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new qAe(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case qo.ShadowDom:return new KAe(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=oC(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Ye(sC),Ye(qA),Ye(VA))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();class bI{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(wI[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Uj(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Uj(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=wI[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=wI[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(o3.DashCase|o3.Important)?e.style.setProperty(t,i,r&o3.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&o3.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Nj(i)):this.eventManager.addEventListener(e,t,Nj(i))}}function Uj(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class qAe extends bI{constructor(e,t,i,r){super(e),this.component=i;const s=oC(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function WAe(n){return"_ngcontent-%COMP%".replace(CI,n)}(r+"-"+i.id),this.hostAttr=function jAe(n){return"_nghost-%COMP%".replace(CI,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class KAe extends bI{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=oC(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let XAe=(()=>{class n extends kj{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(Ye(Fi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const Gj=["alt","control","meta","shift"],YAe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ZAe={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let JAe=(()=>{class n extends kj{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L0().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),Gj.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=YAe[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Gj.forEach(o=>{o!==r&&(0,ZAe[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Ye(Fi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const Wj=[{provide:Q3,useValue:Tj},{provide:BW,useValue:function e9e(){yI.makeCurrent()},multi:!0},{provide:Fi,useFactory:function n9e(){return function tL(n){fA=n}(document),document},deps:[]}],i9e=VW(Kge,"browser",Wj),jj=new Bt(""),$j=[{provide:Ow,useClass:class VAe{addToWindow(e){ws.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},ws.getAllAngularTestabilities=()=>e.getAllTestabilities(),ws.getAllAngularRootElements=()=>e.getAllRootElements(),ws.frameworkStabilizers||(ws.frameworkStabilizers=[]),ws.frameworkStabilizers.push(i=>{const r=ws.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?L0().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:HW,useClass:qD,deps:[Xi,KD,Ow]},{provide:qD,useClass:qD,deps:[Xi,KD,Ow]}],qj=[{provide:D,useValue:"root"},{provide:Mh,useFactory:function t9e(){return new Mh},deps:[]},{provide:rC,useClass:XAe,multi:!0,deps:[Fi,Xi,Q3]},{provide:rC,useClass:JAe,multi:!0,deps:[Fi]},{provide:aC,useClass:aC,deps:[sC,qA,VA]},{provide:s3,useExisting:aC},{provide:Pj,useExisting:qA},{provide:qA,useClass:qA,deps:[Fi]},{provide:sC,useClass:sC,deps:[rC,Xi]},{provide:Dj,useClass:UAe,deps:[]},[]];let Kj=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:VA,useValue:t.appId},{provide:Fj,useExisting:VA},NAe]}}}return n.\u0275fac=function(t){return new(t||n)(Ye(jj,12))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[...qj,...$j],imports:[Dl,Xge]}),n})(),Xj=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(Ye(Fi))},n.\u0275prov=Lt({token:n,factory:function(t){let i=null;return i=t?new t:function s9e(){return new Xj(Ye(Fi))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let w8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:function(t){let i=null;return i=t?new(t||n):Ye(Jj),i},providedIn:"root"}),n})(),Jj=(()=>{class n extends w8{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Qs.NONE:return i;case Qs.HTML:return n3(i,"HTML")?bl(i):Ml(this._doc,String(i)).toString();case Qs.STYLE:return n3(i,"Style")?bl(i):i;case Qs.SCRIPT:if(n3(i,"Script"))return bl(i);throw new Error("unsafe value used in a script context");case Qs.URL:return n3(i,"URL")?bl(i):Gp(String(i));case Qs.RESOURCE_URL:if(n3(i,"ResourceURL"))return bl(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function pA(n){return new Zy(n)}(t)}bypassSecurityTrustStyle(t){return function lL(n){return new rL(n)}(t)}bypassSecurityTrustScript(t){return function Xn(n){return new sL(n)}(t)}bypassSecurityTrustUrl(t){return function od(n){return new oL(n)}(t)}bypassSecurityTrustResourceUrl(t){return function Vp(n){return new aL(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(Ye(Fi))},n.\u0275prov=Lt({token:n,factory:function(t){let i=null;return i=t?new t:function f9e(n){return new Jj(n.get(Fi))}(Ye(yc)),i},providedIn:"root"}),n})();function Sr(n){return null!=n&&"false"!=`${n}`}function Tu(n,e=0){return function d9e(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function cC(n){return Array.isArray(n)?n:[n]}function xc(n){return null==n?"":"string"==typeof n?n:`${n}px`}function C8(n){return n instanceof fn?n.nativeElement:n}function mi(...n){return hs(n,w1(n))}const{isArray:p9e}=Array;function SI(n){return $t(e=>function g9e(n,e){return p9e(e)?n(...e):n(e)}(n,e))}const m9e=["addListener","removeListener"],A9e=["addEventListener","removeEventListener"],v9e=["on","off"];function Vc(n,e,t,i){if(ue(t)&&(i=t,t=void 0),i)return Vc(n,e,t).pipe(SI(i));const[r,s]=function w9e(n){return ue(n.addEventListener)&&ue(n.removeEventListener)}(n)?A9e.map(o=>a=>n[o](e,a,t)):function _9e(n){return ue(n.addListener)&&ue(n.removeListener)}(n)?m9e.map(e$(n,e)):function y9e(n){return ue(n.on)&&ue(n.off)}(n)?v9e.map(e$(n,e)):[];if(!r&&Eo(n))return xi(o=>Vc(o,e,t))(uo(n));if(!r)throw new TypeError("Invalid event target");return new Ce(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function e$(n,e){return t=>i=>n[t](e,i)}class C9e extends Re{constructor(e,t){super()}schedule(e,t=0){return this}}const lC={setInterval(n,e,...t){const{delegate:i}=lC;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=lC;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class EI extends C9e{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return lC.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;lC.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ze(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const KA={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=KA;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new Re(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=KA;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=KA;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},t$={now:()=>(t$.delegate||Date).now(),delegate:void 0};class XA{constructor(e,t=XA.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}XA.now=t$.now;class TI extends XA{constructor(e,t=XA.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}new class x9e extends TI{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class b9e extends EI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=KA.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(KA.cancelAnimationFrame(t),e._scheduled=void 0)}});let LI,S9e=1;const uC={};function n$(n){return n in uC&&(delete uC[n],!0)}const E9e={setImmediate(n){const e=S9e++;return uC[e]=!0,LI||(LI=Promise.resolve()),LI.then(()=>n$(e)&&n()),e},clearImmediate(n){n$(n)}},{setImmediate:T9e,clearImmediate:L9e}=E9e,hC={setImmediate(...n){const{delegate:e}=hC;return(e?.setImmediate||T9e)(...n)},clearImmediate(n){const{delegate:e}=hC;return(e?.clearImmediate||L9e)(n)},delegate:void 0},DI=new class I9e extends TI{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class D9e extends EI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=hC.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(hC.clearImmediate(t),e._scheduled=void 0)}}),YA=new TI(EI),B9e=YA;function II(n=0,e,t=B9e){let i=-1;return null!=e&&(T3(e)?t=e:i=e),new Ce(r=>{let s=function F9e(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function i$(n,e=YA){return function R9e(n){return xn((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const l=r;r=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(_n(t,l=>{i=!0,r=l,s||uo(n(l)).subscribe(s=_n(t,a,c))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>II(n,e))}function mo(n,e){return xn((t,i)=>{let r=0;t.subscribe(_n(i,s=>n.call(e,s,r++)&&i.next(s)))})}function xa(n){return xn((e,t)=>{uo(n).subscribe(_n(t,()=>t.complete(),st)),!t.closed&&e.subscribe(t)})}let BI;try{BI=typeof Intl<"u"&&Intl.v8BreakIterator}catch{BI=!1}let ZA,fC,b8,RI,h3=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?pd(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!BI)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Ye(Q3))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function md(n){return function k9e(){if(null==ZA&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ZA=!0}))}finally{ZA=ZA||!1}return ZA}()?n:!!n.capture}function s$(){if(null==b8){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return b8=!1,b8;if("scrollBehavior"in document.documentElement.style)b8=!0;else{const n=Element.prototype.scrollTo;b8=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return b8}function JA(){if("object"!=typeof document||!document)return 0;if(null==fC){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),fC=0,0===n.scrollLeft&&(n.scrollLeft=1,fC=0===n.scrollLeft?1:2),n.remove()}return fC}function o$(n){if(function P9e(){if(null==RI){const n=typeof document<"u"?document.head:null;RI=!(!n||!n.createShadowRoot&&!n.attachShadow)}return RI}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function FI(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function x8(n){return n.composedPath?n.composedPath()[0]:n.target}function kI(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const H9e=new Bt("cdk-dir-doc",{providedIn:"root",factory:function z9e(){return Cs(Fi)}}),O9e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Fh=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new Ji,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function N9e(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?O9e.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(Ye(H9e,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),M8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),a$=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Je,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ce(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(i$(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):mi()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(mo(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=C8(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Vc(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(Ye(Xi),Ye(h3),Ye(Fi,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),U9e=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new Je,this._elementScrolled=new Ce(o=>this.ngZone.runOutsideAngular(()=>Vc(this.elementRef.nativeElement,"scroll").pipe(xa(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=JA()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==JA()?t.left=t.right:1==JA()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;s$()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?r:i:"end"==t&&(t=o?i:r),o&&2==JA()?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==JA()?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(a$),U(Xi),U(Fh,8))},n.\u0275dir=ht({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),dC=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Je,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(i$(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(Ye(h3),Ye(Xi),Ye(Fi,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),S8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),pC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[M8,S8,M8,S8]}),n})();class PI{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class e9 extends PI{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class gC extends PI{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class c$ extends PI{constructor(e){super(),this.element=e instanceof fn?e.nativeElement:e}}class HI{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof e9?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof gC?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof c$?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Q9e extends HI{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||yc.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let zI=(()=>{class n extends HI{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Ji,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(U(Ni),U(Oc),U(Fi))},n.\u0275dir=ht({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[zt]}),n})(),Ad=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})();function Mc(n){return n<=0?()=>Fa:xn((e,t)=>{let i=0;e.subscribe(_n(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}const l$=s$();class W9e{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=xc(-this._previousScrollPosition.left),e.style.top=xc(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),l$&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),l$&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class j9e{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class u${enable(){}disable(){}attach(){}}function OI(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function h$(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class $9e{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();OI(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let q9e=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new u$,this.close=o=>new j9e(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new W9e(this._viewportRuler,this._document),this.reposition=o=>new $9e(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(Ye(a$),Ye(dC),Ye(Xi),Ye(Fi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class NI{constructor(e){if(this.scrollStrategy=new u$,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class mC{constructor(e,t,i,r,s){this.offsetX=i,this.offsetY=r,this.panelClass=s,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class K9e{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let f$=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(Ye(Fi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),X9e=(()=>{class n extends f${constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(Ye(Fi),Ye(Xi,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Y9e=(()=>{class n extends f${constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=x8(s)},this._clickListener=s=>{const o=x8(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const u=c[l];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const f=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(s)):f.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(Ye(Fi),Ye(h3),Ye(Xi,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AC=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||kI()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),kI()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(Ye(Fi),Ye(h3))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class t9{constructor(e,t,i,r,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Je,this._attachments=new Je,this._detachments=new Je,this._locationChanges=Re.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new Je,this._outsidePointerEvents=new Je,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Mc(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=xc(this._config.width),e.height=xc(this._config.height),e.minWidth=xc(this._config.minWidth),e.minHeight=xc(this._config.minHeight),e.maxWidth=xc(this._config.maxWidth),e.maxHeight=xc(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=cC(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(xa(Zc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const d$="cdk-overlay-connected-position-bounding-box",Z9e=/([A-Za-z%]+)$/;class J9e{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Je,this._resizeSubscription=Re.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(d$),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),u=this._getOverlayFit(l,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(u,l,i)?s.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(s.length){let a=null,c=-1;for(const l of s){const u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&E8(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(d$),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=g$(t);let{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let p=0-a,g=a+s.height-i.height,_=this._subtractOverflows(s.width,0-o,o+s.width-i.width),y=this._subtractOverflows(s.height,p,g),w=_*y;return{visibleArea:w,isCompletelyWithinViewport:s.width*s.height===w,fitsInViewportVertically:y===s.height,fitsInViewportHorizontally:_==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=p$(this._overlayRef.getConfig().minHeight),a=p$(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&l}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=g$(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0);let u=0,f=0;return u=r.width<=s.width?l||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,f=r.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:f},{x:e.x+u,y:e.y+f}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new K9e(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,f,p;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const g=Math.min(i.bottom-e.y+i.top,e.y),_=this._lastBoundingBoxSize.height;s=2*g,o=e.y-g,s>_&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-_/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)p=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)f=e.x,u=i.right-e.x;else{const g=Math.min(i.right-e.x+i.left,e.x),_=this._lastBoundingBoxSize.width;u=2*g,f=e.x-g,u>_&&!this._isInitialRender&&!this._growAfterOpen&&(f=e.x-_/2)}return{top:o,left:f,bottom:a,right:p,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=xc(i.height),r.top=xc(i.top),r.bottom=xc(i.bottom),r.width=xc(i.width),r.left=xc(i.left),r.right=xc(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=xc(s)),o&&(r.maxWidth=xc(o))}this._lastBoundingBoxSize=i,E8(this._boundingBox.style,r)}_resetBoundingBoxStyles(){E8(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){E8(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();E8(i,this._getExactOverlayY(t,e,u)),E8(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=xc(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=xc(o.maxWidth):s&&(i.maxWidth="")),E8(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=xc(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=xc(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:h$(e,i),isOriginOutsideView:OI(e,i),isOverlayClipped:h$(t,i),isOverlayOutsideView:OI(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&cC(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof fn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function E8(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function p$(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(Z9e);return t&&"px"!==t?null:parseFloat(e)}return n||null}function g$(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const m$="cdk-global-overlay-wrapper";class eve{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(m$),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,f=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let g="",_="",y="";c?y="flex-start":"center"===u?(y="center",p?_=f:g=f):p?"left"===u||"end"===u?(y="flex-end",g=f):("right"===u||"start"===u)&&(y="flex-start",_=f):"left"===u||"start"===u?(y="flex-start",g=f):("right"===u||"end"===u)&&(y="flex-end",_=f),e.position=this._cssPosition,e.marginLeft=c?"0":g,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":_,t.justifyContent=y,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(m$),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let tve=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new eve}flexibleConnectedTo(t){return new J9e(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(Ye(dC),Ye(Fi),Ye(h3),Ye(AC))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nve=0,f3=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,f,p,g){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=l,this._directionality=u,this._location=f,this._outsideClickDispatcher=p,this._animationsModuleType=g}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new NI(t);return o.direction=o.direction||this._directionality.value,new t9(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+nve++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(p7)),new Q9e(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(Ye(q9e),Ye(AC),Ye(Ni),Ye(tve),Ye(X9e),Ye(yc),Ye(Xi),Ye(Fi),Ye(Fh),Ye(UA),Ye(Y9e),Ye(S4,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const ive=new Bt("cdk-connected-overlay-scroll-strategy");let rve=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(U(fn))},n.\u0275dir=ht({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})();const ove={provide:ive,deps:[f3],useFactory:function sve(n){return()=>n.scrollStrategies.reposition()}};let vd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[f3,ove],imports:[M8,Ad,pC,pC]}),n})();class Ao extends Je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const vC=Ee(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:ave}=Array,{getPrototypeOf:cve,prototype:lve,keys:uve}=Object;function A$(n){if(1===n.length){const e=n[0];if(ave(e))return{args:e,keys:null};if(function hve(n){return n&&"object"==typeof n&&cve(n)===lve}(e)){const t=uve(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function v$(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function VI(...n){const e=w1(n),t=r0(n),{args:i,keys:r}=A$(n);if(0===i.length)return hs([],e);const s=new Ce(function fve(n,e,t=At){return i=>{_$(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)_$(e,()=>{const l=hs(n[c],e);let u=!1;l.subscribe(_n(i,f=>{s[c]=f,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>v$(r,o):At));return t?s.pipe(SI(t)):s}function _$(n,e,t){n?Ra(t,n,e):e()}function n9(...n){return function dve(){return t1(1)}()(hs(n,w1(n)))}function _C(n){return new Ce(e=>{uo(n()).subscribe(e)})}function A7(n,e){const t=ue(n)?n:()=>n,i=r=>r.error(t());return new Ce(e?r=>e.schedule(i,0,r):i)}function UI(){return xn((n,e)=>{let t=null;n._refCount++;const i=_n(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class GI extends Ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,vt(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;const t=this.getSubject();e.add(this.source.subscribe(_n(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return UI()(this)}}function L4(n,e){return xn((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(_n(i,c=>{r?.unsubscribe();let l=0;const u=s++;uo(n(c,u)).subscribe(r=_n(i,f=>i.next(e?e(c,f,u,l++):f),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function D0(...n){const e=w1(n);return xn((t,i)=>{(e?n9(n,t,e):n9(n,t)).subscribe(i)})}function yC(n){return xn((e,t)=>{let i=!1;e.subscribe(_n(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function y$(n=pve){return xn((e,t)=>{let i=!1;e.subscribe(_n(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function pve(){return new vC}function kh(n,e){const t=arguments.length>=2;return i=>i.pipe(n?mo((r,s)=>n(r,s,i)):At,Mc(1),t?yC(e):y$(()=>new vC))}function _d(n,e){return ue(e)?xi(n,e,1):xi(n,1)}function Ma(n,e,t){const i=ue(n)||e||t?{next:n,error:e,complete:t}:n;return i?xn((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(_n(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):At}function I0(n){return xn((e,t)=>{let s,i=null,r=!1;i=e.subscribe(_n(t,void 0,void 0,o=>{s=uo(n(o,I0(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function gve(n,e,t,i,r){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(_n(o,u=>{const f=l++;c=a?n(c,u,f):(a=!0,u),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}function w$(n,e){return xn(gve(n,e,arguments.length>=2,!0))}function QI(n){return n<=0?()=>Fa:xn((e,t)=>{let i=[];e.subscribe(_n(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function C$(n,e){const t=arguments.length>=2;return i=>i.pipe(n?mo((r,s)=>n(r,s,i)):At,QI(1),t?yC(e):y$(()=>new vC))}function b$(n){return $t(()=>n)}function wC(n){return xn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const zr="primary",i9=Symbol("RouteTitle");class Ave{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function v7(n){return new Ave(n)}function vve(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function B0(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!x$(n[r],e[r]))return!1;return!0}function x$(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function M$(n){return Array.prototype.concat.apply([],n)}function S$(n){return n.length>0?n[n.length-1]:null}function E2(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function yd(n){return vD(n)?n:TA(n)?hs(Promise.resolve(n)):mi(n)}const wve={exact:function L$(n,e,t){if(!L8(n.segments,e.segments)||!CC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!L$(n.children[i],e.children[i],t))return!1;return!0},subset:D$},E$={exact:function Cve(n,e){return B0(n,e)},subset:function bve(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>x$(n[t],e[t]))},ignored:()=>!0};function T$(n,e,t){return wve[t.paths](n.root,e.root,t.matrixParams)&&E$[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function D$(n,e,t){return I$(n,e,e.segments,t)}function I$(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!L8(r,t)||e.hasChildren()||!CC(r,t,i))}if(n.segments.length===t.length){if(!L8(n.segments,t)||!CC(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!D$(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(L8(n.segments,r)&&CC(n.segments,r,i)&&n.children[zr])&&I$(n.children[zr],e,s,i)}}function CC(n,e,t){return e.every((i,r)=>E$[t](n[r].parameters,i.parameters))}class T8{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=v7(this.queryParams)),this._queryParamMap}toString(){return Sve.serialize(this)}}class ps{constructor(e,t){this.segments=e,this.children=t,this.parent=null,E2(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bC(this)}}class r9{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=v7(this.parameters)),this._parameterMap}toString(){return k$(this)}}function L8(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let B$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:function(){return new jI},providedIn:"root"}),n})();class jI{parse(e){const t=new kve(e);return new T8(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${s9(e.root,!0)}`,i=function Lve(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${xC(t)}=${xC(r)}`).join("&"):`${xC(t)}=${xC(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function Eve(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Sve=new jI;function bC(n){return n.segments.map(e=>k$(e)).join("/")}function s9(n,e){if(!n.hasChildren())return bC(n);if(e){const t=n.children[zr]?s9(n.children[zr],!1):"",i=[];return E2(n.children,(r,s)=>{s!==zr&&i.push(`${s}:${s9(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Mve(n,e){let t=[];return E2(n.children,(i,r)=>{r===zr&&(t=t.concat(e(i,r)))}),E2(n.children,(i,r)=>{r!==zr&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===zr?[s9(n.children[zr],!1)]:[`${r}:${s9(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zr]?`${bC(n)}/${t[0]}`:`${bC(n)}/(${t.join("//")})`}}function R$(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xC(n){return R$(n).replace(/%3B/gi,";")}function $I(n){return R$(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function MC(n){return decodeURIComponent(n)}function F$(n){return MC(n.replace(/\+/g,"%20"))}function k$(n){return`${$I(n.path)}${function Tve(n){return Object.keys(n).map(e=>`;${$I(e)}=${$I(n[e])}`).join("")}(n.parameters)}`}const Dve=/^[^\/()?;=#]+/;function SC(n){const e=n.match(Dve);return e?e[0]:""}const Ive=/^[^=?&#]+/,Rve=/^[^&#]+/;class kve{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ps([],{}):new ps([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[zr]=new ps(e,t)),i}parseSegment(){const e=SC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new jt(4009,!1);return this.capture(e),new r9(MC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=SC(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=SC(this.remaining);r&&(i=r,this.capture(i))}e[MC(t)]=MC(i)}parseQueryParam(e){const t=function Bve(n){const e=n.match(Ive);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function Fve(n){const e=n.match(Rve);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=F$(t),s=F$(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=SC(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new jt(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=zr);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[zr]:new ps([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new jt(4011,!1)}}function qI(n){return n.segments.length>0?new ps([],{[zr]:n}):n}function EC(n){const e={};for(const i of Object.keys(n.children)){const s=EC(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function Pve(n){if(1===n.numberOfChildren&&n.children[zr]){const e=n.children[zr];return new ps(n.segments.concat(e.segments),e.children)}return n}(new ps(n.segments,e))}function D8(n){return n instanceof T8}function Ove(n,e,t,i,r){if(0===t.length)return _7(e.root,e.root,e.root,i,r);const s=function z$(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new H$(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return E2(s.outlets,(c,l)=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new H$(t,e,i)}(t);return s.toRoot()?_7(e.root,e.root,new ps([],{}),i,r):function o(c){const l=function Vve(n,e,t,i){if(n.isAbsolute)return new y7(e.root,!0,0);if(-1===i)return new y7(t,t===e.root,0);return function O$(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new jt(4005,!1);r=i.segments.length}return new y7(i,!1,r-s)}(t,i+(o9(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,c),u=l.processChildren?c9(l.segmentGroup,l.index,s.commands):XI(l.segmentGroup,l.index,s.commands);return _7(e.root,l.segmentGroup,u,i,r)}(n.snapshot?._lastPathIndex)}function o9(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function a9(n){return"object"==typeof n&&null!=n&&n.outlets}function _7(n,e,t,i,r){let o,s={};i&&E2(i,(c,l)=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:P$(n,e,t);const a=qI(EC(o));return new T8(a,s,r)}function P$(n,e,t){const i={};return E2(n.children,(r,s)=>{i[s]=r===e?t:P$(r,e,t)}),new ps(n.segments,i)}class H${constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&o9(i[0]))throw new jt(4003,!1);const r=i.find(a9);if(r&&r!==S$(i))throw new jt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class y7{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function XI(n,e,t){if(n||(n=new ps([],{})),0===n.segments.length&&n.hasChildren())return c9(n,e,t);const i=function Gve(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(a9(a))break;const c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!V$(c,l,o))return s;i+=2}else{if(!V$(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new ps(n.segments.slice(0,i.pathIndex),{});return s.children[zr]=new ps(n.segments.slice(i.pathIndex),n.children),c9(s,0,r)}return i.match&&0===r.length?new ps(n.segments,{}):i.match&&!n.hasChildren()?YI(n,e,t):i.match?c9(n,0,r):YI(n,e,t)}function c9(n,e,t){if(0===t.length)return new ps(n.segments,{});{const i=function Uve(n){return a9(n[0])?n[0].outlets:{[zr]:n}}(t),r={};return E2(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=XI(n.children[o],e,s))}),E2(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new ps(n.segments,r)}}function YI(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(a9(s)){const c=Qve(s.outlets);return new ps(i,c)}if(0===r&&o9(t[0])){i.push(new r9(n.segments[e].path,N$(t[0]))),r++;continue}const o=a9(s)?s.outlets[zr]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&o9(a)?(i.push(new r9(o,N$(a))),r+=2):(i.push(new r9(o,{})),r++)}return new ps(i,{})}function Qve(n){const e={};return E2(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=YI(new ps([],{}),0,t))}),e}function N$(n){const e={};return E2(n,(t,i)=>e[i]=`${t}`),e}function V$(n,e,t){return n==t.path&&B0(e,t.parameters)}class Ph{constructor(e,t){this.id=e,this.url=t}}class ZI extends Ph{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Lu extends Ph{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class TC extends Ph{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class U$ extends Ph{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Wve extends Ph{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jve extends Ph{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $ve extends Ph{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qve extends Ph{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kve extends Ph{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xve{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Yve{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Zve{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jve{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class e_e{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t_e{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class G${constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Q${constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=JI(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=JI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=eB(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return eB(e,this._root).map(t=>t.value)}}function JI(n,e){if(n===e.value)return e;for(const t of e.children){const i=JI(n,t);if(i)return i}return null}function eB(n,e){if(n===e.value)return[e];for(const t of e.children){const i=eB(n,t);if(i.length)return i.unshift(e),i}return[]}class Hh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function w7(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class W$ extends Q${constructor(e,t){super(e),this.snapshot=t,tB(this,e)}toString(){return this.snapshot.toString()}}function j$(n,e){const t=function i_e(n,e){const o=new LC([],{},{},"",{},zr,e,null,n.root,-1,{});return new q$("",new Hh(o,[]))}(n,e),i=new Ao([new r9("",{})]),r=new Ao({}),s=new Ao({}),o=new Ao({}),a=new Ao(""),c=new wd(i,r,o,a,s,zr,e,t.root);return c.snapshot=t.root,new W$(new Hh(c,[]),t)}class wd{constructor(e,t,i,r,s,o,a,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe($t(l=>l[i9]))??mi(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe($t(e=>v7(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe($t(e=>v7(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $$(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function r_e(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class LC{constructor(e,t,i,r,s,o,a,c,l,u,f,p){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.[i9],this.routeConfig=c,this._urlSegment=l,this._lastPathIndex=u,this._correctedLastPathIndex=p??u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=v7(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=v7(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class q$ extends Q${constructor(e,t){super(t),this.url=e,tB(this,t)}toString(){return K$(this._root)}}function tB(n,e){e.value._routerState=n,e.children.forEach(t=>tB(n,t))}function K$(n){const e=n.children.length>0?` { ${n.children.map(K$).join(", ")} } `:"";return`${n.value}${e}`}function nB(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,B0(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),B0(e.params,t.params)||n.params.next(t.params),function _ve(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!B0(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),B0(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function iB(n,e){const t=B0(n.params,e.params)&&function xve(n,e){return L8(n,e)&&n.every((t,i)=>B0(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||iB(n.parent,e.parent))}function l9(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function o_e(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return l9(n,i,r);return l9(n,i)})}(n,e,t);return new Hh(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>l9(n,a)),o}}const i=function a_e(n){return new wd(new Ao(n.url),new Ao(n.params),new Ao(n.queryParams),new Ao(n.fragment),new Ao(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>l9(n,s));return new Hh(i,r)}}const rB="ngNavigationCancelingError";function X$(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=D8(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Y$(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function Y$(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[rB]=!0,i.cancellationCode=e,t&&(i.url=t),i}function Z$(n){return J$(n)&&D8(n.url)}function J$(n){return n&&n[rB]}class c_e{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new u9,this.attachRef=null}}let u9=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new c_e,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const DC=!1;let IC=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ji,this.deactivateEvents=new Ji,this.attachEvents=new Ji,this.detachEvents=new Ji,this.name=r||zr,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new jt(4012,DC);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new jt(4012,DC);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new jt(4012,DC);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new jt(4013,DC);this._activatedRoute=t;const r=this.location,o=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new l_e(t,a,r.injector);if(i&&function u_e(n){return!!n.resolveComponentFactory}(i)){const l=i.resolveComponentFactory(o);this.activated=r.createComponent(l,r.length,c)}else this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(U(u9),U(Oc),e3("name"),U(wc),U(ye))},n.\u0275dir=ht({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class l_e{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===wd?this.route:e===u9?this.childContexts:this.parent.get(e,t)}}let sB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Rn({type:n,selectors:[["ng-component"]],standalone:!0,features:[jQ],decls:1,vars:0,template:function(t,i){1&t&&Ke(0,"router-outlet")},dependencies:[IC],encapsulation:2}),n})();function eq(n,e){return n.providers&&!n._injector&&(n._injector=Rw(n.providers,e,`Route: ${n.path}`)),n._injector??e}function aB(n){const e=n.children&&n.children.map(aB),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zr&&(t.component=sB),t}function D4(n){return n.outlet||zr}function tq(n,e){const t=n.filter(i=>D4(i)===e);return t.push(...n.filter(i=>D4(i)!==e)),t}function h9(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class g_e{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),nB(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=w7(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),E2(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=w7(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=w7(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=w7(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new t_e(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Jve(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(nB(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),nB(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=h9(r.snapshot),c=a?.get(Ni)??null;o.attachRef=null,o.route=r,o.resolver=c,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class nq{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class BC{constructor(e,t){this.component=e,this.route=t}}function m_e(n,e,t){const i=n._root;return f9(i,e?e._root:null,t,[i.value])}function C7(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function o0(n){return null!==r1(n)}(n)?e.get(n):n:i}function f9(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=w7(e);return n.children.forEach(o=>{(function v_e(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function __e(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!L8(n.url,e.url);case"pathParamsOrQueryParamsChange":return!L8(n.url,e.url)||!B0(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!iB(n,e)||!B0(n.queryParams,e.queryParams);default:return!iB(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new nq(i)):(s.data=o.data,s._resolvedData=o._resolvedData),f9(n,e,s.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new BC(a.outlet.component,o))}else o&&d9(e,a,r),r.canActivateChecks.push(new nq(i)),f9(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),E2(s,(o,a)=>d9(o,t.getContext(a),r)),r}function d9(n,e,t){const i=w7(n),r=n.value;E2(i,(s,o)=>{d9(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new BC(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function p9(n){return"function"==typeof n}function cB(n){return n instanceof vC||"EmptyError"===n?.name}const RC=Symbol("INITIAL_VALUE");function b7(){return L4(n=>VI(n.map(e=>e.pipe(Mc(1),D0(RC)))).pipe($t(e=>{for(const t of e)if(!0!==t){if(t===RC)return RC;if(!1===t||t instanceof T8)return t}return!0}),mo(e=>e!==RC),Mc(1)))}function iq(n){return function be(...n){return qe(n)}(Ma(e=>{if(D8(e))throw X$(0,e)}),$t(e=>!0===e))}const lB={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rq(n,e,t,i,r){const s=uB(n,e,t);return s.matched?function P_e(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?mi(r.map(o=>{const a=C7(o,n);return yd(function M_e(n){return n&&p9(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(b7(),iq()):mi(!0)}(i=eq(e,i),e,t).pipe($t(o=>!0===o?s:{...lB})):mi(s)}function uB(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...lB}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||vve)(t,n,e);if(!r)return{...lB};const s={};E2(r.posParams,(a,c)=>{s[c]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function FC(n,e,t,i,r="corrected"){if(t.length>0&&function O_e(n,e,t){return t.some(i=>kC(n,e,i)&&D4(i)!==zr)}(n,t,i)){const o=new ps(e,function z_e(n,e,t,i){const r={};r[zr]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&D4(s)!==zr){const o=new ps([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[D4(s)]=o}return r}(n,e,i,new ps(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function N_e(n,e,t){return t.some(i=>kC(n,e,i))}(n,t,i)){const o=new ps(n.segments,function H_e(n,e,t,i,r,s){const o={};for(const a of i)if(kC(n,t,a)&&!r[D4(a)]){const c=new ps([],{});c._sourceSegment=n,c._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[D4(a)]=c}return{...r,...o}}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new ps(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function kC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function sq(n,e,t,i){return!!(D4(n)===i||i!==zr&&kC(e,t,n))&&("**"===n.path||uB(e,n,t).matched)}function oq(n,e,t){return 0===e.length&&!n.children[t]}const PC=!1;class HC{constructor(e){this.segmentGroup=e||null}}class aq{constructor(e){this.urlTree=e}}function g9(n){return A7(new HC(n))}function cq(n){return A7(new aq(n))}class Q_e{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=FC(this.urlTree.root,[],[],this.config).segmentGroup,t=new ps(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,zr).pipe($t(s=>this.createUrlTree(EC(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(I0(s=>{if(s instanceof aq)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof HC?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,zr).pipe($t(r=>this.createUrlTree(EC(r),e.queryParams,e.fragment))).pipe(I0(r=>{throw r instanceof HC?this.noMatchError(r):r}))}noMatchError(e){return new jt(4002,PC)}createUrlTree(e,t,i){const r=qI(e);return new T8(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe($t(s=>new ps([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return hs(r).pipe(_d(s=>{const o=i.children[s],a=tq(t,s);return this.expandSegmentGroup(e,a,o,s).pipe($t(c=>({segment:c,outlet:s})))}),w$((s,o)=>(s[o.outlet]=o.segment,s),{}),C$())}expandSegment(e,t,i,r,s,o){return hs(i).pipe(_d(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(I0(l=>{if(l instanceof HC)return mi(null);throw l}))),kh(a=>!!a),I0((a,c)=>{if(cB(a))return oq(t,r,s)?mi(new ps([],{})):g9(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return sq(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):g9(t):g9(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?cq(s):this.lineralizeSegments(i,s).pipe(xi(o=>{const a=new ps(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=uB(t,r,s);if(!a)return g9(t);const f=this.applyRedirectCommands(c,r.redirectTo,u);return r.redirectTo.startsWith("/")?cq(f):this.lineralizeSegments(r,f).pipe(xi(p=>this.expandSegment(e,t,i,p.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=eq(i,e),i.loadChildren?(i._loadedRoutes?mi({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe($t(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new ps(r,{})))):mi(new ps(r,{}))):rq(t,i,r,e).pipe(L4(({matched:o,consumedSegments:a,remainingSegments:c})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(xi(u=>{const f=u.injector??e,p=u.routes,{segmentGroup:g,slicedSegments:_}=FC(t,a,c,p),y=new ps(g.segments,g.children);if(0===_.length&&y.hasChildren())return this.expandChildren(f,p,y).pipe($t(M=>new ps(a,M)));if(0===p.length&&0===_.length)return mi(new ps(a,{}));const w=D4(i)===s;return this.expandSegment(f,y,p,_,w?zr:s,!0).pipe($t(x=>new ps(a.concat(x.segments),x.children)))})):g9(t)))}getChildConfig(e,t,i){return t.children?mi({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?mi({routes:t._loadedRoutes,injector:t._loadedInjector}):function k_e(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?mi(!0):mi(r.map(o=>{const a=C7(o,n);return yd(function w_e(n){return n&&p9(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(b7(),iq())}(e,t,i).pipe(xi(r=>r?this.configLoader.loadChildren(e,t).pipe(Ma(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function U_e(n){return A7(Y$(PC,3))}())):mi({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return mi(i);if(r.numberOfChildren>1||!r.children[zr])return A7(new jt(4e3,PC));r=r.children[zr]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new T8(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return E2(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return E2(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,i,r)}),new ps(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new jt(4001,PC);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class j_e{}class K_e{constructor(e,t,i,r,s,o,a,c){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=c}recognize(){const e=FC(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,zr).pipe($t(t=>{if(null===t)return null;const i=new LC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zr,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Hh(i,t),s=new q$(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=$$(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return hs(Object.keys(i.children)).pipe(_d(r=>{const s=i.children[r],o=tq(t,r);return this.processSegmentGroup(e,o,s,r)}),w$((r,s)=>r&&s?(r.push(...s),r):null),function mve(n,e=!1){return xn((t,i)=>{let r=0;t.subscribe(_n(i,s=>{const o=n(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(r=>null!==r),yC(null),C$(),$t(r=>{if(null===r)return null;const s=lq(r);return function X_e(n){n.sort((e,t)=>e.value.outlet===zr?-1:t.value.outlet===zr?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return hs(t).pipe(_d(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),kh(o=>!!o),I0(o=>{if(cB(o))return oq(i,r,s)?mi([]):mi(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!sq(t,i,r,s))return mi(null);let o;if("**"===t.path){const a=r.length>0?S$(r).parameters:{},c=hq(i)+r.length;o=mi({snapshot:new LC(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dq(t),D4(t),t.component??t._loadedComponent??null,t,uq(i),c,pq(t),c),consumedSegments:[],remainingSegments:[]})}else o=rq(i,t,r,e).pipe($t(({matched:a,consumedSegments:c,remainingSegments:l,parameters:u})=>{if(!a)return null;const f=hq(i)+c.length;return{snapshot:new LC(c,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dq(t),D4(t),t.component??t._loadedComponent??null,t,uq(i),f,pq(t),f),consumedSegments:c,remainingSegments:l}}));return o.pipe(L4(a=>{if(null===a)return mi(null);const{snapshot:c,consumedSegments:l,remainingSegments:u}=a;e=t._injector??e;const f=t._loadedInjector??e,p=function Y_e(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:g,slicedSegments:_}=FC(i,l,u,p.filter(w=>void 0===w.redirectTo),this.relativeLinkResolution);if(0===_.length&&g.hasChildren())return this.processChildren(f,p,g).pipe($t(w=>null===w?null:[new Hh(c,w)]));if(0===p.length&&0===_.length)return mi([new Hh(c,[])]);const y=D4(t)===s;return this.processSegment(f,p,g,_,y?zr:s).pipe($t(w=>null===w?null:[new Hh(c,w)]))}))}}function Z_e(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function lq(n){const e=[],t=new Set;for(const i of n){if(!Z_e(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=lq(i.children);e.push(new Hh(i.value,r))}return e.filter(i=>!t.has(i))}function uq(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function hq(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function dq(n){return n.data||{}}function pq(n){return n.resolve||{}}function gq(n){return"string"==typeof n.title||null===n.title}function hB(n){return L4(e=>{const t=n(e);return t?hs(t).pipe($t(()=>e)):mi(e)})}let mq=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===zr);return i}getResolvedTitleForRoute(t){return t.data[i9]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:function(){return Cs(Aq)},providedIn:"root"}),n})(),Aq=(()=>{class n extends mq{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(Ye(Xj))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class oye{}class cye extends class aye{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const OC=new Bt("",{providedIn:"root",factory:()=>({})}),fB=new Bt("ROUTES");let dB=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return mi(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=yd(t.loadComponent()).pipe(Ma(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),wC(()=>{this.componentLoaders.delete(t)})),r=new GI(i,()=>new Je).pipe(UI());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return mi({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe($t(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let c,l,u=!1;Array.isArray(a)?l=a:(c=a.create(t).injector,l=M$(c.get(fB,[],zn.Self|zn.Optional)));return{routes:l.map(aB),injector:c}}),wC(()=>{this.childrenLoaders.delete(i)})),o=new GI(s,()=>new Je).pipe(UI());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return yd(t()).pipe(xi(i=>i instanceof QQ||Array.isArray(i)?mi(i):hs(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(Ye(yc),Ye(QD))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uye{}class hye{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function fye(n){throw n}function dye(n,e,t){return e.parse("/")}const pye={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gye={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function _q(){const n=Cs(B$),e=Cs(u9),t=Cs(UA),i=Cs(yc),r=Cs(QD),s=Cs(fB,{optional:!0})??[],o=Cs(OC,{optional:!0})??{},a=Cs(Aq),c=Cs(mq,{optional:!0}),l=Cs(uye,{optional:!0}),u=Cs(oye,{optional:!0}),f=new h1(null,n,e,t,i,r,M$(s));return l&&(f.urlHandlingStrategy=l),u&&(f.routeReuseStrategy=u),f.titleStrategy=c??a,function mye(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,f),f}let h1=(()=>{class n{constructor(t,i,r,s,o,a,c){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Je,this.errorHandler=fye,this.malformedUriErrorHandler=dye,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>mi(void 0),this.urlHandlingStrategy=new hye,this.routeReuseStrategy=new cye,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(dB),this.configLoader.onLoadEndListener=p=>this.triggerEvent(new Yve(p)),this.configLoader.onLoadStartListener=p=>this.triggerEvent(new Xve(p)),this.ngModule=o.get(A8),this.console=o.get(gge);const f=o.get(Xi);this.isNgZoneEnabled=f instanceof Xi&&Xi.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function yve(){return new T8(new ps([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=j$(this.currentUrlTree,this.rootComponentType),this.transitions=new Ao({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(mo(r=>0!==r.id),$t(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),L4(r=>{let s=!1,o=!1;return mi(r).pipe(Ma(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),L4(a=>{const c=this.browserUrlTree.toString(),l=!this.navigated||a.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||l)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return yq(a.source)&&(this.browserUrlTree=a.extractedUrl),mi(a).pipe(L4(f=>{const p=this.transitions.getValue();return i.next(new ZI(f.id,this.serializeUrl(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions.getValue()?Fa:Promise.resolve(f)}),function W_e(n,e,t,i){return L4(r=>function G_e(n,e,t,i,r){return new Q_e(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe($t(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ma(f=>{this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects},r.urlAfterRedirects=f.urlAfterRedirects}),function eye(n,e,t,i,r,s){return xi(o=>function q_e(n,e,t,i,r,s,o="emptyOnly",a="legacy"){return new K_e(n,e,t,i,r,o,a,s).recognize().pipe(L4(c=>null===c?function $_e(n){return new Ce(e=>e.error(n))}(new j_e):mi(c)))}(n,e,t,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,r,s).pipe($t(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Ma(f=>{if(r.targetSnapshot=f.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!f.extras.skipLocationChange){const g=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl);this.setBrowserUrl(g,f)}this.browserUrlTree=f.urlAfterRedirects}const p=new Wve(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);i.next(p)}));if(l&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:p,extractedUrl:g,source:_,restoredState:y,extras:w}=a,C=new ZI(p,this.serializeUrl(g),_,y);i.next(C);const x=j$(g,this.rootComponentType).snapshot;return mi(r={...a,targetSnapshot:x,urlAfterRedirects:g,extras:{...w,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Fa}),Ma(a=>{const c=new jve(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(c)}),$t(a=>r={...a,guards:m_e(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function E_e(n,e){return xi(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?mi({...t,guardsResult:!0}):function T_e(n,e,t,i){return hs(n).pipe(xi(r=>function F_e(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?mi(s.map(a=>{const c=h9(e)??r,l=C7(a,c);return yd(function x_e(n){return n&&p9(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,i):c.runInContext(()=>l(n,e,t,i))).pipe(kh())})).pipe(b7()):mi(!0)}(r.component,r.route,t,e,i)),kh(r=>!0!==r,!0))}(o,i,r,n).pipe(xi(a=>a&&function y_e(n){return"boolean"==typeof n}(a)?function L_e(n,e,t,i){return hs(e).pipe(_d(r=>n9(function I_e(n,e){return null!==n&&e&&e(new Zve(n)),mi(!0)}(r.route.parent,i),function D_e(n,e){return null!==n&&e&&e(new e_e(n)),mi(!0)}(r.route,i),function R_e(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function A_e(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>_C(()=>mi(o.guards.map(c=>{const l=h9(o.node)??t,u=C7(c,l);return yd(function b_e(n){return n&&p9(n.canActivateChild)}(u)?u.canActivateChild(i,n):l.runInContext(()=>u(i,n))).pipe(kh())})).pipe(b7())));return mi(s).pipe(b7())}(n,r.path,t),function B_e(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return mi(!0);const r=i.map(s=>_C(()=>{const o=h9(e)??t,a=C7(s,o);return yd(function C_e(n){return n&&p9(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(kh())}));return mi(r).pipe(b7())}(n,r.route,t))),kh(r=>!0!==r,!0))}(i,s,n,e):mi(a)),$t(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Ma(a=>{if(r.guardsResult=a.guardsResult,D8(a.guardsResult))throw X$(0,a.guardsResult);const c=new $ve(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(c)}),mo(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),hB(a=>{if(a.guards.canActivateChecks.length)return mi(a).pipe(Ma(c=>{const l=new qve(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}),L4(c=>{let l=!1;return mi(c).pipe(function tye(n,e){return xi(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return mi(t);let s=0;return hs(r).pipe(_d(o=>function nye(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!gq(r)&&(s[i9]=r.title),function iye(n,e,t,i){const r=function rye(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return mi({});const s={};return hs(r).pipe(xi(o=>function sye(n,e,t,i){const r=h9(e)??i,s=C7(n,r);return yd(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(kh(),Ma(a=>{s[o]=a}))),QI(1),b$(s),I0(o=>cB(o)?Fa:A7(o)))}(s,n,e,i).pipe($t(o=>(n._resolvedData=o,n.data=$$(n,t).resolve,r&&gq(r)&&(n.data[i9]=r.title),null)))}(o.route,i,n,e)),Ma(()=>s++),QI(1),xi(o=>s===r.length?mi(t):Fa))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ma({next:()=>l=!0,complete:()=>{l||(this.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),Ma(c=>{const l=new Kve(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}))}),hB(a=>{const c=l=>{const u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(Ma(f=>{l.component=f}),$t(()=>{})));for(const f of l.children)u.push(...c(f));return u};return VI(c(a.targetSnapshot.root)).pipe(yC(),Mc(1))}),hB(()=>this.afterPreactivation()),$t(a=>{const c=function s_e(n,e,t){const i=l9(n,e._root,t?t._root:void 0);return new W$(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:c}}),Ma(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>$t(i=>(new g_e(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Ma({next(){s=!0},complete(){s=!0}}),wC(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),I0(a=>{if(o=!0,J$(a)){Z$(a)||(this.navigated=!0,this.restoreHistory(r,!0));const c=new TC(r.id,this.serializeUrl(r.extractedUrl),a.message,a.cancellationCode);if(i.next(c),Z$(a)){const l=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||yq(r.source)};this.scheduleNavigation(l,"imperative",null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const c=new U$(r.id,this.serializeUrl(r.extractedUrl),a,r.targetSnapshot??void 0);i.next(c);try{r.resolve(this.errorHandler(a))}catch(l){r.reject(l)}}return Fa}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(aB),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,l=r||this.routerState.root,u=c?this.currentUrlTree.fragment:o;let f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}return null!==f&&(f=this.removeEmptyProps(f)),Ove(l,this.currentUrlTree,t,f,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=D8(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function Aye(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new jt(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...pye}:!1===i?{...gye}:i,D8(t))return T$(this.currentUrlTree,t,r);const s=this.parseUrl(t);return T$(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Lu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((p,g)=>{a=p,c=g});const u=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),f=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):f=0,this.setTransition({id:u,targetPageId:f,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i,r){const s=new TC(t.id,this.serializeUrl(t.extractedUrl),i,r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){f8()},n.\u0275prov=Lt({token:n,factory:function(){return _q()},providedIn:"root"}),n})();function yq(n){return"imperative"!==n}let m9=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Je,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=Ih(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Ih(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Ih(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==t?i.setAttribute(r,"tabindex",t):i.removeAttribute(r,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(U(h1),U(wd),e3("tabindex"),U(Yo),U(fn))},n.\u0275dir=ht({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&dn("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[yr]}),n})(),pB=(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.locationStrategy=r,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Je,this.subscription=t.events.subscribe(s=>{s instanceof Lu&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=Ih(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Ih(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Ih(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,i,r,s,o){return!!(0!==t||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(U(h1),U(wd),U(y8))},n.\u0275dir=ht({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,i){1&t&&dn("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&ds("target",i.target)("href",i.href,kc)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[yr]}),n})(),wq=(()=>{class n{constructor(t,i,r,s,o,a){this.router=t,this.element=i,this.renderer=r,this.cdr=s,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ji,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof Lu&&this.update()})}ngAfterContentInit(){mi(this.links.changes,this.linksWithHrefs.changes,mi(null)).pipe(t1()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=hs(t).pipe(t1()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function vye(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&t.isActive(r.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(U(h1),U(fn),U(Yo),U(wc),U(m9,8),U(pB,8))},n.\u0275dir=ht({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,i,r){if(1&t&&(Wa(r,m9,5),Wa(r,pB,5)),2&t){let s;Qi(s=Wi())&&(i.links=s),Qi(s=Wi())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[yr]}),n})();class Cq{}let _ye=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(mo(t=>t instanceof Lu),_d(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=Rw(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return hs(r).pipe(t1())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):mi(null);const s=r.pipe(xi(o=>null===o?mi(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?hs([s,this.loader.loadComponent(i)]).pipe(t1()):s})}}return n.\u0275fac=function(t){return new(t||n)(Ye(h1),Ye(QD),Ye(ye),Ye(Cq),Ye(dB))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gB=new Bt("");let bq=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ZI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Lu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof G$&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new G$(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f8()},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();function x7(n,e){return{\u0275kind:n,\u0275providers:e}}function mB(n){return[{provide:fB,multi:!0,useValue:n}]}function Mq(){const n=Cs(yc);return e=>{const t=n.get(p7);if(e!==t.components[0])return;const i=n.get(h1),r=n.get(Sq);1===n.get(AB)&&i.initialNavigation(),n.get(Eq,null,zn.Optional)?.setUpPreloading(),n.get(gB,null,zn.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.next(),r.complete()}}const Sq=new Bt("",{factory:()=>new Je}),AB=new Bt("",{providedIn:"root",factory:()=>1});const Eq=new Bt("");function bye(n){return x7(0,[{provide:Eq,useExisting:_ye},{provide:Cq,useExisting:n}])}const Tq=new Bt("ROUTER_FORROOT_GUARD"),xye=[UA,{provide:B$,useClass:jI},{provide:h1,useFactory:_q},u9,{provide:wd,useFactory:function xq(n){return n.routerState.root},deps:[h1]},dB];function Mye(){return new OW("Router",h1)}let Sye=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[xye,[],mB(t),{provide:Tq,useFactory:Dye,deps:[[h1,new t3,new y0]]},{provide:OC,useValue:i||{}},i?.useHash?{provide:y8,useClass:ime}:{provide:y8,useClass:uj},{provide:gB,useFactory:()=>{const n=Cs(h1),e=Cs(mAe),t=Cs(OC);return t.scrollOffset&&e.setOffset(t.scrollOffset),new bq(n,e,t)}},i?.preloadingStrategy?bye(i.preloadingStrategy).\u0275providers:[],{provide:OW,multi:!0,useFactory:Mye},i?.initialNavigation?Iye(i):[],[{provide:Lq,useFactory:Mq},{provide:zw,multi:!0,useExisting:Lq}]]}}static forChild(t){return{ngModule:n,providers:[mB(t)]}}}return n.\u0275fac=function(t){return new(t||n)(Ye(Tq,8))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[sB]}),n})();function Dye(n){return"guarded"}function Iye(n){return["disabled"===n.initialNavigation?x7(3,[{provide:NA,multi:!0,useFactory:()=>{const e=Cs(h1);return()=>{e.setUpLocationChangeListener()}}},{provide:AB,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?x7(2,[{provide:AB,useValue:0},{provide:NA,multi:!0,deps:[yc],useFactory:e=>{const t=e.get(tme,Promise.resolve());let i=!1;return()=>t.then(()=>new Promise(s=>{const o=e.get(h1),a=e.get(Sq);(function r(s){e.get(h1).events.pipe(mo(a=>a instanceof Lu||a instanceof TC||a instanceof U$),$t(a=>a instanceof Lu||a instanceof TC&&(0===a.code||1===a.code)&&null),mo(a=>null!==a),Mc(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),o.afterPreactivation=()=>(s(!0),i||a.closed?mi(void 0):a),o.initialNavigation()}))}}]).\u0275providers:[]]}const Lq=new Bt("");var j3=(()=>{return(n=j3||(j3={})).insulated="insulated",n.orientation="orientation",n.baseDimension="base-dimension",n.extensionToNorth="extension-north",n.extensionToSouth="extension-south",n.extensionToWest="extension-west",n.extensionToEast="extension-east",n.halfCircle="half-circle",n.bendPoint="bend-point",n.roofBoth="roof-both",n.roofCircle="roof-circle",n.roof70="roof-70",n.roofWalls="roof-walls",n.efficiency="efficiency",n.simple="simple",n.greyOut="greyOut",n.amountSteps="amount-steps",n.viewlines="viewlines",n.warmWaterBuffer="warm-water-buffer",n.iJoists="i-joits",n.dampOpen="damp-open",n.airTight="air-tight",n.pipeLayer="pipe-layer",n.woodFiberPlate="wood-fiber-plate",j3;var n})(),_t=(()=>{return(n=_t||(_t={})).welcome="welcome",n.passiv="passiv",n.basics="basics",n.extensions="extensions",n.tower="tower",n.end="end",n.EndOfPageHouse="EndOfPageHouse",n.roofBasics="roof-basics",n.roofCircle="roof-circle",n.roofIntermezzo="roof-intermezzo",n.roof70="roof70",n.roofChoice="roof-choice",n.roofEdge="roof-edge",n.stairStart="stair-start",n.stairBasic="stair-basic",n.stairCheck="stair-check",n.stairPlan="stair-plan",n.facadeStart="facade-start",n.facadeWindow="facade-window",n.facadeBrick="facade-Brick",n.facadeDoor="facade-Door",n.constructionWelcome="construction-welcome",n.constructionFoundation="construction-foundation",n.constructionCrawlerSpace="construction-crawler-space",n.constructionGroundFloor="construction-ground-floor",n.constructionWallSole="construction-wall-sole",n.constructionWallJoists="construction-wall-joists",n.constructionWallOSB="construction-wall-osb",n.constructionWallTape="construction-wall-tape",n.constructionFloorLVL="construction-floor-lvl",n.constructionRoofRidge="construction-roof-ridge",n.constructionRoofJoist="construction-roof-joist",n.constructionRoofInside="construction-roof-inside",n.constructionRoofOuterSheet="construction-roof-outerSheet",n.constructionRoofSpace="construction-roof-space",n.constructionRoofTiles="construction-roof-tiles",n.constructionWallInsulation="construction-wall-insulation",n.constructionWallOuterSheet="construction-wall-outer-sheet",n.constructionWallSpace="construction-wall-space",n.constructionWallFacade="construction-wall-facade",n.constructionWallGips="construction-wall-gips",n.constructionWallService="construction-wall-service",n.constructionFloor="construction-floor",n.constructionFloorOSB="construction-floor-osb",n.constructionRoof="construction-roof",n.constructionWallFinish="construction-wall-finish",n.constructionParameters="construction-parameters",n.installationWelcome="installations-welcome",n.installationDrinkWater="installations-drink-water",n.installationGreyWater="installations-grey-water",n.installationHeating="installations-heating",n.installationElectricity="installations-electricity",n.installationVentilation="installations-ventilation",n.installationSmartHome="installations-smartHome",n.wiredWelcome="wired-welcome",n.wiredPower="wired-power",n.wiredEthernet="wired-ethernet",n.wiredSafety="wired-safety",n.wiredExtra="wired-extra",n.wiredLight="wired-light",n.wiredVent="wired-vent",n.wiredWater="wired-water",n.costsWelcome="costs-welcome",n.costsConstruction="costs-construction",n.costsPreparations="costs-preparations",n.costsOpenings="costs-openings",n.costsElectra="costs-electra",n.costsWater="costs-water",n.costsFinishes="costs-finishes",n.costsOuterFinishes="costs-outer-finishes",n.costsTotals="costs-totals",n.planningPreps="planning-preps",n.planningFoundation="planning-foundation",n.planningFraming="planning-framing",n.planningOutside="planning-outside",n.planningInstallations="planning-installations",n.planningFinishing="planning-finishing",n.House3D="House3D",_t;var n})(),tt=(()=>{return(n=tt||(tt={})).top="top",n.ground="ground",n.ceiling="ceiling",n.all="all",n.tower="tower",n.none="none",tt;var n})(),Cd=(()=>{return(n=Cd||(Cd={})).left="left",n.right="right",n.none="none",Cd;var n})(),Co=(()=>{return(n=Co||(Co={})).house2D="house2D",n.cross="cross",n.stairPlan="stairPlan",n.stairCross="stairCross",n.construction="construction",n.House3D="House3D",n.none="none",Co;var n})(),Ge=(()=>{return(n=Ge||(Ge={})).perilex="perilex",n.socket="socket",n.lightBulb="light-bulb",n.lightSwitch="light-switch",n.dlc="dlc",n.dimmer="dimmer",n.poe="poe",n.ethernet="ethernet",n.wifi="wifi",n.camera="camera",n.alarm="alarm",n.smoke="smoke",n.pir="pir",n.blinds="blinds",n.temperature="temperature",n.ventIn="vent-in",n.ventOut="vent-out",n.waterCold="water-cold",n.waterRain="water-rain",n.waterWarm="water-warm",n.drain="drain",n.shower="shower",n.toilet="toilet",Ge;var n})(),T2=(()=>{return(n=T2||(T2={})).doors="doors",n.stats="stats",n.examplePlan="examplePlan",n.theoreticalWalls="theoreticalWalls",n.silhouette="silhouette",n.measure="measure",n.decoration="decoration",n.stramien="stramien",n.towerFootprint="towerFootprint",n.grid="grid",n.walkLine="walkLine",n.minimumHeight="minimumHeight",T2;var n})(),Du=(()=>{return(n=Du||(Du={})).OutsidePOE="OutsidePOE",n.SharedEthernet="SharedEthernet",Du;var n})(),bd=(()=>{return(n=bd||(bd={})).clipBoxEnabled="clipBoxEnabled",n.clipBoxShow="clipBoxShow",n.mirror="mirror",bd;var n})(),q2=(()=>{return(n=q2||(q2={})).foundation="house3d-foundation",n.groundFloor="house3d-groundFloor",n.topFloor="house3d-topFloor",n.roof="house3d-roof",n.innerWall="house3d-innerWall",n.outerWall="house3d-outerWall",n.studs="house3d-studs",n.lvl="house3d-lvl",n.debug="house3d-debug",n.tower="house3d-tower",q2;var n})(),Di=(()=>{return(n=Di||(Di={})).foundation="A1-construction-foundation",n.crawlerSpace="A2-construction-crawler-space",n.groundFloor="A3-construction-ground-floor",n.sole="A4-construction-sole",n.joists="A5-construction-joists",n.osbWall="A6-construction-osb-wall",n.tapes="A7-construction-tapes",n.floorLVL="B1-construction-floorLVL",n.topFloorJoists="B2-construction-top-floor-joists",n.topFloorOSB="B2-construction-top-floor-osb",n.roofRidge="B3-construction-roof-ridge",n.roofJoists="B4-construction-roof-joists",n.roofOSB="B5-construction-roof-osb",n.insulation="C1-construction-insulation",n.outerSheet="C2-construction-outerSheet",n.roofOuterSheets="C3-construction-roof-outerSheet",n.roofSpace="C4-construction-roof-space",n.roofTiles="C5-construction-roof-tiles",n.space="D1-construction-space",n.facade="D2-construction-facade",n.serviceBeams="E1-construction-serviceBeams",n.serviceInsulation="E2-construction-serviceInsulation",n.gips="E3-construction-gips",Di;var n})(),Ro=(()=>{return(n=Ro||(Ro={})).red="red",n.green="green",n.blue="blue",n.x="x",n.y="y",n.z="z",Ro;var n})();let Iu=(()=>{class n{constructor(t,i){this.document=t,this.platformId=i,this.documentIsAccessible=pd(this.platformId)}static getCookieRegExp(t){const i=t.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(t){return!!this.documentIsAccessible&&(t=encodeURIComponent(t),n.getCookieRegExp(t).test(this.document.cookie))}get(t){if(this.documentIsAccessible&&this.check(t)){t=encodeURIComponent(t);const r=n.getCookieRegExp(t).exec(this.document.cookie);return r[1]?n.safeDecodeURIComponent(r[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const t={},i=this.document;return i.cookie&&""!==i.cookie&&i.cookie.split(";").forEach(r=>{const[s,o]=r.split("=");t[n.safeDecodeURIComponent(s.replace(/^ /,""))]=n.safeDecodeURIComponent(o)}),t}set(t,i,r,s,o,a,c){if(!this.documentIsAccessible)return;if("number"==typeof r||r instanceof Date||s||o||a||c)return void this.set(t,i,{expires:r,path:s,domain:o,secure:a,sameSite:c||"Lax"});let l=encodeURIComponent(t)+"="+encodeURIComponent(i)+";";const u=r||{};u.expires&&(l+="number"==typeof u.expires?"expires="+new Date((new Date).getTime()+1e3*u.expires*60*60*24).toUTCString()+";":"expires="+u.expires.toUTCString()+";"),u.path&&(l+="path="+u.path+";"),u.domain&&(l+="domain="+u.domain+";"),!1===u.secure&&"None"===u.sameSite&&(u.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),u.secure&&(l+="secure;"),u.sameSite||(u.sameSite="Lax"),l+="sameSite="+u.sameSite+";",this.document.cookie=l}delete(t,i,r,s,o="Lax"){if(!this.documentIsAccessible)return;const a=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:a,path:i,domain:r,secure:s,sameSite:o})}deleteAll(t,i,r,s="Lax"){if(!this.documentIsAccessible)return;const o=this.getAll();for(const a in o)o.hasOwnProperty(a)&&this.delete(a,t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(Ye(Fi),Ye(Q3))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fo=(()=>{class n{constructor(t,i){this.cookieService=t,this.router=i,this.darkMode=!1,this.title="Lindelund",this.discord="https://discord.gg/hrjfzY3yTp",this.github="https://github.com/PassiveOpen/PassiveOpen.github.io",this.youtube="https://www.youtube.com/channel/UCtP_RM2k4-27u40nC0ncpdw",this.patreon="https://www.patreon.com/PassiveOpen",this.instagram="https://www.instagram.com/2_plings/",this.update$=new Je,this.tag$=new Ao(void 0),this.graphic$=new Ao(void 0),this.states$=new Ao({}),this.popupActive$=new Ao(!1),this.fullscreen$=new Ao(!0),this.svgTransform$=new Ao(void 0),this.page$=this.router.events.pipe(mo(r=>r instanceof Lu),D0(this.router),$t(r=>r.url.toLowerCase().split("/")[1])),this.floor$=new Ao(tt.ground),this.scroll$=new Ao({scroll:0,percentage:0,section:void 0,graphicSide:void 0,graphic:void 0}),this.getCookies()}setStatesSilent(t,i,r){t.flatMap(s=>this.setState(s,i,r,!1))}hardSetStates(t){const i=this.states$.value;Object.entries(t).forEach(([r,s])=>{i[r]=s}),this.commitState(i)}setState(t,i,r,s=!0){const o=this.states$.value;(t instanceof Array?t:[t]).flatMap(a=>{r&&(o[a]=Boolean(this.cookieService.get("states"))),o[a]=void 0!==i?i:void 0===o[a]||!o[a]}),s?this.commitState(o):this.silentStates=o}commitState(t){this.states$.next(t),this.cookieService.set("states",JSON.stringify(t))}setTransformCookie(t,i){this.svgTransform$.next({[i]:t}),this.cookieService.set("svgTransform",JSON.stringify(this.svgTransform$.value))}getCookies(){let t=this.cookieService.get("floor");""===t&&(t=tt.ground),this.floor$.next(t);let i=this.cookieService.get("fullscreen");i=""!==i&&"true"===i,this.fullscreen$.next(i);let r=this.cookieService.get("svgTransform");(""===r||!1===i)&&(r="{}"),this.svgTransform$.next(JSON.parse(r));let s=this.cookieService.get("darkMode");this.setDarkMode(""===s?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches:"true"===s);let o=this.cookieService.get("states");""===o&&(o="{}"),this.states$.next(JSON.parse(o))}setFloor(t){let i;void 0!==t?i=t:(this.floor$.value===tt.ground&&(i=tt.top),this.floor$.value===tt.top&&(i=tt.ground)),this.floor$.next(i),this.cookieService.set("floor",i),this.update$.next()}setTag(t){this.tag$.next(t),this.update$.next()}setDarkMode(t,i=!1){document.body.classList.remove("light"),document.body.classList.remove("dark"),this.darkMode=void 0!==t?t:!this.darkMode,this.darkMode?document.body.classList.add("dark"):document.body.classList.add("light"),i&&this.cookieService.set("darkMode",`${this.darkMode}`,.1)}}return n.\u0275fac=function(t){return new(t||n)(Ye(Iu),Ye(h1))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Dq(n){for(let e in n){let t=n[e]??"";switch(e){case"display":n.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":n["-webkit-"+e]=t;break;case"flex-direction":n["-webkit-flex-direction"]=t,n["flex-direction"]=t;break;case"order":n.order=n["-webkit-"+e]=isNaN(+t)?"0":t}}return n}const vB="inline",GC=["row","column","row-reverse","column-reverse"];function Iq(n){let[e,t,i]=Bq(n);return function kye(n,e=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":n,"flex-wrap":e||null}}(e,t,i)}function Bq(n){n=n?.toLowerCase()??"";let[e,t,i]=n.split(" ");return GC.find(r=>r===e)||(e=GC[0]),t===vB&&(t=i!==vB?i:"",i=vB),[e,Fye(t),!!i]}function A9(n){let[e]=Bq(n);return e.indexOf("row")>-1}function Fye(n){if(n)switch(n.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":n="wrap-reverse";break;case"no":case"none":case"nowrap":n="nowrap";break;default:n="wrap"}return n}function zh(n,...e){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(let t of e)if(null!=t)for(let i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}const Hye={provide:zw,useFactory:function Pye(n,e){return()=>{if(pd(e)){const t=Array.from(n.querySelectorAll(`[class*=${Rq}]`)),i=/\bflex-layout-.+?\b/g;t.forEach(r=>{r.classList.contains(`${Rq}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(i,"")})}}},deps:[Fi,Q3],multi:!0},Rq="flex-layout-";let _B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[Hye]}),n})();class I8{constructor(e=!1,t="all",i="",r="",s=0){this.matches=e,this.mediaQuery=t,this.mqAlias=i,this.suffix=r,this.priority=s,this.property=""}clone(){return new I8(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let zye=(()=>{class n{constructor(){this.stylesheet=new Map}addStyleToElement(t,i,r){const s=this.stylesheet.get(t);s?s.set(i,r):this.stylesheet.set(t,new Map([[i,r]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,i){const r=this.stylesheet.get(t);let s="";if(r){const o=r.get(i);("number"==typeof o||"string"==typeof o)&&(s=o+"")}return s}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yB={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},Bu=new Bt("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>yB}),M7=new Bt("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),wB=new Bt("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function Fq(n,e){return n=n?.clone()??new I8,e&&(n.mqAlias=e.alias,n.mediaQuery=e.mediaQuery,n.suffix=e.suffix,n.priority=e.priority),n}class B1{constructor(){this.shouldCache=!0}sideEffect(e,t,i){}}let Sa=(()=>{class n{constructor(t,i,r,s){this._serverStylesheet=t,this._serverModuleLoaded=i,this._platformId=r,this.layoutConfig=s}applyStyleToElement(t,i,r=null){let s={};"string"==typeof i&&(s[i]=r,i=s),s=this.layoutConfig.disableVendorPrefixes?i:Dq(i),this._applyMultiValueStyleToElement(s,t)}applyStyleToElements(t,i=[]){const r=this.layoutConfig.disableVendorPrefixes?t:Dq(t);i.forEach(s=>{this._applyMultiValueStyleToElement(r,s)})}getFlowDirection(t){const i="flex-direction";let r=this.lookupStyle(t,i);return[r||"row",this.lookupInlineStyle(t,i)||g7(this._platformId)&&this._serverModuleLoaded?r:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,i){return t.getAttribute(i)??""}lookupInlineStyle(t,i){return pd(this._platformId)?t.style.getPropertyValue(i):function Oye(n,e){return kq(n)[e]??""}(t,i)}lookupStyle(t,i,r=!1){let s="";return t&&((s=this.lookupInlineStyle(t,i))||(pd(this._platformId)?r||(s=getComputedStyle(t).getPropertyValue(i)):this._serverModuleLoaded&&(s=this._serverStylesheet.getStyleForElement(t,i)))),s?s.trim():""}_applyMultiValueStyleToElement(t,i){Object.keys(t).sort().forEach(r=>{const s=t[r],o=Array.isArray(s)?s:[s];o.sort();for(let a of o)a=a?a+"":"",pd(this._platformId)||!this._serverModuleLoaded?pd(this._platformId)?i.style.setProperty(r,a):Nye(i,r,a):this._serverStylesheet.addStyleToElement(i,r,a)})}}return n.\u0275fac=function(t){return new(t||n)(Ye(zye),Ye(M7),Ye(Q3),Ye(Bu))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Nye(n,e,t){e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const i=kq(n);i[e]=t??"",function Vye(n,e){let t="";for(const i in e)e[i]&&(t+=`${i}:${e[i]};`);n.setAttribute("style",t)}(n,i)}function kq(n){const e={},t=n.getAttribute("style");if(t){const i=t.split(/;+/g);for(let r=0;r<i.length;r++){const s=i[r].trim();if(s.length>0){const o=s.indexOf(":");if(-1===o)throw new Error(`Invalid CSS style: ${s}`);e[s.substr(0,o).trim()]=s.substr(o+1).trim()}}}return e}function v9(n,e){return(e&&e.priority||0)-(n&&n.priority||0)}function Uye(n,e){return(n.priority||0)-(e.priority||0)}let CB=(()=>{class n{constructor(t,i,r){this._zone=t,this._platformId=i,this._document=r,this.source=new Ao(new I8(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((i,r)=>{i.matches&&t.push(r)}),t}isActive(t){return this.registry.get(t)?.matches??this.registerQuery(t).some(r=>r.matches)}observe(t,i=!1){if(t&&t.length){const r=this._observable$.pipe(mo(o=>!i||t.indexOf(o.mediaQuery)>-1));return Zc(new Ce(o=>{const a=this.registerQuery(t);if(a.length){const c=a.pop();a.forEach(l=>{o.next(l)}),this.source.next(c)}o.complete()}),r)}return this._observable$}registerQuery(t){const i=Array.isArray(t)?t:[t],r=[];return function Gye(n,e){const t=n.filter(i=>!Pq[i]);if(t.length>0){const i=t.join(", ");try{const r=e.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(e.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${i} {.fx-query-test{ }}\n`)),e.head.appendChild(r),t.forEach(s=>Pq[s]=r)}catch(r){console.error(r)}}}(i,this._document),i.forEach(s=>{const o=c=>{this._zone.run(()=>this.source.next(new I8(c.matches,s)))};let a=this.registry.get(s);a||(a=this.buildMQL(s),a.addListener(o),this.pendingRemoveListenerFns.push(()=>a.removeListener(o)),this.registry.set(s,a)),a.matches&&r.push(new I8(!0,s))}),r}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function Qye(n,e){return e&&window.matchMedia("all").addListener?window.matchMedia(n):{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,pd(this._platformId))}}return n.\u0275fac=function(t){return new(t||n)(Ye(Xi),Ye(Q3),Ye(Fi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Pq={},Wye=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],Hq="(orientation: portrait) and (max-width: 599.98px)",zq="(orientation: landscape) and (max-width: 959.98px)",Oq="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",Nq="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",Vq="(orientation: portrait) and (min-width: 840px)",Uq="(orientation: landscape) and (min-width: 1280px)",Oh={HANDSET:`${Hq}, ${zq}`,TABLET:`${Oq} , ${Nq}`,WEB:`${Vq}, ${Uq} `,HANDSET_PORTRAIT:`${Hq}`,TABLET_PORTRAIT:`${Oq} `,WEB_PORTRAIT:`${Vq}`,HANDSET_LANDSCAPE:`${zq}`,TABLET_LANDSCAPE:`${Nq}`,WEB_LANDSCAPE:`${Uq}`},jye=[{alias:"handset",priority:2e3,mediaQuery:Oh.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:Oh.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:Oh.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:Oh.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:Oh.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:Oh.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:Oh.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:Oh.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:Oh.WEB_PORTRAIT,overlapping:!0}],$ye=/(\.|-|_)/g;function qye(n){let e=n.length>0?n.charAt(0):"",t=n.length>1?n.slice(1):"";return e.toUpperCase()+t}const Zye=new Bt("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const n=Cs(wB),e=Cs(Bu),t=[].concat.apply([],(n||[]).map(r=>Array.isArray(r)?r:[r]));return function Yye(n,e=[]){const t={};return n.forEach(i=>{t[i.alias]=i}),e.forEach(i=>{t[i.alias]?zh(t[i.alias],i):t[i.alias]=i}),function Xye(n){return n.forEach(e=>{e.suffix||(e.suffix=function Kye(n){return n.replace($ye,"|").split("|").map(qye).join("")}(e.alias),e.overlapping=!!e.overlapping)}),n}(Object.keys(t).map(i=>t[i]))}((e.disableDefaultBps?[]:Wye).concat(e.addOrientationBps?jye:[]),t)}});let bB=(()=>{class n{constructor(t){this.findByMap=new Map,this.items=[...t].sort(Uye)}findByAlias(t){return t?this.findWithPredicate(t,i=>i.alias===t):null}findByQuery(t){return this.findWithPredicate(t,i=>i.mediaQuery===t)}get overlappings(){return this.items.filter(t=>t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t?.suffix??"")}findWithPredicate(t,i){let r=this.findByMap.get(t);return r||(r=this.items.find(i)??null,this.findByMap.set(t,r)),r??null}}return n.\u0275fac=function(t){return new(t||n)(Ye(Zye))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const S7="print",Jye={alias:S7,mediaQuery:S7,priority:1e3};let ewe=(()=>{class n{constructor(t,i,r){this.breakpoints=t,this.layoutConfig=i,this._document=r,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new twe,this.deactivations=[]}withPrintQuery(t){return[...t,S7]}isPrintEvent(t){return t.mediaQuery.startsWith(S7)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const i=this.breakpoints.findByQuery(t);return(i?[...this.printBreakPoints,i]:this.printBreakPoints).sort(v9)}updateEvent(t){let i=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(i=this.getEventBreakpoints(t)[0],t.mediaQuery=i?.mediaQuery??""),Fq(t,i)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const i=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new I8(!0,S7))),t.updateStyles())},r=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",i),this._document.defaultView.addEventListener("afterprint",r),this.beforePrintEventListeners.push(i),this.afterPrintEventListeners.push(r)}interceptEvents(t){return i=>{this.isPrintEvent(i)?i.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(i)),t.updateStyles()):!i.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(t,i)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,i){this.isPrinting=!0,this.formerActivations=t.activatedBreakpoints,t.activatedBreakpoints=this.queue.addPrintBreakpoints(i)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(t,i){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!i.matches){const r=this.breakpoints.findByQuery(i.mediaQuery);if(r){const s=this.formerActivations&&this.formerActivations.includes(r),o=!this.formerActivations&&t.activatedBreakpoints.includes(r);(s||o)&&(this.deactivations.push(r),this.deactivations.sort(v9))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return n.\u0275fac=function(t){return new(t||n)(Ye(bB),Ye(Bu),Ye(Fi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class twe{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(e){return e.push(Jye),e.sort(v9),e.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(e){e&&void 0===this.printBreakpoints.find(i=>i.mediaQuery===e.mediaQuery)&&(this.printBreakpoints=function nwe(n){return n?.mediaQuery.startsWith(S7)??!1}(e)?[e,...this.printBreakpoints]:[...this.printBreakpoints,e])}clear(){this.printBreakpoints=[]}}let ja=(()=>{class n{constructor(t,i,r){this.matchMedia=t,this.breakpoints=i,this.hook=r,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new Je,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(t){this._activatedBreakpoints=[...t]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(t){this._useFallbacks=t}onMediaChange(t){const i=this.findByQuery(t.mediaQuery);if(i){t=Fq(t,i);const r=this.activatedBreakpoints.indexOf(i);t.matches&&-1===r?(this._activatedBreakpoints.push(i),this._activatedBreakpoints.sort(v9),this.updateStyles()):!t.matches&&-1!==r&&(this._activatedBreakpoints.splice(r,1),this._activatedBreakpoints.sort(v9),this.updateStyles())}}init(t,i,r,s,o=[]){Gq(this.updateMap,t,i,r),Gq(this.clearMap,t,i,s),this.buildElementKeyMap(t,i),this.watchExtraTriggers(t,i,o)}getValue(t,i,r){const s=this.elementMap.get(t);if(s){const o=void 0!==r?s.get(r):this.getActivatedValues(s,i);if(o)return o.get(i)}}hasValue(t,i){const r=this.elementMap.get(t);if(r){const s=this.getActivatedValues(r,i);if(s)return void 0!==s.get(i)||!1}return!1}setValue(t,i,r,s){let o=this.elementMap.get(t);if(o){const c=(o.get(s)??new Map).set(i,r);o.set(s,c),this.elementMap.set(t,o)}else o=(new Map).set(s,(new Map).set(i,r)),this.elementMap.set(t,o);const a=this.getValue(t,i);void 0!==a&&this.updateElement(t,i,a)}trackValue(t,i){return this.subject.asObservable().pipe(mo(r=>r.element===t&&r.key===i))}updateStyles(){this.elementMap.forEach((t,i)=>{const r=new Set(this.elementKeyMap.get(i));let s=this.getActivatedValues(t);s&&s.forEach((o,a)=>{this.updateElement(i,a,o),r.delete(a)}),r.forEach(o=>{if(s=this.getActivatedValues(t,o),s){const a=s.get(o);this.updateElement(i,o,a)}else this.clearElement(i,o)})})}clearElement(t,i){const r=this.clearMap.get(t);if(r){const s=r.get(i);s&&(s(),this.subject.next({element:t,key:i,value:""}))}}updateElement(t,i,r){const s=this.updateMap.get(t);if(s){const o=s.get(i);o&&(o(r),this.subject.next({element:t,key:i,value:r}))}}releaseElement(t){const i=this.watcherMap.get(t);i&&(i.forEach(s=>s.unsubscribe()),this.watcherMap.delete(t));const r=this.elementMap.get(t);r&&(r.forEach((s,o)=>r.delete(o)),this.elementMap.delete(t))}triggerUpdate(t,i){const r=this.elementMap.get(t);if(r){const s=this.getActivatedValues(r,i);s&&(i?this.updateElement(t,i,s.get(i)):s.forEach((o,a)=>this.updateElement(t,a,o)))}}buildElementKeyMap(t,i){let r=this.elementKeyMap.get(t);r||(r=new Set,this.elementKeyMap.set(t,r)),r.add(i)}watchExtraTriggers(t,i,r){if(r&&r.length){let s=this.watcherMap.get(t);if(s||(s=new Map,this.watcherMap.set(t,s)),!s.get(i)){const a=Zc(...r).subscribe(()=>{const c=this.getValue(t,i);this.updateElement(t,i,c)});s.set(i,a)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,i){for(let s=0;s<this.activatedBreakpoints.length;s++){const a=t.get(this.activatedBreakpoints[s].alias);if(a&&(void 0===i||a.has(i)&&null!=a.get(i)))return a}if(!this._useFallbacks)return;const r=t.get("");return void 0===i||r&&r.has(i)?r:void 0}observeActivations(){const t=this.breakpoints.items.map(i=>i.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe(Ma(this.hook.interceptEvents(this)),mo(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return n.\u0275fac=function(t){return new(t||n)(Ye(CB),Ye(bB),Ye(ewe))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Gq(n,e,t,i){if(void 0!==i){const r=n.get(e)??new Map;r.set(t,i),n.set(e,r)}}let f1=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.styleBuilder=i,this.styler=r,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new Je,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const r=i.split(".").slice(1).join(".");this.setValue(t[i].currentValue,r)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,i){const r=this.styleBuilder,s=r.shouldCache;let o=this.styleCache.get(t);(!o||!s)&&(o=r.buildStyles(t,i),s&&this.styleCache.set(t,o)),this.mru={...o},this.applyStyleToElement(o),r.sideEffect(t,o,i)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,i=!1){if(t){const[r,s]=this.styler.getFlowDirection(t);if(!s&&i){const o=Iq(r);this.styler.applyStyleToElements(o,[t])}return r.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,i,r=this.nativeElement){this.styler.applyStyleToElement(r,t,i)}setValue(t,i){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,i)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(B1),U(Sa),U(ja))},n.\u0275dir=ht({type:n,features:[yr]}),n})();function Qq(n,e="1",t="1"){let i=[e,t,n],r=n.indexOf("calc");if(r>0){i[2]=Wq(n.substring(r).trim());let s=n.substr(0,r).trim().split(" ");2==s.length&&(i[0]=s[0],i[1]=s[1])}else if(0==r)i[2]=Wq(n.trim());else{let s=n.split(" ");i=3===s.length?s:[e,t,n]}return i}function Wq(n){return n.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}function QC(n,e){if(void 0===e)return n;const t=i=>{const r=+i.slice(0,-"x".length);return n.endsWith("x")&&!isNaN(r)?`${r*e.value}${e.unit}`:n};return n.includes(" ")?n.split(" ").map(t).join(" "):t(n)}let swe=(()=>{class n extends B1{buildStyles(t,{display:i}){const r=Iq(t);return{...r,display:"none"===i?i:r.display}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const owe=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let awe=(()=>{class n extends f1{constructor(t,i,r,s,o){super(t,r,i,s),this._config=o,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(t){const r=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=$q.get(r)??new Map,$q.set(r,this.styleCache),this.currentValue!==t&&(this.addStyles(t,{display:r}),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(Sa),U(swe),U(ja),U(Bu))},n.\u0275dir=ht({type:n,features:[zt]}),n})(),E7=(()=>{class n extends awe{constructor(){super(...arguments),this.inputs=owe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[zt]}),n})();const $q=new Map,qq={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};let cwe=(()=>{class n extends B1{constructor(t,i){super(),this._styler=t,this._config=i}buildStyles(t,i){return t.endsWith(WC)?function mwe(n,e){const[t,i]=n.split(" "),s=l=>`-${l}`;let o="0px",a=s(i??t),c="0px";return"rtl"===e?c=s(t):o=s(t),{margin:`0px ${o} ${a} ${c}`}}(t=QC(t=t.slice(0,t.indexOf(WC)),this._config.multiplier),i.directionality):{}}sideEffect(t,i,r){const s=r.items;if(t.endsWith(WC)){const o=function gwe(n,e){const[t,i]=n.split(" ");let s="0px",a="0px";return"rtl"===e?a=t:s=t,{padding:`0px ${s} ${i??t} ${a}`}}(t=QC(t=t.slice(0,t.indexOf(WC)),this._config.multiplier),r.directionality);this._styler.applyStyleToElements(o,r.items)}else{t=QC(t,this._config.multiplier),t=this.addFallbackUnit(t);const o=s.pop(),a=function Awe(n,e){const t=Kq(e.directionality,e.layout),i={...qq};return i[t]=n,i}(t,r);this._styler.applyStyleToElements(a,s),this._styler.applyStyleToElements(qq,[o])}}addFallbackUnit(t){return isNaN(+t)?t:`${t}${this._config.defaultUnit}`}}return n.\u0275fac=function(t){return new(t||n)(Ye(Sa),Ye(Bu))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lwe=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"];let uwe=(()=>{class n extends f1{constructor(t,i,r,s,o,a){super(t,o,s,a),this.zone=i,this.directionality=r,this.styleUtils=s,this.layout="row",this.DIRECTIVE_KEY="layout-gap",this.observerSubject=new Je;const c=[this.directionality.change,this.observerSubject.asObservable()];this.init(c),this.marshal.trackValue(this.nativeElement,"layout").pipe(xa(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}get childrenNodes(){const t=this.nativeElement.children,i=[];for(let r=t.length;r--;)i[r]=t[r];return i}ngAfterContentInit(){this.buildChildObservable(),this.triggerUpdate()}ngOnDestroy(){super.ngOnDestroy(),this.observer&&this.observer.disconnect()}onLayoutChange(t){const r=t.value.split(" ");this.layout=r[0],GC.find(s=>s===this.layout)||(this.layout="row"),this.triggerUpdate()}updateWithValue(t){const i=this.childrenNodes.filter(r=>1===r.nodeType&&this.willDisplay(r)).sort((r,s)=>{const o=+this.styler.lookupStyle(r,"order"),a=+this.styler.lookupStyle(s,"order");return isNaN(o)||isNaN(a)||o===a?0:o>a?1:-1});if(i.length>0){const r=this.directionality.value,s=this.layout;"row"===s&&"rtl"===r?this.styleCache=hwe:"row"===s&&"rtl"!==r?this.styleCache=dwe:"column"===s&&"rtl"===r?this.styleCache=fwe:"column"===s&&"rtl"!==r&&(this.styleCache=pwe),this.addStyles(t,{directionality:r,items:i,layout:s})}}clearStyles(){const t=Object.keys(this.mru).length>0,i=t?"padding":Kq(this.directionality.value,this.layout);t&&super.clearStyles(),this.styleUtils.applyStyleToElements({[i]:""},this.childrenNodes)}willDisplay(t){const i=this.marshal.getValue(t,"show-hide");return!0===i||void 0===i&&"none"!==this.styleUtils.lookupStyle(t,"display")}buildChildObservable(){this.zone.runOutsideAngular(()=>{typeof MutationObserver<"u"&&(this.observer=new MutationObserver(t=>{t.some(r=>r.addedNodes&&r.addedNodes.length>0||r.removedNodes&&r.removedNodes.length>0)&&this.observerSubject.next()}),this.observer.observe(this.nativeElement,{childList:!0}))})}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(Xi),U(Fh),U(Sa),U(cwe),U(ja))},n.\u0275dir=ht({type:n,features:[zt]}),n})(),T7=(()=>{class n extends uwe{constructor(){super(...arguments),this.inputs=lwe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[zt]}),n})();const hwe=new Map,fwe=new Map,dwe=new Map,pwe=new Map,WC=" grid";function Kq(n,e){switch(e){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":default:return"rtl"===n?"margin-left":"margin-right";case"row-reverse":return"rtl"===n?"margin-right":"margin-left"}}let vwe=(()=>{class n extends B1{constructor(t){super(),this.layoutConfig=t}buildStyles(t,i){let[r,s,...o]=t.split(" "),a=o.join(" ");const c=i.direction.indexOf("column")>-1?"column":"row",l=A9(c)?"max-width":"max-height",u=A9(c)?"min-width":"min-height",f=String(a).indexOf("calc")>-1,p=f||"auto"===a,g=String(a).indexOf("%")>-1&&!f,_=String(a).indexOf("px")>-1||String(a).indexOf("rem")>-1||String(a).indexOf("em")>-1||String(a).indexOf("vw")>-1||String(a).indexOf("vh")>-1;let y=f||_;r="0"==r?0:r,s="0"==s?0:s;const w=!r&&!s;let C={};const x={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(a||""){case"":const M=!1!==this.layoutConfig.useColumnBasisZero;a="row"===c?"0%":M?"0.000000001px":"auto";break;case"initial":case"nogrow":r=0,a="auto";break;case"grow":a="100%";break;case"noshrink":s=0,a="auto";break;case"auto":break;case"none":r=0,s=0,a="auto";break;default:!y&&!g&&!isNaN(a)&&(a+="%"),"0%"===a&&(y=!0),"0px"===a&&(a="0%"),C=zh(x,f?{"flex-grow":r,"flex-shrink":s,"flex-basis":y?a:"100%"}:{flex:`${r} ${s} ${y?a:"100%"}`})}return C.flex||C["flex-grow"]||(C=zh(x,f?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`})),"0%"!==a&&"0px"!==a&&"0.000000001px"!==a&&"auto"!==a&&(C[u]=w||y&&r?a:null,C[l]=w||!p&&s?a:null),C[u]||C[l]?i.hasWrap&&(C[f?"flex-basis":"flex"]=C[l]?f?C[l]:`${r} ${s} ${C[l]}`:f?C[u]:`${r} ${s} ${C[u]}`):C=zh(x,f?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`}),zh(C,{"box-sizing":"border-box"})}}return n.\u0275fac=function(t){return new(t||n)(Ye(Bu))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _we=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let ywe=(()=>{class n extends f1{constructor(t,i,r,s,o){super(t,s,i,o),this.layoutConfig=r,this.marshal=o,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(t){this.flexShrink=t||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(t){this.flexGrow=t||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(xa(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(xa(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(t){const r=t.value.split(" ");this.direction=r[0],this.wrap=void 0!==r[1]&&"wrap"===r[1],this.triggerUpdate()}updateWithValue(t){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const r=this.direction,s=r.startsWith("row"),o=this.wrap;s&&o?this.styleCache=bwe:s&&!o?this.styleCache=wwe:!s&&o?this.styleCache=xwe:!s&&!o&&(this.styleCache=Cwe);const c=Qq(String(t).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(c.join(" "),{direction:r,hasWrap:o})}triggerReflow(){const t=this.activatedValue;if(void 0!==t){const i=Qq(t+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,i.join(" "))}}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(Sa),U(Bu),U(vwe),U(ja))},n.\u0275dir=ht({type:n,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[zt]}),n})(),xB=(()=>{class n extends ywe{constructor(){super(...arguments),this.inputs=_we}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[zt]}),n})();const wwe=new Map,Cwe=new Map,bwe=new Map,xwe=new Map;let $we=(()=>{class n extends B1{buildStyles(t,i){const r={},[s,o]=t.split(" ");switch(s){case"center":r["justify-content"]="center";break;case"space-around":r["justify-content"]="space-around";break;case"space-between":r["justify-content"]="space-between";break;case"space-evenly":r["justify-content"]="space-evenly";break;case"end":case"flex-end":r["justify-content"]="flex-end";break;default:r["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":r["align-items"]=r["align-content"]="flex-start";break;case"center":r["align-items"]=r["align-content"]="center";break;case"end":case"flex-end":r["align-items"]=r["align-content"]="flex-end";break;case"space-between":r["align-content"]="space-between",r["align-items"]="stretch";break;case"space-around":r["align-content"]="space-around",r["align-items"]="stretch";break;case"baseline":r["align-content"]="stretch",r["align-items"]="baseline";break;default:r["align-items"]=r["align-content"]="stretch"}return zh(r,{display:i.inline?"inline-flex":"flex","flex-direction":i.layout,"box-sizing":"border-box","max-width":"stretch"===o?A9(i.layout)?null:"100%":null,"max-height":"stretch"===o&&A9(i.layout)?"100%":null})}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qwe=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let Kwe=(()=>{class n extends f1{constructor(t,i,r,s){super(t,r,i,s),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(xa(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const i=this.layout||"row",r=this.inline;"row"===i&&r?this.styleCache=eCe:"row"!==i||r?"row-reverse"===i&&r?this.styleCache=nCe:"row-reverse"!==i||r?"column"===i&&r?this.styleCache=tCe:"column"!==i||r?"column-reverse"===i&&r?this.styleCache=iCe:"column-reverse"===i&&!r&&(this.styleCache=Jwe):this.styleCache=Ywe:this.styleCache=Zwe:this.styleCache=Xwe,this.addStyles(t,{layout:i,inline:r})}onLayoutChange(t){const i=t.value.split(" ");this.layout=i[0],this.inline=t.value.includes("inline"),GC.find(r=>r===this.layout)||(this.layout="row"),this.triggerUpdate()}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(Sa),U($we),U(ja))},n.\u0275dir=ht({type:n,features:[zt]}),n})(),Nh=(()=>{class n extends Kwe{constructor(){super(...arguments),this.inputs=qwe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[zt]}),n})();const Xwe=new Map,Ywe=new Map,Zwe=new Map,Jwe=new Map,eCe=new Map,tCe=new Map,nCe=new Map,iCe=new Map;let Xq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[_B,M8]}),n})();var R0=(()=>{return(n=R0||(R0={})).primary="primary",n.accent="accent",n.warn="warn",n.color0="color-0",n.color5="color-5",n.color10="color-10",n.color15="color-15",n.color20="color-20",n.color30="color-30",n.color40="color-40",n.color50="color-50",n.color60="color-60",n.color70="color-70",n.color80="color-80",n.color90="color-90",n.color100="color-100",R0;var n})();let Yq=(()=>{class n{constructor(){this.colors={}}add(t,i){const r=i.replace("rgb(","").replace(")","");this.colors[t]=r.split(", ").map(s=>Number(s))}rgb(t){const[i,r,s]=this.colors[t];return`rgb(${i}, ${r}, ${s})`}rgba(t,i){const[r,s,o]=this.colors[t];return`rgba(${r}, ${s}, ${o}, ${i})`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rCe=["primary"];function sCe(n,e){if(1&n&&(H(0,"div"),V(1),N()),2&n){const t=e.$implicit;(function wu(n){bu(YG,Q5e,n,!1)})("background:var(--"+t+")"),aa("mat-button ",t,""),ee(1),Kn(" ",t,"")}}let oCe=(()=>{class n{constructor(t,i){this.colorService=t,this.host=i,this.keys=Object.values(R0)}ngAfterViewInit(){this.parseColors()}parseColors(){const t=this.host.nativeElement;this.keys.forEach(i=>{const r=t.querySelector(`.${i}`);if(!r)return;const s=getComputedStyle(r).backgroundColor;this.colorService.add(i,s)})}debug(t,i){console.log(`%c ${t}: ${i}`,`background: ${i}; color: ${this.invertColor(i)}`)}invertColor(t,i=!0){function r(c){return`${c}`.padStart(3,"0")}let[s,o,a]=t.replace(")","").replace("rgb(","").split(", ");return i?.299*s+.587*o+.114*a>186?"#000000":"#FFFFFF":(s=255-s,o=255-o,a=255-a,"#"+r(s)+r(o)+r(a))}}return n.\u0275fac=function(t){return new(t||n)(U(Yq),U(fn))},n.\u0275cmp=Rn({type:n,selectors:[["color"]],viewQuery:function(t,i){if(1&t&&wo(rCe,5),2&t){let r;Qi(r=Wi())&&(i.primary=r.first)}},decls:1,vars:1,consts:[[3,"class","style",4,"ngFor","ngForOf"]],template:function(t,i){1&t&&Yt(0,sCe,2,6,"div",0),2&t&&Se("ngForOf",i.keys)},dependencies:[W3],styles:["[_nghost-%COMP%]{display:none}"]}),n})();function B8(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function XC(n,e=YA){return xn((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const l=s;s=null,i.next(l)}};function c(){const l=o+n,u=e.now();if(u<l)return r=this.schedule(void 0,l-u),void i.add(r);a()}t.subscribe(_n(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function SB(n){return mo((e,t)=>n<=t)}function yCe(n,e){return n===e}let iK=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wCe=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=C8(t);return new Ce(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new Je,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(Ye(iK))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rK=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new Ji,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Sr(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Tu(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(XC(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(U(wCe),U(fn),U(Xi))},n.\u0275dir=ht({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),_9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[iK]}),n})();const sK=new Set;let L7,CCe=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):xCe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function bCe(n){if(!sK.has(n))try{L7||(L7=document.createElement("style"),L7.setAttribute("type","text/css"),document.head.appendChild(L7)),L7.sheet&&(L7.sheet.insertRule(`@media ${n} {body{ }}`,0),sK.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(Ye(h3))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xCe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let MCe=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Je}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return oK(cC(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=VI(oK(cC(t)).map(o=>this._registerQuery(o).observable));return s=n9(s.pipe(Mc(1)),s.pipe(SB(1),XC(0))),s.pipe($t(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new Ce(o=>{const a=c=>this._zone.run(()=>o.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(D0(i),$t(({matches:o})=>({query:t,matches:o})),xa(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(Ye(CCe),Ye(Xi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oK(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class lK extends class TCe{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Je,this._typeaheadSubscription=Re.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Je,this.change=new Je,e instanceof h7&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Ma(t=>this._pressedLetters.push(t)),XC(e),mo(()=>this._pressedLetters.length>0),$t(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||B8(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItem=t[i]??null,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof h7?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let YC=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function DCe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function LCe(n){try{return n.frameElement}catch{return null}}(function zCe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===hK(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=hK(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function PCe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function HCe(n){return!function BCe(n){return function FCe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function ICe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function RCe(n){return function kCe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||uK(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(Ye(h3))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uK(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function hK(n){if(!uK(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class OCe{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Mc(1)).subscribe(e)}}let EB=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new OCe(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(Ye(YC),Ye(Xi),Ye(Fi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function TB(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function LB(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const NCe=new Bt("cdk-input-modality-detector-options"),VCe={ignoreKeys:[18,17,224,91,16]},D7=md({passive:!0,capture:!0});let UCe=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Ao(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=x8(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(TB(o)?"keyboard":"mouse"),this._mostRecentTarget=x8(o))},this._onTouchstart=o=>{LB(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=x8(o))},this._options={...VCe,...s},this.modalityDetected=this._modality.pipe(SB(1)),this.modalityChanged=this.modalityDetected.pipe(function _Ce(n,e=At){return n=n??yCe,xn((t,i)=>{let r,s=!0;t.subscribe(_n(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,D7),r.addEventListener("mousedown",this._onMousedown,D7),r.addEventListener("touchstart",this._onTouchstart,D7)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,D7),document.removeEventListener("mousedown",this._onMousedown,D7),document.removeEventListener("touchstart",this._onTouchstart,D7))}}return n.\u0275fac=function(t){return new(t||n)(Ye(h3),Ye(Xi),Ye(Fi),Ye(NCe,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const QCe=new Bt("cdk-focus-monitor-default-options"),ZC=md({passive:!0,capture:!0});let I4=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Je,this._rootNodeFocusAndBlurListener=a=>{for(let l=x8(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,i=!1){const r=C8(t);if(!this._platform.isBrowser||1!==r.nodeType)return mi(null);const s=o$(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new Je,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=C8(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=C8(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=x8(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,ZC),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,ZC)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(xa(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ZC),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ZC),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(Ye(Xi),Ye(h3),Ye(UCe),Ye(Fi,8),Ye(QCe,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dK="cdk-high-contrast-black-on-white",pK="cdk-high-contrast-white-on-black",DB="cdk-high-contrast-active";let gK=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=Cs(MCe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(DB,dK,pK),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(DB,dK):2===i&&t.add(DB,pK)}}}return n.\u0275fac=function(t){return new(t||n)(Ye(h3),Ye(Fi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IB=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(Ye(gK))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[_9]}),n})();const jCe=new Bt("mat-sanity-checks",{providedIn:"root",factory:function WCe(){return!0}});let Vi=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!kI()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(Ye(gK),Ye(jCe,8),Ye(Fi))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[M8,M8]}),n})();function I7(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Sr(e)}}}function R8(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function F0(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Sr(e)}}}function JC(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Tu(t):this.defaultTabIndex}}}let vK=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_K=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function y9(n,e,t){n.nativeElement.classList.toggle(e,t)}let eb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Vi,Vi]}),n})();class qCe{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const wK={enterDuration:225,exitDuration:150},BB=md({passive:!0}),CK=["mousedown","touchstart"],bK=["mouseup","mouseleave","touchend","touchcancel"];class XCe{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=C8(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...wK,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function YCe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,c=t-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=c-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);const f=window.getComputedStyle(u),g=f.transitionDuration,_="none"===f.transitionProperty||"0s"===g||"0s, 0s"===g,y=new qCe(this,u,i,_);u.style.transform="scale3d(1, 1, 1)",y.state=0,i.persistent||(this._mostRecentTransientRipple=y);let w=null;return!_&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const C=()=>this._finishRippleTransition(y),x=()=>this._destroyRipple(y);u.addEventListener("transitionend",C),u.addEventListener("transitioncancel",x),w={onTransitionEnd:C,onTransitionCancel:x}}),this._activeRipples.set(y,w),(_||!l)&&this._finishRippleTransition(y),y}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...wK,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=C8(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(CK))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(bK),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=TB(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!LB(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,BB)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(CK.forEach(e=>{this._triggerElement.removeEventListener(e,this,BB)}),this._pointerUpEventsRegistered&&bK.forEach(e=>{this._triggerElement.removeEventListener(e,this,BB)}))}}const ZCe=new Bt("mat-ripple-global-options");let k0=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new XCe(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(Xi),U(h3),U(ZCe,8),U(S4,8))},n.\u0275dir=ht({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&Br("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Ru=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Vi,Vi]}),n})(),RB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Vi]}),n})(),xK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Ru,Dl,Vi,RB]}),n})();function MK(...n){const e=r0(n),{args:t,keys:i}=A$(n),r=new Ce(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let u=0;u<o;u++){let f=!1;uo(t[u]).subscribe(_n(s,p=>{f||(f=!0,l--),a[u]=p},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(i?v$(i,a):a),s.complete())}))}});return e?r.pipe(SI(e)):r}class SK{}class EK{}class Vh{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Vh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Vh;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Vh?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class ebe{encodeKey(e){return TK(e)}encodeValue(e){return TK(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const nbe=/%(\d[a-f0-9])/gi,ibe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function TK(n){return encodeURIComponent(n).replace(nbe,(e,t)=>ibe[t]??e)}function tb(n){return`${n}`}class xd{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ebe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function tbe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(tb):[tb(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new xd({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(tb(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(tb(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class rbe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function LK(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function DK(n){return typeof Blob<"u"&&n instanceof Blob}function IK(n){return typeof FormData<"u"&&n instanceof FormData}class w9{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function sbe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Vh),this.context||(this.context=new rbe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new xd,this.urlWithParams=t}serializeBody(){return null===this.body?null:LK(this.body)||DK(this.body)||IK(this.body)||function obe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof xd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||IK(this.body)?null:DK(this.body)?this.body.type||null:LK(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((f,p)=>f.set(p,e.setHeaders[p]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((f,p)=>f.set(p,e.setParams[p]),l)),new w9(t,i,s,{params:l,headers:c,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var Sc=(()=>((Sc=Sc||{})[Sc.Sent=0]="Sent",Sc[Sc.UploadProgress=1]="UploadProgress",Sc[Sc.ResponseHeader=2]="ResponseHeader",Sc[Sc.DownloadProgress=3]="DownloadProgress",Sc[Sc.Response=4]="Response",Sc[Sc.User=5]="User",Sc))();class FB{constructor(e,t=200,i="OK"){this.headers=e.headers||new Vh,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class kB extends FB{constructor(e={}){super(e),this.type=Sc.ResponseHeader}clone(e={}){return new kB({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class nb extends FB{constructor(e={}){super(e),this.type=Sc.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new nb({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class BK extends FB{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function PB(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Md=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof w9)s=t;else{let c,l;c=r.headers instanceof Vh?r.headers:new Vh(r.headers),r.params&&(l=r.params instanceof xd?r.params:new xd({fromObject:r.params})),s=new w9(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=mi(s).pipe(_d(c=>this.handler.handle(c)));if(t instanceof w9||"events"===r.observe)return o;const a=o.pipe(mo(c=>c instanceof nb));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe($t(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe($t(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe($t(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe($t(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new xd).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,PB(r,i))}post(t,i,r={}){return this.request("POST",t,PB(r,i))}put(t,i,r={}){return this.request("PUT",t,PB(r,i))}}return n.\u0275fac=function(t){return new(t||n)(Ye(SK))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();class RK{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const FK=new Bt("HTTP_INTERCEPTORS");let abe=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const cbe=/^\)\]\}',?\n/;let kK=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ce(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((g,_)=>r.setRequestHeader(g,_.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const g=t.detectContentTypeHeader();null!==g&&r.setRequestHeader("Content-Type",g)}if(t.responseType){const g=t.responseType.toLowerCase();r.responseType="json"!==g?g:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const g=r.statusText||"OK",_=new Vh(r.getAllResponseHeaders()),y=function lbe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new kB({headers:_,status:r.status,statusText:g,url:y}),o},c=()=>{let{headers:g,status:_,statusText:y,url:w}=a(),C=null;204!==_&&(C=typeof r.response>"u"?r.responseText:r.response),0===_&&(_=C?200:0);let x=_>=200&&_<300;if("json"===t.responseType&&"string"==typeof C){const M=C;C=C.replace(cbe,"");try{C=""!==C?JSON.parse(C):null}catch(T){C=M,x&&(x=!1,C={error:T,text:C})}}x?(i.next(new nb({body:C,headers:g,status:_,statusText:y,url:w||void 0})),i.complete()):i.error(new BK({error:C,headers:g,status:_,statusText:y,url:w||void 0}))},l=g=>{const{url:_}=a(),y=new BK({error:g,status:r.status||0,statusText:r.statusText||"Unknown Error",url:_||void 0});i.error(y)};let u=!1;const f=g=>{u||(i.next(a()),u=!0);let _={type:Sc.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),"text"===t.responseType&&!!r.responseText&&(_.partialText=r.responseText),i.next(_)},p=g=>{let _={type:Sc.UploadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),i.next(_)};return r.addEventListener("load",c),r.addEventListener("error",l),r.addEventListener("timeout",l),r.addEventListener("abort",l),t.reportProgress&&(r.addEventListener("progress",f),null!==s&&r.upload&&r.upload.addEventListener("progress",p)),r.send(s),i.next({type:Sc.Sent}),()=>{r.removeEventListener("error",l),r.removeEventListener("abort",l),r.removeEventListener("load",c),r.removeEventListener("timeout",l),t.reportProgress&&(r.removeEventListener("progress",f),null!==s&&r.upload&&r.upload.removeEventListener("progress",p)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(Ye(Dj))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const HB=new Bt("XSRF_COOKIE_NAME"),zB=new Bt("XSRF_HEADER_NAME");class PK{}let ube=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=yj(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(Ye(Fi),Ye(Q3),Ye(HB))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),OB=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Ye(PK),Ye(zB))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),hbe=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(FK,[]);this.chain=i.reduceRight((r,s)=>new RK(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Ye(EK),Ye(yc))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),fbe=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:OB,useClass:abe}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:HB,useValue:t.cookieName}:[],t.headerName?{provide:zB,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[OB,{provide:FK,useExisting:OB,multi:!0},{provide:PK,useClass:ube},{provide:HB,useValue:"XSRF-TOKEN"},{provide:zB,useValue:"X-XSRF-TOKEN"}]}),n})(),dbe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[Md,{provide:SK,useClass:hbe},kK,{provide:EK,useExisting:kK}],imports:[fbe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const pbe=["*"];let ib;function C9(n){return function gbe(){if(void 0===ib&&(ib=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(ib=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return ib}()?.createHTML(n)||n}function HK(n){return Error(`Unable to find icon with the name "${n}"`)}function zK(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function OK(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class F8{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let b9=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new F8(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(Qs.HTML,r);if(!o)throw OK(r);const a=C9(o);return this._addSvgIconConfig(t,i,new F8("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new F8(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(Qs.HTML,i);if(!s)throw OK(i);const o=C9(s);return this._addSvgIconSetConfig(t,new F8("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(Qs.RESOURCE_URL,t);if(!i)throw zK(t);const r=this._cachedIconsByUrl.get(i);return r?mi(rb(r)):this._loadSvgIconFromConfig(new F8(t,null)).pipe(Ma(s=>this._cachedIconsByUrl.set(i,s)),$t(s=>rb(s)))}getNamedSvgIcon(t,i=""){const r=NK(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):A7(HK(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?mi(rb(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe($t(i=>rb(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?mi(r):MK(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(I0(a=>{const l=`Loading icon set URL: ${this._sanitizer.sanitize(Qs.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),mi(null)})))).pipe($t(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw HK(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Ma(i=>t.svgText=i),$t(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?mi(null):this._fetchIcon(t).pipe(Ma(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(C9("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(C9("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function mbe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(Qs.RESOURCE_URL,i);if(!o)throw zK(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe($t(l=>C9(l)),wC(()=>this._inProgressUrlFetches.delete(o)),L3());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(NK(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return vbe(s)?new F8(s.url,null,s.options):new F8(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(Ye(Md,8),Ye(w8),Ye(Fi,8),Ye(Mh))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rb(n){return n.cloneNode(!0)}function NK(n,e){return n+":"+e}function vbe(n){return!(!n.url||!n.options)}const _be=R8(class{constructor(n){this._elementRef=n}}),ybe=new Bt("MAT_ICON_DEFAULT_OPTIONS"),wbe=new Bt("mat-icon-location",{providedIn:"root",factory:function Cbe(){const n=Cs(Fi),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),VK=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],bbe=VK.map(n=>`[${n}]`).join(", "),xbe=/^url\(['"]?#(.*?)['"]?\)$/;let k8=(()=>{class n extends _be{constructor(t,i,r,s,o,a){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Re.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Sr(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(bbe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)VK.forEach(o=>{const a=i[s],c=a.getAttribute(o),l=c?c.match(xbe):null;if(l){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Mc(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(b9),e3("aria-hidden"),U(wbe),U(Mh),U(ybe,8))},n.\u0275cmp=Rn({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(ds("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),Br("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[zt],ngContentSelectors:pbe,decls:1,vars:0,template:function(t,i){1&t&&(Z1(),Bo(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),UK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Vi,Vi]}),n})();const Mbe=["mat-button",""],Sbe=["*"],Tbe=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Lbe=R8(I7(F0(class{constructor(n){this._elementRef=n}})));let sb=(()=>{class n extends Lbe{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of Tbe)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(I4),U(S4,8))},n.\u0275cmp=Rn({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&wo(k0,5),2&t){let r;Qi(r=Wi())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(ds("disabled",i.disabled||null),Br("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[zt],attrs:Mbe,ngContentSelectors:Sbe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(Z1(),H(0,"span",0),Bo(1),N(),Ke(2,"span",1)(3,"span",2)),2&t&&(ee(2),Br("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Se("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[k0],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),NB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Ru,Vi,Vi]}),n})();function GK(n,e){return e?t=>n9(e.pipe(Mc(1),function Dbe(){return xn((n,e)=>{n.subscribe(_n(e,st))})}()),t.pipe(GK(n))):xi((t,i)=>n(t,i).pipe(Mc(1),b$(t)))}function QK(n,e=YA){const t=II(n,e);return GK(()=>t)}class VB{}const Uh="*";function L2(n,e){return{type:7,name:n,definitions:e,options:{}}}function bo(n,e=null){return{type:4,styles:e,timings:n}}function WK(n,e=null){return{type:3,steps:n,options:e}}function jK(n,e=null){return{type:2,steps:n,options:e}}function Hi(n){return{type:6,styles:n,offset:null}}function ko(n,e,t){return{type:0,name:n,styles:e,options:t}}function Po(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function UB(n=null){return{type:9,options:n}}function GB(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function $K(n){Promise.resolve().then(n)}class x9{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){$K(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class qK{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?$K(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const Rbe=["mat-menu-item",""];function Fbe(n,e){1&n&&(Io(),H(0,"svg",2),Ke(1,"polygon",3),N())}const KK=["*"];function kbe(n,e){if(1&n){const t=Qa();H(0,"div",0),dn("keydown",function(r){return gi(t),h(Xt()._handleKeydown(r))})("click",function(){return gi(t),h(Xt().closed.emit("click"))})("@transformMenu.start",function(r){return gi(t),h(Xt()._onAnimationStart(r))})("@transformMenu.done",function(r){return gi(t),h(Xt()._onAnimationDone(r))}),H(1,"div",1),Bo(2),N()()}if(2&n){const t=Xt();Se("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),ds("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const ob={transformMenu:L2("transformMenu",[ko("void",Hi({opacity:0,transform:"scale(0.8)"})),Po("void => enter",bo("120ms cubic-bezier(0, 0, 0.2, 1)",Hi({opacity:1,transform:"scale(1)"}))),Po("* => void",bo("100ms 25ms linear",Hi({opacity:0})))]),fadeInItems:L2("fadeInItems",[ko("showing",Hi({opacity:1})),Po("void => *",[Hi({opacity:0}),bo("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Pbe=new Bt("MatMenuContent"),WB=new Bt("MAT_MENU_PANEL"),Hbe=F0(I7(class{}));let M9=(()=>{class n extends Hbe{constructor(t,i,r,s,o){super(),this._elementRef=t,this._document=i,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this._hovered=new Je,this._focused=new Je,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),i=t.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++)i[r].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(Fi),U(I4),U(WB,8),U(wc))},n.\u0275cmp=Rn({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,i){1&t&&dn("click",function(s){return i._checkDisabled(s)})("mouseenter",function(){return i._handleMouseEnter()}),2&t&&(ds("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled.toString())("disabled",i.disabled||null),Br("mat-menu-item",!0)("mat-menu-item-highlighted",i._highlighted)("mat-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[zt],attrs:Rbe,ngContentSelectors:KK,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,i){1&t&&(Z1(),Bo(0),Ke(1,"div",0),Yt(2,Fbe,2,0,"svg",1)),2&t&&(ee(1),Se("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),ee(1),Se("ngIf",i._triggersSubmenu))},dependencies:[u3,k0],encapsulation:2,changeDetection:0}),n})();const XK=new Bt("mat-menu-default-options",{providedIn:"root",factory:function zbe(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Obe=0,S9=(()=>{class n{constructor(t,i,r,s){this._elementRef=t,this._ngZone=i,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new h7,this._tabSubscription=Re.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Je,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new Ji,this.close=this.closed,this.panelId="mat-menu-panel-"+Obe++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Sr(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Sr(t)}set panelClass(t){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new lK(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(D0(this._directDescendantItems),L4(t=>Zc(...t.map(i=>i._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const i=this._keyManager;if("enter"===this._panelAnimationState&&i.activeItem?._hasFocus()){const r=t.toArray(),s=Math.max(0,Math.min(r.length-1,i.activeItemIndex||0));r[s]&&!r[s].disabled?i.setActiveItem(s):i.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(D0(this._directDescendantItems),L4(i=>Zc(...i.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const i=t.keyCode,r=this._keyManager;switch(i){case 27:B8(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&r.setFocusOrigin("keyboard"),void r.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe(Mc(1)).subscribe(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&i&&i.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const i=Math.min(this._baseElevation+t,24),r=`${this._elevationPrefix}${i}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(t=this.xPosition,i=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===t,r["mat-menu-after"]="after"===t,r["mat-menu-above"]="above"===i,r["mat-menu-below"]="below"===i,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(D0(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(Xi),U(XK),U(wc))},n.\u0275dir=ht({type:n,contentQueries:function(t,i,r){if(1&t&&(Wa(r,Pbe,5),Wa(r,M9,5),Wa(r,M9,4)),2&t){let s;Qi(s=Wi())&&(i.lazyContent=s.first),Qi(s=Wi())&&(i._allItems=s),Qi(s=Wi())&&(i.items=s)}},viewQuery:function(t,i){if(1&t&&wo(zc,5),2&t){let r;Qi(r=Wi())&&(i.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),Nbe=(()=>{class n extends S9{constructor(t,i,r,s){super(t,i,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(Xi),U(XK),U(wc))},n.\u0275cmp=Rn({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,i){2&t&&ds("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[Ki([{provide:WB,useExisting:n}]),zt],ngContentSelectors:KK,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,i){1&t&&(Z1(),Yt(0,kbe,3,6,"ng-template"))},dependencies:[WA],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px;position:relative}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[ob.transformMenu,ob.fadeInItems]},changeDetection:0}),n})();const YK=new Bt("mat-menu-scroll-strategy"),Ube={provide:YK,deps:[f3],useFactory:function Vbe(n){return()=>n.scrollStrategies.reposition()}},ZK=md({passive:!0});let Gbe=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u){this._overlay=t,this._element=i,this._viewContainerRef=r,this._menuItemInstance=a,this._dir=c,this._focusMonitor=l,this._ngZone=u,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Re.EMPTY,this._hoverSubscription=Re.EMPTY,this._menuCloseSubscription=Re.EMPTY,this._handleTouchStart=f=>{LB(f)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Ji,this.onMenuOpen=this.menuOpened,this.menuClosed=new Ji,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof S9?o:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,ZK),a&&(a._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,ZK),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;const i=this._createOverlay(t),r=i.getConfig(),s=r.positionStrategy;this._setPosition(t,s),r.hasBackdrop=t.hasBackdrop??!this.triggersSubmenu(),i.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof S9&&(t._startAnimation(),t._directDescendantItems.changes.pipe(xa(t.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof S9?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(mo(r=>"void"===r.toState),Mc(1),xa(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let i=0,r=t.parentMenu;for(;r;)i++,r=r.parentMenu;t.setElevation(i)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_createOverlay(t){if(!this._overlayRef){const i=this._getOverlayConfig(t);this._subscribeToPositions(t,i.positionStrategy),this._overlayRef=this._overlay.create(i),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new NI({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,i){t.setPositionClasses&&i.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",o="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(s,o)):t.setPositionClasses(s,o)})}_setPosition(t,i){let[r,s]="before"===t.xPosition?["end","start"]:["start","end"],[o,a]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[c,l]=[o,a],[u,f]=[r,s],p=0;if(this.triggersSubmenu()){if(f=r="before"===t.xPosition?"start":"end",s=u="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const g=this._parentMaterialMenu.items.first;this._parentInnerPadding=g?g._getHostElement().offsetTop:0}p="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(c="top"===o?"bottom":"top",l="top"===a?"bottom":"top");i.withPositions([{originX:r,originY:c,overlayX:u,overlayY:o,offsetY:p},{originX:s,originY:c,overlayX:f,overlayY:o,offsetY:p},{originX:r,originY:l,overlayX:u,overlayY:a,offsetY:-p},{originX:s,originY:l,overlayX:f,overlayY:a,offsetY:-p}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),i=this._overlayRef.detachments();return Zc(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:mi(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(mo(o=>o!==this._menuItemInstance),mo(()=>this._menuOpen)):mi(),i)}_handleMousedown(t){TB(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const i=t.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(mo(t=>t===this._menuItemInstance&&!t.disabled),QK(0,DI)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof S9&&this.menu._isAnimating?this.menu._animationDone.pipe(Mc(1),QK(0,DI),xa(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new gC(t.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(U(f3),U(fn),U(Oc),U(YK),U(WB,8),U(M9,10),U(Fh,8),U(I4),U(Xi))},n.\u0275dir=ht({type:n,hostVars:3,hostBindings:function(t,i){1&t&&dn("click",function(s){return i._handleClick(s)})("mousedown",function(s){return i._handleMousedown(s)})("keydown",function(s){return i._handleKeydown(s)}),2&t&&ds("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen||null)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),Qbe=(()=>{class n extends Gbe{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[zt]}),n})(),Wbe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[Ube],imports:[Dl,Vi,Ru,vd,S8,Vi]}),n})();const jbe=["menu"];function $be(n,e){1&n&&(H(0,"mat-icon"),V(1,"light_mode"),N())}function qbe(n,e){1&n&&(H(0,"mat-icon"),V(1,"dark_mode"),N())}let Kbe=(()=>{class n{constructor(t){this.appService=t,this.version="2023.2.0",this.title=this.appService.title}ngAfterViewInit(){}click(){}get darkMode(){return this.appService.darkMode}set darkMode(t){this.appService.setDarkMode(t,!0)}}return n.\u0275fac=function(t){return new(t||n)(U(Fo))},n.\u0275cmp=Rn({type:n,selectors:[["app-sidemenu"]],viewQuery:function(t,i){if(1&t&&wo(jbe,5,fn),2&t){let r;Qi(r=Wi())&&(i.menu=r.first)}},decls:90,vars:18,consts:[["mat-button","",3,"matMenuTriggerFor"],["menu",""],[2,"color","var(--color-70)"],["mainMenu","matMenu"],["mat-menu-item","","routerLink","/house",3,"matMenuTriggerFor"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","","routerLink","/about","routerLinkActive","active",3,"disabled","click"],["about","routerLinkActive"],["mat-menu-item","",3,"click"],["fxLayoutAlign","start center","fxLayoutGap","16px"],[4,"ngIf"],["house","matMenu"],["mat-menu-item","","routerLink","/house","routerLinkActive","active",3,"disabled","click"],["house2d","routerLinkActive"],[2,"font-family","Material Icons Outlined"],["mat-menu-item","","routerLink","/house3d","routerLinkActive","active",3,"disabled","click"],["house3d","routerLinkActive"],["constructions","matMenu"],["mat-menu-item","","routerLink","/construction","routerLinkActive","active",3,"disabled","click"],["construction","routerLinkActive"],["mat-menu-item","","routerLink","/stairs","routerLinkActive","active",3,"disabled","click"],["stairs","routerLinkActive"],["situation","matMenu"],["mat-menu-item","","routerLink","/map","routerLinkActive","active",3,"disabled","click"],["map","routerLinkActive"],["installations","matMenu"],["mat-menu-item","","routerLink","/wired","routerLinkActive","active",3,"disabled","click"],["wired","routerLinkActive"],["mat-menu-item","","routerLink","/installations","routerLinkActive","active",3,"disabled","click"],["installation","routerLinkActive"],["planningAndCosts","matMenu"],["mat-menu-item","","routerLink","/costs","routerLinkActive","active",3,"disabled","click"],["costs","routerLinkActive"],["mat-menu-item","","routerLink","/planning","routerLinkActive","active",3,"disabled","click"],["planning","routerLinkActive"]],template:function(t,i){if(1&t&&(H(0,"button",0,1)(2,"mat-icon",2),V(3,"menu"),N()(),H(4,"mat-menu",null,3)(6,"button",4),V(7,"The house"),N(),H(8,"button",5),V(9,"Construction"),N(),H(10,"button",5),V(11,"Situation"),N(),H(12,"button",5),V(13,"Installations"),N(),H(14,"button",6,7),dn("click",function(){return i.click()}),H(16,"mat-icon"),V(17,"people_outline"),N(),H(18,"span"),V(19,"About us"),N()(),H(20,"button",8),dn("click",function(){return i.darkMode=!i.darkMode}),H(21,"span",9),Yt(22,$be,2,0,"mat-icon",10),Yt(23,qbe,2,0,"mat-icon",10),H(24,"span"),V(25),N()()()(),H(26,"mat-menu",null,11)(28,"button",12,13),dn("click",function(){return i.click()}),H(30,"mat-icon",14),V(31,"home"),N(),H(32,"span"),V(33,"The house 2D"),N()(),H(34,"button",15,16),dn("click",function(){return i.click()}),H(36,"mat-icon",14),V(37,"gite"),N(),H(38,"span"),V(39,"The house 3D"),N()()(),H(40,"mat-menu",null,17)(42,"button",18,19),dn("click",function(){return i.click()}),H(44,"mat-icon"),V(45,"handyman"),N(),H(46,"span"),V(47,"Construction"),N()(),H(48,"button",20,21),dn("click",function(){return i.click()}),H(50,"mat-icon",14),V(51,"stairs"),N(),H(52,"span"),V(53,"Stairs"),N()()(),H(54,"mat-menu",null,22)(56,"button",23,24),dn("click",function(){return i.click()}),H(58,"mat-icon"),V(59,"pin_drop"),N(),H(60,"span"),V(61,"Map"),N()()(),H(62,"mat-menu",null,25)(64,"button",26,27),dn("click",function(){return i.click()}),H(66,"mat-icon"),V(67,"bolt"),N(),H(68,"span"),V(69,"Wired"),N()(),H(70,"button",28,29),dn("click",function(){return i.click()}),H(72,"mat-icon"),V(73,"solar_power"),N(),H(74,"span"),V(75,"Installations"),N()()(),H(76,"mat-menu",null,30)(78,"button",31,32),dn("click",function(){return i.click()}),H(80,"mat-icon",14),V(81,"savings"),N(),H(82,"span"),V(83,"Costs"),N()(),H(84,"button",33,34),dn("click",function(){return i.click()}),H(86,"mat-icon"),V(87,"calendar_month"),N(),H(88,"span"),V(89,"Planning"),N()()()),2&t){const r=Ir(5),s=Ir(15),o=Ir(27),a=Ir(29),c=Ir(35),l=Ir(41),u=Ir(43),f=Ir(49),p=Ir(55),g=Ir(57),_=Ir(63),y=Ir(65),w=Ir(71),C=Ir(79),x=Ir(85);Se("matMenuTriggerFor",r),ee(6),Se("matMenuTriggerFor",o),ee(2),Se("matMenuTriggerFor",l),ee(2),Se("matMenuTriggerFor",p),ee(2),Se("matMenuTriggerFor",_),ee(2),Se("disabled",s.isActive),ee(8),Se("ngIf",i.darkMode),ee(1),Se("ngIf",!i.darkMode),ee(2),Kn("",i.darkMode?"Light":"Dark"," mode"),ee(3),Se("disabled",a.isActive),ee(6),Se("disabled",c.isActive),ee(8),Se("disabled",u.isActive),ee(6),Se("disabled",f.isActive),ee(8),Se("disabled",g.isActive),ee(8),Se("disabled",y.isActive),ee(6),Se("disabled",w.isActive),ee(8),Se("disabled",C.isActive),ee(6),Se("disabled",x.isActive)}},dependencies:[u3,k8,sb,Nbe,M9,Qbe,T7,Nh,m9,wq],styles:["[_nghost-%COMP%]{z-index:300;position:fixed;border-right:1px solid var(--color-30);border-bottom:1px solid var(--color-30);background-color:var(--color-0)}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{height:48px;width:48px;min-width:0;padding:0}"]}),n})();function Xbe(n,e){if(1&n){const t=Qa();H(0,"div",3),dn("click",function(){return gi(t),h(Xt().readMobile=!0)}),H(1,"div",4),V(2," You are using a mobile device."),Ke(3,"br")(4,"br"),V(5," We put a lot of effort in this side, but it near impossible to make it work on mobile devices. "),Ke(6,"br")(7,"br"),V(8,"Please use a desktop or laptop to view this site."),Ke(9,"br")(10,"br")(11,"br"),V(12,"X close "),N()()}}let Ybe=(()=>{class n{constructor(t,i){this.appService=t,this.router=i,this.onStart=!0,this.isMobile=navigator.userAgentData.mobile,this.readMobile=!1}ngOnInit(){this.router.events.pipe(mo(t=>t instanceof Lu),$t(t=>t.urlAfterRedirects.split("?")[0]),function Rye(n,e){return xn((t,i)=>{const r=new Set;t.subscribe(_n(i,s=>{const o=n?n(s):s;r.has(o)||(r.add(o),i.next(s))})),e?.subscribe(_n(i,()=>r.clear(),st))})}()).subscribe(t=>{this.onStart?this.onStart=!1:window.scrollTo(0,0)})}ngAfterViewInit(){}}return n.\u0275fac=function(t){return new(t||n)(U(Fo),U(h1))},n.\u0275cmp=Rn({type:n,selectors:[["app-root"]],decls:7,vars:1,consts:[[1,"mat-button","mat-primary",2,"display","none"],["primary",""],["class","is-mobile",3,"click",4,"ngIf"],[1,"is-mobile",3,"click"],["fxLayoutAlign","center center"]],template:function(t,i){1&t&&(Ke(0,"app-sidemenu")(1,"color")(2,"div",0,1),Yt(4,Xbe,13,0,"div",2),H(5,"main"),Ke(6,"router-outlet"),N()),2&t&&(ee(4),Se("ngIf",i.isMobile&&!i.readMobile))},dependencies:[u3,Nh,IC,oCe,Kbe],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative}main[_ngcontent-%COMP%]{min-height:calc(100vh - 56px)}.mat-drawer-content[_ngcontent-%COMP%]{overflow-y:hidden}.is-mobile[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;cursor:pointer}.is-mobile[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:var(--color-80);opacity:.5}.is-mobile[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;border-radius:8px;padding:16px 32px;margin:5vh 10vw;background:var(--color-0);box-sizing:border-box;font-size:18px;line-height:18px}']}),n})();function JK(n){return new jt(3e3,!1)}function Bxe(){return typeof window<"u"&&typeof window.document<"u"}function jB(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Sd(n){switch(n.length){case 0:return new x9;case 1:return n[0];default:return new qK(n)}}function eX(n,e,t,i,r=new Map,s=new Map){const o=[],a=[];let c=-1,l=null;if(i.forEach(u=>{const f=u.get("offset"),p=f==c,g=p&&l||new Map;u.forEach((_,y)=>{let w=y,C=_;if("offset"!==y)switch(w=e.normalizePropertyName(w,o),C){case"!":C=r.get(y);break;case Uh:C=s.get(y);break;default:C=e.normalizeStyleValue(y,w,C,o)}g.set(w,C)}),p||a.push(g),l=g,c=f}),o.length)throw function yxe(n){return new jt(3502,!1)}();return a}function $B(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&qB(t,"start",n)));break;case"done":n.onDone(()=>i(t&&qB(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&qB(t,"destroy",n)))}}function qB(n,e,t){const s=KB(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function KB(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function $3(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function tX(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let XB=(n,e)=>!1,nX=(n,e,t)=>[],iX=null;function YB(n){const e=n.parentNode||n.host;return e===iX?null:e}(jB()||typeof Element<"u")&&(Bxe()?(iX=(()=>document.documentElement)(),XB=(n,e)=>{for(;e;){if(e===n)return!0;e=YB(e)}return!1}):XB=(n,e)=>n.contains(e),nX=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let P8=null,rX=!1;const sX=XB,oX=nX;let aX=(()=>{class n{validateStyleProperty(t){return function Fxe(n){P8||(P8=function kxe(){return typeof document<"u"?document.body:null}()||{},rX=!!P8.style&&"WebkitAppearance"in P8.style);let e=!0;return P8.style&&!function Rxe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in P8.style,!e&&rX&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in P8.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return sX(t,i)}getParentElement(t){return YB(t)}query(t,i,r){return oX(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],c){return new x9(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),ZB=(()=>{class n{}return n.NOOP=new aX,n})();const JB="ng-enter",ab="ng-leave",cb="ng-trigger",lb=".ng-trigger",lX="ng-animating",eR=".ng-animating";function Gh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:tR(parseFloat(e[1]),e[2])}function tR(n,e){return"s"===e?1e3*n:n}function ub(n,e,t){return n.hasOwnProperty("duration")?n:function zxe(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(JK()),{duration:0,delay:0,easing:""};r=tR(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=tR(parseFloat(c),a[4]));const l=a[5];l&&(o=l)}else r=n;if(!t){let a=!1,c=e.length;r<0&&(e.push(function Zbe(){return new jt(3100,!1)}()),a=!0),s<0&&(e.push(function Jbe(){return new jt(3101,!1)}()),a=!0),a&&e.splice(c,0,JK())}return{duration:r,delay:s,easing:o}}(n,e,t)}function E9(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function uX(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Ed(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function fX(n,e,t){return t?e+":"+t+";":""}function dX(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=fX(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=fX(0,Uxe(t),n.style[t]));n.setAttribute("style",e)}function P0(n,e,t){n.style&&(e.forEach((i,r)=>{const s=iR(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),jB()&&dX(n))}function H8(n,e){n.style&&(e.forEach((t,i)=>{const r=iR(i);n.style[r]=""}),jB()&&dX(n))}function T9(n){return Array.isArray(n)?1==n.length?n[0]:jK(n):n}const nR=new RegExp("{{\\s*(.+?)\\s*}}","g");function pX(n){let e=[];if("string"==typeof n){let t;for(;t=nR.exec(n);)e.push(t[1]);nR.lastIndex=0}return e}function L9(n,e,t){const i=n.toString(),r=i.replace(nR,(s,o)=>{let a=e[o];return null==a&&(t.push(function txe(n){return new jt(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function hb(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Vxe=/-+([a-z0-9])/g;function iR(n){return n.replace(Vxe,(...e)=>e[1].toUpperCase())}function Uxe(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function q3(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function nxe(n){return new jt(3004,!1)}()}}function gX(n,e){return window.getComputedStyle(n)[e]}function qxe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Kxe(n,e,t){if(":"==n[0]){const c=function Xxe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function mxe(n){return new jt(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function gxe(n){return new jt(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(mX(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(mX(o,r))}(i,t,e)):t.push(n),t}const gb=new Set(["true","1"]),mb=new Set(["false","0"]);function mX(n,e){const t=gb.has(n)||mb.has(n),i=gb.has(e)||mb.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?gb.has(n):mb.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?gb.has(e):mb.has(e)),o&&a}}const Yxe=new RegExp("s*:selfs*,?","g");function rR(n,e,t,i){return new Zxe(n).build(e,t,i)}class Zxe{constructor(e){this._driver=e}build(e,t,i){const r=new tMe(t);return this._resetContextStyleTimingState(r),q3(this,T9(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function rxe(){return new jt(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,t))}),c.name=l}else if(1==a.type){const c=this.visitTransition(a,t);i+=c.queryCount,r+=c.depCount,o.push(c)}else t.errors.push(function sxe(){return new jt(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{pX(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&(hb(s.values()),t.errors.push(function oxe(n,e){return new jt(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=q3(this,T9(e.animation),t);return{type:1,matchers:qxe(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:z8(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>q3(this,i,t)),options:z8(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=q3(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:z8(e.options)}}visitAnimate(e,t){const i=function iMe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return sR(ub(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=sR(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=ub(t,e);return sR(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Hi({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const l={};i.easing&&(l.easing=i.easing),o=Hi(l)}t.currentTime+=i.duration+i.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,r=c}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===Uh?i.push(a):t.errors.push(new jt(3002,!1)):i.push(uX(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c);let f=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(function cxe(n,e,t,i,r){return new jt(3010,!1)}()),f=!1),s=u.startTime),f&&l.set(c,{startTime:s,endTime:r}),t.options&&function Nxe(n,e,t){const i=e.params||{},r=pX(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function exe(n){return new jt(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function lxe(){return new jt(3011,!1)}()),i;let s=0;const o=[];let a=!1,c=!1,l=0;const u=e.steps.map(C=>{const x=this._makeStyleAst(C,t);let M=null!=x.offset?x.offset:function nMe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(x.styles),T=0;return null!=M&&(s++,T=x.offset=M),c=c||T<0||T>1,a=a||T<l,l=T,o.push(T),x});c&&t.errors.push(function uxe(){return new jt(3012,!1)}()),a&&t.errors.push(function hxe(){return new jt(3200,!1)}());const f=e.steps.length;let p=0;s>0&&s<f?t.errors.push(function fxe(){return new jt(3202,!1)}()):0==s&&(p=1/(f-1));const g=f-1,_=t.currentTime,y=t.currentAnimateTimings,w=y.duration;return u.forEach((C,x)=>{const M=p>0?x==g?1:p*x:o[x],T=M*w;t.currentTime=_+y.delay+T,y.duration=T,this._validateStyleAst(C,t),C.offset=M,i.styles.push(C)}),i}visitReference(e,t){return{type:8,animation:q3(this,T9(e.animation),t),options:z8(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:z8(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:z8(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function Jxe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Yxe,"")),n=n.replace(/@\*/g,lb).replace(/@\w+/g,t=>lb+"-"+t.slice(1)).replace(/:animating/g,eR),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,$3(t.collectedStyles,t.currentQuerySelector,new Map);const a=q3(this,T9(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:z8(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function dxe(){return new jt(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:ub(e.timings,t.errors,!0);return{type:12,animation:q3(this,T9(e.animation),t),timings:i,options:null}}}class tMe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function z8(n){return n?(n=E9(n)).params&&(n.params=function eMe(n){return n?E9(n):null}(n.params)):n={},n}function sR(n,e,t){return{duration:n,delay:e,easing:t}}function oR(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class Ab{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const oMe=new RegExp(":enter","g"),cMe=new RegExp(":leave","g");function aR(n,e,t,i,r,s=new Map,o=new Map,a,c,l=[]){return(new lMe).buildKeyframes(n,e,t,i,r,s,o,a,c,l)}class lMe{buildKeyframes(e,t,i,r,s,o,a,c,l,u=[]){l=l||new Ab;const f=new cR(e,t,l,r,s,u,[]);f.options=c;const p=c.delay?Gh(c.delay):0;f.currentTimeline.delayNextStep(p),f.currentTimeline.setStyles([o],null,f.errors,c),q3(this,i,f);const g=f.timelines.filter(_=>_.containsAnimation());if(g.length&&a.size){let _;for(let y=g.length-1;y>=0;y--){const w=g[y];if(w.element===t){_=w;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([a],null,f.errors,c)}return g.length?g.map(_=>_.buildKeyframes()):[oR(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimateRefDelay(e.animation,t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimateRefDelay(e,t,i){const r=e.options?.delay;if(!r)return;let s;s="string"==typeof r?Gh(L9(r,e.options?.params??{},t.errors)):r,i.delayNextStep(s)}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?Gh(i.duration):null,a=null!=i.delay?Gh(i.delay):null;return 0!==o&&e.forEach(c=>{const l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),q3(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=vb);const o=Gh(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>q3(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Gh(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),q3(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return ub(t.params?L9(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Gh(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=vb);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;const f=t.createSubContext(e.options,l);s&&f.delayNextStep(s),l===t.element&&(c=f.currentTimeline),q3(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,f.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime}const u=t.currentTimeline;c&&u.delayNextStep(c);const f=u.currentTime;q3(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-f+(r.startTime-i.currentTimeline.startTime)}}const vb={};class cR{constructor(e,t,i,r,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=vb,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new _b(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Gh(i.duration)),null!=i.delay&&(r.delay=Gh(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=L9(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new cR(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=vb,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new uMe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(oMe,"."+this._enterClassName)).replace(cMe,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=i);0!==i&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!s&&0==a.length&&o.push(function pxe(n){return new jt(3014,!1)}()),a}}class _b{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new _b(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Uh),this._currentKeyframe.set(t,Uh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function hMe(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,Uh)}else Ed(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const l=L9(c,s,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Uh),this._updateStyle(a,l)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,c)=>{const l=Ed(a,new Map,this._backFill);l.forEach((u,f)=>{"!"===u?e.add(f):u===Uh&&t.add(f)}),i||l.set("offset",c/this.duration),r.push(l)});const s=e.size?hb(e.values()):[],o=t.size?hb(t.values()):[];if(i){const a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return oR(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class uMe extends _b{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,c=Ed(e[0]);c.set("offset",0),s.push(c);const l=Ed(e[0]);l.set("offset",_X(a)),s.push(l);const u=e.length-1;for(let f=1;f<=u;f++){let p=Ed(e[f]);const g=p.get("offset");p.set("offset",_X((t+g*i)/o)),s.push(p)}i=o,t=0,r="",e=s}return oR(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function _X(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class lR{}const fMe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class dMe extends lR{normalizePropertyName(e,t){return iR(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(fMe.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function ixe(n,e){return new jt(3005,!1)}())}return o+s}}function yX(n,e,t,i,r,s,o,a,c,l,u,f,p){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:f,errors:p}}const uR={};class wX{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function pMe(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,c,l,u){const f=[],p=this.ast.options&&this.ast.options.params||uR,_=this.buildStyles(i,a&&a.params||uR,f),y=c&&c.params||uR,w=this.buildStyles(r,y,f),C=new Set,x=new Map,M=new Map,T="void"===r,I={params:gMe(y,p),delay:this.ast.options?.delay},F=u?[]:aR(e,t,this.ast.animation,s,o,_,w,I,l,f);let P=0;if(F.forEach(k=>{P=Math.max(k.duration+k.delay,P)}),f.length)return yX(t,this._triggerName,i,r,T,_,w,[],[],x,M,P,f);F.forEach(k=>{const W=k.element,re=$3(x,W,new Set);k.preStyleProps.forEach(me=>re.add(me));const Le=$3(M,W,new Set);k.postStyleProps.forEach(me=>Le.add(me)),W!==t&&C.add(W)});const R=hb(C.values());return yX(t,this._triggerName,i,r,T,_,w,F,R,x,M,P)}}function gMe(n,e){const t=E9(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class mMe{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=E9(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=L9(o,r,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),i.set(c,o)})}),i}}class vMe{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new mMe(r.style,r.options&&r.options.params||{},i))}),CX(this.states,"true","1"),CX(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new wX(e,r,this.states))}),this.fallbackTransition=function _Me(n,e,t){return new wX(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function CX(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const yMe=new Ab;class wMe{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=rR(this._driver,t,i,[]);if(i.length)throw function wxe(n){return new jt(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=eX(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=aR(this._driver,t,s,JB,ab,new Map,new Map,i,yMe,r),o.forEach(u=>{const f=$3(a,u.element,new Map);u.postStyleProps.forEach(p=>f.set(p,null))})):(r.push(function Cxe(){return new jt(3300,!1)}()),o=[]),r.length)throw function bxe(n){return new jt(3504,!1)}();a.forEach((u,f)=>{u.forEach((p,g)=>{u.set(g,this._driver.computeStyle(f,g,Uh))})});const l=Sd(o.map(u=>{const f=a.get(u.element);return this._buildPlayer(u,new Map,f)}));return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function xxe(n){return new jt(3301,!1)}();return t}listen(e,t,i,r){const s=KB(t,"","","");return $B(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const bX="ng-animate-queued",hR="ng-animate-disabled",SMe=[],xX={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},EMe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},B4="__ng_removed";class fR{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function IMe(n){return n??null}(i?e.value:e),i){const s=E9(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const D9="void",dR=new fR(D9);class TMe{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,R4(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function Mxe(n,e){return new jt(3302,!1)}();if(null==i||0==i.length)throw function Sxe(n){return new jt(3303,!1)}();if(!function BMe(n){return"start"==n||"done"==n}(i))throw function Exe(n,e){return new jt(3400,!1)}();const s=$3(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=$3(this._engine.statesByElement,e,new Map);return a.has(t)||(R4(e,cb),R4(e,cb+"-"+t),a.set(t,dR)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Txe(n){return new jt(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new pR(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(R4(e,cb),R4(e,cb+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const l=new fR(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=dR),l.value!==D9&&c.value===l.value){if(!function kMe(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,l.params)){const y=[],w=s.matchStyles(c.value,c.params,y),C=s.matchStyles(l.value,l.params,y);y.length?this._engine.reportError(y):this._engine.afterFlush(()=>{H8(e,w),P0(e,C)})}return}const p=$3(this._engine.playersByElement,e,[]);p.forEach(y=>{y.namespaceId==this.id&&y.triggerName==t&&y.queued&&y.destroy()});let g=s.matchTransition(c.value,l.value,e,l.params),_=!1;if(!g){if(!r)return;g=s.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:c,toState:l,player:o,isFallbackTransition:_}),_||(R4(e,bX),o.onStart(()=>{B7(e,bX)})),o.onDone(()=>{let y=this.players.indexOf(o);y>=0&&this.players.splice(y,1);const w=this._engine.playersByElement.get(e);if(w){let C=w.indexOf(o);C>=0&&w.splice(C,1)}}),this.players.push(o),p.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,lb,!0);i.forEach(r=>{if(r[B4])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){const u=this.trigger(e,l,D9,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Sd(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const c=this._triggers.get(o).fallbackTransition,l=i.get(o)||dR,u=new fR(D9),f=new pR(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:f,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[B4];(!s||s===xX)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){R4(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const c=KB(s,i.triggerName,i.fromState.value,i.toState.value);c._data=e,$B(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class LMe{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new TMe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=r.get(a);if(c){const l=i.indexOf(c);i.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(yb(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!yb(t))return;const s=t[B4];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),R4(e,hR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),B7(e,hR))}removeNode(e,t,i,r){if(yb(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[B4]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return yb(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,lb,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,eR,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Sd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[B4];if(t&&t.setForRemoval){if(e[B4]=xX,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(hR)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)R4(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Sd(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function Lxe(n){return new jt(3402,!1)}()}_flushAnimations(e,t){const i=new Ab,r=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(K=>{u.add(K);const ae=this.driver.query(K,".ng-animate-queued",!0);for(let fe=0;fe<ae.length;fe++)u.add(ae[fe])});const f=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=EX(p,this.collectedEnterElements),_=new Map;let y=0;g.forEach((K,ae)=>{const fe=JB+y++;_.set(ae,fe),K.forEach(de=>R4(de,fe))});const w=[],C=new Set,x=new Set;for(let K=0;K<this.collectedLeaveElements.length;K++){const ae=this.collectedLeaveElements[K],fe=ae[B4];fe&&fe.setForRemoval&&(w.push(ae),C.add(ae),fe.hasAnimation?this.driver.query(ae,".ng-star-inserted",!0).forEach(de=>C.add(de)):x.add(ae))}const M=new Map,T=EX(p,Array.from(C));T.forEach((K,ae)=>{const fe=ab+y++;M.set(ae,fe),K.forEach(de=>R4(de,fe))}),e.push(()=>{g.forEach((K,ae)=>{const fe=_.get(ae);K.forEach(de=>B7(de,fe))}),T.forEach((K,ae)=>{const fe=M.get(ae);K.forEach(de=>B7(de,fe))}),w.forEach(K=>{this.processLeaveNode(K)})});const I=[],F=[];for(let K=this._namespaceList.length-1;K>=0;K--)this._namespaceList[K].drainQueuedTransitions(t).forEach(fe=>{const de=fe.player,ke=fe.element;if(I.push(de),this.collectedEnterElements.length){const Zt=ke[B4];if(Zt&&Zt.setForMove){if(Zt.previousTriggersValues&&Zt.previousTriggersValues.has(fe.triggerName)){const an=Zt.previousTriggersValues.get(fe.triggerName),Sn=this.statesByElement.get(fe.element);if(Sn&&Sn.has(fe.triggerName)){const cn=Sn.get(fe.triggerName);cn.value=an,Sn.set(fe.triggerName,cn)}}return void de.destroy()}}const et=!f||!this.driver.containsElement(f,ke),Fe=M.get(ke),wt=_.get(ke),ut=this._buildInstruction(fe,i,wt,Fe,et);if(ut.errors&&ut.errors.length)return void F.push(ut);if(et)return de.onStart(()=>H8(ke,ut.fromStyles)),de.onDestroy(()=>P0(ke,ut.toStyles)),void r.push(de);if(fe.isFallbackTransition)return de.onStart(()=>H8(ke,ut.fromStyles)),de.onDestroy(()=>P0(ke,ut.toStyles)),void r.push(de);const It=[];ut.timelines.forEach(Zt=>{Zt.stretchStartingKeyframe=!0,this.disabledNodes.has(Zt.element)||It.push(Zt)}),ut.timelines=It,i.append(ke,ut.timelines),o.push({instruction:ut,player:de,element:ke}),ut.queriedElements.forEach(Zt=>$3(a,Zt,[]).push(de)),ut.preStyleProps.forEach((Zt,an)=>{if(Zt.size){let Sn=c.get(an);Sn||c.set(an,Sn=new Set),Zt.forEach((cn,Ti)=>Sn.add(Ti))}}),ut.postStyleProps.forEach((Zt,an)=>{let Sn=l.get(an);Sn||l.set(an,Sn=new Set),Zt.forEach((cn,Ti)=>Sn.add(Ti))})});if(F.length){const K=[];F.forEach(ae=>{K.push(function Dxe(n,e){return new jt(3505,!1)}())}),I.forEach(ae=>ae.destroy()),this.reportError(K)}const P=new Map,R=new Map;o.forEach(K=>{const ae=K.element;i.has(ae)&&(R.set(ae,ae),this._beforeAnimationBuild(K.player.namespaceId,K.instruction,P))}),r.forEach(K=>{const ae=K.element;this._getPreviousPlayers(ae,!1,K.namespaceId,K.triggerName,null).forEach(de=>{$3(P,ae,[]).push(de),de.destroy()})});const k=w.filter(K=>LX(K,c,l)),W=new Map;SX(W,this.driver,x,l,Uh).forEach(K=>{LX(K,c,l)&&k.push(K)});const Le=new Map;g.forEach((K,ae)=>{SX(Le,this.driver,new Set(K),c,"!")}),k.forEach(K=>{const ae=W.get(K),fe=Le.get(K);W.set(K,new Map([...Array.from(ae?.entries()??[]),...Array.from(fe?.entries()??[])]))});const me=[],Q=[],he={};o.forEach(K=>{const{element:ae,player:fe,instruction:de}=K;if(i.has(ae)){if(u.has(ae))return fe.onDestroy(()=>P0(ae,de.toStyles)),fe.disabled=!0,fe.overrideTotalTime(de.totalTime),void r.push(fe);let ke=he;if(R.size>1){let Fe=ae;const wt=[];for(;Fe=Fe.parentNode;){const ut=R.get(Fe);if(ut){ke=ut;break}wt.push(Fe)}wt.forEach(ut=>R.set(ut,ke))}const et=this._buildAnimation(fe.namespaceId,de,P,s,Le,W);if(fe.setRealPlayer(et),ke===he)me.push(fe);else{const Fe=this.playersByElement.get(ke);Fe&&Fe.length&&(fe.parentPlayer=Sd(Fe)),r.push(fe)}}else H8(ae,de.fromStyles),fe.onDestroy(()=>P0(ae,de.toStyles)),Q.push(fe),u.has(ae)&&r.push(fe)}),Q.forEach(K=>{const ae=s.get(K.element);if(ae&&ae.length){const fe=Sd(ae);K.setRealPlayer(fe)}}),r.forEach(K=>{K.parentPlayer?K.syncPlayerEvents(K.parentPlayer):K.destroy()});for(let K=0;K<w.length;K++){const ae=w[K],fe=ae[B4];if(B7(ae,ab),fe&&fe.hasAnimation)continue;let de=[];if(a.size){let et=a.get(ae);et&&et.length&&de.push(...et);let Fe=this.driver.query(ae,eR,!0);for(let wt=0;wt<Fe.length;wt++){let ut=a.get(Fe[wt]);ut&&ut.length&&de.push(...ut)}}const ke=de.filter(et=>!et.destroyed);ke.length?RMe(this,ae,ke):this.processLeaveNode(ae)}return w.length=0,me.forEach(K=>{this.players.push(K),K.onDone(()=>{K.destroy();const ae=this.players.indexOf(K);this.players.splice(ae,1)}),K.play()}),me}elementContainsData(e,t){let i=!1;const r=t[B4];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==D9;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||o.push(l)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const l=c.element,u=l!==s,f=$3(i,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(g=>{const _=g.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),g.destroy(),f.push(g)})}H8(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,c=t.element,l=[],u=new Set,f=new Set,p=t.timelines.map(_=>{const y=_.element;u.add(y);const w=y[B4];if(w&&w.removedBeforeQueried)return new x9(_.duration,_.delay);const C=y!==c,x=function FMe(n){const e=[];return TX(n,e),e}((i.get(y)||SMe).map(P=>P.getRealPlayer())).filter(P=>!!P.element&&P.element===y),M=s.get(y),T=o.get(y),I=eX(0,this._normalizer,0,_.keyframes,M,T),F=this._buildPlayer(_,I,x);if(_.subTimeline&&r&&f.add(y),C){const P=new pR(e,a,y);P.setRealPlayer(F),l.push(P)}return F});l.forEach(_=>{$3(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>function DMe(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,_.element,_))}),u.forEach(_=>R4(_,lX));const g=Sd(p);return g.onDestroy(()=>{u.forEach(_=>B7(_,lX)),P0(c,t.toStyles)}),f.forEach(_=>{$3(r,_,[]).push(g)}),g}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new x9(e.duration,e.delay)}}class pR{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new x9,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>$B(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){$3(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function yb(n){return n&&1===n.nodeType}function MX(n,e){const t=n.style.display;return n.style.display=e??"none",t}function SX(n,e,t,i,r){const s=[];t.forEach(c=>s.push(MX(c)));const o=[];i.forEach((c,l)=>{const u=new Map;c.forEach(f=>{const p=e.computeStyle(l,f,r);u.set(f,p),(!p||0==p.length)&&(l[B4]=EMe,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>MX(c,s[a++])),o}function EX(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const l=a.parentNode;return c=t.has(l)?l:r.has(l)?1:o(l),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function R4(n,e){n.classList?.add(e)}function B7(n,e){n.classList?.remove(e)}function RMe(n,e,t){Sd(t).onDone(()=>n.processLeaveNode(e))}function TX(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof qK?TX(i.players,e):e.push(i)}}function LX(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class wb{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new LMe(e,t,i),this._timelineEngine=new wMe(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const c=[],u=rR(this._driver,s,c,[]);if(c.length)throw function _xe(n,e){return new jt(3404,!1)}();a=function AMe(n,e,t){return new vMe(n,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=tX(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=tX(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let HMe=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&P0(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(P0(this._element,this._initialStyles),this._endStyles&&(P0(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(H8(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(H8(this._element,this._endStyles),this._endStyles=null),P0(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function gR(n){let e=null;return n.forEach((t,i)=>{(function zMe(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class DX{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:gX(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class OMe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return sX(e,t)}getParentElement(e){return YB(e)}query(e,t,i){return oX(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const c={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(c.easing=s);const l=new Map,u=o.filter(g=>g instanceof DX);(function Gxe(n,e){return 0===n||0===e})(i,r)&&u.forEach(g=>{g.currentSnapshot.forEach((_,y)=>l.set(y,_))});let f=function Oxe(n){return n.length?n[0]instanceof Map?n:n.map(e=>uX(e)):[]}(t).map(g=>Ed(g));f=function Qxe(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,gX(n,a)))}}return e}(e,f,l);const p=function PMe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=gR(e[0]),e.length>1&&(i=gR(e[e.length-1]))):e instanceof Map&&(t=gR(e)),t||i?new HMe(n,t,i):null}(e,f);return new DX(e,f,c,p)}}let NMe=(()=>{class n extends VB{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:qo.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?jK(t):t;return IX(this._renderer,null,i,"register",[r]),new VMe(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(Ye(s3),Ye(Fi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();class VMe extends class Ibe{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new UMe(this._id,e,t||{},this._renderer)}}class UMe{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return IX(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function IX(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const BX="@.disabled";let GMe=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new RX("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=u=>{Array.isArray(u)?u.forEach(c):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(c),new QMe(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(Ye(s3),Ye(wb),Ye(Xi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();class RX{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==BX?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class QMe extends RX{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==BX?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function WMe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function jMe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let $Me=(()=>{class n extends wb{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(Ye(Fi),Ye(ZB),Ye(lR),Ye(p7))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();const FX=[{provide:VB,useClass:NMe},{provide:lR,useFactory:function qMe(){return new dMe}},{provide:wb,useClass:$Me},{provide:s3,useFactory:function KMe(n,e,t){return new GMe(n,e,t)},deps:[aC,wb,Xi]}],mR=[{provide:ZB,useFactory:()=>new OMe},{provide:S4,useValue:"BrowserAnimations"},...FX],kX=[{provide:ZB,useClass:aX},{provide:S4,useValue:"NoopAnimations"},...FX];let XMe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?kX:mR}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:mR,imports:[Kj]}),n})();const YMe=["*",[["mat-toolbar-row"]]],ZMe=["*","mat-toolbar-row"],JMe=R8(class{constructor(n){this._elementRef=n}});let eSe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),tSe=(()=>{class n extends JMe{constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(h3),U(Fi))},n.\u0275cmp=Rn({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,i,r){if(1&t&&Wa(r,eSe,5),2&t){let s;Qi(s=Wi())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,i){2&t&&Br("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[zt],ngContentSelectors:ZMe,decls:2,vars:0,template:function(t,i){1&t&&(Z1(YMe),Bo(0),Bo(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),nSe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Vi,Vi]}),n})(),rSe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Dl,Vi,S8,S8,Vi]}),n})();function AR(n){return n&&"function"==typeof n.connect&&!(n instanceof GI)}class PX{applyChanges(e,t,i,r,s){e.forEachOperation((o,a,c)=>{let l,u;if(null==o.previousIndex){const f=i(o,a,c);l=t.createEmbeddedView(f.templateRef,f.context,f.index),u=1}else null==c?(t.remove(a),u=3):(l=t.get(a),t.move(l,c),u=2);s&&s({context:l?.context,operation:u,record:o})})}detach(){}}class vR{constructor(e=!1,t,i=!0,r){this._multiple=e,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Je,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(i=>this._markSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(i=>this._unmarkSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,i=new Set(e);e.forEach(s=>this._markSelected(s)),t.filter(s=>!i.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,e))return!0;return!1}return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}const I9=new Bt("_ViewRepeater");let zX=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(U(Yo),U(fn))},n.\u0275dir=ht({type:n}),n})(),O8=(()=>{class n extends zX{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,features:[zt]}),n})();const K2=new Bt("NgValueAccessor"),aSe={provide:K2,useExisting:pr(()=>_R),multi:!0},lSe=new Bt("CompositionEventMode");let _R=(()=>{class n extends zX{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function cSe(){const n=L0()?L0().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(U(Yo),U(fn),U(lSe,8))},n.\u0275dir=ht({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&dn("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Ki([aSe]),zt]}),n})();const l2=new Bt("NgValidators"),Ld=new Bt("NgAsyncValidators");function KX(n){return null!=n}function XX(n){return TA(n)?hs(n):n}function YX(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function ZX(n,e){return e.map(t=>t(n))}function JX(n){return n.map(e=>function fSe(n){return!n.validate}(e)?e:t=>e.validate(t))}function yR(n){return null!=n?function eY(n){if(!n)return null;const e=n.filter(KX);return 0==e.length?null:function(t){return YX(ZX(t,e))}}(JX(n)):null}function wR(n){return null!=n?function tY(n){if(!n)return null;const e=n.filter(KX);return 0==e.length?null:function(t){return MK(ZX(t,e).map(XX)).pipe($t(YX))}}(JX(n)):null}function nY(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function CR(n){return n?Array.isArray(n)?n:[n]:[]}function xb(n,e){return Array.isArray(n)?n.includes(e):n===e}function sY(n,e){const t=CR(e);return CR(n).forEach(r=>{xb(t,r)||t.push(r)}),t}function oY(n,e){return CR(e).filter(t=>!xb(n,t))}class aY{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=yR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Il extends aY{get formDirective(){return null}get path(){return null}}class Dd extends aY{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Mb=(()=>{class n extends class cY{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(U(Dd,2))},n.\u0275dir=ht({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Br("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[zt]}),n})();const B9="VALID",Eb="INVALID",R7="PENDING",R9="DISABLED";function uY(n){return Array.isArray(n)?yR(n):n||null}function hY(n){return Array.isArray(n)?wR(n):n||null}function Tb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function F9(n,e){(function LR(n,e){const t=function iY(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(nY(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function rY(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(nY(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Ib(e._rawValidators,r),Ib(e._rawAsyncValidators,r)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function CSe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&gY(n,e)})}(n,e),function xSe(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function bSe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&gY(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function wSe(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ib(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function gY(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _Y(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function yY(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const BSe={provide:Dd,useExisting:pr(()=>P9)},xY=(()=>Promise.resolve())();let P9=(()=>{class n extends Dd{constructor(t,i,r,s,o){super(),this._changeDetectorRef=o,this.control=new class extends class pY{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=uY(this._rawValidators),this._composedAsyncValidatorFn=hY(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===B9}get invalid(){return this.status===Eb}get pending(){return this.status==R7}get disabled(){return this.status===R9}get enabled(){return this.status!==R9}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=uY(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=hY(e)}addValidators(e){this.setValidators(sY(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(sY(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(oY(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(oY(e,this._rawAsyncValidators))}hasValidator(e){return xb(this._rawValidators,e)}hasAsyncValidator(e){return xb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=R7,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=R9,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=B9,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===B9||this.status===R7)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?R9:B9}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=R7,this._hasOwnPendingAsyncValidator=!0;const t=XX(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ji,this.statusChanges=new Ji}_calculateStatus(){return this._allControlsDisabled()?R9:this.errors?Eb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(R7)?R7:this._anyControlsHaveStatus(Eb)?Eb:B9}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Tb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,i){super(function SR(n){return(Tb(n)?n.validators:n)||null}(t),function ER(n,e){return(Tb(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tb(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=yY(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_Y(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_Y(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){yY(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new Ji,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function IR(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===_R?t=s:function ESe(n){return Object.getPrototypeOf(n.constructor)===O8}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function DR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){F9(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){xY.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&Ih(i);xY.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Lb(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(U(Il,9),U(l2,10),U(Ld,10),U(K2,10),U(wc,8))},n.\u0275dir=ht({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ki([BSe]),zt,yr]}),n})(),SY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),iEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[SY]}),n})(),rEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[iEe]}),n})(),oEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Vi,Vi]}),n})();const GY=["*"],aEe=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],cEe=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],dEe=I7(F0(class{})),pEe=F0(class{}),WY=new Bt("MatList"),gEe=new Bt("MatNavList");let mEe=(()=>{class n extends dEe{constructor(t){super(),this._elementRef=t,this._stateChanges=new Je,"action-list"===this._getListType()&&(t.nativeElement.classList.add("mat-action-list"),t.nativeElement.setAttribute("role","group"))}_getListType(){const t=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===t?"list":"mat-action-list"===t?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(t){return new(t||n)(U(fn))},n.\u0275cmp=Rn({type:n,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[Ki([{provide:WY,useExisting:n}]),zt,yr],ngContentSelectors:GY,decls:1,vars:0,template:function(t,i){1&t&&(Z1(),Bo(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),n})(),jY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),n})(),$Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),n})(),AEe=(()=>{class n extends pEe{constructor(t,i,r,s){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new Je,this._disabled=!1,this._isInteractiveList=!!(r||s&&"action-list"===s._getListType()),this._list=r||s;const o=this._getHostElement();"button"===o.nodeName.toLowerCase()&&!o.hasAttribute("type")&&o.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(xa(this._destroyed)).subscribe(()=>{i.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=Sr(t)}ngAfterContentInit(){!function yK(n,e,t="mat"){n.changes.pipe(D0(n)).subscribe(({length:i})=>{y9(e,`${t}-2-line`,!1),y9(e,`${t}-3-line`,!1),y9(e,`${t}-multi-line`,!1),2===i||3===i?y9(e,`${t}-${i}-line`,!0):i>3&&y9(e,`${t}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(wc),U(gEe,8),U(WY,8))},n.\u0275cmp=Rn({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,i,r){if(1&t&&(Wa(r,jY,5),Wa(r,$Y,5),Wa(r,_K,5)),2&t){let s;Qi(s=Wi())&&(i._avatar=s.first),Qi(s=Wi())&&(i._icon=s.first),Qi(s=Wi())&&(i._lines=s)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:4,hostBindings:function(t,i){2&t&&Br("mat-list-item-disabled",i.disabled)("mat-list-item-with-avatar",i._avatar||i._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[zt],ngContentSelectors:cEe,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,i){1&t&&(Z1(aEe),H(0,"span",0),Ke(1,"span",1),Bo(2),H(3,"span",2),Bo(4,1),N(),Bo(5,2),N()),2&t&&(ee(1),Se("matRippleTrigger",i._getHostElement())("matRippleDisabled",i._isRippleDisabled()))},dependencies:[k0],encapsulation:2,changeDetection:0}),n})(),bEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[eb,Ru,Vi,RB,Dl,eb,Vi,RB,oEe]}),n})(),xEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),MEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Dl,Vi,xEe,Ad]}),n})();const SEe=["sliderWrapper"],F4=md({passive:!1}),IEe={provide:K2,useExisting:pr(()=>Fb),multi:!0};class BEe{}const REe=JC(R8(I7(class{constructor(n){this._elementRef=n}}),"accent"));let Fb=(()=>{class n extends REe{constructor(t,i,r,s,o,a,c,l){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this._dir=s,this._ngZone=a,this._animationMode=l,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new Ji,this.input=new Ji,this.valueChange=new Ji,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=Re.EMPTY,this._pointerDown=u=>{this.disabled||this._isSliding||!H9(u)&&0!==u.button||this._ngZone.run(()=>{this._touchId=H9(u)?function FEe(n,e){for(let t=0;t<n.touches.length;t++){const i=n.touches[t].target;if(e===i||e.contains(i))return n.touches[t].identifier}}(u,this._elementRef.nativeElement):void 0;const f=YY(u,this._touchId);if(f){const p=this.value;this._isSliding="pointer",this._lastPointerEvent=u,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(u),this._focusHostElement(),this._updateValueFromPosition(f),this._valueOnSlideStart=p,u.cancelable&&u.preventDefault(),p!=this.value&&this._emitInputEvent()}})},this._pointerMove=u=>{if("pointer"===this._isSliding){const f=YY(u,this._touchId);if(f){u.cancelable&&u.preventDefault();const p=this.value;this._lastPointerEvent=u,this._updateValueFromPosition(f),p!=this.value&&this._emitInputEvent()}}},this._pointerUp=u=>{"pointer"===this._isSliding&&(!H9(u)||"number"!=typeof this._touchId||OR(u.changedTouches,this._touchId))&&(u.cancelable&&u.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=c,this.tabIndex=parseInt(o)||0,a.runOutsideAngular(()=>{const u=t.nativeElement;u.addEventListener("mousedown",this._pointerDown,F4),u.addEventListener("touchstart",this._pointerDown,F4)})}get invert(){return this._invert}set invert(t){this._invert=Sr(t)}get max(){return this._max}set max(t){this._max=Tu(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=Tu(t,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=Tu(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=Sr(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?Tu(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let i=Tu(t,0);this._roundToDecimal&&i!==this.min&&i!==this.max&&(i=parseFloat(i.toFixed(this._roundToDecimal))),this._value=i,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=Sr(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const i=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${i})`}}_getTrackFillStyles(){const t=this.percent,r=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${r})`,display:0===t?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,a={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const c=this._shouldInvertAxis();let l;l=this.vertical?c?"Bottom":"Top":c?"Right":"Left",a[`padding${l}`]=`${this._getThumbGap()}px`}return a}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mousedown",this._pointerDown,F4),t.removeEventListener("touchstart",this._pointerDown,F4),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||B8(t)||this._isSliding&&"keyboard"!==this._isSliding)return;const i=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}i!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",t.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const i=this._document,r=H9(t),o=r?"touchend":"mouseup";i.addEventListener(r?"touchmove":"mousemove",this._pointerMove,F4),i.addEventListener(o,this._pointerUp,F4),r&&i.addEventListener("touchcancel",this._pointerUp,F4);const a=this._getWindow();typeof a<"u"&&a&&a.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener("mousemove",this._pointerMove,F4),t.removeEventListener("mouseup",this._pointerUp,F4),t.removeEventListener("touchmove",this._pointerMove,F4),t.removeEventListener("touchend",this._pointerUp,F4),t.removeEventListener("touchcancel",this._pointerUp,F4);const i=this._getWindow();typeof i<"u"&&i&&i.removeEventListener("blur",this._windowBlur)}_increment(t){const i=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(i+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let o=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(o=1-o),0===o)this.value=this.min;else if(1===o)this.value=this.max;else{const a=this._calculateValue(o),c=Math.round((a-this.min)/this.step)*this.step+this.min;this.value=this._clamp(c,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let t;if("auto"==this.tickInterval){let i=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;t=Math.ceil(30/(i*this.step/(this.max-this.min)))*this.step/i}else t=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=XY(t)?t:0}_createChangeEvent(t=this.value){let i=new BEe;return i.source=this,i.value=t,i}_calculatePercentage(t){const i=((t||0)-this.min)/(this.max-this.min);return XY(i)?i:0}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,i=0,r=1){return Math.max(i,Math.min(t,r))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(I4),U(wc),U(Fh,8),e3("tabindex"),U(Xi),U(Fi),U(S4,8))},n.\u0275cmp=Rn({type:n,selectors:[["mat-slider"]],viewQuery:function(t,i){if(1&t&&wo(SEe,5),2&t){let r;Qi(r=Wi())&&(i._sliderWrapper=r.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(t,i){1&t&&dn("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()})("keydown",function(s){return i._onKeydown(s)})("keyup",function(){return i._onKeyup()})("mouseenter",function(){return i._onMouseenter()})("selectstart",function(s){return s.preventDefault()}),2&t&&(g8("tabIndex",i.tabIndex),ds("aria-disabled",i.disabled)("aria-valuemax",i.max)("aria-valuemin",i.min)("aria-valuenow",i.value)("aria-valuetext",i.valueText??i.displayValue)("aria-orientation",i.vertical?"vertical":"horizontal"),Br("mat-slider-disabled",i.disabled)("mat-slider-has-ticks",i.tickInterval)("mat-slider-horizontal",!i.vertical)("mat-slider-axis-inverted",i._shouldInvertAxis())("mat-slider-invert-mouse-coords",i._shouldInvertMouseCoords())("mat-slider-sliding",i._isSliding)("mat-slider-thumb-label-showing",i.thumbLabel)("mat-slider-vertical",i.vertical)("mat-slider-min-value",i._isMinValue())("mat-slider-hide-last-tick",i.disabled||i._isMinValue()&&i._getThumbGap()&&i._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[Ki([IEe]),zt],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,i){1&t&&(H(0,"div",0,1)(2,"div",2),Ke(3,"div",3)(4,"div",4),N(),H(5,"div",5),Ke(6,"div",6),N(),H(7,"div",7),Ke(8,"div",8)(9,"div",9),H(10,"div",10)(11,"span",11),V(12),N()()()()),2&t&&(ee(3),Se("ngStyle",i._getTrackBackgroundStyles()),ee(1),Se("ngStyle",i._getTrackFillStyles()),ee(1),Se("ngStyle",i._getTicksContainerStyles()),ee(1),Se("ngStyle",i._getTicksStyles()),ee(1),Se("ngStyle",i._getThumbContainerStyles()),ee(5),Lh(i.displayValue))},dependencies:[fd],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid rgba(0,0,0,0);border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}'],encapsulation:2,changeDetection:0}),n})();function XY(n){return!isNaN(n)&&isFinite(n)}function H9(n){return"t"===n.type[0]}function YY(n,e){let t;return t=H9(n)?"number"==typeof e?OR(n.touches,e)||OR(n.changedTouches,e):n.touches[0]||n.changedTouches[0]:n,t?{x:t.clientX,y:t.clientY}:void 0}function OR(n,e){for(let t=0;t<n.length;t++)if(n[t].identifier===e)return n[t]}let kEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Dl,Vi,Vi]}),n})(),eZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),KEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Ru,Vi,_9,eZ,Vi,eZ]}),n})();function XEe(n,e){}class kb{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let tZ=(()=>{class n extends HI{constructor(t,i,r,s,o,a,c,l){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=c,this._focusMonitor=l,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const f=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),f},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=FI(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=FI();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=FI())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(EB),U(Fi,8),U(kb),U(YC),U(Xi),U(t9),U(I4))},n.\u0275cmp=Rn({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(1&t&&wo(zI,7),2&t){let r;Qi(r=Wi())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){2&t&&ds("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[zt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Yt(0,XEe,0,0,"ng-template",0)},dependencies:[zI],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class NR{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Je,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!B8(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const nZ=new Bt("DialogScrollStrategy"),YEe=new Bt("DialogData"),ZEe=new Bt("DefaultDialogConfig"),eTe={provide:nZ,deps:[f3],useFactory:function JEe(n){return()=>n.scrollStrategies.block()}};let tTe=0,iZ=(()=>{class n{constructor(t,i,r,s,o,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Je,this._afterOpenedAtThisLevel=new Je,this._ariaHiddenElements=new Map,this.afterAllClosed=_C(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(D0(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,i){(i={...this._defaultOptions||new kb,...i}).id=i.id||"cdk-dialog-"+tTe++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new NR(o,i),c=this._attachContainer(o,a,i);return a.containerInstance=c,this._attachDialogContent(t,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){VR(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){VR(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),VR(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new NI({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:kb,useValue:r},{provide:NR,useValue:i},{provide:t9,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=tZ;const c=new e9(a,r.viewContainerRef,yc.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,i,r,s){if(t instanceof zc){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new gC(t,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new e9(t,s.viewContainerRef,o,s.componentFactoryResolver));i.componentInstance=a.instance}}_createInjector(t,i,r,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:YEe,useValue:t.data},{provide:NR,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!o||!o.get(Fh,null,zn.Optional))&&a.push({provide:Fh,useValue:{value:t.direction,change:mi()}}),yc.create({parent:o||s,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(Ye(f3),Ye(yc),Ye(ZEe,8),Ye(n,12),Ye(AC),Ye(nZ))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})();function VR(n,e){let t=n.length;for(;t--;)e(n[t])}let nTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[iZ,eTe],imports:[vd,Ad,IB,Ad]}),n})();function iTe(n,e){}const F7={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},rTe={dialogContainer:L2("dialogContainer",[ko("void, exit",Hi({opacity:0,transform:"scale(0.7)"})),ko("enter",Hi({transform:"none"})),Po("* => enter",WK([bo("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",Hi({transform:"none",opacity:1})),GB("@*",UB(),{optional:!0})]),F7),Po("* => void, * => exit",WK([bo("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",Hi({opacity:0})),GB("@*",UB(),{optional:!0})]),F7)])};class Pb{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=F7.params.enterAnimationDuration,this.exitAnimationDuration=F7.params.exitAnimationDuration}}let sTe=(()=>{class n extends tZ{constructor(t,i,r,s,o,a,c,l){super(t,i,r,s,o,a,c,l),this._animationStateChanged=new Ji}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(EB),U(Fi,8),U(Pb),U(YC),U(Xi),U(t9),U(I4))},n.\u0275cmp=Rn({type:n,selectors:[["ng-component"]],features:[zt],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),oTe=(()=>{class n extends sTe{constructor(t,i,r,s,o,a,c,l,u){super(t,i,r,s,o,a,c,u),this._changeDetectorRef=l,this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?this._openAnimationDone(i):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:i})}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||F7.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||F7.params.exitAnimationDuration}}}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(EB),U(Fi,8),U(Pb),U(YC),U(Xi),U(t9),U(wc),U(I4))},n.\u0275cmp=Rn({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,i){1&t&&_D("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(g8("id",i._config.id),ds("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),bD("@dialogContainer",i._getAnimationState()))},features:[zt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Yt(0,iTe,0,0,"ng-template",0)},dependencies:[zI],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[rTe.dialogContainer]}}),n})();class aTe{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Je,this._beforeClosed=new Je,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(mo(r=>"opened"===r.state),Mc(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(mo(r=>"closed"===r.state),Mc(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Zc(this.backdropClick(),this.keydownEvents().pipe(mo(r=>27===r.keyCode&&!this.disableClose&&!B8(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function cTe(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(mo(t=>"closing"===t.state),Mc(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const lTe=new Bt("MatDialogData"),uTe=new Bt("mat-dialog-default-options"),rZ=new Bt("mat-dialog-scroll-strategy"),fTe={provide:rZ,deps:[f3],useFactory:function hTe(n){return()=>n.scrollStrategies.block()}};let dTe=0,pTe=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,f){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=c,this._dialogContainerType=l,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Je,this._afterOpenedAtThisLevel=new Je,this._idPrefix="mat-dialog-",this.afterAllClosed=_C(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(D0(void 0))),this._scrollStrategy=a,this._dialog=i.get(iZ)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){let r;(i={...this._defaultOptions||new Pb,...i}).id=i.id||`${this._idPrefix}${dTe++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:Pb,useValue:i},{provide:kb,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,c)=>(r=new this._dialogRefConstructor(o,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){f8()},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),gTe=(()=>{class n extends pTe{constructor(t,i,r,s,o,a,c,l){super(t,i,s,a,c,o,aTe,oTe,lTe,l)}}return n.\u0275fac=function(t){return new(t||n)(Ye(f3),Ye(yc),Ye(UA,8),Ye(uTe,8),Ye(rZ),Ye(n,12),Ye(AC),Ye(S4,8))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),mTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[gTe,fTe],imports:[nTe,vd,Ad,Vi,Vi]}),n})(),LTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Ru,Vi,Vi]}),n})(),DTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Vi,Vi]}),n})();const ITe=["input"],BTe=function(n){return{enterDuration:n}},RTe=["*"],FTe=new Bt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let kTe=0;const PTe={provide:K2,useExisting:pr(()=>Hb),multi:!0};class HTe{constructor(e,t){this.source=e,this.checked=t}}const zTe=JC(R8(F0(I7(class{constructor(n){this._elementRef=n}}))));let OTe=(()=>{class n extends zTe{constructor(t,i,r,s,o,a,c){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Ji,this.toggleChange=new Ji,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=o.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId=`${c}${++kTe}`}get required(){return this._required}set required(t){this._required=Sr(t)}get checked(){return this._checked}set checked(t){this._checked=Sr(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._focused=!0:t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return n.\u0275fac=function(t){f8()},n.\u0275dir=ht({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[zt]}),n})(),Hb=(()=>{class n extends OTe{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a,"mat-slide-toggle-")}_createChangeEvent(t){return new HTe(this,t)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}focus(t,i){i?this._focusMonitor.focusVia(this._inputElement,i,t):this._inputElement.nativeElement.focus(t)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(I4),U(wc),e3("tabindex"),U(FTe),U(S4,8))},n.\u0275cmp=Rn({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(t,i){if(1&t&&wo(ITe,5),2&t){let r;Qi(r=Wi())&&(i._inputElement=r.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(t,i){2&t&&(g8("id",i.id),ds("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),Br("mat-checked",i.checked)("mat-disabled",i.disabled)("mat-slide-toggle-label-before","before"==i.labelPosition)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[Ki([PTe]),zt],ngContentSelectors:RTe,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,i){if(1&t&&(Z1(),H(0,"label",0,1)(2,"span",2)(3,"input",3,4),dn("change",function(s){return i._onChangeEvent(s)})("click",function(s){return i._onInputClick(s)}),N(),H(5,"span",5),Ke(6,"span",6),H(7,"span",7),Ke(8,"span",8),N()()(),H(9,"span",9,10),dn("cdkObserveContent",function(){return i._onLabelTextChange()}),H(11,"span",11),V(12,"\xa0"),N(),Bo(13),N()()),2&t){const r=Ir(1),s=Ir(10);ds("for",i.inputId),ee(2),Br("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),ee(1),Se("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex)("checked",i.checked)("disabled",i.disabled),ds("name",i.name)("aria-checked",i.checked)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),ee(4),Se("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",G3(18,BTe,i._noopAnimations?0:150))}},dependencies:[k0,rK],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),n})(),cZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),UTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[cZ,Ru,Vi,_9,cZ,Vi]}),n})(),lZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["mat-label"]]}),n})(),zb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Dl,Vi,_9,Vi]}),n})(),$Te=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[M8]}),n})(),UR=(()=>{class n{constructor(){this.changes=new Je,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rLe={provide:UR,deps:[[new t3,new y0,UR]],useFactory:function iLe(n){return n||new UR}};let sLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[rLe,vK],imports:[Vi,Dl,Ad,NB,$Te,UK,Ru,Vi]}),n})(),dZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),oLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[vK],imports:[dZ,zb,Vi,dZ,zb]}),n})(),hLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Dl,Vi,Ad,Ru,_9,IB,Vi]}),n})(),pLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[eb,Vi,eb,Vi]}),n})();const gLe=["button"],mLe=["*"],gZ=new Bt("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),mZ=new Bt("MatButtonToggleGroup"),ALe={provide:K2,useExisting:pr(()=>_Z),multi:!0};let AZ=0;class vZ{constructor(e,t){this.source=e,this.value=t}}let _Z=(()=>{class n{constructor(t,i){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+AZ++,this.valueChange=new Ji,this.change=new Ji,this.appearance=i&&i.appearance?i.appearance:"standard"}get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=Sr(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(i=>i.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=Sr(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=Sr(t),this._markButtonsForCheck()}ngOnInit(){this._selectionModel=new vR(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const i=new vZ(t,this.value);this._controlValueAccessorChangeFn(i.value),this.change.emit(i)}_syncButtonToggle(t,i,r=!1,s=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?i?this._selectionModel.select(t):this._selectionModel.deselect(t):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(t,r)):this._updateModelValue(t,r)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(i=>null!=t.value&&i===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(i=>this._selectValue(i))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const i=this._buttonToggles.find(r=>null!=r.value&&r.value===t);i&&(i.checked=!0,this._selectionModel.select(i))}_updateModelValue(t,i){i&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(U(wc),U(gZ,8))},n.\u0275dir=ht({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,i,r){if(1&t&&Wa(r,yZ,5),2&t){let s;Qi(s=Wi())&&(i._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,i){2&t&&(ds("aria-disabled",i.disabled),Br("mat-button-toggle-vertical",i.vertical)("mat-button-toggle-group-appearance-standard","standard"===i.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[Ki([ALe,{provide:mZ,useExisting:n}])]}),n})();const vLe=F0(class{});let yZ=(()=>{class n extends vLe{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=i,this._elementRef=r,this._focusMonitor=s,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new Ji;const c=Number(o);this.tabIndex=c||0===c?c:null,this.buttonToggleGroup=t,this.appearance=a&&a.appearance?a.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const i=Sr(t);i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=Sr(t)}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+AZ++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new vZ(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return n.\u0275fac=function(t){return new(t||n)(U(mZ,8),U(wc),U(fn),U(I4),e3("tabindex"),U(gZ,8))},n.\u0275cmp=Rn({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(t,i){if(1&t&&wo(gLe,5),2&t){let r;Qi(r=Wi())&&(i._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,i){1&t&&dn("focus",function(){return i.focus()}),2&t&&(ds("aria-label",null)("aria-labelledby",null)("id",i.id)("name",null),Br("mat-button-toggle-standalone",!i.buttonToggleGroup)("mat-button-toggle-checked",i.checked)("mat-button-toggle-disabled",i.disabled)("mat-button-toggle-appearance-standard","standard"===i.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[zt],ngContentSelectors:mLe,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,i){if(1&t&&(Z1(),H(0,"button",0,1),dn("click",function(){return i._onButtonClick()}),H(2,"span",2),Bo(3),N()(),Ke(4,"span",3)(5,"span",4)),2&t){const r=Ir(1);Se("id",i.buttonId)("disabled",i.disabled||null),ds("tabindex",i.disabled?-1:i.tabIndex)("aria-pressed",i.checked)("name",i._getButtonName())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby),ee(5),Se("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)}},dependencies:[k0],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),n})(),_Le=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Vi,Ru,Vi]}),n})(),CLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[vd,Ad,Dl,NB,Vi,Vi]}),n})();const ELe={provide:new Bt("mat-tooltip-scroll-strategy"),deps:[f3],useFactory:function SLe(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let LLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[ELe],imports:[IB,Dl,vd,Vi,Vi,S8]}),n})();const FLe={provide:new Bt("mat-select-scroll-strategy"),deps:[f3],useFactory:function RLe(n){return()=>n.scrollStrategies.reposition()}};let kLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({providers:[FLe],imports:[Dl,vd,xK,Vi,S8,zb,xK,Vi]}),n})();function PLe(n,e){if(1&n&&(Io(),Ke(0,"circle",4)),2&n){const t=Xt(),i=Ir(1);a3("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),ds("r",t._getCircleRadius())}}function HLe(n,e){if(1&n&&(Io(),Ke(0,"circle",4)),2&n){const t=Xt(),i=Ir(1);a3("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),ds("r",t._getCircleRadius())}}const OLe=R8(class{constructor(n){this._elementRef=n}},"primary"),NLe=new Bt("mat-progress-spinner-default-options",{providedIn:"root",factory:function VLe(){return{diameter:100}}});class Id extends OLe{constructor(e,t,i,r,s,o,a,c){super(e),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=Re.EMPTY,this.mode="determinate";const l=Id._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),l.has(i.head)||l.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&a&&o&&c&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&c.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=Tu(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=Tu(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,Tu(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=o$(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){const t=50*(e.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,i=Id._diameters;let r=i.get(e);if(!r||!r.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),r||(r=new Set,i.set(e,r)),r.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Id._diameters=new WeakMap,Id.\u0275fac=function(e){return new(e||Id)(U(fn),U(h3),U(Fi,8),U(S4,8),U(NLe),U(wc),U(dC),U(Xi))},Id.\u0275cmp=Rn({type:Id,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(ds("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),a3("width",t.diameter,"px")("height",t.diameter,"px"),Br("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[zt],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(Io(),H(0,"svg",0,1),Yt(2,PLe,1,11,"circle",2),Yt(3,HLe,1,9,"circle",3),N()),2&e&&(a3("width",t.diameter,"px")("height",t.diameter,"px"),Se("ngSwitch","indeterminate"===t.mode),ds("viewBox",t._getViewBox()),ee(2),Se("ngSwitchCase",!0),ee(1),Se("ngSwitchCase",!1))},dependencies:[eC,Mj],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let GLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Vi,Dl,Vi]}),n})();const WLe=[[["caption"]],[["colgroup"],["col"]]],jLe=["caption","colgroup, col"];function QR(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=Sr(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const k7=new Bt("CDK_TABLE");let P7=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(U(zc))},n.\u0275dir=ht({type:n,selectors:[["","cdkCellDef",""]]}),n})(),H7=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(U(zc))},n.\u0275dir=ht({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),Ob=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(U(zc))},n.\u0275dir=ht({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class XLe{}const YLe=QR(XLe);let Qh=(()=>{class n extends YLe{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const i=this._stickyEnd;this._stickyEnd=Sr(t),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(U(k7,8))},n.\u0275dir=ht({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,i,r){if(1&t&&(Wa(r,P7,5),Wa(r,H7,5),Wa(r,Ob,5)),2&t){let s;Qi(s=Wi())&&(i.cell=s.first),Qi(s=Wi())&&(i.headerCell=s.first),Qi(s=Wi())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[Ki([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),zt]}),n})();class WR{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let jR=(()=>{class n extends WR{constructor(t,i){super(t,i)}}return n.\u0275fac=function(t){return new(t||n)(U(Qh),U(fn))},n.\u0275dir=ht({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[zt]}),n})(),$R=(()=>{class n extends WR{constructor(t,i){if(super(t,i),1===t._table?._elementRef.nativeElement.nodeType){const r=t._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===r||"treegrid"===r?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(U(Qh),U(fn))},n.\u0275dir=ht({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[zt]}),n})();class bZ{constructor(){this.tasks=[],this.endTasks=[]}}const qR=new Bt("_COALESCED_STYLE_SCHEDULER");let xZ=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new Je}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new bZ,this._getScheduleObservable().pipe(xa(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new bZ;for(const i of t.tasks)i();for(const i of t.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?hs(Promise.resolve(void 0)):this._ngZone.onStable.pipe(Mc(1))}}return n.\u0275fac=function(t){return new(t||n)(Ye(Xi))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac}),n})(),KR=(()=>{class n{constructor(t,i){this.template=t,this._differs=i}ngOnChanges(t){if(!this._columnsDiffer){const i=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof z9?t.headerCell.template:this instanceof O9?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(U(zc),U(T0))},n.\u0275dir=ht({type:n,features:[yr]}),n})();class ZLe extends KR{}const JLe=QR(ZLe);let z9=(()=>{class n extends JLe{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(U(zc),U(T0),U(k7,8))},n.\u0275dir=ht({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[zt,yr]}),n})();class eDe extends KR{}const tDe=QR(eDe);let O9=(()=>{class n extends tDe{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(U(zc),U(T0),U(k7,8))},n.\u0275dir=ht({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[zt,yr]}),n})(),Nb=(()=>{class n extends KR{constructor(t,i,r){super(t,i),this._table=r}}return n.\u0275fac=function(t){return new(t||n)(U(zc),U(T0),U(k7,8))},n.\u0275dir=ht({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[zt]}),n})(),Wh=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(t){return new(t||n)(U(Oc))},n.\u0275dir=ht({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),XR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Rn({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&S2(0,0)},dependencies:[Wh],encapsulation:2}),n})(),ZR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Rn({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&S2(0,0)},dependencies:[Wh],encapsulation:2}),n})(),Vb=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(t){return new(t||n)(U(zc))},n.\u0275dir=ht({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const MZ=["top","bottom","left","right"];class nDe{constructor(e,t,i,r,s=!0,o=!0,a){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=o,this._positionListener=a,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const i=[];for(const r of e)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,t)})}updateStickyColumns(e,t,i,r=!0){if(!e.length||!this._isBrowser||!t.some(p=>p)&&!i.some(p=>p))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=e[0],o=s.children.length,a=this._getCellWidths(s,r),c=this._getStickyStartColumnPositions(a,t),l=this._getStickyEndColumnPositions(a,i),u=t.lastIndexOf(!0),f=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const p="rtl"===this.direction,g=p?"right":"left",_=p?"left":"right";for(const y of e)for(let w=0;w<o;w++){const C=y.children[w];t[w]&&this._addStickyStyle(C,g,c[w],w===u),i[w]&&this._addStickyStyle(C,_,l[w],w===f)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===u?[]:a.slice(0,u+1).map((y,w)=>t[w]?y:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===f?[]:a.slice(f).map((y,w)=>i[w+f]?y:null).reverse()}))})}stickRows(e,t,i){if(!this._isBrowser)return;const r="bottom"===i?e.slice().reverse():e,s="bottom"===i?t.slice().reverse():t,o=[],a=[],c=[];for(let u=0,f=0;u<r.length;u++){if(!s[u])continue;o[u]=f;const p=r[u];c[u]=this._isNativeHtmlTable?Array.from(p.children):[p];const g=p.getBoundingClientRect().height;f+=g,a[u]=g}const l=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let u=0;u<r.length;u++){if(!s[u])continue;const f=o[u],p=u===l;for(const g of c[u])this._addStickyStyle(g,i,f,p)}"top"===i?this._positionListener?.stickyHeaderRowsUpdated({sizes:a,offsets:o,elements:c}):this._positionListener?.stickyFooterRowsUpdated({sizes:a,offsets:o,elements:c})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const i=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const r of t)e.style[r]="",e.classList.remove(this._borderCellCss[r]);MZ.some(r=>-1===t.indexOf(r)&&e.style[r])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,i,r){e.classList.add(this._stickCellCss),r&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${i}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let i=0;for(const r of MZ)e.style[r]&&(i+=t[r]);return i?`${i}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=e.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(e,t){const i=[];let r=0;for(let s=0;s<e.length;s++)t[s]&&(i[s]=r,r+=e[s]);return i}_getStickyEndColumnPositions(e,t){const i=[];let r=0;for(let s=e.length;s>0;s--)t[s]&&(i[s]=r,r+=e[s]);return i}}const JR=new Bt("CDK_SPL");let Ub=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(U(Oc),U(fn))},n.\u0275dir=ht({type:n,selectors:[["","rowOutlet",""]]}),n})(),Gb=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(U(Oc),U(fn))},n.\u0275dir=ht({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),Qb=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(U(Oc),U(fn))},n.\u0275dir=ht({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),Wb=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(U(Oc),U(fn))},n.\u0275dir=ht({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),jb=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,f,p,g){this._differs=t,this._changeDetectorRef=i,this._elementRef=r,this._dir=o,this._platform=c,this._viewRepeater=l,this._coalescedStyleScheduler=u,this._viewportRuler=f,this._stickyPositioningListener=p,this._ngZone=g,this._onDestroy=new Je,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new Ji,this.viewChange=new Ao({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=a,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=Sr(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=Sr(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(xa(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),AR(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,i,(r,s,o)=>this._getEmbeddedViewArgs(r.item,o),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&Xi.isInAngularZone()?this._ngZone.onStable.pipe(Mc(1),xa(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=t.length?"":"none");const s=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,s,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=t.length?"":"none");const s=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((s,o)=>{this._addStickyColumnStyles([s],this._headerRowDefs[o])}),this._rowDefs.forEach(s=>{const o=[];for(let a=0;a<i.length;a++)this._renderRows[a].rowDef===s&&o.push(i[a]);this._addStickyColumnStyles(o,s)}),r.forEach((s,o)=>{this._addStickyColumnStyles([s],this._footerRowDefs[o])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const t=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const o=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let a=0;a<o.length;a++){let c=o[a];const l=this._cachedRenderRowsMap.get(c.data);l.has(c.rowDef)?l.get(c.rowDef).push(c):l.set(c.rowDef,[c]),t.push(c)}}return t}_getRenderRowsForData(t,i,r){return this._getRowDefs(t,i).map(o=>{const a=r&&r.has(o)?r.get(o):[];if(a.length){const c=a.shift();return c.dataIndex=i,c}return{data:t,rowDef:o,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),$b(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=$b(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=$b(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=$b(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(o,a)=>o||!!a.getColumnsDiff(),i=this._rowDefs.reduce(t,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(t,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(t,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(t){this._data=[],AR(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;AR(this.dataSource)?t=this.dataSource.connect(this):function QLe(n){return!!n&&(n instanceof Ce||ue(n.lift)&&ue(n.subscribe))}(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=mi(this.dataSource)),this._renderChangeSubscription=t.pipe(xa(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,i)=>this._renderRow(this._headerRowOutlet,t,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,i)=>this._renderRow(this._footerRowOutlet,t,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,i){const r=Array.from(i.columns||[]).map(a=>this._columnDefsByName.get(a)),s=r.map(a=>a.sticky),o=r.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(t,s,o,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const i=[];for(let r=0;r<t.viewContainer.length;r++){const s=t.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(t,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,t));else{let s=this._rowDefs.find(o=>o.when&&o.when(i,t))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(t,i){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:i}}_renderRow(t,i,r,s={}){const o=t.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),o}_renderCellTemplateForItem(t,i){for(let r of this._getCellTemplates(t))Wh.mostRecentCellOutlet&&Wh.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let i=0,r=t.length;i<r;i++){const o=t.get(i).context;o.count=r,o.first=0===i,o.last=i===r-1,o.even=i%2==0,o.odd=!o.even,this.multiTemplateDataRows?(o.dataIndex=this._renderRows[i].dataIndex,o.renderIndex=i):o.index=this._renderRows[i].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,i=>{const r=this._columnDefsByName.get(i);return t.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const o of r.outlets)s.appendChild(o.elementRef.nativeElement);t.appendChild(s)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new nDe(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:mi()).pipe(xa(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(t.templateRef),o=s.rootNodes[0];1===s.rootNodes.length&&o?.nodeType===this._document.ELEMENT_NODE&&(o.setAttribute("role","row"),o.classList.add(t._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(t){return new(t||n)(U(T0),U(wc),U(fn),e3("role"),U(Fh,8),U(Fi),U(h3),U(I9),U(qR),U(dC),U(JR,12),U(Xi,8))},n.\u0275cmp=Rn({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,i,r){if(1&t&&(Wa(r,Vb,5),Wa(r,Qh,5),Wa(r,Nb,5),Wa(r,z9,5),Wa(r,O9,5)),2&t){let s;Qi(s=Wi())&&(i._noDataRow=s.first),Qi(s=Wi())&&(i._contentColumnDefs=s),Qi(s=Wi())&&(i._contentRowDefs=s),Qi(s=Wi())&&(i._contentHeaderRowDefs=s),Qi(s=Wi())&&(i._contentFooterRowDefs=s)}},viewQuery:function(t,i){if(1&t&&(wo(Ub,7),wo(Gb,7),wo(Qb,7),wo(Wb,7)),2&t){let r;Qi(r=Wi())&&(i._rowOutlet=r.first),Qi(r=Wi())&&(i._headerRowOutlet=r.first),Qi(r=Wi())&&(i._footerRowOutlet=r.first),Qi(r=Wi())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,i){2&t&&Br("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[Ki([{provide:k7,useExisting:n},{provide:I9,useClass:PX},{provide:qR,useClass:xZ},{provide:JR,useValue:null}])],ngContentSelectors:jLe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(Z1(WLe),Bo(0),Bo(1,1),S2(2,0)(3,1)(4,2)(5,3))},dependencies:[Ub,Gb,Qb,Wb],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})();function $b(n,e){return n.concat(Array.from(e))}let rDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[pC]}),n})();const sDe=[[["caption"]],[["colgroup"],["col"]]],oDe=["caption","colgroup, col"];let qb=(()=>{class n extends jb{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275cmp=Rn({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(t,i){2&t&&Br("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[Ki([{provide:I9,useClass:PX},{provide:jb,useExisting:n},{provide:k7,useExisting:n},{provide:qR,useClass:xZ},{provide:JR,useValue:null}]),zt],ngContentSelectors:oDe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(Z1(sDe),Bo(0),Bo(1,1),S2(2,0)(3,1)(4,2)(5,3))},dependencies:[Ub,Gb,Qb,Wb],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})(),N9=(()=>{class n extends P7{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","matCellDef",""]],features:[Ki([{provide:P7,useExisting:n}]),zt]}),n})(),V9=(()=>{class n extends H7{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","matHeaderCellDef",""]],features:[Ki([{provide:H7,useExisting:n}]),zt]}),n})(),U9=(()=>{class n extends Qh{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[Ki([{provide:Qh,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),zt]}),n})(),G9=(()=>{class n extends jR{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[zt]}),n})(),Q9=(()=>{class n extends $R{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[zt]}),n})(),Kb=(()=>{class n extends z9{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[Ki([{provide:z9,useExisting:n}]),zt]}),n})(),Xb=(()=>{class n extends Nb{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[Ki([{provide:Nb,useExisting:n}]),zt]}),n})(),Yb=(()=>{class n extends XR{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275cmp=Rn({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[Ki([{provide:XR,useExisting:n}]),zt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&S2(0,0)},dependencies:[Wh],encapsulation:2}),n})(),Zb=(()=>{class n extends ZR{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275cmp=Rn({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[Ki([{provide:ZR,useExisting:n}]),zt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&S2(0,0)},dependencies:[Wh],encapsulation:2}),n})(),mDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[rDe,Vi,Vi]}),n})(),vDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[vd,oLe,nSe,UK,NB,rSe,bEe,MEe,kEe,KEe,Wbe,mTe,LTe,sLe,DTe,UTe,zb,mDe,rEe,hLe,pLe,Ru,_Le,CLe,LLe,kLe,GLe,pC]}),n})(),xDe=(()=>{class n extends f1{constructor(t,i,r,s,o,a,c){super(t,null,i,r),this.ngClassInstance=c,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new WA(s,o,t,a)),this.init(),this.setValue("","")}set klass(t){this.ngClassInstance.klass=t,this.setValue(t,"")}updateWithValue(t){this.ngClassInstance.ngClass=t,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(Sa),U(ja),U(T0),U(_8),U(Yo),U(WA,10))},n.\u0275dir=ht({type:n,inputs:{klass:["class","klass"]},features:[zt]}),n})();const MDe=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let EZ=(()=>{class n extends xDe{constructor(){super(...arguments),this.inputs=MDe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[zt]}),n})();class DDe{constructor(e,t,i=!0){this.key=e,this.value=t,this.key=i?e.replace(/['"]/g,"").trim():e.trim(),this.value=i?t.replace(/['"]/g,"").trim():t.trim(),this.value=this.value.replace(/;/,"")}}function TZ(n){let e=typeof n;return"object"===e?n.constructor===Array?"array":n.constructor===Set?"set":"object":e}function DZ(n){const[e,...t]=n.split(":");return new DDe(e,t.join(":"))}function IZ(n,e){return e.key&&(n[e.key]=e.value),n}let RDe=(()=>{class n extends f1{constructor(t,i,r,s,o,a,c,l,u){super(t,null,i,r),this.sanitizer=s,this.ngStyleInstance=c,this.DIRECTIVE_KEY="ngStyle",this.ngStyleInstance||(this.ngStyleInstance=new fd(t,o,a)),this.init();const f=this.nativeElement.getAttribute("style")??"";this.fallbackStyles=this.buildStyleMap(f),this.isServer=l&&g7(u)}updateWithValue(t){const i=this.buildStyleMap(t);this.ngStyleInstance.ngStyle={...this.fallbackStyles,...i},this.isServer&&this.applyStyleToElement(i),this.ngStyleInstance.ngDoCheck()}clearStyles(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}buildStyleMap(t){const i=r=>this.sanitizer.sanitize(Qs.STYLE,r)??"";if(t)switch(TZ(t)){case"string":return BZ(function IDe(n,e=";"){return String(n).trim().split(e).map(t=>t.trim()).filter(t=>""!==t)}(t),i);case"array":return BZ(t,i);default:return function LZ(n,e){let t=[];return"set"===TZ(n)?n.forEach(i=>t.push(i)):Object.keys(n).forEach(i=>{t.push(`${i}:${n[i]}`)}),function BDe(n,e){return n.map(DZ).filter(i=>!!i).map(i=>(e&&(i.value=e(i.value)),i)).reduce(IZ,{})}(t,e)}(t,i)}return{}}ngDoCheck(){this.ngStyleInstance.ngDoCheck()}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(Sa),U(ja),U(w8),U(_8),U(Yo),U(fd,10),U(M7),U(Q3))},n.\u0275dir=ht({type:n,features:[zt]}),n})();const FDe=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"];let W9=(()=>{class n extends RDe{constructor(){super(...arguments),this.inputs=FDe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[zt]}),n})();function BZ(n,e){return n.map(DZ).filter(i=>!!i).map(i=>(e&&(i.value=e(i.value)),i)).reduce(IZ,{})}let RZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[_B]}),n})(),DIe=(()=>{class n extends B1{buildStyles(t,i){let r=!1;(t=t||"none").endsWith("!")&&(t=t.substring(0,t.indexOf("!")),r=!0);const s={display:i.inline?"inline-grid":"grid","grid-auto-columns":"","grid-template-columns":""};return s[r?"grid-auto-columns":"grid-template-columns"]=t,s}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IIe=(()=>{class n extends f1{constructor(t,i,r,s){super(t,i,r,s),this.DIRECTIVE_KEY="grid-columns",this._inline=!1,this.init()}get inline(){return this._inline}set inline(t){this._inline=Sr(t)}updateWithValue(t){this.styleCache=this.inline?RIe:BIe,this.addStyles(t,{inline:this.inline})}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(DIe),U(Sa),U(ja))},n.\u0275dir=ht({type:n,inputs:{inline:["gdInline","inline"]},features:[zt]}),n})();const BIe=new Map,RIe=new Map,FIe=["gdColumns","gdColumns.xs","gdColumns.sm","gdColumns.md","gdColumns.lg","gdColumns.xl","gdColumns.lt-sm","gdColumns.lt-md","gdColumns.lt-lg","gdColumns.lt-xl","gdColumns.gt-xs","gdColumns.gt-sm","gdColumns.gt-md","gdColumns.gt-lg"];let NZ=(()=>{class n extends IIe{constructor(){super(...arguments),this.inputs=FIe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","gdColumns",""],["","gdColumns.xs",""],["","gdColumns.sm",""],["","gdColumns.md",""],["","gdColumns.lg",""],["","gdColumns.xl",""],["","gdColumns.lt-sm",""],["","gdColumns.lt-md",""],["","gdColumns.lt-lg",""],["","gdColumns.lt-xl",""],["","gdColumns.gt-xs",""],["","gdColumns.gt-sm",""],["","gdColumns.gt-md",""],["","gdColumns.gt-lg",""]],inputs:{gdColumns:"gdColumns","gdColumns.xs":"gdColumns.xs","gdColumns.sm":"gdColumns.sm","gdColumns.md":"gdColumns.md","gdColumns.lg":"gdColumns.lg","gdColumns.xl":"gdColumns.xl","gdColumns.lt-sm":"gdColumns.lt-sm","gdColumns.lt-md":"gdColumns.lt-md","gdColumns.lt-lg":"gdColumns.lt-lg","gdColumns.lt-xl":"gdColumns.lt-xl","gdColumns.gt-xs":"gdColumns.gt-xs","gdColumns.gt-sm":"gdColumns.gt-sm","gdColumns.gt-md":"gdColumns.gt-md","gdColumns.gt-lg":"gdColumns.gt-lg"},features:[zt]}),n})(),PIe=(()=>{class n extends B1{buildStyles(t,i){return{display:i.inline?"inline-grid":"grid","grid-gap":t||"0"}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HIe=(()=>{class n extends f1{constructor(t,i,r,s){super(t,r,i,s),this.DIRECTIVE_KEY="grid-gap",this._inline=!1,this.init()}get inline(){return this._inline}set inline(t){this._inline=Sr(t)}updateWithValue(t){this.styleCache=this.inline?OIe:zIe,this.addStyles(t,{inline:this.inline})}}return n.\u0275fac=function(t){return new(t||n)(U(fn),U(Sa),U(PIe),U(ja))},n.\u0275dir=ht({type:n,inputs:{inline:["gdInline","inline"]},features:[zt]}),n})();const zIe=new Map,OIe=new Map,NIe=["gdGap","gdGap.xs","gdGap.sm","gdGap.md","gdGap.lg","gdGap.xl","gdGap.lt-sm","gdGap.lt-md","gdGap.lt-lg","gdGap.lt-xl","gdGap.gt-xs","gdGap.gt-sm","gdGap.gt-md","gdGap.gt-lg"];let VZ=(()=>{class n extends HIe{constructor(){super(...arguments),this.inputs=NIe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=On(n)))(i||n)}}(),n.\u0275dir=ht({type:n,selectors:[["","gdGap",""],["","gdGap.xs",""],["","gdGap.sm",""],["","gdGap.md",""],["","gdGap.lg",""],["","gdGap.xl",""],["","gdGap.lt-sm",""],["","gdGap.lt-md",""],["","gdGap.lt-lg",""],["","gdGap.lt-xl",""],["","gdGap.gt-xs",""],["","gdGap.gt-sm",""],["","gdGap.gt-md",""],["","gdGap.gt-lg",""]],inputs:{gdGap:"gdGap","gdGap.xs":"gdGap.xs","gdGap.sm":"gdGap.sm","gdGap.md":"gdGap.md","gdGap.lg":"gdGap.lg","gdGap.xl":"gdGap.xl","gdGap.lt-sm":"gdGap.lt-sm","gdGap.lt-md":"gdGap.lt-md","gdGap.lt-lg":"gdGap.lt-lg","gdGap.lt-xl":"gdGap.lt-xl","gdGap.gt-xs":"gdGap.gt-xs","gdGap.gt-sm":"gdGap.gt-sm","gdGap.gt-md":"gdGap.gt-md","gdGap.gt-lg":"gdGap.gt-lg"},features:[zt]}),n})(),GZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[_B]}),n})(),eBe=(()=>{class n{constructor(t,i){g7(i)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,i=[]){return{ngModule:n,providers:t.serverLoaded?[{provide:Bu,useValue:{...yB,...t}},{provide:wB,useValue:i,multi:!0},{provide:M7,useValue:!0}]:[{provide:Bu,useValue:{...yB,...t}},{provide:wB,useValue:i,multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)(Ye(M7),Ye(Q3))},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({imports:[Xq,RZ,GZ,Xq,RZ,GZ]}),n})();const tF=new Bt("DISQUS_SHORTNAME");class jh{constructor(e,t){this.shortname=e,this._document=t}get DISQUS(){return this._document.defaultView.DISQUS}get disqus_config(){return this._document.defaultView.disqus_config}set disqus_config(e){this._document.defaultView.disqus_config=e}}jh.\u0275fac=function(e){return new(e||jh)(Ye(tF),Ye(Fi))},jh.\u0275prov=Lt({token:jh,factory:jh.\u0275fac,providedIn:"root"}),jh.ngInjectableDef=su({factory:function(){return new jh(Cs(tF),Cs(Fi))},token:jh,providedIn:"root"});let j9=(()=>{class n{constructor(t,i,r){this.renderer=t,this.el=i,this.dService=r,this.newComment=new Ji(!0),this.ready=new Ji(!0),this.paginate=new Ji(!0)}ngOnChanges(){this.dService.DISQUS?this.reset():this.addDisqusScript()}addDisqusScript(){this.dService.disqus_config=this.getConfig();const t=this.renderer.createElement("script");t.src=`//${this.dService.shortname}.disqus.com/embed.js`,t.async=!0,t.type="text/javascript",this.renderer.setAttribute(t,"data-timestamp",(new Date).getTime().toString()),this.renderer.appendChild(this.el.nativeElement,t)}reset(){this.dService.DISQUS.reset({reload:!0,config:this.getConfig()})}getConfig(){const t=this;return function(){this.page.identifier=t.identifier,this.page.url=t.validateUrl(t.url),this.page.title=t.title,this.category_id=t.category,this.language=t.language,this.callbacks.onNewComment=[i=>{t.newComment.emit(i)}],this.callbacks.onReady=[i=>{t.ready.emit(i)}],this.callbacks.onPaginate=[i=>{t.paginate.emit(i)}]}}validateUrl(t){if(t){if(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t))return t;console.warn("[Disqus]: Invalid URL")}}}return n.\u0275fac=function(t){return new(t||n)(U(Yo),U(fn),U(jh))},n.\u0275cmp=Rn({type:n,selectors:[["disqus"]],inputs:{url:"url",identifier:"identifier",title:"title",category:"category",language:"language"},outputs:{newComment:"newComment",ready:"ready",paginate:"paginate"},features:[yr],decls:1,vars:0,consts:[["id","disqus_thread"]],template:function(t,i){1&t&&Ke(0,"div",0)},encapsulation:2,changeDetection:0}),n})(),tBe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:tF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})();function QZ(n,e,t,i,r,s,o){try{var a=n[s](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function Ea(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(c){QZ(s,i,r,o,a,"next",c)}function a(c){QZ(s,i,r,o,a,"throw",c)}o(void 0)})}}const nF=new Bt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),WZ=new Bt("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:n}=Cs(Fi);if(!n)throw new Error("Window is not available");return n}}),iBe=new Bt("ngx-data-layer",{providedIn:"root",factory:()=>function nBe(n){return n?n.dataLayer=n.dataLayer||[]:null}(Cs(WZ))}),jZ=new Bt("ngx-gtag-fn",{providedIn:"root",factory:()=>function rBe(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(Cs(WZ),Cs(iBe))}),oBe={provide:NA,multi:!0,useFactory:function aBe(n,e,t){return Ea(function*(){if(!n.trackingCode)return void(Vw()||console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule."));if(!e)return void(Vw()||console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface."));t||Vw()||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=n?.initCommands??[],n.initCommands.find(s=>"config"===s.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(s=>"js"===s.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const s of n.initCommands)e(s.command,...s.values);const i=t.createElement("script");i.async=!0,i.src=n.uri,n.nonce&&i.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(i)})},deps:[nF,jZ,Fi]};new Bt("ngx-google-analytics-routing-settings",{factory:()=>({})});let uBe=(()=>{class n{static forRoot(t,i=[],r,s,o){return{ngModule:n,providers:[{provide:nF,useValue:{trackingCode:t,initCommands:i,uri:r,enableTracing:s,nonce:o}},oBe]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})();const Bd=100,z0=1e3,Bl=1001,R1=1003,$a=1006,Rd=1008,W8=1009,j8=1014,P4=1015,O0=1016,$8=1020,Fu=1023,q8=1026,K8=1027,X9=2300,V7=2301,$h=3e3,Ho=3001,qh="srgb",X8="srgb-linear";class Y8{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Y2=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let FJ=1234567;const Z8=Math.PI/180,Y9=180/Math.PI;function K3(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Y2[255&n]+Y2[n>>8&255]+Y2[n>>16&255]+Y2[n>>24&255]+"-"+Y2[255&e]+Y2[e>>8&255]+"-"+Y2[e>>16&15|64]+Y2[e>>24&255]+"-"+Y2[63&t|128]+Y2[t>>8&255]+"-"+Y2[t>>16&255]+Y2[t>>24&255]+Y2[255&i]+Y2[i>>8&255]+Y2[i>>16&255]+Y2[i>>24&255]).toLowerCase()}function tc(n,e,t){return Math.max(e,Math.min(t,n))}function mF(n,e){return(n%e+e)%e}function Z9(n,e,t){return(1-t)*n+t*e}function AF(n){return 0==(n&n-1)&&0!==n}function kJ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function ox(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Kh(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ca(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}var ax=Object.freeze({__proto__:null,DEG2RAD:Z8,RAD2DEG:Y9,generateUUID:K3,clamp:tc,euclideanModulo:mF,mapLinear:function nRe(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)},inverseLerp:function iRe(n,e,t){return n!==e?(t-n)/(e-n):0},lerp:Z9,damp:function rRe(n,e,t,i){return Z9(n,e,1-Math.exp(-t*i))},pingpong:function sRe(n,e=1){return e-Math.abs(mF(n,2*e)-e)},smoothstep:function oRe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*(3-2*n)},smootherstep:function aRe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*n*(n*(6*n-15)+10)},randInt:function cRe(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function lRe(n,e){return n+Math.random()*(e-n)},randFloatSpread:function uRe(n){return n*(.5-Math.random())},seededRandom:function hRe(n){void 0!==n&&(FJ=n);let e=FJ+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function fRe(n){return n*Z8},radToDeg:function dRe(n){return n*Y9},isPowerOfTwo:AF,ceilPowerOfTwo:kJ,floorPowerOfTwo:ox,setQuaternionFromProperEuler:function pRe(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),c=o(t/2),l=s((e+i)/2),u=o((e+i)/2),f=s((e-i)/2),p=o((e-i)/2),g=s((i-e)/2),_=o((i-e)/2);switch(r){case"XYX":n.set(a*u,c*f,c*p,a*l);break;case"YZY":n.set(c*p,a*u,c*f,a*l);break;case"ZXZ":n.set(c*f,c*p,a*u,a*l);break;case"XZX":n.set(a*u,c*_,c*g,a*l);break;case"YXY":n.set(c*g,a*u,c*_,a*l);break;case"ZYZ":n.set(c*_,c*g,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:ca,denormalize:Kh});class Qt{constructor(e=0,t=0){Qt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class p3{constructor(){p3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],f=i[7],p=i[2],g=i[5],_=i[8],y=r[0],w=r[3],C=r[6],x=r[1],M=r[4],T=r[7],I=r[2],F=r[5],P=r[8];return s[0]=o*y+a*x+c*I,s[3]=o*w+a*M+c*F,s[6]=o*C+a*T+c*P,s[1]=l*y+u*x+f*I,s[4]=l*w+u*M+f*F,s[7]=l*C+u*T+f*P,s[2]=p*y+g*x+_*I,s[5]=p*w+g*M+_*F,s[8]=p*C+g*T+_*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=u*o-a*l,p=a*c-u*s,g=l*s-o*c,_=t*f+i*p+r*g;if(0===_)return this.set(0,0,0,0,0,0,0,0,0);const y=1/_;return e[0]=f*y,e[1]=(r*l-u*i)*y,e[2]=(a*i-r*o)*y,e[3]=p*y,e[4]=(u*t-r*c)*y,e[5]=(r*s-a*t)*y,e[6]=g*y,e[7]=(i*c-l*t)*y,e[8]=(o*t-i*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],c=r[1],l=r[4],u=r[7];return r[0]=t*s+i*c,r[3]=t*o+i*l,r[6]=t*a+i*u,r[1]=-i*s+t*c,r[4]=-i*o+t*l,r[7]=-i*a+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function PJ(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function J9(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function J8(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function cx(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const vF={[qh]:{[X8]:J8},[X8]:{[qh]:cx}},ku={legacyMode:!0,get workingColorSpace(){return X8},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(vF[e]&&void 0!==vF[e][t]){const i=vF[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},HJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Uc={r:0,g:0,b:0},Pu={h:0,s:0,l:0},lx={h:0,s:0,l:0};function _F(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function ux(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let W7,Dn=(()=>{class n{constructor(t,i,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===i&&void 0===r?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=qh){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,ku.toWorkingColorSpace(this,i),this}setRGB(t,i,r,s=X8){return this.r=t,this.g=i,this.b=r,ku.toWorkingColorSpace(this,s),this}setHSL(t,i,r,s=X8){if(t=mF(t,1),i=tc(i,0,1),r=tc(r,0,1),0===i)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+i):r+i-r*i,a=2*r-o;this.r=_F(a,o,t+1/3),this.g=_F(a,o,t),this.b=_F(a,o,t-1/3)}return ku.toWorkingColorSpace(this,s),this}setStyle(t,i=qh){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const c=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,ku.toWorkingColorSpace(this,i),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,ku.toWorkingColorSpace(this,i),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c)){const l=parseFloat(o[1])/360,u=parseFloat(o[2])/100,f=parseFloat(o[3])/100;return r(o[4]),this.setHSL(l,u,f,i)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,ku.toWorkingColorSpace(this,i),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,ku.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=qh){const r=HJ[t.toLowerCase()];return void 0!==r?this.setHex(r,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=J8(t.r),this.g=J8(t.g),this.b=J8(t.b),this}copyLinearToSRGB(t){return this.r=cx(t.r),this.g=cx(t.g),this.b=cx(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=qh){return ku.fromWorkingColorSpace(ux(this,Uc),t),tc(255*Uc.r,0,255)<<16^tc(255*Uc.g,0,255)<<8^tc(255*Uc.b,0,255)<<0}getHexString(t=qh){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=X8){ku.fromWorkingColorSpace(ux(this,Uc),i);const r=Uc.r,s=Uc.g,o=Uc.b,a=Math.max(r,s,o),c=Math.min(r,s,o);let l,u;const f=(c+a)/2;if(c===a)l=0,u=0;else{const p=a-c;switch(u=f<=.5?p/(a+c):p/(2-a-c),a){case r:l=(s-o)/p+(s<o?6:0);break;case s:l=(o-r)/p+2;break;case o:l=(r-s)/p+4}l/=6}return t.h=l,t.s=u,t.l=f,t}getRGB(t,i=X8){return ku.fromWorkingColorSpace(ux(this,Uc),i),t.r=Uc.r,t.g=Uc.g,t.b=Uc.b,t}getStyle(t=qh){return ku.fromWorkingColorSpace(ux(this,Uc),t),t!==qh?`color(${t} ${Uc.r} ${Uc.g} ${Uc.b})`:`rgb(${255*Uc.r|0},${255*Uc.g|0},${255*Uc.b|0})`}offsetHSL(t,i,r){return this.getHSL(Pu),Pu.h+=t,Pu.s+=i,Pu.l+=r,this.setHSL(Pu.h,Pu.s,Pu.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(Pu),t.getHSL(lx);const r=Z9(Pu.h,lx.h,i),s=Z9(Pu.s,lx.s,i),o=Z9(Pu.l,lx.l,i);return this.setHSL(r,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return n.NAMES=HJ,n})();class zJ{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===W7&&(W7=J9("canvas")),W7.width=e.width,W7.height=e.height;const i=W7.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=W7}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=J9("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*J8(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*J8(t[i]/255)):J8(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class j7{constructor(e=null){this.isSource=!0,this.uuid=K3(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(yF(r[o].isDataTexture?r[o].image:r[o]))}else s=yF(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function yF(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?zJ.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let mRe=0,H4=(()=>{class n extends Y8{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Bl,s=Bl,o=$a,a=Rd,c=Fu,l=W8,u=1,f=$h){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:mRe++}),this.uuid=K3(),this.name="",this.source=new j7(t),this.mipmaps=[],this.mapping=i,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new Qt(0,0),this.repeat=new Qt(1,1),this.center=new Qt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new p3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case z0:t.x=t.x-Math.floor(t.x);break;case Bl:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case z0:t.y=t.y-Math.floor(t.y);break;case Bl:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();class xo{constructor(e=0,t=0,i=0,r=1){xo.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,l=c[0],u=c[4],f=c[8],p=c[1],g=c[5],_=c[9],y=c[2],w=c[6],C=c[10];if(Math.abs(u-p)<.01&&Math.abs(f-y)<.01&&Math.abs(_-w)<.01){if(Math.abs(u+p)<.1&&Math.abs(f+y)<.1&&Math.abs(_+w)<.1&&Math.abs(l+g+C-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(l+1)/2,T=(g+1)/2,I=(C+1)/2,F=(u+p)/4,P=(f+y)/4,R=(_+w)/4;return M>T&&M>I?M<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(M),r=F/i,s=P/i):T>I?T<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(T),i=F/r,s=R/r):I<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(I),i=P/s,r=R/s),this.set(i,r,s,t),this}let x=Math.sqrt((w-_)*(w-_)+(f-y)*(f-y)+(p-u)*(p-u));return Math.abs(x)<.001&&(x=1),this.x=(w-_)/x,this.y=(f-y)/x,this.z=(p-u)/x,this.w=Math.acos((l+g+C-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class z4 extends Y8{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new xo(0,0,e,t),this.scissorTest=!1,this.viewport=new xo(0,0,e,t),this.texture=new H4({width:e,height:t,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:$a,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new j7(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class wF extends H4{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=R1,this.minFilter=R1,this.wrapR=Bl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class OJ extends H4{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=R1,this.minFilter=R1,this.wrapR=Bl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class D2{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],f=i[r+3];const p=s[o+0],g=s[o+1],_=s[o+2],y=s[o+3];if(0===a)return e[t+0]=c,e[t+1]=l,e[t+2]=u,void(e[t+3]=f);if(1===a)return e[t+0]=p,e[t+1]=g,e[t+2]=_,void(e[t+3]=y);if(f!==y||c!==p||l!==g||u!==_){let w=1-a;const C=c*p+l*g+u*_+f*y,x=C>=0?1:-1,M=1-C*C;if(M>Number.EPSILON){const I=Math.sqrt(M),F=Math.atan2(I,C*x);w=Math.sin(w*F)/I,a=Math.sin(a*F)/I}const T=a*x;if(c=c*w+p*T,l=l*w+g*T,u=u*w+_*T,f=f*w+y*T,w===1-a){const I=1/Math.sqrt(c*c+l*l+u*u+f*f);c*=I,l*=I,u*=I,f*=I}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],f=s[o],p=s[o+1],g=s[o+2],_=s[o+3];return e[t]=a*_+u*f+c*g-l*p,e[t+1]=c*_+u*p+l*f-a*g,e[t+2]=l*_+u*g+a*p-c*f,e[t+3]=u*_-a*f-c*p-l*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),f=a(s/2),p=c(i/2),g=c(r/2),_=c(s/2);switch(o){case"XYZ":this._x=p*u*f+l*g*_,this._y=l*g*f-p*u*_,this._z=l*u*_+p*g*f,this._w=l*u*f-p*g*_;break;case"YXZ":this._x=p*u*f+l*g*_,this._y=l*g*f-p*u*_,this._z=l*u*_-p*g*f,this._w=l*u*f+p*g*_;break;case"ZXY":this._x=p*u*f-l*g*_,this._y=l*g*f+p*u*_,this._z=l*u*_+p*g*f,this._w=l*u*f-p*g*_;break;case"ZYX":this._x=p*u*f-l*g*_,this._y=l*g*f+p*u*_,this._z=l*u*_-p*g*f,this._w=l*u*f+p*g*_;break;case"YZX":this._x=p*u*f+l*g*_,this._y=l*g*f+p*u*_,this._z=l*u*_-p*g*f,this._w=l*u*f-p*g*_;break;case"XZY":this._x=p*u*f-l*g*_,this._y=l*g*f-p*u*_,this._z=l*u*_+p*g*f,this._w=l*u*f+p*g*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],f=t[10],p=i+a+f;if(p>0){const g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(u-c)*g,this._y=(s-l)*g,this._z=(o-r)*g}else if(i>a&&i>f){const g=2*Math.sqrt(1+i-a-f);this._w=(u-c)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+l)/g}else if(a>f){const g=2*Math.sqrt(1+a-i-f);this._w=(s-l)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(c+u)/g}else{const g=2*Math.sqrt(1+f-i-a);this._w=(o-r)/g,this._x=(s+l)/g,this._y=(c+u)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(tc(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),f=Math.sin((1-t)*u)/l,p=Math.sin(t*u)/l;return this._w=o*f+this._w*p,this._x=i*f+this._x*p,this._y=r*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ge{constructor(e=0,t=0,i=0){ge.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(NJ.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(NJ.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=c*t+o*r-a*i,u=c*i+a*t-s*r,f=c*r+s*i-o*t,p=-s*t-o*i-a*r;return this.x=l*c+p*-s+u*-a-f*-o,this.y=u*c+p*-o+f*-s-l*-a,this.z=f*c+p*-a+l*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return CF.copy(this).projectOnVector(e),this.sub(CF)}reflect(e){return this.sub(CF.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(tc(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const CF=new ge,NJ=new D2;class e5{constructor(e=new ge(1/0,1/0,1/0),t=new ge(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.length;c<l;c+=3){const u=e[c],f=e[c+1],p=e[c+2];u<t&&(t=u),f<i&&(i=f),p<r&&(r=p),u>s&&(s=u),f>o&&(o=f),p>a&&(a=p)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.count;c<l;c++){const u=e.getX(c),f=e.getY(c),p=e.getZ(c);u<t&&(t=u),f<i&&(i=f),p<r&&(r=p),u>s&&(s=u),f>o&&(o=f),p>a&&(a=p)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=t5.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)t5.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(t5)}else null===i.boundingBox&&i.computeBoundingBox(),bF.copy(i.boundingBox),bF.applyMatrix4(e.matrixWorld),this.union(bF);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,t5),t5.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ev),hx.subVectors(this.max,ev),$7.subVectors(e.a,ev),q7.subVectors(e.b,ev),K7.subVectors(e.c,ev),kd.subVectors(q7,$7),Pd.subVectors(K7,q7),n5.subVectors($7,K7);let t=[0,-kd.z,kd.y,0,-Pd.z,Pd.y,0,-n5.z,n5.y,kd.z,0,-kd.x,Pd.z,0,-Pd.x,n5.z,0,-n5.x,-kd.y,kd.x,0,-Pd.y,Pd.x,0,-n5.y,n5.x,0];return!(!xF(t,$7,q7,K7,hx)||(t=[1,0,0,0,1,0,0,0,1],!xF(t,$7,q7,K7,hx)))&&(fx.crossVectors(kd,Pd),t=[fx.x,fx.y,fx.z],xF(t,$7,q7,K7,hx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return t5.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(t5).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Xh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Xh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Xh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Xh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Xh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Xh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Xh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Xh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Xh)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Xh=[new ge,new ge,new ge,new ge,new ge,new ge,new ge,new ge],t5=new ge,bF=new e5,$7=new ge,q7=new ge,K7=new ge,kd=new ge,Pd=new ge,n5=new ge,ev=new ge,hx=new ge,fx=new ge,r5=new ge;function xF(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){r5.fromArray(n,s);const a=r.x*Math.abs(r5.x)+r.y*Math.abs(r5.y)+r.z*Math.abs(r5.z),c=e.dot(r5),l=t.dot(r5),u=i.dot(r5);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const ARe=new e5,VJ=new ge,dx=new ge,MF=new ge;class s5{constructor(e=new ge,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):ARe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){MF.subVectors(e,this.center);const t=MF.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.add(MF.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return!0===this.center.equals(e.center)?dx.set(0,0,1).multiplyScalar(e.radius):dx.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(VJ.copy(e.center).add(dx)),this.expandByPoint(VJ.copy(e.center).sub(dx)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Yh=new ge,SF=new ge,px=new ge,Hd=new ge,EF=new ge,gx=new ge,TF=new ge;class mx{constructor(e=new ge,t=new ge(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Yh)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Yh.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Yh.copy(this.direction).multiplyScalar(t).add(this.origin),Yh.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){SF.copy(e).add(t).multiplyScalar(.5),px.copy(t).sub(e).normalize(),Hd.copy(this.origin).sub(SF);const s=.5*e.distanceTo(t),o=-this.direction.dot(px),a=Hd.dot(this.direction),c=-Hd.dot(px),l=Hd.lengthSq(),u=Math.abs(1-o*o);let f,p,g,_;if(u>0)if(f=o*c-a,p=o*a-c,_=s*u,f>=0)if(p>=-_)if(p<=_){const y=1/u;f*=y,p*=y,g=f*(f+o*p+2*a)+p*(o*f+p+2*c)+l}else p=s,f=Math.max(0,-(o*p+a)),g=-f*f+p*(p+2*c)+l;else p=-s,f=Math.max(0,-(o*p+a)),g=-f*f+p*(p+2*c)+l;else p<=-_?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-c),s),g=-f*f+p*(p+2*c)+l):p<=_?(f=0,p=Math.min(Math.max(-s,-c),s),g=p*(p+2*c)+l):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-c),s),g=-f*f+p*(p+2*c)+l);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),g=-f*f+p*(p+2*c)+l;return i&&i.copy(this.direction).multiplyScalar(f).add(this.origin),r&&r.copy(px).multiplyScalar(p).add(SF),g}intersectSphere(e,t){Yh.subVectors(e.center,this.origin);const i=Yh.dot(this.direction),r=Yh.dot(Yh)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return a<0&&c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,p=this.origin;return l>=0?(i=(e.min.x-p.x)*l,r=(e.max.x-p.x)*l):(i=(e.max.x-p.x)*l,r=(e.min.x-p.x)*l),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),i>o||s>r||((s>i||i!=i)&&(i=s),(o<r||r!=r)&&(r=o),f>=0?(a=(e.min.z-p.z)*f,c=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,c=(e.min.z-p.z)*f),i>c||a>r)||((a>i||i!=i)&&(i=a),(c<r||r!=r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Yh)}intersectTriangle(e,t,i,r,s){EF.subVectors(t,e),gx.subVectors(i,e),TF.crossVectors(EF,gx);let a,o=this.direction.dot(TF);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Hd.subVectors(this.origin,e);const c=a*this.direction.dot(gx.crossVectors(Hd,gx));if(c<0)return null;const l=a*this.direction.dot(EF.cross(Hd));if(l<0||c+l>o)return null;const u=-a*Hd.dot(TF);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ui{constructor(){Ui.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,o,a,c,l,u,f,p,g,_,y,w){const C=this.elements;return C[0]=e,C[4]=t,C[8]=i,C[12]=r,C[1]=s,C[5]=o,C[9]=a,C[13]=c,C[2]=l,C[6]=u,C[10]=f,C[14]=p,C[3]=g,C[7]=_,C[11]=y,C[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ui).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/X7.setFromMatrixColumn(e,0).length(),s=1/X7.setFromMatrixColumn(e,1).length(),o=1/X7.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if("XYZ"===e.order){const p=o*u,g=o*f,_=a*u,y=a*f;t[0]=c*u,t[4]=-c*f,t[8]=l,t[1]=g+_*l,t[5]=p-y*l,t[9]=-a*c,t[2]=y-p*l,t[6]=_+g*l,t[10]=o*c}else if("YXZ"===e.order){const p=c*u,g=c*f,_=l*u,y=l*f;t[0]=p+y*a,t[4]=_*a-g,t[8]=o*l,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=g*a-_,t[6]=y+p*a,t[10]=o*c}else if("ZXY"===e.order){const p=c*u,g=c*f,_=l*u,y=l*f;t[0]=p-y*a,t[4]=-o*f,t[8]=_+g*a,t[1]=g+_*a,t[5]=o*u,t[9]=y-p*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if("ZYX"===e.order){const p=o*u,g=o*f,_=a*u,y=a*f;t[0]=c*u,t[4]=_*l-g,t[8]=p*l+y,t[1]=c*f,t[5]=y*l+p,t[9]=g*l-_,t[2]=-l,t[6]=a*c,t[10]=o*c}else if("YZX"===e.order){const p=o*c,g=o*l,_=a*c,y=a*l;t[0]=c*u,t[4]=y-p*f,t[8]=_*f+g,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=g*f+_,t[10]=p-y*f}else if("XZY"===e.order){const p=o*c,g=o*l,_=a*c,y=a*l;t[0]=c*u,t[4]=-f,t[8]=l*u,t[1]=p*f+y,t[5]=o*u,t[9]=g*f-_,t[2]=_*f-g,t[6]=a*u,t[10]=y*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(vRe,e,_Re)}lookAt(e,t,i){const r=this.elements;return X3.subVectors(e,t),0===X3.lengthSq()&&(X3.z=1),X3.normalize(),zd.crossVectors(i,X3),0===zd.lengthSq()&&(1===Math.abs(i.z)?X3.x+=1e-4:X3.z+=1e-4,X3.normalize(),zd.crossVectors(i,X3)),zd.normalize(),Ax.crossVectors(X3,zd),r[0]=zd.x,r[4]=Ax.x,r[8]=X3.x,r[1]=zd.y,r[5]=Ax.y,r[9]=X3.y,r[2]=zd.z,r[6]=Ax.z,r[10]=X3.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],f=i[5],p=i[9],g=i[13],_=i[2],y=i[6],w=i[10],C=i[14],x=i[3],M=i[7],T=i[11],I=i[15],F=r[0],P=r[4],R=r[8],k=r[12],W=r[1],re=r[5],Le=r[9],me=r[13],Q=r[2],he=r[6],K=r[10],ae=r[14],fe=r[3],de=r[7],ke=r[11],et=r[15];return s[0]=o*F+a*W+c*Q+l*fe,s[4]=o*P+a*re+c*he+l*de,s[8]=o*R+a*Le+c*K+l*ke,s[12]=o*k+a*me+c*ae+l*et,s[1]=u*F+f*W+p*Q+g*fe,s[5]=u*P+f*re+p*he+g*de,s[9]=u*R+f*Le+p*K+g*ke,s[13]=u*k+f*me+p*ae+g*et,s[2]=_*F+y*W+w*Q+C*fe,s[6]=_*P+y*re+w*he+C*de,s[10]=_*R+y*Le+w*K+C*ke,s[14]=_*k+y*me+w*ae+C*et,s[3]=x*F+M*W+T*Q+I*fe,s[7]=x*P+M*re+T*he+I*de,s[11]=x*R+M*Le+T*K+I*ke,s[15]=x*k+M*me+T*ae+I*et,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],f=e[6],p=e[10],g=e[14];return e[3]*(+s*c*f-r*l*f-s*a*p+i*l*p+r*a*g-i*c*g)+e[7]*(+t*c*g-t*l*p+s*o*p-r*o*g+r*l*u-s*c*u)+e[11]*(+t*l*f-t*a*g-s*o*f+i*o*g+s*a*u-i*l*u)+e[15]*(-r*a*u-t*c*f+t*a*p+r*o*f-i*o*p+i*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=e[9],p=e[10],g=e[11],_=e[12],y=e[13],w=e[14],C=e[15],x=f*w*l-y*p*l+y*c*g-a*w*g-f*c*C+a*p*C,M=_*p*l-u*w*l-_*c*g+o*w*g+u*c*C-o*p*C,T=u*y*l-_*f*l+_*a*g-o*y*g-u*a*C+o*f*C,I=_*f*c-u*y*c-_*a*p+o*y*p+u*a*w-o*f*w,F=t*x+i*M+r*T+s*I;if(0===F)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/F;return e[0]=x*P,e[1]=(y*p*s-f*w*s-y*r*g+i*w*g+f*r*C-i*p*C)*P,e[2]=(a*w*s-y*c*s+y*r*l-i*w*l-a*r*C+i*c*C)*P,e[3]=(f*c*s-a*p*s-f*r*l+i*p*l+a*r*g-i*c*g)*P,e[4]=M*P,e[5]=(u*w*s-_*p*s+_*r*g-t*w*g-u*r*C+t*p*C)*P,e[6]=(_*c*s-o*w*s-_*r*l+t*w*l+o*r*C-t*c*C)*P,e[7]=(o*p*s-u*c*s+u*r*l-t*p*l-o*r*g+t*c*g)*P,e[8]=T*P,e[9]=(_*f*s-u*y*s-_*i*g+t*y*g+u*i*C-t*f*C)*P,e[10]=(o*y*s-_*a*s+_*i*l-t*y*l-o*i*C+t*a*C)*P,e[11]=(u*a*s-o*f*s-u*i*l+t*f*l+o*i*g-t*a*g)*P,e[12]=I*P,e[13]=(u*y*r-_*f*r+_*i*p-t*y*p-u*i*w+t*f*w)*P,e[14]=(_*a*r-o*y*r-_*i*c+t*y*c+o*i*w-t*a*w)*P,e[15]=(o*f*r-u*a*r+u*i*c-t*f*c-o*i*p+t*a*p)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,f=a+a,p=s*l,g=s*u,_=s*f,y=o*u,w=o*f,C=a*f,x=c*l,M=c*u,T=c*f,I=i.x,F=i.y,P=i.z;return r[0]=(1-(y+C))*I,r[1]=(g+T)*I,r[2]=(_-M)*I,r[3]=0,r[4]=(g-T)*F,r[5]=(1-(p+C))*F,r[6]=(w+x)*F,r[7]=0,r[8]=(_+M)*P,r[9]=(w-x)*P,r[10]=(1-(p+y))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=X7.set(r[0],r[1],r[2]).length();const o=X7.set(r[4],r[5],r[6]).length(),a=X7.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Hu.copy(this);const l=1/s,u=1/o,f=1/a;return Hu.elements[0]*=l,Hu.elements[1]*=l,Hu.elements[2]*=l,Hu.elements[4]*=u,Hu.elements[5]*=u,Hu.elements[6]*=u,Hu.elements[8]*=f,Hu.elements[9]*=f,Hu.elements[10]*=f,t.setFromRotationMatrix(Hu),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){const a=this.elements,l=2*s/(i-r),u=(t+e)/(t-e),f=(i+r)/(i-r),p=-(o+s)/(o-s),g=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=g,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,c=1/(t-e),l=1/(i-r),u=1/(o-s),f=(t+e)*c,p=(i+r)*l,g=(o+s)*u;return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-g,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const X7=new ge,Hu=new Ui,vRe=new ge(0,0,0),_Re=new ge(1,1,1),zd=new ge,Ax=new ge,X3=new ge,UJ=new Ui,GJ=new D2;let yRe=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DefaultOrder){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],f=s[9],p=s[2],g=s[6],_=s[10];switch(i){case"XYZ":this._y=Math.asin(tc(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,_),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(g,u),this._z=0);break;case"YXZ":this._x=Math.asin(-tc(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(c,_),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(tc(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,_),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-tc(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,_),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(tc(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(c,_));break;case"XZY":this._z=Math.asin(-tc(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-f,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return UJ.makeRotationFromQuaternion(t),this.setFromRotationMatrix(UJ,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return GJ.setFromEuler(this),this.setFromQuaternion(GJ,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n})();class LF{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let wRe=0;const QJ=new ge,Y7=new D2,Zh=new Ui,vx=new ge,tv=new ge,CRe=new ge,bRe=new D2,WJ=new ge(1,0,0),jJ=new ge(0,1,0),$J=new ge(0,0,1),xRe={type:"added"},qJ={type:"removed"};let I2=(()=>{class n extends Y8{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:wRe++}),this.uuid=K3(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DefaultUp.clone();const t=new ge,i=new yRe,r=new D2,s=new ge(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ui},normalMatrix:{value:new p3}}),this.matrix=new Ui,this.matrixWorld=new Ui,this.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,this.layers=new LF,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Y7.setFromAxisAngle(t,i),this.quaternion.multiply(Y7),this}rotateOnWorldAxis(t,i){return Y7.setFromAxisAngle(t,i),this.quaternion.premultiply(Y7),this}rotateX(t){return this.rotateOnAxis(WJ,t)}rotateY(t){return this.rotateOnAxis(jJ,t)}rotateZ(t){return this.rotateOnAxis($J,t)}translateOnAxis(t,i){return QJ.copy(t).applyQuaternion(this.quaternion),this.position.add(QJ.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(WJ,t)}translateY(t){return this.translateOnAxis(jJ,t)}translateZ(t){return this.translateOnAxis($J,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Zh.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?vx.copy(t):vx.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),tv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Zh.lookAt(tv,vx,this.up):Zh.lookAt(vx,tv,this.up),this.quaternion.setFromRotationMatrix(Zh),s&&(Zh.extractRotation(s.matrixWorld),Y7.setFromRotationMatrix(Zh),this.quaternion.premultiply(Y7.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(xRe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(qJ)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(qJ)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Zh.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Zh.multiply(t.parent.matrixWorld)),t.applyMatrix4(Zh),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tv,t,CRe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tv,bRe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++){const o=i[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++){const c=s[o];!0===c.matrixWorldAutoUpdate&&c.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(c,l){return void 0===c[l.uuid]&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const l=c.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++)o(t.shapes,l[u]);else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++)s.animations.push(o(t.animations,this.animations[c]))}if(i){const c=a(t.geometries),l=a(t.materials),u=a(t.textures),f=a(t.images),p=a(t.shapes),g=a(t.skeletons),_=a(t.animations),y=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),f.length>0&&(r.images=f),p.length>0&&(r.shapes=p),g.length>0&&(r.skeletons=g),_.length>0&&(r.animations=_),y.length>0&&(r.nodes=y)}return r.object=s,r;function a(c){const l=[];for(const u in c){const f=c[u];delete f.metadata,l.push(f)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DefaultUp=new ge(0,1,0),n.DefaultMatrixAutoUpdate=!0,n.DefaultMatrixWorldAutoUpdate=!0,n})();const zu=new ge,Jh=new ge,DF=new ge,ef=new ge,Z7=new ge,J7=new ge,KJ=new ge,IF=new ge,BF=new ge,RF=new ge;class Ou{constructor(e=new ge,t=new ge,i=new ge){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),zu.subVectors(e,t),r.cross(zu);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){zu.subVectors(r,t),Jh.subVectors(i,t),DF.subVectors(e,t);const o=zu.dot(zu),a=zu.dot(Jh),c=zu.dot(DF),l=Jh.dot(Jh),u=Jh.dot(DF),f=o*l-a*a;if(0===f)return s.set(-2,-1,-1);const p=1/f,g=(l*c-a*u)*p,_=(o*u-a*c)*p;return s.set(1-g-_,_,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ef),ef.x>=0&&ef.y>=0&&ef.x+ef.y<=1}static getUV(e,t,i,r,s,o,a,c){return this.getBarycoord(e,t,i,r,ef),c.set(0,0),c.addScaledVector(s,ef.x),c.addScaledVector(o,ef.y),c.addScaledVector(a,ef.z),c}static isFrontFacing(e,t,i,r){return zu.subVectors(i,t),Jh.subVectors(e,t),zu.cross(Jh).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return zu.subVectors(this.c,this.b),Jh.subVectors(this.a,this.b),.5*zu.cross(Jh).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ou.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ou.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return Ou.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Ou.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ou.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Z7.subVectors(r,i),J7.subVectors(s,i),IF.subVectors(e,i);const c=Z7.dot(IF),l=J7.dot(IF);if(c<=0&&l<=0)return t.copy(i);BF.subVectors(e,r);const u=Z7.dot(BF),f=J7.dot(BF);if(u>=0&&f<=u)return t.copy(r);const p=c*f-u*l;if(p<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(Z7,o);RF.subVectors(e,s);const g=Z7.dot(RF),_=J7.dot(RF);if(_>=0&&g<=_)return t.copy(s);const y=g*l-c*_;if(y<=0&&l>=0&&_<=0)return a=l/(l-_),t.copy(i).addScaledVector(J7,a);const w=u*_-g*f;if(w<=0&&f-u>=0&&g-_>=0)return KJ.subVectors(s,r),a=(f-u)/(f-u+(g-_)),t.copy(r).addScaledVector(KJ,a);const C=1/(w+y+p);return o=y*C,a=p*C,t.copy(i).addScaledVector(Z7,o).addScaledVector(J7,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let MRe=0;class Z2 extends Y8{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:MRe++}),this.uuid=K3(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=Bd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Rl extends Z2{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Dn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ec=new ge,_x=new Qt;class qa{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)_x.fromBufferAttribute(this,t),_x.applyMatrix3(e),this.setXY(t,_x.x,_x.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Ec.fromBufferAttribute(this,t),Ec.applyMatrix3(e),this.setXYZ(t,Ec.x,Ec.y,Ec.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ec.fromBufferAttribute(this,t),Ec.applyMatrix4(e),this.setXYZ(t,Ec.x,Ec.y,Ec.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ec.fromBufferAttribute(this,t),Ec.applyNormalMatrix(e),this.setXYZ(t,Ec.x,Ec.y,Ec.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ec.fromBufferAttribute(this,t),Ec.transformDirection(e),this.setXYZ(t,Ec.x,Ec.y,Ec.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Kh(t,this.array)),t}setX(e,t){return this.normalized&&(t=ca(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Kh(t,this.array)),t}setY(e,t){return this.normalized&&(t=ca(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Kh(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ca(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Kh(t,this.array)),t}setW(e,t){return this.normalized&&(t=ca(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=ca(t,this.array),i=ca(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=ca(t,this.array),i=ca(i,this.array),r=ca(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=ca(t,this.array),i=ca(i,this.array),r=ca(r,this.array),s=ca(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class XJ extends qa{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class YJ extends qa{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class ai extends qa{constructor(e,t,i){super(new Float32Array(e),t,i)}}let SRe=0;const O4=new Ui,FF=new I2,eg=new ge,Y3=new e5,nv=new e5,u2=new ge;class Ar extends Y8{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:SRe++}),this.uuid=K3(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(PJ(e)?YJ:XJ)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new p3).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return O4.makeRotationFromQuaternion(e),this.applyMatrix4(O4),this}rotateX(e){return O4.makeRotationX(e),this.applyMatrix4(O4),this}rotateY(e){return O4.makeRotationY(e),this.applyMatrix4(O4),this}rotateZ(e){return O4.makeRotationZ(e),this.applyMatrix4(O4),this}translate(e,t,i){return O4.makeTranslation(e,t,i),this.applyMatrix4(O4),this}scale(e,t,i){return O4.makeScale(e,t,i),this.applyMatrix4(O4),this}lookAt(e){return FF.lookAt(e),FF.updateMatrix(),this.applyMatrix4(FF.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(eg).negate(),this.translate(eg.x,eg.y,eg.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ai(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new e5);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ge(-1/0,-1/0,-1/0),new ge(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Y3.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(u2.addVectors(this.boundingBox.min,Y3.min),this.boundingBox.expandByPoint(u2),u2.addVectors(this.boundingBox.max,Y3.max),this.boundingBox.expandByPoint(u2)):(this.boundingBox.expandByPoint(Y3.min),this.boundingBox.expandByPoint(Y3.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new s5);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ge,1/0);if(e){const i=this.boundingSphere.center;if(Y3.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)nv.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(u2.addVectors(Y3.min,nv.min),Y3.expandByPoint(u2),u2.addVectors(Y3.max,nv.max),Y3.expandByPoint(u2)):(Y3.expandByPoint(nv.min),Y3.expandByPoint(nv.max));Y3.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)u2.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(u2));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)u2.fromBufferAttribute(a,l),c&&(eg.fromBufferAttribute(e,l),u2.add(eg)),r=Math.max(r,i.distanceToSquared(u2))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new qa(new Float32Array(4*a),4));const c=this.getAttribute("tangent").array,l=[],u=[];for(let W=0;W<a;W++)l[W]=new ge,u[W]=new ge;const f=new ge,p=new ge,g=new ge,_=new Qt,y=new Qt,w=new Qt,C=new ge,x=new ge;function M(W,re,Le){f.fromArray(r,3*W),p.fromArray(r,3*re),g.fromArray(r,3*Le),_.fromArray(o,2*W),y.fromArray(o,2*re),w.fromArray(o,2*Le),p.sub(f),g.sub(f),y.sub(_),w.sub(_);const me=1/(y.x*w.y-w.x*y.y);!isFinite(me)||(C.copy(p).multiplyScalar(w.y).addScaledVector(g,-y.y).multiplyScalar(me),x.copy(g).multiplyScalar(y.x).addScaledVector(p,-w.x).multiplyScalar(me),l[W].add(C),l[re].add(C),l[Le].add(C),u[W].add(x),u[re].add(x),u[Le].add(x))}let T=this.groups;0===T.length&&(T=[{start:0,count:i.length}]);for(let W=0,re=T.length;W<re;++W){const Le=T[W],me=Le.start;for(let he=me,K=me+Le.count;he<K;he+=3)M(i[he+0],i[he+1],i[he+2])}const I=new ge,F=new ge,P=new ge,R=new ge;function k(W){P.fromArray(s,3*W),R.copy(P);const re=l[W];I.copy(re),I.sub(P.multiplyScalar(P.dot(re))).normalize(),F.crossVectors(R,re);const me=F.dot(u[W])<0?-1:1;c[4*W]=I.x,c[4*W+1]=I.y,c[4*W+2]=I.z,c[4*W+3]=me}for(let W=0,re=T.length;W<re;++W){const Le=T[W],me=Le.start;for(let he=me,K=me+Le.count;he<K;he+=3)k(i[he+0]),k(i[he+1]),k(i[he+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new qa(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let p=0,g=i.count;p<g;p++)i.setXYZ(p,0,0,0);const r=new ge,s=new ge,o=new ge,a=new ge,c=new ge,l=new ge,u=new ge,f=new ge;if(e)for(let p=0,g=e.count;p<g;p+=3){const _=e.getX(p+0),y=e.getX(p+1),w=e.getX(p+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,w),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(i,_),c.fromBufferAttribute(i,y),l.fromBufferAttribute(i,w),a.add(u),c.add(u),l.add(u),i.setXYZ(_,a.x,a.y,a.z),i.setXYZ(y,c.x,c.y,c.z),i.setXYZ(w,l.x,l.y,l.z)}else for(let p=0,g=t.count;p<g;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),i.setXYZ(p+0,u.x,u.y,u.z),i.setXYZ(p+1,u.x,u.y,u.z),i.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)u2.fromBufferAttribute(e,t),u2.normalize(),e.setXYZ(t,u2.x,u2.y,u2.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,f=a.normalized,p=new l.constructor(c.length*u);let g=0,_=0;for(let y=0,w=c.length;y<w;y++){g=a.isInterleavedBufferAttribute?c[y]*a.data.stride+a.offset:c[y]*u;for(let C=0;C<u;C++)p[_++]=l[g++]}return new qa(p,u,f)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ar,i=this.index.array,r=this.attributes;for(const a in r){const l=e(r[a],i);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const c=[],l=s[a];for(let u=0,f=l.length;u<f;u++){const g=e(l[u],i);c.push(g)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const l in c)void 0!==c[l]&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const r={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let f=0,p=l.length;f<p;f++)u.push(l[f].toJSON(e.data));u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const l in r)this.setAttribute(l,r[l].clone(t));const s=e.morphAttributes;for(const l in s){const u=[],f=s[l];for(let p=0,g=f.length;p<g;p++)u.push(f[p].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const f=o[l];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const ZJ=new Ui,tg=new mx,kF=new s5,Od=new ge,Nd=new ge,Vd=new ge,PF=new ge,HF=new ge,zF=new ge,yx=new ge,wx=new ge,Cx=new ge,bx=new Qt,xx=new Qt,Mx=new Qt,OF=new ge,Sx=new ge;class eo extends I2{constructor(e=new Ar,t=new Rl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),kF.copy(i.boundingSphere),kF.applyMatrix4(s),!1===e.ray.intersectsSphere(kF))||(ZJ.copy(s).invert(),tg.copy(e.ray).applyMatrix4(ZJ),null!==i.boundingBox&&!1===tg.intersectsBox(i.boundingBox)))return;let o;const a=i.index,c=i.attributes.position,l=i.morphAttributes.position,u=i.morphTargetsRelative,f=i.attributes.uv,p=i.attributes.uv2,g=i.groups,_=i.drawRange;if(null!==a)if(Array.isArray(r))for(let y=0,w=g.length;y<w;y++){const C=g[y],x=r[C.materialIndex];for(let I=Math.max(C.start,_.start),F=Math.min(a.count,Math.min(C.start+C.count,_.start+_.count));I<F;I+=3){const P=a.getX(I),R=a.getX(I+1),k=a.getX(I+2);o=Ex(this,x,e,tg,c,l,u,f,p,P,R,k),o&&(o.faceIndex=Math.floor(I/3),o.face.materialIndex=C.materialIndex,t.push(o))}}else for(let C=Math.max(0,_.start),x=Math.min(a.count,_.start+_.count);C<x;C+=3){const M=a.getX(C),T=a.getX(C+1),I=a.getX(C+2);o=Ex(this,r,e,tg,c,l,u,f,p,M,T,I),o&&(o.faceIndex=Math.floor(C/3),t.push(o))}else if(void 0!==c)if(Array.isArray(r))for(let y=0,w=g.length;y<w;y++){const C=g[y],x=r[C.materialIndex];for(let I=Math.max(C.start,_.start),F=Math.min(c.count,Math.min(C.start+C.count,_.start+_.count));I<F;I+=3)o=Ex(this,x,e,tg,c,l,u,f,p,I,I+1,I+2),o&&(o.faceIndex=Math.floor(I/3),o.face.materialIndex=C.materialIndex,t.push(o))}else for(let C=Math.max(0,_.start),x=Math.min(c.count,_.start+_.count);C<x;C+=3)o=Ex(this,r,e,tg,c,l,u,f,p,C,C+1,C+2),o&&(o.faceIndex=Math.floor(C/3),t.push(o))}}function Ex(n,e,t,i,r,s,o,a,c,l,u,f){Od.fromBufferAttribute(r,l),Nd.fromBufferAttribute(r,u),Vd.fromBufferAttribute(r,f);const p=n.morphTargetInfluences;if(s&&p){yx.set(0,0,0),wx.set(0,0,0),Cx.set(0,0,0);for(let _=0,y=s.length;_<y;_++){const w=p[_],C=s[_];0!==w&&(PF.fromBufferAttribute(C,l),HF.fromBufferAttribute(C,u),zF.fromBufferAttribute(C,f),o?(yx.addScaledVector(PF,w),wx.addScaledVector(HF,w),Cx.addScaledVector(zF,w)):(yx.addScaledVector(PF.sub(Od),w),wx.addScaledVector(HF.sub(Nd),w),Cx.addScaledVector(zF.sub(Vd),w)))}Od.add(yx),Nd.add(wx),Vd.add(Cx)}n.isSkinnedMesh&&(n.boneTransform(l,Od),n.boneTransform(u,Nd),n.boneTransform(f,Vd));const g=function ERe(n,e,t,i,r,s,o,a){let c;if(c=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,2!==e.side,a),null===c)return null;Sx.copy(a),Sx.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(Sx);return l<t.near||l>t.far?null:{distance:l,point:Sx.clone(),object:n}}(n,e,t,i,Od,Nd,Vd,OF);if(g){a&&(bx.fromBufferAttribute(a,l),xx.fromBufferAttribute(a,u),Mx.fromBufferAttribute(a,f),g.uv=Ou.getUV(OF,Od,Nd,Vd,bx,xx,Mx,new Qt)),c&&(bx.fromBufferAttribute(c,l),xx.fromBufferAttribute(c,u),Mx.fromBufferAttribute(c,f),g.uv2=Ou.getUV(OF,Od,Nd,Vd,bx,xx,Mx,new Qt));const _={a:l,b:u,c:f,normal:new ge,materialIndex:0};Ou.getNormal(Od,Nd,Vd,_.normal),g.face=_}return g}class N0 extends Ar{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],f=[];let p=0,g=0;function _(y,w,C,x,M,T,I,F,P,R,k){const W=T/P,re=I/R,Le=T/2,me=I/2,Q=F/2,he=P+1,K=R+1;let ae=0,fe=0;const de=new ge;for(let ke=0;ke<K;ke++){const et=ke*re-me;for(let Fe=0;Fe<he;Fe++)de[y]=(Fe*W-Le)*x,de[w]=et*M,de[C]=Q,l.push(de.x,de.y,de.z),de[y]=0,de[w]=0,de[C]=F>0?1:-1,u.push(de.x,de.y,de.z),f.push(Fe/P),f.push(1-ke/R),ae+=1}for(let ke=0;ke<R;ke++)for(let et=0;et<P;et++){const wt=p+et+he*(ke+1),ut=p+(et+1)+he*(ke+1),It=p+(et+1)+he*ke;c.push(p+et+he*ke,wt,It),c.push(wt,ut,It),fe+=6}a.addGroup(g,fe,k),g+=fe,p+=ae}_("z","y","x",-1,-1,i,t,e,o,s,0),_("z","y","x",1,-1,i,t,-e,o,s,1),_("x","z","y",1,1,e,i,t,r,o,2),_("x","z","y",1,-1,e,i,-t,r,o,3),_("x","y","z",1,-1,e,t,i,r,s,4),_("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new ai(l,3)),this.setAttribute("normal",new ai(u,3)),this.setAttribute("uv",new ai(f,2))}static fromJSON(e){return new N0(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ng(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];e[t][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function J2(n){const e={};for(let t=0;t<n.length;t++){const i=ng(n[t]);for(const r in i)e[r]=i[r]}return e}const Ud={clone:ng,merge:J2};class B2 extends Z2{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ng(e.uniforms),this.uniformsGroups=function TRe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class NF extends I2{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ui,this.projectionMatrix=new Ui,this.projectionMatrixInverse=new Ui}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Gc extends NF{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Y9*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Z8*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Y9*Math.atan(Math.tan(.5*Z8*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Z8*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/l,r*=o.width/c,i*=o.height/l}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class IRe extends I2{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new Gc(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new ge(1,0,0)),this.add(r);const s=new Gc(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new ge(-1,0,0)),this.add(s);const o=new Gc(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new ge(0,1,0)),this.add(o);const a=new Gc(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new ge(0,-1,0)),this.add(a);const c=new Gc(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new ge(0,0,1)),this.add(c);const l=new Gc(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new ge(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,c,l]=this.children,u=e.getRenderTarget(),f=e.toneMapping,p=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const g=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,c),i.texture.generateMipmaps=g,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=f,e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class Tx extends H4{constructor(e,t,i,r,s,o,a,c,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,r,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class BRe extends z4{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new Tx([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:$a}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new N0(5,5,5),s=new B2({name:"CubemapFromEquirect",uniforms:ng(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new eo(r,s),a=t.minFilter;return t.minFilter===Rd&&(t.minFilter=$a),new IRe(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const VF=new ge,RRe=new ge,FRe=new p3;class Nu{constructor(e=new ge(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=VF.subVectors(i,t).cross(RRe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(VF),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||FRe.getNormalMatrix(e),r=this.coplanarPoint(VF).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const sg=new s5,Lx=new ge;class UF{constructor(e=new Nu,t=new Nu,i=new Nu,r=new Nu,s=new Nu,o=new Nu){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],c=i[4],l=i[5],u=i[6],f=i[7],p=i[8],g=i[9],_=i[10],y=i[11],w=i[12],C=i[13],x=i[14],M=i[15];return t[0].setComponents(a-r,f-c,y-p,M-w).normalize(),t[1].setComponents(a+r,f+c,y+p,M+w).normalize(),t[2].setComponents(a+s,f+l,y+g,M+C).normalize(),t[3].setComponents(a-s,f-l,y-g,M-C).normalize(),t[4].setComponents(a-o,f-u,y-_,M-x).normalize(),t[5].setComponents(a+o,f+u,y+_,M+x).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),sg.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(sg)}intersectsSprite(e){return sg.center.set(0,0,0),sg.radius=.7071067811865476,sg.applyMatrix4(e.matrixWorld),this.intersectsSphere(sg)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Lx.x=r.normal.x>0?e.max.x:e.min.x,Lx.y=r.normal.y>0?e.max.y:e.min.y,Lx.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Lx)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function JJ(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function kRe(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),i.get(l)},remove:function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=i.get(l);u&&(n.deleteBuffer(u.buffer),i.delete(l))},update:function c(l,u){if(l.isGLBufferAttribute){const p=i.get(l);return void((!p||p.version<l.version)&&i.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version}))}l.isInterleavedBufferAttribute&&(l=l.data);const f=i.get(l);void 0===f?i.set(l,function r(l,u){const f=l.array,p=l.usage,g=n.createBuffer();let _;if(n.bindBuffer(u,g),n.bufferData(u,f,p),l.onUploadCallback(),f instanceof Float32Array)_=5126;else if(f instanceof Uint16Array)if(l.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");_=5131}else _=5123;else if(f instanceof Int16Array)_=5122;else if(f instanceof Uint32Array)_=5125;else if(f instanceof Int32Array)_=5124;else if(f instanceof Int8Array)_=5120;else if(f instanceof Uint8Array)_=5121;else{if(!(f instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);_=5121}return{buffer:g,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version}}(l,u)):f.version<l.version&&(function s(l,u,f){const p=u.array,g=u.updateRange;n.bindBuffer(f,l),-1===g.count?n.bufferSubData(f,0,p):(t?n.bufferSubData(f,g.offset*p.BYTES_PER_ELEMENT,p,g.offset,g.count):n.bufferSubData(f,g.offset*p.BYTES_PER_ELEMENT,p.subarray(g.offset,g.offset+g.count)),g.count=-1)}(f.buffer,l,u),f.version=l.version)}}}class g3 extends Ar{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,f=e/a,p=t/c,g=[],_=[],y=[],w=[];for(let C=0;C<u;C++){const x=C*p-o;for(let M=0;M<l;M++)_.push(M*f-s,-x,0),y.push(0,0,1),w.push(M/a),w.push(1-C/c)}for(let C=0;C<c;C++)for(let x=0;x<a;x++){const T=x+l*(C+1),I=x+1+l*(C+1),F=x+1+l*C;g.push(x+l*C,T,F),g.push(T,I,F)}this.setIndex(g),this.setAttribute("position",new ai(_,3)),this.setAttribute("normal",new ai(y,3)),this.setAttribute("uv",new ai(w,2))}static fromJSON(e){return new g3(e.width,e.height,e.widthSegments,e.heightSegments)}}const Ms={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Vn={common:{diffuse:{value:new Dn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new p3},uv2Transform:{value:new p3},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Qt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Dn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Dn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new p3}},sprite:{diffuse:{value:new Dn(16777215)},opacity:{value:1},center:{value:new Qt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new p3}}},V0={basic:{uniforms:J2([Vn.common,Vn.specularmap,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.fog]),vertexShader:Ms.meshbasic_vert,fragmentShader:Ms.meshbasic_frag},lambert:{uniforms:J2([Vn.common,Vn.specularmap,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.fog,Vn.lights,{emissive:{value:new Dn(0)}}]),vertexShader:Ms.meshlambert_vert,fragmentShader:Ms.meshlambert_frag},phong:{uniforms:J2([Vn.common,Vn.specularmap,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.fog,Vn.lights,{emissive:{value:new Dn(0)},specular:{value:new Dn(1118481)},shininess:{value:30}}]),vertexShader:Ms.meshphong_vert,fragmentShader:Ms.meshphong_frag},standard:{uniforms:J2([Vn.common,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.roughnessmap,Vn.metalnessmap,Vn.fog,Vn.lights,{emissive:{value:new Dn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ms.meshphysical_vert,fragmentShader:Ms.meshphysical_frag},toon:{uniforms:J2([Vn.common,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.gradientmap,Vn.fog,Vn.lights,{emissive:{value:new Dn(0)}}]),vertexShader:Ms.meshtoon_vert,fragmentShader:Ms.meshtoon_frag},matcap:{uniforms:J2([Vn.common,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.fog,{matcap:{value:null}}]),vertexShader:Ms.meshmatcap_vert,fragmentShader:Ms.meshmatcap_frag},points:{uniforms:J2([Vn.points,Vn.fog]),vertexShader:Ms.points_vert,fragmentShader:Ms.points_frag},dashed:{uniforms:J2([Vn.common,Vn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ms.linedashed_vert,fragmentShader:Ms.linedashed_frag},depth:{uniforms:J2([Vn.common,Vn.displacementmap]),vertexShader:Ms.depth_vert,fragmentShader:Ms.depth_frag},normal:{uniforms:J2([Vn.common,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,{opacity:{value:1}}]),vertexShader:Ms.meshnormal_vert,fragmentShader:Ms.meshnormal_frag},sprite:{uniforms:J2([Vn.sprite,Vn.fog]),vertexShader:Ms.sprite_vert,fragmentShader:Ms.sprite_frag},background:{uniforms:{uvTransform:{value:new p3},t2D:{value:null}},vertexShader:Ms.background_vert,fragmentShader:Ms.background_frag},cube:{uniforms:J2([Vn.envmap,{opacity:{value:1}}]),vertexShader:Ms.cube_vert,fragmentShader:Ms.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ms.equirect_vert,fragmentShader:Ms.equirect_frag},distanceRGBA:{uniforms:J2([Vn.common,Vn.displacementmap,{referencePosition:{value:new ge},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ms.distanceRGBA_vert,fragmentShader:Ms.distanceRGBA_frag},shadow:{uniforms:J2([Vn.lights,Vn.fog,{color:{value:new Dn(0)},opacity:{value:1}}]),vertexShader:Ms.shadow_vert,fragmentShader:Ms.shadow_frag}};function Fke(n,e,t,i,r,s){const o=new Dn(0);let c,l,a=!0===r?0:1,u=null,f=0,p=null;function _(y,w){t.buffers.color.setClear(y.r,y.g,y.b,w,s)}return{getClearColor:function(){return o},setClearColor:function(y,w=1){o.set(y),a=w,_(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(y){a=y,_(o,a)},render:function g(y,w){let C=!1,x=!0===w.isScene?w.background:null;x&&x.isTexture&&(x=e.get(x));const M=n.xr,T=M.getSession&&M.getSession();T&&"additive"===T.environmentBlendMode&&(x=null),null===x?_(o,a):x&&x.isColor&&(_(x,1),C=!0),(n.autoClear||C)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),x&&(x.isCubeTexture||306===x.mapping)?(void 0===l&&(l=new eo(new N0(1,1,1),new B2({name:"BackgroundCubeMaterial",uniforms:ng(V0.cube.uniforms),vertexShader:V0.cube.vertexShader,fragmentShader:V0.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(I,F,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=x,l.material.uniforms.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,(u!==x||f!==x.version||p!==n.toneMapping)&&(l.material.needsUpdate=!0,u=x,f=x.version,p=n.toneMapping),l.layers.enableAll(),y.unshift(l,l.geometry,l.material,0,0,null)):x&&x.isTexture&&(void 0===c&&(c=new eo(new g3(2,2),new B2({name:"BackgroundMaterial",uniforms:ng(V0.background.uniforms),vertexShader:V0.background.vertexShader,fragmentShader:V0.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=x,!0===x.matrixAutoUpdate&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(u!==x||f!==x.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,u=x,f=x.version,p=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}}}function kke(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},c=w(null);let l=c,u=!1;function g(Q){return i.isWebGL2?n.bindVertexArray(Q):s.bindVertexArrayOES(Q)}function _(Q){return i.isWebGL2?n.deleteVertexArray(Q):s.deleteVertexArrayOES(Q)}function w(Q){const he=[],K=[],ae=[];for(let fe=0;fe<r;fe++)he[fe]=0,K[fe]=0,ae[fe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:he,enabledAttributes:K,attributeDivisors:ae,object:Q,attributes:{},index:null}}function M(){const Q=l.newAttributes;for(let he=0,K=Q.length;he<K;he++)Q[he]=0}function T(Q){I(Q,0)}function I(Q,he){const ae=l.enabledAttributes,fe=l.attributeDivisors;l.newAttributes[Q]=1,0===ae[Q]&&(n.enableVertexAttribArray(Q),ae[Q]=1),fe[Q]!==he&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Q,he),fe[Q]=he)}function F(){const Q=l.newAttributes,he=l.enabledAttributes;for(let K=0,ae=he.length;K<ae;K++)he[K]!==Q[K]&&(n.disableVertexAttribArray(K),he[K]=0)}function P(Q,he,K,ae,fe,de){!0!==i.isWebGL2||5124!==K&&5125!==K?n.vertexAttribPointer(Q,he,K,ae,fe,de):n.vertexAttribIPointer(Q,he,K,fe,de)}function Le(){me(),u=!0,l!==c&&(l=c,g(l.object))}function me(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function f(Q,he,K,ae,fe){let de=!1;if(o){const ke=function y(Q,he,K){const ae=!0===K.wireframe;let fe=a[Q.id];void 0===fe&&(fe={},a[Q.id]=fe);let de=fe[he.id];void 0===de&&(de={},fe[he.id]=de);let ke=de[ae];return void 0===ke&&(ke=w(function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),de[ae]=ke),ke}(ae,K,he);l!==ke&&(l=ke,g(l.object)),de=function C(Q,he,K,ae){const fe=l.attributes,de=he.attributes;let ke=0;const et=K.getAttributes();for(const Fe in et)if(et[Fe].location>=0){const ut=fe[Fe];let It=de[Fe];if(void 0===It&&("instanceMatrix"===Fe&&Q.instanceMatrix&&(It=Q.instanceMatrix),"instanceColor"===Fe&&Q.instanceColor&&(It=Q.instanceColor)),void 0===ut||ut.attribute!==It||It&&ut.data!==It.data)return!0;ke++}return l.attributesNum!==ke||l.index!==ae}(Q,ae,K,fe),de&&function x(Q,he,K,ae){const fe={},de=he.attributes;let ke=0;const et=K.getAttributes();for(const Fe in et)if(et[Fe].location>=0){let ut=de[Fe];void 0===ut&&("instanceMatrix"===Fe&&Q.instanceMatrix&&(ut=Q.instanceMatrix),"instanceColor"===Fe&&Q.instanceColor&&(ut=Q.instanceColor));const It={};It.attribute=ut,ut&&ut.data&&(It.data=ut.data),fe[Fe]=It,ke++}l.attributes=fe,l.attributesNum=ke,l.index=ae}(Q,ae,K,fe)}else{const ke=!0===he.wireframe;(l.geometry!==ae.id||l.program!==K.id||l.wireframe!==ke)&&(l.geometry=ae.id,l.program=K.id,l.wireframe=ke,de=!0)}null!==fe&&t.update(fe,34963),(de||u)&&(u=!1,function R(Q,he,K,ae){if(!1===i.isWebGL2&&(Q.isInstancedMesh||ae.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;M();const fe=ae.attributes,de=K.getAttributes(),ke=he.defaultAttributeValues;for(const et in de){const Fe=de[et];if(Fe.location>=0){let wt=fe[et];if(void 0===wt&&("instanceMatrix"===et&&Q.instanceMatrix&&(wt=Q.instanceMatrix),"instanceColor"===et&&Q.instanceColor&&(wt=Q.instanceColor)),void 0!==wt){const ut=wt.normalized,It=wt.itemSize,xt=t.get(wt);if(void 0===xt)continue;const Zt=xt.buffer,an=xt.type,Sn=xt.bytesPerElement;if(wt.isInterleavedBufferAttribute){const cn=wt.data,Ti=cn.stride,Ot=wt.offset;if(cn.isInstancedInterleavedBuffer){for(let Rt=0;Rt<Fe.locationSize;Rt++)I(Fe.location+Rt,cn.meshPerAttribute);!0!==Q.isInstancedMesh&&void 0===ae._maxInstanceCount&&(ae._maxInstanceCount=cn.meshPerAttribute*cn.count)}else for(let Rt=0;Rt<Fe.locationSize;Rt++)T(Fe.location+Rt);n.bindBuffer(34962,Zt);for(let Rt=0;Rt<Fe.locationSize;Rt++)P(Fe.location+Rt,It/Fe.locationSize,an,ut,Ti*Sn,(Ot+It/Fe.locationSize*Rt)*Sn)}else{if(wt.isInstancedBufferAttribute){for(let cn=0;cn<Fe.locationSize;cn++)I(Fe.location+cn,wt.meshPerAttribute);!0!==Q.isInstancedMesh&&void 0===ae._maxInstanceCount&&(ae._maxInstanceCount=wt.meshPerAttribute*wt.count)}else for(let cn=0;cn<Fe.locationSize;cn++)T(Fe.location+cn);n.bindBuffer(34962,Zt);for(let cn=0;cn<Fe.locationSize;cn++)P(Fe.location+cn,It/Fe.locationSize,an,ut,It*Sn,It/Fe.locationSize*cn*Sn)}}else if(void 0!==ke){const ut=ke[et];if(void 0!==ut)switch(ut.length){case 2:n.vertexAttrib2fv(Fe.location,ut);break;case 3:n.vertexAttrib3fv(Fe.location,ut);break;case 4:n.vertexAttrib4fv(Fe.location,ut);break;default:n.vertexAttrib1fv(Fe.location,ut)}}}}F()}(Q,he,K,ae),null!==fe&&n.bindBuffer(34963,t.get(fe).buffer))},reset:Le,resetDefaultState:me,dispose:function k(){Le();for(const Q in a){const he=a[Q];for(const K in he){const ae=he[K];for(const fe in ae)_(ae[fe].object),delete ae[fe];delete he[K]}delete a[Q]}},releaseStatesOfGeometry:function W(Q){if(void 0===a[Q.id])return;const he=a[Q.id];for(const K in he){const ae=he[K];for(const fe in ae)_(ae[fe].object),delete ae[fe];delete he[K]}delete a[Q.id]},releaseStatesOfProgram:function re(Q){for(const he in a){const K=a[he];if(void 0===K[Q.id])continue;const ae=K[Q.id];for(const fe in ae)_(ae[fe].object),delete ae[fe];delete K[Q.id]}},initAttributes:M,enableAttribute:T,disableUnusedAttributes:F}}function Pke(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(l){s=l},this.render=function a(l,u){n.drawArrays(s,l,u),t.update(u,s,1)},this.renderInstances=function c(l,u,f){if(0===f)return;let p,g;if(r)p=n,g="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",null===p)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");p[g](s,l,u,f),t.update(u,s,f)}}function Hke(n,e,t){let i;function s(P){if("highp"===P){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";P="mediump"}return"mediump"===P&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const l=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,f=n.getParameter(34930),p=n.getParameter(35660),g=n.getParameter(3379),_=n.getParameter(34076),y=n.getParameter(34921),w=n.getParameter(36347),C=n.getParameter(36348),x=n.getParameter(36349),M=p>0,T=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const P=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:p,maxTextureSize:g,maxCubemapSize:_,maxAttributes:y,maxVertexUniforms:w,maxVaryings:C,maxFragmentUniforms:x,vertexTextures:M,floatFragmentTextures:T,floatVertexTextures:M&&T,maxSamples:o?n.getParameter(36183):0}}function zke(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Nu,a=new p3,c={value:null,needsUpdate:!1};function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,p,g,_){const y=null!==f?f.length:0;let w=null;if(0!==y){if(w=c.value,!0!==_||null===w){const C=g+4*y,x=p.matrixWorldInverse;a.getNormalMatrix(x),(null===w||w.length<C)&&(w=new Float32Array(C));for(let M=0,T=g;M!==y;++M,T+=4)o.copy(f[M]).applyMatrix4(x,a),o.normal.toArray(w,T),w[T+3]=o.constant}c.value=w,c.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,w}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p,g){const _=0!==f.length||p||0!==i||r;return r=p,t=u(f,g,0),i=f.length,_},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,l()},this.setState=function(f,p,g){const _=f.clippingPlanes,y=f.clipIntersection,w=f.clipShadows,C=n.get(f);if(!r||null===_||0===_.length||s&&!w)s?u(null):l();else{const x=s?0:i,M=4*x;let T=C.clippingState||null;c.value=T,T=u(_,p,M,g);for(let I=0;I!==M;++I)T[I]=t[I];C.clippingState=T,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=x}}}function Oke(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const c=o.image;if(c&&c.height>0){const l=new BRe(c.height/2);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",r),t(l.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}V0.physical={uniforms:J2([V0.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Qt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Dn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Qt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Dn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Dn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ms.meshphysical_vert,fragmentShader:Ms.meshphysical_frag};class o5 extends NF{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,c=r-t;if(null!==this.view&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const eee=[.125,.215,.35,.446,.526,.582],GF=new o5,tee=new Dn;let QF=null;const c5=(1+Math.sqrt(5))/2,ag=1/c5,nee=[new ge(1,1,1),new ge(-1,1,1),new ge(1,1,-1),new ge(-1,1,-1),new ge(0,c5,ag),new ge(0,c5,-ag),new ge(ag,0,c5),new ge(-ag,0,c5),new ge(c5,ag,0),new ge(-c5,ag,0)];class WF{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){QF=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=see(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=ree(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(QF),e.scissorTest=!1,Dx(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),QF=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:$a,minFilter:$a,generateMipmaps:!1,type:O0,format:Fu,encoding:$h,depthBuffer:!1},r=iee(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=iee(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Nke(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+eee.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let c=1/a;o>n-4?c=eee[o-n+4-1]:0===o&&(c=0),i.push(c);const l=1/(a-2),u=-l,f=1+l,p=[u,u,f,u,f,f,u,u,f,f,u,f],g=6,_=6,y=3,w=2,C=1,x=new Float32Array(y*_*g),M=new Float32Array(w*_*g),T=new Float32Array(C*_*g);for(let F=0;F<g;F++){const P=F%3*2/3-1,R=F>2?0:-1;x.set([P,R,0,P+2/3,R,0,P+2/3,R+1,0,P,R,0,P+2/3,R+1,0,P,R+1,0],y*_*F),M.set(p,w*_*F),T.set([F,F,F,F,F,F],C*_*F)}const I=new Ar;I.setAttribute("position",new qa(x,y)),I.setAttribute("uv",new qa(M,w)),I.setAttribute("faceIndex",new qa(T,C)),e.push(I),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function Vke(n,e,t){const i=new Float32Array(20),r=new ge(0,1,0);return new B2({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new eo(this._lodPlanes[0],e);this._renderer.compile(t,GF)}_sceneToCubeUV(e,t,i,r){const a=new Gc(90,1,t,i),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,p=u.toneMapping;u.getClearColor(tee),u.toneMapping=0,u.autoClear=!1;const g=new Rl({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),_=new eo(new N0,g);let y=!1;const w=e.background;w?w.isColor&&(g.color.copy(w),e.background=null,y=!0):(g.color.copy(tee),y=!0);for(let C=0;C<6;C++){const x=C%3;0===x?(a.up.set(0,c[C],0),a.lookAt(l[C],0,0)):1===x?(a.up.set(0,0,c[C]),a.lookAt(0,l[C],0)):(a.up.set(0,c[C],0),a.lookAt(0,0,l[C]));const M=this._cubeSize;Dx(r,x*M,C>2?M:0,M,M),u.setRenderTarget(r),y&&u.render(_,a),u.render(e,a)}_.geometry.dispose(),_.material.dispose(),u.toneMapping=p,u.autoClear=f,e.background=w}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=see()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=ree());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new eo(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const c=this._cubeSize;Dx(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,GF)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,nee[(r-1)%nee.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const c=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const f=new eo(this._lodPlanes[r],l),p=l.uniforms,g=this._sizeLods[i]-1,_=isFinite(s)?Math.PI/(2*g):2*Math.PI/39,y=s/_,w=isFinite(s)?1+Math.floor(3*y):20;w>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to 20`);const C=[];let x=0;for(let P=0;P<20;++P){const R=P/y,k=Math.exp(-R*R/2);C.push(k),0===P?x+=k:P<w&&(x+=2*k)}for(let P=0;P<C.length;P++)C[P]=C[P]/x;p.envMap.value=e.texture,p.samples.value=w,p.weights.value=C,p.latitudinal.value="latitudinal"===o,a&&(p.poleAxis.value=a);const{_lodMax:M}=this;p.dTheta.value=_,p.mipInt.value=M-i;const T=this._sizeLods[r];Dx(t,3*T*(r>M-4?r-M+4:0),4*(this._cubeSize-T),3*T,2*T),c.setRenderTarget(t),c.render(f,GF)}}function iee(n,e,t){const i=new z4(n,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Dx(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function ree(){return new B2({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function see(){return new B2({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Uke(n){let e=new WeakMap,t=null;function s(a){const c=a.target;c.removeEventListener("dispose",s);const l=e.get(c);void 0!==l&&(e.delete(c),l.dispose())}return{get:function i(a){if(a&&a.isTexture){const c=a.mapping,l=303===c||304===c,u=301===c||302===c;if(l||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let f=e.get(a);return null===t&&(t=new WF(n)),f=l?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}if(e.has(a))return e.get(a).texture;{const f=a.image;if(l&&f&&f.height>0||u&&f&&function r(a){let c=0;for(let u=0;u<6;u++)void 0!==a[u]&&c++;return 6===c}(f)){null===t&&(t=new WF(n));const p=l?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Gke(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Qke(n,e,t,i){const r={},s=new WeakMap;function o(f){const p=f.target;null!==p.index&&e.remove(p.index);for(const _ in p.attributes)e.remove(p.attributes[_]);p.removeEventListener("dispose",o),delete r[p.id];const g=s.get(p);g&&(e.remove(g),s.delete(p)),i.releaseStatesOfGeometry(p),!0===p.isInstancedBufferGeometry&&delete p._maxInstanceCount,t.memory.geometries--}function l(f){const p=[],g=f.index,_=f.attributes.position;let y=0;if(null!==g){const x=g.array;y=g.version;for(let M=0,T=x.length;M<T;M+=3){const I=x[M+0],F=x[M+1],P=x[M+2];p.push(I,F,F,P,P,I)}}else{y=_.version;for(let M=0,T=_.array.length/3-1;M<T;M+=3){const I=M+0,F=M+1,P=M+2;p.push(I,F,F,P,P,I)}}const w=new(PJ(p)?YJ:XJ)(p,1);w.version=y;const C=s.get(f);C&&e.remove(C),s.set(f,w)}return{get:function a(f,p){return!0===r[p.id]||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p},update:function c(f){const p=f.attributes;for(const _ in p)e.update(p[_],34962);const g=f.morphAttributes;for(const _ in g){const y=g[_];for(let w=0,C=y.length;w<C;w++)e.update(y[w],34962)}},getWireframeAttribute:function u(f){const p=s.get(f);if(p){const g=f.index;null!==g&&p.version<g.version&&l(f)}else l(f);return s.get(f)}}}function Wke(n,e,t,i){const r=i.isWebGL2;let s,a,c;this.setMode=function o(p){s=p},this.setIndex=function l(p){a=p.type,c=p.bytesPerElement},this.render=function u(p,g){n.drawElements(s,g,a,p*c),t.update(g,s,1)},this.renderInstances=function f(p,g,_){if(0===_)return;let y,w;if(r)y=n,w="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",null===y)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");y[w](s,g,a,p*c,_),t.update(g,s,_)}}function jke(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function $ke(n,e){return n[0]-e[0]}function qke(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Kke(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new xo,a=[];for(let l=0;l<8;l++)a[l]=[l,0];return{update:function c(l,u,f,p){const g=l.morphTargetInfluences;if(!0===e.isWebGL2){const _=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=void 0!==_?_.length:0;let w=s.get(u);if(void 0===w||w.count!==y){let he=function(){me.dispose(),s.delete(u),u.removeEventListener("dispose",he)};void 0!==w&&w.texture.dispose();const M=void 0!==u.morphAttributes.position,T=void 0!==u.morphAttributes.normal,I=void 0!==u.morphAttributes.color,F=u.morphAttributes.position||[],P=u.morphAttributes.normal||[],R=u.morphAttributes.color||[];let k=0;!0===M&&(k=1),!0===T&&(k=2),!0===I&&(k=3);let W=u.attributes.position.count*k,re=1;W>e.maxTextureSize&&(re=Math.ceil(W/e.maxTextureSize),W=e.maxTextureSize);const Le=new Float32Array(W*re*4*y),me=new wF(Le,W,re,y);me.type=P4,me.needsUpdate=!0;const Q=4*k;for(let K=0;K<y;K++){const ae=F[K],fe=P[K],de=R[K],ke=W*re*4*K;for(let et=0;et<ae.count;et++){const Fe=et*Q;!0===M&&(o.fromBufferAttribute(ae,et),Le[ke+Fe+0]=o.x,Le[ke+Fe+1]=o.y,Le[ke+Fe+2]=o.z,Le[ke+Fe+3]=0),!0===T&&(o.fromBufferAttribute(fe,et),Le[ke+Fe+4]=o.x,Le[ke+Fe+5]=o.y,Le[ke+Fe+6]=o.z,Le[ke+Fe+7]=0),!0===I&&(o.fromBufferAttribute(de,et),Le[ke+Fe+8]=o.x,Le[ke+Fe+9]=o.y,Le[ke+Fe+10]=o.z,Le[ke+Fe+11]=4===de.itemSize?o.w:1)}}w={count:y,texture:me,size:new Qt(W,re)},s.set(u,w),u.addEventListener("dispose",he)}let C=0;for(let M=0;M<g.length;M++)C+=g[M];const x=u.morphTargetsRelative?1:1-C;p.getUniforms().setValue(n,"morphTargetBaseInfluence",x),p.getUniforms().setValue(n,"morphTargetInfluences",g),p.getUniforms().setValue(n,"morphTargetsTexture",w.texture,t),p.getUniforms().setValue(n,"morphTargetsTextureSize",w.size)}else{const _=void 0===g?0:g.length;let y=i[u.id];if(void 0===y||y.length!==_){y=[];for(let T=0;T<_;T++)y[T]=[T,0];i[u.id]=y}for(let T=0;T<_;T++){const I=y[T];I[0]=T,I[1]=g[T]}y.sort(qke);for(let T=0;T<8;T++)T<_&&y[T][1]?(a[T][0]=y[T][0],a[T][1]=y[T][1]):(a[T][0]=Number.MAX_SAFE_INTEGER,a[T][1]=0);a.sort($ke);const w=u.morphAttributes.position,C=u.morphAttributes.normal;let x=0;for(let T=0;T<8;T++){const I=a[T],F=I[0],P=I[1];F!==Number.MAX_SAFE_INTEGER&&P?(w&&u.getAttribute("morphTarget"+T)!==w[F]&&u.setAttribute("morphTarget"+T,w[F]),C&&u.getAttribute("morphNormal"+T)!==C[F]&&u.setAttribute("morphNormal"+T,C[F]),r[T]=P,x+=P):(w&&!0===u.hasAttribute("morphTarget"+T)&&u.deleteAttribute("morphTarget"+T),C&&!0===u.hasAttribute("morphNormal"+T)&&u.deleteAttribute("morphNormal"+T),r[T]=0)}const M=u.morphTargetsRelative?1:1-x;p.getUniforms().setValue(n,"morphTargetBaseInfluence",M),p.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function Xke(n,e,t,i){let r=new WeakMap;function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),null!==l.instanceColor&&t.remove(l.instanceColor)}return{update:function s(c){const l=i.render.frame,f=e.get(c,c.geometry);return r.get(f)!==l&&(e.update(f),r.set(f,l)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),t.update(c.instanceMatrix,34962),null!==c.instanceColor&&t.update(c.instanceColor,34962)),f},dispose:function o(){r=new WeakMap}}}const oee=new H4,aee=new wF,cee=new OJ,lee=new Tx,uee=[],hee=[],fee=new Float32Array(16),dee=new Float32Array(9),pee=new Float32Array(4);function cg(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=uee[r];if(void 0===s&&(s=new Float32Array(r),uee[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Fl(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function kl(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Ix(n,e){let t=hee[e];void 0===t&&(t=new Int32Array(e),hee[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Yke(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Zke(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Fl(t,e))return;n.uniform2fv(this.addr,e),kl(t,e)}}function Jke(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Fl(t,e))return;n.uniform3fv(this.addr,e),kl(t,e)}}function ePe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Fl(t,e))return;n.uniform4fv(this.addr,e),kl(t,e)}}function tPe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Fl(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),kl(t,e)}else{if(Fl(t,i))return;pee.set(i),n.uniformMatrix2fv(this.addr,!1,pee),kl(t,i)}}function nPe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Fl(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),kl(t,e)}else{if(Fl(t,i))return;dee.set(i),n.uniformMatrix3fv(this.addr,!1,dee),kl(t,i)}}function iPe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Fl(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),kl(t,e)}else{if(Fl(t,i))return;fee.set(i),n.uniformMatrix4fv(this.addr,!1,fee),kl(t,i)}}function rPe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function sPe(n,e){const t=this.cache;Fl(t,e)||(n.uniform2iv(this.addr,e),kl(t,e))}function oPe(n,e){const t=this.cache;Fl(t,e)||(n.uniform3iv(this.addr,e),kl(t,e))}function aPe(n,e){const t=this.cache;Fl(t,e)||(n.uniform4iv(this.addr,e),kl(t,e))}function cPe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function lPe(n,e){const t=this.cache;Fl(t,e)||(n.uniform2uiv(this.addr,e),kl(t,e))}function uPe(n,e){const t=this.cache;Fl(t,e)||(n.uniform3uiv(this.addr,e),kl(t,e))}function hPe(n,e){const t=this.cache;Fl(t,e)||(n.uniform4uiv(this.addr,e),kl(t,e))}function fPe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||oee,r)}function dPe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||cee,r)}function pPe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||lee,r)}function gPe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||aee,r)}function APe(n,e){n.uniform1fv(this.addr,e)}function vPe(n,e){const t=cg(e,this.size,2);n.uniform2fv(this.addr,t)}function _Pe(n,e){const t=cg(e,this.size,3);n.uniform3fv(this.addr,t)}function yPe(n,e){const t=cg(e,this.size,4);n.uniform4fv(this.addr,t)}function wPe(n,e){const t=cg(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function CPe(n,e){const t=cg(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function bPe(n,e){const t=cg(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function xPe(n,e){n.uniform1iv(this.addr,e)}function MPe(n,e){n.uniform2iv(this.addr,e)}function SPe(n,e){n.uniform3iv(this.addr,e)}function EPe(n,e){n.uniform4iv(this.addr,e)}function TPe(n,e){n.uniform1uiv(this.addr,e)}function LPe(n,e){n.uniform2uiv(this.addr,e)}function DPe(n,e){n.uniform3uiv(this.addr,e)}function IPe(n,e){n.uniform4uiv(this.addr,e)}function BPe(n,e,t){const i=e.length,r=Ix(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2D(e[s]||oee,r[s])}function RPe(n,e,t){const i=e.length,r=Ix(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||cee,r[s])}function FPe(n,e,t){const i=e.length,r=Ix(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTextureCube(e[s]||lee,r[s])}function kPe(n,e,t){const i=e.length,r=Ix(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||aee,r[s])}class HPe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function mPe(n){switch(n){case 5126:return Yke;case 35664:return Zke;case 35665:return Jke;case 35666:return ePe;case 35674:return tPe;case 35675:return nPe;case 35676:return iPe;case 5124:case 35670:return rPe;case 35667:case 35671:return sPe;case 35668:case 35672:return oPe;case 35669:case 35673:return aPe;case 5125:return cPe;case 36294:return lPe;case 36295:return uPe;case 36296:return hPe;case 35678:case 36198:case 36298:case 36306:case 35682:return fPe;case 35679:case 36299:case 36307:return dPe;case 35680:case 36300:case 36308:case 36293:return pPe;case 36289:case 36303:case 36311:case 36292:return gPe}}(t.type)}}class zPe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function PPe(n){switch(n){case 5126:return APe;case 35664:return vPe;case 35665:return _Pe;case 35666:return yPe;case 35674:return wPe;case 35675:return CPe;case 35676:return bPe;case 5124:case 35670:return xPe;case 35667:case 35671:return MPe;case 35668:case 35672:return SPe;case 35669:case 35673:return EPe;case 5125:return TPe;case 36294:return LPe;case 36295:return DPe;case 36296:return IPe;case 35678:case 36198:case 36298:case 36306:case 35682:return BPe;case 35679:case 36299:case 36307:return RPe;case 35680:case 36300:case 36308:case 36293:return FPe;case 36289:case 36303:case 36311:case 36292:return kPe}}(t.type)}}class OPe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const $F=/(\w+)(\])?(\[|\.)?/g;function gee(n,e){n.seq.push(e),n.map[e.id]=e}function NPe(n,e,t){const i=n.name,r=i.length;for($F.lastIndex=0;;){const s=$F.exec(i),o=$F.lastIndex;let a=s[1];const l=s[3];if("]"===s[2]&&(a|=0),void 0===l||"["===l&&o+2===r){gee(t,void 0===l?new HPe(a,n,e):new zPe(a,n,e));break}{let f=t.map[a];void 0===f&&(f=new OPe(a),gee(t,f)),t=f}}}class Bx{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);NPe(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=i[a.id];!1!==c.needsUpdate&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function mee(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let VPe=0;function Aee(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function UPe(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function QPe(n,e){const t=function GPe(n){switch(n){case $h:return["Linear","( value )"];case Ho:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function WPe(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function iv(n){return""!==n}function vee(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function _ee(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const KPe=/^[ \t]*#include +<([\w\d./]+)>/gm;function qF(n){return n.replace(KPe,XPe)}function XPe(n,e){const t=Ms[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return qF(t)}const YPe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function yee(n){return n.replace(YPe,ZPe)}function ZPe(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function wee(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function rHe(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=function JPe(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),l=function eHe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function tHe(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),f=function nHe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),p=function iHe(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),g=t.isWebGL2?"":function jPe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(iv).join("\n")}(t),_=function $Pe(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),y=r.createProgram();let w,C,x=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(w=[_].filter(iv).join("\n"),w.length>0&&(w+="\n"),C=[g,_].filter(iv).join("\n"),C.length>0&&(C+="\n")):(w=[wee(t),"#define SHADER_NAME "+t.shaderName,_,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(iv).join("\n"),C=[g,wee(t),"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Ms.tonemapping_pars_fragment:"",0!==t.toneMapping?WPe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ms.encodings_pars_fragment,QPe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(iv).join("\n")),o=qF(o),o=vee(o,t),o=_ee(o,t),a=qF(a),a=vee(a,t),a=_ee(a,t),o=yee(o),a=yee(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(x="#version 300 es\n",w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+w,C=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+C);const T=x+C+a,I=mee(r,35633,x+w+o),F=mee(r,35632,T);if(r.attachShader(y,I),r.attachShader(y,F),void 0!==t.index0AttributeName?r.bindAttribLocation(y,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),n.debug.checkShaderErrors){const k=r.getProgramInfoLog(y).trim(),W=r.getShaderInfoLog(I).trim(),re=r.getShaderInfoLog(F).trim();let Le=!0,me=!0;if(!1===r.getProgramParameter(y,35714)){Le=!1;const Q=Aee(r,I,"vertex"),he=Aee(r,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,35715)+"\n\nProgram Info Log: "+k+"\n"+Q+"\n"+he)}else""!==k?console.warn("THREE.WebGLProgram: Program Info Log:",k):(""===W||""===re)&&(me=!1);me&&(this.diagnostics={runnable:Le,programLog:k,vertexShader:{log:W,prefix:w},fragmentShader:{log:re,prefix:C}})}let P,R;return r.deleteShader(I),r.deleteShader(F),this.getUniforms=function(){return void 0===P&&(P=new Bx(r,y)),P},this.getAttributes=function(){return void 0===R&&(R=function qPe(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,y)),R},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=t.shaderName,this.id=VPe++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=I,this.fragmentShader=F,this}let sHe=0;class oHe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new aHe(e),t.set(e,i)),i}}class aHe{constructor(e){this.id=sHe++,this.code=e,this.usedTimes=0}}function cHe(n,e,t,i,r,s,o){const a=new LF,c=new oHe,l=[],u=r.isWebGL2,f=r.logarithmicDepthBuffer,p=r.vertexTextures;let g=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function y(R,k,W,re,Le){const me=re.fog,Q=Le.geometry,K=(R.isMeshStandardMaterial?t:e).get(R.envMap||(R.isMeshStandardMaterial?re.environment:null)),ae=K&&306===K.mapping?K.image.height:null,fe=_[R.type];null!==R.precision&&(g=r.getMaxPrecision(R.precision),g!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",g,"instead."));const de=Q.morphAttributes.position||Q.morphAttributes.normal||Q.morphAttributes.color,ke=void 0!==de?de.length:0;let Fe,wt,ut,It,et=0;if(void 0!==Q.morphAttributes.position&&(et=1),void 0!==Q.morphAttributes.normal&&(et=2),void 0!==Q.morphAttributes.color&&(et=3),fe){const Ti=V0[fe];Fe=Ti.vertexShader,wt=Ti.fragmentShader}else Fe=R.vertexShader,wt=R.fragmentShader,c.update(R),ut=c.getVertexShaderID(R),It=c.getFragmentShaderID(R);const xt=n.getRenderTarget(),an=R.clearcoat>0,Sn=R.iridescence>0;return{isWebGL2:u,shaderID:fe,shaderName:R.type,vertexShader:Fe,fragmentShader:wt,defines:R.defines,customVertexShaderID:ut,customFragmentShaderID:It,isRawShaderMaterial:!0===R.isRawShaderMaterial,glslVersion:R.glslVersion,precision:g,instancing:!0===Le.isInstancedMesh,instancingColor:!0===Le.isInstancedMesh&&null!==Le.instanceColor,supportsVertexTextures:p,outputEncoding:null===xt?n.outputEncoding:!0===xt.isXRRenderTarget?xt.texture.encoding:$h,map:!!R.map,matcap:!!R.matcap,envMap:!!K,envMapMode:K&&K.mapping,envMapCubeUVHeight:ae,lightMap:!!R.lightMap,aoMap:!!R.aoMap,emissiveMap:!!R.emissiveMap,bumpMap:!!R.bumpMap,normalMap:!!R.normalMap,objectSpaceNormalMap:1===R.normalMapType,tangentSpaceNormalMap:0===R.normalMapType,decodeVideoTexture:!!R.map&&!0===R.map.isVideoTexture&&R.map.encoding===Ho,clearcoat:an,clearcoatMap:an&&!!R.clearcoatMap,clearcoatRoughnessMap:an&&!!R.clearcoatRoughnessMap,clearcoatNormalMap:an&&!!R.clearcoatNormalMap,iridescence:Sn,iridescenceMap:Sn&&!!R.iridescenceMap,iridescenceThicknessMap:Sn&&!!R.iridescenceThicknessMap,displacementMap:!!R.displacementMap,roughnessMap:!!R.roughnessMap,metalnessMap:!!R.metalnessMap,specularMap:!!R.specularMap,specularIntensityMap:!!R.specularIntensityMap,specularColorMap:!!R.specularColorMap,opaque:!1===R.transparent&&1===R.blending,alphaMap:!!R.alphaMap,alphaTest:R.alphaTest>0,gradientMap:!!R.gradientMap,sheen:R.sheen>0,sheenColorMap:!!R.sheenColorMap,sheenRoughnessMap:!!R.sheenRoughnessMap,transmission:R.transmission>0,transmissionMap:!!R.transmissionMap,thicknessMap:!!R.thicknessMap,combine:R.combine,vertexTangents:!!R.normalMap&&!!Q.attributes.tangent,vertexColors:R.vertexColors,vertexAlphas:!0===R.vertexColors&&!!Q.attributes.color&&4===Q.attributes.color.itemSize,vertexUvs:!!(R.map||R.bumpMap||R.normalMap||R.specularMap||R.alphaMap||R.emissiveMap||R.roughnessMap||R.metalnessMap||R.clearcoatMap||R.clearcoatRoughnessMap||R.clearcoatNormalMap||R.iridescenceMap||R.iridescenceThicknessMap||R.displacementMap||R.transmissionMap||R.thicknessMap||R.specularIntensityMap||R.specularColorMap||R.sheenColorMap||R.sheenRoughnessMap),uvsVertexOnly:!(R.map||R.bumpMap||R.normalMap||R.specularMap||R.alphaMap||R.emissiveMap||R.roughnessMap||R.metalnessMap||R.clearcoatNormalMap||R.iridescenceMap||R.iridescenceThicknessMap||R.transmission>0||R.transmissionMap||R.thicknessMap||R.specularIntensityMap||R.specularColorMap||R.sheen>0||R.sheenColorMap||R.sheenRoughnessMap||!R.displacementMap),fog:!!me,useFog:!0===R.fog,fogExp2:me&&me.isFogExp2,flatShading:!!R.flatShading,sizeAttenuation:R.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===Le.isSkinnedMesh,morphTargets:void 0!==Q.morphAttributes.position,morphNormals:void 0!==Q.morphAttributes.normal,morphColors:void 0!==Q.morphAttributes.color,morphTargetsCount:ke,morphTextureStride:et,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&W.length>0,shadowMapType:n.shadowMap.type,toneMapping:R.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:R.premultipliedAlpha,doubleSided:2===R.side,flipSided:1===R.side,useDepthPacking:!!R.depthPacking,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:R.extensions&&R.extensions.derivatives,extensionFragDepth:R.extensions&&R.extensions.fragDepth,extensionDrawBuffers:R.extensions&&R.extensions.drawBuffers,extensionShaderTextureLOD:R.extensions&&R.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:R.customProgramCacheKey()}},getProgramCacheKey:function w(R){const k=[];if(R.shaderID?k.push(R.shaderID):(k.push(R.customVertexShaderID),k.push(R.customFragmentShaderID)),void 0!==R.defines)for(const W in R.defines)k.push(W),k.push(R.defines[W]);return!1===R.isRawShaderMaterial&&(function C(R,k){R.push(k.precision),R.push(k.outputEncoding),R.push(k.envMapMode),R.push(k.envMapCubeUVHeight),R.push(k.combine),R.push(k.vertexUvs),R.push(k.fogExp2),R.push(k.sizeAttenuation),R.push(k.morphTargetsCount),R.push(k.morphAttributeCount),R.push(k.numDirLights),R.push(k.numPointLights),R.push(k.numSpotLights),R.push(k.numSpotLightMaps),R.push(k.numHemiLights),R.push(k.numRectAreaLights),R.push(k.numDirLightShadows),R.push(k.numPointLightShadows),R.push(k.numSpotLightShadows),R.push(k.numSpotLightShadowsWithMaps),R.push(k.shadowMapType),R.push(k.toneMapping),R.push(k.numClippingPlanes),R.push(k.numClipIntersection),R.push(k.depthPacking)}(k,R),function x(R,k){a.disableAll(),k.isWebGL2&&a.enable(0),k.supportsVertexTextures&&a.enable(1),k.instancing&&a.enable(2),k.instancingColor&&a.enable(3),k.map&&a.enable(4),k.matcap&&a.enable(5),k.envMap&&a.enable(6),k.lightMap&&a.enable(7),k.aoMap&&a.enable(8),k.emissiveMap&&a.enable(9),k.bumpMap&&a.enable(10),k.normalMap&&a.enable(11),k.objectSpaceNormalMap&&a.enable(12),k.tangentSpaceNormalMap&&a.enable(13),k.clearcoat&&a.enable(14),k.clearcoatMap&&a.enable(15),k.clearcoatRoughnessMap&&a.enable(16),k.clearcoatNormalMap&&a.enable(17),k.iridescence&&a.enable(18),k.iridescenceMap&&a.enable(19),k.iridescenceThicknessMap&&a.enable(20),k.displacementMap&&a.enable(21),k.specularMap&&a.enable(22),k.roughnessMap&&a.enable(23),k.metalnessMap&&a.enable(24),k.gradientMap&&a.enable(25),k.alphaMap&&a.enable(26),k.alphaTest&&a.enable(27),k.vertexColors&&a.enable(28),k.vertexAlphas&&a.enable(29),k.vertexUvs&&a.enable(30),k.vertexTangents&&a.enable(31),k.uvsVertexOnly&&a.enable(32),R.push(a.mask),a.disableAll(),k.fog&&a.enable(0),k.useFog&&a.enable(1),k.flatShading&&a.enable(2),k.logarithmicDepthBuffer&&a.enable(3),k.skinning&&a.enable(4),k.morphTargets&&a.enable(5),k.morphNormals&&a.enable(6),k.morphColors&&a.enable(7),k.premultipliedAlpha&&a.enable(8),k.shadowMapEnabled&&a.enable(9),k.physicallyCorrectLights&&a.enable(10),k.doubleSided&&a.enable(11),k.flipSided&&a.enable(12),k.useDepthPacking&&a.enable(13),k.dithering&&a.enable(14),k.specularIntensityMap&&a.enable(15),k.specularColorMap&&a.enable(16),k.transmission&&a.enable(17),k.transmissionMap&&a.enable(18),k.thicknessMap&&a.enable(19),k.sheen&&a.enable(20),k.sheenColorMap&&a.enable(21),k.sheenRoughnessMap&&a.enable(22),k.decodeVideoTexture&&a.enable(23),k.opaque&&a.enable(24),R.push(a.mask)}(k,R),k.push(n.outputEncoding)),k.push(R.customProgramCacheKey),k.join()},getUniforms:function M(R){const k=_[R.type];let W;return W=k?Ud.clone(V0[k].uniforms):R.uniforms,W},acquireProgram:function T(R,k){let W;for(let re=0,Le=l.length;re<Le;re++){const me=l[re];if(me.cacheKey===k){W=me,++W.usedTimes;break}}return void 0===W&&(W=new rHe(n,k,R,s),l.push(W)),W},releaseProgram:function I(R){if(0==--R.usedTimes){const k=l.indexOf(R);l[k]=l[l.length-1],l.pop(),R.destroy()}},releaseShaderCache:function F(R){c.remove(R)},programs:l,dispose:function P(){c.dispose()}}}function lHe(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function uHe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Cee(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function bee(){const n=[];let e=0;const t=[],i=[],r=[];function o(f,p,g,_,y,w){let C=n[e];return void 0===C?(C={id:f.id,object:f,geometry:p,material:g,groupOrder:_,renderOrder:f.renderOrder,z:y,group:w},n[e]=C):(C.id=f.id,C.object=f,C.geometry=p,C.material=g,C.groupOrder=_,C.renderOrder=f.renderOrder,C.z=y,C.group=w),e++,C}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(f,p,g,_,y,w){const C=o(f,p,g,_,y,w);g.transmission>0?i.push(C):!0===g.transparent?r.push(C):t.push(C)},unshift:function c(f,p,g,_,y,w){const C=o(f,p,g,_,y,w);g.transmission>0?i.unshift(C):!0===g.transparent?r.unshift(C):t.unshift(C)},finish:function u(){for(let f=e,p=n.length;f<p;f++){const g=n[f];if(null===g.id)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}},sort:function l(f,p){t.length>1&&t.sort(f||uHe),i.length>1&&i.sort(p||Cee),r.length>1&&r.sort(p||Cee)}}}function hHe(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new bee,n.set(i,[o])):r>=s.length?(o=new bee,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function fHe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ge,color:new Dn};break;case"SpotLight":t={position:new ge,direction:new ge,color:new Dn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ge,color:new Dn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ge,skyColor:new Dn,groundColor:new Dn};break;case"RectAreaLight":t={color:new Dn,position:new ge,halfWidth:new ge,halfHeight:new ge}}return n[e.id]=t,t}}}let pHe=0;function gHe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function mHe(n,e){const t=new fHe,i=function dHe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qt,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new ge);const s=new ge,o=new Ui,a=new Ui;return{setup:function c(u,f){let p=0,g=0,_=0;for(let re=0;re<9;re++)r.probe[re].set(0,0,0);let y=0,w=0,C=0,x=0,M=0,T=0,I=0,F=0,P=0,R=0;u.sort(gHe);const k=!0!==f?Math.PI:1;for(let re=0,Le=u.length;re<Le;re++){const me=u[re],Q=me.color,he=me.intensity,K=me.distance,ae=me.shadow&&me.shadow.map?me.shadow.map.texture:null;if(me.isAmbientLight)p+=Q.r*he*k,g+=Q.g*he*k,_+=Q.b*he*k;else if(me.isLightProbe)for(let fe=0;fe<9;fe++)r.probe[fe].addScaledVector(me.sh.coefficients[fe],he);else if(me.isDirectionalLight){const fe=t.get(me);if(fe.color.copy(me.color).multiplyScalar(me.intensity*k),me.castShadow){const de=me.shadow,ke=i.get(me);ke.shadowBias=de.bias,ke.shadowNormalBias=de.normalBias,ke.shadowRadius=de.radius,ke.shadowMapSize=de.mapSize,r.directionalShadow[y]=ke,r.directionalShadowMap[y]=ae,r.directionalShadowMatrix[y]=me.shadow.matrix,T++}r.directional[y]=fe,y++}else if(me.isSpotLight){const fe=t.get(me);fe.position.setFromMatrixPosition(me.matrixWorld),fe.color.copy(Q).multiplyScalar(he*k),fe.distance=K,fe.coneCos=Math.cos(me.angle),fe.penumbraCos=Math.cos(me.angle*(1-me.penumbra)),fe.decay=me.decay,r.spot[C]=fe;const de=me.shadow;if(me.map&&(r.spotLightMap[P]=me.map,P++,de.updateMatrices(me),me.castShadow&&R++),r.spotLightMatrix[C]=de.matrix,me.castShadow){const ke=i.get(me);ke.shadowBias=de.bias,ke.shadowNormalBias=de.normalBias,ke.shadowRadius=de.radius,ke.shadowMapSize=de.mapSize,r.spotShadow[C]=ke,r.spotShadowMap[C]=ae,F++}C++}else if(me.isRectAreaLight){const fe=t.get(me);fe.color.copy(Q).multiplyScalar(he),fe.halfWidth.set(.5*me.width,0,0),fe.halfHeight.set(0,.5*me.height,0),r.rectArea[x]=fe,x++}else if(me.isPointLight){const fe=t.get(me);if(fe.color.copy(me.color).multiplyScalar(me.intensity*k),fe.distance=me.distance,fe.decay=me.decay,me.castShadow){const de=me.shadow,ke=i.get(me);ke.shadowBias=de.bias,ke.shadowNormalBias=de.normalBias,ke.shadowRadius=de.radius,ke.shadowMapSize=de.mapSize,ke.shadowCameraNear=de.camera.near,ke.shadowCameraFar=de.camera.far,r.pointShadow[w]=ke,r.pointShadowMap[w]=ae,r.pointShadowMatrix[w]=me.shadow.matrix,I++}r.point[w]=fe,w++}else if(me.isHemisphereLight){const fe=t.get(me);fe.skyColor.copy(me.color).multiplyScalar(he*k),fe.groundColor.copy(me.groundColor).multiplyScalar(he*k),r.hemi[M]=fe,M++}}x>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=Vn.LTC_FLOAT_1,r.rectAreaLTC2=Vn.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Vn.LTC_HALF_1,r.rectAreaLTC2=Vn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=g,r.ambient[2]=_;const W=r.hash;(W.directionalLength!==y||W.pointLength!==w||W.spotLength!==C||W.rectAreaLength!==x||W.hemiLength!==M||W.numDirectionalShadows!==T||W.numPointShadows!==I||W.numSpotShadows!==F||W.numSpotMaps!==P)&&(r.directional.length=y,r.spot.length=C,r.rectArea.length=x,r.point.length=w,r.hemi.length=M,r.directionalShadow.length=T,r.directionalShadowMap.length=T,r.pointShadow.length=I,r.pointShadowMap.length=I,r.spotShadow.length=F,r.spotShadowMap.length=F,r.directionalShadowMatrix.length=T,r.pointShadowMatrix.length=I,r.spotLightMatrix.length=F+P-R,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=R,W.directionalLength=y,W.pointLength=w,W.spotLength=C,W.rectAreaLength=x,W.hemiLength=M,W.numDirectionalShadows=T,W.numPointShadows=I,W.numSpotShadows=F,W.numSpotMaps=P,r.version=pHe++)},setupView:function l(u,f){let p=0,g=0,_=0,y=0,w=0;const C=f.matrixWorldInverse;for(let x=0,M=u.length;x<M;x++){const T=u[x];if(T.isDirectionalLight){const I=r.directional[p];I.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(C),p++}else if(T.isSpotLight){const I=r.spot[_];I.position.setFromMatrixPosition(T.matrixWorld),I.position.applyMatrix4(C),I.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(C),_++}else if(T.isRectAreaLight){const I=r.rectArea[y];I.position.setFromMatrixPosition(T.matrixWorld),I.position.applyMatrix4(C),a.identity(),o.copy(T.matrixWorld),o.premultiply(C),a.extractRotation(o),I.halfWidth.set(.5*T.width,0,0),I.halfHeight.set(0,.5*T.height,0),I.halfWidth.applyMatrix4(a),I.halfHeight.applyMatrix4(a),y++}else if(T.isPointLight){const I=r.point[g];I.position.setFromMatrixPosition(T.matrixWorld),I.position.applyMatrix4(C),g++}else if(T.isHemisphereLight){const I=r.hemi[w];I.direction.setFromMatrixPosition(T.matrixWorld),I.direction.transformDirection(C),w++}}},state:r}}function xee(n,e){const t=new mHe(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function c(f){t.setup(i,f)},setupLightsView:function l(f){t.setupView(i,f)},pushLight:function o(f){i.push(f)},pushShadow:function a(f){r.push(f)}}}function AHe(n,e){let t=new WeakMap;return{get:function i(s,o=0){const a=t.get(s);let c;return void 0===a?(c=new xee(n,e),t.set(s,[c])):o>=a.length?(c=new xee(n,e),a.push(c)):c=a[o],c},dispose:function r(){t=new WeakMap}}}class Mee extends Z2{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class See extends Z2{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ge,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function yHe(n,e,t){let i=new UF;const r=new Qt,s=new Qt,o=new xo,a=new Mee({depthPacking:3201}),c=new See,l={},u=t.maxTextureSize,f={0:1,1:0,2:2},p=new B2({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Qt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),g=p.clone();g.defines.HORIZONTAL_PASS=1;const _=new Ar;_.setAttribute("position",new qa(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new eo(_,p),w=this;function C(T,I){const F=e.update(y);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,g.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),null===T.mapPass&&(T.mapPass=new z4(r.x,r.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(I,null,F,p,y,null),g.uniforms.shadow_pass.value=T.mapPass.texture,g.uniforms.resolution.value=T.mapSize,g.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(I,null,F,g,y,null)}function x(T,I,F,P,R,k){let W=null;const re=!0===F.isPointLight?T.customDistanceMaterial:T.customDepthMaterial;if(W=void 0!==re?re:!0===F.isPointLight?c:a,n.localClippingEnabled&&!0===I.clipShadows&&Array.isArray(I.clippingPlanes)&&0!==I.clippingPlanes.length||I.displacementMap&&0!==I.displacementScale||I.alphaMap&&I.alphaTest>0){const Le=W.uuid,me=I.uuid;let Q=l[Le];void 0===Q&&(Q={},l[Le]=Q);let he=Q[me];void 0===he&&(he=W.clone(),Q[me]=he),W=he}return W.visible=I.visible,W.wireframe=I.wireframe,W.side=3===k?null!==I.shadowSide?I.shadowSide:I.side:null!==I.shadowSide?I.shadowSide:f[I.side],W.alphaMap=I.alphaMap,W.alphaTest=I.alphaTest,W.clipShadows=I.clipShadows,W.clippingPlanes=I.clippingPlanes,W.clipIntersection=I.clipIntersection,W.displacementMap=I.displacementMap,W.displacementScale=I.displacementScale,W.displacementBias=I.displacementBias,W.wireframeLinewidth=I.wireframeLinewidth,W.linewidth=I.linewidth,!0===F.isPointLight&&!0===W.isMeshDistanceMaterial&&(W.referencePosition.setFromMatrixPosition(F.matrixWorld),W.nearDistance=P,W.farDistance=R),W}function M(T,I,F,P,R){if(!1===T.visible)return;if(T.layers.test(I.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&3===R)&&(!T.frustumCulled||i.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,T.matrixWorld);const re=e.update(T),Le=T.material;if(Array.isArray(Le)){const me=re.groups;for(let Q=0,he=me.length;Q<he;Q++){const K=me[Q],ae=Le[K.materialIndex];if(ae&&ae.visible){const fe=x(T,ae,P,F.near,F.far,R);n.renderBufferDirect(F,null,re,fe,T,K)}}}else if(Le.visible){const me=x(T,Le,P,F.near,F.far,R);n.renderBufferDirect(F,null,re,me,T,null)}}const W=T.children;for(let re=0,Le=W.length;re<Le;re++)M(W[re],I,F,P,R)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(T,I,F){if(!1===w.enabled||!1===w.autoUpdate&&!1===w.needsUpdate||0===T.length)return;const P=n.getRenderTarget(),R=n.getActiveCubeFace(),k=n.getActiveMipmapLevel(),W=n.state;W.setBlending(0),W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);for(let re=0,Le=T.length;re<Le;re++){const me=T[re],Q=me.shadow;if(void 0===Q){console.warn("THREE.WebGLShadowMap:",me,"has no shadow.");continue}if(!1===Q.autoUpdate&&!1===Q.needsUpdate)continue;r.copy(Q.mapSize);const he=Q.getFrameExtents();r.multiply(he),s.copy(Q.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/he.x),r.x=s.x*he.x,Q.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/he.y),r.y=s.y*he.y,Q.mapSize.y=s.y)),null===Q.map&&(Q.map=new z4(r.x,r.y,3!==this.type?{minFilter:R1,magFilter:R1}:{}),Q.map.texture.name=me.name+".shadowMap",Q.camera.updateProjectionMatrix()),n.setRenderTarget(Q.map),n.clear();const K=Q.getViewportCount();for(let ae=0;ae<K;ae++){const fe=Q.getViewport(ae);o.set(s.x*fe.x,s.y*fe.y,s.x*fe.z,s.y*fe.w),W.viewport(o),Q.updateMatrices(me,ae),i=Q.getFrustum(),M(I,F,Q.camera,me,this.type)}!0!==Q.isPointLightShadow&&3===this.type&&C(Q,F),Q.needsUpdate=!1}w.needsUpdate=!1,n.setRenderTarget(P,R,k)}}function wHe(n,e,t){const i=t.isWebGL2,a=new function r(){let at=!1;const Bn=new xo;let Ht=null;const Nn=new xo(0,0,0,0);return{setMask:function(Hn){Ht!==Hn&&!at&&(n.colorMask(Hn,Hn,Hn,Hn),Ht=Hn)},setLocked:function(Hn){at=Hn},setClear:function(Hn,As,cc,e1,U1){!0===U1&&(Hn*=e1,As*=e1,cc*=e1),Bn.set(Hn,As,cc,e1),!1===Nn.equals(Bn)&&(n.clearColor(Hn,As,cc,e1),Nn.copy(Bn))},reset:function(){at=!1,Ht=null,Nn.set(-1,0,0,0)}}},c=new function s(){let at=!1,Bn=null,Ht=null,Nn=null;return{setTest:function(Hn){Hn?Zt(2929):an(2929)},setMask:function(Hn){Bn!==Hn&&!at&&(n.depthMask(Hn),Bn=Hn)},setFunc:function(Hn){if(Ht!==Hn){if(Hn)switch(Hn){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);Ht=Hn}},setLocked:function(Hn){at=Hn},setClear:function(Hn){Nn!==Hn&&(n.clearDepth(Hn),Nn=Hn)},reset:function(){at=!1,Bn=null,Ht=null,Nn=null}}},l=new function o(){let at=!1,Bn=null,Ht=null,Nn=null,Hn=null,As=null,cc=null,e1=null,U1=null;return{setTest:function(Vo){at||(Vo?Zt(2960):an(2960))},setMask:function(Vo){Bn!==Vo&&!at&&(n.stencilMask(Vo),Bn=Vo)},setFunc:function(Vo,G1,Q1){(Ht!==Vo||Nn!==G1||Hn!==Q1)&&(n.stencilFunc(Vo,G1,Q1),Ht=Vo,Nn=G1,Hn=Q1)},setOp:function(Vo,G1,Q1){(As!==Vo||cc!==G1||e1!==Q1)&&(n.stencilOp(Vo,G1,Q1),As=Vo,cc=G1,e1=Q1)},setLocked:function(Vo){at=Vo},setClear:function(Vo){U1!==Vo&&(n.clearStencil(Vo),U1=Vo)},reset:function(){at=!1,Bn=null,Ht=null,Nn=null,Hn=null,As=null,cc=null,e1=null,U1=null}}},u=new WeakMap,f=new WeakMap;let p={},g={},_=new WeakMap,y=[],w=null,C=!1,x=null,M=null,T=null,I=null,F=null,P=null,R=null,k=!1,W=null,re=null,Le=null,me=null,Q=null;const he=n.getParameter(35661);let K=!1,ae=0;const fe=n.getParameter(7938);-1!==fe.indexOf("WebGL")?(ae=parseFloat(/^WebGL (\d)/.exec(fe)[1]),K=ae>=1):-1!==fe.indexOf("OpenGL ES")&&(ae=parseFloat(/^OpenGL ES (\d)/.exec(fe)[1]),K=ae>=2);let de=null,ke={};const et=n.getParameter(3088),Fe=n.getParameter(2978),wt=(new xo).fromArray(et),ut=(new xo).fromArray(Fe);function It(at,Bn,Ht){const Nn=new Uint8Array(4),Hn=n.createTexture();n.bindTexture(at,Hn),n.texParameteri(at,10241,9728),n.texParameteri(at,10240,9728);for(let As=0;As<Ht;As++)n.texImage2D(Bn+As,0,6408,1,1,0,6408,5121,Nn);return Hn}const xt={};function Zt(at){!0!==p[at]&&(n.enable(at),p[at]=!0)}function an(at){!1!==p[at]&&(n.disable(at),p[at]=!1)}xt[3553]=It(3553,3553,1),xt[34067]=It(34067,34069,6),a.setClear(0,0,0,1),c.setClear(1),l.setClear(0),Zt(2929),c.setFunc(3),En(!1),Cn(1),Zt(2884),vn(0);const Ot={[Bd]:32774,101:32778,102:32779};if(i)Ot[103]=32775,Ot[104]=32776;else{const at=e.get("EXT_blend_minmax");null!==at&&(Ot[103]=at.MIN_EXT,Ot[104]=at.MAX_EXT)}const Rt={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function vn(at,Bn,Ht,Nn,Hn,As,cc,e1){if(0!==at){if(!1===C&&(Zt(3042),C=!0),5===at)Hn=Hn||Bn,As=As||Ht,cc=cc||Nn,(Bn!==M||Hn!==F)&&(n.blendEquationSeparate(Ot[Bn],Ot[Hn]),M=Bn,F=Hn),(Ht!==T||Nn!==I||As!==P||cc!==R)&&(n.blendFuncSeparate(Rt[Ht],Rt[Nn],Rt[As],Rt[cc]),T=Ht,I=Nn,P=As,R=cc),x=at,k=null;else if(at!==x||e1!==k){if((M!==Bd||F!==Bd)&&(n.blendEquation(32774),M=Bd,F=Bd),e1)switch(at){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",at)}else switch(at){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",at)}T=null,I=null,P=null,R=null,x=at,k=e1}}else!0===C&&(an(3042),C=!1)}function En(at){W!==at&&(n.frontFace(at?2304:2305),W=at)}function Cn(at){0!==at?(Zt(2884),at!==re&&n.cullFace(1===at?1029:2===at?1028:1032)):an(2884),re=at}function fi(at,Bn,Ht){at?(Zt(32823),(me!==Bn||Q!==Ht)&&(n.polygonOffset(Bn,Ht),me=Bn,Q=Ht)):an(32823)}function us(at){void 0===at&&(at=33984+he-1),de!==at&&(n.activeTexture(at),de=at)}return{buffers:{color:a,depth:c,stencil:l},enable:Zt,disable:an,bindFramebuffer:function Sn(at,Bn){return g[at]!==Bn&&(n.bindFramebuffer(at,Bn),g[at]=Bn,i&&(36009===at&&(g[36160]=Bn),36160===at&&(g[36009]=Bn)),!0)},drawBuffers:function cn(at,Bn){let Ht=y,Nn=!1;if(at)if(Ht=_.get(Bn),void 0===Ht&&(Ht=[],_.set(Bn,Ht)),at.isWebGLMultipleRenderTargets){const Hn=at.texture;if(Ht.length!==Hn.length||36064!==Ht[0]){for(let As=0,cc=Hn.length;As<cc;As++)Ht[As]=36064+As;Ht.length=Hn.length,Nn=!0}}else 36064!==Ht[0]&&(Ht[0]=36064,Nn=!0);else 1029!==Ht[0]&&(Ht[0]=1029,Nn=!0);Nn&&(t.isWebGL2?n.drawBuffers(Ht):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ht))},useProgram:function Ti(at){return w!==at&&(n.useProgram(at),w=at,!0)},setBlending:vn,setMaterial:function qn(at,Bn){2===at.side?an(2884):Zt(2884);let Ht=1===at.side;Bn&&(Ht=!Ht),En(Ht),1===at.blending&&!1===at.transparent?vn(0):vn(at.blending,at.blendEquation,at.blendSrc,at.blendDst,at.blendEquationAlpha,at.blendSrcAlpha,at.blendDstAlpha,at.premultipliedAlpha),c.setFunc(at.depthFunc),c.setTest(at.depthTest),c.setMask(at.depthWrite),a.setMask(at.colorWrite);const Nn=at.stencilWrite;l.setTest(Nn),Nn&&(l.setMask(at.stencilWriteMask),l.setFunc(at.stencilFunc,at.stencilRef,at.stencilFuncMask),l.setOp(at.stencilFail,at.stencilZFail,at.stencilZPass)),fi(at.polygonOffset,at.polygonOffsetFactor,at.polygonOffsetUnits),!0===at.alphaToCoverage?Zt(32926):an(32926)},setFlipSided:En,setCullFace:Cn,setLineWidth:function Un(at){at!==Le&&(K&&n.lineWidth(at),Le=at)},setPolygonOffset:fi,setScissorTest:function ar(at){at?Zt(3089):an(3089)},activeTexture:us,bindTexture:function Oe(at,Bn){null===de&&us();let Ht=ke[de];void 0===Ht&&(Ht={type:void 0,texture:void 0},ke[de]=Ht),(Ht.type!==at||Ht.texture!==Bn)&&(n.bindTexture(at,Bn||xt[at]),Ht.type=at,Ht.texture=Bn)},unbindTexture:function ve(){const at=ke[de];void 0!==at&&void 0!==at.type&&(n.bindTexture(at.type,null),at.type=void 0,at.texture=void 0)},compressedTexImage2D:function Tt(){try{n.compressedTexImage2D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},texImage2D:function Jt(){try{n.texImage2D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},texImage3D:function ln(){try{n.texImage3D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},updateUBOMapping:function er(at,Bn){let Ht=f.get(Bn);void 0===Ht&&(Ht=new WeakMap,f.set(Bn,Ht));let Nn=Ht.get(at);void 0===Nn&&(Nn=n.getUniformBlockIndex(Bn,at.name),Ht.set(at,Nn))},uniformBlockBinding:function kr(at,Bn){const Nn=f.get(Bn).get(at);u.get(at)!==Nn&&(n.uniformBlockBinding(Bn,Nn,at.__bindingPointIndex),u.set(at,Nn))},texStorage2D:function wi(){try{n.texStorage2D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},texStorage3D:function De(){try{n.texStorage3D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},texSubImage2D:function gn(){try{n.texSubImage2D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},texSubImage3D:function bn(){try{n.texSubImage3D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},compressedTexSubImage2D:function In(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(at){console.error("THREE.WebGLState:",at)}},scissor:function Wn(at){!1===wt.equals(at)&&(n.scissor(at.x,at.y,at.z,at.w),wt.copy(at))},viewport:function jn(at){!1===ut.equals(at)&&(n.viewport(at.x,at.y,at.z,at.w),ut.copy(at))},reset:function No(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},de=null,ke={},g={},_=new WeakMap,y=[],w=null,C=!1,x=null,M=null,T=null,I=null,F=null,P=null,R=null,k=!1,W=null,re=null,Le=null,me=null,Q=null,wt.set(0,0,n.canvas.width,n.canvas.height),ut.set(0,0,n.canvas.width,n.canvas.height),a.reset(),c.reset(),l.reset()}}}function CHe(n,e,t,i,r,s,o){const a=r.isWebGL2,c=r.maxTextures,l=r.maxCubemapSize,u=r.maxTextureSize,f=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=/OculusBrowser/g.test(navigator.userAgent),_=new WeakMap;let y;const w=new WeakMap;let C=!1;try{C=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function x(Oe,ve){return C?new OffscreenCanvas(Oe,ve):J9("canvas")}function M(Oe,ve,Tt,gn){let bn=1;if((Oe.width>gn||Oe.height>gn)&&(bn=gn/Math.max(Oe.width,Oe.height)),bn<1||!0===ve){if(typeof HTMLImageElement<"u"&&Oe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Oe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Oe instanceof ImageBitmap){const In=ve?ox:Math.floor,wi=In(bn*Oe.width),De=In(bn*Oe.height);void 0===y&&(y=x(wi,De));const Jt=Tt?x(wi,De):y;return Jt.width=wi,Jt.height=De,Jt.getContext("2d").drawImage(Oe,0,0,wi,De),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Oe.width+"x"+Oe.height+") to ("+wi+"x"+De+")."),Jt}return"data"in Oe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Oe.width+"x"+Oe.height+")."),Oe}return Oe}function T(Oe){return AF(Oe.width)&&AF(Oe.height)}function F(Oe,ve){return Oe.generateMipmaps&&ve&&Oe.minFilter!==R1&&Oe.minFilter!==$a}function P(Oe){n.generateMipmap(Oe)}function R(Oe,ve,Tt,gn,bn=!1){if(!1===a)return ve;if(null!==Oe){if(void 0!==n[Oe])return n[Oe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Oe+"'")}let In=ve;return 6403===ve&&(5126===Tt&&(In=33326),5131===Tt&&(In=33325),5121===Tt&&(In=33321)),33319===ve&&(5126===Tt&&(In=33328),5131===Tt&&(In=33327),5121===Tt&&(In=33323)),6408===ve&&(5126===Tt&&(In=34836),5131===Tt&&(In=34842),5121===Tt&&(In=gn===Ho&&!1===bn?35907:32856),32819===Tt&&(In=32854),32820===Tt&&(In=32855)),(33325===In||33326===In||33327===In||33328===In||34842===In||34836===In)&&e.get("EXT_color_buffer_float"),In}function k(Oe,ve,Tt){return!0===F(Oe,Tt)||Oe.isFramebufferTexture&&Oe.minFilter!==R1&&Oe.minFilter!==$a?Math.log2(Math.max(ve.width,ve.height))+1:void 0!==Oe.mipmaps&&Oe.mipmaps.length>0?Oe.mipmaps.length:Oe.isCompressedTexture&&Array.isArray(Oe.image)?ve.mipmaps.length:1}function W(Oe){return Oe===R1||1004===Oe||1005===Oe?9728:9729}function re(Oe){const ve=Oe.target;ve.removeEventListener("dispose",re),function me(Oe){const ve=i.get(Oe);if(void 0===ve.__webglInit)return;const Tt=Oe.source,gn=w.get(Tt);if(gn){const bn=gn[ve.__cacheKey];bn.usedTimes--,0===bn.usedTimes&&Q(Oe),0===Object.keys(gn).length&&w.delete(Tt)}i.remove(Oe)}(ve),ve.isVideoTexture&&_.delete(ve)}function Le(Oe){const ve=Oe.target;ve.removeEventListener("dispose",Le),function he(Oe){const ve=Oe.texture,Tt=i.get(Oe),gn=i.get(ve);if(void 0!==gn.__webglTexture&&(n.deleteTexture(gn.__webglTexture),o.memory.textures--),Oe.depthTexture&&Oe.depthTexture.dispose(),Oe.isWebGLCubeRenderTarget)for(let bn=0;bn<6;bn++)n.deleteFramebuffer(Tt.__webglFramebuffer[bn]),Tt.__webglDepthbuffer&&n.deleteRenderbuffer(Tt.__webglDepthbuffer[bn]);else{if(n.deleteFramebuffer(Tt.__webglFramebuffer),Tt.__webglDepthbuffer&&n.deleteRenderbuffer(Tt.__webglDepthbuffer),Tt.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Tt.__webglMultisampledFramebuffer),Tt.__webglColorRenderbuffer)for(let bn=0;bn<Tt.__webglColorRenderbuffer.length;bn++)Tt.__webglColorRenderbuffer[bn]&&n.deleteRenderbuffer(Tt.__webglColorRenderbuffer[bn]);Tt.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Tt.__webglDepthRenderbuffer)}if(Oe.isWebGLMultipleRenderTargets)for(let bn=0,In=ve.length;bn<In;bn++){const wi=i.get(ve[bn]);wi.__webglTexture&&(n.deleteTexture(wi.__webglTexture),o.memory.textures--),i.remove(ve[bn])}i.remove(ve),i.remove(Oe)}(ve)}function Q(Oe){const ve=i.get(Oe);n.deleteTexture(ve.__webglTexture),delete w.get(Oe.source)[ve.__cacheKey],o.memory.textures--}let K=0;function ke(Oe,ve){const Tt=i.get(Oe);if(Oe.isVideoTexture&&function ar(Oe){const ve=o.render.frame;_.get(Oe)!==ve&&(_.set(Oe,ve),Oe.update())}(Oe),!1===Oe.isRenderTargetTexture&&Oe.version>0&&Tt.__version!==Oe.version){const gn=Oe.image;if(null===gn)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==gn.complete)return void an(Tt,Oe,ve);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+ve),t.bindTexture(3553,Tt.__webglTexture)}const ut={[z0]:10497,[Bl]:33071,1002:33648},It={[R1]:9728,1004:9984,1005:9986,[$a]:9729,1007:9985,[Rd]:9987};function xt(Oe,ve,Tt){if(Tt?(n.texParameteri(Oe,10242,ut[ve.wrapS]),n.texParameteri(Oe,10243,ut[ve.wrapT]),(32879===Oe||35866===Oe)&&n.texParameteri(Oe,32882,ut[ve.wrapR]),n.texParameteri(Oe,10240,It[ve.magFilter]),n.texParameteri(Oe,10241,It[ve.minFilter])):(n.texParameteri(Oe,10242,33071),n.texParameteri(Oe,10243,33071),(32879===Oe||35866===Oe)&&n.texParameteri(Oe,32882,33071),(ve.wrapS!==Bl||ve.wrapT!==Bl)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(Oe,10240,W(ve.magFilter)),n.texParameteri(Oe,10241,W(ve.minFilter)),ve.minFilter!==R1&&ve.minFilter!==$a&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const gn=e.get("EXT_texture_filter_anisotropic");if(ve.type===P4&&!1===e.has("OES_texture_float_linear")||!1===a&&ve.type===O0&&!1===e.has("OES_texture_half_float_linear"))return;(ve.anisotropy>1||i.get(ve).__currentAnisotropy)&&(n.texParameterf(Oe,gn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ve.anisotropy,r.getMaxAnisotropy())),i.get(ve).__currentAnisotropy=ve.anisotropy)}}function Zt(Oe,ve){let Tt=!1;void 0===Oe.__webglInit&&(Oe.__webglInit=!0,ve.addEventListener("dispose",re));const gn=ve.source;let bn=w.get(gn);void 0===bn&&(bn={},w.set(gn,bn));const In=function de(Oe){const ve=[];return ve.push(Oe.wrapS),ve.push(Oe.wrapT),ve.push(Oe.magFilter),ve.push(Oe.minFilter),ve.push(Oe.anisotropy),ve.push(Oe.internalFormat),ve.push(Oe.format),ve.push(Oe.type),ve.push(Oe.generateMipmaps),ve.push(Oe.premultiplyAlpha),ve.push(Oe.flipY),ve.push(Oe.unpackAlignment),ve.push(Oe.encoding),ve.join()}(ve);if(In!==Oe.__cacheKey){void 0===bn[In]&&(bn[In]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Tt=!0),bn[In].usedTimes++;const wi=bn[Oe.__cacheKey];void 0!==wi&&(bn[Oe.__cacheKey].usedTimes--,0===wi.usedTimes&&Q(ve)),Oe.__cacheKey=In,Oe.__webglTexture=bn[In].texture}return Tt}function an(Oe,ve,Tt){let gn=3553;ve.isDataArrayTexture&&(gn=35866),ve.isData3DTexture&&(gn=32879);const bn=Zt(Oe,ve),In=ve.source;if(t.activeTexture(33984+Tt),t.bindTexture(gn,Oe.__webglTexture),In.version!==In.__currentVersion||!0===bn){n.pixelStorei(37440,ve.flipY),n.pixelStorei(37441,ve.premultiplyAlpha),n.pixelStorei(3317,ve.unpackAlignment),n.pixelStorei(37443,0);const wi=function I(Oe){return!a&&(Oe.wrapS!==Bl||Oe.wrapT!==Bl||Oe.minFilter!==R1&&Oe.minFilter!==$a)}(ve)&&!1===T(ve.image);let De=M(ve.image,wi,!1,u);De=us(ve,De);const Jt=T(De)||a,ln=s.convert(ve.format,ve.encoding);let er,Wn=s.convert(ve.type),jn=R(ve.internalFormat,ln,Wn,ve.encoding,ve.isVideoTexture);xt(gn,ve,Jt);const kr=ve.mipmaps,No=a&&!0!==ve.isVideoTexture,at=void 0===In.__currentVersion||!0===bn,Bn=k(ve,De,Jt);if(ve.isDepthTexture)jn=6402,a?jn=ve.type===P4?36012:ve.type===j8?33190:ve.type===$8?35056:33189:ve.type===P4&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ve.format===q8&&6402===jn&&1012!==ve.type&&ve.type!==j8&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ve.type=j8,Wn=s.convert(ve.type)),ve.format===K8&&6402===jn&&(jn=34041,ve.type!==$8&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ve.type=$8,Wn=s.convert(ve.type))),at&&(No?t.texStorage2D(3553,1,jn,De.width,De.height):t.texImage2D(3553,0,jn,De.width,De.height,0,ln,Wn,null));else if(ve.isDataTexture)if(kr.length>0&&Jt){No&&at&&t.texStorage2D(3553,Bn,jn,kr[0].width,kr[0].height);for(let Ht=0,Nn=kr.length;Ht<Nn;Ht++)er=kr[Ht],No?t.texSubImage2D(3553,Ht,0,0,er.width,er.height,ln,Wn,er.data):t.texImage2D(3553,Ht,jn,er.width,er.height,0,ln,Wn,er.data);ve.generateMipmaps=!1}else No?(at&&t.texStorage2D(3553,Bn,jn,De.width,De.height),t.texSubImage2D(3553,0,0,0,De.width,De.height,ln,Wn,De.data)):t.texImage2D(3553,0,jn,De.width,De.height,0,ln,Wn,De.data);else if(ve.isCompressedTexture){No&&at&&t.texStorage2D(3553,Bn,jn,kr[0].width,kr[0].height);for(let Ht=0,Nn=kr.length;Ht<Nn;Ht++)er=kr[Ht],ve.format!==Fu?null!==ln?No?t.compressedTexSubImage2D(3553,Ht,0,0,er.width,er.height,ln,er.data):t.compressedTexImage2D(3553,Ht,jn,er.width,er.height,0,er.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):No?t.texSubImage2D(3553,Ht,0,0,er.width,er.height,ln,Wn,er.data):t.texImage2D(3553,Ht,jn,er.width,er.height,0,ln,Wn,er.data)}else if(ve.isDataArrayTexture)No?(at&&t.texStorage3D(35866,Bn,jn,De.width,De.height,De.depth),t.texSubImage3D(35866,0,0,0,0,De.width,De.height,De.depth,ln,Wn,De.data)):t.texImage3D(35866,0,jn,De.width,De.height,De.depth,0,ln,Wn,De.data);else if(ve.isData3DTexture)No?(at&&t.texStorage3D(32879,Bn,jn,De.width,De.height,De.depth),t.texSubImage3D(32879,0,0,0,0,De.width,De.height,De.depth,ln,Wn,De.data)):t.texImage3D(32879,0,jn,De.width,De.height,De.depth,0,ln,Wn,De.data);else if(ve.isFramebufferTexture){if(at)if(No)t.texStorage2D(3553,Bn,jn,De.width,De.height);else{let Ht=De.width,Nn=De.height;for(let Hn=0;Hn<Bn;Hn++)t.texImage2D(3553,Hn,jn,Ht,Nn,0,ln,Wn,null),Ht>>=1,Nn>>=1}}else if(kr.length>0&&Jt){No&&at&&t.texStorage2D(3553,Bn,jn,kr[0].width,kr[0].height);for(let Ht=0,Nn=kr.length;Ht<Nn;Ht++)er=kr[Ht],No?t.texSubImage2D(3553,Ht,0,0,ln,Wn,er):t.texImage2D(3553,Ht,jn,ln,Wn,er);ve.generateMipmaps=!1}else No?(at&&t.texStorage2D(3553,Bn,jn,De.width,De.height),t.texSubImage2D(3553,0,0,0,ln,Wn,De)):t.texImage2D(3553,0,jn,ln,Wn,De);F(ve,Jt)&&P(gn),In.__currentVersion=In.version,ve.onUpdate&&ve.onUpdate(ve)}Oe.__version=ve.version}function cn(Oe,ve,Tt,gn,bn){const In=s.convert(Tt.format,Tt.encoding),wi=s.convert(Tt.type),De=R(Tt.internalFormat,In,wi,Tt.encoding);i.get(ve).__hasExternalTextures||(32879===bn||35866===bn?t.texImage3D(bn,0,De,ve.width,ve.height,ve.depth,0,In,wi,null):t.texImage2D(bn,0,De,ve.width,ve.height,0,In,wi,null)),t.bindFramebuffer(36160,Oe),fi(ve)?p.framebufferTexture2DMultisampleEXT(36160,gn,bn,i.get(Tt).__webglTexture,0,Un(ve)):n.framebufferTexture2D(36160,gn,bn,i.get(Tt).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ti(Oe,ve,Tt){if(n.bindRenderbuffer(36161,Oe),ve.depthBuffer&&!ve.stencilBuffer){let gn=33189;if(Tt||fi(ve)){const bn=ve.depthTexture;bn&&bn.isDepthTexture&&(bn.type===P4?gn=36012:bn.type===j8&&(gn=33190));const In=Un(ve);fi(ve)?p.renderbufferStorageMultisampleEXT(36161,In,gn,ve.width,ve.height):n.renderbufferStorageMultisample(36161,In,gn,ve.width,ve.height)}else n.renderbufferStorage(36161,gn,ve.width,ve.height);n.framebufferRenderbuffer(36160,36096,36161,Oe)}else if(ve.depthBuffer&&ve.stencilBuffer){const gn=Un(ve);Tt&&!1===fi(ve)?n.renderbufferStorageMultisample(36161,gn,35056,ve.width,ve.height):fi(ve)?p.renderbufferStorageMultisampleEXT(36161,gn,35056,ve.width,ve.height):n.renderbufferStorage(36161,34041,ve.width,ve.height),n.framebufferRenderbuffer(36160,33306,36161,Oe)}else{const gn=!0===ve.isWebGLMultipleRenderTargets?ve.texture:[ve.texture];for(let bn=0;bn<gn.length;bn++){const In=gn[bn],wi=s.convert(In.format,In.encoding),De=s.convert(In.type),Jt=R(In.internalFormat,wi,De,In.encoding),ln=Un(ve);Tt&&!1===fi(ve)?n.renderbufferStorageMultisample(36161,ln,Jt,ve.width,ve.height):fi(ve)?p.renderbufferStorageMultisampleEXT(36161,ln,Jt,ve.width,ve.height):n.renderbufferStorage(36161,Jt,ve.width,ve.height)}}n.bindRenderbuffer(36161,null)}function Rt(Oe){const ve=i.get(Oe),Tt=!0===Oe.isWebGLCubeRenderTarget;if(Oe.depthTexture&&!ve.__autoAllocateDepthBuffer){if(Tt)throw new Error("target.depthTexture not supported in Cube render targets");!function Ot(Oe,ve){if(ve&&ve.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,Oe),!ve.depthTexture||!ve.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(ve.depthTexture).__webglTexture||ve.depthTexture.image.width!==ve.width||ve.depthTexture.image.height!==ve.height)&&(ve.depthTexture.image.width=ve.width,ve.depthTexture.image.height=ve.height,ve.depthTexture.needsUpdate=!0),ke(ve.depthTexture,0);const gn=i.get(ve.depthTexture).__webglTexture,bn=Un(ve);if(ve.depthTexture.format===q8)fi(ve)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,gn,0,bn):n.framebufferTexture2D(36160,36096,3553,gn,0);else{if(ve.depthTexture.format!==K8)throw new Error("Unknown depthTexture format");fi(ve)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,gn,0,bn):n.framebufferTexture2D(36160,33306,3553,gn,0)}}(ve.__webglFramebuffer,Oe)}else if(Tt){ve.__webglDepthbuffer=[];for(let gn=0;gn<6;gn++)t.bindFramebuffer(36160,ve.__webglFramebuffer[gn]),ve.__webglDepthbuffer[gn]=n.createRenderbuffer(),Ti(ve.__webglDepthbuffer[gn],Oe,!1)}else t.bindFramebuffer(36160,ve.__webglFramebuffer),ve.__webglDepthbuffer=n.createRenderbuffer(),Ti(ve.__webglDepthbuffer,Oe,!1);t.bindFramebuffer(36160,null)}function Un(Oe){return Math.min(f,Oe.samples)}function fi(Oe){const ve=i.get(Oe);return a&&Oe.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==ve.__useRenderToTexture}function us(Oe,ve){const Tt=Oe.encoding,gn=Oe.format,bn=Oe.type;return!0===Oe.isCompressedTexture||!0===Oe.isVideoTexture||1035===Oe.format||Tt!==$h&&(Tt===Ho?!1===a?!0===e.has("EXT_sRGB")&&gn===Fu?(Oe.format=1035,Oe.minFilter=$a,Oe.generateMipmaps=!1):ve=zJ.sRGBToLinear(ve):(gn!==Fu||bn!==W8)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Tt)),ve}this.allocateTextureUnit=function fe(){const Oe=K;return Oe>=c&&console.warn("THREE.WebGLTextures: Trying to use "+Oe+" texture units while this GPU supports only "+c),K+=1,Oe},this.resetTextureUnits=function ae(){K=0},this.setTexture2D=ke,this.setTexture2DArray=function et(Oe,ve){const Tt=i.get(Oe);Oe.version>0&&Tt.__version!==Oe.version?an(Tt,Oe,ve):(t.activeTexture(33984+ve),t.bindTexture(35866,Tt.__webglTexture))},this.setTexture3D=function Fe(Oe,ve){const Tt=i.get(Oe);Oe.version>0&&Tt.__version!==Oe.version?an(Tt,Oe,ve):(t.activeTexture(33984+ve),t.bindTexture(32879,Tt.__webglTexture))},this.setTextureCube=function wt(Oe,ve){const Tt=i.get(Oe);Oe.version>0&&Tt.__version!==Oe.version?function Sn(Oe,ve,Tt){if(6!==ve.image.length)return;const gn=Zt(Oe,ve),bn=ve.source;if(t.activeTexture(33984+Tt),t.bindTexture(34067,Oe.__webglTexture),bn.version!==bn.__currentVersion||!0===gn){n.pixelStorei(37440,ve.flipY),n.pixelStorei(37441,ve.premultiplyAlpha),n.pixelStorei(3317,ve.unpackAlignment),n.pixelStorei(37443,0);const In=ve.isCompressedTexture||ve.image[0].isCompressedTexture,wi=ve.image[0]&&ve.image[0].isDataTexture,De=[];for(let Ht=0;Ht<6;Ht++)De[Ht]=In||wi?wi?ve.image[Ht].image:ve.image[Ht]:M(ve.image[Ht],!1,!0,l),De[Ht]=us(ve,De[Ht]);const Jt=De[0],ln=T(Jt)||a,Wn=s.convert(ve.format,ve.encoding),jn=s.convert(ve.type),er=R(ve.internalFormat,Wn,jn,ve.encoding),kr=a&&!0!==ve.isVideoTexture,No=void 0===bn.__currentVersion||!0===gn;let Bn,at=k(ve,Jt,ln);if(xt(34067,ve,ln),In){kr&&No&&t.texStorage2D(34067,at,er,Jt.width,Jt.height);for(let Ht=0;Ht<6;Ht++){Bn=De[Ht].mipmaps;for(let Nn=0;Nn<Bn.length;Nn++){const Hn=Bn[Nn];ve.format!==Fu?null!==Wn?kr?t.compressedTexSubImage2D(34069+Ht,Nn,0,0,Hn.width,Hn.height,Wn,Hn.data):t.compressedTexImage2D(34069+Ht,Nn,er,Hn.width,Hn.height,0,Hn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):kr?t.texSubImage2D(34069+Ht,Nn,0,0,Hn.width,Hn.height,Wn,jn,Hn.data):t.texImage2D(34069+Ht,Nn,er,Hn.width,Hn.height,0,Wn,jn,Hn.data)}}}else{Bn=ve.mipmaps,kr&&No&&(Bn.length>0&&at++,t.texStorage2D(34067,at,er,De[0].width,De[0].height));for(let Ht=0;Ht<6;Ht++)if(wi){kr?t.texSubImage2D(34069+Ht,0,0,0,De[Ht].width,De[Ht].height,Wn,jn,De[Ht].data):t.texImage2D(34069+Ht,0,er,De[Ht].width,De[Ht].height,0,Wn,jn,De[Ht].data);for(let Nn=0;Nn<Bn.length;Nn++){const As=Bn[Nn].image[Ht].image;kr?t.texSubImage2D(34069+Ht,Nn+1,0,0,As.width,As.height,Wn,jn,As.data):t.texImage2D(34069+Ht,Nn+1,er,As.width,As.height,0,Wn,jn,As.data)}}else{kr?t.texSubImage2D(34069+Ht,0,0,0,Wn,jn,De[Ht]):t.texImage2D(34069+Ht,0,er,Wn,jn,De[Ht]);for(let Nn=0;Nn<Bn.length;Nn++){const Hn=Bn[Nn];kr?t.texSubImage2D(34069+Ht,Nn+1,0,0,Wn,jn,Hn.image[Ht]):t.texImage2D(34069+Ht,Nn+1,er,Wn,jn,Hn.image[Ht])}}}F(ve,ln)&&P(34067),bn.__currentVersion=bn.version,ve.onUpdate&&ve.onUpdate(ve)}Oe.__version=ve.version}(Tt,Oe,ve):(t.activeTexture(33984+ve),t.bindTexture(34067,Tt.__webglTexture))},this.rebindTextures=function vn(Oe,ve,Tt){const gn=i.get(Oe);void 0!==ve&&cn(gn.__webglFramebuffer,Oe,Oe.texture,36064,3553),void 0!==Tt&&Rt(Oe)},this.setupRenderTarget=function qn(Oe){const ve=Oe.texture,Tt=i.get(Oe),gn=i.get(ve);Oe.addEventListener("dispose",Le),!0!==Oe.isWebGLMultipleRenderTargets&&(void 0===gn.__webglTexture&&(gn.__webglTexture=n.createTexture()),gn.__version=ve.version,o.memory.textures++);const bn=!0===Oe.isWebGLCubeRenderTarget,In=!0===Oe.isWebGLMultipleRenderTargets,wi=T(Oe)||a;if(bn){Tt.__webglFramebuffer=[];for(let De=0;De<6;De++)Tt.__webglFramebuffer[De]=n.createFramebuffer()}else{if(Tt.__webglFramebuffer=n.createFramebuffer(),In)if(r.drawBuffers){const De=Oe.texture;for(let Jt=0,ln=De.length;Jt<ln;Jt++){const Wn=i.get(De[Jt]);void 0===Wn.__webglTexture&&(Wn.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&Oe.samples>0&&!1===fi(Oe)){const De=In?ve:[ve];Tt.__webglMultisampledFramebuffer=n.createFramebuffer(),Tt.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,Tt.__webglMultisampledFramebuffer);for(let Jt=0;Jt<De.length;Jt++){const ln=De[Jt];Tt.__webglColorRenderbuffer[Jt]=n.createRenderbuffer(),n.bindRenderbuffer(36161,Tt.__webglColorRenderbuffer[Jt]);const Wn=s.convert(ln.format,ln.encoding),jn=s.convert(ln.type),er=R(ln.internalFormat,Wn,jn,ln.encoding),kr=Un(Oe);n.renderbufferStorageMultisample(36161,kr,er,Oe.width,Oe.height),n.framebufferRenderbuffer(36160,36064+Jt,36161,Tt.__webglColorRenderbuffer[Jt])}n.bindRenderbuffer(36161,null),Oe.depthBuffer&&(Tt.__webglDepthRenderbuffer=n.createRenderbuffer(),Ti(Tt.__webglDepthRenderbuffer,Oe,!0)),t.bindFramebuffer(36160,null)}}if(bn){t.bindTexture(34067,gn.__webglTexture),xt(34067,ve,wi);for(let De=0;De<6;De++)cn(Tt.__webglFramebuffer[De],Oe,ve,36064,34069+De);F(ve,wi)&&P(34067),t.unbindTexture()}else if(In){const De=Oe.texture;for(let Jt=0,ln=De.length;Jt<ln;Jt++){const Wn=De[Jt],jn=i.get(Wn);t.bindTexture(3553,jn.__webglTexture),xt(3553,Wn,wi),cn(Tt.__webglFramebuffer,Oe,Wn,36064+Jt,3553),F(Wn,wi)&&P(3553)}t.unbindTexture()}else{let De=3553;(Oe.isWebGL3DRenderTarget||Oe.isWebGLArrayRenderTarget)&&(a?De=Oe.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(De,gn.__webglTexture),xt(De,ve,wi),cn(Tt.__webglFramebuffer,Oe,ve,36064,De),F(ve,wi)&&P(De),t.unbindTexture()}Oe.depthBuffer&&Rt(Oe)},this.updateRenderTargetMipmap=function En(Oe){const ve=T(Oe)||a,Tt=!0===Oe.isWebGLMultipleRenderTargets?Oe.texture:[Oe.texture];for(let gn=0,bn=Tt.length;gn<bn;gn++){const In=Tt[gn];if(F(In,ve)){const wi=Oe.isWebGLCubeRenderTarget?34067:3553,De=i.get(In).__webglTexture;t.bindTexture(wi,De),P(wi),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Cn(Oe){if(a&&Oe.samples>0&&!1===fi(Oe)){const ve=Oe.isWebGLMultipleRenderTargets?Oe.texture:[Oe.texture],Tt=Oe.width,gn=Oe.height;let bn=16384;const In=[],wi=Oe.stencilBuffer?33306:36096,De=i.get(Oe),Jt=!0===Oe.isWebGLMultipleRenderTargets;if(Jt)for(let ln=0;ln<ve.length;ln++)t.bindFramebuffer(36160,De.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+ln,36161,null),t.bindFramebuffer(36160,De.__webglFramebuffer),n.framebufferTexture2D(36009,36064+ln,3553,null,0);t.bindFramebuffer(36008,De.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,De.__webglFramebuffer);for(let ln=0;ln<ve.length;ln++){In.push(36064+ln),Oe.depthBuffer&&In.push(wi);const Wn=void 0!==De.__ignoreDepthValues&&De.__ignoreDepthValues;if(!1===Wn&&(Oe.depthBuffer&&(bn|=256),Oe.stencilBuffer&&(bn|=1024)),Jt&&n.framebufferRenderbuffer(36008,36064,36161,De.__webglColorRenderbuffer[ln]),!0===Wn&&(n.invalidateFramebuffer(36008,[wi]),n.invalidateFramebuffer(36009,[wi])),Jt){const jn=i.get(ve[ln]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,jn,0)}n.blitFramebuffer(0,0,Tt,gn,0,0,Tt,gn,bn,9728),g&&n.invalidateFramebuffer(36008,In)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Jt)for(let ln=0;ln<ve.length;ln++){t.bindFramebuffer(36160,De.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+ln,36161,De.__webglColorRenderbuffer[ln]);const Wn=i.get(ve[ln]).__webglTexture;t.bindFramebuffer(36160,De.__webglFramebuffer),n.framebufferTexture2D(36009,36064+ln,3553,Wn,0)}t.bindFramebuffer(36009,De.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Rt,this.setupFrameBufferTexture=cn,this.useMultisampledRTT=fi}function bHe(n,e,t){const i=t.isWebGL2;return{convert:function r(s,o=null){let a;if(s===W8)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===j8)return 5125;if(s===P4)return 5126;if(s===O0)return i?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===Fu)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===q8)return 6402;if(s===K8)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===Ho){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===Ho?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===Ho?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===Ho?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===Ho?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===Ho?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===Ho?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===Ho?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===Ho?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===Ho?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===Ho?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===Ho?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===Ho?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===Ho?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===Ho?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===Ho?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===Ho?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===Ho?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===$8?i?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class xHe extends Gc{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Mo extends I2{constructor(){super(),this.isGroup=!0,this.type="Group"}}const MHe={type:"move"};class KF{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Mo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Mo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ge,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ge),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Mo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ge,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ge),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const y of e.hand.values()){const w=t.getJointPose(y,i);if(void 0===l.joints[y.jointName]){const x=new Mo;x.matrixAutoUpdate=!1,x.visible=!1,l.joints[y.jointName]=x,l.add(x)}const C=l.joints[y.jointName];null!==w&&(C.matrix.fromArray(w.transform.matrix),C.matrix.decompose(C.position,C.rotation,C.scale),C.jointRadius=w.radius),C.visible=null!==w}const p=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),g=.02,_=.005;l.inputState.pinching&&p>g+_?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&p<=g-_&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(MHe)))}return null!==a&&(a.visible=null!==r),null!==c&&(c.visible=null!==s),null!==l&&(l.visible=null!==o),this}}class Eee extends H4{constructor(e,t,i,r,s,o,a,c,l,u){if((u=void 0!==u?u:q8)!==q8&&u!==K8)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===q8&&(i=j8),void 0===i&&u===K8&&(i=$8),super(null,r,s,o,a,c,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:R1,this.minFilter=void 0!==c?c:R1,this.flipY=!1,this.generateMipmaps=!1}}class SHe extends Y8{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",c=null,l=null,u=null,f=null,p=null,g=null;const _=t.getContextAttributes();let y=null,w=null;const C=[],x=[],M=new Gc;M.layers.enable(1),M.viewport=new xo;const T=new Gc;T.layers.enable(2),T.viewport=new xo;const I=[M,T],F=new xHe;F.layers.enable(1),F.layers.enable(2);let P=null,R=null;function k(de){const ke=x.indexOf(de.inputSource);if(-1===ke)return;const et=C[ke];void 0!==et&&et.dispatchEvent({type:de.type,data:de.inputSource})}function W(){r.removeEventListener("select",k),r.removeEventListener("selectstart",k),r.removeEventListener("selectend",k),r.removeEventListener("squeeze",k),r.removeEventListener("squeezestart",k),r.removeEventListener("squeezeend",k),r.removeEventListener("end",W),r.removeEventListener("inputsourceschange",re);for(let de=0;de<C.length;de++){const ke=x[de];null!==ke&&(x[de]=null,C[de].disconnect(ke))}P=null,R=null,e.setRenderTarget(y),p=null,f=null,u=null,r=null,w=null,fe.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function re(de){for(let ke=0;ke<de.removed.length;ke++){const et=de.removed[ke],Fe=x.indexOf(et);Fe>=0&&(x[Fe]=null,C[Fe].dispatchEvent({type:"disconnected",data:et}))}for(let ke=0;ke<de.added.length;ke++){const et=de.added[ke];let Fe=x.indexOf(et);if(-1===Fe){for(let ut=0;ut<C.length;ut++){if(ut>=x.length){x.push(et),Fe=ut;break}if(null===x[ut]){x[ut]=et,Fe=ut;break}}if(-1===Fe)break}const wt=C[Fe];wt&&wt.dispatchEvent({type:"connected",data:et})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(de){let ke=C[de];return void 0===ke&&(ke=new KF,C[de]=ke),ke.getTargetRaySpace()},this.getControllerGrip=function(de){let ke=C[de];return void 0===ke&&(ke=new KF,C[de]=ke),ke.getGripSpace()},this.getHand=function(de){let ke=C[de];return void 0===ke&&(ke=new KF,C[de]=ke),ke.getHandSpace()},this.setFramebufferScaleFactor=function(de){s=de,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(de){a=de,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(de){c=de},this.getBaseLayer=function(){return null!==f?f:p},this.getBinding=function(){return u},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=function(){var de=Ea(function*(ke){if(r=ke,null!==r){if(y=e.getRenderTarget(),r.addEventListener("select",k),r.addEventListener("selectstart",k),r.addEventListener("selectend",k),r.addEventListener("squeeze",k),r.addEventListener("squeezestart",k),r.addEventListener("squeezeend",k),r.addEventListener("end",W),r.addEventListener("inputsourceschange",re),!0!==_.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)p=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||_.antialias,alpha:_.alpha,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:p}),w=new z4(p.framebufferWidth,p.framebufferHeight,{format:Fu,type:W8,encoding:e.outputEncoding,stencilBuffer:_.stencil});else{let et=null,Fe=null,wt=null;_.depth&&(wt=_.stencil?35056:33190,et=_.stencil?K8:q8,Fe=_.stencil?$8:j8);const ut={colorFormat:32856,depthFormat:wt,scaleFactor:s};u=new XRWebGLBinding(r,t),f=u.createProjectionLayer(ut),r.updateRenderState({layers:[f]}),w=new z4(f.textureWidth,f.textureHeight,{format:Fu,type:W8,depthTexture:new Eee(f.textureWidth,f.textureHeight,Fe,void 0,void 0,void 0,void 0,void 0,void 0,et),stencilBuffer:_.stencil,encoding:e.outputEncoding,samples:_.antialias?4:0}),e.properties.get(w).__ignoreDepthValues=f.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(1),c=null,o=yield r.requestReferenceSpace(a),fe.setContext(r),fe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(ke){return de.apply(this,arguments)}}();const Le=new ge,me=new ge;function he(de,ke){null===ke?de.matrixWorld.copy(de.matrix):de.matrixWorld.multiplyMatrices(ke.matrixWorld,de.matrix),de.matrixWorldInverse.copy(de.matrixWorld).invert()}this.updateCamera=function(de){if(null===r)return;F.near=T.near=M.near=de.near,F.far=T.far=M.far=de.far,(P!==F.near||R!==F.far)&&(r.updateRenderState({depthNear:F.near,depthFar:F.far}),P=F.near,R=F.far);const ke=de.parent,et=F.cameras;he(F,ke);for(let wt=0;wt<et.length;wt++)he(et[wt],ke);F.matrixWorld.decompose(F.position,F.quaternion,F.scale),de.matrix.copy(F.matrix),de.matrix.decompose(de.position,de.quaternion,de.scale);const Fe=de.children;for(let wt=0,ut=Fe.length;wt<ut;wt++)Fe[wt].updateMatrixWorld(!0);2===et.length?function Q(de,ke,et){Le.setFromMatrixPosition(ke.matrixWorld),me.setFromMatrixPosition(et.matrixWorld);const Fe=Le.distanceTo(me),wt=ke.projectionMatrix.elements,ut=et.projectionMatrix.elements,It=wt[14]/(wt[10]-1),xt=wt[14]/(wt[10]+1),Zt=(wt[9]+1)/wt[5],an=(wt[9]-1)/wt[5],Sn=(wt[8]-1)/wt[0],cn=(ut[8]+1)/ut[0],Ti=It*Sn,Ot=It*cn,Rt=Fe/(-Sn+cn),vn=Rt*-Sn;ke.matrixWorld.decompose(de.position,de.quaternion,de.scale),de.translateX(vn),de.translateZ(Rt),de.matrixWorld.compose(de.position,de.quaternion,de.scale),de.matrixWorldInverse.copy(de.matrixWorld).invert();const qn=It+Rt,En=xt+Rt;de.projectionMatrix.makePerspective(Ti-vn,Ot+(Fe-vn),Zt*xt/En*qn,an*xt/En*qn,qn,En)}(F,M,T):F.projectionMatrix.copy(M.projectionMatrix)},this.getCamera=function(){return F},this.getFoveation=function(){return null!==f?f.fixedFoveation:null!==p?p.fixedFoveation:void 0},this.setFoveation=function(de){null!==f&&(f.fixedFoveation=de),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=de)};let K=null;const fe=new JJ;fe.setAnimationLoop(function ae(de,ke){if(l=ke.getViewerPose(c||o),g=ke,null!==l){const et=l.views;null!==p&&(e.setRenderTargetFramebuffer(w,p.framebuffer),e.setRenderTarget(w));let Fe=!1;et.length!==F.cameras.length&&(F.cameras.length=0,Fe=!0);for(let wt=0;wt<et.length;wt++){const ut=et[wt];let It=null;if(null!==p)It=p.getViewport(ut);else{const Zt=u.getViewSubImage(f,ut);It=Zt.viewport,0===wt&&(e.setRenderTargetTextures(w,Zt.colorTexture,f.ignoreDepthValues?void 0:Zt.depthStencilTexture),e.setRenderTarget(w))}let xt=I[wt];void 0===xt&&(xt=new Gc,xt.layers.enable(wt),xt.viewport=new xo,I[wt]=xt),xt.matrix.fromArray(ut.transform.matrix),xt.projectionMatrix.fromArray(ut.projectionMatrix),xt.viewport.set(It.x,It.y,It.width,It.height),0===wt&&F.matrix.copy(xt.matrix),!0===Fe&&F.cameras.push(xt)}}for(let et=0;et<C.length;et++){const Fe=x[et],wt=C[et];null!==Fe&&void 0!==wt&&wt.update(Fe,ke,c||o)}K&&K(de,ke),g=null}),this.setAnimationLoop=function(de){K=de},this.dispose=function(){}}}function EHe(n,e){function r(y,w){y.opacity.value=w.opacity,w.color&&y.diffuse.value.copy(w.color),w.emissive&&y.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.bumpMap&&(y.bumpMap.value=w.bumpMap,y.bumpScale.value=w.bumpScale,1===w.side&&(y.bumpScale.value*=-1)),w.displacementMap&&(y.displacementMap.value=w.displacementMap,y.displacementScale.value=w.displacementScale,y.displacementBias.value=w.displacementBias),w.emissiveMap&&(y.emissiveMap.value=w.emissiveMap),w.normalMap&&(y.normalMap.value=w.normalMap,y.normalScale.value.copy(w.normalScale),1===w.side&&y.normalScale.value.negate()),w.specularMap&&(y.specularMap.value=w.specularMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest);const C=e.get(w).envMap;if(C&&(y.envMap.value=C,y.flipEnvMap.value=C.isCubeTexture&&!1===C.isRenderTargetTexture?-1:1,y.reflectivity.value=w.reflectivity,y.ior.value=w.ior,y.refractionRatio.value=w.refractionRatio),w.lightMap){y.lightMap.value=w.lightMap;const T=!0!==n.physicallyCorrectLights?Math.PI:1;y.lightMapIntensity.value=w.lightMapIntensity*T}let x,M;w.aoMap&&(y.aoMap.value=w.aoMap,y.aoMapIntensity.value=w.aoMapIntensity),w.map?x=w.map:w.specularMap?x=w.specularMap:w.displacementMap?x=w.displacementMap:w.normalMap?x=w.normalMap:w.bumpMap?x=w.bumpMap:w.roughnessMap?x=w.roughnessMap:w.metalnessMap?x=w.metalnessMap:w.alphaMap?x=w.alphaMap:w.emissiveMap?x=w.emissiveMap:w.clearcoatMap?x=w.clearcoatMap:w.clearcoatNormalMap?x=w.clearcoatNormalMap:w.clearcoatRoughnessMap?x=w.clearcoatRoughnessMap:w.iridescenceMap?x=w.iridescenceMap:w.iridescenceThicknessMap?x=w.iridescenceThicknessMap:w.specularIntensityMap?x=w.specularIntensityMap:w.specularColorMap?x=w.specularColorMap:w.transmissionMap?x=w.transmissionMap:w.thicknessMap?x=w.thicknessMap:w.sheenColorMap?x=w.sheenColorMap:w.sheenRoughnessMap&&(x=w.sheenRoughnessMap),void 0!==x&&(x.isWebGLRenderTarget&&(x=x.texture),!0===x.matrixAutoUpdate&&x.updateMatrix(),y.uvTransform.value.copy(x.matrix)),w.aoMap?M=w.aoMap:w.lightMap&&(M=w.lightMap),void 0!==M&&(M.isWebGLRenderTarget&&(M=M.texture),!0===M.matrixAutoUpdate&&M.updateMatrix(),y.uv2Transform.value.copy(M.matrix))}return{refreshFogUniforms:function t(y,w){y.fogColor.value.copy(w.color),w.isFog?(y.fogNear.value=w.near,y.fogFar.value=w.far):w.isFogExp2&&(y.fogDensity.value=w.density)},refreshMaterialUniforms:function i(y,w,C,x,M){w.isMeshBasicMaterial||w.isMeshLambertMaterial?r(y,w):w.isMeshToonMaterial?(r(y,w),function u(y,w){w.gradientMap&&(y.gradientMap.value=w.gradientMap)}(y,w)):w.isMeshPhongMaterial?(r(y,w),function l(y,w){y.specular.value.copy(w.specular),y.shininess.value=Math.max(w.shininess,1e-4)}(y,w)):w.isMeshStandardMaterial?(r(y,w),function f(y,w){y.roughness.value=w.roughness,y.metalness.value=w.metalness,w.roughnessMap&&(y.roughnessMap.value=w.roughnessMap),w.metalnessMap&&(y.metalnessMap.value=w.metalnessMap),e.get(w).envMap&&(y.envMapIntensity.value=w.envMapIntensity)}(y,w),w.isMeshPhysicalMaterial&&function p(y,w,C){y.ior.value=w.ior,w.sheen>0&&(y.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),y.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(y.sheenColorMap.value=w.sheenColorMap),w.sheenRoughnessMap&&(y.sheenRoughnessMap.value=w.sheenRoughnessMap)),w.clearcoat>0&&(y.clearcoat.value=w.clearcoat,y.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(y.clearcoatMap.value=w.clearcoatMap),w.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap),w.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),y.clearcoatNormalMap.value=w.clearcoatNormalMap,1===w.side&&y.clearcoatNormalScale.value.negate())),w.iridescence>0&&(y.iridescence.value=w.iridescence,y.iridescenceIOR.value=w.iridescenceIOR,y.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(y.iridescenceMap.value=w.iridescenceMap),w.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=w.iridescenceThicknessMap)),w.transmission>0&&(y.transmission.value=w.transmission,y.transmissionSamplerMap.value=C.texture,y.transmissionSamplerSize.value.set(C.width,C.height),w.transmissionMap&&(y.transmissionMap.value=w.transmissionMap),y.thickness.value=w.thickness,w.thicknessMap&&(y.thicknessMap.value=w.thicknessMap),y.attenuationDistance.value=w.attenuationDistance,y.attenuationColor.value.copy(w.attenuationColor)),y.specularIntensity.value=w.specularIntensity,y.specularColor.value.copy(w.specularColor),w.specularIntensityMap&&(y.specularIntensityMap.value=w.specularIntensityMap),w.specularColorMap&&(y.specularColorMap.value=w.specularColorMap)}(y,w,M)):w.isMeshMatcapMaterial?(r(y,w),function g(y,w){w.matcap&&(y.matcap.value=w.matcap)}(y,w)):w.isMeshDepthMaterial?r(y,w):w.isMeshDistanceMaterial?(r(y,w),function _(y,w){y.referencePosition.value.copy(w.referencePosition),y.nearDistance.value=w.nearDistance,y.farDistance.value=w.farDistance}(y,w)):w.isMeshNormalMaterial?r(y,w):w.isLineBasicMaterial?(function s(y,w){y.diffuse.value.copy(w.color),y.opacity.value=w.opacity}(y,w),w.isLineDashedMaterial&&function o(y,w){y.dashSize.value=w.dashSize,y.totalSize.value=w.dashSize+w.gapSize,y.scale.value=w.scale}(y,w)):w.isPointsMaterial?function a(y,w,C,x){let M;y.diffuse.value.copy(w.color),y.opacity.value=w.opacity,y.size.value=w.size*C,y.scale.value=.5*x,w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest),w.map?M=w.map:w.alphaMap&&(M=w.alphaMap),void 0!==M&&(!0===M.matrixAutoUpdate&&M.updateMatrix(),y.uvTransform.value.copy(M.matrix))}(y,w,C,x):w.isSpriteMaterial?function c(y,w){let C;y.diffuse.value.copy(w.color),y.opacity.value=w.opacity,y.rotation.value=w.rotation,w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest),w.map?C=w.map:w.alphaMap&&(C=w.alphaMap),void 0!==C&&(!0===C.matrixAutoUpdate&&C.updateMatrix(),y.uvTransform.value.copy(C.matrix))}(y,w):w.isShadowMaterial?(y.color.value.copy(w.color),y.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}}}function THe(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function g(x,M,T){const I=x.value;if(void 0===T[M])return T[M]="number"==typeof I?I:I.clone(),!0;if("number"==typeof I){if(T[M]!==I)return T[M]=I,!0}else{const F=T[M];if(!1===F.equals(I))return F.copy(I),!0}return!1}function y(x){const M=x.value,T={boundary:0,storage:0};return"number"==typeof M?(T.boundary=4,T.storage=4):M.isVector2?(T.boundary=8,T.storage=8):M.isVector3||M.isColor?(T.boundary=16,T.storage=12):M.isVector4?(T.boundary=16,T.storage=16):M.isMatrix3?(T.boundary=48,T.storage=48):M.isMatrix4?(T.boundary=64,T.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),T}function w(x){const M=x.target;M.removeEventListener("dispose",w);const T=o.indexOf(M.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(r[M.id]),delete r[M.id],delete s[M.id]}return{bind:function c(x,M){i.uniformBlockBinding(x,M.program)},update:function l(x,M){let T=r[x.id];void 0===T&&(function _(x){const M=x.uniforms;let T=0;let F=0;for(let P=0,R=M.length;P<R;P++){const k=M[P],W=y(k);if(k.__data=new Float32Array(W.storage/Float32Array.BYTES_PER_ELEMENT),k.__offset=T,P>0){F=T%16;const re=16-F;0!==F&&re-W.boundary<0&&(T+=16-F,k.__offset=T)}T+=W.storage}F=T%16,F>0&&(T+=16-F),x.__size=T,x.__cache={}}(x),T=function u(x){const M=function f(){for(let x=0;x<a;x++)if(-1===o.indexOf(x))return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();x.__bindingPointIndex=M;const T=n.createBuffer(),I=x.__size,F=x.usage;return n.bindBuffer(35345,T),n.bufferData(35345,I,F),n.bindBuffer(35345,null),n.bindBufferBase(35345,M,T),T}(x),r[x.id]=T,x.addEventListener("dispose",w)),i.updateUBOMapping(x,M.program);const F=e.render.frame;s[x.id]!==F&&(function p(x){const T=x.uniforms,I=x.__cache;n.bindBuffer(35345,r[x.id]);for(let F=0,P=T.length;F<P;F++){const R=T[F];if(!0===g(R,F,I)){const k=R.value,W=R.__offset;"number"==typeof k?(R.__data[0]=k,n.bufferSubData(35345,W,R.__data)):(R.value.isMatrix3?(R.__data[0]=R.value.elements[0],R.__data[1]=R.value.elements[1],R.__data[2]=R.value.elements[2],R.__data[3]=R.value.elements[0],R.__data[4]=R.value.elements[3],R.__data[5]=R.value.elements[4],R.__data[6]=R.value.elements[5],R.__data[7]=R.value.elements[0],R.__data[8]=R.value.elements[6],R.__data[9]=R.value.elements[7],R.__data[10]=R.value.elements[8],R.__data[11]=R.value.elements[0]):k.toArray(R.__data),n.bufferSubData(35345,W,R.__data))}}n.bindBuffer(35345,null)}(x),s[x.id]=F)},dispose:function C(){for(const x in r)n.deleteBuffer(r[x]);o=[],r={},s={}}}}function Tee(n={}){this.isWebGLRenderer=!0;const e=void 0!==n.canvas?n.canvas:function LHe(){const n=J9("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,i=void 0===n.depth||n.depth,r=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,c=void 0!==n.powerPreference?n.powerPreference:"default",l=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let f=null,p=null;const g=[],_=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=$h,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const y=this;let w=!1,C=0,x=0,M=null,T=-1,I=null;const F=new xo,P=new xo;let R=null,k=e.width,W=e.height,re=1,Le=null,me=null;const Q=new xo(0,0,k,W),he=new xo(0,0,k,W);let K=!1;const ae=new UF;let fe=!1,de=!1,ke=null;const et=new Ui,Fe=new Qt,wt=new ge,ut={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function It(){return null===M?re:1}let an,Sn,cn,Ti,Ot,Rt,vn,qn,En,Cn,Un,fi,ar,us,Oe,ve,Tt,gn,bn,In,wi,De,Jt,ln,xt=t;function Zt(Pe,Et){for(let Wt=0;Wt<Pe.length;Wt++){const en=e.getContext(Pe[Wt],Et);if(null!==en)return en}return null}try{const Pe={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:c,failIfMajorPerformanceCaveat:l};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r144"),e.addEventListener("webglcontextlost",er,!1),e.addEventListener("webglcontextrestored",kr,!1),e.addEventListener("webglcontextcreationerror",No,!1),null===xt){const Et=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&Et.shift(),xt=Zt(Et,Pe),null===xt)throw Zt(Et)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===xt.getShaderPrecisionFormat&&(xt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Pe){throw console.error("THREE.WebGLRenderer: "+Pe.message),Pe}function Wn(){an=new Gke(xt),Sn=new Hke(xt,an,n),an.init(Sn),De=new bHe(xt,an,Sn),cn=new wHe(xt,an,Sn),Ti=new jke,Ot=new lHe,Rt=new CHe(xt,an,cn,Ot,Sn,De,Ti),vn=new Oke(y),qn=new Uke(y),En=new kRe(xt,Sn),Jt=new kke(xt,an,En,Sn),Cn=new Qke(xt,En,Ti,Jt),Un=new Xke(xt,Cn,En,Ti),bn=new Kke(xt,Sn,Rt),ve=new zke(Ot),fi=new cHe(y,vn,qn,an,Sn,Jt,ve),ar=new EHe(y,Ot),us=new hHe,Oe=new AHe(an,Sn),gn=new Fke(y,vn,cn,Un,u,o),Tt=new yHe(y,Un,Sn),ln=new THe(xt,Ti,Sn,cn),In=new Pke(xt,an,Ti,Sn),wi=new Wke(xt,an,Ti,Sn),Ti.programs=fi.programs,y.capabilities=Sn,y.extensions=an,y.properties=Ot,y.renderLists=us,y.shadowMap=Tt,y.state=cn,y.info=Ti}Wn();const jn=new SHe(y,xt);function er(Pe){Pe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function kr(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const Pe=Ti.autoReset,Et=Tt.enabled,Wt=Tt.autoUpdate,bt=Tt.needsUpdate,en=Tt.type;Wn(),Ti.autoReset=Pe,Tt.enabled=Et,Tt.autoUpdate=Wt,Tt.needsUpdate=bt,Tt.type=en}function No(Pe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Pe.statusMessage)}function at(Pe){const Et=Pe.target;Et.removeEventListener("dispose",at),function Bn(Pe){(function Ht(Pe){const Et=Ot.get(Pe).programs;void 0!==Et&&(Et.forEach(function(Wt){fi.releaseProgram(Wt)}),Pe.isShaderMaterial&&fi.releaseShaderCache(Pe))})(Pe),Ot.remove(Pe)}(Et)}this.xr=jn,this.getContext=function(){return xt},this.getContextAttributes=function(){return xt.getContextAttributes()},this.forceContextLoss=function(){const Pe=an.get("WEBGL_lose_context");Pe&&Pe.loseContext()},this.forceContextRestore=function(){const Pe=an.get("WEBGL_lose_context");Pe&&Pe.restoreContext()},this.getPixelRatio=function(){return re},this.setPixelRatio=function(Pe){void 0!==Pe&&(re=Pe,this.setSize(k,W,!1))},this.getSize=function(Pe){return Pe.set(k,W)},this.setSize=function(Pe,Et,Wt){jn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(k=Pe,W=Et,e.width=Math.floor(Pe*re),e.height=Math.floor(Et*re),!1!==Wt&&(e.style.width=Pe+"px",e.style.height=Et+"px"),this.setViewport(0,0,Pe,Et))},this.getDrawingBufferSize=function(Pe){return Pe.set(k*re,W*re).floor()},this.setDrawingBufferSize=function(Pe,Et,Wt){k=Pe,W=Et,re=Wt,e.width=Math.floor(Pe*Wt),e.height=Math.floor(Et*Wt),this.setViewport(0,0,Pe,Et)},this.getCurrentViewport=function(Pe){return Pe.copy(F)},this.getViewport=function(Pe){return Pe.copy(Q)},this.setViewport=function(Pe,Et,Wt,bt){Pe.isVector4?Q.set(Pe.x,Pe.y,Pe.z,Pe.w):Q.set(Pe,Et,Wt,bt),cn.viewport(F.copy(Q).multiplyScalar(re).floor())},this.getScissor=function(Pe){return Pe.copy(he)},this.setScissor=function(Pe,Et,Wt,bt){Pe.isVector4?he.set(Pe.x,Pe.y,Pe.z,Pe.w):he.set(Pe,Et,Wt,bt),cn.scissor(P.copy(he).multiplyScalar(re).floor())},this.getScissorTest=function(){return K},this.setScissorTest=function(Pe){cn.setScissorTest(K=Pe)},this.setOpaqueSort=function(Pe){Le=Pe},this.setTransparentSort=function(Pe){me=Pe},this.getClearColor=function(Pe){return Pe.copy(gn.getClearColor())},this.setClearColor=function(){gn.setClearColor.apply(gn,arguments)},this.getClearAlpha=function(){return gn.getClearAlpha()},this.setClearAlpha=function(){gn.setClearAlpha.apply(gn,arguments)},this.clear=function(Pe=!0,Et=!0,Wt=!0){let bt=0;Pe&&(bt|=16384),Et&&(bt|=256),Wt&&(bt|=1024),xt.clear(bt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",er,!1),e.removeEventListener("webglcontextrestored",kr,!1),e.removeEventListener("webglcontextcreationerror",No,!1),us.dispose(),Oe.dispose(),Ot.dispose(),vn.dispose(),qn.dispose(),Un.dispose(),Jt.dispose(),ln.dispose(),fi.dispose(),jn.dispose(),jn.removeEventListener("sessionstart",As),jn.removeEventListener("sessionend",cc),ke&&(ke.dispose(),ke=null),e1.stop()},this.renderBufferDirect=function(Pe,Et,Wt,bt,en,Zi){null===Et&&(Et=ut);const xr=en.isMesh&&en.matrixWorld.determinant()<0,vs=function ll(Pe,Et,Wt,bt,en){!0!==Et.isScene&&(Et=ut),Rt.resetTextureUnits();const Zi=Et.fog,vs=null===M?y.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:$h,Er=(bt.isMeshStandardMaterial?qn:vn).get(bt.envMap||(bt.isMeshStandardMaterial?Et.environment:null)),Uo=!0===bt.vertexColors&&!!Wt.attributes.color&&4===Wt.attributes.color.itemSize,ro=!!bt.normalMap&&!!Wt.attributes.tangent,so=!!Wt.morphAttributes.position,W1=!!Wt.morphAttributes.normal,fp=!!Wt.morphAttributes.color,Rm=bt.toneMapped?y.toneMapping:0,Fm=Wt.morphAttributes.position||Wt.morphAttributes.normal||Wt.morphAttributes.color,lh=void 0!==Fm?Fm.length:0,So=Ot.get(bt),km=p.state.lights;!0!==fe||!0!==de&&Pe===I||ve.setState(bt,Pe,Pe===I&&bt.id===T);let Dc=!1;bt.version===So.__version?(So.needsLights&&So.lightsStateVersion!==km.state.version||So.outputEncoding!==vs||en.isInstancedMesh&&!1===So.instancing||!en.isInstancedMesh&&!0===So.instancing||en.isSkinnedMesh&&!1===So.skinning||!en.isSkinnedMesh&&!0===So.skinning||So.envMap!==Er||!0===bt.fog&&So.fog!==Zi||void 0!==So.numClippingPlanes&&(So.numClippingPlanes!==ve.numPlanes||So.numIntersection!==ve.numIntersection)||So.vertexAlphas!==Uo||So.vertexTangents!==ro||So.morphTargets!==so||So.morphNormals!==W1||So.morphColors!==fp||So.toneMapping!==Rm||!0===Sn.isWebGL2&&So.morphTargetsCount!==lh)&&(Dc=!0):(Dc=!0,So.__version=bt.version);let nu=So.currentProgram;!0===Dc&&(nu=Hf(bt,Et,en));let B6=!1,my=!1,kV=!1;const jl=nu.getUniforms(),dp=So.uniforms;if(cn.useProgram(nu.program)&&(B6=!0,my=!0,kV=!0),bt.id!==T&&(T=bt.id,my=!0),B6||I!==Pe){if(jl.setValue(xt,"projectionMatrix",Pe.projectionMatrix),Sn.logarithmicDepthBuffer&&jl.setValue(xt,"logDepthBufFC",2/(Math.log(Pe.far+1)/Math.LN2)),I!==Pe&&(I=Pe,my=!0,kV=!0),bt.isShaderMaterial||bt.isMeshPhongMaterial||bt.isMeshToonMaterial||bt.isMeshStandardMaterial||bt.envMap){const v4=jl.map.cameraPosition;void 0!==v4&&v4.setValue(xt,wt.setFromMatrixPosition(Pe.matrixWorld))}(bt.isMeshPhongMaterial||bt.isMeshToonMaterial||bt.isMeshLambertMaterial||bt.isMeshBasicMaterial||bt.isMeshStandardMaterial||bt.isShaderMaterial)&&jl.setValue(xt,"isOrthographic",!0===Pe.isOrthographicCamera),(bt.isMeshPhongMaterial||bt.isMeshToonMaterial||bt.isMeshLambertMaterial||bt.isMeshBasicMaterial||bt.isMeshStandardMaterial||bt.isShaderMaterial||bt.isShadowMaterial||en.isSkinnedMesh)&&jl.setValue(xt,"viewMatrix",Pe.matrixWorldInverse)}if(en.isSkinnedMesh){jl.setOptional(xt,en,"bindMatrix"),jl.setOptional(xt,en,"bindMatrixInverse");const v4=en.skeleton;v4&&(Sn.floatVertexTextures?(null===v4.boneTexture&&v4.computeBoneTexture(),jl.setValue(xt,"boneTexture",v4.boneTexture,Rt),jl.setValue(xt,"boneTextureSize",v4.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const PV=Wt.morphAttributes;if((void 0!==PV.position||void 0!==PV.normal||void 0!==PV.color&&!0===Sn.isWebGL2)&&bn.update(en,Wt,bt,nu),(my||So.receiveShadow!==en.receiveShadow)&&(So.receiveShadow=en.receiveShadow,jl.setValue(xt,"receiveShadow",en.receiveShadow)),bt.isMeshGouraudMaterial&&null!==bt.envMap&&(dp.envMap.value=Er,dp.flipEnvMap.value=Er.isCubeTexture&&!1===Er.isRenderTargetTexture?-1:1),my&&(jl.setValue(xt,"toneMappingExposure",y.toneMappingExposure),So.needsLights&&function E3(Pe,Et){Pe.ambientLightColor.needsUpdate=Et,Pe.lightProbe.needsUpdate=Et,Pe.directionalLights.needsUpdate=Et,Pe.directionalLightShadows.needsUpdate=Et,Pe.pointLights.needsUpdate=Et,Pe.pointLightShadows.needsUpdate=Et,Pe.spotLights.needsUpdate=Et,Pe.spotLightShadows.needsUpdate=Et,Pe.rectAreaLights.needsUpdate=Et,Pe.hemisphereLights.needsUpdate=Et}(dp,kV),Zi&&!0===bt.fog&&ar.refreshFogUniforms(dp,Zi),ar.refreshMaterialUniforms(dp,bt,re,W,ke),Bx.upload(xt,So.uniformsList,dp,Rt)),bt.isShaderMaterial&&!0===bt.uniformsNeedUpdate&&(Bx.upload(xt,So.uniformsList,dp,Rt),bt.uniformsNeedUpdate=!1),bt.isSpriteMaterial&&jl.setValue(xt,"center",en.center),jl.setValue(xt,"modelViewMatrix",en.modelViewMatrix),jl.setValue(xt,"normalMatrix",en.normalMatrix),jl.setValue(xt,"modelMatrix",en.matrixWorld),bt.isShaderMaterial||bt.isRawShaderMaterial){const v4=bt.uniformsGroups;for(let HV=0,cRt=v4.length;HV<cRt;HV++)if(Sn.isWebGL2){const p6e=v4[HV];ln.update(p6e,nu),ln.bind(p6e,nu)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return nu}(Pe,Et,Wt,bt,en);cn.setMaterial(bt,xr);let Er=Wt.index;const Uo=Wt.attributes.position;if(null===Er){if(void 0===Uo||0===Uo.count)return}else if(0===Er.count)return;let ro=1;!0===bt.wireframe&&(Er=Cn.getWireframeAttribute(Wt),ro=2),Jt.setup(en,bt,vs,Wt,Er);let so,W1=In;null!==Er&&(so=En.get(Er),W1=wi,W1.setIndex(so));const fp=null!==Er?Er.count:Uo.count,Rm=Wt.drawRange.start*ro,Fm=Wt.drawRange.count*ro,lh=null!==Zi?Zi.start*ro:0,So=null!==Zi?Zi.count*ro:1/0,km=Math.max(Rm,lh),Dc=Math.min(fp,Rm+Fm,lh+So)-1,nu=Math.max(0,Dc-km+1);if(0!==nu){if(en.isMesh)!0===bt.wireframe?(cn.setLineWidth(bt.wireframeLinewidth*It()),W1.setMode(1)):W1.setMode(4);else if(en.isLine){let B6=bt.linewidth;void 0===B6&&(B6=1),cn.setLineWidth(B6*It()),W1.setMode(en.isLineSegments?1:en.isLineLoop?2:3)}else en.isPoints?W1.setMode(0):en.isSprite&&W1.setMode(4);if(en.isInstancedMesh)W1.renderInstances(km,nu,en.count);else if(Wt.isInstancedBufferGeometry){const B6=Math.min(Wt.instanceCount,Wt._maxInstanceCount);W1.renderInstances(km,nu,B6)}else W1.render(km,nu)}},this.compile=function(Pe,Et){function Wt(bt,en,Zi){!0===bt.transparent&&2===bt.side?(bt.side=1,bt.needsUpdate=!0,Hf(bt,en,Zi),bt.side=0,bt.needsUpdate=!0,Hf(bt,en,Zi),bt.side=2):Hf(bt,en,Zi)}p=Oe.get(Pe),p.init(),_.push(p),Pe.traverseVisible(function(bt){bt.isLight&&bt.layers.test(Et.layers)&&(p.pushLight(bt),bt.castShadow&&p.pushShadow(bt))}),p.setupLights(y.physicallyCorrectLights),Pe.traverse(function(bt){const en=bt.material;if(en)if(Array.isArray(en))for(let Zi=0;Zi<en.length;Zi++)Wt(en[Zi],Pe,bt);else Wt(en,Pe,bt)}),_.pop(),p=null};let Nn=null;function As(){e1.stop()}function cc(){e1.start()}const e1=new JJ;function U1(Pe,Et,Wt,bt){if(!1===Pe.visible)return;if(Pe.layers.test(Et.layers))if(Pe.isGroup)Wt=Pe.renderOrder;else if(Pe.isLOD)!0===Pe.autoUpdate&&Pe.update(Et);else if(Pe.isLight)p.pushLight(Pe),Pe.castShadow&&p.pushShadow(Pe);else if(Pe.isSprite){if(!Pe.frustumCulled||ae.intersectsSprite(Pe)){bt&&wt.setFromMatrixPosition(Pe.matrixWorld).applyMatrix4(et);const xr=Un.update(Pe),vs=Pe.material;vs.visible&&f.push(Pe,xr,vs,Wt,wt.z,null)}}else if((Pe.isMesh||Pe.isLine||Pe.isPoints)&&(Pe.isSkinnedMesh&&Pe.skeleton.frame!==Ti.render.frame&&(Pe.skeleton.update(),Pe.skeleton.frame=Ti.render.frame),!Pe.frustumCulled||ae.intersectsObject(Pe))){bt&&wt.setFromMatrixPosition(Pe.matrixWorld).applyMatrix4(et);const xr=Un.update(Pe),vs=Pe.material;if(Array.isArray(vs)){const Er=xr.groups;for(let Uo=0,ro=Er.length;Uo<ro;Uo++){const so=Er[Uo],W1=vs[so.materialIndex];W1&&W1.visible&&f.push(Pe,xr,W1,Wt,wt.z,so)}}else vs.visible&&f.push(Pe,xr,vs,Wt,wt.z,null)}const Zi=Pe.children;for(let xr=0,vs=Zi.length;xr<vs;xr++)U1(Zi[xr],Et,Wt,bt)}function Vo(Pe,Et,Wt,bt){const en=Pe.opaque,Zi=Pe.transmissive,xr=Pe.transparent;p.setupLightsView(Wt),Zi.length>0&&function G1(Pe,Et,Wt){const bt=Sn.isWebGL2;null===ke&&(ke=new z4(1,1,{generateMipmaps:!0,type:an.has("EXT_color_buffer_half_float")?O0:W8,minFilter:Rd,samples:bt&&!0===s?4:0})),y.getDrawingBufferSize(Fe),bt?ke.setSize(Fe.x,Fe.y):ke.setSize(ox(Fe.x),ox(Fe.y));const en=y.getRenderTarget();y.setRenderTarget(ke),y.clear();const Zi=y.toneMapping;y.toneMapping=0,Q1(Pe,Et,Wt),y.toneMapping=Zi,Rt.updateMultisampleRenderTarget(ke),Rt.updateRenderTargetMipmap(ke),y.setRenderTarget(en)}(en,Et,Wt),bt&&cn.viewport(F.copy(bt)),en.length>0&&Q1(en,Et,Wt),Zi.length>0&&Q1(Zi,Et,Wt),xr.length>0&&Q1(xr,Et,Wt),cn.buffers.depth.setTest(!0),cn.buffers.depth.setMask(!0),cn.buffers.color.setMask(!0),cn.setPolygonOffset(!1)}function Q1(Pe,Et,Wt){const bt=!0===Et.isScene?Et.overrideMaterial:null;for(let en=0,Zi=Pe.length;en<Zi;en++){const xr=Pe[en],vs=xr.object,Er=xr.geometry,Uo=null===bt?xr.material:bt,ro=xr.group;vs.layers.test(Wt.layers)&&Wl(vs,Et,Wt,Er,Uo,ro)}}function Wl(Pe,Et,Wt,bt,en,Zi){Pe.onBeforeRender(y,Et,Wt,bt,en,Zi),Pe.modelViewMatrix.multiplyMatrices(Wt.matrixWorldInverse,Pe.matrixWorld),Pe.normalMatrix.getNormalMatrix(Pe.modelViewMatrix),en.onBeforeRender(y,Et,Wt,bt,Pe,Zi),!0===en.transparent&&2===en.side?(en.side=1,en.needsUpdate=!0,y.renderBufferDirect(Wt,Et,bt,en,Pe,Zi),en.side=0,en.needsUpdate=!0,y.renderBufferDirect(Wt,Et,bt,en,Pe,Zi),en.side=2):y.renderBufferDirect(Wt,Et,bt,en,Pe,Zi),Pe.onAfterRender(y,Et,Wt,bt,en,Zi)}function Hf(Pe,Et,Wt){!0!==Et.isScene&&(Et=ut);const bt=Ot.get(Pe),en=p.state.lights,xr=en.state.version,vs=fi.getParameters(Pe,en.state,p.state.shadowsArray,Et,Wt),Er=fi.getProgramCacheKey(vs);let Uo=bt.programs;bt.environment=Pe.isMeshStandardMaterial?Et.environment:null,bt.fog=Et.fog,bt.envMap=(Pe.isMeshStandardMaterial?qn:vn).get(Pe.envMap||bt.environment),void 0===Uo&&(Pe.addEventListener("dispose",at),Uo=new Map,bt.programs=Uo);let ro=Uo.get(Er);if(void 0!==ro){if(bt.currentProgram===ro&&bt.lightsStateVersion===xr)return hp(Pe,vs),ro}else vs.uniforms=fi.getUniforms(Pe),Pe.onBuild(Wt,vs,y),Pe.onBeforeCompile(vs,y),ro=fi.acquireProgram(vs,Er),Uo.set(Er,ro),bt.uniforms=vs.uniforms;const so=bt.uniforms;(!Pe.isShaderMaterial&&!Pe.isRawShaderMaterial||!0===Pe.clipping)&&(so.clippingPlanes=ve.uniform),hp(Pe,vs),bt.needsLights=function n0(Pe){return Pe.isMeshLambertMaterial||Pe.isMeshToonMaterial||Pe.isMeshPhongMaterial||Pe.isMeshStandardMaterial||Pe.isShadowMaterial||Pe.isShaderMaterial&&!0===Pe.lights}(Pe),bt.lightsStateVersion=xr,bt.needsLights&&(so.ambientLightColor.value=en.state.ambient,so.lightProbe.value=en.state.probe,so.directionalLights.value=en.state.directional,so.directionalLightShadows.value=en.state.directionalShadow,so.spotLights.value=en.state.spot,so.spotLightShadows.value=en.state.spotShadow,so.rectAreaLights.value=en.state.rectArea,so.ltc_1.value=en.state.rectAreaLTC1,so.ltc_2.value=en.state.rectAreaLTC2,so.pointLights.value=en.state.point,so.pointLightShadows.value=en.state.pointShadow,so.hemisphereLights.value=en.state.hemi,so.directionalShadowMap.value=en.state.directionalShadowMap,so.directionalShadowMatrix.value=en.state.directionalShadowMatrix,so.spotShadowMap.value=en.state.spotShadowMap,so.spotLightMatrix.value=en.state.spotLightMatrix,so.spotLightMap.value=en.state.spotLightMap,so.pointShadowMap.value=en.state.pointShadowMap,so.pointShadowMatrix.value=en.state.pointShadowMatrix);const W1=ro.getUniforms(),fp=Bx.seqWithValue(W1.seq,so);return bt.currentProgram=ro,bt.uniformsList=fp,ro}function hp(Pe,Et){const Wt=Ot.get(Pe);Wt.outputEncoding=Et.outputEncoding,Wt.instancing=Et.instancing,Wt.skinning=Et.skinning,Wt.morphTargets=Et.morphTargets,Wt.morphNormals=Et.morphNormals,Wt.morphColors=Et.morphColors,Wt.morphTargetsCount=Et.morphTargetsCount,Wt.numClippingPlanes=Et.numClippingPlanes,Wt.numIntersection=Et.numClipIntersection,Wt.vertexAlphas=Et.vertexAlphas,Wt.vertexTangents=Et.vertexTangents,Wt.toneMapping=Et.toneMapping}e1.setAnimationLoop(function Hn(Pe){Nn&&Nn(Pe)}),typeof self<"u"&&e1.setContext(self),this.setAnimationLoop=function(Pe){Nn=Pe,jn.setAnimationLoop(Pe),null===Pe?e1.stop():e1.start()},jn.addEventListener("sessionstart",As),jn.addEventListener("sessionend",cc),this.render=function(Pe,Et){if(void 0===Et||!0===Et.isCamera){if(!0!==w){if(!0===Pe.matrixWorldAutoUpdate&&Pe.updateMatrixWorld(),null===Et.parent&&!0===Et.matrixWorldAutoUpdate&&Et.updateMatrixWorld(),!0===jn.enabled&&!0===jn.isPresenting&&(!0===jn.cameraAutoUpdate&&jn.updateCamera(Et),Et=jn.getCamera()),!0===Pe.isScene&&Pe.onBeforeRender(y,Pe,Et,M),p=Oe.get(Pe,_.length),p.init(),_.push(p),et.multiplyMatrices(Et.projectionMatrix,Et.matrixWorldInverse),ae.setFromProjectionMatrix(et),de=this.localClippingEnabled,fe=ve.init(this.clippingPlanes,de,Et),f=us.get(Pe,g.length),f.init(),g.push(f),U1(Pe,Et,0,y.sortObjects),f.finish(),!0===y.sortObjects&&f.sort(Le,me),!0===fe&&ve.beginShadows(),Tt.render(p.state.shadowsArray,Pe,Et),!0===fe&&ve.endShadows(),!0===this.info.autoReset&&this.info.reset(),gn.render(f,Pe),p.setupLights(y.physicallyCorrectLights),Et.isArrayCamera){const bt=Et.cameras;for(let en=0,Zi=bt.length;en<Zi;en++){const xr=bt[en];Vo(f,Pe,xr,xr.viewport)}}else Vo(f,Pe,Et);null!==M&&(Rt.updateMultisampleRenderTarget(M),Rt.updateRenderTargetMipmap(M)),!0===Pe.isScene&&Pe.onAfterRender(y,Pe,Et),Jt.resetDefaultState(),T=-1,I=null,_.pop(),p=_.length>0?_[_.length-1]:null,g.pop(),f=g.length>0?g[g.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(Pe,Et,Wt){Ot.get(Pe.texture).__webglTexture=Et,Ot.get(Pe.depthTexture).__webglTexture=Wt;const bt=Ot.get(Pe);bt.__hasExternalTextures=!0,bt.__hasExternalTextures&&(bt.__autoAllocateDepthBuffer=void 0===Wt,bt.__autoAllocateDepthBuffer||!0===an.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),bt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Pe,Et){const Wt=Ot.get(Pe);Wt.__webglFramebuffer=Et,Wt.__useDefaultFramebuffer=void 0===Et},this.setRenderTarget=function(Pe,Et=0,Wt=0){M=Pe,C=Et,x=Wt;let bt=!0;if(Pe){const Er=Ot.get(Pe);void 0!==Er.__useDefaultFramebuffer?(cn.bindFramebuffer(36160,null),bt=!1):void 0===Er.__webglFramebuffer?Rt.setupRenderTarget(Pe):Er.__hasExternalTextures&&Rt.rebindTextures(Pe,Ot.get(Pe.texture).__webglTexture,Ot.get(Pe.depthTexture).__webglTexture)}let en=null,Zi=!1,xr=!1;if(Pe){const Er=Pe.texture;(Er.isData3DTexture||Er.isDataArrayTexture)&&(xr=!0);const Uo=Ot.get(Pe).__webglFramebuffer;Pe.isWebGLCubeRenderTarget?(en=Uo[Et],Zi=!0):en=Sn.isWebGL2&&Pe.samples>0&&!1===Rt.useMultisampledRTT(Pe)?Ot.get(Pe).__webglMultisampledFramebuffer:Uo,F.copy(Pe.viewport),P.copy(Pe.scissor),R=Pe.scissorTest}else F.copy(Q).multiplyScalar(re).floor(),P.copy(he).multiplyScalar(re).floor(),R=K;if(cn.bindFramebuffer(36160,en)&&Sn.drawBuffers&&bt&&cn.drawBuffers(Pe,en),cn.viewport(F),cn.scissor(P),cn.setScissorTest(R),Zi){const Er=Ot.get(Pe.texture);xt.framebufferTexture2D(36160,36064,34069+Et,Er.__webglTexture,Wt)}else if(xr){const Er=Ot.get(Pe.texture);xt.framebufferTextureLayer(36160,36064,Er.__webglTexture,Wt||0,Et||0)}T=-1},this.readRenderTargetPixels=function(Pe,Et,Wt,bt,en,Zi,xr){if(!Pe||!Pe.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let vs=Ot.get(Pe).__webglFramebuffer;if(Pe.isWebGLCubeRenderTarget&&void 0!==xr&&(vs=vs[xr]),vs){cn.bindFramebuffer(36160,vs);try{const Er=Pe.texture,Uo=Er.format,ro=Er.type;if(Uo!==Fu&&De.convert(Uo)!==xt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const so=ro===O0&&(an.has("EXT_color_buffer_half_float")||Sn.isWebGL2&&an.has("EXT_color_buffer_float"));if(!(ro===W8||De.convert(ro)===xt.getParameter(35738)||ro===P4&&(Sn.isWebGL2||an.has("OES_texture_float")||an.has("WEBGL_color_buffer_float"))||so))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Et>=0&&Et<=Pe.width-bt&&Wt>=0&&Wt<=Pe.height-en&&xt.readPixels(Et,Wt,bt,en,De.convert(Uo),De.convert(ro),Zi)}finally{const Er=null!==M?Ot.get(M).__webglFramebuffer:null;cn.bindFramebuffer(36160,Er)}}},this.copyFramebufferToTexture=function(Pe,Et,Wt=0){const bt=Math.pow(2,-Wt),en=Math.floor(Et.image.width*bt),Zi=Math.floor(Et.image.height*bt);Rt.setTexture2D(Et,0),xt.copyTexSubImage2D(3553,Wt,0,0,Pe.x,Pe.y,en,Zi),cn.unbindTexture()},this.copyTextureToTexture=function(Pe,Et,Wt,bt=0){const en=Et.image.width,Zi=Et.image.height,xr=De.convert(Wt.format),vs=De.convert(Wt.type);Rt.setTexture2D(Wt,0),xt.pixelStorei(37440,Wt.flipY),xt.pixelStorei(37441,Wt.premultiplyAlpha),xt.pixelStorei(3317,Wt.unpackAlignment),Et.isDataTexture?xt.texSubImage2D(3553,bt,Pe.x,Pe.y,en,Zi,xr,vs,Et.image.data):Et.isCompressedTexture?xt.compressedTexSubImage2D(3553,bt,Pe.x,Pe.y,Et.mipmaps[0].width,Et.mipmaps[0].height,xr,Et.mipmaps[0].data):xt.texSubImage2D(3553,bt,Pe.x,Pe.y,xr,vs,Et.image),0===bt&&Wt.generateMipmaps&&xt.generateMipmap(3553),cn.unbindTexture()},this.copyTextureToTexture3D=function(Pe,Et,Wt,bt,en=0){if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Zi=Pe.max.x-Pe.min.x+1,xr=Pe.max.y-Pe.min.y+1,vs=Pe.max.z-Pe.min.z+1,Er=De.convert(bt.format),Uo=De.convert(bt.type);let ro;if(bt.isData3DTexture)Rt.setTexture3D(bt,0),ro=32879;else{if(!bt.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Rt.setTexture2DArray(bt,0),ro=35866}xt.pixelStorei(37440,bt.flipY),xt.pixelStorei(37441,bt.premultiplyAlpha),xt.pixelStorei(3317,bt.unpackAlignment);const so=xt.getParameter(3314),W1=xt.getParameter(32878),fp=xt.getParameter(3316),Rm=xt.getParameter(3315),Fm=xt.getParameter(32877),lh=Wt.isCompressedTexture?Wt.mipmaps[0]:Wt.image;xt.pixelStorei(3314,lh.width),xt.pixelStorei(32878,lh.height),xt.pixelStorei(3316,Pe.min.x),xt.pixelStorei(3315,Pe.min.y),xt.pixelStorei(32877,Pe.min.z),Wt.isDataTexture||Wt.isData3DTexture?xt.texSubImage3D(ro,en,Et.x,Et.y,Et.z,Zi,xr,vs,Er,Uo,lh.data):Wt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),xt.compressedTexSubImage3D(ro,en,Et.x,Et.y,Et.z,Zi,xr,vs,Er,lh.data)):xt.texSubImage3D(ro,en,Et.x,Et.y,Et.z,Zi,xr,vs,Er,Uo,lh),xt.pixelStorei(3314,so),xt.pixelStorei(32878,W1),xt.pixelStorei(3316,fp),xt.pixelStorei(3315,Rm),xt.pixelStorei(32877,Fm),0===en&&bt.generateMipmaps&&xt.generateMipmap(ro),cn.unbindTexture()},this.initTexture=function(Pe){Pe.isCubeTexture?Rt.setTextureCube(Pe,0):Pe.isData3DTexture?Rt.setTexture3D(Pe,0):Pe.isDataArrayTexture?Rt.setTexture2DArray(Pe,0):Rt.setTexture2D(Pe,0),cn.unbindTexture()},this.resetState=function(){C=0,x=0,M=null,cn.reset(),Jt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class DHe extends Tee{}).prototype.isWebGL1Renderer=!0;class Rx{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Dn(e),this.near=t,this.far=i}clone(){return new Rx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Lee extends I2{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class YF{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=K3()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=K3()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=K3()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Pl=new ge;class l5{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Pl.fromBufferAttribute(this,t),Pl.applyMatrix4(e),this.setXYZ(t,Pl.x,Pl.y,Pl.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Pl.fromBufferAttribute(this,t),Pl.applyNormalMatrix(e),this.setXYZ(t,Pl.x,Pl.y,Pl.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Pl.fromBufferAttribute(this,t),Pl.transformDirection(e),this.setXYZ(t,Pl.x,Pl.y,Pl.z);return this}setX(e,t){return this.normalized&&(t=ca(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ca(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ca(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ca(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Kh(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Kh(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Kh(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Kh(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ca(t,this.array),i=ca(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ca(t,this.array),i=ca(i,this.array),r=ca(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ca(t,this.array),i=ca(i,this.array),r=ca(r,this.array),s=ca(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new qa(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new l5(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const kee=new ge,Pee=new xo,Hee=new xo,RHe=new ge,zee=new Ui;class Oee extends eo{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ui,this.bindMatrixInverse=new Ui}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new xo,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;Pee.fromBufferAttribute(r.attributes.skinIndex,e),Hee.fromBufferAttribute(r.attributes.skinWeight,e),kee.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=Hee.getComponent(s);if(0!==o){const a=Pee.getComponent(s);zee.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(RHe.copy(kee).applyMatrix4(zee),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class JF extends I2{constructor(){super(),this.isBone=!0,this.type="Bone"}}class dg extends H4{constructor(e=null,t=1,i=1,r,s,o,a,c,l=R1,u=R1,f,p){super(null,o,a,c,l,u,r,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Nee=new Ui,FHe=new Ui;class zx{constructor(e=[],t=[]){this.uuid=K3(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Ui)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Ui;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)Nee.multiplyMatrices(e[s]?e[s].matrixWorld:FHe,t[s]),Nee.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new zx(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=kJ(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new dg(t,e,e,Fu,P4);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new JF),this.bones.push(o),this.boneInverses.push((new Ui).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class h2 extends Z2{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Dn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Gee=new ge,Qee=new ge,Wee=new Ui,ek=new mx,Nx=new s5;class Gd extends I2{constructor(e=new Ar,t=new h2){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)Gee.fromBufferAttribute(t,r-1),Qee.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Gee.distanceTo(Qee);e.setAttribute("lineDistance",new ai(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Nx.copy(i.boundingSphere),Nx.applyMatrix4(r),Nx.radius+=s,!1===e.ray.intersectsSphere(Nx))return;Wee.copy(r).invert(),ek.copy(e.ray).applyMatrix4(Wee);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=new ge,u=new ge,f=new ge,p=new ge,g=this.isLineSegments?2:1,_=i.index,w=i.attributes.position;if(null!==_)for(let M=Math.max(0,o.start),T=Math.min(_.count,o.start+o.count)-1;M<T;M+=g){const I=_.getX(M),F=_.getX(M+1);if(l.fromBufferAttribute(w,I),u.fromBufferAttribute(w,F),ek.distanceSqToSegment(l,u,p,f)>c)continue;p.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(p);R<e.near||R>e.far||t.push({distance:R,point:f.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}else for(let M=Math.max(0,o.start),T=Math.min(w.count,o.start+o.count)-1;M<T;M+=g){if(l.fromBufferAttribute(w,M),u.fromBufferAttribute(w,M+1),ek.distanceSqToSegment(l,u,p,f)>c)continue;p.applyMatrix4(this.matrixWorld);const F=e.ray.origin.distanceTo(p);F<e.near||F>e.far||t.push({distance:F,point:f.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const jee=new ge,$ee=new ge;class pg extends Gd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)jee.fromBufferAttribute(t,r),$ee.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+jee.distanceTo($ee);e.setAttribute("lineDistance",new ai(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class qee extends Gd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class u5 extends Z2{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Dn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Kee=new Ui,tk=new mx,Vx=new s5,Ux=new ge;class lv extends I2{constructor(e=new Ar,t=new u5){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Vx.copy(i.boundingSphere),Vx.applyMatrix4(r),Vx.radius+=s,!1===e.ray.intersectsSphere(Vx))return;Kee.copy(r).invert(),tk.copy(e.ray).applyMatrix4(Kee);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,f=i.attributes.position;if(null!==l)for(let _=Math.max(0,o.start),y=Math.min(l.count,o.start+o.count);_<y;_++){const w=l.getX(_);Ux.fromBufferAttribute(f,w),Xee(Ux,w,c,r,e,t,this)}else for(let _=Math.max(0,o.start),y=Math.min(f.count,o.start+o.count);_<y;_++)Ux.fromBufferAttribute(f,_),Xee(Ux,_,c,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Xee(n,e,t,i,r,s,o){const a=tk.distanceSqToPoint(n);if(a<t){const c=new ge;tk.closestPointToPoint(n,c),c.applyMatrix4(i);const l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}class U0{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;o=t||e*i[s-1];let l,a=0,c=s-1;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),l=i[r]-o,l<0)a=r+1;else{if(!(l>0)){c=r;break}c=r-1}if(r=c,i[r]===o)return r/(s-1);const u=i[r];return(r+(o-u)/(i[r+1]-u))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),c=t||(o.isVector2?new Qt:new ge);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new ge,r=[],s=[],o=[],a=new ge,c=new Ui;for(let g=0;g<=e;g++)r[g]=this.getTangentAt(g/e,new ge);s[0]=new ge,o[0]=new ge;let l=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),p=Math.abs(r[0].z);u<=l&&(l=u,i.set(1,0,0)),f<=l&&(l=f,i.set(0,1,0)),p<=l&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();const _=Math.acos(tc(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(c.makeRotationAxis(a,_))}o[g].crossVectors(r[g],s[g])}if(!0===t){let g=Math.acos(tc(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(g=-g);for(let _=1;_<=e;_++)s[_].applyMatrix4(c.makeRotationAxis(r[_],g*_)),o[_].crossVectors(r[_],s[_])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class nk extends U0{constructor(e=0,t=0,i=1,r=1,s=0,o=2*Math.PI,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t){const i=t||new Qt,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=c-this.aX,g=l-this.aY;c=p*u-g*f+this.aX,l=p*f+g*u+this.aY}return i.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function ik(){let n=0,e=0,t=0,i=0;function r(s,o,a,c){n=s,e=a,t=-3*s+3*o-2*a-c,i=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,l){r(o,a,l*(a-s),l*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,l,u,f){let p=(o-s)/l-(a-s)/(l+u)+(a-o)/u,g=(a-o)/u-(c-o)/(u+f)+(c-a)/f;p*=u,g*=u,r(o,a,p,g)},calc:function(s){const o=s*s;return n+e*s+t*o+i*(o*s)}}}const Gx=new ge,rk=new ik,sk=new ik,ok=new ik;function Yee(n,e,t,i,r){const s=.5*(i-e),o=.5*(r-t),a=n*n;return(2*t-2*i+s+o)*(n*a)+(-3*t+3*i-2*s-o)*a+s*n+t}function uv(n,e,t,i){return function OHe(n,e){const t=1-n;return t*t*e}(n,e)+function NHe(n,e){return 2*(1-n)*n*e}(n,t)+function VHe(n,e){return n*n*e}(n,i)}function hv(n,e,t,i,r){return function UHe(n,e){const t=1-n;return t*t*t*e}(n,e)+function GHe(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function QHe(n,e){return 3*(1-n)*n*n*e}(n,i)+function WHe(n,e){return n*n*n*e}(n,r)}class Zee extends U0{constructor(e=new Qt,t=new Qt,i=new Qt,r=new Qt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Qt){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(hv(e,r.x,s.x,o.x,a.x),hv(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ak extends U0{constructor(e=new Qt,t=new Qt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Qt){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Qt;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Jee extends U0{constructor(e=new Qt,t=new Qt,i=new Qt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Qt){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(uv(e,r.x,s.x,o.x),uv(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class tte extends U0{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Qt){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,c=r[0===o?o:o-1],l=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(Yee(a,c.x,l.x,u.x,f.x),Yee(a,c.y,l.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new Qt).fromArray(r))}return this}}var ck=Object.freeze({__proto__:null,ArcCurve:class HHe extends nk{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class zHe extends U0{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new ge){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l,u,a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===c&&a===s-1&&(a=s-2,c=1),this.closed||a>0?l=r[(a-1)%s]:(Gx.subVectors(r[0],r[1]).add(r[0]),l=Gx);const f=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(Gx.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=Gx),"centripetal"===this.curveType||"chordal"===this.curveType){const g="chordal"===this.curveType?.5:.25;let _=Math.pow(l.distanceToSquared(f),g),y=Math.pow(f.distanceToSquared(p),g),w=Math.pow(p.distanceToSquared(u),g);y<1e-4&&(y=1),_<1e-4&&(_=y),w<1e-4&&(w=y),rk.initNonuniformCatmullRom(l.x,f.x,p.x,u.x,_,y,w),sk.initNonuniformCatmullRom(l.y,f.y,p.y,u.y,_,y,w),ok.initNonuniformCatmullRom(l.z,f.z,p.z,u.z,_,y,w)}else"catmullrom"===this.curveType&&(rk.initCatmullRom(l.x,f.x,p.x,u.x,this.tension),sk.initCatmullRom(l.y,f.y,p.y,u.y,this.tension),ok.initCatmullRom(l.z,f.z,p.z,u.z,this.tension));return i.set(rk.calc(c),sk.calc(c),ok.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new ge).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:Zee,CubicBezierCurve3:class jHe extends U0{constructor(e=new ge,t=new ge,i=new ge,r=new ge){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ge){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(hv(e,r.x,s.x,o.x,a.x),hv(e,r.y,s.y,o.y,a.y),hv(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:nk,LineCurve:ak,LineCurve3:class $He extends U0{constructor(e=new ge,t=new ge){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ge){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Jee,QuadraticBezierCurve3:class ete extends U0{constructor(e=new ge,t=new ge,i=new ge){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ge){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(uv(e,r.x,s.x,o.x),uv(e,r.y,s.y,o.y),uv(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:tte});class qHe extends U0{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ak(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],c=a.getLength();return a.getPointAt(0===c?0:1-o/c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],c=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let l=0;l<c.length;l++){const u=c[l];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push((new ck[r.type]).fromJSON(r))}return this}}class Qx extends qHe{constructor(e){super(),this.type="Path",this.currentPoint=new Qt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new ak(this.currentPoint.clone(),new Qt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Jee(this.currentPoint.clone(),new Qt(e,t),new Qt(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new Zee(this.currentPoint.clone(),new Qt(e,t),new Qt(i,r),new Qt(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new tte(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,c){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o,a,c),this}absellipse(e,t,i,r,s,o,a,c){const l=new nk(e,t,i,r,s,o,a,c);if(this.curves.length>0){const f=l.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Qd extends Qx{constructor(e){super(e),this.uuid=K3(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push((new Qx).fromJSON(r))}return this}}function nte(n,e,t,i,r){let s,o;if(r===function fze(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}(n,e,t,i)>0)for(s=e;s<t;s+=i)o=ste(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=ste(s,n[s],n[s+1],o);return o&&Kx(o,o.next)&&(gv(o),o=o.next),o}function Wd(n,e){if(!n)return n;e||(e=n);let i,t=n;do{if(i=!1,t.steiner||!Kx(t,t.next)&&0!==d1(t.prev,t,t.next))t=t.next;else{if(gv(t),t=e=t.prev,t===t.next)break;i=!0}}while(i||t!==e);return e}function dv(n,e,t,i,r,s,o){if(!n)return;!o&&s&&function oze(n,e,t,i){let r=n;do{null===r.z&&(r.z=pk(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,function aze(n){let e,t,i,r,s,o,a,c,l=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<l&&(a++,i=i.nextZ,i);e++);for(c=l;a>0||c>0&&i;)0!==a&&(0===c||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,l*=2}while(o>1)}(r)}(n,i,r,s);let c,l,a=n;for(;n.prev!==n.next;)if(c=n.prev,l=n.next,s?ZHe(n,i,r,s):YHe(n))e.push(c.i/t),e.push(n.i/t),e.push(l.i/t),gv(n),n=l.next,a=l.next;else if((n=l)===a){o?1===o?dv(n=JHe(Wd(n),e,t),e,t,i,r,s,2):2===o&&eze(n,e,t,i,r,s):dv(Wd(n),e,t,i,r,s,1);break}}function YHe(n){const e=n.prev,t=n,i=n.next;if(d1(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(gg(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&d1(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function ZHe(n,e,t,i){const r=n.prev,s=n,o=n.next;if(d1(r,s,o)>=0)return!1;const l=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,f=pk(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,e,t,i),p=pk(l,u,e,t,i);let g=n.prevZ,_=n.nextZ;for(;g&&g.z>=f&&_&&_.z<=p;){if(g!==n.prev&&g!==n.next&&gg(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&d1(g.prev,g,g.next)>=0||(g=g.prevZ,_!==n.prev&&_!==n.next&&gg(r.x,r.y,s.x,s.y,o.x,o.y,_.x,_.y)&&d1(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;g&&g.z>=f;){if(g!==n.prev&&g!==n.next&&gg(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&d1(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;_&&_.z<=p;){if(_!==n.prev&&_!==n.next&&gg(r.x,r.y,s.x,s.y,o.x,o.y,_.x,_.y)&&d1(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function JHe(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Kx(r,s)&&ite(r,i,i.next,s)&&pv(r,s)&&pv(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),gv(i),gv(i.next),i=n=s),i=i.next}while(i!==n);return Wd(i)}function eze(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&lze(o,a)){let c=rte(o,a);return o=Wd(o,o.next),c=Wd(c,c.next),dv(o,e,t,i,r,s),void dv(c,e,t,i,r,s)}a=a.next}o=o.next}while(o!==n)}function nze(n,e){return n.x-e.x}function ize(n,e){if(e=function rze(n,e){let t=e;const i=n.x,r=n.y;let o,s=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const p=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=i&&p>s){if(s=p,p===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const a=o,c=o.x,l=o.y;let f,u=1/0;t=o;do{i>=t.x&&t.x>=c&&i!==t.x&&gg(r<l?i:s,r,c,l,r<l?s:i,r,t.x,t.y)&&(f=Math.abs(r-t.y)/(i-t.x),pv(t,n)&&(f<u||f===u&&(t.x>o.x||t.x===o.x&&sze(o,t)))&&(o=t,u=f)),t=t.next}while(t!==a);return o}(n,e),e){const t=rte(e,n);Wd(e,e.next),Wd(t,t.next)}}function sze(n,e){return d1(n.prev,n,e.prev)<0&&d1(e.next,n,n.next)<0}function pk(n,e,t,i,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*r)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function cze(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function gg(n,e,t,i,r,s,o,a){return(r-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(i-a)>=0}function lze(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function uze(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&ite(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(pv(n,e)&&pv(e,n)&&function hze(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next}while(t!==n);return i}(n,e)&&(d1(n.prev,n,e.prev)||d1(n,e.prev,e))||Kx(n,e)&&d1(n.prev,n,n.next)>0&&d1(e.prev,e,e.next)>0)}function d1(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Kx(n,e){return n.x===e.x&&n.y===e.y}function ite(n,e,t,i){const r=Yx(d1(n,e,t)),s=Yx(d1(n,e,i)),o=Yx(d1(t,i,n)),a=Yx(d1(t,i,e));return!!(r!==s&&o!==a||0===r&&Xx(n,t,e)||0===s&&Xx(n,i,e)||0===o&&Xx(t,n,i)||0===a&&Xx(t,e,i))}function Xx(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Yx(n){return n>0?1:n<0?-1:0}function pv(n,e){return d1(n.prev,n,n.next)<0?d1(n,e,n.next)>=0&&d1(n,n.prev,e)>=0:d1(n,e,n.prev)<0||d1(n,n.next,e)<0}function rte(n,e){const t=new gk(n.i,n.x,n.y),i=new gk(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function ste(n,e,t,i){const r=new gk(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function gv(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function gk(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class tf{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*i}static isClockWise(e){return tf.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];ote(e),ate(i,e);let o=e.length;t.forEach(ote);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,ate(i,t[c]);const a=function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=nte(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,l,u,f,p,g;if(i&&(s=function tze(n,e,t,i){const r=[];let s,o,a,c,l;for(s=0,o=e.length;s<o;s++)a=e[s]*i,c=s<o-1?e[s+1]*i:n.length,l=nte(n,a,c,i,!1),l===l.next&&(l.steiner=!0),r.push(cze(l));for(r.sort(nze),s=0;s<r.length;s++)ize(r[s],t),t=Wd(t,t.next);return t}(n,e,s,t)),n.length>80*t){a=l=n[0],c=u=n[1];for(let _=t;_<r;_+=t)f=n[_],p=n[_+1],f<a&&(a=f),p<c&&(c=p),f>l&&(l=f),p>u&&(u=p);g=Math.max(l-a,u-c),g=0!==g?1/g:0}return dv(s,o,t,a,c,g),o}(i,r);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function ote(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function ate(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Zx extends Ar{constructor(e=new Qd([new Qt(.5,.5),new Qt(-.5,.5),new Qt(-.5,-.5),new Qt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,c=e.length;a<c;a++)o(e[a]);function o(a){const c=[],l=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1,f=void 0!==t.depth?t.depth:1;let p=void 0===t.bevelEnabled||t.bevelEnabled,g=void 0!==t.bevelThickness?t.bevelThickness:.2,_=void 0!==t.bevelSize?t.bevelSize:g-.1,y=void 0!==t.bevelOffset?t.bevelOffset:0,w=void 0!==t.bevelSegments?t.bevelSegments:3;const C=t.extrudePath,x=void 0!==t.UVGenerator?t.UVGenerator:dze;let M,I,F,P,R,T=!1;C&&(M=C.getSpacedPoints(u),T=!0,p=!1,I=C.computeFrenetFrames(u,!1),F=new ge,P=new ge,R=new ge),p||(w=0,g=0,_=0,y=0);const k=a.extractPoints(l);let W=k.shape;const re=k.holes;if(!tf.isClockWise(W)){W=W.reverse();for(let Ot=0,Rt=re.length;Ot<Rt;Ot++){const vn=re[Ot];tf.isClockWise(vn)&&(re[Ot]=vn.reverse())}}const me=tf.triangulateShape(W,re),Q=W;for(let Ot=0,Rt=re.length;Ot<Rt;Ot++)W=W.concat(re[Ot]);function he(Ot,Rt,vn){return Rt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Rt.clone().multiplyScalar(vn).add(Ot)}const K=W.length,ae=me.length;function fe(Ot,Rt,vn){let qn,En,Cn;const Un=Ot.x-Rt.x,fi=Ot.y-Rt.y,ar=vn.x-Ot.x,us=vn.y-Ot.y,Oe=Un*Un+fi*fi;if(Math.abs(Un*us-fi*ar)>Number.EPSILON){const Tt=Math.sqrt(Oe),gn=Math.sqrt(ar*ar+us*us),bn=Rt.x-fi/Tt,In=Rt.y+Un/Tt,Jt=((vn.x-us/gn-bn)*us-(vn.y+ar/gn-In)*ar)/(Un*us-fi*ar);qn=bn+Un*Jt-Ot.x,En=In+fi*Jt-Ot.y;const ln=qn*qn+En*En;if(ln<=2)return new Qt(qn,En);Cn=Math.sqrt(ln/2)}else{let Tt=!1;Un>Number.EPSILON?ar>Number.EPSILON&&(Tt=!0):Un<-Number.EPSILON?ar<-Number.EPSILON&&(Tt=!0):Math.sign(fi)===Math.sign(us)&&(Tt=!0),Tt?(qn=-fi,En=Un,Cn=Math.sqrt(Oe)):(qn=Un,En=fi,Cn=Math.sqrt(Oe/2))}return new Qt(qn/Cn,En/Cn)}const de=[];for(let Ot=0,Rt=Q.length,vn=Rt-1,qn=Ot+1;Ot<Rt;Ot++,vn++,qn++)vn===Rt&&(vn=0),qn===Rt&&(qn=0),de[Ot]=fe(Q[Ot],Q[vn],Q[qn]);const ke=[];let et,Fe=de.concat();for(let Ot=0,Rt=re.length;Ot<Rt;Ot++){const vn=re[Ot];et=[];for(let qn=0,En=vn.length,Cn=En-1,Un=qn+1;qn<En;qn++,Cn++,Un++)Cn===En&&(Cn=0),Un===En&&(Un=0),et[qn]=fe(vn[qn],vn[Cn],vn[Un]);ke.push(et),Fe=Fe.concat(et)}for(let Ot=0;Ot<w;Ot++){const Rt=Ot/w,vn=g*Math.cos(Rt*Math.PI/2),qn=_*Math.sin(Rt*Math.PI/2)+y;for(let En=0,Cn=Q.length;En<Cn;En++){const Un=he(Q[En],de[En],qn);Zt(Un.x,Un.y,-vn)}for(let En=0,Cn=re.length;En<Cn;En++){const Un=re[En];et=ke[En];for(let fi=0,ar=Un.length;fi<ar;fi++){const us=he(Un[fi],et[fi],qn);Zt(us.x,us.y,-vn)}}}const wt=_+y;for(let Ot=0;Ot<K;Ot++){const Rt=p?he(W[Ot],Fe[Ot],wt):W[Ot];T?(P.copy(I.normals[0]).multiplyScalar(Rt.x),F.copy(I.binormals[0]).multiplyScalar(Rt.y),R.copy(M[0]).add(P).add(F),Zt(R.x,R.y,R.z)):Zt(Rt.x,Rt.y,0)}for(let Ot=1;Ot<=u;Ot++)for(let Rt=0;Rt<K;Rt++){const vn=p?he(W[Rt],Fe[Rt],wt):W[Rt];T?(P.copy(I.normals[Ot]).multiplyScalar(vn.x),F.copy(I.binormals[Ot]).multiplyScalar(vn.y),R.copy(M[Ot]).add(P).add(F),Zt(R.x,R.y,R.z)):Zt(vn.x,vn.y,f/u*Ot)}for(let Ot=w-1;Ot>=0;Ot--){const Rt=Ot/w,vn=g*Math.cos(Rt*Math.PI/2),qn=_*Math.sin(Rt*Math.PI/2)+y;for(let En=0,Cn=Q.length;En<Cn;En++){const Un=he(Q[En],de[En],qn);Zt(Un.x,Un.y,f+vn)}for(let En=0,Cn=re.length;En<Cn;En++){const Un=re[En];et=ke[En];for(let fi=0,ar=Un.length;fi<ar;fi++){const us=he(Un[fi],et[fi],qn);T?Zt(us.x,us.y+M[u-1].y,M[u-1].x+vn):Zt(us.x,us.y,f+vn)}}}function xt(Ot,Rt){let vn=Ot.length;for(;--vn>=0;){const qn=vn;let En=vn-1;En<0&&(En=Ot.length-1);for(let Cn=0,Un=u+2*w;Cn<Un;Cn++){const fi=K*Cn,ar=K*(Cn+1);Sn(Rt+qn+fi,Rt+En+fi,Rt+En+ar,Rt+qn+ar)}}}function Zt(Ot,Rt,vn){c.push(Ot),c.push(Rt),c.push(vn)}function an(Ot,Rt,vn){cn(Ot),cn(Rt),cn(vn);const qn=r.length/3,En=x.generateTopUV(i,r,qn-3,qn-2,qn-1);Ti(En[0]),Ti(En[1]),Ti(En[2])}function Sn(Ot,Rt,vn,qn){cn(Ot),cn(Rt),cn(qn),cn(Rt),cn(vn),cn(qn);const En=r.length/3,Cn=x.generateSideWallUV(i,r,En-6,En-3,En-2,En-1);Ti(Cn[0]),Ti(Cn[1]),Ti(Cn[3]),Ti(Cn[1]),Ti(Cn[2]),Ti(Cn[3])}function cn(Ot){r.push(c[3*Ot+0]),r.push(c[3*Ot+1]),r.push(c[3*Ot+2])}function Ti(Ot){s.push(Ot.x),s.push(Ot.y)}(function ut(){const Ot=r.length/3;if(p){let Rt=0,vn=K*Rt;for(let qn=0;qn<ae;qn++){const En=me[qn];an(En[2]+vn,En[1]+vn,En[0]+vn)}Rt=u+2*w,vn=K*Rt;for(let qn=0;qn<ae;qn++){const En=me[qn];an(En[0]+vn,En[1]+vn,En[2]+vn)}}else{for(let Rt=0;Rt<ae;Rt++){const vn=me[Rt];an(vn[2],vn[1],vn[0])}for(let Rt=0;Rt<ae;Rt++){const vn=me[Rt];an(vn[0]+K*u,vn[1]+K*u,vn[2]+K*u)}}i.addGroup(Ot,r.length/3-Ot,0)})(),function It(){const Ot=r.length/3;let Rt=0;xt(Q,Rt),Rt+=Q.length;for(let vn=0,qn=re.length;vn<qn;vn++){const En=re[vn];xt(En,Rt),Rt+=En.length}i.addGroup(Ot,r.length/3-Ot,1)}()}this.setAttribute("position",new ai(r,3)),this.setAttribute("uv",new ai(s,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function pze(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++)t.shapes.push(n[i].uuid);else t.shapes.push(n.uuid);return t.options=Object.assign({},e),void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++)i.push(t[e.shapes[s]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new ck[r.type]).fromJSON(r)),new Zx(i,e.options)}}const dze={generateTopUV:function(n,e,t,i,r){const a=e[3*i],c=e[3*i+1],l=e[3*r],u=e[3*r+1];return[new Qt(e[3*t],e[3*t+1]),new Qt(a,c),new Qt(l,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[3*t],a=e[3*t+1],c=e[3*t+2],l=e[3*i],u=e[3*i+1],f=e[3*i+2],p=e[3*r],g=e[3*r+1],_=e[3*r+2],y=e[3*s],w=e[3*s+1],C=e[3*s+2];return Math.abs(a-u)<Math.abs(o-l)?[new Qt(o,1-c),new Qt(l,1-f),new Qt(p,1-_),new Qt(y,1-C)]:[new Qt(a,1-c),new Qt(u,1-f),new Qt(g,1-_),new Qt(w,1-C)]}};class eM extends Ar{constructor(e=new Qd([new Qt(0,.5),new Qt(-.5,-.5),new Qt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,c=0;if(!1===Array.isArray(e))l(e);else for(let u=0;u<e.length;u++)l(e[u]),this.addGroup(a,c,u),a+=c,c=0;function l(u){const f=r.length/3,p=u.extractPoints(t);let g=p.shape;const _=p.holes;!1===tf.isClockWise(g)&&(g=g.reverse());for(let w=0,C=_.length;w<C;w++){const x=_[w];!0===tf.isClockWise(x)&&(_[w]=x.reverse())}const y=tf.triangulateShape(g,_);for(let w=0,C=_.length;w<C;w++)g=g.concat(_[w]);for(let w=0,C=g.length;w<C;w++){const x=g[w];r.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let w=0,C=y.length;w<C;w++){const x=y[w];i.push(x[0]+f,x[1]+f,x[2]+f),c+=3}}this.setIndex(i),this.setAttribute("position",new ai(r,3)),this.setAttribute("normal",new ai(s,3)),this.setAttribute("uv",new ai(o,2))}toJSON(){const e=super.toJSON();return function gze(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++)e.shapes.push(n[t].uuid);else e.shapes.push(n.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++)i.push(t[e.shapes[r]]);return new eM(i,e.curveSegments)}}class mv extends Ar{constructor(e=1,t=32,i=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(o+a,Math.PI);let l=0;const u=[],f=new ge,p=new ge,g=[],_=[],y=[],w=[];for(let C=0;C<=i;C++){const x=[],M=C/i;let T=0;0==C&&0==o?T=.5/t:C==i&&c==Math.PI&&(T=-.5/t);for(let I=0;I<=t;I++){const F=I/t;f.x=-e*Math.cos(r+F*s)*Math.sin(o+M*a),f.y=e*Math.cos(o+M*a),f.z=e*Math.sin(r+F*s)*Math.sin(o+M*a),_.push(f.x,f.y,f.z),p.copy(f).normalize(),y.push(p.x,p.y,p.z),w.push(F+T,1-M),x.push(l++)}u.push(x)}for(let C=0;C<i;C++)for(let x=0;x<t;x++){const M=u[C][x+1],T=u[C][x],I=u[C+1][x],F=u[C+1][x+1];(0!==C||o>0)&&g.push(M,T,F),(C!==i-1||c<Math.PI)&&g.push(T,I,F)}this.setIndex(g),this.setAttribute("position",new ai(_,3)),this.setAttribute("normal",new ai(y,3)),this.setAttribute("uv",new ai(w,2))}static fromJSON(e){return new mv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Av extends Z2{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Dn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nf extends Av{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Qt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return tc(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Dn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Dn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Dn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class ute extends Z2{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Dn(16777215),this.specular=new Dn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ck extends Z2{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class ma extends Z2{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Dn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function N4(n,e,t){return bk(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)}function f5(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function bk(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function hte(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i}function xk(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[a+c]}return r}function Mk(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)}class vv{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class xze extends vv{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],c=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===c)switch(this.getSettings_().endingEnd){case 2401:o=e,c=2*i-t;break;case 2402:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const l=.5*(i-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,g=this._weightNext,_=(i-t)/(r-t),y=_*_,w=y*_,C=-p*w+2*p*y-p*_,x=(1+p)*w+(-1.5-2*p)*y+(-.5+p)*_+1,M=(-1-g)*w+(1.5+g)*y+.5*_,T=g*w-g*y;for(let I=0;I!==a;++I)s[I]=C*o[u+I]+x*o[l+I]+M*o[c+I]+T*o[f+I];return s}}class fte extends vv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),f=1-u;for(let p=0;p!==a;++p)s[p]=o[l+p]*f+o[c+p]*u;return s}}class Mze extends vv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class G0{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=f5(t,this.TimeBufferType),this.values=f5(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:f5(e.times,Array),values:f5(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Mze(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new fte(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new xze(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case X9:t=this.InterpolantFactoryMethodDiscrete;break;case V7:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return X9;case this.InterpolantFactoryMethodLinear:return V7;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=N4(i,s,o),this.values=N4(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=i[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==o&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(void 0!==r&&bk(r))for(let a=0,c=r.length;a!==c;++a){const l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=N4(this.times),t=N4(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const l=e[a];if(l!==e[a+1]&&(1!==a||l!==e[0]))if(r)c=!0;else{const f=a*i,p=f-i,g=f+i;for(let _=0;_!==i;++_){const y=t[f+_];if(y!==t[p+_]||y!==t[g+_]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const f=a*i,p=o*i;for(let g=0;g!==i;++g)t[p+g]=t[f+g]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=N4(e,0,o),this.values=N4(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=N4(this.times,0),t=N4(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}G0.prototype.TimeBufferType=Float32Array,G0.prototype.ValueBufferType=Float32Array,G0.prototype.DefaultInterpolation=V7;class mg extends G0{}mg.prototype.ValueTypeName="bool",mg.prototype.ValueBufferType=Array,mg.prototype.DefaultInterpolation=X9,mg.prototype.InterpolantFactoryMethodLinear=void 0,mg.prototype.InterpolantFactoryMethodSmooth=void 0;class dte extends G0{}dte.prototype.ValueTypeName="color";class _v extends G0{}_v.prototype.ValueTypeName="number";class Sze extends vv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let l=e*a;for(let u=l+a;l!==u;l+=4)D2.slerpFlat(s,0,o,l-a,o,l,c);return s}}class d5 extends G0{InterpolantFactoryMethodLinear(e){return new Sze(this.times,this.values,this.getValueSize(),e)}}d5.prototype.ValueTypeName="quaternion",d5.prototype.DefaultInterpolation=V7,d5.prototype.InterpolantFactoryMethodSmooth=void 0;class Ag extends G0{}Ag.prototype.ValueTypeName="string",Ag.prototype.ValueBufferType=Array,Ag.prototype.DefaultInterpolation=X9,Ag.prototype.InterpolantFactoryMethodLinear=void 0,Ag.prototype.InterpolantFactoryMethodSmooth=void 0;class yv extends G0{}yv.prototype.ValueTypeName="vector";class wv{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=K3(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Tze(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(G0.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],l=[];c.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);const u=hte(c);c=xk(c,1,u),l=xk(l,1,u),!r&&0===c[0]&&(c.push(s),l.push(l[0])),o.push(new _v(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const l=e[a],u=l.name.match(s);if(u&&u.length>1){const f=u[1];let p=r[f];p||(r[f]=p=[]),p.push(l)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,p,g,_,y){if(0!==g.length){const w=[],C=[];Mk(g,w,C,_),0!==w.length&&y.push(new f(p,w,C))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let f=0;f<l.length;f++){const p=l[f].keys;if(p&&0!==p.length)if(p[0].morphTargets){const g={};let _;for(_=0;_<p.length;_++)if(p[_].morphTargets)for(let y=0;y<p[_].morphTargets.length;y++)g[p[_].morphTargets[y]]=-1;for(const y in g){const w=[],C=[];for(let x=0;x!==p[_].morphTargets.length;++x){const M=p[_];w.push(M.time),C.push(M.morphTarget===y?1:0)}r.push(new _v(".morphTargetInfluence["+y+"]",w,C))}c=g.length*o}else{const g=".bones["+t[f].name+"]";i(yv,g+".position",p,"pos",r),i(d5,g+".quaternion",p,"rot",r),i(yv,g+".scale",p,"scl",r)}}return 0===r.length?null:new this(s,c,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Tze(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Eze(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return _v;case"vector":case"vector2":case"vector3":case"vector4":return yv;case"color":return dte;case"quaternion":return d5;case"bool":case"boolean":return mg;case"string":return Ag}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];Mk(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const vg={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class pte{constructor(e,t,i){const r=this;let c,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,f){return l.push(u,f),this},this.removeHandler=function(u){const f=l.indexOf(u);return-1!==f&&l.splice(f,2),this},this.getHandler=function(u){for(let f=0,p=l.length;f<p;f+=2){const g=l[f],_=l[f+1];if(g.global&&(g.lastIndex=0),g.test(u))return _}return null}}}const Cv=new pte;class p5{constructor(e){this.manager=void 0!==e?e:Cv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const rf={};class Lze extends Error{constructor(e,t){super(e),this.response=t}}class Vu extends p5{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=vg.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==rf[e])return void rf[e].push({onLoad:t,onProgress:i,onError:r});rf[e]=[],rf[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(l=>{if(200===l.status||0===l.status){if(0===l.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===l.body||void 0===l.body.getReader)return l;const u=rf[e],f=l.body.getReader(),p=l.headers.get("Content-Length"),g=p?parseInt(p):0,_=0!==g;let y=0;const w=new ReadableStream({start(C){!function x(){f.read().then(({done:M,value:T})=>{if(M)C.close();else{y+=T.byteLength;const I=new ProgressEvent("progress",{lengthComputable:_,loaded:y,total:g});for(let F=0,P=u.length;F<P;F++){const R=u[F];R.onProgress&&R.onProgress(I)}C.enqueue(T),x()}})}()}});return new Response(w)}throw new Lze(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return l.json();default:if(void 0===a)return l.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,g=new TextDecoder(p);return l.arrayBuffer().then(_=>g.decode(_))}}}).then(l=>{vg.add(e,l);const u=rf[e];delete rf[e];for(let f=0,p=u.length;f<p;f++){const g=u[f];g.onLoad&&g.onLoad(l)}}).catch(l=>{const u=rf[e];if(void 0===u)throw this.manager.itemError(e),l;delete rf[e];for(let f=0,p=u.length;f<p;f++){const g=u[f];g.onError&&g.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class tM extends p5{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=vg.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=J9("img");function c(){u(),vg.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Dze extends p5{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new dg,a=new Vu(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(c){const l=s.parse(c);!l||(void 0!==l.image?o.image=l.image:void 0!==l.data&&(o.image.width=l.width,o.image.height=l.height,o.image.data=l.data),o.wrapS=void 0!==l.wrapS?l.wrapS:Bl,o.wrapT=void 0!==l.wrapT?l.wrapT:Bl,o.magFilter=void 0!==l.magFilter?l.magFilter:$a,o.minFilter=void 0!==l.minFilter?l.minFilter:$a,o.anisotropy=void 0!==l.anisotropy?l.anisotropy:1,void 0!==l.encoding&&(o.encoding=l.encoding),void 0!==l.flipY&&(o.flipY=l.flipY),void 0!==l.format&&(o.format=l.format),void 0!==l.type&&(o.type=l.type),void 0!==l.mipmaps&&(o.mipmaps=l.mipmaps,o.minFilter=Rd),1===l.mipmapCount&&(o.minFilter=$a),void 0!==l.generateMipmaps&&(o.generateMipmaps=l.generateMipmaps),o.needsUpdate=!0,t&&t(o,l))},i,r),o}}class Ize extends p5{constructor(e){super(e)}load(e,t,i,r){const s=new H4,o=new tM(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class nM extends I2{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Dn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class gte extends nM{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(I2.DefaultUp),this.updateMatrix(),this.groundColor=new Dn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const mte=new Ui,Ate=new ge,vte=new ge;class Sk{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Qt(512,512),this.map=null,this.mapPass=null,this.matrix=new Ui,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new UF,this._frameExtents=new Qt(1,1),this._viewportCount=1,this._viewports=[new xo(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Ate.setFromMatrixPosition(e.matrixWorld),t.position.copy(Ate),vte.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(vte),t.updateMatrixWorld(),mte.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mte),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Bze extends Sk{constructor(){super(new Gc(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Y9*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class _te extends nM{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(I2.DefaultUp),this.updateMatrix(),this.target=new I2,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Bze}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const yte=new Ui,bv=new ge,Ek=new ge;class Rze extends Sk{constructor(){super(new Gc(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Qt(4,2),this._viewportCount=6,this._viewports=[new xo(2,1,1,1),new xo(0,1,1,1),new xo(3,1,1,1),new xo(1,1,1,1),new xo(3,0,1,1),new xo(1,0,1,1)],this._cubeDirections=[new ge(1,0,0),new ge(-1,0,0),new ge(0,0,1),new ge(0,0,-1),new ge(0,1,0),new ge(0,-1,0)],this._cubeUps=[new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,0,1),new ge(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),bv.setFromMatrixPosition(e.matrixWorld),i.position.copy(bv),Ek.copy(i.position),Ek.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Ek),i.updateMatrixWorld(),r.makeTranslation(-bv.x,-bv.y,-bv.z),yte.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(yte)}}class wte extends nM{constructor(e,t,i=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Rze}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Fze extends Sk{constructor(){super(new o5(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Tk extends nM{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(I2.DefaultUp),this.updateMatrix(),this.target=new I2,this.shadow=new Fze}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class sf{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Uze extends p5{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=vg.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){vg.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class Ete{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Tte(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Tte();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Tte(){return(typeof performance>"u"?Date:performance).now()}const Dk="\\[\\]\\.:\\/",jze=new RegExp("["+Dk+"]","g"),Ik="[^"+Dk+"]",$ze="[^"+Dk.replace("\\.","")+"]",Zze=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Ik)+/(WCOD+)?/.source.replace("WCOD",$ze)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ik)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ik)+"$"),Jze=["material","materials","bones","map"];class eOe{constructor(e,t,i){const r=i||Aa.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let Aa=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(jze,"")}static parseTrackName(t){const i=Zze.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==Jze.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const c=o[a];if(c.name===i||c.uuid===i)return c;const l=r(c.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===u){u=f;break}break;case"map":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=eOe,n})();Aa.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Aa.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Aa.prototype.GetterByBindingType=[Aa.prototype._getValue_direct,Aa.prototype._getValue_array,Aa.prototype._getValue_arrayElement,Aa.prototype._getValue_toArray],Aa.prototype.SetterByBindingTypeAndVersioning=[[Aa.prototype._setValue_direct,Aa.prototype._setValue_direct_setNeedsUpdate,Aa.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Aa.prototype._setValue_array,Aa.prototype._setValue_array_setNeedsUpdate,Aa.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Aa.prototype._setValue_arrayElement,Aa.prototype._setValue_arrayElement_setNeedsUpdate,Aa.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Aa.prototype._setValue_fromArray,Aa.prototype._setValue_fromArray_setNeedsUpdate,Aa.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class rOe{constructor(e,t,i=0,r=1/0){this.ray=new mx(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new LF,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return Bk(e,this,i,t),i.sort(Bte),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)Bk(e[r],this,i,t);return i.sort(Bte),i}}function Bte(n,e){return n.distance-e.distance}function Bk(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),!0===i){const r=n.children;for(let s=0,o=r.length;s<o;s++)Bk(r[s],e,t,!0)}}class Rte{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(tc(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class kk extends pg{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new Ar;r.setAttribute("position",new ai(t,3)),r.setAttribute("color",new ai([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(r,new h2({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,i){const r=new Dn,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}const af=oOe();function oOe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const l=c-127;l<-27?(i[c]=0,i[256|c]=32768,r[c]=24,r[256|c]=24):l<-14?(i[c]=1024>>-l-14,i[256|c]=1024>>-l-14|32768,r[c]=-l-1,r[256|c]=-l-1):l<=15?(i[c]=l+15<<10,i[256|c]=l+15<<10|32768,r[c]=13,r[256|c]=13):l<128?(i[c]=31744,i[256|c]=64512,r[c]=24,r[256|c]=24):(i[c]=31744,i[256|c]=64512,r[c]=13,r[256|c]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let c=1;c<1024;++c){let l=c<<13,u=0;for(;0==(8388608&l);)l<<=1,u-=8388608;l&=-8388609,u+=947912704,s[c]=l|u}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)32!==c&&(a[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}var uM=Object.freeze({__proto__:null,toHalfFloat:function aOe(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=tc(n,-65504,65504),af.floatView[0]=n;const e=af.uint32View[0],t=e>>23&511;return af.baseTable[t]+((8388607&e)>>af.shiftTable[t])},fromHalfFloat:function cOe(n){const e=n>>10;return af.uint32View[0]=af.mantissaTable[af.offsetTable[e]+(1023&n)]+af.exponentTable[e],af.floatView[0]}});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"144"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="144");const mn=(n,e=4)=>Math.round(n*10**e)/10**e,y5=([n,e],[t,i],r=1)=>[(t-n)/(2/r)+n,(i-e)/(2/r)+e],Z3=(n,e=4)=>mn(n.reduce((t,i)=>t+i,0),e),to=(n,e,t=[0,0],i=4)=>{const r=n*Math.PI/180,s=e*Math.cos(r),o=e*Math.sin(r);return[mn(s+t[0],i),mn(o+t[1],i)]},p1=(n,e,t=3)=>mn(180*Math.atan2(e[1]-n[1],e[0]-n[0])/Math.PI,t),Gte=(n,e,t,i=0,r=0)=>{const s=g=>g*g,o=g=>Math.sqrt(g);var a=1+s(e),c=2*-i+e*(t-r)*2,l=s(i)+s(t-r)-s(n);s(c);const p=(o(s(c)-4*a*l),(-c-o(s(c)-4*a*l))/(2*a));return[p,e*p+t]},_g=(n,e)=>{const[[t,i],[r,s]]=n,[[o,a],[c,l]]=e;var u,p=(l-a)*(r-t)-(c-o)*(s-i);return 0==p?null:[t+(u=((c-o)*(i-a)-(l-a)*(t-o))/p)*(r-t),i+u*(s-i)]},Qte=(n,e)=>{const t=[],i=n.length;for(let r=0;r<i-1;r++){const s=[n[r],n[r+1]];_g(s,e)&&t.push(_g(s,e))}return t},Ka=(n,e,t=4)=>n&&e?mn(Math.hypot(e[0]-n[0],e[1]-n[1]),t):0,Ae=(n,e)=>[n[0]+e[0],n[1]+e[1]],tn=(n,e,t=!0)=>t?[n[0],e[1]]:[e[0],n[1]],w5=(n,e,t=!1)=>{let i;return i=t?.3528*n/10:n*e,mn(i,3)};function Wte(n){return n*(Math.PI/180)}String.prototype.toTitleCase=function(){return this.replace(/\b\w/g,n=>n.toLocaleUpperCase())};const Pk=L2("slideInOut",[Po(":enter",[Hi({transform:"translateY(100%)"}),bo("600ms 0ms ease-out",Hi({transform:"translateY(0%)"}))]),Po(":leave",[bo("300ms  ease-in",Hi({transform:"translateY(100%)"}))])]),Kte=L2("fallInOut",[Po(":enter",[Hi({transform:"translateY(-100%)"}),bo("600ms 0ms ease-out",Hi({transform:"translateY(0%)"}))]),Po(":leave",[bo("300ms ease-in",Hi({transform:"translateY(-100%)"}))])]),Hk=L2("stateSlideIn",[ko("false",Hi({width:"0px",padding:0})),ko("true",Hi({width:"*",padding:"*"})),Po("* => void",[bo("200ms ease-in",Hi({width:"0px",padding:0}))]),Po("false => true",bo("200ms ease-in")),Po("true => false",bo("200ms ease-out"))]);function hM(n,e){let t=0;if(void 0===e)for(let i of n)(i=+i)&&(t+=i);else{let i=-1;for(let r of n)(r=+e(r,++i,n))&&(t+=r)}return t}function fOe(){}function zk(n){return null==n?fOe:function(){return this.querySelector(n)}}function pOe(n){return null==n?[]:Array.isArray(n)?n:Array.from(n)}function gOe(){return[]}function Xte(n){return null==n?gOe:function(){return this.querySelectorAll(n)}}function Yte(n){return function(){return this.matches(n)}}function Zte(n){return function(e){return e.matches(n)}}var vOe=Array.prototype.find;function yOe(){return this.firstElementChild}var COe=Array.prototype.filter;function bOe(){return Array.from(this.children)}function Jte(n){return new Array(n.length)}function fM(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}function TOe(n){return function(){return n}}function LOe(n,e,t,i,r,s){for(var a,o=0,c=e.length,l=s.length;o<l;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):t[o]=new fM(n,s[o]);for(;o<c;++o)(a=e[o])&&(r[o]=a)}function DOe(n,e,t,i,r,s,o){var a,c,g,l=new Map,u=e.length,f=s.length,p=new Array(u);for(a=0;a<u;++a)(c=e[a])&&(p[a]=g=o.call(c,c.__data__,a,e)+"",l.has(g)?r[a]=c:l.set(g,c));for(a=0;a<f;++a)g=o.call(n,s[a],a,s)+"",(c=l.get(g))?(i[a]=c,c.__data__=s[a],l.delete(g)):t[a]=new fM(n,s[a]);for(a=0;a<u;++a)(c=e[a])&&l.get(p[a])===c&&(r[a]=c)}function IOe(n){return n.__data__}function ROe(n){return"object"==typeof n&&"length"in n?n:Array.from(n)}function OOe(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}fM.prototype={constructor:fM,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var Ok="http://www.w3.org/1999/xhtml";const ene={svg:"http://www.w3.org/2000/svg",xhtml:Ok,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dM(n){var e=n+="",t=e.indexOf(":");return t>=0&&"xmlns"!==(e=n.slice(0,t))&&(n=n.slice(t+1)),ene.hasOwnProperty(e)?{space:ene[e],local:n}:n}function jOe(n){return function(){this.removeAttribute(n)}}function $Oe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function qOe(n,e){return function(){this.setAttribute(n,e)}}function KOe(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function XOe(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}function YOe(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function tne(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function JOe(n){return function(){this.style.removeProperty(n)}}function eNe(n,e,t){return function(){this.style.setProperty(n,e,t)}}function tNe(n,e,t){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function yg(n,e){return n.style.getPropertyValue(e)||tne(n).getComputedStyle(n,null).getPropertyValue(e)}function iNe(n){return function(){delete this[n]}}function rNe(n,e){return function(){this[n]=e}}function sNe(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}function nne(n){return n.trim().split(/^|\s+/)}function Nk(n){return n.classList||new ine(n)}function ine(n){this._node=n,this._names=nne(n.getAttribute("class")||"")}function rne(n,e){for(var t=Nk(n),i=-1,r=e.length;++i<r;)t.add(e[i])}function sne(n,e){for(var t=Nk(n),i=-1,r=e.length;++i<r;)t.remove(e[i])}function aNe(n){return function(){rne(this,n)}}function cNe(n){return function(){sne(this,n)}}function lNe(n,e){return function(){(e.apply(this,arguments)?rne:sne)(this,n)}}function hNe(){this.textContent=""}function fNe(n){return function(){this.textContent=n}}function dNe(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function gNe(){this.innerHTML=""}function mNe(n){return function(){this.innerHTML=n}}function ANe(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function _Ne(){this.nextSibling&&this.parentNode.appendChild(this)}function wNe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bNe(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Ok&&e.documentElement.namespaceURI===Ok?e.createElement(n):e.createElementNS(t,n)}}function xNe(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function one(n){var e=dM(n);return(e.local?xNe:bNe)(e)}function SNe(){return null}function TNe(){var n=this.parentNode;n&&n.removeChild(this)}function DNe(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function INe(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function kNe(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function PNe(n){return function(){var e=this.__on;if(e){for(var s,t=0,i=-1,r=e.length;t<r;++t)s=e[t],n.type&&s.type!==n.type||s.name!==n.name?e[++i]=s:this.removeEventListener(s.type,s.listener,s.options);++i?e.length=i:delete this.__on}}}function HNe(n,e,t){return function(){var r,i=this.__on,s=function FNe(n){return function(e){n.call(this,e,this.__data__)}}(e);if(i)for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===n.type&&r.name===n.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),void(r.value=e);this.addEventListener(n.type,s,t),r={type:n.type,name:n.name,value:e,listener:s,options:t},i?i.push(r):this.__on=[r]}}function ane(n,e,t){var i=tne(n),r=i.CustomEvent;"function"==typeof r?r=new r(e,t):(r=i.document.createEvent("Event"),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),n.dispatchEvent(r)}function ONe(n,e){return function(){return ane(this,n,e)}}function NNe(n,e){return function(){return ane(this,n,e.apply(this,arguments))}}ine.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var cne=[null];function J3(n,e){this._groups=n,this._parents=e}function lne(){return new J3([[document.documentElement]],cne)}J3.prototype=lne.prototype={constructor:J3,select:function dOe(n){"function"!=typeof n&&(n=zk(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var c,l,s=e[r],o=s.length,a=i[r]=new Array(o),u=0;u<o;++u)(c=s[u])&&(l=n.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new J3(i,this._parents)},selectAll:function AOe(n){n="function"==typeof n?function mOe(n){return function(){return pOe(n.apply(this,arguments))}}(n):Xte(n);for(var e=this._groups,t=e.length,i=[],r=[],s=0;s<t;++s)for(var c,o=e[s],a=o.length,l=0;l<a;++l)(c=o[l])&&(i.push(n.call(c,c.__data__,l,o)),r.push(c));return new J3(i,r)},selectChild:function wOe(n){return this.select(null==n?yOe:function _Oe(n){return function(){return vOe.call(this.children,n)}}("function"==typeof n?n:Zte(n)))},selectChildren:function MOe(n){return this.selectAll(null==n?bOe:function xOe(n){return function(){return COe.call(this.children,n)}}("function"==typeof n?n:Zte(n)))},filter:function SOe(n){"function"!=typeof n&&(n=Yte(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var c,s=e[r],o=s.length,a=i[r]=[],l=0;l<o;++l)(c=s[l])&&n.call(c,c.__data__,l,s)&&a.push(c);return new J3(i,this._parents)},data:function BOe(n,e){if(!arguments.length)return Array.from(this,IOe);var t=e?DOe:LOe,i=this._parents,r=this._groups;"function"!=typeof n&&(n=TOe(n));for(var s=r.length,o=new Array(s),a=new Array(s),c=new Array(s),l=0;l<s;++l){var u=i[l],f=r[l],p=f.length,g=ROe(n.call(u,u&&u.__data__,l,i)),_=g.length,y=a[l]=new Array(_),w=o[l]=new Array(_),C=c[l]=new Array(p);t(u,f,y,w,C,g,e);for(var T,I,x=0,M=0;x<_;++x)if(T=y[x]){for(x>=M&&(M=x+1);!(I=w[M])&&++M<_;);T._next=I||null}}return(o=new J3(o,i))._enter=a,o._exit=c,o},enter:function EOe(){return new J3(this._enter||this._groups.map(Jte),this._parents)},exit:function FOe(){return new J3(this._exit||this._groups.map(Jte),this._parents)},join:function kOe(n,e,t){var i=this.enter(),r=this,s=this.exit();return"function"==typeof n?(i=n(i))&&(i=i.selection()):i=i.append(n+""),null!=e&&(r=e(r))&&(r=r.selection()),null==t?s.remove():t(s),i&&r?i.merge(r).order():r},merge:function POe(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,r=t.length,o=Math.min(r,i.length),a=new Array(r),c=0;c<o;++c)for(var g,l=t[c],u=i[c],f=l.length,p=a[c]=new Array(f),_=0;_<f;++_)(g=l[_]||u[_])&&(p[_]=g);for(;c<r;++c)a[c]=t[c];return new J3(a,this._parents)},selection:function GNe(){return this},order:function HOe(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var o,i=n[e],r=i.length-1,s=i[r];--r>=0;)(o=i[r])&&(s&&4^o.compareDocumentPosition(s)&&s.parentNode.insertBefore(o,s),s=o);return this},sort:function zOe(n){function e(f,p){return f&&p?n(f.__data__,p.__data__):!f-!p}n||(n=OOe);for(var t=this._groups,i=t.length,r=new Array(i),s=0;s<i;++s){for(var l,o=t[s],a=o.length,c=r[s]=new Array(a),u=0;u<a;++u)(l=o[u])&&(c[u]=l);c.sort(e)}return new J3(r,this._parents).order()},call:function NOe(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function VOe(){return Array.from(this)},node:function UOe(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null},size:function GOe(){let n=0;for(const e of this)++n;return n},empty:function QOe(){return!this.node()},each:function WOe(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var a,r=e[t],s=0,o=r.length;s<o;++s)(a=r[s])&&n.call(a,a.__data__,s,r);return this},attr:function ZOe(n,e){var t=dM(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((null==e?t.local?$Oe:jOe:"function"==typeof e?t.local?YOe:XOe:t.local?KOe:qOe)(t,e))},style:function nNe(n,e,t){return arguments.length>1?this.each((null==e?JOe:"function"==typeof e?tNe:eNe)(n,e,t??"")):yg(this.node(),n)},property:function oNe(n,e){return arguments.length>1?this.each((null==e?iNe:"function"==typeof e?sNe:rNe)(n,e)):this.node()[n]},classed:function uNe(n,e){var t=nne(n+"");if(arguments.length<2){for(var i=Nk(this.node()),r=-1,s=t.length;++r<s;)if(!i.contains(t[r]))return!1;return!0}return this.each(("function"==typeof e?lNe:e?aNe:cNe)(t,e))},text:function pNe(n){return arguments.length?this.each(null==n?hNe:("function"==typeof n?dNe:fNe)(n)):this.node().textContent},html:function vNe(n){return arguments.length?this.each(null==n?gNe:("function"==typeof n?ANe:mNe)(n)):this.node().innerHTML},raise:function yNe(){return this.each(_Ne)},lower:function CNe(){return this.each(wNe)},append:function MNe(n){var e="function"==typeof n?n:one(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function ENe(n,e){var t="function"==typeof n?n:one(n),i=null==e?SNe:"function"==typeof e?e:zk(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function LNe(){return this.each(TNe)},clone:function BNe(n){return this.select(n?INe:DNe)},datum:function RNe(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function zNe(n,e,t){var r,o,i=kNe(n+""),s=i.length;if(!(arguments.length<2)){for(a=e?HNe:PNe,r=0;r<s;++r)this.each(a(i[r],e,t));return this}var a=this.node().__on;if(a)for(var u,c=0,l=a.length;c<l;++c)for(r=0,u=a[c];r<s;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value},dispatch:function VNe(n,e){return this.each(("function"==typeof e?NNe:ONe)(n,e))},[Symbol.iterator]:function*UNe(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var o,i=n[e],r=0,s=i.length;r<s;++r)(o=i[r])&&(yield o)}};const xv=lne;var QNe={value:()=>{}};function une(){for(var i,n=0,e=arguments.length,t={};n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new pM(t)}function pM(n){this._=n}function WNe(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}function jNe(n,e){for(var r,t=0,i=n.length;t<i;++t)if((r=n[t]).name===e)return r.value}function hne(n,e,t){for(var i=0,r=n.length;i<r;++i)if(n[i].name===e){n[i]=QNe,n=n.slice(0,i).concat(n.slice(i+1));break}return null!=t&&n.push({name:e,value:t}),n}pM.prototype=une.prototype={constructor:pM,on:function(n,e){var r,t=this._,i=WNe(n+"",t),s=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(n=i[s]).type)t[r]=hne(t[r],n.name,e);else if(null==e)for(r in t)t[r]=hne(t[r],n.name,null);return this}for(;++s<o;)if((r=(n=i[s]).type)&&(r=jNe(t[r],n.name)))return r},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new pM(n)},call:function(n,e){if((r=arguments.length-2)>0)for(var r,s,t=new Array(r),i=0;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(i=0,r=(s=this._[n]).length;i<r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(e,t)}};const fne=une;var gM,Ev,wg=0,Mv=0,Sv=0,mM=0,C5=0,AM=0,Tv="object"==typeof performance&&performance.now?performance:Date,pne="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Vk(){return C5||(pne($Ne),C5=Tv.now()+AM)}function $Ne(){C5=0}function vM(){this._call=this._time=this._next=null}function gne(n,e,t){var i=new vM;return i.restart(n,e,t),i}function mne(){C5=(mM=Tv.now())+AM,wg=Mv=0;try{!function qNe(){Vk(),++wg;for(var e,n=gM;n;)(e=C5-n._time)>=0&&n._call.call(void 0,e),n=n._next;--wg}()}finally{wg=0,function XNe(){for(var n,t,e=gM,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:gM=t);Ev=n,Uk(i)}(),C5=0}}function KNe(){var n=Tv.now(),e=n-mM;e>1e3&&(AM-=e,mM=n)}function Uk(n){wg||(Mv&&(Mv=clearTimeout(Mv)),n-C5>24?(n<1/0&&(Mv=setTimeout(mne,n-Tv.now()-AM)),Sv&&(Sv=clearInterval(Sv))):(Sv||(mM=Tv.now(),Sv=setInterval(KNe,1e3)),wg=1,pne(mne)))}function Ane(n,e,t){var i=new vM;return i.restart(r=>{i.stop(),n(r+e)},e=null==e?0:+e,t),i}vM.prototype=gne.prototype={constructor:vM,restart:function(n,e,t){if("function"!=typeof n)throw new TypeError("callback is not a function");t=(null==t?Vk():+t)+(null==e?0:+e),!this._next&&Ev!==this&&(Ev?Ev._next=this:gM=this,Ev=this),this._call=n,this._time=t,Uk()},stop:function(){this._call&&(this._call=null,this._time=1/0,Uk())}};var YNe=fne("start","end","cancel","interrupt"),ZNe=[];function wM(n,e,t,i,r,s){var o=n.__transition;if(o){if(t in o)return}else n.__transition={};!function JNe(n,e,t){var r,i=n.__transition;function o(l){var u,f,p,g;if(1!==t.state)return c();for(u in i)if((g=i[u]).name===t.name){if(3===g.state)return Ane(o);4===g.state?(g.state=6,g.timer.stop(),g.on.call("interrupt",n,n.__data__,g.index,g.group),delete i[u]):+u<e&&(g.state=6,g.timer.stop(),g.on.call("cancel",n,n.__data__,g.index,g.group),delete i[u])}if(Ane(function(){3===t.state&&(t.state=4,t.timer.restart(a,t.delay,t.time),a(l))}),t.state=2,t.on.call("start",n,n.__data__,t.index,t.group),2===t.state){for(t.state=3,r=new Array(p=t.tween.length),u=0,f=-1;u<p;++u)(g=t.tween[u].value.call(n,n.__data__,t.index,t.group))&&(r[++f]=g);r.length=f+1}}function a(l){for(var u=l<t.duration?t.ease.call(null,l/t.duration):(t.timer.restart(c),t.state=5,1),f=-1,p=r.length;++f<p;)r[f].call(n,u);5===t.state&&(t.on.call("end",n,n.__data__,t.index,t.group),c())}function c(){for(var l in t.state=6,t.timer.stop(),delete i[e],i)return;delete n.__transition}i[e]=t,t.timer=gne(function s(l){t.state=1,t.timer.restart(o,t.delay,t.time),t.delay<=l&&o(l-t.delay)},0,t.time)}(n,t,{name:e,index:i,group:r,on:YNe,tween:ZNe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function Wk(n,e){var t=Uu(n,e);if(t.state>0)throw new Error("too late; already scheduled");return t}function Q0(n,e){var t=Uu(n,e);if(t.state>3)throw new Error("too late; already running");return t}function Uu(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function CM(n,e){var i,r,o,t=n.__transition,s=!0;if(t){for(o in e=null==e?null:e+"",t)(i=t[o]).name===e?(r=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(r?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[o]):s=!1;s&&delete n.__transition}}function $d(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var bM,wne=180/Math.PI,jk={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cne(n,e,t,i,r,s){var o,a,c;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(c=n*t+e*i)&&(t-=n*c,i-=e*c),(a=Math.sqrt(t*t+i*i))&&(t/=a,i/=a,c/=a),n*i<e*t&&(n=-n,e=-e,c=-c,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,n)*wne,skewX:Math.atan(c)*wne,scaleX:o,scaleY:a}}function bne(n,e,t,i){function r(l){return l.length?l.pop()+" ":""}return function(l,u){var f=[],p=[];return l=n(l),u=n(u),function s(l,u,f,p,g,_){if(l!==f||u!==p){var y=g.push("translate(",null,e,null,t);_.push({i:y-4,x:$d(l,f)},{i:y-2,x:$d(u,p)})}else(f||p)&&g.push("translate("+f+e+p+t)}(l.translateX,l.translateY,u.translateX,u.translateY,f,p),function o(l,u,f,p){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),p.push({i:f.push(r(f)+"rotate(",null,i)-2,x:$d(l,u)})):u&&f.push(r(f)+"rotate("+u+i)}(l.rotate,u.rotate,f,p),function a(l,u,f,p){l!==u?p.push({i:f.push(r(f)+"skewX(",null,i)-2,x:$d(l,u)}):u&&f.push(r(f)+"skewX("+u+i)}(l.skewX,u.skewX,f,p),function c(l,u,f,p,g,_){if(l!==f||u!==p){var y=g.push(r(g)+"scale(",null,",",null,")");_.push({i:y-4,x:$d(l,f)},{i:y-2,x:$d(u,p)})}else(1!==f||1!==p)&&g.push(r(g)+"scale("+f+","+p+")")}(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,p),l=u=null,function(g){for(var w,_=-1,y=p.length;++_<y;)f[(w=p[_]).i]=w.x(g);return f.join("")}}}var iVe=bne(function tVe(n){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?jk:Cne(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),rVe=bne(function nVe(n){return null!=n&&(bM||(bM=document.createElementNS("http://www.w3.org/2000/svg","g")),bM.setAttribute("transform",n),n=bM.transform.baseVal.consolidate())?Cne((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):jk},", ",")",")");function sVe(n,e){var t,i;return function(){var r=Q0(this,n),s=r.tween;if(s!==t)for(var o=0,a=(i=t=s).length;o<a;++o)if(i[o].name===e){(i=i.slice()).splice(o,1);break}r.tween=i}}function oVe(n,e,t){var i,r;if("function"!=typeof t)throw new Error;return function(){var s=Q0(this,n),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:e,value:t},c=0,l=r.length;c<l;++c)if(r[c].name===e){r[c]=a;break}c===l&&r.push(a)}s.tween=r}}function $k(n,e,t){var i=n._id;return n.each(function(){var r=Q0(this,i);(r.value||(r.value={}))[e]=t.apply(this,arguments)}),function(r){return Uu(r,i).value[e]}}function qk(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function xne(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function Lv(){}var xM=1/.7,Cg="\\s*([+-]?\\d+)\\s*",Iv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",W0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cVe=/^#([0-9a-f]{3,8})$/,lVe=new RegExp(`^rgb\\(${Cg},${Cg},${Cg}\\)$`),uVe=new RegExp(`^rgb\\(${W0},${W0},${W0}\\)$`),hVe=new RegExp(`^rgba\\(${Cg},${Cg},${Cg},${Iv}\\)$`),fVe=new RegExp(`^rgba\\(${W0},${W0},${W0},${Iv}\\)$`),dVe=new RegExp(`^hsl\\(${Iv},${W0},${W0}\\)$`),pVe=new RegExp(`^hsla\\(${Iv},${W0},${W0},${Iv}\\)$`),Mne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Sne(){return this.rgb().formatHex()}function Ene(){return this.rgb().formatRgb()}function Bv(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=cVe.exec(n))?(t=e[1].length,e=parseInt(e[1],16),6===t?Tne(e):3===t?new m3(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===t?MM(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===t?MM(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=lVe.exec(n))?new m3(e[1],e[2],e[3],1):(e=uVe.exec(n))?new m3(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=hVe.exec(n))?MM(e[1],e[2],e[3],e[4]):(e=fVe.exec(n))?MM(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=dVe.exec(n))?Ine(e[1],e[2]/100,e[3]/100,1):(e=pVe.exec(n))?Ine(e[1],e[2]/100,e[3]/100,e[4]):Mne.hasOwnProperty(n)?Tne(Mne[n]):"transparent"===n?new m3(NaN,NaN,NaN,0):null}function Tne(n){return new m3(n>>16&255,n>>8&255,255&n,1)}function MM(n,e,t,i){return i<=0&&(n=e=t=NaN),new m3(n,e,t,i)}function AVe(n){return n instanceof Lv||(n=Bv(n)),n?new m3((n=n.rgb()).r,n.g,n.b,n.opacity):new m3}function SM(n,e,t,i){return 1===arguments.length?AVe(n):new m3(n,e,t,i??1)}function m3(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}function Lne(){return`#${x5(this.r)}${x5(this.g)}${x5(this.b)}`}function Dne(){const n=EM(this.opacity);return`${1===n?"rgb(":"rgba("}${b5(this.r)}, ${b5(this.g)}, ${b5(this.b)}${1===n?")":`, ${n})`}`}function EM(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function b5(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function x5(n){return((n=b5(n))<16?"0":"")+n.toString(16)}function Ine(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Gu(n,e,t,i)}function Bne(n){if(n instanceof Gu)return new Gu(n.h,n.s,n.l,n.opacity);if(n instanceof Lv||(n=Bv(n)),!n)return new Gu;if(n instanceof Gu)return n;var e=(n=n.rgb()).r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,a=s-r,c=(s+r)/2;return a?(o=e===s?(t-i)/a+6*(t<i):t===s?(i-e)/a+2:(e-t)/a+4,a/=c<.5?s+r:2-s-r,o*=60):a=c>0&&c<1?0:o,new Gu(o,a,c,n.opacity)}function Gu(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}function Rne(n){return(n=(n||0)%360)<0?n+360:n}function TM(n){return Math.max(0,Math.min(1,n||0))}function Kk(n,e,t){return 255*(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)}function Fne(n,e,t,i,r){var s=n*n,o=s*n;return((1-3*n+3*s-o)*e+(4-6*s+3*o)*t+(1+3*n+3*s-3*o)*i+o*r)/6}qk(Lv,Bv,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Sne,formatHex:Sne,formatHex8:function gVe(){return this.rgb().formatHex8()},formatHsl:function mVe(){return Bne(this).formatHsl()},formatRgb:Ene,toString:Ene}),qk(m3,SM,xne(Lv,{brighter(n){return n=null==n?xM:Math.pow(xM,n),new m3(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new m3(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new m3(b5(this.r),b5(this.g),b5(this.b),EM(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lne,formatHex:Lne,formatHex8:function vVe(){return`#${x5(this.r)}${x5(this.g)}${x5(this.b)}${x5(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Dne,toString:Dne})),qk(Gu,function _Ve(n,e,t,i){return 1===arguments.length?Bne(n):new Gu(n,e,t,i??1)},xne(Lv,{brighter(n){return n=null==n?xM:Math.pow(xM,n),new Gu(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new Gu(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+360*(this.h<0),e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new m3(Kk(n>=240?n-240:n+120,r,i),Kk(n,r,i),Kk(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new Gu(Rne(this.h),TM(this.s),TM(this.l),EM(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=EM(this.opacity);return`${1===n?"hsl(":"hsla("}${Rne(this.h)}, ${100*TM(this.s)}%, ${100*TM(this.l)}%${1===n?")":`, ${n})`}`}}));const kne=n=>()=>n;function Hne(n,e){var t=e-n;return t?function Pne(n,e){return function(t){return n+t*e}}(n,t):kne(isNaN(n)?e:n)}const zne=function n(e){var t=function bVe(n){return 1==(n=+n)?Hne:function(e,t){return t-e?function CVe(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}(e,t,n):kne(isNaN(e)?t:e)}}(e);function i(r,s){var o=t((r=SM(r)).r,(s=SM(s)).r),a=t(r.g,s.g),c=t(r.b,s.b),l=Hne(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=c(u),r.opacity=l(u),r+""}}return i.gamma=n,i}(1);function One(n){return function(e){var o,a,t=e.length,i=new Array(t),r=new Array(t),s=new Array(t);for(o=0;o<t;++o)a=SM(e[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=n(i),r=n(r),s=n(s),a.opacity=1,function(c){return a.r=i(c),a.g=r(c),a.b=s(c),a+""}}}One(function yVe(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),r=n[i],s=n[i+1];return Fne((t-i/e)*e,i>0?n[i-1]:2*r-s,r,s,i<e-1?n[i+2]:2*s-r)}}),One(function wVe(n){var e=n.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*e);return Fne((t-i/e)*e,n[(i+e-1)%e],n[i%e],n[(i+1)%e],n[(i+2)%e])}});var Xk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yk=new RegExp(Xk.source,"g");function SVe(n,e){var i,r,s,t=Xk.lastIndex=Yk.lastIndex=0,o=-1,a=[],c=[];for(n+="",e+="";(i=Xk.exec(n))&&(r=Yk.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:$d(i,r)})),t=Yk.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?function MVe(n){return function(e){return n(e)+""}}(c[0].x):function xVe(n){return function(){return n}}(e):(e=c.length,function(l){for(var f,u=0;u<e;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}function Nne(n,e){var t;return("number"==typeof e?$d:e instanceof Bv?zne:(t=Bv(e))?(e=t,zne):SVe)(n,e)}function EVe(n){return function(){this.removeAttribute(n)}}function TVe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function LVe(n,e,t){var i,s,r=t+"";return function(){var o=this.getAttribute(n);return o===r?null:o===i?s:s=e(i=o,t)}}function DVe(n,e,t){var i,s,r=t+"";return function(){var o=this.getAttributeNS(n.space,n.local);return o===r?null:o===i?s:s=e(i=o,t)}}function IVe(n,e,t){var i,r,s;return function(){var o,c,a=t(this);return null==a?void this.removeAttribute(n):(o=this.getAttribute(n))===(c=a+"")?null:o===i&&c===r?s:(r=c,s=e(i=o,a))}}function BVe(n,e,t){var i,r,s;return function(){var o,c,a=t(this);return null==a?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local))===(c=a+"")?null:o===i&&c===r?s:(r=c,s=e(i=o,a))}}function FVe(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function kVe(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function PVe(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&kVe(n,s)),t}return r._value=e,r}function HVe(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&FVe(n,s)),t}return r._value=e,r}function OVe(n,e){return function(){Wk(this,n).delay=+e.apply(this,arguments)}}function NVe(n,e){return e=+e,function(){Wk(this,n).delay=e}}function UVe(n,e){return function(){Q0(this,n).duration=+e.apply(this,arguments)}}function GVe(n,e){return e=+e,function(){Q0(this,n).duration=e}}function WVe(n,e){if("function"!=typeof e)throw new Error;return function(){Q0(this,n).ease=e}}function ZVe(n,e,t){var i,r,s=function YVe(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(e)?Wk:Q0;return function(){var o=s(this,n),a=o.on;a!==i&&(r=(i=a).copy()).on(e,t),o.on=r}}var rUe=xv.prototype.constructor;function Vne(n){return function(){this.style.removeProperty(n)}}function hUe(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function fUe(n,e,t){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&hUe(n,o,t)),i}return s._value=e,s}function AUe(n){return function(e){this.textContent=n.call(this,e)}}function vUe(n){var e,t;function i(){var r=n.apply(this,arguments);return r!==t&&(e=(t=r)&&AUe(r)),e}return i._value=n,i}var CUe=0;function cf(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function Une(){return++CUe}var lf=xv.prototype;cf.prototype=function bUe(n){return xv().transition(n)}.prototype={constructor:cf,select:function nUe(n){var e=this._name,t=this._id;"function"!=typeof n&&(n=zk(n));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var u,f,a=i[o],c=a.length,l=s[o]=new Array(c),p=0;p<c;++p)(u=a[p])&&(f=n.call(u,u.__data__,p,a))&&("__data__"in u&&(f.__data__=u.__data__),l[p]=f,wM(l[p],e,t,p,l,Uu(u,t)));return new cf(s,this._parents,e,t)},selectAll:function iUe(n){var e=this._name,t=this._id;"function"!=typeof n&&(n=Xte(n));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var u,c=i[a],l=c.length,f=0;f<l;++f)if(u=c[f]){for(var g,p=n.call(u,u.__data__,f,c),_=Uu(u,t),y=0,w=p.length;y<w;++y)(g=p[y])&&wM(g,e,t,y,p,_);s.push(p),o.push(u)}return new cf(s,o,e,t)},selectChild:lf.selectChild,selectChildren:lf.selectChildren,filter:function KVe(n){"function"!=typeof n&&(n=Yte(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var c,s=e[r],o=s.length,a=i[r]=[],l=0;l<o;++l)(c=s[l])&&n.call(c,c.__data__,l,s)&&a.push(c);return new cf(i,this._parents,this._name,this._id)},merge:function XVe(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,s=Math.min(i,t.length),o=new Array(i),a=0;a<s;++a)for(var p,c=e[a],l=t[a],u=c.length,f=o[a]=new Array(u),g=0;g<u;++g)(p=c[g]||l[g])&&(f[g]=p);for(;a<i;++a)o[a]=e[a];return new cf(o,this._parents,this._name,this._id)},selection:function sUe(){return new rUe(this._groups,this._parents)},transition:function yUe(){for(var n=this._name,e=this._id,t=Une(),i=this._groups,r=i.length,s=0;s<r;++s)for(var c,o=i[s],a=o.length,l=0;l<a;++l)if(c=o[l]){var u=Uu(c,e);wM(c,n,t,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new cf(i,this._parents,n,t)},call:lf.call,nodes:lf.nodes,node:lf.node,size:lf.size,empty:lf.empty,each:lf.each,on:function JVe(n,e){var t=this._id;return arguments.length<2?Uu(this.node(),t).on.on(n):this.each(ZVe(t,n,e))},attr:function RVe(n,e){var t=dM(n),i="transform"===t?rVe:Nne;return this.attrTween(n,"function"==typeof e?(t.local?BVe:IVe)(t,i,$k(this,"attr."+n,e)):null==e?(t.local?TVe:EVe)(t):(t.local?DVe:LVe)(t,i,e))},attrTween:function zVe(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;var i=dM(n);return this.tween(t,(i.local?PVe:HVe)(i,e))},style:function uUe(n,e,t){var i="transform"==(n+="")?iVe:Nne;return null==e?this.styleTween(n,function oUe(n,e){var t,i,r;return function(){var s=yg(this,n),o=(this.style.removeProperty(n),yg(this,n));return s===o?null:s===t&&o===i?r:r=e(t=s,i=o)}}(n,i)).on("end.style."+n,Vne(n)):"function"==typeof e?this.styleTween(n,function cUe(n,e,t){var i,r,s;return function(){var o=yg(this,n),a=t(this),c=a+"";return null==a&&(this.style.removeProperty(n),c=a=yg(this,n)),o===c?null:o===i&&c===r?s:(r=c,s=e(i=o,a))}}(n,i,$k(this,"style."+n,e))).each(function lUe(n,e){var t,i,r,a,s="style."+e,o="end."+s;return function(){var c=Q0(this,n),l=c.on,u=null==c.value[s]?a||(a=Vne(e)):void 0;(l!==t||r!==u)&&(i=(t=l).copy()).on(o,r=u),c.on=i}}(this._id,n)):this.styleTween(n,function aUe(n,e,t){var i,s,r=t+"";return function(){var o=yg(this,n);return o===r?null:o===i?s:s=e(i=o,t)}}(n,i,e),t).on("end.style."+n,null)},styleTween:function dUe(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,fUe(n,e,t??""))},text:function mUe(n){return this.tween("text","function"==typeof n?function gUe(n){return function(){var e=n(this);this.textContent=e??""}}($k(this,"text",n)):function pUe(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function _Ue(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;return this.tween(e,vUe(n))},remove:function tUe(){return this.on("end.remove",function eUe(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}(this._id))},tween:function aVe(n,e){var t=this._id;if(n+="",arguments.length<2){for(var o,i=Uu(this.node(),t).tween,r=0,s=i.length;r<s;++r)if((o=i[r]).name===n)return o.value;return null}return this.each((null==e?sVe:oVe)(t,n,e))},delay:function VVe(n){var e=this._id;return arguments.length?this.each(("function"==typeof n?OVe:NVe)(e,n)):Uu(this.node(),e).delay},duration:function QVe(n){var e=this._id;return arguments.length?this.each(("function"==typeof n?UVe:GVe)(e,n)):Uu(this.node(),e).duration},ease:function jVe(n){var e=this._id;return arguments.length?this.each(WVe(e,n)):Uu(this.node(),e).ease},easeVarying:function qVe(n){if("function"!=typeof n)throw new Error;return this.each(function $Ve(n,e){return function(){var t=e.apply(this,arguments);if("function"!=typeof t)throw new Error;Q0(this,n).ease=t}}(this._id,n))},end:function wUe(){var n,e,t=this,i=t._id,r=t.size();return new Promise(function(s,o){var a={value:o},c={value:function(){0==--r&&s()}};t.each(function(){var l=Q0(this,i),u=l.on;u!==n&&((e=(n=u).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),l.on=e}),0===r&&s()})},[Symbol.iterator]:lf[Symbol.iterator]};var MUe={time:null,delay:0,duration:250,ease:function xUe(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}};function SUe(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}xv.prototype.interrupt=function eVe(n){return this.each(function(){CM(this,n)})},xv.prototype.transition=function EUe(n){var e,t;n instanceof cf?(e=n._id,n=n._name):(e=Une(),(t=MUe).time=Vk(),n=null==n?null:n+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var c,o=i[s],a=o.length,l=0;l<a;++l)(c=o[l])&&wM(c,n,e,l,o,t||SUe(c,e));return new cf(i,this._parents,n,e)};Math;function Rv(n){return{type:n}}function qne(n){for(var i,e=-1,t=n.length,r=n[t-1],s=0;++e<t;)s+=(i=r)[1]*(r=n[e])[0]-i[0]*r[1];return s/2}function qd(n,e){if(n=function kUe(n){let e;for(;e=n.sourceEvent;)n=e;return n}(n),void 0===e&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop]}}return[n.pageX,n.pageY]}function js(n){return"string"==typeof n?new J3([[document.querySelector(n)]],[document.documentElement]):new J3([[n]],cne)}["w","e"].map(Rv),["n","s"].map(Rv),["n","w","e","s","nw","ne","sw","se"].map(Rv);const nP={capture:!0,passive:!1};function iP(n){n.preventDefault(),n.stopImmediatePropagation()}function PUe(n){var e=n.document.documentElement,t=js(n).on("dragstart.drag",iP,nP);"onselectstart"in e?t.on("selectstart.drag",iP,nP):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function HUe(n,e){var t=n.document.documentElement,i=js(n).on("dragstart.drag",null);e&&(i.on("click.drag",iP,nP),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function Kne(n){return((n=Math.exp(n))+1/n)/2}const VUe=function n(e,t,i){function r(s,o){var w,C,a=s[0],c=s[1],l=s[2],p=o[2],g=o[0]-a,_=o[1]-c,y=g*g+_*_;if(y<1e-12)C=Math.log(p/l)/e,w=function(P){return[a+P*g,c+P*_,l*Math.exp(e*P*C)]};else{var x=Math.sqrt(y),M=(p*p-l*l+i*y)/(2*l*t*x),T=(p*p-l*l-i*y)/(2*p*t*x),I=Math.log(Math.sqrt(M*M+1)-M),F=Math.log(Math.sqrt(T*T+1)-T);C=(F-I)/e,w=function(P){var R=P*C,k=Kne(I),W=l/(t*x)*(k*function NUe(n){return((n=Math.exp(2*n))-1)/(n+1)}(e*R+I)-function OUe(n){return((n=Math.exp(n))-1/n)/2}(I));return[a+W*g,c+W*_,l*k/Kne(e*R+I)]}}return w.duration=1e3*C*e/Math.SQRT2,w}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o;return n(o,a,a*a)},r}(Math.SQRT2,2,4),IM=n=>()=>n;function UUe(n,{sourceEvent:e,target:t,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function j0(n,e,t){this.k=n,this.x=e,this.y=t}j0.prototype={constructor:j0,scale:function(n){return 1===n?this:new j0(this.k*n,this.x,this.y)},translate:function(n,e){return 0===n&0===e?this:new j0(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rP=new j0(1,0,0);function sP(n){n.stopImmediatePropagation()}function Fv(n){n.preventDefault(),n.stopImmediatePropagation()}function QUe(n){return!(n.ctrlKey&&"wheel"!==n.type||n.button)}function WUe(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n).hasAttribute("viewBox")?[[(n=n.viewBox.baseVal).x,n.y],[n.x+n.width,n.y+n.height]]:[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]:[[0,0],[n.clientWidth,n.clientHeight]]}function Xne(){return this.__zoom||rP}function jUe(n){return-n.deltaY*(1===n.deltaMode?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function $Ue(){return navigator.maxTouchPoints||"ontouchstart"in this}function qUe(n,e,t){var i=n.invertX(e[0][0])-t[0][0],r=n.invertX(e[1][0])-t[1][0],s=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}let BM={};class nl{constructor(){this.classes=[],this.transform="",this.selector="",this.index=0,this.visible=!0,this.outOfDesign=!1,this.theoretic=!1,this.loaded=!1,this._lineThickness=1,this.tooltip=e=>`<b>${this.name?this.name:this.selector}</b>`}get lineThickness(){return this._lineThickness}set lineThickness(e){this._lineThickness=e}draw(e){return Ea(function*(){})()}redraw(e){}init(e,t){}show(e){return(this.floor===this.svgUpdate.floor||this.floor===tt.all)&&!this.theoretic&&this.visible&&!this.outOfDesign}update(e){var t=this;return Ea(function*(){t.svgUpdate=e,t.onUpdate(t.svgUpdate.theme);const i=t.svgUpdate.floor;t.meterPerPixel=t.svgUpdate.meterPerPixel,t.svgUpdate.redrawAll&&(void 0!==t.svgUpdate.theme.showTower?void 0===t.floor&&t.parent&&t.parent.floor&&(t.floor=t.parent.floor):t.floor=tt.all,t.init(i,t.svgUpdate.theme),yield t.draw(i)),t.show(i)&&(yield t.redraw(i))})()}createSelector(){if(!this.selector)if(this.parent&&(this.parent.selector?this.selector=this.parent.selector:(this.floor===tt.ground&&(this.selector="L0"),this.floor===tt.top&&(this.selector="L1"))),void 0!==this.name)this.selector+=`-${this.name.replace(/\s/g,"")}`;else{let e=this.constructor.name;"sensorType"in this&&(e=this.sensorType),e in BM||(BM[e]=0),BM[e]++,this.selector+=`-${e}-${BM[e]}`}}select(){document.querySelectorAll("svg .selected").forEach((e,t)=>{e.classList.remove("selected")}),this.svg.node().classList.add("selected")}setClass(e){!e.node()||!this.classes||this.classes.forEach(t=>{e.node().classList.add(t)})}}class oP extends nl{constructor(e){super(),this.coords=[],this.floor=tt.ground,this.theoretic=!1,this.tooltip=()=>(console.log(this.selector),`Footprint\n    <br>${this.floor}-level\n    <br>${this.area()}m2`),this.area=()=>Math.abs(mn(qne(this.coords),1)),Object.assign(this,e)}setup(){}draw(e){var t=this;return Ea(function*(){void 0===t.svg&&(t.svg=js(`#${t.selector}`),t.name||(t.name=t.selector),t.classes=[`floor-${t.floor}`],t.classes.push("bg-fill")),t.show(e)?(t.svg.attr("points",t.coords.join(" ")),t.setClass(t.svg)):t.svg.attr("points","")})()}}let kv={};var kn=(()=>{return(n=kn||(kn={})).outer="outer",n.inner="inner",n.theoretic="theoretic",kn;var n})(),ot=(()=>{return(n=ot||(ot={})).in="in",n.out="out",n.left="left",n.right="right",ot;var n})(),ni=(()=>{return(n=ni||(ni={})).inside="inside",n.outside="outside",n.tower="tower",n.straight="straight",ni;var n})();class ei extends nl{constructor(e){super(),this.origin=[0,0],this.orientation="",this.ceiling=-1,this.gable=!1,this.tower=!1,this.tooltip=()=>`Wall <b>${this.orientation}</b> (${this.parent instanceof oP?"outer wall":"of "+this.parent+" room"} ) \n    <br>Inside ${this.getLength(ot.in,2)} m2\n    <br>Outside ${this.outerWallLength=this.getLength(ot.out,2)} m2`,Object.assign(this,e)}createSelector(){this.selector=this.parent.selector.replace("Footprint-1","outer");const e=p1(this.sides[ot.in][0],this.sides[ot.in][1]);this.orientation=0===e?"North":45===e?"NortEast":-45===e||315===e?"NorthWest":90===e?"East":180===e?"South":270===e||-90===e?"West":`${e}`.split(".")[0],this.selector+=`-${this.orientation}Wall`,this.selector in kv||(kv[this.selector]=0),kv[this.selector]++,kv[this.selector]>1&&(this.selector+=`-${kv[this.selector]}`)}draw(e){var t=this;return Ea(function*(){if(void 0===t.svg&&(t.svg=js(`#${t.selector}`),t.svgOrigin=t.svg.select(".wall-origin"),t.svgLeft=t.svg.select(".wall-left"),t.svgRight=t.svg.select(".wall-right"),t.svgFill=t.svg.select(".wall-fill"),t.type===kn.outer&&(t.thickness=t.parent.parent.wallOuterThickness),t.type===kn.inner&&(t.thickness=t.parent.parent.wallInnerThickness),t.svg.node()&&t.svg.node().classList.add(`type-${t.type}`)),!t.show(e))return t.svgFill.attr("points",""),t.svgLeft.attr("points",""),t.svgRight.attr("points",""),void t.svgOrigin.attr("r","0");t.svgOrigin.attr("cx",t.origin[0]).attr("cy",t.origin[1]),t.sides.in&&t.sides.out&&t.svgFill.attr("points",[...t.sides.in,...[...t.sides.out].reverse()].join(" "));for(let i of Object.keys(ot)){const r=i;if(!(r in t.sides))return;let s;s=r===ot.in?t.svgLeft:t.svgRight,s.attr("points",t.sides[r].join(" ")),s.node()&&s.node().classList.add(`side-${r}`)}t.innerWallLength=t.getLength(ot.in),t.outerWallLength=t.getLength(ot.out)})()}redraw(e){this.svgOrigin&&this.svgOrigin.attr("r",this.meterPerPixel*this.lineThickness*3),this.svgLeft&&this.svgLeft.attr("stroke-width",this.meterPerPixel*this.lineThickness*(this.type===kn.theoretic?4:1)),this.svgRight&&this.svgRight.attr("stroke-width",this.meterPerPixel*this.lineThickness*(this.type===kn.theoretic?4:1))}getLength(e,t=2){const i=this.sides[e];return i&&i[0]&&i[1]?mn(Ka(...i),t):0}getArea(e,t=2){const i=this.getLength(e);return 0===i?0:mn(i*this.ceiling,t)}getPosition(e,t,i=0){const r=this.sides[e],s=this.getLength(e)*t,o=p1(r[0],r[1]);return to(o,s+i,r[0])}drawTheoretic(e,t,i){this.thickness=i,"n"===e&&this.drawByRoom(0,1,t,ni.straight,ni.straight),"e"===e&&this.drawByRoom(1,2,t,ni.straight,ni.straight),"s"===e&&this.drawByRoom(2,3,t,ni.straight,ni.straight),"w"===e&&this.drawByRoom(3,0,t,ni.straight,ni.straight)}drawByRoom(e,t,i,r,s){if(!1===this.visible)return void(this.sides={[ot.in]:[[0,0],[0,0]],[ot.out]:[[0,0],[0,0]]});this.type===kn.inner?(this.thickness=i.wallInnerThickness,this.ceiling=i.cross.ceilingHeight):this.type===kn.outer?(this.thickness=i.wallOuterThickness,this.ceiling=i.cross.outerWallHeight):this.type===kn.theoretic?this.ceiling=i.cross.ceilingHeight:console.error(this);const o=(f,p,g)=>p===ni.inside&&0===f?g+45:p===ni.inside&&1===f||p===ni.outside&&0===f?g-45:p===ni.outside&&1===f?g+45:p===ni.tower&&0===f?g+67.5:p===ni.tower&&1===f?g-67.5:p===ni.straight?g:void 0,a=f=>{const p=Math.sqrt(this.thickness**2*2),g=i.tower;return f===ni.inside||f===ni.outside?p:f===ni.tower?Ka(g.innerCoords[0],g.outerCoords[7]):f===ni.straight?this.thickness:void 0};let c=this.parent.coords[e],l=this.parent.coords[t];this.origin=c,this.innerWallLength=Ka(c,l);let u=p1(c,l)-90;this.sides={[ot.in]:[c,l]},this.type!==kn.theoretic&&(this.sides[ot.out]=[to(o(0,r,u),a(r),c),to(o(1,s,u),a(s),l)])}getFootPrint(){if(!this.sides)return[];const e=[];return this.sides[ot.in]&&e.push(...this.sides[ot.in]),this.sides[ot.out]&&e.push(...this.sides[ot.out].reverse()),e}}class Pt extends nl{constructor(e){super(),this.points=[],this.offset=[0,0],this.offsetWall=.3,this.elevation=.3,this.verticalCableLength=0,this.cableOnly=!1,this.sensorOnly=!1,this.wallSide=ot.in,this.cableLength=0,this.amount=1,this.fontSize=14,this.visible=!1,this.showBadge=!1,this.getSensorType=t=>Object.values(Ge).find(r=>t.includes(r)),this.tooltip=()=>{let t=`<b>${this.sensorType.toTitleCase()} `;return this.cableLength>0&&(t+=`<br>Cable length ${mn(this.cableLength,1)}m2`),this.group&&(t+=`<br>Group ${this.group}`),t},Object.assign(this,e)}draw(e){var t=this;return Ea(function*(){if(void 0===t.svg){if(!t.show(e))return;(void 0===t.floor||e in t.parent)&&(t.floor=t.parent.floor),t.svg=js(`#${t.selector}.sensor-cable`),t.sensorType===Ge.temperature&&(t.sensorOnly=!0),t.cableOnly?(t.lineThickness=2,t.classes.push("sensor-room-cable")):(t.svgG=js(`#${t.selector}.sensor-g`),t.showBadge=t.amount>=2&&void 0!==t.svgG,t.svgIcon=js(`#${t.selector}.sensor-icon`),t.showBadge&&(t.svgBadge=t.svgG.append("g"),t.svgBadgeCircle=t.svgBadge.append("circle"),t.svgBadgeText=t.svgBadge.append("text"))),t.group&&t.classes.push(`el-group-${t.group}`),t.cableType&&t.classes.push(`cable-${t.cableType}`),t.classes.push(`sensor-${t.sensorType}`)}if(!t.show(e))return t.svgIcon&&t.svgIcon.attr("xlink:href",""),t.svg&&t.svg.attr("points",""),t.svgBadgeCircle&&t.svgBadgeCircle.attr("r",0),t.svgBadgeText&&t.svgBadgeText.attr("font-size",0),void(t.showBadge=!1);t.svgIcon&&t.svgIcon.attr("xlink:href",`#icon-${t.getSensorType(t.selector)}`);const i=t.calcOffsetWall();t.cableOnly||(t.svgIcon.attr("x",`${i[0]}px`).attr("y",`${i[1]}px`),t.setClass(t.svgG),t.setClass(t.svg)),t.showBadge?t.badge(i):(t.svgBadgeCircle&&t.svgBadgeCircle.attr("r",0),t.svgBadgeText&&t.svgBadgeText.text("")),t.sensorOnly||(t.svg.attr("points",t.cablePoints(i,e).join(" ")).attr("transform",t.transform),t.setClass(t.svg),t.cableLength=t.getLength())})()}redraw(e){!this.show(e)||(this.svgBadge&&(this.svgBadge.attr("stroke-width",this.meterPerPixel*this.lineThickness*1).attr("transform",`translate(${10*this.meterPerPixel} ${-10*this.meterPerPixel})`),this.svgBadgeCircle.attr("r",8*this.meterPerPixel),this.svgBadgeText.attr("font-size",this.meterPerPixel*this.fontSize).text(`${this.amount}`)),this.svg&&(this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness*1),this.cableType===Du.OutsidePOE&&this.svg.attr("stroke-dasharray",`${this.meterPerPixel*this.lineThickness*10*.5} ${this.meterPerPixel*this.lineThickness*10}`)))}cablePoints(e,t){return this.show(t)?[e,...this.points]:[]}getLength(){let t=0;return this.points.forEach((i,r,s)=>{r+1!==this.points.length&&(t+=((i,r)=>Math.hypot(r[0]-i[0],r[1]-i[1]))(i,s[r+1]))}),mn(t+this.verticalCableLength+.3*this.amount)}badge(e){this.svgBadge.attr("class","sensor-badge"),this.svgBadgeCircle.attr("fill",2===this.amount?"white":"#333").attr("cx",e[0]).attr("cy",e[1]).attr("stroke","black"),this.svgBadgeText.attr("fill",2===this.amount?"black":"white").attr("x",e[0]).attr("y",e[1]).attr("text-anchor","middle").attr("class","sensor-badge-text").attr("stroke","none").attr("dominant-baseline","middle").text(`${this.amount}`)}calcOffsetWall(){if(this.parent instanceof ei){const t=this.parent.sides[this.wallSide],i=p1(t[0],t[1]);return to(i+90,this.offsetWall,this.points[0])}return[this.points[0][0]+this.offset[0],this.points[0][1]+this.offset[1]]}select(){document.querySelectorAll("svg .selected").forEach((e,t)=>{e.classList.remove("selected")}),[Ge.socket,Ge.perilex].includes(this.sensorType)?document.querySelectorAll(`.el-group-${this.group}`).forEach((e,t)=>{e.classList.add("selected")}):(this.svg.node().classList.add("selected"),this.svgIcon.node().classList.add("selected"))}}let XUe=(()=>{class n{constructor(){this.class="base",this.html="dummy"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Rn({type:n,selectors:[["tooltip"]],hostAttrs:[1,"popup"],hostVars:2,hostBindings:function(t,i){2&t&&yD(i.class)},decls:2,vars:1,consts:[[3,"innerHtml"],[1,"popup-arrow","popup-arrow-mid"]],template:function(t,i){1&t&&Ke(0,"div",0)(1,"div",1),2&t&&Se("innerHtml",i.html,V3)},styles:[".popup-arrow-mid{left:calc(50% - 10px)!important;background:inherit}[_nghost-%COMP%]{position:relative!important}"]}),n})();class Xa extends nl{constructor(e){super(),this.name="",this.coords=[],Object.assign(this,e)}draw(e){var t=this;return Ea(function*(){void 0===t.svg&&(t.svg=js(`#${t.selector}`)),t.show(e)?(t.svg.attr("points",t.coords.join(" ")).attr("transform",t.transform),t.setClass(t.svg)):t.svg.attr("points","")})()}redraw(e){this.svg&&this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness)}square(e,t,i){this.coords=[[i[0],i[1]],[i[0]+e,i[1]],[i[0]+e,i[1]+t],[i[0],i[1]+t]]}}class A3 extends nl{constructor(e){super(),this.coords=[],this.dash=[],Object.assign(this,e)}draw(e){var t=this;return Ea(function*(){void 0===t.svg&&(t.svg=js(`#${t.selector}`)),t.show(e)?(t.svg.attr("points",t.coords.join(" ")).attr("transform",t.transform),t.setClass(t.svg)):t.svg.attr("points","")})()}redraw(e){this.svg&&this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness).attr("stroke-dasharray",this.dash.map(t=>t*this.meterPerPixel*this.lineThickness).join(" "))}}class RM extends nl{constructor(e){super(),this.d="",Object.assign(this,e)}draw(e){var t=this;return Ea(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=js(`#${t.selector}`)}t.svg.attr("d",t.d).attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("transform",t.transform),t.setClass(t.svg)})()}setClass(e){!e.node()||0===this.classes.length||e.node().classList.add(this.classes)}}class g1 extends nl{constructor(e){super(),this.textRotate=0,this.fontSize=12,this.a=[0,0],this.b=[4,4],this.offsetPixels=0,this.offsetMeters=0,this.direction=90,this._lineThickness=.6,this.decimals=1,this.classes=["measure"],Object.assign(this,e)}between(e,t){return[e[0]+(t[0]-e[0])/2,e[1]+(t[1]-e[1])/2]}draw(e){var t=this;return Ea(function*(){if(void 0===t.svg&&(t.svg=js(`#${t.selector}`),t.setClass(t.svg),t.svgLine=t.svg.append("polyline"),t.svgArrow1=t.svg.append("text"),t.svgArrow2=t.svg.append("text"),t.svgText=t.svg.append("text")),!t.show(e))return t.svgLine.attr("points",""),t.svgText.text(""),t.svgArrow1.text(""),void t.svgArrow2.text("");let i=[...t.a],r=[...t.b],s=[0,0];90===t.direction&&(i=[i[0],Math.max(i[1],r[1])],r=[r[0],Math.max(i[1],r[1])]),-90===t.direction&&(i=[i[0],Math.min(i[1],r[1])],r=[r[0],Math.min(i[1],r[1])]),0===t.direction&&(i=[Math.max(i[0],r[0]),i[1]],r=[Math.max(i[0],r[0]),r[1]]),180===t.direction&&(i=[Math.min(i[0],r[0]),i[1]],r=[Math.min(i[0],r[0]),r[1]]);const o=t.offsetPixels*t.meterPerPixel,a=to(t.direction,o+t.offsetMeters,i),c=to(t.direction,o+t.offsetMeters,r),u=t.between(a,c);var f=c[0]-a[0],p=c[1]-a[1],g=mn(Math.sqrt(f*f+p*p),t.decimals);t.svg.style("visibility",0===g?"hidden":""),t.svgLine.attr("points",[t.a,i,a,c,r,t.b].join(" ")),t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`\n        translate(${u[0]+s[0]} ${u[1]+s[1]}) \n        rotate(${t.textRotate})\n        `).text(g);let _=90;[90,0].includes(t.direction)&&(_=-90),t.svgArrow1.attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n        translate(${a[0]} ${a[1]}) \n        rotate(${t.direction+_})\n        `).text("<"),t.svgArrow2.attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n          translate(${c[0]} ${c[1]}) \n          rotate(${t.direction+_+180})\n          `).text("<")})()}redraw(e){this.svgArrow2&&(this.svgArrow2.attr("font-size",w5(16,this.meterPerPixel,this.svgUpdate.print)),this.svgArrow1.attr("font-size",w5(16,this.meterPerPixel,this.svgUpdate.print))),this.svgText&&this.svgText.attr("font-size",w5(this.fontSize,this.meterPerPixel,this.svgUpdate.print)).attr("stroke-width",6*this.meterPerPixel),this.svgLine&&this.svgLine.attr("stroke-width",this.meterPerPixel*this.lineThickness)}}const il=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],YUe=Math.PI/180,ZUe=180/Math.PI;function aP(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(il[255&n]+il[n>>8&255]+il[n>>16&255]+il[n>>24&255]+"-"+il[255&e]+il[e>>8&255]+"-"+il[e>>16&15|64]+il[e>>24&255]+"-"+il[63&t|128]+il[t>>8&255]+"-"+il[t>>16&255]+il[t>>24&255]+il[255&i]+il[i>>8&255]+il[i>>16&255]+il[i>>24&255]).toLowerCase()}function Ci(n){return n*YUe}function Zne(n){return n*ZUe}class cP extends nl{constructor(){super(),this.selector="g-distance",this.point1=[-999,-999],this.point2=void 0,this.onUpdate=()=>{},this.floor=tt.all}draw(e){var t=this;return Ea(function*(){if(void 0===t.svg&&(t.svg=js(`#${t.selector}`),t.svgCircle1=t.svg.append("circle").style("fill","var(--accent-color)").style("cursor","crosshair").attr("stroke-width",0),t.svgCircle2=t.svg.append("circle").style("cursor","crosshair").style("fill","var(--accent-color)").attr("stroke-width",0),t.svgLine=t.svg.append("polyline").style("stroke","var(--accent-color)"),t.svgText=t.svg.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("paint-order","stroke").style("fill","var(--color-100)").style("stroke","var(--color-0)"),t.svgTextAngle=t.svg.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("paint-order","stroke").style("fill","var(--color-100)").style("stroke","var(--color-0)")),!t.show(e))return void t.clear();if(t.svgCircle1.attr("cx",t.point1[0]).attr("cy",t.point1[1]),!t.point2)return void t.clearExceptFirst();t.svgCircle2.attr("cx",t.point2[0]).attr("cy",t.point2[1]),t.svgLine.attr("points",[t.point1,t.point2].join(" "));const i=Ka(t.point1,t.point2);var s;t.svgText.text((s=i)<1200?`${mn(1e3*s,0)}mm`:`${mn(s,3)}m`),t.svgTextAngle.text(`${Math.abs(p1(t.point1,t.point2,0))}\xb0`),t.setClass(t.svg)})()}clear(){this.clearExceptFirst(),this.svgCircle1.attr("cx",-999).attr("cy",-999)}clearExceptFirst(){this.svgCircle2.attr("cx",-999).attr("cy",-999),this.svgText.attr("transform","translate(-999, -999)"),this.svgTextAngle.attr("transform","translate(-999, -999)"),this.svgLine.attr("points",[])}redraw(e){if(this.svgCircle1&&this.svgCircle1.attr("r",4*this.meterPerPixel),this.svgCircle2&&this.svgCircle2.attr("r",4*this.meterPerPixel),this.svgLine&&this.svgLine.attr("stroke-width",2*this.meterPerPixel),this.svgText&&this.svgTextAngle&&this.point2){const[t,i]=Ae(y5(this.point1,this.point2),[0,-20*this.meterPerPixel]);this.svgText.attr("transform",`translate(${t}, ${i})`).attr("stroke-width",6*this.meterPerPixel).attr("font-size",16*this.meterPerPixel);const[r,s]=Ae(this.point1,[-20*this.meterPerPixel,0]);this.svgTextAngle.attr("transform",`translate(${r}, ${s})`).attr("stroke-width",6*this.meterPerPixel).attr("font-size",16*this.meterPerPixel)}}}var Gt=(()=>{return(n=Gt||(Gt={})).topFloor="topFloor",n.wallOutside="wallOutside",n.wallInside="wallInside",n.bendInside="bendInside",n.bendOutside="bendOutside",n.topInside="topInside",n.topOutside="topOutside",n.lowestInside="lowestInside",n.lowestOutside="lowestOutside",n.groundFloorInside="groundFloorInside",n.groundFloorOutside="groundFloorOutside",Gt;var n})(),Si=(()=>{return(n=Si||(Si={})).ground="ground",n.crawlerFloor="crawlerFloor",n.crawlerCeiling="crawlerCeiling",n.groundFloor="groundFloor",n.ceiling="ceiling",n.topFloor="topFloor",n.towerTop="towerTop",Si;var n})(),k1=(()=>{return(n=k1||(k1={})).outer="outer",n.inner="inner",n.sketch="sketch",n.shadow="shadow",k1;var n})(),Hl=(()=>{return(n=Hl||(Hl={})).roof70="roof70",n.roofCircle="roofCircle",n.roofCircleAnd70="roofCircleAnd70",Hl;var n})();class tGe{constructor(){this.innerWidth=-1,this.wallOuterThickness=-1,this.ceilingHeight=-1,this.floorAboveGround=-1,this.crawlerHeight=-1,this.crawlerSpace=!1,this.topFloorThickness=.4,this.groundFloorThickness=.48,this.roofCenter=[],this.roofThickness=.4,this.roofCirclePullDown=1,this.roofCircleExtra=-1,this.roofCircleWalls=1,this.roof70offset=.6,this.roof70Extension=1.3,this.roof70Walls=1.4,this.roofRidgeHight=.6,this.roofRidgeWidth=.04,this.bendPoint=[-1,-1],this.bendPointInner=[-1,-1],this.elevations={},this.roofPoints={},this.houseHeight=-1,this.outerWallHeight=-1,this.innerWallHeight=-1,this.gableWallArea=-1,this.minimumHeight=1.5,this.minimumHeightWidth=-1,this.minimumHeightRoom=2.3,this.minimumHeightRoomWidth=-1,this.roofStyle=Hl.roof70,this.viewedRoofStyle=Hl.roof70,this.parts=[],this.create()}create(){this.drawRoofCircle(),this.drawBuilding(),this.drawRoof70(),this.drawHelpers(),this.parts.push(new cP)}calculate(e){this.house=e,this.innerWidth=this.house.outerBase,this.wallOuterThickness=this.house.wallOuterThickness,this.roofCircleExtra=mn(Math.cos(Ci(65))*this.roofCirclePullDown,3),this.bendPoint=[this.roof70offset,-this.roof70offset*Math.tan(Ci(70))-this.roof70Walls],this.bendPointInner=[this.roof70offset,-this.roof70offset*Math.tan(Ci(70))];const i=0-this.groundFloorThickness,o=i+this.groundFloorThickness+this.ceilingHeight;if(this.elevations={[Si.ground]:i-(this.crawlerSpace?this.floorAboveGround:0)+this.groundFloorThickness,[Si.crawlerFloor]:i-(this.crawlerSpace?this.crawlerHeight:0),[Si.crawlerCeiling]:i,[Si.groundFloor]:0,[Si.ceiling]:o,[Si.topFloor]:o+this.topFloorThickness},this.roofCenter=[mn(this.house.outerBase/2),mn(this.elevations[Si.topFloor])],this.roofPoints={[Gt.topFloor]:[this.wallOuterThickness,this.roofCenter[1]],[Gt.groundFloorOutside]:[0,0],[Gt.groundFloorInside]:[this.wallOuterThickness,0]},this.viewedRoofStyle===Hl.roof70){const c=this.pointOf70Roof();this.roofPoints={...this.roofPoints,[Gt.bendOutside]:c[2],[Gt.bendInside]:c[11],[Gt.topInside]:c[10],[Gt.topOutside]:c[3],[Gt.lowestInside]:c[13],[Gt.lowestOutside]:c[0]}}if(this.viewedRoofStyle===Hl.roofCircle){const c=(l,u)=>{const[f,p]=this.pointOnCircleRoof(Math.PI*(-(4-l)/4),u);return[f,p]};this.roofPoints={...this.roofPoints,[Gt.bendOutside]:c(1,k1.outer),[Gt.bendInside]:c(1,k1.inner),[Gt.topInside]:c(2,k1.inner),[Gt.topOutside]:c(2,k1.outer),[Gt.lowestInside]:c(0,k1.inner),[Gt.lowestOutside]:c(0,k1.outer)}}this.roofPoints[Gt.wallInside]=this.calcPointUnderInnerWall(),this.roofPoints[Gt.wallOutside]=this.calcPointUnderOuterWall(),Object.entries(this.roofPoints).forEach(([c,l],u)=>{this.elevations[c]=mn(l[1])}),this.gableWallArea=this.calculateGable(),this.innerWallHeight=Math.abs(this.roofPoints[Gt.wallInside][1]),this.outerWallHeight=Math.abs(this.roofPoints[Gt.wallOutside][1]),this.elevations[Si.towerTop]=this.elevations[Gt.topOutside]-.5,this.minimumHeightWidth=mn(this.getIntersectionWithRoof(this.minimumHeight)[0]),this.minimumHeightRoomWidth=mn(this.getIntersectionWithRoof(this.minimumHeightRoom)[0]),this.lowerAngle=mn(p1(this.roofPoints[Gt.lowestOutside],this.roofPoints[Gt.bendOutside]),3),this.upperAngle=mn(p1(this.roofPoints[Gt.bendOutside],this.roofPoints[Gt.topOutside]),3)}calculateGable(){const t=this.roofPoints[Gt.wallInside],i=this.roofPoints[Gt.bendInside],r=this.roofPoints[Gt.topInside];return 2*Z3([t[1]*i[0]+(i[1]-t[1])*i[0]/2+(r[0]-i[0])*i[1]+(r[0]-i[0])*(r[1]-i[1])/2])}calcPointUnderInnerWall(){const e=this.roofPoints[Gt.lowestInside];let[t,i]=_g([[this.wallOuterThickness,-100],[this.wallOuterThickness,100]],[e,this.roofPoints[Gt.bendInside]]);return[t,i]}calcPointUnderOuterWall(){const e=this.roofPoints[Gt.lowestInside];let[t,i]=_g([[0,-100],[0,100]],[e,this.roofPoints[Gt.bendInside]]);return e[0]>0&&(i=e[1]),[t,i]}drawBuilding(){this.parts.push(new Xa({selector:"building-ground-fill",onUpdate:function(e){this.square(e.innerWidth+3,Math.abs(e.elevations[Si.ground])+1.5,[-1.5,-e.elevations[Si.ground]])}})),this.parts.push(new Xa({selector:"building-ground",onUpdate:function(e){const i=Math.abs(e.elevations[Si.ground]);this.square(e.innerWidth+3,e.crawlerHeight-i+1.5,[-1.5,i])}})),this.parts.push(new A3({selector:"building-ground-line",onUpdate:function(e){const t=e.elevations[Si.ground];this.coords=[[-2,-t],[e.innerWidth+2,-t]]}})),this.parts.push(new Xa({selector:"building-crawler",onUpdate:function(e){this.visible=e.crawlerSpace,this.square(e.innerWidth-2*e.wallOuterThickness,e.crawlerHeight,[e.wallOuterThickness,-e.elevations[Si.crawlerCeiling]])}})),this.parts.push(new Xa({selector:"building-walls",onUpdate:function(e){const t=e.elevations[Si.topFloor];this.square(e.innerWidth,t+-e.elevations[Si.crawlerFloor],[0,-t])}})),this.parts.push(new Xa({selector:"building-room",onUpdate:function(e){this.square(e.innerWidth-2*e.wallOuterThickness,e.ceilingHeight,[e.wallOuterThickness,-e.elevations[Si.ceiling]])}})),this.parts.push(new Xa({selector:"building-fill",onUpdate:function(e){const i=e.elevations[Si.topFloor]+(e.viewedRoofStyle===Hl.roof70?e.roof70Walls:e.roofCircleWalls);this.square(e.innerWidth,i-e.elevations[Si.ground],[0,-i])}})),this.parts.push(new Xa({selector:"building-roof-70-wall1",onUpdate:function(e){this.square(e.wallOuterThickness,e.roof70Walls,[0,-e.elevations[Si.topFloor]-e.roof70Walls])}})),this.parts.push(new Xa({selector:"building-roof-70-wall2",onUpdate:function(e){this.square(e.wallOuterThickness,e.roof70Walls,[e.innerWidth-e.wallOuterThickness,-e.elevations[Si.topFloor]-e.roof70Walls])}})),this.parts.push(new Xa({selector:"building-roof-circle-wall1",onUpdate:function(e){this.square(e.wallOuterThickness,e.roofCircleWalls,[e.innerWidth-e.wallOuterThickness,-e.elevations[Si.topFloor]-e.roofCircleWalls])}})),this.parts.push(new Xa({selector:"building-roof-circle-wall2",onUpdate:function(e){this.square(e.wallOuterThickness,e.roofCircleWalls,[0,-e.elevations[Si.topFloor]-e.roofCircleWalls])}}))}drawHelpers(){this.parts.push(new g1({selector:"minimum",floor:tt.all,direction:0,textRotate:0,decimals:3,onUpdate:function(e){const t=e.elevations[Si.topFloor];this.offsetPixels=-20;const i=e.getIntersectionWithRoof(e.minimumHeight);this.offsetMeters=-1,this.a=[+e.wallOuterThickness,-t],this.b=[i[0],-i[1]]}})),this.parts.push(new g1({selector:"minimum-h",floor:tt.all,direction:-90,textRotate:0,decimals:3,onUpdate:function(e){const t=e.elevations[Si.topFloor];this.offsetPixels=0;const i=e.getIntersectionWithRoof(e.minimumHeight);this.offsetMeters=1.5,this.a=[+e.wallOuterThickness,-t],this.b=[i[0],-i[1]]}})),this.parts.push(new g1({selector:"minimum-room",floor:tt.all,direction:0,textRotate:45,decimals:3,onUpdate:function(e){const t=e.elevations[Si.topFloor];this.offsetPixels=20;const i=e.getIntersectionWithRoof(e.minimumHeightRoom);this.offsetMeters=1;const r=e.innerWidth-i[0];this.a=[e.innerWidth,-t],this.b=[r,-i[1]]}})),this.parts.push(new g1({selector:"minimum-room-h",floor:tt.all,direction:-90,textRotate:0,decimals:3,onUpdate:function(e){this.offsetPixels=0;const t=e.elevations[Si.topFloor],i=e.getIntersectionWithRoof(e.minimumHeightRoom);this.offsetMeters=1.5;const r=e.innerWidth-i[0];this.a=[r,-i[1]],this.b=[r+i[0]-e.wallOuterThickness,-t]}})),this.parts.push(new g1({selector:"lower-roof",floor:tt.all,textRotate:0,decimals:3,onUpdate:function(e){const t=e.roofPoints[Gt.bendInside],i=e.roofPoints[Gt.wallInside];this.offsetPixels=0,this.offsetMeters=-1.5,this.a=[i[0],-i[1]],this.b=[t[0],-t[1]],this.direction=p1(this.a,this.b)-90}})),this.parts.push(new g1({selector:"higher-roof",floor:tt.all,textRotate:0,decimals:3,onUpdate:function(e){const t=e.roofPoints[Gt.topInside],i=e.roofPoints[Gt.bendInside];this.offsetPixels=0,this.offsetMeters=1.5,this.a=[i[0],-i[1]],this.b=[t[0],-t[1]],this.direction=p1(this.a,this.b)-90}}))}getIntersectionWithRoof(e){const t=this.elevations[Si.topFloor]+e,i=[];return[[this.roofPoints[Gt.topFloor],this.roofPoints[Gt.wallInside]],[this.roofPoints[Gt.wallInside],this.roofPoints[Gt.bendInside]],[this.roofPoints[Gt.bendInside],this.roofPoints[Gt.topInside]]].forEach((c,l,u)=>{const f=_g(c,[[-100,t],[100,t]]);i.push(f)}),i.sort((c,l)=>l[0]-c[0])[0]}drawRoofCircle(){this.parts.push(new Xa({selector:"roof-circle-fill",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),k1.outer))].map(t=>[t[0],-t[1]])}})),this.parts.push(new Xa({selector:"roof-circle-shadow",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),k1.outer)),...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),k1.inner)).reverse()].map(t=>[t[0],-t[1]])}})),this.parts.push(new Xa({selector:"roof-circle",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),k1.outer)),...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),k1.inner)).reverse()].map(t=>[t[0],-t[1]])}})),this.parts.push(new RM({selector:"roof-circle__h-circle",lineThickness:2,onUpdate:function(e){const[t,i]=e.pointOnCircleRoof(0,k1.outer),r=t-e.innerWidth,s=2*r+e.innerWidth;this.d=`M${s},0 a1,1 0 0,0 ${-s},0`,this.transform=`translate(${-r} ${-i})`}})),this.parts.push(new Xa({selector:"roof-circle__h-line",lineThickness:2,onUpdate:function(e){const t=e.pointOnCircleRoof(Math.PI,k1.outer);this.coords=[e.pointOnCircleRoof(Math.PI*(-3/4),k1.sketch),[e.roofCenter[0],t[1]],t,e.pointOnCircleRoof(0,k1.outer),[e.roofCenter[0],t[1]],e.pointOnCircleRoof(Math.PI*(-1/4),k1.sketch)].map(function(i){return[i[0],-i[1]]})}}))}drawRoof70(){this.parts.push(new Xa({selector:"roof-70-fill",onUpdate:function(e){this.coords=e.pointOf70Roof().slice(0,7).map(([t,i])=>[t,-i])}})),this.parts.push(new Xa({selector:"roof-70-shadow",onUpdate:function(e){this.coords=e.pointOf70Roof(!0).map(([t,i])=>[t,-i])}})),this.parts.push(new Xa({selector:"roof-70",onUpdate:function(e){this.coords=e.pointOf70Roof().map(([t,i])=>[t,-i])}}))}pointOf70Roof(e=!1){const t=this.roofThickness/Math.sin(Ci(70)),i=this.roofThickness/Math.tan(Ci(70)),r=Math.sqrt(i**2+this.roofThickness**2),o=(Math.sin(Ci(30)),this.innerWidth/2),a=this.roof70offset,c=a*Math.tan(Ci(70))+this.roof70Walls,l=to(-40,r),u=a+l[0],f=c+l[1],_=(o-a)*Math.tan(Ci(30))+c;return[this.angle(Ci(110),this.roof70Extension,[0,-this.roof70Walls]),[0,-this.roof70Walls],[a,-c],[o,-_],[this.innerWidth-a,-c],[this.innerWidth,-this.roof70Walls],this.angle(Ci(70),this.roof70Extension,[this.innerWidth,-this.roof70Walls]),this.angle(Ci(70),this.roof70Extension,[this.innerWidth-t,-this.roof70Walls]),[this.innerWidth-t,-this.roof70Walls],[this.innerWidth-u,-f],Ae([o,-_],[0,this.roofThickness/Math.cos(Ci(30))]),[u,-f],[t,-this.roof70Walls],this.angle(Ci(110),this.roof70Extension,[t,-this.roof70Walls])].map(([y,w])=>[mn(y,40),mn(this.roofCenter[1]+-w,40)])}pointOnCircleRoof(e,t){let i;const r=this.roofThickness/Math.cos(Ci(22.5));t===k1.outer&&(i=this.innerWidth/2+this.roofCircleExtra),t===k1.inner&&(i=this.innerWidth/2-r+this.roofCircleExtra),t===k1.sketch&&(i=this.innerWidth/2+1.5*r+this.roofCircleExtra);const[s,o]=to(Zne(e),i);return[mn(this.roofCenter[0]+s),mn(this.roofCenter[1]+Math.abs(o)+this.roofCircleWalls-this.roofCirclePullDown)]}angle(e,t,i=[0,0]){const r=t*Math.cos(e),s=t*Math.sin(e);return[r+i[0],s+i[1]]}}class P1 extends nl{constructor(e){super(),this.coords=[],this.floor=tt.ground,this.hole=!1,this.centralElectricity=[0,0],this.theoretic=!1,this.width=0,this.height=0,this.fontSize=12,this.tooltip=()=>{console.log(this.selector);let t=`Room <b>${this.name}</b> \n    <br>${this.floor}-level\n    <br>${this.area()}m2`;return this.width&&(t+=`<br>width: ${this.width}m`),this.height&&(t+=`<br>height: ${this.height}m`),t},this.area=()=>0===this.coords.length||this.hole?0:Math.abs(mn(qne(this.coords),1)),this.volume=()=>this.floor===tt.top||this.hole||this.floor===tt.ground||this.hole?this.area()*this.parent.cross.ceilingHeight:void 0,this.squaredRoom=(t,i)=>{this.width=mn(t),this.height=mn(i),this.coords=[this.northWestCorner,Ae(this.northWestCorner,[t,0]),Ae(this.northWestCorner,[t,i]),Ae(this.northWestCorner,[0,i])],this.center=Ae(this.northWestCorner,[t/2,i/2]),this.centralElectricity=this.center},Object.assign(this,e)}setup(){}draw(e){var t=this;return Ea(function*(){if(void 0===t.svg&&(t.svg=js(`#${t.selector}`),t.svgRoom=t.svg.append("polygon"),t.function&&(t.svgText=t.svg.append("text"),t.svgText1=t.svgText.append("tspan"),t.svgText2=t.svgText.append("tspan"),t.svgText.attr("class","room-function-text")),t.name||(t.name=t.selector),t.classes=[`floor-${t.floor}`],t.hole&&(t.classes.push("room-hole"),t.svg.attr("filter","url(#inset-shadow)")),t.classes.push("bg-fill")),!t.show(e))return t.svgRoom.attr("points",""),void(t.function&&(t.svgText1.text(""),t.svgText2.text("")));t.svgRoom.attr("points",t.coords.join(" "));const r=t.center?t.center:(()=>{const s=t.coords.map(f=>f[0]),o=t.coords.map(f=>f[1]);return[(Math.min(...s)+Math.max(...s))/2,(Math.min(...o)+Math.max(...o))/2]})();t.function&&(t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`translate(${r[0]} ${r[1]}) `),t.svgText1.attr("x",0).attr("dy","0em").text(`${t.function}`),t.area()>5&&t.svgText2.attr("x",0).attr("dy","1.2em").text(`${t.area()} m\xb2`)),t.setClass(t.svg)})()}redraw(e){this.svgText&&this.svgText.attr("font-size",w5(this.fontSize,this.meterPerPixel,this.svgUpdate.print)).attr("stroke-width",6*this.meterPerPixel)}}class nGe extends nl{constructor(e){super(),this.last=!1,this.visible=!0,this.fontSize=14,Object.assign(this,e)}draw(e){var t=this;return Ea(function*(){void 0===t.svg&&(t.svg=js(`#${t.selector}`),t.svgRun=t.svg.select(".step-run"),t.svgRise=t.svg.select(".step-rise"),t.svgText=t.svg.select(".step-text"),t.last&&t.classes.push("last")),t.show(e)?(t.svg.style("display",""),t.svg.attr("transform",`translate(${t.index*t.parent.run}, ${-t.index*t.parent.rise})`),t.setClass(t.svg),t.svgRun.attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("points",[[0,0],[0,t.parent.runThickness],[t.last?t.parent.nose:t.parent.run+t.parent.riseThickness+t.parent.nose,t.parent.runThickness],[t.last?t.parent.nose:t.parent.run+t.parent.riseThickness+t.parent.nose,0]].join(" ")),t.svgRise.attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("points",[[t.parent.nose,t.parent.runThickness],[t.parent.nose,t.parent.rise],[t.parent.nose+t.parent.riseThickness,t.parent.rise],[t.parent.nose+t.parent.riseThickness,t.parent.runThickness]].join(" ")),t.svgText.attr("font-size",t.fontSize*t.meterPerPixel).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6*t.meterPerPixel).attr("transform",`\n        translate(${t.parent.run/2} ${16*-t.meterPerPixel}) \n        `).text(t.index)):t.svg.style("display","none")})()}}class Jne extends nl{constructor(e){super(),this.name="",this.cx=0,this.cy=0,this.r=1,this._lineThickness=.2,Object.assign(this,e)}draw(e){var t=this;return Ea(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=js(`#${t.selector}`)}t.svg.attr("cx",t.cx).attr("cy",t.cy).attr("r",t.r).attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("transform",t.transform),t.setClass(t.svg)})()}}class iGe extends nl{constructor(e){super(),this.floor=tt.all,this.name="step",this.last=!1,this.visible=!0,this.fontSize=10,this.walkLineXY=[0,0],this.nextWalkLineXY=[0,0],this.stringerXY=[0,0],this.nextStingerXY=[0,0],Object.assign(this,e)}draw(e){var t=this;return Ea(function*(){if(void 0===t.svg&&(t.svg=js(`#${t.selector}`),t.svgText=t.svg.select(".step-plan-text"),t.svgRise=t.svg.select(".step-plan-rise"),t.svgStep=t.svg.select(".step-plan-lines"),t.last&&t.classes.push("last")),!t.show(e))return t.svgStep.attr("points",""),t.svgRise.attr("points",""),void t.svgText.text("");const i=p1(t.walkLineXY,t.nextWalkLineXY),r=to(i-45,.8*t.parent.run,t.walkLineXY),s=p1(t.stringerXY,t.walkLineXY),o=p1(t.nextStingerXY,t.nextWalkLineXY),a=to(s,10,t.walkLineXY),c=to(o,10,t.nextWalkLineXY),l=Qte(t.stringers.out.coords,[t.stringerXY,a]).map(y=>({xy:y,d:Ka(y,t.stringerXY)})).sort((y,w)=>y.d-w.d).map(y=>y.xy)[0],u=Qte(t.stringers.out.coords,[t.nextStingerXY,c]).map(y=>({xy:y,d:Ka(y,t.nextStingerXY)})).sort((y,w)=>y.d-w.d).map(y=>y.xy)[0],f=t.stringers.out.coords[1],p=t.stringers.out.coords[2];let g=null,_=null;f[1]!==l[1]&&f[1]===u[1]&&(_=t.stringers.in.coords[1],g=t.stringers.out.coords[1]),p[0]!==l[0]&&p[0]===u[0]&&(_=t.stringers.in.coords[2],g=t.stringers.out.coords[2]),t.svgStep.attr("points",[t.walkLineXY,t.stringerXY,_,t.nextStingerXY,t.nextWalkLineXY,u,g,l].join(" ")),t.svgRise.attr("points",[to(s+90,t.parent.nose,l),to(s+90,t.parent.nose,t.stringerXY)].join(" ")),t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`translate(${r[0]}, ${r[1]})`).text(t.index),t.setClass(t.svg)})()}redraw(e){this.svgText&&this.svgText.attr("font-size",this.meterPerPixel*this.fontSize),this.svgRise&&this.svgRise.attr("stroke-width",this.meterPerPixel*this.lineThickness*1),this.svgStep&&this.svgStep.attr("stroke-width",this.meterPerPixel*this.lineThickness*1)}}class rGe{constructor(){this.totalRun=4.6,this.steps=19,this.runThickness=.02,this.riseThickness=.02,this.nose=.02,this.walkWidth=.8,this.walkLineOffset=.3,this.totalWidth=2.7,this.stepsFlightRight=9,this.stepsFlightLeft=2,this.stepsFlightMid=10,this.groundFloorTop=-1,this.topFloorTop=-1,this.topFloorBottom=-1,this.groundElevation=-1,this.ceilingHeight=-1,this.floorThickness=-1,this.totalRise=-1,this.run=-1,this.rise=-1,this.stairOrigin=[0,0],this.totalHeight=-1,this.lesserHeight=-1,this.intersections={},this.parts=[],this.create()}create(){this.createBuilding(),this.createStep(),this.createMeasures(),this.createPlan()}calculate(e){this.house=e,this.ceilingHeight=this.house.cross.ceilingHeight,this.floorThickness=this.house.cross.topFloorThickness,this.stepsFlightMid=this.steps-this.stepsFlightLeft-this.stepsFlightRight,this.groundFloorTop=0,this.topFloorTop=this.house.cross.elevations[Si.topFloor],this.totalRise=this.topFloorTop-this.groundFloorTop,this.stairOrigin=[this.house.stramien.in.we.b,this.house.stramien.in.ns.b-5],this.angle=mn(Math.atan(this.totalRise/this.totalRun)*(180/Math.PI),1),this.run=mn(this.totalRun/this.steps),this.rise=mn(this.totalRise/this.steps),this.step=mn(2*this.run+this.run),this.maxSteps=Math.ceil(this.totalRise/.182),this.minSteps=Math.ceil(this.totalRise/.22);const[t,i]=[this.alongWalkLine(1)[1]-this.stairOrigin[1],this.alongWalkLine(this.steps)[1]-this.stairOrigin[1]];this.totalHeight=Math.max(t,i),this.lesserHeight=Math.min(t,i);const r={coords:[Ae(this.stairOrigin,[0*this.totalWidth,t]),Ae(this.stairOrigin,[0*this.totalWidth,0]),Ae(this.stairOrigin,[1*this.totalWidth,0]),Ae(this.stairOrigin,[1*this.totalWidth,i])]};this.stringers={in:{coords:[Ae(r.coords[0],[1*this.walkWidth,0*this.walkWidth]),Ae(r.coords[1],[1*this.walkWidth,1*this.walkWidth]),Ae(r.coords[2],[-1*this.walkWidth,1*this.walkWidth]),Ae(r.coords[3],[-1*this.walkWidth,0*this.walkWidth])]},out:r}}createBuilding(){this.parts.push(new Xa({selector:"floor-groundfloor",floor:tt.all,parent:this,onUpdate:function(e){this.coords=[[-e.run,e.groundFloorTop],[10,e.groundFloorTop],[10,e.groundFloorTop+e.floorThickness],[-e.run,e.groundFloorTop+e.floorThickness]]}})),this.parts.push(new Xa({selector:"floor-topfloor-shadow",floor:tt.all,parent:this,onUpdate:function(e){this.coords=[[e.totalRun,-e.topFloorTop],[-e.run,-e.topFloorTop],[-e.run,-(e.topFloorTop-e.floorThickness)],[e.totalRun,-(e.topFloorTop-e.floorThickness)]]}})),this.parts.push(new Xa({selector:"floor-topfloor",floor:tt.all,parent:this,onUpdate:function(e){this.coords=[[e.totalRun,-e.topFloorTop],[10,-e.topFloorTop],[10,-(e.topFloorTop-e.floorThickness)],[e.totalRun,-(e.topFloorTop-e.floorThickness)]]}})),this.parts.push(new RM({selector:"nose-line",floor:tt.all,parent:this,onUpdate:function(e){this.d=`M0 0 L${e.totalRun} ${-e.totalRise} `}})),this.parts.push(new RM({selector:"back-line",floor:tt.all,parent:this,onUpdate:function(e){const t=1*e.run+.2;this.d=`M${t} 0 L${to(-e.angle,-e.run/Math.tan(e.angle*Math.PI/180),[e.totalRun+t,-e.totalRise])}`}}))}createStep(){for(let e=1;e<25;e++)this.parts.push(new nGe({selector:`step-${e}`,floor:tt.all,parent:this,index:e,onUpdate:function(t){this.outOfDesign=!(e<t.steps+1),this.last=e===t.steps}}))}createMeasures(){this.parts.push(new g1({selector:"run-size",floor:tt.all,direction:-90,decimals:3,onUpdate:function(e){this.offsetPixels=0,this.offsetMeters=1*e.rise,this.distance=0,this.a=[7*e.run,7*-e.rise],this.b=[8*e.run,8*-e.rise]}})),this.parts.push(new g1({selector:"rise-size",floor:tt.all,direction:180,offsetPixels:.5,decimals:3,onUpdate:function(e){this.offsetPixels=0,this.offsetMeters=1*e.run,this.distance=0,this.a=[7*e.run,7*-e.rise],this.b=[8*e.run,8*-e.rise]}})),this.parts.push(new g1({selector:"total-rise-size",floor:tt.all,direction:0,offsetPixels:0,onUpdate:function(e){const t=e.totalRun+2*e.run;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[t,0],this.b=[t,-e.totalRise]}})),this.parts.push(new g1({selector:"total-run-size",floor:tt.all,direction:90,onUpdate:function(e){this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[0,0],this.b=[e.totalRun,0]}})),this.parts.push(new g1({selector:"plateau-width",floor:tt.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0]+0,t],this.b=[e.stairOrigin[0]+e.walkWidth,t]}})),this.parts.push(new g1({selector:"mid-width",floor:tt.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0]+e.walkWidth,t],this.b=[e.stairOrigin[0]+e.totalWidth-e.walkWidth,t]}})),this.parts.push(new g1({selector:"total-width",floor:tt.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0],t],this.b=[e.stairOrigin[0]+e.totalWidth,t]}})),this.parts.push(new g1({selector:"total-height",floor:tt.all,direction:0,onUpdate:function(e){const t=e.stairOrigin[0]+e.totalWidth+.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.b=[t,e.stairOrigin[1]],this.a=[t,e.stairOrigin[1]+e.totalHeight]}})),this.parts.push(new g1({selector:"lesser-height",floor:tt.all,direction:0,onUpdate:function(e){const t=e.stairOrigin[0]+e.totalWidth+.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.b=[t,e.stairOrigin[1]],this.a=[t,e.stairOrigin[1]+e.lesserHeight]}}))}createPlan(){for(let e=1;e<this.steps+1;e++)this.parts.push(new iGe({selector:`step-plan-${e}`,floor:tt.all,parent:this,index:e,onUpdate:function(t){this.stringers=t.stringers,this.walkLineXY=t.alongWalkLine(e),this.nextWalkLineXY=t.alongWalkLine(e+1),this.stringerXY=t.alongStinger(e),this.nextStingerXY=t.alongStinger(e+1)}})),this.parts.push(new Jne({selector:"walk-line-"+e,floor:tt.all,parent:this,onUpdate:function(t){this.r=.2*this.lineThickness,[this.cx,this.cy]=t.alongWalkLine(e)}})),this.parts.push(new Jne({selector:"step-stinger-"+e,floor:tt.all,parent:this,onUpdate:function(t){this.r=.2*this.lineThickness,[this.cx,this.cy]=t.alongStinger(e)}}));this.parts.push(new Xa({selector:"clip-ground-floor-ref",floor:tt.ground,onUpdate:function(e){const[t,i]=e.stairOrigin,r=t+e.walkWidth,s=t+e.totalWidth-e.walkWidth,o=Math.max(e.alongWalkLine(1)[1],i+e.walkWidth);Math.max(e.alongWalkLine(e.steps)[1],i+e.walkWidth),this.coords=[[t,i],[s,i],[s,i+e.walkWidth],[r,i+e.walkWidth],[r,o],[t,o]]}})),this.parts.push(new Xa({selector:"outline",floor:tt.all,parent:this,onUpdate:function(e){this.coords=[e.stringers.out.coords[0],e.stringers.out.coords[1],e.stringers.out.coords[2],e.stringers.out.coords[3],e.stringers.in.coords[3],e.stringers.in.coords[2],e.stringers.in.coords[1],e.stringers.in.coords[0]]}})),this.parts.push(new RM({selector:"walk-line",floor:tt.all,parent:this,onUpdate:function(e){const t=e.walkWidth-e.walkLineOffset,i=e.alongWalkLine(e.steps),r=e.alongWalkLine(1);this.d=`\n        M${r[0]} ${r[1]}\n        L${r[0]} ${e.stairOrigin[1]+e.walkWidth}\n        a${e.walkLineOffset},${e.walkLineOffset} 0 0 1 ${e.walkLineOffset},${-e.walkLineOffset}\n        L${e.stairOrigin[0]+e.walkWidth} ${e.stairOrigin[1]+t}\n        L${e.stairOrigin[0]+e.totalWidth-e.walkWidth} ${e.stairOrigin[1]+t}\n        a${e.walkLineOffset},${e.walkLineOffset} 0 0 1 ${e.walkLineOffset},${e.walkLineOffset}\n        L${i[0]} ${i[1]}\n        `}}))}calculateCorrectionArray(){const e=this.walkLineOffset*Math.PI/2,t=(this.totalWidth-2*this.walkWidth)/2,i=(this.stepsFlightRight+1)*this.run,s=this.totalRun-i-e-t,o=i-e-t;this.intersections={};const l=this.getEGMethod(s+e/2,this.alongWalkLine(1)[1]-(this.stairOrigin[1]+this.walkWidth),0,0*this.run,!1),u=this.getEGMethod(t+e/2,this.totalWidth/2-this.walkWidth,l+0,0,!0),f=this.getEGMethod(t+e/2,this.totalWidth/2-this.walkWidth,l+0+u,this.run,!1);this.getEGMethod(o+e/2,this.alongWalkLine(this.steps)[1]-(this.stairOrigin[1]+this.walkWidth),l+0+u+f,0*this.run,!0)}getEGMethod(e,t,i,r,s=!1){let o,a,c,l,u;const f=e-r,p=Math.ceil(f/this.run),g=t-r;s?(o=[0,0],a=[0,f],c=[-g,0],l=Gte(g,-a[1]/g,a[1]),l=[-l[0],l[1]]):(o=[0,0],a=[0,f],c=[g,0],l=Gte(g,-a[1]/g,a[1]));const _=[];for(let y=0;y<p+1;y++)u=s?[0,Math.min(this.run*(p-y),f)]:[0,Math.min(this.run*y,f)],_.push(_g([o,l],[u,c]));for(let y=0;y<p+1;y++)if(0!==y)try{let w;w=s?_[y+1]:_[y-1],this.intersections[i+y]=this.run-Ka(w,_[y])}catch{}return p}alongStinger(e){let t=mn((e-1)*this.run);const i=this.walkLineOffset*Math.PI/2,r=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsFlightRight+1)*this.run,c=this.alongWalkLine(e),l=this.alongWalkLine(e+1),f=(p1(c,l),isNaN(this.intersections[e])?0:this.intersections[e]);return t<o-r-i/2?[this.stairOrigin[0]+this.walkWidth,c[1]+f]:t===o?[c[0],c[1]+f]:t<o?[c[0]+f,this.stairOrigin[1]+this.walkWidth]:t-o<r+i/2?[c[0]-f,this.stairOrigin[1]+this.walkWidth]:t===this.totalRun?[c[0]-f,c[1]]:[this.stairOrigin[0]+this.totalWidth-this.walkWidth,c[1]+f]}alongWalkLine(e){let t=(e-1)*this.run;const i=this.walkLineOffset*Math.PI/2,r=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsFlightRight+1)*this.run,a=o-i-r;if(t<a){const[c,l]=[this.stairOrigin[0]+this.walkWidth-this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[c,l+a-t]}if(t<a+i)return t-=a,to(180+t/i*90,this.walkLineOffset,[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth]);if(t<o){t-=a+i;const[c,l]=[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[c+t,l]}if(t<o+r){t-=o;const[c,l]=[this.stairOrigin[0]+this.totalWidth/2,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[c+t,l]}if(t<o+r+i)return t-=o+r,to(t/i*90-90,this.walkLineOffset,[this.stairOrigin[0]+this.totalWidth-this.walkWidth,this.stairOrigin[1]+this.walkWidth]);{t-=o+r+i;const[c,l]=[this.stairOrigin[0]+this.totalWidth-this.walkWidth+this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[c,l+t]}}}class sGe extends nl{constructor(e){super(),this.origin=[0,0],this.scale=[1,1],this.rotate=0,Object.assign(this,e)}draw(e){var t=this;return Ea(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=js(`#${t.selector}`),t.svg1=t.svg.select(".house-wind-rose-1"),t.svg2=t.svg.select(".house-wind-rose-2"),t.svgText=t.svg.select(".house-wind-rose-text")}t.svg.style("transform",` \n      translate(${t.origin[0]}px, ${t.origin[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svg1.attr("points",[[0,0],[10,30],[0,20]].map(([r,s])=>[r*t.meterPerPixel,s*t.meterPerPixel]).join(" ")).attr("stroke-width",1),t.svg2.attr("points",[[0,0],[-10,30],[0,20]].map(([r,s])=>[r*t.meterPerPixel,s*t.meterPerPixel]).join(" ")).attr("stroke-width",1),t.svgText.attr("font-size",12).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6).attr("transform",`\n          translate(0 ${-8*t.meterPerPixel}) \n          rotate(${t.rotate})\n          `).text("North")})()}}var pn=(()=>{return(n=pn||(pn={})).gips="gips",n.serviceBeams="serviceBeams",n.osb="osb",n.joists="joist",n.outerSheet="outerSheet",n.space="space",n.facade="facade",n.groundFloorEdge="groundFloorEdge",n.roofJoists="roofJoists",pn;var n})();class Qu{constructor(e){Object.assign(this,e)}updateR(e){void 0!==e&&("Outside"===e.name&&(this.r=.04),void 0===this.r&&(this.r=this.diameter/this.lambda))}updateT(e,t,i){isNaN(this.r)||(this.deltaT=this.r/t*i,this.temp=e.temp+this.deltaT)}}class oGe{constructor(){this.tempMin=-10,this.tempMax=24,this.Thicknesses=pn,this.thickness={[pn.gips]:.0125,[pn.serviceBeams]:.06,[pn.osb]:.015,[pn.joists]:.3,[pn.outerSheet]:.06,[pn.space]:.04,[pn.facade]:.04,[pn.roofJoists]:.4},this.crossDepth={},this.x=[]}get tempDiff(){return this.tempMax-this.tempMin}getRoofPoint(e){const[t,i]=Ae(this.cross.roofPoints[e],[-this.cross.wallOuterThickness,0]);return[t,i]}calculate(e){this.cross=e.cross;const t=(r,s,o=!1)=>{this.crossDepth[r]=mn(Math.abs(this.crossDepth[s])+Math.abs(this.thickness[s])),o&&(this.crossDepth[r]=-Math.abs(this.crossDepth[r]))};this.crossDepth[pn.joists]=0,this.crossDepth[pn.osb]=0,this.crossDepth[pn.groundFloorEdge]=.2,t(pn.outerSheet,pn.joists),t(pn.space,pn.outerSheet),t(pn.facade,pn.space),t(pn.serviceBeams,pn.osb,!0),t(pn.gips,pn.serviceBeams,!0);const i=[new Qu({name:"Outside",temp:this.tempMin}),new Qu({name:"r<sub>outside</sub>"}),new Qu({name:"Wood",diameter:this.thickness[pn.facade],lambda:.13}),new Qu({name:"space",diameter:this.thickness[pn.space],lambda:.001}),new Qu({name:"Celit",diameter:this.thickness[pn.outerSheet],lambda:.048}),new Qu({name:"CLS+Glass wol",diameter:this.thickness[pn.joists],lambda:.032}),new Qu({name:"OBS",diameter:this.thickness[pn.osb],lambda:.13}),new Qu({name:"Isolated Installations",diameter:this.thickness[pn.serviceBeams],lambda:.035}),new Qu({name:"Dry wall / Gips ",diameter:this.thickness[pn.gips],lambda:1.3}),new Qu({name:"r<sub>inside</sub>"}),new Qu({name:"Inside",temp:this.tempMax})];i.forEach((r,s)=>{r.updateR(i[s-1])}),this.rConstruction=mn(Z3(i.map(r=>r.r).filter(r=>r)),1),this.U=mn(1/this.rConstruction,3),this.outerWallThickness=mn(Z3(i.map(r=>r.diameter).filter(r=>r)),3),i.forEach((r,s)=>{r.updateT(i[s-1],this.rConstruction,this.tempDiff)}),this.heatCalcs=i}}var FM=(()=>{return(n=FM||(FM={})).a="a",n.b="b",n.c="c",n.d="d",n.toilet="toilet",n.hall="hall",n.walkway="walkway",FM;var n})();class cGe extends class aGe{}{constructor(e){super(),this.outerBase=void 0,this.innerBase=void 0,this.extensionToNorth=void 0,this.extensionToSouth=void 0,this.extensionToWest=void 0,this.extensionToEast=void 0,this.houseWidth=void 0,this.houseLength=void 0,this.gridSizeY=void 0,this.gridSizeX=void 0,this.centerHouse=[void 0,void 0],this.balconyEdge=-.3,this.balconyDepth=2.5,this.westRoomWidth=4,this.midRoomExtended=!0,this.eastRoomExtended=!0,this.serverRoom=[void 0,void 0],this.cross=new tGe,this.stair=new rGe,this.construction=new oGe,this.stats={wall:{},floor:{}},this.tower={show:void 0,innerCoords:void 0,outerCoords:void 0,outerWallOffset:void 0,width:void 0,houseIncrement:void 0,innerIncrement:void 0,outerIncrement:void 0,innerWallLength:void 0,outerWallLength:void 0,intersectionEast:void 0,intersectionWest:void 0,wallOuterThickness:void 0,footprintVisible:!1},Object.assign(this,e),window.house=this,this.cross.ceilingHeight=e.ceilingHeight,this.cross.floorAboveGround=e.floorAboveGround,this.cross.crawlerHeight=e.crawlerHeight,this.cross.crawlerSpace=e.crawlerSpace,this.calculateHouse(),this.linkParts(),this.calculateStats(),this.createStramien(),this.createGrid(),this.createMeasures(),this.createExtra()}createExtra(){this.parts.push(new cP);const e=new A3({selector:"balcony-edge",floor:tt.ground,lineThickness:1,dash:[1,8],onUpdate:function(s){const o=s.stramien.in,a=s.balconyWidth+s.balconyEdge;this.coords=[[o.we.b,o.ns.b+a],[o.we.c,o.ns.b+a]]}});this.parts.push(e);const t=new A3({selector:"hall-edge",floor:tt.ground,lineThickness:1,dash:[1,8],onUpdate:function(s){const o=s.stramien.in,c=3*s.wallInnerThickness+2;this.coords=[[o.we.b,o.ns.b-c],[o.we.b+(s.stair.totalWidth-s.stair.walkWidth),o.ns.b-c]]}});this.parts.push(t);const i=new A3({selector:"view-lines",floor:tt.ground,lineThickness:3,onUpdate:function(s){const o=s.stramien.in,a=3*s.studDistance,c=o.we.b+1,l=o.ns.b+(o.ns.c-o.ns.b)/2;this.coords=[[c,s.stair.stairOrigin[1]],[c,o.ns.d+a],[c,l],[o.we.a-a,l],[o.we.d+a,l]]}});this.parts.push(i);const r=new Xa({selector:"tower-walls",floor:tt.all,onUpdate:function(s){this.visible=s.tower.footprintVisible,this.coords=[...s.tower.innerCoords,s.tower.innerCoords[0],...[...s.tower.outerCoords].reverse(),s.tower.outerCoords[7]]}});this.parts.push(r),this.parts.push(new A3({selector:"roof-line-1",floor:tt.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.b,o.ns.b],l=[o.we.b,o.ns.a];this.coords=[Ae([o.we.a,o.ns.b],[0,s.cross.minimumHeightWidth]),Ae(c,[s.cross.minimumHeightWidth,s.cross.minimumHeightWidth]),Ae(l,[s.cross.minimumHeightWidth,0])]}})),this.parts.push(new A3({selector:"roof-line-2",floor:tt.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=s.tower.show?[o.we.c,o.ns.b-s.tower.houseIncrement-s.cross.minimumHeightWidth]:[o.we.c,o.ns.b];this.coords=[Ae([o.we.c,o.ns.a],[-s.cross.minimumHeightWidth,0]),Ae(c,[-s.cross.minimumHeightWidth,s.cross.minimumHeightWidth])]}})),this.parts.push(new A3({selector:"roof-line-3",floor:tt.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.d,o.ns.b];this.coords=[Ae(s.tower.show?[o.we.c+s.tower.houseIncrement+s.cross.minimumHeightWidth,o.ns.b]:[o.we.c,o.ns.b],[-s.cross.minimumHeightWidth,s.cross.minimumHeightWidth]),Ae(c,[0,s.cross.minimumHeightWidth])]}})),this.parts.push(new A3({selector:"roof-line-4",floor:tt.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.c,o.ns.c];this.coords=[Ae([o.we.d,o.ns.c],[0,-s.cross.minimumHeightWidth]),Ae(c,[0,-s.cross.minimumHeightWidth])]}})),this.parts.push(new A3({selector:"roof-line-5",floor:tt.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.a,o.ns.c];this.coords=[Ae([o.we.b,o.ns.c],[0,-s.cross.minimumHeightWidth]),Ae(c,[0,-s.cross.minimumHeightWidth])]}}))}createMeasures(){this.parts.push(new g1({selector:"house-total-width",floor:tt.all,direction:90,textRotate:0,onUpdate:function(e){const t=e.houseLength+2*e.studDistance;this.offsetPixels=16,this.a=[e.stramien.out.we.a,t],this.b=[e.stramien.out.we.d,t]}}));for(let e=0;e<3;e++){const t=["a","b","c","d"];this.parts.push(new g1({selector:"house-width-"+(e+1),floor:tt.all,direction:90,textRotate:0,onUpdate:function(r){const s=r.houseLength+2*r.studDistance;this.offsetPixels=0,this.a=[r.stramien.out.we[t[e+0]],s],this.b=[r.stramien.out.we[t[e+1]],s]}}))}this.parts.push(new g1({selector:"house-height-1",floor:tt.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.a],this.a=[t,e.stramien.out.ns.b]}})),this.parts.push(new g1({selector:"house-height-inner",floor:tt.all,direction:180,textRotate:0,onUpdate:function(e){const t=1*-e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.in.ns.b],this.a=[t,e.stramien.in.ns.c]}})),this.parts.push(new g1({selector:"house-height-2",floor:tt.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.b],this.a=[t,e.stramien.out.ns.c]}})),this.parts.push(new g1({selector:"house-height-3",floor:tt.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.c],this.a=[t,e.stramien.out.ns.d]}})),this.parts.push(new g1({selector:"house-total-height",floor:tt.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=32,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.a],this.a=[t,e.stramien.out.ns.d]}}))}createStramien(){const e=3*this.studDistance,t=i=>"in"===i||"out"===i?tt.all:"ground"===i?tt.ground:"top"===i?tt.top:void 0;for(let i of["in","out","ground","top"])for(let r of["we","ns"])for(let s of Object.keys(FM)){const o=`house-stramien-${i}-${r}-${s}`;this.parts.push(new A3("ns"===r?{floor:t(i),selector:o,lineThickness:1.5,onUpdate:function(a){this.coords=[[-e,a.stramien[i][r][s]],[a.houseWidth+e,a.stramien[i][r][s]]]}}:{floor:t(i),selector:o,lineThickness:1.5,onUpdate:function(a){this.coords=[[a.stramien[i][r][s],-e],[a.stramien[i][r][s],a.houseLength+e]]}}))}}createGrid(){const e=3*this.studDistance;this.gridSizeY=Math.round(this.houseWidth/this.studDistance+2+1);for(let i=0;i<55;i++){const r=[0,this.studAmountWest,this.studAmountWest+this.studAmount,this.studAmountWest+this.studAmount+this.studAmountEast].includes(i-1),o=new A3({selector:`grid-index-${i}.grid-vertical`,lineThickness:r?.8:.6,index:i,floor:tt.all,onUpdate:function(a){const c=(i-1)*a.studDistance;this.points=this.index<a.gridSizeY?[[c,-e],[c,a.houseLength+e]]:[],this.classes=[r?"grid-main":(i-1)%5?"grid-sub":"grid-subsub"]}});o.createSelector(),this.parts.push(o)}this.gridSizeX=Math.round(this.houseLength/this.studDistance+2+1);for(let i=0;i<55;i++){const r=[0,this.studAmountNorth,this.studAmountNorth+this.studAmount,this.studAmountNorth+this.studAmount+this.studAmountSouth].includes(i-1);this.parts.push(new A3({lineThickness:r?.8:.6,selector:`grid-index-${i}.grid-horizontal`,index:i,floor:tt.all,onUpdate:function(o){const a=(i-1)*o.studDistance;this.points=this.index<o.gridSizeX?[[-e,a],[o.houseWidth+e,a]]:[],this.classes=[r?"grid-main":(i-1)%5?"grid-sub":"grid-subsub"]}}))}this.parts[".house-wind-rose"]=new sGe({rotate:0,floor:tt.all,parent:this,onUpdate:function(i){this.origin=[2,0]}})}linkParts(){const e=(t,i)=>{void 0!==t&&(t.parent=i,t.onUpdate(this),t.createSelector(),t.parts&&t.parts.forEach(r=>e(r,t)),this.partsFlatten.push(t))};this.partsFlatten=[],this.parts.forEach(t=>e(t,this))}calculateTower(){this.tower.wallOuterThickness=this.wallOuterThickness,this.tower.outerWallOffset=mn(this.tower.wallOuterThickness*Math.tan(22.5*Math.PI/180)),this.tower.innerWallLength=this.towerWidth,this.tower.outerWallLength=2*this.tower.outerWallOffset+this.tower.innerWallLength,this.tower.show=this.showTower,this.tower.width=this.towerWidth,this.tower.houseIncrement=mn(this.tower.outerWallLength/Math.sqrt(2)+this.tower.outerWallLength)}calculateHouse(){this.outerBase=mn(this.studAmount*this.studDistance),this.innerBase=mn(this.outerBase-2*this.wallOuterThickness),this.extensionToSouth=this.studAmountSouth*this.studDistance,this.extensionToNorth=this.studAmountNorth*this.studDistance,this.extensionToEast=this.studAmountEast*this.studDistance,this.extensionToWest=this.studAmountWest*this.studDistance,this.calculateTower(),this.tower.show?this.extensionToNorth=Math.max(this.extensionToNorth,Math.ceil(this.tower.houseIncrement)):this.tower.houseIncrement=0;const e={we:{a:this.wallOuterThickness,b:this.extensionToWest+1*this.wallOuterThickness,c:this.extensionToWest+1*this.outerBase+-1*this.wallOuterThickness,d:this.extensionToEast+this.outerBase+this.extensionToWest+-1*this.wallOuterThickness},ns:{a:this.wallOuterThickness,b:this.extensionToNorth+1*this.wallOuterThickness,c:this.extensionToNorth+this.outerBase+-1*this.wallOuterThickness,d:this.extensionToNorth+this.outerBase+this.extensionToSouth+-1*this.wallOuterThickness}};this.stair.totalWidth=this.innerBase/2+this.stair.walkWidth/2;const t=e.we.b+this.stair.totalWidth-this.stair.walkWidth,i=e.ns.b-5;this.stramien={in:e,out:{we:{a:e.we.a-this.wallOuterThickness,b:e.we.b-this.wallOuterThickness,c:e.we.c+this.wallOuterThickness,d:e.we.d+this.wallOuterThickness},ns:{a:e.ns.a-this.wallOuterThickness,b:e.ns.b-this.wallOuterThickness,c:e.ns.c+this.wallOuterThickness,d:e.ns.d+this.wallOuterThickness}},top:{we:{toilet:e.we.b+this.stair.totalWidth-this.stair.walkWidth-.2,hall:e.we.b+this.stair.totalWidth+.2},ns:{hall:i+1.5,walkway:e.ns.b+1+.5}},ground:{we:{hall:t},ns:{hall:i}}},this.centerHouse=[e.we.c-(e.we.c-e.we.b)/2,e.ns.c-(e.ns.c-e.ns.b)/2],this.stair.stairOrigin=[i,t],this.serverRoom=[this.stramien.in.we.c-1,this.stramien.in.ns.b-this.wallInnerThickness],this.houseWidth=mn(this.stramien.out.we.d-this.stramien.out.we.a),this.houseLength=mn(this.stramien.out.ns.d-this.stramien.out.ns.a),this.calculateTowerCoords(),this.cross.calculate(this),this.stair.calculate(this),this.construction.calculate(this)}calculateStats(){this.getWallLength(),this.getWallArea(),this.getFloorArea()}getWallLength(){this.stats.wall.innerLength=Math.ceil(Z3(Object.values(this.partsFlatten).filter(e=>e instanceof ei).map(e=>e.type===kn.outer?e.getLength(ot.in):e.type===kn.inner?e.getLength(ot.out)+e.getLength(ot.in):0))),this.stats.wall.outerLength=Math.ceil(Z3(Object.values(this.partsFlatten).filter(e=>e instanceof ei).filter(e=>e.type===kn.outer).map(e=>e.getLength(ot.out)),1))}getWallArea(){this.stats.wall.innerArea=Math.ceil(Z3(Object.values(this.partsFlatten).filter(e=>e instanceof ei).map(e=>{let t=0;return e.type===kn.inner&&(t+=e.getArea(ot.out)),t+=e.getArea(ot.in),t}))),this.stats.wall.outerArea=Math.ceil(Z3(Object.values(this.partsFlatten).filter(e=>e instanceof ei).filter(e=>e.type===kn.outer).map(e=>e.getArea(ot.out)),1))}getFloorArea(){let e={};Object.keys(tt).map(t=>{e[t]={area:0,volume:0}}),this.partsFlatten.filter(t=>t instanceof P1).filter(t=>"innerFootprint"!==t.name).filter(t=>!t.hole).forEach(t=>{e[t.floor].area+=t.area(),e[t.floor].volume+=t.volume(),e[tt.all].area+=t.area(),e[tt.all].volume+=t.volume()}),Object.keys(tt).map(t=>{e[t]={area:mn(e[t].area,0),volume:mn(e[t].volume,0)}}),this.stats.floor=e}calculateTowerCoords(){!1===this.tower.show&&(this.tower.width=0,this.tower.outerWallOffset=0,this.tower.innerWallLength=0,this.tower.outerWallLength=0,this.tower.houseIncrement=0,this.tower.wallOuterThickness=0);let e=this.tower.wallOuterThickness/Math.cos(22.5*Math.PI/180);this.tower.innerIncrement=Math.sqrt(this.tower.innerWallLength**2/2),this.tower.outerIncrement=Math.sqrt(this.tower.outerWallLength**2/2);const t=[this.stramien.out.we.c+this.tower.outerWallOffset,this.stramien.out.ns.b-this.tower.innerIncrement-this.tower.innerWallLength-this.tower.outerWallOffset],i=t,r=Ae(t,[this.tower.width,0]),s=to(45,this.tower.width,r),o=Ae(s,[0,this.tower.width]),a=to(135,this.tower.width,o),c=Ae(a,[-this.tower.width,0]),l=to(225,this.tower.width,c),u=Ae(l,[0,-this.tower.width]);this.tower.innerCoords=[i,r,s,o,a,c,l,u],this.tower.outerCoords=[to(-112.5,e,i),to(-67.5,e,r),to(-22.5,e,s),to(22.5,e,o),to(67.5,e,a),to(112.5,e,c),to(157.5,e,l),to(202.5,e,u)],this.tower.intersectionWest=Ae(this.tower.outerCoords[0],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),this.tower.intersectionEast=Ae(this.tower.outerCoords[3],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),!1===this.tower.show&&(this.tower.intersectionWest=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.intersectionEast=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.innerCoords=[...Array(8).keys()].map(f=>[this.stramien.in.we.c,this.stramien.in.ns.b]),this.tower.outerCoords=[...Array(8).keys()].map(f=>[this.stramien.out.we.c,this.stramien.out.ns.b]))}redrawHouse(e){const t=(i,r)=>{r.parts.forEach(function(){var s=Ea(function*(o){void 0!==o&&(yield o.update({...e,theme:i}),void 0!==o.parts&&t(i,o))});return function(o){return s.apply(this,arguments)}}())};e.graphic===Co.house2D&&(t(this,this),t(this.stair,this.stair)),e.graphic===Co.cross&&t(this.cross,this.cross),[Co.stairCross,Co.stairPlan].includes(e.graphic)&&t(this.stair,this.stair)}}class Zo extends nl{constructor(e){super(),this.width=.8,this.height=2.3,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.outside=!1,Object.assign(this,e)}draw(e){var t=this;return Ea(function*(){if(void 0===t.svg&&(t.svg=js(`#${t.selector}`),t.svgOpening=t.svg.select(".door-wall-opening"),t.svgSwing=t.svg.select(".door-swing")),!t.show(e))return t.svgOpening.attr("points",""),void t.svgSwing.attr("d","");let i;i=1===t.scale[0]?[0,0]:[t.parent.thickness,0],t.svg.style("transform",` \n      translate(${t.origin[0]+i[0]}px, ${t.origin[1]+i[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svgOpening.attr("points",[[0,-t.width],[t.parent.thickness,-t.width],[t.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill"),t.svgSwing.attr("d",`M${t.parent.thickness},0 \n        L0,0  \n        L${-t.width},0  \n        A${t.width},${t.width} 0 0,1  \n        0,${-t.width}\n        L${t.parent.thickness},${-t.width}`)})()}redraw(e){this.svgOpening&&this.svgOpening.attr("stroke-width",this.meterPerPixel*this.lineThickness),this.svgSwing&&this.svgSwing.attr("stroke-width",1*this.meterPerPixel)}}var $0=(()=>{return(n=$0||($0={})).windowWall="windowWall",n.standard="standard",n.hexagon="hexagon",$0;var n})();class Ta extends nl{constructor(e){super(),this.floor=tt.ground,this.windowForm=$0.standard,this.width=2,this.height=2,this.elevation=.9,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.frameThickness=.1,this.frameDepth=.1,this.innerDepthFrame=.1,this.openable=!0,Object.assign(this,e)}get outerDepthFrame(){return this.innerDepthFrame+this.frameDepth}draw(e){var t=this;return Ea(function*(){if(void 0===t.svg&&(t.svg=js(`#${t.selector}`),t.svgOpening=t.svg.select(".window-wall-opening"),t.svgPane=t.svg.select(".window-pane")),!t.show(e))return t.svgOpening.attr("points",""),void t.svgPane.attr("d","");let i;i=1===t.scale[0]?[0,0]:[t.parent.thickness,0],t.svg.style("transform",` \n      translate(${t.origin[0]+i[0]}px, ${t.origin[1]+i[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svgOpening.attr("points",[[0,t.width],[t.parent.thickness,t.width],[t.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill"),t.svgPane.attr("d",`M${t.innerDepthFrame},0  \n          L${t.innerDepthFrame},${t.frameThickness} \n          L${t.outerDepthFrame},${t.frameThickness}  \n          L${t.outerDepthFrame},0  \n          \n          L${t.outerDepthFrame},${t.width}  \n          L${t.outerDepthFrame},${t.width-t.frameThickness}  \n          L${t.innerDepthFrame},${t.width-t.frameThickness} \n          L${t.innerDepthFrame},${t.width}  \n\n          L${t.innerDepthFrame},0  \n          L${t.innerDepthFrame},${t.frameThickness} \n          L${t.innerDepthFrame+t.frameDepth/2},${t.frameThickness}  \n          L${t.innerDepthFrame+t.frameDepth/2},${t.width-t.frameThickness}  \n          `)})()}redraw(e){this.svgOpening&&this.svgOpening.attr("stroke-width",this.meterPerPixel*this.lineThickness),this.svgPane&&this.svgPane.attr("stroke-width",1*this.meterPerPixel)}}class Qc extends Pt{constructor(e){super(e),this.sensorType=Ge.lightBulb,Object.assign(this,e)}}class e4 extends Pt{constructor(e){super(e),this.sensorType=Ge.ventOut,this.offsetWall=0,this.size=200,Object.assign(this,e)}get lineThickness(){return this.size/1e3/this.meterPerPixel}}class ic extends Pt{constructor(e){super(e),this.offsetWall=0,this.size=20,this.verticalCableLength=0,this.tooltip=()=>{let t=`<b>${this.sensorType.toTitleCase()} `;return this.cableLength>0&&(t+=`<br>Pipe length ${mn(this.cableLength,1)}m`),t+=`<br>vertical pipe: ${mn(this.verticalCableLength,1)}m`,t},Object.assign(this,e)}get lineThickness(){return this.size/1e3/this.meterPerPixel}init(e,t){const i=t.cross.ceilingHeight,r=t.cross.topFloorThickness;this.sensorType===Ge.toilet?(this.size=120,this.elevation=0,this.verticalCableLength+=e===tt.top?i+2*r:r):this.sensorType===Ge.waterWarm?(this.size=20,this.elevation=1.6,this.verticalCableLength+=e===tt.ground?i-this.elevation+1*r:r+this.elevation):this.sensorType===Ge.drain&&(this.size=40,this.elevation=0,this.verticalCableLength+=e===tt.top?i+2*r:r)}}const lGe=[new P1({name:"Toilet-upstairs",function:"WC",floor:tt.top,onUpdate:function(n){const t=n.stramien.top.we.toilet-n.stramien.in.we.b-n.wallInnerThickness;this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b-1-n.wallInnerThickness],this.squaredRoom(t,1)},parts:[new ei({floor:tt.top,type:kn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=Ae(this.parent.northWestCorner,[0,0]),this.sides={[ot.out]:[Ae(this.origin,[0,-n.wallInnerThickness]),Ae(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[this.parent.width,0])]}},parts:[new ic({sensorType:Ge.drain,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.5,0),[0,0]),t=this.parent.parent;this.points=[e,[e[0],t.northWestCorner[1]+t.height/2]]}}),new ic({sensorType:Ge.waterWarm,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.5,0),[0,0]);this.points=[e,tn(n.serverRoom,e,!0),n.serverRoom]}})]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=Ae(e.northWestCorner,[e.width,0]),this.sides={[ot.out]:[Ae(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),Ae(this.origin,[+n.wallInnerThickness,e.height+n.wallInnerThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0,e.height])]}}}),new ei({floor:tt.top,type:kn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=Ae(e.northWestCorner,[e.width,e.height]),this.sides={[ot.out]:[Ae(this.origin,[+n.wallInnerThickness,n.wallInnerThickness]),Ae(this.origin,[-e.width,n.wallInnerThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[-e.width,0])]}},parts:[new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,1);this.points=[e,tn(n.serverRoom,e,!0),n.serverRoom]}}),new Pt({offsetWall:-.3,sensorType:Ge.lightSwitch,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,0,1),[0,n.wallInnerThickness]);this.points=[e,tn(n.serverRoom,e,!0),n.serverRoom]}}),new Zo({scale:[-1,1],rotate:-90,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,0,0),[-n.wallInnerThickness,0])}})]}),new ei({type:kn.theoretic,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const e=this.parent;this.origin=Ae(e.northWestCorner,[0*e.width,1*e.height]),this.innerWallLength=e.height,this.sides={[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0,-this.innerWallLength])]}},parts:[new ic({sensorType:Ge.toilet,size:120,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.5,0),[n.cross.minimumHeightWidth+.1,0]);this.points=[e,tn(n.serverRoom,e,!0),n.serverRoom]}})]}),new Qc({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new e4({sensorType:Ge.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new P1({name:"storage-upstairs",function:"KLK2",floor:tt.top,onUpdate:function(n){const t=n.stramien.top.we.toilet-n.stramien.in.we.b-n.wallInnerThickness;this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b-1-2*n.wallInnerThickness-1],this.squaredRoom(t,1)},parts:[new ei({floor:tt.top,type:kn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=Ae(this.parent.northWestCorner,[0,0]),this.sides={[ot.out]:[Ae(this.origin,[0,-n.wallInnerThickness]),Ae(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[this.parent.width,0])]}}}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=Ae(e.northWestCorner,[e.width,0]),this.sides={[ot.out]:[Ae(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),Ae(this.origin,[+n.wallInnerThickness,e.height])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0,e.height])]}},parts:[new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,.8);this.points=[e,tn(n.serverRoom,e,!1),n.serverRoom]}}),new Zo({scale:[-1,1],rotate:180,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,0,0),[-n.wallInnerThickness,0])}})]}),new Qc({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new P1({name:"main-bedroom",function:"Sovrum 1",floor:tt.top,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.a],this.width=mn(n.stramien.in.we.c-n.stramien.in.we.b),this.height=mn(n.stramien.top.ns.hall-n.stramien.in.ns.a),this.center=Ae(this.northWestCorner,[this.width/2,this.height/2]),this.centralElectricity=this.center;const e=n.stair.totalWidth+n.wallInnerThickness,t=n.stramien.ground.ns.hall-n.wallInnerThickness-this.northWestCorner[1];this.coords=[this.northWestCorner,Ae(this.northWestCorner,[this.width,0]),Ae(this.northWestCorner,[this.width,this.height]),Ae(this.northWestCorner,[e,this.height]),Ae(this.northWestCorner,[e,t]),Ae(this.northWestCorner,[0,t])]},parts:[new ei({floor:tt.top,type:kn.theoretic,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallOuterThickness,this.origin=Ae(this.parent.northWestCorner,[0,0]),this.sides={[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[this.parent.width,0])]}},parts:[new Pt({offset:[0,.3],amount:2,sensorType:Ge.socket,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,.5,-.4);this.points=[t,tn(e,t,!0),e]}})]}),new ei({floor:tt.top,type:kn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[2],this.innerWallLength=Ka(e.coords[3],e.coords[2]),this.sides={[ot.out]:[Ae(this.origin,[0,n.wallInnerThickness]),Ae(this.origin,[-(this.innerWallLength+n.wallInnerThickness),n.wallInnerThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[-this.innerWallLength,0])]}},parts:[new Zo({scale:[1,1],rotate:90,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,1,0),[0,0])}}),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(ot.in,1,-1);this.points=[t,tn(e.serverRoom,t,!1),e.serverRoom]}}))]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const e=this.parent;this.origin=e.coords[3],this.innerWallLength=Ka(e.coords[4],e.coords[3]),this.sides={[ot.out]:[Ae(this.origin,[-n.wallInnerThickness,n.wallInnerThickness]),Ae(this.origin,[-n.wallInnerThickness,-this.innerWallLength+n.wallInnerThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0,-this.innerWallLength])]}}}),new ei({name:"SouthLeft",floor:tt.top,type:kn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[4],this.innerWallLength=Ka(e.coords[5],e.coords[4]),this.sides={[ot.out]:[Ae(this.origin,[-n.wallInnerThickness,n.wallInnerThickness]),Ae(this.origin,[-this.innerWallLength,n.wallInnerThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[-this.innerWallLength,0])]}},parts:[new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,0,.3);this.points=[t,tn(e,t,!0),e]}}),new Pt({offset:[0,.3],amount:2,sensorType:Ge.socket,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,0,0);this.points=[t,tn(e,t,!0),e]}})]}),new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.centralElectricity;this.points=[e,tn(n.serverRoom,e,!1),n.serverRoom]}}),new Qc({onUpdate:function(n){const t=Ae(this.parent.center,[1,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new e4({onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width/2,2]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new P1({name:"bathroom",function:"Badrum",floor:tt.top,onUpdate:function(n){const i=n.stramien.top.ns.hall+n.wallInnerThickness,s=n.stramien.in.ns.b-.5,o=n.tower.innerCoords[3][0]-2;this.northWestCorner=[n.stramien.top.we.hall+n.wallInnerThickness,i],this.center=Ae(this.northWestCorner,[2,2]),this.coords=[this.northWestCorner,[n.stramien.in.we.c,i],[n.stramien.in.we.c,n.tower.innerCoords[0][1]],n.tower.innerCoords[1],n.tower.innerCoords[2],[n.tower.innerCoords[3][0],s],[o,s],[o,n.stramien.in.ns.b-n.wallInnerThickness],[this.northWestCorner[0],n.stramien.in.ns.b-n.wallInnerThickness]]},parts:[new ei({floor:tt.top,type:kn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[5],this.innerWallLength=Ka(e.coords[5],e.coords[6]),this.sides={[ot.out]:[Ae(e.coords[5],[0,n.wallInnerThickness]),Ae(e.coords[6],[n.wallInnerThickness,n.wallInnerThickness])],[ot.in]:[Ae(e.coords[5],[0,0]),Ae(e.coords[6],[0,0])]}},parts:[new ic({sensorType:Ge.shower,onUpdate:function(n){const i=this.parent.getPosition(ot.in,0,n.tower.width);this.points=[Ae(i,[0,-.3]),i,tn(n.serverRoom,i,!0),n.serverRoom]}}),new ic({sensorType:Ge.drain,size:50,onUpdate:function(n){const i=this.parent.getPosition(ot.in,0,n.tower.width);this.points=[Ae(i,[0,-.3]),i,tn(n.serverRoom,i,!0),n.serverRoom]}})]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[6],this.innerWallLength=Ka(e.coords[6],e.coords[7]),this.sides={[ot.out]:[Ae(e.coords[6],[n.wallInnerThickness,n.wallInnerThickness]),Ae(e.coords[7],[n.wallInnerThickness,n.wallInnerThickness])],[ot.in]:[Ae(e.coords[6],[0,0]),Ae(e.coords[7],[0,0])]}}}),new ei({name:"SouthLeft",floor:tt.top,type:kn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[5],this.innerWallLength=Ka(e.coords[7],e.coords[8]),this.sides={[ot.out]:[Ae(e.coords[7],[n.wallInnerThickness,n.wallInnerThickness]),Ae(e.coords[8],[-n.wallInnerThickness,n.wallInnerThickness])],[ot.in]:[Ae(e.coords[7],[0,0]),Ae(e.coords[8],[0,0])]}},parts:[new Zo({scale:[1,1],rotate:90,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,1,0),[0,0])}}),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({amount:n===Ge.lightSwitch?2:1,sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(ot.in,1,-1);this.points=[t,tn(e.serverRoom,t,!0),e.serverRoom]}})),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({offsetWall:-.3,sensorType:n,onUpdate:function(e){const t=Ae(this.parent.getPosition(ot.in,1,-1),[0,e.wallInnerThickness]);this.points=[t,tn(e.serverRoom,t,!0),e.serverRoom]}}))]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[8],this.innerWallLength=Ka(e.coords[8],e.coords[0]),this.sides={[ot.out]:[Ae(e.coords[8],[-n.wallInnerThickness,n.wallInnerThickness]),Ae(e.coords[0],[-n.wallInnerThickness,0])],[ot.in]:[Ae(e.coords[8],[0,0]),Ae(e.coords[0],[0,0])]}},parts:[new Pt({offsetWall:-.3,sensorType:Ge.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,1,-.5);this.points=[Ae(t,[-n.wallInnerThickness,0]),tn(e,t,!0),e]}}),...[0,1,2].map(n=>new Pt({amount:1===n?2:1,offsetWall:1===n?-.3:.3,sensorType:Ge.socket,onUpdate:function(e){const t=e.serverRoom,i=this.parent.getPosition(ot.in,(n+1)/4,0);this.points=[Ae(i,[1===n?-e.wallInnerThickness:0,0]),Ae(i,[0,0]),tn(t,i,!1),t]}})),new ic({sensorType:Ge.drain,onUpdate:function(n){const t=this.parent,i=Ae(t.getPosition(ot.in,2/3,0),[.3,0]),r=Ae(t.getPosition(ot.in,1/3,0),[.3,0]);this.points=[i,r]}}),new ic({sensorType:Ge.drain,onUpdate:function(n){const i=Ae(this.parent.getPosition(ot.in,1/3,0),[.3,0]);this.points=[i,[i[0],n.stramien.in.ns.b-(.5+n.wallInnerThickness)]]}}),new ic({sensorType:Ge.waterWarm,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.6666666666666666,0),[.3,0]),t=Ae(this.parent.getPosition(ot.in,1/3,0),[.3,0]);this.points=[e,t]}}),new ic({sensorType:Ge.waterWarm,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.3333333333333333,0),[.3,0]);this.points=[e]}}),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({offsetWall:-.3,sensorType:n,onUpdate:function(e){const t=Ae(this.parent.getPosition(ot.in,1,-1),[-e.wallInnerThickness,0]);this.points=[t,tn(e.serverRoom,t,!1),e.serverRoom]}}))]}),new Qc({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new e4({sensorType:Ge.ventIn,size:400,onUpdate:function(n){const t=Ae(n.serverRoom,[0,-1]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new P1({function:"Sovrum 2",name:"Upper-east",floor:tt.top,onUpdate:function(n){const e=n.stramien,t=n.wallInnerThickness,i=e.in.we.d-e.in.we.c-t,r=e.in.ns.c-e.top.ns.walkway-t;this.northWestCorner=[e.in.we.c+t,e.top.ns.walkway+t];const s=e.in.we.c-e.top.we.hall,o=e.in.ns.c+n.balconyEdge-n.balconyDepth-this.northWestCorner[1];this.coords=[this.northWestCorner,Ae(this.northWestCorner,[i,0]),Ae(this.northWestCorner,[i,r]),Ae(this.northWestCorner,[0,r])],n.eastRoomExtended&&this.coords.push(Ae(this.northWestCorner,[0,o]),Ae(this.northWestCorner,[-s,o]),Ae(this.northWestCorner,[-s,0])),this.center=Ae(this.northWestCorner,[i/2,r/2]),this.centralElectricity=this.center},parts:[new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){let e=6,t=1;n.eastRoomExtended||(e=0,t=1),this.drawByRoom(e,t,n,ni.outside,ni.straight)},parts:[...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(ot.in,0,1);this.points=[t,tn(e.serverRoom,t,!1),e.serverRoom]}})),new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,0,1);this.points=[t,tn(e,t,!1),e]}}),new Zo({scale:[1,-1],rotate:-90,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,0,0),[0,0])}})]}),new ei({type:kn.theoretic,floor:tt.top,onUpdate:function(n){let e=1,t=2;n.eastRoomExtended||(e=1,t=2),this.drawByRoom(e,t,n,ni.straight,ni.straight)}}),new ei({type:kn.theoretic,floor:tt.top,onUpdate:function(n){let e=2,t=3;n.eastRoomExtended||(e=2,t=3),this.drawByRoom(e,t,n,ni.straight,ni.straight)}}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){let e=3,t=4,i=ni.inside;n.eastRoomExtended||(e=3,t=0,i=ni.outside),this.drawByRoom(e,t,n,ni.straight,i)}}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){n.eastRoomExtended||(this.visible=!1),this.drawByRoom(4,5,n,ni.inside,ni.outside)}}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){n.eastRoomExtended||(this.visible=!1),this.drawByRoom(5,6,n,ni.outside,ni.outside)}}),...[0,1,2,3].map(n=>new Pt({offset:[[0,3].includes(n)?.3:-.3,0],group:11,sensorType:Ge.socket,onUpdate:function(e){this.points=[Ae(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new Pt({group:11,sensorType:Ge.socket,cableOnly:!0,onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=Ae(t.coords[0],[1,0]);this.points=[i,t.coords[1],t.coords[2],t.coords[3],t.coords[0],tn(e,t.coords[0],!1),e]}}),new Qc({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new e4({onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,tn(n.serverRoom,i,!0),n.serverRoom]}})]}),new P1({function:"Sovrum 3",name:"upper-mid",floor:tt.top,onUpdate:function(n){const e=n.stramien,t=n.wallInnerThickness,i=e.in.ns.c-e.top.ns.walkway-t,r=e.in.we.b-e.in.we.a-n.westRoomWidth-2*t;this.northWestCorner=[e.in.we.a+n.westRoomWidth+t,e.top.ns.walkway+t];const s=e.in.ns.c+n.balconyEdge-n.balconyDepth-this.northWestCorner[1],o=e.top.we.toilet-this.northWestCorner[0]-t;this.coords=n.midRoomExtended?[this.northWestCorner,Ae(this.northWestCorner,[o,0]),Ae(this.northWestCorner,[o,s]),Ae(this.northWestCorner,[r,s]),Ae(this.northWestCorner,[r,i]),Ae(this.northWestCorner,[0,i])]:[this.northWestCorner,Ae(this.northWestCorner,[r,0]),Ae(this.northWestCorner,[r,i]),Ae(this.northWestCorner,[0,i])],this.center=Ae(this.northWestCorner,[r/2,i/2]),this.centralElectricity=this.center},parts:[new ei({floor:tt.top,type:kn.inner,onUpdate:function(n){this.drawByRoom(0,1,n,ni.straight,ni.outside)},parts:[...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(ot.in,1,-1);this.points=[t,tn(e.serverRoom,t,!1),e.serverRoom]}})),new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,1,-1);this.points=[t,tn(e,t,!1),e]}}),new Zo({scale:[1,1],rotate:-90,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,1,0),[0,0])}})]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){this.drawByRoom(1,2,n,ni.outside,ni.outside)},parts:[]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){n.midRoomExtended||(this.visible=!1),this.drawByRoom(2,3,n,ni.outside,ni.inside)},parts:[]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){n.midRoomExtended||(this.visible=!1),this.drawByRoom(3,4,n,ni.inside,ni.straight)},parts:[]}),new ei({type:kn.theoretic,floor:tt.top,onUpdate:function(n){let e=4,t=5;n.midRoomExtended||(e=2,t=3),this.drawByRoom(e,t,n,ni.straight,ni.straight)},parts:[]}),new ei({type:kn.theoretic,floor:tt.top,onUpdate:function(n){let e=5,t=0;n.midRoomExtended||(e=3,t=0),this.drawByRoom(e,t,n,ni.straight,ni.straight)},parts:[]}),...[0,1,2,3].map(n=>new Pt({offset:[[0,3].includes(n)?.3:-.3,0],group:10,sensorType:Ge.socket,onUpdate:function(e){this.points=[Ae(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new Pt({group:10,sensorType:Ge.socket,cableOnly:!0,onUpdate:function(n){const t=this.parent,i=Ae(t.coords[1],[-1,0]);this.points=[t.coords[1],t.coords[2],t.coords[3],t.coords[0],i]}}),new Qc({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new e4({onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,tn(n.serverRoom,i,!0),n.serverRoom]}})]}),new P1({function:"Sovrum 3",name:"upper-west",floor:tt.top,onUpdate:function(n){const e=n.stramien,t=n.westRoomWidth;this.northWestCorner=[e.in.we.a,e.in.ns.b],this.squaredRoom(t,e.in.ns.c-this.northWestCorner[1])},parts:[new ei({floor:tt.top,type:kn.theoretic,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=Ae(this.parent.northWestCorner,[0,0]),this.sides={[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[this.parent.width,0])]}},parts:[new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(ot.in,1,-1);this.points=[t,tn(e,t,!1),e]}})]}),new ei({type:kn.inner,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=Ae(e.northWestCorner,[e.width,0]),this.sides={[ot.out]:[Ae(this.origin,[+n.wallInnerThickness,0]),Ae(this.origin,[+n.wallInnerThickness,e.height])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0,e.height])]}},parts:[...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(ot.in,0,1);this.points=[t,tn(e.serverRoom,t,!1),e.serverRoom]}})),new Zo({scale:[1,-1],rotate:0,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,0,0),[0,0])}})]}),new ei({type:kn.theoretic,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=Ae(e.northWestCorner,[e.width,e.height]),this.sides={[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[-1*e.width,0*e.height])]}},parts:[]}),new ei({type:kn.theoretic,floor:tt.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=Ae(e.northWestCorner,[0*e.width,1*e.height]),this.sides={[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0*e.width,-1*e.height])]}},parts:[]}),...[0,1,2,3].map(n=>new Pt({offset:[[0,3].includes(n)?.3:-.3,0],group:10,sensorType:Ge.socket,onUpdate:function(e){this.points=[Ae(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new Pt({group:10,sensorType:Ge.socket,cableOnly:!0,onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=Ae(t.coords[1],[0,1]);this.points=[i,t.coords[2],t.coords[3],t.coords[0],t.coords[1],tn(e,t.coords[1],!0),e]}}),new Qc({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new e4({onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,tn(n.serverRoom,i,!0),n.serverRoom]}})]}),new P1({name:"hall-walkway",function:"Passage",floor:tt.top,onUpdate:function(n){const e=n.stramien,t=n.wallInnerThickness,i=[e.in.we.b+n.stair.totalWidth,e.ground.ns.hall+n.stair.totalHeight],r=e.in.ns.c+n.balconyEdge,s=r-n.balconyDepth+t;this.coords=[[e.in.we.a+n.westRoomWidth+t,e.in.ns.b],[e.top.we.toilet,e.in.ns.b],[e.top.we.toilet,i[1]],i,[i[0],e.top.ns.hall],[e.top.we.hall,e.top.ns.hall],[e.top.we.hall,e.in.ns.b],[e.in.we.d,e.in.ns.b],[e.in.we.d,e.top.ns.walkway],[e.in.we.c,e.top.ns.walkway]],n.eastRoomExtended&&this.coords.push([e.top.we.hall,e.top.ns.walkway],[e.top.we.hall,s],[e.in.we.c,s]),this.coords.push([e.in.we.c,r],[e.in.we.b,r]),n.midRoomExtended&&this.coords.push([e.in.we.b,s],[e.top.we.toilet,s],[e.top.we.toilet,e.top.ns.walkway]),this.coords.push([e.in.we.b,e.top.ns.walkway],[e.in.we.a+n.westRoomWidth+t,e.top.ns.walkway])},parts:[new Pt({offset:[0,.3],sensorType:Ge.pir,onUpdate:function(n){const e=n.serverRoom,t=[n.stramien.in.we.b+(n.stramien.in.we.c-n.stramien.in.we.b)/2,n.stramien.in.ns.b];this.points=[Ae(t,[-n.wallInnerThickness,0]),tn(e,t,!0),e]}}),...[Ge.smoke,Ge.poe,Ge.wifi].map((n,e)=>new Pt({offset:[0,n===Ge.smoke?-1:.3],sensorType:n,onUpdate:function(t){const i=t.serverRoom,r=[t.stramien.in.we.b+(t.stramien.in.we.c-t.stramien.in.we.b)/2,t.stramien.in.ns.b];this.points=[Ae(r,[-t.wallInnerThickness,0]),tn(i,r,!0),i]}})),new Pt({offset:[0,.3],group:10,sensorType:Ge.socket,onUpdate:function(n){this.points=[Ae([n.stramien.in.we.b,n.stramien.in.ns.b],[-1,0])]}}),new Pt({offset:[0,.3],group:10,sensorType:Ge.socket,onUpdate:function(n){this.points=[Ae([n.stramien.in.we.c,n.stramien.in.ns.b],[0,0])]}}),new Qc({onUpdate:function(n){const t=Ae(this.parent.coords[0],[1,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new P1({name:"void",floor:tt.top,hole:!0,onUpdate:function(n){const e=[n.stramien.in.we.b,n.stramien.in.ns.c+n.balconyEdge],t=n.stramien.in.ns.d-e[1],i=n.stramien.in.we.c-n.stramien.in.we.b;this.coords=[e,Ae(e,[1*i,0*t]),Ae(e,[1*i,1*t]),Ae(e,[0*i,1*t])]}}),new P1({name:"voidStairs",floor:tt.top,hole:!0,onUpdate:function(n){const e=n.stair;this.northWestCorner=e.stairOrigin;const t=n.stramien.in.ns.b-e.stairOrigin[1]-2-3*n.wallInnerThickness,i=e.totalWidth;this.coords=[this.northWestCorner,Ae(this.northWestCorner,[i-e.walkWidth,0]),Ae(this.northWestCorner,[i-e.walkWidth,t]),Ae(this.northWestCorner,[0,t])]},parts:[new Qc({onUpdate:function(n){const t=Ae(this.parent.northWestCorner,[n.stair.totalWidth/2,1]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]})];class Mg extends nl{constructor(e){super(),this.url="assets/svg/",this.filename="dude.svg",this.anchor=[0,0],this.rotation=0,this.scaler=1,this.scale=[1,1],this.lineThickness=.1,Object.assign(this,e)}draw(e){var t=this;return Ea(function*(){if(void 0===t.svg){if(!t.show(e))return;yield t.loader()}t.show(e)?(t.transform=`translate(${t.anchor[0]},${t.anchor[1]}) rotate(${t.rotation}) scale(${t.scale[0]},${t.scale[1]})`,t.svg.attr("transform",t.transform),t.svg.attr("visibility","visible"),t.setClass(t.svg)):t.svg.attr("visibility","hidden")})()}redraw(e){!this.show(e)||this.svg&&this.svg.node().querySelectorAll("path, rect, circle, ellipse, line, polyline, polygon").forEach(t=>{t.style.strokeWidth=this.scaler*this.meterPerPixel*this.lineThickness+"px"})}loader(){var e=this;return Ea(function*(){const t=yield fetch(`${e.url}${e.filename}`).then(a=>a.text());e.svg=js(`#${e.selector}`),e.classes.push(`svg-${e.filename.split(".")[0]}`);const i=/height="([0-9]+)[.]?\d*px"/gi,r=/width="([0-9]+)[.]?\d*px"/gi,s=Number(i.exec(t)[1]),o=Number(r.exec(t)[1]);e.svg.html(t.replace(i,`height="${s/1e3}px"`).replace(r,`width="${o/1e3}px"`)),e.scaler=s})()}}const v3=1.2,uGe={studAmount:12,studDistance:.6,towerWidth:1,wallInnerThickness:.07,wallOuterThickness:.5,roofOuterThickness:.5,studAmountNorth:12,studAmountSouth:4,studAmountWest:12,studAmountEast:8,showTower:!0,balconyWidth:6.2,ceilingHeight:3,floorAboveGround:.7,crawlerHeight:1,crawlerSpace:!0,name:"Lindelund",orientation:{lat:55.91821937,lng:13.654319808,rotation:10},parts:[new oP({floor:tt.ground,onUpdate:function(n){const e=n.stramien,t=n.tower;this.coords=[[e.in.we.b,e.in.ns.b],[e.in.we.b,e.in.ns.a],[e.in.we.c,e.in.ns.a],[e.in.we.c,t.innerCoords[0][1]],t.innerCoords[0],t.innerCoords[1],t.innerCoords[2],t.innerCoords[3],[t.innerCoords[3][0],e.in.ns.b],[e.in.we.d,e.in.ns.b],[e.in.we.d,e.in.ns.c],[e.in.we.c,e.in.ns.c],[e.in.we.c,e.in.ns.d],[e.in.we.b,e.in.ns.d],[e.in.we.b,e.in.ns.c],[e.in.we.a,e.in.ns.c],[e.in.we.a,e.in.ns.b]]},parts:[...[...Array(17).keys()].map((n,e,t)=>{const i=[3,4,5,6,7];if([3,4,5,6,7].includes(n))return;const s=[0,11,14,17],o=t.length;return new ei({type:kn.outer,floor:tt.all,gable:[1,9,12,15].includes(n),tower:i.includes(n),onUpdate:function(a){const c=l=>l===i[0]||l===i[4]+1||s.includes(l)?ni.inside:s.includes(l)?void 0:ni.outside;this.drawByRoom(n,n+1!==o?n+1:0,a,c(n),c(n+1))},parts:[...16===n?[1].map(a=>new Ta({rotate:90,width:v3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,a/2,this.width/2)}})):[],...15===n?[new Ta({windowForm:$0.hexagon,floor:tt.top,rotate:0,width:v3,elevation:.9,onUpdate:function(a){const c=this.parent;this.height=a.cross.ceilingHeight-.4-this.elevation,this.origin=c.getPosition(ot.out,.5,this.width/2)}}),...[1,2].map(a=>new Ta({rotate:0,width:v3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,a/3,this.width/2)}}))]:[],...14===n?[1,2].map(a=>new Ta({rotate:-90,width:v3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.width=l.innerWallLength<5?l.innerWallLength/3-.2:1.4,this.origin=l.getPosition(ot.out,a/3,this.width/2)}})):[],...13===n?[1].map(a=>new Ta({rotate:0,width:v3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=Ae(l.getPosition(ot.in,1,-.9),[-l.thickness,0])}})):[],...12===n?[1].map(a=>new Ta({rotate:-90,floor:tt.all,elevation:0,windowForm:$0.windowWall,onUpdate:function(c){this.height=c.cross.elevations[Gt.topInside];const l=this.parent;this.width=l.innerWallLength,this.origin=l.getPosition(ot.out,a/2,this.width/2)}})):[],...11===n?[1].map(a=>new Ta({rotate:180,width:v3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=Ae(l.getPosition(ot.in,0,this.width+.9),[l.thickness,0])}})):[],...10===n?[1].map(a=>new Ta({rotate:-90,width:v3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,a/2,this.width/2)}})):[],...9===n?[new Ta({windowForm:$0.hexagon,floor:tt.top,rotate:180,width:v3,elevation:.9,onUpdate:function(a){const c=this.parent;this.height=a.cross.ceilingHeight-.4-this.elevation,this.origin=c.getPosition(ot.out,.5,this.width/2)}}),...[0,1].map(a=>new Ta({rotate:180,width:v3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,a,this.width/2+(this.width+.8)*(0===a?1:-1))}})),...[0,1].map(a=>new Zo({floor:tt.ground,scale:[-1,0===a?-1:1],outside:!0,onUpdate:function(c){const u=this.parent,f=u.innerWallLength/2;this.origin=Ae(u.origin,[0,0===a?f-this.width:f+this.width])}}))]:[],...8===n?[1].map(a=>new Ta({rotate:90,width:v3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,.5,this.width/2-c.wallOuterThickness/2)}})):[],...2===n?[1,2.5].map(a=>new Ta({rotate:180,width:v3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,a/3,this.width/2)}})):[],...1===n?[new Ta({windowForm:$0.hexagon,floor:tt.top,rotate:90,width:v3,elevation:.9,onUpdate:function(a){const c=this.parent;this.height=a.cross.ceilingHeight-.4-this.elevation,this.origin=c.getPosition(ot.out,.5,this.width/2)}}),...[1,2].map(a=>new Ta({rotate:90,width:v3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,a/3,this.width/2)}}))]:[],...0===n?[new Zo({outside:!0,width:1,height:2.7,floor:tt.ground,rotate:0,scale:[1,1],onUpdate:function(a){this.origin=Ae(this.parent.getPosition(ot.in,0,1.2+a.wallInnerThickness),[-a.wallOuterThickness,0])}}),...[2,5].map(a=>new Ta({rotate:0,width:v3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(ot.out,(a+1)/8,this.width/2)}}))]:[]]})}).filter(n=>n),...[...Array(8).keys()].map((n,e,t)=>new ei({type:kn.outer,tower:!0,onUpdate:function(i){if(this.ceiling=i.cross.ceilingHeight,this.outOfDesign=!i.showTower,this.floor=n<3?tt.all:tt.tower,this.outOfDesign)return;const r=i.wallOuterThickness-i.wallInnerThickness,s=JSON.parse(JSON.stringify(i.tower.innerCoords));this.origin=[i.stramien.in.we.c,s[0][1]],this.innerWallLength=i.towerWidth-r;const o=7===n?0:n+1;0===n&&(s[n][0]=i.stramien.in.we.c),2===n&&(s[o][1]=i.stramien.in.ns.b),this.sides={[ot.out]:[i.tower.outerCoords[n],i.tower.outerCoords[o]],[ot.in]:[s[n],s[o]]}},parts:[...0===n?[new Pt({sensorType:Ge.socket,amount:2,group:4,onUpdate:function(i){const r=this.parent,s=r.getPosition(ot.in,0,0);this.points=[r.getPosition(ot.in,1,-.2),s,tn(s,i.serverRoom,!0),i.serverRoom]}})]:[],...1===n?[new Zo({outside:!0,rotate:135,scale:[1,1],floor:tt.ground,onUpdate:function(i){this.outOfDesign=!i.showTower,this.outOfDesign||(this.origin=this.parent.getPosition(ot.out,.5,-this.width/2))}}),new Ta({rotate:135,scale:[1,1],floor:tt.top,width:.8,elevation:1,height:2,onUpdate:function(i){this.outOfDesign=!i.showTower,this.outOfDesign||(this.origin=this.parent.getPosition(ot.out,.5,this.width/2))}})]:[],...2===n?[new Pt({sensorType:Ge.socket,amount:2,group:4,onUpdate:function(i){const s=this.parent.getPosition(ot.in,0,.2);this.points=[s,tn(s,i.serverRoom,!0),i.serverRoom]}})]:[]]})).filter(n=>n)]}),new P1({name:"West",function:"Vardagsrum",floor:tt.ground,onUpdate:function(n){const e=n.stramien;this.northWestCorner=[e.in.we.a,e.in.ns.b],this.squaredRoom(e.in.we.b-e.in.we.a-n.wallInnerThickness,e.in.ns.c-e.in.ns.b)},parts:[new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(ot.in,3/4,0);this.points=[e,tn(n,e,!1),n]}}),new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(ot.in,1/4,0);this.points=[e,tn(n,e,!1),n]}}),new Pt({group:1,sensorType:Ge.socket,amount:2,offset:[0,.3],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][1],[-1,0]);this.points=[e]}}),new Pt({group:1,sensorType:Ge.socket,amount:2,offset:[0,.3],onUpdate:function(){const t=Ae(this.parent.sides[ot.in][1],[-this.parent.parent.width/2,0]);this.points=[t]}}),new Pt({group:1,sensorType:Ge.socket,amount:2,offset:[0,.3],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][0],[1,0]);this.points=[e]}})]}),new ei({type:kn.inner,floor:tt.ground,onUpdate:function(n){this.drawByRoom(1,2,n,ni.straight,ni.straight)},parts:[new Pt({group:2,sensorType:Ge.socket,amount:2,offset:[-.3,0],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][1],[0,-1]);this.points=[e]}}),new Pt({group:1,sensorType:Ge.socket,amount:2,offset:[-.3,0],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][0],[0,1]);this.points=[e]}}),new Zo({floor:tt.ground,scale:[1,-1],onUpdate:function(n){this.origin=Ae(this.parent.sides[ot.in][0],[0,this.parent.parent.height/2-this.width])}}),new Zo({floor:tt.ground,scale:[1,1],onUpdate:function(n){this.origin=Ae(this.parent.sides[ot.in][0],[0,this.parent.parent.height/2+this.width])}}),...[Ge.dimmer,Ge.lightSwitch,Ge.temperature].map((n,e)=>new Pt({sensorType:n,offsetWall:Ge.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(ot.in,.3333333333333333,0);this.points=[i,tn(t.serverRoom,i,!1),t.serverRoom]}}))]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new Pt({group:2,sensorType:Ge.socket,amount:2,offset:[0,-.3],onUpdate:function(n){const t=Ae(this.parent.sides[ot.in][0],[-1,0]);this.points=[t]}}),new Pt({group:2,sensorType:Ge.socket,amount:2,offset:[0,-.3],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][0],[-this.parent.parent.width/2,0]);this.points=[e]}}),new Pt({group:2,sensorType:Ge.socket,amount:2,offset:[0,-.3],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][1],[1,0]);this.points=[e]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[new Pt({group:1,sensorType:Ge.socket,amount:2,offset:[.3,0],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][1],[0,1]);this.points=[e]}}),new Pt({group:2,sensorType:Ge.socket,amount:2,offset:[.3,0],onUpdate:function(){const e=Ae(this.parent.sides[ot.in][0],[0,-1]);this.points=[e]}})]}),new Pt({sensorType:Ge.smoke,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[.8*this.parent.width,.5*this.parent.height]),t=Ae(e,[0,.5*-this.parent.height]);this.points=[e,t,tn(t,n.serverRoom,!1),n.serverRoom]}}),new Pt({sensorType:Ge.socket,amount:2,cableOnly:!0,group:1,onUpdate:function(n){const e=this.parent;this.points=[Ae(e.northWestCorner,[e.width,e.height/2-1]),Ae(e.northWestCorner,[e.width,0]),Ae(e.northWestCorner,[0,0]),Ae(e.northWestCorner,[0,e.height/2-1])]}}),new Pt({sensorType:Ge.socket,amount:2,cableOnly:!0,group:2,onUpdate:function(n){const e=this.parent;this.points=[Ae(e.northWestCorner,[0,e.height/2+1]),Ae(e.northWestCorner,[0,e.height]),Ae(e.northWestCorner,[e.width,e.height]),Ae(e.northWestCorner,[e.width,e.height/2+1])]}}),new Pt({group:1,sensorType:Ge.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width-n.wallInnerThickness,0]);this.points=[t,tn(n.serverRoom,t,!0),n.serverRoom]}}),new Pt({group:2,sensorType:Ge.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width,e.height/2+1]);this.points=[Ae(e.northWestCorner,[e.width-n.wallInnerThickness,e.height/2+1]),t,tn(n.serverRoom,t,!1),n.serverRoom]}}),...[Ge.camera,Ge.poe].map(n=>new Pt({sensorType:n,cableType:Du.OutsidePOE,offset:[0,-1],onUpdate:function(e){const t=this.parent,i=Ae(t.northWestCorner,[t.width/2,-e.wallOuterThickness]);this.points=[i,Ae(i,[0,1]),e.serverRoom]}})),...[Ge.camera,Ge.poe].map(n=>new Pt({sensorType:n,cableType:Du.OutsidePOE,offset:[0,1],onUpdate:function(e){const t=this.parent,i=Ae(t.northWestCorner,[1,t.height+e.wallOuterThickness]);this.points=[i,Ae(i,[0,-1]),e.serverRoom]}})),new Qc({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new e4({sensorType:Ge.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new P1({name:"East",function:"Matplats",floor:tt.ground,onUpdate:function(n){const e=n.stramien;this.northWestCorner=[e.in.we.c+n.wallInnerThickness,e.in.ns.b],this.squaredRoom(e.in.we.d-e.in.we.c-n.wallInnerThickness,e.in.ns.c-e.in.ns.b)},parts:[new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,.3333333333333333,0);this.points=[e,tn(n.serverRoom,e,!1),n.serverRoom]}}),new Pt({group:3,sensorType:Ge.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,1/3,0)]}}),new Pt({group:3,sensorType:Ge.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,2/3,0)]}}),new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(ot.in,3/4,0);this.points=[e,tn(n,e,!0),n]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[...[Ge.camera,Ge.poe].map(n=>new Pt({sensorType:n,cableType:Du.OutsidePOE,offsetWall:-.3,onUpdate:function(e){const t=this.parent.getPosition(ot.in,0,0);this.points=[Ae(t,[e.wallOuterThickness,0]),Ae(t,[-1,1]),e.serverRoom]}})),new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,1.5);this.points=[e,tn(n.serverRoom,e,!1),n.serverRoom]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new Pt({group:3,amount:2,sensorType:Ge.socket,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,1/3,0)]}}),new Pt({group:3,sensorType:Ge.socket,amount:2,offset:[0,.3],onUpdate:function(){this.points=[this.parent.getPosition(ot.in,2/3,0)]}}),new Pt({sensorType:Ge.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(ot.in,1/4,0),t=this.parent.parent.northWestCorner;this.points=[e,tn(e,t,!0),t,tn(n,t,!0),n]}})]}),new ei({type:kn.inner,floor:tt.ground,onUpdate:function(n){this.drawByRoom(3,0,n,ni.straight,ni.straight)},parts:[...[Ge.dimmer,Ge.lightSwitch,Ge.temperature].map((n,e)=>new Pt({sensorType:n,offsetWall:Ge.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(ot.in,1,-1.5);this.points=[i,tn(t.serverRoom,i,!1),t.serverRoom]}})),new Zo({floor:tt.ground,scale:[1,1],rotate:180,onUpdate:function(n){this.origin=Ae(this.parent.sides[ot.in][1],[0,this.parent.parent.height/2-this.width])}}),new Zo({floor:tt.ground,scale:[1,-1],rotate:180,onUpdate:function(n){this.origin=Ae(this.parent.sides[ot.in][1],[0,this.parent.parent.height/2+this.width])}})]}),new Pt({sensorType:Ge.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(n){const e=this.parent;this.points=[Ae(e.northWestCorner,[e.width,e.height/2-1]),Ae(e.northWestCorner,[e.width,0]),Ae(e.northWestCorner,[0,0]),Ae(e.northWestCorner,[0,e.height/2-1])]}}),new Pt({sensorType:Ge.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(n){const e=this.parent;this.points=[Ae(e.northWestCorner,[0,e.height/2+1]),Ae(e.northWestCorner,[0,e.height]),Ae(e.northWestCorner,[e.width,e.height]),Ae(e.northWestCorner,[e.width,e.height/2+1])]}}),new Pt({group:3,sensorType:Ge.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const t=Ae(this.parent.northWestCorner,[0,0]);this.points=[t,tn(n.serverRoom,t,!0),n.serverRoom]}}),new Pt({group:3,sensorType:Ge.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[-n.wallInnerThickness,e.height/2+1]);this.points=[Ae(e.northWestCorner,[0,e.height/2+1]),t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new Qc({sensorType:Ge.lightBulb,onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new e4({sensorType:Ge.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new P1({name:"Central",function:"k\xf6k",floor:tt.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b],this.squaredRoom(n.stramien.in.we.c-n.stramien.in.we.b,n.stramien.in.ns.d-n.stramien.in.ns.b)},parts:[new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.innerWallLength=n.stramien.in.ns.d-n.stramien.in.ns.c,this.origin=Ae(this.parent.northWestCorner,[this.parent.width,n.stramien.in.ns.c-n.stramien.in.ns.b]),this.sides={[ot.in]:[Ae(this.origin,[n.wallOuterThickness,+n.wallOuterThickness]),Ae(this.origin,[n.wallOuterThickness,this.innerWallLength+n.wallOuterThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0,this.innerWallLength])]}},parts:[new Pt({group:4,amount:3,sensorType:Ge.socket,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,.5,0)]}}),new Pt({group:4,amount:2,sensorType:Ge.socket,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,0,-1)]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,1.5);this.points=[e,tn(n.serverRoom,e,!1),n.serverRoom]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new Mg({filename:"Table.svg",onUpdate:function(){this.rotation=0;const e=this.parent.getPosition(ot.in,0,2.6+.8);this.anchor=Ae(e,[0,-.8-1.6])}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.innerWallLength=n.stramien.in.ns.d-n.stramien.in.ns.c,this.origin=Ae(this.parent.northWestCorner,[0,n.stramien.in.ns.d-n.stramien.in.ns.b]),this.sides={[ot.in]:[Ae(this.origin,[-n.wallOuterThickness,+n.wallOuterThickness]),Ae(this.origin,[-n.wallOuterThickness,-this.innerWallLength+n.wallOuterThickness])],[ot.in]:[Ae(this.origin,[0,0]),Ae(this.origin,[0,-this.innerWallLength])]}},parts:[new Pt({group:5,amount:6,sensorType:Ge.socket,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,.5,0)]}}),new Pt({group:5,amount:6,sensorType:Ge.socket,onUpdate:function(){this.points=[this.parent.getPosition(ot.in,1,1)]}}),...[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].map(n=>new Mg({filename:"kitchen.svg",onUpdate:function(){let e=.6*n;n>4&&(e=.6*(n-5)),n>8&&(e=.6*(n-8)),n>12&&(e=-1.5);let t=-.6;n>4&&(t=1.2+.6),n>8&&(t=1.8),n>12&&(t=.6*(n-13)),this.rotation=0,n>4&&(this.rotation=180),n>8&&(this.rotation=0),n>12&&(this.rotation=-90),4===n&&(this.scale=[1,.4/.6],e-=.6-.6*this.scale[1]);const r=this.parent.getPosition(ot.in,1,e);this.anchor=Ae(r,[t,0])}})),new Mg({filename:"sink.svg",onUpdate:function(){this.rotation=-90;const e=this.parent.getPosition(ot.in,1,-1.5);this.anchor=Ae(e,[.6,0])}}),new Mg({filename:"induction.svg",onUpdate:function(){this.rotation=180;const e=this.parent.getPosition(ot.in,1,.6);this.anchor=Ae(e,[1.2+.6,0])}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[...[Ge.dimmer,Ge.lightSwitch,Ge.temperature].map((n,e)=>new Pt({sensorType:n,offsetWall:Ge.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(ot.in,1,-1.5);this.points=[i,tn(t.serverRoom,i,!1),t.serverRoom]}})),...[Ge.lightSwitch,Ge.temperature].map((n,e)=>new Pt({sensorType:n,onUpdate:function(t){const i=this.parent.getPosition(ot.in,0,1.5);this.points=[i,tn(t.serverRoom,i,!1),t.serverRoom]}})),...[Ge.drain,Ge.waterWarm].map(n=>new ic({sensorType:n,onUpdate:function(e){const r=this.parent.getPosition(ot.in,0,1.5);this.points=[r,tn(e.serverRoom,r,!0),e.serverRoom]}}))]}),new ei({type:kn.inner,floor:tt.ground,onUpdate:function(n){this.drawByRoom(0,1,n,ni.straight,ni.straight)},parts:[new Zo({floor:tt.ground,rotate:90,scale:[-1,1],onUpdate:function(n){this.origin=this.parent.getPosition(ot.in,0,0)}})]}),new Pt({group:7,offset:[.6,0],sensorType:Ge.perilex,verticalCableLength:4,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[0,this.parent.height-2]);this.points=[e,tn(e,n.serverRoom,!0),n.serverRoom]}}),new Pt({group:4,cableOnly:!0,sensorType:Ge.socket,amount:2,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[Ae(this.parent.northWestCorner,[this.parent.width,this.parent.height]),Ae(this.parent.northWestCorner,[this.parent.width,0]),e,tn(e,n.serverRoom,!0),n.serverRoom]}}),new Pt({group:5,cableOnly:!0,sensorType:Ge.socket,amount:2,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[Ae(this.parent.northWestCorner,[0,this.parent.height]),Ae(this.parent.northWestCorner,[0,0]),e,tn(e,n.serverRoom,!0),n.serverRoom]}}),new Pt({group:5,amount:6,sensorType:Ge.socket,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),t=Ae(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[e,tn(e,t,!0),t]}}),new Pt({group:5,amount:2,offset:[.3,0],sensorType:Ge.socket,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[0*this.parent.width,.15*this.parent.height]),t=Ae(this.parent.northWestCorner,[0,.15*this.parent.height]);this.points=[e,tn(e,t,!0),t]}}),new Pt({group:4,amount:2,offset:[-.3,0],sensorType:Ge.socket,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]),t=Ae(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]);this.points=[e,tn(e,t,!0),t]}}),new Pt({sensorType:Ge.smoke,verticalCableLength:6,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),t=Ae(this.parent.northWestCorner,[0*this.parent.width,.8*this.parent.height]),i=this.parent.northWestCorner;this.points=[e,t,i,tn(i,n.serverRoom,!0),n.serverRoom]}}),new Pt({sensorType:Ge.ethernet,offset:[.3,0],onUpdate:function(){const n=this.parent.parent.serverRoom,e=Ae(this.parent.northWestCorner,[0,.5*this.parent.height-2]);this.points=[e,tn(n,e,!1),n]}}),new Pt({sensorType:Ge.ethernet,offset:[.3,0],onUpdate:function(){const n=this.parent.parent.serverRoom,e=Ae(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[e,tn(n,e,!1),n]}}),new Pt({offset:[-.3,0],sensorType:Ge.ethernet,onUpdate:function(){const n=this.parent.parent.serverRoom,e=Ae(this.parent.northWestCorner,[this.parent.width,.5*this.parent.height-2]);this.points=[e,tn(n,e,!1),n]}}),new Pt({sensorType:Ge.pir,cableType:Du.SharedEthernet,offset:[0,.3],onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width/2,0]),i=tn(t,n.serverRoom,!0);this.points=[t,i,n.serverRoom]}}),new Qc({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new e4({sensorType:Ge.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new P1({name:"Hall",function:"Entr\xe9",floor:tt.ground,onUpdate:function(n){this.northWestCorner=n.stair.stairOrigin,this.squaredRoom(n.stramien.ground.we.hall-n.stramien.in.we.b,n.stramien.in.ns.b-n.stramien.ground.ns.hall-n.wallInnerThickness)},parts:[new Pt({sensorType:Ge.pir,cableType:Du.SharedEthernet,offset:[-.3,0],onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[e.width,e.height-1]),i=Ae(e.northWestCorner,[e.width,e.height]);this.points=[t,i,n.serverRoom]}}),new ei({type:kn.inner,floor:tt.ground,onUpdate:function(n){this.drawByRoom(1,2,n,ni.straight,ni.straight)},parts:[new Zo({scale:[1,1],rotate:0,floor:tt.ground,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.in,1,-.2),[-n.wallInnerThickness,0])}}),new Zo({scale:[-1,1],rotate:0,floor:tt.ground,onUpdate:function(n){this.origin=Ae(this.parent.getPosition(ot.out,1,-(n.stramien.in.ns.b-n.tower.innerCoords[0][1]-1*n.wallInnerThickness-.9)),[-n.wallInnerThickness,0])}}),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,offsetWall:.3,onUpdate:function(e){const t=this.parent.getPosition(ot.in,1,-2.5);this.points=[t,tn(e.serverRoom,t,!1),e.serverRoom]}})),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,offsetWall:-.3,onUpdate:function(e){const t=Ae(this.parent.getPosition(ot.in,1,-2.5),[e.wallInnerThickness,0]);this.points=[t,tn(e.serverRoom,t,!1),e.serverRoom]}}))]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,2.5);this.points=[e,tn(n.serverRoom,e,!1),n.serverRoom]}})]}),new Qc({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new P1({name:"Office",function:"Office",floor:tt.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.a],this.squaredRoom(n.stramien.in.we.c-n.stramien.in.we.b,n.stramien.ground.ns.hall-n.stramien.in.ns.a-n.wallInnerThickness)},parts:[new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[...[2/6,4/6].map(n=>new Pt({offsetWall:.3,sensorType:Ge.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(ot.in,n,0);this.points=[t,tn(e,t,!1),e]}}))]}),new ei({floor:tt.ground,type:kn.inner,onUpdate:function(n){this.drawByRoom(2,3,n,ni.straight,ni.straight)},parts:[new Zo({rotate:90,floor:tt.ground,scale:[1,1],onUpdate:function(n){this.origin=this.parent.getPosition(ot.in,1,-(n.stair.totalWidth+n.wallInnerThickness-this.width))}}),...[0,1,2].map(n=>new Pt({amount:2,offsetWall:-.3,sensorType:Ge.socket,onUpdate:function(e){const i=this.parent.getPosition(ot.in,(n+1)/6,0);this.points=[i]}})),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,offsetWall:.3,onUpdate:function(e){const i=this.parent.getPosition(ot.in,.5,0);this.points=[i,tn(e.serverRoom,i,!1),e.serverRoom]}})),new Pt({sensorType:Ge.lightSwitch,offsetWall:-.3,onUpdate:function(n){const t=Ae(this.parent.getPosition(ot.in,.5,0),[0,n.wallInnerThickness]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[...[Ge.camera,Ge.poe].map(n=>new Pt({sensorType:n,cableType:Du.OutsidePOE,offsetWall:-.3,onUpdate:function(e){const t=this.parent.getPosition(ot.in,0,0);this.points=[Ae(t,[e.wallOuterThickness,0]),Ae(t,[-1,1]),e.serverRoom]}})),...[2/6,4/6].map(n=>new Pt({offsetWall:-.3,sensorType:Ge.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(ot.in,n,0);this.points=[t,tn(e,t,!1),e]}}))]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[...[1/6,5/6].map(n=>new Pt({offset:[0,.3],sensorType:Ge.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(ot.in,n,0);this.points=[t,tn(e,t,!1),e]}}))]}),new Pt({sensorType:Ge.smoke,onUpdate:function(n){const e=Ae(this.parent.northWestCorner,[.5*this.parent.width,.5*this.parent.height]);this.points=[e,tn(e,n.serverRoom,!0),n.serverRoom]}}),new Pt({sensorType:Ge.socket,amount:2,via:tt.ceiling,group:6,offset:[0,.3],onUpdate:function(n){const i=Ae(this.parent.northWestCorner,[1,0]);this.points=[i]}}),new Pt({sensorType:Ge.socket,amount:2,group:6,offset:[0,.3],onUpdate:function(n){const e=this.parent,i=Ae(e.northWestCorner,[e.width-1,0]);this.points=[i]}}),new Pt({sensorType:Ge.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(n){const e=this.parent,i=Ae(e.northWestCorner,[0,e.height-1]);this.points=[i]}}),new Pt({sensorType:Ge.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(n){const i=Ae(this.parent.northWestCorner,[0,1]);this.points=[i]}}),new Pt({sensorType:Ge.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(n){const e=this.parent,i=Ae(e.northWestCorner,[e.width,1]);this.points=[i]}}),new Pt({sensorType:Ge.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(n){const e=this.parent,i=Ae(e.northWestCorner,[e.width,e.height-1]);this.points=[i]}}),new Pt({sensorType:Ge.socket,amount:2,cableOnly:!0,group:6,onUpdate:function(n){const e=this.parent;this.points=[Ae(e.northWestCorner,[0,e.height-1]),Ae(e.northWestCorner,[0,0]),Ae(e.northWestCorner,[e.width,0]),Ae(e.northWestCorner,[e.width,e.height]),Ae(e.northWestCorner,[.5*e.width,e.height]),tn(n.serverRoom,Ae(e.northWestCorner,[.5*e.width,e.height]),!1),n.serverRoom]}}),new Qc({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new e4({sensorType:Ge.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new P1({name:"Toilet",floor:tt.ground,function:"WC",onUpdate:function(n){const e=n.stramien.in.ns.b-n.tower.innerCoords[0][1]-2*n.wallInnerThickness-.9;this.northWestCorner=[n.stramien.in.we.b+n.stair.totalWidth-n.stair.walkWidth+n.wallInnerThickness,n.stramien.in.ns.b-e-n.wallInnerThickness],this.squaredRoom(.8,e)},parts:[new ei({floor:tt.ground,type:kn.inner,onUpdate:function(n){this.drawByRoom(0,1,n,ni.straight,ni.outside)},parts:[new ic({sensorType:Ge.toilet,size:120,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.5,0),[0,.2]);this.points=[e,tn(n.serverRoom,e,!0),n.serverRoom]}})]}),new ei({floor:tt.ground,type:kn.inner,onUpdate:function(n){this.drawByRoom(1,2,n,ni.outside,ni.straight)},parts:[new ic({sensorType:Ge.drain,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.6666666666666666,0),[0,0]);this.points=[e,[e[0],this.parent.parent.northWestCorner[1]+.2]]}}),new ic({sensorType:Ge.waterWarm,onUpdate:function(n){const e=Ae(this.parent.getPosition(ot.in,.6666666666666666,0),[0,0]);this.points=[e,tn(n.serverRoom,e,!0),n.serverRoom]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawByRoom(3,0,n,ni.straight,ni.straight)},parts:[new Pt({sensorType:Ge.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(ot.in,0,.8);this.points=[e,tn(n.serverRoom,e,!1),n.serverRoom]}})]}),new Qc({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new e4({sensorType:Ge.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new P1({name:"Server",function:"KLK",floor:tt.ground,onUpdate:function(n){const e=n.stramien.in.ns.b-n.tower.innerCoords[0][1]-2*n.wallInnerThickness-.9,t=n.stramien.ground.we.hall+.8+2*n.wallInnerThickness;this.northWestCorner=[t,n.stramien.in.ns.b-e-n.wallInnerThickness],this.squaredRoom(n.stramien.in.we.c-t,e)},parts:[new ei({floor:tt.ground,type:kn.inner,onUpdate:function(n){this.drawByRoom(0,1,n,ni.straight,ni.straight)},parts:[...[0,1,2].map(n=>new Pt({amount:1===n?2:1,offsetWall:1===n?-.3:.3,sensorType:Ge.socket,onUpdate:function(e){const t=e.serverRoom,i=this.parent.getPosition(ot.in,(n+1)/4,0);this.points=[Ae(i,[0,1===n?-e.wallInnerThickness:0]),Ae(i,[0,0]),tn(t,i,!1),t]}}))]}),new Pt({sensorType:Ge.smoke,onUpdate:function(n){const e=this.parent.center;this.points=[e,tn(e,n.serverRoom,!0),n.serverRoom]}}),...[Ge.poe,Ge.wifi].map(n=>new Pt({offset:[0,.3],sensorType:n,onUpdate:function(e){const t=this.parent.center;this.points=[t,tn(t,e.serverRoom,!0),e.serverRoom]}})),...[Ge.lightSwitch,Ge.temperature].map(n=>new Pt({sensorType:n,offset:[0,.3],onUpdate:function(e){const t=this.parent,i=Ae(t.northWestCorner,[.2*t.width,0*t.height]),r=Ae(t.northWestCorner,[0*t.width,0*t.height]);this.points=[i,r,tn(e.serverRoom,r,!1),e.serverRoom]}})),new Qc({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new e4({sensorType:Ge.ventIn,size:100,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new P1({name:"Tower",floor:tt.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,this.outOfDesign||(this.northWestCorner=[n.stramien.out.we.c-(n.wallOuterThickness-n.wallInnerThickness),n.tower.innerCoords[0][1]],this.center=Ae(this.northWestCorner,[1,1]),this.centralElectricity=this.center,this.coords=[this.northWestCorner,n.tower.innerCoords[0],n.tower.innerCoords[1],n.tower.innerCoords[2],n.tower.innerCoords[3],[n.tower.innerCoords[3][0],n.stramien.in.ns.b-n.wallInnerThickness],[this.northWestCorner[0],n.stramien.in.ns.b-n.wallInnerThickness]])},parts:[new ei({type:kn.inner,floor:tt.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&this.drawByRoom(6,0,n,ni.outside,ni.straight)},parts:[new Zo({scale:[1,1],rotate:180,floor:tt.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&(this.floor=tt.ground,this.origin=this.parent.getPosition(ot.in,1,0))}})]}),new ei({type:kn.inner,floor:tt.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&this.drawByRoom(5,6,n,ni.straight,ni.outside)},parts:[new Zo({scale:[-1,1],rotate:-90,floor:tt.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&(this.floor=tt.ground,this.origin=this.parent.getPosition(ot.in,0,n.wallInnerThickness))}})]}),new Pt({sensorType:Ge.pir,cableType:Du.SharedEthernet,offset:[.3,0],onUpdate:function(n){const e=this.parent,t=Ae(e.northWestCorner,[0,e.height-1]),i=tn(t,n.serverRoom,!0);this.points=[t,i,n.serverRoom]}}),new Qc({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),new P1({name:"Laundry",function:"Kl\xe4dv\xe5rd",floor:tt.ground,onUpdate:function(n){const t=n.stramien.in.we.c-n.stramien.ground.we.hall-n.wallInnerThickness,i=n.stramien.in.ns.b-n.stramien.ground.ns.hall-(n.stramien.in.ns.b-n.tower.innerCoords[0][1]-2*n.wallInnerThickness-.9)-2*n.wallInnerThickness;this.northWestCorner=[n.stramien.ground.we.hall+n.wallInnerThickness,n.stramien.ground.ns.hall],this.squaredRoom(t,i)},parts:[new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new ic({sensorType:Ge.drain,onUpdate:function(n){const t=this.parent.parent.center;this.points=[t,tn(n.serverRoom,t,!0),n.serverRoom]}}),...[Ge.waterCold,Ge.waterRain].map(n=>new ic({sensorType:n,offsetWall:n===Ge.waterRain?0:.3,onUpdate:function(e){const i=this.parent.getPosition(ot.in,n===Ge.waterRain?2/3:3/4,0);this.points=[i,tn(e.serverRoom,i,!1),e.serverRoom]}})),...[Ge.waterCold,Ge.waterRain].map(n=>new ic({sensorType:n,offsetWall:n===Ge.waterRain?0:.3,onUpdate:function(e){const t=this.parent,i=t.getPosition(ot.in,n===Ge.waterRain?1/3:1/4,0),r=t.getPosition(ot.in,n===Ge.waterRain?2/3:3/4,0);this.points=[i,r]}})),new ic({sensorType:Ge.drain,onUpdate:function(n){const e=this.parent,t=e.parent,i=e.getPosition(ot.in,.5,0);this.points=[i,t.center]}})]}),new ei({type:kn.theoretic,floor:tt.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallInnerThickness)},parts:[]}),new Pt({sensorType:Ge.smoke,onUpdate:function(n){const e=this.parent.center;this.points=[e,tn(e,n.serverRoom,!0),n.serverRoom]}}),new Pt({sensorType:Ge.ethernet,offset:[.3,0],onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=Ae(t.northWestCorner,[0*t.width,.5*t.height]);this.points=[i,tn(e,i,!1),e]}}),new Qc({onUpdate:function(n){const t=Ae(this.parent.center,[0,0]);this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}}),new e4({sensorType:Ge.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,tn(n.serverRoom,t,!1),n.serverRoom]}})]}),...lGe]};var Sg=(()=>{return(n=Sg||(Sg={})).amount="amount",n.name="name",n.sizeOrVersion="sizeOrVersion",n.price="price",n.priceAvg="priceAvg",n.priceMax="priceMax",n.priceTotal="priceTotal",n.remarks="other",n.unit="unit",Sg;var n})();class q0{constructor(e){this.sectionFold=!1,Object.assign(this,e)}}class la{constructor(e){this.amount=1,this.type="single",Object.assign(this,e)}get calcPrice(){return mn(this.amount*this.price,2)}get calcAmount(){return this.amount}}class kM extends la{constructor(e){super(e),this.costs=[],this.type="group",this.collapsed=!1,Object.assign(this,e)}get folded(){return`<span class="material-icons">expand_${this.collapsed?"less":"more"}</span>`}toggleFold(){this.collapsed=!this.collapsed}get calcPrice(){return hM(this.costs.map(e=>e.calcPrice))}get calcAmount(){return hM(this.costs.map(e=>e.amount))}}class hGe extends kM{constructor(e){super(e),this.costs=[],this.type="total",Object.assign(this,e)}get calcPrice(){return hM(this.costs.map(e=>e.calcPrice))}get calcAmount(){return 0}get folded(){return'<span class="material-icons">remove</span>'}}let Jo=(()=>{class n{constructor(t){this.appService=t,this.house$=new Ao(new cGe(uGe)),this.roomKeys=this.house$.value.partsFlatten.filter(i=>i instanceof P1).map(i=>i.selector),this.wallKeys=this.house$.value.partsFlatten.filter(i=>i instanceof ei).map(i=>i.selector),this.doorKeys=this.house$.value.partsFlatten.filter(i=>i instanceof Zo).map(i=>i.selector),this.windowKeys=this.house$.value.partsFlatten.filter(i=>i instanceof Ta).map(i=>i.selector),this.sensorKeys=this.house$.value.partsFlatten.filter(i=>i instanceof Pt).map(i=>i.selector).sort((i,r)=>i.localeCompare(r)),this.exampleKeys=this.house$.value.partsFlatten.filter(i=>i instanceof Mg).map(i=>i.selector).sort((i,r)=>i.localeCompare(r))}update(t="house",i,r,s){const o=this.house$.value;"house"===t&&(o[i]=r),"stair"===t&&(o.stair[i]=r),"cross"===t&&(o.cross[i]=r),"construction"===t&&(o.construction[i]=r),o.calculateHouse(),o.calculateStats(),this.house$.next(o),void 0!==s&&(this.appService.tag$.next(s),clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.appService.tag$.next(void 0)},600))}destroyParts(){const t=r=>{r.parts.forEach(function(){var s=Ea(function*(o){o.svg=void 0,void 0!==o.parts&&t(o)});return function(o){return s.apply(this,arguments)}}())},i=this.house$.value;t(i),t(i.cross),t(i.stair)}getGroups(t){return[...new Set(Object.values(this.house$.value.partsFlatten).filter(r=>r instanceof Pt).filter(r=>r.sensorType===t).map(r=>r.group))].filter(r=>r).sort((r,s)=>r-s)}getOutlets(t){return Object.values(this.house$.value.partsFlatten).filter(r=>r instanceof Pt).filter(r=>r.sensorType===t).map(r=>r.amount).reduce((r,s)=>r+s,0)}getCable(t,i=1){return mn(Object.values(this.house$.value.partsFlatten).filter(s=>s instanceof Pt).filter(s=>s.sensorType===t).map(s=>s.cableLength).reduce((s,o)=>s+o,0),i)}getWallLength(){const t=this.house$.value;return{innerLength:Math.ceil(Z3(Object.values(t.partsFlatten).filter(s=>s instanceof ei).map(s=>{let o=0;return s.type===kn.inner&&(o+=s.getLength(ot.out)),o+=s.getLength(ot.in),o}))),outerLength:Math.ceil(Z3(Object.values(t.partsFlatten).filter(s=>s instanceof ei).filter(s=>s.type===kn.outer).map(s=>s.getLength(ot.out)),1))}}getWallArea(){const t=this.house$.value;return{innerArea:Math.ceil(Z3(Object.values(t.partsFlatten).filter(s=>s instanceof ei).map(s=>{let o=0;return s.type===kn.inner&&(o+=s.getArea(ot.out)),o+=s.getArea(ot.in),o}))),outerArea:Math.ceil(Z3(Object.values(t.partsFlatten).filter(s=>s instanceof ei).filter(s=>s.type===kn.outer).map(s=>s.getArea(ot.out)),1))}}getT(t,i,r,s=(()=>!0),o=!0){const a=aP(),c=Object.values(this.house$.value.partsFlatten.filter(l=>l instanceof t).filter(l=>s(l)).reduce((l,u)=>{const f=i.map(p=>`${u[p]}`).join(",");return f in l||(l[f]={count:0,part:u}),l[f].count+=t!==Pt||o?1:u.getLength(),l},{})).map(l=>{const u=new la(r(l.part));return u.amount=mn(l.count,1),u.uuid=a,u});if(c.length>1){const l=new kM({uuid:a,name:`${c[0].name}`,costs:c});return l[c[0].name]=!1,l}{if(!c[0])return;const l=c[0];return l.uuid=void 0,l}}}return n.\u0275fac=function(t){return new(t||n)(Ye(Fo))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Eg=(()=>{class n{constructor(t,i){this.overlay=t,this.houseService=i,this.tooltipHTML$=new Ao(void 0),this.unsubscribe=new Je}attachPopup([t,i],r){this.detachOverlay(),this.origin=r instanceof Pt?r.svgIcon.node():r.svg.node(),this.overlayRef=this.overlay.create({positionStrategy:this.getPositionStrategy([t,i]),scrollStrategy:this.overlay.scrollStrategies.reposition(),hasBackdrop:!1}),this.overlayRef.backdropClick().pipe(xa(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.attachOverlay(r)}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&this.overlayRef.detach()}updateOverlay(){}attachOverlay(t){if(this.overlayRef&&!this.overlayRef.hasAttached()){const i=new e9(XUe);this.componentRef=this.overlayRef.attach(i),this.componentRef.instance.html=t.tooltip(this.houseService.house$.value)}}getPositionStrategy([t,i]){return this.overlay.position().flexibleConnectedTo(this.origin).withPositions([new mC({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"},0,-20),new mC({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"},0,20,"flipped")]).withPush(!0)}}return n.\u0275fac=function(t){return new(t||n)(Ye(f3),Ye(Jo))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fGe=(()=>{class n{constructor(t,i){this.appService=t,this.houseService=i,this.appService.states$.subscribe(r=>{this.states=r,this.house=this.houseService.house$.value,this.cross=this.house.cross,this.filterOut(),this.appService.update$.next()})}updateStateBasedOnSection(t,i){if(this.section===t)return;this.section=t;const r=this.appService.states$.value;this.buildState(r,[T2.grid],[_t.basics].includes(t)),this.buildState(r,[T2.silhouette],[_t.roofEdge].includes(t)),this.buildState(r,[T2.measure,T2.minimumHeight],[_t.stairBasic,_t.stairCheck,_t.stairPlan,_t.basics,_t.roof70,_t.roofCircle].includes(t)),this.buildState(r,[T2.doors],![_t.passiv,_t.welcome].includes(t)),this.buildState(r,[Ge.socket,Ge.perilex],[_t.wiredPower].includes(t)),this.buildState(r,[Ge.poe,Ge.ethernet,Ge.wifi],[_t.wiredEthernet].includes(t)),this.buildState(r,[Ge.ventIn,Ge.ventOut],[_t.wiredVent].includes(t)),this.buildState(r,[Ge.dimmer,Ge.dlc,Ge.lightBulb,Ge.lightSwitch],[_t.wiredLight].includes(t)),this.buildState(r,[Ge.toilet,Ge.shower,Ge.drain,Ge.waterCold,Ge.waterRain,Ge.waterWarm],[_t.wiredWater].includes(t)),this.buildState(r,[Ge.camera,Ge.alarm,Ge.smoke],[_t.wiredSafety].includes(t)),this.buildState(r,[Ge.pir],[_t.wiredExtra,_t.wiredSafety].includes(t)),this.buildState(r,[Ge.blinds,Ge.temperature],[_t.wiredExtra].includes(t)),this.statesForConstruction(r,t),this.appService.commitState(r)}statesForConstruction(t,i){const r=[];r.push(_t.constructionWallGips),this.buildState(t,[Di.gips],[...r].includes(i)),r.push(_t.constructionWallService),this.buildState(t,[Di.serviceBeams,Di.serviceInsulation],[...r].includes(i)),r.push(_t.constructionWallFacade),this.buildState(t,[Di.facade],[...r].includes(i)),r.push(_t.constructionWallSpace),this.buildState(t,[Di.space],[...r].includes(i)),r.push(_t.constructionRoofTiles),this.buildState(t,[Di.roofTiles],[...r].includes(i)),r.push(_t.constructionRoofSpace),this.buildState(t,[Di.roofSpace],[...r].includes(i)),r.push(_t.constructionRoofOuterSheet),r.push(_t.constructionWallOuterSheet),this.buildState(t,[Di.outerSheet,Di.roofOuterSheets],[...r].includes(i)),r.push(_t.constructionWallInsulation),this.buildState(t,[Di.insulation],[...r].includes(i)),r.push(_t.constructionRoofInside),this.buildState(t,[Di.roofOSB],[...r].includes(i)),r.push(_t.constructionRoofJoist),this.buildState(t,[Di.roofJoists],[...r].includes(i)),r.push(_t.constructionRoofRidge),this.buildState(t,[Di.roofRidge],[...r].includes(i)),r.push(_t.constructionFloor),this.buildState(t,[Di.topFloorJoists,Di.topFloorOSB],[...r].includes(i)),r.push(_t.constructionFloorLVL),this.buildState(t,[Di.floorLVL],[...r].includes(i)),r.push(_t.constructionWallTape),this.buildState(t,[Di.tapes],[...r].includes(i)),r.push(_t.constructionWallOSB),this.buildState(t,[Di.osbWall],[...r].includes(i)),r.push(_t.constructionWallJoists),this.buildState(t,[Di.joists],[...r].includes(i)),r.push(_t.constructionWallSole),this.buildState(t,[Di.sole],[...r].includes(i)),r.push(_t.constructionGroundFloor),this.buildState(t,[Di.groundFloor],[...r].includes(i)),r.push(_t.constructionCrawlerSpace),this.buildState(t,[Di.crawlerSpace],[...r].includes(i)),r.push(_t.constructionFoundation),this.buildState(t,[Di.foundation],[...r].includes(i))}filterOut(){this.house.tower.footprintVisible=this.states[T2.towerFootprint],this.house.partsFlatten.filter(t=>t instanceof Zo).forEach(t=>t.visible=this.states[T2.doors]),this.house.partsFlatten.filter(t=>t instanceof ei).filter(t=>t.type===kn.theoretic).forEach(t=>t.outOfDesign=!this.states[T2.theoreticalWalls]),[...this.house.parts,...this.cross.parts,...this.house.stair.parts].filter(t=>t instanceof g1).forEach(t=>t.visible=this.states[T2.measure]),this.house.parts.filter(t=>t.selector.includes("house-stramien-")).forEach(t=>{t.visible=this.states[T2.stramien]}),this.house.parts.filter(t=>t.selector.includes("grid-index")).forEach(t=>{t.visible=this.states[T2.grid]}),this.house.partsFlatten.filter(t=>t instanceof Pt).forEach(t=>{t.visible=this.states[t.sensorType]}),this.house.partsFlatten.filter(t=>t instanceof Mg).forEach(t=>{t.visible=this.states[T2.examplePlan]})}buildState(t,i,r){i.forEach(s=>{t[s]=r})}getSide(t){return[Co.cross].includes(t)?Cd.left:[Co.none].includes(t)?Cd.none:Cd.right}setGraphic(t){if([_t.welcome,_t.passiv,_t.basics,_t.extensions,_t.tower,_t.wiredWelcome,_t.wiredPower,_t.wiredEthernet,_t.wiredExtra,_t.wiredLight,_t.wiredSafety,_t.wiredVent,_t.wiredWater].includes(t))return Co.house2D;if([_t.roof70,_t.roofBasics,_t.roofChoice,_t.roofCircle,_t.roofEdge,_t.roofIntermezzo,_t.EndOfPageHouse].includes(t))return Co.cross;if([_t.roof70].includes(t))this.houseService.update("cross","viewedRoofStyle",Hl.roof70);else if([_t.roofBasics,_t.roofCircle].includes(t))this.houseService.update("cross","viewedRoofStyle",Hl.roofCircle);else{if([_t.stairStart,_t.stairBasic,_t.stairCheck].includes(t))return Co.stairCross;if([_t.stairPlan].includes(t))return Co.stairPlan;if([_t.constructionParameters,_t.facadeStart,_t.facadeWindow,_t.facadeDoor].includes(t))return Co.none;if([_t.constructionWelcome,_t.constructionFoundation,_t.constructionCrawlerSpace,_t.constructionFloor,_t.constructionRoof,_t.constructionWallFinish,_t.constructionWallSole,_t.constructionWallJoists,_t.constructionWallOSB,_t.constructionWallTape,_t.constructionWallOuterSheet,_t.constructionWallSpace,_t.constructionWallFacade,_t.constructionWallInsulation,_t.constructionWallService,_t.constructionWallGips,_t.constructionFloor,_t.constructionFloorLVL,_t.constructionGroundFloor,_t.constructionRoofRidge,_t.constructionRoofJoist,_t.constructionRoofInside,_t.constructionRoofOuterSheet,_t.constructionRoofSpace,_t.constructionRoofTiles].includes(t))return Co.construction;if([_t.House3D].includes(t))return Co.House3D;if([_t.installationDrinkWater,_t.installationElectricity,_t.installationGreyWater,_t.installationHeating,_t.installationSmartHome,_t.installationVentilation].includes(t))return Co.none}return Co.none}}return n.\u0275fac=function(t){return new(t||n)(Ye(Fo),Ye(Jo))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var PM={prefix:"fab",iconName:"discord",icon:[640,512,[],"f392","M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"]},uP={prefix:"fab",iconName:"patreon",icon:[512,512,[],"f3d9","M512 194.8c0 101.3-82.4 183.8-183.8 183.8-101.7 0-184.4-82.4-184.4-183.8 0-101.6 82.7-184.3 184.4-184.3C429.6 10.5 512 93.2 512 194.8zM0 501.5h90v-491H0v491z"]},hP={prefix:"fab",iconName:"instagram",icon:[448,512,[],"f16d","M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"]},fP={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]},dP={prefix:"fab",iconName:"youtube",icon:[576,512,[61802],"f167","M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"]};function Rie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function hi(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Rie(Object(t),!0).forEach(function(i){Wc(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Rie(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function HM(n){return(HM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function Fie(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Wc(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pP(n,e){return function jYe(n){if(Array.isArray(n))return n}(n)||function qYe(n,e){var t=null==n?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,a,i=[],r=!0,s=!1;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(c){s=!0,a=c}finally{try{!r&&null!=t.return&&t.return()}finally{if(s)throw a}}return i}}(n,e)||kie(n,e)||function XYe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hv(n){return function WYe(n){if(Array.isArray(n))return gP(n)}(n)||function $Ye(n){if(typeof Symbol<"u"&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||kie(n)||function KYe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kie(n,e){if(n){if("string"==typeof n)return gP(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gP(n,e)}}function gP(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var Pie=function(){},mP={},Hie={},zie=null,Oie={mark:Pie,measure:Pie};try{typeof window<"u"&&(mP=window),typeof document<"u"&&(Hie=document),typeof MutationObserver<"u"&&(zie=MutationObserver),typeof performance<"u"&&(Oie=performance)}catch{}var NM,VM,UM,GM,QM,Nie=(mP.navigator||{}).userAgent,Vie=void 0===Nie?"":Nie,Kd=mP,La=Hie,Uie=zie,OM=Oie,hf=!!La.documentElement&&!!La.head&&"function"==typeof La.addEventListener&&"function"==typeof La.createElement,Gie=~Vie.indexOf("MSIE")||~Vie.indexOf("Trident/"),ff="___FONT_AWESOME___",Wie="svg-inline--fa",M5="data-fa-i2svg",vP="data-fa-pseudo-element",_P="data-prefix",yP="data-icon",jie="fontawesome-i2svg",eZe=["HTML","HEAD","STYLE","SCRIPT"],$ie=function(){try{return!0}catch{return!1}}(),Da="classic",H1="sharp",wP=[Da,H1];function zv(n){return new Proxy(n,{get:function(t,i){return i in t?t[i]:t[Da]}})}var Ov=zv((Wc(NM={},Da,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),Wc(NM,H1,{fa:"solid",fass:"solid","fa-solid":"solid"}),NM)),Nv=zv((Wc(VM={},Da,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Wc(VM,H1,{solid:"fass"}),VM)),Vv=zv((Wc(UM={},Da,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Wc(UM,H1,{fass:"fa-solid"}),UM)),tZe=zv((Wc(GM={},Da,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Wc(GM,H1,{"fa-solid":"fass"}),GM)),nZe=/fa(s|r|l|t|d|b|k|ss)?[\-\ ]/,qie="fa-layers-text",iZe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,rZe=zv((Wc(QM={},Da,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Wc(QM,H1,{900:"fass"}),QM)),Kie=[1,2,3,4,5,6,7,8,9,10],sZe=Kie.concat([11,12,13,14,15,16,17,18,19,20]),oZe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Uv=new Set;Object.keys(Nv[Da]).map(Uv.add.bind(Uv)),Object.keys(Nv[H1]).map(Uv.add.bind(Uv));var aZe=[].concat(wP,Hv(Uv),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","duotone-group","swap-opacity","primary","secondary"]).concat(Kie.map(function(n){return"".concat(n,"x")})).concat(sZe.map(function(n){return"w-".concat(n)})),Gv=Kd.FontAwesomeConfig||{};La&&"function"==typeof La.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=pP(n,2),i=e[1],r=function lZe(n){return""===n||"false"!==n&&("true"===n||n)}(function cZe(n){var e=La.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=r&&(Gv[i]=r)});var Xie={styleDefault:"solid",familyDefault:"classic",cssPrefix:"fa",replacementClass:Wie,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Gv.familyPrefix&&(Gv.cssPrefix=Gv.familyPrefix);var Tg=hi(hi({},Xie),Gv);Tg.autoReplaceSvg||(Tg.observeMutations=!1);var Mi={};Object.keys(Xie).forEach(function(n){Object.defineProperty(Mi,n,{enumerable:!0,set:function(t){Tg[n]=t,Qv.forEach(function(i){return i(Mi)})},get:function(){return Tg[n]}})}),Object.defineProperty(Mi,"familyPrefix",{enumerable:!0,set:function(e){Tg.cssPrefix=e,Qv.forEach(function(t){return t(Mi)})},get:function(){return Tg.cssPrefix}}),Kd.FontAwesomeConfig=Mi;var Qv=[],K0={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Wv(){for(var n=12,e="";n-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function Lg(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function CP(n){return n.classList?Lg(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function Yie(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function WM(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function bP(n){return n.size!==K0.size||n.x!==K0.x||n.y!==K0.y||n.rotate!==K0.rotate||n.flipX||n.flipY}function Zie(){var n="fa",e=Wie,t=Mi.cssPrefix,i=Mi.replacementClass,r=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(t!==n||i!==e){var s=new RegExp("\\.".concat(n,"\\-"),"g"),o=new RegExp("\\--".concat(n,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(i))}return r}var Jie=!1;function xP(){Mi.autoAddCss&&!Jie&&(function fZe(n){if(n&&hf){var e=La.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=La.head.childNodes,i=null,r=t.length-1;r>-1;r--){var s=t[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}La.head.insertBefore(e,i)}}(Zie()),Jie=!0)}var vZe={mixout:function(){return{dom:{css:Zie,insertCss:xP}}},hooks:function(){return{beforeDOMElementCreation:function(){xP()},beforeI2svg:function(){xP()}}}},df=Kd||{};df[ff]||(df[ff]={}),df[ff].styles||(df[ff].styles={}),df[ff].hooks||(df[ff].hooks={}),df[ff].shims||(df[ff].shims=[]);var Wu=df[ff],ere=[],jM=!1;function yZe(n){!hf||(jM?setTimeout(n,0):ere.push(n))}function jv(n){var e=n.tag,t=n.attributes,i=void 0===t?{}:t,r=n.children,s=void 0===r?[]:r;return"string"==typeof n?Yie(n):"<".concat(e," ").concat(function pZe(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(Yie(n[t]),'" ')},"").trim()}(i),">").concat(s.map(jv).join(""),"</").concat(e,">")}function tre(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}hf&&((jM=(La.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(La.readyState))||La.addEventListener("DOMContentLoaded",function n(){La.removeEventListener("DOMContentLoaded",n),jM=1,ere.map(function(e){return e()})}));var MP=function(e,t,i,r){var c,l,u,s=Object.keys(e),o=s.length,a=void 0!==r?function(e,t){return function(i,r,s,o){return e.call(t,i,r,s,o)}}(t,r):t;for(void 0===i?(c=1,u=e[s[0]]):(c=0,u=i);c<o;c++)u=a(u,e[l=s[c]],l,e);return u};function SP(n){var e=function CZe(n){for(var e=[],t=0,i=n.length;t<i;){var r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<i){var s=n.charCodeAt(t++);56320==(64512&s)?e.push(((1023&r)<<10)+(1023&s)+65536):(e.push(r),t--)}else e.push(r)}return e}(n);return 1===e.length?e[0].toString(16):null}function nre(n){return Object.keys(n).reduce(function(e,t){var i=n[t];return i.icon?e[i.iconName]=i.icon:e[t]=i,e},{})}function EP(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.skipHooks,r=void 0!==i&&i,s=nre(e);"function"!=typeof Wu.hooks.addPack||r?Wu.styles[n]=hi(hi({},Wu.styles[n]||{}),s):Wu.hooks.addPack(n,nre(e)),"fas"===n&&EP("fa",e)}var $M,qM,KM,Dg=Wu.styles,xZe=Wu.shims,MZe=(Wc($M={},Da,Object.values(Vv[Da])),Wc($M,H1,Object.values(Vv[H1])),$M),TP=null,ire={},rre={},sre={},ore={},are={},SZe=(Wc(qM={},Da,Object.keys(Ov[Da])),Wc(qM,H1,Object.keys(Ov[H1])),qM);function TZe(n,e){var t=e.split("-"),i=t[0],r=t.slice(1).join("-");return i!==n||""===r||function EZe(n){return~aZe.indexOf(n)}(r)?null:r}var cre=function(){var e=function(s){return MP(Dg,function(o,a,c){return o[c]=MP(a,s,{}),o},{})};ire=e(function(r,s,o){return s[3]&&(r[s[3]]=o),s[2]&&s[2].filter(function(c){return"number"==typeof c}).forEach(function(c){r[c.toString(16)]=o}),r}),rre=e(function(r,s,o){return r[o]=o,s[2]&&s[2].filter(function(c){return"string"==typeof c}).forEach(function(c){r[c]=o}),r}),are=e(function(r,s,o){var a=s[2];return r[o]=o,a.forEach(function(c){r[c]=o}),r});var t="far"in Dg||Mi.autoFetchSvg,i=MP(xZe,function(r,s){var o=s[0],a=s[1],c=s[2];return"far"===a&&!t&&(a="fas"),"string"==typeof o&&(r.names[o]={prefix:a,iconName:c}),"number"==typeof o&&(r.unicodes[o.toString(16)]={prefix:a,iconName:c}),r},{names:{},unicodes:{}});sre=i.names,ore=i.unicodes,TP=XM(Mi.styleDefault,{family:Mi.familyDefault})};function LP(n,e){return(ire[n]||{})[e]}function E5(n,e){return(are[n]||{})[e]}function lre(n){return sre[n]||{prefix:null,iconName:null}}function Yd(){return TP}function XM(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.family,i=void 0===t?Da:t,r=Ov[i][n],s=Nv[i][n]||Nv[i][r],o=n in Wu.styles?n:null;return s||o||null}(function hZe(n){Qv.push(n)})(function(n){TP=XM(n.styleDefault,{family:Mi.familyDefault})}),cre();var ure=(Wc(KM={},Da,Object.keys(Vv[Da])),Wc(KM,H1,Object.keys(Vv[H1])),KM);function YM(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.skipLookups,r=void 0!==i&&i,s=(Wc(e={},Da,"".concat(Mi.cssPrefix,"-").concat(Da)),Wc(e,H1,"".concat(Mi.cssPrefix,"-").concat(H1)),e),o=null,a=Da;(n.includes(s[Da])||n.some(function(l){return ure[Da].includes(l)}))&&(a=Da),(n.includes(s[H1])||n.some(function(l){return ure[H1].includes(l)}))&&(a=H1);var c=n.reduce(function(l,u){var f=TZe(Mi.cssPrefix,u);if(Dg[u]?(u=MZe[a].includes(u)?tZe[a][u]:u,o=u,l.prefix=u):SZe[a].indexOf(u)>-1?(o=u,l.prefix=XM(u,{family:a})):f?l.iconName=f:u!==Mi.replacementClass&&u!==s[Da]&&u!==s[H1]&&l.rest.push(u),!r&&l.prefix&&l.iconName){var p="fa"===o?lre(l.iconName):{},g=E5(l.prefix,l.iconName);p.prefix&&(o=null),l.iconName=p.iconName||g||l.iconName,l.prefix=p.prefix||l.prefix,"far"===l.prefix&&!Dg.far&&Dg.fas&&!Mi.autoFetchSvg&&(l.prefix="fas")}return l},{prefix:null,iconName:null,rest:[]});return(n.includes("fa-brands")||n.includes("fab"))&&(c.prefix="fab"),(n.includes("fa-duotone")||n.includes("fad"))&&(c.prefix="fad"),!c.prefix&&a===H1&&(Dg.fass||Mi.autoFetchSvg)&&(c.prefix="fass",c.iconName=E5(c.prefix,c.iconName)||c.iconName),("fa"===c.prefix||"fa"===o)&&(c.prefix=Yd()||"fas"),c}var IZe=function(){function n(){(function UYe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function GYe(n,e,t){e&&Fie(n.prototype,e),t&&Fie(n,t),Object.defineProperty(n,"prototype",{writable:!1})}(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var o=r.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=hi(hi({},t.definitions[a]||{}),o[a]),EP(a,o[a]);var c=Vv[Da][a];c&&EP(c,o[a]),cre()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var o=r[s],a=o.prefix,c=o.iconName,l=o.icon,u=l[2];t[a]||(t[a]={}),u.length>0&&u.forEach(function(f){"string"==typeof f&&(t[a][f]=l)}),t[a][c]=l}),t}}]),n}(),hre=[],Ig={},Bg={},BZe=Object.keys(Bg);function IP(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];var s=Ig[n]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(i))}),e}function T5(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=Ig[n]||[];r.forEach(function(s){s.apply(null,t)})}function pf(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return Bg[n]?Bg[n].apply(null,e):void 0}function BP(n){"fa"===n.prefix&&(n.prefix="fas");var e=n.iconName,t=n.prefix||Yd();if(e)return e=E5(t,e)||e,tre(fre.definitions,t,e)||tre(Wu.styles,t,e)}var fre=new IZe,kZe={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return hf?(T5("beforeI2svg",e),pf("pseudoElements2svg",e),pf("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===Mi.autoReplaceSvg&&(Mi.autoReplaceSvg=!0),Mi.observeMutations=!0,yZe(function(){HZe({autoReplaceSvgRoot:t}),T5("watch",e)})}},PZe={icon:function(e){if(null===e)return null;if("object"===HM(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:E5(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],i=XM(e[0]);return{prefix:i,iconName:E5(i,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(Mi.cssPrefix,"-"))>-1||e.match(nZe))){var r=YM(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||Yd(),iconName:E5(r.prefix,r.iconName)||r.iconName}}if("string"==typeof e){var s=Yd();return{prefix:s,iconName:E5(s,e)||e}}}},t4={noAuto:function(){Mi.autoReplaceSvg=!1,Mi.observeMutations=!1,T5("noAuto")},config:Mi,dom:kZe,parse:PZe,library:fre,findIconDefinition:BP,toHtml:jv},HZe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,i=void 0===t?La:t;(Object.keys(Wu.styles).length>0||Mi.autoFetchSvg)&&hf&&Mi.autoReplaceSvg&&t4.dom.i2svg({node:i})};function ZM(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return jv(i)})}}),Object.defineProperty(n,"node",{get:function(){if(hf){var i=La.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function RP(n){var e=n.icons,t=e.main,i=e.mask,r=n.prefix,s=n.iconName,o=n.transform,a=n.symbol,c=n.title,l=n.maskId,u=n.titleId,f=n.extra,p=n.watchable,g=void 0!==p&&p,_=i.found?i:t,y=_.width,w=_.height,C="fak"===r,x=[Mi.replacementClass,s?"".concat(Mi.cssPrefix,"-").concat(s):""].filter(function(k){return-1===f.classes.indexOf(k)}).filter(function(k){return""!==k||!!k}).concat(f.classes).join(" "),M={children:[],attributes:hi(hi({},f.attributes),{},{"data-prefix":r,"data-icon":s,class:x,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(y," ").concat(w)})},T=C&&!~f.classes.indexOf("fa-fw")?{width:"".concat(y/w*16*.0625,"em")}:{};g&&(M.attributes[M5]=""),c&&(M.children.push({tag:"title",attributes:{id:M.attributes["aria-labelledby"]||"title-".concat(u||Wv())},children:[c]}),delete M.attributes.title);var I=hi(hi({},M),{},{prefix:r,iconName:s,main:t,mask:i,maskId:l,transform:o,symbol:a,styles:hi(hi({},T),f.styles)}),F=i.found&&t.found?pf("generateAbstractMask",I)||{children:[],attributes:{}}:pf("generateAbstractIcon",I)||{children:[],attributes:{}},R=F.attributes;return I.children=F.children,I.attributes=R,a?function OZe(n){var t=n.iconName,i=n.children,r=n.attributes,s=n.symbol,o=!0===s?"".concat(n.prefix,"-").concat(Mi.cssPrefix,"-").concat(t):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:hi(hi({},r),{},{id:o}),children:i}]}]}(I):function zZe(n){var e=n.children,t=n.main,i=n.mask,r=n.attributes,s=n.styles,o=n.transform;if(bP(o)&&t.found&&!i.found){var l={x:t.width/t.height/2,y:.5};r.style=WM(hi(hi({},s),{},{"transform-origin":"".concat(l.x+o.x/16,"em ").concat(l.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}(I)}function dre(n){var e=n.content,t=n.width,i=n.height,r=n.transform,s=n.title,o=n.extra,a=n.watchable,c=void 0!==a&&a,l=hi(hi(hi({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});c&&(l[M5]="");var u=hi({},o.styles);bP(r)&&(u.transform=function mZe(n){var e=n.transform,t=n.width,r=n.height,s=void 0===r?16:r,o=n.startCentered,a=void 0!==o&&o,c="";return c+=a&&Gie?"translate(".concat(e.x/16-(void 0===t?16:t)/2,"em, ").concat(e.y/16-s/2,"em) "):a?"translate(calc(-50% + ".concat(e.x/16,"em), calc(-50% + ").concat(e.y/16,"em)) "):"translate(".concat(e.x/16,"em, ").concat(e.y/16,"em) "),(c+="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "))+"rotate(".concat(e.rotate,"deg) ")}({transform:r,startCentered:!0,width:t,height:i}),u["-webkit-transform"]=u.transform);var f=WM(u);f.length>0&&(l.style=f);var p=[];return p.push({tag:"span",attributes:l,children:[e]}),s&&p.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),p}function NZe(n){var e=n.content,t=n.title,i=n.extra,r=hi(hi(hi({},i.attributes),t?{title:t}:{}),{},{class:i.classes.join(" ")}),s=WM(i.styles);s.length>0&&(r.style=s);var o=[];return o.push({tag:"span",attributes:r,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}var FP=Wu.styles;function kP(n){var e=n[0],t=n[1],s=pP(n.slice(4),1)[0];return{found:!0,width:e,height:t,icon:Array.isArray(s)?{tag:"g",attributes:{class:"".concat(Mi.cssPrefix,"-").concat("duotone-group")},children:[{tag:"path",attributes:{class:"".concat(Mi.cssPrefix,"-").concat("secondary"),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(Mi.cssPrefix,"-").concat("primary"),fill:"currentColor",d:s[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:s}}}}var VZe={found:!1,width:512,height:512};function PP(n,e){var t=e;return"fa"===e&&null!==Mi.styleDefault&&(e=Yd()),new Promise(function(i,r){if(pf("missingIconAbstract"),"fa"===t){var o=lre(n)||{};n=o.iconName||n,e=o.prefix||e}if(n&&e&&FP[e]&&FP[e][n])return i(kP(FP[e][n]));(function UZe(n,e){!$ie&&!Mi.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))})(n,e),i(hi(hi({},VZe),{},{icon:Mi.showMissingIcons&&n&&pf("missingIconAbstract")||{}}))})}var pre=function(){},HP=Mi.measurePerformance&&OM&&OM.mark&&OM.measure?OM:{mark:pre,measure:pre},$v='FA "6.2.0"',zP_begin=function(e){return HP.mark("".concat($v," ").concat(e," begins")),function(){return function(e){HP.mark("".concat($v," ").concat(e," ends")),HP.measure("".concat($v," ").concat(e),"".concat($v," ").concat(e," begins"),"".concat($v," ").concat(e," ends"))}(e)}},JM=function(){};function mre(n){return"string"==typeof(n.getAttribute?n.getAttribute(M5):null)}function $Ze(n){return La.createElementNS("http://www.w3.org/2000/svg",n)}function qZe(n){return La.createElement(n)}function Are(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.ceFn,i=void 0===t?"svg"===n.tag?$Ze:qZe:t;if("string"==typeof n)return La.createTextNode(n);var r=i(n.tag);Object.keys(n.attributes||[]).forEach(function(o){r.setAttribute(o,n.attributes[o])});var s=n.children||[];return s.forEach(function(o){r.appendChild(Are(o,{ceFn:i}))}),r}var eS={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(r){t.parentNode.insertBefore(Are(r),t)}),null===t.getAttribute(M5)&&Mi.keepOriginalSource){var i=La.createComment(function KZe(n){var e=" ".concat(n.outerHTML," ");return"".concat(e,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~CP(t).indexOf(Mi.replacementClass))return eS.replace(e);var r=new RegExp("".concat(Mi.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var s=i[0].attributes.class.split(" ").reduce(function(a,c){return c===Mi.replacementClass||c.match(r)?a.toSvg.push(c):a.toNode.push(c),a},{toNode:[],toSvg:[]});i[0].attributes.class=s.toSvg.join(" "),0===s.toNode.length?t.removeAttribute("class"):t.setAttribute("class",s.toNode.join(" "))}var o=i.map(function(a){return jv(a)}).join("\n");t.setAttribute(M5,""),t.innerHTML=o}};function vre(n){n()}function _re(n,e){var t="function"==typeof e?e:JM;if(0===n.length)t();else{var i=vre;"async"===Mi.mutateApproach&&(i=Kd.requestAnimationFrame||vre),i(function(){var r=function jZe(){return!0===Mi.autoReplaceSvg?eS.replace:eS[Mi.autoReplaceSvg]||eS.replace}(),s=zP_begin("mutate");n.map(r),s(),t()})}}var OP=!1;function yre(){OP=!0}function NP(){OP=!1}var tS=null;function wre(n){if(Uie&&Mi.observeMutations){var e=n.treeCallback,t=void 0===e?JM:e,i=n.nodeCallback,r=void 0===i?JM:i,s=n.pseudoElementsCallback,o=void 0===s?JM:s,a=n.observeMutationsRoot,c=void 0===a?La:a;tS=new Uie(function(l){if(!OP){var u=Yd();Lg(l).forEach(function(f){if("childList"===f.type&&f.addedNodes.length>0&&!mre(f.addedNodes[0])&&(Mi.searchPseudoElements&&o(f.target),t(f.target)),"attributes"===f.type&&f.target.parentNode&&Mi.searchPseudoElements&&o(f.target.parentNode),"attributes"===f.type&&mre(f.target)&&~oZe.indexOf(f.attributeName))if("class"===f.attributeName&&function QZe(n){var e=n.getAttribute?n.getAttribute(_P):null,t=n.getAttribute?n.getAttribute(yP):null;return e&&t}(f.target)){var p=YM(CP(f.target)),_=p.iconName;f.target.setAttribute(_P,p.prefix||u),_&&f.target.setAttribute(yP,_)}else(function WZe(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(Mi.replacementClass)})(f.target)&&r(f.target)})}}),hf&&tS.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function YZe(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,r){var s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),t}function ZZe(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=void 0!==n.innerText?n.innerText.trim():"",r=YM(CP(n));return r.prefix||(r.prefix=Yd()),e&&t&&(r.prefix=e,r.iconName=t),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=function LZe(n,e){return(rre[n]||{})[e]}(r.prefix,n.innerText)||LP(r.prefix,SP(n.innerText))),!r.iconName&&Mi.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=n.firstChild.data)),r}function JZe(n){var e=Lg(n.attributes).reduce(function(r,s){return"class"!==r.name&&"style"!==r.name&&(r[s.name]=s.value),r},{}),t=n.getAttribute("title"),i=n.getAttribute("data-fa-title-id");return Mi.autoA11y&&(t?e["aria-labelledby"]="".concat(Mi.replacementClass,"-title-").concat(i||Wv()):(e["aria-hidden"]="true",e.focusable="false")),e}function Cre(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},t=ZZe(n),i=t.iconName,r=t.prefix,s=t.rest,o=JZe(n),a=IP("parseNodeAttributes",{},n),c=e.styleParser?YZe(n):[];return hi({iconName:i,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:K0,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:c,attributes:o}},a)}var tJe=Wu.styles;function bre(n){var e="nest"===Mi.autoReplaceSvg?Cre(n,{styleParser:!1}):Cre(n);return~e.extra.classes.indexOf(qie)?pf("generateLayersText",n,e):pf("generateSvgReplacementMutation",n,e)}var Zd=new Set;function xre(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!hf)return Promise.resolve();var t=La.documentElement.classList,i=function(f){return t.add("".concat(jie,"-").concat(f))},r=function(f){return t.remove("".concat(jie,"-").concat(f))},s=Mi.autoFetchSvg?Zd:wP.map(function(u){return"fa-".concat(u)}).concat(Object.keys(tJe));s.includes("fa")||s.push("fa");var o=[".".concat(qie,":not([").concat(M5,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(M5,"])")})).join(", ");if(0===o.length)return Promise.resolve();var a=[];try{a=Lg(n.querySelectorAll(o))}catch{}if(!(a.length>0))return Promise.resolve();i("pending"),r("complete");var c=zP_begin("onTree"),l=a.reduce(function(u,f){try{var p=bre(f);p&&u.push(p)}catch(g){$ie||"MissingIcon"===g.name&&console.error(g)}return u},[]);return new Promise(function(u,f){Promise.all(l).then(function(p){_re(p,function(){i("active"),i("complete"),r("pending"),"function"==typeof e&&e(),c(),u()})}).catch(function(p){c(),f(p)})})}function nJe(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;bre(n).then(function(t){t&&_re([t],e)})}wP.map(function(n){Zd.add("fa-".concat(n))}),Object.keys(Ov[Da]).map(Zd.add.bind(Zd)),Object.keys(Ov[H1]).map(Zd.add.bind(Zd)),Zd=Hv(Zd);var rJe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.transform,r=void 0===i?K0:i,s=t.symbol,o=void 0!==s&&s,a=t.mask,c=void 0===a?null:a,l=t.maskId,u=void 0===l?null:l,f=t.title,p=void 0===f?null:f,g=t.titleId,_=void 0===g?null:g,y=t.classes,w=void 0===y?[]:y,C=t.attributes,x=void 0===C?{}:C,M=t.styles,T=void 0===M?{}:M;if(e){var I=e.prefix,F=e.iconName,P=e.icon;return ZM(hi({type:"icon"},e),function(){return T5("beforeDOMElementCreation",{iconDefinition:e,params:t}),Mi.autoA11y&&(p?x["aria-labelledby"]="".concat(Mi.replacementClass,"-title-").concat(_||Wv()):(x["aria-hidden"]="true",x.focusable="false")),RP({icons:{main:kP(P),mask:c?kP(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:I,iconName:F,transform:hi(hi({},K0),r),symbol:o,title:p,maskId:u,titleId:_,extra:{attributes:x,styles:T,classes:w}})})}},sJe={mixout:function(){return{icon:(n=rJe,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(e||{}).icon?e:BP(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:BP(r||{})),n(i,hi(hi({},t),{},{mask:r}))})};var n},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=xre,t.nodeCallback=nJe,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,s=t.callback;return xre(void 0===i?La:i,void 0===s?function(){}:s)},e.generateSvgReplacementMutation=function(t,i){var r=i.iconName,s=i.title,o=i.titleId,a=i.prefix,c=i.transform,l=i.symbol,u=i.mask,f=i.maskId,p=i.extra;return new Promise(function(g,_){Promise.all([PP(r,a),u.iconName?PP(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(y){var w=pP(y,2);g([t,RP({icons:{main:w[0],mask:w[1]},prefix:a,iconName:r,transform:c,symbol:l,maskId:f,title:s,titleId:o,extra:p,watchable:!0})])}).catch(_)})},e.generateAbstractIcon=function(t){var l,i=t.children,r=t.attributes,s=t.main,o=t.transform,c=WM(t.styles);return c.length>0&&(r.style=c),bP(o)&&(l=pf("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),i.push(l||s.icon),{children:i,attributes:r}}}},oJe={mixout:function(){return{layer:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.classes,s=void 0===r?[]:r;return ZM({type:"layer"},function(){T5("beforeDOMElementCreation",{assembler:t,params:i});var o=[];return t(function(a){Array.isArray(a)?a.map(function(c){o=o.concat(c.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(Mi.cssPrefix,"-layers")].concat(Hv(s)).join(" ")},children:o}]})}}}},aJe={mixout:function(){return{counter:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.title,s=void 0===r?null:r,o=i.classes,a=void 0===o?[]:o,c=i.attributes,l=void 0===c?{}:c,u=i.styles,f=void 0===u?{}:u;return ZM({type:"counter",content:t},function(){return T5("beforeDOMElementCreation",{content:t,params:i}),NZe({content:t.toString(),title:s,extra:{attributes:l,styles:f,classes:["".concat(Mi.cssPrefix,"-layers-counter")].concat(Hv(a))}})})}}}},cJe={mixout:function(){return{text:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.transform,s=void 0===r?K0:r,o=i.title,a=void 0===o?null:o,c=i.classes,l=void 0===c?[]:c,u=i.attributes,f=void 0===u?{}:u,p=i.styles,g=void 0===p?{}:p;return ZM({type:"text",content:t},function(){return T5("beforeDOMElementCreation",{content:t,params:i}),dre({content:t,transform:hi(hi({},K0),s),title:a,extra:{attributes:f,styles:g,classes:["".concat(Mi.cssPrefix,"-layers-text")].concat(Hv(l))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var r=i.title,s=i.transform,o=i.extra,a=null,c=null;if(Gie){var l=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();a=u.width/l,c=u.height/l}return Mi.autoA11y&&!r&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,dre({content:t.innerHTML,width:a,height:c,transform:s,title:r,extra:o,watchable:!0})])}}},lJe=new RegExp('"',"ug"),Mre=[1105920,1112319];function Sre(n,e){var t="".concat("data-fa-pseudo-element-pending").concat(e.replace(":","-"));return new Promise(function(i,r){if(null!==n.getAttribute(t))return i();var o=Lg(n.children).filter(function(P){return P.getAttribute(vP)===e})[0],a=Kd.getComputedStyle(n,e),c=a.getPropertyValue("font-family").match(iZe),l=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!c)return n.removeChild(o),i();if(c&&"none"!==u&&""!==u){var f=a.getPropertyValue("content"),p=~["Sharp"].indexOf(c[2])?H1:Da,g=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?Nv[p][c[2].toLowerCase()]:rZe[p][l],_=function uJe(n){var e=n.replace(lJe,""),t=function bZe(n,e){var r,t=n.length,i=n.charCodeAt(e);return i>=55296&&i<=56319&&t>e+1&&(r=n.charCodeAt(e+1))>=56320&&r<=57343?1024*(i-55296)+r-56320+65536:i}(e,0),i=t>=Mre[0]&&t<=Mre[1],r=2===e.length&&e[0]===e[1];return{value:SP(r?e[0]:e),isSecondary:i||r}}(f),y=_.value,w=_.isSecondary,C=c[0].startsWith("FontAwesome"),x=LP(g,y),M=x;if(C){var T=function DZe(n){var e=ore[n],t=LP("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}(y);T.iconName&&T.prefix&&(x=T.iconName,g=T.prefix)}if(!x||w||o&&o.getAttribute(_P)===g&&o.getAttribute(yP)===M)i();else{n.setAttribute(t,M),o&&n.removeChild(o);var I=function eJe(){return{iconName:null,title:null,titleId:null,prefix:null,transform:K0,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),F=I.extra;F.attributes[vP]=e,PP(x,g).then(function(P){var R=RP(hi(hi({},I),{},{icons:{main:P,mask:{prefix:null,iconName:null,rest:[]}},prefix:g,iconName:M,extra:F,watchable:!0})),k=La.createElement("svg");"::before"===e?n.insertBefore(k,n.firstChild):n.appendChild(k),k.outerHTML=R.map(function(W){return jv(W)}).join("\n"),n.removeAttribute(t),i()}).catch(r)}}else i()})}function hJe(n){return Promise.all([Sre(n,"::before"),Sre(n,"::after")])}function fJe(n){return!(n.parentNode===document.head||~eZe.indexOf(n.tagName.toUpperCase())||n.getAttribute(vP)||n.parentNode&&"svg"===n.parentNode.tagName)}function Ere(n){if(hf)return new Promise(function(e,t){var i=Lg(n.querySelectorAll("*")).filter(fJe).map(hJe),r=zP_begin("searchPseudoElements");yre(),Promise.all(i).then(function(){r(),NP(),e()}).catch(function(){r(),NP(),t()})})}var dJe={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=Ere,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node;Mi.searchPseudoElements&&Ere(void 0===i?La:i)}}},Tre=!1,pJe={mixout:function(){return{dom:{unwatch:function(){yre(),Tre=!0}}}},hooks:function(){return{bootstrap:function(){wre(IP("mutationObserverCallbacks",{}))},noAuto:function(){!function XZe(){!tS||tS.disconnect()}()},watch:function(t){var i=t.observeMutationsRoot;Tre?NP():wre(IP("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},Lre=function(e){return e.toLowerCase().split(" ").reduce(function(i,r){var s=r.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&"h"===a)return i.flipX=!0,i;if(o&&"v"===a)return i.flipY=!0,i;if(a=parseFloat(a),isNaN(a))return i;switch(o){case"grow":i.size=i.size+a;break;case"shrink":i.size=i.size-a;break;case"left":i.x=i.x-a;break;case"right":i.x=i.x+a;break;case"up":i.y=i.y-a;break;case"down":i.y=i.y+a;break;case"rotate":i.rotate=i.rotate+a}return i},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},gJe={mixout:function(){return{parse:{transform:function(t){return Lre(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-transform");return r&&(t.transform=Lre(r)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,r=t.transform,o=t.iconWidth,a={transform:"translate(".concat(t.containerWidth/2," 256)")},c="translate(".concat(32*r.x,", ").concat(32*r.y,") "),l="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),u="rotate(".concat(r.rotate," 0 0)"),g={outer:a,inner:{transform:"".concat(c," ").concat(l," ").concat(u)},path:{transform:"translate(".concat(o/2*-1," -256)")}};return{tag:"g",attributes:hi({},g.outer),children:[{tag:"g",attributes:hi({},g.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:hi(hi({},i.icon.attributes),g.path)}]}]}}}},VP={x:0,y:0,width:"100%",height:"100%"};function Dre(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}var AJe={hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-mask"),s=r?YM(r.split(" ").map(function(o){return o.trim()})):{prefix:null,iconName:null,rest:[]};return s.prefix||(s.prefix=Yd()),t.mask=s,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var n,i=t.children,r=t.attributes,s=t.main,o=t.mask,a=t.maskId,u=s.icon,p=o.icon,g=function gZe(n){var e=n.transform,i=n.iconWidth,r={transform:"translate(".concat(n.containerWidth/2," 256)")},s="translate(".concat(32*e.x,", ").concat(32*e.y,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(s," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:t.transform,containerWidth:o.width,iconWidth:s.width}),_={tag:"rect",attributes:hi(hi({},VP),{},{fill:"white"})},y=u.children?{children:u.children.map(Dre)}:{},w={tag:"g",attributes:hi({},g.inner),children:[Dre(hi({tag:u.tag,attributes:hi(hi({},u.attributes),g.path)},y))]},C={tag:"g",attributes:hi({},g.outer),children:[w]},x="mask-".concat(a||Wv()),M="clip-".concat(a||Wv()),T={tag:"mask",attributes:hi(hi({},VP),{},{id:x,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[_,C]},I={tag:"defs",children:[{tag:"clipPath",attributes:{id:M},children:(n=p,"g"===n.tag?n.children:[n])},T]};return i.push(I,{tag:"rect",attributes:hi({fill:"currentColor","clip-path":"url(#".concat(M,")"),mask:"url(#".concat(x,")")},VP)}),{children:i,attributes:r}}}},vJe={provides:function(e){var t=!1;Kd.matchMedia&&(t=Kd.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:hi(hi({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=hi(hi({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:hi(hi({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:hi(hi({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:hi(hi({},o),{},{values:"1;0;1;1;0;1;"})}),i.push(a),i.push({tag:"path",attributes:hi(hi({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:hi(hi({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:hi(hi({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:hi(hi({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},yJe=[vZe,sJe,oJe,aJe,cJe,dJe,pJe,gJe,AJe,vJe,{hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-symbol");return t.symbol=null!==r&&(""===r||r),t}}}}];!function RZe(n,e){var t=e.mixoutsTo;hre=n,Ig={},Object.keys(Bg).forEach(function(i){-1===BZe.indexOf(i)&&delete Bg[i]}),hre.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(o){"function"==typeof r[o]&&(t[o]=r[o]),"object"===HM(r[o])&&Object.keys(r[o]).forEach(function(a){t[o]||(t[o]={}),t[o][a]=r[o][a]})}),i.hooks){var s=i.hooks();Object.keys(s).forEach(function(o){Ig[o]||(Ig[o]=[]),Ig[o].push(s[o])})}i.provides&&i.provides(Bg)})}(yJe,{mixoutsTo:t4});var wJe=t4.parse,CJe=t4.icon;const bJe=["*"],SJe=n=>{const e={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-inverse":n.inverse,"fa-layers-counter":n.counter,"fa-flip-horizontal":"horizontal"===n.flip||"both"===n.flip,"fa-flip-vertical":"vertical"===n.flip||"both"===n.flip,[`fa-${n.size}`]:null!==n.size,[`fa-rotate-${n.rotate}`]:null!==n.rotate,[`fa-pull-${n.pull}`]:null!==n.pull,[`fa-stack-${n.stackItemSize}`]:null!=n.stackItemSize};return Object.keys(e).map(t=>e[t]?t:null).filter(t=>t)};let LJe=(()=>{class n{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DJe=(()=>{class n{constructor(){this.definitions={}}addIcons(...t){for(const i of t){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(const r of i.icon[2])"string"==typeof r&&(this.definitions[i.prefix][r]=i)}}addIconPacks(...t){for(const i of t){const r=Object.keys(i).map(s=>i[s]);this.addIcons(...r)}}getIconDefinition(t,i){return t in this.definitions&&i in this.definitions[t]?this.definitions[t][i]:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IJe=(()=>{class n{constructor(){this.stackItemSize="1x"}ngOnChanges(t){if("size"in t)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[yr]}),n})(),BJe=(()=>{class n{constructor(t,i){this.renderer=t,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(t){"size"in t&&(null!=t.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${t.size.currentValue}`),null!=t.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${t.size.previousValue}`))}}return n.\u0275fac=function(t){return new(t||n)(U(Yo),U(fn))},n.\u0275cmp=Rn({type:n,selectors:[["fa-stack"]],inputs:{size:"size"},features:[yr],ngContentSelectors:bJe,decls:1,vars:0,template:function(t,i){1&t&&(Z1(),Bo(0))},encapsulation:2}),n})(),UP=(()=>{class n{constructor(t,i,r,s,o){this.sanitizer=t,this.config=i,this.iconLibrary=r,this.stackItem=s,this.classes=[],null!=o&&null==s&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(t){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let i=null;if(i=this.icon??this.config.fallbackIcon,t){const r=this.findIconDefinition(i);if(null!=r){const s=this.buildParams();this.renderIcon(r,s)}}}render(){this.ngOnChanges({})}findIconDefinition(t){const i=((n,e)=>(n=>void 0!==n.prefix&&void 0!==n.iconName)(n)?n:Array.isArray(n)&&2===n.length?{prefix:n[0],iconName:n[1]}:"string"==typeof n?{prefix:e,iconName:n}:void 0)(t,this.config.defaultPrefix);return"icon"in i?i:this.iconLibrary.getIconDefinition(i.prefix,i.iconName)??((n=>{throw new Error(`Could not find icon with iconName=${n.iconName} and prefix=${n.prefix} in the icon library.`)})(i),null)}buildParams(){const t={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},i="string"==typeof this.transform?wJe.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...SJe(t),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(t,i){const r=CJe(t,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(r.html.join("\n"))}}return n.\u0275fac=function(t){return new(t||n)(U(w8),U(LJe),U(DJe),U(IJe,8),U(BJe,8))},n.\u0275cmp=Rn({type:n,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(t,i){2&t&&(g8("innerHTML",i.renderedIconHTML,V3),ds("title",i.title))},inputs:{icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[yr],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),RJe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=oi({type:n}),n.\u0275inj=wn({}),n})(),Ire=(()=>{class n{constructor(t,i){this.appService=t,this.router=i,this.year=(new Date).getFullYear(),this.discord=this.appService.discord,this.github=this.appService.github,this.youtube=this.appService.youtube,this.patreon=this.appService.patreon,this.instagram=this.appService.instagram,this.faDiscord=PM,this.faGithub=fP,this.faYoutube=dP,this.faPatreon=uP,this.faInstagram=hP,this.onStart=!0}}return n.\u0275fac=function(t){return new(t||n)(U(Fo),U(h1))},n.\u0275cmp=Rn({type:n,selectors:[["app-footer"]],decls:24,vars:9,consts:[["fxLayout","column","fxLayoutAlign","center center"],[2,"font-size","1.3em","margin-bottom","24px"],["target","_blank",1,"larger-link",2,"background","var(--primary-color)",3,"href"],[3,"icon"],[2,"font-size","1em","margin-bottom","24px"],["target","_blank",1,"larger-link",2,"background","#FF0000",3,"href"],["target","_blank",1,"larger-link",2,"background","rgb(240 0 117)",3,"href"],["target","_blank",1,"larger-link",3,"href"]],template:function(t,i){1&t&&(H(0,"footer")(1,"mat-toolbar",0)(2,"div",1),V(3,"Join us on our "),H(4,"a",2),Ke(5,"fa-icon",3),V(6," Discord "),N()(),H(7,"div",4),V(8," In cooperation with 2_plings "),H(9,"a",5),Ke(10,"fa-icon",3),V(11," Youtube "),N(),V(12," or "),H(13,"a",6),Ke(14,"fa-icon",3),V(15," Instagram "),N()(),H(16,"div"),V(17," Everything is free and open source. See "),H(18,"a",7),Ke(19,"fa-icon",3),V(20," GitHub "),N()(),H(21,"div"),V(22),Ke(23,"br"),N()()()),2&t&&(ee(4),El("href",i.discord,kc),ee(1),Se("icon",i.faDiscord),ee(4),El("href",i.youtube,kc),ee(1),Se("icon",i.faYoutube),ee(3),El("href",i.instagram,kc),ee(1),Se("icon",i.faInstagram),ee(4),El("href",i.github,kc),ee(1),Se("icon",i.faGithub),ee(3),Kn(" PassiveOpen.com 2019 - ",i.year,""))},dependencies:[tSe,E7,Nh,UP],styles:["footer[_ngcontent-%COMP%]{z-index:1000;position:relative}footer[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{padding:26px 0 80px;font-size:.8rem;opacity:.8;font-weight:400;height:initial}"]}),n})();function gf(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Bre(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var GP,V4,Tc,m1,G4,qP,KP,Ore,Ure,zg,n_,c,l,u,f,p,g,n,e,t,i,r,s,o,a,_,n4={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Rg={duration:.5,overwrite:!1,delay:0},U4=1e8,ua=1e-8,QP=2*Math.PI,FJe=QP/4,kJe=0,Rre=Math.sqrt,PJe=Math.cos,HJe=Math.sin,f2=function(e){return"string"==typeof e},z1=function(e){return"function"==typeof e},mf=function(e){return"number"==typeof e},WP=function(e){return typeof e>"u"},X0=function(e){return"object"==typeof e},_3=function(e){return!1!==e},Fre=function(){return typeof window<"u"},nS=function(e){return z1(e)||f2(e)},kre="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},rl=Array.isArray,jP=/(?:-?\.?\d|\.)+/gi,Pre=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Fg=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,$P=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Hre=/[+-]=-?[.\d]+/,zre=/[^,'"\[\]\s]+/gi,zJe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,r4={},iS={},Nre=function(e){return(iS=D5(e,r4))&&a4},XP=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},rS=function(e,t){return!t&&console.warn(e)},Vre=function(e,t){return e&&(r4[e]=t)&&iS&&(iS[e]=t)||r4},qv=function(){return 0},OJe={suppressEvents:!0,isStart:!0},Kv={suppressEvents:!0},YP={},Jd=[],ZP={},s4={},JP={},Gre=30,sS=[],eH="",tH=function(e){var i,r,t=e[0];if(X0(t)||z1(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=sS.length;r--&&!sS[r].targetTest(t););i=sS[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new mse(e[r],i)))||e.splice(r,1);return e},L5=function(e){return e._gsap||tH(j4(e))[0]._gsap},Qre=function(e,t,i){return(i=e[t])&&z1(i)?e[t]():WP(i)&&e.getAttribute&&e.getAttribute(t)||i},y3=function(e,t){return(e=e.split(",")).forEach(t)||e},rc=function(e){return Math.round(1e5*e)/1e5||0},R2=function(e){return Math.round(1e7*e)/1e7||0},kg=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===i?e+r:"-"===i?e-r:"*"===i?e*r:e/r},NJe=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},oS=function(){var i,r,e=Jd.length,t=Jd.slice(0);for(ZP={},Jd.length=0,i=0;i<e;i++)(r=t[i])&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Wre=function(e,t,i,r){Jd.length&&oS(),e.render(t,i,r||V4),Jd.length&&oS()},jre=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(zre).length<2?t:f2(e)?e.trim():e},$re=function(e){return e},Q4=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},D5=function(e,t){for(var i in t)e[i]=t[i];return e},qre=function n(e,t){for(var i in t)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=X0(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},aS=function(e,t){var r,i={};for(r in e)r in t||(i[r]=e[r]);return i},Xv=function(e){var t=e.parent||m1,i=e.keyframes?function(e){return function(t,i){for(var r in i)r in t||"duration"===r&&e||"ease"===r||(t[r]=i[r])}}(rl(e.keyframes)):Q4;if(_3(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},Kre=function(e,t,i,r,s){void 0===i&&(i="_first"),void 0===r&&(r="_last");var a,o=e[r];if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},cS=function(e,t,i,r){void 0===i&&(i="_first"),void 0===r&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Af=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},I5=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},GJe=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},nH=function(e,t,i,r){return e._startAt&&(V4?e._startAt.revert(Kv):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},QJe=function n(e){return!e||e._ts&&n(e.parent)},Xre=function(e){return e._repeat?Pg(e._tTime,e=e.duration()+e._rDelay)*e:0},Pg=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},lS=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},uS=function(e){return e._end=R2(e._start+(e._tDur/Math.abs(e._ts||e._rts||ua)||0))},hS=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=R2(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),uS(e),i._dirty||I5(i,e)),e},Yre=function(e,t){var i;if((t._time||t._initted&&!t._dur)&&(i=lS(e.rawTime(),t),(!t._dur||Zv(0,t.totalDuration(),i)-t._tTime>ua)&&t.render(i,!0)),I5(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-ua}},Y0=function(e,t,i,r){return t.parent&&Af(t),t._start=R2((mf(i)?i:i||e!==m1?W4(e,i,t):e._time)+t._delay),t._end=R2(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Kre(e,t,"_first","_last",e._sort?"_start":0),iH(t)||(e._recent=t),r||Yre(e,t),e._ts<0&&hS(e,e._tTime),e},Zre=function(e,t){return(r4.ScrollTrigger||XP("scrollTrigger",t))&&r4.ScrollTrigger.create(t,e)},Jre=function(e,t,i,r){return fH(e,t),e._initted?!i&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&Ure!==o4.frame?(Jd.push(e),e._lazy=[t,r],1):void 0:1},WJe=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},iH=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Hg=function(e,t,i,r){var s=e._repeat,o=R2(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:R2(o*(s+1)+e._rDelay*s):o,a>0&&!r?hS(e,e._tTime=e._tDur*a):e.parent&&uS(e),i||I5(e.parent,e),e},ese=function(e){return e instanceof w3?I5(e):Hg(e,e._dur)},qJe={_start:0,endTime:qv,totalDuration:qv},W4=function n(e,t,i){var a,c,l,r=e.labels,s=e._recent||qJe,o=e.duration()>=U4?s.endTime(!1):e._dur;return f2(t)&&(isNaN(t)||t in r)?(c=t.charAt(0),l="%"===t.substr(-1),a=t.indexOf("="),"<"===c||">"===c?(a>=0&&(t=t.replace(/=/,"")),("<"===c?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(l?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(c=parseFloat(t.charAt(a-1)+t.substr(a+1)),l&&i&&(c=c/100*(rl(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+c:o+c)):null==t?o:+t},Yv=function(e,t,i){var a,c,r=mf(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s];if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,c=i;c&&!("immediateRender"in a);)a=c.vars.defaults||{},c=_3(c.vars.inherit)&&c.parent;o.immediateRender=_3(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new jc(t[0],o,t[s+1])},e6=function(e,t){return e||0===e?t(e):t},Zv=function(e,t,i){return i<e?e:i>t?t:i},sl=function(e,t){return f2(e)&&(t=zJe.exec(e))?t[1]:""},rH=[].slice,tse=function(e,t){return e&&X0(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&X0(e[0]))&&!e.nodeType&&e!==G4},j4=function(e,t,i){return Tc&&!t&&Tc.selector?Tc.selector(e):!f2(e)||i||!qP&&Og()?rl(e)?function(e,t,i){return void 0===i&&(i=[]),e.forEach(function(r){var s;return f2(r)&&!t||tse(r,1)?(s=i).push.apply(s,j4(r)):i.push(r)})||i}(e,i):tse(e)?rH.call(e,0):e?[e]:[]:rH.call((t||KP).querySelectorAll(e),0)},sH=function(e){return e=j4(e)[0]||rS("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return j4(t,i.querySelectorAll?i:i===e?rS("Invalid scope")||KP.createElement("div"):e)}},nse=function(e){return e.sort(function(){return.5-Math.random()})},ise=function(e){if(z1(e))return e;var t=X0(e)?e:{each:e},i=B5(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,c=isNaN(r)||a,l=t.axis,u=r,f=r;return f2(r)?u=f={center:.5,edges:.5,end:1}[r]||0:!a&&c&&(u=r[0],f=r[1]),function(p,g,_){var C,x,M,T,I,F,P,R,k,y=(_||t).length,w=o[y];if(!w){if(!(k="auto"===t.grid?0:(t.grid||[1,U4])[1])){for(P=-U4;P<(P=_[k++].getBoundingClientRect().left)&&k<y;);k--}for(w=o[y]=[],C=c?Math.min(k,y)*u-.5:r%k,x=k===U4?0:c?y*f/k-.5:r/k|0,P=0,R=U4,F=0;F<y;F++)M=F%k-C,T=x-(F/k|0),w[F]=I=l?Math.abs("y"===l?T:M):Rre(M*M+T*T),I>P&&(P=I),I<R&&(R=I);"random"===r&&nse(w),w.max=P-R,w.min=R,w.v=y=(parseFloat(t.amount)||parseFloat(t.each)*(k>y?y-1:l?"y"===l?y/k:k:Math.max(k,y/k))||0)*("edges"===r?-1:1),w.b=y<0?s-y:s,w.u=sl(t.amount||t.each)||0,i=i&&y<0?dse(i):i}return y=(w[p]-w.min)/w.max||0,R2(w.b+(i?i(y):y)*w.v)+w.u}},oH=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=R2(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(mf(i)?0:sl(i))}},rse=function(e,t){var r,s,i=rl(e);return!i&&X0(e)&&(r=i=e.radius||U4,e.values?(e=j4(e.values),(s=!mf(e[0]))&&(r*=r)):e=oH(e.increment)),e6(t,i?z1(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var p,g,a=parseFloat(s?o.x:o),c=parseFloat(s?o.y:0),l=U4,u=0,f=e.length;f--;)(p=s?(p=e[f].x-a)*p+(g=e[f].y-c)*g:Math.abs(e[f]-a))<l&&(l=p,u=f);return u=!r||l<=r?e[u]:o,s||u===o||mf(o)?u:u+sl(o)}:oH(e))},sse=function(e,t,i,r){return e6(rl(e)?!t:!0===i?!!(i=0):!r,function(){return rl(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+.99*i))/i)*i*r)/r})},ose=function(e,t,i){return e6(i,function(r){return e[~~t(r)]})},Jv=function(e){for(var r,s,o,a,t=0,i="";~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a="["===e.charAt(r+7),s=e.substr(r+7,o-r-7).match(a?zre:jP),i+=e.substr(t,r-t)+sse(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},ase=function(e,t,i,r,s){var o=t-e,a=r-i;return e6(s,function(c){return i+((c-e)/o*a||0)})},cse=function(e,t,i){var o,a,c,r=e.labels,s=U4;for(o in r)(a=r[o]-t)<0==!!i&&a&&s>(a=Math.abs(a))&&(c=o,s=a);return c},$4=function(e,t,i){var c,l,u,r=e.vars,s=r[t],o=Tc,a=e._ctx;if(s)return c=r[t+"Params"],l=r.callbackScope||e,i&&Jd.length&&oS(),a&&(Tc=a),u=c?s.apply(l,c):s.call(l),Tc=o,u},e_=function(e){return Af(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&$4(e,"onInterrupt"),e},iet=function(e){var t=(e=!e.name&&e.default||e).name,i=z1(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:qv,render:gH,add:uH,kill:yet,modifier:_et,rawVars:0},o={targetTest:0,get:0,getSetter:pH,aliases:{},register:0};if(Og(),e!==r){if(s4[t])return;Q4(r,Q4(aS(e,s),o)),D5(r.prototype,D5(s,aS(e,o))),s4[r.prop=t]=r,e.targetTest&&(sS.push(r),YP[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Vre(t,r),e.register&&e.register(a4,r,C3)},ha=255,t_={aqua:[0,ha,ha],lime:[0,ha,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ha],navy:[0,0,128],white:[ha,ha,ha],olive:[128,128,0],yellow:[ha,ha,0],orange:[ha,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ha,0,0],pink:[ha,192,203],cyan:[0,ha,ha],transparent:[ha,ha,ha,0]},aH=function(e,t,i){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)*ha+.5|0},lse=function(e,t,i){var s,o,a,c,l,u,f,p,g,_,r=e?mf(e)?[e>>16,e>>8&ha,e&ha]:0:t_.black;if(!r){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),t_[e])r=t_[e];else if("#"===e.charAt(0)){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(r=parseInt(e.substr(1,6),16))>>16,r>>8&ha,r&ha,parseInt(e.substr(7),16)/255];r=[(e=parseInt(e.substr(1),16))>>16,e>>8&ha,e&ha]}else if("hsl"===e.substr(0,3))if(r=_=e.match(jP),t){if(~e.indexOf("="))return r=e.match(Pre),i&&r.length<4&&(r[3]=1),r}else c=+r[0]%360/360,l=+r[1]/100,s=2*(u=+r[2]/100)-(o=u<=.5?u*(l+1):u+l-u*l),r.length>3&&(r[3]*=1),r[0]=aH(c+1/3,s,o),r[1]=aH(c,s,o),r[2]=aH(c-1/3,s,o);else r=e.match(jP)||t_.transparent;r=r.map(Number)}return t&&!_&&(s=r[0]/ha,o=r[1]/ha,a=r[2]/ha,u=((f=Math.max(s,o,a))+(p=Math.min(s,o,a)))/2,f===p?c=l=0:(g=f-p,l=u>.5?g/(2-f-p):g/(f+p),c=f===s?(o-a)/g+(o<a?6:0):f===o?(a-s)/g+2:(s-o)/g+4,c*=60),r[0]=~~(c+.5),r[1]=~~(100*l+.5),r[2]=~~(100*u+.5)),i&&r.length<4&&(r[3]=1),r},use=function(e){var t=[],i=[],r=-1;return e.split(t6).forEach(function(s){var o=s.match(Fg)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},hse=function(e,t,i){var c,l,u,f,r="",s=(e+r).match(t6),o=t?"hsla(":"rgba(",a=0;if(!s)return e;if(s=s.map(function(p){return(p=lse(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),i&&(u=use(e),(c=i.c).join(r)!==u.c.join(r)))for(f=(l=e.replace(t6,"1").split(Fg)).length-1;a<f;a++)r+=l[a]+(~c.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!l)for(f=(l=e.split(t6)).length-1;a<f;a++)r+=l[a]+s[a];return r+l[f]},t6=function(){var e,n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in t_)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),ret=/hsl[a]?\(/,fse=function(e){var i,t=e.join(" ");if(t6.lastIndex=0,t6.test(t))return i=ret.test(t),e[1]=hse(e[1],i),e[0]=hse(e[0],i,use(e[1])),!0},o4=(n=Date.now,e=500,t=33,i=n(),r=i,o=s=1e3/240,_=function y(w){var M,T,I,F,C=n()-r,x=!0===w;if(C>e&&(i+=C-t),((M=(I=(r+=C)-i)-o)>0||x)&&(F=++f.frame,p=I-1e3*f.time,f.time=I/=1e3,o+=M+(M>=s?4:s-M),T=1),x||(c=l(y)),T)for(g=0;g<a.length;g++)a[g](I,p,F,w)},f={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(w){return p/(1e3/(w||60))},wake:function(){Ore&&(!qP&&Fre()&&(G4=qP=window,KP=G4.document||{},r4.gsap=a4,(G4.gsapVersions||(G4.gsapVersions=[])).push(a4.version),Nre(iS||G4.GreenSockGlobals||!G4.gsap&&G4||{}),u=G4.requestAnimationFrame),c&&f.sleep(),l=u||function(w){return setTimeout(w,o-1e3*f.time+1|0)},n_=1,_(2))},sleep:function(){(u?G4.cancelAnimationFrame:clearTimeout)(c),n_=0,l=qv},lagSmoothing:function(w,C){e=w||1/ua,t=Math.min(C,e,0)},fps:function(w){o=1e3*f.time+(s=1e3/(w||240))},add:function(w,C,x){var M=C?function(T,I,F,P){w(T,I,F,P),f.remove(M)}:w;return f.remove(w),a[x?"unshift":"push"](M),Og(),M},remove:function(w,C){~(C=a.indexOf(w))&&a.splice(C,1)&&g>=C&&g--},_listeners:a=[]}),Og=function(){return!n_&&o4.wake()},Os={},set=/^[\d.\-M][\d.\-,\s]/,oet=/["']/g,aet=function(e){for(var a,c,l,t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length;s<o;s++)c=i[s],a=s!==o-1?c.lastIndexOf(","):c.length,l=c.substr(0,a),t[r]=isNaN(l)?l.replace(oet,"").trim():+l,r=c.substr(a+1).trim();return t},dse=function(e){return function(t){return 1-e(1-t)}},pse=function n(e,t){for(var r,i=e._first;i;)i instanceof w3?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},B5=function(e,t){return e&&(z1(e)?e:Os[e]||function(e){var t=(e+"").split("("),i=Os[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[aet(t[1])]:function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)}(e).split(",").map(jre)):Os._CE&&set.test(e)?Os._CE("",e):i}(e))||t},R5=function(e,t,i,r){void 0===i&&(i=function(c){return 1-t(1-c)}),void 0===r&&(r=function(c){return c<.5?t(2*c)/2:1-t(2*(1-c))/2});var o,s={easeIn:t,easeOut:i,easeInOut:r};return y3(e,function(a){for(var c in Os[a]=r4[a]=s,Os[o=a.toLowerCase()]=i,s)Os[o+("easeIn"===c?".in":"easeOut"===c?".out":".inOut")]=Os[a+"."+c]=s[c]}),s},gse=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},cH=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/QP*(Math.asin(1/r)||0),a=function(u){return 1===u?1:r*Math.pow(2,-10*u)*HJe((u-o)*s)+1},c="out"===e?a:"in"===e?function(l){return 1-a(1-l)}:gse(a);return s=QP/s,c.config=function(l,u){return n(e,l,u)},c},lH=function n(e,t){void 0===t&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r="out"===e?i:"in"===e?function(s){return 1-i(1-s)}:gse(i);return r.config=function(s){return n(e,s)},r};y3("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;R5(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(2*i,t)/2:1-Math.pow(2*(1-i),t)/2})}),Os.Linear.easeNone=Os.none=Os.Linear.easeIn,R5("Elastic",cH("in"),cH("out"),cH()),function(n,e){var s=function(a){return a<.36363636363636365?n*a*a:a<.7272727272727273?n*Math.pow(a-1.5/e,2)+.75:a<.9090909090909092?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};R5("Bounce",function(o){return 1-s(1-o)},s)}(7.5625,2.75),R5("Expo",function(n){return n?Math.pow(2,10*(n-1)):0}),R5("Circ",function(n){return-(Rre(1-n*n)-1)}),R5("Sine",function(n){return 1===n?1:1-PJe(n*FJe)}),R5("Back",lH("in"),lH("out"),lH()),Os.SteppedEase=Os.steps=r4.SteppedEase={config:function(e,t){void 0===e&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0;return function(a){return((r*Zv(0,.99999999,a)|0)+s)*i}}},Rg.ease=Os["quad.out"],y3("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return eH+=n+","+n+"Params,"});var mse=function(e,t){this.id=kJe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Qre,this.set=t?t.getSetter:pH},Ng=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Hg(this,+t.duration,1,1),this.data=t.data,Tc&&(this._ctx=Tc,Tc.data.push(this)),n_||o4.wake()}var e=n.prototype;return e.delay=function(i){return i||0===i?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Hg(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(Og(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(hS(this,i),!s._dp||s.parent||Yre(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Y0(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===ua||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),Wre(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Xre(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?i:1-i)+Xre(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?Pg(this._tTime,s)+1:1},e.timeScale=function(i){if(!arguments.length)return this._rts===-ua?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?lS(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-ua?0:this._rts,this.totalTime(Zv(-this._delay,this._tDur,r),!0),uS(this),GJe(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Og(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==ua&&(this._tTime-=ua)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Y0(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(_3(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?lS(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){void 0===i&&(i=Kv);var r=V4;return V4=i,this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents),"nested"!==this.data&&Af(this),V4=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(r._ts||1),r=r._dp;return!this.parent&&this.vars.immediateRender?-1:s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,ese(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,ese(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(W4(this,i),_3(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,_3(r))},e.play=function(i,r){return null!=i&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return null!=i&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return null!=i&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-ua:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-ua,this},e.isActive=function(){var s,i=this.parent||this._dp,r=this._start;return!(i&&!(this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-ua))},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),"onUpdate"===i&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=z1(i)?i:$re,a=function(){var l=r.then;r.then=null,z1(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=l),s(o),r.then=l};r._initted&&1===r.totalProgress()&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){e_(this)},n}();Q4(Ng.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ua,_prom:0,_ps:!1,_rts:1});var w3=function(n){function e(i,r){var s;return void 0===i&&(i={}),(s=n.call(this,i)||this).labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=_3(i.sortChildren),m1&&Y0(i.parent||m1,gf(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&Zre(gf(s),i.scrollTrigger),s}Bre(e,n);var t=e.prototype;return t.to=function(r,s,o){return Yv(0,arguments,this),this},t.from=function(r,s,o){return Yv(1,arguments,this),this},t.fromTo=function(r,s,o,a){return Yv(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,Xv(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new jc(r,s,W4(this,o),1),this},t.call=function(r,s,o){return Y0(this,jc.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,c,l,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=l,o.onCompleteParams=u,o.parent=this,new jc(r,o,W4(this,c)),this},t.staggerFrom=function(r,s,o,a,c,l,u){return o.runBackwards=1,Xv(o).immediateRender=_3(o.immediateRender),this.staggerTo(r,s,o,a,c,l,u)},t.staggerFromTo=function(r,s,o,a,c,l,u,f){return a.startAt=o,Xv(a).immediateRender=_3(a.immediateRender),this.staggerTo(r,s,a,c,l,u,f)},t.render=function(r,s,o){var p,g,_,y,w,C,x,M,T,I,F,P,a=this._time,c=this._dirty?this.totalDuration():this._tDur,l=this._dur,u=r<=0?0:R2(r),f=this._zTime<0!=r<0&&(this._initted||!l);if(this!==m1&&u>c&&r>=0&&(u=c),u!==this._tTime||o||f){if(a!==this._time&&l&&(u+=this._time-a,r+=this._time-a),p=u,T=this._start,C=!(M=this._ts),f&&(l||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(F=this._yoyo,w=l+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(100*w+r,s,o);if(p=R2(u%w),u===c?(y=this._repeat,p=l):((y=~~(u/w))&&y===u/w&&(p=l,y--),p>l&&(p=l)),I=Pg(this._tTime,w),!a&&this._tTime&&I!==y&&(I=y),F&&1&y&&(p=l-p,P=1),y!==I&&!this._lock){var R=F&&1&I,k=R===(F&&1&y);if(y<I&&(R=!R),a=R?0:l,this._lock=1,this.render(a||(P?0:R2(y*w)),s,!l)._lock=0,this._tTime=u,!s&&this.parent&&$4(this,"onRepeat"),this.vars.repeatRefresh&&!P&&(this.invalidate()._lock=1),a&&a!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,c=this._tDur,k&&(this._lock=2,this.render(a=R?l:-1e-4,!0),this.vars.repeatRefresh&&!P&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;pse(this,P)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(x=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,R2(a),R2(p)),x&&(u-=p-(p=x._start))),this._tTime=u,this._time=p,this._act=!M,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&p&&!s&&($4(this,"onStart"),this._tTime!==u))return this;if(p>=a&&r>=0)for(g=this._first;g;){if(_=g._next,(g._act||p>=g._start)&&g._ts&&x!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(p-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(p-g._start)*g._ts,s,o),p!==this._time||!this._ts&&!C){x=0,_&&(u+=this._zTime=-ua);break}}g=_}else{o=o||V4,g=this._last;for(var W=r<0?r:p;g;){if(_=g._prev,(g._act||W<=g._end)&&g._ts&&x!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(W-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(W-g._start)*g._ts,s,o),p!==this._time||!this._ts&&!C){x=0,_&&(u+=this._zTime=W?-ua:ua);break}}g=_}}if(x&&!s&&(this.pause(),x.render(p>=a?0:-ua)._zTime=p>=a?1:-1,this._ts))return this._start=T,uS(this),this.render(r,s,o);this._onUpdate&&!s&&$4(this,"onUpdate",!0),(u===c&&this._tTime>=this.totalDuration()||!u&&a)&&(T===this._start||Math.abs(M)!==Math.abs(this._ts))&&(this._lock||((r||!l)&&(u===c&&this._ts>0||!u&&this._ts<0)&&Af(this,1),!s&&(!(r<0)||a)&&(u||a||!c)&&($4(this,u===c&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(mf(s)||(s=W4(this,s,r)),!(r instanceof Ng)){if(rl(r))return r.forEach(function(a){return o.add(a,s)}),this;if(f2(r))return this.addLabel(r,s);if(!z1(r))return this;r=jc.delayedCall(0,r)}return this!==r?Y0(this,r,s):this},t.getChildren=function(r,s,o,a){void 0===r&&(r=!0),void 0===s&&(s=!0),void 0===o&&(o=!0),void 0===a&&(a=-U4);for(var c=[],l=this._first;l;)l._start>=a&&(l instanceof jc?s&&c.push(l):(o&&c.push(l),r&&c.push.apply(c,l.getChildren(!0,s,o)))),l=l._next;return c},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return f2(r)?this.removeLabel(r):z1(r)?this.killTweensOf(r):(cS(this,r),r===this._recent&&(this._recent=this._last),I5(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=R2(o4.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=W4(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=jc.delayedCall(0,s||qv,o);return a.data="isPause",this._hasPause=1,Y0(this,a,W4(this,r))},t.removePause=function(r){var s=this._first;for(r=W4(this,r);s;)s._start===r&&"isPause"===s.data&&Af(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),c=a.length;c--;)n6!==a[c]&&a[c].kill(r,s);return this},t.getTweensOf=function(r,s){for(var u,o=[],a=j4(r),c=this._first,l=mf(s);c;)c instanceof jc?NJe(c._targets,a)&&(l?(!n6||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&o.push(c):(u=c.getTweensOf(a,s)).length&&o.push.apply(o,u),c=c._next;return o},t.tweenTo=function(r,s){s=s||{};var g,o=this,a=W4(o,r),l=s.startAt,u=s.onStart,f=s.onStartParams,p=s.immediateRender,_=jc.to(o,Q4({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale())||ua,onStart:function(){if(o.pause(),!g){var w=s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale());_._dur!==w&&Hg(_,w,0,1).render(_._time,!0,!0),g=1}u&&u.apply(_,f||[])}},s));return p?_.render(0):_},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,Q4({startAt:{time:W4(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return void 0===r&&(r=this._time),cse(this,W4(this,r))},t.previousLabel=function(r){return void 0===r&&(r=this._time),cse(this,W4(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+ua)},t.shiftChildren=function(r,s,o){void 0===o&&(o=0);for(var l,a=this._first,c=this.labels;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(l in c)c[l]>=o&&(c[l]+=r);return I5(this)},t.invalidate=function(){var r=this._first;for(this._lock=0;r;)r.invalidate(),r=r._next;return n.prototype.invalidate.call(this)},t.clear=function(r){void 0===r&&(r=!0);for(var o,s=this._first;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),I5(this)},t.totalDuration=function(r){var l,u,f,s=0,o=this,a=o._last,c=U4;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(f=o.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),(u=a._start)>c&&o._sort&&a._ts&&!o._lock?(o._lock=1,Y0(o,a,u-a._delay,1)._lock=0):c=u,u<0&&a._ts&&(s-=u,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),c=0),a._end>s&&a._ts&&(s=a._end),a=l;Hg(o,o===m1&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(m1._ts&&(Wre(m1,lS(r,m1)),Ure=o4.frame),o4.frame>=Gre){Gre+=n4.autoSleep||120;var s=m1._first;if((!s||!s._ts)&&n4.autoSleep&&o4._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||o4.sleep()}}},e}(Ng);Q4(w3.prototype,{_lock:0,_hasPause:0,_forcing:0});var n6,hH,het=function(e,t,i,r,s,o,a){var f,p,g,_,y,w,C,x,c=new C3(this._pt,e,t,0,1,Cse,null,s),l=0,u=0;for(c.b=i,c.e=r,i+="",(C=~(r+="").indexOf("random("))&&(r=Jv(r)),o&&(o(x=[i,r],e,t),i=x[0],r=x[1]),p=i.match($P)||[];f=$P.exec(r);)_=f[0],y=r.substring(l,f.index),g?g=(g+1)%5:"rgba("===y.substr(-5)&&(g=1),_!==p[u++]&&(w=parseFloat(p[u-1])||0,c._pt={_next:c._pt,p:y||1===u?y:",",s:w,c:"="===_.charAt(1)?kg(w,_)-w:parseFloat(_)-w,m:g&&g<4?Math.round:0},l=$P.lastIndex);return c.c=l<r.length?r.substring(l,r.length):"",c.fp=a,(Hre.test(r)||C)&&(c.e=0),this._pt=c,c},uH=function(e,t,i,r,s,o,a,c,l,u){z1(r)&&(r=r(s||0,e,o));var _,f=e[t],p="get"!==i?i:z1(f)?l?e[t.indexOf("set")||!z1(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():f,g=z1(f)?l?met:yse:dH;if(f2(r)&&(~r.indexOf("random(")&&(r=Jv(r)),"="===r.charAt(1)&&((_=kg(p,r)+(sl(p)||0))||0===_)&&(r=_)),!u||p!==r||hH)return isNaN(p*r)||""===r?(!f&&!(t in e)&&XP(t,r),het.call(this,e,t,p,r,g,c||n4.stringFilter,l)):(_=new C3(this._pt,e,t,+p||0,r-(p||0),"boolean"==typeof f?vet:wse,0,g),l&&(_.fp=l),a&&_.modifier(a,this,e),this._pt=_)},Ase=function(e,t,i,r,s,o){var a,c,l,u;if(s4[e]&&!1!==(a=new s4[e]).init(s,a.rawVars?t[e]:function(e,t,i,r,s){if(z1(e)&&(e=i_(e,s,t,i,r)),!X0(e)||e.style&&e.nodeType||rl(e)||kre(e))return f2(e)?i_(e,s,t,i,r):e;var a,o={};for(a in e)o[a]=i_(e[a],s,t,i,r);return o}(t[e],r,s,o,i),i,r,o)&&(i._pt=c=new C3(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==zg))for(l=i._ptLookup[i._targets.indexOf(s)],u=a._props.length;u--;)l[a._props[u]]=c;return a},fH=function n(e,t){var F,P,R,k,W,re,Le,me,Q,he,K,ae,fe,i=e.vars,r=i.ease,s=i.startAt,o=i.immediateRender,a=i.lazy,c=i.onUpdate,l=i.onUpdateParams,u=i.callbackScope,f=i.runBackwards,p=i.yoyoEase,g=i.keyframes,_=i.autoRevert,y=e._dur,w=e._startAt,C=e._targets,x=e.parent,M=x&&"nested"===x.data?x.vars.targets:C,T="auto"===e._overwrite&&!GP,I=e.timeline;if(I&&(!g||!r)&&(r="none"),e._ease=B5(r,Rg.ease),e._yEase=p?dse(B5(!0===p?r:p,Rg.ease)):0,p&&e._yoyo&&!e._repeat&&(p=e._yEase,e._yEase=e._ease,e._ease=p),e._from=!I&&!!i.runBackwards,!I||g&&!i.stagger){if(ae=(me=C[0]?L5(C[0]).harness:0)&&i[me.prop],F=aS(i,YP),w&&(t<0&&f&&o&&!_?w.render(-1,!0):w.revert(f&&y?Kv:OJe),w._lazy=0),s){if(Af(e._startAt=jc.set(C,Q4({data:"isStart",overwrite:!1,parent:x,immediateRender:!0,lazy:_3(a),startAt:null,delay:0,onUpdate:c,onUpdateParams:l,callbackScope:u,stagger:0},s))),t<0&&(V4||!o&&!_)&&e._startAt.revert(Kv),o&&y&&t<=0)return void(t&&(e._zTime=t))}else if(f&&y&&!w)if(t&&(o=!1),R=Q4({overwrite:!1,data:"isFromStart",lazy:o&&_3(a),immediateRender:o,stagger:0,parent:x},F),ae&&(R[me.prop]=ae),Af(e._startAt=jc.set(C,R)),t<0&&(V4?e._startAt.revert(Kv):e._startAt.render(-1,!0)),e._zTime=t,o){if(!t)return}else n(e._startAt,ua);for(e._pt=e._ptCache=0,a=y&&_3(a)||a&&!y,P=0;P<C.length;P++){if(Le=(W=C[P])._gsap||tH(C)[P]._gsap,e._ptLookup[P]=he={},ZP[Le.id]&&Jd.length&&oS(),K=M===C?P:M.indexOf(W),me&&!1!==(Q=new me).init(W,ae||F,e,K,M)&&(e._pt=k=new C3(e._pt,W,Q.name,0,1,Q.render,Q,0,Q.priority),Q._props.forEach(function(de){he[de]=k}),Q.priority&&(re=1)),!me||ae)for(R in F)s4[R]&&(Q=Ase(R,F,e,K,W,M))?Q.priority&&(re=1):he[R]=k=uH.call(e,W,R,"get",F[R],K,M,0,i.stringFilter);e._op&&e._op[P]&&e.kill(W,e._op[P]),T&&e._pt&&(n6=e,m1.killTweensOf(W,he,e.globalTime(t)),fe=!e.parent,n6=0),e._pt&&a&&(ZP[Le.id]=1)}re&&bse(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!fe,g&&t<=0&&I.render(U4,!0,!0)},get=function(e,t,i,r){var o,a,s=t.ease||r||"power1.inOut";if(rl(t))a=i[e]||(i[e]=[]),t.forEach(function(c,l){return a.push({t:l/(t.length-1)*100,v:c,e:s})});else for(o in t)a=i[o]||(i[o]=[]),"ease"===o||a.push({t:parseFloat(e),v:t[o],e:s})},i_=function(e,t,i,r,s){return z1(e)?e.call(t,i,r,s):f2(e)&&~e.indexOf("random(")?Jv(e):e},vse=eH+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_se={};y3(vse+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return _se[n]=1});var jc=function(n){function e(i,r,s,o){var a;"number"==typeof r&&(s.duration=r,r=s,s=null);var T,I,F,P,R,k,W,re,c=(a=n.call(this,o?r:Xv(r))||this).vars,l=c.duration,u=c.delay,f=c.immediateRender,p=c.stagger,g=c.overwrite,_=c.keyframes,y=c.defaults,w=c.scrollTrigger,C=c.yoyoEase,x=r.parent||m1,M=(rl(i)||kre(i)?mf(i[0]):"length"in r)?[i]:j4(i);if(a._targets=M.length?tH(M):rS("GSAP target "+i+" not found. https://greensock.com",!n4.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=g,_||p||nS(l)||nS(u)){if(r=a.vars,(T=a.timeline=new w3({data:"nested",defaults:y||{},targets:x&&"nested"===x.data?x.vars.targets:M})).kill(),T.parent=T._dp=gf(a),T._start=0,p||nS(l)||nS(u)){if(P=M.length,W=p&&ise(p),X0(p))for(R in p)~vse.indexOf(R)&&(re||(re={}),re[R]=p[R]);for(I=0;I<P;I++)(F=aS(r,_se)).stagger=0,C&&(F.yoyoEase=C),re&&D5(F,re),k=M[I],F.duration=+i_(l,gf(a),I,k,M),F.delay=(+i_(u,gf(a),I,k,M)||0)-a._delay,!p&&1===P&&F.delay&&(a._delay=u=F.delay,a._start+=u,F.delay=0),T.to(k,F,W?W(I,k,M):0),T._ease=Os.none;T.duration()?l=u=0:a.timeline=0}else if(_){Xv(Q4(T.vars.defaults,{ease:"none"})),T._ease=B5(_.ease||r.ease||"none");var me,Q,he,Le=0;if(rl(_))_.forEach(function(K){return T.to(M,K,">")}),T.duration();else{for(R in F={},_)"ease"===R||"easeEach"===R||get(R,_[R],F,_.easeEach);for(R in F)for(me=F[R].sort(function(K,ae){return K.t-ae.t}),Le=0,I=0;I<me.length;I++)(he={ease:(Q=me[I]).e,duration:(Q.t-(I?me[I-1].t:0))/100*l})[R]=Q.v,T.to(M,he,Le),Le+=he.duration;T.duration()<l&&T.to({},{duration:l-T.duration()})}}l||a.duration(l=T.duration())}else a.timeline=0;return!0===g&&!GP&&(n6=gf(a),m1.killTweensOf(M),n6=0),Y0(x,gf(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(f||!l&&!_&&a._start===R2(x._time)&&_3(f)&&QJe(gf(a))&&"nested"!==x.data)&&(a._tTime=-ua,a.render(Math.max(0,-u))),w&&Zre(gf(a),w),a}Bre(e,n);var t=e.prototype;return t.render=function(r,s,o){var p,g,_,y,w,C,x,M,T,a=this._time,c=this._tDur,l=this._dur,u=r<0,f=r>c-ua&&!u?c:r<ua?0:r;if(l){if(f!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(p=f,M=this.timeline,this._repeat){if(y=l+this._rDelay,this._repeat<-1&&u)return this.totalTime(100*y+r,s,o);if(p=R2(f%y),f===c?(_=this._repeat,p=l):((_=~~(f/y))&&_===f/y&&(p=l,_--),p>l&&(p=l)),(C=this._yoyo&&1&_)&&(T=this._yEase,p=l-p),w=Pg(this._tTime,y),p===a&&!o&&this._initted)return this._tTime=f,this;_!==w&&(M&&this._yEase&&pse(M,C),this.vars.repeatRefresh&&!C&&!this._lock&&(this._lock=o=1,this.render(R2(y*_),!0).invalidate()._lock=0))}if(!this._initted){if(Jre(this,u?r:p,o,s))return this._tTime=0,this;if(a!==this._time)return this;if(l!==this._dur)return this.render(r,s,o)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=x=(T||this._ease)(p/l),this._from&&(this.ratio=x=1-x),p&&!a&&!s&&($4(this,"onStart"),this._tTime!==f))return this;for(g=this._pt;g;)g.r(x,g.d),g=g._next;M&&M.render(r<0?r:!p&&C?-ua:M._dur*M._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&nH(this,r,0,o),$4(this,"onUpdate")),this._repeat&&_!==w&&this.vars.onRepeat&&!s&&this.parent&&$4(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(u&&!this._onUpdate&&nH(this,r,0,!0),(r||!l)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&Af(this,1),!s&&(!u||a)&&(f||a)&&($4(this,f===c?"onComplete":"onReverseComplete",!0),this._prom&&!(f<c&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,i,r){var l,u,f,s=e.ratio,o=t<0||!t&&(!e._start&&WJe(e)&&(e._initted||!iH(e))||(e._ts<0||e._dp._ts<0)&&!iH(e))?0:1,a=e._rDelay,c=0;if(a&&e._repeat&&(c=Zv(0,e._tDur,t),u=Pg(c,a),e._yoyo&&1&u&&(o=1-o),u!==Pg(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||V4||r||e._zTime===ua||!t&&e._zTime){if(!e._initted&&Jre(e,t,r,i))return;for(f=e._zTime,e._zTime=t||(i?ua:0),i||(i=t&&!f),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=c,l=e._pt;l;)l.r(o,l.d),l=l._next;t<0&&nH(e,t,0,!0),e._onUpdate&&!i&&$4(e,"onUpdate"),c&&e._repeat&&!i&&e.parent&&$4(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Af(e,1),!i&&!V4&&($4(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,r,s,o);return this},t.targets=function(){return this._targets},t.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),n.prototype.invalidate.call(this)},t.resetTo=function(r,s,o,a){n_||o4.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||fH(this,c),function(e,t,i,r,s,o,a){var l,u,f,p,c=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!c)for(c=e._ptCache[t]=[],f=e._ptLookup,p=e._targets.length;p--;){if((l=f[p][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return hH=1,e.vars[t]="+=0",fH(e,a),hH=0,1;c.push(l)}for(p=c.length;p--;)(l=(u=c[p])._pt||u).s=!r&&0!==r||s?l.s+(r||0)+o*l.c:r,l.c=i-l.s,u.e&&(u.e=rc(i)+sl(u.e)),u.b&&(u.b=l.s+sl(u.b))}(this,r,s,o,a,this._ease(c/this._dur),c)?this.resetTo(r,s,o,a):(hS(this,0),this.parent||Kre(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(void 0===s&&(s="all"),!(r||s&&"all"!==s))return this._lazy=this._pt=0,this.parent?e_(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,n6&&!0!==n6.vars.overwrite)._first||e_(this),this.parent&&o!==this.timeline.totalDuration()&&Hg(this,this._dur*this.timeline._tDur/o,0,1),this}var f,p,g,_,y,w,C,a=this._targets,c=r?j4(r):a,l=this._ptLookup,u=this._pt;if((!s||"all"===s)&&function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0}(a,c))return"all"===s&&(this._pt=0),e_(this);for(f=this._op=this._op||[],"all"!==s&&(f2(s)&&(y={},y3(s,function(x){return y[x]=1}),s=y),s=function(e,t){var s,o,a,c,i=e[0]?L5(e[0]).harness:0,r=i&&i.aliases;if(!r)return t;for(o in s=D5({},t),r)if(o in s)for(a=(c=r[o].split(",")).length;a--;)s[c[a]]=s[o];return s}(a,s)),C=a.length;C--;)if(~c.indexOf(a[C]))for(y in p=l[C],"all"===s?(f[C]=s,_=p,g={}):(g=f[C]=f[C]||{},_=s),_)(w=p&&p[y])&&((!("kill"in w.d)||!0===w.d.kill(y))&&cS(this,w,"_pt"),delete p[y]),"all"!==g&&(g[y]=1);return this._initted&&!this._pt&&u&&e_(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return Yv(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return Yv(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return m1.killTweensOf(r,s,o)},e}(Ng);Q4(jc.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),y3("staggerTo,staggerFrom,staggerFromTo",function(n){jc[n]=function(){var e=new w3,t=rH.call(arguments,0);return t.splice("staggerFromTo"===n?5:4,0,0),e[n].apply(e,t)}});var dH=function(e,t,i){return e[t]=i},yse=function(e,t,i){return e[t](i)},met=function(e,t,i,r){return e[t](r.fp,i)},Aet=function(e,t,i){return e.setAttribute(t,i)},pH=function(e,t){return z1(e[t])?yse:WP(e[t])&&e.setAttribute?Aet:dH},wse=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},vet=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Cse=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round(1e4*(i.s+i.c*e))/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},gH=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},_et=function(e,t,i,r){for(var o,s=this._pt;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},yet=function(e){for(var i,r,t=this._pt;t;)r=t._next,t.p===e&&!t.op||t.op===e?cS(this,t,"_pt"):t.dep||(i=1),t=r;return!i},wet=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},bse=function(e){for(var i,r,s,o,t=e._pt;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},C3=function(){function n(t,i,r,s,o,a,c,l,u){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||wse,this.d=c||this,this.set=l||dH,this.pr=u||0,this._next=t,t&&(t._prev=this)}return n.prototype.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=wet,this.m=i,this.mt=s,this.tween=r},n}();y3(eH+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return YP[n]=1}),r4.TweenMax=r4.TweenLite=jc,r4.TimelineLite=r4.TimelineMax=w3,m1=new w3({sortChildren:!1,defaults:Rg,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),n4.stringFilter=fse;var Vg=[],fS={},Cet=[],xse=0,mH=function(e){return(fS[e]||Cet).map(function(t){return t()})},AH=function(){var e=Date.now(),t=[];e-xse>2&&(mH("matchMediaInit"),Vg.forEach(function(i){var o,a,c,l,r=i.queries,s=i.conditions;for(a in r)(o=G4.matchMedia(r[a]).matches)&&(c=1),o!==s[a]&&(s[a]=o,l=1);l&&(i.revert(),c&&t.push(i))}),mH("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i)}),xse=e,mH("matchMedia"))},Mse=function(){function n(t,i){this.selector=i&&sH(i),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){z1(i)&&(s=r,r=i,i=z1);var o=this,a=function(){var f,l=Tc,u=o.selector;return l&&l!==o&&l.data.push(o),s&&(o.selector=sH(s)),Tc=o,f=r.apply(o,arguments),z1(f)&&o._r.push(f),Tc=l,o.selector=u,o.isReverted=!1,f};return o.last=a,i===z1?a(o):i?o[i]=a:a},e.ignore=function(i){var r=Tc;Tc=null,i(this),Tc=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof jc&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?(this.getTweens().map(function(a){return{g:a.globalTime(0),t:a}}).sort(function(a,c){return c.g-a.g||-1}).forEach(function(a){return a.t.revert(i)}),this.data.forEach(function(a){return!(a instanceof Ng)&&a.revert&&a.revert(i)}),this._r.forEach(function(a){return a(i,s)}),this.isReverted=!0):this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r){var o=Vg.indexOf(this);~o&&Vg.splice(o,1)}},e.revert=function(i){this.kill(i||{})},n}(),bet=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(i,r,s){X0(i)||(i={matches:i});var c,l,u,o=new Mse(0,s||this.scope),a=o.conditions={};for(l in this.contexts.push(o),r=o.add("onMatch",r),o.queries=i,i)"all"===l?u=1:(c=G4.matchMedia(i[l]))&&(Vg.indexOf(o)<0&&Vg.push(o),(a[l]=c.matches)&&(u=1),c.addListener?c.addListener(AH):c.addEventListener("change",AH));return u&&r(o),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),dS={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return iet(r)})},timeline:function(e){return new w3(e)},getTweensOf:function(e,t){return m1.getTweensOf(e,t)},getProperty:function(e,t,i,r){f2(e)&&(e=j4(e)[0]);var s=L5(e||{}).get,o=i?$re:jre;return"native"===i&&(i=""),e&&(t?o((s4[t]&&s4[t].get||s)(e,t,i,r)):function(a,c,l){return o((s4[a]&&s4[a].get||s)(e,a,c,l))})},quickSetter:function(e,t,i){if((e=j4(e)).length>1){var r=e.map(function(u){return a4.quickSetter(u,t,i)}),s=r.length;return function(u){for(var f=s;f--;)r[f](u)}}var o=s4[t],a=L5(e=e[0]||{}),c=a.harness&&(a.harness.aliases||{})[t]||t,l=o?function(u){var f=new o;zg._pt=0,f.init(e,i?u+i:u,zg,0,[e]),f.render(1,f),zg._pt&&gH(1,zg)}:a.set(e,c);return o?l:function(u){return l(e,c,i?u+i:u,a,1)}},quickTo:function(e,t,i){var r,s=a4.to(e,D5(((r={})[t]="+=0.1",r.paused=!0,r),i||{})),o=function(c,l,u){return s.resetTo(t,c,l,u)};return o.tween=s,o},isTweening:function(e){return m1.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=B5(e.ease,Rg.ease)),qre(Rg,e||{})},config:function(e){return qre(n4,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,s=e.defaults,o=e.extendTimeline;(e.plugins||"").split(",").forEach(function(a){return a&&!s4[a]&&!r4[a]&&rS(t+" effect requires "+a+" plugin.")}),JP[t]=function(a,c,l){return i(j4(a),Q4(c||{},s),l)},o&&(w3.prototype[t]=function(a,c,l){return this.add(JP[t](a,X0(c)?c:(l=c)&&{},this),l)})},registerEase:function(e,t){Os[e]=B5(t)},parseEase:function(e,t){return arguments.length?B5(e,t):Os},getById:function(e){return m1.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var r,s,i=new w3(e);for(i.smoothChildTiming=_3(e.smoothChildTiming),m1.remove(i),i._dp=0,i._time=i._tTime=m1._time,r=m1._first;r;)s=r._next,(t||!(!r._dur&&r instanceof jc&&r.vars.onComplete===r._targets[0]))&&Y0(i,r,r._start-r._delay),r=s;return Y0(m1,i,0),i},context:function(e,t){return e?new Mse(e,t):Tc},matchMedia:function(e){return new bet(e)},matchMediaRefresh:function(){return Vg.forEach(function(e){var i,r,t=e.conditions;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||AH()},addEventListener:function(e,t){var i=fS[e]||(fS[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=fS[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:function n(e,t,i){var r=t-e;return rl(e)?ose(e,n(0,e.length),t):e6(i,function(s){return(r+(s-e)%r)%r+e})},wrapYoyo:function n(e,t,i){var r=t-e,s=2*r;return rl(e)?ose(e,n(0,e.length-1),t):e6(i,function(o){return e+((o=(s+(o-e)%s)%s||0)>r?s-o:o)})},distribute:ise,random:sse,snap:rse,normalize:function(e,t,i){return ase(e,t,0,1,i)},getUnit:sl,clamp:function(e,t,i){return e6(i,function(r){return Zv(e,t,r)})},splitColor:lse,toArray:j4,selector:sH,mapRange:ase,pipe:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},unitize:function(e,t){return function(i){return e(parseFloat(i))+(t||sl(i))}},interpolate:function n(e,t,i,r){var s=isNaN(e+t)?0:function(g){return(1-g)*e+g*t};if(!s){var c,l,u,f,p,o=f2(e),a={};if(!0===i&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(rl(e)&&!rl(t)){for(u=[],p=(f=e.length)-2,l=1;l<f;l++)u.push(n(e[l-1],e[l]));f--,s=function(_){_*=f;var y=Math.min(p,~~_);return u[y](_-y)},i=t}else r||(e=D5(rl(e)?[]:{},e));if(!u){for(c in t)uH.call(a,e,c,"get",t[c]);s=function(_){return gH(_,a)||(o?e.p:e)}}}return e6(i,s)},shuffle:nse},install:Nre,effects:JP,ticker:o4,updateRoot:w3.updateRoot,plugins:s4,globalTimeline:m1,core:{PropTween:C3,globals:Vre,Tween:jc,Timeline:w3,Animation:Ng,getCache:L5,_removeLinkedListItem:cS,reverting:function(){return V4},context:function(e){return e&&Tc&&(Tc.data.push(e),e._ctx=Tc),Tc},suppressOverwrites:function(e){return GP=e}}};y3("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return dS[n]=jc[n]}),o4.add(w3.updateRoot),zg=dS.to({},{duration:0});var xet=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},vH=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var c,l;if(f2(s)&&(c={},y3(s,function(u){return c[u]=1}),s=c),t){for(l in c={},s)c[l]=t(s[l]);s=c}!function(e,t){var r,s,o,i=e._targets;for(r in t)for(s=i.length;s--;)(o=e._ptLookup[s][r])&&(o=o.d)&&(o._pt&&(o=xet(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))}(a,s)}}}},a4=dS.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,c;for(o in this.tween=i,t)c=e.getAttribute(o)||"",(a=this.add(e,"setAttribute",(c||0)+"",t[o],r,s,0,0,o)).op=o,a.b=c,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)V4?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},vH("roundProps",oH),vH("modifiers"),vH("snap",rse))||dS;jc.version=w3.version=a4.version="3.11.1",Ore=1,Fre()&&Og();var Sse,r6,Ug,_H,F5,Ese,yH,Rse,vf={},k5=180/Math.PI,Gg=Math.PI/180,Qg=Math.atan2,wH=/([A-Z])/g,Let=/(left|right|width|margin|padding|x)/i,Det=/[\s,\(]\S/,_f={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},CH=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Iet=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Bet=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},Ret=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},Lse=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Dse=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},Fet=function(e,t,i){return e.style[t]=i},ket=function(e,t,i){return e.style.setProperty(t,i)},Pet=function(e,t,i){return e._gsap[t]=i},Het=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},zet=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},Oet=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},O1="transform",ju=O1+"Origin",Net=function(e){var t=this,i=this.target,r=i.style;if(e in vf){if(this.tfm=this.tfm||{},"transform"!==e&&(~(e=_f[e]||e).indexOf(",")?e.split(",").forEach(function(s){return t.tfm[s]=yf(i,s)}):this.tfm[e]=i._gsap.x?i._gsap[e]:yf(i,e)),this.props.indexOf(O1)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(ju,"")),e=O1}r&&this.props.push(e,r[e])},Ise=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Vet=function(){var s,o,e=this.props,t=this.target,i=t.style,r=t._gsap;for(s=0;s<e.length;s+=2)e[s+1]?i[e[s]]=e[s+1]:i.removeProperty(e[s].replace(wH,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),(s=yH())&&!s.isStart&&!i[O1]&&(Ise(i),r.uncache=1)}},Bse=function(e,t){var i={target:e,props:[],revert:Vet,save:Net};return t&&t.split(",").forEach(function(r){return i.save(r)}),i},bH=function(e,t){var i=r6.createElementNS?r6.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):r6.createElement(e);return i.style?i:r6.createElement(e)},Z0=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(wH,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,Wg(t)||t,1)||""},Fse="O,Moz,ms,Ms,Webkit".split(","),Wg=function(e,t,i){var s=(t||F5).style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Fse[o]+e in s););return o<0?null:(3===o?"ms":o>=0?Fse[o]:"")+e},xH=function(){typeof window<"u"&&window.document&&(Sse=window,Ug=(r6=Sse.document).documentElement,F5=bH("div")||{style:{}},bH("div"),O1=Wg(O1),ju=O1+"Origin",F5.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Rse=!!Wg("perspective"),yH=a4.core.reverting,_H=1)},MH=function n(e){var o,t=bH("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText;if(Ug.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),Ug.removeChild(t),this.style.cssText=s,o},kse=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},Pse=function(e){var t;try{t=e.getBBox()}catch{t=MH.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===MH||(t=MH.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+kse(e,["x","cx","x1"])||0,y:+kse(e,["y","cy","y1"])||0,width:0,height:0}},Hse=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!Pse(e))},r_=function(e,t){if(t){var i=e.style;t in vf&&t!==ju&&(t=O1),i.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),i.removeProperty(t.replace(wH,"-$1").toLowerCase())):i.removeAttribute(t)}},s6=function(e,t,i,r,s,o){var a=new C3(e._pt,t,i,0,1,o?Dse:Lse);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},zse={deg:1,rad:1,turn:1},Uet={grid:1,flex:1},o6=function n(e,t,i,r){var _,y,w,C,s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=F5.style,c=Let.test(t),l="svg"===e.tagName.toLowerCase(),u=(l?"client":"offset")+(c?"Width":"Height"),f=100,p="px"===r,g="%"===r;return r===o||!s||zse[r]||zse[o]?s:("px"!==o&&!p&&(s=n(e,t,i,"px")),C=e.getCTM&&Hse(e),!g&&"%"!==o||!vf[t]&&!~t.indexOf("adius")?(a[c?"width":"height"]=f+(p?o:r),y=~t.indexOf("adius")||"em"===r&&e.appendChild&&!l?e:e.parentNode,C&&(y=(e.ownerSVGElement||{}).parentNode),(!y||y===r6||!y.appendChild)&&(y=r6.body),(w=y._gsap)&&g&&w.width&&c&&w.time===o4.time&&!w.uncache?rc(s/w.width*f):((g||"%"===o)&&!Uet[Z0(y,"display")]&&(a.position=Z0(e,"position")),y===e&&(a.position="static"),y.appendChild(F5),_=F5[u],y.removeChild(F5),a.position="absolute",c&&g&&((w=L5(y)).time=o4.time,w.width=y[u]),rc(p?_*s/f:_&&s?f/_*s:0))):(_=C?e.getBBox()[c?"width":"height"]:e[u],rc(g?s/_*f:s/100*_)))},yf=function(e,t,i,r){var s;return _H||xH(),t in _f&&"transform"!==t&&~(t=_f[t]).indexOf(",")&&(t=t.split(",")[0]),vf[t]&&"transform"!==t?(s=o_(e,r),s="transformOrigin"!==t?s[t]:s.svg?s.origin:gS(Z0(e,ju))+" "+s.zOrigin+"px"):(!(s=e.style[t])||"auto"===s||r||~(s+"").indexOf("calc("))&&(s=pS[t]&&pS[t](e,t,i)||Z0(e,t)||Qre(e,t)||("opacity"===t?1:0)),i&&!~(s+"").trim().indexOf(" ")?o6(e,t,s,i)+i:s},Get=function(e,t,i,r){if(!i||"none"===i){var s=Wg(t,e,1),o=s&&Z0(e,s,1);o&&o!==i?(t=s,i=o):"borderColor"===t&&(i=Z0(e,"borderTopColor"))}var u,f,p,g,_,y,w,C,x,M,T,a=new C3(this._pt,e.style,t,0,1,Cse),c=0,l=0;if(a.b=i,a.e=r,i+="","auto"==(r+="")&&(e.style[t]=r,r=Z0(e,t)||r,e.style[t]=i),fse(u=[i,r]),r=u[1],p=(i=u[0]).match(Fg)||[],(r.match(Fg)||[]).length){for(;f=Fg.exec(r);)w=f[0],x=r.substring(c,f.index),_?_=(_+1)%5:("rgba("===x.substr(-5)||"hsla("===x.substr(-5))&&(_=1),w!==(y=p[l++]||"")&&(g=parseFloat(y)||0,T=y.substr((g+"").length),"="===w.charAt(1)&&(w=kg(g,w)+T),C=parseFloat(w),M=w.substr((C+"").length),c=Fg.lastIndex-M.length,M||(M=M||n4.units[t]||T,c===r.length&&(r+=M,a.e+=M)),T!==M&&(g=o6(e,t,y,M)||0),a._pt={_next:a._pt,p:x||1===l?x:",",s:g,c:C-g,m:_&&_<4||"zIndex"===t?Math.round:0});a.c=c<r.length?r.substring(c,r.length):""}else a.r="display"===t&&"none"===r?Dse:Lse;return Hre.test(r)&&(a.e=0),this._pt=a,a},Ose={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Qet=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return("top"===i||"bottom"===i||"left"===r||"right"===r)&&(e=i,i=r,r=e),t[0]=Ose[i]||i,t[1]=Ose[r]||r,t.join(" ")},Wet=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var a,c,l,i=t.t,r=i.style,s=t.u,o=i._gsap;if("all"===s||!0===s)r.cssText="",c=1;else for(l=(s=s.split(",")).length;--l>-1;)vf[a=s[l]]&&(c=1,a="transformOrigin"===a?ju:O1),r_(i,a);c&&(r_(i,O1),o&&(o.svg&&i.removeAttribute("transform"),o_(i,1),o.uncache=1,Ise(r)))}},pS={clearProps:function(e,t,i,r,s){if("isFromStart"!==s.data){var o=e._pt=new C3(e._pt,t,i,0,0,Wet);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},s_=[1,0,0,1,0,0],Nse={},Vse=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},Use=function(e){var t=Z0(e,O1);return Vse(t)?s_:t.substr(7).match(Pre).map(rc)},SH=function(e,t){var o,a,c,l,i=e._gsap||L5(e),r=e.style,s=Use(e);return i.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(c=e.transform.baseVal.consolidate().matrix).a,c.b,c.c,c.d,c.e,c.f]).join(",")?s_:s:(s===s_&&!e.offsetParent&&e!==Ug&&!i.svg&&(c=r.display,r.display="block",(!(o=e.parentNode)||!e.offsetParent)&&(l=1,a=e.nextElementSibling,Ug.appendChild(e)),s=Use(e),c?r.display=c:r_(e,"display"),l&&(a?o.insertBefore(e,a):o?o.appendChild(e):Ug.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},EH=function(e,t,i,r,s,o){var F,P,k,a=e._gsap,c=s||SH(e,!0),l=a.xOrigin||0,u=a.yOrigin||0,f=a.xOffset||0,p=a.yOffset||0,g=c[0],_=c[1],y=c[2],w=c[3],C=c[4],x=c[5],M=t.split(" "),T=parseFloat(M[0])||0,I=parseFloat(M[1])||0;i?c!==s_&&(P=g*w-_*y)&&(k=T*(-_/P)+I*(g/P)-(g*x-_*C)/P,T=T*(w/P)+I*(-y/P)+(y*x-w*C)/P,I=k):(T=(F=Pse(e)).x+(~M[0].indexOf("%")?T/100*F.width:T),I=F.y+(~(M[1]||M[0]).indexOf("%")?I/100*F.height:I)),r||!1!==r&&a.smooth?(a.xOffset=f+((C=T-l)*g+(x=I-u)*y)-C,a.yOffset=p+(C*_+x*w)-x):a.xOffset=a.yOffset=0,a.xOrigin=T,a.yOrigin=I,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[ju]="0px 0px",o&&(s6(o,a,"xOrigin",l,T),s6(o,a,"yOrigin",u,I),s6(o,a,"xOffset",f,a.xOffset),s6(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",T+" "+I)},o_=function(e,t){var i=e._gsap||new mse(e);if("x"in i&&!t&&!i.uncache)return i;var u,f,p,g,_,y,w,C,x,M,T,I,F,P,R,k,W,re,Le,me,Q,he,K,ae,fe,de,ke,et,Fe,wt,ut,It,r=e.style,s=i.scaleX<0,o="px",a="deg",c=getComputedStyle(e),l=Z0(e,ju)||"0";return u=f=p=y=w=C=x=M=T=0,g=_=1,i.svg=!(!e.getCTM||!Hse(e)),c.translate&&(("none"!==c.translate||"none"!==c.scale||"none"!==c.rotate)&&(r[O1]=("none"!==c.translate?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==c.rotate?"rotate("+c.rotate+") ":"")+("none"!==c.scale?"scale("+c.scale.split(" ").join(",")+") ":"")+c[O1]),r.scale=r.rotate=r.translate="none"),P=SH(e,i.svg),i.svg&&(i.uncache?(fe=e.getBBox(),l=i.xOrigin-fe.x+"px "+(i.yOrigin-fe.y)+"px",ae=""):ae=!t&&e.getAttribute("data-svg-origin"),EH(e,ae||l,!!ae||i.originIsAbsolute,!1!==i.smooth,P)),I=i.xOrigin||0,F=i.yOrigin||0,P!==s_&&(re=P[0],Le=P[1],me=P[2],Q=P[3],u=he=P[4],f=K=P[5],6===P.length?(g=Math.sqrt(re*re+Le*Le),_=Math.sqrt(Q*Q+me*me),y=re||Le?Qg(Le,re)*k5:0,(x=me||Q?Qg(me,Q)*k5+y:0)&&(_*=Math.abs(Math.cos(x*Gg))),i.svg&&(u-=I-(I*re+F*me),f-=F-(I*Le+F*Q))):(wt=P[7],ke=P[8],et=P[9],ut=P[11],u=P[12],f=P[13],p=P[14],w=(R=Qg(It=P[6],Fe=P[10]))*k5,R&&(ae=he*(k=Math.cos(-R))+ke*(W=Math.sin(-R)),fe=K*k+et*W,de=It*k+Fe*W,ke=he*-W+ke*k,et=K*-W+et*k,Fe=It*-W+Fe*k,ut=wt*-W+ut*k,he=ae,K=fe,It=de),C=(R=Qg(-me,Fe))*k5,R&&(k=Math.cos(-R),ut=Q*(W=Math.sin(-R))+ut*k,re=ae=re*k-ke*W,Le=fe=Le*k-et*W,me=de=me*k-Fe*W),y=(R=Qg(Le,re))*k5,R&&(ae=re*(k=Math.cos(R))+Le*(W=Math.sin(R)),fe=he*k+K*W,Le=Le*k-re*W,K=K*k-he*W,re=ae,he=fe),w&&Math.abs(w)+Math.abs(y)>359.9&&(w=y=0,C=180-C),g=rc(Math.sqrt(re*re+Le*Le+me*me)),_=rc(Math.sqrt(K*K+It*It)),R=Qg(he,K),x=Math.abs(R)>2e-4?R*k5:0,T=ut?1/(ut<0?-ut:ut):0),i.svg&&(ae=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!Vse(Z0(e,O1)),ae&&e.setAttribute("transform",ae))),Math.abs(x)>90&&Math.abs(x)<270&&(s?(g*=-1,x+=y<=0?180:-180,y+=y<=0?180:-180):(_*=-1,x+=x<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=f-((i.yPercent=f&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=p+o,i.scaleX=rc(g),i.scaleY=rc(_),i.rotation=rc(y)+a,i.rotationX=rc(w)+a,i.rotationY=rc(C)+a,i.skewX=x+a,i.skewY=M+a,i.transformPerspective=T+o,(i.zOrigin=parseFloat(l.split(" ")[2])||0)&&(r[ju]=gS(l)),i.xOffset=i.yOffset=0,i.force3D=n4.force3D,i.renderTransform=i.svg?$et:Rse?Gse:jet,i.uncache=0,i},gS=function(e){return(e=e.split(" "))[0]+" "+e[1]},TH=function(e,t,i){var r=sl(t);return rc(parseFloat(t)+parseFloat(o6(e,"x",i+"px",r)))+r},jet=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Gse(e,t)},P5="0deg",a_="0px",H5=") ",Gse=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,c=i.z,l=i.rotation,u=i.rotationY,f=i.rotationX,p=i.skewX,g=i.skewY,_=i.scaleX,y=i.scaleY,w=i.transformPerspective,C=i.force3D,x=i.target,M=i.zOrigin,T="",I="auto"===C&&e&&1!==e||!0===C;if(M&&(f!==P5||u!==P5)){var k,F=parseFloat(u)*Gg,P=Math.sin(F),R=Math.cos(F);F=parseFloat(f)*Gg,k=Math.cos(F),o=TH(x,o,P*k*-M),a=TH(x,a,-Math.sin(F)*-M),c=TH(x,c,R*k*-M+M)}w!==a_&&(T+="perspective("+w+H5),(r||s)&&(T+="translate("+r+"%, "+s+"%) "),(I||o!==a_||a!==a_||c!==a_)&&(T+=c!==a_||I?"translate3d("+o+", "+a+", "+c+") ":"translate("+o+", "+a+H5),l!==P5&&(T+="rotate("+l+H5),u!==P5&&(T+="rotateY("+u+H5),f!==P5&&(T+="rotateX("+f+H5),(p!==P5||g!==P5)&&(T+="skew("+p+", "+g+H5),(1!==_||1!==y)&&(T+="scale("+_+", "+y+H5),x.style[O1]=T||"translate(0, 0)"},$et=function(e,t){var I,F,P,R,k,i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,c=i.rotation,l=i.skewX,u=i.skewY,f=i.scaleX,p=i.scaleY,g=i.target,_=i.xOrigin,y=i.yOrigin,w=i.xOffset,C=i.yOffset,x=i.forceCSS,M=parseFloat(o),T=parseFloat(a);c=parseFloat(c),l=parseFloat(l),(u=parseFloat(u))&&(l+=u=parseFloat(u),c+=u),c||l?(c*=Gg,l*=Gg,I=Math.cos(c)*f,F=Math.sin(c)*f,P=Math.sin(c-l)*-p,R=Math.cos(c-l)*p,l&&(u*=Gg,k=Math.tan(l-u),P*=k=Math.sqrt(1+k*k),R*=k,u&&(k=Math.tan(u),I*=k=Math.sqrt(1+k*k),F*=k)),I=rc(I),F=rc(F),P=rc(P),R=rc(R)):(I=f,R=p,F=P=0),(M&&!~(o+"").indexOf("px")||T&&!~(a+"").indexOf("px"))&&(M=o6(g,"x",o,"px"),T=o6(g,"y",a,"px")),(_||y||w||C)&&(M=rc(M+_-(_*I+y*P)+w),T=rc(T+y-(_*F+y*R)+C)),(r||s)&&(k=g.getBBox(),M=rc(M+r/100*k.width),T=rc(T+s/100*k.height)),g.setAttribute("transform",k="matrix("+I+","+F+","+P+","+R+","+M+","+T+")"),x&&(g.style[O1]=k)},qet=function(e,t,i,r,s){var f,p,o=360,a=f2(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?k5:1)-r,u=r+l+"deg";return a&&("short"===(f=s.split("_")[1])&&(l%=o)!=l%180&&(l+=l<0?o:-o),"cw"===f&&l<0?l=(l+36e9)%o-~~(l/o)*o:"ccw"===f&&l>0&&(l=(l-36e9)%o-~~(l/o)*o)),e._pt=p=new C3(e._pt,t,i,r,l,Iet),p.e=u,p.u="deg",e._props.push(i),p},Qse=function(e,t){for(var i in t)e[i]=t[i];return e},Ket=function(e,t,i){var a,c,l,u,f,p,_,r=Qse({},i._gsap),o=i.style;for(c in r.svg?(l=i.getAttribute("transform"),i.setAttribute("transform",""),o[O1]=t,a=o_(i,1),r_(i,O1),i.setAttribute("transform",l)):(l=getComputedStyle(i)[O1],o[O1]=t,a=o_(i,1),o[O1]=l),vf)(l=r[c])!==(u=a[c])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(c)<0&&(f=sl(l)!==(_=sl(u))?o6(i,c,l,_):parseFloat(l),p=parseFloat(u),e._pt=new C3(e._pt,a,c,f,p-f,CH),e._pt.u=_||0,e._props.push(c));Qse(a,r)};y3("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});pS[e>1?"border"+n:n]=function(a,c,l,u,f){var p,g;if(arguments.length<4)return p=o.map(function(_){return yf(a,_,l)}),5===(g=p.join(" ")).split(p[0]).length?p[0]:g;p=(u+"").split(" "),g={},o.forEach(function(_,y){return g[_]=p[y]=p[y]||p[(y-1)/2|0]}),a.init(c,g,f)}});var Wse={name:"css",register:xH,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var l,u,f,p,g,_,y,w,C,x,M,T,I,F,P,R,o=this._props,a=e.style,c=i.vars.startAt;for(y in _H||xH(),this.styles=this.styles||Bse(e),R=this.styles.props,this.tween=i,t)if("autoRound"!==y&&(u=t[y],!s4[y]||!Ase(y,t,i,r,e,s)))if(_=pS[y],"function"==(g=typeof u)&&(g=typeof(u=u.call(i,r,e,s))),"string"===g&&~u.indexOf("random(")&&(u=Jv(u)),_)_(this,e,y,u,i)&&(P=1);else if("--"===y.substr(0,2))l=(getComputedStyle(e).getPropertyValue(y)+"").trim(),u+="",t6.lastIndex=0,t6.test(l)||(w=sl(l),C=sl(u)),C?w!==C&&(l=o6(e,y,l,C)+C):w&&(u+=w),this.add(a,"setProperty",l,u,r,s,0,0,y),o.push(y),R.push(y,a[y]);else if("undefined"!==g){if(c&&y in c?(l="function"==typeof c[y]?c[y].call(i,r,e,s):c[y],f2(l)&&~l.indexOf("random(")&&(l=Jv(l)),sl(l+"")||(l+=n4.units[y]||sl(yf(e,y))||""),"="===(l+"").charAt(1)&&(l=yf(e,y))):l=yf(e,y),p=parseFloat(l),(x="string"===g&&"="===u.charAt(1)&&u.substr(0,2))&&(u=u.substr(2)),f=parseFloat(u),y in _f&&("autoAlpha"===y&&(1===p&&"hidden"===yf(e,"visibility")&&f&&(p=0),R.push("visibility",a.visibility),s6(this,a,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),"scale"!==y&&"transform"!==y&&~(y=_f[y]).indexOf(",")&&(y=y.split(",")[0])),M=y in vf)if(this.styles.save(y),T||((I=e._gsap).renderTransform&&!t.parseTransform||o_(e,t.parseTransform),F=!1!==t.smoothOrigin&&I.smooth,(T=this._pt=new C3(this._pt,a,O1,0,1,I.renderTransform,I,0,-1)).dep=1),"scale"===y)this._pt=new C3(this._pt,I,"scaleY",I.scaleY,(x?kg(I.scaleY,x+f):f)-I.scaleY||0,CH),this._pt.u=0,o.push("scaleY",y),y+="X";else{if("transformOrigin"===y){R.push(ju,a[ju]),u=Qet(u),I.svg?EH(e,u,0,F,0,this):((C=parseFloat(u.split(" ")[2])||0)!==I.zOrigin&&s6(this,I,"zOrigin",I.zOrigin,C),s6(this,a,y,gS(l),gS(u)));continue}if("svgOrigin"===y){EH(e,u,1,F,0,this);continue}if(y in Nse){qet(this,I,y,p,x?kg(p,x+u):u);continue}if("smoothOrigin"===y){s6(this,I,"smooth",I.smooth,u);continue}if("force3D"===y){I[y]=u;continue}if("transform"===y){Ket(this,u,e);continue}}else y in a||(y=Wg(y)||y);if(M||(f||0===f)&&(p||0===p)&&!Det.test(u)&&y in a)f||(f=0),(w=(l+"").substr((p+"").length))!==(C=sl(u)||(y in n4.units?n4.units[y]:w))&&(p=o6(e,y,l,C)),this._pt=new C3(this._pt,M?I:a,y,p,(x?kg(p,x+f):f)-p,M||"px"!==C&&"zIndex"!==y||!1===t.autoRound?CH:Ret),this._pt.u=C||0,w!==C&&"%"!==C&&(this._pt.b=l,this._pt.r=Bet);else if(y in a)Get.call(this,e,y,l,x?x+u:u);else{if(!(y in e)){XP(y,u);continue}this.add(e,y,l||e[y],x?x+u:u,r,s)}M||R.push(y,a[y]),o.push(y)}P&&bse(this)},render:function(e,t){if(t.tween._time||!yH())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:yf,aliases:_f,getSetter:function(e,t,i){var r=_f[t];return r&&r.indexOf(",")<0&&(t=r),t in vf&&t!==ju&&(e._gsap.x||yf(e,"x"))?i&&Ese===i?"scale"===t?Het:Pet:(Ese=i||{})&&("scale"===t?zet:Oet):e.style&&!WP(e.style[t])?Fet:~t.indexOf("-")?ket:pH(e,t)},core:{_removeProperty:r_,_getMatrix:SH}};a4.utils.checkPrefix=Wg,a4.core.getStyleSaver=Bse,function(n,e,t,i){var r=y3(n+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(s){vf[s]=1});y3(e,function(s){n4.units[s]="deg",Nse[s]=1}),_f[r[13]]=n+","+e,y3("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(s){var o=s.split(":");_f[o[1]]=r[o[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),y3("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){n4.units[n]="px"}),a4.registerPlugin(Wse);var $u=a4.registerPlugin(Wse)||a4;let Xet=(()=>{class n extends eo{constructor(t,i={}){super(t),this.isReflector=!0,this.type="Reflector",this.camera=new Gc;const r=this,s=new Dn(void 0!==i.color?i.color:8355711),o=i.textureWidth||512,a=i.textureHeight||512,c=i.clipBias||0,l=i.shader||n.ReflectorShader,u=void 0!==i.multisample?i.multisample:4,f=new Nu,p=new ge,g=new ge,_=new ge,y=new Ui,w=new ge(0,0,-1),C=new xo,x=new ge,M=new ge,T=new xo,I=new Ui,F=this.camera,P=new z4(o,a,{samples:u,type:O0}),R=new B2({uniforms:Ud.clone(l.uniforms),fragmentShader:l.fragmentShader,vertexShader:l.vertexShader});R.uniforms.tDiffuse.value=P.texture,R.uniforms.color.value=s,R.uniforms.textureMatrix.value=I,this.material=R,this.onBeforeRender=function(k,W,re){if(g.setFromMatrixPosition(r.matrixWorld),_.setFromMatrixPosition(re.matrixWorld),y.extractRotation(r.matrixWorld),p.set(0,0,1),p.applyMatrix4(y),x.subVectors(g,_),x.dot(p)>0)return;x.reflect(p).negate(),x.add(g),y.extractRotation(re.matrixWorld),w.set(0,0,-1),w.applyMatrix4(y),w.add(_),M.subVectors(g,w),M.reflect(p).negate(),M.add(g),F.position.copy(x),F.up.set(0,1,0),F.up.applyMatrix4(y),F.up.reflect(p),F.lookAt(M),F.far=re.far,F.updateMatrixWorld(),F.projectionMatrix.copy(re.projectionMatrix),I.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),I.multiply(F.projectionMatrix),I.multiply(F.matrixWorldInverse),I.multiply(r.matrixWorld),f.setFromNormalAndCoplanarPoint(p,g),f.applyMatrix4(F.matrixWorldInverse),C.set(f.normal.x,f.normal.y,f.normal.z,f.constant);const Le=F.projectionMatrix;T.x=(Math.sign(C.x)+Le.elements[8])/Le.elements[0],T.y=(Math.sign(C.y)+Le.elements[9])/Le.elements[5],T.z=-1,T.w=(1+Le.elements[10])/Le.elements[14],C.multiplyScalar(2/C.dot(T)),Le.elements[2]=C.x,Le.elements[6]=C.y,Le.elements[10]=C.z+1-c,Le.elements[14]=C.w,r.visible=!1;const me=k.getRenderTarget(),Q=k.xr.enabled,he=k.shadowMap.autoUpdate,K=k.outputEncoding,ae=k.toneMapping;k.xr.enabled=!1,k.shadowMap.autoUpdate=!1,k.outputEncoding=$h,k.toneMapping=0,k.setRenderTarget(P),k.state.buffers.depth.setMask(!0),!1===k.autoClear&&k.clear(),k.render(W,F),k.xr.enabled=Q,k.shadowMap.autoUpdate=he,k.outputEncoding=K,k.toneMapping=ae,k.setRenderTarget(me);const fe=re.viewport;void 0!==fe&&k.state.viewport(fe),r.visible=!0},this.getRenderTarget=function(){return P},this.dispose=function(){P.dispose(),r.material.dispose()}}}return n.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:"\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}",fragmentShader:"\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\n\t\t}"},n})();class Yet{constructor(e){this.height=1.2,this.width=.8,this.bottom=1.2,this.thicknessOSB=.015,this.gap=.1,Object.assign(this,e),this.top=this.bottom+this.height,this.roughHeight=this.height+2*this.gap,this.roughHeightOSB=this.roughHeight+2*this.thicknessOSB,this.roughWidth=this.width+2*this.gap,this.roughWidthOSB=this.roughWidth+2*this.thicknessOSB,this.roughBottom=this.bottom-this.gap,this.roughBottomOSB=this.roughBottom-this.thicknessOSB,this.roughTop=this.top+this.gap,this.roughTopOSB=this.roughTop+this.thicknessOSB}}var An=(()=>(function(n){n.ground="ground",n.pine="pine",n.osb="osb",n.gips="gips",n.insulation="insulation",n.outerSheet="outerSheet",n.facade="facade",n.tape="tape",n.foam="foam",n.hollowCoreSlap="hollowCoreSlap",n.concrete="concrete",n.white="white",n.whiteWood="whiteWood",n.ral9016="ral9016",n.normals="normals",n.unknown="unknown",n.window="window",n.floor="floor",n.roof="roof",n.wireFrame="wireFrame",n.windowDarkFrame="windowDarkFrame"}(An||(An={})),An))(),no=(()=>(function(n){n.hollowCoreSlap="hollowCoreSlap",n.hollowCoreSlapSide="hollowCoreSlapSide",n.foam="foam",n.gips="gips",n.pine="pine",n.concrete="concrete",n.osb="osb",n.whiteWood="whiteWood",n.insulation="insulation",n.roof="roof",n.fishbone="fishbone"}(no||(no={})),no))();const Zet=[{key:no.hollowCoreSlap,url:"assets/textures/hollowCoreSlap.jpg",offset:[0,0],scale:[.7,1]},{key:no.hollowCoreSlapSide,url:"assets/textures/hollowCoreSlapSide.jpg"},{key:no.foam,url:"assets/textures/foam.jpg"},{key:no.gips,url:"assets/textures/gips.jpg"},{key:no.pine,url:"assets/textures/western-yellow-pine.jpg"},{key:no.concrete,url:"assets/textures/hollowCoreSlapPlain.jpg"},{key:no.whiteWood,url:"assets/textures/whiteWood.jpg"},{key:no.osb,url:"assets/textures/osb.jpg"},{key:no.fishbone,url:"assets/textures/fishbone.jpg",rotation:90,scale:[.6,.6]},{key:no.insulation,url:"assets/textures/insulation.png"},{key:no.roof,url:"assets/textures/roof.png",rotation:90,scale:[.4,.4]}];let mS=(()=>{class n{constructor(t,i){this.cookieService=t,this.httpClient=i,this.colors={},this.textures={},[0,5,10,15,20,30,40,50,60,70,80,90,100].forEach(r=>{this.colors[r]=getComputedStyle(document.body).getPropertyValue(`--color-${r}`).trim()}),this.generateTextures()}generateTextures(){Zet.forEach(t=>{var i=new Image,r=new H4;r.image=i,i.onload=function(){t.scale||(t.scale=[1,1]),t.offset||(t.offset=[0,0]),r.wrapS=r.wrapT=z0,r.offset.set(t.offset[0],t.offset[1]),r.repeat.set(t.scale[0],t.scale[1]),t.rotation&&(r.rotation=Ci(t.rotation)),r.needsUpdate=!0},this.textures[t.key]=r,this.httpClient.get(t.url,{responseType:"arraybuffer",headers:{"cache-control":"private, max-age=3600"}}).subscribe(s=>{const o=new Uint8Array(s);this.cookieService.set(`texture-${t.key}`,`${JSON.stringify(o).slice(0,100)}`);var a=new Blob([o.buffer],{type:"image/png"}),c=URL.createObjectURL(a);this.textures[t.key].image.src=c})})}getMaterial(t,i=!1){let r=[new ma({color:65280})];if(t===An.pine&&(r=[new ma({map:this.textures[no.pine]})]),t===An.floor&&(r=[new ma({map:this.textures[no.fishbone]})]),t===An.ral9016&&(r=[new ma({color:15855850,bumpMap:this.textures[no.pine],bumpScale:.05})]),t===An.white&&(r=[new ma({color:16777215,bumpMap:this.textures[no.pine],bumpScale:.05})]),t===An.windowDarkFrame&&(r=[new ma({color:3355443})]),t===An.normals&&(r=[new Ck({})]),t===An.roof&&(r=[new ma({color:15592934,map:this.textures[no.roof],bumpMap:this.textures[no.roof]})]),t===An.wireFrame&&(r=[new ma({wireframe:!0})]),t===An.whiteWood&&(r=[new ma({map:this.textures[no.whiteWood]})]),t===An.osb&&(r=[new ma({map:this.textures[no.osb]})]),t===An.hollowCoreSlap){const s=this.textures[no.hollowCoreSlapSide],o=this.textures[no.concrete],a=this.textures[no.hollowCoreSlap],c=this.textures[no.foam];r=[new ma({map:s}),new ma({map:s}),new ma({map:o}),new ma({map:c}),new ma({map:a}),new ma({map:a})]}if(t===An.gips&&(r=[new ma({map:this.textures[no.gips]})]),t===An.ground&&(r=[new ma({color:this.colors[10]})]),t===An.concrete&&(r=[new ma({map:this.textures[no.concrete]})]),t===An.tape&&(r=[new ma({color:7829367})]),t===An.foam&&(r=[new ma({map:this.textures[no.foam]})]),t===An.insulation&&(r=[new ma({map:this.textures[no.insulation]})]),t===An.window&&(r=[new nf({depthWrite:!1,color:16777215,transmission:.9,opacity:.5,metalness:0,roughness:0,ior:1.5,transparent:!0,specularIntensity:1,specularColor:new Dn(16777215)})]),t===An.outerSheet){const s=new ma({map:this.textures[no.insulation]});r=[s],s.color=new Dn(6372634)}if(t===An.facade){const s=this.textures[no.pine];s.rotation=Ci(90),s.repeat.set(4,.3);const o=new ma({map:s});r=[o],o.color=new Dn(8394776)}return 1===r.length&&(r=[r[0],r[0],r[0],r[0],r[0],r[0]]),r.forEach(s=>{s.transparent=!0,s.needsUpdate=!0}),i?r[0]:r}}return n.\u0275fac=function(t){return new(t||n)(Ye(Iu),Ye(Md))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class LH{constructor(e){this.top=0,this.array=new Float32Array(e)}write(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y,this.array[this.top++]=e.z}}class Jet{constructor(e){this.top=0,this.array=new Float32Array(e)}write(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y}}class J0{constructor(e){this.plane=null,this.front=null,this.back=null,this.polygons=[],e&&this.build(e)}clone(){const e=new J0;return e.plane=this.plane&&this.plane.clone(),e.front=this.front&&this.front.clone(),e.back=this.back&&this.back.clone(),e.polygons=this.polygons.map(t=>t.clone()),e}invert(){for(let t=0;t<this.polygons.length;t++)this.polygons[t].flip();this.plane&&this.plane.flip(),this.front&&this.front.invert(),this.back&&this.back.invert();const e=this.front;this.front=this.back,this.back=e}clipPolygons(e){if(!this.plane)return e.slice();let t=new Array,i=new Array;for(let r=0;r<e.length;r++)this.plane.splitPolygon(e[r],t,i,t,i);return this.front&&(t=this.front.clipPolygons(t)),i=this.back?this.back.clipPolygons(i):[],t.concat(i)}clipTo(e){this.polygons=e.clipPolygons(this.polygons),this.front&&this.front.clipTo(e),this.back&&this.back.clipTo(e)}allPolygons(){let e=this.polygons.slice();return this.front&&(e=e.concat(this.front.allPolygons())),this.back&&(e=e.concat(this.back.allPolygons())),e}build(e){if(!e.length)return;this.plane||(this.plane=e[0].plane.clone());const t=[],i=[];for(let r=0;r<e.length;r++)this.plane.splitPolygon(e[r],this.polygons,this.polygons,t,i);t.length&&(this.front||(this.front=new J0),this.front.build(t)),i.length&&(this.back||(this.back=new J0),this.back.build(i))}}class b3{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}clone(){return new b3(this.x,this.y,this.z)}negate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}times(e){return this.x*=e,this.y*=e,this.z*=e,this}dividedBy(e){return this.x/=e,this.y/=e,this.z/=e,this}lerp(e,t){return this.add((new b3).copy(e).sub(this).times(t))}unit(){return this.dividedBy(this.length())}length(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))}normalize(){return this.unit()}cross(e){const t=this.clone(),i=t.x,r=t.y,s=t.z,o=e.x,a=e.y,c=e.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}toVector3(){return new ge(this.x,this.y,this.z)}}let ett=(()=>{class n{constructor(t,i){this.normal=t,this.w=i,this.normal=t,this.w=i}clone(){return new n(this.normal.clone(),this.w)}flip(){this.normal.negate(),this.w=-this.w}splitPolygon(t,i,r,s,o){let f=0;const p=[];for(let g=0;g<t.vertices.length;g++){const _=this.normal.dot(t.vertices[g].pos)-this.w,y=_<-n.EPSILON?2:_>n.EPSILON?1:0;f|=y,p.push(y)}switch(f){case 0:(this.normal.dot(t.plane.normal)>0?i:r).push(t);break;case 1:s.push(t);break;case 2:o.push(t);break;case 3:{const g=[],_=[];for(let y=0;y<t.vertices.length;y++){const w=(y+1)%t.vertices.length,C=p[y],x=p[w],M=t.vertices[y],T=t.vertices[w];if(2!=C&&g.push(M),1!=C&&_.push(2!=C?M.clone():M),3==(C|x)){const I=(this.w-this.normal.dot(M.pos))/this.normal.dot((new b3).copy(T.pos).sub(M.pos)),F=M.interpolate(T,I);g.push(F),_.push(F.clone())}}g.length>=3&&s.push(new jg(g,t.shared)),_.length>=3&&o.push(new jg(_,t.shared));break}}}static fromPoints(t,i,r){const s=(new b3).copy(i).sub(t).cross((new b3).copy(r).sub(t)).normalize();return new n(s.clone(),s.dot(t))}}return n.EPSILON=1e-5,n})();class jg{constructor(e,t){this.vertices=e,this.shared=t,this.plane=ett.fromPoints(e[0].pos,e[1].pos,e[2].pos)}clone(){return new jg(this.vertices.map(e=>e.clone()),this.shared)}flip(){this.vertices.reverse().map(e=>e.flip()),this.plane.flip()}}class AS{constructor(e,t,i,r){this.pos=(new b3).copy(e),this.normal=(new b3).copy(t),this.uv=(new b3).copy(i),this.uv.z=0,r&&(this.color=(new b3).copy(r))}clone(){return new AS(this.pos,this.normal,this.uv,this.color)}flip(){this.normal.negate()}interpolate(e,t){return new AS(this.pos.clone().lerp(e.pos,t),this.normal.clone().lerp(e.normal,t),this.uv.clone().lerp(e.uv,t),this.color&&e.color&&this.color.clone().lerp(e.color,t))}}class Ya{constructor(){this.polygons=new Array}static fromPolygons(e){const t=new Ya;return t.polygons=e,t}static fromGeometry(e,t){let i=[];const r=e.attributes.position,s=e.attributes.normal,o=e.attributes.uv,a=e.attributes.color,c=e.groups;let l;if(e.index)l=e.index.array;else{l=new Array(r.array.length/r.itemSize|0);for(let f=0;f<l.length;f++)l[f]=f}i=new Array(l.length/3|0);for(let f=0,p=0,g=l.length;f<g;f+=3,p++){const _=new Array(3);for(let y=0;y<3;y++){const w=l[f+y],C=3*w,x=2*w,F=s.array[C],P=s.array[C+1],R=s.array[C+2],k=o?.array[x],W=o?.array[x+1];_[y]=new AS(new b3(r.array[C],r.array[C+1],r.array[C+2]),new b3(F,P,R),new b3(k,W,0),a&&new b3(a.array[x],a.array[x+1],a.array[x+2]))}if(void 0===t&&c&&c.length>0)for(const y of c)f>=y.start&&f<y.start+y.count&&(i[p]=new jg(_,y.materialIndex));else i[p]=new jg(_,t)}return Ya.fromPolygons(i.filter(f=>!isNaN(f.plane.normal.x)))}static toGeometry(e,t){let i=0;const r=e.polygons;for(const g of r)i+=g.vertices.length-2;const s=new Ar,o=new LH(3*i*3),a=new LH(3*i*3),c=new Jet(2*i*3);let l;const u=[],f=[];for(const g of r){const _=g.vertices,y=_.length;void 0!==g.shared&&(u[g.shared]||(u[g.shared]=[])),y&&void 0!==_[0].color&&(l||(l=new LH(3*i*3)));for(let w=3;w<=y;w++)(void 0===g.shared?f:u[g.shared]).push(o.top/3,o.top/3+1,o.top/3+2),o.write(_[0].pos),o.write(_[w-2].pos),o.write(_[w-1].pos),a.write(_[0].normal),a.write(_[w-2].normal),a.write(_[w-1].normal),c&&(c.write(_[0].uv),c.write(_[w-2].uv),c.write(_[w-1].uv)),l&&(l.write(_[0].color),l.write(_[w-2].color),l.write(_[w-1].color))}s.setAttribute("position",new qa(o.array,3)),s.setAttribute("normal",new qa(a.array,3)),c&&s.setAttribute("uv",new qa(c.array,2)),l&&s.setAttribute("color",new qa(l.array,3));for(let g=0;g<u.length;g++)void 0===u[g]&&(u[g]=[]);if(u.length){let g=[],_=0;for(let y=0;y<u.length;y++)s.addGroup(_,u[y].length,y),_+=u[y].length,g=g.concat(u[y]);s.addGroup(_,f.length,u.length),g=g.concat(f),s.setIndex(g)}const p=(new Ui).copy(t).invert();return s.applyMatrix4(p),s.computeBoundingSphere(),s.computeBoundingBox(),s}static fromMesh(e,t){const i=Ya.fromGeometry(e.geometry,t),r=new ge,s=new p3;s.getNormalMatrix(e.matrix);for(let o=0;o<i.polygons.length;o++){const a=i.polygons[o];for(let c=0;c<a.vertices.length;c++){const l=a.vertices[c];l.pos.copy(r.copy(l.pos.toVector3()).applyMatrix4(e.matrix)),l.normal.copy(r.copy(l.normal.toVector3()).applyMatrix3(s))}}return i}static toMesh(e,t,i){const r=Ya.toGeometry(e,t),s=new eo(r,i);return s.matrix.copy(t),s.matrix.decompose(s.position,s.quaternion,s.scale),s.rotation.setFromQuaternion(s.quaternion),s.updateMatrixWorld(),s.castShadow=s.receiveShadow=!0,s}static union(e,t){const i=Ya.fromMesh(e),r=Ya.fromMesh(t);return Ya.toMesh(i.union(r),e.matrix,e.material)}static subtract(e,t){const i=Ya.fromMesh(e),r=Ya.fromMesh(t);return Ya.toMesh(i.subtract(r),e.matrix,e.material)}static intersect(e,t){const i=Ya.fromMesh(e),r=Ya.fromMesh(t);return Ya.toMesh(i.intersect(r),e.matrix,e.material)}clone(){const e=new Ya;return e.polygons=this.polygons.map(t=>t.clone()).filter(t=>Number.isFinite(t.plane.w)),e}toPolygons(){return this.polygons}union(e){const t=new J0(this.clone().polygons),i=new J0(e.clone().polygons);return t.clipTo(i),i.clipTo(t),i.invert(),i.clipTo(t),i.invert(),t.build(i.allPolygons()),Ya.fromPolygons(t.allPolygons())}subtract(e){const t=new J0(this.clone().polygons),i=new J0(e.clone().polygons);return t.invert(),t.clipTo(i),i.clipTo(t),i.invert(),i.clipTo(t),i.invert(),t.build(i.allPolygons()),t.invert(),Ya.fromPolygons(t.allPolygons())}intersect(e){const t=new J0(this.clone().polygons),i=new J0(e.clone().polygons);return t.invert(),i.clipTo(t),i.invert(),t.clipTo(i),i.clipTo(t),t.build(i.allPolygons()),t.invert(),Ya.fromPolygons(t.allPolygons())}inverse(){const e=this.clone();for(const t of e.polygons)t.flip();return e}toMesh(e,t){return Ya.toMesh(this,e,t)}toGeometry(e){return Ya.toGeometry(this,e)}}const jse={type:"change"},DH={type:"start"},$se={type:"end"};class ttt extends Y8{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new ge,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(De){De.addEventListener("keydown",us),this._domElementKeyEvents=De},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(jse),i.update(),s=r.NONE},this.update=function(){const De=new ge,Jt=(new D2).setFromUnitVectors(e.up,new ge(0,1,0)),ln=Jt.clone().invert(),Wn=new ge,jn=new D2,er=2*Math.PI;return function(){const No=i.object.position;De.copy(No).sub(i.target),De.applyQuaternion(Jt),a.setFromVector3(De),i.autoRotate&&s===r.NONE&&k(function P(){return 2*Math.PI/60/60*i.autoRotateSpeed}()),i.enableDamping?(a.theta+=c.theta*i.dampingFactor,a.phi+=c.phi*i.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let at=i.minAzimuthAngle,Bn=i.maxAzimuthAngle;return isFinite(at)&&isFinite(Bn)&&(at<-Math.PI?at+=er:at>Math.PI&&(at-=er),Bn<-Math.PI?Bn+=er:Bn>Math.PI&&(Bn-=er),a.theta=at<=Bn?Math.max(at,Math.min(Bn,a.theta)):a.theta>(at+Bn)/2?Math.max(at,a.theta):Math.min(Bn,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=l,a.radius=Math.max(i.minDistance,Math.min(i.maxDistance,a.radius)),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),De.setFromSpherical(a),De.applyQuaternion(ln),No.copy(i.target).add(De),i.object.lookAt(i.target),!0===i.enableDamping?(c.theta*=1-i.dampingFactor,c.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(c.set(0,0,0),u.set(0,0,0)),l=1,!!(f||Wn.distanceToSquared(i.object.position)>o||8*(1-jn.dot(i.object.quaternion))>o)&&(i.dispatchEvent(jse),Wn.copy(i.object.position),jn.copy(i.object.quaternion),f=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",Tt),i.domElement.removeEventListener("pointerdown",vn),i.domElement.removeEventListener("pointercancel",Cn),i.domElement.removeEventListener("wheel",ar),i.domElement.removeEventListener("pointermove",qn),i.domElement.removeEventListener("pointerup",En),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",us)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new Rte,c=new Rte;let l=1;const u=new ge;let f=!1;const p=new Qt,g=new Qt,_=new Qt,y=new Qt,w=new Qt,C=new Qt,x=new Qt,M=new Qt,T=new Qt,I=[],F={};function R(){return Math.pow(.95,i.zoomSpeed)}function k(De){c.theta-=De}function W(De){c.phi-=De}const re=function(){const De=new ge;return function(ln,Wn){De.setFromMatrixColumn(Wn,0),De.multiplyScalar(-ln),u.add(De)}}(),Le=function(){const De=new ge;return function(ln,Wn){!0===i.screenSpacePanning?De.setFromMatrixColumn(Wn,1):(De.setFromMatrixColumn(Wn,0),De.crossVectors(i.object.up,De)),De.multiplyScalar(ln),u.add(De)}}(),me=function(){const De=new ge;return function(ln,Wn){const jn=i.domElement;if(i.object.isPerspectiveCamera){De.copy(i.object.position).sub(i.target);let kr=De.length();kr*=Math.tan(i.object.fov/2*Math.PI/180),re(2*ln*kr/jn.clientHeight,i.object.matrix),Le(2*Wn*kr/jn.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(re(ln*(i.object.right-i.object.left)/i.object.zoom/jn.clientWidth,i.object.matrix),Le(Wn*(i.object.top-i.object.bottom)/i.object.zoom/jn.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function Q(De){i.object.isPerspectiveCamera?l/=De:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*De)),i.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function he(De){i.object.isPerspectiveCamera?l*=De:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/De)),i.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function K(De){p.set(De.clientX,De.clientY)}function fe(De){y.set(De.clientX,De.clientY)}function ut(){1===I.length?p.set(I[0].pageX,I[0].pageY):p.set(.5*(I[0].pageX+I[1].pageX),.5*(I[0].pageY+I[1].pageY))}function It(){1===I.length?y.set(I[0].pageX,I[0].pageY):y.set(.5*(I[0].pageX+I[1].pageX),.5*(I[0].pageY+I[1].pageY))}function xt(){const De=I[0].pageX-I[1].pageX,Jt=I[0].pageY-I[1].pageY,ln=Math.sqrt(De*De+Jt*Jt);x.set(0,ln)}function Sn(De){if(1==I.length)g.set(De.pageX,De.pageY);else{const ln=wi(De);g.set(.5*(De.pageX+ln.x),.5*(De.pageY+ln.y))}_.subVectors(g,p).multiplyScalar(i.rotateSpeed);const Jt=i.domElement;k(2*Math.PI*_.x/Jt.clientHeight),W(2*Math.PI*_.y/Jt.clientHeight),p.copy(g)}function cn(De){if(1===I.length)w.set(De.pageX,De.pageY);else{const Jt=wi(De);w.set(.5*(De.pageX+Jt.x),.5*(De.pageY+Jt.y))}C.subVectors(w,y).multiplyScalar(i.panSpeed),me(C.x,C.y),y.copy(w)}function Ti(De){const Jt=wi(De),ln=De.pageX-Jt.x,Wn=De.pageY-Jt.y,jn=Math.sqrt(ln*ln+Wn*Wn);M.set(0,jn),T.set(0,Math.pow(M.y/x.y,i.zoomSpeed)),Q(T.y),x.copy(M)}function vn(De){!1!==i.enabled&&(0===I.length&&(i.domElement.setPointerCapture(De.pointerId),i.domElement.addEventListener("pointermove",qn),i.domElement.addEventListener("pointerup",En)),function gn(De){I.push(De)}(De),"touch"===De.pointerType?function Oe(De){switch(In(De),I.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;ut(),s=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;It(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Zt(){i.enableZoom&&xt(),i.enablePan&&It()})(),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function an(){i.enableZoom&&xt(),i.enableRotate&&ut()})(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(DH)}(De):function Un(De){let Jt;switch(De.button){case 0:Jt=i.mouseButtons.LEFT;break;case 1:Jt=i.mouseButtons.MIDDLE;break;case 2:Jt=i.mouseButtons.RIGHT;break;default:Jt=-1}switch(Jt){case 1:if(!1===i.enableZoom)return;(function ae(De){x.set(De.clientX,De.clientY)})(De),s=r.DOLLY;break;case 0:if(De.ctrlKey||De.metaKey||De.shiftKey){if(!1===i.enablePan)return;fe(De),s=r.PAN}else{if(!1===i.enableRotate)return;K(De),s=r.ROTATE}break;case 2:if(De.ctrlKey||De.metaKey||De.shiftKey){if(!1===i.enableRotate)return;K(De),s=r.ROTATE}else{if(!1===i.enablePan)return;fe(De),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(DH)}(De))}function qn(De){!1!==i.enabled&&("touch"===De.pointerType?function ve(De){switch(In(De),s){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;Sn(De),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;cn(De),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Ot(De){i.enableZoom&&Ti(De),i.enablePan&&cn(De)})(De),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function Rt(De){i.enableZoom&&Ti(De),i.enableRotate&&Sn(De)})(De),i.update();break;default:s=r.NONE}}(De):function fi(De){switch(s){case r.ROTATE:if(!1===i.enableRotate)return;!function de(De){g.set(De.clientX,De.clientY),_.subVectors(g,p).multiplyScalar(i.rotateSpeed);const Jt=i.domElement;k(2*Math.PI*_.x/Jt.clientHeight),W(2*Math.PI*_.y/Jt.clientHeight),p.copy(g),i.update()}(De);break;case r.DOLLY:if(!1===i.enableZoom)return;!function ke(De){M.set(De.clientX,De.clientY),T.subVectors(M,x),T.y>0?Q(R()):T.y<0&&he(R()),x.copy(M),i.update()}(De);break;case r.PAN:if(!1===i.enablePan)return;!function et(De){w.set(De.clientX,De.clientY),C.subVectors(w,y).multiplyScalar(i.panSpeed),me(C.x,C.y),y.copy(w),i.update()}(De)}}(De))}function En(De){bn(De),0===I.length&&(i.domElement.releasePointerCapture(De.pointerId),i.domElement.removeEventListener("pointermove",qn),i.domElement.removeEventListener("pointerup",En)),i.dispatchEvent($se),s=r.NONE}function Cn(De){bn(De)}function ar(De){!1===i.enabled||!1===i.enableZoom||s!==r.NONE||(De.preventDefault(),i.dispatchEvent(DH),function Fe(De){De.deltaY<0?he(R()):De.deltaY>0&&Q(R()),i.update()}(De),i.dispatchEvent($se))}function us(De){!1===i.enabled||!1===i.enablePan||function wt(De){let Jt=!1;switch(De.code){case i.keys.UP:me(0,i.keyPanSpeed),Jt=!0;break;case i.keys.BOTTOM:me(0,-i.keyPanSpeed),Jt=!0;break;case i.keys.LEFT:me(i.keyPanSpeed,0),Jt=!0;break;case i.keys.RIGHT:me(-i.keyPanSpeed,0),Jt=!0}Jt&&(De.preventDefault(),i.update())}(De)}function Tt(De){!1!==i.enabled&&De.preventDefault()}function bn(De){delete F[De.pointerId];for(let Jt=0;Jt<I.length;Jt++)if(I[Jt].pointerId==De.pointerId)return void I.splice(Jt,1)}function In(De){let Jt=F[De.pointerId];void 0===Jt&&(Jt=new Qt,F[De.pointerId]=Jt),Jt.set(De.pageX,De.pageY)}function wi(De){return F[(De.pointerId===I[0].pointerId?I[1]:I[0]).pointerId]}i.domElement.addEventListener("contextmenu",Tt),i.domElement.addEventListener("pointerdown",vn),i.domElement.addEventListener("pointercancel",Cn),i.domElement.addEventListener("wheel",ar,{passive:!1}),this.update()}}class ntt extends Dze{constructor(e){super(e),this.type=O0}parse(e){const a=function(M,T){switch(M){case 1:console.error("THREE.RGBELoader Read Error: "+(T||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(T||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(T||""));break;default:console.error("THREE.RGBELoader: Error: "+(T||""))}return-1},p=function(M,T,I){T=T||1024;let P=M.pos,R=-1,k=0,W="",re=String.fromCharCode.apply(null,new Uint16Array(M.subarray(P,P+128)));for(;0>(R=re.indexOf("\n"))&&k<T&&P<M.byteLength;)W+=re,k+=re.length,P+=128,re+=String.fromCharCode.apply(null,new Uint16Array(M.subarray(P,P+128)));return-1<R&&(!1!==I&&(M.pos+=k+R+1),W+re.slice(0,R))},y=function(M,T,I,F){const R=Math.pow(2,M[T+3]-128)/255;I[F+0]=M[T+0]*R,I[F+1]=M[T+1]*R,I[F+2]=M[T+2]*R,I[F+3]=1},w=function(M,T,I,F){const R=Math.pow(2,M[T+3]-128)/255;I[F+0]=uM.toHalfFloat(Math.min(M[T+0]*R,65504)),I[F+1]=uM.toHalfFloat(Math.min(M[T+1]*R,65504)),I[F+2]=uM.toHalfFloat(Math.min(M[T+2]*R,65504)),I[F+3]=uM.toHalfFloat(1)},C=new Uint8Array(e);C.pos=0;const x=function(M){const I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,F=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,P=/^\s*FORMAT=(\S+)\s*$/,R=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,k={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let W,re;if(M.pos>=M.byteLength||!(W=p(M)))return a(1,"no header found");if(!(re=W.match(/^#\?(\S+)/)))return a(3,"bad initial token");for(k.valid|=1,k.programtype=re[1],k.string+=W+"\n";W=p(M),!1!==W;)if(k.string+=W+"\n","#"!==W.charAt(0)){if((re=W.match(I))&&(k.gamma=parseFloat(re[1])),(re=W.match(F))&&(k.exposure=parseFloat(re[1])),(re=W.match(P))&&(k.valid|=2,k.format=re[1]),(re=W.match(R))&&(k.valid|=4,k.height=parseInt(re[1],10),k.width=parseInt(re[2],10)),2&k.valid&&4&k.valid)break}else k.comments+=W+"\n";return 2&k.valid?4&k.valid?k:a(3,"missing image size specifier"):a(3,"missing format specifier")}(C);if(-1!==x){const M=x.width,T=x.height,I=function(M,T,I){const F=T;if(F<8||F>32767||2!==M[0]||2!==M[1]||128&M[2])return new Uint8Array(M);if(F!==(M[2]<<8|M[3]))return a(3,"wrong scanline width");const P=new Uint8Array(4*T*I);if(!P.length)return a(4,"unable to allocate buffer space");let R=0,k=0;const W=4*F,re=new Uint8Array(4),Le=new Uint8Array(W);let me=I;for(;me>0&&k<M.byteLength;){if(k+4>M.byteLength)return a(1);if(re[0]=M[k++],re[1]=M[k++],re[2]=M[k++],re[3]=M[k++],2!=re[0]||2!=re[1]||(re[2]<<8|re[3])!=F)return a(3,"bad rgbe scanline format");let he,Q=0;for(;Q<W&&k<M.byteLength;){he=M[k++];const ae=he>128;if(ae&&(he-=128),0===he||Q+he>W)return a(3,"bad scanline data");if(ae){const fe=M[k++];for(let de=0;de<he;de++)Le[Q++]=fe}else Le.set(M.subarray(k,k+he),Q),Q+=he,k+=he}const K=F;for(let ae=0;ae<K;ae++){let fe=0;P[R]=Le[ae+fe],fe+=F,P[R+1]=Le[ae+fe],fe+=F,P[R+2]=Le[ae+fe],fe+=F,P[R+3]=Le[ae+fe],R+=4}me--}return P}(C.subarray(C.pos),M,T);if(-1!==I){let F,P,R;switch(this.type){case P4:R=I.length/4;const k=new Float32Array(4*R);for(let re=0;re<R;re++)y(I,4*re,k,4*re);F=k,P=P4;break;case O0:R=I.length/4;const W=new Uint16Array(4*R);for(let re=0;re<R;re++)w(I,4*re,W,4*re);F=W,P=O0;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:M,height:T,data:F,header:x.string,gamma:x.gamma,exposure:x.exposure,type:P}}}return null}setDataType(e){return this.type=e,this}load(e,t,i,r){return super.load(e,function s(o,a){switch(o.type){case P4:case O0:o.encoding=$h,o.minFilter=$a,o.magFilter=$a,o.generateMipmaps=!1,o.flipY=!0}t&&t(o,a)},i,r)}}class eh{constructor(e,t,i,r,s="div"){this.parent=e,this.object=t,this.property=i,this._disabled=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),eh.nextNameID=eh.nextNameID||0,this.$name.id="lil-gui-name-"+ ++eh.nextNameID,this.$widget=document.createElement(s),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}listen(e=!0){return this._listening=e,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback),this.updateDisplay()}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class itt extends eh{constructor(e,t,i){super(e,t,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function IH(n){let e,t;return(e=n.match(/(#|0x)?([a-f0-9]{6})/i))?t=e[2]:(e=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),!!t&&"#"+t}const rtt={isPrimitive:!0,match:n=>"string"==typeof n,fromHexString:IH,toHexString:IH},c_={isPrimitive:!0,match:n=>"number"==typeof n,fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},stt={isPrimitive:!1,match:Array.isArray,fromHexString(n,e,t=1){const i=c_.fromHexString(n);e[0]=(i>>16&255)/255*t,e[1]=(i>>8&255)/255*t,e[2]=(255&i)/255*t},toHexString:([n,e,t],i=1)=>c_.toHexString(n*(i=255/i)<<16^e*i<<8^t*i<<0)},ott={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,e,t=1){const i=c_.fromHexString(n);e.r=(i>>16&255)/255*t,e.g=(i>>8&255)/255*t,e.b=(255&i)/255*t},toHexString:({r:n,g:e,b:t},i=1)=>c_.toHexString(n*(i=255/i)<<16^e*i<<8^t*i<<0)},att=[rtt,c_,stt,ott];class ctt extends eh{constructor(e,t,i,r){var s;super(e,t,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(s=this.initialValue,att.find(o=>o.match(s))),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const o=IH(this.$text.value);o&&this._setValueFromHexString(o)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class BH extends eh{constructor(e,t,i){super(e,t,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{}),this.$disable=this.$button}}class ltt extends eh{constructor(e,t,i,r,s,o){super(e,t,i,"number"),this._initInput(),this.min(r),this.max(s);const a=void 0!==o;this.step(a?o:this._getImplicitStep(),a),this.updateDisplay()}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=e),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=u=>{const f=parseFloat(this.$input.value);isNaN(f)||(this._snapClampSetValue(f+u),this.$input.value=this.getValue())};let t,i,r,s,o,a=!1;const c=u=>{if(a){const f=u.clientX-t;Math.abs(u.clientY-i)>5?(u.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(f)>5&&l()}a||(o-=(u.clientY-r)*this._step*this._arrowKeyMultiplier(u),s+o>this._max?o=this._max-s:s+o<this._min&&(o=this._min-s),this._snapClampSetValue(s+o)),r=u.clientY},l=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",l)};this.$input.addEventListener("input",()=>{const u=parseFloat(this.$input.value);isNaN(u)||this.setValue(this._clamp(u))}),this.$input.addEventListener("keydown",u=>{"Enter"===u.code&&this.$input.blur(),"ArrowUp"===u.code&&(u.preventDefault(),e(this._step*this._arrowKeyMultiplier(u))),"ArrowDown"===u.code&&(u.preventDefault(),e(this._step*this._arrowKeyMultiplier(u)*-1))}),this.$input.addEventListener("wheel",u=>{this._inputFocused&&(u.preventDefault(),e(this._step*this._normalizeMouseWheel(u)))}),this.$input.addEventListener("mousedown",u=>{t=u.clientX,i=r=u.clientY,a=!0,s=this.getValue(),o=0,window.addEventListener("mousemove",c),window.addEventListener("mouseup",l)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=p=>{const g=this.$slider.getBoundingClientRect();let _=(p-(w=g.left))/(g.right-w)*(this._max-(x=this._min))+x;var w,x;this._snapClampSetValue(_)},t=p=>{e(p.clientX)},i=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",i)};let r,s,o=!1;const a=p=>{p.preventDefault(),this._setDraggingStyle(!0),e(p.touches[0].clientX),o=!1},c=p=>{if(o){const _=p.touches[0].clientY-s;Math.abs(p.touches[0].clientX-r)>Math.abs(_)?a(p):(window.removeEventListener("touchmove",c),window.removeEventListener("touchend",l))}else p.preventDefault(),e(p.touches[0].clientX)},l=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",l)},u=this._callOnFinishChange.bind(this);let f;this.$slider.addEventListener("mousedown",p=>{this._setDraggingStyle(!0),e(p.clientX),window.addEventListener("mousemove",t),window.addEventListener("mouseup",i)}),this.$slider.addEventListener("touchstart",p=>{p.touches.length>1||(this._hasScrollBar?(r=p.touches[0].clientX,s=p.touches[0].clientY,o=!0):a(p),window.addEventListener("touchmove",c),window.addEventListener("touchend",l))}),this.$slider.addEventListener("wheel",p=>{if(Math.abs(p.deltaX)<Math.abs(p.deltaY)&&this._hasScrollBar)return;p.preventDefault();const g=this._normalizeMouseWheel(p)*this._step;this._snapClampSetValue(this.getValue()+g),this.$input.value=this.getValue(),clearTimeout(f),f=setTimeout(u,400)})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle("lil-gui-"+t,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:i}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,i=-e.wheelDelta/120,i*=this._stepExplicit?1:10),t+-i}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class utt extends eh{constructor(e,t,i,r){super(e,t,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(s=>{const o=document.createElement("option");o.innerHTML=s,this.$select.appendChild(o)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=-1===t?e:this._names[t],this}}class htt extends eh{constructor(e,t,i){super(e,t,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{"Enter"===r.code&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let qse=!1;class RH{constructor({parent:e,autoPlace:t=void 0===e,container:i,width:r,title:s="Controls",injectStyles:o=!0,touchStyles:a=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",c=>{"Enter"!==c.code&&"Space"!==c.code||(c.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),a&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!qse&&o&&(function(c){const l=document.createElement("style");l.innerHTML='.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"\u2195";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"\u25be";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"\u25b8"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"\u2713";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}';const u=document.querySelector("head link[rel=stylesheet], head style");u?document.head.insertBefore(l,u):document.head.appendChild(l)}(),qse=!0),i?i.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this.domElement.addEventListener("keydown",c=>c.stopPropagation()),this.domElement.addEventListener("keyup",c=>c.stopPropagation())}add(e,t,i,r,s){if(Object(i)===i)return new utt(this,e,t,i);const o=e[t];switch(typeof o){case"number":return new ltt(this,e,t,i,r,s);case"boolean":return new itt(this,e,t);case"string":return new htt(this,e,t);case"function":return new BH(this,e,t)}console.error("gui.add failed\n\tproperty:",t,"\n\tobject:",e,"\n\tvalue:",o)}addColor(e,t,i=1){return new ctt(this,e,t,i)}addFolder(e){return new RH({parent:this,title:e})}load(e,t=!0){return e.controllers&&this.controllers.forEach(i=>{i instanceof BH||i._name in e.controllers&&i.load(e.controllers[i._name])}),t&&e.folders&&this.folders.forEach(i=>{i._title in e.folders&&i.load(e.folders[i._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof BH)){if(i._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);t.controllers[i._name]=i.save()}}),e&&this.folders.forEach(i=>{if(i._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);t.folders[i._title]=i.save()}),t}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{this.$children.style.height=this.$children.clientHeight+"px",this.domElement.classList.add("transition");const i=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);const r=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(t=>t.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),void 0!==this._onChange&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}const l_={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class vS{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const ftt=new o5(-1,1,1,-1,0,1),FH=new Ar;FH.setAttribute("position",new ai([-1,3,0,-1,-1,0,3,-1,0],3)),FH.setAttribute("uv",new ai([0,2,0,0,2,0],2));class Kse{constructor(e){this._mesh=new eo(FH,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,ftt)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Xse extends vS{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof B2?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Ud.clone(e.uniforms),this.material=new B2({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Kse(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class Yse extends vS{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const r=e.getContext(),s=e.state;let o,a;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class dtt extends vS{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class ptt{constructor(e,t){if(this.renderer=e,void 0===t){const i=e.getSize(new Qt);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,(t=new z4(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===l_&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===Xse&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Xse(l_),this.clock=new Ete}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(!1!==o.enabled){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),o.needsSwap){if(i){const a=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Yse&&(o instanceof Yse?i=!0:o instanceof dtt&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new Qt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new o5(-1,1,1,-1,0,1);const kH=new Ar;kH.setAttribute("position",new ai([-1,3,0,-1,-1,0,3,-1,0],3)),kH.setAttribute("uv",new ai([0,2,0,0,2,0],2));class Zse{constructor(e=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(let t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(e,t,i){return e[0]*t+e[1]*i}dot3(e,t,i,r){return e[0]*t+e[1]*i+e[2]*r}dot4(e,t,i,r,s){return e[0]*t+e[1]*i+e[2]*r+e[3]*s}noise(e,t){let i,r,s;const a=(e+t)*(.5*(Math.sqrt(3)-1)),c=Math.floor(e+a),l=Math.floor(t+a),u=(3-Math.sqrt(3))/6,f=(c+l)*u,_=e-(c-f),y=t-(l-f);let w,C;_>y?(w=1,C=0):(w=0,C=1);const x=_-w+u,M=y-C+u,T=_-1+2*u,I=y-1+2*u,F=255&c,P=255&l,k=this.perm[F+w+this.perm[P+C]]%12,W=this.perm[F+1+this.perm[P+1]]%12;let re=.5-_*_-y*y;re<0?i=0:(re*=re,i=re*re*this.dot(this.grad3[this.perm[F+this.perm[P]]%12],_,y));let Le=.5-x*x-M*M;Le<0?r=0:(Le*=Le,r=Le*Le*this.dot(this.grad3[k],x,M));let me=.5-T*T-I*I;return me<0?s=0:(me*=me,s=me*me*this.dot(this.grad3[W],T,I)),70*(i+r+s)}noise3d(e,t,i){let r,s,o,a;const l=.3333333333333333*(e+t+i),u=Math.floor(e+l),f=Math.floor(t+l),p=Math.floor(i+l),g=1/6,_=(u+f+p)*g,x=e-(u-_),M=t-(f-_),T=i-(p-_);let I,F,P,R,k,W;x>=M?M>=T?(I=1,F=0,P=0,R=1,k=1,W=0):x>=T?(I=1,F=0,P=0,R=1,k=0,W=1):(I=0,F=0,P=1,R=1,k=0,W=1):M<T?(I=0,F=0,P=1,R=0,k=1,W=1):x<T?(I=0,F=1,P=0,R=0,k=1,W=1):(I=0,F=1,P=0,R=1,k=1,W=0);const re=x-I+g,Le=M-F+g,me=T-P+g,Q=x-R+2*g,he=M-k+2*g,K=T-W+2*g,ae=x-1+.5,fe=M-1+.5,de=T-1+.5,ke=255&u,et=255&f,Fe=255&p,ut=this.perm[ke+I+this.perm[et+F+this.perm[Fe+P]]]%12,It=this.perm[ke+R+this.perm[et+k+this.perm[Fe+W]]]%12,xt=this.perm[ke+1+this.perm[et+1+this.perm[Fe+1]]]%12;let Zt=.6-x*x-M*M-T*T;Zt<0?r=0:(Zt*=Zt,r=Zt*Zt*this.dot3(this.grad3[this.perm[ke+this.perm[et+this.perm[Fe]]]%12],x,M,T));let an=.6-re*re-Le*Le-me*me;an<0?s=0:(an*=an,s=an*an*this.dot3(this.grad3[ut],re,Le,me));let Sn=.6-Q*Q-he*he-K*K;Sn<0?o=0:(Sn*=Sn,o=Sn*Sn*this.dot3(this.grad3[It],Q,he,K));let cn=.6-ae*ae-fe*fe-de*de;return cn<0?a=0:(cn*=cn,a=cn*cn*this.dot3(this.grad3[xt],ae,fe,de)),32*(r+s+o+a)}noise4d(e,t,i,r){const s=this.grad4,o=this.simplex,a=this.perm,c=(Math.sqrt(5)-1)/4,l=(5-Math.sqrt(5))/20;let u,f,p,g,_;const y=(e+t+i+r)*c,w=Math.floor(e+y),C=Math.floor(t+y),x=Math.floor(i+y),M=Math.floor(r+y),T=(w+C+x+M)*l,k=e-(w-T),W=t-(C-T),re=i-(x-T),Le=r-(M-T),de=(k>W?32:0)+(k>re?16:0)+(W>re?8:0)+(k>Le?4:0)+(W>Le?2:0)+(re>Le?1:0),ke=o[de][0]>=3?1:0,et=o[de][1]>=3?1:0,Fe=o[de][2]>=3?1:0,wt=o[de][3]>=3?1:0,ut=o[de][0]>=2?1:0,It=o[de][1]>=2?1:0,xt=o[de][2]>=2?1:0,Zt=o[de][3]>=2?1:0,an=o[de][0]>=1?1:0,Sn=o[de][1]>=1?1:0,cn=o[de][2]>=1?1:0,Ti=o[de][3]>=1?1:0,Ot=k-ke+l,Rt=W-et+l,vn=re-Fe+l,qn=Le-wt+l,En=k-ut+2*l,Cn=W-It+2*l,Un=re-xt+2*l,fi=Le-Zt+2*l,ar=k-an+3*l,us=W-Sn+3*l,Oe=re-cn+3*l,ve=Le-Ti+3*l,Tt=k-1+4*l,gn=W-1+4*l,bn=re-1+4*l,In=Le-1+4*l,wi=255&w,De=255&C,Jt=255&x,ln=255&M,jn=a[wi+ke+a[De+et+a[Jt+Fe+a[ln+wt]]]]%32,er=a[wi+ut+a[De+It+a[Jt+xt+a[ln+Zt]]]]%32,kr=a[wi+an+a[De+Sn+a[Jt+cn+a[ln+Ti]]]]%32,No=a[wi+1+a[De+1+a[Jt+1+a[ln+1]]]]%32;let at=.6-k*k-W*W-re*re-Le*Le;at<0?u=0:(at*=at,u=at*at*this.dot4(s[a[wi+a[De+a[Jt+a[ln]]]]%32],k,W,re,Le));let Bn=.6-Ot*Ot-Rt*Rt-vn*vn-qn*qn;Bn<0?f=0:(Bn*=Bn,f=Bn*Bn*this.dot4(s[jn],Ot,Rt,vn,qn));let Ht=.6-En*En-Cn*Cn-Un*Un-fi*fi;Ht<0?p=0:(Ht*=Ht,p=Ht*Ht*this.dot4(s[er],En,Cn,Un,fi));let Nn=.6-ar*ar-us*us-Oe*Oe-ve*ve;Nn<0?g=0:(Nn*=Nn,g=Nn*Nn*this.dot4(s[kr],ar,us,Oe,ve));let Hn=.6-Tt*Tt-gn*gn-bn*bn-In*In;return Hn<0?_=0:(Hn*=Hn,_=Hn*Hn*this.dot4(s[No],Tt,gn,bn,In)),27*(u+f+p+g+_)}}const u_={defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new Qt},cameraProjectionMatrix:{value:new Ui},cameraInverseProjectionMatrix:{value:new Ui},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tNormal;\n\t\tuniform sampler2D tDepth;\n\t\tuniform sampler2D tNoise;\n\n\t\tuniform vec3 kernel[ KERNEL_SIZE ];\n\n\t\tuniform vec2 resolution;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\n\t\tuniform float kernelRadius;\n\t\tuniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference\n\t\tuniform float maxDistance; // avoid the influence of fragments which are too far away\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t}\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\n\t\t\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\n\t\t\tclipPosition *= clipW; // unprojection.\n\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\n\n\t\t}\n\n\t\tvec3 getViewNormal( const in vec2 screenPosition ) {\n\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tfloat viewZ = getViewZ( depth );\n\n\t\t\tvec3 viewPosition = getViewPosition( vUv, depth, viewZ );\n\t\t\tvec3 viewNormal = getViewNormal( vUv );\n\n\t\t\tvec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );\n\t\t\tvec3 random = vec3( texture2D( tNoise, vUv * noiseScale ).r );\n\n\t\t\t// compute matrix used to reorient a kernel vector\n\n\t\t\tvec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );\n\t\t\tvec3 bitangent = cross( viewNormal, tangent );\n\t\t\tmat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );\n\n\t\t float occlusion = 0.0;\n\n\t\t for ( int i = 0; i < KERNEL_SIZE; i ++ ) {\n\n\t\t\t\tvec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space\n\t\t\t\tvec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point\n\n\t\t\t\tvec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC\n\t\t\t\tsamplePointNDC /= samplePointNDC.w;\n\n\t\t\t\tvec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates\n\n\t\t\t\tfloat realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture\n\t\t\t\tfloat sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value\n\t\t\t\tfloat delta = sampleDepth - realDepth;\n\n\t\t\t\tif ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion\n\n\t\t\t\t\tocclusion += 1.0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tocclusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );\n\n\t\t\tgl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );\n\n\t\t}"},_S_defines={PERSPECTIVE_CAMERA:1},_S_uniforms={tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},_S_vertexShader="varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",_S_fragmentShader="uniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getLinearDepth( vUv );\n\t\t\tgl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );\n\n\t\t}",yS={uniforms:{tDiffuse:{value:null},resolution:{value:new Qt}},vertexShader:"varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"uniform sampler2D tDiffuse;\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 texelSize = ( 1.0 / resolution );\n\t\t\tfloat result = 0.0;\n\n\t\t\tfor ( int i = - 2; i <= 2; i ++ ) {\n\n\t\t\t\tfor ( int j = - 2; j <= 2; j ++ ) {\n\n\t\t\t\t\tvec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;\n\t\t\t\t\tresult += texture2D( tDiffuse, vUv + offset ).r;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );\n\n\t\t}"};let mtt=(()=>{class n extends vS{constructor(t,i,r,s){super(),this.width=void 0!==r?r:512,this.height=void 0!==s?s:512,this.clear=!0,this.camera=i,this.scene=t,this.kernelRadius=8,this.kernelSize=32,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(),this.generateRandomKernelRotations();const o=new Eee;o.format=K8,o.type=$8,this.beautyRenderTarget=new z4(this.width,this.height),this.normalRenderTarget=new z4(this.width,this.height,{minFilter:R1,magFilter:R1,depthTexture:o}),this.ssaoRenderTarget=new z4(this.width,this.height),this.blurRenderTarget=this.ssaoRenderTarget.clone(),void 0===u_&&console.error("THREE.SSAOPass: The pass relies on SSAOShader."),this.ssaoMaterial=new B2({defines:Object.assign({},u_.defines),uniforms:Ud.clone(u_.uniforms),vertexShader:u_.vertexShader,fragmentShader:u_.fragmentShader,blending:0}),this.ssaoMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new Ck,this.normalMaterial.blending=0,this.blurMaterial=new B2({defines:Object.assign({},yS.defines),uniforms:Ud.clone(yS.uniforms),vertexShader:yS.vertexShader,fragmentShader:yS.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new B2({defines:Object.assign({},_S_defines),uniforms:Ud.clone(_S_uniforms),vertexShader:_S_vertexShader,fragmentShader:_S_fragmentShader,blending:0}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new B2({uniforms:Ud.clone(l_.uniforms),vertexShader:l_.vertexShader,fragmentShader:l_.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:208,blendDst:200,blendEquation:Bd,blendSrcAlpha:206,blendDstAlpha:200,blendEquationAlpha:Bd}),this.fsQuad=new Kse(null),this.originalClearColor=new Dn}dispose(){this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(t,i){switch(!1===t.capabilities.isWebGL2&&(this.noiseTexture.format=1024),t.setRenderTarget(this.beautyRenderTarget),t.clear(),t.render(this.scene,this.camera),this.overrideVisibility(),this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(t,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(t,this.blurMaterial,this.blurRenderTarget),this.output){case n.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Depth:this.renderPass(t,this.depthRenderMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=5,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(t,i,r,s,o){t.getClearColor(this.originalClearColor);const a=t.getClearAlpha(),c=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,null!=s&&(t.setClearColor(s),t.setClearAlpha(o||0),t.clear()),this.fsQuad.material=i,this.fsQuad.render(t),t.autoClear=c,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}renderOverride(t,i,r,s,o){t.getClearColor(this.originalClearColor);const a=t.getClearAlpha(),c=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,o=i.clearAlpha||o,null!=(s=i.clearColor||s)&&(t.setClearColor(s),t.setClearAlpha(o||0),t.clear()),this.scene.overrideMaterial=i,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=c,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}setSize(t,i){this.width=t,this.height=i,this.beautyRenderTarget.setSize(t,i),this.ssaoRenderTarget.setSize(t,i),this.normalRenderTarget.setSize(t,i),this.blurRenderTarget.setSize(t,i),this.ssaoMaterial.uniforms.resolution.value.set(t,i),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(t,i)}generateSampleKernel(){const t=this.kernelSize,i=this.kernel;for(let r=0;r<t;r++){const s=new ge;s.x=2*Math.random()-1,s.y=2*Math.random()-1,s.z=Math.random(),s.normalize();let o=r/t;o=ax.lerp(.1,1,o*o),s.multiplyScalar(o),i.push(s)}}generateRandomKernelRotations(){void 0===Zse&&console.error("THREE.SSAOPass: The pass relies on SimplexNoise.");const r=new Zse,o=new Float32Array(16);for(let a=0;a<16;a++){const c=2*Math.random()-1,l=2*Math.random()-1;o[a]=r.noise3d(c,l,0)}this.noiseTexture=new dg(o,4,4,1028,P4),this.noiseTexture.wrapS=z0,this.noiseTexture.wrapT=z0,this.noiseTexture.needsUpdate=!0}overrideVisibility(){const i=this._visibilityCache;this.scene.traverse(function(r){i.set(r,r.visible),(r.isPoints||r.isLine)&&(r.visible=!1)})}restoreVisibility(){const i=this._visibilityCache;this.scene.traverse(function(r){const s=i.get(r);r.visible=s}),i.clear()}}return n.OUTPUT={Default:0,SSAO:1,Blur:2,Beauty:3,Depth:4,Normal:5},n})();var h_=function(){var n=0,e=document.createElement("div");function t(u){return e.appendChild(u.dom),u}function i(u){for(var f=0;f<e.children.length;f++)e.children[f].style.display=f===u?"block":"none";n=u}e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(u){u.preventDefault(),i(++n%e.children.length)},!1);var r=(performance||Date).now(),s=r,o=0,a=t(new h_.Panel("FPS","#0ff","#002")),c=t(new h_.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=t(new h_.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){o++;var u=(performance||Date).now();if(c.update(u-r,200),u>=s+1e3&&(a.update(1e3*o/(u-s),100),s=u,o=0,l)){var f=performance.memory;l.update(f.usedJSHeapSize/1048576,f.jsHeapSizeLimit/1048576)}return u},update:function(){r=this.end()},domElement:e,setMode:i}};h_.Panel=function(n,e,t){var i=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),a=80*o,c=48*o,l=3*o,u=2*o,f=3*o,p=15*o,g=74*o,_=30*o,y=document.createElement("canvas");y.width=a,y.height=c,y.style.cssText="width:80px;height:48px";var w=y.getContext("2d");return w.font="bold "+9*o+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=t,w.fillRect(0,0,a,c),w.fillStyle=e,w.fillText(n,l,u),w.fillRect(f,p,g,_),w.fillStyle=t,w.globalAlpha=.9,w.fillRect(f,p,g,_),{dom:y,update:function(C,x){i=Math.min(i,C),r=Math.max(r,C),w.fillStyle=t,w.globalAlpha=1,w.fillRect(0,0,a,p),w.fillStyle=e,w.fillText(s(C)+" "+n+" ("+s(i)+"-"+s(r)+")",l,u),w.drawImage(y,f+o,p,g-o,_,f,p,g-o,_),w.fillRect(f+g-o,p,o,_),w.fillStyle=t,w.globalAlpha=.9,w.fillRect(f+g-o,p,o,s((1-C/x)*_))}}};class wS extends eo{constructor(){const e=wS.SkyShader,t=new B2({name:"SkyShader",fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:Ud.clone(e.uniforms),side:1,depthWrite:!1});super(new N0(1,1,1),t),this.isSky=!0}}wS.SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new ge},up:{value:new ge(0,1,0)}},vertexShader:"\n\t\tuniform vec3 sunPosition;\n\t\tuniform float rayleigh;\n\t\tuniform float turbidity;\n\t\tuniform float mieCoefficient;\n\t\tuniform vec3 up;\n\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\t// constants for atmospheric scattering\n\t\tconst float e = 2.71828182845904523536028747135266249775724709369995957;\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\t// wavelength of used primaries, according to preetham\n\t\tconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n\t\t// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n\t\t// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n\t\tconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n\t\t// mie stuff\n\t\t// K coefficient for the primaries\n\t\tconst float v = 4.0;\n\t\tconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n\t\t// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n\t\tconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n\t\t// earth shadow hack\n\t\t// cutoffAngle = pi / 1.95;\n\t\tconst float cutoffAngle = 1.6110731556870734;\n\t\tconst float steepness = 1.5;\n\t\tconst float EE = 1000.0;\n\n\t\tfloat sunIntensity( float zenithAngleCos ) {\n\t\t\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n\t\t\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n\t\t}\n\n\t\tvec3 totalMie( float T ) {\n\t\t\tfloat c = ( 0.2 * T ) * 10E-18;\n\t\t\treturn 0.434 * c * MieConst;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvWorldPosition = worldPosition.xyz;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n\t\t\tvSunDirection = normalize( sunPosition );\n\n\t\t\tvSunE = sunIntensity( dot( vSunDirection, up ) );\n\n\t\t\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n\t\t\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n\t\t\t// extinction (absorbtion + out scattering)\n\t\t\t// rayleigh coefficients\n\t\t\tvBetaR = totalRayleigh * rayleighCoefficient;\n\n\t\t\t// mie coefficients\n\t\t\tvBetaM = totalMie( turbidity ) * mieCoefficient;\n\n\t\t}",fragmentShader:"\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\tuniform float mieDirectionalG;\n\t\tuniform vec3 up;\n\n\t\tconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n\t\t// constants for atmospheric scattering\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\tconst float n = 1.0003; // refractive index of air\n\t\tconst float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n\t\t// optical length at zenith for molecules\n\t\tconst float rayleighZenithLength = 8.4E3;\n\t\tconst float mieZenithLength = 1.25E3;\n\t\t// 66 arc seconds -> degrees, and the cosine of that\n\t\tconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n\t\t// 3.0 / ( 16.0 * pi )\n\t\tconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n\t\t// 1.0 / ( 4.0 * pi )\n\t\tconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\n\t\tfloat rayleighPhase( float cosTheta ) {\n\t\t\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n\t\t}\n\n\t\tfloat hgPhase( float cosTheta, float g ) {\n\t\t\tfloat g2 = pow( g, 2.0 );\n\t\t\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n\t\t\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec3 direction = normalize( vWorldPosition - cameraPos );\n\n\t\t\t// optical length\n\t\t\t// cutoff angle at 90 to avoid singularity in next formula.\n\t\t\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n\t\t\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n\t\t\tfloat sR = rayleighZenithLength * inverse;\n\t\t\tfloat sM = mieZenithLength * inverse;\n\n\t\t\t// combined extinction factor\n\t\t\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n\t\t\t// in scattering\n\t\t\tfloat cosTheta = dot( direction, vSunDirection );\n\n\t\t\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n\t\t\tvec3 betaRTheta = vBetaR * rPhase;\n\n\t\t\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );\n\t\t\tvec3 betaMTheta = vBetaM * mPhase;\n\n\t\t\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n\t\t\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n\t\t\t// nightsky\n\t\t\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]\n\t\t\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]\n\t\t\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n\t\t\tvec3 L0 = vec3( 0.1 ) * Fex;\n\n\t\t\t// composition + solar disc\n\t\t\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n\t\t\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n\t\t\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n\t\t\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n\t\t\tgl_FragColor = vec4( retColor, 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\n\t\t}"};var va=(()=>(function(n){n.left="left",n.right="right",n.top="top",n.bottom="bottom",n.back="back",n.front="front"}(va||(va={})),va))();const Jse=new h2({color:3355443}),vtt=new Rl({side:2,visible:!1}),_tt=new Rl({visible:!1}),ytt=new Rl({visible:!1});class wtt extends Mo{constructor(){super(),this.width=20,this.height=8,this.depth=5,this.onChange$=new Je,this.drag=!1,this.controlEnabled=!1,this.xyz=[1,1,1],this.rayCaster=new rOe,this.activeSide=void 0,this.mouse=new Qt(0,0),this.edges={},this.planes={},this.dragPlane=new eo(new g3(1e3,1e3,1,1),ytt),this.startPoint=new ge(0,0,0),this.setToNormalizedDeviceCoordinates=function(e,t,i){return i.x=void 0!==e.clientX?e.clientX:e.touches&&e.touches[0].clientX,i.y=void 0!==e.clientY?e.clientY:e.touches&&e.touches[0].clientY,i.x=i.x/t.innerWidth*2-1,i.y=-i.y/t.innerHeight*2+1,i},this.init(),this.startDrag=this.startDrag.bind(this),this.onDrag=this.onDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(){this.box=new eo(new N0(this.width,this.height,this.depth),_tt),this.box.userData.side="box",this.setPosition(),this.add(this.box),this.add(this.dragPlane),this.dragPlane.castShadow=!1,this.dragPlane.receiveShadow=!1,Object.keys(va).forEach(e=>{this.edges[e]=new Gd(new Ar,Jse.clone()),this.edges[e].userData.side=e,this.add(this.edges[e]),e!==va.top&&(this.planes[e]=new eo(new g3(this.width,this.height,this.depth),vtt.clone()),this.planes[e].userData.side=e,this.add(this.planes[e]))}),this.drawBox(),window.addEventListener("pointermove",e=>{this.mouse=this.setToNormalizedDeviceCoordinates(e,window,this.mouse)})}states(e){this.enabled=e.clipBoxEnabled,this.show=e.clipBoxShow,this.drawBox()}drawBox(){this.box.geometry.dispose(),this.box.geometry=new N0(this.width,this.height,this.depth),this.box.position.set(this.width/2,this.height/2,this.depth/2),this.drawPlanesAroundBox(),this.drawLinesAroundBox()}drawPlanesAroundBox(){Object.keys(va).forEach(i=>{let r;i===va.front?(r=new g3(this.width,this.height),r.rotateY(0),r.translate(0,0,this.depth/2)):i===va.back&&(r=new g3(this.width,this.height),r.rotateY(Math.PI),r.translate(0,0,-this.depth/2)),i===va.left?(r=new g3(this.depth,this.height),r.rotateY(-Math.PI/2),r.translate(-this.width/2,0,0)):i===va.right&&(r=new g3(this.depth,this.height),r.rotateY(Math.PI/2),r.translate(this.width/2,0,0)),i!==va.top&&(i===va.bottom&&(r=new g3(this.width,this.depth),r.rotateX(Math.PI/2),r.translate(0,-this.height/2,0)),this.planes[i].geometry.dispose(),this.show&&(this.planes[i].geometry=r,this.planes[i].position.set(this.width/2,this.height/2,this.depth/2)))})}drawLinesAroundBox(){Object.keys(va).forEach(e=>{if(void 0===this.planes[e])return;let t=Array.from(this.planes[e].geometry.attributes.position.array).reduce((i,r,s)=>(s%3?i[i.length-1].push(r):i.push([r]))&&i,[]).map(i=>new ge(i[0],i[1],i[2]));this.show?(this.edges[e].geometry.setFromPoints([...t.slice(0,2),...t.slice(2).reverse(),t[0]]),this.edges[e].position.set(this.width/2,this.height/2,this.depth/2)):this.edges[e].geometry.setFromPoints([])})}onMouseOver(e,t,i,r,s){if(!this.enabled)return void s();if(!0===this.drag||!1===this.show)return;this.camera=e,this.callbackUpdate=i,this.rayCaster.setFromCamera(this.mouse,this.camera);const o=this.rayCaster.intersectObjects(Object.values(this.planes));if(this.activeSide=o.length>0?o[0].object.userData.side:void 0,this.previousSide===this.activeSide)return;this.previousSide=this.activeSide,Object.keys(va).forEach(c=>{c===this.activeSide?(this.edges[c].material.color.set(3065014),this.edges[c].renderOrder=1):(this.edges[c].material.color.set(Jse.color),this.edges[c].renderOrder=0)});const a=t.domElement;void 0!==this.activeSide?(a.addEventListener("mousedown",this.startDrag),a.addEventListener("mousemove",this.onDrag),a.addEventListener("mouseup",this.endDrag),r()):(a.removeEventListener("mousedown",this.startDrag),a.removeEventListener("mousemove",this.onDrag),a.removeEventListener("mouseup",this.endDrag),s())}startDrag(e){if(1===e.buttons){this.drag=!0,this.rayCaster.setFromCamera(this.mouse,this.camera);var t=this.rayCaster.intersectObjects(Object.values(this.planes));if(t.length>0){const r=t[0].point;this.widthStart=this.width,this.heightStart=this.height,this.depthStart=this.depth,this.startPoint=t[0].point;let s=new ge;this.dragPlane.parent.getWorldPosition(s),this.dragPlane.position.set(r.x-s.x,r.y-s.y,r.z-s.z),this.dragPlane.geometry.center();let o=new ge(0,0,1);(this.activeSide===va.front||this.activeSide===va.back)&&(o=new ge(0,0,1)),(this.activeSide===va.left||this.activeSide===va.right)&&(o=new ge(1,0,0)),(this.activeSide===va.top||this.activeSide===va.bottom)&&(o=new ge(0,1,0));var i=this.camera.position.clone().sub(this.camera.position.clone().projectOnVector(o));this.dragPlane.lookAt(i.add(r))}}}onDrag(e){if(!1!==this.drag){this.rayCaster.setFromCamera(this.mouse,this.camera);var t=this.rayCaster.intersectObject(this.dragPlane);t.length>0&&this.change(t[0].point)}}endDrag(e){this.drag=!1,0===e.buttons&&this.onChange$.next()}change(e){if(void 0===this.activeSide)return;const t=e.x-this.startPoint.x,i=e.y-this.startPoint.y,r=e.z-this.startPoint.z;this.activeSide===va.right&&(this.width=this.widthStart+t),this.activeSide===va.top&&(this.height=this.heightStart+i),this.activeSide===va.front&&(this.depth=this.depthStart+r),this.activeSide===va.left&&(this.width=this.widthStart-t,this.xyz[0]=e.x),this.activeSide===va.bottom&&(this.height=this.heightStart-i,this.xyz[1]=e.y),this.activeSide===va.back&&(this.depth=this.depthStart-r,this.xyz[2]=e.z),this.width=Math.max(this.width,2),this.height=Math.max(this.height,2),this.depth=Math.max(this.depth,2),this.drawBox(),this.setPosition(),this.callbackUpdate()}setPosition(){this.position.set(this.xyz[0],this.xyz[1],this.xyz[2])}setCookie(e){this.height=e.height,this.width=e.width,this.depth=e.depth,this.xyz=e.xyz,this.setPosition()}}class Ctt extends p5{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Ett(t)}),this.register(function(t){return new Ftt(t)}),this.register(function(t){return new ktt(t)}),this.register(function(t){return new Ltt(t)}),this.register(function(t){return new Dtt(t)}),this.register(function(t){return new Itt(t)}),this.register(function(t){return new Btt(t)}),this.register(function(t){return new Stt(t)}),this.register(function(t){return new Rtt(t)}),this.register(function(t){return new Ttt(t)}),this.register(function(t){return new xtt(t)}),this.register(function(t){return new Ptt(t)})}load(e,t,i,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:sf.extractUrlBase(e),this.manager.itemStart(e);const a=function(l){r?r(l):console.error(l),s.manager.itemError(e),s.manager.itemEnd(e)},c=new Vu(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{s.parse(l,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if("string"==typeof e)s=e;else if(sf.decodeText(new Uint8Array(e,0,4))===eoe){try{o[Ss.KHR_BINARY_GLTF]=new Htt(e)}catch(f){return void(r&&r(f))}s=o[Ss.KHR_BINARY_GLTF].content}else s=sf.decodeText(new Uint8Array(e));const c=JSON.parse(s);if(void 0===c.asset||c.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new Xtt(c,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const f=this.pluginCallbacks[u](l);a[f.name]=f,o[f.name]=!0}if(c.extensionsUsed)for(let u=0;u<c.extensionsUsed.length;++u){const f=c.extensionsUsed[u],p=c.extensionsRequired||[];switch(f){case Ss.KHR_MATERIALS_UNLIT:o[f]=new Mtt;break;case Ss.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[f]=new Ntt;break;case Ss.KHR_DRACO_MESH_COMPRESSION:o[f]=new ztt(c,this.dracoLoader);break;case Ss.KHR_TEXTURE_TRANSFORM:o[f]=new Ott;break;case Ss.KHR_MESH_QUANTIZATION:o[f]=new Vtt;break;default:p.indexOf(f)>=0&&void 0===a[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function btt(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ss={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class xtt{constructor(e){this.parser=e,this.name=Ss.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let l;const u=new Dn(16777215);void 0!==c.color&&u.fromArray(c.color);const f=void 0!==c.range?c.range:0;switch(c.type){case"directional":l=new Tk(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new wte(u),l.distance=f;break;case"spot":l=new _te(u),l.distance=f,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,void 0!==c.intensity&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),t.cache.add(i,r),r}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(c){return i._getNodeRef(t.cache,a,c)})}}class Mtt{constructor(){this.name=Ss.KHR_MATERIALS_UNLIT}getMaterialType(){return Rl}extendParams(e,t,i){const r=[];e.color=new Dn(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Ho))}return Promise.all(r)}}class Stt{constructor(e){this.parser=e,this.name=Ss.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class Ett{constructor(e){this.parser=e,this.name=Ss.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?nf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Qt(a,a)}return Promise.all(s)}}class Ttt{constructor(e){this.parser=e,this.name=Ss.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?nf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Ltt{constructor(e){this.parser=e,this.name=Ss.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?nf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Dn(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Ho)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Dtt{constructor(e){this.parser=e,this.name=Ss.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?nf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Itt{constructor(e){this.parser=e,this.name=Ss.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?nf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Dn(a[0],a[1],a[2]),Promise.all(s)}}class Btt{constructor(e){this.parser=e,this.name=Ss.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?nf:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class Rtt{constructor(e){this.parser=e,this.name=Ss.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?nf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Dn(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Ho)),Promise.all(s)}}class Ftt{constructor(e){this.parser=e,this.name=Ss.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class ktt{constructor(e){this.parser=e,this.name=Ss.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=i.textureLoader;if(a.uri){const l=i.options.manager.getHandler(a.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Ptt{constructor(e){this.name=Ss.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,f=r.byteStride,p=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,p,r.mode,r.filter).then(function(g){return g.buffer}):o.ready.then(function(){const g=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(g),u,f,p,r.mode,r.filter),g})})}return null}}const eoe="glTF";class Htt{constructor(e){this.name=Ss.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:sf.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==eoe)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,r=new DataView(e,12);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,1313821514===a){const c=new Uint8Array(e,12+s,o);this.content=sf.decodeText(c)}else if(5130562===a){const c=12+s;this.body=e.slice(c,c+o)}s+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ztt{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ss.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},l={};for(const u in o){const f=HH[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=HH[u]||u.toLowerCase();if(void 0!==o[u]){const p=i.accessors[e.attributes[u]];l[f]=d_[p.componentType].name,c[f]=!0===p.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f){r.decodeDracoFile(u,function(p){for(const g in p.attributes){const _=p.attributes[g],y=c[g];void 0!==y&&(_.normalized=y)}f(p)},a,l)})})}}class Ott{constructor(){this.name=Ss.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class PH extends Av{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new Dn).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(c){for(const l in a)c.uniforms[l]=a[l];c.fragmentShader=c.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(c){a.specular.value=c}},specularMap:{get:function(){return a.specularMap.value},set:function(c){a.specularMap.value=c,c?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(c){a.glossiness.value=c}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(c){a.glossinessMap.value=c,c?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Ntt{constructor(){this.name=Ss.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return PH}extendParams(e,t,i){const r=t.extensions[this.name];e.color=new Dn(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(void 0!==r.diffuseTexture&&s.push(i.assignTexture(e,"map",r.diffuseTexture,Ho)),e.emissive=new Dn(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new Dn(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const o=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",o)),s.push(i.assignTexture(e,"specularMap",o,Ho))}return Promise.all(s)}createMaterial(e){const t=new PH(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}class Vtt{constructor(){this.name=Ss.KHR_MESH_QUANTIZATION}}class noe extends vv{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=2*a,l=3*a,u=r-t,f=(i-t)/u,p=f*f,g=p*f,_=e*l,y=_-l,w=-2*g+3*p,C=g-p,x=1-w,M=C-p+f;for(let T=0;T!==a;T++)s[T]=x*o[y+T+a]+M*(o[y+T+c]*u)+w*o[_+T+a]+C*(o[_+T]*u);return s}}const Utt=new D2;class Gtt extends noe{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return Utt.fromArray(s).normalize().toArray(s),s}}const d_={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ioe={9728:R1,9729:$a,9984:1004,9985:1007,9986:1005,9987:Rd},roe={33071:Bl,33648:1002,10497:z0},soe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},HH={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},a6={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Qtt={CUBICSPLINE:void 0,LINEAR:V7,STEP:X9};function Wtt(n){return void 0===n.DefaultMaterial&&(n.DefaultMaterial=new Av({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial}function p_(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function z5(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function $tt(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function qtt(n){const e=n.extensions&&n.extensions[Ss.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+ooe(e.attributes):n.indices+":"+ooe(n.attributes)+":"+n.mode,t}function ooe(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function OH(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Xtt{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new btt,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;this.textureLoader=typeof createImageBitmap>"u"||i||r&&s<98?new Ize(this.options.manager):new Uze(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Vu(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};p_(s,a,r),z5(a,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,c=o.length;a<c;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const c=this.associations.get(o);null!=c&&this.associations.set(a,c);for(const[l,u]of o.children.entries())s(u,a.children[l])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Ss.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(sf.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],c=soe[r.type],l=d_[r.componentType],u=l.BYTES_PER_ELEMENT,p=r.byteOffset||0,g=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,_=!0===r.normalized;let y,w;if(g&&g!==u*c){const C=Math.floor(p/g),x="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+C+":"+r.count;let M=t.cache.get(x);M||(y=new l(a,C*g,r.count*g/u),M=new YF(y,g/u),t.cache.add(x,M)),w=new l5(M,c,p%g/u,_)}else y=null===a?new l(r.count*c):new l(a,p,r.count*c),w=new qa(y,c,_);if(void 0!==r.sparse){const T=r.sparse.values.byteOffset||0,I=new(0,d_[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*soe.SCALAR),F=new l(o[2],T,r.sparse.count*c);null!==a&&(w=new qa(w.array.slice(),w.itemSize,w.normalized));for(let P=0,R=I.length;P<R;P++){const k=I[P];if(w.setX(k,F[P*c]),c>=2&&w.setY(k,F[P*c+1]),c>=3&&w.setZ(k,F[P*c+2]),c>=4&&w.setW(k,F[P*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return w})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const c=this.options.manager.getHandler(o.uri);null!==c&&(a=c)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,i).then(function(u){u.flipY=!1,o.name&&(u.name=o.name);const p=(s.samplers||{})[o.sampler]||{};return u.magFilter=ioe[p.magFilter]||$a,u.minFilter=ioe[p.minFilter]||Rd,u.wrapS=roe[p.wrapS]||z0,u.wrapT=roe[p.wrapT]||z0,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let c=o.uri||"",l=!1;if(void 0!==o.bufferView)c=this.getDependency("bufferView",o.bufferView).then(function(f){l=!0;const p=new Blob([f],{type:o.mimeType});return c=a.createObjectURL(p),c});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(c).then(function(f){return new Promise(function(p,g){let _=p;!0===t.isImageBitmapLoader&&(_=function(y){const w=new H4(y);w.needsUpdate=!0,p(w)}),t.load(sf.resolveURL(f,s.path),_,void 0,g)})}).then(function(f){return!0===l&&a.revokeObjectURL(c),f.userData.mimeType=o.mimeType||function Ktt(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),f});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(void 0!==i.texCoord&&0!=i.texCoord&&!("aoMap"===t&&1==i.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[Ss.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[Ss.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=s.associations.get(o);o=s.extensions[Ss.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,c)}}return void 0!==r&&(o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new u5,Z2.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new h2,Z2.prototype.copy.call(c,i),c.color.copy(i.color),this.cache.add(a,c)),i=c}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}i.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return Av}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},c=s.extensions||{},l=[];if(c[Ss.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const f=r[Ss.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=f.getMaterialType(),l.push(f.extendParams(a,s,t))}else if(c[Ss.KHR_MATERIALS_UNLIT]){const f=r[Ss.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),l.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Dn(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}void 0!==f.baseColorTexture&&l.push(t.assignTexture(a,"map",f.baseColorTexture,Ho)),a.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,a.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture&&(l.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==Rl&&(l.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Qt(1,1),void 0!==s.normalTexture.scale)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return void 0!==s.occlusionTexture&&o!==Rl&&(l.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==Rl&&(a.emissive=(new Dn).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&o!==Rl&&l.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Ho)),Promise.all(l).then(function(){let f;return f=o===PH?r[Ss.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),s.name&&(f.name=s.name),z5(f,s),t.associations.set(f,{materials:e}),s.extensions&&p_(r,f,s),f})}createUniqueName(e){const t=Aa.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Ss.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return coe(c,a,t)})}const o=[];for(let a=0,c=e.length;a<c;a++){const l=e[a],u=qtt(l),f=r[u];if(f)o.push(f.promise);else{let p;p=l.extensions&&l.extensions[Ss.KHR_DRACO_MESH_COMPRESSION]?s(l):coe(new Ar,l,t),r[u]={primitive:l,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let c=0,l=o.length;c<l;c++){const u=void 0===o[c].material?Wtt(this.cache):this.getDependency("material",o[c].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(c){const l=c.slice(0,c.length-1),u=c[c.length-1],f=[];for(let g=0,_=u.length;g<_;g++){const y=u[g],w=o[g];let C;const x=l[g];if(4===w.mode||5===w.mode||6===w.mode||void 0===w.mode)C=!0===s.isSkinnedMesh?new Oee(y,x):new eo(y,x),!0===C.isSkinnedMesh&&!C.geometry.attributes.skinWeight.normalized&&C.normalizeSkinWeights(),5===w.mode?C.geometry=loe(C.geometry,1):6===w.mode&&(C.geometry=loe(C.geometry,2));else if(1===w.mode)C=new pg(y,x);else if(3===w.mode)C=new Gd(y,x);else if(2===w.mode)C=new qee(y,x);else{if(0!==w.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+w.mode);C=new lv(y,x)}Object.keys(C.geometry.morphAttributes).length>0&&$tt(C,s),C.name=t.createUniqueName(s.name||"mesh_"+e),z5(C,s),w.extensions&&p_(r,C,w),t.assignFinalMaterial(C),f.push(C)}for(let g=0,_=f.length;g<_;g++)t.associations.set(f[g],{meshes:e,primitives:g});if(1===f.length)return f[0];const p=new Mo;t.associations.set(p,{meshes:e});for(let g=0,_=f.length;g<_;g++)p.add(f[g]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new Gc(ax.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new o5(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),z5(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],o=[],a=[],c=[];for(let l=0,u=i.channels.length;l<u;l++){const f=i.channels[l],p=i.samplers[f.sampler],g=f.target,y=void 0!==i.parameters?i.parameters[p.input]:p.input,w=void 0!==i.parameters?i.parameters[p.output]:p.output;r.push(this.getDependency("node",g.node)),s.push(this.getDependency("accessor",y)),o.push(this.getDependency("accessor",w)),a.push(p),c.push(g)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const u=l[0],f=l[1],p=l[2],g=l[3],_=l[4],y=[];for(let C=0,x=u.length;C<x;C++){const M=u[C],T=f[C],I=p[C],F=g[C],P=_[C];if(void 0===M)continue;let R;switch(M.updateMatrix(),a6[P.path]){case a6.weights:R=_v;break;case a6.rotation:R=d5;break;default:R=yv}const k=M.name?M.name:M.uuid,W=void 0!==F.interpolation?Qtt[F.interpolation]:V7,re=[];a6[P.path]===a6.weights?M.traverse(function(me){me.morphTargetInfluences&&re.push(me.name?me.name:me.uuid)}):re.push(k);let Le=I.array;if(I.normalized){const me=OH(Le.constructor),Q=new Float32Array(Le.length);for(let he=0,K=Le.length;he<K;he++)Q[he]=Le[he]*me;Le=Q}for(let me=0,Q=re.length;me<Q;me++){const he=new R(re[me]+"."+a6[P.path],T.array,Le,W);"CUBICSPLINE"===F.interpolation&&(he.createInterpolant=function(ae){return new(this instanceof d5?Gtt:noe)(this.times,this.values,this.getValueSize()/3,ae)},he.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),y.push(he)}}return new wv(i.name?i.name:"animation_"+e,void 0,y)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){const i=this.extensions,r=this,s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(l){return r._getNodeRef(r.cameraCache,s.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),Promise.all(a)}().then(function(a){let c;if(c=!0===s.isBone?new JF:a.length>1?new Mo:1===a.length?a[0]:new I2,c!==a[0])for(let l=0,u=a.length;l<u;l++)c.add(a[l]);if(s.name&&(c.userData.name=s.name,c.name=o),z5(c,s),s.extensions&&p_(i,c,s),void 0!==s.matrix){const l=new Ui;l.fromArray(s.matrix),c.applyMatrix4(l)}else void 0!==s.translation&&c.position.fromArray(s.translation),void 0!==s.rotation&&c.quaternion.fromArray(s.rotation),void 0!==s.scale&&c.scale.fromArray(s.scale);return r.associations.has(c)||r.associations.set(c,{}),r.associations.get(c).nodes=e,c})}loadScene(e){const t=this.json,i=this.extensions,r=this.json.scenes[e],s=this,o=new Mo;r.name&&(o.name=s.createUniqueName(r.name)),z5(o,r),r.extensions&&p_(i,o,r);const a=r.nodes||[],c=[];for(let l=0,u=a.length;l<u;l++)c.push(aoe(a[l],o,t,s));return Promise.all(c).then(function(){return s.associations=(u=>{const f=new Map;for(const[p,g]of s.associations)(p instanceof Z2||p instanceof H4)&&f.set(p,g);return u.traverse(p=>{const g=s.associations.get(p);null!=g&&f.set(p,g)}),f})(o),o})}}function aoe(n,e,t,i){const r=t.nodes[n];return i.getDependency("node",n).then(function(s){if(void 0===r.skin)return s;let o;return i.getDependency("skin",r.skin).then(function(a){o=a;const c=[];for(let l=0,u=o.joints.length;l<u;l++)c.push(i.getDependency("node",o.joints[l]));return Promise.all(c)}).then(function(a){return s.traverse(function(c){if(!c.isMesh)return;const l=[],u=[];for(let f=0,p=a.length;f<p;f++){const g=a[f];if(g){l.push(g);const _=new Ui;void 0!==o.inverseBindMatrices&&_.fromArray(o.inverseBindMatrices.array,16*f),u.push(_)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[f])}c.bind(new zx(l,u),c.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let c=0,l=a.length;c<l;c++)o.push(aoe(a[c],s,t,i))}return Promise.all(o)})}function coe(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(c){n.setAttribute(a,c)})}for(const o in i){const a=HH[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return z5(n,e),function Ytt(n,e,t){const i=e.attributes,r=new e5;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],c=a.min,l=a.max;if(void 0===c||void 0===l)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new ge(c[0],c[1],c[2]),new ge(l[0],l[1],l[2])),a.normalized){const u=OH(d_[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new ge,c=new ge;for(let l=0,u=s.length;l<u;l++){const f=s[l];if(void 0!==f.POSITION){const p=t.json.accessors[f.POSITION],g=p.min,_=p.max;if(void 0!==g&&void 0!==_){if(c.setX(Math.max(Math.abs(g[0]),Math.abs(_[0]))),c.setY(Math.max(Math.abs(g[1]),Math.abs(_[1]))),c.setZ(Math.max(Math.abs(g[2]),Math.abs(_[2]))),p.normalized){const y=OH(d_[p.componentType]);c.multiplyScalar(y)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new s5;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function jtt(n,e,t){let i=!1,r=!1,s=!1;for(let l=0,u=e.length;l<u;l++){const f=e[l];if(void 0!==f.POSITION&&(i=!0),void 0!==f.NORMAL&&(r=!0),void 0!==f.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],c=[];for(let l=0,u=e.length;l<u;l++){const f=e[l];if(i){const p=void 0!==f.POSITION?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(p)}if(r){const p=void 0!==f.NORMAL?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=void 0!==f.COLOR_0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;c.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const f=l[1],p=l[2];return i&&(n.morphAttributes.position=l[0]),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}function loe(n,e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let c=0;c<a.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}const Ztt=/^[og]\s*(.+)?/,Jtt=/^mtllib /,ent=/^usemtl /,tnt=/^usemap /,uoe=/\s+/,hoe=new ge,NH=new ge,foe=new ge,doe=new ge,q4=new ge,CS=new Dn;function nnt(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:void 0!==o?o.smooth:this.smooth,groupStart:void 0!==o?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(c){const l={index:"number"==typeof c?c:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return l.clone=this.clone.bind(l),l}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&-1===s.groupEnd&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return r&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),s}},i&&i.name&&"function"==typeof i.clone){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseNormalIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseUVIndex:function(e,t){const i=parseInt(e,10);return 2*(i>=0?i-1:i+t/2)},addVertex:function(e,t,i){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,s=this.object.geometry.normals;hoe.fromArray(r,e),NH.fromArray(r,t),foe.fromArray(r,i),q4.subVectors(foe,NH),doe.subVectors(hoe,NH),q4.cross(doe),q4.normalize(),s.push(q4.x,q4.y,q4.z),s.push(q4.x,q4.y,q4.z),s.push(q4.x,q4.y,q4.z)},addColor:function(e,t,i){const r=this.colors,s=this.object.geometry.colors;void 0!==r[e]&&s.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&s.push(r[t+0],r[t+1],r[t+2]),void 0!==r[i]&&s.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,s,o,a,c,l){const u=this.vertices.length;let f=this.parseVertexIndex(e,u),p=this.parseVertexIndex(t,u),g=this.parseVertexIndex(i,u);if(this.addVertex(f,p,g),this.addColor(f,p,g),void 0!==a&&""!==a){const _=this.normals.length;f=this.parseNormalIndex(a,_),p=this.parseNormalIndex(c,_),g=this.parseNormalIndex(l,_),this.addNormal(f,p,g)}else this.addFaceNormal(f,p,g);if(void 0!==r&&""!==r){const _=this.uvs.length;f=this.parseUVIndex(r,_),p=this.parseUVIndex(s,_),g=this.parseUVIndex(o,_),this.addUV(f,p,g),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const s=this.parseVertexIndex(e[i],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let s=0,o=e.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(e[s],i));for(let s=0,o=t.length;s<o;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return n.startObject("",!1),n}class int extends p5{constructor(e){super(e),this.materials=null}load(e,t,i,r){const s=this,o=new Vu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new nnt;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const i=e.split("\n");let r=[];for(let a=0,c=i.length;a<c;a++){const l=i[a].trimStart();if(0===l.length)continue;const u=l.charAt(0);if("#"!==u)if("v"===u){const f=l.split(uoe);switch(f[0]){case"v":t.vertices.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),f.length>=7?(CS.setRGB(parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6])).convertSRGBToLinear(),t.colors.push(CS.r,CS.g,CS.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]));break;case"vt":t.uvs.push(parseFloat(f[1]),parseFloat(f[2]))}}else if("f"===u){const p=l.slice(1).trim().split(uoe),g=[];for(let y=0,w=p.length;y<w;y++){const C=p[y];if(C.length>0){const x=C.split("/");g.push(x)}}const _=g[0];for(let y=1,w=g.length-1;y<w;y++){const C=g[y],x=g[y+1];t.addFace(_[0],C[0],x[0],_[1],C[1],x[1],_[2],C[2],x[2])}}else if("l"===u){const f=l.substring(1).trim().split(" ");let p=[];const g=[];if(-1===l.indexOf("/"))p=f;else for(let _=0,y=f.length;_<y;_++){const w=f[_].split("/");""!==w[0]&&p.push(w[0]),""!==w[1]&&g.push(w[1])}t.addLineGeometry(p,g)}else if("p"===u){const p=l.slice(1).trim().split(" ");t.addPointGeometry(p)}else if(null!==(r=Ztt.exec(l))){const f=(" "+r[0].slice(1).trim()).slice(1);t.startObject(f)}else if(ent.test(l))t.object.startMaterial(l.substring(7).trim(),t.materialLibraries);else if(Jtt.test(l))t.materialLibraries.push(l.substring(7).trim());else if(tnt.test(l))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===u){if(r=l.split(" "),r.length>1){const p=r[1].trim().toLowerCase();t.object.smooth="0"!==p&&"off"!==p}else t.object.smooth=!0;const f=t.object.currentMaterial();f&&(f.smooth=t.object.smooth)}else{if("\0"===l)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+l+'"')}}t.finalize();const s=new Mo;if(s.materialLibraries=[].concat(t.materialLibraries),1==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let a=0,c=t.objects.length;a<c;a++){const l=t.objects[a],u=l.geometry,f=l.materials,p="Line"===u.type,g="Points"===u.type;let _=!1;if(0===u.vertices.length)continue;const y=new Ar;y.setAttribute("position",new ai(u.vertices,3)),u.normals.length>0&&y.setAttribute("normal",new ai(u.normals,3)),u.colors.length>0&&(_=!0,y.setAttribute("color",new ai(u.colors,3))),!0===u.hasUVIndices&&y.setAttribute("uv",new ai(u.uvs,2));const w=[];for(let x=0,M=f.length;x<M;x++){const T=f[x],I=T.name+"_"+T.smooth+"_"+_;let F=t.materials[I];if(null!==this.materials)if(F=this.materials.create(T.name),!p||!F||F instanceof h2){if(g&&F&&!(F instanceof u5)){const P=new u5({size:10,sizeAttenuation:!1});Z2.prototype.copy.call(P,F),P.color.copy(F.color),P.map=F.map,F=P}}else{const P=new h2;Z2.prototype.copy.call(P,F),P.color.copy(F.color),F=P}void 0===F&&(F=p?new h2:g?new u5({size:1,sizeAttenuation:!1}):new ute,F.name=T.name,F.flatShading=!T.smooth,F.vertexColors=_,t.materials[I]=F),w.push(F)}let C;if(w.length>1){for(let x=0,M=f.length;x<M;x++){const T=f[x];y.addGroup(T.groupStart,T.groupCount,x)}C=p?new pg(y,w):g?new lv(y,w):new eo(y,w)}else C=p?new pg(y,w[0]):g?new lv(y,w[0]):new eo(y,w[0]);C.name=l.name,s.add(C)}else if(t.vertices.length>0){const a=new u5({size:1,sizeAttenuation:!1}),c=new Ar;c.setAttribute("position",new ai(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(c.setAttribute("color",new ai(t.colors,3)),a.vertexColors=!0);const l=new lv(c,a);s.add(l)}return s}}let g_=(()=>{class n{constructor(t,i,r,s){this.threeMaterialService=t,this.cookieService=i,this.httpClient=r,this.appService=s,this.textures={},this.cameraPerspective=!0,this.update$=new Je}swapCamera(){this.cameraPerspective=!this.cameraPerspective,this.update$.next(void 0)}filter(t,i){t.children.forEach(r=>{console.log(r.name,i),r.visible=!!r.name.includes(i)})}unionAll(t){let i=t[0];return t.forEach(r=>{void 0!==r&&(r.updateMatrix(),r!==i&&(i=Ya.union(i,r)))}),i}flatShapeCross(t,i,r){const s=this.flatShape(t,i,r,i);return this.rotateAroundAxis(s,Ci(-90),Ro.blue),this.rotateAroundAxis(s,Ci(-90),Ro.red),s}flatShape(t,i=0,r=[An.insulation],s){if(t.length<3)return;const o=new Qd,a=t[0];o.moveTo(0,0),t.forEach(p=>{o.lineTo(p[0]-a[0],p[1]-a[1])}),o.lineTo(0,0);const c={steps:2,depth:s,bevelEnabled:!1},l=r.flatMap(p=>this.threeMaterialService.getMaterial(p,r.length>1)),u=new Zx(o,c),f=new eo(u,l);return f.rotateX(Math.PI/2),f.receiveShadow=!0,f.castShadow=!0,this.translate(f,a[0],i,a[1]),f}translate(t,i,r,s){t.applyMatrix4((new Ui).makeTranslation(i,r,s))}createPane(t){const{material:i,coords:r,xyz:s}=t,o=new Qd,a=r[0];o.moveTo(0,0),r.forEach(u=>{o.lineTo(u[0]-a[0],u[1]-a[1])}),o.lineTo(0,0);const c=new eM(o),l=new eo(c,this.threeMaterialService.getMaterial(i)[0]);return this.translate(l,s[0],s[1],s[2]),l}createBox(t){const{material:i,whd:r,xyz:s}=t,[o,a,c]=r,[l,u,f]=s||[0,0,0],p=new N0(o,a,c),g=new eo(p,this.threeMaterialService.getMaterial(i));return g.position.set(o/2+l,a/2+u,c/2+f),g.castShadow=!0,g.receiveShadow=!0,g}createCube(t){const{material:i,whd:r,xyz:s}=t,[o,a,c]=r,[l,u,f]=s||[0,0,0],g=this.flatShape([[0,0],[o,0],[o,c],[0,c]],0,[i],a);return g.position.set(l,u+a,f),g.castShadow=!0,g.receiveShadow=!0,g}importGLTF(t,i){(new Ctt).load(`/assets/models/${t}`,s=>{console.log("import dude");const o=s.scene;o.children.forEach(a=>{a.castShadow=!0,a.receiveShadow=!0}),o.castShadow=!0,o.receiveShadow=!0,o.name=t,i(o)})}importOBJ(t,i,r){(new int).load(`/assets/models/${i}`,o=>{o.children.forEach(a=>{a.castShadow=!0,a.receiveShadow=!0}),o.castShadow=!0,o.receiveShadow=!0,o.name=i,r(o)})}basicGround(t,i){const s=new g3(100,100,1,1),o=this.threeMaterialService.getMaterial(An.whiteWood),a=new eo(s,o[0]);a.position.set(0,i,0),a.rotateX(-Math.PI/2),a.receiveShadow=!0,t.add(a)}rotateAroundAxis(t,i,r=Ro.green,s=new ge(0,0,0)){var o=new D2;o.setFromAxisAngle((n=>{switch(n){case Ro.x:return new ge(1,0,0);case Ro.y:return new ge(0,1,0);case Ro.z:return new ge(0,0,1);case Ro.red:return new ge(1,0,0);case Ro.green:return new ge(0,1,0);case Ro.blue:return new ge(0,0,1)}})(r),i),t.applyQuaternion(o),t.position.sub(s),t.position.applyQuaternion(o),t.position.add(s)}}return n.\u0275fac=function(t){return new(t||n)(Ye(mS),Ye(Iu),Ye(Md),Ye(Fo))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rnt=["rendererContainer"];var Fr=(()=>(function(n){n.East="East",n.West="West",n.North="North",n.South="South",n.Top="Top",n.Bottom="Bottom"}(Fr||(Fr={})),Fr))();const poe={[Fr.North]:0,[Fr.West]:90,[Fr.South]:180,[Fr.East]:270};let goe=(()=>{class n{constructor(t,i,r,s,o,a){this.threeService=t,this.houseService=i,this.host=r,this.appService=s,this.cookieService=o,this.threeMaterialService=a,this.subscriptions=[],this.modelName="base",this.resize$=new Ao(void 0),this.renderer=new Tee({antialias:!0,alpha:!0}),this.scene=new Lee,this.subModels={},this.animations={},this.house$=this.houseService.house$,this.animationDuration=1.5,this.clipBox=new wtt,this.cameraMargin=2}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.observer.unobserve(this.host.nativeElement),this.gui.destroy()}AfterViewInitCallback(){}OnSectionChangeCallback(){}defaultCamera(){this.camera.position.set(10,10,10),this.controls.target.set(1,1,1)}loadManager(){}ngAfterViewInit(){this.house=this.house$.value,this.cross=this.house.cross,this.construction=this.house.construction,this.keys.forEach(t=>{this.subModels[t]=[],this.animations[t]=$u.timeline()}),this.createScene(),this.observer=new ResizeObserver(t=>this.resize$.next(t)),this.observer.observe(this.host.nativeElement),this.subscriptions.push(this.appService.floor$.subscribe(t=>{this.floor=t,this.filterOnFloor()}),this.clipBox.onChange$.subscribe(()=>{this.drawAndClip()}),this.threeService.update$.subscribe(()=>{this.onUpdate()}),this.appService.states$.subscribe(t=>{this.clipBox.states(t),this.setVisibility(t,this.animationDuration),this.drawAndClip()}),this.resize$.subscribe(()=>{this.onResize()}),this.appService.fullscreen$.subscribe(t=>{this.onResize(),this.controls.enableZoom=t}),this.appService.tag$.subscribe(()=>{this.tag=this.appService.tag$.value}),this.appService.scroll$.subscribe(()=>{const t=this.appService.scroll$.value,i=this.section;if(this.section!==t.section){if(this.section=t.section,void 0===i||void 0!==this.orbitControlsCookie)return;this.OnSectionChangeCallback()}})),this.initDraw(),Cv.onStart=function(t,i,r){console.log("Started loading file: "+t+".\nLoaded "+i+" of "+r+" files.")},Cv.onLoad=function(){console.log("Loading Complete!")},Cv.onProgress=function(t,i,r){console.log("Loading file: "+t+".\nLoaded "+i+" of "+r+" files.")},Cv.onError=function(t){console.log("There was an error loading "+t)}}filterOnFloor(){const t=r=>{r.children.forEach(s=>{i(s),s instanceof Mo&&t(s)})},i=r=>{const s=r.userData.floor;s&&(r.visible=s===tt.all||this.floor===tt.top||s===this.floor)};t(this.scene)}clearScene(){console.log("clearScene");try{this.scene.children.forEach(t=>{!0===t.userData.clipped&&this.scene.remove(t)})}catch(t){console.log(t)}}env(){(new ntt).setPath("assets/").load("scythian_tombs_2_4k.hdr",(t,i)=>{const r=new WF(this.renderer),s=r.fromEquirectangular(t);r.compileCubemapShader(),this.threeMaterialService.envTexture=s.texture,this.scene.background=this.threeMaterialService.envTexture})}onUpdate(){this.setCamera()}initDraw(){this.scene.add(this.clipBox);const t=Object.values(this.cross.elevations),i=this.cookieService.get(`${this.modelName}_clip-box`);if(""!==i){const r=JSON.parse(i);this.clipBox.setCookie(r)}else this.clipBox.height=Math.max(...t)-Math.min(...t),this.clipBox.xyz[1]=Math.min(...t);this.clipBox.enabled&&this.clipBox.drawBox(),this.AfterViewInitCallback(),this.scene.traverse(r=>{r.isMesh&&(r.castShadow=!0)}),this.drawAndClip(),this.filterOnFloor()}drawAndClip(){const t=this.appService.states$.value,i=this.clipBox.box.clone();this.clipBox.enabled&&(this.clearScene(),this.clipBox.box.getWorldPosition(i.position)),Object.values(this.keys).forEach(r=>{this.subModels[r].forEach(s=>{if(this.clipBox.enabled){try{this.clipBox.box.updateMatrixWorld(!0),s instanceof eo?s=this.clip(s,i):s instanceof Mo?s=this.clipGroup(s,i):console.log(s)}catch(o){console.log(o)}this.scaleFromSomewhere(r,s),s.userData.clipped=!0}this.scene.add(s)}),this.animations[r].progress(!0===t[r]?0:1)})}onResize(){const t=this.host.nativeElement.getBoundingClientRect(),i=t.height,r=t.width;this.camera&&this.setCamera(),this.renderer.setSize(r,i),this.composer.setSize(r,i)}debug(t){const i=q2.debug;(t=t.clone()).material=new ma({color:65280,opacity:.5,transparent:!0,side:2,wireframe:!0}),this.add(i,[t]),this.scaleFromSomewhere(i,t,.5)}animate(){window.requestAnimationFrame(()=>this.animate()),this.clipBox&&!this.controlsAreActive&&this.clipBox.onMouseOver(this.camera,this.renderer,()=>{this.cookieService.set(`${this.modelName}_clip-box`,JSON.stringify({xyz:this.clipBox.xyz,height:this.clipBox.height,width:this.clipBox.width,depth:this.clipBox.depth}))},()=>{this.controls.enableRotate=!1,this.renderer.domElement.style.cursor="move"},()=>{this.controls.enableRotate=!0,this.renderer.domElement.style.cursor="auto"}),this.renderer.render(this.scene,this.camera)}setCamera(){const t=this.host.nativeElement.getBoundingClientRect(),s=t.width/t.height;if(this.threeService.cameraPerspective)this.camera=new Gc(50,s,.1,1e3);else{const o=Math.max(this.house.houseWidth,this.house.houseLength)+2*this.cameraMargin,a=o/s;this.camera=new o5(-o/2,o/2,a/2,-a/2,-1e3,1e3)}if(this.setControls(),window.camera=this.camera,this.threeService.cameraPerspective){this.orbitControlsCookie=this.cookieService.get(`${this.modelName}_orbitControls`);try{if(""!==this.orbitControlsCookie){const o=JSON.parse(this.orbitControlsCookie)[0];this.camera.matrix.fromArray(o.camera),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.controls.target.fromArray(o.target)}else this.defaultCamera()}catch(o){console.error(o),this.defaultCamera()}}else this.orthographicCameraSnap(Fr.North,!1);this.controls.update()}setControls(){this.controls=new ttt(this.camera,this.renderer.domElement),window.control=this.controls,this.subscriptions.push(Vc(this.controls,"change").pipe(XC(1e3)).subscribe(t=>{if(!this.threeService.cameraPerspective)return;const i=JSON.stringify([{camera:this.camera.matrix.toArray(),target:this.controls.target.toArray()}]);this.cookieService.set(`${this.modelName}_orbitControls`,i)})),this.controls.addEventListener("start",t=>{this.controlsAreActive=!0,this.cameraAnimation&&this.cameraAnimation.kill(),this.cameraZoomAnimation&&this.cameraZoomAnimation.kill(),this.cameraTargetAnimation&&this.cameraTargetAnimation.kill()}),this.controls.addEventListener("end",t=>{this.controlsAreActive=!1,this.orthographicCameraSnap()})}orthographicCameraSnap(t,i=!1){const r=this.camera;if(this.threeService.cameraPerspective)return;const s=this.house.houseWidth,o=this.house.houseLength,a=this.cross.elevations[Gt.topOutside];if(void 0===t){i=!0;const[p,g]=function uOe(n,e,t=3){const r=Math.atan2(e.y-n.y,Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.z-n.z,2)))*(180/Math.PI);let o=Math.atan2(e.x-n.x,e.z-n.z)*(180/Math.PI);return o<0&&(o=360+o),[mn(-r,t),mn(o,t)]}(r.position,this.controls.target),_=(w,C)=>{const x=poe[C];return w>315&&(w-=360),w<x+45&&w>x-45},y=(w,C,x,M)=>{const T=poe[C];return w>315&&(w-=360),Math.abs(w-T)<=10?C:w-T>0?M:x};p>45?t=Fr.Top:_(g,Fr.North)?t=Fr.North:_(g,Fr.West)?t=Fr.West:_(g,Fr.South)?t=Fr.South:_(g,Fr.East)&&(t=Fr.East),this.cameraViewSide===t&&(t===Fr.East?t=y(g,Fr.East,Fr.South,Fr.North):t===Fr.South?t=y(g,Fr.South,Fr.West,Fr.East):t===Fr.West?t=y(g,Fr.West,Fr.North,Fr.South):t===Fr.North&&(t=y(g,Fr.North,Fr.East,Fr.West))),this.cameraViewSide=t}let c={x:0,y:0,z:0};t==Fr.North?c={x:s/2,y:a/2,z:0*o}:t==Fr.West?c={x:0*s,y:a/2,z:o/2}:t==Fr.East?c={x:s/1,y:a/2,z:o/2}:t==Fr.South?c={x:s/2,y:a/2,z:o/1}:t==Fr.Top&&(c={x:s/2,y:a/1,z:o/2+.01});const l=([Fr.North,Fr.South].includes(t)?s:o)+2*this.cameraMargin,u=(r.right-r.left)/l,f={x:s/2,y:a/2,z:o/2};i?(this.cameraAnimation=$u.to(r.position,{duration:1,...c,onUpdate:()=>this.controls.update()}),this.cameraZoomAnimation=$u.to(r,{duration:1,zoom:(r.right-r.left)/l,onUpdate:()=>r.updateProjectionMatrix()}),this.cameraTargetAnimation=$u.to(this.controls.target,{duration:1,...f,onUpdate:()=>this.controls.update()}),this.cameraAnimation.play(),this.cameraZoomAnimation.play(),this.cameraTargetAnimation.play()):(r.position.set(c.x,c.y,c.z),r.zoom=u,this.controls.target.set(f.x,f.y,f.z),r.updateProjectionMatrix(),this.controls.update())}initSky(){const t=new wS;t.scale.setScalar(45e4),this.scene.add(t);const i=new ge,r={turbidity:10,rayleigh:1,mieCoefficient:.008,mieDirectionalG:.68,elevation:20,azimuth:13,exposure:this.renderer.toneMappingExposure},s=()=>{const a=t.material.uniforms;a.turbidity.value=r.turbidity,a.rayleigh.value=r.rayleigh,a.mieCoefficient.value=r.mieCoefficient,a.mieDirectionalG.value=r.mieDirectionalG;const c=ax.degToRad(90-r.elevation),l=ax.degToRad(r.azimuth);i.setFromSphericalCoords(1,c,l),a.sunPosition.value.copy(i),this.renderer.toneMappingExposure=r.exposure,this.renderer.render(this.scene,this.camera)},o=this.gui.addFolder("Sky");o.add(r,"turbidity",0,20,.1).onChange(s),o.add(r,"rayleigh",0,4,.001).onChange(s),o.add(r,"mieCoefficient",0,.1,.001).onChange(s),o.add(r,"mieDirectionalG",0,1,.001).onChange(s),o.add(r,"elevation",0,90,.1).onChange(s),o.add(r,"azimuth",-180,180,.1).onChange(s),o.add(r,"exposure",0,1,1e-4).onChange(s),s(),o.close()}lights(t=1){const i=new gte(16777215,7829367,1.1*t);i.position.set(0,50,35),this.scene.add(i);const r=this.gui.addFolder("Lighting");r.close(),r.add(i,"intensity",0,3,.01);const s=new Tk(16777215,.4*t);s.position.set(15,30,45),s.target.position.set(0,0,0),s.castShadow=!0,s.shadow.mapSize.width=2048,s.shadow.mapSize.height=2048,s.shadow.camera.near=.5,s.shadow.camera.far=5e3,s.shadow.bias=-1e-4,s.shadow.camera.top=30,s.shadow.camera.bottom=-30,s.shadow.camera.left=30,s.shadow.camera.right=-30,this.initSky(),this.scene.add(s)}sky(){scene.fog=new Rx(scene.background,10,100);const t=document.getElementById("vertexShader").textContent,i=document.getElementById("fragmentShader").textContent,r={topColor:{value:new Dn(30532)},bottomColor:{value:new Dn(16729167)},offset:{value:33},exponent:{value:.6}},s=new mv(400,32,15),o=new B2({uniforms:r,vertexShader:t,fragmentShader:i,side:1}),a=new eo(s,o);this.scene.add(a)}createScene(){this.setCamera(),this.renderer.shadowMap.enabled=!0,this.renderer.toneMapping=4,this.renderer.toneMappingExposure=.8,this.renderer.localClippingEnabled=!0,this.rendererContainer.nativeElement.appendChild(this.renderer.domElement),window.camera=this.camera,window.renderer=this.renderer,window.scene=this.scene,this.composer=new ptt(this.renderer);const t=window.innerWidth,i=window.innerHeight,r=new mtt(this.scene,this.camera,t,i);r.kernelRadius=.6,r.minDistance=1e-4,r.maxDistance=.001,this.composer.addPass(r),this.gui=new RH,this.gui.close(),this.animate(),this.rendererContainer.nativeElement.querySelector(".loader").remove()}yoyo(t){setTimeout(()=>{this.animations[t].yoyo(!0).repeat(-1).repeatDelay(.3).play()},1e3)}add(t,i,r=!1){i.forEach(s=>{s.userData.key=t,this.forEachMeshOrGroup(s,o=>{o.geometry&&(o.geometry.userData.key=t)})}),this.subModels[t].push(...i.filter(s=>s)),r&&i.forEach(s=>this.scene.add(s))}forEachMeshOrGroup(t,i){t instanceof eo&&i(t),t instanceof Mo&&t.children.forEach(r=>this.forEachMeshOrGroup(r,i))}clip(t,i){return t.updateMatrix(),t.updateWorldMatrix(!0,!0),i.updateMatrix(),i.updateWorldMatrix(!0,!0),Ya.subtract(t,i)}intersect(t,i){return t.updateMatrix(),i.updateMatrix(),Ya.intersect(t,i)}intersectGroup(t,i){const r=t.clone();return r.children=t.children.map(o=>o instanceof eo?this.intersect(o,i):o instanceof Mo?this.intersectGroup(o,i):void 0),r}clipGroup(t,i){const r=t.clone();return r.children=t.children.map(o=>o instanceof eo?this.clip(o,i):o instanceof Mo?this.clipGroup(o,i):void 0),r}mergeAll(t){let i=t[0];return t.forEach((r,s)=>{0!==s&&(i=this.merge(i,r))}),i}merge(t,i){return t.updateMatrix(),i.updateMatrix(),Ya.union(t,i)}translate(t,i,r,s){t.applyMatrix4((new Ui).makeTranslation(i,r,s))}scale(t,i,r,s){t.applyMatrix4((new Ui).scale(new ge(i,r,s)))}pauseAll(){this.keys.forEach(t=>{this.animations[t].pause()})}debugMeasureBlock(t=1,i=1,r=1,s=1){const o=this.threeService.createCube({material:An.floor,whd:[s,s,s],xyz:[t,i,r]});this.scene.add(o)}setVisibility(t,i=1.2){this.pauseAll(),this.keys.forEach(r=>{const s=this.animations[r],o=!0===t[r],a=1!==s.progress(),c=1===s.progress();o?c||0===i?s.timeScale(1).reverse():$u.to(s,{progress:0,duration:i}):a||0===i?s.timeScale(2).play():$u.to(s,{progress:1,duration:i})})}group(t){const i=new Mo;return t.forEach(r=>{r&&i.add(r)}),i}scaleZInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{z:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleYInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{y:0,duration:r,ease:s}),this.animations[t].to(i.scale,{y:0,z:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleXInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{x:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleFromSomewhere(t,i,r=.3,s="linear",o=!1){this.animations[t].to(i.position,{y:o?10:-10,duration:r,ease:s}),this.animations[t].to(i,{visible:!1,duration:0})}}return n.\u0275fac=function(t){return new(t||n)(U(g_),U(Jo),U(fn),U(Fo),U(Iu),U(mS))},n.\u0275cmp=Rn({type:n,selectors:[["app-three-house-base"]],viewQuery:function(t,i){if(1&t&&wo(rnt,5),2&t){let r;Qi(r=Wi())&&(i.rendererContainer=r.first)}},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),snt=(()=>{class n extends goe{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a),this.threeService=t,this.houseService=i,this.host=r,this.appService=s,this.cookieService=o,this.threeMaterialService=a,this.modelName="Construction3D",this.keys=Object.values(Di),this.demoDepth=3,this.joistFlangeHeight=.04,this.window=new Yet({}),this.windowRoughOSBClip=this.threeService.createCube({material:An.unknown,whd:[this.window.roughWidthOSB-(this.window.gap+this.window.thicknessOSB),this.window.roughHeightOSB,2],xyz:[0,this.window.roughBottomOSB,-1]}),this.windowRoughClip=this.threeService.createCube({material:An.unknown,whd:[this.window.roughWidth-this.window.gap,this.window.roughHeight,2],xyz:[0,this.window.roughBottom,-1]}),this.offsetDistanceBend=(c,l,u=!1)=>{const f=this.construction.getRoofPoint(l);let p=0,g=0;[Gt.bendInside,Gt.bendOutside].includes(l)&&(p=(this.lowerAngle-this.upperAngle)/2,g=this.edgeAngle+90),[Gt.topInside,Gt.topOutside].includes(l)&&(p=0,g=90),[Gt.lowestInside,Gt.lowestOutside].includes(l)&&(p=0,g=this.lowerAngle+180),[Gt.groundFloorInside,Gt.groundFloorOutside,Gt.wallInside,Gt.wallOutside].includes(l)&&(p=0,g=180);let _=c/Math.cos(Ci(p));return u&&(_=c),to(g,_,f)},this.appService.setState([bd.clipBoxShow,bd.clipBoxEnabled],!1,!1,!0)}handleKeyboardEvent(t){"F4"===t.key&&(console.log("reset camera"),this.camera.position.set(10,10,10),this.camera.lookAt(0,0,0)),"1"===t.key&&this.focusCamera("in"),"2"===t.key&&this.focusCamera("out")}focusCamera(t){console.log("camera to",t);var i=$u.timeline();let s=this.center.z;["in"].includes(t)&&(s+=-10),["subGround"].includes(t)&&(s+=1),["out"].includes(t)&&(s+=10),this.pauseAll(),i.to(this.camera.position,{duration:.4,x:this.center.x-10,y:["subGround"].includes(t)?0:1.8,z:s,onUpdate:()=>{this.camera.lookAt(this.center.x,this.center.y,this.center.z)},onComplete:()=>{$u.globalTimeline.play()}})}getRoofAndOffsetPoints(t){let i={};return Object.keys(Gt).forEach(r=>{i[r]=this.construction.getRoofPoint(r),i[`${r}Offset`]=this.offsetDistanceBend(t,r)}),i}getAngledProperties(t,i,r){const s=this.getRoofAndOffsetPoints(r),o=Ka(s[`${t}Offset`],s[`${i}Offset`]),a=p1(s[t],s[i]);return{totalWidth:o,angle:a,origin:this.useOppositeCorner(s[`${t}Offset`],r,a),rotation:[a-90,0,0]}}useOppositeCorner(t,i,r){const[s,o]=to(r-90,i,t);return[0,o,-s]}scaleZInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{z:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleYInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{y:0,duration:r,ease:s}),this.animations[t].to(i.scale,{y:0,z:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleXInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{x:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}AfterViewInitCallback(){this.threeService.basicGround(this.scene,-3),this.thickness=this.construction.thickness,this.crossDepth=this.construction.crossDepth,this.amountOfStuds=6,this.outerWallHeight=this.cross.outerWallHeight,this.innerWallHeight=this.cross.innerWallHeight,this.solePlateThickness=.03,this.demoWith=this.amountOfStuds*this.house.studDistance,this.studDistance=this.house.studDistance,this.ceilingHeight=this.cross.ceilingHeight,this.floorThickness=this.cross.topFloorThickness,this.floorLVLThickness=.07,this.joistFlangeWidth=.06,this.center=new ge(this.demoWith/2,this.outerWallHeight/3,this.crossDepth[pn.facade]/2),this.lowerAngle=mn(p1(this.construction.getRoofPoint(Gt.lowestOutside),this.construction.getRoofPoint(Gt.bendOutside))-90,3),this.upperAngle=mn(p1(this.construction.getRoofPoint(Gt.bendOutside),this.construction.getRoofPoint(Gt.topOutside))-90,3),this.edgeAngle=180-((180-this.lowerAngle+this.upperAngle)/2-this.upperAngle),this.lights(1),this.demoDepth=this.construction.getRoofPoint(Gt.topOutside)[0],this.buildFoundation(),this.buildICF(),this.buildGroundFloor(),this.buildTapes(),this.buildWindowOSB(),this.buildOSB(),this.buildOSBRoof(),this.buildTopFloor(),this.buildFloorLVL(),this.buildTopFloorOSB(),this.buildSole(),this.buildJoist(),this.buildRoofJoists(),this.buildInsulation(),this.buildServiceInsulation(),this.buildServiceBeams(),this.buildOuterSheet(),this.buildSpace(),this.buildRoofSpace(),this.buildFacade(),this.buildGips(),this.buildRoofTiles(),this.createMirror(),this.importDude();const t=new kk(.5);t.position.set(0,0,0),this.scene.add(t)}OnSectionChangeCallback(){[_t.constructionFoundation,_t.constructionCrawlerSpace].includes(this.section)?this.focusCamera("subGround"):[_t.constructionFloorLVL,_t.constructionRoof,_t.constructionWallOSB,_t.constructionWallTape,_t.constructionWallService,_t.constructionWallGips,_t.constructionFloor].includes(this.section)?this.focusCamera("in"):[_t.constructionWallSole,_t.constructionWallJoists,_t.constructionGroundFloor,_t.constructionWallInsulation,_t.constructionWallOuterSheet,_t.constructionWallSpace,_t.constructionWallFacade].includes(this.section)&&this.focusCamera("out")}importDude(){this.threeService.importGLTF("Male_Standing.glb",t=>{this.scene.add(t),t.scale.set(.5,.5,.5),t.rotateY(Ci(-110)),t.position.set(this.demoWith/2,this.cross.elevations[Si.topFloor],-2)})}createMirror(){this.mirror=new Xet(new g3(30,30),{color:new Dn(8355711),textureWidth:window.innerWidth*window.devicePixelRatio,textureHeight:window.innerHeight*window.devicePixelRatio}),this.mirror.visible=this.appService.states$.value[bd.mirror],this.mirror.position.set(-2,0,-this.construction.getRoofPoint(Gt.topOutside)[0]),this.scene.add(this.mirror)}createJoist(t,i,r=.04,s=.005){const o=this.joistFlangeWidth,a=[{material:An.pine,whd:[o,t,r],xyz:[0,0,0]},{material:An.pine,whd:[o,t,r],xyz:[0,0,i-r]},{material:An.osb,whd:[s,t,i-2*r],xyz:[o/2-s/2,0,r]}],c=new Mo;return a.forEach((l,u)=>{const f=this.threeService.createCube(l);c.add(f),2===u&&(f.material[0].color=new Dn(14277081))}),c}createCornerTape(t,i,r,s){const o=new Mo,a=this.threeService.createCube({material:An.tape,whd:[s,t,r]});a.rotateX(Ci(0)),this.translate(a,0,-t,0),o.add(a);const c=this.threeService.createCube({material:An.tape,whd:[s,i,r]});return c.rotateX(Ci(90)),this.translate(c,0,-i/2-r/2,-i/2+r/2),o.add(c),o}createIFCblock(t,i,r,s){const o=new Mo,a=this.threeService.createCube({material:An.foam,whd:[i,r,s]}),c=this.threeService.createCube({material:An.foam,whd:[i,r,s]});return this.translate(a,0,0,0),this.translate(c,0,0,t+s),o.add(a),o.add(c),this.scene.add(o),o}buildFoundation(){const t=Di.foundation,c=this.threeService.createCube({material:An.concrete,whd:[this.demoWith,.3,.4],xyz:[0,this.cross.elevations[Si.crawlerFloor]-.3,this.crossDepth[pn.groundFloorEdge]-.4*.8]});this.add(t,[c]),this.animations[t].to(c.scale,{z:0,y:0,duration:.6,ease:"power3"}),this.animations[t].to(c,{visible:!1,duration:0})}buildRoofJoists(){const t=Di.roofJoists;this.buildRoofHigherJoists(),this.buildRoofLowerJoists(),this.subModels[t].flatMap(r=>r.children).sort((r,s)=>r.position.x-s.position.x).forEach((r,s)=>{this.scaleZInOut(t,r,.1)}),this.buildRoofLVL()}buildRoofLowerJoists(){const t=Di.roofJoists,s=(this.construction.getRoofPoint(Gt.wallInside),this.construction.getRoofPoint(Gt.wallInside),this.construction.getRoofPoint(Gt.wallOutside)),o=this.construction.getRoofPoint(Gt.bendInside),a=this.construction.getRoofPoint(Gt.bendOutside),c=this.thickness[pn.roofJoists],l=new Mo;this.add(t,[l]),l.rotateX(Ci(this.lowerAngle)),this.translate(l,0,s[1],-s[0]);const u=Ka(s,a),f=[],p=-(90-p1(o,a)),g=new Nu(new ge(0,0,1),0);f.push(g);let _=(new Ui).makeRotationX(Ci(p));g.applyMatrix4(_.setPosition(new ge(0,o[1],-o[0]))),this.threeService.createCube({whd:[this.demoDepth,this.cross.elevations[Gt.wallInside],this.thickness[pn.joists]],material:An.unknown});const T=c-2*this.joistFlangeHeight-.1;for(let I of[...Array(this.amountOfStuds+1).keys()]){let F=I*this.studDistance-this.joistFlangeWidth/2;0===I&&(F=0);let P=this.createJoist(u+0,c);P.position.set(0,-0,0);const R=this.threeService.createCube({material:An.pine,whd:[this.joistFlangeWidth,.5,T],xyz:[0,0,this.joistFlangeHeight+.05]});P.add(R);const k=this.threeService.createCube({material:An.pine,whd:[this.joistFlangeWidth,.5,T],xyz:[0,u+0-.5,this.joistFlangeHeight+.05]});P.add(k),P.children.flatMap(W=>W.material).forEach(W=>{W.side=2,W.clippingPlanes=f,W.clipIntersection=!1,W.clipShadows=!0}),this.translate(P,F,0,0),l.add(P)}}buildRoofHigherJoists(){const t=Di.roofJoists,i=this.construction.getRoofPoint(Gt.bendInside),r=this.construction.getRoofPoint(Gt.bendOutside),o=(this.construction.getRoofPoint(Gt.topInside),this.construction.getRoofPoint(Gt.topOutside)),a=new Mo;this.add(t,[a]);const c=p1(r,o)-90;a.rotateX(Ci(c)),this.translate(a,0,r[1],-r[0]);const l=this.thickness[pn.roofJoists],u=Ka(r,o),f=[],p=new Nu(new ge(0,0,1),o[0]-this.cross.roofRidgeWidth/2);f.push(p);const g=p1(i,r)-90,_=new Nu(new ge(0,0,-1),0);f.push(_);let y=(new Ui).makeRotationX(Ci(g));_.applyMatrix4(y.setPosition(new ge(0,i[1],-i[0])));const T=l-2*this.joistFlangeHeight-.1;for(let I of[...Array(this.amountOfStuds+1).keys()]){let F=I*this.studDistance-this.joistFlangeWidth/2;0===I&&(F=0);const P=this.createJoist(u+2,l);P.position.set(0,-1,-l);const R=this.threeService.createCube({material:An.pine,whd:[this.joistFlangeWidth,1.5,T],xyz:[0,0,this.joistFlangeHeight+.05]});P.add(R);const k=this.threeService.createCube({material:An.pine,whd:[this.joistFlangeWidth,1.5,T],xyz:[0,u+1-.5,this.joistFlangeHeight+.05]});P.add(k),P.children.flatMap(W=>W.material).forEach(W=>{W.side=2,W.clippingPlanes=f,W.clipIntersection=!1,W.clipShadows=!0}),this.translate(P,F,0,0),a.add(P)}}buildICF(){const t=Di.crawlerSpace,i=.2,c=this.cross.crawlerHeight,l=this.demoWith,p=Math.ceil(c/.3),g=Math.ceil(l/.6),_=this.cross.elevations[Si.crawlerCeiling],y=_-c,w=this.crossDepth[pn.groundFloorEdge]-i,C=Number(`${p}${g+1}`),x=this.threeService.createCube({material:An.concrete,whd:[this.demoWith,c,i]});this.translate(x,0,_-c,w),this.scene.add(x),this.animations[t].to(x.scale,{y:0,duration:1,ease:"Back.easeIn"}),this.animations[t].to(x.position,{y,ease:"Back.easeIn",duration:1},"<"),this.animations[t].to(x.scale,{z:0}),this.animations[t].to(x,{visible:!1,duration:0});for(let M of[...Array(p).keys()]){M=p-1-M;for(let T of[...Array(g+1).keys()]){T=g-T;const I=Number(`${M}${T}`);let P=.6*T+(M%2?-.3:0),R=y+.3*M,k=.6,W=.3;if(P<0&&(k=.3,P+=.3),P+k>l&&(k=l-P),R+W>_&&(W=_-R),0===k||0===W)continue;const re=this.createIFCblock(i,k,W,.067);this.translate(re,P,R,w-.067),this.add(t,[re]);const Le=(C-I)/C,me=mn(.02+.2*Math.pow(Le,4)+.4*Math.pow(Le,16));this.animations[t].to(re.position,{y:0,x:0,duration:me,ease:"power3"}),this.animations[t].to(re.children[0].position,{x:.5,z:i,duration:me,ease:"power3"}),this.animations[t].to(re.scale,{z:0,x:0,duration:me})}}}buildTapes(){const t=Di.tapes,i=.07,r=.01,s=1.2,a=.05,c=this.crossDepth[pn.serviceBeams]-r,l=Math.ceil(this.cross.innerWallHeight/s),u=Math.ceil(this.demoWith/2.4),f=this.createCornerTape(i,1*i,r,this.window.roughWidth-this.window.gap+i);f.scale.set(1,1,-1),this.translate(f,0,this.window.roughBottom+r,this.crossDepth[pn.serviceBeams]),this.add(t,[f]),this.scaleXInOut(t,f,a);const p=this.createCornerTape(i,1*i,r,this.window.roughWidth-this.window.gap+i);p.scale.set(1,-1,-1),this.translate(p,0,this.window.roughTop-r,this.crossDepth[pn.serviceBeams]),this.add(t,[p]),this.scaleXInOut(t,p,a);const g=this.createCornerTape(i,1*i,r,this.window.roughTop-this.window.roughBottom+2*i-2*r);g.rotateZ(Ci(90)),g.scale.set(1,1,-1),this.translate(g,this.window.roughWidth-this.window.gap-r,this.window.roughBottom-i+r,this.crossDepth[pn.serviceBeams]),this.add(t,[g]),this.scaleXInOut(t,g,a);const _=this.createCornerTape(i,1*i,r,this.thickness[pn.joists]+this.thickness[pn.osb]);_.rotateY(Ci(-90)),_.scale.set(1,-1,-1),this.translate(_,this.window.roughWidth-this.window.gap-r,this.window.roughBottom,this.crossDepth[pn.serviceBeams]),this.add(t,[_]),this.scaleXInOut(t,_,a);const y=this.createCornerTape(i,1*i,r,this.thickness[pn.joists]+this.thickness[pn.osb]);y.rotateY(Ci(-90)),y.scale.set(1,1,-1),this.translate(y,this.window.roughWidth-this.window.gap-r,this.window.roughTop,this.crossDepth[pn.serviceBeams]),this.add(t,[y]),this.scaleXInOut(t,y,a);for(let w of[...Array(l).keys()]){const C=s*w,x=this.clip(this.threeService.createCube({material:An.tape,whd:[this.demoWith,i,r],xyz:[0,C,c]}),this.windowRoughOSBClip);this.add(t,[x]),this.scaleXInOut(t,x,a);for(let M of[...Array(u).keys()]){const T=w%2?2.4*M:1.2+2.4*M;if(T+i>this.demoWith)continue;let I=s;C+s>this.cross.innerWallHeight&&(I=this.cross.innerWallHeight-C);const F=this.clip(this.threeService.createCube({material:An.tape,whd:[i,I,r],xyz:[T,C,c]}),this.windowRoughOSBClip);this.add(t,[F]),this.scaleYInOut(t,F,a)}}}buildRoofTapes(){}plotRoofPoints(){const t=-this.cross.roofPoints[Gt.wallInside][0];Object.entries(this.cross.roofPoints).map(([i,r])=>{if(!i.includes("Inside"))return;console.log(i);const s=new kk(1);s.position.set(0,r[1],-r[0]-t),this.scene.add(s)})}buildInsulation(){const t=Di.insulation,i=this.cross.elevations;let o=this.studDistance-this.joistFlangeWidth/2;const a=An.insulation,c=.95*this.thickness[pn.joists],u=.95*this.thickness[pn.roofJoists];console.log(this.cross.roofPoints[Gt.bendInside],[0,i[Gt.wallInside]]),[{desc:"wall",t:this.thickness[pn.joists],w:o,coords:[[0,2*this.solePlateThickness],[0,i[Gt.wallInside]],[c,i[Gt.wallInside]],[c,2*this.solePlateThickness]]},{desc:"roofLower",t:this.thickness[pn.roofJoists],w:o,coords:[this.offsetDistanceBend(0,Gt.wallInside,!0),this.offsetDistanceBend(0,Gt.bendInside,!0),this.offsetDistanceBend(u,Gt.bendInside,!0),this.offsetDistanceBend(u,Gt.wallInside,!0)].map(f=>[-f[0],f[1]])},{desc:"roofHigher",t:this.thickness[pn.roofJoists],w:o,coords:[this.offsetDistanceBend(0,Gt.bendInside,!0),this.offsetDistanceBend(0,Gt.topInside,!0),this.offsetDistanceBend(u,Gt.topInside,!0),this.offsetDistanceBend(u,Gt.bendInside,!0)].map(f=>[-f[0],f[1]])}].forEach(f=>{for(let p of[...Array(this.amountOfStuds).keys()]){let g=p*this.studDistance-this.joistFlangeWidth/2+this.joistFlangeWidth;0===p&&(g=this.joistFlangeWidth,f.w-=this.joistFlangeWidth/2);let _=this.threeService.flatShapeCross(f.coords,f.w,[a]);this.translate(_,g,0,0),"wall"===f.desc&&(_=this.clip(_,this.windowRoughOSBClip)),this.add(t,[_])}}),this.animations[t].to(this.subModels[t].map(f=>f.position),{z:2,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(f=>f.scale),{x:0,z:0,ease:"power3",stagger:{each:.4},delay:.5},"<"),this.animations[t].to(this.subModels[t].map(f=>f),{visible:!1,duration:0})}buildJoist(){const t=Di.joists,r=this.thickness[pn.joists],s=this.cross.elevations[Si.groundFloor]+this.solePlateThickness,o=this.construction.getRoofPoint(Gt.wallInside)[1],a=new Mo;this.translate(a,0,s,this.crossDepth[pn.joists]),this.add(t,[a]),this.animations[t].to(a.rotation,{x:Ci(-90),duration:.8});const c=this.thickness[pn.osb],l=this.construction.thickness[pn.joists],u=this.amountOfStuds+2;for(let f of[...Array(u).keys()]){let p=o-s-2*this.solePlateThickness,g=this.solePlateThickness,_=f*this.studDistance-this.joistFlangeWidth/2;if(f===u-1&&(_=this.window.roughWidth-this.window.gap+this.window.thicknessOSB),0===f&&(_=0),_<this.window.roughWidth-this.window.gap){g=l+this.window.roughTopOSB-this.solePlateThickness,p=p+this.solePlateThickness-g;const w=this.createJoist(p,this.construction.thickness[pn.joists]);this.translate(w,_,g,0),a.add(w),this.scaleZInOut(t,w,.2),g=this.solePlateThickness,p=this.window.roughBottom-2*this.solePlateThickness-c}const y=this.createJoist(p,l);this.translate(y,_,g,0),a.add(y),this.scaleZInOut(t,y,.2)}for(let f of[...Array(2).keys()]){let g=l+this.window.roughTopOSB-this.solePlateThickness,_=this.joistFlangeWidth;0===f&&(_=l);const y=this.createJoist(this.window.roughWidth-this.window.gap+this.window.thicknessOSB,l);y.rotation.set(Ci(90),0,Ci(-90)),this.translate(y,0,g,_),a.add(y),this.scaleZInOut(t,y,.2)}for(let f of[0,1]){const p=this.threeService.createCube({material:An.pine,whd:[this.demoWith,this.solePlateThickness,r]});this.translate(p,0,0===f?0:o-2*this.solePlateThickness,0),a.add(p),this.scaleZInOut(t,p,.2)}}buildTopFloor(){const t=Di.topFloorJoists,i=new Mo,r=this.floorThickness,s=this.crossDepth[pn.serviceBeams]-this.floorLVLThickness,o=this.demoDepth+s,a=o+s;for(let c of[...Array(this.amountOfStuds+1).keys()]){let l=c*this.studDistance-this.joistFlangeWidth/2;0===c&&(l=0);const u=this.createJoist(o,r);u.rotateX(Ci(-90)),this.translate(u,l,this.ceilingHeight,s),i.add(u),this.animations[t].to(u.position,{z:-a,duration:.2,ease:"power3"},">"),this.animations[t].to(u.scale,{z:0,x:0,duration:.2},"<"),this.animations[t].to(u,{visible:!1,duration:0})}this.add(t,[i])}buildTopFloorOSB(){this.buildRoofTapes();const t=Di.topFloorOSB;this.brickPattern(t,[0,this.cross.elevations[Si.topFloor],this.crossDepth[pn.serviceBeams]],2.4,1.2,this.thickness[pn.osb],this.demoDepth,this.demoWith,[-90,0,0],An.osb,(u,f,p,g,_,y)=>{this.scaleZInOut(t,u,.3+(f+p)/y*.2)})}brickPattern(t,i,r,s,o,a,c,l,u,f,p){const g=new Mo,_=Math.ceil(c/r),y=Math.ceil(a/s),w=r/2;for(let C of[...Array(y+1).keys()])for(let x of[...Array(_+1).keys()]){let T=(_-x)*r+(C%2?-w:0),I=(y-C)*s,F=0,P=s,R=r,k=!1;const W=Number(`${C+1}${x+1}`);if(T<0&&(R=w,T=0),I+s>a&&(P=a-I,k=!0),T+r>=c&&(R=c-T,k=!0),I>=a||T>=c)continue;let re=this.threeService.createCube({material:u,whd:[R,P,o]});this.translate(re,T,I,F),p&&(re=this.clip(re,p)),g.add(re),f(re,C,x,R,P,W,k)}g.rotation.set(Ci(l[0]),Ci(l[1]),Ci(l[2])),this.translate(g,i[0],i[1],i[2]),this.add(t,[g])}buildRoofTiles(){const t=Di.roofTiles,l=this.thickness[pn.outerSheet]+this.thickness[pn.space]+.02,u=this.getRoofAndOffsetPoints(l);this.threeService.importGLTF("rooftile.glb",f=>{f.scale.set(1,1,1),[[Gt.lowestOutside,Gt.bendOutside],[Gt.bendOutside,Gt.topOutside]].map((g,_)=>{const{totalWidth:y,rotation:C,angle:x}=this.getAngledProperties(g[0],g[1],l),M=Math.ceil(y/.308);for(let T of[...Array(M).keys()]){const I=Math.ceil(this.demoWith/.204);for(let F of[...Array(I).keys()]){const P=.204*F,R=.308*T,k=f.clone();k.rotateX(Ci(C[0]+90+-4)),this.add(t,[k]);const[W,re]=to(x,R,u[`${g[0]}Offset`]);k.position.set(P,re+.01,-W)}}}),this.animations[t].to(this.subModels[t].map(g=>g.position),{z:2,ease:"power3",stagger:{amount:1}}),this.animations[t].to(this.subModels[t].map(g=>g.scale),{z:0,x:0,stagger:{amount:1}},"<+=0.3"),this.subModels[t].forEach(g=>this.scene.add(g)),this.animations[t].progress(!0===this.appService.states$.value[t]?0:1)})}buildOSBRoof(){const t=Di.roofOSB,s=this.demoWith,o=this.thickness[pn.osb],a=(x,M,T,I,F,P)=>{this.animations[t].to(x.scale,{x:0,y:0,z:0,duration:.3}),this.animations[t].to(x,{visible:!1,duration:0})},c=this.construction.getRoofPoint(Gt.bendInside),l=this.construction.getRoofPoint(Gt.topInside),u=[0,c[1],-c[0]-this.crossDepth[pn.osb]-o],f=Ka(c,l),p=[p1(c,l)-90,0,0];this.brickPattern(t,u,2.4,1.2,o,f,s,p,An.osb,a);const g=this.construction.getRoofPoint(Gt.wallInside),_=this.construction.getRoofPoint(Gt.bendInside),y=[0,g[1],-g[0]-this.crossDepth[pn.osb]-o],w=Ka(g,_),C=[p1(g,_)-90,0,0];this.brickPattern(t,y,2.4,1.2,o,w,s,C,An.osb,a)}buildOSB(){const t=Di.osbWall,s=this.construction.getRoofPoint(Gt.wallInside)[1],a=this.thickness[pn.osb];let f=0,p=0,g=0;this.brickPattern(t,[0,this.cross.elevations[Si.groundFloor],this.crossDepth[pn.osb]-a],2.4,1.2,a,s,this.demoWith,[0,0,0],An.osb,(_,y,w,C,x,M)=>{const T=.3+(y+w)/M*.2;this.animations[t].to(_.rotation,{x:Ci(90),duration:T});const I=1.05*C<2.4,F=1.05*x<1.2;this.animations[t].to(_.position,{x:(I?2.4:0)+C/2,y:a*f,z:-(.6+(F?1.2:0)+x/2),duration:T},"<"),I?g+=1:F?p+=1:f+=1},this.windowRoughOSBClip),this.animations[t].to(this.subModels[t].flatMap(_=>_.position),{y:-.5}),this.animations[t].to(this.subModels[t],{visible:!1,duration:0})}buildWindowOSB(){const t=Di.osbWall,i=this.thickness[pn.osb],r=this.crossDepth[pn.serviceBeams],s=this.crossDepth[pn.outerSheet]-r,o=this.threeService.createCube({material:An.osb,whd:[this.window.roughWidth-this.window.gap+i,i,s],xyz:[0,this.window.roughBottomOSB,r]});this.add(t,[o]);const a=this.threeService.createCube({material:An.osb,whd:[this.window.roughWidth-this.window.gap+i,i,s],xyz:[0,this.window.roughTop,r]});this.add(t,[a]);const c=this.threeService.createCube({material:An.osb,whd:[i,this.window.roughHeight,s],xyz:[this.window.roughWidth-this.window.gap,this.window.roughBottom,r]});this.add(t,[c]),[o,a,c].forEach(l=>{this.animations[t].to(l.position,{z:-1,duration:.6}),this.animations[t].to(l.scale,{x:0,z:0,duration:.6}),this.animations[t].to(l,{visible:!1,duration:0})})}buildServiceBeams(){const t=Di.serviceBeams,i=this.thickness[pn.serviceBeams];for(let r of[...Array(this.amountOfStuds+1).keys()]){let s=r*this.studDistance-this.joistFlangeWidth/2;0===r&&(s=0);let o=this.threeService.createCube({material:An.osb,whd:[this.joistFlangeWidth,this.ceilingHeight,i]});this.translate(o,s,0,this.crossDepth[pn.serviceBeams]-i),o=this.clip(o,this.windowRoughClip),this.add(t,[o])}this.animations[t].to(this.subModels[t].map(r=>r.position),{z:-1,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(r=>r.scale),{z:0,x:0,stagger:{each:.4}},"<+=0.3")}buildServiceInsulation(){const t=Di.serviceInsulation,i=this.thickness[pn.serviceBeams];for(let r of[...Array(this.amountOfStuds).keys()]){let s=this.studDistance-this.joistFlangeWidth,o=r*this.studDistance-this.joistFlangeWidth/2+this.joistFlangeWidth;0===r&&(o=this.joistFlangeWidth,s-=this.joistFlangeWidth/2);let a=this.threeService.createCube({material:An.insulation,whd:[s,this.ceilingHeight,i]});this.translate(a,o,0,this.crossDepth[pn.serviceBeams]-i),a=this.clip(a,this.windowRoughClip),this.add(t,[a])}this.animations[Di.serviceBeams].to(this.subModels[t].map(r=>r.position),{y:0,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[Di.serviceBeams].to(this.subModels[t].map(r=>r.scale),{z:0,y:0,duration:.7,ease:"power3",stagger:{each:.4}},"<"),this.animations[Di.serviceBeams].to(this.subModels[t].map(r=>r),{visible:!1,duration:0})}buildGroundFloor(){const t=Di.groundFloor,i=this.cross.groundFloorThickness,s=this.cross.elevations[Si.groundFloor]-i,a=this.demoDepth+this.crossDepth[pn.groundFloorEdge],c=Math.ceil(this.demoWith/1.2);for(let l of[...Array(c).keys()]){l=c-1-l;const u=this.threeService.createCube({material:An.hollowCoreSlap,whd:[1.2,i,a]});this.translate(u,1.2*l,s,this.crossDepth[pn.groundFloorEdge]-a),this.add(t,[u]),this.animations[t].to(u.position,{y:.5,duration:.3}),this.animations[t].to(u.scale,{z:0,duration:.3}),this.animations[t].to(u.position,{z:this.demoDepth,duration:.3},"<"),this.animations[t].to(u.scale,{y:0,duration:.1}),this.animations[t].to(u,{visible:!1,duration:0})}}buildSole(){const t=Di.sole,i=this.cross.elevations[Si.groundFloor],r=this.threeService.createCube({material:An.pine,whd:[this.demoWith,this.solePlateThickness,this.thickness[pn.joists]]});this.translate(r,0,i,this.crossDepth[pn.joists]),r.material[0].color=new Dn(9083745),this.add(t,[r]),this.animations[t].to(this.subModels[t].map(s=>s.position),{y:.5,duration:.6,ease:"power3"}),this.animations[t].to(this.subModels[t].map(s=>s.material),{opacity:0,duration:.4,ease:"power3"},"-=0.6"),this.animations[t].to(this.subModels[t].map(s=>s),{visible:!1,duration:0})}buildRoofLVL(){const t=Di.roofRidge,i=this.cross.roofRidgeHight,r=this.cross.roofRidgeWidth,s=this.construction.getRoofPoint(Gt.topOutside),o=this.threeService.createCube({material:An.pine,whd:[this.demoWith,i,r],xyz:[0,s[1]-i,-s[0]-r/2]});this.add(t,[o]),this.animations[t].to(this.subModels[t].map(a=>a.position),{y:0,duration:.6}),this.animations[t].to(this.subModels[t].map(a=>a.scale),{x:0,y:0,duration:.4}),this.animations[t].to(this.subModels[t].map(a=>a),{visible:!1,duration:0})}buildFloorLVL(){const t=Di.floorLVL,i=this.threeService.createCube({material:An.pine,whd:[this.demoWith,this.floorThickness,this.floorLVLThickness]});this.translate(i,0,this.ceilingHeight,this.crossDepth[pn.serviceBeams]-this.floorLVLThickness),this.add(t,[i]),this.animations[t].to(this.subModels[t].map(r=>r.position),{z:-1,duration:.6}),this.animations[t].to(this.subModels[t].map(r=>r.scale),{x:0,y:0,duration:.4}),this.animations[t].to(this.subModels[t].map(r=>r),{visible:!1,duration:0})}buildGips(){const t=Di.gips,i=this.thickness[pn.gips];for(let r of[...Array(this.amountOfStuds/2).keys()]){let s=this.threeService.createCube({material:An.gips,whd:[1.2,this.ceilingHeight,i]});this.translate(s,r*this.studDistance*2,0,this.crossDepth[pn.gips]-i),s=this.clip(s,this.windowRoughClip),this.add(t,[s])}this.animations[t].to(this.subModels[t].map(r=>r.position),{z:-2,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(r=>r.material),{opacity:0,duration:.4,ease:"power3",stagger:{each:.4}},"-=0.8"),this.animations[t].to(this.subModels[t].map(r=>r),{visible:!1,duration:0})}buildOuterSheet(){const t=Di.outerSheet,i=this.demoWith,r=this.thickness[pn.outerSheet];let s=0,o=0,a=0;const p=(g,_,y,w,C,x)=>{const M=.3+(_+y)/x*.2;this.animations[t].to(g.rotation,{x:Ci(90),duration:M});const T=1.05*w<2.4,I=1.05*C<1.2;this.animations[t].to(g.position,{x:(T?2.4:0)+w/2,y:r*s,z:.6+(I?1.2:0)+C/2,duration:M},"<"),T?a+=1:I?o+=1:s+=1};[[Gt.groundFloorInside,Gt.wallInside],[Gt.lowestOutside,Gt.bendOutside],[Gt.bendOutside,Gt.topOutside]].map((g,_)=>{let{totalWidth:y,origin:w,rotation:C}=this.getAngledProperties(g[0],g[1],r);g[0]===Gt.groundFloorInside&&(w[2]=this.crossDepth[pn.outerSheet]),this.brickPattern(t,w,2.4,1.2,r,y,i,C,An.outerSheet,0===_?p:(x,M,T,I,F,P)=>{this.scaleZInOut(t,x,.1)},0===_?this.windowRoughOSBClip:void 0)}),this.animations[t].to(this.subModels[t].flatMap(g=>g.position),{y:-.5}),this.animations[t].to(this.subModels[t],{visible:!1,duration:0})}buildSpace(){const t=Di.space,i=this.joistFlangeWidth,r=this.thickness[pn.space]/2;for(let s of[...Array(4).keys()]){const a=this.clip(this.threeService.createCube({material:An.osb,whd:[this.demoWith,i,r],xyz:[0,s/3*(this.outerWallHeight-i),this.crossDepth[pn.space]+r]}),this.windowRoughOSBClip);this.add(t,[a])}for(let s of[...Array(this.amountOfStuds+1).keys()]){let o=s*this.studDistance-i/2;0===s&&(o=0);const a=this.clip(this.threeService.createCube({material:An.pine,whd:[i,this.outerWallHeight,r],xyz:[o,0,this.crossDepth[pn.space]]}),this.windowRoughOSBClip);this.add(t,[a])}this.add(t,[this.threeService.createCube({material:An.osb,whd:[this.window.roughWidth+i,i,r],xyz:[0,this.window.roughBottom-i,this.crossDepth[pn.space]+r]})]),this.add(t,[this.threeService.createCube({material:An.osb,whd:[this.window.roughWidth+i,i,r],xyz:[0,this.window.roughTop+i/2,this.crossDepth[pn.space]+r]})]),this.add(t,[this.threeService.createCube({material:An.osb,whd:[i,this.window.roughHeight+2*i,r],xyz:[this.window.roughWidth,this.window.roughBottom-i,this.crossDepth[pn.space]]})]),this.animations[t].to(this.subModels[t].map(s=>s.position),{z:1,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(s=>s.scale),{z:0,x:0,stagger:{each:.4}},"<+=0.3")}buildRoofSpace(){const t=Di.roofSpace,i=this.thickness[pn.space]/2,s=this.getRoofAndOffsetPoints(this.thickness[pn.outerSheet]+i);[[Gt.lowestOutside,Gt.bendOutside],[Gt.bendOutside,Gt.topOutside]].map(([o,a])=>{const c=Ka(s[`${o}Offset`],s[`${a}Offset`]),l=p1(s[o],s[a]),u=this.useOppositeCorner(s[`${o}Offset`],i,l),p=Math.ceil(c/.204);for(let g of[...Array(p).keys()]){const y=this.threeService.createCube({material:An.osb,whd:[this.demoWith,this.joistFlangeWidth/2,i],xyz:[0,.204*g-this.joistFlangeWidth/2,i]});let w=(new Ui).makeRotationX(Ci(l-90));y.applyMatrix4(w.setPosition(new ge(...u))),this.add(t,[y])}for(let g of[...Array(this.amountOfStuds+1).keys()]){let _=g*this.studDistance-this.joistFlangeWidth/2;0===g&&(_=0);const y=this.threeService.createCube({material:An.pine,whd:[this.joistFlangeWidth,c,i],xyz:[_,0,0]});let w=(new Ui).makeRotationX(Ci(l-90));y.applyMatrix4(w.setPosition(new ge(...u))),this.add(t,[y])}}),this.animations[t].to(this.subModels[t].map(o=>o.position),{z:1,duration:.7,ease:"power3",stagger:{amount:1}}),this.animations[t].to(this.subModels[t].map(o=>o.scale),{z:0,x:0,stagger:{amount:1}},"<+=0.3")}buildFacade(){const t=Di.facade,i=.3,r=.02,o=.15,a=this.threeService.createCube({material:An.unknown,whd:[this.window.roughWidth-this.window.gap+o,this.window.roughHeight+.3,2],xyz:[0,this.window.roughBottom-o,-1]}),c=this.thickness[pn.facade];let l=Math.ceil(this.demoWith/(i+r));for(let u of[...Array(l).keys()]){if(0===u)continue;const p=this.clip(this.threeService.createCube({material:An.facade,whd:[.05,this.outerWallHeight,c],xyz:[u*(i+r)-.025-r/2,0,this.crossDepth[pn.facade]+c]}),a);this.add(t,[p])}for(let u of[...Array(l).keys()]){let f=u*i+u*r;0===u&&(f=0);const p=this.clip(this.threeService.createCube({material:An.facade,whd:[i,this.outerWallHeight,c],xyz:[f,0,this.crossDepth[pn.facade]]}),this.windowRoughClip);this.add(t,[p])}this.add(t,[this.threeService.createCube({material:An.whiteWood,whd:[this.window.roughWidth-this.window.gap,o,1.1*c],xyz:[0,this.window.roughBottom-o,this.crossDepth[pn.facade]+c]})]),this.add(t,[this.threeService.createCube({material:An.whiteWood,whd:[this.window.roughWidth-this.window.gap+.18,o,1.1*c],xyz:[0,this.window.roughTop,this.crossDepth[pn.facade]+c]})]),this.add(t,[this.threeService.createCube({material:An.whiteWood,whd:[o,this.window.roughHeight+.18,1.1*c],xyz:[this.window.roughWidth-this.window.gap,this.window.roughBottom-.18,this.crossDepth[pn.facade]+c]})]),this.animations[t].to(this.subModels[t].map(u=>u.position),{z:this.crossDepth[pn.facade]+i/2,ease:"power3",stagger:{amount:1.2}}),this.animations[t].to(this.subModels[t].map(u=>u.rotation),{y:Ci(90),stagger:{amount:1.2}},"<+=0.3"),this.animations[t].to(this.subModels[t].map(u=>u.scale),{z:0,x:0,stagger:{amount:1.2}},"<+=0.3")}}return n.\u0275fac=function(t){return new(t||n)(U(g_),U(Jo),U(fn),U(Fo),U(Iu),U(mS))},n.\u0275cmp=Rn({type:n,selectors:[["app-three-construction"]],hostBindings:function(t,i){1&t&&dn("keydown",function(s){return i.handleKeyboardEvent(s)},0,DL)},features:[zt],decls:4,vars:0,consts:[["rendererContainer",""],[1,"loader"]],template:function(t,i){1&t&&(H(0,"div",null,0)(2,"div",1),V(3,"Loading"),N()())},styles:["[_nghost-%COMP%]{height:100%;width:100%}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})();var Es=(()=>(function(n){n.below="below",n.above="above",n.inner="inner",n.outer="outer",n.roof="roof",n.roofAndBelow="roofAndBelow",n.inBetweenAndBelow="inBetweenAndBelow",n.roofAndAbove="roofAndAbove"}(Es||(Es={})),Es))(),K4=(()=>(function(n){n.northSouth="northSouth",n.westEast="westEast"}(K4||(K4={})),K4))();let ont=(()=>{class n extends goe{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a),this.threeService=t,this.houseService=i,this.host=r,this.appService=s,this.cookieService=o,this.threeMaterialService=a,this.modelName="House3D",this.keys=Object.values(q2),this.roofMeshes={},this.animationDuration=.1,this.windowParts={},this.windows=[],this.appService.fullscreen$.next(!0),this.preLoadWindow()}handleKeyboardEvent(t){"F4"===t.key&&(console.log("reset camera"),this.camera.position.set(10,10,10),this.camera.lookAt(0,0,0)),"1"===t.key&&this.focusCamera("in"),"2"===t.key&&this.focusCamera("out")}defaultCamera(){const t=this.house.houseWidth/2,r=this.house.houseLength/2;this.camera.position.set(-10,10,-10),this.controls.target.set(t,2,r)}AfterViewInitCallback(){this.threeService.basicGround(this.scene,this.house.cross.elevations[Si.ground]),this.lights(1),this.createTowerClip(),this.createRoofShape(),this.createFloors(),this.createWalls();const t=new kk(1);t.position.set(0,0,0),this.scene.add(t)}hexagonWindows(){const r=.6*Math.tan(Ci(30)),o=this.threeService.flatShape([[0,0],[.6,-r],[1.2,0],[1.2,1],[.6,1+r],[0,1]],1.1,[An.osb],1.1);return this.threeService.rotateAroundAxis(o,Ci(90),Ro.red),this.threeService.rotateAroundAxis(o,Ci(90),Ro.green),this.threeService.translate(o,0,1+r,1.2),o}focusCamera(t){console.log("camera to",t);var i=$u.timeline();let s=this.center.z;["in"].includes(t)&&(s+=-10),["subGround"].includes(t)&&(s+=1),["out"].includes(t)&&(s+=10),this.pauseAll(),i.to(this.camera.position,{duration:.4,x:this.center.x-10,y:["subGround"].includes(t)?0:1.8,z:s,onUpdate:()=>{this.camera.lookAt(this.center.x,this.center.y,this.center.z)},onComplete:()=>{$u.globalTimeline.play()}})}OnSectionChangeCallback(){console.log("OnSectionChangeCallback"),[_t.constructionFoundation,_t.constructionCrawlerSpace].includes(this.section)&&this.focusCamera("subGround")}getWindow(t){const i=new Mo,r=t.height-1,s=t.width-1,a=1.4/3;return Object.keys(this.windowParts).forEach(c=>{const l=this.windowParts[c].clone();["leftMid","rightMid"].includes(c)&&(l.scale.set(1,t.height/a,1),l.translateY(-t.height/2-.2)),["topMid","bottomMid"].includes(c)&&(l.scale.set(t.width/a,1,1),l.translateX(-t.width/2)),["topLeft","topMid","topRight"].includes(c)&&this.threeService.translate(l,0,r,0),["topRight","rightMid","bottomRight"].includes(c)&&this.threeService.translate(l,0,0,s),i.add(l)}),this.threeService.rotateAroundAxis(i,-Ci(t.rotate),Ro.green),this.threeService.translate(i,t.x,t.y,t.z),i.userData.key="WindowFrame",i.name=t.selector,i}preLoadWindow(){const t=this.threeMaterialService.getMaterial(An.white);this.threeService.importGLTF("window.glb",i=>{this.windowParts={},i.children.forEach(s=>{s.material=t}),[...Array(3).keys()].forEach(s=>{[...Array(3).keys()].forEach(o=>{const a=i.clone();let c;0===s&&0===o&&(c="bottomLeft"),1===s&&0===o&&(c="bottomMid"),2===s&&0===o&&(c="bottomRight"),0===s&&1===o&&(c="leftMid"),1===s&&1===o&&(c="center"),2===s&&1===o&&(c="rightMid"),0===s&&2===o&&(c="topLeft"),1===s&&2===o&&(c="topMid"),2===s&&2===o&&(c="topRight");const l=1.4/3,u=this.threeService.createCube({material:An.unknown,whd:[l,l,l],xyz:[l*s-.2,l*o-.2,-l/3]}),f=this.intersectGroup(a,u);this.threeService.rotateAroundAxis(f,Ci(-90),Ro.green),this.windowParts[c]=f})});const r=this.subModels[q2.outerWall][0];this.windows.map(s=>{if(s.noFraming)return;const o=this.getWindow(s);r.add(o)})})}createTowerClip(){const t=q2.tower,r=this.cross.elevations[Si.towerTop],s=this.threeService.flatShape(this.house.tower.outerCoords,r,[An.concrete],r);this.add(t,[s]),this.scaleFromSomewhere(t,s,.1),this.towerClip=s}createRoofShape(){const t=q2.roof,i=this.cross.roofPoints,r=this.house.stramien.out.we,s=this.house.stramien.out.ns,a={},c=[i.topOutside,i.bendOutside,i.lowestOutside],l=[i.topInside,i.bendInside,i.lowestInside],u=[y5(i.topOutside,i.topInside,.8),y5(i.bendOutside,i.bendInside,.8),y5(i.lowestOutside,i.lowestInside,.8)],f=[Ae(i.topOutside,[0,3]),Ae(i.bendOutside,[-1,3]),Ae(i.lowestOutside,[0,0])],p=Ka(u[0],i.topOutside),g=P=>{const R=P[0];return[...P,...P.map(k=>[2*R[0]-k[0],k[1]]).slice().reverse()].map(k=>[R[0]-k[0],R[1]-k[1]])},_={[Es.below]:g([...l,Ae(i.lowestInside,[0,-1])]),[Es.above]:g([...c,...f.slice().reverse()]),[Es.outer]:g([...c,...u.slice().reverse()]),[Es.inner]:g([...l,...u.slice().reverse()]),[Es.roof]:g([...l,...c.slice().reverse()]),[Es.roofAndAbove]:g([...l,...f.slice().reverse()]),[Es.roofAndBelow]:g([...c,Ae(i.lowestOutside,[0,-1])]),[Es.inBetweenAndBelow]:g([...u,Ae(i.lowestOutside,[0,-1])])},y=this.threeService.flatShape([Ae(this.house.centerHouse,[10,10]),Ae(this.house.centerHouse,[-10,10]),this.house.centerHouse,Ae(this.house.centerHouse,[-10,-10]),Ae(this.house.centerHouse,[10,-10]),this.house.centerHouse],10,[An.concrete],10),w=this.threeService.flatShape([Ae(this.house.centerHouse,[10,10]),Ae(this.house.centerHouse,[10,-10]),this.house.centerHouse,Ae(this.house.centerHouse,[-10,-10]),Ae(this.house.centerHouse,[-10,10]),this.house.centerHouse],10,[An.concrete],10);Object.values(K4).map(P=>{a[P]={},Object.values(Es).map((R,k)=>{let W;const re=_[R],Le=P===K4.northSouth?s.d-s.a:r.d-r.a,me=P===K4.northSouth?r.b+(r.c-r.b)/2:s.b+(s.c-s.b)/2;W=[Es.below,Es.inner,Es.roof,Es.roofAndAbove].includes(R)?this.cross.elevations[Gt.topInside]:R===Es.inBetweenAndBelow?this.cross.elevations[Gt.topOutside]-p:this.cross.elevations[Gt.topOutside];const Q=this.threeService.flatShape(re,0,R===Es.outer?[An.roof]:[An.white],Le+1.6);this.threeService.rotateAroundAxis(Q,Ci(90),Ro.red),P===K4.westEast&&this.threeService.rotateAroundAxis(Q,Ci(90),Ro.green),this.threeService.translate(Q,P===K4.northSouth?me:Le+.8,W,P===K4.northSouth?Le+.8:me),a[P][R]=this.clip(Q,P===K4.westEast?y:w)})}),Object.values(Es).map((P,R)=>{this.roofMeshes[P]=this.merge(a[K4.northSouth][P],a[K4.westEast][P])});let[C,x]=this.towerRoofInlay();const M=x.clone();this.threeService.translate(M,0,-.3,0);const T=this.towerRoof(),I=(P,R)=>{this.roofMeshes[P]=this.clip(this.roofMeshes[P].clone(),R.clone())};I(Es.outer,x),I(Es.inner,x),I(Es.above,x),I(Es.roofAndAbove,M),I(Es.roofAndAbove,this.towerClip),I(Es.above,this.towerClip),I(Es.outer,this.towerClip),I(Es.inner,this.towerClip),this.roofMeshes[Es.roofAndBelow]=this.merge(this.roofMeshes[Es.roofAndBelow],x);const F=new Mo;F.add(this.roofMeshes[Es.inner]),F.add(this.roofMeshes[Es.outer]),F.add(C),F.add(T),this.scaleFromSomewhere(t,F,1,void 0,!0),this.add(t,[F])}towerRoof(){return this.threeService.flatShape(this.house.tower.outerCoords,this.cross.elevations[Si.towerTop]+.2,[An.roof],.2)}splitTowerRoofInlay(t){const i=t.clone();this.threeService.translate(i,0,-.1,0);const r=this.clip(t,i);return this.threeService.translate(i,0,-.4,0),[this.clip(this.clip(t,i),r),r].map(o=>this.clip(o,this.roofMeshes[Es.inBetweenAndBelow]))}towerRoofInlay(){const r=this.house.stramien.out,s=y5(this.house.tower.outerCoords[4],this.house.tower.outerCoords[7]),o=[r.we.c-(r.we.c-r.we.b)/2,r.ns.c-(r.ns.c-r.ns.b)/2],a=Ka(s,o),c=Ka(this.house.tower.outerCoords[0],this.house.tower.outerCoords[3]);let u=this.threeService.flatShape([[-c/2,-2],[-c/2,0],[0,1],[c/2,0],[c/2,-2]],0,[An.unknown],a);this.threeService.rotateAroundAxis(u,Ci(90),Ro.blue),this.threeService.rotateAroundAxis(u,Ci(-90),Ro.red),this.threeService.rotateAroundAxis(u,Ci(45),Ro.green),this.translate(u,o[0],this.cross.elevations[Gt.topInside]-1,o[1]);const f=new Mo,[p,g]=this.splitTowerRoofInlay(this.clip(u.clone(),this.towerClip));return p.material=this.threeMaterialService.getMaterial(An.white),g.material=this.threeMaterialService.getMaterial(An.roof),f.add(p),f.add(g),[f,u]}createAllStuds(){const t=new Mo,i=this.house.stramien.in,r=this.house.construction.thickness[pn.joists],s=i.ns.c-i.ns.b,o=Math.max(this.house.studAmountWest,this.house.studAmountEast,this.house.studAmountNorth,this.house.studAmountSouth);["North","South","East","West"].forEach(a=>{for(let c=0;c<o;c++){const l=this.house.studDistance*(c+1);let u=[0,0],f=[0,0],p=0;if("West"===a){if(c>this.house.studAmountWest)return;u=[i.we.b-l,i.ns.b-r],f=[u[0],u[1]+s]}if("East"===a){if(c>this.house.studAmountEast)return;u=[i.we.c+l,i.ns.b],f=[u[0],u[1]+s]}if("North"===a){if(c>this.house.studAmountNorth)return;u=[i.we.b,i.ns.b-l],f=[u[0]+s,u[1]],p=Ci(90)}if("South"===a){if(c>this.house.studAmountSouth)return;u=[i.we.b,i.ns.c+l],f=[u[0]+s,u[1]],p=Ci(90)}const g=this.createStud(),_=this.createStud();this.threeService.rotateAroundAxis(g,p,Ro.green),this.threeService.rotateAroundAxis(_,p,Ro.green),this.threeService.translate(g,u[0],0,u[1]),this.threeService.translate(_,f[0],0,f[1]),t.add(g),t.add(_)}})}createStud(t=1,i=.3,r=.012,s=.04,o=.03){const a=new Mo,c=this.threeService.createCube({material:An.pine,whd:[s,t,o],xyz:[0,0,0]});a.add(c);const l=this.threeService.createCube({material:An.osb,whd:[r,t,i-2*o],xyz:[s/2-r/2,0,o]});a.add(l);const u=this.threeService.createCube({material:An.pine,whd:[s,t,o],xyz:[0,0,i-o]});return a.add(u),a}createFloors(){[{floor:tt.ground,key:q2.groundFloor,z:Si.groundFloor,t:this.cross.groundFloorThickness},{floor:tt.top,key:q2.topFloor,z:Si.topFloor,t:this.cross.topFloorThickness}].forEach(i=>{const r=new Mo;[!0,!1].forEach(s=>{const o=i.t*(s?.19999999999999996:.8),a=this.cross.elevations[i.z],c=s?a:a-i.t*(1-.8),l=this.house.partsFlatten.find(p=>p instanceof oP);let u=this.threeService.flatShape(l.coords,c,s?[An.floor]:[An.ral9016],o);this.house.partsFlatten.filter(p=>p instanceof P1&&!0===p.hole&&[i.floor].includes(p.floor)).forEach(p=>{const g=this.threeService.flatShape(p.coords,c+1,[An.unknown],o+2);if(u=this.clip(u,g),i.floor===tt.top&&"L1-void"===p.selector&&!s){const _=p.coords[1][0]-p.coords[0][0],y=this.threeService.flatShape([[0,0],[0,-o],[Math.tan(Ci(56))*o,0]],_,[An.unknown],_);this.threeService.rotateAroundAxis(y,Ci(90),Ro.red),this.threeService.rotateAroundAxis(y,Ci(90),Ro.green),this.translate(y,p.coords[0][0],c-o,p.coords[0][1]),u=this.clip(u,y)}}),r.add(u)}),this.scaleFromSomewhere(i.key,r,1,void 0,i.floor===tt.top),this.add(i.key,[r])})}curtainWall(t){const i=t.parts.find(u=>u instanceof Ta),r=this.house,o=.1,a=this.threeService.createBox({material:An.windowDarkFrame,whd:[i.width,.3,o],xyz:[i.origin[0],r.cross.ceilingHeight,i.origin[1]-o-.1]}),c=r.cross.ceilingHeight+2,l=this.threeService.createBox({material:An.windowDarkFrame,whd:[i.width,.3,o],xyz:[i.origin[0],c,i.origin[1]-o-.1]});return console.log(i,c),[a,l]}createWalls(){const t=this.house.partsFlatten.filter(p=>p instanceof ei),i=this.cross.elevations[Si.groundFloor],r=this.cross.elevations[Si.topFloor],s=[],o=[],a=[],c=this.threeService.flatShape([this.house.tower.outerCoords[0],...this.house.tower.outerCoords.slice(3)],this.cross.elevations[Si.towerTop],[An.concrete],this.cross.elevations[Si.towerTop]-this.cross.elevations[Gt.wallInside]);t.forEach(p=>{let g=p.getFootPrint();if(g.length<4)return;const _=p.type===kn.outer,y=!0===p.tower,w=p.floor===tt.tower&&y;let C=this.cross.elevations[Si.groundFloor];_&&(C=this.cross.elevations[Si.ground]),[tt.top].includes(p.floor)&&(C=this.cross.elevations[Si.topFloor]),[tt.tower].includes(p.floor)&&(C=this.cross.elevations[Si.topFloor]),w&&(C=this.cross.elevations[Gt.wallInside]);let x=p.ceiling-C;(p.gable||[tt.top,tt.all].includes(p.floor))&&(x=this.cross.elevations[Gt.topInside]-C),(w||y)&&(x=this.cross.elevations[Si.towerTop]-C),x=Math.max(x,0);const M=([R,k,W,re],Le,me)=>{const Q=y5(R,re,me),he=y5(k,W,me);return Le?[R,k,he,Q]:[Q,he,W,re]};let F,I=this.threeService.flatShape(M(g,!0,1.8),x+C,[An.ral9016],x);if(I=this.clip(I,w?this.roofMeshes[Es.roofAndBelow]:y?c:this.roofMeshes[Es.roofAndAbove]),_&&(F=this.threeService.flatShape(M(g,!1,1.8),x+C,[An.facade],x),F=this.clip(F,w?this.roofMeshes[Es.roofAndBelow]:y?c:this.roofMeshes[Es.roofAndAbove])),(p.parts?p.parts.filter(R=>R instanceof Ta||R instanceof Zo):[]).forEach(R=>{let k,W;const re=R.height,Le=R.width,me=R.origin[0],Q=R.origin[1],he=[tt.ground,tt.all].includes(R.floor)?i:r;R instanceof Ta&&(k=he+R.elevation,W=0),R instanceof Zo&&(k=he,W=1===R.scale[1]?-R.width:0,R.floor===tt.ground&&.1===R.width&&console.log(R.width));let ae=this.threeService.createCube({material:An.white,whd:[2,re,Le],xyz:[-1,0,W]});const fe=p.gable&&R.floor===tt.top;fe&&(ae=this.hexagonWindows()),this.threeService.rotateAroundAxis(ae,Ci(-R.rotate),Ro.green),this.threeService.translate(ae,me,k,Q),I=this.clip(I,ae),F&&(F=this.clip(F,ae)),R instanceof Zo&&a.push(this.createDoor(R,me,k,Q,W)),R instanceof Ta&&this.windows.push({height:R.height,width:R.width,x:me,y:k,z:Q,rotate:R.rotate,selector:R.selector,noFraming:"L0-outer-SouthWall-2-Window-14"===R.selector||fe})}),I.userData={floor:p.floor},_||w){const R=this.group([I,F]);R.name=p.selector,o.push(R)}else{const R=this.group([I,F]);R.name=p.selector,s.push(R)}});const l=this.createPilasters(),u=this.group([...o,...l,...a,...this.curtainWall(t.find(p=>"L0-outer-SouthWall-2"===p.selector))]);this.scaleFromSomewhere(q2.outerWall,u),this.add(q2.outerWall,[u]);const f=this.group(s);this.scaleFromSomewhere(q2.innerWall,f),this.add(q2.innerWall,[f])}createDoor(t,i,r,s,o){if(!t.outside)return;const a=this.threeService.createCube({material:An.ral9016,whd:[t.width,t.height,.1],xyz:[-1===t.scale[1]?-t.width:0,0,0]});return this.threeService.rotateAroundAxis(a,Ci(90-t.rotate),Ro.green),this.translate(a,i,r,s),a}createWindowPlane(t,i,r,s){let o=[];if("L0-outer-SouthWall-2-Window-14"===t.selector){const c=this.cross.roofPoints,u=c[Gt.wallInside][0],f=t.elevation,p=c[Gt.bendInside];o=[[0,0],Ae(c[Gt.wallInside],[-u,-f]),Ae(p,[-u,-f]),Ae(c[Gt.topInside],[-u,-f]),[this.house.outerBase-p[0]-u,p[1]+-f],[t.width,c[Gt.wallInside][1]+-f],[t.width,0]]}else o=[[0,0],[0,t.height],[t.width,t.height],[t.width,0]];const a=this.threeService.createPane({material:An.window,coords:o,xyz:[0,0,-.2]});return this.threeService.rotateAroundAxis(a,Ci(-(t.rotate+90)),Ro.green),this.translate(a,i,r,s),a}createPilasters(){const t=this.house.stramien.out,s=.04,o=[];return[[t.we.b,t.ns.a,0],[t.we.c,t.ns.a,-90],[t.we.d,t.ns.b,-90],[t.we.d,t.ns.c,180],[t.we.c,t.ns.d,180],[t.we.b,t.ns.d,90],[t.we.a,t.ns.c,90],[t.we.a,t.ns.b,0]].forEach(([a,c,l])=>{let u=this.threeService.createCube({material:An.white,whd:[s,7,.2+s],xyz:[-s,this.cross.elevations[Si.ground],-s]}),f=this.threeService.createCube({material:An.unknown,whd:[.2,7,s],xyz:[0,this.cross.elevations[Si.ground],-s]}),p=this.merge(u,f);this.threeService.rotateAroundAxis(p,Ci(l),Ro.green),this.translate(p,a,0,c),p=this.clip(p,this.roofMeshes[Es.roofAndAbove]),o.push(p)}),o}}return n.\u0275fac=function(t){return new(t||n)(U(g_),U(Jo),U(fn),U(Fo),U(Iu),U(mS))},n.\u0275cmp=Rn({type:n,selectors:[["app-three-house"]],hostBindings:function(t,i){1&t&&dn("keydown",function(s){return i.handleKeyboardEvent(s)},0,DL)},features:[zt],decls:4,vars:0,consts:[["rendererContainer",""],[1,"loader"]],template:function(t,i){1&t&&(H(0,"div",null,0)(2,"div",1),V(3,"Loading"),N()())},styles:["[_nghost-%COMP%]{height:100%;width:100%}.loader[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;top:0;left:0;z-index:1;background:var(--color-0);display:flex;justify-content:center;align-items:center;font-size:1.3rem}"]}),n})();const moe={leading:!0,trailing:!1};let m_=(()=>{class n{constructor(t,i,r,s){this.houseService=t,this.appService=i,this.cookieService=r,this.httpClient=s}loadSVG(t,i,r){const s=new lnt(i,r);return s.get(this.httpClient,t),s}}return n.\u0275fac=function(t){return new(t||n)(Ye(Jo),Ye(Fo),Ye(Iu),Ye(Md))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class lnt{constructor(e,t){this.selector=e,this.callback=t}get(e,t){e.get(t,{responseType:"text"}).pipe(Mc(1)).subscribe(i=>{js(this.selector).html(i.replace(/height="\d+px"/gi,'height="0px"').replace(/width="\d+px"/gi,'width="0px"')),this.update()})}update(){this.callback(this.selector)}}let O5=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.distanceSubscriptions=[],this.isDistance=!1,this.distanceMouseFirst="first",this.coords=[]}stop(){this.distanceSubscriptions.forEach(t=>t.unsubscribe()),this.distanceSVG.visible=!1,this.isDistance=!1,this.distanceSubscriptions=[],this.appService.update$.next()}click(t){"first"===this.distanceMouseFirst?this.distanceMouseFirst="second":"second"===this.distanceMouseFirst?this.distanceMouseFirst="fixed":"fixed"===this.distanceMouseFirst&&(this.distanceMouseFirst="first"),this.appService.update$.next()}mousemove(t){const[i,r]=qd(t);console.log(this.distanceSVG.visible);let s=[mn(i),mn(r)],o=.2;try{const c=t.composedPath().find(u=>"svg"===u.tagName);o=10*Number(c.getAttribute("meterPerPixel"))}catch(c){console.log(c)}const a=this.coords.filter(c=>c).map(c=>({coords:c,d:Ka(s,c)})).filter(c=>c.d<=o).sort((c,l)=>c.d-l.d).map(c=>c.coords);a.length>0&&(s=a[0]),["first"].includes(this.distanceMouseFirst)&&(this.distanceSVG.point1=s,this.distanceSVG.point2=void 0),["second"].includes(this.distanceMouseFirst)&&(this.distanceSVG.point2=s),this.appService.update$.next()}getParts(t){this.distanceSVG=t.find(i=>i instanceof cP),this.coords=[],t.forEach(i=>{i instanceof A3&&this.coords.push(...i.coords),i instanceof Xa&&this.coords.push(...i.coords)})}start(){if(this.distanceSubscriptions.length>0)return void this.stop();const t=this.appService.scroll$.value.graphic,i=document.querySelector(`svg.${t}`);if(console.log(i,`svg.${t}`),!i)return void console.error("svg not found",`svg.${t}`);const r=i.querySelector("g");t===Co.cross&&this.getParts(this.houseService.house$.value.cross.parts),t===Co.house2D&&this.getParts(this.houseService.house$.value.parts),t===Co.stairCross&&this.getParts(this.houseService.house$.value.stair.cross.parts),t===Co.stairPlan&&this.getParts(this.houseService.house$.value.stair.parts),this.distanceSVG.clear(),this.distanceMouseFirst="first",this.isDistance=!0,this.distanceSVG.visible=!0,console.log(this.distanceSVG.visible),this.distanceSubscriptions.push(Vc(r,"mousemove").subscribe(s=>{this.mousemove(s)}),Vc(r,"click").subscribe(s=>{this.click(s)}),Vc(document,"keydown").subscribe(s=>{this.stop()})),console.log(this.distanceSVG)}}return n.\u0275fac=function(t){return new(t||n)(Ye(Jo),Ye(Fo))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),unt=(()=>{class n{constructor(t,i,r){this.appService=t,this.d3Service=i,this.contextMenuService=r}ngOnInit(){}measure(){this.d3Service.start(),this.contextMenuService.closeMenu()}whatIsHere(){this.contextMenuService.closeMenu();const[t,i]=this.xy,r=new MouseEvent("click",{clientX:t,clientY:i,bubbles:!0});document.elementFromPoint(t,i).dispatchEvent(r)}}return n.\u0275fac=function(t){return new(t||n)(U(Fo),U(O5),U(qg))},n.\u0275cmp=Rn({type:n,selectors:[["context-menu"]],decls:13,vars:0,consts:[["fxLayout","column","fxLayoutAlign","start start","fxFlex","1 1"],["mat-list-item","","color","accent",3,"click"],["fxLayoutAlign","start center","fxLayoutGap","8px"]],template:function(t,i){1&t&&(H(0,"mat-action-list",0)(1,"button",1),dn("click",function(){return i.whatIsHere()}),H(2,"span",2)(3,"mat-icon"),V(4,"question_mark"),N(),H(5,"div"),V(6,"What is here?"),N()()(),H(7,"button",1),dn("click",function(){return i.measure()}),H(8,"span",2)(9,"mat-icon"),V(10,"square_foot"),N(),H(11,"div"),V(12,"Start measure"),N()()()())},dependencies:[k8,mEe,AEe,E7,T7,Nh,xB],styles:["[_nghost-%COMP%]{background:var(--color-0);padding:4px;border:1px solid;border-color:var(--color-80);border-radius:4px;box-shadow:2px 2px 0 2px #0006}.mat-list-base[_ngcontent-%COMP%]{padding:0}"]}),n})(),qg=(()=>{class n{constructor(t,i){this.overlay=t,this.d3Service=i,this.isOpen=!1}click(t){this.clientXY=[t.clientX,t.clientY],this.closeMenu(),this.d3Service.isDistance?this.d3Service.stop():this.createMenu()}createMenu(){this.overlayRef=this.overlay.create({positionStrategy:this.positionStrategy()});const t=new e9(unt);this.overlayRef.addPanelClass("example-overlay"),this.overlayRef.attach(t).instance.xy=this.clientXY,this.isOpen=!0}closeMenu(){!this.overlayRef||(this.overlayRef.detach(),this.isOpen=!1)}positionStrategy(){return this.overlay.position().global().left(this.clientXY[0]+"px").top(this.clientXY[1]+"px")}}return n.\u0275fac=function(t){return new(t||n)(Ye(f3),Ye(O5))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hnt=["svg"];let bS=(()=>{class n{constructor(t,i,r,s,o,a,c){this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.stringCache="",this.showingImage=!1,this.printPreview=!1,this.isChild=!1,this.marginInMeters=[0,0,0,0],this.marginInPixels=[0,0,0,0],this.house$=this.houseService.house$,this.sections=Object.values(_t),this.tags=Object.values(j3),this.resize$=new Ao(void 0),this.subscriptions=[],this.svgHouseSize=[[0,0],[200,100]],this.loaded=!1}onClick(t){if(this.contextMenuService.closeMenu(),this.d3DistanceService.isDistance)return;const i=a=>{if(a&&a!==this.svgEl.nativeElement)return"id"in a&&`${a.id}`.length>0?a.id:i(a.parentNode)},r=i(t.target),s=()=>{this.tooltipService.detachOverlay(),document.body.classList.remove("selection-active"),document.querySelectorAll("svg .selected").forEach((a,c)=>{a.classList.remove("selected")})};if(!r)return s();const o=this.house.partsFlatten.find(a=>a.selector===r);if(!o)return console.log(`Couldnt find [${r}] in `,t.target,"probably its only a part of its full ID"),s();document.body.classList.add("selection-active"),o.select(),this.tooltipService.attachPopup([t.pageX,t.pageY],o),console.log(o)}preventContextMenu(t){return this.contextMenuService.click(t),!1}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.observer&&this.observer.unobserve(this.host.nativeElement),this.houseService.destroyParts()}svgUpdateMarginAndSize(){}setUp(){this.svg=js(this.svgEl.nativeElement),this.g=this.svg.select("g"),this.observer=new ResizeObserver(t=>this.resize$.next(t)),this.observer.observe(this.host.nativeElement),this.resize$.pipe(I0(t=>mi(void 0))),this.subscriptions.push(Zc(this.appService.fullscreen$.pipe(Ma(t=>{t?this.svg.call(function KUe(){var u,f,p,n=QUe,e=WUe,t=qUe,i=jUe,r=$Ue,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=VUe,l=fne("start","zoom","end"),g=500,y=0,w=10;function C(Q){Q.property("__zoom",Xne).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",W).filter(r).on("touchstart.zoom",re).on("touchmove.zoom",Le).on("touchend.zoom touchcancel.zoom",me).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(Q,he){return(he=Math.max(s[0],Math.min(s[1],he)))===Q.k?Q:new j0(he,Q.x,Q.y)}function M(Q,he,K){var ae=he[0]-K[0]*Q.k,fe=he[1]-K[1]*Q.k;return ae===Q.x&&fe===Q.y?Q:new j0(Q.k,ae,fe)}function T(Q){return[(+Q[0][0]+ +Q[1][0])/2,(+Q[0][1]+ +Q[1][1])/2]}function I(Q,he,K,ae){Q.on("start.zoom",function(){F(this,arguments).event(ae).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(ae).end()}).tween("zoom",function(){var fe=this,de=arguments,ke=F(fe,de).event(ae),et=e.apply(fe,de),Fe=null==K?T(et):"function"==typeof K?K.apply(fe,de):K,wt=Math.max(et[1][0]-et[0][0],et[1][1]-et[0][1]),ut=fe.__zoom,It="function"==typeof he?he.apply(fe,de):he,xt=c(ut.invert(Fe).concat(wt/ut.k),It.invert(Fe).concat(wt/It.k));return function(Zt){if(1===Zt)Zt=It;else{var an=xt(Zt),Sn=wt/an[2];Zt=new j0(Sn,Fe[0]-an[0]*Sn,Fe[1]-an[1]*Sn)}ke.zoom(null,Zt)}})}function F(Q,he,K){return!K&&Q.__zooming||new P(Q,he)}function P(Q,he){this.that=Q,this.args=he,this.active=0,this.sourceEvent=null,this.extent=e.apply(Q,he),this.taps=0}function R(Q,...he){if(n.apply(this,arguments)){var K=F(this,he).event(Q),ae=this.__zoom,fe=Math.max(s[0],Math.min(s[1],ae.k*Math.pow(2,i.apply(this,arguments)))),de=qd(Q);if(K.wheel)(K.mouse[0][0]!==de[0]||K.mouse[0][1]!==de[1])&&(K.mouse[1]=ae.invert(K.mouse[0]=de)),clearTimeout(K.wheel);else{if(ae.k===fe)return;K.mouse=[de,ae.invert(de)],CM(this),K.start()}Fv(Q),K.wheel=setTimeout(ke,150),K.zoom("mouse",t(M(x(ae,fe),K.mouse[0],K.mouse[1]),K.extent,o))}function ke(){K.wheel=null,K.end()}}function k(Q,...he){if(!p&&n.apply(this,arguments)){var K=Q.currentTarget,ae=F(this,he,!0).event(Q),fe=js(Q.view).on("mousemove.zoom",Fe,!0).on("mouseup.zoom",wt,!0),de=qd(Q,K),ke=Q.clientX,et=Q.clientY;PUe(Q.view),sP(Q),ae.mouse=[de,this.__zoom.invert(de)],CM(this),ae.start()}function Fe(ut){if(Fv(ut),!ae.moved){var It=ut.clientX-ke,xt=ut.clientY-et;ae.moved=It*It+xt*xt>y}ae.event(ut).zoom("mouse",t(M(ae.that.__zoom,ae.mouse[0]=qd(ut,K),ae.mouse[1]),ae.extent,o))}function wt(ut){fe.on("mousemove.zoom mouseup.zoom",null),HUe(ut.view,ae.moved),Fv(ut),ae.event(ut).end()}}function W(Q,...he){if(n.apply(this,arguments)){var K=this.__zoom,ae=qd(Q.changedTouches?Q.changedTouches[0]:Q,this),fe=K.invert(ae),ke=t(M(x(K,K.k*(Q.shiftKey?.5:2)),ae,fe),e.apply(this,he),o);Fv(Q),a>0?js(this).transition().duration(a).call(I,ke,ae,Q):js(this).call(C.transform,ke,ae,Q)}}function re(Q,...he){if(n.apply(this,arguments)){var de,ke,et,Fe,K=Q.touches,ae=K.length,fe=F(this,he,Q.changedTouches.length===ae).event(Q);for(sP(Q),ke=0;ke<ae;++ke)Fe=[Fe=qd(et=K[ke],this),this.__zoom.invert(Fe),et.identifier],fe.touch0?!fe.touch1&&fe.touch0[2]!==Fe[2]&&(fe.touch1=Fe,fe.taps=0):(fe.touch0=Fe,de=!0,fe.taps=1+!!u);u&&(u=clearTimeout(u)),de&&(fe.taps<2&&(f=Fe[0],u=setTimeout(function(){u=null},g)),CM(this),fe.start())}}function Le(Q,...he){if(this.__zooming){var de,ke,et,Fe,K=F(this,he).event(Q),ae=Q.changedTouches,fe=ae.length;for(Fv(Q),de=0;de<fe;++de)et=qd(ke=ae[de],this),K.touch0&&K.touch0[2]===ke.identifier?K.touch0[0]=et:K.touch1&&K.touch1[2]===ke.identifier&&(K.touch1[0]=et);if(ke=K.that.__zoom,K.touch1){var wt=K.touch0[0],ut=K.touch0[1],It=K.touch1[0],xt=K.touch1[1],Zt=(Zt=It[0]-wt[0])*Zt+(Zt=It[1]-wt[1])*Zt,an=(an=xt[0]-ut[0])*an+(an=xt[1]-ut[1])*an;ke=x(ke,Math.sqrt(Zt/an)),et=[(wt[0]+It[0])/2,(wt[1]+It[1])/2],Fe=[(ut[0]+xt[0])/2,(ut[1]+xt[1])/2]}else{if(!K.touch0)return;et=K.touch0[0],Fe=K.touch0[1]}K.zoom("touch",t(M(ke,et,Fe),K.extent,o))}}function me(Q,...he){if(this.__zooming){var de,ke,K=F(this,he).event(Q),ae=Q.changedTouches,fe=ae.length;for(sP(Q),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),de=0;de<fe;++de)ke=ae[de],K.touch0&&K.touch0[2]===ke.identifier?delete K.touch0:K.touch1&&K.touch1[2]===ke.identifier&&delete K.touch1;if(K.touch1&&!K.touch0&&(K.touch0=K.touch1,delete K.touch1),K.touch0)K.touch0[1]=this.__zoom.invert(K.touch0[0]);else if(K.end(),2===K.taps&&(ke=qd(ke,this),Math.hypot(f[0]-ke[0],f[1]-ke[1])<w)){var et=js(this).on("dblclick.zoom");et&&et.apply(this,arguments)}}}return C.transform=function(Q,he,K,ae){var fe=Q.selection?Q.selection():Q;fe.property("__zoom",Xne),Q!==fe?I(Q,he,K,ae):fe.interrupt().each(function(){F(this,arguments).event(ae).start().zoom(null,"function"==typeof he?he.apply(this,arguments):he).end()})},C.scaleBy=function(Q,he,K,ae){C.scaleTo(Q,function(){return this.__zoom.k*("function"==typeof he?he.apply(this,arguments):he)},K,ae)},C.scaleTo=function(Q,he,K,ae){C.transform(Q,function(){var fe=e.apply(this,arguments),de=this.__zoom,ke=null==K?T(fe):"function"==typeof K?K.apply(this,arguments):K,et=de.invert(ke),Fe="function"==typeof he?he.apply(this,arguments):he;return t(M(x(de,Fe),ke,et),fe,o)},K,ae)},C.translateBy=function(Q,he,K,ae){C.transform(Q,function(){return t(this.__zoom.translate("function"==typeof he?he.apply(this,arguments):he,"function"==typeof K?K.apply(this,arguments):K),e.apply(this,arguments),o)},null,ae)},C.translateTo=function(Q,he,K,ae,fe){C.transform(Q,function(){var de=e.apply(this,arguments),ke=this.__zoom,et=null==ae?T(de):"function"==typeof ae?ae.apply(this,arguments):ae;return t(rP.translate(et[0],et[1]).scale(ke.k).translate("function"==typeof he?-he.apply(this,arguments):-he,"function"==typeof K?-K.apply(this,arguments):-K),de,o)},ae,fe)},P.prototype={event:function(Q){return Q&&(this.sourceEvent=Q),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Q,he){return this.mouse&&"mouse"!==Q&&(this.mouse[1]=he.invert(this.mouse[0])),this.touch0&&"touch"!==Q&&(this.touch0[1]=he.invert(this.touch0[0])),this.touch1&&"touch"!==Q&&(this.touch1[1]=he.invert(this.touch1[0])),this.that.__zoom=he,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Q){var he=js(this.that).datum();l.call(Q,this.that,new UUe(Q,{sourceEvent:this.sourceEvent,target:C,type:Q,transform:this.that.__zoom,dispatch:l}),he)}},C.wheelDelta=function(Q){return arguments.length?(i="function"==typeof Q?Q:IM(+Q),C):i},C.filter=function(Q){return arguments.length?(n="function"==typeof Q?Q:IM(!!Q),C):n},C.touchable=function(Q){return arguments.length?(r="function"==typeof Q?Q:IM(!!Q),C):r},C.extent=function(Q){return arguments.length?(e="function"==typeof Q?Q:IM([[+Q[0][0],+Q[0][1]],[+Q[1][0],+Q[1][1]]]),C):e},C.scaleExtent=function(Q){return arguments.length?(s[0]=+Q[0],s[1]=+Q[1],C):[s[0],s[1]]},C.translateExtent=function(Q){return arguments.length?(o[0][0]=+Q[0][0],o[1][0]=+Q[1][0],o[0][1]=+Q[0][1],o[1][1]=+Q[1][1],C):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},C.constrain=function(Q){return arguments.length?(t=Q,C):t},C.duration=function(Q){return arguments.length?(a=+Q,C):a},C.interpolate=function(Q){return arguments.length?(c=Q,C):c},C.on=function(){var Q=l.on.apply(l,arguments);return Q===l?C:Q},C.clickDistance=function(Q){return arguments.length?(y=(Q=+Q)*Q,C):Math.sqrt(y)},C.tapDistance=function(Q){return arguments.length?(w=+Q,C):w},C}().on("zoom",i=>{this.setTransform(i.transform,0)})):(this.svg.on(".zoom",null),this.setTransform())})),this.appService.scroll$.pipe(Ma(t=>{this.section=this.appService.scroll$.value.section}))).subscribe(t=>{}),Zc(this.appService.update$,this.house$).pipe(Ma(t=>{const i=this.house$.value;this.house=i,this.cross=i.cross,this.stair=i.stair})).subscribe(t=>{this.updateSVG(!0)}),Zc(this.appService.states$,this.appService.svgTransform$.pipe(Ma(t=>{if(!this.loaded&&this.graphic in t){const i=t[this.graphic];this.setTransform(new j0(i.k,i.x,i.y))}})),this.resize$.pipe(mo(t=>!this.showingImage),function cnt(n,e=YA,t=moe){const i=II(n,e);return function ant(n,e=moe){return xn((t,i)=>{const{leading:r,trailing:s}=e;let o=!1,a=null,c=null,l=!1;const u=()=>{c?.unsubscribe(),c=null,s&&(g(),l&&i.complete())},f=()=>{c=null,l&&i.complete()},p=_=>c=uo(n(_)).subscribe(_n(i,u,f)),g=()=>{if(o){o=!1;const _=a;a=null,i.next(_),!l&&p(_)}};t.subscribe(_n(i,_=>{o=!0,a=_,(!c||c.closed)&&(r?g():p(_))},()=>{l=!0,(!(s&&o&&c)||c.closed)&&i.complete()}))})}(()=>i,t)}(10))).pipe(mo(t=>void 0!==this.house),kh()).subscribe(t=>{this.updateSVG()})),this.loaded=!0}setTransform(t="translate(0,0) scale(1)",i=1e4){this.printPreview||(this.loaded&&this.appService.setTransformCookie(t,this.graphic),this.g.transition().duration(i).attr("transform",t))}updateSVG(t=!1){this.tooltipService.updateOverlay(),this.svgUpdateMarginAndSize(),this.svgSpecificUpdate();const[[i,r],[s,o]]=this.svgHouseSize,a=-this.marginInMeters[3]+i,c=-this.marginInMeters[0]+r,l=s+this.marginInMeters[3]+this.marginInMeters[1],u=o+this.marginInMeters[0]+this.marginInMeters[2],f="translate(0,0) scale(1)"===this.g.attr("transform"),p=this.showingImage||f?window.outerWidth/2:this.svgEl.nativeElement.clientWidth,g=this.showingImage||f?window.outerHeight/2:this.svgEl.nativeElement.clientHeight,_=Math.abs(mn(p,0)-this.marginInPixels[1]-this.marginInPixels[3]),y=Math.abs(mn(g,0)-this.marginInPixels[0]-this.marginInPixels[2]),w=mn(l/_),C=mn(u/y),x=Math.max(w,C)/this.getScale(),M=this.meterPerPixel!==x;this.meterPerPixel=x,this.svgEl.nativeElement.setAttribute("meterPerPixel",`${x}`);const T=this.marginInPixels.map(P=>mn(P*this.meterPerPixel));if(!this.isChild)if(this.printPreview){const P=[21,29.7];this.svg.attr("viewBox",`-2 -2 ${P[1]} ${P[0]}`)}else this.svg.transition().duration(1e3).attr("viewBox",`\n          ${-T[3]+a} \n          ${-T[0]+c} \n          ${Math.abs(l+(T[3]+T[1]))} \n          ${Math.abs(u+(T[0]+T[2]))}`);const I=[this.appService.floor$.value,this.appService.scroll$.value.section,Object.entries(this.appService.states$.value).filter(([P,R])=>!0===R).map(([P,R])=>P),this.graphic].join("-"),F=this.stringCache!==I||""===this.stringCache;this.stringCache=I,(!1!==t||F||M)&&this.house.redrawHouse({floor:this.appService.floor$.value,graphic:this.graphic,redrawAll:F||t,meterPerPixel:this.meterPerPixel,theme:void 0,print:this.printPreview})}svgSpecificUpdate(){}getScale(){const t=/scale\(\d+\.?\d*/g.exec(this.g.attr("transform"));return t?Number(t[0].replace("scale(","").replace(")","")):1}}return n.\u0275fac=function(t){return new(t||n)(U(Jo),U(Fo),U(Eg),U(fn),U(m_),U(O5),U(qg))},n.\u0275cmp=Rn({type:n,selectors:[["app-svg-base"]],viewQuery:function(t,i){if(1&t&&wo(hnt,5),2&t){let r;Qi(r=Wi())&&(i.svgEl=r.first)}},hostVars:4,hostBindings:function(t,i){1&t&&dn("click",function(s){return i.onClick(s)})("contextmenu",function(s){return i.preventContextMenu(s)}),2&t&&Br("imaged",i.showingImage)("print-preview",i.printPreview)},inputs:{isChild:"isChild"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();var fnt=Me(4159),dnt=Me.n(fnt);let pnt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i}print(t){console.log("Printing the SVG"),this.prepareToPrint(t)}prepareToPrint(t){t.printPreview=!0,this.appService.floor$.next(tt.ground),this.appService.states$.next({...this.appService.states$.value,measure:!0,doors:!0,towerFootprint:!1,stramien:!1,examplePlan:!0,theoreticalWalls:!1,grid:!1}),this.appService.setDarkMode(!1,!1),t.updateSVG(!0),t.setTransform("translate(0,0) scale(1)")}saveToCavnas(t,i){const r=t.getBoundingClientRect().width,s=t.getBoundingClientRect().height;dnt()(t.parentElement,{width:r,height:s}).then(function(o){o.style.position="absolute",o.style.top="30px",o.style.left="30px",o.style.zIndex="9999",o.style.border="12px solid darkcyan",console.log(o),console.log(r,s),i(o)})}openNewTap(t){var i=new Image;i.src=t.toDataURL("image/png",1),window.open("").document.write(i.outerHTML)}}return n.\u0275fac=function(t){return new(t||n)(Ye(Jo),Ye(Fo))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gnt=["render"];function mnt(n,e){1&n&&(Io(),Ke(0,"g",88)),2&n&&bs("id","icon-",e.$implicit,"")}function Ant(n,e){1&n&&(Io(),Ke(0,"polyline",89)),2&n&&bs("id","grid-index-",e.index,"")}function vnt(n,e){1&n&&(Io(),Ke(0,"polyline",90)),2&n&&bs("id","grid-index-",e.index,"")}function _nt(n,e){1&n&&(Io(),Ke(0,"g",88)),2&n&&Se("id",e.$implicit)}function ynt(n,e){1&n&&(Io(),H(0,"g",88),Ke(1,"polyline",91)(2,"polyline",92)(3,"polygon",93)(4,"circle",94),N()),2&n&&Se("id",e.$implicit)}function wnt(n,e){1&n&&(Io(),H(0,"g",88),Ke(1,"polygon",95)(2,"path",96),N()),2&n&&Se("id",e.$implicit)}function Cnt(n,e){1&n&&(Io(),H(0,"g",88),Ke(1,"polygon",97)(2,"path",98),N()),2&n&&Se("id",e.$implicit)}function bnt(n,e){1&n&&(Io(),Ke(0,"polyline",99)),2&n&&El("id",e.$implicit)}function xnt(n,e){if(1&n&&(Io(),H(0,"g",100),Ke(1,"use",101),N()),2&n){const t=e.$implicit;El("id",t),ee(1),El("id",t)}}function Mnt(n,e){1&n&&(Io(),Ke(0,"g",102)),2&n&&El("id",e.$implicit)}const Aoe=function(){return[]};let Snt=(()=>{class n extends bS{constructor(t,i,r,s,o,a,c,l){super(t,i,r,s,o,a,c),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.printService=l,this.marginInMeters=[0,0,0,0],this.marginInPixels=[72,64,64,8],this.gridSizeX$=new Ao(100),this.gridSizeY$=new Ao(100),this.roomKeys=this.houseService.roomKeys,this.doorKeys=this.houseService.doorKeys,this.wallKeys=this.houseService.wallKeys,this.windowKeys=this.houseService.windowKeys,this.sensorKeys=this.houseService.sensorKeys,this.exampleKeys=this.houseService.exampleKeys,this.SensorTypes=Object.values(Ge),this.graphic=Co.house2D,this.transformOrigin=[0,0],this.svgLoaders=[]}handleKeyboardEvent(t){var i=this;return Ea(function*(){t.ctrlKey&&"z"===t.key&&(console.clear(),t.preventDefault(),i.printService.print(i))})()}svgSpecificUpdate(){!0!==this.appService.fullscreen$.value&&(this.appService.scroll$.value.section===_t.welcome?(this.setTransform("translate(-1, -4) scale(0.8)",1e3),this.showingImage=!0):(this.setTransform(void 0,1e3),this.showingImage=!1))}addLayout(t="2023-01-01"){const r=this.g.append("g").attr("class","print-layout");r.attr("transform","translate(-2,-2) scale(1)");const s=[21,29.7],o=s[1]-2,a=s[0]-2,u=w5(10,0,!0),f=w5(12,0,!0),p=w5(18,0,!0),g="black";r.append("rect").attr("x",0).attr("y",0).attr("width",s[1]).attr("height",s[0]).attr("fill","none").attr("stroke",g).attr("stroke-width",1*this.meterPerPixel),r.append("rect").attr("x",1).attr("y",1).attr("width",o).attr("height",a).attr("fill","none").attr("stroke",g).attr("stroke-width",2*this.meterPerPixel);const y=2.8;(()=>{const M=r.append("g").attr("transform",`translate(${1+o-1}, ${1+a-y-1.2})`);[...Array(5).keys()].forEach((I,F)=>{M.append("line").attr("x1",-F).attr("y1",0).attr("x2",-F).attr("y2",-.1).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("text").attr("fill",g).attr("font-size",.7*u).attr("x",-F).attr("y",.3).attr("text-anchor","middle").attr("font-family","sans-serif").text(4-F)}),M.append("line").attr("x1",0).attr("y1",0).attr("x2",-4).attr("y2",0).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("text").attr("fill",g).attr("font-size",.8*u).attr("x",-4).attr("y",-.3).attr("text-anchor","left").attr("font-family","sans-serif").text("Meter")})(),(()=>{const I=1+o-9,F=1+a-y;r.append("rect").attr("fill","white").attr("stroke",g).attr("stroke-width",2*this.meterPerPixel).attr("x",I).attr("y",F).attr("width",9).attr("height",y),r.append("line").attr("x1",I+.2).attr("y1",1+a-.4-.2).attr("x2",1+o-.2).attr("y2",1+a-.4-.2).attr("stroke",g).attr("stroke-width",1*this.meterPerPixel);const P=r.append("text").attr("fill",g).attr("font-size",u).attr("font-family","sans-serif");P.clone().attr("x",1+o-.2).attr("y",F-.1).attr("font-size",f).attr("text-anchor","end").text("F\xf6rhandsbesked"),P.clone().attr("x",1+o-.2).attr("y",F+.2*3).attr("font-size",p).attr("text-anchor","end").attr("font-weight","bold").text(`Passive House ${this.house.name}`),P.clone().attr("x",I+9-.2).attr("y",F+.2*6).attr("font-size",f).attr("text-anchor","end").text("Floor plan Top floor"),P.clone().attr("x",I+9-.2).attr("y",1+a-.4-.4).attr("text-anchor","end").text("Scale 1:100"),P.clone().attr("x",I+4.5+.2).attr("y",1+a-.4-.4).attr("text-anchor","middle").text(`REV: ${(new Date).toISOString().slice(0,10)}`),P.clone().attr("x",I+.2).attr("y",1+a-.4-.4).attr("font-size",f).attr("text-anchor","start").text("Drawing A1"),P.clone().attr("x",I+.2).attr("y",1+a-.2).attr("text-anchor","start").text(t),P.clone().attr("x",1+o-.2).attr("y",1+a-.2).attr("text-anchor","end").text("Drawn by: GeoDev AB")})(),(()=>{const M=r.append("g").attr("transform",`translate(${1+o-.5}, ${1+a-y-1.2})`);M.append("text").attr("fill",g).attr("font-size",u).attr("x",0).attr("y",0).attr("text-anchor","middle").attr("font-family","sans-serif").text("N"),M.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",.5).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("line").attr("x1",0).attr("y1",0).attr("x2",.1).attr("y2",.1).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("line").attr("x1",0).attr("y1",0).attr("x2",-.1).attr("y2",.1).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel)})()}ngAfterViewInit(){this.svgLoaders.push(this.d3Service.loadSVG("assets/models/sun.svg",".g-sun",t=>{const i=this.house$.value,r=40*this.meterPerPixel;js(t).selectChild("svg").attr("height",r+"px").attr("width",r+"px").attr("x",i.houseWidth/2+"px").attr("y",i.houseLength+1*i.studDistance+"px")}));for(let t of Object.values(Ge))this.svgLoaders.push(this.d3Service.loadSVG(`assets/svg/${t}.svg`,`#icon-${t}`,i=>{const s=20*this.meterPerPixel;js(i).selectChild("svg").attr("x",-s/2+"px").attr("y",-s/2+"px").attr("height",s+"px").attr("width",s+"px")}));this.setUp(),this.setStairs(),this.renderImg=this.svg.select(".render-img").attr("xlink:href","/assets/img/top_render.jpg"),this.scaleRenderImage(),js("svg")}svgUpdateMarginAndSize(){this.gridSizeX$.next(this.house.gridSizeX),this.gridSizeY$.next(this.house.gridSizeY);const t=3*this.house.studDistance;this.marginInMeters=[t,t,t,t],this.svgHouseSize=[[0,0],[this.house.houseWidth,this.house.houseLength]],this.scaleRenderImage(),this.scaleStairs(),this.svgLoaders.forEach(i=>i.update())}setStairs(){const t=document.querySelector(".svg-plan-stair-plan").firstChild;this.svg.select(".plan-stair-plan").select(".plan-stair-plan").node().replaceWith(t),t.classList.add("plan-stair-plan")}scaleStairs(){this.svg.select(".plan-stair-plan").attr("transform-origin",`${this.stair.stairOrigin[0]+this.stair.totalWidth/2} ${this.house.stair.stairOrigin[1]+this.stair.totalHeight/2}`)}scaleRenderImage(){const t=this.house.stramien.out,i=[582,240],c=mn(this.house.houseWidth/this.meterPerPixel),l=mn(this.house.houseLength/this.meterPerPixel),u=[0,0],f=mn(549/c,5),p=mn(481/l,5),g=Math.max(p,f);if(!this.renderImg)return;const y=M=>[mn(M[0]/this.meterPerPixel,4),mn(M[1]/this.meterPerPixel,4)],C=[to(45,100,[t.we.d,t.ns.c]),[t.we.d,t.ns.c],[t.we.b+(t.we.c-t.we.b)/2,t.ns.b+(t.ns.c-t.ns.b)/2],[t.we.b,t.ns.b],to(200,100,[t.we.b,t.ns.b])],x=(M=>[u[0]-mn(M[0]*this.meterPerPixel/g),u[1]-mn(M[1]*this.meterPerPixel/g)])(i);this.renderImg.attr("x",x[0]).attr("y",x[1]).attr("width",1920*this.meterPerPixel/g).attr("height",1080*this.meterPerPixel/g).attr("clip-path",`polygon(\n0% 0%,\n100% 0%,\n100% 100%,\n${C.map(M=>(M=>{const T=y(M);return[(T[0]*g+i[0])/1920*100,(T[1]*g+i[1])/1080*100].map(I=>`${mn(I,0)}%`).join(" ")})(M)).join(", \n")}\n      )`)}}return n.\u0275fac=function(t){return new(t||n)(U(Jo),U(Fo),U(Eg),U(fn),U(m_),U(O5),U(qg),U(pnt))},n.\u0275cmp=Rn({type:n,selectors:[["app-svg-plan"]],viewQuery:function(t,i){if(1&t&&wo(gnt,5),2&t){let r;Qi(r=Wi())&&(i.renderEl=r.first)}},hostBindings:function(t,i){1&t&&dn("keydown",function(s){return i.handleKeyboardEvent(s)},0,LL)},features:[zt],decls:93,vars:15,consts:[["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet"],["svg",""],["id","MyGradient","gradientTransform","rotate(90)"],["offset","-10%",1,"alt-stop"],["offset","30%",1,"alt-stop"],["offset","100%",1,"main-stop"],["id","inset-shadow"],["stdDeviation","0.5","result","offset-blur"],["operator","out","in","SourceGraphic","in2","offset-blur","result","inverse"],["flood-color","black","flood-opacity","1","result","color"],["operator","in","in","color","in2","inverse","result","shadow"],["in","shadow","result","shadow"],["type","linear","slope",".175"],["transform","rotate(0)",1,"all"],[1,"icons",2,"display","none"],[3,"id",4,"ngFor","ngForOf"],[1,"house-stramien"],["clas","house-stramien",1,"house-stramien-in"],["clas","house-stramien","id","house-stramien-in-we-a"],["clas","house-stramien","id","house-stramien-in-we-b"],["clas","house-stramien","id","house-stramien-in-we-c"],["clas","house-stramien","id","house-stramien-in-we-d"],["clas","house-stramien","id","house-stramien-in-ns-a"],["clas","house-stramien","id","house-stramien-in-ns-b"],["clas","house-stramien","id","house-stramien-in-ns-c"],["clas","house-stramien","id","house-stramien-in-ns-d"],["clas","house-stramien",1,"house-stramien-ground"],["clas","house-stramien","id","house-stramien-ground-we-hall"],["clas","house-stramien","id","house-stramien-ground-ns-hall"],["clas","house-stramien","id","house-stramien-ground-we-toilet"],["clas","house-stramien","id","house-stramien-ground-ns-toilet"],["clas","house-stramien","id","house-stramien-top-we-hall"],["clas","house-stramien","id","house-stramien-top-ns-hall"],["clas","house-stramien","id","house-stramien-top-we-toilet"],["clas","house-stramien","id","house-stramien-top-ns-toilet"],["clas","house-stramien","id","house-stramien-top-we-walkway"],["clas","house-stramien","id","house-stramien-top-ns-walkway"],["clas","house-stramien",1,"house-stramien-out"],["clas","house-stramien","id","house-stramien-out-we-a"],["clas","house-stramien","id","house-stramien-out-we-b"],["clas","house-stramien","id","house-stramien-out-we-c"],["clas","house-stramien","id","house-stramien-out-we-d"],["clas","house-stramien","id","house-stramien-out-ns-a"],["clas","house-stramien","id","house-stramien-out-ns-b"],["clas","house-stramien","id","house-stramien-out-ns-c"],["clas","house-stramien","id","house-stramien-out-ns-d"],[1,"g-grid"],["class","grid-vertical",3,"id",4,"ngFor","ngForOf"],["class","grid-horizontal",3,"id",4,"ngFor","ngForOf"],[1,"house-wind-rose"],[1,"house-wind-rose-1"],[1,"house-wind-rose-2"],[1,"house-wind-rose-text"],[1,"g-room"],[1,"plan-stair-plan","included-stairs-plan"],[1,"plan-stair-plan"],[1,"g-wall"],[1,"g-door"],[1,"g-window"],[1,"extra"],["id","balcony-edge"],["id","hall-edge"],["id","view-lines"],["id","central-void","filter","url(#inset-shadow)"],["id","tower-walls"],["id","roof-line-1"],["id","roof-line-2"],["id","roof-line-3"],["id","roof-line-4"],["id","roof-line-5"],[1,"house-measure"],["id","house-total-height"],["id","house-total-width"],["id","house-width-1"],["id","house-width-2"],["id","house-width-3"],["id","house-height-1"],["id","house-height-2"],["id","house-height-inner"],["id","house-height-3"],[1,"g-sensor"],["class","sensor-cable",3,"id",4,"ngFor","ngForOf"],["class","sensor-g",3,"id",4,"ngFor","ngForOf"],[1,"g-example"],["class","example-g",3,"id",4,"ngFor","ngForOf"],[1,"render-img"],[1,"g-sun"],["id","g-distance"],[3,"id"],[1,"grid-vertical",3,"id"],[1,"grid-horizontal",3,"id"],[1,"wall-left"],[1,"wall-right"],[1,"wall-fill"],[1,"wall-origin"],[1,"door-wall-opening"],[1,"door-swing"],[1,"window-wall-opening"],[1,"window-pane"],[1,"sensor-cable",3,"id"],[1,"sensor-g",3,"id"],[1,"sensor-icon",3,"id"],[1,"example-g",3,"id"]],template:function(t,i){1&t&&(Io(),H(0,"svg",0,1)(2,"defs")(3,"linearGradient",2),Ke(4,"stop",3)(5,"stop",4)(6,"stop",5),N(),H(7,"filter",6),Ke(8,"feGaussianBlur",7)(9,"feComposite",8)(10,"feFlood",9)(11,"feComposite",10),H(12,"feComponentTransfer",11),Ke(13,"feFuncA",12),N()()(),H(14,"g",13)(15,"g",14),Yt(16,mnt,1,1,"g",15),N(),H(17,"g",16)(18,"g",17),Ke(19,"polyline",18)(20,"polyline",19)(21,"polyline",20)(22,"polyline",21)(23,"polyline",22)(24,"polyline",23)(25,"polyline",24)(26,"polyline",25),N(),H(27,"g",26),Ke(28,"polyline",27)(29,"polyline",28)(30,"polyline",29)(31,"polyline",30)(32,"polyline",31)(33,"polyline",32)(34,"polyline",33)(35,"polyline",34)(36,"polyline",35)(37,"polyline",36),N(),H(38,"g",37),Ke(39,"polyline",38)(40,"polyline",39)(41,"polyline",40)(42,"polyline",41)(43,"polyline",42)(44,"polyline",43)(45,"polyline",44)(46,"polyline",45),N()(),H(47,"g",46),Yt(48,Ant,1,1,"polyline",47),Yt(49,vnt,1,1,"polyline",48),N(),H(50,"g",49),Ke(51,"polygon",50)(52,"polygon",51)(53,"text",52),N(),H(54,"g",53),Yt(55,_nt,1,1,"g",15),N(),H(56,"g",54),Ke(57,"svg",55),N(),H(58,"g",56),Yt(59,ynt,5,1,"g",15),N(),H(60,"g",57),Yt(61,wnt,3,1,"g",15),N(),H(62,"g",58),Yt(63,Cnt,3,1,"g",15),N(),H(64,"g",59),Ke(65,"polyline",60)(66,"polyline",61)(67,"polyline",62)(68,"polygon",63)(69,"polygon",64)(70,"polyline",65)(71,"polyline",66)(72,"polyline",67)(73,"polyline",68)(74,"polyline",69),N(),H(75,"g",70),Ke(76,"g",71)(77,"g",72)(78,"g",73)(79,"g",74)(80,"g",75)(81,"g",76)(82,"g",77)(83,"g",78)(84,"g",79),N(),H(85,"g",80),Yt(86,bnt,1,1,"polyline",81),Yt(87,xnt,2,2,"g",82),N(),H(88,"g",83),Yt(89,Mnt,1,1,"g",84),N(),Ke(90,"image",85)(91,"g",86)(92,"g",87),N()()),2&t&&(yD(i.graphic),ee(16),Se("ngForOf",i.SensorTypes),ee(32),Se("ngForOf",xu(13,Aoe).constructor(55)),ee(1),Se("ngForOf",xu(14,Aoe).constructor(55)),ee(6),Se("ngForOf",i.roomKeys),ee(4),Se("ngForOf",i.wallKeys),ee(2),Se("ngForOf",i.doorKeys),ee(2),Se("ngForOf",i.windowKeys),ee(23),Se("ngForOf",i.sensorKeys),ee(1),Se("ngForOf",i.sensorKeys),ee(2),Se("ngForOf",i.exampleKeys))},dependencies:[W3],styles:[".print-preview{position:absolute!important;top:0;height:auto!important}  .floor-top .included-stairs-plan .floor-clip{clip-path:inherit}  .included-stairs-plan{pointer-events:none}  .sensor-water-cold,   .sensor-dimmer,   .sensor-pir,   .sensor-vent-out,   .sensor-ethernet,   .sensor-perilex,   .sensor-light-switch{fill:var(--primary-color)}  .sensor-water-cold.sensor-cable,   .sensor-dimmer.sensor-cable,   .sensor-pir.sensor-cable,   .sensor-vent-out.sensor-cable,   .sensor-ethernet.sensor-cable,   .sensor-perilex.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--primary-color)!important}  .sensor-water-warm,   .sensor-vent-in,   .sensor-camera,   .sensor-poe,   .sensor-socket,   .sensor-light-bulb{fill:var(--accent-color)}  .sensor-water-warm.sensor-cable,   .sensor-vent-in.sensor-cable,   .sensor-camera.sensor-cable,   .sensor-poe.sensor-cable,   .sensor-socket.sensor-cable,   .sensor-light-bulb.sensor-cable{stroke:var(--accent-color)!important}  .sensor-drain,   .sensor-alarm,   .sensor-light-switch{fill:var(--first-color)}  .sensor-drain.sensor-cable,   .sensor-alarm.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--first-color)!important}  .sensor-shower,   .sensor-dlc,   .sensor-wifi,   .sensor-blinds{fill:var(--second-color)}  .sensor-shower.sensor-cable,   .sensor-dlc.sensor-cable,   .sensor-wifi.sensor-cable,   .sensor-blinds.sensor-cable{stroke:var(--second-color)!important}  .sensor-water-rain,   .sensor-temperature{fill:var(--third-color)}  .sensor-water-rain.sensor-cable,   .sensor-temperature.sensor-cable{stroke:var(--third-color)!important}  .sensor-smoke{fill:#a80000}  .sensor-smoke.sensor-cable{stroke:#a80000!important}  .selection-active .g-sensor>*:not(.selected){opacity:0!important}  svg.house2D{height:100%;width:100%;position:relative}  svg.house2D polyline[id^=roof-line-]{fill:none;stroke:var(--primary-color)}  svg.house2D #hall-edge,   svg.house2D #balcony-edge{stroke:var(--color-60)}  svg.house2D .g-sun{transition:.4s;opacity:0}  svg.house2D .g-sun g{transform-origin:center;fill:#fdc865}  svg.house2D #view-lines{fill:none;stroke:var(--primary-color);opacity:0}  svg.house2D .render-img{pointer-events:none;transition:.4s;opacity:0}  svg.house2D .house-wind-rose{fill:none;transition:.4s,stroke-width 1ms;stroke:#000;stroke-linecap:square}  svg.house2D #tower-walls{fill:var(--accent-color);stroke:none;pointer-events:none;opacity:.6}  svg.house2D .house-stramien{transition:.4s,stroke-width 1ms;stroke:var(--first-color);stroke-linecap:square}  svg.house2D .house-stramien .house-stramien-out{stroke:var(--second-color)}  svg.house2D .house-stramien .house-stramien-top,   svg.house2D .house-stramien .house-stramien-ground{stroke:var(--accent-color)}  svg.house2D .house-wind-rose{opacity:0}  svg.house2D .house-wind-rose .house-wind-rose-text{stroke:none;fill:currentColor}  svg.house2D .house-wind-rose .house-wind-rose-1{fill:currentColor}  svg.house2D .g-grid .grid-main{stroke:var(--color-50)}  svg.house2D .g-grid .grid-sub{stroke:var(--color-10)}  svg.house2D .g-grid .grid-subsub{stroke:var(--color-30)}  svg.house2D .g-sensor polyline{transition:.5s;fill:none;stroke:#00f}  svg.house2D .g-sensor polyline.cable-connection{stroke:#079372}  svg.house2D .g-example svg *{stroke:var(--color-70)!important}  svg.house2D .g-example .svg-Table *{stroke:var(--color-10)}  svg.house2D .g-example .svg-Table path{fill:var(--color-20)!important;stroke:var(--color-10)}  svg.house2D .g-example .svg-Table ellipse{fill:var(--color-30)!important}  svg.house2D .g-room .room-hole polygon{fill:var(--color-20)}  svg.house2D .g-room polygon{stroke:none!important;transition:.4s;fill:var(--color-0)}  svg.house2D .g-room polygon:hover{fill:var(--primary-lighter-color)}  svg.house2D .g-room polygon.selected{fill:var(--primary-color)}  svg.house2D .g-room text{fill:var(--color-80)}  svg.house2D .g-wall{transition:.4s;opacity:1}  svg.house2D .g-wall .selected polygon{fill:var(--primary-color)}  svg.house2D .g-wall .selected circle{opacity:1}  svg.house2D .g-wall polygon{transition:.5s;fill-rule:nonzero}  svg.house2D .g-wall polygon:hover{fill:var(--primary-lighter-color)}  svg.house2D .g-wall circle{stroke:none;fill:var(--color-50);opacity:0}  svg.house2D .g-wall .type-outer{fill:var(--color-30);stroke:var(--color-60)}  svg.house2D .g-wall .type-outer .side-out{stroke:var(--color-60)}  svg.house2D .g-wall .side-out{transition:.6s}  svg.house2D .g-wall .type-inner{fill:var(--color-20);stroke:#565656}  svg.house2D .g-wall .type-theoretic{opacity:1;stroke:#0091b6;stroke-width:3px}  svg.house2D .g-wall .wall-fill{stroke:none}  svg.house2D .g-door g{transition:opacity .4s}  svg.house2D .g-door polygon{transition:.5s;fill:var(--color-0);stroke:none}  svg.house2D .g-door path{fill:none;stroke:var(--color-70);stroke-linecap:square}  svg.house2D .g-window polygon{transition:.5s;fill:var(--color-20);stroke:var(--color-60)}  svg.house2D .g-window path{fill:none;stroke:var(--color-60);stroke-linecap:square}  svg.house2D .plan-stair-plan #walk-line,   svg.house2D .plan-stair-plan .measure-stair{display:none}  .section-welcome:not(.fullscreen) .render-img{opacity:1!important}  .section-welcome:not(.fullscreen) .room-function-text{opacity:0!important}  .section-basics .house-wind-rose,   .section-basics .g-grid{transition:2s;opacity:.7!important}  .section-tower .room-f{transition:2s;fill:var(--primary-color)!important}  .tag-base-dimension #L0-outer-WestWall-3 .side-out,   .tag-base-dimension #L0-outer-NorthWall .side-out,   .tag-base-dimension #L0-outer-SouthWall-2 .side-out,   .tag-base-dimension #L0-outer-EastWall-2 .side-out{transition:.4s;stroke-width:1!important;stroke:var(--primary-color)!important;stroke-linecap:round}  .tag-orientation .main-stop{stop-color:#fdc865}  .tag-orientation .alt-stop{stop-color:var(--color-0)}  .tag-orientation .house-wind-rose{opacity:.7!important}  .tag-orientation #L0-Central{fill:#fdc865!important}  .tag-orientation #L0-West,   .tag-orientation #L0-Central,   .tag-orientation #L0-East{shape-rendering:crispEdges;fill:url(#MyGradient)!important}  .tag-orientation .g-sun{opacity:.7!important}  .tag-orientation .g-sun g{animation:spin-animation 12s infinite}  .tag-insulated .g-wall *:not(.type-inner) polygon{fill:var(--primary-color);stroke:none!important}  .tag-viewlines #view-lines{opacity:.7!important}@keyframes spin-animation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}"]}),n})();function Ent(n,e){1&n&&(Io(),Ke(0,"circle",42)),2&n&&bs("id","roof-point-",e.$implicit,"")}function Tnt(n,e){1&n&&(Io(),Ke(0,"circle",42)),2&n&&bs("id","debug-point-",e.$implicit,"")}const voe=function(n){return{opacity:n}},Lnt=function(){return[0,1,2,3,4,5,6,7,8,9,10]},Dnt=function(){return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]};let Int=(()=>{class n extends bS{constructor(t,i,r,s,o,a,c){super(t,i,r,s,o,a,c),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.marginInMeters=[3,3,3,3],this.graphic=Co.cross,this.RoofStyle=Hl}ngAfterViewInit(){this.loadFigure(),this.setUp()}loadFigure(){this.figure=this.d3Service.loadSVG("assets/models/dude.svg",".g-figure",t=>{let s,o,a;const c=.3913732394366197;[_t.roofBasics].includes(this.section)?(s=this.house$.value.cross.elevations[Si.groundFloor],o=3*this.house$.value.cross.topFloorThickness,a=!0):(s=this.house$.value.cross.elevations[Si.topFloor],o=this.house$.value.cross.innerWidth/2-c/2+.5,a=!1),js(t).selectChild("svg").attr("height","1.9px").attr("y",-s-1.9+"px").attr("x",o+"px").attr("width",c+"px").selectChild("g").attr("transform",a?"translate(117,0) scale(-1 1)":"")})}svgUpdateMarginAndSize(){this.svgHouseSize=[[0,-this.cross.elevations[Gt.topOutside]],[this.house.outerBase,-this.cross.elevations[Si.crawlerFloor]+this.cross.elevations[Gt.topOutside]]],this.marginInMeters=[3,3,3,3],this.drawBendPoint(),this.figure.update()}debugDrawPoints(){this.house.cross.pointOf70Roof().forEach((t,i)=>{js(`#debug-point-${i}`).attr("cx",t[0]).attr("cy",-t[1]).attr("r",.051).style("fill","var(--primary-color)").attr("stroke-width",0)})}drawBendPoint(){const i=this.cross.elevations[Si.topFloor];js("#bend-point__h-line").attr("points",[[0,-i-this.cross.roof70Walls],[this.cross.bendPoint[0],-i-this.cross.roof70Walls],[this.cross.bendPoint[0],-i+this.cross.bendPoint[1]+.1]].join(" ")).attr("stroke-width",2*this.meterPerPixel),js("#bend-point__h-point").attr("cx",this.cross.bendPoint[0]).attr("cy",-i+this.cross.bendPoint[1]).attr("r",.1).attr("stroke-width",2*this.meterPerPixel)}roofCheck(t){return this.section===_t.roof70?t===Hl.roof70?1:0:this.section===_t.roofCircle?t===Hl.roofCircle?1:0:[Hl.roofCircleAnd70,t].includes(this.house$.value.cross.roofStyle)?1:0}}return n.\u0275fac=function(t){return new(t||n)(U(Jo),U(Fo),U(Eg),U(fn),U(m_),U(O5),U(qg))},n.\u0275cmp=Rn({type:n,selectors:[["app-svg-cross"]],features:[zt],decls:44,vars:10,consts:[["preserveAspectRatio","xMidYMid meet",1,"cross"],["svg",""],["id","diagonalHatch","patternUnits","userSpaceOnUse","width","4","height","4","patternTransform","scale(0.1)"],["d","M-1,1 l2,-2\n               M0,4 l4,-4\n               M3,5 l2,-2",2,"stroke","black","stroke-width","0.1"],["transform","rotate(0)",1,"all"],[1,"g-figure"],[1,"g-building"],["id","building-walls"],["id","building-room"],["id","building-crawler"],["id","building-ground-line"],["id","building-fill"],["id","building-ground-fill"],["id","building-ground","fill","url(#diagonalHatch)"],[1,"g-roof-circle",3,"ngStyle"],["id","building-roof-circle-wall1"],["id","building-roof-circle-wall2"],["id","roof-circle","clip-path","url(#clip-roof2)"],["id","roof-circle-shadow"],["id","roof-circle-fill"],[1,"g-roof-70",3,"ngStyle"],["id","building-roof-70-wall1"],["id","building-roof-70-wall2"],["id","roof-70","clip-path","url(#clip-roof2)"],["id","roof-70-fill"],["id","roof-70-shadow"],[1,"g-helper"],[3,"id",4,"ngFor","ngForOf"],[1,"g-h-circle-roof"],["id","roof-circle__h-line"],["id","roof-circle__h-circle"],[1,"g-h-bend-point"],["id","bend-point__h-line"],["id","bend-point__h-point"],[1,"cross-measure"],["id","lower-roof"],["id","higher-roof"],["id","minimum"],["id","minimum-h"],["id","minimum-room"],["id","minimum-room-h"],["id","g-distance"],[3,"id"]],template:function(t,i){1&t&&(Io(),H(0,"svg",0,1)(2,"defs")(3,"pattern",2),Ke(4,"path",3),N()(),H(5,"g",4),Ke(6,"g",5),H(7,"g",6),Ke(8,"polygon",7)(9,"polygon",8)(10,"polygon",9)(11,"polyline",10)(12,"polygon",11)(13,"polygon",12)(14,"polygon",13),N(),H(15,"g",14),Ke(16,"polygon",15)(17,"polygon",16)(18,"polygon",17)(19,"polygon",18)(20,"polygon",19),N(),H(21,"g",20),Ke(22,"polygon",21)(23,"polygon",22)(24,"polygon",23)(25,"polygon",24)(26,"polygon",25),N(),H(27,"g",26),Yt(28,Ent,1,1,"circle",27),H(29,"g",28),Ke(30,"polyline",29)(31,"path",30),N(),H(32,"g",31),Ke(33,"polyline",32)(34,"circle",33),N()(),H(35,"g",34),Ke(36,"g",35)(37,"g",36)(38,"g",37)(39,"g",38)(40,"g",39)(41,"g",40),N(),Yt(42,Tnt,1,1,"circle",27),Ke(43,"g",41),N()()),2&t&&(ee(15),Se("ngStyle",G3(4,voe,i.roofCheck(i.RoofStyle.roofCircle))),ee(6),Se("ngStyle",G3(6,voe,i.roofCheck(i.RoofStyle.roof70))),ee(7),Se("ngForOf",xu(8,Lnt)),ee(14),Se("ngForOf",xu(9,Dnt)))},dependencies:[W3,fd,W9],styles:["svg.cross{width:100%;height:100%;position:relative}  svg.cross *[id*=-fill]{stroke:none;opacity:0}  svg.cross *[id*=-fill]#building-ground-fill{opacity:1;fill:var(--color-0)}  svg.cross *{transition:fill .4s}  svg.cross .g-roof-circle,   svg.cross .g-roof-70,   svg.cross .g-building{stroke:var(--color-70);fill:var(--color-30)}  svg.cross .g-roof-circle #building-crawler,   svg.cross .g-roof-circle #building-room,   svg.cross .g-roof-70 #building-crawler,   svg.cross .g-roof-70 #building-room,   svg.cross .g-building #building-crawler,   svg.cross .g-building #building-room{fill:var(--color-0)}  svg.cross .g-helper>*{stroke:var(--primary-color)!important;opacity:0;fill:none}  svg.cross .g-helper>*[id^=roof-point-]{opacity:1!important}  .section-roof-basics #building-ground-fill{fill:transparent!important}  .tag-roof-both #roof-70-shadow,   .section-roof-choice #roof-70-shadow{opacity:.6;fill:var(--primary-color)!important}  .tag-roof-both #roof-circle-shadow,   .section-roof-choice #roof-circle-shadow{opacity:1;fill:var(--accent-color)!important}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}  .state-silhouette #building-roof-circle-wall1,   .state-silhouette #building-roof-circle-wall2,   .state-silhouette #building-roof-70-wall1,   .state-silhouette #building-roof-70-wall2,   .state-silhouette *[id*=-fill]:not(#building-ground-fill){fill:var(--color-90)!important;opacity:1!important;stroke:var(--color-90)!important}  .state-silhouette *[id*=-shadow]{stroke:var(--color-90)!important;fill:var(--color-90)!important}"]}),n})();function Bnt(n,e){1&n&&(Io(),H(0,"g",16),Ke(1,"polygon",17)(2,"polygon",18)(3,"text",19),N()),2&n&&bs("id","step-",e.index,"")}const Rnt=function(){return[]};let Fnt=(()=>{class n extends bS{constructor(t,i,r,s,o,a,c,l){super(t,i,r,s,a,c,l),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.httpClient=o,this.d3Service=a,this.d3DistanceService=c,this.contextMenuService=l,this.graphic=Co.stairCross,this.floor=tt.all,this.steps=new Ao(1)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){const t=this.stair.totalRise/Math.tan(Math.PI/180*30);[_t.stairCheck,_t.stairPlan].includes(this.section)?this.svgHouseSize=[[5*this.stair.run,9*-this.stair.rise],[4*this.stair.run,4*this.stair.rise]]:(this.svgHouseSize=[[-this.stair.run,-this.stair.totalRise],[t,this.stair.totalRise+this.stair.floorThickness]],this.marginInPixels=[40,40,80,40]),this.marginInMeters=[0,2*this.stair.run,0,0],[_t.stairPlan].includes(this.section)?(this.svg.style("opacity",0),this.svg.style("pointer-events","none")):(this.svg.style("pointer-events",""),this.svg.style("opacity",1))}}return n.\u0275fac=function(t){return new(t||n)(U(Jo),U(Fo),U(Eg),U(fn),U(Md),U(m_),U(O5),U(qg))},n.\u0275cmp=Rn({type:n,selectors:[["app-svg-stair-steps"]],features:[zt],decls:17,vars:2,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-step"],["svg",""],[1,"g-building"],["id","floor-groundfloor"],["id","floor-topfloor-shadow"],["id","floor-topfloor"],[1,"g-step"],[3,"id",4,"ngFor","ngForOf"],[1,"g-helper"],["id","nose-line"],["id","back-line"],["id","run-size",1,"measure"],["id","rise-size",1,"measure"],["id","total-run-size",1,"measure"],["id","total-rise-size",1,"measure"],["id","distance"],[3,"id"],[1,"step-run"],[1,"step-rise"],[1,"step-text"]],template:function(t,i){1&t&&(Io(),H(0,"svg",0,1)(2,"g")(3,"g",2),Ke(4,"polygon",3)(5,"polygon",4)(6,"polygon",5),N(),H(7,"g",6),Yt(8,Bnt,4,1,"g",7),N(),H(9,"g",8),Ke(10,"path",9)(11,"path",10)(12,"g",11)(13,"g",12)(14,"g",13)(15,"g",14),N(),Ke(16,"g",15),N()()),2&t&&(ee(8),Se("ngForOf",xu(1,Rnt).constructor(25)))},dependencies:[W3],styles:["svg.stairs-step{width:100%;height:100%;position:relative;transition:.2s}  svg.stairs-step .g-helper,   svg.stairs-step .g-building,   svg.stairs-step .g-step{fill:var(--color-80);transition:.4s,stroke-width 1ms;stroke:var(--color-100)}  svg.stairs-step .g-step{fill:var(--color-100);stroke:none}  svg.stairs-step .g-step text{transition:.4s;opacity:0}  svg.stairs-step #back-line,   svg.stairs-step #nose-line{stroke:var(--color-30)}  svg.stairs-step .g-building{stroke:none;fill:var(--color-20)}  svg.stairs-step .g-building #floor-topfloor-shadow{fill:var(--color-5)}  svg.stairs-step .measure text{stroke:var(--color-0);paint-order:stroke}  svg.stairs-step .measure#rise-size,   svg.stairs-step .measure#run-size{transition:.4s 0s;opacity:0}  .section-stair-check #rise-size,   .section-stair-check #run-size{transition:.4s .6s!important;opacity:1!important}  .tag-amount-steps text{opacity:1!important}  .tag-amount-steps .measure{opacity:0}"]}),n})();function knt(n,e){1&n&&(Io(),Ke(0,"circle",18)),2&n&&bs("id","walk-line-",e.index,"")}function Pnt(n,e){if(1&n&&(Io(),H(0,"g",19),Ke(1,"polygon",20)(2,"polyline",21)(3,"text",22)(4,"circle",23),N()),2&n){const t=e.index;bs("id","step-plan-",t,""),ee(4),bs("id","step-stinger-",t,"")}}function Hnt(n,e){1&n&&(Io(),H(0,"g",24),Ke(1,"g",25)(2,"g",26)(3,"g",27)(4,"g",28)(5,"g",29),N())}const _oe=function(){return[]};function znt(n,e){if(1&n&&(Io(),H(0,"g",9)(1,"g",10),Ke(2,"path",11),Yt(3,knt,1,1,"circle",12),N(),Ke(4,"polygon",13),H(5,"g",14),Yt(6,Pnt,5,2,"g",15),N(),Yt(7,Hnt,6,0,"g",16),Ke(8,"g",17),N()),2&n){const t=Xt();ee(3),Se("ngForOf",xu(3,_oe).constructor(25)),ee(3),Se("ngForOf",xu(4,_oe).constructor(25)),ee(1),Se("ngIf",!t.isChild)}}let Ont=(()=>{class n extends bS{constructor(t,i,r,s,o,a,c){super(t,i,r,s,o,a,c),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.graphic=Co.stairPlan,this.floor=tt.all,this.marginInMeters=[0,0,0,0],this.marginInPixels=[64,64,0,0],this.steps=new Ao(25)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){this.svgHouseSize=[this.stair.stairOrigin,[this.stair.totalWidth,this.stair.totalHeight]],this.marginInMeters=[2*this.stair.run,2*this.stair.run,2*this.stair.run,2*this.stair.run],[_t.stairStart,_t.stairBasic,_t.stairCheck].includes(this.section)?(this.svg.style("opacity",0),this.svg.style("pointer-events","none")):(this.svg.style("pointer-events",""),this.svg.style("opacity",1))}}return n.\u0275fac=function(t){return new(t||n)(U(Jo),U(Fo),U(Eg),U(fn),U(m_),U(O5),U(qg))},n.\u0275cmp=Rn({type:n,selectors:[["app-svg-stair-plan"]],features:[zt],decls:11,vars:3,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-plan"],["svg",""],["id","clip-roof-ref"],["id","clip-ground-floor-ref"],["id","clip-roof"],[0,"xlink","href","#clip-roof-ref","overflow","visible"],["id","clip-ground-floor"],[0,"xlink","href","#clip-ground-floor-ref","overflow","visible"],["class","floor-clip","clip-path","url(#clip-ground-floor)",4,"ngIf"],["clip-path","url(#clip-ground-floor)",1,"floor-clip"],[1,"g-walk-line"],["id","walk-line"],["class","walk-line-dot",3,"id",4,"ngFor","ngForOf"],["id","outline",1,"outline"],[1,"g-step-plan"],[3,"id",4,"ngFor","ngForOf"],["class","measure-stair",4,"ngIf"],["id","distance"],[1,"walk-line-dot",3,"id"],[3,"id"],[1,"step-plan-lines"],[1,"step-plan-rise"],[1,"step-plan-text"],[1,"step-stinger",3,"id"],[1,"measure-stair"],["id","plateau-width"],["id","mid-width"],["id","total-width"],["id","total-height"],["id","lesser-height"]],template:function(t,i){1&t&&(Io(),H(0,"svg",0,1)(2,"defs"),Ke(3,"polygon",2)(4,"polygon",3),N(),H(5,"clipPath",4),Ke(6,"use",5),N(),H(7,"clipPath",6),Ke(8,"use",7),N(),Yt(9,znt,9,5,"g",8),ba(10,"async"),N()),2&t&&(ee(9),Se("ngIf",J1(10,1,i.house$)))},dependencies:[W3,u3,dd],styles:["[_nghost-%COMP%]     .floor-clip{clip-path:inherit}  svg.stairs-plan{width:100%;height:100%;position:relative;transition:.4s}  svg.stairs-plan .left-corner-line,   svg.stairs-plan .right-corner-line,   svg.stairs-plan .middleLine{stroke:var(--primary-color)}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .outline,   svg.stairs-plan .step-plan-lines{fill:none;stroke:var(--color-50)}  svg.stairs-plan .outline{stroke:var(--color-10)}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .step-stinger,   svg.stairs-plan .walk-line-dot,   svg.stairs-plan .walk-line,   svg.stairs-plan .step-plan-text{display:none}  .section-stair-plan .step-plan-rise,   .section-stair-plan .step-stinger,   .section-stair-plan .walk-line-dot,   .section-stair-plan .walk-line,   .section-stair-plan .step-plan-text{display:initial!important}  .section-stair-plan .walk-line-dot{opacity:0;fill:var(--first-color)}  .section-stair-plan #walk-line{fill:none;transition:0s;opacity:0;stroke:var(--first-color)}  .section-stair-plan .step-stinger{opacity:0;fill:var(--third-color)}  .section-stair-plan .step-plan-text{display:initial}  .section-stair-plan .step-plan-rise{stroke-dasharray:1%}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}  .state-walkLine .walk-line-dot,   .state-walkLine .step-stinger,   .state-walkLine #walk-line{opacity:1}"]}),n})();var g1e={prefix:"fas",iconName:"temperature-high",icon:[512,512,[],"f769","M416 128c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32zm0 64c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96s43 96 96 96zM96 112c0-26.5 21.5-48 48-48s48 21.5 48 48V276.5c0 17.3 7.1 31.9 15.3 42.5C217.8 332.6 224 349.5 224 368c0 44.2-35.8 80-80 80s-80-35.8-80-80c0-18.5 6.2-35.4 16.7-48.9C88.9 308.4 96 293.8 96 276.5V112zM144 0C82.1 0 32 50.2 32 112V276.5c0 .1-.1 .3-.2 .6c-.2 .6-.8 1.6-1.7 2.8C11.2 304.2 0 334.8 0 368c0 79.5 64.5 144 144 144s144-64.5 144-144c0-33.2-11.3-63.8-30.1-88.1c-.9-1.2-1.5-2.2-1.7-2.8c-.1-.3-.2-.5-.2-.6V112C256 50.2 205.9 0 144 0zm0 416c26.5 0 48-21.5 48-48c0-20.9-13.4-38.7-32-45.3V112c0-8.8-7.2-16-16-16s-16 7.2-16 16V322.7c-18.6 6.6-32 24.4-32 45.3c0 26.5 21.5 48 48 48z"]},LS_icon=[512,512,[],"f5a1","M481 31C445.1-4.8 386.9-4.8 351 31l-15 15L322.9 33C294.8 4.9 249.2 4.9 221.1 33L135 119c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0L255 66.9c9.4-9.4 24.6-9.4 33.9 0L302.1 80 186.3 195.7 316.3 325.7 481 161c35.9-35.9 35.9-94.1 0-129.9zM293.7 348.3L163.7 218.3 99.5 282.5c-48 48-80.8 109.2-94.1 175.8l-5 25c-1.6 7.9 .9 16 6.6 21.7s13.8 8.1 21.7 6.6l25-5c66.6-13.3 127.8-46.1 175.8-94.1l64.2-64.2z"],kle={prefix:"fas",iconName:"mound",icon:[576,512,[],"e52d","M144.1 179.2C173.8 127.7 228.6 96 288 96s114.2 31.7 143.9 83.2L540.4 368c12.3 21.3-3.1 48-27.7 48H63.3c-24.6 0-40-26.6-27.7-48L144.1 179.2z"]};let $4e=(()=>{class n{constructor(t,i){this.httpClient=t,this.sanitizer=i,this.height="32px",this.width="32px"}set color(t){this.fillColor="primary"===t?"var(--primary-color)":"accent"===t?"var(--accent-color)":"first"===t?"var(--first-color)":"second"===t?"var(--second-color)":"third"===t?"var(--third-color)":`${t}`}set size(t){this.width=`${t[0]}px`,this.height=`${t[1]}px`}ngOnInit(){this.httpClient.get(this.url,{responseType:"text"}).subscribe({next:t=>{t=t.replace(/height=\"64px\"/gi,"").replace(/width=\"64px\"/gi,""),this.svgData=this.sanitizer.bypassSecurityTrustHtml(t)},error:t=>{this.background="#aaa"}})}}return n.\u0275fac=function(t){return new(t||n)(U(Md),U(w8))},n.\u0275cmp=Rn({type:n,selectors:[["app-svg"]],hostVars:8,hostBindings:function(t,i){2&t&&a3("background",i.background)("fill",i.fillColor)("height",i.height)("width",i.width)},inputs:{background:"background",fillColor:"fillColor",height:"height",width:"width",url:"url",color:"color",size:"size"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(t,i){1&t&&Ke(0,"div",0),2&t&&Se("innerHTML",i.svgData,V3)},styles:["[_nghost-%COMP%]{display:inline-block}  svg>g>g>path:first-child{fill:#747474}"]}),n})();const ayt=[[["","label",""]],[["","icon",""]]],cyt=["[label]","[icon]"];let lyt=(()=>{class n{constructor(){this.floatLeft=!1,this.stateChange=new Ji,this.hover=!1}ngOnInit(){}mouseleave(){this.hover=!1}mouseenter(){this.hover=!0}change(){this.stateChange.emit(!this.state)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Rn({type:n,selectors:[["checkbox-state"]],hostVars:2,hostBindings:function(t,i){2&t&&Br("hover",i.hover)},inputs:{floatLeft:"floatLeft",state:"state"},outputs:{stateChange:"stateChange"},ngContentSelectors:cyt,decls:5,vars:6,consts:[[1,"container",3,"mouseenter","mouseleave"],[3,"checked","change"]],template:function(t,i){1&t&&(Z1(ayt),H(0,"mat-label"),Bo(1),N(),H(2,"label",0),dn("mouseenter",function(){return i.mouseenter()})("mouseleave",function(){return i.mouseleave()}),Bo(3,1),H(4,"mat-slide-toggle",1),dn("change",function(){return i.change()}),N()()),2&t&&(Br("float-left",i.floatLeft)("float-right",!i.floatLeft),Se("@stateSlideIn",i.hover&&!i.floatLeft),ee(4),Se("checked",i.state))},dependencies:[lZ,Hb],styles:['mat-label[_ngcontent-%COMP%]{display:block;position:absolute;float:right;background:var(--accent);border-radius:9px;margin:6px 0;line-height:28px;padding:0 8px;white-space:nowrap;font-size:.8rem;overflow:hidden;width:initial}mat-label.float-left[_ngcontent-%COMP%]{left:80px}mat-label.float-right[_ngcontent-%COMP%]{right:80px}[_nghost-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:16px}label.container[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:relative;padding:8px 0}label.container[_ngcontent-%COMP%]:before{content:"";display:inline-block;position:absolute;width:68px;border-top:1px solid var(--color-20);top:0;left:-4px}label.container[_ngcontent-%COMP%]    >span{height:24px;width:24px;overflow:hidden}'],data:{animation:[Hk]}}),n})();const uyt=[[["","label",""]]],hyt=["[label]"];let fyt=(()=>{class n{constructor(){this.floatLeft=!1,this.stateChange=new Ji,this.hover=!1}ngOnInit(){}mouseleave(){this.hover=!1}mouseenter(){this.hover=!0}change(){this.stateChange.emit(!this.state)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Rn({type:n,selectors:[["checkbox-toc"]],hostVars:2,hostBindings:function(t,i){2&t&&Br("hover",i.hover)},inputs:{floatLeft:"floatLeft",state:"state"},outputs:{stateChange:"stateChange"},ngContentSelectors:hyt,decls:3,vars:1,consts:[[1,"container",3,"mouseenter","mouseleave"],[3,"checked","change"]],template:function(t,i){1&t&&(Z1(uyt),H(0,"label",0),dn("mouseenter",function(){return i.mouseenter()})("mouseleave",function(){return i.mouseleave()}),Bo(1,0,["class","label","[class.float-left]","floatLeft","[class.float-right]","!floatLeft"]),H(2,"mat-slide-toggle",1),dn("change",function(){return i.change()}),N()()),2&t&&(ee(2),Se("checked",i.state))},dependencies:[Hb],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;gap:16px;height:16px;transition:background-color .2s ease-in-out}[_nghost-%COMP%]:hover{background-color:var(--color-5)}mat-slide-toggle[_ngcontent-%COMP%]{transform:scale(.75)}label.container[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:relative;font-size:.8rem;line-height:1em;white-space:nowrap}"],data:{animation:[Hk]}}),n})();const dyt=[[["","label",""]],[["","icon",""]]],pyt=["[label]","[icon]"];let q4e=(()=>{class n{constructor(){this.floatLeft=!1,this.click=new Ji,this.hover=!1,this.disabled=!1}ngOnInit(){}mouseleave(){this.hover=!1}mouseenter(){this.hover=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Rn({type:n,selectors:[["button-state"]],hostVars:2,hostBindings:function(t,i){2&t&&Br("hover",i.disabled)},inputs:{floatLeft:"floatLeft",disabled:"disabled"},outputs:{click:"click"},ngContentSelectors:pyt,decls:4,vars:5,consts:[["mat-mini-fab","","color","accent",3,"click","mouseenter","mouseleave"]],template:function(t,i){1&t&&(Z1(dyt),H(0,"mat-label"),Bo(1),N(),H(2,"button",0),dn("click",function(){return i.click})("mouseenter",function(){return i.mouseenter()})("mouseleave",function(){return i.mouseleave()}),Bo(3,1),N()),2&t&&(Br("float-left",i.floatLeft)("float-right",!i.floatLeft),Se("@stateSlideIn",i.hover))},dependencies:[lZ,sb],styles:['mat-label[_ngcontent-%COMP%]{display:block;position:absolute;float:right;background:var(--accent);color:"black";border-radius:9px;margin:6px 0;line-height:28px;padding:0 8px;white-space:nowrap;font-size:.8rem;overflow:hidden;width:initial}mat-label.float-left[_ngcontent-%COMP%]{left:60px}mat-label.float-right[_ngcontent-%COMP%]{right:60px}'],data:{animation:[Hk]}}),n})();function gyt(n,e){if(1&n){const t=Qa();Zs(0),H(1,"div",10)(2,"checkbox-state",11),dn("stateChange",function(){gi(t);const r=Xt(5);return h(r.appService.setState(r.States.doors))}),H(3,"span",12),V(4," Doors "),N(),H(5,"span",13)(6,"mat-icon",14),V(7," door_front"),N()()(),H(8,"checkbox-state",11),dn("stateChange",function(){gi(t);const r=Xt(5);return h(r.appService.setState(r.States.theoreticalWalls))}),H(9,"span",12),V(10," Theoretic walls "),N(),H(11,"span",13)(12,"mat-icon",14),V(13," density_large"),N()()(),H(14,"checkbox-state",11),dn("stateChange",function(){gi(t);const r=Xt(5);return h(r.appService.setState(r.States.examplePlan))}),H(15,"span",12),V(16," Example Plan "),N(),H(17,"span",13)(18,"mat-icon",14),V(19,"table_bar"),N()()(),H(20,"checkbox-state",11),dn("stateChange",function(){gi(t);const r=Xt(5);return h(r.appService.setState(r.States.grid))}),H(21,"span",12),V(22," Grid "),N(),H(23,"span",13)(24,"mat-icon",14),V(25,"grid_on"),N()()(),H(26,"checkbox-state",11),dn("stateChange",function(){gi(t);const r=Xt(5);return h(r.appService.setState(r.States.stramien))}),H(27,"span",12),V(28," Stramien "),N(),H(29,"span",13)(30,"mat-icon",14),V(31,"grid_3x3"),N()()(),H(32,"checkbox-state",11),dn("stateChange",function(){gi(t);const r=Xt(5);return h(r.appService.setState(r.States.towerFootprint))}),H(33,"span",12),V(34," Tower footprint "),N(),H(35,"span",13)(36,"mat-icon",14),V(37,"hexagon"),N()()(),H(38,"checkbox-state",11),dn("stateChange",function(){gi(t);const r=Xt(5);return h(r.appService.setState(r.States.measure))}),H(39,"span",12),V(40," Measurements "),N(),H(41,"span",13)(42,"mat-icon",14),V(43,"square_foot"),N()()()(),Js()}if(2&n){const t=Xt(5);ee(2),Se("floatLeft",t.floatLeft)("state",t.getState(t.States.doors)),ee(6),Se("floatLeft",t.floatLeft)("state",t.getState(t.States.theoreticalWalls)),ee(6),Se("floatLeft",t.floatLeft)("state",t.getState(t.States.examplePlan)),ee(6),Se("floatLeft",t.floatLeft)("state",t.getState(t.States.grid)),ee(6),Se("floatLeft",t.floatLeft)("state",t.getState(t.States.stramien)),ee(6),Se("floatLeft",t.floatLeft)("state",t.getState(t.States.towerFootprint)),ee(6),Se("floatLeft",t.floatLeft)("state",t.getState(t.States.measure))}}function myt(n,e){if(1&n){const t=Qa();H(0,"checkbox-state",11),dn("stateChange",function(){const s=gi(t).$implicit;return h(Xt(6).appService.setState(s.state))}),H(1,"span",12),V(2),N(),H(3,"span",17),Ke(4,"app-svg",18),N()()}if(2&n){const t=e.$implicit,i=Xt(6);Se("floatLeft",i.floatLeft)("state",i.getState(t.state)),ee(2),Kn(" ",t.title," "),ee(2),aa("sensor-",t.state,""),bs("url","assets/svg/",t.state,".svg")}}function Ayt(n,e){if(1&n&&(Zs(0),H(1,"div",15),Yt(2,myt,5,7,"checkbox-state",16),N(),Js()),2&n){const t=Xt(5);ee(2),Se("ngForOf",t.sensors)}}function vyt(n,e){if(1&n&&(H(0,"div",9),Yt(1,gyt,44,14,"ng-container",0),ba(2,"async"),ba(3,"async"),Yt(4,Ayt,3,1,"ng-container",0),ba(5,"async"),N()),2&n){const t=Xt(4);ee(1),Se("ngIf",J1(2,2,t.page$).startsWith("house")||J1(3,4,t.page$).startsWith("?")),ee(3),Se("ngIf",J1(5,6,t.page$).startsWith("wired"))}}function _yt(n,e){1&n&&S2(0)}function yyt(n,e){1&n&&S2(0)}function wyt(n,e){if(1&n){const t=Qa();Zs(0),Yt(1,vyt,6,8,"div",6),H(2,"button",7),dn("click",function(){gi(t);const r=Xt(3);return h(r.extra=!r.extra)}),H(3,"mat-icon"),V(4,"keyboard_double_arrow_down "),N()(),Yt(5,_yt,1,0,"ng-container",8),Yt(6,yyt,1,0,"ng-container",8),Js()}if(2&n){const t=Xt(3),i=Ir(5),r=Ir(3);ee(1),Se("ngIf",t.extra),ee(1),Br("active",t.extra),ee(1),DA("transform","rotate(",t.extra?20:180,"deg)"),a3("transition","0.4s"),ee(2),Se("ngTemplateOutlet",i),ee(1),Se("ngTemplateOutlet",r)}}function Cyt(n,e){1&n&&(H(0,"mat-icon"),V(1,"home"),N())}function byt(n,e){1&n&&(H(0,"mat-icon",14),V(1,"home_outline"),N())}function xyt(n,e){1&n&&S2(0)}function Myt(n,e){if(1&n){const t=Qa();Zs(0),H(1,"button-state",19),dn("click",function(){gi(t);const r=Xt(3);return h(r.appService.setState(r.States.measure))}),H(2,"span",12),V(3),N(),H(4,"span",13)(5,"mat-icon"),V(6,"square_foot"),N()()(),H(7,"button-state",19),dn("click",function(){gi(t);const r=Xt(3);return h(r.appService.setState(r.States.silhouette))}),H(8,"span",12),V(9),N(),H(10,"span",13),Yt(11,Cyt,2,0,"mat-icon",20),Yt(12,byt,2,0,"ng-template",null,21,c3),N()(),Yt(14,xyt,1,0,"ng-container",8),Js()}if(2&n){const t=Ir(13),i=Xt(3),r=Ir(3);ee(1),Se("floatLeft",i.floatLeft),ee(2),Lh(i.getState(i.States.measure)?"Remove measurements":"Add measurements"),ee(4),Se("floatLeft",i.floatLeft),ee(2),Lh(i.getState(i.States.silhouette)?"Remove Silhouette":"Silhouette"),ee(2),Se("ngIf",!i.getState(i.States.silhouette))("ngIfElse",t),ee(3),Se("ngTemplateOutlet",r)}}function Syt(n,e){if(1&n){const t=Qa();H(0,"button-state",19),dn("click",function(){gi(t);const r=Xt(4);return h(r.appService.setState(r.States.walkLine))}),H(1,"span",12),V(2),N(),H(3,"span",13)(4,"mat-icon"),V(5,"directions_walk"),N()()()}if(2&n){const t=Xt(4);Se("floatLeft",t.floatLeft),ee(2),Lh(t.getState(t.States.walkLine)?"Remove walkline":"Add walkline")}}function Eyt(n,e){1&n&&S2(0)}const Tyt=function(n){return[n]};function Lyt(n,e){if(1&n&&(Zs(0),Yt(1,Syt,6,2,"button-state",22),Yt(2,Eyt,1,0,"ng-container",8),Js()),2&n){const t=Xt(2).ngIf,i=Xt(),r=Ir(7);ee(1),Se("ngIf",G3(2,Tyt,i.Graphic.stairPlan).includes(t.graphic)),ee(1),Se("ngTemplateOutlet",r)}}function Dyt(n,e){if(1&n){const t=Qa();Zs(0),H(1,"checkbox-toc",11),dn("stateChange",function(){const s=gi(t).$implicit;return h(Xt(5).appService.setState(s))}),H(2,"span",12),V(3),N()(),Js()}if(2&n){const t=e.$implicit,i=Xt(5);ee(1),Se("floatLeft",i.floatLeft)("state",i.getState(t)),ee(2),Kn(" ",t.replace("construction-","")," ")}}function Iyt(n,e){if(1&n&&(H(0,"div",9)(1,"div",15),Yt(2,Dyt,4,3,"ng-container",23),N()()),2&n){const t=Xt(4);ee(2),Se("ngForOf",t.constructionParts)}}function Byt(n,e){1&n&&S2(0)}function Ryt(n,e){if(1&n){const t=Qa();Zs(0),Yt(1,Iyt,3,1,"div",6),H(2,"button",7),dn("click",function(){gi(t);const r=Xt(3);return h(r.extra=!r.extra)}),H(3,"mat-icon"),V(4,"keyboard_double_arrow_down "),N()(),H(5,"button-state",19),dn("click",function(){gi(t);const r=Xt(3);return h(r.appService.setState(r.Helpers3D.mirror))}),H(6,"span",12),V(7),N(),H(8,"span",13)(9,"mat-icon"),V(10,"foundation"),N()()(),Yt(11,Byt,1,0,"ng-container",8),Js()}if(2&n){const t=Xt(3),i=Ir(3);ee(1),Se("ngIf",t.extra),ee(1),Br("active",t.extra),ee(1),DA("transform","rotate(",t.extra?20:180,"deg)"),a3("transition","0.4s"),ee(2),Se("floatLeft",t.floatLeft),ee(2),Lh(t.getState(t.Helpers3D.mirror)?"Remove mirror":"mirror"),ee(4),Se("ngTemplateOutlet",i)}}function Fyt(n,e){if(1&n){const t=Qa();Zs(0),H(1,"checkbox-toc",11),dn("stateChange",function(){const s=gi(t).$implicit;return h(Xt(5).appService.setState(s))}),H(2,"span",12),V(3),N(),H(4,"span",13),V(5),N()(),Js()}if(2&n){const t=e.$implicit,i=Xt(5);ee(1),Se("floatLeft",i.floatLeft)("state",i.getState(t)),ee(2),Kn(" ",t.replace("house3d-","")," "),ee(2),Kn(" ",t.replace("house3d-","")," ")}}function kyt(n,e){if(1&n&&(H(0,"div",9)(1,"div",15),Yt(2,Fyt,6,4,"ng-container",23),N()()),2&n){const t=Xt(4);ee(2),Se("ngForOf",t.house3DParts)}}function Pyt(n,e){1&n&&S2(0)}const Hyt=function(n){return{transform:n,"font-family":"Material Icons Outlined"}};function zyt(n,e){if(1&n){const t=Qa();Zs(0),Yt(1,kyt,3,1,"div",6),H(2,"button",7),dn("click",function(){gi(t);const r=Xt(3);return h(r.extra=!r.extra)}),H(3,"mat-icon"),V(4,"keyboard_double_arrow_down "),N()(),H(5,"button-state",7),dn("click",function(){gi(t);const r=Xt(3);return h(r.appService.setState(r.Helpers3D.clipBoxEnabled))}),H(6,"span",12),V(7," Clipped "),N(),H(8,"span",13)(9,"mat-icon"),V(10,"crop"),N()()(),H(11,"button-state",7),dn("click",function(){gi(t);const r=Xt(3);return h(r.appService.setState(r.Helpers3D.clipBoxShow))}),H(12,"span",12),V(13," Show clipbox outlines "),N(),H(14,"span",13)(15,"mat-icon"),V(16,"view_in_ar_new"),N()()(),Yt(17,Pyt,1,0,"ng-container",8),H(18,"button-state",19),dn("click",function(){return gi(t),h(Xt(3).swapCamera())}),H(19,"span",12),V(20),N(),H(21,"span",13)(22,"mat-icon",24),V(23," rectangle"),N()()(),Js()}if(2&n){const t=Xt(3),i=Ir(5);ee(1),Se("ngIf",t.extra),ee(1),Br("active",t.extra),ee(1),DA("transform","rotate(",t.extra?20:180,"deg)"),a3("transition","0.4s"),ee(2),Br("active",t.getState(t.Helpers3D.clipBoxEnabled)),ee(6),Br("active",t.getState(t.Helpers3D.clipBoxShow)),ee(6),Se("ngTemplateOutlet",i),ee(1),Se("floatLeft",t.floatLeft),ee(2),Kn("Change to ",t.camera?"Ortho":"Perspective",""),ee(2),Se("ngStyle",G3(16,Hyt,t.camera?"":"perspective(10px) rotateX(9deg)  translate(0px, -2px)"))}}const Oyt=function(n,e){return[n,e]};function Nyt(n,e){if(1&n&&(H(0,"div",5),Yt(1,wyt,7,10,"ng-container",0),Yt(2,Myt,15,7,"ng-container",0),Yt(3,Lyt,3,4,"ng-container",0),Yt(4,Ryt,12,11,"ng-container",0),Yt(5,zyt,24,18,"ng-container",0),N()),2&n){const t=Xt().ngIf,i=Xt();aa("container\nsection-",t.section,""),ee(1),Se("ngIf",t.graphic===i.Graphic.house2D),ee(1),Se("ngIf",t.graphic===i.Graphic.cross),ee(1),Se("ngIf",function JQ(n,e,t,i,r){return tW(Dt(),pt(),n,e,t,i,r)}(8,Oyt,i.Graphic.stairCross,i.Graphic.stairPlan).includes(t.graphic)),ee(1),Se("ngIf",t.graphic===i.Graphic.construction),ee(1),Se("ngIf",t.graphic===i.Graphic.House3D)}}function Vyt(n,e){if(1&n&&(Zs(0),Yt(1,Nyt,6,11,"div",4),ba(2,"async"),Js()),2&n){const t=Xt();ee(1),Se("ngIf",J1(2,1,t.states$))}}function Uyt(n,e){1&n&&(H(0,"mat-icon"),V(1,"fullscreen"),N())}function Gyt(n,e){1&n&&(H(0,"mat-icon"),V(1,"fullscreen_exit"),N())}function Qyt(n,e){if(1&n){const t=Qa();H(0,"button-state",19),dn("click",function(){gi(t);const r=Xt();return h(r.fullscreen=!r.fullscreen)}),H(1,"span",12),V(2),N(),H(3,"span",13),Yt(4,Uyt,2,0,"mat-icon",0),Yt(5,Gyt,2,0,"mat-icon",0),N()()}if(2&n){const t=Xt();Se("floatLeft",t.floatLeft),ee(2),Kn("",t.fullscreen?"Close":"Open"," fullscreen"),ee(2),Se("ngIf",!t.fullscreen),ee(1),Se("ngIf",t.fullscreen)}}function Wyt(n,e){1&n&&(H(0,"span"),V(1,"Switch to ground floor"),N())}function jyt(n,e){1&n&&(H(0,"span"),V(1,"Switch to top floor"),N())}function $yt(n,e){1&n&&(H(0,"mat-icon"),V(1,"exposure_plus_1"),N())}function qyt(n,e){1&n&&(H(0,"mat-icon"),V(1,"exposure_zero"),N())}function Kyt(n,e){if(1&n){const t=Qa();H(0,"button-state",19),dn("click",function(){return gi(t),h(Xt(2).setFloor())}),H(1,"span",12),Yt(2,Wyt,2,0,"span",0),Yt(3,jyt,2,0,"span",0),N(),H(4,"span",13),Yt(5,$yt,2,0,"mat-icon",0),Yt(6,qyt,2,0,"mat-icon",0),N()()}if(2&n){const t=e.ngIf,i=Xt(2);Se("floatLeft",i.floatLeft),ee(2),Se("ngIf",t===i.Floor.top),ee(1),Se("ngIf",t===i.Floor.ground),ee(2),Se("ngIf",t===i.Floor.top),ee(1),Se("ngIf",t===i.Floor.ground)}}function Xyt(n,e){1&n&&(Yt(0,Kyt,7,5,"button-state",22),ba(1,"async")),2&n&&Se("ngIf",J1(1,1,Xt().floor$))}function Yyt(n,e){if(1&n){const t=Qa();H(0,"button-state",19),dn("click",function(){gi(t);const r=Xt();return h(r.appService.setState(r.States.measure))}),H(1,"span",12),V(2),N(),H(3,"span",13)(4,"mat-icon"),V(5,"square_foot"),N()()()}if(2&n){const t=Xt();Se("floatLeft",t.floatLeft),ee(2),Lh(t.getState(t.States.measure)?"Remove measurements":"Add measurements")}}let Zyt=(()=>{class n{constructor(t,i,r,s,o,a){this.appService=t,this.elementRef=i,this.houseService=r,this.cookieService=s,this.router=o,this.threeService=a,this.floatLeft=!1,this.extra=!0,this.house$=this.houseService.house$,this.Floor=tt,this.floor$=this.appService.floor$,this.scroll$=this.appService.scroll$,this.states$=this.appService.states$,this.setFloor=()=>this.appService.setFloor(),this.Graphic=Co,this.States=T2,this.page$=this.appService.page$,this.sensors=Object.values(Ge).map(c=>({state:c,title:c})),this.constructionParts=Object.values(Di),this.ConstructionParts=Di,this.house3DParts=Object.values(q2),this.House3DParts=q2,this.Helpers3D=bd,this.helpers3D=Object.values(bd),this.faTemperatureHigh=g1e,this.faMound=kle}get fullscreen(){return this.appService.fullscreen$.value}set fullscreen(t){this.cookieService.set("fullscreen",`${t}`),this.appService.fullscreen$.next(t)}get camera(){return this.threeService.cameraPerspective}ngOnInit(){}getState(t){return!0===this.states$.value[t]}swapCamera(){this.threeService.swapCamera()}}return n.\u0275fac=function(t){return new(t||n)(U(Fo),U(fn),U(Jo),U(Iu),U(h1),U(g_))},n.\u0275cmp=Rn({type:n,selectors:[["controls"]],inputs:{floatLeft:"floatLeft"},decls:8,vars:3,consts:[[4,"ngIf"],["buttonFullscreen",""],["floor",""],["measure",""],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",3,"class",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px"],["class","sub-controls","fxLayout","column","fxLayoutAlign","end end","fxLayoutGap","8px",4,"ngIf"],["mat-mini-fab","","color","accent",3,"click"],[4,"ngTemplateOutlet"],["fxLayout","column","fxLayoutAlign","end end","fxLayoutGap","8px",1,"sub-controls"],[1,"toc"],[3,"floatLeft","state","stateChange"],["label",""],["icon",""],[2,"font-family","Material Icons Outlined"],[1,"toc-text"],[3,"floatLeft","state","stateChange",4,"ngFor","ngForOf"],["icon","","fxLayoutAlign","center center"],["height","18px","width","18px",3,"url"],[3,"floatLeft","click"],[4,"ngIf","ngIfElse"],["elseGrey",""],[3,"floatLeft","click",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngStyle"]],template:function(t,i){1&t&&(Yt(0,Vyt,3,3,"ng-container",0),ba(1,"async"),Yt(2,Qyt,6,4,"ng-template",null,1,c3),Yt(4,Xyt,2,3,"ng-template",null,2,c3),Yt(6,Yyt,6,2,"ng-template",null,3,c3)),2&t&&Se("ngIf",J1(1,1,i.scroll$))},dependencies:[W3,u3,gI,fd,k8,sb,E7,T7,Nh,W9,$4e,lyt,fyt,q4e,dd],styles:["[_nghost-%COMP%]{display:block;position:fixed;bottom:0;z-index:9999}.controls-left[_nghost-%COMP%]{left:50px}.controls-left[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{left:-24px;bottom:8px;position:relative}.controls-left[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:left;left:50px;color:var(--color-100);text-shadow:2px 2px var(--accent-50);cursor:pointer}.controls-right[_nghost-%COMP%]{right:50px}.controls-right[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{right:-24px;bottom:8px;position:relative}.controls-right[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:right;right:50px;color:var(--color-100);text-shadow:2px 2px var(--accent-50);opacity:1}[_nghost-%COMP%]     .sensor-button{right:0}[_nghost-%COMP%]     .sensor-button svg{position:absolute;top:0;right:0}[_nghost-%COMP%]     .sensor-label{right:15px!important;top:6px;line-height:0}.active[_ngcontent-%COMP%]     button{box-shadow:0 0 #0003,0 0 #00000024,0 0 #000!important;background-color:var(--accent-50)!important;color:#1b1b1b!important}.active[_ngcontent-%COMP%]     button label{opacity:.4}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px 8px 16px}.construction[_ngcontent-%COMP%]{height:16px;width:16px}.construction[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{right:18px!important;top:6px;line-height:0}.dev[_ngcontent-%COMP%]{color:#613d1a}.toc[_ngcontent-%COMP%]{background-color:var(--color-0);padding:8px;position:absolute;width:60px;border:2px solid var(--color-50);opacity:.6;transition:opacity .2s ease-in-out}.toc[_ngcontent-%COMP%]:hover{opacity:.9}.toc[_ngcontent-%COMP%]     checkbox-state:first-of-type>label:before{display:none}.toc-text[_ngcontent-%COMP%]{background-color:var(--color-0);padding:8px;position:absolute;border:2px solid var(--color-50);opacity:.6;transition:opacity .2s ease-in-out}.toc-text[_ngcontent-%COMP%]:hover{opacity:.9}.toc-text[_ngcontent-%COMP%]     checkbox-state:first-of-type>label:before{display:none}.toc-text[_ngcontent-%COMP%]     label.container{padding:0!important}.toc-text[_ngcontent-%COMP%]     mat-slide-toggle{transform:scale(.75)}"],data:{animation:[Pk]}}),n})();function Jyt(n,e){1&n&&Ke(0,"controls",10),2&n&&Se("@slideInOut",void 0)("floatLeft",!0)}function ewt(n,e){1&n&&Ke(0,"controls",11),2&n&&Se("@slideInOut",void 0)("floatLeft",!1)}function twt(n,e){1&n&&Ke(0,"app-svg-cross",15)}function nwt(n,e){1&n&&(Zs(0),Ke(1,"app-svg-stair-plan",16)(2,"app-svg-plan",17),Js()),2&n&&(ee(1),Se("isChild",!0))}function iwt(n,e){1&n&&(Zs(0),Ke(1,"app-three-construction"),Js())}function rwt(n,e){1&n&&(Zs(0),Ke(1,"app-three-house"),Js())}function swt(n,e){1&n&&(Zs(0),Ke(1,"app-svg-stair-plan",18),Js())}function owt(n,e){1&n&&(Zs(0),Ke(1,"app-svg-stair-steps",19),Js())}function awt(n,e){if(1&n&&(Zs(0),H(1,"div",12),Yt(2,twt,1,0,"app-svg-cross",13),N(),H(3,"div",14),Yt(4,nwt,3,1,"ng-container",8),Yt(5,iwt,2,0,"ng-container",8),Yt(6,rwt,2,0,"ng-container",8),Yt(7,swt,2,0,"ng-container",8),Yt(8,owt,2,0,"ng-container",8),N(),Js()),2&n){const t=e.ngIf,i=Xt();ee(2),Se("ngIf",t===i.Graphic.cross),ee(2),Se("ngIf",t===i.Graphic.house2D),ee(1),Se("ngIf",t===i.Graphic.construction),ee(1),Se("ngIf",t===i.Graphic.House3D),ee(1),Se("ngIf",t===i.Graphic.stairPlan),ee(1),Se("ngIf",t===i.Graphic.stairCross)}}function cwt(n,e){1&n&&Ke(0,"app-footer")}const lwt=function(n){return{top:n}};let uwt=(()=>{class n{constructor(t,i,r,s,o,a){this.appService=t,this.tooltipService=i,this.houseService=r,this.router=s,this.activatedRoute=o,this.stateService=a,this.sections=Object.keys(_t),this.Tag=j3,this.GraphicSide=Cd,this.Graphic=Co,this.showFooter=!0,this.sectionScroll={},this.goalLine=.4,this.popupActive$=this.appService.popupActive$,this.fullscreen$=this.appService.fullscreen$,this.scroll$=this.appService.scroll$,this.floor$=this.appService.floor$,this.tag$=this.appService.tag$,this.states$=this.appService.states$,this.page$=this.appService.page$,this.cssStates$=this.states$.pipe($t(c=>Object.entries(c).filter(([l,u])=>!0===u).map(([l,u])=>`state-${l}`).join(" "))),this.loaded=!1,Vc(window,"scroll").subscribe(c=>{this.calcSection()})}ngAfterViewInit(){this.router.events.pipe(mo(t=>t instanceof Lu)).subscribe(t=>{setTimeout(()=>{this.setup()},0)}),this.setup()}setup(){this.sectionEls=document.querySelectorAll("section"),this.sectionScroll={},this.sectionEls.forEach(r=>{const s=r.id;this.sectionScroll[s]={id:s,top:r.offsetTop}}),this.calcSection();const i=this.activatedRoute.snapshot.params.tag;i&&this.tag$.next(i),this.loaded=!0}checkFooter(){let t=!0;[Co.House3D].includes(this.graphic)&&(t=!1),this.showFooter=t}calcSection(){if(this.section=this.getSection(),void 0===this.section)this.graphic=Co.none,this.graphicSide=Cd.none;else{const i=this.stateService.setGraphic(this.section);this.graphic!==i&&(console.log("Swap side!"),this.tooltipService.detachOverlay()),this.graphic=i,this.graphicSide=this.stateService.getSide(this.graphic),document.querySelector(`section#${this.section}`).classList.add("section-active")}this.checkFooter(),this.appService.scroll$.next({scroll:mn(window.pageYOffset,0),percentage:this.getVerticalScrollPercentage(document.body),section:this.section,graphicSide:this.graphicSide,graphic:this.graphic}),this.stateService.updateStateBasedOnSection(this.section,this.loaded),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{section:this.section},replaceUrl:!0,queryParamsHandling:"merge"})}getVerticalScrollPercentage(t){var i=t.parentNode;return mn((t.scrollTop||i.scrollTop)/(i.scrollHeight-i.clientHeight))}getSection(){var t=mn(window.innerHeight*this.goalLine,0),r=mn(window.pageYOffset,0)+t;this.sectionEls.forEach(o=>{const a=o.id;this.sectionScroll[a].past=this.sectionScroll[a].top<r,o.classList.remove("section-active")});const s=Object.values(this.sectionScroll).filter(o=>o.past).sort((o,a)=>a.top-o.top);return s&&s[0]?s[0].id:void 0}}return n.\u0275fac=function(t){return new(t||n)(U(Fo),U(Eg),U(Jo),U(h1),U(wd),U(fGe))},n.\u0275cmp=Rn({type:n,selectors:[["app-main-page"]],decls:23,vars:35,consts:[[1,"page"],[1,"left-blinder","bg"],[1,"left-flex"],[1,"center"],[1,"right-flex"],[1,"right-blinder","bg"],["class","controls controls-left",3,"floatLeft",4,"ngIf"],["class","controls controls-right",3,"floatLeft",4,"ngIf"],[4,"ngIf"],[1,"goal-marker",3,"ngStyle"],[1,"controls","controls-left",3,"floatLeft"],[1,"controls","controls-right",3,"floatLeft"],[1,"floating","floating-left"],["class","svg-cross",4,"ngIf"],[1,"floating","floating-right"],[1,"svg-cross"],["fxFlex","0 0 0",1,"svg-plan-stair-plan",3,"isChild"],[1,"svg-plan"],[1,"svg-stair-plan"],[1,"svg-stair-steps"]],template:function(t,i){1&t&&(H(0,"div",0)(1,"div"),ba(2,"async"),ba(3,"async"),ba(4,"async"),ba(5,"async"),ba(6,"async"),ba(7,"async"),ba(8,"async"),ba(9,"async"),Ke(10,"div",1),H(11,"main"),Ke(12,"div",2),H(13,"div",3),Ke(14,"router-outlet"),N(),Ke(15,"div",4),N(),Ke(16,"div",5),Yt(17,Jyt,1,2,"controls",6),Yt(18,ewt,1,2,"controls",7),Yt(19,awt,9,6,"ng-container",8),ba(20,"async"),N()(),Ke(21,"div",9),Yt(22,cwt,1,0,"app-footer",8)),2&t&&(ee(1),aQ("container \n  tag-",J1(2,15,i.tag$)," \n  floor-",J1(3,17,i.floor$)," \n  section-",J1(4,19,i.scroll$).section," \n  show-",J1(5,21,i.scroll$).graphicSide," \n  graphic-",J1(6,23,i.scroll$).graphic," \n  ",J1(7,25,i.popupActive$)?"popup-active":""," \n  ",J1(8,27,i.fullscreen$)?"fullscreen":"","\n  ",J1(9,29,i.cssStates$)," \n  "),ee(16),Se("ngIf",i.graphicSide===i.GraphicSide.left),ee(1),Se("ngIf",i.graphicSide===i.GraphicSide.right),ee(1),Se("ngIf",J1(20,31,i.scroll$).graphic),ee(2),Se("ngStyle",G3(33,lwt,100*i.goalLine+"vh")),ee(1),Se("ngIf",i.showFooter))},dependencies:[u3,fd,xB,W9,IC,Ire,snt,ont,Snt,Int,Fnt,Ont,Zyt,dd],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.page[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]{justify-content:center;display:flex;flex-direction:row;flex:1 1 100vw}.container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{max-width:800px;justify-content:center;display:flex;flex-direction:row;flex:10 1 800px}.container[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{transition:.6s}.container.show-left[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:1 1 100vw}.container.show-left[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container.show-right[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:1 1 0vw}.container.show-right[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%]{flex:1 1 100vw}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:1 1 100vw;border-left:0vw solid transparent;border-right:0vw solid transparent;max-width:450px;overflow-x:hidden;z-index:2;margin:0 46px}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{display:block;height:100%;width:0vw;position:absolute;z-index:5;transition:.8s ease-in;opacity:.8}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%]{left:0}.container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{right:0}.container.fullscreen.show-left[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container.fullscreen.show-right[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{transition:.6s ease-out;width:100vw;opacity:1}.container.fullscreen[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]{max-width:100vw!important}.container.fullscreen[_ngcontent-%COMP%]     g.all{transition:none!important}.floating[_ngcontent-%COMP%]{top:0;height:100vh;position:fixed;max-width:100vh;display:flex;flex-direction:column;justify-content:center;z-index:50;transition:1s}.floating.floating-right[_ngcontent-%COMP%]{left:50%;width:50%}.floating.floating-left[_ngcontent-%COMP%]{right:50%;width:50%}.floating[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{overflow:hidden;flex:1 1 100%;position:relative}.floating[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]{transition:.6s;max-width:70vh;width:100vw;height:100vh;left:0vw}.floating[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]     svg{transition:.6s;left:0vw;top:0vh}.floating[_ngcontent-%COMP%]   .svg-plan.imaged[_ngcontent-%COMP%]{transition:.6s;max-width:100vw;left:-50vw;top:-10vh}.floating[_ngcontent-%COMP%]   .svg-plan.imaged[_ngcontent-%COMP%]     svg{transition:.6s;left:25vw}.show-right[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:50vw;right:100vw}.show-left[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:50vw;left:100vw}.fullscreen.show-left[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:100vw;right:0vw;max-width:100vw}.fullscreen.show-right[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:100vw;left:0vw;max-width:100vw}.goal-marker[_ngcontent-%COMP%]{position:fixed;border:1px solid var(--color-30);height:13px;width:13px;transform:rotate(45deg);left:-10px}"],data:{animation:[Pk,Kte]}}),n})();const hwt=["*"];let VS=(()=>{class n{constructor(t,i){this.appService=t,this.elementRef=i}mouseover(){this.appService.setTag(this.tag)}mouseout(){this.appService.setTag(void 0)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(U(Fo),U(fn))},n.\u0275cmp=Rn({type:n,selectors:[["tag"]],hostBindings:function(t,i){1&t&&dn("mouseover",function(){return i.mouseover()})("mouseout",function(){return i.mouseout()})},inputs:{tag:"tag"},ngContentSelectors:hwt,decls:2,vars:0,consts:[["mat-flat-button","",1,"mat-button-tag"]],template:function(t,i){1&t&&(Z1(),H(0,"button",0),Bo(1),N())},dependencies:[sb],styles:[".mat-button-tag[_ngcontent-%COMP%]{padding:3px 0 5px;border:1px solid var(--color-30);line-height:1em}.mat-button-tag[_ngcontent-%COMP%]     .mat-button-wrapper{padding:8px;font-weight:initial}"]}),n})(),fwt=(()=>{class n{constructor(t,i,r,s){this.builder=t,this.overlay=i,this.appService=r,this.viewContainerRef=s,this.open=!1,this.animate=!0,this.byClick=!1,this.unsubscribe=new Je}mouseover(){this.attachOverlay()}mouseout(){this.appService.popupActive$.next(!1),this.detachOverlay()}onResize(t){this.updateOnChange()}getPositionStrategy(){let t;return t=this.overlay.position().flexibleConnectedTo(this.viewContainerRef.element.nativeElement).withPositions([new mC({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,-20),new mC({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,20,"flipped")]).withPush(!0),t}getScrollStrategy(){return this.overlay.scrollStrategies.reposition()}ngOnInit(){this.pageEl=document.querySelector(".center"),this.btn=this.viewContainerRef.element.nativeElement;const t=this.getPositionStrategy(),i=this.getScrollStrategy();this.overlayRef=this.overlay.create({positionStrategy:t,scrollStrategy:i,hasBackdrop:this.byClick}),this.overlayRef.backdropClick().pipe(xa(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.open&&this.attachOverlay()}ngOnDestroy(){this.detachOverlay(),this.unsubscribe.next(),this.unsubscribe.complete(),this.overlayRef.dispose()}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.arrowEl.remove(),this.overlayRef.detach())}attachOverlay(){const t=new gC(this.overlayTemplate,this.viewContainerRef);this.overlayRef&&!this.overlayRef.hasAttached()&&(this.componentRef=this.overlayRef.attach(t),this.updateOnChange(),this.createMakeMeAPopup(),this.appService.popupActive$.next(!0))}createMakeMeAPopup(){this.overlayRef.overlayElement.classList.add("popup","base"),this.arrowEl=document.createElement("div"),this.arrowEl.classList.add("popup-arrow","base"),this.setArrow(),this.overlayRef.overlayElement.append(this.arrowEl)}setArrow(){const{left:t,width:i}=this.btn.getBoundingClientRect(),{x:r}=this.pageEl.getBoundingClientRect();this.arrowEl.style.left=t-r-20+i/2+"px"}updateOnChange(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.overlayRef.updatePosition(),this.overlayRef.updateSize({width:this.pageEl.clientWidth}),this.arrowEl&&this.setArrow())}playAnimation(t,i){const s=this.builder.build(t).create(i);return s.play(),s}enterAnimation(t){return t.style.maxWidth="100%",[Hi({"max-width":"0%"}),bo("150ms ease-out",Hi({"max-width":"100%"}))]}leaveAnimation(){return[bo("200ms ease-in",Hi({"max-width":"0%"}))]}}return n.\u0275fac=function(t){return new(t||n)(U(VB),U(f3),U(Fo),U(Oc))},n.\u0275dir=ht({type:n,selectors:[["","overlayTemplate",""]],hostBindings:function(t,i){1&t&&dn("mouseover",function(){return i.mouseover()})("mouseout",function(){return i.mouseout()})("resize",function(s){return i.onResize(s)},!1,LL)},inputs:{overlayTemplate:"overlayTemplate",open:"open"}}),n})();function dwt(n,e){1&n&&V(0),2&n&&Kn(" Insulation keeps you warm. Passiv houses have almost no heatloss so therefore (almost) no heating is needed! The walls are thicker than you are used to: ",.5," meter ")}function pwt(n,e){1&n&&V(0," In the winter, we need the sun to warmup the house. In the summer the house needs to be shaded on the outside to prevent overheating. ")}function gwt(n,e){1&n&&(V(0," It is even a hashtag "),H(1,"b"),V(2,"#EfficiencyFirst"),N(),V(3,". Why look at green energy if we wast still alot of energy. ( Ofcourse we still need green energy! ). First insulation to the max, before thinking of solarpanels. "))}function mwt(n,e){1&n&&V(0," Keeping the design simple, so we skip complex solutions. Therefore the costs will be lower. ")}function Awt(n,e){1&n&&V(0," It is not really a thing, more a concept. It helps the already complex roof to look good. And also, very helpful with calculations. ")}function vwt(n,e){1&n&&V(0," The south wing is a design element that effectively breaks up the lengthy facade of the house's south side. If desired, the design can be simplified by removing this feature. ")}function _wt(n,e){1&n&&V(0," To maintain the compact design of the house, avoid making the north wing too long. If you need more space, consider increasing the base dimension. ")}function ywt(n,e){1&n&&V(0," A concept, how far is the bend-point of the roof, away from the outside wall. ")}function wwt(n,e){if(1&n){const t=Qa();Zs(0),H(1,"section",1)(2,"h1"),V(3),N(),H(4,"p",11),V(5," A Passive House, but in a classical style, and all open-source. We love to share our plans with the community. Consider it as free building plans for your own house, or give them to your contractor. It's truly free. "),N()(),H(6,"section",1)(7,"h2"),V(8,"Passiv? "),H(9,"span",12),V(10,"(Its German)"),N()(),H(11,"p"),V(12,"Passive houses are the future. Feel free to "),H(13,"a",13),V(14,"search online for 'Passiv Haus'"),N(),V(15,". We thought it is not really inspiring and that is a shame. Therefore, let us try to explain it briefly:"),N(),H(16,"ul")(17,"li")(18,"tag",14),V(19,"Great insulated"),N(),Yt(20,dwt,1,1,"ng-template",null,15,c3),N(),H(22,"li"),V(23,"Well & compact desinged"),N(),H(24,"li")(25,"tag",14),V(26,"Orientation"),N(),V(27," to the sun "),Yt(28,pwt,1,0,"ng-template",null,16,c3),N(),H(30,"li"),V(31,"No thermal bridges"),N(),H(32,"li"),V(33,"Can be houses, but also offices etc"),N(),H(34,"li"),V(35,"Sustainable (well in our opinion)"),N()(),H(36,"p"),V(37,"Passiv Haus has one punchline:"),N(),H(38,"div",17)(39,"tag",14),V(40,"Efficiency first"),N(),Yt(41,gwt,4,0,"ng-template",null,18,c3),N(),H(43,"p"),V(44,"We dare to add one :"),N(),H(45,"div",17)(46,"tag",14),V(47," Simplicity is key"),N(),Yt(48,mwt,1,0,"ng-template",null,19,c3),N(),H(50,"p"),V(51," While Passive Houses tend to prioritize function over form, we believe that style should also be a consideration. For this reason, we are working on combining classic design elements with this innovative concept. "),N()(),H(52,"section",1)(53,"h2"),V(54,"The basics"),N(),H(55,"p"),V(56," Using parametric design, we've created an interactive platform for designing this house. Play around with the sliders to see how you can customize the design to your liking. Let's start with the basics. "),N(),H(57,"h3"),V(58,"Two axis"),N(),H(59,"p"),V(60," The squared shape is the most efficient design for a Passive House, but a mansard roof can provide a classic aesthetic. Unfortunately, it's not easy to incorporate a mansard roof into a squared house. To achieve a mansard roof, this design follows two axes with a specific "),H(61,"tag",14),V(62,"base dimension"),N(),V(63,". One of the advantages of this design is the stunning "),H(64,"tag",20),V(65,"view lines"),N(),V(66," it provides. "),N(),Yt(67,Awt,1,0,"ng-template",null,21,c3),H(69,"label")(70,"span"),V(71,"Base dimension "),N(),H(72,"mat-slider",22),dn("input",function(r){gi(t);const s=Xt();return h(s.update("house","studAmount",r.value,s.tags.baseDimension))}),N()(),H(73,"label",23)(74,"span"),V(75,"Technical "),N(),V(76),Ke(77,"br")(78,"br"),H(79,"table")(80,"tr")(81,"td"),V(82,"Total area"),N(),H(83,"td"),V(84),H(85,"sup"),V(86,"2"),N()()(),H(87,"tr")(88,"td"),V(89,"Total volume"),N(),H(90,"td"),V(91),H(92,"sup"),V(93,"3"),N()()()()()(),H(94,"section",1)(95,"h2"),V(96,"Extensions"),N(),H(97,"p"),V(98," The south-facing side of the house is designed with a "),H(99,"tag",14),V(100,"south wing"),N(),V(101," that breaks up the otherwise monotonous lines and creates more interesting view points. The "),H(102,"tag",14),V(103,"north wing"),N(),V(104,", located for convenience, has fewer windows due to its colder and darker nature. "),N(),H(105,"h3"),V(106,"Body parts "),N(),Yt(107,vwt,1,0,"ng-template",null,24,c3),Yt(109,_wt,1,0,"ng-template",null,25,c3),H(111,"label")(112,"span"),V(113,"South wing "),N(),H(114,"mat-slider",26),dn("input",function(r){gi(t);const s=Xt();return h(s.update("house","studAmountSouth",r.value,s.tags.extensionToSouth))}),N()(),H(115,"label")(116,"span"),V(117," North wing "),N(),H(118,"mat-slider",27),dn("input",function(r){gi(t);const s=Xt();return h(s.update("house","studAmountNorth",r.value,s.tags.extensionToNorth))}),N()(),H(119,"label")(120,"span"),V(121," West wing "),N(),H(122,"mat-slider",27),dn("input",function(r){gi(t);const s=Xt();return h(s.update("house","studAmountWest",r.value,s.tags.extensionToWest))}),N()(),H(123,"label")(124,"span"),V(125," East wing "),N(),H(126,"mat-slider",27),dn("input",function(r){gi(t);const s=Xt();return h(s.update("house","studAmountEast",r.value,s.tags.extensionToEast))}),N()(),H(127,"label",23)(128,"span"),V(129,"Technical "),N(),H(130,"table")(131,"tr")(132,"td"),V(133,"Floor"),N(),H(134,"td"),V(135,"area"),N(),H(136,"td"),V(137,"ground"),N(),H(138,"td"),V(139),N()(),H(140,"tr"),Ke(141,"td")(142,"td"),H(143,"td"),V(144,"top"),N(),H(145,"td"),V(146),N()(),H(147,"tr"),Ke(148,"td")(149,"td"),H(150,"td"),V(151,"total"),N(),H(152,"td"),V(153),N()(),H(154,"tr")(155,"td"),V(156," Wall"),N(),H(157,"td"),V(158,"inside"),N(),H(159,"td"),V(160,"length"),N(),H(161,"td"),V(162),N()(),H(163,"tr"),Ke(164,"td")(165,"td"),H(166,"td"),V(167,"area"),N(),H(168,"td"),V(169),N()(),H(170,"tr"),Ke(171,"td"),H(172,"td"),V(173,"outside"),N(),H(174,"td"),V(175,"length"),N(),H(176,"td"),V(177),N()(),H(178,"tr"),Ke(179,"td")(180,"td"),H(181,"td"),V(182,"area"),N(),H(183,"td"),V(184),N()()()()(),H(185,"section",28)(186,"h3"),V(187,"Tower"),N(),H(188,"p"),V(189,"Not only does the tower provide a functional backdoor, but it also adds an intriguing feature to the house's exterior. Additionally, the shower location within the tower is impressive and the tower itself could potentially offer a rooftop viewpoint. "),N(),H(190,"mat-slide-toggle",29),dn("ngModelChange",function(r){return gi(t),h(Xt().update("house","showTower",r))}),V(191,"With a practical tower "),N()(),H(192,"section",1)(193,"h1"),V(194,"Cross section"),N(),H(195,"h2"),V(196,"Slicing it, the basics"),N(),H(197,"p"),V(198,"Although high ceilings can be more expensive, they add a lot of value by making a house feel more open and airy. "),N(),H(199,"label")(200,"span"),V(201),N(),H(202,"mat-slider",30),dn("input",function(r){return gi(t),h(Xt().update("cross","ceilingHeight",r.value))}),N()(),H(203,"h3"),V(204),N(),H(205,"p"),V(206,"It's important to consider a crawl space during the design phase, as it can have a significant impact on the overall building experience. A crawl space can raise the building, offering more protection against climate change, such as flooding or heavy rains. However, it is important to note that a crawl space can also be more expensive and take more time to build."),N(),H(207,"mat-slide-toggle",29),dn("ngModelChange",function(r){return gi(t),h(Xt().update("cross","crawlerSpace",r))}),V(208),N(),H(209,"label")(210,"span"),V(211),N(),H(212,"mat-slider",31),dn("input",function(r){return gi(t),h(Xt().update("cross","floorAboveGround",r.value))}),N()()(),H(213,"section",1)(214,"h2"),V(215,"Roof style"),N(),H(216,"p")(217,"a",32),V(218,"Mansard or Gambrel roof"),N(),V(219," gives a nice classic countryside style. There are three methods to create it. We will check both the \"circle\" and '70\xb0/30\xb0'"),N(),H(220,"h2"),V(221,"Circle-based"),N(),H(222,"p"),V(223,"Draw a "),H(224,"tag",20),V(225,"half circle"),N(),V(226," and two lines extending from the center at a 45\xb0 angle. Be aware that adjusting the overhang using the slider will cause the circle to move to maintain proportions. The angles used in this technique are 67.5\xb0 and 22.5\xb0. "),N(),H(227,"label")(228,"span"),V(229,"(Fictive) 'Wider roof'"),N(),H(230,"mat-slider",33),dn("input",function(r){gi(t);const s=Xt();return h(s.update("cross","roofCirclePullDown",r.value,s.tags.halfCircle))}),N()(),H(231,"label")(232,"span"),V(233),N(),H(234,"mat-slider",33),dn("input",function(r){return gi(t),h(Xt().update("cross","roofCircleWalls",r.value))}),N()()(),H(235,"section",1)(236,"h2"),V(237,"The 70\xb0/30\xb0 roof"),N(),H(238,"p"),V(239,"With this technique, draw a line 70\xb0 until a "),H(240,"tag",14),V(241,"bend point"),N(),V(242,". then follow up with a 30\xb0 angle. The upper roof has great solor potential. It is possible to extending the roof downwards. Nevertheless, it's crucial to keep proportion in mind to prevent an unappealing appearance. "),N(),Yt(243,ywt,1,0,"ng-template",null,34,c3),H(245,"label")(246,"span"),V(247,"Move "),H(248,"tag",14),V(249,"bend point"),N()(),H(250,"mat-slider",33),dn("input",function(r){gi(t);const s=Xt();return h(s.update("cross","roof70offset",r.value,s.tags.bendPoint))}),N()(),H(251,"label")(252,"span"),V(253),N(),H(254,"mat-slider",33),dn("input",function(r){gi(t);const s=Xt();return h(s.update("cross","roof70Walls",r.value,s.tags.roofWalls))}),N()(),H(255,"label")(256,"span"),V(257),N(),H(258,"mat-slider",33),dn("input",function(r){return gi(t),h(Xt().update("cross","roof70Extension",r.value))}),N()()(),H(259,"section",1)(260,"h3"),V(261,"Roof, 70\xb0 or Circle"),N(),H(262,"p"),V(263,"In the end, the 70\xb0 based mansard roof is easier to design with. Click on the buttons to compare them. "),N(),H(264,"mat-button-toggle-group",35),dn("ngModelChange",function(r){return h(gi(t).ngIf.cross.roofStyle=r)})("ngModelChange",function(r){return gi(t),h(Xt().choosenRoofstyle(r))}),H(265,"mat-button-toggle",36),V(266,"Circle based"),N(),H(267,"mat-button-toggle",36),V(268,"Both"),N(),H(269,"mat-button-toggle",36),V(270,"70\xb0 based"),N()()(),H(271,"section",1)(272,"h3"),V(273,"The roof edge"),N(),H(274,"p"),V(275,"We can look at the silhouette to image it a bit better. We can also add or remove a gutter, and more decorative "),N()(),Js()}if(2&n){const t=e.ngIf,i=Ir(21),r=Ir(29),s=Ir(42),o=Ir(49),a=Ir(68),c=Ir(108),l=Ir(110),u=Ir(244),f=Xt();ee(1),Se("id",f.Section.welcome),ee(2),Kn("Welcome to ",t.name,""),ee(3),Se("id",f.Section.passiv),ee(12),Se("tag",f.tags.insulated)("overlayTemplate",i),ee(7),Se("tag",f.tags.orientation)("overlayTemplate",r),ee(14),Se("tag",f.tags.efficiency)("overlayTemplate",s),ee(7),Se("tag",f.tags.simple)("overlayTemplate",o),ee(6),Se("id",f.Section.basics),ee(9),Se("tag",f.tags.baseDimension)("overlayTemplate",a),ee(3),Se("tag",f.tags.viewlines),ee(8),Se("ngModel",t.studAmount),ee(4),ud(' When describing our house\'s construction, we use the term "studs" to refer to the wooden columns that make up the walls. These studs are arranged in a grid pattern with a spacing of ',100*t.studDistance," cm. At present, the wall consists of ",t.studAmount," studs. "),ee(8),Kn("",null==t.stats.floor.all?null:t.stats.floor.all.area," m"),ee(7),Kn("",null==t.stats.floor.all?null:t.stats.floor.all.volume," m"),ee(3),Se("id",f.Section.extensions),ee(5),Se("tag",f.tags.extensionToSouth)("overlayTemplate",c),ee(3),Se("tag",f.tags.extensionToNorth)("overlayTemplate",l),ee(12),Se("ngModel",t.studAmountSouth)("displayWith",f.studLabel),ee(4),Se("min",9)("max",18)("ngModel",t.studAmountNorth)("displayWith",f.studLabel),ee(4),Se("min",5)("max",15)("ngModel",t.studAmountWest)("displayWith",f.studLabel),ee(4),Se("min",5)("max",9)("ngModel",t.studAmountEast)("displayWith",f.studLabel),ee(13),Kn("",t.stats.floor.ground.area," m2"),ee(7),Kn("",t.stats.floor.top.area," m2"),ee(7),Kn("",null==t.stats.floor.all?null:t.stats.floor.all.area," m2"),ee(9),Kn("",t.stats.wall.innerLength," m"),ee(7),Kn("",t.stats.wall.innerArea," m2"),ee(8),Kn("",t.stats.wall.outerLength," m"),ee(7),Kn("",t.stats.wall.outerArea," m2"),ee(1),Se("id",f.Section.tower),ee(5),Se("ngModel",t.showTower),ee(2),Se("id",f.Section.roofBasics),ee(9),Kn("Ceiling height: ",t.cross.ceilingHeight," m"),ee(1),Se("ngModel",t.cross.ceilingHeight),ee(2),Kn("Foundation: ",t.cross.crawlerSpace?"crawler space":"flat foundation",""),ee(3),Se("ngModel",t.cross.crawlerSpace),ee(1),Kn("With a ",t.cross.crawlerSpace?"crawler space":"flat foundation"," "),ee(3),Kn("Ground floor above ground: ",t.cross.crawlerSpace?t.cross.floorAboveGround:0," m"),ee(1),Se("max",t.cross.crawlerHeight+t.cross.groundFloorThickness)("ngModel",t.cross.floorAboveGround)("disabled",!t.cross.crawlerSpace),ee(1),Se("id",f.Section.roofCircle),ee(11),Se("tag",f.tags.halfCircle),ee(6),Se("ngModel",t.cross.roofCirclePullDown),ee(3),Kn("Walls under the roof ",t.cross.roofCircleWalls,"m"),ee(1),Se("ngModel",t.cross.roofCircleWalls),ee(1),Se("id",f.Section.roof70),ee(5),Se("tag",f.tags.bendPoint)("overlayTemplate",u),ee(8),Se("tag",f.tags.bendPoint)("overlayTemplate",u),ee(2),Se("ngModel",t.cross.roof70offset),ee(3),Kn("Walls under the roof: ",t.cross.roof70Walls,"m"),ee(1),Se("ngModel",t.cross.roof70Walls),ee(3),Kn("Roof extension: ",t.cross.roof70Extension,"m"),ee(1),Se("ngModel",t.cross.roof70Extension),ee(1),Se("id",f.Section.roofChoice),ee(5),Se("ngModel",t.cross.roofStyle),ee(1),Se("value",f.RoofStyle.roofCircle),ee(2),Se("value",f.RoofStyle.roofCircleAnd70),ee(2),Se("value",f.RoofStyle.roof70),ee(2),Se("id",f.Section.roofEdge)}}let Cwt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.house$=this.houseService.house$,this.Section=_t,this.tags=j3,this.RoofStyle=Hl,this.discord=this.appService.discord,this.faDiscord=PM,this.round=mn,this.update=this.houseService.update}ngAfterViewInit(){}studLabel(t){return`#${t} `}sizeLabel(t){return`${t} m`}choosenRoofstyle(t){this.houseService.update("cross","roofStyle",t)}}return n.\u0275fac=function(t){return new(t||n)(U(Jo),U(Fo))},n.\u0275cmp=Rn({type:n,selectors:[["app-page-house"]],decls:44,vars:6,consts:[[4,"ngIf"],[3,"id"],["target","_blank",2,"background","var(--primary-color)","padding","0 6px","color","white",3,"href"],[3,"icon"],[1,"on-page-menu"],["mat-menu-item","","routerLink","/construction"],["mat-menu-item","","routerLink","/wired"],["mat-menu-item","","routerLink","/installations"],["mat-menu-item","","routerLink","/map"],["mat-menu-item","","routerLink","/stairs"],[2,"font-family","Material Icons Outlined"],[1,"mat-caption"],[2,"font-size","0.7em"],["href","https://passivehouse.com/","target","_blank"],["cdkOverlayOrigin","",3,"tag","overlayTemplate"],["insulated",""],["orientation",""],["fxLayoutAlign","center",2,"margin","8px 0 32px"],["efficiency",""],["simple",""],[3,"tag"],["baseDimension",""],["min","6","max","15","tickInterval","1",3,"ngModel","input"],[1,"technical"],["extensionToSouth",""],["extensionToNorth",""],["min","0","max","6","thumbLabel","","tickInterval","1",3,"ngModel","displayWith","input"],["thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],[2,"padding-bottom","80px",3,"id"],[3,"ngModel","ngModelChange"],["min","2.6","max","3.6","step","0.1","tickInterval","1",3,"ngModel","input"],["min","0","step","0.1","tickInterval","1",3,"max","ngModel","disabled","input"],["href","https://en.wikipedia.org/wiki/Mansard_roof","target","_blank"],["min","0","max","2","step","0.1","tickInterval","1",3,"ngModel","input"],["bendPoint",""],["name","roofstyle",3,"ngModel","ngModelChange"],[3,"value"]],template:function(t,i){1&t&&(Yt(0,wwt,276,79,"ng-container",0),ba(1,"async"),H(2,"section",1)(3,"h3"),V(4,"This was the main design"),N(),H(5,"p"),V(6,"This site has a lot of info, if you are up for more. Feel free to join us at this "),Ke(7,"br"),H(8,"a",2),Ke(9,"fa-icon",3),V(10," discord channel "),N()(),Ke(11,"br"),H(12,"p"),V(13,"An other interesting page could be the layers of a wall/construction "),N(),H(14,"div",4)(15,"button",5)(16,"mat-icon"),V(17,"handyman"),N(),H(18,"span"),V(19,"Construction"),N()()(),H(20,"p"),V(21,"There is a menu on the top-left with a lot more items. Some are listed here"),N(),Ke(22,"br"),H(23,"div",4)(24,"button",6)(25,"mat-icon"),V(26,"bolt"),N(),H(27,"span"),V(28,"Wired"),N()(),H(29,"button",7)(30,"mat-icon"),V(31,"solar_power"),N(),H(32,"span"),V(33,"Installations"),N()(),H(34,"button",8)(35,"mat-icon"),V(36,"pin_drop"),N(),H(37,"span"),V(38,"Map"),N()(),H(39,"button",9)(40,"mat-icon",10),V(41,"stairs"),N(),H(42,"span"),V(43,"Stairs"),N()()()()),2&t&&(Se("ngIf",J1(1,4,i.house$)),ee(2),Se("id",i.Section.EndOfPageHouse),ee(6),El("href",i.discord,kc),ee(1),Se("icon",i.faDiscord))},dependencies:[u3,rve,k8,Fb,M9,Hb,Mb,P9,_Z,yZ,Nh,UP,m9,VS,fwt,dd],styles:[".on-page-menu[_ngcontent-%COMP%]{border-radius:4px;display:flex;flex-direction:column;gap:8px;justify-content:center;padding:8px 0;margin:16px 0;max-width:200px}.on-page-menu[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 3px 3px -2px #0003,0 3px 4px #00000024,0 1px 8px #0000001f}"]}),n})();const K4e=function(n){return{active:n}};function bwt(n,e){if(1&n&&(H(0,"th",20),V(1),N()),2&n){const t=e.index,i=Xt().ngIf;Se("ngClass",G3(2,K4e,i.stair.minSteps+t===i.stair.steps)),ee(1),Kn(" #",i.stair.minSteps+t," ")}}const xwt=function(n){return{"background-color":n}};function Mwt(n,e){if(1&n){const t=Qa();Zs(0),H(1,"td",22),dn("click",function(){gi(t);const r=Xt().index,s=Xt().index,o=Xt().ngIf,a=Xt();return h(a.select(o.stair.minSteps+r,a.totalRunByIndex(s)))}),V(2),N(),Js()}if(2&n){const t=e.ngIf,i=Xt().index,r=Xt().index,s=Xt(2);ee(1),Tw("matrix-cell matrix-",i,"--",r,""),Se("ngClass",s.score(t,s.getRise(i)))("ngStyle",G3(7,xwt,s.scoreColor(t,s.getRise(i)))),ee(1),Kn(" ",t," mm ")}}function Swt(n,e){if(1&n&&(Zs(0),Yt(1,Mwt,3,9,"ng-container",0),Js()),2&n){const t=e.index,i=Xt().index,r=Xt(2);ee(1),Se("ngIf",r.getRun(t,i))}}const Rz=function(){return[]};function Ewt(n,e){if(1&n&&(H(0,"tr")(1,"td",21)(2,"b"),V(3),N()(),Yt(4,Swt,2,1,"ng-container",11),N()),2&n){const t=e.index,i=Xt().ngIf,r=Xt();ee(1),Se("ngClass",G3(3,K4e,r.totalRunByIndex(t)===i.stair.totalRun)),ee(2),Kn("",r.totalRunByIndex(t),"m"),ee(1),Se("ngForOf",xu(5,Rz).constructor(r.rangeSteps))}}function Twt(n,e){if(1&n){const t=Qa();Zs(0),H(1,"section",2,3)(3,"h1"),V(4,"Stairs"),N(),H(5,"p"),V(6," Stair design is a complex and important aspect of architecture, with entire Pinterest collections dedicated to it. "),N()(),H(7,"section",2)(8,"h2"),V(9,"Stair 101"),N(),H(10,"p"),V(11," Calculating stairs can be approached in various ways. "),N(),H(12,"ol")(13,"li"),V(14,"The "),H(15,"b"),V(16,"vertical"),N(),V(17),N(),H(18,"li"),V(19,"The building code allows for the rise of each step to be between 182mm and 220mm. Therefore we can only have steps between "),H(20,"b"),V(21),N()()(),H(22,"label")(23,"span"),V(24),N(),H(25,"mat-slider",4),dn("input",function(r){gi(t);const s=Xt();return h(s.update("stair","steps",r.value,s.Tag.amountSteps))}),N()(),H(26,"ol",5)(27,"li"),V(28),N(),H(29,"li"),V(30,"The min and max "),H(31,"b"),V(32,"horizontal distance"),N(),V(33),N()(),H(34,"label")(35,"span"),V(36),N(),H(37,"mat-slider",6),dn("input",function(r){return gi(t),h(Xt().update("stair","totalRun",r.value))}),N()(),H(38,"ol",7)(39,"li"),V(40),N(),H(41,"li"),V(42,"A matrix is formed from the combination of the two parameters to calculate "),H(43,"b"),V(44,"the run"),N(),V(45,". "),N()(),H(46,"table",8)(47,"tr"),Ke(48,"th"),Yt(49,bwt,2,4,"th",9),N(),H(50,"tr"),Ke(51,"td"),H(52,"td",10),V(53," \u2191 Too steep \u2191 "),N()(),Yt(54,Ewt,5,6,"tr",11),H(55,"tr"),Ke(56,"td"),H(57,"td",10),V(58," \u2193 Too shallow \u2193 "),N()()(),H(59,"p"),V(60," Where "),H(61,"span",12),V(62,"Red"),N(),V(63," is not allowed due to code."),Ke(64,"br"),H(65,"span",13),V(66,"Orange"),N(),V(67," is not comfortable to walk on."),Ke(68,"br"),H(69,"span",14),V(70,"Green"),N(),V(71," should be the most comfortable."),Ke(72,"br"),V(73," Which step, is a tradeoff between the total length of the stairs and the angle. A lower angle takes less energy to walk up the stairs, but the stairs will be longer. "),N()(),H(74,"section",2,15)(76,"h2"),V(77,"The good, bad and perfect stairs"),N(),H(78,"label")(79,"span"),V(80,"Checks"),N(),V(81),H(82,"div"),V(83),N(),H(84,"div"),V(85),N(),H(86,"div"),V(87),N(),H(88,"div"),V(89),N()()(),H(90,"section",2,16)(92,"h2"),V(93,"Stair layout"),N(),H(94,"p"),V(95," Stairs can be straight, but we like to have two bends. This makes the stairs relative more compact. It prevents to falldown the complete stairs in accidents. Sideplus, it comes with a nice open hall effect. "),N(),H(96,"label")(97,"span"),V(98),N(),H(99,"mat-slider",17),dn("input",function(r){return gi(t),h(Xt().update("stair","walkWidth",r.value))}),N()(),H(100,"label")(101,"span"),V(102),N(),H(103,"mat-slider",18),dn("input",function(r){return gi(t),h(Xt().update("stair","stepsFlightRight",r.value))}),N()(),H(104,"span"),V(105),N(),H(106,"p"),V(107," For now we keep the model as simple as possible. Stairs are quite complex. Steps can change direction slowly to make it a piece of art by it self. "),N(),Ke(108,"img",19),N(),Js()}if(2&n){const t=e.ngIf,i=Xt();ee(1),Se("id",i.Section.stairStart),ee(6),Se("id",i.Section.stairBasic),ee(10),Kn(" distance is already determined by the house: ",t.stair.totalRise,"m"),ee(4),ud("",t.stair.minSteps," and ",t.stair.maxSteps," steps"),ee(3),Kn("Total steps: horizontal ",t.stair.steps,""),ee(1),Se("min",t.stair.minSteps)("max",t.stair.maxSteps)("ngModel",t.stair.steps)("displayWith",i.sizeLabel),ee(3),Kn("The rise is: ",i.round(1e3*t.stair.rise,0),"mm"),ee(5),ud(" is easy, the stairs should be between ",i.minAngle,"\xb0 and ",i.maxAngle,"\xb0"),ee(3),Kn("Total length stairs: horizontal ",t.stair.totalRun,"m"),ee(1),Se("min",i.totalRunMin)("max",i.totalRunMax)("ngModel",t.stair.totalRun)("displayWith",i.sizeLabel),ee(3),Kn("The angle is: ",t.stair.angle,"\xb0"),ee(9),Se("ngForOf",xu(40,Rz).constructor(i.rangeSteps)),ee(5),Se("ngForOf",xu(41,Rz).constructor(i.deltas)),ee(20),Se("id",i.Section.stairCheck),ee(7),Kn(" The angle will be ",t.stair.angle,"\xb0 "),ee(2),Kn("Steps: ",t.stair.steps,""),ee(2),Kn("Rise: ",i.round(1e3*t.stair.rise,0)," mm"),ee(2),Kn("Run: ",i.round(1e3*t.stair.run,0)," mm"),ee(2),Kn("Rise+Run+Rise: ",i.round(1e3*(t.stair.run+2*t.stair.rise),0)," mm"),ee(1),Se("id",i.Section.stairPlan),ee(8),Kn("Width ",t.stair.walkWidth,"m"),ee(1),Se("min",.7)("max",1.2)("ngModel",t.stair.walkWidth),ee(3),ud("Steps on the rightside: ",t.stair.stepsFlightRight," of ",t.stair.steps,""),ee(1),Se("min",0)("max",t.stair.steps/2)("ngModel",t.stair.stepsFlightRight),ee(2),CD(" ",t.stair.stepsFlightLeft," - ",t.stair.stepsFlightMid," - ",t.stair.stepsFlightRight," ")}}let Lwt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.house$=this.houseService.house$,this.Section=_t,this.Tag=j3,this.tagsKeys=Object.keys(j3),this.minAngle=30,this.maxAngle=42,this.update=this.houseService.update,this.round=mn}ngAfterViewInit(){}sizeLabel(t){return`${t}m`}get totalRunMax(){return mn(this.house$.value.stair.totalRise/Math.tan(Wte(this.minAngle)),1)}get totalRunMin(){return mn(this.house$.value.stair.totalRise/Math.tan(Wte(this.maxAngle)),1)}get deltas(){return Math.ceil(this.rangeRun/.1)-1|1}get rangeRun(){return this.totalRunMax-this.totalRunMin}get rangeSteps(){const t=this.house$.value.stair;return t.maxSteps-t.minSteps+1}totalRunByIndex(t){return mn(t/(this.deltas-1)*this.rangeRun+this.totalRunMin,1)}getRun(t,i){const r=this.house$.value.stair,s=this.totalRunByIndex(i);return mn(s/(r.minSteps+t)*1e3,0)}getRise(t){const i=this.house$.value.stair;return mn(i.totalRise/(i.minSteps+t)*1e3,0)}scoreComfort(t,i){return Math.abs(t+2*i-600)}scoreColor(t,i){const r=this.scoreComfort(t,i);return r>30?void 0:`rgba(0, 115, 0, ${.6-.8/30*r})`}score(t,i){const r=this.house$.value.stair,s=Math.abs(1e3*r.run-t)<1&&Math.abs(1e3*r.rise-i)<1?" active":"";return t<220?"too-little"+s:t>300?"too-much"+s:this.scoreComfort(t,i)>30?"not-comfortable"+s:"comfortable"+s}select(t,i){this.update("stair","steps",t),this.update("stair","totalRun",i)}}return n.\u0275fac=function(t){return new(t||n)(U(Jo),U(Fo))},n.\u0275cmp=Rn({type:n,selectors:[["app-page-stairs"]],decls:3,vars:3,consts:[[4,"ngIf"],["identifier","PassiveOpen-Stairs"],[3,"id"],["Section.stairStart",""],["step","1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["start","3"],["step","0.1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["start","5"],[1,"matrix"],[3,"ngClass",4,"ngFor","ngForOf"],["colspan","50",2,"text-align","center"],[4,"ngFor","ngForOf"],[1,"too-much",2,"padding","0 8px"],[1,"not-comfortable",2,"padding","0 8px"],[2,"background-color","rgba(0, 115, 0,0.6)","padding","0 8px"],["Section.stairCheck",""],["Section.stairPlan",""],["step","0.1","tickInterval","1",3,"min","max","ngModel","input"],["step","1","tickInterval","1",3,"min","max","ngModel","input"],["width","100%","src","https://berkela.home.xs4all.nl/stijgpunten/afbeeldingen/tn_2005extra07_11.jpg"],[3,"ngClass"],[1,"step",3,"ngClass"],[3,"ngClass","ngStyle","click"]],template:function(t,i){1&t&&(Yt(0,Twt,109,42,"ng-container",0),ba(1,"async"),Ke(2,"disqus",1)),2&t&&Se("ngIf",J1(1,1,i.house$))},dependencies:[WA,W3,u3,fd,Fb,Mb,P9,EZ,W9,j9,dd],styles:['.matrix[_ngcontent-%COMP%]{border-collapse:collapse}.matrix[_ngcontent-%COMP%]   .matrix-cell[_ngcontent-%COMP%]{line-height:1em;white-space:pre-wrap;cursor:pointer;transition:.2s}.matrix[_ngcontent-%COMP%]   .matrix-cell[_ngcontent-%COMP%]:hover{background-color:var(--color-30)}.matrix[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .matrix[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:relative}.too-much[_ngcontent-%COMP%], .too-little[_ngcontent-%COMP%]{background-color:#ff00004d;opacity:.6}.not-comfortable[_ngcontent-%COMP%]{background-color:#ff73004d;opacity:.6}.active[_ngcontent-%COMP%]:after{content:" ";position:absolute;top:-2px;left:-2px;width:100%;height:100%;border:2px solid var(--color-60)}']}),n})();function Dwt(n,e){if(1&n&&(H(0,"th",16),V(1),N()),2&n){const t=Xt().$implicit;ee(1),Kn(" ",t.name," ")}}function Iwt(n,e){if(1&n&&Ke(0,"span",19),2&n){const t=Xt().$implicit,i=Xt().$implicit;Se("innerHTML",i.def(t[i.id],t.unit),V3)}}function Bwt(n,e){if(1&n&&(H(0,"td",17),Yt(1,Iwt,1,1,"span",18),N()),2&n){const t=e.$implicit,i=Xt().$implicit;ee(1),Se("ngIf",t[i.id])}}function Rwt(n,e){1&n&&(Zs(0,13),Yt(1,Dwt,2,1,"th",14),Yt(2,Bwt,2,1,"td",15),Js()),2&n&&Se("matColumnDef",e.$implicit.id)}function Fwt(n,e){1&n&&Ke(0,"tr",20)}function kwt(n,e){1&n&&Ke(0,"tr",21)}function Pwt(n,e){if(1&n){const t=Qa();Zs(0),H(1,"table",6),Yt(2,Rwt,3,1,"ng-container",7),Yt(3,Fwt,1,0,"tr",8),Yt(4,kwt,1,0,"tr",9),N(),H(5,"h3"),V(6,"The numbers that matter:"),N(),H(7,"p",10)(8,"span"),V(9,"r"),H(10,"sub"),V(11,"construction"),N()(),H(12,"span"),V(13),N(),H(14,"span"),V(15,"U "),N(),H(16,"span"),V(17),N(),H(18,"span"),V(19,"Wall thickness "),N(),H(20,"span"),V(21),N()(),H(22,"label")(23,"span"),V(24),N(),H(25,"mat-slider",11),dn("input",function(r){return gi(t),h(Xt().updateJoist(r.value))}),N()(),H(26,"label")(27,"span"),V(28),N(),H(29,"mat-slider",12),dn("input",function(r){gi(t);const s=Xt();return h(s.updateOuterSheet(s.round(r.value,4)))}),N()(),Js()}if(2&n){const t=e.ngIf,i=Xt();ee(1),Se("dataSource",t.construction.heatCalcs),ee(1),Se("ngForOf",i.columns),ee(1),Se("matHeaderRowDef",i.columnNames),ee(1),Se("matRowDefColumns",i.columnNames),ee(9),Kn(" ",t.construction.rConstruction,""),ee(4),Kn(" ",t.construction.U,""),ee(4),Kn(" ",t.construction.outerWallThickness,"m"),ee(3),Kn("I joist thickness (and main insulation) ",t.construction.thickness[i.Thicknesses.joists]," mm "),ee(1),Se("max",i.joists.length-1)("ngModel",i.currentJoist()),ee(3),Kn("Celit thickness (",t.construction.thickness[i.Thicknesses.outerSheet],"mm ) "),ee(1),Se("ngModel",t.construction.thickness[i.Thicknesses.outerSheet])}}let Hwt=(()=>{class n{constructor(t){this.houseService=t,this.house$=this.houseService.house$,this.Tag=j3,this.Section=_t,this.update=this.houseService.update,this.round=mn,this.Thicknesses=pn,this.joists=[200,300,350,400],this.columns=[{id:"name",name:"Name",def:i=>`${i}`},{id:"diameter",name:"Diameter",def:i=>`${mn(i,3)}`},{id:"lambda",name:"Lambda",def:i=>`${mn(i,3)}`},{id:"r",name:"R",def:i=>`${mn(i,2)}`},{id:"deltaT",name:"Delta T",def:i=>`${mn(i,1)}\xb0C`},{id:"temp",name:"Temp",def:i=>`${mn(i,1)}\xb0C`}],this.columnNames=this.columns.map(i=>i.id),this.currentJoist=()=>this.joists.findIndex(i=>i===this.house$.value.construction.Thicknesses[pn.joists])}ngAfterViewInit(){}updateJoist(t){this.update("construction","thicknessJoist",this.joists[t])}updateOuterSheet(t){this.update("construction","thicknessJoist",this.joists[t])}}return n.\u0275fac=function(t){return new(t||n)(U(Jo))},n.\u0275cmp=Rn({type:n,selectors:[["app-page-construction"]],decls:192,vars:29,consts:[[3,"id"],[1,"counter"],["href","https://en.wikipedia.org/wiki/Panelling"],[3,"tag"],[4,"ngIf"],["identifier","PassiveOpen-Construction"],["mat-table","",1,"mat-elevation-z0",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["gdColumns"," 1fr 1fr","gdGap","8px"],["min","0","step","1","tickInterval","1",3,"max","ngModel","input"],["min","0","max","150","step","10","tickInterval","1",3,"ngModel","input"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(H(0,"section",0)(1,"h1"),V(2," Construction "),N(),H(3,"h3"),V(4," This page is still under construction. "),N()(),H(5,"section",0)(6,"h2",1),V(7,"Foundation"),N(),H(8,"p"),V(9," Depends a lot on the region. In this case we use a 'mono-pour' together with the crawler space walls. "),N()(),H(10,"section",0)(11,"h2",1),V(12,"Crawler space walls"),N(),H(13,"p"),V(14," Here we use "),H(15,"tag"),V(16,"Insulated Concrete Forms (ICFs)"),N(),V(17,". These walls are connected to the floor and should be insulated. ICFs allows you to build these walls yourself. "),N()(),H(18,"section",0)(19,"h2",1),V(20,"Ground floor"),N(),H(21,"p"),V(22," Mass (heavy things) can keep heat. Like a stone wall after sunset would emit heat. It works also the opposite. Like churches are nice cool in the summer. Mass balance out the heat in a nice way. A complete wooden house, would not have that effect. Therefore some mass is a good thing to have. "),Ke(23,"br")(24,"br"),V(25," Hollow-concrete-plate are relatively light and have the mass we look for. They can come with insulation, altho this would not be damp-open. "),N()(),H(26,"section",0)(27,"h2",1),V(28,"Sole beams"),N(),H(29,"p"),V(30," Its never a good idea to build wood straight on concrete."),Ke(31,"br"),V(32," Therefore we use: "),N(),H(33,"ul")(34,"li"),V(35," a weather-resistent filt "),N(),H(36,"li"),V(37," pressured-treated plate (more water resistent), "),N(),H(38,"li"),V(39," the base plate. "),N()()(),H(40,"section",0)(41,"h2",1),V(42,"I-Joists"),N(),H(43,"p"),V(44," This is the actual structure. These i-joist are engineered. So they are straight, and cost less wood to produce. The "),H(45,"tag"),V(46,"on-center"),N(),V(47," distance (EU is often 60cm, US 16inch) is important. Only the first and last stud should not follow this grid, because otherwise the product on the finish end exactly on center of the stud. This is wrong because it the edge of the house, so the material should continue to the end. Wood is the material for construction. It is a storage of CO"),H(48,"sub"),V(49,"2"),N(),V(50,", natural, light and easy to work with. Modern products like, "),H(51,"tag"),V(52,"I Joists"),N(),V(53,", are even stronger than their natual twins. And you don't need to have a 30cm tree to produce a 30cm beam, so trees can be used more effective. (A disadvantage can be the glue used tho). Wood can last forever, think of all the old houses in old cities. "),N()(),H(54,"section",0)(55,"h2",1),V(56,"OSB (on the inside)"),N(),H(57,"p"),V(58," Traditional seen, OSB is used for a airtight outside layer. It also helps the whole building to be more solid, it can deal with sheer stresses. In this build, we will build "),H(59,"tag"),V(60,"damp open"),N(),V(61," and OSB is a perfect airtight product, but will also block moisture. Therefore it is actually great on the inside of the house "),N()(),H(62,"section",0)(63,"h2",1),V(64,"Tape"),N(),H(65,"p"),V(66," OSB and all the other seams are of course not air-tight. Therefore should we tape every seam. This step is harder than it sounds, especially around windows. You might not pass your passiv-haus certification due to this step."),Ke(67,"br")(68,"br"),V(69," This steps includes also windows/doors and close all openings for a door-blower test. "),N()(),H(70,"section",0)(71,"h2",1),V(72,"Wall-Floor beam"),N(),H(73,"p"),V(74," The top-floor will hang on the inside of the wall. This prevents a "),H(75,"tag"),V(76,"thermal bridge"),N(),V(77,", in other words, this makes it more easy to "),H(78,"tag"),V(79,"air tighten"),N(),V(80," the house and the insulation continues "),N()(),H(81,"section",0)(82,"h2",1),V(83,"Wooden floor"),N(),H(84,"p"),V(85," Joists and osb "),N()(),H(86,"section",0)(87,"h2",1),V(88,"Roof ridge"),N(),Ke(89,"p"),N(),H(90,"section",0)(91,"h2",1),V(92,"Roof joists"),N(),Ke(93,"p"),N(),H(94,"section",0)(95,"h2",1),V(96,"Roof Inside"),N(),H(97,"p"),V(98," The roof need sturdiness. So we use OSB here as well as the inner layer. All seams can be taped directly "),N()(),H(99,"section",0)(100,"h2",1),V(101,"Insulation"),N(),H(102,"p"),V(103," Very important step. Keep it all dry. It feels like glass-insulation is best best of both worlds. It's often recycled glass and has a relative small footprint to the more eco-friendly alternatives. Stay away from wool for example. It is also very affordable, so we can focus our money on more expensive windows "),N()(),H(104,"section",0)(105,"h2",1),V(106,"Damp open outer sheets"),N(),H(107,"p"),V(108," Here are multiple options. We don't like to use plastics here. A great option is "),H(109,"tag"),V(110,"fiberboard's"),N(),V(111,", they are damp open, some what water resistant. This is an environment friendly product. It can be out in the rain for 4 weeks, while building. "),N()(),H(112,"section",0)(113,"h2",1),V(114,"Roof Woodwork"),N(),H(115,"p"),V(116," grid of wood "),N()(),H(117,"section",0)(118,"h2",1),V(119,"Roof tiles"),N(),H(120,"p"),V(121," Tiles. "),N()(),H(122,"section",0)(123,"h2",1),V(124,"Cavity (vent space)"),N(),H(125,"p"),V(126," This step depends a lot on the outer finish. In this example we use vertical wooden planks. Therfore we need first vertical strips (the construction is vertical, and water needs to run down). On top of these strips are horizontal strips so we can add vertical facade planks "),N()(),H(127,"section",0)(128,"h2",1),V(129,"Outer wall"),N(),H(130,"p"),V(131," In this example we use wooden planks. Traditionally seen, it was impossible to make big planks. So in the early days the alternate with big planks and smaller strips. "),N()(),H(132,"section",0)(133,"h2",1),V(134,"Service wall"),N(),H(135,"p"),V(136," To prevent puncture in our air-tight OSB layer. There will be a service layer that contains all electric, water and such. It comes with extra insulation. This makes (small) renovations possible in the future. "),N()(),H(137,"section",0)(138,"h2",1),V(139,"Gips / Drywall / wood-finish"),N(),H(140,"p"),V(141," The inside wall will be either covered by gypsum/drywall. We also very like the idea of lower "),H(142,"a",2),V(143,"paneling"),N()()(),H(144,"h2"),V(145,"The water problem"),N(),H(146,"p"),V(147," Warm air can contain more water, so the inside air normally would go through the wall and cools down. To a point that it cannot hold longer that amount of water, so it condense in the middle of the wall. "),Ke(148,"br")(149,"br"),V(150," Traditional building takes that problem with plastic wraps. One on the outside to keep weather out. And a even more water-closed layer in the inside. Water moves out the construction. It is important during the building fase, to keep everything relatively dry. "),Ke(151,"br")(152,"br"),V(153," The alternative is: "),H(154,"tag"),V(155,"damp Open"),N(),V(156,". where no wraps are needed. The inner layer of the house has a water-closed natural layer (OSB sheets). The outside layer is 'damp-open' so it would not absorb rainwater, but the moist air from inside can escape. It is more like a Dutch slogan: not fighting the water, but living with (some) water. "),Ke(157,"br")(158,"br"),V(159," We try to look what is the best insulation out there. We think wood-fiber is the best most sustainable in therms of production/insulation values. Stone/glass fibers are a little bit less on the production level, but a bit more durable over time. "),Ke(160,"br")(161,"br"),H(162,"tag",3),V(163,"Wood fiber panels"),N(),V(164," are treated with bitumen, there are light, water-resistant and still insulating. They are a perfect layer for the outside layer of the construction (not final outer layer). "),Ke(165,"br")(166,"br"),V(167," On the inside of the OSB is an extra 2cm layer and finises of with wood or drywall(gips plates). This layer is practical, because all the switches and wall socket cannot interfere with the air-tight-layer. With a "),H(168,"tag",3),V(169," pipeLayer"),N(),V(170," is it:\n"),N(),H(171,"ol")(172,"li"),V(173,"Easier to build keep it "),H(174,"tag",3),V(175,"air tight"),N()(),H(176,"li"),V(177,"Deal with sockets in a later stage"),N(),H(178,"li"),V(179,"Modifications"),N()(),H(180,"section",0)(181,"h2"),V(182," Walls outer finish "),N(),H(183,"p"),V(184," Wooden house, has wood on the outside. Not completely tru. Wood is a sustainable choice (altho we wonder, painting it every 10 years...), but in theory can we have anything on the outside. Keep in mind if you build"),H(185,"tag"),V(186,"damp-open "),N(),V(187," that the finish-layer should also be damp-open. Bricks are for example. The cement is definitely not sustainable, but there is no maintenance in the coming 100-ish years. "),N()(),H(188,"section",0),Yt(189,Pwt,30,12,"ng-container",4),ba(190,"async"),N(),Ke(191,"disqus",5)),2&t&&(Se("id",i.Section.constructionWelcome),ee(5),Se("id",i.Section.constructionFoundation),ee(5),Se("id",i.Section.constructionCrawlerSpace),ee(8),Se("id",i.Section.constructionGroundFloor),ee(8),Se("id",i.Section.constructionWallSole),ee(14),Se("id",i.Section.constructionWallJoists),ee(14),Se("id",i.Section.constructionWallOSB),ee(8),Se("id",i.Section.constructionWallTape),ee(8),Se("id",i.Section.constructionFloorLVL),ee(11),Se("id",i.Section.constructionFloor),ee(5),Se("id",i.Section.constructionRoofRidge),ee(4),Se("id",i.Section.constructionRoofJoist),ee(4),Se("id",i.Section.constructionRoofInside),ee(5),Se("id",i.Section.constructionWallInsulation),ee(5),Se("id",i.Section.constructionWallOuterSheet),ee(8),Se("id",i.Section.constructionRoofSpace),ee(5),Se("id",i.Section.constructionRoofTiles),ee(5),Se("id",i.Section.constructionWallSpace),ee(5),Se("id",i.Section.constructionWallFacade),ee(5),Se("id",i.Section.constructionWallService),ee(5),Se("id",i.Section.constructionWallGips),ee(25),Se("tag",i.Tag.woodFiberPlate),ee(6),Se("tag",i.Tag.pipeLayer),ee(6),Se("tag",i.Tag.airTight),ee(6),Se("id",i.Section.constructionWallFinish),ee(8),Se("id",i.Section.constructionParameters),ee(1),Se("ngIf",J1(190,27,i.house$)))},dependencies:[W3,u3,Fb,qb,V9,Kb,U9,N9,Xb,G9,Q9,Yb,Zb,Mb,P9,NZ,VZ,j9,VS,dd],styles:['[_nghost-%COMP%]{counter-reset:heading}h2.counter[_ngcontent-%COMP%]{position:relative;counter-reset:subheading}h2.counter[_ngcontent-%COMP%]:after{content:"Step";position:absolute;top:-1.2em;left:-.6em;font-size:.8em;opacity:.6}h2.counter[_ngcontent-%COMP%]:before{content:counter(heading) "";counter-increment:heading;width:32px;display:inline-block;opacity:.6}']}),n})(),zwt=(()=>{class n{constructor(t,i,r){this.houseService=t,this.threeService=i,this.appService=r,this.house$=this.houseService.house$,this.Section=_t,this.Tag=j3,this.wallDetail="wallDetail",this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}ngAfterViewInit(){this.subscriptions.push()}showPerSection(){}}return n.\u0275fac=function(t){return new(t||n)(U(Jo),U(g_),U(Fo))},n.\u0275cmp=Rn({type:n,selectors:[["app-page-facade"]],decls:42,vars:3,consts:[[3,"id"],[1,"mat-caption"],[1,"technical",2,"max-width","640px"],["fxLayout","row wrap","fxLayoutGap","8px","fxLayoutAlign","center center",2,"padding","16px 0 24px"],["src","/assets/img/window_1.jpg",2,"max-height","360px"],["src","/assets/img/window_2.jpg",2,"max-height","360px"],["src","https://ars.els-cdn.com/content/image/1-s2.0-S0378778816316383-gr9.jpg"],["src","/assets/img/door_step_1.jpg",2,"max-height","360px"],["identifier","PassiveOpen-Facade"]],template:function(t,i){1&t&&(H(0,"section",0)(1,"h1"),V(2,"Facade"),N(),H(3,"p",1),V(4," We cover here all the basics about the outside of the house. Windows, doors, domers and bricks. "),N()(),H(5,"section",0)(6,"h1"),V(7,"Window"),N(),H(8,"p"),V(9," Windows are a tradeoff between a nice open light house and: heat loss, heat gain, complexer builds and more expensive. In a passiv house, belongs high end windows, triple glass and high-end framing. That makes it one of the most costly investments. "),N(),H(10,"label",2)(11,"span"),V(12,"Design"),N(),H(13,"span"),V(14," Dutch traditional windows have some variations. "),Ke(15,"br")(16,"br"),V(17," The right one is is nicely detailed. Look how the windowframe ends in a little stone, to keep it dry and prevent rotting. However the windowframe is missing at the bottom, the window rest on the stone. Not our modern standards. "),Ke(18,"br")(19,"br"),V(20," The major difference between them is that the left one has a frame at the bottom. That is better insulated, and we do need to use less precious stone. "),N(),H(21,"div",3),Ke(22,"img",4)(23,"img",5),N(),H(24,"span"),V(25," Furthermore both window-bottom-stones go into the brickwork. If you don't do this, you would create a channel for rainwater (wind blows it in the corner). And the dirt will collect on your walls. Now it would drip off. "),N()(),H(26,"p"),V(27," Place the window in the middle of insulation "),Ke(28,"img",6),N()(),H(29,"section",0)(30,"h1"),V(31,"Doors"),N(),H(32,"p"),V(33," For guests the first warm welcome "),N(),H(34,"label",2)(35,"span"),V(36,"Design"),N(),H(37,"span"),V(38,"They kinda look like windows. Ofcourse the bottomframe is missing here. The bottom frame should be wheelchair friendly, altho its a bit contradictive with a eleveated ground floor (due to crawler space). The door and frame should be extreme insulated. "),N(),H(39,"div",3),Ke(40,"img",7),N()()(),Ke(41,"disqus",8)),2&t&&(Se("id",i.Section.facadeStart),ee(5),Se("id",i.Section.facadeWindow),ee(24),Se("id",i.Section.facadeDoor))},dependencies:[E7,T7,Nh,j9],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:48px;align-items:center}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})(),Owt=(()=>{class n{constructor(t,i,r){this.zone=t,this.appService=i,this.houseService=r,this.Tag=j3,this.Section=_t}ngAfterViewInit(){this.zone.runOutsideAngular(()=>this.initMap())}initMap(){}}return n.\u0275fac=function(t){return new(t||n)(U(Xi),U(Fo),U(Jo))},n.\u0275cmp=Rn({type:n,selectors:[["app-page-installation"]],decls:89,vars:10,consts:[[3,"id"],[3,"tag"],["identifier","PassiveOpen-installations"]],template:function(t,i){1&t&&(H(0,"section",0)(1,"h1"),V(2,"Installations"),N()(),H(3,"section",0)(4,"h2"),V(5,"Drink water"),N(),H(6,"p"),V(7," Cold water supply doesn't require any special considerations, but if you live in the countryside, you may have a local source available. On the other hand, for hot or warm water supply in sinks and showers, a central heating system is necessary. It involves a central "),H(8,"tag",1),V(9," warm water buffer"),N(),V(10," tank that utilizes various heat sources, enabling hot water and even heating throughout the house. - "),N()(),H(11,"section",0)(12,"h2"),V(13,"Heating"),N(),H(14,"p"),V(15," Floor heating is the most suitable heating option for a passive house, which has minimal heat loss and receives energy from the sun, people, and machines. In colder climates, some heating may be required in extreme winters, and a heat-pump is the best way to warm up the low-heat water used for floor heating. It might share with domestic hot water a "),H(16,"tag",1),V(17," warm water buffer"),N(),V(18," tank. "),N()(),H(19,"section",0)(20,"h2"),V(21,"Electricity"),N(),H(22,"p"),V(23," While achieving complete off-grid living may be difficult, we can greatly reduce our electricity usage by utilizing solar panels. "),Ke(24,"br")(25,"br"),V(26," This Mansard roof is a (near) perfect angle for solar panels. However the to make it look nice is harder. We are still looking for the right panel types with old, classical roof tiles. If space allows it, you can put the panels on the ground away from the house "),Ke(27,"br")(28,"br"),V(29," There is a balance between the time you need electricity (evening, electricity-car & cooking) and when they produce the most (around noon). If you can return-to-net, an orientation to noon is the best. Otherwise some panels may be more beneficial facing westward. Storing excess energy in the "),H(30,"tag",1),V(31," warm water buffer "),N(),V(32," works like a battery. "),N()(),H(33,"section",0)(34,"h2"),V(35,"Grey water"),N(),H(36,"p"),V(37," Climate adaptation requires the conservation of water, which can be achieved by collecting rainwater and using it as a buffer during droughts. Rainwater, which has low calcium levels, is perfect for watering plants, flushing toilets, and washing clothes. A large water tank (10m"),H(38,"sub"),V(39,"3"),N(),V(40,"), pump, and three-filter system are needed to store and filter the rainwater. "),Ke(41,"br")(42,"br"),V(43," To ensure continuous water supply, a machine can automatically switch to normal drinking water backup if the rainwater tank runs out. "),Ke(44,"br")(45,"br"),V(46,"In theory showering with rainwater seems perfect, but most laws forbids to bend cold-rainwater with warm-drinkwater. If you do, you need less soap and your hair will be smooth. It might be different at your location "),N()(),H(47,"section",0)(48,"h2"),V(49,"Ventilation"),N(),H(50,"p"),V(51," In passive houses, the air-tight construction plays a crucial role in conserving heat. By using advanced blow-in and suck-out ventilation systems, up to 94% of heat energy can be recovered and redistributed throughout the house, resulting in significant energy savings. "),Ke(52,"br")(53,"br"),V(54," Air-tight?! than I can't open my windows.. There is a common misconception that passive houses don't allow for opening windows. However, if the outside temperature is close to the inside temperature, it is perfectly fine to do so. Nevertheless, a well-designed climate system can provide clean, filtered air and eliminate the need for open windows. This is especially useful for people with allergies or in areas with high levels of smog. "),Ke(55,"br")(56,"br"),V(57," To achieve a healthy indoor air quality, the ventilation system is designed to provide fresh air to some rooms, like the living room and sleeping rooms, while extracting air from wet rooms and the kitchen. The system is balanced to ensure efficient airflow throughout the house. Some rooms get fresh air, living room, sleeping rooms. And some rooms the air is pumped out, the wet rooms and kitchen. "),N()(),H(58,"section",0)(59,"h2"),V(60,"Domotica / Smart home"),N(),H(61,"p"),V(62," As homes become more complex, they should also become more intelligent. Automated air and heating systems that operate seamlessly in the background can enhance your comfort without you even noticing. For instance, on hot days, smart sunscreens can come down automatically to keep the interior cool, while they retract when it rains. "),Ke(63,"br")(64,"br"),V(65,' While a basic level of intelligence is necessary, there\'s room to enhance automation with features like automatic lighting. However, "smart homes" can cause some frustration, as not all situations require voice commands or smartphone operation; sometimes a simple button will do the trick. '),Ke(66,"br"),V(67," Despite this, a smart home with advanced capabilities should be able to determine when you need to turn on the lights. "),Ke(68,"br")(69,"br"),V(70,"Think of (all if over rulable) "),N(),H(71,"ul")(72,"li"),V(73,"The lights dim more in the evening"),N(),H(74,"li"),V(75,"Red nightlight in the toilet after 23:00"),N(),H(76,"li"),V(77,"Block the sunlight with screens"),N(),H(78,"li"),V(79,"Randomly turning on lights when you're away can create the illusion that someone is at home"),N(),H(80,"li"),V(81,"Remote controllable (local VPN not via cloud)"),N(),H(82,"li"),V(83,"More secure, camera's and alarms"),N()(),Ke(84,"br")(85,"br"),H(86,"p"),V(87," Wi-Fi is great, but cables offer better performance. If you are building a new home, consider installing more internet cables than you think you'll need. A smart home can use internet cables for sensors, cameras, computers, and more. Cat 6 cables are a good choice because they are easy to work with and provide fine speeds for most applications, as long as the distance is not too long (over 30 meters or so). For work or gaming stations, you may want to consider using a higher quality cable. Shielded cables are not necessary for home use, as they are more expensive and harder to work with "),N()(),Ke(88,"disqus",2)),2&t&&(Se("id",i.Section.installationWelcome),ee(3),Se("id",i.Section.installationDrinkWater),ee(5),Se("tag",i.Tag.warmWaterBuffer),ee(3),Se("id",i.Section.installationHeating),ee(5),Se("tag",i.Tag.warmWaterBuffer),ee(3),Se("id",i.Section.installationElectricity),ee(11),Se("tag",i.Tag.warmWaterBuffer),ee(3),Se("id",i.Section.installationGreyWater),ee(14),Se("id",i.Section.installationVentilation),ee(11),Se("id",i.Section.installationSmartHome))},dependencies:[j9,VS]}),n})();const c4=class Nwt{constructor(e){this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},Fz=class Vwt{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function N5(n,e){return n>e?1:n<e?-1:0}function kz(n,e,t){const i=n.length;if(n[0]<=e)return 0;if(e<=n[i-1])return i-1;{let r;if(t>0){for(r=1;r<i;++r)if(n[r]<e)return r-1}else if(t<0){for(r=1;r<i;++r)if(n[r]<=e)return r}else for(r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return"function"==typeof t?t(e,n[r-1],n[r])>0?r-1:r:n[r-1]-e<e-n[r]?r-1:r}return i-1}}function Gwt(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function qu(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function c6(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function th(){return!0}function Xg(){return!1}function V5(){}function Yg(n){for(const e in n)delete n[e]}function Zg(n){let e;for(e in n)return!1;return!e}const US=class jwt extends Fz{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t="string"==typeof e,i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new c4(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let c;i in o||(o[i]=0,a[i]=0),++o[i];for(let l=0,u=r.length;l<u;++l)if(c="handleEvent"in r[l]?r[l].handleEvent(s):r[l].call(this,s),!1===c||s.propagationStopped){c=!1;break}if(0==--o[i]){let l=a[i];for(delete a[i];l--;)this.removeEventListener(i,V5);delete o[i]}return c}disposeInternal(){this.listeners_&&Yg(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,t){const i=this.listeners_&&this.listeners_[e];if(i){const r=i.indexOf(t);-1!==r&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=V5,++this.pendingRemovals_[e]):(i.splice(r,1),0===i.length&&delete this.listeners_[e]))}}};function $s(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function GS(n,e,t,i){return $s(n,e,t,i,!0)}function Ia(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Yg(n))}const X4e=class QS extends US{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=$s(this,e[s],t);return r}return $s(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=GS(this,e[s],t)}else i=GS(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)!function $wt(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Ia(n[e]);else Ia(n)}(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}};function or(){throw new Error("Unimplemented abstract method.")}let qwt=0;function br(n){return n.ol_uid||(n.ol_uid=String(++qwt))}class Y4e extends c4{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}const nh=class Kwt extends X4e{constructor(e){super(),br(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new Y4e(i,e,t)),i="propertychange",this.hasListener(i)&&this.dispatchEvent(new Y4e(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){!e.values_||Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Zg(this.values_)&&(this.values_=null),t||this.notify(e,i)}}},Xwt={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class Ywt extends Error{constructor(e){const t=Xwt[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}const Z4e=Ywt;function Ts(n,e){if(!n)throw new Z4e(e)}class Pz extends nh{constructor(e){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?this.setGeometry(e):this.setProperties(e))}clone(){const e=new Pz(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ia(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=$s(e,"change",this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function Zwt(n){if("function"==typeof n)return n;{let e;return Array.isArray(n)?e=n:(Ts("function"==typeof n.getZIndex,41),e=[n]),function(){return e}}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const X4=Pz;class WS extends c4{constructor(e,t,i){super(e),this.element=t,this.index=i}}const N1=class Jwt extends nh{constructor(e,t){if(super(),this.unique_=!!(t=t||{}).unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get("length")}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new WS("add",t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new WS("remove",t,e)),t}setAt(e,t){if(e>=this.getLength())return void this.insertAt(e,t);if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new WS("remove",r,e)),this.dispatchEvent(new WS("add",t,e))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new Z4e(58)}},l6=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",eCt=l6.includes("firefox"),tCt=(l6.includes("safari")&&!l6.includes("chrom")&&(l6.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(l6)),l6.includes("webkit")&&!l6.includes("edge")),nCt=l6.includes("macintosh"),eue=typeof devicePixelRatio<"u"?devicePixelRatio:1,Hz=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,iCt=typeof Image<"u"&&Image.prototype.decode,tue=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function d2(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function Cf(n,e,t,i,r,s,o,a){const c=Math.sin(s),l=Math.cos(s);return n[0]=i*l,n[1]=r*c,n[2]=-i*c,n[3]=r*l,n[4]=o*i*l-a*i*c+e,n[5]=o*r*c+a*r*l+t,n}function jS(n,e){const t=function oCt(n){return n[0]*n[3]-n[1]*n[2]}(e);Ts(0!==t,32);const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-s/t,n[3]=i/t,n[4]=(s*c-o*a)/t,n[5]=-(i*c-r*a)/t,n}let nue;function Nz(n){const e="matrix("+n.join(", ")+")";if(Hz)return e;const t=nue||(nue=document.createElement("div"));return t.style.transform=e,t.style.transform}new Array(6);function Y4(n){const e=[1/0,1/0,-1/0,-1/0];for(let t=0,i=n.length;t<i;++t)em(e,n[t]);return e}function $S(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function iue(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function U5(n,e,t){let i,r;return i=e<n[0]?n[0]-e:n[2]<e?e-n[2]:0,r=t<n[1]?n[1]-t:n[3]<t?t-n[3]:0,i*i+r*r}function qS(n,e){return Vz(n,e[0],e[1])}function Jg(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function Vz(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function Uz(n,e){const o=e[0],a=e[1];let c=0;return o<n[0]?c|=16:o>n[2]&&(c|=4),a<n[1]?c|=8:a>n[3]&&(c|=2),0===c&&(c=1),c}function Xu(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function G5(n){return Xu(1/0,1/0,-1/0,-1/0,n)}function KS(n,e){const t=n[0],i=n[1];return Xu(t,i,t,i,e)}function rue(n,e,t,i,r){return aue(G5(r),n,e,t,i)}function b_(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function sue(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function em(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function aue(n,e,t,i,r){for(;t<i;t+=r)lCt(n,e[t],e[t+1]);return n}function lCt(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function Gz(n,e){let t;return t=e(YS(n)),!!(t||(t=e(ZS(n)),t)||(t=e(JS(n)),t)||(t=e(Q5(n)),t))&&t}function XS(n){let e=0;return jz(n)||(e=_a(n)*Yu(n)),e}function YS(n){return[n[0],n[1]]}function ZS(n){return[n[2],n[1]]}function u6(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function uCt(n,e){let t;return"bottom-left"===e?t=YS(n):"bottom-right"===e?t=ZS(n):"top-left"===e?t=Q5(n):"top-right"===e?t=JS(n):Ts(!1,13),t}function Qz(n,e,t,i,r){const[s,o,a,c,l,u,f,p]=Wz(n,e,t,i);return Xu(Math.min(s,a,l,f),Math.min(o,c,u,p),Math.max(s,a,l,f),Math.max(o,c,u,p),r)}function Wz(n,e,t,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(t),a=Math.sin(t),c=r*o,l=r*a,u=s*o,f=s*a,p=n[0],g=n[1];return[p-c+f,g-l-u,p-c-f,g-l+u,p+c-f,g+l+u,p+c+f,g+l-u,p-c+f,g-l-u]}function Yu(n){return n[3]-n[1]}function tm(n,e,t){const i=t||[1/0,1/0,-1/0,-1/0];return zl(n,e)?(i[0]=n[0]>e[0]?n[0]:e[0],i[1]=n[1]>e[1]?n[1]:e[1],i[2]=n[2]<e[2]?n[2]:e[2],i[3]=n[3]<e[3]?n[3]:e[3]):G5(i),i}function Q5(n){return[n[0],n[3]]}function JS(n){return[n[2],n[3]]}function _a(n){return n[2]-n[0]}function zl(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function jz(n){return n[2]<n[0]||n[3]<n[1]}function cue(n,e){const t=e.getExtent(),i=u6(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=_a(t),o=Math.floor((i[0]-t[0])/r)*r;n[0]-=o,n[2]-=o}return n}function sc(n,e,t){return Math.min(Math.max(n,e),t)}function gCt(n,e,t,i,r,s){const o=r-t,a=s-i;if(0!==o||0!==a){const c=((n-t)*o+(e-i)*a)/(o*o+a*a);c>1?(t=r,i=s):c>0&&(t+=o*c,i+=a*c)}return bf(n,e,t,i)}function bf(n,e,t,i){const r=t-n,s=i-e;return r*r+s*s}function W5(n){return n*Math.PI/180}function h6(n,e){const t=n%e;return t*e<0?t+e:t}function xf(n,e,t){return n+t*(e-n)}function eE(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function tE(n,e){return Math.floor(eE(n,e))}function nE(n,e){return Math.ceil(eE(n,e))}const lue=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,uue=/^([a-z]*)$|^hsla?\(.*\)$/i;function hue(n){return"string"==typeof n?n:pue(n)}const ACt=function(){const e={};let t=0;return function(i){let r;if(e.hasOwnProperty(i))r=e[i];else{if(t>=1024){let s=0;for(const o in e)0==(3&s++)&&(delete e[o],--t)}r=function vCt(n){let e,t,i,r,s;if(uue.exec(n)&&(n=function fue(n){const e=document.createElement("div");if(e.style.color=n,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}(n)),lue.exec(n)){const o=n.length-1;let a;a=o<=4?1:2;const c=4===o||8===o;e=parseInt(n.substr(1+0*a,a),16),t=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),r=c?parseInt(n.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,t=(t<<4)+t,i=(i<<4)+i,c&&(r=(r<<4)+r)),s=[e,t,i,r/255]}else n.startsWith("rgba(")?(s=n.slice(5,-1).split(",").map(Number),due(s)):n.startsWith("rgb(")?(s=n.slice(4,-1).split(",").map(Number),s.push(1),due(s)):Ts(!1,14);return s}(i),e[i]=r,++t}return r}}();function iE(n){return Array.isArray(n)?n:ACt(n)}function due(n){return n[0]=sc(n[0]+.5|0,0,255),n[1]=sc(n[1]+.5|0,0,255),n[2]=sc(n[2]+.5|0,0,255),n[3]=sc(n[3],0,1),n}function pue(n){let e=n[0];e!=(0|e)&&(e=e+.5|0);let t=n[1];t!=(0|t)&&(t=t+.5|0);let i=n[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+t+","+i+","+(void 0===n[3]?1:Math.round(100*n[3])/100)+")"}function gue(n,e,t){return e+":"+n+":"+(t?hue(t):"null")}const rE=new class _Ct{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];0==(3&e++)&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const r=gue(e,t,i);return r in this.cache_?this.cache_[r]:null}set(e,t,i,r){const s=gue(e,t,i);this.cache_[s]=r,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}},mue=class yCt extends nh{constructor(e){super(),this.background_=e.background;const t=Object.assign({},e);"object"==typeof e.properties&&(delete t.properties,Object.assign(t,e.properties)),t.opacity=void 0!==e.opacity?e.opacity:1,Ts("number"==typeof t.opacity,64),t.visible=void 0===e.visible||e.visible,t.zIndex=e.zIndex,t.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,t.minResolution=void 0!==e.minResolution?e.minResolution:0,t.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,t.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,this.className_=void 0!==t.className?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:void 0===e||e},i=this.getZIndex();return t.opacity=sc(Math.round(100*this.getOpacity())/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=void 0!==i||t.managed?i:1/0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return or()}getLayerStatesArray(e){return or()}getExtent(){return this.get("extent")}getMaxResolution(){return this.get("maxResolution")}getMinResolution(){return this.get("minResolution")}getMinZoom(){return this.get("minZoom")}getMaxZoom(){return this.get("maxZoom")}getOpacity(){return this.get("opacity")}getSourceState(){return or()}getVisible(){return this.get("visible")}getZIndex(){return this.get("zIndex")}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set("extent",e)}setMaxResolution(e){this.set("maxResolution",e)}setMinResolution(e){this.set("minResolution",e)}setMaxZoom(e){this.set("maxZoom",e)}setMinZoom(e){this.set("minZoom",e)}setOpacity(e){Ts("number"==typeof e,64),this.set("opacity",e)}setVisible(e){this.set("visible",e)}setZIndex(e){this.set("zIndex",e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}};function $z(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}const sE=class wCt extends mue{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener("source",this.handleSourcePropertyChange_),this.setSource(e.source?e.source:null)}getLayersArray(e){return(e=e||[]).push(this),e}getLayerStatesArray(e){return(e=e||[]).push(this.getLayerState()),e}getSource(){return this.get("source")||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ia(this.sourceChangeKey_),this.sourceChangeKey_=null);const e=this.getSource();e&&(this.sourceChangeKey_=$s(e,"change",this.handleSourceChange_,this)),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise(t=>t([]))}getData(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}render(e,t){const i=this.getRenderer();if(i.prepareFrame(e))return this.rendered=!0,i.renderFrame(e,t)}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set("map",e)}getMapInternal(){return this.get("map")}setMap(e){this.mapPrecomposeKey_&&(Ia(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ia(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=$s(e,"precompose",function(t){const r=t.frameState.layerStatesArray,s=this.getLayerState(!1);Ts(!r.some(function(o){return o.layer===s.layer}),67),r.push(s)},this),this.mapRenderKey_=$s(this,"change",e.render,e),this.changed())}setSource(e){this.set("source",e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function Aue(n,e){const r=e[0],s=e[1],o=r[0],a=r[1],c=s[0],l=s[1],u=c-o,f=l-a,p=0===u&&0===f?0:(u*(n[0]-o)+f*(n[1]-a))/(u*u+f*f||0);let g,_;return p<=0?(g=o,_=a):p>=1?(g=c,_=l):(g=o+p*u,_=a+p*f),[g,_]}function Zu(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function qz(n,e){const t=Math.cos(e),i=Math.sin(e),s=n[1]*t+n[0]*i;return n[0]=n[0]*t-n[1]*i,n[1]=s,n}function nm(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function oE(n,e){return Math.sqrt(nm(n,e))}function _ue(n,e){if(e.canWrapX()){const t=_a(e.getExtent()),i=function ECt(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||_a(i),r=Math.floor((n[0]-i[0])/t)),r}(n,e,t);i&&(n[0]-=i*t)}return n}function LCt(n,e){rE.expire()}const DCt=class TCt extends Fz{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){or()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Cf(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),jS(r,i)}forEachFeatureAtCoordinate(e,t,i,r,s,o,a,c){let l;const u=t.viewState;function f(T,I,F,P){return s.call(o,I,T?F:null,P)}const p=u.projection,g=_ue(e.slice(),p),_=[[0,0]];if(p.canWrapX()&&r){const I=_a(p.getExtent());_.push([-I,0],[I,0])}const y=t.layerStatesArray,w=y.length,C=[],x=[];for(let T=0;T<_.length;T++)for(let I=w-1;I>=0;--I){const F=y[I],P=F.layer;if(P.hasRenderer()&&$z(F,u)&&a.call(c,P)){const R=P.getRenderer(),k=P.getSource();if(R&&k){const W=k.getWrapX()?g:e,re=f.bind(null,F.managed);x[0]=W[0]+_[T][0],x[1]=W[1]+_[T][1],l=R.forEachFeatureAtCoordinate(x,t,i,re,C)}if(l)return l}}if(0===C.length)return;const M=1/C.length;return C.forEach((T,I)=>T.distanceSq+=I*M),C.sort((T,I)=>T.distanceSq-I.distanceSq),C.some(T=>l=T.callback(T.feature,T.layer,T.geometry)),l}hasFeatureAtCoordinate(e,t,i,r,s,o){return void 0!==this.forEachFeatureAtCoordinate(e,t,i,r,th,this,s,o)}getMap(){return this.map_}renderFrame(e){or()}scheduleExpireIconCache(e){rE.canExpireCache()&&e.postRenderFunctions.push(LCt)}},yue=class ICt extends c4{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}},aE="ol-hidden",cE="ol-unselectable",Kz="ol-control",wue="ol-collapsed",BCt=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Cue=["style","variant","weight","size","lineHeight","family"],bue=function(n){const e=n.match(BCt);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=Cue.length;i<r;++i){const s=e[i+1];void 0!==s&&(t[Cue[i]]=s)}return t.families=t.family.split(/,\s?/),t};function l4(n,e,t,i){let r;return r=t&&t.length?t.shift():Hz?new OffscreenCanvas(n||300,e||300):document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}function xue(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function Mue(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function Xz(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}const Sue="10px sans-serif",Mf="#000",lE="round",x_=[],im="round",E_="#000",T_="center",uE="middle",j5=[0,0,0,0],Sf=new nh;let Yz,rm=null;const Zz={},kCt=function(){const e="32px ",t=["monospace","serif"],i=t.length,r="wmytzilWMYTZIL@#/&?$%10\uf013";let s,o;function a(l,u,f){let p=!0;for(let g=0;g<i;++g){const _=t[g];if(o=hE(l+" "+u+" "+e+_,r),f!=_){const y=hE(l+" "+u+" "+e+f+","+_,r);p=p&&y!=o}}return!!p}function c(){let l=!0;const u=Sf.getKeys();for(let f=0,p=u.length;f<p;++f){const g=u[f];Sf.get(g)<100&&(a.apply(this,g.split("\n"))?(Yg(Zz),rm=null,Yz=void 0,Sf.set(g,100)):(Sf.set(g,Sf.get(g)+1,!0),l=!1))}l&&(clearInterval(s),s=void 0)}return function(l){const u=bue(l);if(!u)return;const f=u.families;for(let p=0,g=f.length;p<g;++p){const _=f[p],y=u.style+"\n"+u.weight+"\n"+_;void 0===Sf.get(y)&&(Sf.set(y,100,!0),a(u.style,u.weight,_)||(Sf.set(y,0,!0),void 0===s&&(s=setInterval(c,32))))}}}(),PCt=function(){let n;return function(e){let t=Zz[e];if(null==t){if(Hz){const i=bue(e),r=Eue(e,"\u017dg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);Zz[e]=t}return t}}();function Eue(n,e){return rm||(rm=l4(1,1)),n!=Yz&&(rm.font=n,Yz=rm.font),rm.measureText(e)}function hE(n,e){return Eue(n,e).width}function Tue(n,e,t){if(e in t)return t[e];const i=e.split("\n").reduce((r,s)=>Math.max(r,hE(n,s)),0);return t[e]=i,i}const VCt=class NCt extends DCt{constructor(e){super(e),this.fontChangeListenerKey_=$s(Sf,"propertychange",e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=cE+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new yue(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){Ia(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent("precompose",e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=e.viewState;this.children_.length=0;const r=[];let s=null;for(let o=0,a=t.length;o<a;++o){const c=t[o];e.layerIndex=o;const l=c.layer,u=l.getSourceState();if(!$z(c,i)||"ready"!=u&&"undefined"!=u){l.unrender();continue}const f=l.render(e,s);!f||(f!==s&&(this.children_.push(f),s=f),"getDeclutter"in l&&r.push(l))}for(let o=r.length-1;o>=0;--o)r[o].renderDeclutter(e);(function FCt(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}})(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}};class d6 extends c4{constructor(e,t){super(e),this.layer=t}}class eO extends mue{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),i?Array.isArray(i)?i=new N1(i.slice(),{unique:!0}):Ts("function"==typeof i.getArray,43):i=new N1(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ia),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push($s(e,"add",this.handleLayersAdd_,this),$s(e,"remove",this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Ia);Yg(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new d6("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[$s(e,"propertychange",this.handleLayerChange_,this),$s(e,"change",this.handleLayerChange_,this)];e instanceof eO&&t.push($s(e,"addlayer",this.handleLayerGroupAdd_,this),$s(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[br(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new d6("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new d6("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new d6("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=br(t);this.listenerKeys_[i].forEach(Ia),delete this.listenerKeys_[i],this.dispatchEvent(new d6("removelayer",t)),this.changed()}getLayers(){return this.get("layers")}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new d6("removelayer",i[r]))}this.set("layers",e)}getLayersArray(e){return e=void 0!==e?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=void 0!==e?e:[],i=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&void 0===r.zIndex&&(s=0);for(let o=i,a=t.length;o<a;o++){const c=t[o];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),c.minZoom=Math.max(c.minZoom,r.minZoom),c.maxZoom=Math.min(c.maxZoom,r.maxZoom),void 0!==r.extent&&(c.extent=void 0!==c.extent?tm(c.extent,r.extent):r.extent),void 0===c.zIndex&&(c.zIndex=s)}return t}getSourceState(){return"ready"}}const fE=eO,sm=class UCt extends c4{constructor(e,t,i){super(e),this.map=t,this.frameState=void 0!==i?i:null}},Ef=class GCt extends sm{constructor(e,t,i,r,s,o){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==r&&r,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},Ns={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},WCt=class QCt extends US{constructor(e,t){super(e),this.map_=e,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===t?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=$s(i,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=$s(i,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener("touchmove",this.boundHandleTouchMove_,!!tue&&{passive:!1})}emulateClick_(e){let t=new Ef(Ns.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Ef(Ns.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const i=new Ef(Ns.SINGLECLICK,this.map_,e);this.dispatchEvent(i)}.bind(this),250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Ns.POINTERUP||t.type==Ns.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Ns.POINTERDOWN||t.type==Ns.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Ef(Ns.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(Ia),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return 0===e.button}handlePointerDown_(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);const t=new Ef(Ns.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.down_={};for(const i in e){const r=e[i];this.down_[i]="function"==typeof r?V5:r}if(0===this.dragListenerKeys_.length){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push($s(i,Ns.POINTERMOVE,this.handlePointerMove_,this),$s(i,Ns.POINTERUP,this.handlePointerUp_,this),$s(this.element_,Ns.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push($s(this.element_.getRootNode(),Ns.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Ef(Ns.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new Ef(Ns.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&("boolean"!=typeof e.cancelable||!0===e.cancelable)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ia(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ia(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ia),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},dE=1/0,Ju={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},$5={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},Lue=class JCt{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||$5[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}},D_=6378137,om=Math.PI*D_,ebt=[-om,-om,om,om],tbt=[-180,-85,180,85],pE=D_*Math.log(Math.tan(Math.PI/2));class am extends Lue{constructor(e){super({code:e,units:"m",extent:ebt,global:!0,worldExtent:tbt,getPointResolution:function(t,i){return t/Math.cosh(i[1]/D_)}})}}const Due=[new am("EPSG:3857"),new am("EPSG:102100"),new am("EPSG:102113"),new am("EPSG:900913"),new am("http://www.opengis.net/def/crs/EPSG/0/3857"),new am("http://www.opengis.net/gml/srs/epsg.xml#3857")];function nbt(n,e,t){const i=n.length;t=t>1?t:2,void 0===e&&(e=t>2?n.slice():new Array(i));for(let r=0;r<i;r+=t){e[r]=om*n[r]/180;let s=D_*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));s>pE?s=pE:s<-pE&&(s=-pE),e[r+1]=s}return e}function ibt(n,e,t){const i=n.length;t=t>1?t:2,void 0===e&&(e=t>2?n.slice():new Array(i));for(let r=0;r<i;r+=t)e[r]=180*n[r]/om,e[r+1]=360*Math.atan(Math.exp(n[r+1]/D_))/Math.PI-90;return e}const Iue=[-180,-90,180,90],sbt=6378137*Math.PI/180;class q5 extends Lue{constructor(e,t){super({code:e,units:"degrees",extent:Iue,axisOrientation:t,global:!0,metersPerUnit:sbt,worldExtent:Iue})}}const Bue=[new q5("CRS:84"),new q5("EPSG:4326","neu"),new q5("urn:ogc:def:crs:OGC:1.3:CRS84"),new q5("urn:ogc:def:crs:OGC:2:84"),new q5("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new q5("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new q5("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let gE={},e0={};function mE(n,e,t){const i=n.getCode(),r=e.getCode();i in e0||(e0[i]={}),e0[i][r]=t}const AE=6371008.8;function iO(n,e,t){t=t||AE;const i=W5(n[1]),r=W5(e[1]),s=(r-i)/2,o=W5(e[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function rO(n,e){let t=0;for(let i=0,r=n.length;i<r-1;++i)t+=iO(n[i],n[i+1],e);return t}function Rue(n,e){const t=(e=e||{}).radius||AE,i=e.projection||"EPSG:3857",r=n.getType();"GeometryCollection"!==r&&(n=n.clone().transform(i,"EPSG:4326"));let o,a,c,l,u,f,s=0;switch(r){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":o=n.getCoordinates(),s=rO(o,t);break;case"MultiLineString":case"Polygon":for(o=n.getCoordinates(),c=0,l=o.length;c<l;++c)s+=rO(o[c],t);break;case"MultiPolygon":for(o=n.getCoordinates(),c=0,l=o.length;c<l;++c)for(a=o[c],u=0,f=a.length;u<f;++u)s+=rO(a[u],t);break;case"GeometryCollection":{const p=n.getGeometries();for(c=0,l=p.length;c<l;++c)s+=Rue(p[c],e);break}default:throw new Error("Unsupported geometry type: "+r)}return s}function vE(n,e){let t=0;const i=n.length;let r=n[i-1][0],s=n[i-1][1];for(let o=0;o<i;o++){const a=n[o][0],c=n[o][1];t+=W5(a-r)*(2+Math.sin(W5(s))+Math.sin(W5(c))),r=a,s=c}return t*e*e/2}function Fue(n,e){const t=(e=e||{}).radius||AE,i=e.projection||"EPSG:3857",r=n.getType();"GeometryCollection"!==r&&(n=n.clone().transform(i,"EPSG:4326"));let o,a,c,l,u,f,s=0;switch(r){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(o=n.getCoordinates(),s=Math.abs(vE(o[0],t)),c=1,l=o.length;c<l;++c)s-=Math.abs(vE(o[c],t));break;case"MultiPolygon":for(o=n.getCoordinates(),c=0,l=o.length;c<l;++c)for(a=o[c],s+=Math.abs(vE(a[0],t)),u=1,f=a.length;u<f;++u)s-=Math.abs(vE(a[u],t));break;case"GeometryCollection":{const p=n.getGeometries();for(c=0,l=p.length;c<l;++c)s+=Fue(p[c],e);break}default:throw new Error("Unsupported geometry type: "+r)}return s}let sO=!0;function kue(n){sO=!(void 0===n||n)}function oO(n,e,t){if(void 0!==e)for(let i=0,r=n.length;i<r;++i)e[i]=n[i];else e=n.slice();return e}function Pue(n,e,t){if(void 0!==e&&n!==e){for(let i=0,r=n.length;i<r;++i)e[i]=n[i];n=e}return n}function lbt(n){(function abt(n,e){gE[n]=e})(n.getCode(),n),mE(n,n,oO)}function Za(n){return"string"==typeof n?function obt(n){return gE[n]||gE[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(n):n||null}function Hue(n,e,t,i){let r;const s=(n=Za(n)).getPointResolutionFunc();if(s){if(r=s(e,t),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(r=r*o/$5[i])}}else{const o=n.getUnits();if("degrees"==o&&!i||"degrees"==i)r=e;else{const a=I_(n,Za("EPSG:4326"));if(a===Pue&&"degrees"!==o)r=e*n.getMetersPerUnit();else{let l=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];l=a(l,l,2),r=(iO(l.slice(0,2),l.slice(2,4))+iO(l.slice(4,6),l.slice(6,8)))/2}const c=i?$5[i]:n.getMetersPerUnit();void 0!==c&&(r/=c)}}return r}function zue(n){(function ubt(n){n.forEach(lbt)})(n),n.forEach(function(e){n.forEach(function(t){e!==t&&mE(e,t,oO)})})}function aO(n,e){return n?"string"==typeof n?Za(n):n:Za(e)}function cO(n,e){return kue(),R_(n,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function K5(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||I_(n,e)===oO)&&t}function I_(n,e){let r=function cbt(n,e){let t;return n in e0&&e in e0[n]&&(t=e0[n][e]),t}(n.getCode(),e.getCode());return r||(r=Pue),r}function B_(n,e){return I_(Za(n),Za(e))}function R_(n,e,t){return B_(e,t)(n,void 0,n.length)}let Ol=null;function g6(){return Ol}function F_(n,e){return n}function oc(n,e){return sO&&!Zu(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(sO=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function _E(n,e){return n}function m6(n,e){return n}function pbt(n,e){return n}function Vue(n,e,t){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const c=e?0:s[0]*r,l=e?0:s[1]*r,u=a?a[0]:0,f=a?a[1]:0;let p=n[0]+c/2+u,g=n[2]-c/2+u,_=n[1]+l/2+f,y=n[3]-l/2+f;p>g&&(p=(g+p)/2,g=p),_>y&&(_=(y+_)/2,y=_);let w=sc(i[0],p,g),C=sc(i[1],_,y);if(o&&t&&r){const x=30*r;w+=-x*Math.log(1+Math.max(0,p-i[0])/x)+x*Math.log(1+Math.max(0,i[0]-g)/x),C+=-x*Math.log(1+Math.max(0,_-i[1])/x)+x*Math.log(1+Math.max(0,i[1]-y)/x)}return[w,C]}}function mbt(n){return n}function lO(n,e,t,i){const r=_a(e)/t[0],s=Yu(e)/t[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function uO(n,e,t){let i=Math.min(n,e);return i*=Math.log(1+50*Math.max(0,n/e-1))/50+1,t&&(i=Math.max(i,t),i/=Math.log(1+50*Math.max(0,t/n-1))/50+1),sc(i,t/2,2*e)}function Uue(n,e,t,i,r){return t=void 0===t||t,function(s,o,a,c){if(void 0!==s){const l=i?lO(n,i,a,r):n;return t&&c?uO(s,l,e):sc(s,e,l)}}}function hO(n){if(void 0!==n)return 0}function Gue(n){if(void 0!==n)return n}function Que(n){return Math.pow(n,3)}function cm(n){return 1-Que(1-n)}function fO(n){return 3*n*n-2*n*n*n}function wbt(n){return n}function X5(n,e,t,i,r,s){s=s||[];let o=0;for(let a=e;a<t;a+=i){const c=n[a],l=n[a+1];s[o++]=r[0]*c+r[2]*l+r[4],s[o++]=r[1]*c+r[3]*l+r[5]}return s&&s.length!=o&&(s.length=o),s}function dO(n,e,t,i,r,s,o){o=o||[];const a=Math.cos(r),c=Math.sin(r),l=s[0],u=s[1];let f=0;for(let p=e;p<t;p+=i){const g=n[p]-l,_=n[p+1]-u;o[f++]=l+g*a-_*c,o[f++]=u+g*c+_*a;for(let y=p+2;y<p+i;++y)o[f++]=n[y]}return o&&o.length!=f&&(o.length=f),o}function Wue(n,e,t,i,r,s,o){o=o||[];let a=0;for(let c=e;c<t;c+=i){o[a++]=n[c]+r,o[a++]=n[c+1]+s;for(let l=c+2;l<c+i;++l)o[a++]=n[l]}return o&&o.length!=a&&(o.length=a),o}!function gbt(){zue(Due),zue(Bue),function hbt(n,e,t,i){n.forEach(function(r){e.forEach(function(s){mE(r,s,t),mE(s,r,i)})})}(Bue,Due,nbt,ibt)}();const jue=[1,0,0,1,0,0],$ue=class bbt extends nh{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function Wwt(n){let t,i,r,e=!1;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!c6(s,i))&&(e=!0,r=this,i=s,t=n.apply(this,arguments)),t}}(function(e,t,i){if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return or()}closestPointXY(e,t,i,r){return or()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return this.closestPointXY(e[0],e[1],t=t||[NaN,NaN],1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return or()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&G5(t),this.extentRevision_=this.getRevision()}return function hCt(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}(this.extent_,e)}rotate(e,t){or()}scale(e,t,i){or()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return or()}getType(){return or()}applyTransform(e){or()}intersectsExtent(e){return or()}translate(e,t){or()}transform(e,t){const i=Za(e),r="tile-pixels"==i.getUnits()?function(s,o,a){const c=i.getExtent(),l=i.getWorldExtent(),u=Yu(l)/Yu(c);return Cf(jue,l[0],l[3],u,-u,0,0,0),X5(s,0,s.length,a,jue,o),B_(i,t)(s,o,a)}:B_(i,t);return this.applyTransform(r),this}};function yE(n){let e;return"XY"==n?e=2:"XYZ"==n||"XYM"==n?e=3:"XYZM"==n&&(e=4),e}const A6=class xbt extends $ue{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return rue(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return or()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=yE(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){or()}setLayout(e,t,i){let r;if(e)r=yE(e);else{for(let s=0;s<i;++s){if(0===t.length)return this.layout="XY",void(this.stride=2);t=t[0]}r=t.length,e=function Mbt(n){let e;return 2==n?e="XY":3==n?e="XYZ":4==n&&(e="XYZM"),e}(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();dO(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){void 0===t&&(t=e),i||(i=u6(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();(function Cbt(n,e,t,i,r,s,o,a){a=a||[];const c=o[0],l=o[1];let u=0;for(let f=e;f<t;f+=i){const g=n[f+1]-l;a[u++]=c+r*(n[f]-c),a[u++]=l+s*g;for(let _=f+2;_<f+i;++_)a[u++]=n[_]}a&&a.length!=u&&(a.length=u)})(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();Wue(i,0,i.length,r,e,t,i),this.changed()}}};function que(n,e,t,i,r,s,o){const a=n[e],c=n[e+1],l=n[t]-a,u=n[t+1]-c;let f;if(0===l&&0===u)f=e;else{const p=((r-a)*l+(s-c)*u)/(l*l+u*u);if(p>1)f=t;else{if(p>0){for(let g=0;g<i;++g)o[g]=xf(n[e+g],n[t+g],p);return void(o.length=i)}f=e}}for(let p=0;p<i;++p)o[p]=n[f+p];o.length=i}function pO(n,e,t,i,r){let s=n[e],o=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],c=n[e+1],l=bf(s,o,a,c);l>r&&(r=l),s=a,o=c}return r}function gO(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=pO(n,e,a,i,r),e=a}return r}function mO(n,e,t,i,r,s,o,a,c,l,u){if(e==t)return l;let f,p;if(0===r){if(p=bf(o,a,n[e],n[e+1]),p<l){for(f=0;f<i;++f)c[f]=n[e+f];return c.length=i,p}return l}u=u||[NaN,NaN];let g=e+i;for(;g<t;)if(que(n,g-i,g,i,o,a,u),p=bf(o,a,u[0],u[1]),p<l){for(l=p,f=0;f<i;++f)c[f]=u[f];c.length=i,g+=i}else g+=i*Math.max((Math.sqrt(p)-Math.sqrt(l))/r|0,1);if(s&&(que(n,t-i,e,i,o,a,u),p=bf(o,a,u[0],u[1]),p<l)){for(l=p,f=0;f<i;++f)c[f]=u[f];c.length=i}return l}function AO(n,e,t,i,r,s,o,a,c,l,u){u=u||[NaN,NaN];for(let f=0,p=t.length;f<p;++f){const g=t[f];l=mO(n,e,g,i,r,s,o,a,c,l,u),e=g}return l}function Kue(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}function wE(n,e,t,i){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<i;++a)n[e++]=o[a]}return e}function vO(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=wE(n,e,t[o],i);r[s++]=c,e=c}return r.length=s,r}function CE(n,e,t,i,r,s,o){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)s[o++]=n[e],s[o++]=n[e+1];return o}const c=new Array(a);c[0]=1,c[a-1]=1;const l=[e,t-i];let u=0;for(;l.length>0;){const f=l.pop(),p=l.pop();let g=0;const _=n[p],y=n[p+1],w=n[f],C=n[f+1];for(let x=p+i;x<f;x+=i){const I=gCt(n[x],n[x+1],_,y,w,C);I>g&&(u=x,g=I)}g>r&&(c[(u-e)/i]=1,p+i<u&&l.push(p,u),u+i<f&&l.push(u,f))}for(let f=0;f<a;++f)c[f]&&(s[o++]=n[e+f*i],s[o++]=n[e+f*i+1]);return o}function Y5(n,e){return e*Math.round(n/e)}function Ibt(n,e,t,i,r,s,o){if(e==t)return o;let l,u,a=Y5(n[e],r),c=Y5(n[e+1],r);e+=i,s[o++]=a,s[o++]=c;do{if(l=Y5(n[e],r),u=Y5(n[e+1],r),(e+=i)==t)return s[o++]=l,s[o++]=u,o}while(l==a&&u==c);for(;e<t;){const f=Y5(n[e],r),p=Y5(n[e+1],r);if(e+=i,f==l&&p==u)continue;const g=l-a,_=u-c,y=f-a,w=p-c;g*w==_*y&&(g<0&&y<g||g==y||g>0&&y>g)&&(_<0&&w<_||_==w||_>0&&w>_)?(l=f,u=p):(s[o++]=l,s[o++]=u,a=l,c=u,l=f,u=p)}return s[o++]=l,s[o++]=u,o}function Yue(n,e,t,i,r,s,o,a){for(let c=0,l=t.length;c<l;++c){const u=t[c];o=Ibt(n,e,u,i,r,s,o),a.push(o),e=u}return o}function v6(n,e,t,i,r){r=void 0!==r?r:[];let s=0;for(let o=e;o<t;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function k_(n,e,t,i,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=t[o];r[s++]=v6(n,e,c,i,r[s]),e=c}return r.length=s,r}function _O(n,e,t,i,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=t[o];r[s++]=1===c.length&&c[0]===e?[]:k_(n,e,c,i,r[s]),e=c[c.length-1]}return r.length=s,r}function Zue(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=o*a-s*c,s=a,o=c}return r/2}function Jue(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=Zue(n,e,a,i),e=a}return r}class bE extends A6{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}clone(){return new bE(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<U5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(pO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),mO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return Zue(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return v6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=CE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new bE(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wE(this.flatCoordinates,0,e,this.stride),this.changed()}}const e0e=bE;class yO extends A6{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new yO(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=bf(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let c=0;c<a;++c)i[c]=s[c];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return KS(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Vz(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Kue(this.flatCoordinates,0,e),this.changed()}}const u4=yO;function Fbt(n,e,t,i,r){return!Gz(r,function(o){return!Z5(n,e,t,i,o[0],o[1])})}function Z5(n,e,t,i,r,s){let o=0,a=n[t-i],c=n[t-i+1];for(;e<t;e+=i){const l=n[e],u=n[e+1];c<=s?u>s&&(l-a)*(s-c)-(r-a)*(u-c)>0&&o++:u<=s&&(l-a)*(s-c)-(r-a)*(u-c)<0&&o--,a=l,c=u}return 0!==o}function wO(n,e,t,i,r,s){if(0===t.length||!Z5(n,e,t[0],i,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(Z5(n,t[o-1],t[o],i,r,s))return!1;return!0}function t0e(n,e,t,i,r,s,o){let a,c,l,u,f,p,g;const _=r[s+1],y=[];for(let x=0,M=t.length;x<M;++x){const T=t[x];for(u=n[T-i],p=n[T-i+1],a=e;a<T;a+=i)f=n[a],g=n[a+1],(_<=p&&g<=_||p<=_&&_<=g)&&(l=(_-p)/(g-p)*(f-u)+u,y.push(l)),u=f,p=g}let w=NaN,C=-1/0;for(y.sort(N5),u=y[0],a=1,c=y.length;a<c;++a){f=y[a];const x=Math.abs(f-u);x>C&&(l=(u+f)/2,wO(n,e,t,i,l,_)&&(w=l,C=x)),u=f}return isNaN(w)&&(w=r[s]),o?(o.push(w,_,C),o):[w,_,C]}function n0e(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}function xE(n,e,t,i,r){const s=aue([1/0,1/0,-1/0,-1/0],n,e,t,i);return!!zl(r,s)&&(!!(Jg(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3])||n0e(n,e,t,i,function(o,a){return function fCt(n,e,t){let i=!1;const r=Uz(n,e),s=Uz(n,t);if(1===r||1===s)i=!0;else{const o=n[0],a=n[1],c=n[2],l=n[3],p=t[0],g=t[1],_=(g-e[1])/(p-e[0]);let y,w;!!(2&s)&&!(2&r)&&(y=p-(g-l)/_,i=y>=o&&y<=c),!i&&!!(4&s)&&!(4&r)&&(w=g-(p-c)*_,i=w>=a&&w<=l),!i&&!!(8&s)&&!(8&r)&&(y=p-(g-a)/_,i=y>=o&&y<=c),!i&&16&s&&!(16&r)&&(w=g-(p-o)*_,i=w>=a&&w<=l)}return i}(r,o,a)}))}function i0e(n,e,t,i,r){return!!(xE(n,e,t,i,r)||Z5(n,e,t,i,r[0],r[1])||Z5(n,e,t,i,r[0],r[3])||Z5(n,e,t,i,r[2],r[1])||Z5(n,e,t,i,r[2],r[3]))}function r0e(n,e,t,i,r){if(!i0e(n,e,t[0],i,r))return!1;if(1===t.length)return!0;for(let s=1,o=t.length;s<o;++s)if(Fbt(n,t[s-1],t[s],i,r)&&!xE(n,t[s-1],t[s],i,r))return!1;return!0}function Obt(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function CO(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=(a-s)*(c+o),s=a,o=c}return 0===r?void 0:r>0}function s0e(n,e,t,i,r){r=void 0!==r&&r;for(let s=0,o=t.length;s<o;++s){const a=t[s],c=CO(n,e,a,i);if(0===s){if(r&&c||!r&&!c)return!1}else if(r&&!c||!r&&c)return!1;e=a}return!0}function bO(n,e,t,i,r){r=void 0!==r&&r;for(let s=0,o=t.length;s<o;++s){const a=t[s],c=CO(n,e,a,i);(0===s?r&&c||!r&&!c:r&&!c||!r&&c)&&Obt(n,e,a,i),e=a}return e}function o0e(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s)e=bO(n,e,t[s],i,r);return e}class J5 extends A6{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==t&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?qu(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new J5(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<U5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(gO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return wO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return Jue(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),bO(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,k_(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=u6(this.getExtent());this.flatInteriorPoint_=t0e(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new u4(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new e0e(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const c=i[o],l=new e0e(t.slice(s,c),e);r.push(l),s=c}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;s0e(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=bO(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=Yue(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new J5(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return r0e(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=vO(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const ep=J5;function a0e(n){const e=n[0],t=n[1],i=n[2],r=n[3],s=[e,t,e,r,i,r,i,t,e,t];return new J5(s,"XY",[s.length])}function c0e(n,e,t){e=e||32;const i=n.getStride(),r=n.getLayout(),s=n.getCenter(),o=i*(e+1),a=new Array(o);for(let u=0;u<o;u+=i){a[u]=0,a[u+1]=0;for(let f=2;f<i;f++)a[u+f]=s[f]}const l=new J5(a,r,[a.length]);return function Vbt(n,e,t,i){const r=n.getFlatCoordinates(),s=n.getStride(),o=r.length/s-1,a=i||0;for(let c=0;c<=o;++c){const l=c*s,u=a+2*h6(c,o)*Math.PI/o;r[l]=e[0]+t*Math.cos(u),r[l+1]=e[1]+t*Math.sin(u)}n.changed()}(l,s,n.getRadius(),t),l}function ME(n,e){setTimeout(function(){n(e)},0)}function jbt(n){return!(n.sourceCenter&&n.targetCenter&&!Zu(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function MO(n,e,t,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=n[0]*s-n[1]*o,c=n[1]*s+n[0]*o;return a+=(e[0]/2-t[0])*i,c+=(t[1]-e[1]/2)*i,o=-o,[a*s-c*o,c*s+a*o]}const _6=class Ubt extends nh{constructor(e){super(),e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.projection_=aO(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,e.projection&&kue(),e.center&&(e.center=oc(e.center)),e.extent&&(e.extent=m6(e.extent)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in Ju)delete t[a];this.setProperties(t,!0);const i=function Qbt(n){let e,t,i,o=void 0!==n.minZoom?n.minZoom:0,a=void 0!==n.maxZoom?n.maxZoom:28;const c=void 0!==n.zoomFactor?n.zoomFactor:2,l=void 0!==n.multiWorld&&n.multiWorld,u=void 0===n.smoothResolutionConstraint||n.smoothResolutionConstraint,f=void 0!==n.showFullExtent&&n.showFullExtent,p=aO(n.projection,"EPSG:3857"),g=p.getExtent();let _=n.constrainOnlyCenter,y=n.extent;if(!l&&!y&&p.isGlobal()&&(_=!1,y=g),void 0!==n.resolutions){const w=n.resolutions;t=w[o],i=void 0!==w[a]?w[a]:w[w.length-1],e=n.constrainResolution?function Abt(n,e,t,i){return e=void 0===e||e,function(r,s,o,a){if(void 0!==r){const c=n[0],l=n[n.length-1],u=t?lO(c,t,o,i):c;if(a)return e?uO(r,u,l):sc(r,l,u);const f=Math.min(u,r),p=Math.floor(kz(n,f,s));return n[p]>u&&p<n.length-1?n[p+1]:n[p]}}}(w,u,!_&&y,f):Uue(t,i,u,!_&&y,f)}else{const C=(g?Math.max(_a(g),Yu(g)):360*$5.degrees/p.getMetersPerUnit())/256/Math.pow(2,0),x=C/Math.pow(2,28);t=n.maxResolution,void 0!==t?o=0:t=C/Math.pow(c,o),i=n.minResolution,void 0===i&&(i=void 0!==n.maxZoom?void 0!==n.maxResolution?t/Math.pow(c,a):C/Math.pow(c,a):x),a=o+Math.floor(Math.log(t/i)/Math.log(c)),i=t/Math.pow(c,a-o),e=n.constrainResolution?function vbt(n,e,t,i,r,s){return i=void 0===i||i,t=void 0!==t?t:0,function(o,a,c,l){if(void 0!==o){const u=r?lO(e,r,c,s):e;if(l)return i?uO(o,u,t):sc(o,t,u);const f=1e-9,p=Math.ceil(Math.log(e/u)/Math.log(n)-f),g=-a*(.5-f)+.5,_=Math.min(u,o),y=Math.floor(Math.log(e/_)/Math.log(n)+g),w=Math.max(p,y);return sc(e/Math.pow(n,w),t,u)}}}(c,t,i,u,!_&&y,f):Uue(t,i,u,!_&&y,f)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:c}}(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=function Gbt(n){if(void 0!==n.extent)return Vue(n.extent,n.constrainOnlyCenter,void 0===n.smoothExtentConstraint||n.smoothExtentConstraint);const e=aO(n.projection,"EPSG:3857");if(!0!==n.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Vue(t,!1,!1)}return mbt}(e),s=i.constraint,o=function Wbt(n){if(void 0===n.enableRotation||n.enableRotation){const t=n.constrainRotation;return void 0===t||!0===t?function ybt(n){return n=n||W5(5),function(e,t){return t?e:void 0!==e?Math.abs(e)<=n?0:e:void 0}}():!1===t?Gue:"number"==typeof t?function _bt(n){const e=2*Math.PI/n;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(t):Gue}return hO}(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenter();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution();this.setCenterInternal([i[0]+s/2*(r[3]-t[3]+t[1]-r[1]),i[1]-s/2*(r[0]-t[0]+t[2]-r[2])])}}getUpdatedOptions_(e){const t=this.getProperties();return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=oc(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=oc(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let i,t=arguments.length;t>1&&"function"==typeof arguments[t-1]&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),void 0!==u.zoom?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),void 0!==u.rotation&&this.setRotation(u.rotation)}if(r===t)return void(i&&ME(i,!0));let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,c=this.targetRotation_;const l=[];for(;r<t;++r){const u=arguments[r],f={start:s,complete:!1,anchor:u.anchor,duration:void 0!==u.duration?u.duration:1e3,easing:u.easing||fO,callback:i};if(u.center&&(f.sourceCenter=o,f.targetCenter=u.center.slice(),o=f.targetCenter),void 0!==u.zoom?(f.sourceResolution=a,f.targetResolution=this.getResolutionForZoom(u.zoom),a=f.targetResolution):u.resolution&&(f.sourceResolution=a,f.targetResolution=u.resolution,a=f.targetResolution),void 0!==u.rotation){f.sourceRotation=c;const p=h6(u.rotation-c+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=c+p,c=f.targetRotation}jbt(f)?f.complete=!0:s+=f.duration,l.push(f)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let e;this.setHint(0,-this.hints_[0]);for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&ME(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const c=r[o];if(c.complete)continue;const l=e-c.start;let u=c.duration>0?l/c.duration:1;u>=1?(c.complete=!0,u=1):s=!1;const f=c.easing(u);if(c.sourceCenter){const p=c.sourceCenter[0],g=c.sourceCenter[1],_=c.targetCenter[0],y=c.targetCenter[1];this.nextCenter_=c.targetCenter,this.targetCenter_=[p+f*(_-p),g+f*(y-g)]}if(c.sourceResolution&&c.targetResolution){const p=1===f?c.targetResolution:c.sourceResolution+f*(c.targetResolution-c.sourceResolution);if(c.anchor){const g=this.getViewportSize_(this.getRotation()),_=this.constraints_.resolution(p,0,g,!0);this.targetCenter_=this.calculateCenterZoom(_,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=p,this.applyTargetState_(!0)}if(void 0!==c.sourceRotation&&void 0!==c.targetRotation){const p=1===f?h6(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+f*(c.targetRotation-c.sourceRotation);if(c.anchor){const g=this.constraints_.rotation(p,!0);this.targetCenter_=this.calculateCenterRotate(g,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=p}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(s){this.animations_[i]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&ME(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return void 0!==r&&(i=[r[0]-t[0],r[1]-t[1]],qz(i,e-this.getRotation()),function CCt(n,e){n[0]+=+e[0],n[1]+=+e[1]}(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),s=this.getResolution();return void 0!==r&&void 0!==s&&(i=[t[0]-e*(t[0]-r[0])/s,t[1]-e*(t[1]-r[1])/s]),i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&F_(e,this.getProjection())}getCenterInternal(){return this.get(Ju.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){return _E(this.calculateExtentInternal(e),this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Ts(t,1);const i=this.getResolution();Ts(void 0!==i,2);const r=this.getRotation();return Ts(void 0!==r,3),Qz(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Ju.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(m6(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=_a(e)/t[0],r=Yu(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=Math.log(t/this.minResolution_)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get(Ju.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),s=Math.log(i/this.minResolution_)/t;return function(o){return Math.log(i/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=MO(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,i)}return{center:r.slice(0),projection:void 0!==e?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getZoom(){let e;const t=this.getResolution();return void 0!==t&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let i,r,t=this.minZoom_||0;if(this.resolutions_){const s=kz(this.resolutions_,e,1);t=s,i=this.resolutions_[s],r=s==this.resolutions_.length-1?2:i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=sc(Math.floor(e),0,this.resolutions_.length-2);return this.resolutions_[t]/Math.pow(this.resolutions_[t]/this.resolutions_[t+1],sc(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Ts(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,24),Array.isArray(e))Ts(!jz(e),25),i=a0e(m6(e,this.getProjection()));else if("Circle"===e.getType()){const r=m6(e.getExtent(),this.getProjection());i=a0e(r),i.rotate(this.getRotation(),u6(r))}else{const r=g6();i=r?e.clone().transform(r,this.getProjection()):e}this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,c=1/0,l=-1/0,u=-1/0;for(let f=0,p=s.length;f<p;f+=o){const g=s[f]*i-s[f+1]*r,_=s[f]*r+s[f+1]*i;a=Math.min(a,g),c=Math.min(c,_),l=Math.max(l,g),u=Math.max(u,_)}return[a,c,l,u]}fitInternal(e,t){let i=(t=t||{}).size;i||(i=this.getViewportSizeMinusPadding_());const r=void 0!==t.padding?t.padding:[0,0,0,0],s=void 0!==t.nearest&&t.nearest;let o;o=void 0!==t.minResolution?t.minResolution:void 0!==t.maxZoom?this.getResolutionForZoom(t.maxZoom):0;const a=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);c=isNaN(c)?o:Math.max(c,o),c=this.getConstrainedResolution(c,s?0:1);const l=this.getRotation(),u=Math.sin(l),f=Math.cos(l),p=u6(a);p[0]+=(r[1]-r[3])/2*c,p[1]+=(r[0]-r[2])/2*c;const y=this.getConstrainedCenter([p[0]*f-p[1]*u,p[1]*f+p[0]*u],c),w=t.callback?t.callback:V5;void 0!==t.duration?this.animateInternal({resolution:c,center:y,duration:t.duration,easing:t.easing},w):(this.targetResolution_=c,this.targetCenter_=y,this.applyTargetState_(!1,!0),ME(w,!0))}centerOn(e,t,i){this.centerOnInternal(oc(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(MO(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),c=MO(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,i);s=[e[0]-c[0],e[1]-c[1]]}return s}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(e){const t=F_(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&oc(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=oc(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&oc(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(Ju.ROTATION)!==r&&this.set(Ju.ROTATION,r),this.get(Ju.RESOLUTION)!==o&&(this.set(Ju.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Ju.CENTER)||!Zu(this.get(Ju.CENTER),a))&&this.set(Ju.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=void 0!==e?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),c=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(0===e&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=c,void this.applyTargetState_();i=i||(0===e?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Zu(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:c,resolution:a,duration:e,easing:cm,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(e,t,i){i=i&&oc(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.setHint(1,-1),this.resolveConstraints(e,t,i)}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}},SO=class $bt extends nh{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){Xz(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&Xz(this.element);for(let t=0,i=this.listenerKeys.length;t<i;++t)Ia(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==V5&&this.listenerKeys.push($s(e,"postrender",this.render,this)),e.render())}render(e){}setTarget(e){this.target_="string"==typeof e?document.getElementById(e):e}},Kbt=class qbt extends SO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==e.collapsible,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const t=void 0!==e.className?e.className:"ol-attribution",i=void 0!==e.tipLabel?e.tipLabel:"Attributions",r=void 0!==e.expandClassName?e.expandClassName:t+"-expand",s=void 0!==e.collapseLabel?e.collapseLabel:"\u203a",o=void 0!==e.collapseClassName?e.collapseClassName:t+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=void 0!==e.label?e.label:"i";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener("click",this.handleClick_.bind(this),!1);const u=this.element;u.className=t+" "+cE+" "+Kz+(this.collapsed_&&this.collapsible_?" "+wue:"")+(this.collapsible_?"":" ol-uncollapsible"),u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t={},i=[];let r=!0;const s=e.layerStatesArray;for(let o=0,a=s.length;o<a;++o){const c=s[o];if(!$z(c,e.viewState))continue;const l=c.layer.getSource();if(!l)continue;const u=l.getAttributions();if(!u)continue;const f=u(e);if(f)if(r=r&&!1!==l.getAttributionsCollapsible(),Array.isArray(f))for(let p=0,g=f.length;p<g;++p)f[p]in t||(i.push(f[p]),t[f[p]]=!0);else f in t||(i.push(f),t[f]=!0)}return this.overrideCollapsible_||this.setCollapsible(r),i}updateElement_(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const t=this.collectSourceAttributions_(e),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!c6(t,this.renderedAttributions_)){!function RCt(n){for(;n.lastChild;)n.removeChild(n.lastChild)}(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(wue),this.collapsed_?Mue(this.collapseLabel_,this.label_):Mue(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}},Ybt=class Xbt extends SO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=void 0!==e.className?e.className:"ol-rotate",i=void 0!==e.label?e.label:"\u21e7",r=void 0!==e.compassClassName?e.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener("click",this.handleClick_.bind(this),!1);const c=this.element;c.className=t+" "+cE+" "+Kz,c.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(aE)}handleClick_(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();void 0!==i&&(this.duration_>0&&i%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:cm}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(aE);s||0!==i?s&&0!==i&&this.element.classList.remove(aE):this.element.classList.add(aE)}this.label_.style.transform=r}this.rotation_=i}},Jbt=class Zbt extends SO{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=void 0!==e.className?e.className:"ol-zoom",i=void 0!==e.delta?e.delta:1,r=void 0!==e.zoomInClassName?e.zoomInClassName:t+"-in",s=void 0!==e.zoomOutClassName?e.zoomOutClassName:t+"-out",o=void 0!==e.zoomInLabel?e.zoomInLabel:"+",a=void 0!==e.zoomOutLabel?e.zoomOutLabel:"\u2013",c=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",l=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=c,u.appendChild("string"==typeof o?document.createTextNode(o):o),u.addEventListener("click",this.handleClick_.bind(this,i),!1);const f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=l,f.appendChild("string"==typeof a?document.createTextNode(a):a),f.addEventListener("click",this.handleClick_.bind(this,-i),!1);const g=this.element;g.className=t+" "+cE+" "+Kz,g.appendChild(u),g.appendChild(f),this.duration_=void 0!==e.duration?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(void 0!==r){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:cm})):i.setZoom(s)}}};function EO(n,e,t,i){const r=n.getZoom();if(void 0===r)return;const s=n.getConstrainedZoom(r+e),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:void 0!==i?i:250,easing:cm})}const lm=class txt extends nh{constructor(e){super(),e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set("active",e)}setMap(e){this.map_=e}},rxt=class ixt extends lm{constructor(e){super(),this.delta_=(e=e||{}).delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}handleEvent(e){let t=!1;if(e.type==Ns.DBLCLICK){const i=e.originalEvent,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_;EO(e.map.getView(),o,s,this.duration_),i.preventDefault(),t=!0}return!t}};function TO(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return[t/e,i/e]}const Tf=class sxt extends lm{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ns.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ns.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Ns.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Ns.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};function LO(n){const e=arguments;return function(t){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](t),i);++r);return i}}const axt=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},l0e=function(n){return!n.map.getTargetElement().hasAttribute("tabindex")||function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)}(n)},um=th,u0e=function(n){const e=n.originalEvent;return 0==e.button&&!(tCt&&nCt&&e.ctrlKey)},DO=Xg,h0e=function(n){return n.type==Ns.SINGLECLICK},IO=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},BO=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},f0e=function(n){const e=n.originalEvent,t=e.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t&&!e.target.isContentEditable},EE=function(n){const e=n.originalEvent;return Ts(void 0!==e,56),"mouse"==e.pointerType},d0e=function(n){const e=n.originalEvent;return Ts(void 0!==e,56),e.isPrimary&&0===e.button},uxt=class lxt extends Tf{constructor(e){super({stopDown:Xg}),this.kinetic_=(e=e||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const t=e.condition?e.condition:LO(IO,d0e);this.condition_=e.onFocusOnly?LO(l0e,t):t,this.noKinetic_=!1}handleDragEvent(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const t=this.targetPointers,i=TO(t);if(t.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();(function xCt(n,e){n[0]*=e,n[1]*=e})(r,o.getResolution()),qz(r,o.getRotation()),o.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=t.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),c=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:cm})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},fxt=class hxt extends Tf{constructor(e){e=e||{},super({stopDown:Xg}),this.condition_=e.condition?e.condition:axt,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){if(!EE(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===hO)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);void 0!==this.lastAngle_&&i.adjustRotationInternal(-(o-this.lastAngle_)),this.lastAngle_=o}handleUpEvent(e){return!EE(e)||(e.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(e){return!!(EE(e)&&u0e(e)&&this.condition_(e))&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},pxt=class dxt extends Fz{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new ep([r])}getGeometry(){return this.geometry_}};class RO extends c4{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}const mxt=class gxt extends Tf{constructor(e){super(),this.box_=new pxt((e=e||{}).className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:u0e,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],s=i[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new RO("boxdrag",e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new RO(t?"boxend":"boxcancel",e.coordinate,e)),!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new RO("boxstart",e.coordinate,e)),!0)}onBoxEnd(e){}},vxt=class Axt extends mxt{constructor(e){super({condition:(e=e||{}).condition?e.condition:BO,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:cm})}},yxt=class _xt extends lm{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return IO(t)&&f0e(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128}handleEvent(e){let t=!1;if("keydown"==e.type){const i=e.originalEvent,r=i.keyCode;if(this.condition_(e)&&(40==r||37==r||39==r||38==r)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let c=0,l=0;40==r?l=-a:37==r?c=-a:39==r?c=a:l=a;const u=[c,l];qz(u,o.getRotation()),function nxt(n,e,t){const i=n.getCenterInternal();i&&n.animateInternal({duration:void 0!==t?t:250,easing:wbt,center:n.getConstrainedCenter([i[0]+e[0],i[1]+e[1]])})}(o,u,this.duration_),i.preventDefault(),t=!0}}return!t}},Cxt=class wxt extends lm{constructor(e){super(),this.condition_=(e=e||{}).condition?e.condition:f0e,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100}handleEvent(e){let t=!1;if("keydown"==e.type||"keypress"==e.type){const i=e.originalEvent,r=i.charCode;if(this.condition_(e)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){const s=e.map,o=r=="+".charCodeAt(0)?this.delta_:-this.delta_;EO(s.getView(),o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}},Sxt=class Mxt extends lm{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==e.maxDelta?e.maxDelta:1,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=void 0!==e.constrainResolution&&e.constrainResolution;const t=e.condition?e.condition:um;this.condition_=e.onFocusOnly?LO(l0e,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||"wheel"!==e.type)return!0;const i=e.map,r=e.originalEvent;let s;if(r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),"wheel"==e.type&&(s=r.deltaY,eCt&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=eue),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),0===s)return!1;this.lastDelta_=s;const o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if("trackpad"===this.mode_&&!a.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const c=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-sc(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),EO(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},Txt=class Ext extends Tf{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=Xg),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.lastAngle_){const u=s-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=u}this.lastAngle_=s;const o=e.map,a=o.getView();if(a.getConstraints().rotation===hO)return;const c=o.getViewport().getBoundingClientRect(),l=TO(this.targetPointers);l[0]-=c.left,l[1]-=c.top,this.anchor_=o.getCoordinateFromPixelInternal(l),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_))}handleUpEvent(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}},Dxt=class Lxt extends Tf{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=Xg),super(t),this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);void 0!==this.lastDistance_&&(t=this.lastDistance_/a),this.lastDistance_=a;const c=e.map,l=c.getView();1!=t&&(this.lastScaleDelta_=t);const u=c.getViewport().getBoundingClientRect(),f=TO(this.targetPointers);f[0]-=u.left,f[1]-=u.top,this.anchor_=c.getCoordinateFromPixelInternal(f),c.render(),l.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){return!(this.targetPointers.length<2)||(e.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}};function p0e(n){return n[0]>0&&n[1]>0}function h4(n,e){return Array.isArray(n)?n:(void 0===e?e=[n,n]:(e[0]=n,e[1]=n),e)}function g0e(n){n instanceof sE?n.setMapInternal(null):n instanceof fE&&n.getLayers().forEach(g0e)}function m0e(n,e){if(n instanceof sE)n.setMapInternal(e);else if(n instanceof fE){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)m0e(t[i],e)}}const kxt=class Rxt extends nh{constructor(e){super();const t=function Fxt(n){let e=null;void 0!==n.keyboardEventTarget&&(e="string"==typeof n.keyboardEventTarget?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&"function"==typeof n.layers.getLayers?n.layers:new fE({layers:n.layers});let r,s,o;return t.layergroup=i,t.target=n.target,t.view=n.view instanceof _6?n.view:new _6,void 0!==n.controls&&(Array.isArray(n.controls)?r=new N1(n.controls.slice()):(Ts("function"==typeof n.controls.getArray,47),r=n.controls)),void 0!==n.interactions&&(Array.isArray(n.interactions)?s=new N1(n.interactions.slice()):(Ts("function"==typeof n.interactions.getArray,48),s=n.interactions)),void 0!==n.overlays?Array.isArray(n.overlays)?o=new N1(n.overlays.slice()):(Ts("function"==typeof n.overlays.getArray,49),o=n.overlays):o=new N1,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}(e=e||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:eue,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=t.controls||function ext(n){n=n||{};const e=new N1;return(void 0===n.zoom||n.zoom)&&e.push(new Jbt(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&e.push(new Ybt(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&e.push(new Kbt(n.attributionOptions)),e}(),this.interactions=t.interactions||function Ixt(n){n=n||{};const e=new N1,t=new class bxt{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&e.push(new fxt),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&e.push(new rxt({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&e.push(new uxt({onFocusOnly:n.onFocusOnly,kinetic:t})),(void 0===n.pinchRotate||n.pinchRotate)&&e.push(new Txt),(void 0===n.pinchZoom||n.pinchZoom)&&e.push(new Dxt({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(e.push(new yxt),e.push(new Cxt({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&e.push(new Sxt({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&e.push(new vxt({duration:n.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new class qCt extends class jCt{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Yg(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Ts(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=dE&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return 0===this.elements_.length}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,s=t[e],o=i[e],a=e;for(;e<r>>1;){const c=this.getLeftChildIndex_(e),l=this.getRightChildIndex_(e),u=l<r&&i[l]<i[c]?l:c;t[e]=t[u],i[e]=i[u],e=u}t[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,s=i[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(!(r[a]>o))break;i[t]=i[a],r[t]=r[a],t=a}i[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const s=t.length;let o,a,c;for(a=0;a<s;++a)o=t[a],c=e(o),c==dE?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=c,t[r++]=o);t.length=r,i.length=r,this.heapify_()}}{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener("change",this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(2===i||3===i||4===i){3!==i&&t.removeEventListener("change",this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r,s,o,i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),0===r&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof _6)&&e.view.then(function(r){i.setView(new _6(r))}),this.controls.addEventListener("add",function(r){r.element.setMap(this)}.bind(this)),this.controls.addEventListener("remove",function(r){r.element.setMap(null)}.bind(this)),this.interactions.addEventListener("add",function(r){r.element.setMap(this)}.bind(this)),this.interactions.addEventListener("remove",function(r){r.element.setMap(null)}.bind(this)),this.overlays_.addEventListener("add",function(r){this.addOverlayInternal_(r.element)}.bind(this)),this.overlays_.addEventListener("remove",function(r){const s=r.element.getId();void 0!==s&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}.bind(this)),this.controls.forEach(function(r){r.setMap(this)}.bind(this)),this.interactions.forEach(function(r){r.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){m0e(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,!1!==i.checkWrapped,t,null,void 0!==i.layerFilter?i.layerFilter:th,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];return function t(i){i.forEach(function(r){r instanceof fE?t(r.getLayers()):e.push(r)})}(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,void 0!==(t=void 0!==t?t:{}).hitTolerance?t.hitTolerance:0,!1!==t.checkWrapped,void 0!==t.layerFilter?t.layerFilter:th,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const t=this.viewport_.getBoundingClientRect(),i="changedTouches"in e?e.changedTouches[0]:e;return[i.clientX-t.left,i.clientY-t.top]}getTarget(){return this.get("target")}getTargetElement(){const e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null}getCoordinateFromPixel(e){return F_(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?d2(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(e){const t=this.getLayerGroup();if(e instanceof N1)return void t.setLayers(e);const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=oc(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?d2(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return function XCt(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return dE;const s=n.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){const i=new Ef(t=t||e.type,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if("pointerdown"===i||"wheel"===i||"keydown"===i){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e)){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()===this&&o.getActive()&&this.getTargetElement()&&(!o.handleEvent(e)||e.propagationStopped))break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[0]||o[1]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new sm("loadend",this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new sm("loadstart",this,e))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,i=this.targetChangeHandlerKeys_.length;t<i;++t)Ia(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Xz(this.viewport_)}const e=this.getTargetElement();if(e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new VCt(this)),this.mapBrowserEventHandler_=new WCt(this,this.moveTolerance_);for(const r in Ns)this.mapBrowserEventHandler_.addEventListener(Ns[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!tue&&{passive:!1});const t=this.getOwnerDocument().defaultView,i=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[$s(i,"keydown",this.handleBrowserEvent,this),$s(i,"keypress",this.handleBrowserEvent,this),$s(t,"resize",this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ia(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ia(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=$s(e,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=$s(e,"change",this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ia),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new d6("addlayer",e)),this.layerGroupPropertyListenerKeys_=[$s(e,"propertychange",this.render,this),$s(e,"change",this.render,this),$s(e,"addlayer",this.handleLayerAdd_,this),$s(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){g0e(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(void 0!==t&&p0e(t)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Qz(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:br(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const c=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=Qz(a.nextCenter,a.nextResolution,c,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!jz(this.previousExtent_)&&!b_(s.extent,this.previousExtent_))&&(this.dispatchEvent(new sm("movestart",this,r)),this.previousExtent_=G5(this.previousExtent_)),this.previousExtent_&&!s.viewHints[0]&&!s.viewHints[1]&&!b_(s.extent,this.previousExtent_)&&(this.dispatchEvent(new sm("moveend",this,s)),iue(s.extent,this.previousExtent_))),this.dispatchEvent(new sm("postrender",this,s)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new d6("removelayer",t)),this.set("layergroup",e)}setSize(e){this.set("size",e)}setTarget(e){this.set("target",e)}setView(e){if(!e||e instanceof _6)return void this.set("view",e);this.set("view",new _6);const t=this;e.then(function(i){t.setView(new _6(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),r=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(r)&&!isNaN(s)&&(t=[r,s],!p0e(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(t),this.updateViewportSize_()}updateViewportSize_(){const e=this.getView();if(e){let t;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(t=[parseInt(i.width,10),parseInt(i.height,10)]),e.setViewportSize(t)}}};var A0e=Me(2402);class FO{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=h4(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new FO({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return or()}getImage(e){return or()}getHitDetectionImage(){return or()}getPixelRatio(e){return 1}getImageState(){return or()}getImageSize(){return or()}getOrigin(){return or()}getSize(){return or()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=h4(e)}listenImageChange(e){or()}load(){or()}unlistenImageChange(e){or()}}const v0e=FO;function ih(n){return Array.isArray(n)?pue(n):n}class kO extends v0e{constructor(e){super({opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new kO({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const i=this.renderOptions_,r=l4(i.size*e,i.size*e);this.draw_(i,r,e),t=r.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return 2}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(0===t||this.points_===1/0||"bevel"!==e&&"miter"!==e)return t;let r=this.radius_,s=void 0===this.radius2_?r:this.radius2_;if(r<s){const F=r;r=s,s=F}const a=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),c=s*Math.sin(a),u=r-Math.sqrt(s*s-c*c),f=Math.sqrt(c*c+u*u),p=f/c;if("miter"===e&&p<=i)return p*t;const g=t/2/p,_=t/2*(u/f),w=Math.sqrt((r+g)*(r+g)+_*_)-r;if(void 0===this.radius2_||"bevel"===e)return 2*w;const C=r*Math.sin(a),M=s-Math.sqrt(r*r-C*C),I=Math.sqrt(C*C+M*M)/C;return I<=i?2*Math.max(w,I*t/2-s-r):2*w}createRenderOptions(){let s,e=im,t=0,i=null,r=0,o=0;this.stroke_&&(s=this.stroke_.getColor(),null===s&&(s=E_),s=ih(s),o=this.stroke_.getWidth(),void 0===o&&(o=1),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=im),t=this.stroke_.getMiterLimit(),void 0===t&&(t=10));const a=this.calculateLineJoinSize_(e,o,t),c=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:s,strokeWidth:o,size:Math.ceil(2*c+a),lineDash:i,lineDashOffset:r,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();null===r&&(r=Mf),t.fillStyle=ih(r),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),i=0;if("string"==typeof t&&(t=iE(t)),null===t?i=1:Array.isArray(t)&&(i=4===t.length?t[3]:1),0===i){const r=l4(e.size,e.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(e,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const c=s+a*o,l=a%2==0?i:r;e.lineTo(l*Math.cos(c),l*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Mf,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}const P_=kO;class PO extends P_{constructor(e){super({points:1/0,fill:(e=e||{radius:5}).fill,radius:e.radius,stroke:e.stroke,scale:void 0!==e.scale?e.scale:1,rotation:void 0!==e.rotation?e.rotation:0,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new PO({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}const y6=PO;class HO{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null}clone(){const e=this.getColor();return new HO({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}const Oo=HO;class zO{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new zO({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const qc=zO;class w6{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=_0e,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new w6({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=_0e,this.geometry_=e}setZIndex(e){this.zIndex_=e}}let OO=null;function Hxt(n,e){if(!OO){const t=new Oo({color:"rgba(255,255,255,0.4)"}),i=new qc({color:"#3399CC",width:1.25});OO=[new w6({image:new y6({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return OO}function NO(){const n={},e=[255,255,255,1],t=[0,153,255,1];return n.Polygon=[new w6({fill:new Oo({color:[255,255,255,.5]})})],n.MultiPolygon=n.Polygon,n.LineString=[new w6({stroke:new qc({color:e,width:5})}),new w6({stroke:new qc({color:t,width:3})})],n.MultiLineString=n.LineString,n.Circle=n.Polygon.concat(n.LineString),n.Point=[new w6({image:new y6({radius:6,fill:new Oo({color:t}),stroke:new qc({color:e,width:1.5})}),zIndex:1/0})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.LineString,n.Point),n}function _0e(n){return n.getGeometry()}const F2=w6;function VO(n,e,t){const i=n;let r=!0,s=!1,o=!1;const a=[GS(i,"load",function(){o=!0,s||e()})];return i.src&&iCt?(s=!0,i.decode().then(function(){r&&e()}).catch(function(c){r&&(o?e():t())})):a.push(GS(i,"error",t)),function(){r=!1,a.forEach(Ia)}}let H_=null;class zxt extends US{constructor(e,t,i,r,s,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=s,this.size_=i,this.src_=t}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&2===this.imageState_){H_||(H_=l4(1,1)),H_.drawImage(this.image_,0,0);try{H_.getImageData(0,0,1,1),this.tainted_=!1}catch{H_=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent("change")}handleImageError_(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=l4(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=VO(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||2!==this.imageState_)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const r=i.getContext("2d");r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=hue(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}class UO extends v0e{constructor(e){super({opacity:void 0!==(e=e||{}).opacity?e.opacity:1,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,declutterMode:e.declutterMode}),this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const o=void 0!==e.img?e.img:null;this.imgSize_=e.imgSize;let a=e.src;Ts(!(void 0!==a&&o),4),Ts(!o||o&&this.imgSize_,5),(void 0===a||0===a.length)&&o&&(a=o.src||br(o)),Ts(void 0!==a&&a.length>0,6);const c=void 0!==e.src?0:2;this.color_=void 0!==e.color?iE(e.color):null,this.iconImage_=function Oxt(n,e,t,i,r,s){let o=rE.get(e,i,s);return o||(o=new zxt(n,e,t,i,r,s),rE.set(e,i,s,o)),o}(o,a,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,c,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==e.size?e.size:null}clone(){const e=this.getScale();return new UO({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(e)?e.slice():e,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!r)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=r[0]),"fraction"==this.anchorYUnits_&&(e[1]*=r[1])}if("top-left"!=this.anchorOrigin_){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+r[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if("top-left"!=this.offsetOrigin_){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=i[0]-t[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(e){this.iconImage_.addEventListener("change",e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener("change",e)}}const y0e=UO;class GO{constructor(e){this.font_=(e=e||{}).font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=h4(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new Oo({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}clone(){const e=this.getScale();return new GO({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=h4(void 0!==e?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Lf=GO;function w0e(n){return new F2({fill:z_(n,""),stroke:O_(n,""),text:Vxt(n),image:Uxt(n)})}function z_(n,e){const t=n[e+"fill-color"];if(t)return new Oo({color:t})}function O_(n,e){const t=n[e+"stroke-width"],i=n[e+"stroke-color"];if(t||i)return new qc({width:t,color:i,lineCap:n[e+"stroke-line-cap"],lineJoin:n[e+"stroke-line-join"],lineDash:n[e+"stroke-line-dash"],lineDashOffset:n[e+"stroke-line-dash-offset"],miterLimit:n[e+"stroke-miter-limit"]})}function Vxt(n){const e=n["text-value"];return e?new Lf({text:e,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:z_(n,"text-"),backgroundFill:z_(n,"text-background-"),stroke:O_(n,"text-"),backgroundStroke:O_(n,"text-background-")}):void 0}function Uxt(n){const e=n["icon-src"],t=n["icon-img"];if(e||t)return new y0e({src:e,img:t,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});const i=n["shape-points"];if(i){const s="shape-";return new P_({points:i,fill:z_(n,s),stroke:O_(n,s),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}const r=n["circle-radius"];if(r){const s="circle-";return new y6({radius:r,fill:z_(n,s),stroke:O_(n,s),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}const Qxt=class Gxt extends sE{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new A0e(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set("renderOrder",e)}setStyle(e){let t;if(void 0===e)t=Hxt;else if(null===e)t=null;else if("function"==typeof e)t=e;else if(e instanceof F2)t=e;else if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s){const o=e[s];r[s]=o instanceof F2?o:w0e(o)}t=r}else t=w0e(e);this.style_=t,this.styleFunction_=null===e?void 0:function Pxt(n){let e;if("function"==typeof n)e=n;else{let t;Array.isArray(n)?t=n:(Ts("function"==typeof n.getZIndex,41),t=[n]),e=function(){return t}}return e}(this.style_),this.changed()}},N_={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},LE=[N_.FILL],C6=[N_.STROKE],np=[N_.BEGIN_PATH],b0e=[N_.CLOSE_PATH],sr=N_,x0e=class Wxt{drawCustom(e,t,i,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}},V_=class jxt extends x0e{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return 1==t?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,c=e.length;a<c;a+=t)r[0]=e[a],r[1]=e[a+1],qS(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,i,r,s,o){const a=this.coordinates;let c=a.length;const l=this.getBufferedMaxExtent();o&&(t+=r);let u=e[t],f=e[t+1];const p=this.tmpCoordinate_;let _,y,w,g=!0;for(_=t+r;_<i;_+=r)p[0]=e[_],p[1]=e[_+1],w=Uz(l,p),w!==y?(g&&(a[c++]=u,a[c++]=f,g=!1),a[c++]=p[0],a[c++]=p[1]):1===w?(a[c++]=p[0],a[c++]=p[1],g=!1):g=!0,u=p[0],f=p[1],y=w;return(s&&g||_===t+r)&&(a[c++]=u,a[c++]=f),c}drawCustomCoordinates_(e,t,i,r,s){for(let o=0,a=i.length;o<a;++o){const c=i[o],l=this.appendFlatLineCoordinates(e,t,c,r,!1,!1);s.push(l),t=c}return t}drawCustom(e,t,i,r){this.beginGeometry(e,t);const s=e.getType(),o=e.getStride(),a=this.coordinates.length;let c,l,u,f,p;switch(s){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),f=[];const g=e.getEndss();p=0;for(let _=0,y=g.length;_<y;++_){const w=[];p=this.drawCustomCoordinates_(c,p,g[_],o,w),f.push(w)}this.instructions.push([sr.CUSTOM,a,f,e,i,_O]),this.hitDetectionInstructions.push([sr.CUSTOM,a,f,e,r||i,_O]);break;case"Polygon":case"MultiLineString":u=[],c="Polygon"==s?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(c,0,e.getEnds(),o,u),this.instructions.push([sr.CUSTOM,a,u,e,i,k_]),this.hitDetectionInstructions.push([sr.CUSTOM,a,u,e,r||i,k_]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),l=this.appendFlatLineCoordinates(c,0,c.length,o,!1,!1),this.instructions.push([sr.CUSTOM,a,l,e,i,v6]),this.hitDetectionInstructions.push([sr.CUSTOM,a,l,e,r||i,v6]);break;case"MultiPoint":c=e.getFlatCoordinates(),l=this.appendFlatPointCoordinates(c,o),l>a&&(this.instructions.push([sr.CUSTOM,a,l,e,i,v6]),this.hitDetectionInstructions.push([sr.CUSTOM,a,l,e,r||i,v6]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),l=this.coordinates.length,this.instructions.push([sr.CUSTOM,a,l,e,i]),this.hitDetectionInstructions.push([sr.CUSTOM,a,l,e,r||i])}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[sr.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[sr.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let t;e.reverse();const i=e.length;let r,s,o=-1;for(t=0;t<i;++t)r=e[t],s=r[0],s==sr.END_GEOMETRY?o=t:s==sr.BEGIN_GEOMETRY&&(r[2]=t,Gwt(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const r=e.getColor();i.fillStyle=ih(r||Mf)}else i.fillStyle=void 0;if(t){const r=t.getColor();i.strokeStyle=ih(r||E_);const s=t.getLineCap();i.lineCap=void 0!==s?s:lE;const o=t.getLineDash();i.lineDash=o?o.slice():x_;const a=t.getLineDashOffset();i.lineDashOffset=a||0;const c=t.getLineJoin();i.lineJoin=void 0!==c?c:im;const l=t.getWidth();i.lineWidth=void 0!==l?l:1;const u=t.getMiterLimit();i.miterLimit=void 0!==u?u:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[sr.SET_FILL_STYLE,t];return"string"!=typeof t&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[sr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;("string"!=typeof i||e.currentFillStyle!=i)&&(void 0!==i&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,c=e.lineWidth,l=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!c6(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=c||e.currentMiterLimit!=l)&&(void 0!==i&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=c,e.currentMiterLimit=l)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[sr.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=iue(this.maxExtent),this.maxLineWidth>0)&&$S(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}},M0e=class Yxt extends V_{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const s=this.state,o=void 0!==s.fillStyle,a=void 0!==s.strokeStyle,c=i.length;this.instructions.push(np),this.hitDetectionInstructions.push(np);for(let l=0;l<c;++l){const u=i[l],f=this.coordinates.length,p=this.appendFlatLineCoordinates(e,t,u,r,!0,!a),g=[sr.MOVE_TO_LINE_TO,f,p];this.instructions.push(g),this.hitDetectionInstructions.push(g),a&&(this.instructions.push(b0e),this.hitDetectionInstructions.push(b0e)),t=u}return o&&(this.instructions.push(LE),this.hitDetectionInstructions.push(LE)),a&&(this.instructions.push(C6),this.hitDetectionInstructions.push(C6)),t}drawCircle(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([sr.SET_FILL_STYLE,Mf]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([sr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getFlatCoordinates(),a=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const l=[sr.CIRCLE,c];this.instructions.push(np,l),this.hitDetectionInstructions.push(np,l),void 0!==i.fillStyle&&(this.instructions.push(LE),this.hitDetectionInstructions.push(LE)),void 0!==i.strokeStyle&&(this.instructions.push(C6),this.hitDetectionInstructions.push(C6)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([sr.SET_FILL_STYLE,Mf]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([sr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(a,0,o,c),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([sr.SET_FILL_STYLE,Mf]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([sr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),c=e.getStride();let l=0;for(let u=0,f=o.length;u<f;++u)l=this.drawFlatCoordinatess_(a,l,o[u],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(0!==e){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=Y5(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)}};function Zxt(n,e,t,i,r){let u,f,p,g,_,y,w,C,x,M,s=t,o=t,a=0,c=0,l=t;for(f=t;f<i;f+=r){const T=e[f],I=e[f+1];void 0!==_&&(x=T-_,M=I-y,g=Math.sqrt(x*x+M*M),void 0!==w&&(c+=p,u=Math.acos((w*x+C*M)/(p*g)),u>n&&(c>a&&(a=c,s=l,o=f),c=0,l=f-r)),p=g,w=x,C=M),_=T,y=I}return c+=g,c>a?[l,f]:[s,o]}const U_={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},eMt={Circle:M0e,Default:V_,Image:class $xt extends V_{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([sr.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([sr.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([sr.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([sr.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},LineString:class Kxt extends V_{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[sr.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([sr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,x_,0],np);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(C6),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([sr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],np);const o=e.getEnds(),a=e.getFlatCoordinates(),c=e.getStride();let l=0;for(let u=0,f=o.length;u<f;++u)l=this.drawFlatCoordinates_(a,l,o[u],c);this.hitDetectionInstructions.push(C6),this.endGeometry(t)}finish(){const e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(C6),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(C6),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(np)}},Polygon:M0e,Text:class Jxt extends V_{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const s=this.textState_;if(""===this.text_||!s||!this.textFillState_&&!this.textStrokeState_)return;const o=this.coordinates;let a=o.length;const c=e.getType();let l=null,u=e.getStride();if("line"!==s.placement||"LineString"!=c&&"MultiLineString"!=c&&"Polygon"!=c&&"MultiPolygon"!=c){let f=s.overflow?null:[];switch(c){case"Point":case"MultiPoint":l=e.getFlatCoordinates();break;case"LineString":l=e.getFlatMidpoint();break;case"Circle":l=e.getCenter();break;case"MultiLineString":l=e.getFlatMidpoints(),u=2;break;case"Polygon":l=e.getFlatInteriorPoint(),s.overflow||f.push(l[2]/this.resolution),u=3;break;case"MultiPolygon":const w=e.getFlatInteriorPoints();l=[];for(let C=0,x=w.length;C<x;C+=3)s.overflow||f.push(w[C+2]/this.resolution),l.push(w[C],w[C+1]);if(0===l.length)return;u=2}const p=this.appendFlatPointCoordinates(l,u);if(p===a)return;if(f&&(p-a)/2!=l.length/u){let w=a/2;f=f.filter((C,x)=>{const M=o[2*(w+x)]===l[x*u]&&o[2*(w+x)+1]===l[x*u+1];return M||--w,M})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let g=s.padding;if(g!=j5&&(s.scale[0]<0||s.scale[1]<0)){let w=s.padding[0],C=s.padding[1],x=s.padding[2],M=s.padding[3];s.scale[0]<0&&(C=-C,M=-M),s.scale[1]<0&&(w=-w,x=-x),g=[w,C,x,M]}const _=this.pixelRatio;this.instructions.push([sr.DRAW_IMAGE,a,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,g==j5?j5:g.map(function(w){return w*_}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const y=1/_;this.hitDetectionInstructions.push([sr.DRAW_IMAGE,a,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,void 0,this.declutterImageWithText_,g,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),this.endGeometry(t)}else{if(!zl(this.getBufferedMaxExtent(),e.getExtent()))return;let f;if(l=e.getFlatCoordinates(),"LineString"==c)f=[l.length];else if("MultiLineString"==c)f=e.getEnds();else if("Polygon"==c)f=e.getEnds().slice(0,1);else if("MultiPolygon"==c){const y=e.getEndss();f=[];for(let w=0,C=y.length;w<C;++w)f.push(y[w][0])}this.beginGeometry(e,t);const p=s.textAlign;let _,g=0;for(let y=0,w=f.length;y<w;++y){if(null==p){const x=Zxt(s.maxAngle,l,g,f[y],u);g=x[0],_=x[1]}else _=f[y];for(let x=g;x<_;x+=u)o.push(l[x],l[x+1]);const C=o.length;g=f[y],this.drawChars_(a,C),a=C}this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||T_,justify:t.justify,textBaseline:t.textBaseline||uE,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,l=U_[r.textBaseline],u=this.textOffsetY_*c,f=this.text_,p=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([sr.DRAW_CHARS,e,t,l,r.overflow,a,r.maxAngle,c,u,s,p*c,f,o,1]),this.hitDetectionInstructions.push([sr.DRAW_CHARS,e,t,l,r.overflow,a,r.maxAngle,1,u,s,p,f,o,1/c])}setTextStyle(e,t){let i,r,s;if(e){const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=ih(o.getColor()||Mf)):(r=null,this.textFillState_=r);const a=e.getStroke();if(a){s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const _=a.getLineDash(),y=a.getLineDashOffset(),w=a.getWidth(),C=a.getMiterLimit();s.lineCap=a.getLineCap()||lE,s.lineDash=_?_.slice():x_,s.lineDashOffset=void 0===y?0:y,s.lineJoin=a.getLineJoin()||im,s.lineWidth=void 0===w?1:w,s.miterLimit=void 0===C?10:C,s.strokeStyle=ih(a.getColor()||E_)}else s=null,this.textStrokeState_=s;i=this.textState_;const c=e.getFont()||Sue;kCt(c);const l=e.getScaleArray();i.overflow=e.getOverflow(),i.font=c,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||uE,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||j5,i.scale=void 0===l?[1,1]:l;const u=e.getOffsetX(),f=e.getOffsetY(),p=e.getRotateWithView(),g=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===u?0:u,this.textOffsetY_=void 0===f?0:f,this.textRotateWithView_=void 0!==p&&p,this.textRotation_=void 0===g?0:g,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:br(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+br(r.fillStyle):""}else this.text_="";this.declutterImageWithText_=t}}},S0e=class tMt{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=void 0!==e?e.toString():"0";let r=this.buildersByZIndex_[i];void 0===r&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];return void 0===s&&(s=new(0,eMt[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s),s}},iMt=class nMt extends X4e{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return or()}getData(e){return null}prepareFrame(e){return or()}renderFrame(e,t){return or()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return function(r,s){const o=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(t,r,s,o)}.bind(this)}forEachFeatureAtCoordinate(e,t,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){2===e.target.getState()&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return 2!=t&&3!=t&&e.addEventListener("change",this.boundHandleImageChange_),0==t&&(e.load(),t=e.getState()),2==t}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},E0e=[];let hm=null;const T0e=class sMt extends iMt{constructor(e){super(e),this.container=null,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){let r;hm||function rMt(){const n=document.createElement("canvas");n.width=1,n.height=1,hm=n.getContext("2d")}(),hm.clearRect(0,0,1,1);try{hm.drawImage(e,t,i,1,1,0,0,1,1),r=hm.getImageData(0,0,1,1).data}catch{return hm=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return"function"==typeof i&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&c6(iE(e.style.backgroundColor),iE(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=l4();const c=o.canvas;s.appendChild(c),a=c.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=Q5(i),s=JS(i),o=ZS(i),a=YS(i);d2(t.coordinateToPixelTransform,r),d2(t.coordinateToPixelTransform,s),d2(t.coordinateToPixelTransform,o),d2(t.coordinateToPixelTransform,a);const c=this.inversePixelTransform;d2(c,r),d2(c,s),d2(c,o),d2(c,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const s=new yue(e,this.inversePixelTransform,i,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_("prerender",e,t)}postRender(e,t){this.dispatchRenderEvent_("postrender",e,t)}getRenderTransform(e,t,i,r,s,o,a){const u=r/t;return Cf(this.tempTransform,s/2,o/2,u,-u,-i,-e[0]+a,-e[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}};function oMt(n,e,t,i,r,s,o,a,c,l,u,f){let p=n[e],g=n[e+1],_=0,y=0,w=0,C=0;function x(){_=p,y=g,p=n[e+=i],g=n[e+1],C+=w,w=Math.sqrt((p-_)*(p-_)+(g-y)*(g-y))}do{x()}while(e<t-i&&C+w<s);let M=0===w?0:(s-C)/w;const T=xf(_,p,M),I=xf(y,g,M),F=e-i,P=C,R=s+a*c(l,r,u);for(;e<t-i&&C+w<R;)x();M=0===w?0:(R-C)/w;const k=xf(_,p,M),W=xf(y,g,M);let re;if(f){const K=[T,I,k,W];dO(K,0,4,2,f,K,K),re=K[0]>K[2]}else re=T>k;const Le=Math.PI,me=[],Q=F+i===e;let he;if(w=0,C=P,p=n[e=F],g=n[e+1],Q)return x(),he=Math.atan2(g-y,p-_),re&&(he+=he>0?-Le:Le),me[0]=[(k+T)/2,(W+I)/2,(R-s)/2,he,r],me;for(let K=0,ae=(r=r.replace(/\n/g," ")).length;K<ae;){x();let fe=Math.atan2(g-y,p-_);if(re&&(fe+=fe>0?-Le:Le),void 0!==he){let ut=fe-he;if(ut+=ut>Le?-2*Le:ut<-Le?2*Le:0,Math.abs(ut)>o)return null}he=fe;const de=K;let ke=0;for(;K<ae;++K){const It=a*c(l,r[re?ae-K-1:K],u);if(e+i<t&&C+w<s+ke+It/2)break;ke+=It}if(K===de)continue;const et=re?r.substring(ae-de,ae-K):r.substring(de,K);M=0===w?0:(s+ke/2-C)/w;const Fe=xf(_,p,M),wt=xf(y,g,M);me.push([Fe,wt,ke/2,fe,et]),s+=ke}return me}function QO(n,e,t,i){let r=n[e],s=n[e+1],o=0;for(let a=e+i;a<t;a+=i){const c=n[a],l=n[a+1];o+=Math.sqrt((c-r)*(c-r)+(l-s)*(l-s)),r=c,s=l}return o}const fm=[1/0,1/0,-1/0,-1/0],b6=[],Df=[],If=[],x6=[];function L0e(n){return n[3].declutterBox}const aMt=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function D0e(n,e){return("start"===e||"end"===e)&&!aMt.test(n)&&(e="start"===e?"left":"right"),U_[e]}function cMt(n,e,t){return t>0&&n.push("\n",""),n.push(e,""),n}const uMt=class lMt{constructor(e,t,i,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,r){const s=e+t+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,c=this.textStates[t],l=this.pixelRatio,u=[c.scale[0]*l,c.scale[1]*l],f=Array.isArray(e),p=c.justify?U_[c.justify]:D0e(Array.isArray(e)?e[0]:e,c.textAlign||T_),g=r&&o.lineWidth?o.lineWidth:0,_=f?e:e.split("\n").reduce(cMt,[]),{width:y,height:w,widths:C,heights:x,lineWidths:M}=function HCt(n,e){const t=[],i=[],r=[];let s=0,o=0,a=0,c=0;for(let l=0,u=e.length;l<=u;l+=2){const f=e[l];if("\n"===f||l===u){s=Math.max(s,o),r.push(o),o=0,a+=c;continue}const p=e[l+1]||n.font,g=hE(p,f);t.push(g),o+=g;const _=PCt(p);i.push(_),c=Math.max(c,_)}return{width:s,height:a,widths:t,heights:i,lineWidths:r}}(c,_),T=y+g,I=[],F=(T+2)*u[0],P=(w+g)*u[1],R={width:F<0?Math.floor(F):Math.ceil(F),height:P<0?Math.floor(P):Math.ceil(P),contextInstructions:I};(1!=u[0]||1!=u[1])&&I.push("scale",u),r&&(I.push("strokeStyle",o.strokeStyle),I.push("lineWidth",g),I.push("lineCap",o.lineCap),I.push("lineJoin",o.lineJoin),I.push("miterLimit",o.miterLimit),I.push("setLineDash",[o.lineDash]),I.push("lineDashOffset",o.lineDashOffset)),i&&I.push("fillStyle",a.fillStyle),I.push("textBaseline","middle"),I.push("textAlign","center");const k=.5-p;let W=p*T+k*g;const re=[],Le=[];let ae,me=0,Q=0,he=0,K=0;for(let fe=0,de=_.length;fe<de;fe+=2){const ke=_[fe];if("\n"===ke){Q+=me,me=0,W=p*T+k*g,++K;continue}const et=_[fe+1]||c.font;et!==ae&&(r&&re.push("font",et),i&&Le.push("font",et),ae=et),me=Math.max(me,x[he]);const Fe=[ke,W+k*C[he]+p*(C[he]-M[K]),.5*(g+me)+Q];W+=C[he],r&&re.push("strokeText",Fe),i&&Le.push("fillText",Fe),++he}return Array.prototype.push.apply(I,re),Array.prototype.push.apply(I,Le),this.labels_[s]=R,R}replayTextBackground_(e,t,i,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,s,o,a,c,l,u,f,p,g,_,y,w){let C=i-(a*=p[0]),x=r-(c*=p[1]);const M=s+l>e?e-l:s,T=o+u>t?t-u:o,I=_[3]+M*p[0]+_[1],F=_[0]+T*p[1]+_[2],P=C-_[3],R=x-_[0];let k;return(y||0!==f)&&(b6[0]=P,x6[0]=P,b6[1]=R,Df[1]=R,Df[0]=P+I,If[0]=Df[0],If[1]=R+F,x6[1]=If[1]),0!==f?(k=Cf([1,0,0,1,0,0],i,r,1,1,f,-i,-r),d2(k,b6),d2(k,Df),d2(k,If),d2(k,x6),Xu(Math.min(b6[0],Df[0],If[0],x6[0]),Math.min(b6[1],Df[1],If[1],x6[1]),Math.max(b6[0],Df[0],If[0],x6[0]),Math.max(b6[1],Df[1],If[1],x6[1]),fm)):Xu(Math.min(P,P+I),Math.min(R,R+F),Math.max(P,P+I),Math.max(R,R+F),fm),g&&(C=Math.round(C),x=Math.round(x)),{drawImageX:C,drawImageY:x,drawImageW:M,drawImageH:T,originX:l,originY:u,declutterBox:{minX:fm[0],minY:fm[1],maxX:fm[2],maxY:fm[3],value:w},canvasTransform:k,scale:p}}replayImageOrLabel_(e,t,i,r,s,o,a){const l=r.declutterBox,u=e.canvas,f=a?a[2]*r.scale[0]/2:0;return l.minX-f<=u.width/t&&l.maxX+f>=0&&l.minY-f<=u.height/t&&l.maxY+f>=0&&(!(!o&&!a)&&this.replayTextBackground_(e,b6,Df,If,x6,o,a),function zCt(n,e,t,i,r,s,o,a,c,l,u){n.save(),1!==t&&(n.globalAlpha*=t),e&&n.setTransform.apply(n,e),i.contextInstructions?(n.translate(c,l),n.scale(u[0],u[1]),function OCt(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}(i,n)):u[0]<0||u[1]<0?(n.translate(c,l),n.scale(u[0],u[1]),n.drawImage(i,r,s,o,a,0,0,o,a)):n.drawImage(i,r,s,o,a,c,l,o*u[0],a*u[1]),n.restore()}(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){if(this.alignFill_){const t=d2(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,r){const s=this.textStates[t],o=this.createLabel(e,t,r,i),a=this.strokeStates[i],c=this.pixelRatio,l=D0e(Array.isArray(e)?e[0]:e,s.textAlign||T_),u=U_[s.textBaseline||uE],f=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:l*(o.width/c-2*s.scale[0])+2*(.5-l)*f,anchorY:u*o.height/c+2*(.5-u)*f}}execute_(e,t,i,r,s,o,a,c){let l;this.pixelCoordinates_&&c6(i,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=X5(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),function rCt(n,e){n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5]}(this.renderedTransform_,i));let u=0;const f=r.length;let g,_,y,w,C,x,M,T,I,F,P,R,p=0,k=0,W=0,re=null,Le=null;const me=this.coordinateCache_,Q=this.viewRotation_,he=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,K={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Q},ae=this.instructions!=r||this.overlaps?0:200;let fe,de,ke,et;for(;u<f;){const Fe=r[u];switch(Fe[0]){case sr.BEGIN_GEOMETRY:fe=Fe[1],et=Fe[3],fe.getGeometry()?void 0===a||zl(a,et.getExtent())?++u:u=Fe[2]+1:u=Fe[2];break;case sr.BEGIN_PATH:k>ae&&(this.fill_(e),k=0),W>ae&&(e.stroke(),W=0),!k&&!W&&(e.beginPath(),w=NaN,C=NaN),++u;break;case sr.CIRCLE:p=Fe[1];const ut=l[p],It=l[p+1],an=l[p+2]-ut,Sn=l[p+3]-It,cn=Math.sqrt(an*an+Sn*Sn);e.moveTo(ut+cn,It),e.arc(ut,It,cn,0,2*Math.PI,!0),++u;break;case sr.CLOSE_PATH:e.closePath(),++u;break;case sr.CUSTOM:p=Fe[1],g=Fe[2];const Ot=Fe[4],Rt=6==Fe.length?Fe[5]:void 0;K.geometry=Fe[3],K.feature=fe,u in me||(me[u]=[]);const vn=me[u];Rt?Rt(l,p,g,2,vn):(vn[0]=l[p],vn[1]=l[p+1],vn.length=2),Ot(vn,K),++u;break;case sr.DRAW_IMAGE:p=Fe[1],g=Fe[2],T=Fe[3],_=Fe[4],y=Fe[5];let qn=Fe[6];const En=Fe[7],Cn=Fe[8],Un=Fe[9],fi=Fe[10];let ar=Fe[11];const us=Fe[12];let Oe=Fe[13];const ve=Fe[14],Tt=Fe[15];if(!T&&Fe.length>=20){I=Fe[19],F=Fe[20],P=Fe[21],R=Fe[22];const U1=this.drawLabelWithPointPlacement_(I,F,P,R);T=U1.label,Fe[3]=T,_=(U1.anchorX-Fe[23])*this.pixelRatio,Fe[4]=_,y=(U1.anchorY-Fe[24])*this.pixelRatio,Fe[5]=y,qn=T.height,Fe[6]=qn,Oe=T.width,Fe[13]=Oe}let gn,bn,In,wi;Fe.length>25&&(gn=Fe[25]),Fe.length>17?(bn=Fe[16],In=Fe[17],wi=Fe[18]):(bn=j5,In=!1,wi=!1),fi&&he?ar+=Q:!fi&&!he&&(ar-=Q);let De=0;for(;p<g;p+=2){if(gn&&gn[De++]<Oe/this.pixelRatio)continue;const U1=this.calculateImageOrLabelDimensions_(T.width,T.height,l[p],l[p+1],Oe,qn,_,y,Cn,Un,ar,us,s,bn,In||wi,fe),Vo=[e,t,T,U1,En,In?re:null,wi?Le:null];if(c){if("none"===ve)continue;if("obstacle"===ve){c.insert(U1.declutterBox);continue}{let G1,Q1;if(Tt){const Wl=g-p;if(!Tt[Wl]){Tt[Wl]=Vo;continue}if(G1=Tt[Wl],delete Tt[Wl],Q1=L0e(G1),c.collides(Q1))continue}if(c.collides(U1.declutterBox))continue;G1&&(c.insert(Q1),this.replayImageOrLabel_.apply(this,G1)),c.insert(U1.declutterBox)}}this.replayImageOrLabel_.apply(this,Vo)}++u;break;case sr.DRAW_CHARS:const Jt=Fe[1],ln=Fe[2],Wn=Fe[3],jn=Fe[4];R=Fe[5];const er=Fe[6],kr=Fe[7],No=Fe[8];P=Fe[9];const at=Fe[10];I=Fe[11],F=Fe[12];const Bn=[Fe[13],Fe[13]],Ht=this.textStates[F],Nn=Ht.font,Hn=[Ht.scale[0]*kr,Ht.scale[1]*kr];let As;Nn in this.widths_?As=this.widths_[Nn]:(As={},this.widths_[Nn]=As);const cc=QO(l,Jt,ln,2),e1=Math.abs(Hn[0])*Tue(Nn,I,As);if(jn||e1<=cc){const G1=oMt(l,Jt,ln,2,I,(cc-e1)*U_[this.textStates[F].textAlign],er,Math.abs(Hn[0]),Tue,Nn,As,he?0:this.viewRotation_);e:if(G1){const Q1=[];let Wl,Hf,hp,ll,E3;if(P)for(Wl=0,Hf=G1.length;Wl<Hf;++Wl){E3=G1[Wl],hp=E3[4],ll=this.createLabel(hp,F,"",P),_=E3[2]+(Hn[0]<0?-at:at),y=Wn*ll.height+2*(.5-Wn)*at*Hn[1]/Hn[0]-No;const n0=this.calculateImageOrLabelDimensions_(ll.width,ll.height,E3[0],E3[1],ll.width,ll.height,_,y,0,0,E3[3],Bn,!1,j5,!1,fe);if(c&&c.collides(n0.declutterBox))break e;Q1.push([e,t,ll,n0,1,null,null])}if(R)for(Wl=0,Hf=G1.length;Wl<Hf;++Wl){E3=G1[Wl],hp=E3[4],ll=this.createLabel(hp,F,R,""),_=E3[2],y=Wn*ll.height-No;const n0=this.calculateImageOrLabelDimensions_(ll.width,ll.height,E3[0],E3[1],ll.width,ll.height,_,y,0,0,E3[3],Bn,!1,j5,!1,fe);if(c&&c.collides(n0.declutterBox))break e;Q1.push([e,t,ll,n0,1,null,null])}c&&c.load(Q1.map(L0e));for(let n0=0,Pe=Q1.length;n0<Pe;++n0)this.replayImageOrLabel_.apply(this,Q1[n0])}}++u;break;case sr.END_GEOMETRY:if(void 0!==o){fe=Fe[1];const U1=o(fe,et);if(U1)return U1}++u;break;case sr.FILL:ae?k++:this.fill_(e),++u;break;case sr.MOVE_TO_LINE_TO:for(p=Fe[1],g=Fe[2],de=l[p],ke=l[p+1],x=de+.5|0,M=ke+.5|0,(x!==w||M!==C)&&(e.moveTo(de,ke),w=x,C=M),p+=2;p<g;p+=2)de=l[p],ke=l[p+1],x=de+.5|0,M=ke+.5|0,(p==g-2||x!==w||M!==C)&&(e.lineTo(de,ke),w=x,C=M);++u;break;case sr.SET_FILL_STYLE:re=Fe,this.alignFill_=Fe[2],k&&(this.fill_(e),k=0,W&&(e.stroke(),W=0)),e.fillStyle=Fe[1],++u;break;case sr.SET_STROKE_STYLE:Le=Fe,W&&(e.stroke(),W=0),this.setStrokeStyle_(e,Fe),++u;break;case sr.STROKE:ae?W++:e.stroke(),++u;break;default:++u}}k&&this.fill_(e),W&&e.stroke()}execute(e,t,i,r,s,o){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,i,r,s){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,s)}},WO=["Polygon","Circle","LineString","Image","Text","Default"],jO={},I0e=class hMt{constructor(e,t,i,r,s,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(s)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];void 0===i&&(i={},this.executorsByZIndex_[t]=i);const r=e[t];for(const s in r)i[s]=new uMt(this.resolution_,this.pixelRatio_,this.overlaps_,r[s])}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,s,o){const a=2*(r=Math.round(r))+1,c=Cf(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=l4(a,a));const u=this.hitDetectionContext_;let f;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):l||u.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(f=[1/0,1/0,-1/0,-1/0],em(f,e),$S(f,t*(this.renderBuffer_+r),f));const p=function fMt(n){if(void 0!==jO[n])return jO[n];const e=2*n+1,t=n*n,i=new Array(t+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){const a=s*s+o*o;if(a>t)break;let c=i[a];c||(c=[],i[a]=c),c.push(4*((n+s)*e+(n+o))+3),s>0&&c.push(4*((n-s)*e+(n+o))+3),o>0&&(c.push(4*((n+s)*e+(n-o))+3),s>0&&c.push(4*((n-s)*e+(n-o))+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return jO[n]=r,r}(r);let g;function _(I,F){const P=u.getImageData(0,0,a,a).data;for(let R=0,k=p.length;R<k;R++)if(P[p[R]]>0){if(!o||"Image"!==g&&"Text"!==g||o.includes(I)){const W=(p[R]-3)/4,re=r-W%a,Le=r-(W/a|0),me=s(I,F,re*re+Le*Le);if(me)return me}u.clearRect(0,0,a,a);break}}const y=Object.keys(this.executorsByZIndex_).map(Number);let w,C,x,M,T;for(y.sort(N5),w=y.length-1;w>=0;--w){const I=y[w].toString();for(x=this.executorsByZIndex_[I],C=WO.length-1;C>=0;--C)if(g=WO[C],M=x[g],void 0!==M&&(T=M.executeHitDetection(u,c,i,_,f),T))return T}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],s=t[2],o=t[3],a=[i,r,i,o,s,o,s,r];return X5(a,0,8,2,e,a),a}isEmpty(){return Zg(this.executorsByZIndex_)}execute(e,t,i,r,s,o,a){const c=Object.keys(this.executorsByZIndex_).map(Number);let l,u,f,p,g,_;for(c.sort(N5),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||WO,a&&c.reverse(),l=0,u=c.length;l<u;++l){const y=c[l].toString();for(g=this.executorsByZIndex_[y],f=0,p=o.length;f<p;++f)_=g[o[f]],void 0!==_&&_.execute(e,t,i,r,s,a)}this.maxExtent_&&e.restore()}},pMt=class dMt extends x0e{constructor(e,t,i,r,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(e,t,i,r){if(!this.image_)return;const s=X5(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,c=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=c*this.imageOpacity_);let l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(let u=0,f=s.length;u<f;u+=2){const p=s[u]-this.imageAnchorX_,g=s[u+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const _=p+this.imageAnchorX_,y=g+this.imageAnchorY_;Cf(a,_,y,1,1,l,-_,-y),o.setTransform.apply(o,a),o.translate(_,y),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,g,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=c)}drawText_(e,t,i,r){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=X5(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const c=s[t]+this.textOffsetX_,l=s[t+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.translate(c-this.textOffsetX_,l-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,c,l),this.textFillState_&&o.fillText(this.text_,c,l))}}moveToLineTo_(e,t,i,r,s){const o=this.context_,a=X5(e,t,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let c=a.length;s&&(c-=2);for(let l=2;l<c;l+=2)o.lineTo(a[l],a[l+1]);return s&&o.closePath(),i}drawRings_(e,t,i,r){for(let s=0,o=i.length;s<o;++s)t=this.moveToLineTo_(e,t,i[s],r,!0);return t}drawCircle(e){if(zl(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=function Sbt(n,e,t){const i=n.getFlatCoordinates();if(i){const r=n.getStride();return X5(i,0,i.length,r,e,t)}return null}(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}drawFeature(e,t){const i=t.getGeometryFunction()(e);!i||!zl(this.extent_,i.getExtent())||(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),zl(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(""!==this.text_){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(zl(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let c=0,l=o.length;c<l;++c)s=this.moveToLineTo_(r,s,o[c],a,!1);i.stroke()}if(""!==this.text_){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),zl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),zl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,c=s.length;a<c;++a)r=this.drawRings_(i,r,s[a],o);this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),c6(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:T_;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(e){const i=e.getColor();this.fillState_={fillStyle:ih(i||Mf)}}else this.fillState_=null;if(t){const i=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),c=t.getWidth(),l=t.getMiterLimit(),u=s||x_;this.strokeState_={lineCap:void 0!==r?r:lE,lineDash:1===this.pixelRatio_?u:u.map(f=>f*this.pixelRatio_),lineDashOffset:(o||0)*this.pixelRatio_,lineJoin:void 0!==a?a:im,lineWidth:(void 0!==c?c:1)*this.pixelRatio_,miterLimit:void 0!==l?l:10,strokeStyle:ih(i||E_)}}else this.strokeState_=null}setImageStyle(e){let t;if(!e||!(t=e.getSize()))return void(this.image_=null);const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(e){const t=e.getFill();if(t){const g=t.getColor();this.textFillState_={fillStyle:ih(g||Mf)}}else this.textFillState_=null;const i=e.getStroke();if(i){const g=i.getColor(),_=i.getLineCap(),y=i.getLineDash(),w=i.getLineDashOffset(),C=i.getLineJoin(),x=i.getWidth(),M=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==_?_:lE,lineDash:y||x_,lineDashOffset:w||0,lineJoin:void 0!==C?C:im,lineWidth:void 0!==x?x:1,miterLimit:void 0!==M?M:10,strokeStyle:ih(g||E_)}}else this.textStrokeState_=null;const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),c=e.getRotation(),l=e.getScaleArray(),u=e.getText(),f=e.getTextAlign(),p=e.getTextBaseline();this.textState_={font:void 0!==r?r:Sue,textAlign:void 0!==f?f:T_,textBaseline:void 0!==p?p:uE},this.text_=void 0!==u?Array.isArray(u)?u.reduce((g,_,y)=>g+(y%2?" ":_),""):u:"",this.textOffsetX_=void 0!==s?this.pixelRatio_*s:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==a&&a,this.textRotation_=void 0!==c?c:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}},rh=.5,B0e={Point:function SMt(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(2!=s.getImageState())return;let c=n;if(r){const u=s.getDeclutterMode();if("none"!==u)if(c=r,"obstacle"===u){const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(s,a),f.drawPoint(e,i)}else o&&o.getText()&&(a={})}const l=c.getBuilder(t.getZIndex(),"Image");l.setImageStyle(s,a),l.drawPoint(e,i)}if(o&&o.getText()){let c=n;r&&(c=r);const l=c.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o,a),l.drawText(e,i)}},LineString:function bMt(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}},Polygon:function TMt(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(s,o),c.drawPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const c=(r||n).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}},MultiPoint:function EMt(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(2!=s.getImageState())return;let c=n;if(r){const u=s.getDeclutterMode();if("none"!==u)if(c=r,"obstacle"===u){const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(s,a),f.drawMultiPoint(e,i)}else o&&o.getText()&&(a={})}const l=c.getBuilder(t.getZIndex(),"Image");l.setImageStyle(s,a),l.drawMultiPoint(e,i)}if(o&&o.getText()){let c=n;r&&(c=r);const l=c.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o,a),l.drawText(e,i)}},MultiLineString:function xMt(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}},MultiPolygon:function MMt(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(s,o),c.drawMultiPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const c=(r||n).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}},GeometryCollection:function CMt(n,e,t,i,r){const s=e.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o)(0,B0e[s[o].getType()])(n,s[o],t,i,r)},Circle:function yMt(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(s,o),c.drawCircle(e,i)}const a=t.getText();if(a&&a.getText()){const c=(r||n).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}}};function vMt(n,e){return parseInt(br(n),10)-parseInt(br(e),10)}function $O(n,e){return.5*n/e}function R0e(n,e,t,i,r,s,o){let a=!1;const c=t.getImage();if(c){const l=c.getImageState();2==l||3==l?c.unlistenImageChange(r):(0==l&&c.load(),c.listenImageChange(r),a=!0)}return function wMt(n,e,t,i,r,s){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(i,r);t.getRenderer()?F0e(n,a,t,e):(0,B0e[a.getType()])(n,a,t,e,s)}(n,e,t,i,s,o),a}function F0e(n,e,t,i){if("GeometryCollection"!=e.getType())n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer());else{const s=e.getGeometries();for(let o=0,a=s.length;o<a;++o)F0e(n,s[o],t,i)}}const DMt=class LMt extends T0e{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,c=s.projection,l=s.rotation,u=c.getExtent(),f=this.getLayer().getSource(),p=t.pixelRatio,g=t.viewHints,_=!(g[0]||g[1]),y=this.compositionContext_,w=Math.round(t.size[0]*p),C=Math.round(t.size[1]*p),x=f.getWrapX()&&c.canWrapX(),M=x?_a(u):null,T=x?Math.ceil((r[2]-u[2])/M)+1:1;let I=x?Math.floor((r[0]-u[0])/M):0;do{const F=this.getRenderTransform(o,a,l,p,w,C,I*M);e.execute(y,1,F,l,_,void 0,i)}while(++I<T)}setupCompositionContext_(){if(1!==this.opacity_){const e=l4(this.context.canvas.width,this.context.canvas.height,E0e);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,xue(this.compositionContext_),E0e.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,r=e.layerStatesArray[e.layerIndex];(function sCt(n,e,t){(function C_(n,e,t,i,r,s,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n})(n,e,0,0,t,0,0)})(this.pixelTransform,1/i,1/i),jS(this.inversePixelTransform,this.pixelTransform);const s=Nz(this.pixelTransform);this.useContainer(t,s,this.getBackground(e));const o=this.context,a=o.canvas,c=this.replayGroup_,l=this.declutterExecutorGroup;if((!c||c.isEmpty())&&(!l||l.isEmpty()))return null;const u=Math.round(e.size[0]*i),f=Math.round(e.size[1]*i);a.width!=u||a.height!=f?(a.width=u,a.height=f,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,u,f),this.preRender(o,e);const p=e.viewState;this.opacity_=r.opacity,this.setupCompositionContext_();let _=!1,y=!0;if(r.extent&&this.clipping){const w=m6(r.extent);y=zl(w,e.extent),_=y&&!Jg(w,e.extent),_&&this.clipUnrotated(this.compositionContext_,e,w)}return y&&this.renderWorlds(c,e),_&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(function(t){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];d2(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,c=this.wrappedRenderedExtent_,l=this.getLayer(),u=[],f=i[0]*rh,p=i[1]*rh;u.push(this.getRenderTransform(r,s,o,rh,f,p,0).slice());const g=l.getSource(),_=a.getExtent();if(g.getWrapX()&&a.canWrapX()&&!Jg(_,c)){let y=c[0];const w=_a(_);let x,C=0;for(;y<_[0];)--C,x=w*C,u.push(this.getRenderTransform(r,s,o,rh,f,p,x).slice()),y+=w;for(C=0,y=c[2];y>_[2];)++C,x=w*C,u.push(this.getRenderTransform(r,s,o,rh,f,p,x).slice()),y-=w}this.hitDetectionImageData_=function gMt(n,e,t,i,r,s,o){const l=l4(n[0]*rh,n[1]*rh);l.imageSmoothingEnabled=!1;const u=l.canvas,f=new pMt(l,rh,r,null,o),p=t.length,g=Math.floor(16777215/p),_={};for(let w=1;w<=p;++w){const C=t[w-1],x=C.getStyleFunction()||i;if(!i)continue;let M=x(C,s);if(!M)continue;Array.isArray(M)||(M=[M]);const I="#"+("000000"+(w*g).toString(16)).slice(-6);for(let F=0,P=M.length;F<P;++F){const R=M[F],k=R.getGeometryFunction()(C);if(!k||!zl(r,k.getExtent()))continue;const W=R.clone(),re=W.getFill();re&&re.setColor(I);const Le=W.getStroke();Le&&(Le.setColor(I),Le.setLineDash(null)),W.setText(void 0);const me=R.getImage();if(me&&0!==me.getOpacity()){const K=me.getImageSize();if(!K)continue;const ae=l4(K[0],K[1],void 0,{alpha:!1}),fe=ae.canvas;ae.fillStyle=I,ae.fillRect(0,0,fe.width,fe.height),W.setImage(new y0e({img:fe,imgSize:K,anchor:me.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:me.getOrigin(),opacity:1,size:me.getSize(),scale:me.getScale(),rotation:me.getRotation(),rotateWithView:me.getRotateWithView()}))}const Q=W.getZIndex()||0;let he=_[Q];he||(he={},_[Q]=he,he.Polygon=[],he.Circle=[],he.LineString=[],he.Point=[]),he[k.getType().replace("Multi","")].push(k,W)}}const y=Object.keys(_).map(Number).sort(N5);for(let w=0,C=y.length;w<C;++w){const x=_[y[w]];for(const M in x){const T=x[M];for(let I=0,F=T.length;I<F;I+=2){f.setStyle(T[I+1]);for(let P=0,R=e.length;P<R;++P)f.setTransform(e[P]),f.drawGeometry(T[I])}}}return l.getImageData(0,0,u.width,u.height)}(i,u,this.renderedFeatures_,l.getStyleFunction(),c,s,o)}t(function mMt(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*rh),s=Math.floor(Math.round(n[1])*rh),o=4*(sc(r,0,t.width-1)+sc(s,0,t.height-1)*t.width),u=t.data[o+2]+256*(t.data[o+1]+256*t.data[o]),f=Math.floor(16777215/e.length);u&&u%f==0&&i.push(e[u/f-1])}return i}(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(e,t,i,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,c=this.getLayer(),l={},u=function(g,_,y){const w=br(g),C=l[w];if(C){if(!0!==C&&y<C.distanceSq){if(0===y)return l[w]=!0,s.splice(s.lastIndexOf(C),1),r(g,c,_);C.geometry=_,C.distanceSq=y}}else{if(0===y)return l[w]=!0,r(g,c,_);s.push(l[w]={feature:g,layer:c,geometry:_,distanceSq:y,callback:r})}};let f;const p=[this.replayGroup_];return this.declutterExecutorGroup&&p.push(this.declutterExecutorGroup),p.some(g=>f=g.forEachFeatureAtCoordinate(e,o,a,i,u,g===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(_=>_.value):null)),f}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[0],s=e.viewHints[1],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,l=e.viewState,u=l.projection,f=l.resolution,p=e.pixelRatio,g=t.getRevision(),_=t.getRenderBuffer();let y=t.getRenderOrder();void 0===y&&(y=vMt);const w=l.center.slice(),C=$S(c,_*f),x=C.slice(),M=[C.slice()],T=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!Jg(T,e.extent)){const K=_a(T),ae=Math.max(_a(C)/2,K);C[0]=T[0]-ae,C[2]=T[2]+ae,_ue(w,u);const fe=cue(M[0],u);fe[0]<T[0]&&fe[2]<T[2]?M.push([fe[0]+K,fe[1],fe[2]+K,fe[3]]):fe[0]>T[0]&&fe[2]>T[2]&&M.push([fe[0]-K,fe[1],fe[2]-K,fe[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==g&&this.renderedRenderOrder_==y&&Jg(this.wrappedRenderedExtent_,C))return c6(this.renderedExtent_,x)||(this.hitDetectionImageData_=null,this.renderedExtent_=x),this.renderedCenter_=w,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const I=new S0e($O(f,p),C,f,p);let F;this.getLayer().getDeclutter()&&(F=new S0e($O(f,p),C,f,p));const P=g6();let R;if(P){for(let K=0,ae=M.length;K<ae;++K){const de=_E(M[K]);i.loadFeatures(de,pbt(f),P)}R=I_(P,u)}else for(let K=0,ae=M.length;K<ae;++K)i.loadFeatures(M[K],f,u);const k=function _Mt(n,e){const t=$O(n,e);return t*t}(f,p);let W=!0;const re=function(K){let ae;const fe=K.getStyleFunction()||t.getStyleFunction();if(fe&&(ae=fe(K,f)),ae){const de=this.renderFeature(K,k,ae,I,R,F);W=W&&!de}}.bind(this),Le=_E(C),me=i.getFeaturesInExtent(Le);y&&me.sort(y);for(let K=0,ae=me.length;K<ae;++K)re(me[K]);this.renderedFeatures_=me,this.ready=W;const Q=I.finish(),he=new I0e(C,f,p,i.getOverlaps(),Q,t.getRenderBuffer());return F&&(this.declutterExecutorGroup=new I0e(C,f,p,i.getOverlaps(),F.finish(),t.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=g,this.renderedRenderOrder_=y,this.renderedExtent_=x,this.wrappedRenderedExtent_=C,this.renderedCenter_=w,this.renderedProjection_=u,this.replayGroup_=he,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let c=0,l=i.length;c<l;++c)a=R0e(r,e,i[c],t,this.boundHandleStyleImageChange_,s,o)||a;else a=R0e(r,e,i,t,this.boundHandleStyleImageChange_,s,o);return a}},dm=class IMt extends Qxt{constructor(e){super(e)}createRenderer(){return new DMt(this)}},qO=class BMt{constructor(e){this.rbush_=new A0e(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[br(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],c={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=c,this.items_[br(a)]=c}this.rbush_.load(i)}remove(e){const t=br(e),i=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(i)}update(e,t){const i=this.items_[br(t)];b_([i.minX,i.minY,i.maxX,i.maxY],e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){return this.rbush_.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,s=e.length;r<s;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return Zg(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Xu(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}};function k0e(n){return n?Array.isArray(n)?function(e){return n}:"function"==typeof n?n:function(e){return[n]}:null}const P0e=class RMt extends nh{constructor(e){super(),this.projection=Za(e.projection),this.attributions_=k0e(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:"ready",this.wrapX_=void 0!==e.wrapX&&e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return or()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=k0e(e),this.changed()}setState(e){this.state_=e,this.changed()}};function FMt(n,e){return[[-1/0,-1/0,1/0,1/0]]}function z0e(n,e){return function(t,i,r,s,o){const a=this;!function kMt(n,e,t,i,r,s,o){const a=new XMLHttpRequest;a.open("GET","function"==typeof n?n(t,i,r):n,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(c){if(!a.status||a.status>=200&&a.status<300){const l=e.getType();let u;"json"==l||"text"==l?u=a.responseText:"xml"==l?(u=a.responseXML,u||(u=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==l&&(u=a.response),u?s(e.readFeatures(u,{extent:t,featureProjection:r}),e.readProjection(u)):o()}else o()},a.onerror=o,a.send()}(n,e,t,i,r,function(c,l){a.addFeatures(c),void 0!==s&&s(c)},o||V5)}}class M6 extends c4{constructor(e,t,i){super(e),this.feature=t,this.features=i}}const G_=class PMt extends P0e{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=V5,this.format_=e.format,this.overlaps_=void 0===e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(Ts(this.format_,7),this.loader_=z0e(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:FMt;const t=void 0===e.useSpatialIndex||e.useSpatialIndex;let i,r;this.featuresRtree_=t?new qO:null,this.loadedExtentsRtree_=new qO,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&void 0===i&&(i=new N1(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=br(e);if(!this.addToIndex_(t,e))return void(this.featuresCollection_&&this.featuresCollection_.remove(e));this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new M6("addfeature",e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[$s(t,"change",this.handleFeatureChange_,this),$s(t,"propertychange",this.handleFeatureChange_,this)]}addToIndex_(e,t){let i=!0;const r=t.getId();return void 0!==r&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=t),i&&(Ts(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],c=br(a);this.addToIndex_(c,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],c=br(a);this.setupChangeEvents_(c,a);const l=a.getGeometry();if(l){const u=l.getExtent();t.push(u),r.push(a)}else this.nullGeometryFeatures_[c]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener("addfeature"))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new M6("addfeature",i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener("addfeature",function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener("removefeature",function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener("add",function(i){t||(t=!0,this.addFeature(i.element),t=!1)}.bind(this)),e.addEventListener("remove",function(i){t||(t=!0,this.removeFeature(i.element),t=!1)}.bind(this)),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Ia);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=function(r){this.removeFeatureInternal(r)}.bind(this);this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new M6("clear");this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){return this.forEachFeatureInExtent([e[0],e[1],e[0],e[1]],function(r){if(r.getGeometry().intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Zg(this.nullGeometryFeatures_)||qu(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=function pCt(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];cue(n,e);const i=_a(t);if(_a(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||th,this.featuresRtree_.forEachInExtent(c,function(l){if(t(l)){const u=l.getGeometry(),f=a;if(a=u.closestPointXY(i,r,o,a),a<f){s=l;const p=Math.sqrt(a);c[0]=i-p,c[1]=r-p,c[2]=i+p,c[3]=r+p}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return void 0!==t?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return void 0!==t?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=br(t),r=t.getGeometry();if(r){const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);const s=t.getId();if(void 0!==s){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new M6("changefeature",t))}hasFeature(e){const t=e.getId();return void 0!==t?t in this.idIndex_:br(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Zg(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let o=0,a=s.length;o<a;++o){const c=s[o];r.forEachInExtent(c,function(u){return Jg(u.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new M6("featuresloadstart")),this.loader_.call(this,c,t,i,function(u){--this.loadingExtentsCount_,this.dispatchEvent(new M6("featuresloadend",void 0,u))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new M6("featuresloaderror"))}.bind(this)),r.insert(c,{extent:c.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(r){if(b_(r.extent,e))return i=r,!0}),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=br(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=br(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(Ia),delete this.featureChangeKeys_[t];const r=e.getId();return void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new M6("removefeature",e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){Ts(this.format_,7),this.url_=e,this.setLoader(z0e(e,this.format_))}};class zMt extends c4{constructor(e,t,i,r){super(e),this.selected=t,this.deselected=i,this.mapBrowserEvent=r}}const DE={};class KO extends lm{constructor(e){let t;if(super(),e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:h0e,this.addCondition_=e.addCondition?e.addCondition:DO,this.removeCondition_=e.removeCondition?e.removeCondition:DO,this.toggleCondition_=e.toggleCondition?e.toggleCondition:BO,this.multi_=!!e.multi&&e.multi,this.filter_=e.filter?e.filter:th,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=void 0!==e.style?e.style:function OMt(){const n=NO();return qu(n.Polygon,n.LineString),qu(n.GeometryCollection,n.LineString),function(e){return e.getGeometry()?n[e.getGeometry().getType()]:null}}(),this.features_=e.features||new N1,e.layers)if("function"==typeof e.layers)t=e.layers;else{const i=e.layers;t=function(r){return i.includes(r)}}else t=th;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[br(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[br(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener("add",this.boundAddFeature_),this.features_.addEventListener("remove",this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener("add",this.boundAddFeature_),this.features_.removeEventListener("remove",this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const i=this.getMap().getAllLayers().find(function(r){if(r instanceof dm&&r.getSource()&&r.getSource().hasFeature(t))return r});i&&this.addFeatureLayerAssociation_(t,i)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=br(e);t in DE||(DE[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let r=t.length-1;r>=0;--r){const s=t[r];if(s!==this&&s instanceof KO&&s.getStyle()&&-1!==s.getFeatures().getArray().lastIndexOf(e))return void e.setStyle(s.getStyle())}const i=br(e);e.setStyle(DE[i]),delete DE[i]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[br(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),i=this.removeCondition_(e),r=this.toggleCondition_(e),s=!t&&!i&&!r,o=e.map,a=this.getFeatures(),c=[],l=[];if(s){Yg(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,function(u,f){if(u instanceof X4&&this.filter_(u,f))return this.addFeatureLayerAssociation_(u,f),l.push(u),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=a.getLength()-1;u>=0;--u){const f=a.item(u),p=l.indexOf(f);p>-1?l.splice(p,1):(a.remove(f),c.push(f))}0!==l.length&&a.extend(l)}else{o.forEachFeatureAtPixel(e.pixel,function(u,f){if(u instanceof X4&&this.filter_(u,f))return!t&&!r||a.getArray().includes(u)?(i||r)&&a.getArray().includes(u)&&(c.push(u),this.removeFeatureLayerAssociation_(u)):(this.addFeatureLayerAssociation_(u,f),l.push(u)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=c.length-1;u>=0;--u)a.remove(c[u]);a.extend(l)}return(l.length>0||c.length>0)&&this.dispatchEvent(new zMt("select",l,c,e)),!0}}const O0e=KO;class YO extends c4{constructor(e,t,i,r,s){super(e),this.features=t,this.coordinate=i,this.startCoordinate=r,this.mapBrowserEvent=s}}const VMt=class NMt extends Tf{constructor(e){let t;if(super(e=e||{}),this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=void 0!==e.features?e.features:null,e.layers&&!this.features_)if("function"==typeof e.layers)t=e.layers;else{const i=e.layers;t=function(r){return i.includes(r)}}else t=th;this.layerFilter_=t,this.filter_=e.filter&&!this.features_?e.filter:th,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.condition_=e.condition?e.condition:um,this.lastFeature_=null,this.addChangeListener("active",this.handleActiveChanged_)}handleDownEvent(e){if(!e.originalEvent||!this.condition_(e))return!1;if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);const t=this.features_||new N1([this.lastFeature_]);return this.dispatchEvent(new YO("translatestart",t,e.coordinate,this.startCoordinate_,e)),!0}return!1}handleUpEvent(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);const t=this.features_||new N1([this.lastFeature_]);return this.dispatchEvent(new YO("translateend",t,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1}handleDragEvent(e){if(this.lastCoordinate_){const t=e.coordinate,i=t[0]-this.lastCoordinate_[0],r=t[1]-this.lastCoordinate_[1],s=this.features_||new N1([this.lastFeature_]);s.forEach(function(o){const a=o.getGeometry();a.translate(i,r),o.setGeometry(a)}),this.lastCoordinate_=t,this.dispatchEvent(new YO("translating",s,t,this.startCoordinate_,e))}}handleMoveEvent(e){const t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(e,t){return t.forEachFeatureAtPixel(e,function(i,r){if(this.filter_(i,r)&&(!this.features_||this.features_.getArray().includes(i)))return i}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(e){this.hitTolerance_=e}setMap(e){const t=this.getMap();super.setMap(e),this.updateState_(t)}handleActiveChanged_(){this.updateState_(null)}updateState_(e){let t=this.getMap();const i=this.getActive();(!t||!i)&&(t=t||e,t&&t.getViewport().classList.remove("ol-grab","ol-grabbing"))}};function pm(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IE(n){return IE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},IE(n)}function N0e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function V0e(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function U0e(n,e,t){return e&&V0e(n.prototype,e),t&&V0e(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function ip(n){return ip=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ip(n)}function UMt(n,e){for(;!Object.prototype.hasOwnProperty.call(n,e)&&null!==(n=ip(n)););return n}function Q_(){return Q_=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,i){var r=UMt(e,t);if(r){var s=Object.getOwnPropertyDescriptor(r,t);return s.get?s.get.call(arguments.length<3?e:i):s.value}},Q_.apply(this,arguments)}function ZO(n,e){return ZO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},ZO(n,e)}function WMt(n,e){if(e&&("object"===IE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function QMt(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}class BE extends $ue{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ia),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push($s(this.geometries_[e],"change",this.changed,this))}clone(){const e=new BE(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<U5(this.getExtent(),e,t))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){G5(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)sue(e,t[i].getExtent());return e}getGeometries(){return G0e(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],c=a.getSimplifiedGeometry(e);t.push(c),c!==a&&(r=!0)}if(r){const s=new BE(null);return s.setGeometriesArray(t),s}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=u6(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(G0e(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function G0e(n){const e=[];for(let t=0,i=n.length;t<i;++t)e.push(n[t].clone());return e}const JO=BE;function Q0e(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e=["Assertion failed",e].join(": "),!n)throw new Error(e)}function W0e(n){return n}function RE(n,e){return-1!==n.indexOf(e)}function j0e(n){return"[object Array]"===Object.prototype.toString.call(n)}var tN=function(){function n(e,t,i,r){N0e(this,n),this.propagationStopped_=!1,this.type_=e,this.features_=t,this.angle_=i,this.anchor_=r}return U0e(n,[{key:"preventDefault",value:function(){this.propagationStopped_=!0}},{key:"stopPropagation",value:function(){this.propagationStopped_=!0}},{key:"propagationStopped",get:function(){return this.propagationStopped_}},{key:"type",get:function(){return this.type_}},{key:"features",get:function(){return this.features_}},{key:"angle",get:function(){return this.angle_}},{key:"anchor",get:function(){return this.anchor_}}]),n}(),nN=typeof navigator<"u"?navigator.userAgent.toLowerCase():"",jMt=-1!==nN.indexOf("macintosh"),$Mt=-1!==nN.indexOf("webkit")&&-1==nN.indexOf("edge");var FE="rotate-anchor",kE="rotate-arrow",d4="angle",PE="anchor",$0e=function(n){!function GMt(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&ZO(n,e)}(t,n);var e=function KMt(n){var e=function XMt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var r,i=ip(n);if(e){var s=ip(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return WMt(this,r)}}(t);function t(){var i,r,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(N0e(this,t),(r=e.call(this,{handleDownEvent:YMt,handleUpEvent:ZMt,handleDragEvent:JMt,handleMoveEvent:W_})).previousCursor_=void 0,r.anchorFeature_=void 0,r.arrowFeature_=void 0,r.lastCoordinate_=void 0,r.anchorMoving_=!1,r.overlay_=new dm({style:s.style||eSt(),source:new G_({features:new N1})}),r.condition_=s.condition?s.condition:um,r.features_=void 0,s.features)if(j0e(s.features))r.features_=new N1(s.features);else{if(!(s.features instanceof N1))throw new Error("Features option should be an array or collection of features, got "+IE(s.features));r.features_=s.features}else r.features_=new N1;return r.allowAnchorMovement=void 0===s.allowAnchorMovement||s.allowAnchorMovement,r.setAnchor(s.anchor||iN(r.features_)),r.setAngle(s.angle||0),r.features_.on("add",(i=r).onFeatureAdd_.bind(i)),r.features_.on("remove",(i=r).onFeatureRemove_.bind(i)),r.on("change:"+d4,(i=r).onAngleChange_.bind(i)),r.on("change:"+PE,(i=r).onAnchorChange_.bind(i)),r.createOrUpdateAnchorFeature_(),r.createOrUpdateArrowFeature_(),r}return U0e(t,[{key:"setMap",value:function(r){this.overlay_.setMap(r),Q_(ip(t.prototype),"setMap",this).call(this,r)}},{key:"setActive",value:function(r){this.overlay_&&this.overlay_.setMap(r?this.map:void 0),Q_(ip(t.prototype),"setActive",this).call(this,r)}},{key:"setAngle",value:function(r){Q0e(!isNaN(parseFloat(r)),"Numeric value passed"),this.set(d4,parseFloat(r))}},{key:"getAngle",value:function(){return this.get(d4)}},{key:"setAnchor",value:function(r){Q0e(null==r||j0e(r)&&2===r.length,"Array of two elements passed"),this.set(PE,null!=r?r.map(parseFloat):iN(this.features_))}},{key:"getAnchor",value:function(){return this.get(PE)}},{key:"createOrUpdateAnchorFeature_",value:function(){var r=this.getAngle(),s=this.getAnchor();if(s)if(this.anchorFeature_)this.anchorFeature_.getGeometry().setCoordinates(s),this.anchorFeature_.set(d4,r);else{var o;this.anchorFeature_=new X4((pm(o={geometry:new u4(s)},d4,r),pm(o,FE,!0),o)),this.overlay_.getSource().addFeature(this.anchorFeature_)}}},{key:"createOrUpdateArrowFeature_",value:function(){var r=this.getAngle(),s=this.getAnchor();if(s)if(this.arrowFeature_)this.arrowFeature_.getGeometry().setCoordinates(s),this.arrowFeature_.set(d4,r);else{var o;this.arrowFeature_=new X4((pm(o={geometry:new u4(s)},d4,r),pm(o,kE,!0),o)),this.overlay_.getSource().addFeature(this.arrowFeature_)}}},{key:"resetAngleAndAnchor_",value:function(){this.resetAngle_(),this.resetAnchor_()}},{key:"resetAngle_",value:function(){this.set(d4,0,!0),this.arrowFeature_&&this.arrowFeature_.set(d4,this.getAngle()),this.anchorFeature_&&this.anchorFeature_.set(d4,this.getAngle())}},{key:"resetAnchor_",value:function(){this.set(PE,iN(this.features_),!0),this.getAnchor()&&(this.arrowFeature_&&this.arrowFeature_.getGeometry().setCoordinates(this.getAnchor()),this.anchorFeature_&&this.anchorFeature_.getGeometry().setCoordinates(this.getAnchor()))}},{key:"onFeatureAdd_",value:function(){this.resetAngleAndAnchor_(),this.createOrUpdateAnchorFeature_(),this.createOrUpdateArrowFeature_()}},{key:"onFeatureRemove_",value:function(){this.resetAngleAndAnchor_(),this.features_.getLength()?(this.createOrUpdateAnchorFeature_(),this.createOrUpdateArrowFeature_()):(this.overlay_.getSource().clear(),this.anchorFeature_=this.arrowFeature_=void 0)}},{key:"onAngleChange_",value:function(r){var s=this,o=r.oldValue;this.features_.forEach(function(a){return a.getGeometry().rotate(s.getAngle()-o,s.getAnchor())}),this.arrowFeature_&&this.arrowFeature_.set(d4,this.getAngle()),this.anchorFeature_&&this.anchorFeature_.set(d4,this.getAngle())}},{key:"onAnchorChange_",value:function(){var r=this.getAnchor();r&&(this.anchorFeature_&&this.anchorFeature_.getGeometry().setCoordinates(r),this.arrowFeature_&&this.arrowFeature_.getGeometry().setCoordinates(r))}},{key:"dispatchRotateStartEvent_",value:function(r){this.dispatchEvent(new tN("rotatestart",r,this.getAngle(),this.getAnchor()))}},{key:"dispatchRotatingEvent_",value:function(r){this.dispatchEvent(new tN("rotating",r,this.getAngle(),this.getAnchor()))}},{key:"dispatchRotateEndEvent_",value:function(r){this.dispatchEvent(new tN("rotateend",r,this.getAngle(),this.getAnchor()))}},{key:"features",get:function(){return this.features_}},{key:"angle",get:function(){return this.getAngle()},set:function(r){this.setAngle(r)}},{key:"anchor",get:function(){return this.getAnchor()},set:function(r){this.setAnchor(r)}},{key:"map",set:function(r){this.setMap(r)},get:function(){return this.getMap()}},{key:"active",set:function(r){this.setActive(r)},get:function(){return this.getActive()}}]),t}(Tf);function YMt(n){if(!EE(n))return!1;if(function(e){var t=e.originalEvent;return 0==t.button&&!($Mt&&jMt&&t.ctrlKey)}(n)&&this.condition_(n)){var e=n.map.forEachFeatureAtPixel(n.pixel,W0e);if(RE(["click","singleclick","dblclick"],n.type)&&RE([this.anchorFeature_,this.arrowFeature_],e))return!1;if(e&&!this.lastCoordinate_&&(RE(this.features_.getArray(),e)||e===this.arrowFeature_))return this.lastCoordinate_=n.coordinate,W_.call(this,n),this.dispatchRotateStartEvent_(this.features_),!0;if(e&&e===this.anchorFeature_&&this.allowAnchorMovement)return this.anchorMoving_=!0,W_.call(this,n),!0}return!1}function ZMt(n){return this.lastCoordinate_?(this.lastCoordinate_=void 0,W_.call(this,n),this.dispatchRotateEndEvent_(this.features_),!0):!!this.anchorMoving_&&(this.anchorMoving_=!1,W_.call(this,n),!0)}function JMt(n){var e=n.coordinate,t=this.anchorFeature_.getGeometry().getCoordinates();if(this.lastCoordinate_){var i=[this.lastCoordinate_[0]-t[0],this.lastCoordinate_[1]-t[1]],r=[e[0]-t[0],e[1]-t[1]],s=Math.atan2(i[0]*r[1]-r[0]*i[1],i[0]*r[0]+i[1]*r[1]);this.setAngle(this.getAngle()+s),this.dispatchRotatingEvent_(this.features_),this.lastCoordinate_=e}else this.anchorMoving_&&this.setAnchor(e)}function W_(n){var e=n.map,t=n.pixel,i=e.getTargetElement(),r=e.forEachFeatureAtPixel(t,W0e),s=function(a){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c&&(i.style.cursor="-webkit-"+a,i.style.cursor="-moz-"+a),i.style.cursor=a};this.lastCoordinate_?(this.previousCursor_=i.style.cursor,s("grabbing",!0)):r&&(RE(this.features_.getArray(),r)||r===this.arrowFeature_)?(this.previousCursor_=i.style.cursor,s("grab",!0)):r&&r===this.anchorFeature_&&this.allowAnchorMovement||this.anchorMoving_?(this.previousCursor_=i.style.cursor,s("crosshair")):(s(this.previousCursor_||""),this.previousCursor_=void 0)}function eSt(){var n,e=[255,255,255,.8],t=[0,153,255,.8],i=[255,255,255,.01],s=(pm(n={},FE,[new F2({image:new P_({fill:new Oo({color:[0,153,255,.8]}),stroke:new qc({color:t,width:1}),radius:4,points:6}),zIndex:1/0})]),pm(n,kE,[new F2({fill:new Oo({color:i}),stroke:new qc({color:e,width:4}),text:new Lf({font:"12px sans-serif",offsetX:20,offsetY:-20,fill:new Oo({color:"blue"}),stroke:new qc({color:e,width:3})}),zIndex:1/0}),new F2({fill:new Oo({color:i}),stroke:new qc({color:t,width:2}),zIndex:1/0})]),n);return function(o,a){var c,l=o.get(d4)||0;switch(!0){case o.get(FE):return(c=s[FE])[0].getImage().setRotation(-l),c;case o.get(kE):c=s[kE];var u=o.getGeometry().getCoordinates(),f=new ep([[[u[0],u[1]-6*a],[u[0]+8*a,u[1]-12*a],[u[0],u[1]+30*a],[u[0]-8*a,u[1]-12*a],[u[0],u[1]-6*a]]]);return f.rotate(l,u),c[0].setGeometry(f),c[1].setGeometry(f),c[0].getText().setText(Math.round(180*-l/Math.PI)+"\xb0"),c}}}function iN(n){if((n=n instanceof N1?n.getArray():n).length)return u6(function tSt(n){if((n=n instanceof N1?n.getArray():n).length)return new JO(n.map(function(e){return e.getGeometry()})).getExtent()}(n))}typeof window<"u"&&window.ol&&window.ol.interaction&&(window.ol.interaction.RotateFeature=$0e);const nSt=$0e,rSt=class iSt extends sE{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError)}getPreload(){return this.get("preload")}setPreload(e){this.set("preload",e)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(e){this.set("useInterimTilesOnError",e)}getData(e){return super.getData(e)}},q0e=class sSt extends US{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent("change")}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(2==e.getState())return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(2==e.getState()){e.interimTile=null;break}1==e.getState()?t=e:0==e.getState()?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(3!==this.state&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){or()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(i){if(-1===i)return 1}else i=t,this.transitionStarts_[e]=i;const r=t-i+1e3/60;return r>=this.transition_?1:Que(r/this.transition_)}inTransition(e){return!!this.transition_&&-1!==this.transitionStarts_[e]}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}},K0e=class oSt extends q0e{constructor(e,t,i,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function aSt(){const n=l4(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}(),this.changed()}handleImageLoad_(){const e=this.image_;this.state=e.naturalWidth&&e.naturalHeight?2:4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=VO(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};let rN;const Y0e=[];function Z0e(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function sN(n,e){return Math.abs(n[4*e]-210)>2||Math.abs(n[4*e+3]-191.25)>2}function J0e(n,e,t,i){const r=R_(t,e,n);let s=Hue(e,i,t);const o=e.getMetersPerUnit();void 0!==o&&(s*=o);const a=n.getMetersPerUnit();void 0!==a&&(s/=a);const c=n.getExtent();if(!c||qS(c,r)){const l=Hue(n,s,r)/s;isFinite(l)&&l>0&&(s/=l)}return s}const oN=class gSt extends q0e{constructor(e,t,i,r,s,o,a,c,l,u,f,p){super(s,0,{interpolate:!!p}),this.renderEdges_=void 0!==f&&f,this.pixelRatio_=a,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const g=r.getTileCoordExtent(this.wrappedTileCoord_),_=this.targetTileGrid_.getExtent();let y=this.sourceTileGrid_.getExtent();const w=_?tm(g,_):g;if(0===XS(w))return void(this.state=4);const C=e.getExtent();C&&(y=y?tm(y,C):C);const x=r.getResolution(this.wrappedTileCoord_[0]),M=function dSt(n,e,t,i){const r=u6(t);let s=J0e(n,e,r,i);return(!isFinite(s)||s<=0)&&Gz(t,function(o){return s=J0e(n,e,o,i),isFinite(s)&&s>0}),s}(e,i,w,x);if(!isFinite(M)||M<=0)return void(this.state=4);if(this.triangulation_=new class uSt{constructor(e,t,i,r,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const c=B_(this.targetProj_,this.sourceProj_);this.transformInv_=function(x){const M=x[0]+"/"+x[1];return a[M]||(a[M]=c(x)),a[M]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&_a(r)==_a(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?_a(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?_a(this.targetProj_.getExtent()):null;const l=Q5(i),u=JS(i),f=ZS(i),p=YS(i),g=this.transformInv_(l),_=this.transformInv_(u),y=this.transformInv_(f),w=this.transformInv_(p),C=10+(o?Math.max(0,Math.ceil(Math.log2(XS(i)/(o*o*256*256)))):0);if(this.addQuad_(l,u,f,p,g,_,y,w,C),this.wrapsXInSource_){let x=1/0;this.triangles_.forEach(function(M,T,I){x=Math.min(x,M.source[0][0],M.source[1][0],M.source[2][0])}),this.triangles_.forEach(function(M){if(Math.max(M.source[0][0],M.source[1][0],M.source[2][0])-x>this.sourceWorldWidth_/2){const T=[[M.source[0][0],M.source[0][1]],[M.source[1][0],M.source[1][1]],[M.source[2][0],M.source[2][1]]];T[0][0]-x>this.sourceWorldWidth_/2&&(T[0][0]-=this.sourceWorldWidth_),T[1][0]-x>this.sourceWorldWidth_/2&&(T[1][0]-=this.sourceWorldWidth_),T[2][0]-x>this.sourceWorldWidth_/2&&(T[2][0]-=this.sourceWorldWidth_);const I=Math.min(T[0][0],T[1][0],T[2][0]);Math.max(T[0][0],T[1][0],T[2][0])-I<this.sourceWorldWidth_/2&&(M.source=T)}}.bind(this))}a={}}addTriangle_(e,t,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,i]})}addQuad_(e,t,i,r,s,o,a,c,l){const u=Y4([s,o,a,c]),f=this.sourceWorldWidth_?_a(u)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&f>.5&&f<1;let _=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(_=_a(Y4([e,t,i,r]))/this.targetWorldWidth_>.25||_),!g&&this.sourceProj_.isGlobal()&&f&&(_=f>.25||_)),!_&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!zl(u,this.maxSourceExtent_))return;let y=0;if(!(_||isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(c[0])&&isFinite(c[1])))if(l>0)_=!0;else if(y=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(c[0])&&isFinite(c[1])?0:1),1!=y&&2!=y&&4!=y&&8!=y)return;if(l>0){if(!_){const C=this.transformInv_([(e[0]+i[0])/2,(e[1]+i[1])/2]);let x;x=g?(h6(s[0],p)+h6(a[0],p))/2-h6(C[0],p):(s[0]+a[0])/2-C[0];const M=(s[1]+a[1])/2-C[1];_=x*x+M*M>this.errorThresholdSquared_}if(_){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const w=[(t[0]+i[0])/2,(t[1]+i[1])/2],C=this.transformInv_(w),x=[(r[0]+e[0])/2,(r[1]+e[1])/2],M=this.transformInv_(x);this.addQuad_(e,t,w,x,s,o,C,M,l-1),this.addQuad_(x,w,i,r,M,C,a,c,l-1)}else{const w=[(e[0]+t[0])/2,(e[1]+t[1])/2],C=this.transformInv_(w),x=[(i[0]+r[0])/2,(i[1]+r[1])/2],M=this.transformInv_(x);this.addQuad_(e,w,x,r,s,C,M,c,l-1),this.addQuad_(w,t,i,x,C,o,a,M,l-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&y)&&this.addTriangle_(e,i,r,s,a,c),0==(14&y)&&this.addTriangle_(e,i,t,s,a,o),y&&(0==(13&y)&&this.addTriangle_(t,r,e,o,c,s),0==(7&y)&&this.addTriangle_(t,r,i,o,c,a))}calculateSourceExtent(){const e=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(t,i,r){const s=t.source;em(e,s[0]),em(e,s[1]),em(e,s[2])}),e}getTriangles(){return this.triangles_}}(e,i,w,y,M*(void 0!==u?u:.5),x),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=t.getZForResolution(M);let I=this.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(I[1]=sc(I[1],y[1],y[3]),I[3]=sc(I[3],y[1],y[3])):I=tm(I,y)),XS(I)){const F=t.getTileRangeForExtentAndZ(I,this.sourceZ_);for(let P=F.minX;P<=F.maxX;P++)for(let R=F.minY;R<=F.maxY;R++){const k=l(this.sourceZ_,P,R,a);k&&this.sourceTiles_.push(k)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(function(t,i,r){t&&2==t.getState()&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=3;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function pSt(n,e,t,i,r,s,o,a,c,l,u,f){const p=l4(Math.round(t*n),Math.round(t*e),Y0e);if(f||(p.imageSmoothingEnabled=!1),0===c.length)return p.canvas;function g(T){return Math.round(T*t)/t}p.scale(t,t),p.globalCompositeOperation="lighter";const _=[1/0,1/0,-1/0,-1/0];c.forEach(function(T,I,F){sue(_,T.extent)});const y=_a(_),w=Yu(_),C=l4(Math.round(t*y/i),Math.round(t*w/i));f||(C.imageSmoothingEnabled=!1);const x=t/i;c.forEach(function(T,I,F){const P=T.extent[0]-_[0],R=-(T.extent[3]-_[3]),k=_a(T.extent),W=Yu(T.extent);T.image.width>0&&T.image.height>0&&C.drawImage(T.image,l,l,T.image.width-2*l,T.image.height-2*l,P*x,R*x,k*x,W*x)});const M=Q5(o);return a.getTriangles().forEach(function(T,I,F){const P=T.source,R=T.target;let k=P[0][0],W=P[0][1],re=P[1][0],Le=P[1][1],me=P[2][0],Q=P[2][1];const he=g((R[0][0]-M[0])/s),K=g(-(R[0][1]-M[1])/s),ae=g((R[1][0]-M[0])/s),fe=g(-(R[1][1]-M[1])/s),de=g((R[2][0]-M[0])/s),ke=g(-(R[2][1]-M[1])/s),et=k,Fe=W;k=0,W=0,re-=et,Le-=Fe,me-=et,Q-=Fe;const ut=function mCt(n){const e=n.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const c=Math.abs(n[a][i]);c>s&&(s=c,r=a)}if(0===s)return null;const o=n[r];n[r]=n[i],n[i]=o;for(let a=i+1;a<e;a++){const c=-n[a][i]/n[i][i];for(let l=i;l<e+1;l++)i==l?n[a][l]=0:n[a][l]+=c*n[i][l]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}([[re,Le,0,0,ae-he],[me,Q,0,0,de-he],[0,0,re,Le,fe-K],[0,0,me,Q,ke-K]]);if(ut){if(p.save(),p.beginPath(),function fSt(){if(void 0===rN){const n=document.createElement("canvas").getContext("2d");n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Z0e(n,4,5,4,0),Z0e(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;rN=sN(e,0)||sN(e,4)||sN(e,8)}return rN}()||!f){p.moveTo(ae,fe);const It=4,xt=he-ae,Zt=K-fe;for(let an=0;an<It;an++)p.lineTo(ae+g((an+1)*xt/It),fe+g(an*Zt/(It-1))),an!=It-1&&p.lineTo(ae+g((an+1)*xt/It),fe+g((an+1)*Zt/(It-1)));p.lineTo(de,ke)}else p.moveTo(ae,fe),p.lineTo(he,K),p.lineTo(de,ke);p.clip(),p.transform(ut[0],ut[2],ut[1],ut[3],he,K),p.translate(_[0]-et,_[3]-Fe),p.scale(i/t,-i/t),p.drawImage(C.canvas,0,0),p.restore()}}),u&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach(function(T,I,F){const P=T.target,R=(P[0][0]-M[0])/s,k=-(P[0][1]-M[1])/s,W=(P[1][0]-M[0])/s,re=-(P[1][1]-M[1])/s,Le=(P[2][0]-M[0])/s,me=-(P[2][1]-M[1])/s;p.beginPath(),p.moveTo(W,re),p.lineTo(R,k),p.lineTo(Le,me),p.closePath(),p.stroke()}),p.restore()),p.canvas}(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(t,i,r){const s=t.getState();if(0==s||1==s){e++;const o=$s(t,"change",function(a){const c=t.getState();(2==c||3==c||4==c)&&(Ia(o),e--,0===e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,r){0==t.getState()&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ia),this.sourcesListenerKeys_=null}release(){this.canvas_&&(xue(this.canvas_.getContext("2d")),Y0e.push(this.canvas_),this.canvas_=null),super.release()}};class ehe{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function gm(n,e,t,i,r){return void 0!==r?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new ehe(n,e,t,i)}const the=ehe,ASt=class mSt extends T0e{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new the(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),r=t.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!r}getTile(e,t,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let l=a.getSource().getTile(e,t,i,s,o);return 3==l.getState()&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(l)||(l=l.getInterimTile()),l}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=d2(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!qS(s,r))return null;const o=t.pixelRatio,a=t.viewState.projection,c=t.viewState,l=i.getRenderSource(),u=l.getTileGridForProjection(c.projection),f=l.getTilePixelRatio(t.pixelRatio);for(let p=u.getZForResolution(c.resolution);p>=u.getMinZoom();--p){const g=u.getTileCoordForCoordAndZ(r,p),_=l.getTile(p,g[1],g[2],o,a);if(!(_ instanceof K0e||_ instanceof oN)||_ instanceof oN&&4===_.getState())return null;if(2!==_.getState())continue;const y=u.getOrigin(p),w=h4(u.getTileSize(p)),C=u.getResolution(p),x=Math.floor(f*((r[0]-y[0])/C-g[1]*w[0])),M=Math.floor(f*((y[1]-r[1])/C-g[2]*w[1])),T=Math.round(f*l.getGutterForProjection(c.projection));return this.getImageData(_.getImage(),x+T,M+T)}return null}loadedTileCallback(e,t,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(e,t,i)}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,c=r.rotation,l=e.pixelRatio,u=this.getLayer(),f=u.getSource(),p=f.getRevision(),g=f.getTileGridForProjection(s),_=g.getZForResolution(o,f.zDirection),y=g.getResolution(_);let w=e.extent;const C=e.viewState.resolution,x=f.getTilePixelRatio(l),M=Math.round(_a(w)/C*l),T=Math.round(Yu(w)/C*l),I=i.extent&&m6(i.extent);I&&(w=tm(w,m6(i.extent)));const F=y*M/2/x,P=y*T/2/x,R=[a[0]-F,a[1]-P,a[0]+F,a[1]+P],k=g.getTileRangeForExtentAndZ(w,_),W={};W[_]={};const re=this.createLoadedTileFinder(f,s,W),Le=this.tmpExtent,me=this.tmpTileRange_;this.newTiles_=!1;const Q=c?Wz(r.center,C,c,e.size):void 0;for(let wt=k.minX;wt<=k.maxX;++wt)for(let ut=k.minY;ut<=k.maxY;++ut){if(c&&!g.tileCoordIntersectsViewport([_,wt,ut],Q))continue;const It=this.getTile(_,wt,ut,e);if(this.isDrawableTile(It)){const an=br(this);if(2==It.getState()){W[_][It.tileCoord.toString()]=It;let Sn=It.inTransition(an);Sn&&1!==i.opacity&&(It.endTransition(an),Sn=!1),!this.newTiles_&&(Sn||!this.renderedTiles.includes(It))&&(this.newTiles_=!0)}if(1===It.getAlpha(an,e.time))continue}const xt=g.getTileCoordChildTileRange(It.tileCoord,me,Le);let Zt=!1;xt&&(Zt=re(_+1,xt)),Zt||g.forEachTileCoordParentTileRange(It.tileCoord,re,me,Le)}const he=y/o*l/x;Cf(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,c,-M/2,-T/2);const K=Nz(this.pixelTransform);this.useContainer(t,K,this.getBackground(e));const ae=this.context,fe=ae.canvas;jS(this.inversePixelTransform,this.pixelTransform),Cf(this.tempTransform,M/2,T/2,he,he,0,-M/2,-T/2),fe.width!=M||fe.height!=T?(fe.width=M,fe.height=T):this.containerReused||ae.clearRect(0,0,M,T),I&&this.clipUnrotated(ae,e,I),f.getInterpolate()||(ae.imageSmoothingEnabled=!1),this.preRender(ae,e),this.renderedTiles.length=0;let ke,et,Fe,de=Object.keys(W).map(Number);de.sort(N5),1!==i.opacity||this.containerReused&&!f.getOpaque(e.viewState.projection)?(ke=[],et=[]):de=de.reverse();for(let wt=de.length-1;wt>=0;--wt){const ut=de[wt],It=f.getTilePixelSize(ut,l,s),Zt=g.getResolution(ut)/y,an=It[0]*Zt*he,Sn=It[1]*Zt*he,cn=g.getTileCoordForCoordAndZ(Q5(R),ut),Ti=g.getTileCoordExtent(cn),Ot=d2(this.tempTransform,[x*(Ti[0]-R[0])/y,x*(R[3]-Ti[3])/y]),Rt=x*f.getGutterForProjection(s),vn=W[ut];for(const qn in vn){const En=vn[qn],Cn=En.tileCoord,Un=cn[1]-Cn[1],fi=Math.round(Ot[0]-(Un-1)*an),ar=cn[2]-Cn[2],us=Math.round(Ot[1]-(ar-1)*Sn),Oe=Math.round(Ot[0]-Un*an),ve=Math.round(Ot[1]-ar*Sn),Tt=fi-Oe,gn=us-ve,bn=_===ut,In=bn&&1!==En.getAlpha(br(this),e.time);let wi=!1;if(!In)if(ke){Fe=[Oe,ve,Oe+Tt,ve,Oe+Tt,ve+gn,Oe,ve+gn];for(let De=0,Jt=ke.length;De<Jt;++De)if(_!==ut&&ut<et[De]){const ln=ke[De];zl([Oe,ve,Oe+Tt,ve+gn],[ln[0],ln[3],ln[4],ln[7]])&&(wi||(ae.save(),wi=!0),ae.beginPath(),ae.moveTo(Fe[0],Fe[1]),ae.lineTo(Fe[2],Fe[3]),ae.lineTo(Fe[4],Fe[5]),ae.lineTo(Fe[6],Fe[7]),ae.moveTo(ln[6],ln[7]),ae.lineTo(ln[4],ln[5]),ae.lineTo(ln[2],ln[3]),ae.lineTo(ln[0],ln[1]),ae.clip())}ke.push(Fe),et.push(ut)}else ae.clearRect(Oe,ve,Tt,gn);this.drawTileImage(En,e,Oe,ve,Tt,gn,Rt,bn),ke&&!In?(wi&&ae.restore(),this.renderedTiles.unshift(En)):this.renderedTiles.push(En),this.updateUsedTiles(e.usedTiles,f,En)}}return this.renderedRevision=p,this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!b_(this.renderedExtent_,R),this.renderedExtent_=R,this.renderedPixelRatio=l,this.renderedProjection=s,this.manageTilePyramid(e,f,g,l,s,w,_,u.getPreload()),this.scheduleExpireCache(e,f),this.postRender(ae,e),i.extent&&ae.restore(),ae.imageSmoothingEnabled=!0,K!==fe.style.transform&&(fe.style.transform=K),this.container}drawTileImage(e,t,i,r,s,o,a,c){const l=this.getTileImage(e);if(!l)return;const u=br(this),f=t.layerStatesArray[t.layerIndex],p=f.opacity*(c?e.getAlpha(u,t.time):1),g=p!==this.context.globalAlpha;g&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,i,r,s,o),g&&this.context.restore(),p!==f.opacity?t.animate=!0:c&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=function(r,s,o){const a=br(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const r=br(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}manageTilePyramid(e,t,i,r,s,o,a,c,l){const u=br(t);u in e.wantedTiles||(e.wantedTiles[u]={});const f=e.wantedTiles[u],p=e.tileQueue,g=i.getMinZoom(),_=e.viewState.rotation,y=_?Wz(e.viewState.center,e.viewState.resolution,_,e.size):void 0;let C,x,M,T,I,F,w=0;for(F=g;F<=a;++F)for(x=i.getTileRangeForExtentAndZ(o,F,x),M=i.getResolution(F),T=x.minX;T<=x.maxX;++T)for(I=x.minY;I<=x.maxY;++I)_&&!i.tileCoordIntersectsViewport([F,T,I],y)||(a-F<=c?(++w,C=t.getTile(F,T,I,r,s),0==C.getState()&&(f[C.getKey()]=!0,p.isKeyQueued(C.getKey())||p.enqueue([C,u,i.getTileCoordCenter(C.tileCoord),M])),void 0!==l&&l(C)):t.useTile(F,T,I,s));t.updateCacheSize(w,s)}},zE=class vSt extends rSt{constructor(e){super(e)}createRenderer(){return new ASt(this)}};function nhe(n,e,t,i){return void 0!==i?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function j_(n,e,t){return n+"/"+e+"/"+t}function ihe(n){return j_(n[0],n[1],n[2])}const rhe=class xSt extends class _St{constructor(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Ts(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Ts(void 0!==t,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let i,t=0;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let i,t=0;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Ts(!(e in this.entries_),16);const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const i=function wSt(n){return n.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(r){r.tileCoord[0]!==i&&(this.remove(ihe(r.tileCoord)),r.release())}.bind(this))}},MSt=[0,0,0],she=class SSt{constructor(e){let t;if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,Ts(function Qwt(n,e,t){const i=e||N5;return n.every(function(r,s){if(0===s)return!0;const o=i(n[s-1],r);return!(o>0||t&&0===o)})}(this.resolutions_,function(r,s){return s-r},!0),17),!e.origins)for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(t){if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}else t=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,Ts(this.origins_.length==this.resolutions_.length,20));const i=e.extent;void 0!==i&&!this.origin_&&!this.origins_&&(this.origin_=Q5(i)),Ts(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,Ts(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:256,Ts(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map(function(r,s){const o=new the(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,c=r.maxY;a<=c;++a)i([t,s,a])}forEachTileCoordParentTileRange(e,t,i,r){let s,o,a,c=null,l=e[0]-1;for(2===this.zoomFactor_?(o=e[1],a=e[2]):c=this.getTileCoordExtent(e,r);l>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),a=Math.floor(a/2),s=gm(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(c,l,i),t(l,s))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){const s=2*e[1],o=2*e[2];return gm(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return gm(s,o,s,o,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-r),l=Math.floor(s*c),u=Math.floor(o*c);return t<r?gm(l,l,u,u,i):gm(l,Math.floor(c*(s+1))-1,u,Math.floor(c*(o+1))-1,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeExtent(e,t,i){const r=this.getOrigin(e),s=this.getResolution(e),o=h4(this.getTileSize(e),this.tmpSize_);return Xu(r[0]+t.minX*o[0]*s,r[1]+t.minY*o[1]*s,r[0]+(t.maxX+1)*o[0]*s,r[1]+(t.maxY+1)*o[1]*s,i)}getTileRangeForExtentAndZ(e,t,i){const r=MSt;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,r);const s=r[1],o=r[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,r),gm(s,r[1],o,r[2],i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=h4(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=h4(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r;return Xu(o,a,o+s[0]*r,a+s[1]*r,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),c=this.getOrigin(o),l=h4(this.getTileSize(o),this.tmpSize_);let u=a*(e-c[0])/i/l[0],f=a*(c[1]-t)/i/l[1];return r?(u=nE(u,5)-1,f=nE(f,5)-1):(u=tE(u,5),f=tE(f,5)),nhe(o,u,f,s)}getTileCoordForXYAndZ_(e,t,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),c=h4(this.getTileSize(i),this.tmpSize_);let l=(e-o[0])/a/c[0],u=(o[1]-t)/a/c[1];return r?(l=nE(l,5)-1,u=nE(u,5)-1):(l=tE(l,5),u=tE(u,5)),nhe(i,l,u,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){return sc(kz(this.resolutions_,e,t||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return i0e(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}};function ohe(n){let e=n.getDefaultTileGrid();return e||(e=function DSt(n,e,t,i){return function TSt(n,e,t,i){i=void 0!==i?i:"top-left";const r=ahe(n,e,t);return new she({extent:n,origin:uCt(n,i),resolutions:r,tileSize:t})}(cN(n),e,t,i)}(n),n.setDefaultTileGrid(e)),e}function ahe(n,e,t,i){e=void 0!==e?e:42,t=h4(void 0!==t?t:256);const r=Yu(n),s=_a(n);i=i>0?i:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let c=0;c<o;++c)a[c]=i/Math.pow(2,c);return a}function cN(n){let e=(n=Za(n)).getExtent();if(!e){const t=180*$5.degrees/n.getMetersPerUnit();e=Xu(-t,-t,t,t)}return e}class BSt extends c4{constructor(e,t){super(e),this.tile=t}}const RSt=class ISt extends P0e{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileGrid&&h4(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new rhe(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let a,c,l,o=!0;for(let u=i.minX;u<=i.maxX;++u)for(let f=i.minY;f<=i.maxY;++f)c=j_(t,u,f),l=!1,s.containsKey(c)&&(a=s.get(c),l=2===a.getState(),l&&(l=!1!==r(a))),l||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(e,t,i,r,s){return or()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:ohe(e)}getTileCacheForProjection(e){const t=this.getProjection();return Ts(null===t||K5(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),o=h4(r.getTileSize(e),this.tmpSize);return 1==s?o:function Bxt(n,e,t){return void 0===t&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=void 0!==t?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=function ESt(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),s=cN(t);if(qS(s,r))return e;{const o=_a(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,n.getTileCoordForCoordAndZ(r,i)}}(i,e,t)),function bSt(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return!s||s.containsXY(i,r)}(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,r){}};function FSt(n,e){const t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,c){if(o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const u=e.getFullTileRange(o[0]);return Ts(u,55),(u.getHeight()-o[2]-1).toString()})}}class lN extends RSt{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===lN.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=br(t),r=t.getState();let s;1==r?(this.tileLoadingKeys_[i]=!0,s="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=3==r?"tileloaderror":2==r?"tileloadend":void 0),null!=s&&this.dispatchEvent(new BSt(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=function HSt(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function kSt(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=FSt(n[r],e);return function PSt(n){return 1===n.length?n[0]:function(e,t,i){if(e){const r=function CSt(n){return(n[1]<<n[0])+n[2]}(e),s=h6(r,n.length);return n[s](e,t,i)}}}(i)}(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const r=j_(e,t,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const zSt=lN;function NSt(n,e){n.getImage().src=e}const VSt=class OSt extends zSt{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:NSt,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:K0e,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!K5(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return!(this.getProjection()&&e&&!K5(this.getProjection(),e))&&super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||K5(t,e)))return this.tileGrid;{const i=br(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=ohe(e)),this.tileGridForProjection[i]}}getTileCacheForProjection(e){const t=this.getProjection();if(!t||K5(t,e))return this.tileCache;{const i=br(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new rhe(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}}createTile_(e,t,i,r,s,o){const a=[e,t,i],c=this.getTileCoordForTileUrlFunction(a,s),l=c?this.tileUrlFunction(c,r,s):void 0,u=new this.tileClass(a,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener("change",this.handleTileChange.bind(this)),u}getTile(e,t,i,r,s){const o=this.getProjection();if(!o||!s||K5(o,s))return this.getTileInternal(e,t,i,r,o||s);{const a=this.getTileCacheForProjection(s),c=[e,t,i];let l;const u=ihe(c);a.containsKey(u)&&(l=a.get(u));const f=this.getKey();if(l&&l.key==f)return l;{const p=this.getTileGridForProjection(o),g=this.getTileGridForProjection(s),_=this.getTileCoordForTileUrlFunction(c,s),y=new oN(o,p,s,g,c,_,this.getTilePixelRatio(r),this.getGutter(),function(w,C,x,M){return this.getTileInternal(w,C,x,M,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return y.key=f,l?(y.interimTile=l,y.refreshInterimChain(),a.replace(u,y)):a.set(u,y),y}}}getTileInternal(e,t,i,r,s){let o=null;const a=j_(e,t,i),c=this.getKey();if(this.tileCache.containsKey(a)){if(o=this.tileCache.get(a),o.key!=c){const l=o;o=this.createTile_(e,t,i,r,s,c),o.interimTile=0==l.getState()?l.interimTile:l,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(e,t,i,r,s,c),this.tileCache.set(a,o);return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=Za(e);if(i){const r=br(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}},OE=class USt extends VSt{constructor(e){const t=void 0!==(e=e||{}).projection?e.projection:"EPSG:3857",i=void 0!==e.tileGrid?e.tileGrid:function LSt(n){const e=n||{},t=e.extent||Za("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:ahe(t,e.maxZoom,e.tileSize,e.maxResolution)};return new she(i)}({extent:cN(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=void 0!==e.gutter?e.gutter:0}getGutter(){return this.gutter_}},WSt=class QSt extends OE{constructor(e){let t;t=void 0!==(e=e||{}).attributions?e.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,opaque:void 0===e.opaque||e.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:void 0!==e.url?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:e.wrapX,zDirection:e.zDirection})}};var x3=(()=>(function(n){n.OSM="OSM",n.Google="Google",n.OSMSatellite="OSMSatellite",n.GoogleSatellite="GoogleSatellite"}(x3||(x3={})),x3))();let che=(()=>{class n{constructor(t){this.cookieService=t,this.cookieKey="ol-basemap",this.basemap$=new Ao(x3.OSM)}getStore(){const t=this.cookieService.get(this.cookieKey);if(""===t)return;const i=JSON.parse(t);i in x3&&this.basemap$.next(i)}setStore(){this.cookieService.set(this.cookieKey,JSON.stringify(this.basemap$.value))}getBaseLayers(){return this.getStore(),[new zE({visible:this.basemap$.value===x3.OSM,properties:{basemap:!0,key:x3.OSM},source:new WSt}),new zE({visible:this.basemap$.value===x3.OSMSatellite,properties:{basemap:!0,key:x3.OSMSatellite},source:new OE({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",maxZoom:19})}),new zE({visible:this.basemap$.value===x3.Google,properties:{basemap:!0,key:x3.Google},source:new OE({url:"http://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}"})}),new zE({visible:this.basemap$.value===x3.GoogleSatellite,properties:{basemap:!0,key:x3.GoogleSatellite},source:new OE({url:"http://mt0.google.com/vt/lyrs=s&hl=en&x={x}&y={y}&z={z}"})})]}nextBasemap(){const t=Object.values(x3),i=t.indexOf(this.basemap$.value);this.basemap$.next(t[(i+1)%t.length]),this.map.getLayers().getArray().filter(r=>!0===r.getProperties().basemap).forEach(r=>r.setVisible(r.getProperties().key===this.basemap$.value)),this.setStore()}}return n.\u0275fac=function(t){return new(t||n)(Ye(Iu))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uhe=[0,0,0,0],mm=[];class hN extends c4{constructor(e,t,i){super(e),this.features=t,this.mapBrowserEvent=i}}function $St(n,e){return n.index-e.index}function hhe(n,e,t){const i=e.geometry;if("Circle"===i.getType()){let s=i;if(1===e.index){const o=g6();o&&(s=s.clone().transform(o,t));const a=nm(s.getCenter(),oc(n)),c=Math.sqrt(a)-s.getRadius();return c*c}}const r=oc(n);return mm[0]=oc(e.segment[0]),mm[1]=oc(e.segment[1]),function MCt(n,e){return nm(n,Aue(n,e))}(r,mm)}function fhe(n,e,t){const i=e.geometry;if("Circle"===i.getType()&&1===e.index){let s=i;const o=g6();return o&&(s=s.clone().transform(o,t)),F_(s.getClosestPoint(oc(n)))}const r=oc(n);return mm[0]=oc(e.segment[0]),mm[1]=oc(e.segment[1]),F_(Aue(r,mm))}function qSt(){const n=NO();return function(e,t){return n.Point}}const dhe=class jSt extends Tf{constructor(e){let t;if(super(e),this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:d0e,this.defaultDeleteCondition_=function(i){return function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}(i)&&h0e(i)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:um,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new qO,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new dm({source:new G_({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:qSt(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null,e.features?t=e.features:e.source&&(this.source_=e.source,t=new N1(this.source_.getFeatures()),this.source_.addEventListener("addfeature",this.handleSourceAdd_.bind(this)),this.source_.addEventListener("removefeature",this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener("add",this.handleFeatureAdd_.bind(this)),this.features_.addEventListener("remove",this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=void 0===e.snapToPointer?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),e.addEventListener("change",this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new N1;const i=this.featuresBeingModified_.getArray();for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0,c=o.length;a<c;++a){const l=o[a].feature;l&&!i.includes(l)&&this.featuresBeingModified_.push(l)}}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new hN("modifystart",this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener("change",this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,i=[];t.forEach(function(r){e===r.feature&&i.push(r)});for(let r=i.length-1;r>=0;--r){const s=i[r];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===s&&this.dragSegments_.splice(o,1);t.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const i=t.getCoordinates(),r={feature:e,geometry:t,segment:[i,i]};this.rBush_.insert(t.getExtent(),r)}writeMultiPointGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r],a={feature:e,geometry:t,depth:[r],index:r,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}}writeLineStringGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length-1;r<s;++r){const o=i.slice(r,r+2),a={feature:e,geometry:t,index:r,segment:o};this.rBush_.insert(Y4(o),a)}}writeMultiLineStringGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length-1;a<c;++a){const l=o.slice(a,a+2),u={feature:e,geometry:t,depth:[r],index:a,segment:l};this.rBush_.insert(Y4(l),u)}}}writePolygonGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length-1;a<c;++a){const l=o.slice(a,a+2),u={feature:e,geometry:t,depth:[r],index:a,segment:l};this.rBush_.insert(Y4(l),u)}}}writeMultiPolygonGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length;a<c;++a){const l=o[a];for(let u=0,f=l.length-1;u<f;++u){const p=l.slice(u,u+2),g={feature:e,geometry:t,depth:[a,r],index:u,segment:p};this.rBush_.insert(Y4(p),g)}}}}writeCircleGeometry_(e,t){const i=t.getCenter(),r={feature:e,geometry:t,index:0,segment:[i,i]},s={feature:e,geometry:t,index:1,segment:[i,i]},o=[r,s];r.featureSegments=o,s.featureSegments=o,this.rBush_.insert(KS(i),r);let a=t;const c=g6();if(c&&this.getMap()){const l=this.getMap().getView().getProjection();a=a.clone().transform(c,l),a=c0e(a).transform(l,c)}this.rBush_.insert(a.getExtent(),s)}writeGeometryCollectionGeometry_(e,t){const i=t.getGeometriesArray();for(let r=0;r<i.length;++r){const s=i[r];(0,this.SEGMENT_WRITERS_[s.getType()])(e,s)}}createOrUpdateVertexFeature_(e,t,i){let r=this.vertexFeature_;return r?r.getGeometry().setCoordinates(e):(r=new X4(new u4(e)),this.vertexFeature_=r,this.overlay_.getSource().addFeature(r)),r.set("features",t),r.set("geometries",i),r}handleEvent(e){if(!e.originalEvent)return!0;let t;return this.lastPointerEvent_=e,!e.map.getView().getInteracting()&&e.type==Ns.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=Ns.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==Ns.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],i=[],r=[];for(let s=0,o=this.dragSegments_.length;s<o;++s){const a=this.dragSegments_[s],c=a[0],l=c.feature;i.includes(l)||i.push(l);const u=c.geometry;r.includes(u)||r.push(u);const f=c.depth;let p;const g=c.segment,_=a[1];for(;t.length<u.getStride();)t.push(g[_][t.length]);switch(u.getType()){case"Point":p=t,g[0]=t,g[1]=t;break;case"MultiPoint":p=u.getCoordinates(),p[c.index]=t,g[0]=t,g[1]=t;break;case"LineString":p=u.getCoordinates(),p[c.index+_]=t,g[_]=t;break;case"MultiLineString":case"Polygon":p=u.getCoordinates(),p[f[0]][c.index+_]=t,g[_]=t;break;case"MultiPolygon":p=u.getCoordinates(),p[f[1]][f[0]][c.index+_]=t,g[_]=t;break;case"Circle":if(g[0]=t,g[1]=t,0===c.index)this.changingFeature_=!0,u.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;const y=e.map.getView().getProjection();let w=oE(oc(u.getCenter()),oc(t));const C=g6();if(C){const x=u.clone().transform(C,y);x.setRadius(w),w=x.transform(y,C).getRadius()}u.setRadius(w),this.changingFeature_=!1}}p&&this.setGeometryCoordinates_(u,p)}this.createOrUpdateVertexFeature_(t,i,r)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const i=this.vertexFeature_;if(i){const r=e.map.getView().getProjection(),s=[],o=i.getGeometry().getCoordinates(),a=Y4([o]),c=this.rBush_.getInExtent(a),l={};c.sort($St);for(let u=0,f=c.length;u<f;++u){const p=c[u],g=p.segment;let _=br(p.geometry);const y=p.depth;if(y&&(_+="-"+y.join("-")),l[_]||(l[_]=new Array(2)),"Circle"!==p.geometry.getType()||1!==p.index)if(!Zu(g[0],o)||l[_][0])if(!Zu(g[1],o)||l[_][1])br(g)in this.vertexSegments_&&!l[_][0]&&!l[_][1]&&this.insertVertexCondition_(e)&&s.push(p);else{if(l[_][0]&&0===l[_][0].index){let w=p.geometry.getCoordinates();switch(p.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":w=w[y[1]];case"Polygon":if(p.index!==w[y[0]].length-2)continue}}this.dragSegments_.push([p,1]),l[_][1]=p}else this.dragSegments_.push([p,0]),l[_][0]=p;else Zu(fhe(t,p,r),o)&&!l[_][0]&&(this.dragSegments_.push([p,0]),l[_][0]=p)}s.length&&this.willModifyFeatures_(e,[s]);for(let u=s.length-1;u>=0;--u)this.insertVertex_(s[u],o)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const i=this.dragSegments_[t][0],r=i.geometry;if("Circle"===r.getType()){const s=r.getCenter(),o=i.featureSegments[0],a=i.featureSegments[1];o.segment[0]=s,o.segment[1]=s,a.segment[0]=s,a.segment[1]=s,this.rBush_.update(KS(s),o);let c=r;const l=g6();if(l){const u=e.map.getView().getProjection();c=c.clone().transform(l,u),c=c0e(c).transform(u,l)}this.rBush_.update(c.getExtent(),a)}else this.rBush_.update(Y4(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new hN("modifyend",this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,i){const r=i||t.getCoordinateFromPixel(e),s=t.getView().getProjection(),o=function(l,u){return hhe(r,l,s)-hhe(r,u,s)};let a,c;if(this.hitDetection_){const l="object"==typeof this.hitDetection_?u=>u===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(u,f,p)=>{if("Point"===(p=p||u.getGeometry()).getType()&&this.features_.getArray().includes(u)){c=p;const g=p.getFlatCoordinates().slice(0,2);a=[{feature:u,geometry:p,segment:[g,g]}]}return!0},{layerFilter:l})}if(!a){const f=_E($S(m6(KS(r,uhe)),t.getView().getResolution()*this.pixelTolerance_,uhe));a=this.rBush_.getInExtent(f)}if(a&&a.length>0){const l=a.sort(o)[0],u=l.segment;let f=fhe(r,l,s);const p=t.getPixelFromCoordinate(f);let g=oE(e,p);if(c||g<=this.pixelTolerance_){const _={};if(_[br(u)]=!0,this.snapToPointer_||(this.delta_[0]=f[0]-r[0],this.delta_[1]=f[1]-r[1]),"Circle"===l.geometry.getType()&&1===l.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(f,[l.feature],[l.geometry]);else{const y=t.getPixelFromCoordinate(u[0]),w=t.getPixelFromCoordinate(u[1]),C=nm(p,y),x=nm(p,w);g=Math.sqrt(Math.min(C,x)),this.snappedToVertex_=g<=this.pixelTolerance_,this.snappedToVertex_&&(f=C>x?u[1]:u[0]),this.createOrUpdateVertexFeature_(f,[l.feature],[l.geometry]);const M={};M[br(l.geometry)]=!0;for(let T=1,I=a.length;T<I;++T){const F=a[T].segment;if(!(Zu(u[0],F[0])&&Zu(u[1],F[1])||Zu(u[0],F[1])&&Zu(u[1],F[0])))break;{const P=br(a[T].geometry);P in M||(M[P]=!0,_[br(F)]=!0)}}}return void(this.vertexSegments_=_)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const i=e.segment,r=e.feature,s=e.geometry,o=e.depth,a=e.index;let c;for(;t.length<s.getStride();)t.push(0);switch(s.getType()){case"MultiLineString":case"Polygon":c=s.getCoordinates(),c[o[0]].splice(a+1,0,t);break;case"MultiPolygon":c=s.getCoordinates(),c[o[1]][o[0]].splice(a+1,0,t);break;case"LineString":c=s.getCoordinates(),c.splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(s,c);const l=this.rBush_;l.remove(e),this.updateSegmentIndices_(s,a,o,1);const u={segment:[i[0],t],feature:r,geometry:s,depth:o,index:a};l.insert(Y4(u.segment),u),this.dragSegments_.push([u,1]);const f={segment:[t,i[1]],feature:r,geometry:s,depth:o,index:a+1};l.insert(Y4(f.segment),f),this.dragSegments_.push([f,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Ns.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new hN("modifyend",this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let r,s,o,a,c,l,u,f,p,g,_,i=!1;for(c=e.length-1;c>=0;--c)o=e[c],g=o[0],_=br(g.feature),g.depth&&(_+="-"+g.depth.join("-")),_ in t||(t[_]={}),0===o[1]?(t[_].right=g,t[_].index=g.index):1==o[1]&&(t[_].left=g,t[_].index=g.index+1);for(_ in t){switch(p=t[_].right,u=t[_].left,l=t[_].index,f=l-1,g=void 0!==u?u:p,f<0&&(f=0),a=g.geometry,s=a.getCoordinates(),r=s,i=!1,a.getType()){case"MultiLineString":s[g.depth[0]].length>2&&(s[g.depth[0]].splice(l,1),i=!0);break;case"LineString":s.length>2&&(s.splice(l,1),i=!0);break;case"MultiPolygon":r=r[g.depth[1]];case"Polygon":r=r[g.depth[0]],r.length>4&&(l==r.length-1&&(l=0),r.splice(l,1),i=!0,0===l&&(r.pop(),r.push(r[0]),f=r.length-1))}if(i){this.setGeometryCoordinates_(a,s);const y=[];if(void 0!==u&&(this.rBush_.remove(u),y.push(u.segment[0])),void 0!==p&&(this.rBush_.remove(p),y.push(p.segment[1])),void 0!==u&&void 0!==p){const w={depth:g.depth,feature:g.feature,geometry:g.geometry,index:f,segment:y};this.rBush_.insert(Y4(w.segment),w)}this.updateSegmentIndices_(a,l,g.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return i}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,i,r){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(void 0===i||void 0===s.depth||c6(s.depth,i))&&s.index>t&&(s.index+=r)})}};class NE extends A6{constructor(e,t,i){super(),void 0!==i&&void 0===t?this.setFlatCoordinates(i,e):this.setCenterAndRadius(e,t=t||0,i)}clone(){const e=new NE(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=e-s[0],a=t-s[1],c=o*o+a*a;if(c<r){if(0===c)for(let l=0;l<this.stride;++l)i[l]=s[l];else{const l=this.getRadius()/Math.sqrt(c);i[0]=s[0]+l*o,i[1]=s[1]+l*a;for(let u=2;u<this.stride;++u)i[u]=s[u]}return i.length=this.stride,c}return r}containsXY(e,t){const i=this.flatCoordinates,r=e-i[0],s=t-i[1];return r*r+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,i=t[this.stride]-t[0];return Xu(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){if(zl(e,this.getExtent())){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]||Gz(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,i=this.flatCoordinates[t]-this.flatCoordinates[0],r=e.slice();r[t]=r[0]+i;for(let s=1;s<t;++s)r[t+s]=e[s];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(e,t,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let s=Kue(r,0,e);r[s++]=r[0]+t;for(let o=1,a=this.stride;o<a;++o)r[s++]=r[o];r.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const i=this.getCenter(),r=this.getStride();this.setCenter(dO(i,0,i.length,r,e,t,i)),this.changed()}translate(e,t){const i=this.getCenter(),r=this.getStride();this.setCenter(Wue(i,0,i.length,r,e,t,i)),this.changed()}}const KSt=NE;function phe(n,e,t,i,r,s,o){let a,c;const l=(t-e)/i;if(1===l)a=e;else if(2===l)a=e,c=r;else if(0!==l){let u=n[e],f=n[e+1],p=0;const g=[0];for(let w=e+i;w<t;w+=i){const C=n[w],x=n[w+1];p+=Math.sqrt((C-u)*(C-u)+(x-f)*(x-f)),g.push(p),u=C,f=x}const _=r*p,y=function Uwt(n,e,t){let i,r;t=t||N5;let s=0,o=n.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+t(n[i],e),r<0?s=i+1:(o=i,a=!r);return a?s:~s}(g,_);y<0?(c=(_-g[-y-2])/(g[-y-1]-g[-y-2]),a=e+(-y-2)*i):a=e+y*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=void 0===a?NaN:void 0===c?n[a+u]:xf(n[a+u],n[a+i+u],c);return s}function fN(n,e,t,i,r,s){if(t==e)return null;let o;if(r<n[e+i-1])return s?(o=n.slice(e,e+i),o[i-1]=r,o):null;if(n[t-1]<r)return s?(o=n.slice(t-i,t),o[i-1]=r,o):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,c=t/i;for(;a<c;){const p=a+c>>1;r<n[(p+1)*i-1]?c=p:a=p+1}const l=n[a*i-1];if(r==l)return n.slice((a-1)*i,(a-1)*i+i);const f=(r-l)/(n[(a+1)*i-1]-l);o=[];for(let p=0;p<i-1;++p)o.push(xf(n[(a-1)*i+p],n[a*i+p],f));return o.push(r),o}class VE extends A6{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}appendCoordinate(e){this.flatCoordinates?qu(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new VE(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<U5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(pO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),mO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return n0e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:fN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t=void 0!==t&&t)}getCoordinates(){return v6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return phe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return QO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=CE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new VE(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return xE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wE(this.flatCoordinates,0,e,this.stride),this.changed()}}const Bf=VE;class UE extends A6{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(void 0!==t&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{let r=this.getLayout();const s=e,o=[],a=[];for(let c=0,l=s.length;c<l;++c){const u=s[c];0===c&&(r=u.getLayout()),qu(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=a}}appendLineString(e){this.flatCoordinates?qu(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new UE(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<U5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(gO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:function XSt(n,e,t,i,r,s,o){if(o)return fN(n,e,t[t.length-1],i,r,s);let a;if(r<n[i-1])return s?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return s?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let c=0,l=t.length;c<l;++c){const u=t[c];if(e!=u){if(r<n[e+i-1])return null;if(r<=n[u-1])return fN(n,e,u,i,r,!1);e=u}}return null}(this.flatCoordinates,0,this.ends_,this.stride,e,t=void 0!==t&&t,i=void 0!==i&&i)}getCoordinates(){return k_(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Bf(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=t[o],l=new Bf(e.slice(s,c),i);r.push(l),s=c}return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const c=r[o];qu(e,phe(t,i,c,s,.5)),i=c}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=function Xue(n,e,t,i,r,s,o,a){for(let c=0,l=t.length;c<l;++c){const u=t[c];o=CE(n,e,u,i,r,s,o),a.push(o),e=u}return o}(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new UE(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return function Hbt(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){if(xE(n,e,t[s],i,r))return!0;e=t[s]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=vO(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const dN=UE;class pN extends A6{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){this.flatCoordinates?qu(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){const e=new pN(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<U5(this.getExtent(),e,t))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,c=s.length;a<c;a+=o){const l=bf(e,t,s[a],s[a+1]);if(l<r){r=l;for(let u=0;u<o;++u)i[u]=s[a+u];i.length=o}}return r}getCoordinates(){return v6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){return e<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=e?null:new u4(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=i){const a=new u4(e.slice(s,s+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,s=t.length;r<s;r+=i)if(Vz(e,t[r],t[r+1]))return!0;return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wE(this.flatCoordinates,0,e,this.stride),this.changed()}}const gN=pN;class GE extends A6{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){let r=this.getLayout();const s=e,o=[],a=[];for(let c=0,l=s.length;c<l;++c){const u=s[c];0===c&&(r=u.getLayout());const f=o.length,p=u.getEnds();for(let g=0,_=p.length;g<_;++g)p[g]+=f;qu(o,u.getFlatCoordinates()),a.push(p)}t=r,e=o,i=a}void 0!==t&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(this.flatCoordinates){const i=this.flatCoordinates.length;qu(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,s=t.length;r<s;++r)t[r]+=i}else this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new GE(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<U5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function Ebt(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=gO(n,e,a,i,r),e=a[a.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function Tbt(n,e,t,i,r,s,o,a,c,l,u){u=u||[NaN,NaN];for(let f=0,p=t.length;f<p;++f){const g=t[f];l=AO(n,e,g,i,r,s,o,a,c,l,u),e=g[g.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return function kbt(n,e,t,i,r,s){if(0===t.length)return!1;for(let o=0,a=t.length;o<a;++o){const c=t[o];if(wO(n,e,c,i,r,s))return!0;e=c[c.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return function Rbt(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=Jue(n,e,a,i),e=a[a.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),o0e(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,_O(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=function YSt(n,e,t,i){const r=[];let s=[1/0,1/0,-1/0,-1/0];for(let o=0,a=t.length;o<a;++o){const c=t[o];s=rue(n,e,c[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=c[c.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function Pbt(n,e,t,i,r){let s=[];for(let o=0,a=t.length;o<a;++o){const c=t[o];s=t0e(n,e,c,i,r,2*o,s),e=c[c.length-1]}return s}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new gN(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;!function Nbt(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!s0e(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}(e,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=o0e(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=e,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=function Bbt(n,e,t,i,r,s,o,a){for(let c=0,l=t.length;c<l;++c){const u=t[c],f=[];o=Yue(n,e,u,i,r,s,o,f),a.push(f),e=u[u.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new GE(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(0===e)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(0!==t)for(let s=0,o=i.length;s<o;++s)i[s]-=t;return new ep(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const c=i[o].slice(),l=c[c.length-1];if(0!==s)for(let f=0,p=c.length;f<p;++f)c[f]-=s;const u=new ep(t.slice(s,l),e,c);r.push(u),s=l}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return function zbt(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(r0e(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=function Lbt(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=vO(n,e,t[o],i,r[s]);0===c.length&&(c[0]=e),r[s++]=c,e=c[c.length-1]}return r.length=s,r}(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()}}const mN=GE;class WE extends c4{constructor(e,t){super(e),this.feature=t}}function jE(n,e){return bf(n[0],n[1],e[0],e[1])}function Am(n,e){const t=n.length;return e<0?n[e+t]:e>=t?n[e-t]:n[e]}function $E(n,e,t){let i,r;e<t?(i=e,r=t):(i=t,r=e);const s=Math.ceil(i),o=Math.floor(r);if(s>o)return jE(vm(n,i),vm(n,r));let a=0;i<s&&(a+=jE(vm(n,i),Am(n,s))),o<r&&(a+=jE(Am(n,o),vm(n,r)));for(let c=s;c<o-1;++c)a+=jE(Am(n,c),Am(n,c+1));return a}function ghe(n,e,t){if(e instanceof Bf)qE(n,e.getCoordinates(),!1,t);else if(e instanceof dN){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r)qE(n,i[r],!1,t)}else if(e instanceof ep){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r)qE(n,i[r],!0,t)}else if(e instanceof mN){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length;a<c;++a)qE(n,o[a],!0,t)}}else if(e instanceof JO){const i=e.getGeometries();for(let r=0;r<i.length;++r)ghe(n,i[r],t)}}const AN={index:-1,endIndex:NaN};function qE(n,e,t,i){const r=n[0],s=n[1];for(let o=0,a=e.length-1;o<a;++o){const u=mhe(r,s,e[o],e[o+1]);if(0===u.squaredDistance){const f=o+u.along;return void i.push({coordinates:e,ring:t,startIndex:f,endIndex:f})}}}const vN={along:0,squaredDistance:0};function mhe(n,e,t,i){const r=t[0],s=t[1],c=i[0]-r,l=i[1]-s;let u=0,f=r,p=s;return(0!==c||0!==l)&&(u=sc(((n-r)*c+(e-s)*l)/(c*c+l*l),0,1),f+=c*u,p+=l*u),vN.along=u,vN.squaredDistance=eE(bf(n,e,f,p),10),vN}function vm(n,e){const t=n.length;let i=Math.floor(e);const r=e-i;i>=t?i-=t:i<0&&(i+=t);let s=i+1;s>=t&&(s-=t);const o=n[i],a=o[0],c=o[1],l=n[s];return[a+(l[0]-a)*r,c+(l[1]-c)*r]}function tEt(){const n=NO();return function(e,t){return n[e.getGeometry().getType()]}}const Ahe=class eEt extends Tf{constructor(e){const t=e;t.stopDown||(t.stopDown=Xg),super(t),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function nEt(n){switch(n){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+n)}}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:"Polygon"===this.mode_?3:2,this.maxPoints_="Circle"===this.mode_?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:th,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let i=e.geometryFunction;if(!i){const r=this.mode_;if("Circle"===r)i=function(s,o,a){const c=o||new KSt([NaN,NaN]),l=oc(s[0]),u=nm(l,oc(s[s.length-1]));c.setCenterAndRadius(l,Math.sqrt(u),this.geometryLayout_);const f=g6();return f&&c.transform(a,f),c};else{let s;"Point"===r?s=u4:"LineString"===r?s=Bf:"Polygon"===r&&(s=ep),i=function(o,a,c){return a?a.setCoordinates("Polygon"===r?o[0].length?[o[0].concat([o[0][0]])]:[]:o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a}}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new dm({source:new G_({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:tEt(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:IO,this.freehandCondition_=e.freehand?um:e.freehandCondition?e.freehandCondition:BO,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener("active",this.updateState_)}setTrace(e){let t;t=e?!0===e?um:e:DO,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){"contextmenu"===e.originalEvent.type&&e.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(e);let t=e.type===Ns.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Ns.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Ns.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===Ns.POINTERDOWN?i=!1:t&&this.getPointerCount()<2?(i=e.type===Ns.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===Ns.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e)):e.type===Ns.DBLCLICK&&(i=!1),super.handleEvent(e)&&i}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Ef(Ns.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active)return void this.deactivateTrace_();const t=this.getMap(),s=Y4([t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_])]),o=this.traceSource_.getFeaturesInExtent(s);if(0===o.length)return;const a=function ZSt(n,e){const t=[];for(let i=0;i<e.length;++i)ghe(n,e[i].getGeometry(),t);return t}(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const i=e.startIndex<=e.endIndex;i===e.startIndex<=t?i&&t>e.endIndex||!i&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(i&&t<e.endIndex||!i&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let i=0;if(e<t){const r=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),i=s-r+1}else{const r=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),i=r-s+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(e,t,i){if(t===i)return;const r=[];if(t<i){const s=Math.ceil(t);let o=Math.floor(i);o===i&&(o-=1);for(let a=s;a<=o;++a)r.push(Am(e.coordinates,a))}else{const s=Math.floor(t);let o=Math.ceil(i);o===i&&(o+=1);for(let a=s;a>=o;--a)r.push(Am(e.coordinates,a))}r.length&&this.appendCoordinates(r)}updateTrace_(e){const t=this.traceState_;if(!t.active||-1===t.targetIndex&&oE(t.startPx,e.pixel)<this.snapTolerance_)return;const i=function JSt(n,e,t,i){const r=n[0],s=n[1];let o=1/0,a=-1,c=NaN;for(let f=0;f<e.targets.length;++f){const p=e.targets[f],g=p.coordinates;let y,_=1/0;for(let w=0;w<g.length-1;++w){const M=mhe(r,s,g[w],g[w+1]);M.squaredDistance<_&&(_=M.squaredDistance,y=w+M.along)}_<o&&(o=_,p.ring&&e.targetIndex===f&&(p.endIndex>p.startIndex?y<p.startIndex&&(y+=g.length):p.endIndex<p.startIndex&&y>p.startIndex&&(y-=g.length)),c=y,a=f)}const l=e.targets[a];let u=l.ring;if(e.targetIndex===a&&u){const f=vm(l.coordinates,c);oE(t.getPixelFromCoordinate(f),e.startPx)>i&&(u=!1)}if(u){const f=l.coordinates,p=f.length,g=l.startIndex,_=c;if(g<_){const y=$E(f,g,_);$E(f,g,_-p)<y&&(c-=p)}else{const y=$E(f,g,_);$E(f,g,_+p)<y&&(c+=p)}}return AN.index=a,AN.endIndex=c,AN}(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==i.index){if(-1!==t.targetIndex){const c=t.targets[t.targetIndex];this.removeTracedCoordinates_(c.startIndex,c.endIndex)}const a=t.targets[i.index];this.addTracedCoordinates_(a,a.startIndex,i.endIndex)}else this.addOrRemoveTracedCoordinates_(t.targets[t.targetIndex],i.endIndex);t.targetIndex=i.index;const r=t.targets[t.targetIndex];r.endIndex=i.endIndex;const s=vm(r.coordinates,r.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let t=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const i=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const r=!this.finishCoordinate_;r&&this.startDrawing_(e.coordinate),!r&&this.freehand_?this.finishDrawing():!this.freehand_&&(!r||"Point"===this.mode_)&&(this.atFinish_(e.pixel,i)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,i=e.pixel,r=t[0]-i[0],s=t[1]-i[1],o=r*r+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(e),this.modifyDrawing_(e.coordinate)):this.createOrUpdateSketchPoint_(e.coordinate.slice())}atFinish_(e,t){let i=!1;if(this.sketchFeature_){let r=!1,s=[this.finishCoordinate_];const o=this.mode_;if("Point"===o)i=!0;else if("Circle"===o)i=2===this.sketchCoords_.length;else if("LineString"===o)r=!t&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===o){const a=this.sketchCoords_;r=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],s=t?[a[0][0]]:[a[0][0],a[0][a[0].length-2]]}if(r){const a=this.getMap();for(let c=0,l=s.length;c<l;c++){const u=s[c],f=a.getPixelFromCoordinate(u),p=e[0]-f[0],g=e[1]-f[1],_=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(p*p+g*g)<=_,i){this.finishCoordinate_=u;break}}}}return i}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new X4(new u4(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new X4);const t=e.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new Bf(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(e){const t=this.getMap().getView().getProjection(),i=yE(this.geometryLayout_);for(;e.length<i;)e.push(0);this.finishCoordinate_=e,"Point"===this.mode_?this.sketchCoords_=e.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new X4(new Bf(this.sketchLineCoords_)));const r=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new X4,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new WE("drawstart",this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),i=this.sketchFeature_.getGeometry(),r=t.getView().getProjection(),s=yE(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);"Point"===this.mode_?a=this.sketchCoords_:"Polygon"===this.mode_?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,r),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),"Polygon"===i.getType()&&"Polygon"!==this.mode_?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let r,s;const o=this.mode_;"LineString"===o||"Circle"===o?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),this.geometryFunction_(s,t,i)):"Polygon"===o&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),r&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,t,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),r&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),r=this.mode_;for(let s=0;s<e;++s){let o;if("LineString"===r||"Circle"===r){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,t,i),"Polygon"===t.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if("Polygon"===r){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const c=o[o.length-2].slice();o[o.length-1]=c,this.createOrUpdateSketchPoint_(c)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,i)}if(1===o.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let t=this.sketchCoords_;const i=e.getGeometry(),r=this.getMap().getView().getProjection();"LineString"===this.mode_?(t.pop(),this.geometryFunction_(t,i,r)):"Polygon"===this.mode_&&(t[0].pop(),this.geometryFunction_(t,i,r),t=i.getCoordinates()),"MultiPoint"===this.type_?e.setGeometry(new gN([t])):"MultiLineString"===this.type_?e.setGeometry(new dN([t])):"MultiPolygon"===this.type_&&e.setGeometry(new mN([t])),this.dispatchEvent(new WE("drawend",e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new WE("drawabort",e))}appendCoordinates(e){const t=this.mode_,i=!this.sketchFeature_;let r;if(i&&this.startDrawing_(e[0]),"LineString"===t||"Circle"===t)r=this.sketchCoords_;else{if("Polygon"!==t)return;r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}i&&r.shift(),r.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const i=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=i.getCoordinates();const r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.sketchPoint_=new X4(new u4(r)),this.updateSketchFeatures_(),this.dispatchEvent(new WE("drawstart",this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}};var J4=(()=>(function(n){n.Length="LineString",n.Area="Polygon",n.Point="Point"}(J4||(J4={})),J4))();let vhe=(()=>{class n{constructor(){this.DrawType=J4,this.active=!1,this.showSegments=!0,this.clearPrevious=!0,this.idle=!0,this.drawType=J4.Length,this.segmentStyles=[],this.source=new G_,this.tip="",this.halfAreaTip="Click to start",this.subscriptions=[],this.style=new F2({fill:new Oo({color:"rgba(255, 255, 255, 0.2)"}),stroke:new qc({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new y6({radius:5,stroke:new qc({color:"rgba(0, 0, 0, 0.7)"}),fill:new Oo({color:"rgba(255, 255, 255, 0.2)"})})}),this.labelStyle=new F2({text:new Lf({font:"14px Calibri,sans-serif",fill:new Oo({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Oo({color:"rgba(0, 0, 0, 0.7)"}),padding:[3,3,3,3],textBaseline:"bottom",offsetY:-15}),image:new P_({radius:8,points:3,angle:Math.PI,displacement:[0,8],fill:new Oo({color:"rgba(0, 0, 0, 0.7)"})})}),this.tipStyle=new F2({text:new Lf({font:"12px Calibri,sans-serif",fill:new Oo({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Oo({color:"rgba(0, 0, 0, 0.4)"}),padding:[2,2,2,2],textAlign:"left",offsetX:15})}),this.modifyStyle=new F2({image:new y6({radius:5,stroke:new qc({color:"rgba(0, 0, 0, 0.7)"}),fill:new Oo({color:"rgba(0, 0, 0, 0.4)"})}),text:new Lf({text:"Drag to modify",font:"12px Calibri,sans-serif",fill:new Oo({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Oo({color:"rgba(0, 0, 0, 0.7)"}),padding:[2,2,2,2],textAlign:"left",offsetX:15})}),this.segmentStyle=new F2({text:new Lf({font:"12px Calibri,sans-serif",fill:new Oo({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new Oo({color:"rgba(0, 0, 0, 0.4)"}),padding:[2,2,2,2],textBaseline:"bottom",offsetY:-12}),image:new P_({radius:6,points:3,angle:Math.PI,displacement:[0,7],fill:new Oo({color:"rgba(0, 0, 0, 0.4)"})})}),this.modify=new dhe({source:this.source,style:this.modifyStyle})}get type(){return this.drawType===J4.Area?"area":"distance"}get idleTip(){return`Start measurement of ${this.type}`}get activeTip(){return`Double click to close ${this.type}`}init(t){this.map=t,this.addVectorLayers()}nextType(){this.drawType=this.drawType===J4.Area?J4.Length:J4.Area,this.source.clear(),this.activate(!1)}addVectorLayers(){this.vectorLayer=new dm({source:this.source,style:t=>this.styleFunction(t),zIndex:9990,className:"measureTool",properties:{key:"measureTool"}}),this.map.addLayer(this.vectorLayer)}activate(t){void 0===t&&(t=!this.active),t?(this.stopMeasure(),this.active=!0,this.segmentStyles=[this.segmentStyle],this.draw=new Ahe({geometryName:"measure",source:this.source,type:this.drawType,style:i=>this.styleFunction(i),condition:i=>1===i.activePointers[0].buttons}),this.subscriptions.push(Vc(this.map.getViewport(),"contextmenu").subscribe(i=>{this.idle||this.segmentStyles.length-1==0?(this.activate(!1),i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation()):this.draw.finishDrawing()}),Vc(this.draw,"drawstart").subscribe(()=>{this.modify.setActive(!1),this.idle=!1,console.log(this.clearPrevious),this.clearPrevious&&(this.source.clear(),this.segmentStyles=[this.segmentStyle])}),Vc(this.draw,"drawend").subscribe(()=>{console.log("12 ",this.segmentStyles.length),this.idle=!0,this.modify.setActive(!0),this.modifyStyle.setGeometry(this.tipPoint),this.map.once("pointermove",()=>{this.modifyStyle.setGeometry(void 0)}),this.tip=this.idleTip})),this.map.addInteraction(this.modify),this.map.addInteraction(this.draw),this.tip=this.idleTip):(this.stopMeasure(),this.active=!1),this.modify.setActive(this.active),this.activateOtherInteractions()}stopMeasure(){this.map.removeInteraction(this.modify),this.map.removeInteraction(this.draw),this.source.clear(),this.subscriptions.forEach(t=>t.unsubscribe())}activateOtherInteractions(){this.map.getInteractions().getArray().filter(t=>t instanceof O0e||t instanceof dhe||t instanceof Ahe).filter(t=>t!==this.draw&&t!==this.modify).forEach(t=>{t.setActive(!this.active)})}formatLength(t){const i=Rue(t);return i>100?Math.round(i/1e3*100)/100+" km":Math.round(100*i)/100+" m"}formatArea(t){const i=Fue(t);return i>1e4?Math.round(i/1e6*100)/100+" km\xb2":Math.round(100*i)/100+" m\xb2"}styleFunction(t){const i=[this.style],r=t.getGeometry(),s=r.getType();let o,a,c;if(s===J4.Area?(o=r.getInteriorPoint(),a=this.formatArea(r),c=new Bf(r.getCoordinates()[0]),this.tip=c.getCoordinates().length<4?this.halfAreaTip:this.activeTip):s===J4.Length&&(o=new u4(r.getLastCoordinate()),a=this.formatLength(r),c=r,this.tip=this.idle?this.idleTip:this.activeTip),this.showSegments&&c){let l=0;c.forEachSegment((u,f)=>{const p=new Bf([u,f]),g=`${this.formatLength(p)}`;this.segmentStyles.length-1<l&&this.segmentStyles.push(this.segmentStyle.clone());const _=new u4(p.getCoordinateAt(.5));this.segmentStyles[l].setGeometry(_),this.segmentStyles[l].getText().setText(g),i.push(this.segmentStyles[l]),l++})}return a&&(this.labelStyle.setGeometry(o),this.labelStyle.getText().setText(a),i.push(this.labelStyle)),this.tip&&s===J4.Point&&!this.modify.getOverlay().getSource().getFeatures().length&&(this.tipPoint=r,this.tipStyle.getText().setText(this.tip),i.push(this.tipStyle)),i}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_he=(()=>{class n{constructor(t){this.cookieService=t,this.cookieKey="ol-view",this.subscriptions=[],this.center=[0,0]}init(t=[0,0],i=15){this.center=t,this.view=new _6({center:this.center,zoom:i}),this.centerAndZoom=this.getStore(),this.subscriptions.push(Vc(this.view,"change").subscribe(()=>this.setStore()))}set centerAndZoom(t){t.center&&this.view.setCenter(t.center),t.zoom&&this.view.setZoom(t.zoom)}get centerAndZoom(){return{center:this.view.getCenter(),zoom:this.view.getZoom()}}onDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}getStore(){const t=this.cookieService.get(this.cookieKey);return""===t?{center:this.center,zoom:15}:JSON.parse(t)}setStore(){this.cookieService.set(this.cookieKey,JSON.stringify(this.centerAndZoom))}animate(t,i=500){const r={duration:i};void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.center&&(r.center=t.center),this.view.animate(r)}}return n.\u0275fac=function(t){return new(t||n)(Ye(Iu))},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function yhe(n,e,t){const i=t?Za(t.featureProjection):null,r=t?Za(t.dataProjection):null;let s;if(s=i&&r&&!K5(i,r)?(e?n.clone():n).transform(e?i:r,e?r:i):n,e&&t&&void 0!==t.decimals){const o=Math.pow(10,t.decimals),a=function(c){for(let l=0,u=c.length;l<u;++l)c[l]=Math.round(c[l]*o)/o;return c};s===n&&(s=n.clone()),s.applyTransform(a)}return s}function KE(n){return"string"==typeof n?JSON.parse(n)||null:null!==n?n:null}function _N(n,e){if(!n)return null;let t;switch(n.type){case"Point":t=function lEt(n){return new u4(n.coordinates)}(n);break;case"LineString":t=function uEt(n){return new Bf(n.coordinates)}(n);break;case"Polygon":t=function pEt(n){return new ep(n.coordinates)}(n);break;case"MultiPoint":t=function fEt(n){return new gN(n.coordinates)}(n);break;case"MultiLineString":t=function hEt(n){return new dN(n.coordinates)}(n);break;case"MultiPolygon":t=function dEt(n){return new mN(n.coordinates)}(n);break;case"GeometryCollection":t=function cEt(n,e){const t=n.geometries.map(function(i){return _N(i,e)});return new JO(t)}(n);break;default:throw new Error("Unsupported GeoJSON type: "+n.type)}return yhe(t,!1,e)}function yN(n,e){const t=(n=yhe(n,!0,e)).getType();let i;switch(t){case"Point":i=function yEt(n,e){return{type:"Point",coordinates:n.getCoordinates()}}(n);break;case"LineString":i=function mEt(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}(n);break;case"Polygon":i=function wEt(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}(n,e);break;case"MultiPoint":i=function vEt(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}(n);break;case"MultiLineString":i=function AEt(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}(n);break;case"MultiPolygon":i=function _Et(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}(n,e);break;case"GeometryCollection":i=function gEt(n,e){delete(e=Object.assign({},e)).featureProjection;const t=n.getGeometriesArray().map(function(i){return yN(i,e)});return{type:"GeometryCollection",geometries:t}}(n,e);break;case"Circle":i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+t)}return i}const whe=class aEt extends class sEt extends class iEt{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Za(t.dataProjection):this.readProjection(e);t.extent&&i&&"tile-pixels"===i.getUnits()&&(i=Za(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return or()}readFeature(e,t){return or()}readFeatures(e,t){return or()}readGeometry(e,t){return or()}readProjection(e){return or()}writeFeature(e,t){return or()}writeFeatures(e,t){return or()}writeGeometry(e,t){return or()}}{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(KE(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(KE(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return or()}readFeaturesFromObject(e,t){return or()}readGeometry(e,t){return this.readGeometryFromObject(KE(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return or()}readProjection(e){return this.readProjectionFromObject(KE(e))}readProjectionFromObject(e){return or()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return or()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return or()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return or()}}{constructor(e){e=e||{},super(),this.dataProjection=Za(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Za(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;i="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null};const r=_N(i.geometry,t),s=new X4;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){let r=null;if("FeatureCollection"===e.type){r=[];const o=e.features;for(let a=0,c=o.length;a<c;++a)r.push(this.readFeatureFromObject(o[a],t))}else r=[this.readFeatureFromObject(e,t)];return r}readGeometryFromObject(e,t){return _N(e,t)}readProjectionFromObject(e){const t=e.crs;let i;return t?"name"==t.type?i=Za(t.properties.name):"EPSG"===t.type?i=Za("EPSG:"+t.properties.code):Ts(!1,36):i=this.dataProjection,i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(void 0!==r&&(i.id=r),!e.hasProperties())return i;const s=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=yN(o,t),delete s[e.getGeometryName()]),Zg(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,s=e.length;r<s;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return yN(e,this.adaptOptions(t))}};function Rf(n,e,t){void 0===t&&(t={});var i={type:"Feature"};return(0===t.id||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties=e||{},i.geometry=n,i}function rp(n,e,t){if(void 0===t&&(t={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!bN(n[0])||!bN(n[1]))throw new Error("coordinates must contain numbers");return Rf({type:"Point",coordinates:n},e,t)}function sp(n,e,t){void 0===t&&(t={});for(var i=0,r=n;i<r.length;i++){var s=r[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<s[s.length-1].length;o++)if(s[s.length-1][o]!==s[0][o])throw new Error("First and last Position are not equivalent.")}return Rf({type:"Polygon",coordinates:n},e,t)}function _m(n,e){void 0===e&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function CN(n,e,t){return void 0===t&&(t={}),Rf({type:"MultiPolygon",coordinates:n},e,t)}function bN(n){return!isNaN(n)&&null!==n&&!Array.isArray(n)}function E6(n,e,t){if(null!==n)for(var i,r,s,o,a,c,l,p,u=0,f=0,g=n.type,_="FeatureCollection"===g,y="Feature"===g,w=_?n.features.length:1,C=0;C<w;C++){a=(p=!!(l=_?n.features[C].geometry:y?n.geometry:n)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var x=0;x<a;x++){var M=0,T=0;if(null!==(o=p?l.geometries[x]:l)){c=o.coordinates;var I=o.type;switch(u=!t||"Polygon"!==I&&"MultiPolygon"!==I?0:1,I){case null:break;case"Point":if(!1===e(c,f,C,M,T))return!1;f++,M++;break;case"LineString":case"MultiPoint":for(i=0;i<c.length;i++){if(!1===e(c[i],f,C,M,T))return!1;f++,"MultiPoint"===I&&M++}"LineString"===I&&M++;break;case"Polygon":case"MultiLineString":for(i=0;i<c.length;i++){for(r=0;r<c[i].length-u;r++){if(!1===e(c[i][r],f,C,M,T))return!1;f++}"MultiLineString"===I&&M++,"Polygon"===I&&T++}"Polygon"===I&&M++;break;case"MultiPolygon":for(i=0;i<c.length;i++){for(T=0,r=0;r<c[i].length;r++){for(s=0;s<c[i][r].length-u;s++){if(!1===e(c[i][r][s],f,C,M,T))return!1;f++}T++}M++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===E6(o.geometries[i],e,t))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function q_(n,e){!function Ehe(n,e){var t,i,r,s,o,a,c,l,u,f,p=0,g="FeatureCollection"===n.type,_="Feature"===n.type,y=g?n.features.length:1;for(t=0;t<y;t++){for(l=g?n.features[t].properties:_?n.properties:{},u=g?n.features[t].bbox:_?n.bbox:void 0,f=g?n.features[t].id:_?n.id:void 0,o=(c=!!(a=g?n.features[t].geometry:_?n.geometry:n)&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<o;r++)if(null!==(s=c?a.geometries[r]:a))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(s,p,l,u,f))return!1;break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===e(s.geometries[i],p,l,u,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,u,f))return!1;p++}}(n,function(t,i,r,s,o){var c,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Rf(t,r,{bbox:s,id:o}),i,0)&&void 0}switch(a){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var l=0;l<t.coordinates.length;l++)if(!1===e(Rf({type:c,coordinates:t.coordinates[l]},r),i,l))return!1})}function xN(n){var e=[1/0,1/0,-1/0,-1/0];return E6(n,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}xN.default=xN;const DEt=xN;function The(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if("Feature"===n.type&&null!==n.geometry&&"Point"===n.geometry.type)return n.geometry.coordinates;if("Point"===n.type)return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}Me(5943);var WEt=Me(1335);function Bhe(n,e,t){if(void 0===t&&(t={}),!n)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=The(n),r=function FEt(n){return"Feature"===n.type?n.geometry:n}(e),s=r.type,o=e.bbox,a=r.coordinates;if(o&&!1===function $Et(n,e){return e[0]<=n[0]&&e[1]<=n[1]&&e[2]>=n[0]&&e[3]>=n[1]}(i,o))return!1;"Polygon"===s&&(a=[a]);for(var c=!1,l=0;l<a.length&&!c;l++)if(Rhe(i,a[l][0],t.ignoreBoundary)){for(var u=!1,f=1;f<a[l].length&&!u;)Rhe(i,a[l][f],!t.ignoreBoundary)&&(u=!0),f++;u||(c=!0)}return c}function Rhe(n,e,t){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,s=e.length-1;r<e.length;s=r++){var o=e[r][0],a=e[r][1],c=e[s][0],l=e[s][1];if(n[1]*(o-c)+a*(c-n[0])+l*(n[0]-o)==0&&(o-n[0])*(c-n[0])<=0&&(a-n[1])*(l-n[1])<=0)return!t;a>n[1]!=l>n[1]&&n[0]<(c-o)*(n[1]-a)/(l-a)+o&&(i=!i)}return i}var khe=new ArrayBuffer(16);new Float64Array(khe),new Uint32Array(khe),Me(915),function(){function n(e){this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var t=0;t<this.length;t++)this.points[t].z=this.points[t].z||0;for(t=0;t<this.length-1;t++){var i=this.points[t],r=this.points[t+1];this.centers.push({x:(i.x+r.x)/2,y:(i.y+r.y)/2,z:(i.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),t=0;t<this.centers.length-1;t++){var s=this.points[t+1].x-(this.centers[t].x+this.centers[t+1].x)/2,o=this.points[t+1].y-(this.centers[t].y+this.centers[t+1].y)/2,a=this.points[t+1].z-(this.centers[t].y+this.centers[t+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t].x+s),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t].y+o),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t].z+a)},{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t+1].x+s),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t+1].y+o),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}n.prototype.cacheSteps=function(e){var t=[],i=this.pos(0);t.push(0);for(var r=0;r<this.duration;r+=10){var s=this.pos(r);Math.sqrt((s.x-i.x)*(s.x-i.x)+(s.y-i.y)*(s.y-i.y)+(s.z-i.z)*(s.z-i.z))>e&&(t.push(r),i=s)}return t},n.prototype.vector=function(e){var t=this.pos(e+10),i=this.pos(e-10);return{angle:180*Math.atan2(t.y-i.y,t.x-i.x)/3.14,speed:Math.sqrt((i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y)+(i.z-t.z)*(i.z-t.z))}},n.prototype.pos=function(e){var t=e-this.delay;t<0&&(t=0),t>this.duration&&(t=this.duration-1);var i=t/this.duration;if(i>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*i);return function lTt(n,e,t,i,r){var s=function uTt(n){var e=n*n;return[e*n,3*e*(1-n),3*n*(1-n)*(1-n),(1-n)*(1-n)*(1-n)]}(n);return{x:r.x*s[0]+i.x*s[1]+t.x*s[2]+e.x*s[3],y:r.y*s[0]+i.y*s[1]+t.y*s[2]+e.y*s[3],z:r.z*s[0]+i.z*s[1]+t.z*s[2]+e.z*s[3]}}((this.length-1)*i-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}();const Vhe=function ATt(n,e){void 0===e&&(e={});var t=0,i=0,r=0;return E6(n,function(s){t+=s[0],i+=s[1],r++},!0),rp([t/r,i/r],e.properties)},vTt=function Uhe(n,e){switch(void 0===e&&(e={}),function kEt(n,e){return"FeatureCollection"===n.type?"FeatureCollection":"GeometryCollection"===n.type?"GeometryCollection":"Feature"===n.type&&null!==n.geometry?n.geometry.type:n.type}(n)){case"Point":return rp(The(n),e.properties);case"Polygon":var t=[];E6(n,function(T){t.push(T)});var c,l,u,f,p,g,_,y,i=Vhe(n,{properties:e.properties}),r=i.geometry.coordinates,s=0,o=0,a=0,w=t.map(function(T){return[T[0]-r[0],T[1]-r[1]]});for(c=0;c<t.length-1;c++)a+=y=(f=(l=w[c])[0])*(_=(u=w[c+1])[1])-(p=u[0])*(g=l[1]),s+=(f+p)*y,o+=(g+_)*y;if(0===a)return i;var x=1/(.5*a*6);return rp([r[0]+x*s,r[1]+x*o],e.properties);default:var M=function jEt(n,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var t=[];if(E6(n,function(r){t.push([r[0],r[1]])}),!t.length)return null;var i=WEt(t,e.concavity);return i.length>3?sp([i]):null}(n);return M?Uhe(M,{properties:e.properties}):Vhe(n,{properties:e.properties})}};Me(5469),Me(5406);const Zhe=function OTt(n){if(!n)throw new Error("geojson is required");var e=[];return q_(n,function(t){e.push(t)}),_m(e)};Me(3237);var tfe=Math.PI/180,nfe=180/Math.PI,Y_=function(n,e){this.lon=n,this.lat=e,this.x=tfe*n,this.y=tfe*e};Y_.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Y_.prototype.antipode=function(){return new Y_(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var ife=function(){this.coords=[],this.length=0};ife.prototype.move_to=function(n){this.length++,this.coords.push(n)};var BN=function(n){this.properties=n||{},this.geometries=[]};BN.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var n=[],e=0;e<this.geometries.length;e++)n.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:n},type:"Feature",properties:this.properties}},BN.prototype.wkt=function(){for(var n="",e="LINESTRING(",t=function(s){e+=s[0]+" "+s[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(t),n+=e.substring(0,e.length-1)+")"}return n};var RN=function(n,e,t){if(!n||void 0===n.x||void 0===n.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Y_(n.x,n.y),this.end=new Y_(e.x,e.y),this.properties=t||{};var i=this.start.x-this.end.x,s=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(s)),this.g===Math.PI)throw new Error("it appears "+n.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+e)};RN.prototype.interpolate=function(n){var e=Math.sin((1-n)*this.g)/Math.sin(this.g),t=Math.sin(n*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+t*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+t*Math.cos(this.end.y)*Math.sin(this.end.x),s=e*Math.sin(this.start.y)+t*Math.sin(this.end.y),o=nfe*Math.atan2(s,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[nfe*Math.atan2(r,i),o]},RN.prototype.Arc=function(n,e){var t=[];if(!n||n<=2)t.push([this.start.lon,this.start.lat]),t.push([this.end.lon,this.end.lat]);else for(var i=1/(n-1),r=0;r<n;++r){var o=this.interpolate(i*r);t.push(o)}for(var a=!1,c=0,l=e&&e.offset?e.offset:10,u=180-l,f=-180+l,p=360-l,g=1;g<t.length;++g){var _=t[g-1][0],y=t[g][0],w=Math.abs(y-_);w>p&&(y>u&&_<f||_>u&&y<f)?a=!0:w>c&&(c=w)}var C=[];if(a&&c<l){var x=[];C.push(x);for(var M=0;M<t.length;++M){var T=parseFloat(t[M][0]);if(M>0&&Math.abs(T-t[M-1][0])>p){var I=parseFloat(t[M-1][0]),F=parseFloat(t[M-1][1]),P=parseFloat(t[M][0]),R=parseFloat(t[M][1]);if(I>-180&&I<f&&180===P&&M+1<t.length&&t[M-1][0]>-180&&t[M-1][0]<f){x.push([-180,t[M][1]]),M++,x.push([t[M][0],t[M][1]]);continue}if(I>u&&I<180&&-180===P&&M+1<t.length&&t[M-1][0]>u&&t[M-1][0]<180){x.push([180,t[M][1]]),M++,x.push([t[M][0],t[M][1]]);continue}if(I<f&&P>u){var k=I;I=P,P=k;var W=F;F=R,R=W}if(I>u&&P<f&&(P+=360),I<=180&&P>=180&&I<P){var re=(180-I)/(P-I),Le=re*R+(1-re)*F;x.push([t[M-1][0]>u?180:-180,Le]),(x=[]).push([t[M-1][0]>u?-180:180,Le]),C.push(x)}else C.push(x=[]);x.push([T,t[M][1]])}else x.push([t[M][0],t[M][1]])}}else{var me=[];C.push(me);for(var Q=0;Q<t.length;++Q)me.push([t[Q][0],t[Q][1]])}for(var he=new BN(this.properties),K=0;K<C.length;++K){var ae=new ife;he.geometries.push(ae);for(var fe=C[K],de=0;de<fe.length;++de)ae.move_to(fe[de])}return he},Me(6952);var Or=[],Nr=[],Vr=[],Ur=[],Gr=[],Qr=[],Wr=[],jr=[],$r=[],qr=[],Kr=[],Xr=[],Yr=[],Zr=[],Jr=[],es=[],ts=[],ns=[],is=[],rs=[],ss=[],os=[],as=[],cs=[];Wr[85]=qr[85]=-1,jr[85]=Kr[85]=0,$r[85]=Xr[85]=1,is[85]=os[85]=1,rs[85]=as[85]=0,ss[85]=cs[85]=1,Or[85]=Ur[85]=0,Nr[85]=Gr[85]=-1,Vr[85]=Jr[85]=0,es[85]=Yr[85]=0,ts[85]=Zr[85]=1,Qr[85]=ns[85]=1,os[1]=os[169]=0,as[1]=as[169]=-1,cs[1]=cs[169]=0,Yr[1]=Yr[169]=-1,Zr[1]=Zr[169]=0,Jr[1]=Jr[169]=0,qr[4]=qr[166]=0,Kr[4]=Kr[166]=-1,Xr[4]=Xr[166]=1,es[4]=es[166]=1,ts[4]=ts[166]=0,ns[4]=ns[166]=0,Wr[16]=Wr[154]=0,jr[16]=jr[154]=1,$r[16]=$r[154]=1,Ur[16]=Ur[154]=1,Gr[16]=Gr[154]=0,Qr[16]=Qr[154]=1,is[64]=is[106]=0,rs[64]=rs[106]=1,ss[64]=ss[106]=0,Or[64]=Or[106]=-1,Nr[64]=Nr[106]=0,Vr[64]=Vr[106]=1,is[2]=is[168]=0,rs[2]=rs[168]=-1,ss[2]=ss[168]=1,os[2]=os[168]=0,as[2]=as[168]=-1,cs[2]=cs[168]=0,Yr[2]=Yr[168]=-1,Zr[2]=Zr[168]=0,Jr[2]=Jr[168]=0,es[2]=es[168]=-1,ts[2]=ts[168]=0,ns[2]=ns[168]=1,Wr[8]=Wr[162]=0,jr[8]=jr[162]=-1,$r[8]=$r[162]=0,qr[8]=qr[162]=0,Kr[8]=Kr[162]=-1,Xr[8]=Xr[162]=1,Yr[8]=Yr[162]=1,Zr[8]=Zr[162]=0,Jr[8]=Jr[162]=1,es[8]=es[162]=1,ts[8]=ts[162]=0,ns[8]=ns[162]=0,Wr[32]=Wr[138]=0,jr[32]=jr[138]=1,$r[32]=$r[138]=1,qr[32]=qr[138]=0,Kr[32]=Kr[138]=1,Xr[32]=Xr[138]=0,Or[32]=Or[138]=1,Nr[32]=Nr[138]=0,Vr[32]=Vr[138]=0,Ur[32]=Ur[138]=1,Gr[32]=Gr[138]=0,Qr[32]=Qr[138]=1,os[128]=os[42]=0,as[128]=as[42]=1,cs[128]=cs[42]=1,is[128]=is[42]=0,rs[128]=rs[42]=1,ss[128]=ss[42]=0,Or[128]=Or[42]=-1,Nr[128]=Nr[42]=0,Vr[128]=Vr[42]=1,Ur[128]=Ur[42]=-1,Gr[128]=Gr[42]=0,Qr[128]=Qr[42]=0,qr[5]=qr[165]=-1,Kr[5]=Kr[165]=0,Xr[5]=Xr[165]=0,os[5]=os[165]=1,as[5]=as[165]=0,cs[5]=cs[165]=0,es[20]=es[150]=0,ts[20]=ts[150]=1,ns[20]=ns[150]=1,Ur[20]=Ur[150]=0,Gr[20]=Gr[150]=-1,Qr[20]=Qr[150]=1,Wr[80]=Wr[90]=-1,jr[80]=jr[90]=0,$r[80]=$r[90]=1,is[80]=is[90]=1,rs[80]=rs[90]=0,ss[80]=ss[90]=1,Yr[65]=Yr[105]=0,Zr[65]=Zr[105]=1,Jr[65]=Jr[105]=0,Or[65]=Or[105]=0,Nr[65]=Nr[105]=-1,Vr[65]=Vr[105]=0,Wr[160]=Wr[10]=-1,jr[160]=jr[10]=0,$r[160]=$r[10]=1,qr[160]=qr[10]=-1,Kr[160]=Kr[10]=0,Xr[160]=Xr[10]=0,os[160]=os[10]=1,as[160]=as[10]=0,cs[160]=cs[10]=0,is[160]=is[10]=1,rs[160]=rs[10]=0,ss[160]=ss[10]=1,es[130]=es[40]=0,ts[130]=ts[40]=1,ns[130]=ns[40]=1,Yr[130]=Yr[40]=0,Zr[130]=Zr[40]=1,Jr[130]=Jr[40]=0,Or[130]=Or[40]=0,Nr[130]=Nr[40]=-1,Vr[130]=Vr[40]=0,Ur[130]=Ur[40]=0,Gr[130]=Gr[40]=-1,Qr[130]=Qr[40]=1,qr[37]=qr[133]=0,Kr[37]=Kr[133]=1,Xr[37]=Xr[133]=1,os[37]=os[133]=0,as[37]=as[133]=1,cs[37]=cs[133]=0,Or[37]=Or[133]=-1,Nr[37]=Nr[133]=0,Vr[37]=Vr[133]=0,Ur[37]=Ur[133]=1,Gr[37]=Gr[133]=0,Qr[37]=Qr[133]=0,es[148]=es[22]=-1,ts[148]=ts[22]=0,ns[148]=ns[22]=0,os[148]=os[22]=0,as[148]=as[22]=-1,cs[148]=cs[22]=1,is[148]=is[22]=0,rs[148]=rs[22]=1,ss[148]=ss[22]=1,Ur[148]=Ur[22]=-1,Gr[148]=Gr[22]=0,Qr[148]=Qr[22]=1,Wr[82]=Wr[88]=0,jr[82]=jr[88]=-1,$r[82]=$r[88]=1,es[82]=es[88]=1,ts[82]=ts[88]=0,ns[82]=ns[88]=1,Yr[82]=Yr[88]=-1,Zr[82]=Zr[88]=0,Jr[82]=Jr[88]=1,is[82]=is[88]=0,rs[82]=rs[88]=-1,ss[82]=ss[88]=0,Wr[73]=Wr[97]=0,jr[73]=jr[97]=1,$r[73]=$r[97]=0,qr[73]=qr[97]=0,Kr[73]=Kr[97]=-1,Xr[73]=Xr[97]=0,Yr[73]=Yr[97]=1,Zr[73]=Zr[97]=0,Jr[73]=Jr[97]=0,Or[73]=Or[97]=1,Nr[73]=Nr[97]=0,Vr[73]=Vr[97]=1,Wr[145]=Wr[25]=0,jr[145]=jr[25]=-1,$r[145]=$r[25]=0,Yr[145]=Yr[25]=1,Zr[145]=Zr[25]=0,Jr[145]=Jr[25]=1,os[145]=os[25]=0,as[145]=as[25]=1,cs[145]=cs[25]=1,Ur[145]=Ur[25]=-1,Gr[145]=Gr[25]=0,Qr[145]=Qr[25]=0,qr[70]=qr[100]=0,Kr[70]=Kr[100]=1,Xr[70]=Xr[100]=0,es[70]=es[100]=-1,ts[70]=ts[100]=0,ns[70]=ns[100]=1,is[70]=is[100]=0,rs[70]=rs[100]=-1,ss[70]=ss[100]=1,Or[70]=Or[100]=1,Nr[70]=Nr[100]=0,Vr[70]=Vr[100]=0,qr[101]=qr[69]=0,Kr[101]=Kr[69]=1,Xr[101]=Xr[69]=0,Or[101]=Or[69]=1,Nr[101]=Nr[69]=0,Vr[101]=Vr[69]=0,os[149]=os[21]=0,as[149]=as[21]=1,cs[149]=cs[21]=1,Ur[149]=Ur[21]=-1,Gr[149]=Gr[21]=0,Qr[149]=Qr[21]=0,es[86]=es[84]=-1,ts[86]=ts[84]=0,ns[86]=ns[84]=1,is[86]=is[84]=0,rs[86]=rs[84]=-1,ss[86]=ss[84]=1,Wr[89]=Wr[81]=0,jr[89]=jr[81]=-1,$r[89]=$r[81]=0,Yr[89]=Yr[81]=1,Zr[89]=Zr[81]=0,Jr[89]=Jr[81]=1,Wr[96]=Wr[74]=0,jr[96]=jr[74]=1,$r[96]=$r[74]=0,qr[96]=qr[74]=-1,Kr[96]=Kr[74]=0,Xr[96]=Xr[74]=1,is[96]=is[74]=1,rs[96]=rs[74]=0,ss[96]=ss[74]=0,Or[96]=Or[74]=1,Nr[96]=Nr[74]=0,Vr[96]=Vr[74]=1,Wr[24]=Wr[146]=0,jr[24]=jr[146]=-1,$r[24]=$r[146]=1,es[24]=es[146]=1,ts[24]=ts[146]=0,ns[24]=ns[146]=1,Yr[24]=Yr[146]=0,Zr[24]=Zr[146]=1,Jr[24]=Jr[146]=1,Ur[24]=Ur[146]=0,Gr[24]=Gr[146]=-1,Qr[24]=Qr[146]=0,qr[6]=qr[164]=-1,Kr[6]=Kr[164]=0,Xr[6]=Xr[164]=1,es[6]=es[164]=-1,ts[6]=ts[164]=0,ns[6]=ns[164]=0,os[6]=os[164]=0,as[6]=as[164]=-1,cs[6]=cs[164]=1,is[6]=is[164]=1,rs[6]=rs[164]=0,ss[6]=ss[164]=0,Yr[129]=Yr[41]=0,Zr[129]=Zr[41]=1,Jr[129]=Jr[41]=1,os[129]=os[41]=0,as[129]=as[41]=1,cs[129]=cs[41]=0,Or[129]=Or[41]=-1,Nr[129]=Nr[41]=0,Vr[129]=Vr[41]=0,Ur[129]=Ur[41]=0,Gr[129]=Gr[41]=-1,Qr[129]=Qr[41]=0,es[66]=es[104]=0,ts[66]=ts[104]=1,ns[66]=ns[104]=0,Yr[66]=Yr[104]=-1,Zr[66]=Zr[104]=0,Jr[66]=Jr[104]=1,is[66]=is[104]=0,rs[66]=rs[104]=-1,ss[66]=ss[104]=0,Or[66]=Or[104]=0,Nr[66]=Nr[104]=-1,Vr[66]=Vr[104]=1,Wr[144]=Wr[26]=-1,jr[144]=jr[26]=0,$r[144]=$r[26]=0,os[144]=os[26]=1,as[144]=as[26]=0,cs[144]=cs[26]=1,is[144]=is[26]=0,rs[144]=rs[26]=1,ss[144]=ss[26]=1,Ur[144]=Ur[26]=-1,Gr[144]=Gr[26]=0,Qr[144]=Qr[26]=1,qr[36]=qr[134]=0,Kr[36]=Kr[134]=1,Xr[36]=Xr[134]=1,es[36]=es[134]=0,ts[36]=ts[134]=1,ns[36]=ns[134]=0,Or[36]=Or[134]=0,Nr[36]=Nr[134]=-1,Vr[36]=Vr[134]=1,Ur[36]=Ur[134]=1,Gr[36]=Gr[134]=0,Qr[36]=Qr[134]=0,Wr[9]=Wr[161]=-1,jr[9]=jr[161]=0,$r[9]=$r[161]=0,qr[9]=qr[161]=0,Kr[9]=Kr[161]=-1,Xr[9]=Xr[161]=0,Yr[9]=Yr[161]=1,Zr[9]=Zr[161]=0,Jr[9]=Jr[161]=0,os[9]=os[161]=1,as[9]=as[161]=0,cs[9]=cs[161]=1,Wr[136]=0,jr[136]=1,$r[136]=1,qr[136]=0,Kr[136]=1,Xr[136]=0,es[136]=-1,ts[136]=0,ns[136]=1,Yr[136]=-1,Zr[136]=0,Jr[136]=0,os[136]=0,as[136]=-1,cs[136]=0,is[136]=0,rs[136]=-1,ss[136]=1,Or[136]=1,Nr[136]=0,Vr[136]=0,Ur[136]=1,Gr[136]=0,Qr[136]=1,Wr[34]=0,jr[34]=-1,$r[34]=0,qr[34]=0,Kr[34]=-1,Xr[34]=1,es[34]=1,ts[34]=0,ns[34]=0,Yr[34]=1,Zr[34]=0,Jr[34]=1,os[34]=0,as[34]=1,cs[34]=1,is[34]=0,rs[34]=1,ss[34]=0,Or[34]=-1,Nr[34]=0,Vr[34]=1,Ur[34]=-1,Gr[34]=0,Qr[34]=0,Wr[35]=0,jr[35]=1,$r[35]=1,qr[35]=0,Kr[35]=-1,Xr[35]=1,es[35]=1,ts[35]=0,ns[35]=0,Yr[35]=-1,Zr[35]=0,Jr[35]=0,os[35]=0,as[35]=-1,cs[35]=0,is[35]=0,rs[35]=1,ss[35]=0,Or[35]=-1,Nr[35]=0,Vr[35]=1,Ur[35]=1,Gr[35]=0,Qr[35]=1,Wr[153]=0,jr[153]=1,$r[153]=1,Yr[153]=-1,Zr[153]=0,Jr[153]=0,os[153]=0,as[153]=-1,cs[153]=0,Ur[153]=1,Gr[153]=0,Qr[153]=1,qr[102]=0,Kr[102]=-1,Xr[102]=1,es[102]=1,ts[102]=0,ns[102]=0,is[102]=0,rs[102]=1,ss[102]=0,Or[102]=-1,Nr[102]=0,Vr[102]=1,Wr[155]=0,jr[155]=-1,$r[155]=0,Yr[155]=1,Zr[155]=0,Jr[155]=1,os[155]=0,as[155]=1,cs[155]=1,Ur[155]=-1,Gr[155]=0,Qr[155]=0,qr[103]=0,Kr[103]=1,Xr[103]=0,es[103]=-1,ts[103]=0,ns[103]=1,is[103]=0,rs[103]=-1,ss[103]=1,Or[103]=1,Nr[103]=0,Vr[103]=0,Wr[152]=0,jr[152]=1,$r[152]=1,es[152]=-1,ts[152]=0,ns[152]=1,Yr[152]=-1,Zr[152]=0,Jr[152]=0,os[152]=0,as[152]=-1,cs[152]=0,is[152]=0,rs[152]=-1,ss[152]=1,Ur[152]=1,Gr[152]=0,Qr[152]=1,Wr[156]=0,jr[156]=-1,$r[156]=1,es[156]=1,ts[156]=0,ns[156]=1,Yr[156]=-1,Zr[156]=0,Jr[156]=0,os[156]=0,as[156]=-1,cs[156]=0,is[156]=0,rs[156]=1,ss[156]=1,Ur[156]=-1,Gr[156]=0,Qr[156]=1,Wr[137]=0,jr[137]=1,$r[137]=1,qr[137]=0,Kr[137]=1,Xr[137]=0,Yr[137]=-1,Zr[137]=0,Jr[137]=0,os[137]=0,as[137]=-1,cs[137]=0,Or[137]=1,Nr[137]=0,Vr[137]=0,Ur[137]=1,Gr[137]=0,Qr[137]=1,Wr[139]=0,jr[139]=1,$r[139]=1,qr[139]=0,Kr[139]=-1,Xr[139]=0,Yr[139]=1,Zr[139]=0,Jr[139]=0,os[139]=0,as[139]=1,cs[139]=0,Or[139]=-1,Nr[139]=0,Vr[139]=0,Ur[139]=1,Gr[139]=0,Qr[139]=1,Wr[98]=0,jr[98]=-1,$r[98]=0,qr[98]=0,Kr[98]=-1,Xr[98]=1,es[98]=1,ts[98]=0,ns[98]=0,Yr[98]=1,Zr[98]=0,Jr[98]=1,is[98]=0,rs[98]=1,ss[98]=0,Or[98]=-1,Nr[98]=0,Vr[98]=1,Wr[99]=0,jr[99]=1,$r[99]=0,qr[99]=0,Kr[99]=-1,Xr[99]=1,es[99]=1,ts[99]=0,ns[99]=0,Yr[99]=-1,Zr[99]=0,Jr[99]=1,is[99]=0,rs[99]=-1,ss[99]=0,Or[99]=1,Nr[99]=0,Vr[99]=1,qr[38]=0,Kr[38]=-1,Xr[38]=1,es[38]=1,ts[38]=0,ns[38]=0,os[38]=0,as[38]=1,cs[38]=1,is[38]=0,rs[38]=1,ss[38]=0,Or[38]=-1,Nr[38]=0,Vr[38]=1,Ur[38]=-1,Gr[38]=0,Qr[38]=0,qr[39]=0,Kr[39]=1,Xr[39]=1,es[39]=-1,ts[39]=0,ns[39]=0,os[39]=0,as[39]=-1,cs[39]=1,is[39]=0,rs[39]=1,ss[39]=0,Or[39]=-1,Nr[39]=0,Vr[39]=1,Ur[39]=1,Gr[39]=0,Qr[39]=0;var HN=function(n){return[[n.bottomleft,0],[0,0],[0,n.leftbottom]]},zN=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0]]},ON=function(n){return[[n.topright,1],[1,1],[1,n.righttop]]},NN=function(n){return[[0,n.lefttop],[0,1],[n.topleft,1]]},VN=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop]]},UN=function(n){return[[n.bottomright,0],[n.bottomleft,0],[1,n.righttop],[1,n.rightbottom]]},GN=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.topleft,1],[n.topright,1]]},QN=function(n){return[[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},ii=[],Zn=[],Ei=[],yi=[],ji=[],Gi=[],ls=[],gs=[];yi[1]=ji[1]=18,yi[169]=ji[169]=18,Ei[4]=Zn[4]=12,Ei[166]=Zn[166]=12,ii[16]=gs[16]=4,ii[154]=gs[154]=4,Gi[64]=ls[64]=22,Gi[106]=ls[106]=22,Ei[2]=Gi[2]=17,yi[2]=ji[2]=18,Ei[168]=Gi[168]=17,yi[168]=ji[168]=18,ii[8]=yi[8]=9,Zn[8]=Ei[8]=12,ii[162]=yi[162]=9,Zn[162]=Ei[162]=12,ii[32]=gs[32]=4,Zn[32]=ls[32]=1,ii[138]=gs[138]=4,Zn[138]=ls[138]=1,ji[128]=gs[128]=21,Gi[128]=ls[128]=22,ji[42]=gs[42]=21,Gi[42]=ls[42]=22,Zn[5]=ji[5]=14,Zn[165]=ji[165]=14,Ei[20]=gs[20]=6,Ei[150]=gs[150]=6,ii[80]=Gi[80]=11,ii[90]=Gi[90]=11,yi[65]=ls[65]=3,yi[105]=ls[105]=3,ii[160]=Gi[160]=11,Zn[160]=ji[160]=14,ii[10]=Gi[10]=11,Zn[10]=ji[10]=14,Ei[130]=gs[130]=6,yi[130]=ls[130]=3,Ei[40]=gs[40]=6,yi[40]=ls[40]=3,Zn[101]=ls[101]=1,Zn[69]=ls[69]=1,ji[149]=gs[149]=21,ji[21]=gs[21]=21,Ei[86]=Gi[86]=17,Ei[84]=Gi[84]=17,ii[89]=yi[89]=9,ii[81]=yi[81]=9,ii[96]=ls[96]=0,Zn[96]=Gi[96]=15,ii[74]=ls[74]=0,Zn[74]=Gi[74]=15,ii[24]=Ei[24]=8,yi[24]=gs[24]=7,ii[146]=Ei[146]=8,yi[146]=gs[146]=7,Zn[6]=Gi[6]=15,Ei[6]=ji[6]=16,Zn[164]=Gi[164]=15,Ei[164]=ji[164]=16,yi[129]=gs[129]=7,ji[129]=ls[129]=20,yi[41]=gs[41]=7,ji[41]=ls[41]=20,Ei[66]=ls[66]=2,yi[66]=Gi[66]=19,Ei[104]=ls[104]=2,yi[104]=Gi[104]=19,ii[144]=ji[144]=10,Gi[144]=gs[144]=23,ii[26]=ji[26]=10,Gi[26]=gs[26]=23,Zn[36]=gs[36]=5,Ei[36]=ls[36]=2,Zn[134]=gs[134]=5,Ei[134]=ls[134]=2,ii[9]=ji[9]=10,Zn[9]=yi[9]=13,ii[161]=ji[161]=10,Zn[161]=yi[161]=13,Zn[37]=gs[37]=5,ji[37]=ls[37]=20,Zn[133]=gs[133]=5,ji[133]=ls[133]=20,Ei[148]=ji[148]=16,Gi[148]=gs[148]=23,Ei[22]=ji[22]=16,Gi[22]=gs[22]=23,ii[82]=Ei[82]=8,yi[82]=Gi[82]=19,ii[88]=Ei[88]=8,yi[88]=Gi[88]=19,ii[73]=ls[73]=0,Zn[73]=yi[73]=13,ii[97]=ls[97]=0,Zn[97]=yi[97]=13,ii[145]=yi[145]=9,ji[145]=gs[145]=21,ii[25]=yi[25]=9,ji[25]=gs[25]=21,Zn[70]=ls[70]=1,Ei[70]=Gi[70]=17,Zn[100]=ls[100]=1,Ei[100]=Gi[100]=17,ii[34]=yi[34]=9,Zn[34]=Ei[34]=12,ji[34]=gs[34]=21,Gi[34]=ls[34]=22,ii[136]=gs[136]=4,Zn[136]=ls[136]=1,Ei[136]=Gi[136]=17,yi[136]=ji[136]=18,ii[35]=gs[35]=4,Zn[35]=Ei[35]=12,yi[35]=ji[35]=18,Gi[35]=ls[35]=22,ii[153]=gs[153]=4,yi[153]=ji[153]=18,Zn[102]=Ei[102]=12,Gi[102]=ls[102]=22,ii[155]=yi[155]=9,ji[155]=gs[155]=23,Zn[103]=ls[103]=1,Ei[103]=Gi[103]=17,ii[152]=gs[152]=4,Ei[152]=Gi[152]=17,yi[152]=ji[152]=18,ii[156]=Ei[156]=8,yi[156]=ji[156]=18,Gi[156]=gs[156]=23,ii[137]=gs[137]=4,Zn[137]=ls[137]=1,yi[137]=ji[137]=18,ii[139]=gs[139]=4,Zn[139]=yi[139]=13,ji[139]=ls[139]=20,ii[98]=yi[98]=9,Zn[98]=Ei[98]=12,Gi[98]=ls[98]=22,ii[99]=ls[99]=0,Zn[99]=Ei[99]=12,yi[99]=Gi[99]=19,Zn[38]=Ei[38]=12,ji[38]=gs[38]=21,Gi[38]=ls[38]=22,Zn[39]=gs[39]=5,Ei[39]=ji[39]=16,Gi[39]=ls[39]=22;var Pn=[];function $N(n,e,t){return function eDt(n){return(n>0)-(n<0)||+n}((e[0]-n[0])*(t[1]-e[1])-(t[0]-e[0])*(e[1]-n[1]))}function _fe(n,e){return e.geometry.coordinates[0].every(function(t){return Bhe(rp(t),n)})}Pn[1]=Pn[169]=HN,Pn[4]=Pn[166]=zN,Pn[16]=Pn[154]=ON,Pn[64]=Pn[106]=NN,Pn[168]=Pn[2]=VN,Pn[162]=Pn[8]=UN,Pn[138]=Pn[32]=GN,Pn[42]=Pn[128]=QN,Pn[5]=Pn[165]=function(n){return[[0,0],[0,n.leftbottom],[1,n.rightbottom],[1,0]]},Pn[20]=Pn[150]=function(n){return[[1,0],[n.bottomright,0],[n.topright,1],[1,1]]},Pn[80]=Pn[90]=function(n){return[[1,1],[1,n.righttop],[0,n.lefttop],[0,1]]},Pn[65]=Pn[105]=function(n){return[[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},Pn[160]=Pn[10]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.leftbottom],[0,n.lefttop]]},Pn[130]=Pn[40]=function(n){return[[n.topleft,1],[n.topright,1],[n.bottomright,0],[n.bottomleft,0]]},Pn[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Pn[101]=Pn[69]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,1],[n.topleft,1]]},Pn[149]=Pn[21]=function(n){return[[n.topright,1],[1,1],[1,0],[0,0],[0,n.leftbottom]]},Pn[86]=Pn[84]=function(n){return[[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[1,1]]},Pn[89]=Pn[81]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,1]]},Pn[96]=Pn[74]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.lefttop],[0,1],[n.topleft,1]]},Pn[24]=Pn[146]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[n.topright,1]]},Pn[6]=Pn[164]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop]]},Pn[129]=Pn[41]=function(n){return[[n.topright,1],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1]]},Pn[66]=Pn[104]=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Pn[144]=Pn[26]=function(n){return[[1,1],[1,n.righttop],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Pn[36]=Pn[134]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[n.topleft,1],[n.topright,1]]},Pn[9]=Pn[161]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom]]},Pn[37]=Pn[133]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},Pn[148]=Pn[22]=function(n){return[[1,1],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Pn[82]=Pn[88]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1]]},Pn[73]=Pn[97]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},Pn[145]=Pn[25]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Pn[70]=Pn[100]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Pn[34]=function(n){return[QN(n),UN(n)]},Pn[35]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},Pn[136]=function(n){return[GN(n),VN(n)]},Pn[153]=function(n){return[ON(n),HN(n)]},Pn[102]=function(n){return[zN(n),NN(n)]},Pn[155]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Pn[103]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Pn[152]=function(n){return[ON(n),VN(n)]},Pn[156]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Pn[137]=function(n){return[GN(n),HN(n)]},Pn[139]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},Pn[98]=function(n){return[UN(n),NN(n)]},Pn[99]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Pn[38]=function(n){return[zN(n),QN(n)]},Pn[39]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]};var iDt=function(){function n(e){this.id=n.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return n.buildId=function(e){return e.join(",")},n.prototype.removeInnerEdge=function(e){this.innerEdges=this.innerEdges.filter(function(t){return t.from.id!==e.from.id})},n.prototype.removeOuterEdge=function(e){this.outerEdges=this.outerEdges.filter(function(t){return t.to.id!==e.to.id})},n.prototype.addOuterEdge=function(e){this.outerEdges.push(e),this.outerEdgesSorted=!1},n.prototype.sortOuterEdges=function(){var e=this;this.outerEdgesSorted||(this.outerEdges.sort(function(t,i){var r=t.to,s=i.to;if(r.coordinates[0]-e.coordinates[0]>=0&&s.coordinates[0]-e.coordinates[0]<0)return 1;if(r.coordinates[0]-e.coordinates[0]<0&&s.coordinates[0]-e.coordinates[0]>=0)return-1;if(r.coordinates[0]-e.coordinates[0]==0&&s.coordinates[0]-e.coordinates[0]==0)return r.coordinates[1]-e.coordinates[1]>=0||s.coordinates[1]-e.coordinates[1]>=0?r.coordinates[1]-s.coordinates[1]:s.coordinates[1]-r.coordinates[1];var o=$N(e.coordinates,r.coordinates,s.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-e.coordinates[0],2)+Math.pow(r.coordinates[1]-e.coordinates[1],2)-(Math.pow(s.coordinates[0]-e.coordinates[0],2)+Math.pow(s.coordinates[1]-e.coordinates[1],2))}),this.outerEdgesSorted=!0)},n.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},n.prototype.getOuterEdge=function(e){return this.sortOuterEdges(),this.outerEdges[e]},n.prototype.addInnerEdge=function(e){this.innerEdges.push(e)},n}();const yfe=iDt;var rDt=function(){function n(e,t){this.from=e,this.to=t,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return n.prototype.getSymetric=function(){return this.symetric||(this.symetric=new n(this.to,this.from),this.symetric.symetric=this),this.symetric},n.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},n.prototype.isEqual=function(e){return this.from.id===e.from.id&&this.to.id===e.to.id},n.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},n.prototype.toLineString=function(){return function wN(n,e,t){if(void 0===t&&(t={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");return Rf({type:"LineString",coordinates:n},e,t)}([this.from.coordinates,this.to.coordinates])},n.prototype.compareTo=function(e){return $N(e.from.coordinates,e.to.coordinates,this.to.coordinates)},n}();const sDt=rDt;var oDt=function(){function n(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return n.prototype.push=function(e){this.edges.push(e),this.polygon=this.envelope=void 0},n.prototype.get=function(e){return this.edges[e]},Object.defineProperty(n.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),n.prototype.forEach=function(e){this.edges.forEach(e)},n.prototype.map=function(e){return this.edges.map(e)},n.prototype.some=function(e){return this.edges.some(e)},n.prototype.isValid=function(){return!0},n.prototype.isHole=function(){var e=this,t=this.edges.reduce(function(o,a,c){return a.from.coordinates[1]>e.edges[o].from.coordinates[1]&&(o=c),o},0),i=(0===t?this.length:t)-1,r=(t+1)%this.length,s=$N(this.edges[i].from.coordinates,this.edges[t].from.coordinates,this.edges[r].from.coordinates);return 0===s?this.edges[i].from.coordinates[0]>this.edges[r].from.coordinates[0]:s>0},n.prototype.toMultiPoint=function(){return function xhe(n,e,t){return void 0===t&&(t={}),Rf({type:"MultiPoint",coordinates:n},e,t)}(this.edges.map(function(e){return e.from.coordinates}))},n.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var e=this.edges.map(function(t){return t.from.coordinates});return e.push(this.edges[0].from.coordinates),this.polygon=sp([e])},n.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=function dTt(n){return function fTt(n,e){void 0===e&&(e={});var t=Number(n[0]),i=Number(n[1]),r=Number(n[2]),s=Number(n[3]);if(6===n.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[t,i];return sp([[o,[r,i],[r,s],[t,s],o]],e.properties,{bbox:n,id:e.id})}(DEt(n))}(this.toPolygon())},n.findEdgeRingContaining=function(e,t){var r,s,i=e.getEnvelope();return t.forEach(function(o){var a=o.getEnvelope();if(s&&(r=s.getEnvelope()),!function tDt(n,e){var t=n.geometry.coordinates[0].map(function(o){return o[0]}),i=n.geometry.coordinates[0].map(function(o){return o[1]}),r=e.geometry.coordinates[0].map(function(o){return o[0]}),s=e.geometry.coordinates[0].map(function(o){return o[1]});return Math.max.apply(null,t)===Math.max.apply(null,r)&&Math.max.apply(null,i)===Math.max.apply(null,s)&&Math.min.apply(null,t)===Math.min.apply(null,r)&&Math.min.apply(null,i)===Math.min.apply(null,s)}(a,i)&&_fe(a,i)){for(var c=e.map(function(_){return _.from.coordinates}),l=void 0,u=function(_){o.some(function(y){return function nDt(n,e){return n[0]===e[0]&&n[1]===e[1]}(_,y.from.coordinates)})||(l=_)},f=0,p=c;f<p.length;f++)u(p[f]);l&&o.inside(rp(l))&&(!s||_fe(r,a))&&(s=o)}}),s},n.prototype.inside=function(e){return Bhe(e,this.toPolygon())},n}();const aDt=oDt;function Lfe(n){for(var e=n,t=[];e.parent;)t.unshift(e),e=e.parent;return t}!function(){function n(){this.edges=[],this.nodes={}}n.fromGeoJson=function(e){!function cDt(n){if(!n)throw new Error("No geojson passed");if("FeatureCollection"!==n.type&&"GeometryCollection"!==n.type&&"MultiLineString"!==n.type&&"LineString"!==n.type&&"Feature"!==n.type)throw new Error("Invalid input type '"+n.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var t=new n;return q_(e,function(i){(function BEt(n,e,t){if(!n)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!n||"Feature"!==n.type||!n.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+n.geometry.type)})(i,"LineString","Graph::fromGeoJson"),function SEt(n,e,t,i){var r=t;E6(n,function(s,o,a,c,l){r=0===o&&void 0===t?s:e(r,s,o,a,c,l)},i)}(i,function(r,s){if(r){var o=t.getNode(r),a=t.getNode(s);t.addEdge(o,a)}return s})}),t},n.prototype.getNode=function(e){var t=yfe.buildId(e),i=this.nodes[t];return i||(i=this.nodes[t]=new yfe(e)),i},n.prototype.addEdge=function(e,t){var i=new sDt(e,t),r=i.getSymetric();this.edges.push(i),this.edges.push(r)},n.prototype.deleteDangles=function(){var e=this;Object.keys(this.nodes).map(function(t){return e.nodes[t]}).forEach(function(t){return e._removeIfDangle(t)})},n.prototype._removeIfDangle=function(e){var t=this;if(e.innerEdges.length<=1){var i=e.getOuterEdges().map(function(r){return r.to});this.removeNode(e),i.forEach(function(r){return t._removeIfDangle(r)})}},n.prototype.deleteCutEdges=function(){var e=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(t){t.label===t.symetric.label&&(e.removeEdge(t.symetric),e.removeEdge(t))})},n.prototype._computeNextCWEdges=function(e){var t=this;typeof e>"u"?Object.keys(this.nodes).forEach(function(i){return t._computeNextCWEdges(t.nodes[i])}):e.getOuterEdges().forEach(function(i,r){e.getOuterEdge((0===r?e.getOuterEdges().length:r)-1).symetric.next=i})},n.prototype._computeNextCCWEdges=function(e,t){for(var r,s,i=e.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],c=a.symetric,l=void 0,u=void 0;a.label===t&&(l=a),c.label===t&&(u=c),l&&u&&(u&&(s=u),l&&(s&&(s.next=l,s=void 0),r||(r=l)))}s&&(s.next=r)},n.prototype._findLabeledEdgeRings=function(){var e=[],t=0;return this.edges.forEach(function(i){if(!(i.label>=0)){e.push(i);var r=i;do{r.label=t,r=r.next}while(!i.isEqual(r));t++}}),e},n.prototype.getEdgeRings=function(){var e=this;this._computeNextCWEdges(),this.edges.forEach(function(i){i.label=void 0}),this._findLabeledEdgeRings().forEach(function(i){e._findIntersectionNodes(i).forEach(function(r){e._computeNextCCWEdges(r,i.label)})});var t=[];return this.edges.forEach(function(i){i.ring||t.push(e._findEdgeRing(i))}),t},n.prototype._findIntersectionNodes=function(e){var t=[],i=e,r=function(){var s=0;i.from.getOuterEdges().forEach(function(o){o.label===e.label&&++s}),s>1&&t.push(i.from),i=i.next};do{r()}while(!e.isEqual(i));return t},n.prototype._findEdgeRing=function(e){var t=e,i=new aDt;do{i.push(t),t.ring=i,t=t.next}while(!e.isEqual(t));return i},n.prototype.removeNode=function(e){var t=this;e.getOuterEdges().forEach(function(i){return t.removeEdge(i)}),e.innerEdges.forEach(function(i){return t.removeEdge(i)}),delete this.nodes[e.id]},n.prototype.removeEdge=function(e){this.edges=this.edges.filter(function(t){return!t.isEqual(e)}),e.deleteEdge()}}(),Me(5013),Me(7470),Me(9475);var nT={search:function(n,e,t,i){n.cleanDirty();var r=(i=i||{}).heuristic||nT.heuristics.manhattan,s=i.closest||!1,o=function xDt(){return new Dfe(function(n){return n.f})}(),a=e;for(e.h=r(e,t),o.push(e);o.size()>0;){var c=o.pop();if(c===t)return Lfe(c);c.closed=!0;for(var l=n.neighbors(c),u=0,f=l.length;u<f;++u){var p=l[u];if(!p.closed&&!p.isWall()){var g=c.g+p.getCost(c),_=p.visited;(!_||g<p.g)&&(p.visited=!0,p.parent=c,p.h=p.h||r(p,t),p.g=g,p.f=p.g+p.h,n.markDirty(p),s&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),_?o.rescoreElement(p):o.push(p))}}}return s?Lfe(a):[]},heuristics:{manhattan:function(n,e){return Math.abs(e.x-n.x)+Math.abs(e.y-n.y)},diagonal:function(n,e){var i=Math.sqrt(2),r=Math.abs(e.x-n.x),s=Math.abs(e.y-n.y);return 1*(r+s)+(i-2)*Math.min(r,s)}},cleanNode:function(n){n.f=0,n.g=0,n.h=0,n.visited=!1,n.closed=!1,n.parent=null}};function wm(n,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var t=0;t<n.length;t++){this.grid[t]=[];for(var i=0,r=n[t];i<r.length;i++){var s=new iT(t,i,r[i]);this.grid[t][i]=s,this.nodes.push(s)}}this.init()}function iT(n,e,t){this.x=n,this.y=e,this.weight=t}function Dfe(n){this.content=[],this.scoreFunction=n}function KN(){this._=null}function rT(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function J_(n,e){var t=e,i=e.R,r=t.U;r?r.L===t?r.L=i:r.R=i:n._=i,i.U=r,t.U=i,t.R=i.L,t.R&&(t.R.U=t),i.L=t}function ey(n,e){var t=e,i=e.L,r=t.U;r?r.L===t?r.L=i:r.R=i:n._=i,i.U=r,t.U=i,t.L=i.R,t.L&&(t.L.U=t),i.R=t}function Ife(n){for(;n.L;)n=n.L;return n}wm.prototype.init=function(){this.dirtyNodes=[];for(var n=0;n<this.nodes.length;n++)nT.cleanNode(this.nodes[n])},wm.prototype.cleanDirty=function(){for(var n=0;n<this.dirtyNodes.length;n++)nT.cleanNode(this.dirtyNodes[n]);this.dirtyNodes=[]},wm.prototype.markDirty=function(n){this.dirtyNodes.push(n)},wm.prototype.neighbors=function(n){var e=[],t=n.x,i=n.y,r=this.grid;return r[t-1]&&r[t-1][i]&&e.push(r[t-1][i]),r[t+1]&&r[t+1][i]&&e.push(r[t+1][i]),r[t]&&r[t][i-1]&&e.push(r[t][i-1]),r[t]&&r[t][i+1]&&e.push(r[t][i+1]),this.diagonal&&(r[t-1]&&r[t-1][i-1]&&e.push(r[t-1][i-1]),r[t+1]&&r[t+1][i-1]&&e.push(r[t+1][i-1]),r[t-1]&&r[t-1][i+1]&&e.push(r[t-1][i+1]),r[t+1]&&r[t+1][i+1]&&e.push(r[t+1][i+1])),e},wm.prototype.toString=function(){for(var t,i,r,s,n=[],e=this.grid,o=0,a=e.length;o<a;o++){for(t=[],r=0,s=(i=e[o]).length;r<s;r++)t.push(i[r].weight);n.push(t.join(" "))}return n.join("\n")},iT.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},iT.prototype.getCost=function(n){return n&&n.x!==this.x&&n.y!==this.y?1.41421*this.weight:this.weight},iT.prototype.isWall=function(){return 0===this.weight},Dfe.prototype={push:function(n){this.content.push(n),this.sinkDown(this.content.length-1)},pop:function(){var n=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),n},remove:function(n){var e=this.content.indexOf(n),t=this.content.pop();e!==this.content.length-1&&(this.content[e]=t,this.scoreFunction(t)<this.scoreFunction(n)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(n){this.sinkDown(this.content.indexOf(n))},sinkDown:function(n){for(var e=this.content[n];n>0;){var t=(n+1>>1)-1,i=this.content[t];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[t]=e,this.content[n]=i,n=t}},bubbleUp:function(n){for(var e=this.content.length,t=this.content[n],i=this.scoreFunction(t);;){var a,r=n+1<<1,s=r-1,o=null;if(s<e&&(a=this.scoreFunction(this.content[s]))<i&&(o=s),r<e&&this.scoreFunction(this.content[r])<(null===o?i:a)&&(o=r),null===o)break;this.content[n]=this.content[o],this.content[o]=t,n=o}}},KN.prototype={constructor:KN,insert:function(n,e){var t,i,r;if(n){if(e.P=n,e.N=n.N,n.N&&(n.N.P=e),n.N=e,n.R){for(n=n.R;n.L;)n=n.L;n.L=e}else n.R=e;t=n}else this._?(n=Ife(this._),e.P=null,e.N=n,n.P=n.L=e,t=n):(e.P=e.N=null,this._=e,t=null);for(e.L=e.R=null,e.U=t,e.C=!0,n=e;t&&t.C;)t===(i=t.U).L?(r=i.R)&&r.C?(t.C=r.C=!1,i.C=!0,n=i):(n===t.R&&(J_(this,t),t=(n=t).U),t.C=!1,i.C=!0,ey(this,i)):(r=i.L)&&r.C?(t.C=r.C=!1,i.C=!0,n=i):(n===t.L&&(ey(this,t),t=(n=t).U),t.C=!1,i.C=!0,J_(this,i)),t=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,s,o,e=n.U,i=n.L,r=n.R;if(s=i?r?Ife(r):i:r,e?e.L===n?e.L=s:e.R=s:this._=s,i&&r?(o=s.C,s.C=n.C,s.L=i,i.U=s,s!==r?(e=s.U,s.U=n.U,e.L=n=s.R,s.R=r,r.U=s):(s.U=e,e=s,n=s.R)):(o=n.C,n=s),n&&(n.U=e),!o){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===e.L){if((t=e.R).C&&(t.C=!1,e.C=!0,J_(this,e),t=e.R),t.L&&t.L.C||t.R&&t.R.C){(!t.R||!t.R.C)&&(t.L.C=!1,t.C=!0,ey(this,t),t=e.R),t.C=e.C,e.C=t.R.C=!1,J_(this,e),n=this._;break}}else if((t=e.L).C&&(t.C=!1,e.C=!0,ey(this,e),t=e.L),t.L&&t.L.C||t.R&&t.R.C){(!t.L||!t.L.C)&&(t.R.C=!1,t.C=!0,J_(this,t),t=e.L),t.C=e.C,e.C=t.L.C=!1,ey(this,e),n=this._;break}t.C=!0,n=e,e=e.U}while(!n.C);n&&(n.C=!1)}}};const Bfe=KN;function ty(n,e,t,i){var r=[null,null],s=cl.push(r)-1;return r.left=n,r.right=e,t&&sT(r,n,e,t),i&&sT(r,e,n,i),p4[n.index].halfedges.push(s),p4[e.index].halfedges.push(s),r}function ny(n,e,t){var i=[e,t];return i.left=n,i}function sT(n,e,t,i){n[0]||n[1]?n.left===t?n[1]=i:n[0]=i:(n[0]=i,n.left=e,n.right=t)}function SDt(n,e,t,i,r){var y,s=n[0],o=n[1],a=s[0],c=s[1],f=0,p=1,g=o[0]-a,_=o[1]-c;if(y=e-a,g||!(y>0)){if(y/=g,g<0){if(y<f)return;y<p&&(p=y)}else if(g>0){if(y>p)return;y>f&&(f=y)}if(y=i-a,g||!(y<0)){if(y/=g,g<0){if(y>p)return;y>f&&(f=y)}else if(g>0){if(y<f)return;y<p&&(p=y)}if(y=t-c,_||!(y>0)){if(y/=_,_<0){if(y<f)return;y<p&&(p=y)}else if(_>0){if(y>p)return;y>f&&(f=y)}if(y=r-c,_||!(y<0)){if(y/=_,_<0){if(y>p)return;y>f&&(f=y)}else if(_>0){if(y<f)return;y<p&&(p=y)}return!(f>0)&&!(p<1)||(f>0&&(n[0]=[a+f*g,c+f*_]),p<1&&(n[1]=[a+p*g,c+p*_])),!0}}}}}function EDt(n,e,t,i,r){var s=n[1];if(s)return!0;var y,w,o=n[0],a=n.left,c=n.right,l=a[0],u=a[1],f=c[0],p=c[1],g=(l+f)/2;if(p===u){if(g<e||g>=i)return;if(l>f){if(o){if(o[1]>=r)return}else o=[g,t];s=[g,r]}else{if(o){if(o[1]<t)return}else o=[g,r];s=[g,t]}}else if(w=(u+p)/2-(y=(l-f)/(p-u))*g,y<-1||y>1)if(l>f){if(o){if(o[1]>=r)return}else o=[(t-w)/y,t];s=[(r-w)/y,r]}else{if(o){if(o[1]<t)return}else o=[(r-w)/y,r];s=[(t-w)/y,t]}else if(u<p){if(o){if(o[0]>=i)return}else o=[e,y*e+w];s=[i,y*i+w]}else{if(o){if(o[0]<e)return}else o=[i,y*i+w];s=[e,y*e+w]}return n[0]=o,n[1]=s,!0}function DDt(n,e){var t=n.site,i=e.left,r=e.right;return t===r&&(r=i,i=t),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(t===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Rfe(n,e){return e[+(e.left!==n.site)]}function IDt(n,e){return e[+(e.left===n.site)]}var XN,Ffe=[];function FDt(){rT(this),this.x=this.y=this.arc=this.site=this.cy=null}function Cm(n){var e=n.P,t=n.N;if(e&&t){var i=e.site,r=n.site,s=t.site;if(i!==s){var o=r[0],a=r[1],c=i[0]-o,l=i[1]-a,u=s[0]-o,f=s[1]-a,p=2*(c*f-l*u);if(!(p>=-ODt)){var g=c*c+l*l,_=u*u+f*f,y=(f*g-l*_)/p,w=(c*_-u*g)/p,C=Ffe.pop()||new FDt;C.arc=n,C.site=r,C.x=y+o,C.y=(C.cy=w+a)+Math.sqrt(y*y+w*w),n.circle=C;for(var x=null,M=iy._;M;)if(C.y<M.y||C.y===M.y&&C.x<=M.x){if(!M.L){x=M.P;break}M=M.L}else{if(!M.R){x=M;break}M=M.R}iy.insert(x,C),x||(XN=C)}}}}function bm(n){var e=n.circle;e&&(e.P||(XN=e.N),iy.remove(e),Ffe.push(e),rT(e),n.circle=null)}var kfe=[];function kDt(){rT(this),this.edge=this.site=this.circle=null}function Pfe(n){var e=kfe.pop()||new kDt;return e.site=n,e}function YN(n){bm(n),xm.remove(n),kfe.push(n),rT(n)}function PDt(n){var e=n.circle,t=e.x,i=e.cy,r=[t,i],s=n.P,o=n.N,a=[n];YN(n);for(var c=s;c.circle&&Math.abs(t-c.circle.x)<Ja&&Math.abs(i-c.circle.cy)<Ja;)s=c.P,a.unshift(c),YN(c),c=s;a.unshift(c),bm(c);for(var l=o;l.circle&&Math.abs(t-l.circle.x)<Ja&&Math.abs(i-l.circle.cy)<Ja;)o=l.N,a.push(l),YN(l),l=o;a.push(l),bm(l);var f,u=a.length;for(f=1;f<u;++f)sT((l=a[f]).edge,(c=a[f-1]).site,l.site,r);(l=a[u-1]).edge=ty((c=a[0]).site,l.site,null,r),Cm(c),Cm(l)}function HDt(n){for(var i,r,s,o,e=n[0],t=n[1],a=xm._;a;)if((s=Hfe(a,t)-e)>Ja)a=a.L;else{if(!((o=e-zDt(a,t))>Ja)){s>-Ja?(i=a.P,r=a):o>-Ja?(i=a,r=a.N):i=r=a;break}if(!a.R){i=a;break}a=a.R}!function LDt(n){p4[n.index]={site:n,halfedges:[]}}(n);var c=Pfe(n);if(xm.insert(i,c),i||r){if(i===r)return bm(i),r=Pfe(i.site),xm.insert(c,r),c.edge=r.edge=ty(i.site,c.site),Cm(i),void Cm(r);if(!r)return void(c.edge=ty(i.site,c.site));bm(i),bm(r);var l=i.site,u=l[0],f=l[1],p=n[0]-u,g=n[1]-f,_=r.site,y=_[0]-u,w=_[1]-f,C=2*(p*w-g*y),x=p*p+g*g,M=y*y+w*w,T=[(w*x-g*M)/C+u,(p*M-y*x)/C+f];sT(r.edge,l,_,T),c.edge=ty(l,n,null,T),r.edge=ty(n,_,null,T),Cm(i),Cm(r)}}function Hfe(n,e){var t=n.site,i=t[0],r=t[1],s=r-e;if(!s)return i;var o=n.P;if(!o)return-1/0;var a=(t=o.site)[0],c=t[1],l=c-e;if(!l)return a;var u=a-i,f=1/s-1/l,p=u/l;return f?(-p+Math.sqrt(p*p-2*f*(u*u/(-2*l)-c+l/2+r-s/2)))/f+i:(i+a)/2}function zDt(n,e){var t=n.N;if(t)return Hfe(t,e);var i=n.site;return i[1]===e?i[0]:1/0}var xm,p4,iy,cl,Ja=1e-6,ODt=1e-12;function NDt(n,e,t){return(n[0]-t[0])*(e[1]-n[1])-(n[0]-e[0])*(t[1]-n[1])}function VDt(n,e){return e[1]-n[1]||e[0]-n[0]}function zfe(n,e){var i,r,s,t=n.sort(VDt).pop();for(cl=[],p4=new Array(n.length),xm=new Bfe,iy=new Bfe;;)if(s=XN,t&&(!s||t[1]<s.y||t[1]===s.y&&t[0]<s.x))(t[0]!==i||t[1]!==r)&&(HDt(t),i=t[0],r=t[1]),t=n.pop();else{if(!s)break;PDt(s.arc)}if(function BDt(){for(var t,i,r,s,n=0,e=p4.length;n<e;++n)if((t=p4[n])&&(s=(i=t.halfedges).length)){var o=new Array(s),a=new Array(s);for(r=0;r<s;++r)o[r]=r,a[r]=DDt(t,cl[i[r]]);for(o.sort(function(c,l){return a[l]-a[c]}),r=0;r<s;++r)a[r]=i[o[r]];for(r=0;r<s;++r)i[r]=a[r]}}(),e){var o=+e[0][0],a=+e[0][1],c=+e[1][0],l=+e[1][1];(function TDt(n,e,t,i){for(var s,r=cl.length;r--;)EDt(s=cl[r],n,e,t,i)&&SDt(s,n,e,t,i)&&(Math.abs(s[0][0]-s[1][0])>Ja||Math.abs(s[0][1]-s[1][1])>Ja)||delete cl[r]})(o,a,c,l),function RDt(n,e,t,i){var s,o,a,c,l,u,f,p,g,_,y,w,r=p4.length,C=!0;for(s=0;s<r;++s)if(o=p4[s]){for(a=o.site,c=(l=o.halfedges).length;c--;)cl[l[c]]||l.splice(c,1);for(c=0,u=l.length;c<u;)y=(_=IDt(o,cl[l[c]]))[0],w=_[1],p=(f=Rfe(o,cl[l[++c%u]]))[0],g=f[1],(Math.abs(y-p)>Ja||Math.abs(w-g)>Ja)&&(l.splice(c,0,cl.push(ny(a,_,Math.abs(y-n)<Ja&&i-w>Ja?[n,Math.abs(p-n)<Ja?g:i]:Math.abs(w-i)<Ja&&t-y>Ja?[Math.abs(g-i)<Ja?p:t,i]:Math.abs(y-t)<Ja&&w-e>Ja?[t,Math.abs(p-t)<Ja?g:e]:Math.abs(w-e)<Ja&&y-n>Ja?[Math.abs(g-e)<Ja?p:n,e]:null))-1),++u);u&&(C=!1)}if(C){var x,M,T,I=1/0;for(s=0,C=null;s<r;++s)(o=p4[s])&&(T=(x=(a=o.site)[0]-n)*x+(M=a[1]-e)*M)<I&&(I=T,C=o);if(C){var F=[n,e],P=[n,i],R=[t,i],k=[t,e];C.halfedges.push(cl.push(ny(a=C.site,F,P))-1,cl.push(ny(a,P,R))-1,cl.push(ny(a,R,k))-1,cl.push(ny(a,k,F))-1)}}for(s=0;s<r;++s)(o=p4[s])&&(o.halfedges.length||delete p4[s])}(o,a,c,l)}this.edges=cl,this.cells=p4,xm=iy=cl=p4=null}zfe.prototype={constructor:zfe,polygons:function(){var n=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(i){return Rfe(e,n[i])});return t.data=e.site.data,t})},triangles:function(){var n=[],e=this.edges;return this.cells.forEach(function(t,i){if(a=(s=t.halfedges).length)for(var s,a,c,r=t.site,o=-1,l=e[s[a-1]],u=l.left===r?l.right:l.left;++o<a;)c=u,u=(l=e[s[o]]).left===r?l.right:l.left,c&&u&&i<c.index&&i<u.index&&NDt(r,c,u)<0&&n.push([r.data,c.data,u.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})},find:function(n,e,t){for(var r,a,i=this,s=i._found||0,o=i.cells.length;!(a=i.cells[s]);)if(++s>=o)return null;var c=n-a.site[0],l=e-a.site[1],u=c*c+l*l;do{a=i.cells[r=s],s=null,a.halfedges.forEach(function(f){var p=i.edges[f],g=p.left;if(g!==a.site&&g||(g=p.right)){var _=n-g[0],y=e-g[1],w=_*_+y*y;w<u&&(u=w,s=g.index)}})}while(null!==s);return i._found=r,null==t||u<=t*t?a.site:null}};var Kfe=Me(9855);function T6(){return new oT}function oT(){this.reset()}Me(770),oT.prototype={constructor:oT,reset:function(){this.s=this.t=0},add:function(n){Xfe(aT,n,this.t),Xfe(this,aT.s,this.s),this.s?this.t+=aT.t:this.s=aT.t},valueOf:function(){return this.s}};var aT=new oT;function Xfe(n,e,t){var i=n.s=e+t,r=i-e;n.t=e-(i-r)+(t-r)}var A1=Math.PI,M3=A1/2,Mm=2*A1,Ba=A1/180,ry=(Math,Math.atan),Sm=Math.atan2,io=Math.cos,ms=(Math,Math,Math,Math,Math,Math.sin),Ff=(Math,Math.sqrt);Math;function Em(n){return n>1?M3:n<-1?-M3:Math.asin(n)}function hV(n,e){return[n>A1?n-Mm:n<-A1?n+Mm:n,e]}function bde(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}T6(),T6(),T6(),hV.invert=hV,function _It(n){1===n.length&&(n=function yIt(n){return function(e,t){return bde(n(e),t)}}(n))}(bde),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);T6();function DV(){}function Kde(n){return function(e,t){var i=io(e),r=io(t),s=n(i*r);return[s*r*ms(e),s*ms(t)]}}function py(n){return function(e,t){var i=Ff(e*e+t*t),r=n(i),s=ms(r),o=io(r);return[Sm(e*s,i*o),Em(i&&t*s/i)]}}T6(),T6(),T6(),T6(),function jde(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}(4.5),DV.prototype={constructor:DV,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},io(30*Ba),function $de(n){return function(e){var t=new DV;for(var i in n)t[i]=n[i];return t.stream=e,t}}({point:function(n,e){this.stream.point(n*Ba,e*Ba)}});var Xde=Kde(function(n){return Ff(2/(1+n))});Xde.invert=py(function(n){return 2*Em(n/2)});var Yde=Kde(function(n){return(n=function tIt(n){return n>1?0:n<-1?A1:Math.acos(n)}(n))&&n/ms(n)});function BV(n,e){return[n,e]}Yde.invert=py(function(n){return n}),BV.invert=BV,py(ry),py(Em),py(function(n){return 2*ry(n)});let gBt=(()=>{class n{getCenterOfMass(t){const i=new whe,r=vTt(sp([t]));return i.readFeatures(r)[0].getGeometry()}coordsDissolveToPolygon(t){const i=new whe;var s=function lBt(n,e){if(!function MEt(n){return!!n&&n.constructor===Object}(e=e||{}))throw new Error("options is invalid");var t=e.propertyName;!function REt(n,e,t){if(!n)throw new Error("No featureCollection passed");if(!t)throw new Error(".collectionOf() requires a name");if(!n||"FeatureCollection"!==n.type)throw new Error("Invalid input to "+t+", FeatureCollection required");for(var i=0,r=n.features;i<r.length;i++){var s=r[i];if(!s||"Feature"!==s.type||!s.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!s.geometry||s.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+s.geometry.type)}}(n,"Polygon","dissolve");var i=[];if(!e.propertyName)return Zhe(CN(Kfe.union.apply(null,n.features.map(function(c){return c.geometry.coordinates}))));var r={};!function She(n,e){if("Feature"===n.type)e(n,0);else if("FeatureCollection"===n.type)for(var t=0;t<n.features.length&&!1!==e(n.features[t],t);t++);}(n,function(c){Object.prototype.hasOwnProperty.call(r,c.properties[t])||(r[c.properties[t]]=[]),r[c.properties[t]].push(c)});for(var s=Object.keys(r),o=0;o<s.length;o++){var a=CN(Kfe.union.apply(null,r[s[o]].map(function(c){return c.geometry.coordinates})));a.properties[t]=s[o],i.push(a)}return Zhe(_m(i))}(_m([sp([t])]));return i.readFeatures(s)[0].getGeometry()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mBt=(()=>{class n{constructor(t,i,r,s){this.olViewService=t,this.olBaseMapService=i,this.olMeasureService=r,this.houseService=s,this.basemap$=this.olBaseMapService.basemap$.pipe()}ngAfterViewInit(){}zoomToHouse(){const{lat:t,lng:i}=this.houseService.house$.value.orientation,r=cO([i,t]);this.olViewService.animate({center:r,zoom:17.5})}}return n.\u0275fac=function(t){return new(t||n)(U(_he),U(che),U(vhe),U(Jo))},n.\u0275cmp=Rn({type:n,selectors:[["app-map-buttons"]],decls:20,vars:6,consts:[["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px"],[3,"click"],["label",""],["icon",""],[3,"disabled","click"],[2,"font-family","Material Icons Outlined"]],template:function(t,i){1&t&&(H(0,"div",0)(1,"button-state",1),dn("click",function(){return i.zoomToHouse()}),H(2,"span",2),V(3," Zoom to house"),N(),H(4,"span",3)(5,"mat-icon"),V(6,"house"),N()()(),H(7,"button-state",4),dn("click",function(){return i.olMeasureService.activate()}),H(8,"span",2),V(9),N(),H(10,"span",3)(11,"mat-icon",5),V(12,"square_foot"),N()()(),H(13,"button-state",1),dn("click",function(){return i.olBaseMapService.nextBasemap()}),H(14,"span",2),V(15),ba(16,"async"),N(),H(17,"span",3)(18,"mat-icon",5),V(19,"map"),N()()()()),2&t&&(Se("@slideInOut",void 0),ee(7),Se("disabled",i.olMeasureService.active),ee(2),Kn(" ",i.olMeasureService.active?"Stop":"Start"," measuring"),ee(6),Kn(" ",J1(16,4,i.basemap$),""))},dependencies:[k8,E7,T7,Nh,q4e,dd],styles:["[_nghost-%COMP%]{display:block;position:fixed;bottom:50px;z-index:9999;right:50px}[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{right:-24px;bottom:8px;position:relative}[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:right;right:50px;color:var(--color-100);text-shadow:2px 2px var(--accent-50);opacity:1}.active[_ngcontent-%COMP%]{background-color:var(--accent-50)!important;box-shadow:0 0 #0003,0 0 #00000024,0 0 #000!important;color:#1b1b1b!important}.active[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{opacity:.4}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px 8px 16px}.construction[_ngcontent-%COMP%]{height:16px;width:16px}.construction[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{right:18px!important;top:6px;line-height:0}.dev[_ngcontent-%COMP%]{color:#613d1a}"],data:{animation:[Pk,Kte]}}),n})();const ABt=["mapEl"];let vBt=(()=>{class n{constructor(t,i,r,s,o,a,c){this.zone=t,this.houseService=i,this.olBaseMapService=r,this.olMeasureService=s,this.olViewService=o,this.colorService=a,this.turfService=c,this.house=this.houseService.house$.value,this.subscriptions=[],this.origin=[1519995,7542140],this.rotation=0,this.roofCenter=new u4(this.origin),this.houseFeature=new X4({roofCenter:this.roofCenter,roofCenterShow:!1}),this.houseLayer=new dm({source:new G_({features:[this.houseFeature]}),style:[new F2({stroke:new qc({color:"rgba(0, 0, 0, 0)",width:2}),fill:new Oo({color:"rgba(30, 30, 30, 0.9)"}),zIndex:1})]})}ngOnDestroy(){[this.olViewService].forEach(t=>t.onDestroy()),this.subscriptions.forEach(t=>t.unsubscribe())}ngAfterViewInit(){this.getHousePolygon(),this.layers=[...this.olBaseMapService.getBaseLayers(),this.houseLayer],this.zone.runOutsideAngular(()=>this.initMap())}fromLocalToLonLat(t){var i=6378.137,r=Math.PI;const{lat:s,lng:o}=this.house.orientation,a=s+t[1]/i*(180/r)/1e3;return cO([o+t[0]/i*(180/r)/Math.cos(s*r/180)/1e3,a])}getHousePolygon(){this.house=this.houseService.house$.value;const{lat:t,lng:i}=this.house.orientation;this.origin=cO([i,t]),this.rotation=this.house.orientation.rotation;const o=this.house.partsFlatten.filter(c=>c instanceof ei&&c.type===kn.outer).filter(c=>c.floor===tt.all).flatMap(c=>c.sides[ot.out]).map(c=>((n,e,t)=>{const[i,r]=n,[s,o]=e;var a=Math.PI/180*t,c=Math.cos(a),l=Math.sin(a);return[c*(i-s)+l*(r-o)+s,c*(r-o)-l*(i-s)+o]})(c,this.house.centerHouse,180-this.rotation)).map(c=>this.fromLocalToLonLat(c));o.push(o[0]);const a=this.turfService.coordsDissolveToPolygon(o);this.houseFeature.setGeometry(a)}initMap(){this.olViewService.init(this.origin,15),this.map=new kxt({view:this.olViewService.view,layers:this.layers,target:this.mapEl.nativeElement}),this.addInteractions(),this.olMeasureService.init(this.map),this.olBaseMapService.map=this.map,window.map=this.map}zoom(t){return Math.log2(156543.03390625)-Math.log2(t)}addInteractions(){const i=(u,f)=>{var p=this.zoom(f);const g=new F2({image:new y6({radius:14,stroke:new qc({width:1,color:this.colorService.rgba(R0.accent,.9)}),fill:new Oo({color:"rgba(100, 100, 100, 1)"})}),stroke:new qc({color:"rgba(0, 0, 0, 0.5)",width:3}),zIndex:1/0,text:new Lf({offsetX:0,offsetY:0,text:"refresh",font:"normal 20px Material Icons",fill:new Oo({color:"white"}),rotation:-Ci(this.rotation||0)})});return p<16?[new F2({})]:u&&u.get("rotate-arrow")?g:void 0},r=()=>to(Zne(c.getAngle())-90,-30,this.roofCenter.getCoordinates()),s=()=>{const u=this.houseFeature.getGeometry().getCoordinates()[0];this.origin=u[0];const f=this.turfService.getCenterOfMass(u);this.roofCenter.setCoordinates(f.getCoordinates());const p=mn(p1(u[2],u[1],1)+180,1);this.rotation=p},o=new O0e({style:(u,f)=>{var p=this.zoom(f);const g=!0===this.houseFeature.getProperties().roofCenterShow,_=[new F2({stroke:new qc({color:this.colorService.rgba(R0.accent,.9),width:2}),fill:new Oo({color:g?this.colorService.rgba(R0.accent,.1):this.colorService.rgba(R0.primary,.7)}),zIndex:2})];if(p<16)return console.log(LS_icon[3],`\\u${LS_icon[3]}`,"data:image/svg+xml;utf8,"+encodeURI(LS_icon[4])),[..._,new F2({geometry:"roofCenter",image:new y6({radius:14,stroke:new qc({width:1,color:this.colorService.rgba(R0.accent,.9)}),fill:new Oo({color:"rgba(100, 100, 100, 1)"})}),stroke:new qc({color:"rgba(0, 0, 0, 0.5)",width:3}),zIndex:1/0,text:new Lf({offsetX:0,offsetY:0,text:"open_with",font:"normal 20px Material Icons",fill:new Oo({color:"white"})})})];if(g){let y=[-25,25];(this.rotation>90||this.rotation<-90)&&(y=[25,-25]),_.push(new F2({image:new y6({radius:30/f,stroke:new qc({color:"rgba(10, 10,10, 0.3)",width:2})}),geometry:"roofCenter",text:new Lf({font:"14px sans-serif",overflow:!0,fill:new Oo({color:this.colorService.rgb(R0.primary)}),text:`${this.rotation}\xb0`})}))}return _}}),a=new VMt({features:o.getFeatures()}),c=new nSt({features:o.getFeatures(),style:i}),l=()=>{c.setAnchor(this.roofCenter.getCoordinates()),c.setAngle(0*Math.PI/180),c.arrowFeature_.getGeometry().setCoordinates(r())};this.map.addInteraction(o),this.subscriptions.push(Vc(a,"translateend").subscribe(u=>{l()}),Vc(a,"translating").subscribe(u=>{l()}),Vc(this.houseFeature,"change").subscribe(u=>{s();const f=c.getAnchor();if(!f)return;const[p,g]=function fbt(n,e){const t=R_(n,void 0!==e?e:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=h6(i+180,360)-180),t}(f).map(_=>_.toFixed(8));console.log(`${this.rotation}\xb0,  ${g},${p}`)}),Vc(c,"rotatestart").subscribe(u=>{this.houseFeature.setProperties({roofCenterShow:!0})}),Vc(c,"rotateend").subscribe(u=>{this.houseFeature.setProperties({roofCenterShow:!1}),c.features_.pop(),c.features_.push(this.houseFeature),s(),l()}),Vc(o,"select").subscribe(u=>{u.selected[0]?(this.map.addInteraction(c),this.map.addInteraction(a),s(),l(),c.arrowFeature_.setStyle(i)):(this.map.removeInteraction(c),this.map.removeInteraction(a))}))}}return n.\u0275fac=function(t){return new(t||n)(U(Xi),U(Jo),U(che),U(vhe),U(_he),U(Yq),U(gBt))},n.\u0275cmp=Rn({type:n,selectors:[["app-page-map"]],viewQuery:function(t,i){if(1&t&&wo(ABt,5),2&t){let r;Qi(r=Wi())&&(i.mapEl=r.first)}},decls:3,vars:0,consts:[[1,"map"],["mapEl",""]],template:function(t,i){1&t&&Ke(0,"div",0,1)(2,"app-map-buttons")},dependencies:[mBt],styles:['[_ngcontent-%COMP%]:root, [_nghost-%COMP%]{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position[_ngcontent-%COMP%]{top:8px;right:8px;position:absolute}.ol-scale-line[_ngcontent-%COMP%]{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner[_ngcontent-%COMP%]{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar[_ngcontent-%COMP%]{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner[_ngcontent-%COMP%]{display:flex}.ol-scale-step-marker[_ngcontent-%COMP%]{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text[_ngcontent-%COMP%]{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text[_ngcontent-%COMP%]{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar[_ngcontent-%COMP%]{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even[_ngcontent-%COMP%]{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd[_ngcontent-%COMP%]{background-color:var(--ol-background-color)}.ol-unsupported[_ngcontent-%COMP%]{display:none}.ol-viewport[_ngcontent-%COMP%], .ol-unselectable[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{all:unset}.ol-selectable[_ngcontent-%COMP%]{-webkit-touch-callout:default;-webkit-user-select:text;user-select:text}.ol-grabbing[_ngcontent-%COMP%]{cursor:grabbing}.ol-grab[_ngcontent-%COMP%]{cursor:move;cursor:grab}.ol-control[_ngcontent-%COMP%]{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom[_ngcontent-%COMP%]{top:.5em;left:.5em}.ol-rotate[_ngcontent-%COMP%]{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden[_ngcontent-%COMP%]{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent[_ngcontent-%COMP%]{top:4.643em;left:.5em}.ol-full-screen[_ngcontent-%COMP%]{right:.5em;top:.5em}.ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:1.4em}.ol-compass[_ngcontent-%COMP%]{display:block;font-weight:400;will-change:transform}.ol-touch[_ngcontent-%COMP%]   .ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.5em}.ol-touch[_ngcontent-%COMP%]   .ol-zoom-extent[_ngcontent-%COMP%]{top:5.5em}.ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom[_ngcontent-%COMP%]   .ol-zoom-in[_ngcontent-%COMP%]{border-radius:2px 2px 0 0}.ol-zoom[_ngcontent-%COMP%]   .ol-zoom-out[_ngcontent-%COMP%]{border-radius:0 0 2px 2px}.ol-attribution[_ngcontent-%COMP%]{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline;list-style:none}.ol-attribution[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{content:" "}.ol-attribution[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:0}.ol-attribution.ol-collapsed[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none}.ol-attribution[_ngcontent-%COMP%]:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible[_ngcontent-%COMP%]{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.ol-zoomslider[_ngcontent-%COMP%]{top:4.5em;left:.5em;height:200px}.ol-zoomslider[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;height:10px}.ol-touch[_ngcontent-%COMP%]   .ol-zoomslider[_ngcontent-%COMP%]{top:5.5em}.ol-overviewmap[_ngcontent-%COMP%]{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible[_ngcontent-%COMP%]{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap[_ngcontent-%COMP%]   .ol-overviewmap-map[_ngcontent-%COMP%], .ol-overviewmap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block}.ol-overviewmap[_ngcontent-%COMP%]   .ol-overviewmap-map[_ngcontent-%COMP%]{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap[_ngcontent-%COMP%]:not(.ol-collapsed)   button[_ngcontent-%COMP%]{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed[_ngcontent-%COMP%]   .ol-overviewmap-map[_ngcontent-%COMP%], .ol-overviewmap.ol-uncollapsible[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.ol-overviewmap[_ngcontent-%COMP%]:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box[_ngcontent-%COMP%]{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap[_ngcontent-%COMP%]   .ol-overviewmap-box[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}[_nghost-%COMP%]     .ol-attribution{display:none}.map[_ngcontent-%COMP%]{height:100%;width:100%}'],changeDetection:0}),n})(),_Bt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.Tag=j3,this.Section=_t,this.SensorType=Ge}ngAfterViewInit(){this.appService.hardSetStates({[T2.theoreticalWalls]:!1})}getGroups(t){return[...new Set(Object.values(this.houseService.house$.value.partsFlatten).filter(r=>r instanceof Pt).filter(r=>r.sensorType===t).map(r=>r.group))].filter(r=>r).sort((r,s)=>r-s).join(", ")}getOutlets(t){return Object.values(this.houseService.house$.value.partsFlatten).filter(r=>r instanceof Pt).filter(r=>r.sensorType===t).map(r=>r.amount).reduce((r,s)=>r+s,0)}getCable(t,i=1){return mn(Object.values(this.houseService.house$.value.partsFlatten).filter(s=>s instanceof Pt).filter(s=>s.sensorType===t).map(s=>s.cableLength).reduce((s,o)=>s+o,0),i)}}return n.\u0275fac=function(t){return new(t||n)(U(Jo),U(Fo))},n.\u0275cmp=Rn({type:n,selectors:[["app-page-wired"]],decls:214,vars:112,consts:[[3,"id"],[3,"url"],[1,"technical"],["href","https://community.home-assistant.io/t/circadian-lighting-custom-component/61246"],["identifier","PassiveOpen-Wired"]],template:function(t,i){1&t&&(H(0,"section",0)(1,"h1"),V(2,"Smart home"),N(),H(3,"p"),V(4," In addition to being a regular home, this house is also a smart home that employs a lot of domotics. This involves the use of many sensors and lights that can be controlled remotely. Wired -cloudless- connections are typically more reliable and affordable than wireless options such as Wi-Fi, which means that the setup may differ from what you're familiar with. "),N()(),H(5,"section",0)(6,"h2"),V(7," Electricity "),N(),H(8,"h3"),Ke(9,"app-svg",1),H(10,"span"),V(11,"Normal - 230v"),N()(),H(12,"p"),V(13," In Europe (230v), sockets usually share a breaker or a group that is rated at either 16 or 10 amperes. The rating depends on the load and wire thickness, which is 2.5mm2 and 1.5mm2, respectively. "),N(),H(14,"label",2)(15,"span"),V(16,"Technical "),N(),V(17),Ke(18,"br"),V(19),Ke(20,"br"),V(21),Ke(22,"br"),N(),H(23,"h3"),Ke(24,"app-svg",1),H(25,"span"),V(26,"3Phase - 400v"),N()(),H(27,"p"),V(28," The unusual symbol you're seeing is a "),H(29,"tag"),V(30,"perilex"),N(),V(31," plug, which typically contains three phases, though some models may only have two. The main objective of this plug is to distribute the load over three wires, rather than one, which requires the use of more wires. This type of plug is commonly used for high-power appliances such as induction cookers in the kitchen. Electric cars do not utilize this plug, but they do require three-phase power in most cases. "),N(),H(32,"label",2)(33,"span"),V(34,"Technical "),N(),V(35),Ke(36,"br"),V(37),Ke(38,"br"),V(39),Ke(40,"br"),N()(),H(41,"section",0)(42,"h2"),V(43," lightning "),N(),H(44,"h3"),Ke(45,"app-svg",1),H(46,"span"),V(47,"Lamps"),N()(),H(48,"p"),V(49," Lamp outlets are available in both 230V and 24V variants. Typically, most lamps can be dimmed, and their wiring runs back to the server room. They are controlled by a "),H(50,"tag"),V(51,"hub"),N(),V(52," that is connected to the home automation system. "),N(),H(53,"h3"),Ke(54,"app-svg",1),H(55,"span"),V(56,"Double switch "),N()(),H(57,"p"),V(58," The double pulse switches have six different options available. You can program actions for two single presses, two double presses, and two long presses. The switches operate at 24V, and their wiring runs back to the "),H(59,"tag"),V(60,"hub"),N(),V(61," . "),N(),H(62,"h3"),Ke(63,"app-svg",1),H(64,"span"),V(65,"Dimmer"),N()(),H(66,"p"),V(67," The dimmer switch enables you to adjust the brightness of the room's lighting. However, the smart-home system should automatically select the appropriate dimming level based on the time of day, see "),H(68,"a",3),V(69,"circadian lightning."),N(),V(70,". You can override this automation by using the dimmer switch. "),N(),H(71,"h3"),Ke(72,"app-svg",1),H(73,"span"),V(74,"DLC, or light-socket"),N()(),H(75,"p"),V(76," To outsiders, it may seem strange, but each fixed light in the house has its own separate mini-socket. In Sweden, an old standard was in use, but since 2019, they have followed the EU standard of DLC. "),N()(),H(77,"section",0)(78,"h2"),V(79," Network / Ethernet "),N(),H(80,"h3"),Ke(81,"app-svg",1),H(82,"span"),V(83,"Ethernet (rj45)"),N()(),H(84,"p"),V(85," Reliable internet is essential when working from home, and the best option is to have a wall outlet for a regular internet cable. These outlets are not limited to computers and can be used for other devices like speakers, televisions, and more. "),N(),H(86,"label",2)(87,"span"),V(88,"Technical "),N(),V(89),Ke(90,"br"),V(91),Ke(92,"br"),N(),H(93,"h3"),Ke(94,"app-svg",1),H(95,"span"),V(96,"Power-over-Ethernet "),N()(),H(97,"p"),V(98,"With a voltage of 48 volts, internet cables can be used to power certain devices without requiring additional wiring. This capability makes them a convenient option for devices like ring doorbells, security cameras, and Wi-Fi access points. "),N(),H(99,"h3"),Ke(100,"app-svg",1),H(101,"span"),V(102,"Wifi"),N()(),H(103,"p"),V(104,"Needs no introduction. Know that you can have more complex wifi solutions than your internet provider can provide. "),N(),H(105,"label",2)(106,"span"),V(107,"Technical "),N(),V(108),Ke(109,"br"),N()(),H(110,"section",0)(111,"h2"),V(112," Safety "),N(),H(113,"h3"),Ke(114,"app-svg",1),H(115,"span"),V(116,"Smoke/heat detectors"),N()(),H(117,"p"),V(118,"For safety purposes, it is advisable to install several smoke sensors throughout the house, along with a heat sensor specifically in the kitchen. "),N(),H(119,"label",2)(120,"span"),V(121,"Technical "),N(),V(122),Ke(123,"br"),V(124),Ke(125,"br"),N(),H(126,"h3"),Ke(127,"app-svg",1),H(128,"span"),V(129,"Camera's"),N()(),H(130,"p"),V(131," While not necessary, installing a security monitoring system in your home can offer added convenience and security. With your own VPN, you can remotely monitor your house from anywhere. "),N(),H(132,"label",2)(133,"span"),V(134,"Technical "),N(),V(135),Ke(136,"br"),N(),H(137,"h3"),Ke(138,"app-svg",1)(139,"app-svg",1),H(140,"span"),V(141,"Window/Door sensors/Motion detection"),N()(),H(142,"p"),V(143," The alarm function is expanded and fortified with window/door sensors and motion detection to provide added security. "),N()(),H(144,"section",0)(145,"h2"),V(146," Other smarts "),N(),H(147,"h3"),Ke(148,"app-svg",1),H(149,"span"),V(150,"Sun blinds / screens"),N()(),H(151,"p"),V(152," To protect against high sun radiation in summer, a passive house must be equipped with sun blinds/screens. The screens can be passive or automatically controlled by the smart-home system. External screens are more effective than internal screens. "),N(),H(153,"h3"),Ke(154,"app-svg",1),H(155,"span"),V(156,"Motion sensors"),N()(),H(157,"p"),V(158," Motion sensors can be a fun addition to your smart-home setup, allowing for automated control of lights turning on and off. They can also enhance home security by supporting the alarm system. "),N(),H(159,"h3"),Ke(160,"app-svg",1),H(161,"span"),V(162,"Temperature"),N()(),H(163,"p"),V(164,"Temperature sensors play a important role in regulating the heating, cooling, and ventilation in specific areas of the house. "),N()(),H(165,"section",0)(166,"h2"),V(167," Ventilation "),N(),H(168,"h3"),Ke(169,"app-svg",1),H(170,"span"),V(171,"Ventilation in"),N()(),H(172,"p"),V(173," Due to the airtightness of the house, fresh air is necessary in the bedrooms and main living rooms to ensure proper ventilation. The airflow will then circulate to other areas of the house. "),N(),H(174,"h3"),Ke(175,"app-svg",1),H(176,"span"),V(177,"Ventilation out"),N()(),H(178,"p"),V(179,' Air exhausts are installed in the bathroom, kitchen, and toilets to remove moisture and unpleasant smells, as they are the rooms with "dirty" air. '),N()(),H(180,"section",0)(181,"h2"),V(182," Water "),N(),H(183,"h3"),Ke(184,"app-svg",1),H(185,"span"),V(186,"Rainwater non-drinkable & cold"),N()(),H(187,"p"),V(188," This water has low calcium levels, making it ideal for watering plants and gardens. It can also be used for flushing toilets and washing machines, reducing the amount of soap required. While it doesn't need to be drinkable, it's still a valuable resource that shouldn't be wasted. "),N(),H(189,"h3"),Ke(190,"app-svg",1),H(191,"span"),V(192,"Water, Drinkable Both warm and cold"),N()(),H(193,"p"),V(194," Used for daily water use. "),N(),H(195,"h3"),Ke(196,"app-svg",1),H(197,"span"),V(198,"Shower, Drinkable Both warm and cold"),N()(),H(199,"p"),V(200," The mixing of warm-drink water and cold rainwater is not permitted when using water from a supply company, due to the high risk of flow back. However, the use of rainwater has benefits such as reducing the amount of water used, requiring less soap, and resulting in softer hair. "),N(),H(201,"h3"),Ke(202,"app-svg",1),H(203,"span"),V(204,"Drainage"),N()(),H(205,"p"),V(206," Every water tap has of course a drain. But sometimes they come separate , like in the laundry room. "),N(),H(207,"h3"),Ke(208,"app-svg",1),H(209,"span"),V(210,"Toilets"),N()(),H(211,"p"),V(212," You know what they do. Should be flushed with (filtered, non-stinky) rainwater. "),N()(),Ke(213,"disqus",4)),2&t&&(Se("id",i.Section.wiredWelcome),ee(5),Se("id",i.Section.wiredPower),ee(4),aa("sensor-",i.SensorType.socket,""),bs("url","assets/svg/",i.SensorType.socket,".svg"),ee(8),Kn(" Amount: ",i.getOutlets(i.SensorType.socket)," sockets"),ee(2),Kn(" Group numbers: [ ",i.getGroups(i.SensorType.socket)," ]"),ee(2),Kn(" Total cable length: ",i.getCable(i.SensorType.socket),"m"),ee(3),aa("sensor-",i.SensorType.perilex,""),bs("url","assets/svg/",i.SensorType.perilex,".svg"),ee(11),Kn(" Amount: ",i.getOutlets(i.SensorType.perilex)," socket"),ee(2),Kn(" Total cable length: ",i.getCable(i.SensorType.perilex),"m"),ee(2),Kn(" Group numbers: [ ",i.getGroups(i.SensorType.perilex)," ]"),ee(2),Se("id",i.Section.wiredLight),ee(4),aa("sensor-",i.SensorType.lightBulb,""),bs("url","assets/svg/",i.SensorType.lightBulb,".svg"),ee(9),aa("sensor-",i.SensorType.lightSwitch,""),bs("url","assets/svg/",i.SensorType.lightSwitch,".svg"),ee(9),aa("sensor-",i.SensorType.dimmer,""),bs("url","assets/svg/",i.SensorType.dimmer,".svg"),ee(9),aa("sensor-",i.SensorType.dlc,""),bs("url","assets/svg/",i.SensorType.dlc,".svg"),ee(5),Se("id",i.Section.wiredEthernet),ee(4),aa("sensor-",i.SensorType.ethernet,""),bs("url","assets/svg/",i.SensorType.ethernet,".svg"),ee(8),Kn(" Amount: ",i.getOutlets(i.SensorType.ethernet),""),ee(2),Kn(" Total cable length: ",i.getCable(i.SensorType.ethernet,0),"m"),ee(3),aa("sensor-",i.SensorType.poe,""),bs("url","assets/svg/",i.SensorType.poe,".svg"),ee(6),aa("sensor-",i.SensorType.wifi,""),bs("url","assets/svg/",i.SensorType.wifi,".svg"),ee(8),Kn(" Amount: ",i.getOutlets(i.SensorType.wifi)," Access points"),ee(2),Se("id",i.Section.wiredSafety),ee(4),aa("sensor-",i.SensorType.smoke,""),bs("url","assets/svg/",i.SensorType.smoke,".svg"),ee(8),Kn(" Amount: ",i.getOutlets(i.SensorType.smoke),""),ee(2),Kn(" Total cable length: ",i.getCable(i.SensorType.smoke,0),"m"),ee(3),aa("sensor-",i.SensorType.camera,""),bs("url","assets/svg/",i.SensorType.camera,".svg"),ee(8),Kn(" Amount: ",i.getOutlets(i.SensorType.camera)," PoE"),ee(3),aa("sensor-",i.SensorType.pir,""),bs("url","assets/svg/",i.SensorType.pir,".svg"),ee(1),aa("sensor-",i.SensorType.alarm,""),bs("url","assets/svg/",i.SensorType.alarm,".svg"),ee(5),Se("id",i.Section.wiredExtra),ee(4),aa("sensor-",i.SensorType.blinds,""),bs("url","assets/svg/",i.SensorType.blinds,".svg"),ee(6),aa("sensor-",i.SensorType.pir,""),bs("url","assets/svg/",i.SensorType.pir,".svg"),ee(6),aa("sensor-",i.SensorType.temperature,""),bs("url","assets/svg/",i.SensorType.temperature,".svg"),ee(5),Se("id",i.Section.wiredVent),ee(4),aa("sensor-",i.SensorType.ventIn,""),bs("url","assets/svg/",i.SensorType.ventIn,".svg"),ee(6),aa("sensor-",i.SensorType.ventOut,""),bs("url","assets/svg/",i.SensorType.ventOut,".svg"),ee(5),Se("id",i.Section.wiredWater),ee(4),aa("sensor-",i.SensorType.waterRain,""),bs("url","assets/svg/",i.SensorType.waterRain,".svg"),ee(6),aa("sensor-",i.SensorType.waterWarm,""),bs("url","assets/svg/",i.SensorType.waterWarm,".svg"),ee(6),aa("sensor-",i.SensorType.shower,""),bs("url","assets/svg/",i.SensorType.shower,".svg"),ee(6),aa("sensor-",i.SensorType.drain,""),bs("url","assets/svg/",i.SensorType.drain,".svg"),ee(6),aa("sensor-",i.SensorType.toilet,""),bs("url","assets/svg/",i.SensorType.toilet,".svg"))},dependencies:[j9,$4e,VS],styles:["h3[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%]{margin-right:6px}"]}),n})();const yBt=["tableRows"];function wBt(n,e){if(1&n&&(H(0,"th",7),V(1),N()),2&n){const t=Xt().$implicit;ee(1),Kn(" ",t.name," ")}}function CBt(n,e){if(1&n&&Ke(0,"span",9),2&n){const t=Xt().$implicit,i=Xt().$implicit;Se("innerHTML",i.def(t[i.id],t.unit),V3)}}function bBt(n,e){if(1&n&&(H(0,"td",8),Ke(1,"span",9),Yt(2,CBt,1,1,"span",10),Ke(3,"span",9),N()),2&n){const t=e.$implicit,i=Xt().$implicit;ee(1),Se("innerHTML",i.prefix,V3),ee(1),Se("ngIf",t[i.id]),ee(1),Se("innerHTML",i.postfix,V3)}}function xBt(n,e){1&n&&(Zs(0,4),Yt(1,wBt,2,1,"th",5),Yt(2,bBt,4,3,"td",6),Js()),2&n&&Se("matColumnDef",e.$implicit.id)}function MBt(n,e){1&n&&Ke(0,"tr",11)}function SBt(n,e){if(1&n){const t=Qa();Zs(0),H(1,"tr",12,13),dn("click",function(){const s=gi(t).$implicit;return h(Xt().rowClick(s))}),N(),Js()}if(2&n){const t=e.$implicit;ee(1),Tw("group-",t.uuid," row-",t.type,""),Br("row-folded",t.uuid)}}let EBt=(()=>{class n{constructor(t){this.houseService=t,this.columns=[{id:"folded",name:"",def:i=>`${i}`},{id:Sg.name,name:"Name",def:i=>`${i}`},{id:"calcAmount",name:"#",def:(i,r="x")=>`${i}${r}`},{id:"price",name:"Piece price",def:i=>`${this.readableNumbers(Number(i))}`},{id:"calcPrice",name:"Sum price",def:i=>`${this.readableNumbers(Number(i),-2)}`},{id:Sg.sizeOrVersion,name:"Size or Version",def:i=>`${i}`},{id:Sg.remarks,name:"remarks",def:i=>`${i}`}],this.groupRow={},this.columnNames=this.columns.map(i=>i.id),this.parts=[]}set data(t){this.costTable=t;const i=t.costs.filter(r=>r);this.dataSource=[...i.flatMap(r=>r instanceof kM?[r,...r.costs]:r),new hGe({name:`Total ${t.alias.toLocaleLowerCase()}`,costs:i})]}readableNumbers(t,i){return void 0!==i?`\u20ac${mn(t,0).toLocaleString()}`:t>1e3?`\u20ac${mn(t).toLocaleString()}`:`\u20ac${t}`}rowClick(t){t instanceof kM&&(t.toggleFold(),this.rowContainers.forEach(i=>{const r=i.nativeElement.classList;r.contains(`group-${t.uuid}`)&&r.toggle("row-folded")}))}}return n.\u0275fac=function(t){return new(t||n)(U(Jo))},n.\u0275cmp=Rn({type:n,selectors:[["app-table"]],viewQuery:function(t,i){if(1&t&&wo(yBt,5,fn),2&t){let r;Qi(r=Wi())&&(i.rowContainers=r)}},inputs:{data:"data"},decls:4,vars:6,consts:[["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z0",3,"dataSource","id"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"innerHTML"],[3,"innerHTML",4,"ngIf"],["mat-header-row",""],["mat-row","",3,"click"],["tableRows",""]],template:function(t,i){1&t&&(H(0,"table",0),Yt(1,xBt,3,1,"ng-container",1),Yt(2,MBt,1,0,"tr",2),Yt(3,SBt,3,6,"ng-container",3),N()),2&t&&(bs("id","table-",i.costTable.section,""),Se("dataSource",i.dataSource),ee(1),Se("ngForOf",i.columns),ee(1),Se("matHeaderRowDef",i.columnNames)("matHeaderRowDefSticky",!0),ee(1),Se("matRowDefColumns",i.columnNames))},dependencies:[W3,u3,qb,V9,Kb,U9,N9,Xb,G9,Q9,Yb,Zb],styles:["tr[_ngcontent-%COMP%]{transition:.2s;background-color:var(--color-0)!important}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr.row-total[_ngcontent-%COMP%]{background-color:var(--color-5)!important}tr.row-group[_ngcontent-%COMP%]{background-color:var(--color-10)!important;cursor:pointer}tr[_ngcontent-%COMP%]:hover{background-color:var(--color-20)!important}tr.row-folded[_ngcontent-%COMP%]:not(.row-group){height:0}tr.row-folded[_ngcontent-%COMP%]:not(.row-group)   td[_ngcontent-%COMP%]{border-bottom-width:0px;padding:0;line-height:0px;overflow:hidden}[_nghost-%COMP%], table[_ngcontent-%COMP%]{width:100%}.mat-column-calcAmount[_ngcontent-%COMP%], .mat-column-price[_ngcontent-%COMP%], .mat-column-calcPrice[_ngcontent-%COMP%]{text-align:right;width:60px}.mat-column-calcPrice[_ngcontent-%COMP%]{padding-right:16px}.mat-column-sizeOrVersion[_ngcontent-%COMP%], .mat-column-other[_ngcontent-%COMP%]{min-width:60px}.mat-column-name[_ngcontent-%COMP%]{min-width:200px}"]}),n})();function TBt(n,e){1&n&&S2(0)}const LBt=function(n){return{$implicit:n}};function DBt(n,e){if(1&n&&(Zs(0),Yt(1,TBt,1,0,"ng-container",4),Js()),2&n){const t=e.$implicit;Xt();const i=Ir(8);ee(1),Se("ngTemplateOutlet",i)("ngTemplateOutletContext",G3(2,LBt,t))}}function IBt(n,e){1&n&&(H(0,"span"),V(1," Nice to discover a lot of moldings: "),H(2,"a",8),V(3,"Wikipedia Moldings"),N()())}function BBt(n,e){if(1&n){const t=Qa();H(0,"section",5)(1,"h2",6),dn("click",function(){const s=gi(t).$implicit;return h(s.sectionFold=!s.sectionFold)}),H(2,"mat-icon"),V(3),N(),V(4),N(),H(5,"div"),Yt(6,IBt,4,0,"span",7),Ke(7,"app-table",3),N()()}if(2&n){const t=e.$implicit,i=Xt();Se("id",t.section),ee(3),Kn("",t.sectionFold?"expand_more":"expand_less"," "),ee(1),Kn(" ",t.alias," "),ee(1),Br("folded",t.sectionFold),ee(1),Se("ngIf",t.section===i.Section.costsFinishes),ee(1),Se("data",t)}}let RBt=(()=>{class n{constructor(t){this.houseService=t,this.Section=_t,this.tables=[this.getPreps(),this.getConstruction(),this.getOpenings(),this.getElectra(),this.getFinish(),this.getWater(),this.getOutsideFinish()],this.hiddenTables=[this.getKitchen(),this.getBathroom()],this.totals=this.getTotals()}getFinish(){const{innerLength:i}=this.houseService.getWallLength(),{innerArea:s}=this.houseService.getWallArea();return new q0({section:_t.costsFinishes,alias:"Finishes",costs:[new la({amount:i,name:"Crown molding",price:3,unit:"m"}),new la({amount:i,name:"Baseboard",price:3,unit:"m"}),this.houseService.getT(Zo,[],a=>({name:"Door casing",price:60})),this.houseService.getT(Ta,[],a=>({name:"Window casing",price:60})),new la({amount:s,name:"Drywall / Gips boards",price:10,unit:"m2"})]})}getWater(){return this.houseService.getWallLength(),this.houseService.getWallArea(),new q0({section:_t.costsWater,alias:"Water ",costs:[this.houseService.getT(ic,["sensorType"],a=>({name:"Cold water",price:20,unit:"m"}),a=>a.sensorType===Ge.waterCold,!1),this.houseService.getT(ic,["sensorType"],a=>({name:"Warm water",price:20,unit:"m"}),a=>a.sensorType===Ge.waterWarm,!1),this.houseService.getT(ic,["sensorType"],a=>({name:"Rain water",price:20,unit:"m"}),a=>a.sensorType===Ge.waterWarm,!1),this.houseService.getT(ic,["sensorType"],a=>({name:"Drains",price:20,unit:"m"}),a=>[Ge.drain,Ge.toilet].includes(a.sensorType),!1)]})}getOutsideFinish(){const{innerLength:i}=this.houseService.getWallLength(),{innerArea:s}=this.houseService.getWallArea();return new q0({section:_t.costsOuterFinishes,alias:"Outer finishes",costs:[new la({amount:i,name:"Crown molding",price:3,unit:"m"}),new la({amount:i,name:"Baseboard",price:3,unit:"m"}),this.houseService.getT(Zo,[],a=>({name:"Door casing",price:60})),this.houseService.getT(Ta,[],a=>({name:"Window casing",price:60})),new la({amount:s,name:"Drywall / Gips boards",price:10,unit:"m2"})]})}getElectra(){return new q0({section:_t.costsElectra,alias:"Electra",costs:[new la({amount:this.houseService.getGroups(Ge.socket).length,name:"Circuit breaker",sizeOrVersion:"10A - 240v",price:10}),new la({amount:Math.ceil(this.houseService.getGroups(Ge.socket).length/4),name:"Circuit breaker Earth Group",sizeOrVersion:"240v",price:80}),this.houseService.getT(Pt,["sensorType"],i=>({name:"Electric power socket",sizeOrVersion:"230v",price:20}),i=>i.sensorType===Ge.socket),this.houseService.getT(Pt,["sensorType"],i=>({name:"Electric wires",sizeOrVersion:"2.5mm2 230v",price:2,unit:"m"}),i=>[Ge.socket].includes(i.sensorType),!1),this.houseService.getT(Pt,["sensorType"],i=>({name:"Perilex socket",price:60}),i=>i.sensorType===Ge.perilex),this.houseService.getT(Pt,["sensorType"],i=>({name:"Perilex wire",sizeOrVersion:"5 sub wires",price:2,unit:"m"}),i=>[Ge.perilex].includes(i.sensorType),!1),this.houseService.getT(Qc,["sensorType"],i=>({name:"Light socket",price:20}),i=>!0),this.houseService.getT(Pt,["sensorType"],i=>({name:"Switch (light)",sizeOrVersion:"Double pulse",price:20}),i=>i.sensorType===Ge.lightSwitch),this.houseService.getT(Pt,["sensorType"],i=>({name:"Dimmer",price:20}),i=>i.sensorType===Ge.dimmer),this.houseService.getT(Pt,["sensorType"],i=>({name:"Wifi AP",price:100}),i=>i.sensorType===Ge.wifi),this.houseService.getT(Pt,[],i=>({name:"Ethernet cable",sizeOrVersion:"CAT6",price:.6,unit:"m"}),i=>[Ge.ethernet,Ge.poe].includes(i.sensorType),!1)]})}getPreps(){return new q0({section:_t.costsPreparations,alias:"Preparations",costs:[new la({name:"F\xf6rhandsbesked",price:2e3}),new la({name:"Bygglov",price:3e3}),new la({name:"Dirt work",price:1e3}),new la({name:"Ground prep",price:9e3}),new la({name:"Constructions calculations",price:3e3}),new la({name:"PassivHaus Certification",price:3e3}),new la({name:"Utilities connections /fees",price:15e3}),new la({name:"Tool rental",price:3e3})]})}getConstruction(){return new q0({section:_t.costsConstruction,alias:"Construction",costs:[new la({name:"foundation",price:9e3}),new la({name:"footer",price:9e3}),new la({name:"Concrete prefab floor",price:32e3}),new la({name:"Studs",price:1e4}),new la({name:"OSB",price:1e4})]})}getBathroom(){return new q0({section:_t.costsConstruction,alias:"Bathroom",costs:[new la({name:"Complete kitchen",price:9e3})]})}getKitchen(){return new q0({section:_t.costsConstruction,alias:"Kitchen",costs:[new la({name:"Complete kitchen",price:9e3})]})}getOpenings(){return new q0({section:_t.costsOpenings,alias:"Openings",costs:[this.houseService.getT(Zo,["outside"],i=>({name:"Door",sizeOrVersion:`230x${i.width}`,price:i.outside?600:200,unit:"#",other:i.outside?"Outer door":"Inner door"})),this.houseService.getT(Ta,["width","height","windowForm"],i=>({name:"Window",sizeOrVersion:`${1e3*i.height}mm x ${1e3*i.width}mm`,price:i.width*i.height*800,other:`${i.windowForm}`}),i=>![$0.windowWall].includes(i.windowForm)),this.houseService.getT(Ta,["width","height","windowForm"],i=>({name:"Window wall",sizeOrVersion:"Custom",price:6e4,other:"main window wall"}),i=>[$0.windowWall].includes(i.windowForm))]})}getTotals(){const t=[...this.tables,...this.hiddenTables].flatMap(i=>new la({price:Z3(i.costs.filter(r=>void 0!==r).map(r=>r.calcPrice)),name:i.alias}));return console.log(),new q0({section:_t.costsTotals,alias:"Total",costs:[...t,new la({price:Z3(t.map(i=>i.price)),amount:.12,name:"Unexpected costs (12%)"})]})}}return n.\u0275fac=function(t){return new(t||n)(U(Jo))},n.\u0275cmp=Rn({type:n,selectors:[["app-page-costs"]],decls:13,vars:3,consts:[[4,"ngFor","ngForOf"],["simple",""],[2,"margin-bottom","40px",3,"id"],[3,"data"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"id"],[3,"click"],[4,"ngIf"],["href","https://en.wikipedia.org/wiki/Molding_(decorative)"]],template:function(t,i){1&t&&(H(0,"h1"),V(1,"What does it costs"),N(),H(2,"p"),V(3," This is a overview of all the prices. Some are fixed but most are dynamic calculated of the other inputs on this website. All these prices are estimations based on on certain area, with a certain deal with a construction store.\n"),N(),H(4,"h3"),V(5," This page is still under construction. Not complete!!! Prices are not accurate\n"),N(),Yt(6,DBt,2,4,"ng-container",0),Yt(7,BBt,8,7,"ng-template",null,1,c3),H(9,"section",2)(10,"h1"),V(11,"Totals"),N(),Ke(12,"app-table",3),N()),2&t&&(ee(6),Se("ngForOf",i.tables),ee(3),Se("id",i.Section.costsTotals),ee(3),Se("data",i.totals))},dependencies:[W3,u3,gI,k8,EBt],styles:["[_nghost-%COMP%]{max-width:900px;display:block;margin:0 auto;padding:0 32px}section[_ngcontent-%COMP%]{margin:0;padding:0 0 0 24px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{cursor:pointer;transition:.2s;display:flex;align-items:center;padding:6px;gap:16px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{background:var(--color-10)}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{max-height:100vh;transition:.4s ease-in;overflow:hidden}section[_ngcontent-%COMP%] > div.folded[_ngcontent-%COMP%]{transition:.4s ease-out;max-height:0px}app-table[_ngcontent-%COMP%]{display:block}  td.mat-column-price span{opacity:0}  td.mat-column-calcPrice span{opacity:0}  #table-costs-totals .mat-column-sizeOrVersion,   #table-costs-totals .mat-column-other,   #table-costs-totals .mat-column-calcAmount,   #table-costs-totals .mat-column-price{color:transparent}"]}),n})(),FBt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.discord=this.appService.discord,this.github=this.appService.github,this.youtube=this.appService.youtube,this.patreon=this.appService.patreon,this.instagram=this.appService.instagram,this.faDiscord=PM,this.faGithub=fP,this.faYoutube=dP,this.faPatreon=uP,this.faInstagram=hP}}return n.\u0275fac=function(t){return new(t||n)(U(Jo),U(Fo))},n.\u0275cmp=Rn({type:n,selectors:[["app-page-about"]],decls:111,vars:8,consts:[["src","/assets/svg/logo.svg",1,"po-logo"],["target","_blank",1,"larger-link",2,"background","#FF0000",3,"href"],[3,"icon"],["target","_blank",1,"larger-link",2,"background","rgb(240 0 117)",3,"href"],["src","/assets/img/plings.jpg",1,"plings-logo"],["target","_blank",1,"larger-link",2,"background","var(--primary-color)",3,"href"],["target","_blank",1,"larger-link",3,"href"],["rel","license","href","http://creativecommons.org/licenses/by-nc/4.0/"],["alt","Creative Commons Licence","src","https://i.creativecommons.org/l/by-nc/4.0/88x31.png",2,"border-width","0"],["target","_blank","href","https://GeoDev.nl",1,"larger-link"],["target","_blank","href","https://www.joostdevree.nl"],["target","_blank","href","https://berkela.home.xs4all.nl"],["target","_blank","href","https://gathering.tweakers.net/forum/list_messages/2147286"],["target","_blank","href","https://www.byggahus.se/"],["target","_blank","href","https://www.passivehouse.com"],["target","_blank","href","https://passiefbouwen.nl/"],["target","_blank","href","https://www.igpassivhus.se/"],["target","_blank","href","https://passipedia.org/"]],template:function(t,i){1&t&&(H(0,"main")(1,"h1"),V(2," About PassiveOpen "),Ke(3,"img",0),N(),H(4,"P"),V(5," The PassiveOpen initiative is dedicated to promoting the use of passive houses as a sustainable building solution. We are passionate about the potential of passive house design to transform the way we live and work, and we are eager to share our knowledge and experience with others who are interested in creating a more sustainable future. "),N(),H(6,"section")(7,"h2"),V(8," 2_Plings "),N(),H(9,"p"),V(10," This website is focused on a house that is being built by 2_plings, a couple living in Sweden who are constructing their home without a main contractor. They are doing most of the building work themselves. "),Ke(11,"br")(12,"br"),V(13," They share their story on "),H(14,"a",1),Ke(15,"fa-icon",2),V(16," Youtube "),N(),V(17," and "),H(18,"a",3),Ke(19,"fa-icon",2),V(20," Instagram "),N(),Ke(21,"img",4),N()(),H(22,"section")(23,"h2"),V(24," We have an online community. "),N(),H(25,"p"),V(26," Looking for a place to connect with like-minded people? Join our online community on "),H(27,"a",5),Ke(28,"fa-icon",2),V(29," Discord "),N(),V(30," and become part of the conversation! We know that Discord is just another tool, but it helps us stay connected and respond quickly to new ideas. All are welcome! "),N()(),H(31,"section")(32,"h2"),V(33," Open source "),N(),H(34,"p"),V(35," Our plan is to share every aspect of this project with you: the costs, calculations, plans, drawings, and even our thoughts. We want to help you build an optimized and charming home, whether you choose to do it yourself or with a contractor. "),Ke(36,"br"),V(37,"Best of all, we're offering it all for free (except the cost of materials nor contractor, of course). "),N(),Ke(38,"br")(39,"br"),H(40,"div"),V(41," Everything is free and open source. See "),H(42,"a",6),Ke(43,"fa-icon",2),V(44," GitHub "),N()(),V(45," This project has a Creative Commons license. You can read about it "),H(46,"a",7),V(47," here"),N(),V(48,", but has 2 main points: "),H(49,"ul")(50,"li"),V(51," Attribution: We would like to be credited somehow."),N(),H(52,"li"),V(53," NonCommercial: You cannot use this project for commercial purposes."),N()(),H(54,"a",7),Ke(55,"img",8),N(),Ke(56,"br"),V(57," We don't force you to 'share-alike' but we would appreciate it if you do. "),Ke(58,"br")(59,"br"),N(),H(60,"section")(61,"h2"),V(62," Ungoing credits: "),N(),H(63,"div")(64,"ul")(65,"li"),V(66," Build by "),H(67,"a",9),V(68,"GeoDev"),N()(),H(69,"li"),V(70," All the discord users of course "),N()(),V(71," Site and credits in Dutch: "),H(72,"ul")(73,"li")(74,"a",10),V(75,"https://www.joostdevree.nl"),N()(),H(76,"li")(77,"a",11),V(78,"https://berkela.home.xs4all.nl"),N()(),H(79,"li")(80,"a",12),V(81,"Tweakers forum"),N()()(),V(82," Site and credits in Swedish: "),H(83,"ul")(84,"li")(85,"a",13),V(86,"https://www.byggahus.se/"),N()()()()(),H(87,"section")(88,"h2"),V(89," Readings "),N(),H(90,"div")(91,"ul")(92,"li")(93,"a",14),V(94,"Passive House Institute"),N(),Ke(95,"br"),V(96," Passive House Institute "),N(),H(97,"li")(98,"a",15),V(99,"Passief Bouwen"),N(),Ke(100,"br"),V(101," Dutch Passive House Association "),N(),H(102,"li")(103,"a",16),V(104,"IG Passivhus"),N(),Ke(105,"br"),V(106," Swedish Passive House Association "),N(),H(107,"li")(108,"a",17),V(109,"Passipedia"),N()()()()()(),Ke(110,"app-footer")),2&t&&(ee(14),El("href",i.youtube,kc),ee(1),Se("icon",i.faYoutube),ee(3),El("href",i.instagram,kc),ee(1),Se("icon",i.faInstagram),ee(8),El("href",i.discord,kc),ee(1),Se("icon",i.faDiscord),ee(14),El("href",i.github,kc),ee(1),Se("icon",i.faGithub))},dependencies:[UP,Ire],styles:[".dark .po-logo{filter:invert(1)}main[_ngcontent-%COMP%]{max-width:600px;display:block;margin:0 auto 124px;padding:0 32px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:16px;width:100%}li[_ngcontent-%COMP%]{margin:8px 0}a[_ngcontent-%COMP%]:not(.larger-link){text-decoration:underline}.plings-logo[_ngcontent-%COMP%]{margin-top:24px;display:block;border-radius:100%;height:64px;position:absolute}"]}),n})(),kBt=(()=>{class n{constructor(t){this.houseService=t,this.house$=this.houseService.house$,this.Tag=j3,this.Section=_t,this.update=this.houseService.update,this.round=mn,this.Thicknesses=pn,this.joists=[200,300,350,400],this.columns=[{id:"name",name:"Name",def:i=>`${i}`},{id:"diameter",name:"Diameter",def:i=>`${mn(i,3)}`},{id:"lambda",name:"Lambda",def:i=>`${mn(i,3)}`},{id:"r",name:"R",def:i=>`${mn(i,2)}`},{id:"deltaT",name:"Delta T",def:i=>`${mn(i,1)}\xb0C`},{id:"temp",name:"Temp",def:i=>`${mn(i,1)}\xb0C`}],this.columnNames=this.columns.map(i=>i.id),this.currentJoist=()=>this.joists.findIndex(i=>i===this.house$.value.construction.Thicknesses[pn.joists])}ngAfterViewInit(){}updateJoist(t){this.update("construction","thicknessJoist",this.joists[t])}updateOuterSheet(t){this.update("construction","thicknessJoist",this.joists[t])}}return n.\u0275fac=function(t){return new(t||n)(U(Jo))},n.\u0275cmp=Rn({type:n,selectors:[["app-page-3d-house"]],decls:3,vars:1,consts:[[3,"id"]],template:function(t,i){1&t&&(H(0,"section",0)(1,"h1"),V(2," Loading "),N()()),2&t&&Se("id",i.Section.House3D)}}),n})();function P2(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function RT(n){return RT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RT(n)}function Ql(n){P2(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||"object"===RT(n)&&"[object Date]"===e?new Date(n.getTime()):"number"==typeof n||"[object Number]"===e?new Date(n):(("string"==typeof n||"[object String]"===e)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function FT(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function a6e(n){P2(1,arguments);var e=Ql(n);return e.setHours(0,0,0,0),e}function HBt(n,e){P2(2,arguments);var t=a6e(n),i=a6e(e),r=t.getTime()-FT(t),s=i.getTime()-FT(i);return Math.round((r-s)/864e5)}function c6e(n,e){var t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function A4(n){if(null===n||!0===n||!1===n)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}var l6e={};function RV(){return l6e}function D6(n,e){var t,i,r,s,o,a,c,l;P2(1,arguments);var u=RV(),f=A4(null!==(t=null!==(i=null!==(r=null!==(s=e?.weekStartsOn)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==r?r:u.weekStartsOn)&&void 0!==i?i:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==t?t:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=Ql(n),g=p.getDay(),_=(g<f?7:0)+g-f;return p.setDate(p.getDate()-_),p.setHours(0,0,0,0),p}function u6e(n,e){P2(2,arguments);var t=Ql(n),i=A4(e);return isNaN(i)?new Date(NaN):(i&&t.setDate(t.getDate()+i),t)}function VBt(n,e){P2(2,arguments);var t=A4(e),i=7*t;return u6e(n,i)}function h6e(n,e){P2(1,arguments);var t=n||{},i=Ql(t.start),r=Ql(t.end),s=r.getTime();if(!(i.getTime()<=s))throw new RangeError("Invalid interval");var o=D6(i,e),a=D6(r,e);o.setHours(15),a.setHours(15),s=a.getTime();for(var c=[],l=o;l.getTime()<=s;)l.setHours(0),c.push(Ql(l)),(l=VBt(l,1)).setHours(15);return c}function I6(n,e){for(var t=n<0?"-":"",i=Math.abs(n).toString();i.length<e;)i="0"+i;return t+i}function f6e(n,e){var t,i;P2(1,arguments);var r=Ql(n);if(isNaN(r.getTime()))throw new RangeError("Invalid time value");var s=String(null!==(t=e?.format)&&void 0!==t?t:"extended"),o=String(null!==(i=e?.representation)&&void 0!==i?i:"complete");if("extended"!==s&&"basic"!==s)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==o&&"time"!==o&&"complete"!==o)throw new RangeError("representation must be 'date', 'time', or 'complete'");var a="",c="",l="extended"===s?"-":"",u="extended"===s?":":"";if("time"!==o){var f=I6(r.getDate(),2),p=I6(r.getMonth()+1,2),g=I6(r.getFullYear(),4);a="".concat(g).concat(l).concat(p).concat(l).concat(f)}if("date"!==o){var _=r.getTimezoneOffset();if(0!==_){var y=Math.abs(_),w=I6(Math.floor(y/60),2),C=I6(y%60,2),x=_<0?"+":"-";c="".concat(x).concat(w,":").concat(C)}else c="Z";var M=I6(r.getHours(),2),T=I6(r.getMinutes(),2),I=I6(r.getSeconds(),2),F=""===a?"":"T",P=[M,T,I].join(u);a="".concat(a).concat(F).concat(P).concat(c)}return a}function UBt(n,e){var t,i,r,s,o,a,c,l;P2(1,arguments);var u=Ql(n),f=u.getFullYear(),p=RV(),g=A4(null!==(t=null!==(i=null!==(r=null!==(s=e?.firstWeekContainsDate)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==r?r:p.firstWeekContainsDate)&&void 0!==i?i:null===(c=p.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==t?t:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var _=new Date(0);_.setFullYear(f+1,0,g),_.setHours(0,0,0,0);var y=D6(_,e),w=new Date(0);w.setFullYear(f,0,g),w.setHours(0,0,0,0);var C=D6(w,e);return u.getTime()>=y.getTime()?f+1:u.getTime()>=C.getTime()?f:f-1}function GBt(n,e){var t,i,r,s,o,a,c,l;P2(1,arguments);var u=RV(),f=A4(null!==(t=null!==(i=null!==(r=null!==(s=e?.firstWeekContainsDate)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==r?r:u.firstWeekContainsDate)&&void 0!==i?i:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==t?t:1),p=UBt(n,e),g=new Date(0);g.setFullYear(p,0,f),g.setHours(0,0,0,0);var _=D6(g,e);return _}function d6e(n,e){P2(1,arguments);var t=Ql(n),i=D6(t,e).getTime()-GBt(t,e).getTime();return Math.round(i/6048e5)+1}function WBt(n){return P2(1,arguments),Ql(n).getFullYear()}function kT(n){P2(1,arguments);var e=Ql(n),t=e.getDay();return t}function jBt(n,e){P2(2,arguments);var t=Ql(n),i=A4(e);if(isNaN(i))return new Date(NaN);if(!i)return t;var r=t.getDate(),s=new Date(t.getTime());s.setMonth(t.getMonth()+i+1,0);var o=s.getDate();return r>=o?s:(t.setFullYear(s.getFullYear(),s.getMonth(),r),t)}function PT(n){return PT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PT(n)}function FV(n,e){if(P2(2,arguments),!e||"object"!==PT(e))return new Date(NaN);var t=e.years?A4(e.years):0,i=e.months?A4(e.months):0,r=e.weeks?A4(e.weeks):0,s=e.days?A4(e.days):0,o=e.hours?A4(e.hours):0,a=e.minutes?A4(e.minutes):0,c=e.seconds?A4(e.seconds):0,l=Ql(n),u=i||t?jBt(l,i+12*t):l,f=s||r?u6e(u,s+7*r):u,p=a+60*o,g=c+60*p,_=1e3*g,y=new Date(f.getTime()+_);return y}var up=(()=>(function(n){n.name="name",n.days="days",n.what="what",n.more="more",n.deadline="deadline",n.firstDate="firstDate",n.lastDate="lastDate"}(up||(up={})),up))();class Bm{constructor(e){this.sectionFold=!1,this.firstDate=new Date,this.lastDate=new Date,Object.assign(this,e)}}class Ai{constructor(e){this.type="single",this.firstDate=new Date,this.lastDate=new Date,Object.assign(this,e),void 0!==this.deadline&&(this.lastDate=this.deadline)}}class gy extends Ai{constructor(e){super(e),this.steps=[],this.type="group",this.collapsed=!1,this.firstDate=new Date,this.lastDate=new Date,Object.assign(this,e),this.uuid=e.uuid,this.steps.forEach(t=>{t.uuid=e.uuid}),this.lastDate=new Date(Math.max(...this.steps.flatMap(t=>t.lastDate.getTime()))),this.firstDate=new Date(Math.max(...this.steps.flatMap(t=>t.firstDate.getTime()))),this.days=hM(this.steps.flatMap(t=>t.days))}get folded(){return`<span class="material-icons">expand_${this.collapsed?"less":"more"}</span>`}toggleFold(){this.collapsed=!this.collapsed}}class $Bt extends gy{constructor(e){super(e),this.steps=[],this.type="total",Object.assign(this,e)}get folded(){return'<span class="material-icons">remove</span>'}}const qBt=["tableHeader"],KBt=["table"],XBt=["tableRows"],YBt=[".table-row"];function ZBt(n,e){if(1&n&&(H(0,"th",8)(1,"span"),V(2),N()()),2&n){const t=Xt().$implicit;ee(2),Lh(t.name)}}function JBt(n,e){if(1&n&&Ke(0,"div",10),2&n){const t=Xt().$implicit,i=Xt().$implicit;Se("innerHTML",i.def(t[i.id],t[i.id+"-extra"]),V3)}}function eRt(n,e){if(1&n){const t=Qa();H(0,"td",9),dn("mouseenter",function(r){return gi(t),h(Xt(2).mouseenter(r))})("mouseleave",function(r){return gi(t),h(Xt(2).mouseleave(r))}),Ke(1,"span",10),Yt(2,JBt,1,1,"div",11),Ke(3,"span",10),N()}if(2&n){const t=e.$implicit,i=Xt().$implicit;ee(1),Se("innerHTML",i.prefix,V3),ee(1),Se("ngIf",t[i.id]),ee(1),Se("innerHTML",i.postfix,V3)}}function tRt(n,e){1&n&&(Zs(0,5),Yt(1,ZBt,3,1,"th",6),Yt(2,eRt,4,3,"td",7),Js()),2&n&&Se("matColumnDef",e.$implicit.id)}function nRt(n,e){1&n&&Ke(0,"tr",12,13)}function iRt(n,e){if(1&n){const t=Qa();Zs(0),H(1,"tr",14,15),dn("click",function(){const s=gi(t).$implicit;return h(Xt().rowClick(s))}),N(),Js()}if(2&n){const t=e.$implicit;ee(1),Tw("table-row group-",t.uuid," row-",t.type,""),Br("row-folded",t.uuid)}}let rRt=(()=>{class n{constructor(t){this.overlay=t,this.Prop=up,this.groupRow={},this.parts=[],this.highlightedColumn=0}set data(t){this.planning=t;const i=t.steps.filter(r=>r);this.dataSource=[...i.flatMap(r=>r instanceof gy?[r,...r.steps]:r),new $Bt({name:`Total ${t.alias.toLocaleLowerCase()}`,steps:i})]}ngOnInit(){this.columnNames=this.columns.map(t=>t.id)}ngAfterViewInit(){}observer(){console.log(this);const i=new window.IntersectionObserver(r=>{console.log(1,r),r.forEach(s=>{s.isIntersecting&&i.disconnect()})},{threshold:.2});console.log(this.tableHeader.nativeElement),i.observe(this.tableHeader.nativeElement)}mouseenter(t){}mouseleave(t){}readableNumbers(t,i){return void 0!==i?`\u20ac${mn(t,0).toLocaleString()}`:t>1e3?`\u20ac${mn(t).toLocaleString()}`:`\u20ac${t}`}rowClick(t){console.log(t),t instanceof gy&&(t.toggleFold(),this.tableContainers.forEach(i=>{const r=i.nativeElement.classList;console.log(r,r.contains(`group-${t.uuid}`),`group-${t.uuid}`),r.contains(`group-${t.uuid}`)&&r.toggle("row-folded")}))}double(){this.overlayRef=this.overlay.create({positionStrategy:this.positionStrategy(),scrollStrategy:this.overlay.scrollStrategies.reposition()});const t=new c$(this.tableHeader);this.overlayRef.addPanelClass("example-overlay"),this.overlayRef.attach(t)}positionStrategy(){return this.overlay.position().flexibleConnectedTo(this.tableContainers.first).withPositions([{originX:"start",originY:"top",overlayX:"start",overlayY:"top"}]).withFlexibleDimensions(!1).withPush(!1)}}return n.\u0275fac=function(t){return new(t||n)(U(f3))},n.\u0275cmp=Rn({type:n,selectors:[["app-table-planning"]],viewQuery:function(t,i){if(1&t&&(wo(qBt,5,fn),wo(KBt,5,fn),wo(XBt,5,fn),wo(YBt,5,fn)),2&t){let r;Qi(r=Wi())&&(i.tableHeader=r.first),Qi(r=Wi())&&(i.table=r.first),Qi(r=Wi())&&(i.tableContainers=r),Qi(r=Wi())&&(i.tableFirstCol=r)}},inputs:{columns:"columns",scrollContainer:"scrollContainer",data:"data"},decls:5,vars:4,consts:[["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z0",2,"width","fit-content !important",3,"dataSource"],["table",""],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"mouseenter","mouseleave",4,"matCellDef"],["mat-header-cell",""],["mat-cell","",3,"mouseenter","mouseleave"],[3,"innerHTML"],[3,"innerHTML",4,"ngIf"],["mat-header-row",""],["tableHeader",""],["mat-row","",3,"click"],["tableRows",""]],template:function(t,i){1&t&&(H(0,"table",0,1),Yt(2,tRt,3,1,"ng-container",2),Yt(3,nRt,2,0,"tr",3),Yt(4,iRt,3,6,"ng-container",4),N()),2&t&&(Se("dataSource",i.dataSource),ee(2),Se("ngForOf",i.columns),ee(1),Se("matHeaderRowDef",i.columnNames),ee(1),Se("matRowDefColumns",i.columnNames))},dependencies:[W3,u3,qb,V9,Kb,U9,N9,Xb,G9,Q9,Yb,Zb],styles:["tr[_ngcontent-%COMP%]{transition:.2s;background-color:var(--color-0)!important}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr.row-total[_ngcontent-%COMP%]{background-color:var(--color-5)!important}tr.row-group[_ngcontent-%COMP%]{background-color:var(--color-10)!important;cursor:pointer}tr[_ngcontent-%COMP%]   td.highlighted[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]:hover{background-color:var(--color-20)!important}tr.row-folded[_ngcontent-%COMP%]:not(.row-group){height:0}tr.row-folded[_ngcontent-%COMP%]:not(.row-group)   td[_ngcontent-%COMP%]{border-bottom-width:0px;padding:0;line-height:0px;overflow:hidden}[_nghost-%COMP%], table[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block}.mat-column-what[_ngcontent-%COMP%], .mat-column-name[_ngcontent-%COMP%]{min-width:200px}th[class*=mat-column-week-][_ngcontent-%COMP%], td[class*=mat-column-week-][_ngcontent-%COMP%]{min-width:20px;width:20px}th[class*=mat-column-week-][_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:rotate(198deg);text-orientation:sideways;writing-mode:vertical-lr}td[class*=mat-column-week-][_ngcontent-%COMP%]{border-left:1px solid var(--color-5)}  .week-block{position:relative}  .week-block .week-block-fill{position:absolute;background:var(--accent-50);right:0;height:100%}  .week-block .week-block-fill.week-block-last{left:0;right:initial}  .week-block span{position:relative;display:block;width:100%;text-align:center}"]}),n})();function sRt(n,e){if(1&n){const t=Qa();Zs(0),H(1,"section",4)(2,"h2",5),dn("click",function(){const s=gi(t).$implicit;return h(s.sectionFold=!s.sectionFold)}),H(3,"mat-icon"),V(4),N(),V(5),H(6,"span",6),V(7),ba(8,"date"),ba(9,"date"),N()(),H(10,"div",7),Ke(11,"app-table-planning",8),N()(),Js()}if(2&n){const t=e.$implicit,i=Xt(),r=Ir(16);ee(1),Se("id",t.section),ee(3),Kn("",t.sectionFold?"expand_more":"expand_less"," "),ee(1),Kn(" ",t.alias," "),ee(2),ud("( ",HA(8,10,t.firstDate,"dd-LL-YYYY")," - ",HA(9,13,t.lastDate,"dd-LL-YYYY"),")"),ee(3),Br("folded",t.sectionFold),ee(1),Se("columns",i.columns)("data",t)("scrollContainer",r)}}const oRt=[{path:"map",component:vBt},{path:"costs",component:RBt},{path:"about",component:FBt},{path:"planning",component:(()=>{class n{constructor(t,i,r,s){this.datePipe=t,this.houseService=i,this.appService=r,this.sanitizer=s,this.columns=[{id:"folded",name:"",def:o=>`${o}`},{id:up.name,name:"Name",def:o=>`${o}`},{id:up.what,name:"What",def:o=>`${o}`},{id:up.days,name:"Days",def:o=>` ${o} `}],this.starDate=new Date(2024,2,1),console.log()}ngOnInit(){this.tables=this.calc([this.getPreps(),this.getFoundation(),this.getFraming(),this.getFinishing(),this.getInstallations(),this.getOutside()]),this.minFirstDate=new Date(Math.min(...this.tables.flatMap(t=>t.steps).map(t=>t.firstDate.getTime()))),this.maxLastDate=new Date(Math.max(...this.tables.flatMap(t=>t.steps).map(t=>t.lastDate.getTime()))),this.totalDays=function zBt(n,e){P2(2,arguments);var t=Ql(n),i=Ql(e),r=c6e(t,i),s=Math.abs(HBt(t,i));t.setDate(t.getDate()-r*s);var o=Number(c6e(t,i)===-r),a=r*(s-o);return 0===a?0:a}(this.maxLastDate,this.minFirstDate),this.totalWeeks=function NBt(n,e,t){P2(2,arguments);var i=D6(n,t),r=D6(e,t),s=i.getTime()-FT(i),o=r.getTime()-FT(r);return Math.round((s-o)/6048e5)}(this.maxLastDate,this.minFirstDate),this.weeks=h6e({start:this.minFirstDate,end:this.maxLastDate}),this.columns.push(...this.weeks.map(t=>({id:`week-${f6e(t,{representation:"date"})}`,name:` ${d6e(t)} ${[1,52,53].includes(d6e(t))?"'"+WBt(t).toString().substring(2):""} `,def:(i,r)=>this.sanitizer.bypassSecurityTrustHtml(`<div class="week-block">\n              <div class="week-block-fill" style="\n                width:${Math.round(Math.abs(i/7*100))}%;\n                left: ${Math.round(Math.abs(r/7*100))}%;\n              "></div>\n              <span>${Math.abs(i)}</span>\n            </div>`)}))),this.tables.forEach(t=>{t.steps.forEach(i=>{try{h6e({start:i.firstDate,end:i.lastDate}).forEach((r,s,o)=>{const a=o.length,c=f6e(r,{representation:"date"});let l=0;1===a?(l=i.days,i[`week-${c}-extra`]=kT(i.firstDate)):0===s?(l=7-kT(i.firstDate),i[`week-${c}-extra`]=kT(i.firstDate)):s===a-1?(l=kT(i.lastDate)+1,i[`week-${c}-extra`]=0):(l=7,i[`week-${c}-extra`]=0),i[`week-${c}`]=l})}catch{console.error(i)}})}),console.log(this.tables),console.log(this.tables[1].steps[0].uuid,this.tables[1].steps[0].steps[0].uuid)}calc(t){return t.forEach((r,s)=>{r.firstDate=0===s?this.starDate:FV(t[s-1].lastDate,{days:1}),r.steps.forEach((o,a)=>{const c=r.steps[a-1];o.firstDate=c?FV(c.lastDate,{days:1}):r.firstDate,o.lastDate=FV(o.firstDate,{days:Math.max(1,o.days-1)})}),r.lastDate=r.steps[r.steps.length-1].lastDate}),t}getPreps(){return new Bm({section:_t.planningPreps,alias:"Preparations",steps:[new Ai({name:"Paper work",days:3,more:"BigTODO"}),new Ai({name:"Redesign",days:2,deadline:new Date("2024","04","21")})]})}getFoundation(){const t=[new Ai({name:"Dirt work",what:"Ground preps",days:2}),new Ai({name:"Dirt work",what:"Flatten surface / compacting",days:9}),new Ai({name:"Dirt work",what:"Snapping lines",days:11}),new Ai({name:"Dirt work",what:"Digging hole",days:2})],i=[new Ai({name:"Footings",what:"Snapping lines",days:1}),new Ai({name:"Footings",what:"IFC blocks",days:2}),new Ai({name:"Footings",what:"Drainage",days:2}),new Ai({name:"Footings",what:"Pouring Concrete",days:7})];return new Bm({section:_t.planningFoundation,alias:"Foundation",steps:[new gy({uuid:aP(),name:`${t[0].name}`,steps:t}),new gy({uuid:`${aP()}`,name:`${i[0].name}`,steps:i}),new Ai({name:"Walls",what:"Snapping lines",days:2}),new Ai({name:"Walls",what:"IFC blocks",days:2}),new Ai({name:"Walls",what:"Pouring Concrete",days:7}),new Ai({name:"First Floor",what:"Prep wall",days:2}),new Ai({name:"First Floor",what:"Install prefab",days:6}),new Ai({name:"Deadline",what:"Foundation finished",days:8})]})}getFraming(){return new Bm({section:_t.planningFraming,alias:"Framing",steps:[new Ai({name:"Ground Floor\tMeasure for Square",days:1}),new Ai({name:"Ground Floor\tSnapping the lines",days:1}),new Ai({name:"Walls\tFrame the outside",days:10}),new Ai({name:"Walls\tFrame walls",days:5}),new Ai({name:"Stairs\tBuild temp stairs",days:2}),new Ai({name:"Top Floor\tMounting Rim LVL",days:2}),new Ai({name:"Top Floor\tRolling Joists",days:4}),new Ai({name:"Top Floor\tSheeting",days:3}),new Ai({name:"Roof\tRolling rafters",days:4}),new Ai({name:"Roof\tChimenys and cutouts",days:4}),new Ai({name:"Roof\tLower Sheeting",days:2}),new Ai({name:"Roof\tinsulation",days:2}),new Ai({name:"Roof\tOuter sheet",days:2}),new Ai({name:"Roof\tTiles",days:5}),new Ai({name:"Windows\tNormal openings",days:5}),new Ai({name:"Windows\tDoors",days:3}),new Ai({name:"Windows\tGlass facade",days:3}),new Ai({name:"Windows\tTaping",days:1}),new Ai({name:"Pirsing pipes (installationroom + chimneys)",days:2}),new Ai({name:"DoorBlowertest",days:1}),new Ai({name:"Deadline\tCorrections",days:3})]})}getFinishing(){return new Bm({section:_t.planningFinishing,alias:"Finishing",steps:[new Ai({name:"Kitchen",days:2}),new Ai({name:"Kitchen Countertop",days:5}),new Ai({name:"Floors",days:4}),new Ai({name:"Bathroom tiling",days:4})]})}getInstallations(){return new Bm({section:_t.planningInstallations,alias:"Installations",steps:[new Ai({name:"Water\tPlumming / Sewer",days:3}),new Ai({name:"Water\tWarm Cold water",days:3}),new Ai({name:"Water\tRainwater  + installation",days:3}),new Ai({name:"Water\tInstallation + Tank",days:3}),new Ai({name:"Floor heating\tTubeing",days:3}),new Ai({name:"Floor heating\tConcrete pressure layer",days:3}),new Ai({name:"Floor heating\tMechanic installation",days:3}),new Ai({name:"Electrics\tBuilding Power Connection",days:5}),new Ai({name:"Electrics\tTubes + Wiring",days:1}),new Ai({name:"Electrics\tInstallation",days:2}),new Ai({name:"Electrics\tFixes/ lamps",days:4}),new Ai({name:"Electrics\t3Phases",days:1}),new Ai({name:"Electrics\tEternet Cables",days:2}),new Ai({name:"Electrics\tAlarm",days:2}),new Ai({name:"HVAC\tPipes",days:3}),new Ai({name:"HVAC\tMechanic installation",days:2})]})}getOutside(){return new Bm({section:_t.planningOutside,alias:"Outerside",steps:[new Ai({name:"Walls\tPrep El/Cables etc",days:2}),new Ai({name:"Walls\tCorners",days:2}),new Ai({name:"Walls\tTrimming windows/ Doors",days:5}),new Ai({name:"Walls\tWindow blinds",days:2}),new Ai({name:"Walls\tFarstu preps",days:2}),new Ai({name:"Walls\tInsulation",days:4}),new Ai({name:"Walls\tOuter planks",days:8})]})}}return n.\u0275fac=function(t){return new(t||n)(U(tC),U(Jo),U(Fo),U(w8))},n.\u0275cmp=Rn({type:n,selectors:[["app-page-planning"]],features:[Ki([tC])],decls:18,vars:11,consts:[["src","/assets/svg/logo.svg"],["cdkScrollable","",2,"width","100%","overflow-x","scroll"],["scrollContainer",""],[4,"ngFor","ngForOf"],[3,"id"],[3,"click"],[2,"font-size","1rem"],[2,"width","fit-content"],[3,"columns","data","scrollContainer"]],template:function(t,i){1&t&&(H(0,"h1"),V(1,"Planning "),Ke(2,"img",0),N(),H(3,"p"),V(4," todo "),Ke(5,"br"),V(6),ba(7,"date"),Ke(8,"br"),V(9),ba(10,"date"),Ke(11,"br"),V(12),N(),H(13,"h3"),V(14," This page is still under construction.\n"),N(),H(15,"div",1,2),Yt(17,sRt,12,16,"ng-container",3),N()),2&t&&(ee(6),Kn(" ",HA(7,5,i.minFirstDate,"dd-LL-YYYY")," "),ee(3),Kn(" ",HA(10,8,i.maxLastDate,"dd-LL-YYYY")," "),ee(3),ud(" ",i.totalWeeks," weeks || ",i.totalDays," days\n"),ee(5),Se("ngForOf",i.tables))},dependencies:[W3,U9e,k8,rRt,tC],styles:["section[_ngcontent-%COMP%]{margin:0;padding:8px 4px 8px 16px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{cursor:pointer;transition:.2s;display:flex;align-items:center;padding:6px;gap:16px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{background:var(--color-10)}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{transition:.4s ease-in;overflow:hidden}section[_ngcontent-%COMP%] > div.folded[_ngcontent-%COMP%]{transition:.4s ease-out;max-height:0px}"]}),n})()},{path:"",component:uwt,children:[{path:"house",component:Cwt},{path:"stairs",component:Lwt},{path:"facade",component:zwt},{path:"installations",component:Owt},{path:"construction",component:Hwt},{path:"house3d",component:kBt},{path:"wired",component:_Bt},{path:"**",redirectTo:"house",pathMatch:"full"}]},{path:"**",redirectTo:"/house",pathMatch:"full"}];let aRt=(()=>{class n{constructor(t){t.addSvgIconSet("material-icons-outlined")}}return n.\u0275fac=function(t){return new(t||n)(Ye(b9))},n.\u0275mod=oi({type:n,bootstrap:[Ybe]}),n.\u0275inj=wn({providers:[Iu],imports:[Kj,Dl,XMe,vDe,eBe,dbe,vd,RJe,tBe.forRoot("passiv"),uBe.forRoot("G-W580DX5P7G"),Sye.forRoot(oRt,{anchorScrolling:"enabled",scrollPositionRestoration:"disabled"})]}),n})();(function Fge(){if(XW)throw new Error("Cannot enable prod mode after platform setup.");KW=!1})(),i9e().bootstrapModule(aRt).catch(n=>console.error(n))},1503:(Nt,nt,Me)=>{"use strict";var Ee=Me(3269);function Ne(ze){var Re=[1/0,1/0,-1/0,-1/0];return Ee.coordEach(ze,function(Ie){Re[0]>Ie[0]&&(Re[0]=Ie[0]),Re[1]>Ie[1]&&(Re[1]=Ie[1]),Re[2]<Ie[0]&&(Re[2]=Ie[0]),Re[3]<Ie[1]&&(Re[3]=Ie[1])}),Re}Ne.default=Ne,nt.Z=Ne},2972:function(Nt){Nt.exports=function(){"use strict";function Me(Ne,ze,Re,Ie,We){for(;Ie>Re;){if(Ie-Re>600){var ct=Ie-Re+1,ft=ze-Re+1,Vt=Math.log(ct),Ct=.5*Math.exp(2*Vt/3),st=.5*Math.sqrt(Vt*Ct*(ct-Ct)/ct)*(ft-ct/2<0?-1:1);Me(Ne,ze,Math.max(Re,Math.floor(ze-ft*Ct/ct+st)),Math.min(Ie,Math.floor(ze+(ct-ft)*Ct/ct+st)),We)}var Ve=Ne[ze],Xe=Re,j=Ie;for(ue(Ne,Re,ze),We(Ne[Ie],Ve)>0&&ue(Ne,Re,Ie);Xe<j;){for(ue(Ne,Xe,j),Xe++,j--;We(Ne[Xe],Ve)<0;)Xe++;for(;We(Ne[j],Ve)>0;)j--}0===We(Ne[Re],Ve)?ue(Ne,Re,j):ue(Ne,++j,Ie),j<=ze&&(Re=j+1),ze<=j&&(Ie=j-1)}}function ue(Ne,ze,Re){var Ie=Ne[ze];Ne[ze]=Ne[Re],Ne[Re]=Ie}function Ee(Ne,ze){return Ne<ze?-1:Ne>ze?1:0}return function nt(Ne,ze,Re,Ie,We){Me(Ne,ze,Re||0,Ie||Ne.length-1,We||Ee)}}()},915:(Nt,nt,Me)=>{"use strict";Nt.exports=Ee,Nt.exports.default=Ee;var ue=Me(2972);function Ee(j,X){if(!(this instanceof Ee))return new Ee(j,X);this._maxEntries=Math.max(4,j||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),X&&this._initFormat(X),this.clear()}function Ne(j,X,Y){if(!Y)return X.indexOf(j);for(var we=0;we<X.length;we++)if(Y(j,X[we]))return we;return-1}function ze(j,X){Re(j,0,j.children.length,X,j)}function Re(j,X,Y,we,Z){Z||(Z=Ve(null)),Z.minX=1/0,Z.minY=1/0,Z.maxX=-1/0,Z.maxY=-1/0;for(var ce,se=X;se<Y;se++)ce=j.children[se],Ie(Z,j.leaf?we(ce):ce);return Z}function Ie(j,X){return j.minX=Math.min(j.minX,X.minX),j.minY=Math.min(j.minY,X.minY),j.maxX=Math.max(j.maxX,X.maxX),j.maxY=Math.max(j.maxY,X.maxY),j}function We(j,X){return j.minX-X.minX}function ct(j,X){return j.minY-X.minY}function ft(j){return(j.maxX-j.minX)*(j.maxY-j.minY)}function Vt(j){return j.maxX-j.minX+(j.maxY-j.minY)}function Ct(j,X){return(Math.max(X.maxX,j.maxX)-Math.min(X.minX,j.minX))*(Math.max(X.maxY,j.maxY)-Math.min(X.minY,j.minY))}function st(j,X){var Y=Math.max(j.minX,X.minX),we=Math.max(j.minY,X.minY),Z=Math.min(j.maxX,X.maxX),se=Math.min(j.maxY,X.maxY);return Math.max(0,Z-Y)*Math.max(0,se-we)}function yt(j,X){return j.minX<=X.minX&&j.minY<=X.minY&&X.maxX<=j.maxX&&X.maxY<=j.maxY}function qt(j,X){return X.minX<=j.maxX&&X.minY<=j.maxY&&X.maxX>=j.minX&&X.maxY>=j.minY}function Ve(j){return{children:j,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Xe(j,X,Y,we,Z){for(var ce,se=[X,Y];se.length;)!((Y=se.pop())-(X=se.pop())<=we)&&(ce=X+Math.ceil((Y-X)/we/2)*we,ue(j,ce,X,Y,Z),se.push(X,ce,ce,Y))}Ee.prototype={all:function(){return this._all(this.data,[])},search:function(j){var X=this.data,Y=[],we=this.toBBox;if(!qt(j,X))return Y;for(var se,ce,$,je,Z=[];X;){for(se=0,ce=X.children.length;se<ce;se++)$=X.children[se],qt(j,je=X.leaf?we($):$)&&(X.leaf?Y.push($):yt(j,je)?this._all($,Y):Z.push($));X=Z.pop()}return Y},collides:function(j){var X=this.data,Y=this.toBBox;if(!qt(j,X))return!1;for(var Z,se,ce,$,we=[];X;){for(Z=0,se=X.children.length;Z<se;Z++)if(ce=X.children[Z],qt(j,$=X.leaf?Y(ce):ce)){if(X.leaf||yt(j,$))return!0;we.push(ce)}X=we.pop()}return!1},load:function(j){if(!j||!j.length)return this;if(j.length<this._minEntries){for(var X=0,Y=j.length;X<Y;X++)this.insert(j[X]);return this}var we=this._build(j.slice(),0,j.length-1,0);if(this.data.children.length)if(this.data.height===we.height)this._splitRoot(this.data,we);else{if(this.data.height<we.height){var Z=this.data;this.data=we,we=Z}this._insert(we,this.data.height-we.height-1,!0)}else this.data=we;return this},insert:function(j){return j&&this._insert(j,this.data.height-1),this},clear:function(){return this.data=Ve([]),this},remove:function(j,X){if(!j)return this;for(var ce,$,je,Be,Y=this.data,we=this.toBBox(j),Z=[],se=[];Y||Z.length;){if(Y||(Y=Z.pop(),$=Z[Z.length-1],ce=se.pop(),Be=!0),Y.leaf&&-1!==(je=Ne(j,Y.children,X)))return Y.children.splice(je,1),Z.push(Y),this._condense(Z),this;Be||Y.leaf||!yt(Y,we)?$?(ce++,Y=$.children[ce],Be=!1):Y=null:(Z.push(Y),se.push(ce),ce=0,$=Y,Y=Y.children[0])}return this},toBBox:function(j){return j},compareMinX:We,compareMinY:ct,toJSON:function(){return this.data},fromJSON:function(j){return this.data=j,this},_all:function(j,X){for(var Y=[];j;)j.leaf?X.push.apply(X,j.children):Y.push.apply(Y,j.children),j=Y.pop();return X},_build:function(j,X,Y,we){var ce,Z=Y-X+1,se=this._maxEntries;if(Z<=se)return ze(ce=Ve(j.slice(X,Y+1)),this.toBBox),ce;we||(we=Math.ceil(Math.log(Z)/Math.log(se)),se=Math.ceil(Z/Math.pow(se,we-1))),(ce=Ve([])).leaf=!1,ce.height=we;var Be,He,oe,kt,$=Math.ceil(Z/se),je=$*Math.ceil(Math.sqrt(se));for(Xe(j,X,Y,je,this.compareMinX),Be=X;Be<=Y;Be+=je)for(Xe(j,Be,oe=Math.min(Be+je-1,Y),$,this.compareMinY),He=Be;He<=oe;He+=$)kt=Math.min(He+$-1,oe),ce.children.push(this._build(j,He,kt,we-1));return ze(ce,this.toBBox),ce},_chooseSubtree:function(j,X,Y,we){for(var Z,se,ce,$,je,Be,He,oe;we.push(X),!X.leaf&&we.length-1!==Y;){for(He=oe=1/0,Z=0,se=X.children.length;Z<se;Z++)je=ft(ce=X.children[Z]),(Be=Ct(j,ce)-je)<oe?(oe=Be,He=je<He?je:He,$=ce):Be===oe&&je<He&&(He=je,$=ce);X=$||X.children[0]}return X},_insert:function(j,X,Y){var Z=Y?j:(0,this.toBBox)(j),se=[],ce=this._chooseSubtree(Z,this.data,X,se);for(ce.children.push(j),Ie(ce,Z);X>=0&&se[X].children.length>this._maxEntries;)this._split(se,X),X--;this._adjustParentBBoxes(Z,se,X)},_split:function(j,X){var Y=j[X],we=Y.children.length,Z=this._minEntries;this._chooseSplitAxis(Y,Z,we);var se=this._chooseSplitIndex(Y,Z,we),ce=Ve(Y.children.splice(se,Y.children.length-se));ce.height=Y.height,ce.leaf=Y.leaf,ze(Y,this.toBBox),ze(ce,this.toBBox),X?j[X-1].children.push(ce):this._splitRoot(Y,ce)},_splitRoot:function(j,X){this.data=Ve([j,X]),this.data.height=j.height+1,this.data.leaf=!1,ze(this.data,this.toBBox)},_chooseSplitIndex:function(j,X,Y){var we,Z,se,ce,$,je,Be,He;for(je=Be=1/0,we=X;we<=Y-X;we++)ce=st(Z=Re(j,0,we,this.toBBox),se=Re(j,we,Y,this.toBBox)),$=ft(Z)+ft(se),ce<je?(je=ce,He=we,Be=$<Be?$:Be):ce===je&&$<Be&&(Be=$,He=we);return He},_chooseSplitAxis:function(j,X,Y){var we=j.leaf?this.compareMinX:We,Z=j.leaf?this.compareMinY:ct;this._allDistMargin(j,X,Y,we)<this._allDistMargin(j,X,Y,Z)&&j.children.sort(we)},_allDistMargin:function(j,X,Y,we){j.children.sort(we);var je,Be,Z=this.toBBox,se=Re(j,0,X,Z),ce=Re(j,Y-X,Y,Z),$=Vt(se)+Vt(ce);for(je=X;je<Y-X;je++)Be=j.children[je],Ie(se,j.leaf?Z(Be):Be),$+=Vt(se);for(je=Y-X-1;je>=X;je--)Be=j.children[je],Ie(ce,j.leaf?Z(Be):Be),$+=Vt(ce);return $},_adjustParentBBoxes:function(j,X,Y){for(var we=Y;we>=0;we--)Ie(X[we],j)},_condense:function(j){for(var Y,X=j.length-1;X>=0;X--)0===j[X].children.length?X>0?(Y=j[X-1].children).splice(Y.indexOf(j[X]),1):this.clear():ze(j[X],this.toBBox)},_initFormat:function(j){var X=["return a"," - b",";"];this.compareMinX=new Function("a","b",X.join(j[0])),this.compareMinY=new Function("a","b",X.join(j[1])),this.toBBox=new Function("a","return {minX: a"+j[0]+", minY: a"+j[1]+", maxX: a"+j[2]+", maxY: a"+j[3]+"};")}}},8275:(Nt,nt)=>{"use strict";function Me(Be,He,oe){void 0===oe&&(oe={});var kt={type:"Feature"};return(0===oe.id||oe.id)&&(kt.id=oe.id),oe.bbox&&(kt.bbox=oe.bbox),kt.properties=He||{},kt.geometry=Be,kt}function Ee(Be,He,oe){if(void 0===oe&&(oe={}),!Be)throw new Error("coordinates is required");if(!Array.isArray(Be))throw new Error("coordinates must be an Array");if(Be.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!se(Be[0])||!se(Be[1]))throw new Error("coordinates must contain numbers");return Me({type:"Point",coordinates:Be},He,oe)}function ze(Be,He,oe){void 0===oe&&(oe={});for(var kt=0,At=Be;kt<At.length;kt++){var be=At[kt];if(be.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var qe=0;qe<be[be.length-1].length;qe++)if(be[be.length-1][qe]!==be[0][qe])throw new Error("First and last Position are not equivalent.")}return Me({type:"Polygon",coordinates:Be},He,oe)}function Ie(Be,He,oe){if(void 0===oe&&(oe={}),Be.length<2)throw new Error("coordinates must be an array of two or more positions");return Me({type:"LineString",coordinates:Be},He,oe)}function ct(Be,He){void 0===He&&(He={});var oe={type:"FeatureCollection"};return He.id&&(oe.id=He.id),He.bbox&&(oe.bbox=He.bbox),oe.features=Be,oe}function ft(Be,He,oe){return void 0===oe&&(oe={}),Me({type:"MultiLineString",coordinates:Be},He,oe)}function Vt(Be,He,oe){return void 0===oe&&(oe={}),Me({type:"MultiPoint",coordinates:Be},He,oe)}function Ct(Be,He,oe){return void 0===oe&&(oe={}),Me({type:"MultiPolygon",coordinates:Be},He,oe)}function qt(Be,He){void 0===He&&(He="kilometers");var oe=nt.factors[He];if(!oe)throw new Error(He+" units is invalid");return Be*oe}function Ve(Be,He){void 0===He&&(He="kilometers");var oe=nt.factors[He];if(!oe)throw new Error(He+" units is invalid");return Be/oe}function X(Be){return Be%(2*Math.PI)*180/Math.PI}function se(Be){return!isNaN(Be)&&null!==Be&&!Array.isArray(Be)}Object.defineProperty(nt,"__esModule",{value:!0}),nt.earthRadius=6371008.8,nt.factors={centimeters:100*nt.earthRadius,centimetres:100*nt.earthRadius,degrees:nt.earthRadius/111325,feet:3.28084*nt.earthRadius,inches:39.37*nt.earthRadius,kilometers:nt.earthRadius/1e3,kilometres:nt.earthRadius/1e3,meters:nt.earthRadius,metres:nt.earthRadius,miles:nt.earthRadius/1609.344,millimeters:1e3*nt.earthRadius,millimetres:1e3*nt.earthRadius,nauticalmiles:nt.earthRadius/1852,radians:1,yards:1.0936*nt.earthRadius},nt.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/nt.earthRadius,yards:1.0936133},nt.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},nt.feature=Me,nt.geometry=function ue(Be,He,oe){switch(void 0===oe&&(oe={}),Be){case"Point":return Ee(He).geometry;case"LineString":return Ie(He).geometry;case"Polygon":return ze(He).geometry;case"MultiPoint":return Vt(He).geometry;case"MultiLineString":return ft(He).geometry;case"MultiPolygon":return Ct(He).geometry;default:throw new Error(Be+" is invalid")}},nt.point=Ee,nt.points=function Ne(Be,He,oe){return void 0===oe&&(oe={}),ct(Be.map(function(kt){return Ee(kt,He)}),oe)},nt.polygon=ze,nt.polygons=function Re(Be,He,oe){return void 0===oe&&(oe={}),ct(Be.map(function(kt){return ze(kt,He)}),oe)},nt.lineString=Ie,nt.lineStrings=function We(Be,He,oe){return void 0===oe&&(oe={}),ct(Be.map(function(kt){return Ie(kt,He)}),oe)},nt.featureCollection=ct,nt.multiLineString=ft,nt.multiPoint=Vt,nt.multiPolygon=Ct,nt.geometryCollection=function st(Be,He,oe){return void 0===oe&&(oe={}),Me({type:"GeometryCollection",geometries:Be},He,oe)},nt.round=function yt(Be,He){if(void 0===He&&(He=0),He&&!(He>=0))throw new Error("precision must be a positive number");var oe=Math.pow(10,He||0);return Math.round(Be*oe)/oe},nt.radiansToLength=qt,nt.lengthToRadians=Ve,nt.lengthToDegrees=function Xe(Be,He){return X(Ve(Be,He))},nt.bearingToAzimuth=function j(Be){var He=Be%360;return He<0&&(He+=360),He},nt.radiansToDegrees=X,nt.degreesToRadians=function Y(Be){return Be%360*Math.PI/180},nt.convertLength=function we(Be,He,oe){if(void 0===He&&(He="kilometers"),void 0===oe&&(oe="kilometers"),!(Be>=0))throw new Error("length must be a positive number");return qt(Ve(Be,He),oe)},nt.convertArea=function Z(Be,He,oe){if(void 0===He&&(He="meters"),void 0===oe&&(oe="kilometers"),!(Be>=0))throw new Error("area must be a positive number");var kt=nt.areaFactors[He];if(!kt)throw new Error("invalid original units");var At=nt.areaFactors[oe];if(!At)throw new Error("invalid final units");return Be/kt*At},nt.isNumber=se,nt.isObject=function ce(Be){return!!Be&&Be.constructor===Object},nt.validateBBox=function $(Be){if(!Be)throw new Error("bbox is required");if(!Array.isArray(Be))throw new Error("bbox must be an Array");if(4!==Be.length&&6!==Be.length)throw new Error("bbox must be an Array of 4 or 6 numbers");Be.forEach(function(He){if(!se(He))throw new Error("bbox must only contain numbers")})},nt.validateId=function je(Be){if(!Be)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof Be))throw new Error("id must be a number or a string")}},3269:(Nt,nt,Me)=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});var ue=Me(8275);function Ee(Y,we,Z){if(null!==Y)for(var se,ce,$,je,Be,He,oe,be,kt=0,At=0,qe=Y.type,Ce="FeatureCollection"===qe,Qe="Feature"===qe,rt=Ce?Y.features.length:1,_e=0;_e<rt;_e++){Be=(be=!!(oe=Ce?Y.features[_e].geometry:Qe?Y.geometry:Y)&&"GeometryCollection"===oe.type)?oe.geometries.length:1;for(var St=0;St<Be;St++){var Je=0,nn=0;if(null!==(je=be?oe.geometries[St]:oe)){He=je.coordinates;var vt=je.type;switch(kt=!Z||"Polygon"!==vt&&"MultiPolygon"!==vt?0:1,vt){case null:break;case"Point":if(!1===we(He,At,_e,Je,nn))return!1;At++,Je++;break;case"LineString":case"MultiPoint":for(se=0;se<He.length;se++){if(!1===we(He[se],At,_e,Je,nn))return!1;At++,"MultiPoint"===vt&&Je++}"LineString"===vt&&Je++;break;case"Polygon":case"MultiLineString":for(se=0;se<He.length;se++){for(ce=0;ce<He[se].length-kt;ce++){if(!1===we(He[se][ce],At,_e,Je,nn))return!1;At++}"MultiLineString"===vt&&Je++,"Polygon"===vt&&nn++}"Polygon"===vt&&Je++;break;case"MultiPolygon":for(se=0;se<He.length;se++){for(nn=0,ce=0;ce<He[se].length;ce++){for($=0;$<He[se][ce].length-kt;$++){if(!1===we(He[se][ce][$],At,_e,Je,nn))return!1;At++}nn++}Je++}break;case"GeometryCollection":for(se=0;se<je.geometries.length;se++)if(!1===Ee(je.geometries[se],we,Z))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ze(Y,we){var Z;switch(Y.type){case"FeatureCollection":for(Z=0;Z<Y.features.length&&!1!==we(Y.features[Z].properties,Z);Z++);break;case"Feature":we(Y.properties,0)}}function Ie(Y,we){if("Feature"===Y.type)we(Y,0);else if("FeatureCollection"===Y.type)for(var Z=0;Z<Y.features.length&&!1!==we(Y.features[Z],Z);Z++);}function ft(Y,we){var Z,se,ce,$,je,Be,He,oe,kt,At,be=0,qe="FeatureCollection"===Y.type,Ce="Feature"===Y.type,Qe=qe?Y.features.length:1;for(Z=0;Z<Qe;Z++){for(oe=qe?Y.features[Z].properties:Ce?Y.properties:{},kt=qe?Y.features[Z].bbox:Ce?Y.bbox:void 0,At=qe?Y.features[Z].id:Ce?Y.id:void 0,je=(He=!!(Be=qe?Y.features[Z].geometry:Ce?Y.geometry:Y)&&"GeometryCollection"===Be.type)?Be.geometries.length:1,ce=0;ce<je;ce++)if(null!==($=He?Be.geometries[ce]:Be))switch($.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===we($,be,oe,kt,At))return!1;break;case"GeometryCollection":for(se=0;se<$.geometries.length;se++)if(!1===we($.geometries[se],be,oe,kt,At))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===we(null,be,oe,kt,At))return!1;be++}}function Ct(Y,we){ft(Y,function(Z,se,ce,$,je){var He,Be=null===Z?null:Z.type;switch(Be){case null:case"Point":case"LineString":case"Polygon":return!1!==we(ue.feature(Z,ce,{bbox:$,id:je}),se,0)&&void 0}switch(Be){case"MultiPoint":He="Point";break;case"MultiLineString":He="LineString";break;case"MultiPolygon":He="Polygon"}for(var oe=0;oe<Z.coordinates.length;oe++)if(!1===we(ue.feature({type:He,coordinates:Z.coordinates[oe]},ce),se,oe))return!1})}function yt(Y,we){Ct(Y,function(Z,se,ce){var $=0;if(Z.geometry){var je=Z.geometry.type;if("Point"!==je&&"MultiPoint"!==je){var Be,He=0,oe=0,kt=0;if(!1===Ee(Z,function(At,be,qe,Ce,Qe){if(void 0===Be||se>He||Ce>oe||Qe>kt)return Be=At,He=se,oe=Ce,kt=Qe,void($=0);var rt=ue.lineString([Be,At],Z.properties);if(!1===we(rt,se,ce,Qe,$))return!1;$++,Be=At}))return!1}}})}function Ve(Y,we){if(!Y)throw new Error("geojson is required");Ct(Y,function(Z,se,ce){if(null!==Z.geometry){var je=Z.geometry.coordinates;switch(Z.geometry.type){case"LineString":if(!1===we(Z,se,ce,0,0))return!1;break;case"Polygon":for(var Be=0;Be<je.length;Be++)if(!1===we(ue.lineString(je[Be],Z.properties),se,ce,Be))return!1}}})}nt.coordAll=function ct(Y){var we=[];return Ee(Y,function(Z){we.push(Z)}),we},nt.coordEach=Ee,nt.coordReduce=function Ne(Y,we,Z,se){var ce=Z;return Ee(Y,function($,je,Be,He,oe){ce=0===je&&void 0===Z?$:we(ce,$,je,Be,He,oe)},se),ce},nt.featureEach=Ie,nt.featureReduce=function We(Y,we,Z){var se=Z;return Ie(Y,function(ce,$){se=0===$&&void 0===Z?ce:we(se,ce,$)}),se},nt.findPoint=function X(Y,we){if(!ue.isObject(we=we||{}))throw new Error("options is invalid");var Be,Z=we.featureIndex||0,se=we.multiFeatureIndex||0,ce=we.geometryIndex||0,$=we.coordIndex||0,je=we.properties;switch(Y.type){case"FeatureCollection":Z<0&&(Z=Y.features.length+Z),je=je||Y.features[Z].properties,Be=Y.features[Z].geometry;break;case"Feature":je=je||Y.properties,Be=Y.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Be=Y;break;default:throw new Error("geojson is invalid")}if(null===Be)return null;var He=Be.coordinates;switch(Be.type){case"Point":return ue.point(He,je,we);case"MultiPoint":return se<0&&(se=He.length+se),ue.point(He[se],je,we);case"LineString":return $<0&&($=He.length+$),ue.point(He[$],je,we);case"Polygon":return ce<0&&(ce=He.length+ce),$<0&&($=He[ce].length+$),ue.point(He[ce][$],je,we);case"MultiLineString":return se<0&&(se=He.length+se),$<0&&($=He[se].length+$),ue.point(He[se][$],je,we);case"MultiPolygon":return se<0&&(se=He.length+se),ce<0&&(ce=He[se].length+ce),$<0&&($=He[se][ce].length-$),ue.point(He[se][ce][$],je,we)}throw new Error("geojson is invalid")},nt.findSegment=function j(Y,we){if(!ue.isObject(we=we||{}))throw new Error("options is invalid");var Be,Z=we.featureIndex||0,se=we.multiFeatureIndex||0,ce=we.geometryIndex||0,$=we.segmentIndex||0,je=we.properties;switch(Y.type){case"FeatureCollection":Z<0&&(Z=Y.features.length+Z),je=je||Y.features[Z].properties,Be=Y.features[Z].geometry;break;case"Feature":je=je||Y.properties,Be=Y.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Be=Y;break;default:throw new Error("geojson is invalid")}if(null===Be)return null;var He=Be.coordinates;switch(Be.type){case"Point":case"MultiPoint":return null;case"LineString":return $<0&&($=He.length+$-1),ue.lineString([He[$],He[$+1]],je,we);case"Polygon":return ce<0&&(ce=He.length+ce),$<0&&($=He[ce].length+$-1),ue.lineString([He[ce][$],He[ce][$+1]],je,we);case"MultiLineString":return se<0&&(se=He.length+se),$<0&&($=He[se].length+$-1),ue.lineString([He[se][$],He[se][$+1]],je,we);case"MultiPolygon":return se<0&&(se=He.length+se),ce<0&&(ce=He[se].length+ce),$<0&&($=He[se][ce].length-$-1),ue.lineString([He[se][ce][$],He[se][ce][$+1]],je,we)}throw new Error("geojson is invalid")},nt.flattenEach=Ct,nt.flattenReduce=function st(Y,we,Z){var se=Z;return Ct(Y,function(ce,$,je){se=0===$&&0===je&&void 0===Z?ce:we(se,ce,$,je)}),se},nt.geomEach=ft,nt.geomReduce=function Vt(Y,we,Z){var se=Z;return ft(Y,function(ce,$,je,Be,He){se=0===$&&void 0===Z?ce:we(se,ce,$,je,Be,He)}),se},nt.lineEach=Ve,nt.lineReduce=function Xe(Y,we,Z){var se=Z;return Ve(Y,function(ce,$,je,Be){se=0===$&&void 0===Z?ce:we(se,ce,$,je,Be)}),se},nt.propEach=ze,nt.propReduce=function Re(Y,we,Z){var se=Z;return ze(Y,function(ce,$){se=0===$&&void 0===Z?ce:we(se,ce,$)}),se},nt.segmentEach=yt,nt.segmentReduce=function qt(Y,we,Z){var se=Z,ce=!1;return yt(Y,function($,je,Be,He,oe){se=!1===ce&&void 0===Z?$:we(se,$,je,Be,He,oe),ce=!0}),se}},545:function(Nt){Nt.exports=function(){"use strict";function Me(Ne,ze,Re,Ie,We){for(;Ie>Re;){if(Ie-Re>600){var ct=Ie-Re+1,ft=ze-Re+1,Vt=Math.log(ct),Ct=.5*Math.exp(2*Vt/3),st=.5*Math.sqrt(Vt*Ct*(ct-Ct)/ct)*(ft-ct/2<0?-1:1);Me(Ne,ze,Math.max(Re,Math.floor(ze-ft*Ct/ct+st)),Math.min(Ie,Math.floor(ze+(ct-ft)*Ct/ct+st)),We)}var Ve=Ne[ze],Xe=Re,j=Ie;for(ue(Ne,Re,ze),We(Ne[Ie],Ve)>0&&ue(Ne,Re,Ie);Xe<j;){for(ue(Ne,Xe,j),Xe++,j--;We(Ne[Xe],Ve)<0;)Xe++;for(;We(Ne[j],Ve)>0;)j--}0===We(Ne[Re],Ve)?ue(Ne,Re,j):ue(Ne,++j,Ie),j<=ze&&(Re=j+1),ze<=j&&(Ie=j-1)}}function ue(Ne,ze,Re){var Ie=Ne[ze];Ne[ze]=Ne[Re],Ne[Re]=Ie}function Ee(Ne,ze){return Ne<ze?-1:Ne>ze?1:0}return function nt(Ne,ze,Re,Ie,We){Me(Ne,ze,Re||0,Ie||Ne.length-1,We||Ee)}}()},3237:(Nt,nt,Me)=>{"use strict";Nt.exports=Ee,Nt.exports.default=Ee;var ue=Me(545);function Ee(j,X){if(!(this instanceof Ee))return new Ee(j,X);this._maxEntries=Math.max(4,j||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),X&&this._initFormat(X),this.clear()}function Ne(j,X,Y){if(!Y)return X.indexOf(j);for(var we=0;we<X.length;we++)if(Y(j,X[we]))return we;return-1}function ze(j,X){Re(j,0,j.children.length,X,j)}function Re(j,X,Y,we,Z){Z||(Z=Ve(null)),Z.minX=1/0,Z.minY=1/0,Z.maxX=-1/0,Z.maxY=-1/0;for(var ce,se=X;se<Y;se++)ce=j.children[se],Ie(Z,j.leaf?we(ce):ce);return Z}function Ie(j,X){return j.minX=Math.min(j.minX,X.minX),j.minY=Math.min(j.minY,X.minY),j.maxX=Math.max(j.maxX,X.maxX),j.maxY=Math.max(j.maxY,X.maxY),j}function We(j,X){return j.minX-X.minX}function ct(j,X){return j.minY-X.minY}function ft(j){return(j.maxX-j.minX)*(j.maxY-j.minY)}function Vt(j){return j.maxX-j.minX+(j.maxY-j.minY)}function Ct(j,X){return(Math.max(X.maxX,j.maxX)-Math.min(X.minX,j.minX))*(Math.max(X.maxY,j.maxY)-Math.min(X.minY,j.minY))}function st(j,X){var Y=Math.max(j.minX,X.minX),we=Math.max(j.minY,X.minY),Z=Math.min(j.maxX,X.maxX),se=Math.min(j.maxY,X.maxY);return Math.max(0,Z-Y)*Math.max(0,se-we)}function yt(j,X){return j.minX<=X.minX&&j.minY<=X.minY&&X.maxX<=j.maxX&&X.maxY<=j.maxY}function qt(j,X){return X.minX<=j.maxX&&X.minY<=j.maxY&&X.maxX>=j.minX&&X.maxY>=j.minY}function Ve(j){return{children:j,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Xe(j,X,Y,we,Z){for(var ce,se=[X,Y];se.length;)!((Y=se.pop())-(X=se.pop())<=we)&&(ce=X+Math.ceil((Y-X)/we/2)*we,ue(j,ce,X,Y,Z),se.push(X,ce,ce,Y))}Ee.prototype={all:function(){return this._all(this.data,[])},search:function(j){var X=this.data,Y=[],we=this.toBBox;if(!qt(j,X))return Y;for(var se,ce,$,je,Z=[];X;){for(se=0,ce=X.children.length;se<ce;se++)$=X.children[se],qt(j,je=X.leaf?we($):$)&&(X.leaf?Y.push($):yt(j,je)?this._all($,Y):Z.push($));X=Z.pop()}return Y},collides:function(j){var X=this.data,Y=this.toBBox;if(!qt(j,X))return!1;for(var Z,se,ce,$,we=[];X;){for(Z=0,se=X.children.length;Z<se;Z++)if(ce=X.children[Z],qt(j,$=X.leaf?Y(ce):ce)){if(X.leaf||yt(j,$))return!0;we.push(ce)}X=we.pop()}return!1},load:function(j){if(!j||!j.length)return this;if(j.length<this._minEntries){for(var X=0,Y=j.length;X<Y;X++)this.insert(j[X]);return this}var we=this._build(j.slice(),0,j.length-1,0);if(this.data.children.length)if(this.data.height===we.height)this._splitRoot(this.data,we);else{if(this.data.height<we.height){var Z=this.data;this.data=we,we=Z}this._insert(we,this.data.height-we.height-1,!0)}else this.data=we;return this},insert:function(j){return j&&this._insert(j,this.data.height-1),this},clear:function(){return this.data=Ve([]),this},remove:function(j,X){if(!j)return this;for(var ce,$,je,Be,Y=this.data,we=this.toBBox(j),Z=[],se=[];Y||Z.length;){if(Y||(Y=Z.pop(),$=Z[Z.length-1],ce=se.pop(),Be=!0),Y.leaf&&-1!==(je=Ne(j,Y.children,X)))return Y.children.splice(je,1),Z.push(Y),this._condense(Z),this;Be||Y.leaf||!yt(Y,we)?$?(ce++,Y=$.children[ce],Be=!1):Y=null:(Z.push(Y),se.push(ce),ce=0,$=Y,Y=Y.children[0])}return this},toBBox:function(j){return j},compareMinX:We,compareMinY:ct,toJSON:function(){return this.data},fromJSON:function(j){return this.data=j,this},_all:function(j,X){for(var Y=[];j;)j.leaf?X.push.apply(X,j.children):Y.push.apply(Y,j.children),j=Y.pop();return X},_build:function(j,X,Y,we){var ce,Z=Y-X+1,se=this._maxEntries;if(Z<=se)return ze(ce=Ve(j.slice(X,Y+1)),this.toBBox),ce;we||(we=Math.ceil(Math.log(Z)/Math.log(se)),se=Math.ceil(Z/Math.pow(se,we-1))),(ce=Ve([])).leaf=!1,ce.height=we;var Be,He,oe,kt,$=Math.ceil(Z/se),je=$*Math.ceil(Math.sqrt(se));for(Xe(j,X,Y,je,this.compareMinX),Be=X;Be<=Y;Be+=je)for(Xe(j,Be,oe=Math.min(Be+je-1,Y),$,this.compareMinY),He=Be;He<=oe;He+=$)kt=Math.min(He+$-1,oe),ce.children.push(this._build(j,He,kt,we-1));return ze(ce,this.toBBox),ce},_chooseSubtree:function(j,X,Y,we){for(var Z,se,ce,$,je,Be,He,oe;we.push(X),!X.leaf&&we.length-1!==Y;){for(He=oe=1/0,Z=0,se=X.children.length;Z<se;Z++)je=ft(ce=X.children[Z]),(Be=Ct(j,ce)-je)<oe?(oe=Be,He=je<He?je:He,$=ce):Be===oe&&je<He&&(He=je,$=ce);X=$||X.children[0]}return X},_insert:function(j,X,Y){var Z=Y?j:(0,this.toBBox)(j),se=[],ce=this._chooseSubtree(Z,this.data,X,se);for(ce.children.push(j),Ie(ce,Z);X>=0&&se[X].children.length>this._maxEntries;)this._split(se,X),X--;this._adjustParentBBoxes(Z,se,X)},_split:function(j,X){var Y=j[X],we=Y.children.length,Z=this._minEntries;this._chooseSplitAxis(Y,Z,we);var se=this._chooseSplitIndex(Y,Z,we),ce=Ve(Y.children.splice(se,Y.children.length-se));ce.height=Y.height,ce.leaf=Y.leaf,ze(Y,this.toBBox),ze(ce,this.toBBox),X?j[X-1].children.push(ce):this._splitRoot(Y,ce)},_splitRoot:function(j,X){this.data=Ve([j,X]),this.data.height=j.height+1,this.data.leaf=!1,ze(this.data,this.toBBox)},_chooseSplitIndex:function(j,X,Y){var we,Z,se,ce,$,je,Be,He;for(je=Be=1/0,we=X;we<=Y-X;we++)ce=st(Z=Re(j,0,we,this.toBBox),se=Re(j,we,Y,this.toBBox)),$=ft(Z)+ft(se),ce<je?(je=ce,He=we,Be=$<Be?$:Be):ce===je&&$<Be&&(Be=$,He=we);return He},_chooseSplitAxis:function(j,X,Y){var we=j.leaf?this.compareMinX:We,Z=j.leaf?this.compareMinY:ct;this._allDistMargin(j,X,Y,we)<this._allDistMargin(j,X,Y,Z)&&j.children.sort(we)},_allDistMargin:function(j,X,Y,we){j.children.sort(we);var je,Be,Z=this.toBBox,se=Re(j,0,X,Z),ce=Re(j,Y-X,Y,Z),$=Vt(se)+Vt(ce);for(je=X;je<Y-X;je++)Be=j.children[je],Ie(se,j.leaf?Z(Be):Be),$+=Vt(se);for(je=Y-X-1;je>=X;je--)Be=j.children[je],Ie(ce,j.leaf?Z(Be):Be),$+=Vt(ce);return $},_adjustParentBBoxes:function(j,X,Y){for(var we=Y;we>=0;we--)Ie(X[we],j)},_condense:function(j){for(var Y,X=j.length-1;X>=0;X--)0===j[X].children.length?X>0?(Y=j[X-1].children).splice(Y.indexOf(j[X]),1):this.clear():ze(j[X],this.toBBox)},_initFormat:function(j){var X=["return a"," - b",";"];this.compareMinX=new Function("a","b",X.join(j[0])),this.compareMinY=new Function("a","b",X.join(j[1])),this.toBBox=new Function("a","return {minX: a"+j[0]+", minY: a"+j[1]+", maxX: a"+j[2]+", maxY: a"+j[3]+"};")}}},5834:(Nt,nt,Me)=>{"use strict";var ue=Me(5203),Ee=Me(5685),Ne=Ee(ue("String.prototype.indexOf"));Nt.exports=function(Re,Ie){var We=ue(Re,!!Ie);return"function"==typeof We&&Ne(Re,".prototype.")>-1?Ee(We):We}},5685:(Nt,nt,Me)=>{"use strict";var ue=Me(4444),Ee=Me(5203),Ne=Ee("%Function.prototype.apply%"),ze=Ee("%Function.prototype.call%"),Re=Ee("%Reflect.apply%",!0)||ue.call(ze,Ne),Ie=Ee("%Object.getOwnPropertyDescriptor%",!0),We=Ee("%Object.defineProperty%",!0),ct=Ee("%Math.max%");if(We)try{We({},"a",{value:1})}catch{We=null}Nt.exports=function(Ct){var st=Re(ue,ze,arguments);if(Ie&&We){var yt=Ie(st,"length");yt.configurable&&We(st,"length",{value:1+ct(0,Ct.length-(arguments.length-1))})}return st};var ft=function(){return Re(ue,Ne,arguments)};We?We(Nt.exports,"apply",{value:ft}):Nt.exports.apply=ft},1335:(Nt,nt,Me)=>{"use strict";var ue=Me(2402),Ee=Me(7253),Ne=Me(3870),ze=Me(5485).orient2d;function Re(Z,se,ce){se=Math.max(0,void 0===se?2:se),ce=ce||0;var $=function qt(Z){for(var se=Z[0],ce=Z[0],$=Z[0],je=Z[0],Be=0;Be<Z.length;Be++){var He=Z[Be];He[0]<se[0]&&(se=He),He[0]>$[0]&&($=He),He[1]<ce[1]&&(ce=He),He[1]>je[1]&&(je=He)}var oe=[se,ce,$,je],kt=oe.slice();for(Be=0;Be<Z.length;Be++)Ne(Z[Be],oe)||kt.push(Z[Be]);return function we(Z){Z.sort(Y);for(var se=[],ce=0;ce<Z.length;ce++){for(;se.length>=2&&Ct(se[se.length-2],se[se.length-1],Z[ce])<=0;)se.pop();se.push(Z[ce])}for(var $=[],je=Z.length-1;je>=0;je--){for(;$.length>=2&&Ct($[$.length-2],$[$.length-1],Z[je])<=0;)$.pop();$.push(Z[je])}return $.pop(),se.pop(),se.concat($)}(kt)}(Z),je=new ue(16);je.toBBox=function(nn){return{minX:nn[0],minY:nn[1],maxX:nn[0],maxY:nn[1]}},je.compareMinX=function(nn,vt){return nn[0]-vt[0]},je.compareMinY=function(nn,vt){return nn[1]-vt[1]},je.load(Z);for(var oe,Be=[],He=0;He<$.length;He++){var kt=$[He];je.remove(kt),oe=Ve(kt,oe),Be.push(oe)}var At=new ue(16);for(He=0;He<Be.length;He++)At.insert(yt(Be[He]));for(var be=se*se,qe=ce*ce;Be.length;){var Ce=Be.shift(),Qe=Ce.p,rt=Ce.next.p,_e=Xe(Qe,rt);if(!(_e<qe)){var St=_e/be;(kt=Ie(je,Ce.prev.p,Qe,rt,Ce.next.next.p,St,At))&&Math.min(Xe(kt,Qe),Xe(kt,rt))<=St&&(Be.push(Ce),Be.push(Ve(kt,Ce)),je.remove(kt),At.remove(Ce),At.insert(yt(Ce)),At.insert(yt(Ce.next)))}}Ce=oe;var Je=[];do{Je.push(Ce.p),Ce=Ce.next}while(Ce!==oe);return Je.push(Ce.p),Je}function Ie(Z,se,ce,$,je,Be,He){for(var oe=new Ee([],We),kt=Z.data;kt;){for(var At=0;At<kt.children.length;At++){var be=kt.children[At],qe=kt.leaf?j(be,ce,$):ct(ce,$,be);qe>Be||oe.push({node:be,dist:qe})}for(;oe.length&&!oe.peek().node.children;){var Ce=oe.pop(),Qe=Ce.node,rt=j(Qe,se,ce),_e=j(Qe,$,je);if(Ce.dist<rt&&Ce.dist<_e&&Vt(ce,Qe,He)&&Vt($,Qe,He))return Qe}(kt=oe.pop())&&(kt=kt.node)}return null}function We(Z,se){return Z.dist-se.dist}function ct(Z,se,ce){if(ft(Z,ce)||ft(se,ce))return 0;var $=X(Z[0],Z[1],se[0],se[1],ce.minX,ce.minY,ce.maxX,ce.minY);if(0===$)return 0;var je=X(Z[0],Z[1],se[0],se[1],ce.minX,ce.minY,ce.minX,ce.maxY);if(0===je)return 0;var Be=X(Z[0],Z[1],se[0],se[1],ce.maxX,ce.minY,ce.maxX,ce.maxY);if(0===Be)return 0;var He=X(Z[0],Z[1],se[0],se[1],ce.minX,ce.maxY,ce.maxX,ce.maxY);return 0===He?0:Math.min($,je,Be,He)}function ft(Z,se){return Z[0]>=se.minX&&Z[0]<=se.maxX&&Z[1]>=se.minY&&Z[1]<=se.maxY}function Vt(Z,se,ce){for(var $=Math.min(Z[0],se[0]),je=Math.min(Z[1],se[1]),Be=Math.max(Z[0],se[0]),He=Math.max(Z[1],se[1]),oe=ce.search({minX:$,minY:je,maxX:Be,maxY:He}),kt=0;kt<oe.length;kt++)if(st(oe[kt].p,oe[kt].next.p,Z,se))return!1;return!0}function Ct(Z,se,ce){return ze(Z[0],Z[1],se[0],se[1],ce[0],ce[1])}function st(Z,se,ce,$){return Z!==$&&se!==ce&&Ct(Z,se,ce)>0!=Ct(Z,se,$)>0&&Ct(ce,$,Z)>0!=Ct(ce,$,se)>0}function yt(Z){var se=Z.p,ce=Z.next.p;return Z.minX=Math.min(se[0],ce[0]),Z.minY=Math.min(se[1],ce[1]),Z.maxX=Math.max(se[0],ce[0]),Z.maxY=Math.max(se[1],ce[1]),Z}function Ve(Z,se){var ce={p:Z,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return se?(ce.next=se.next,ce.prev=se,se.next.prev=ce,se.next=ce):(ce.prev=ce,ce.next=ce),ce}function Xe(Z,se){var ce=Z[0]-se[0],$=Z[1]-se[1];return ce*ce+$*$}function j(Z,se,ce){var $=se[0],je=se[1],Be=ce[0]-$,He=ce[1]-je;if(0!==Be||0!==He){var oe=((Z[0]-$)*Be+(Z[1]-je)*He)/(Be*Be+He*He);oe>1?($=ce[0],je=ce[1]):oe>0&&($+=Be*oe,je+=He*oe)}return(Be=Z[0]-$)*Be+(He=Z[1]-je)*He}function X(Z,se,ce,$,je,Be,He,oe){var xn,_n,ci,$t,kt=ce-Z,At=$-se,be=He-je,qe=oe-Be,Ce=Z-je,Qe=se-Be,rt=kt*kt+At*At,_e=kt*be+At*qe,St=be*be+qe*qe,Je=kt*Ce+At*Qe,nn=be*Ce+qe*Qe,vt=rt*St-_e*_e,$n=vt,on=vt;0===vt?(_n=0,$n=1,$t=nn,on=St):($t=rt*nn-_e*Je,(_n=_e*nn-St*Je)<0?(_n=0,$t=nn,on=St):_n>$n&&(_n=$n,$t=nn+_e,on=St)),$t<0?($t=0,-Je<0?_n=0:-Je>rt?_n=$n:(_n=-Je,$n=rt)):$t>on&&($t=on,-Je+_e<0?_n=0:-Je+_e>rt?_n=$n:(_n=-Je+_e,$n=rt));var vi=(1-(ci=0===$t?0:$t/on))*je+ci*He-((1-(xn=0===_n?0:_n/$n))*Z+xn*ce),it=(1-ci)*Be+ci*oe-((1-xn)*se+xn*$);return vi*vi+it*it}function Y(Z,se){return Z[0]===se[0]?Z[1]-se[1]:Z[0]-se[0]}Ee.default&&(Ee=Ee.default),Nt.exports=Re,Nt.exports.default=Re},5485:function(Nt,nt){!function(Me){"use strict";function Ne(yt,qt,Ve,Xe,j){let X,Y,we,Z,se=qt[0],ce=Xe[0],$=0,je=0;ce>se==ce>-se?(X=se,se=qt[++$]):(X=ce,ce=Xe[++je]);let Be=0;if($<yt&&je<Ve)for(ce>se==ce>-se?(we=X-((Y=se+X)-se),se=qt[++$]):(we=X-((Y=ce+X)-ce),ce=Xe[++je]),X=Y,0!==we&&(j[Be++]=we);$<yt&&je<Ve;)ce>se==ce>-se?(we=X-((Y=X+se)-(Z=Y-X))+(se-Z),se=qt[++$]):(we=X-((Y=X+ce)-(Z=Y-X))+(ce-Z),ce=Xe[++je]),X=Y,0!==we&&(j[Be++]=we);for(;$<yt;)we=X-((Y=X+se)-(Z=Y-X))+(se-Z),se=qt[++$],X=Y,0!==we&&(j[Be++]=we);for(;je<Ve;)we=X-((Y=X+ce)-(Z=Y-X))+(ce-Z),ce=Xe[++je],X=Y,0!==we&&(j[Be++]=we);return 0===X&&0!==Be||(j[Be++]=X),Be}function ze(yt){return new Float64Array(yt)}const ct=ze(4),ft=ze(8),Vt=ze(12),Ct=ze(16),st=ze(4);Me.orient2d=function(yt,qt,Ve,Xe,j,X){const Y=(qt-X)*(Ve-j),we=(yt-j)*(Xe-X),Z=Y-we;if(0===Y||0===we||Y>0!=we>0)return Z;const se=Math.abs(Y+we);return Math.abs(Z)>=33306690738754716e-32*se?Z:-function(ce,$,je,Be,He,oe,kt){let At,be,qe,Ce,Qe,rt,_e,St,Je,nn,vt,xn,_n,ci,$t,$n,on,Bs;const _s=ce-He,qs=je-He,di=$-oe,vi=Be-oe;Qe=($t=(St=_s-(_e=(rt=134217729*_s)-(rt-_s)))*(nn=vi-(Je=(rt=134217729*vi)-(rt-vi)))-((ci=_s*vi)-_e*Je-St*Je-_e*nn))-(vt=$t-(on=(St=di-(_e=(rt=134217729*di)-(rt-di)))*(nn=qs-(Je=(rt=134217729*qs)-(rt-qs)))-(($n=di*qs)-_e*Je-St*Je-_e*nn))),ct[0]=$t-(vt+Qe)+(Qe-on),Qe=(_n=ci-((xn=ci+vt)-(Qe=xn-ci))+(vt-Qe))-(vt=_n-$n),ct[1]=_n-(vt+Qe)+(Qe-$n),Qe=(Bs=xn+vt)-xn,ct[2]=xn-(Bs-Qe)+(vt-Qe),ct[3]=Bs;let it=function($e,mt){let Ut=mt[0];for(let Kt=1;Kt<4;Kt++)Ut+=mt[Kt];return Ut}(0,ct),le=22204460492503146e-32*kt;if(it>=le||-it>=le||(At=ce-(_s+(Qe=ce-_s))+(Qe-He),qe=je-(qs+(Qe=je-qs))+(Qe-He),be=$-(di+(Qe=$-di))+(Qe-oe),Ce=Be-(vi+(Qe=Be-vi))+(Qe-oe),0===At&&0===be&&0===qe&&0===Ce)||(le=11093356479670487e-47*kt+33306690738754706e-32*Math.abs(it),(it+=_s*Ce+vi*At-(di*qe+qs*be))>=le||-it>=le))return it;Qe=($t=(St=At-(_e=(rt=134217729*At)-(rt-At)))*(nn=vi-(Je=(rt=134217729*vi)-(rt-vi)))-((ci=At*vi)-_e*Je-St*Je-_e*nn))-(vt=$t-(on=(St=be-(_e=(rt=134217729*be)-(rt-be)))*(nn=qs-(Je=(rt=134217729*qs)-(rt-qs)))-(($n=be*qs)-_e*Je-St*Je-_e*nn))),st[0]=$t-(vt+Qe)+(Qe-on),Qe=(_n=ci-((xn=ci+vt)-(Qe=xn-ci))+(vt-Qe))-(vt=_n-$n),st[1]=_n-(vt+Qe)+(Qe-$n),Qe=(Bs=xn+vt)-xn,st[2]=xn-(Bs-Qe)+(vt-Qe),st[3]=Bs;const te=Ne(4,ct,4,st,ft);Qe=($t=(St=_s-(_e=(rt=134217729*_s)-(rt-_s)))*(nn=Ce-(Je=(rt=134217729*Ce)-(rt-Ce)))-((ci=_s*Ce)-_e*Je-St*Je-_e*nn))-(vt=$t-(on=(St=di-(_e=(rt=134217729*di)-(rt-di)))*(nn=qe-(Je=(rt=134217729*qe)-(rt-qe)))-(($n=di*qe)-_e*Je-St*Je-_e*nn))),st[0]=$t-(vt+Qe)+(Qe-on),Qe=(_n=ci-((xn=ci+vt)-(Qe=xn-ci))+(vt-Qe))-(vt=_n-$n),st[1]=_n-(vt+Qe)+(Qe-$n),Qe=(Bs=xn+vt)-xn,st[2]=xn-(Bs-Qe)+(vt-Qe),st[3]=Bs;const J=Ne(te,ft,4,st,Vt);Qe=($t=(St=At-(_e=(rt=134217729*At)-(rt-At)))*(nn=Ce-(Je=(rt=134217729*Ce)-(rt-Ce)))-((ci=At*Ce)-_e*Je-St*Je-_e*nn))-(vt=$t-(on=(St=be-(_e=(rt=134217729*be)-(rt-be)))*(nn=qe-(Je=(rt=134217729*qe)-(rt-qe)))-(($n=be*qe)-_e*Je-St*Je-_e*nn))),st[0]=$t-(vt+Qe)+(Qe-on),Qe=(_n=ci-((xn=ci+vt)-(Qe=xn-ci))+(vt-Qe))-(vt=_n-$n),st[1]=_n-(vt+Qe)+(Qe-$n),Qe=(Bs=xn+vt)-xn,st[2]=xn-(Bs-Qe)+(vt-Qe),st[3]=Bs;const Te=Ne(J,Vt,4,st,Ct);return Ct[Te-1]}(yt,qt,Ve,Xe,j,X,se)},Me.orient2dfast=function(yt,qt,Ve,Xe,j,X){return(qt-X)*(Ve-j)-(yt-j)*(Xe-X)},Object.defineProperty(Me,"__esModule",{value:!0})}(nt)},6952:(Nt,nt,Me)=>{var ue=Me(1356),Ee=Me(3407),Ne=Me(2e3),ze=Me(2342),Re=Me(9235),Ie=Me(2374),We=Date.prototype.getTime;function ft(st){return null==st}function Vt(st){return!(!st||"object"!=typeof st||"number"!=typeof st.length||"function"!=typeof st.copy||"function"!=typeof st.slice||st.length>0&&"number"!=typeof st[0])}Nt.exports=function ct(st,yt,qt){var Ve=qt||{};return!!(Ve.strict?Ne(st,yt):st===yt)||(!st||!yt||"object"!=typeof st&&"object"!=typeof yt?Ve.strict?Ne(st,yt):st==yt:function Ct(st,yt,qt){var Ve,Xe;if(typeof st!=typeof yt||ft(st)||ft(yt)||st.prototype!==yt.prototype||Ee(st)!==Ee(yt))return!1;var j=ze(st),X=ze(yt);if(j!==X)return!1;if(j||X)return st.source===yt.source&&Re(st)===Re(yt);if(Ie(st)&&Ie(yt))return We.call(st)===We.call(yt);var Y=Vt(st),we=Vt(yt);if(Y!==we)return!1;if(Y||we){if(st.length!==yt.length)return!1;for(Ve=0;Ve<st.length;Ve++)if(st[Ve]!==yt[Ve])return!1;return!0}if(typeof st!=typeof yt)return!1;try{var Z=ue(st),se=ue(yt)}catch{return!1}if(Z.length!==se.length)return!1;for(Z.sort(),se.sort(),Ve=Z.length-1;Ve>=0;Ve--)if(Z[Ve]!=se[Ve])return!1;for(Ve=Z.length-1;Ve>=0;Ve--)if(!ct(st[Xe=Z[Ve]],yt[Xe],qt))return!1;return!0}(st,yt,Ve))}},2358:(Nt,nt,Me)=>{"use strict";var ue=Me(1356),Ee="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Ne=Object.prototype.toString,ze=Array.prototype.concat,Re=Object.defineProperty,We=Me(7027)(),ct=Re&&We,ft=function(Ct,st,yt,qt){st in Ct&&(!function(Ct){return"function"==typeof Ct&&"[object Function]"===Ne.call(Ct)}(qt)||!qt())||(ct?Re(Ct,st,{configurable:!0,enumerable:!1,value:yt,writable:!0}):Ct[st]=yt)},Vt=function(Ct,st){var yt=arguments.length>2?arguments[2]:{},qt=ue(st);Ee&&(qt=ze.call(qt,Object.getOwnPropertySymbols(st)));for(var Ve=0;Ve<qt.length;Ve+=1)ft(Ct,qt[Ve],st[qt[Ve]],yt[qt[Ve]])};Vt.supportsDescriptors=!!ct,Nt.exports=Vt},1817:Nt=>{function nt(Me,ue,Ee,Ne){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(Me,ue,Ee,Ne)}nt.prototype.run=function(Me,ue,Ee,Ne){this._init(Me,ue,Ee,Ne);for(var ze=0;ze<this._datasetLength;ze++)if(1!==this._visited[ze]){this._visited[ze]=1;var Re=this._regionQuery(ze);if(Re.length<this.minPts)this.noise.push(ze);else{var Ie=this.clusters.length;this.clusters.push([]),this._addToCluster(ze,Ie),this._expandCluster(Ie,Re)}}return this.clusters},nt.prototype._init=function(Me,ue,Ee,Ne){if(Me){if(!(Me instanceof Array))throw Error("Dataset must be of type array, "+typeof Me+" given");this.dataset=Me,this.clusters=[],this.noise=[],this._datasetLength=Me.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}ue&&(this.epsilon=ue),Ee&&(this.minPts=Ee),Ne&&(this.distance=Ne)},nt.prototype._expandCluster=function(Me,ue){for(var Ee=0;Ee<ue.length;Ee++){var Ne=ue[Ee];if(1!==this._visited[Ne]){this._visited[Ne]=1;var ze=this._regionQuery(Ne);ze.length>=this.minPts&&(ue=this._mergeArrays(ue,ze))}1!==this._assigned[Ne]&&this._addToCluster(Ne,Me)}},nt.prototype._addToCluster=function(Me,ue){this.clusters[ue].push(Me),this._assigned[Me]=1},nt.prototype._regionQuery=function(Me){for(var ue=[],Ee=0;Ee<this._datasetLength;Ee++)this.distance(this.dataset[Me],this.dataset[Ee])<this.epsilon&&ue.push(Ee);return ue},nt.prototype._mergeArrays=function(Me,ue){for(var Ee=ue.length,Ne=0;Ne<Ee;Ne++){var ze=ue[Ne];Me.indexOf(ze)<0&&Me.push(ze)}return Me},nt.prototype._euclideanDistance=function(Me,ue){for(var Ee=0,Ne=Math.min(Me.length,ue.length);Ne--;)Ee+=(Me[Ne]-ue[Ne])*(Me[Ne]-ue[Ne]);return Math.sqrt(Ee)},Nt.exports&&(Nt.exports=nt)},4273:Nt=>{function nt(Me,ue,Ee){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(Me,ue,Ee)}nt.prototype.init=function(Me,ue,Ee){this.assignments=[],this.centroids=[],typeof Me<"u"&&(this.dataset=Me),typeof ue<"u"&&(this.k=ue),typeof Ee<"u"&&(this.distance=Ee)},nt.prototype.run=function(Me,ue){this.init(Me,ue);for(var Ee=this.dataset.length,Ne=0;Ne<this.k;Ne++)this.centroids[Ne]=this.randomCentroid();for(var ze=!0;ze;){ze=this.assign();for(var Re=0;Re<this.k;Re++){for(var Ie=new Array(Vt),We=0,ct=0;ct<Vt;ct++)Ie[ct]=0;for(var ft=0;ft<Ee;ft++){var Vt=this.dataset[ft].length;if(Re===this.assignments[ft]){for(ct=0;ct<Vt;ct++)Ie[ct]+=this.dataset[ft][ct];We++}}if(We>0){for(ct=0;ct<Vt;ct++)Ie[ct]/=We;this.centroids[Re]=Ie}else this.centroids[Re]=this.randomCentroid(),ze=!0}}return this.getClusters()},nt.prototype.randomCentroid=function(){var ue,Ee,Me=this.dataset.length-1;do{Ee=Math.round(Math.random()*Me),ue=this.dataset[Ee]}while(this.centroids.indexOf(ue)>=0);return ue},nt.prototype.assign=function(){for(var Ee,Me=!1,ue=this.dataset.length,Ne=0;Ne<ue;Ne++)(Ee=this.argmin(this.dataset[Ne],this.centroids,this.distance))!=this.assignments[Ne]&&(this.assignments[Ne]=Ee,Me=!0);return Me},nt.prototype.getClusters=function(){for(var ue,Me=new Array(this.k),Ee=0;Ee<this.assignments.length;Ee++)typeof Me[ue=this.assignments[Ee]]>"u"&&(Me[ue]=[]),Me[ue].push(Ee);return Me},nt.prototype.argmin=function(Me,ue,Ee){for(var Ie,Ne=Number.MAX_VALUE,ze=0,Re=ue.length,We=0;We<Re;We++)(Ie=Ee(Me,ue[We]))<Ne&&(Ne=Ie,ze=We);return ze},nt.prototype.distance=function(Me,ue){for(var Ee=0,Ne=Math.min(Me.length,ue.length);Ne--;){var ze=Me[Ne]-ue[Ne];Ee+=ze*ze}return Math.sqrt(Ee)},Nt.exports&&(Nt.exports=nt)},8680:(Nt,nt,Me)=>{if(Nt.exports)var ue=Me(8759);function Ee(Ne,ze,Re,Ie){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(Ne,ze,Re,Ie)}Ee.prototype.run=function(Ne,ze,Re,Ie){this._init(Ne,ze,Re,Ie);for(var We=0,ct=this.dataset.length;We<ct;We++)if(1!==this._processed[We]){this._processed[We]=1,this.clusters.push([We]);var ft=this.clusters.length-1;this._orderedList.push(We);var Vt=new ue(null,null,"asc"),Ct=this._regionQuery(We);void 0!==this._distanceToCore(We)&&(this._updateQueue(We,Ct,Vt),this._expandCluster(ft,Vt))}return this.clusters},Ee.prototype.getReachabilityPlot=function(){for(var Ne=[],ze=0,Re=this._orderedList.length;ze<Re;ze++){var Ie=this._orderedList[ze];Ne.push([Ie,this._reachability[Ie]])}return Ne},Ee.prototype._init=function(Ne,ze,Re,Ie){if(Ne){if(!(Ne instanceof Array))throw Error("Dataset must be of type array, "+typeof Ne+" given");this.dataset=Ne,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}ze&&(this.epsilon=ze),Re&&(this.minPts=Re),Ie&&(this.distance=Ie)},Ee.prototype._updateQueue=function(Ne,ze,Re){var Ie=this;this._coreDistance=this._distanceToCore(Ne),ze.forEach(function(We){if(void 0===Ie._processed[We]){var ct=Ie.distance(Ie.dataset[Ne],Ie.dataset[We]),ft=Math.max(Ie._coreDistance,ct);void 0===Ie._reachability[We]?(Ie._reachability[We]=ft,Re.insert(We,ft)):ft<Ie._reachability[We]&&(Ie._reachability[We]=ft,Re.remove(We),Re.insert(We,ft))}})},Ee.prototype._expandCluster=function(Ne,ze){for(var Re=ze.getElements(),Ie=0,We=Re.length;Ie<We;Ie++){var ct=Re[Ie];if(void 0===this._processed[ct]){var ft=this._regionQuery(ct);this._processed[ct]=1,this.clusters[Ne].push(ct),this._orderedList.push(ct),void 0!==this._distanceToCore(ct)&&(this._updateQueue(ct,ft,ze),this._expandCluster(Ne,ze))}}},Ee.prototype._distanceToCore=function(Ne){for(var ze=this.epsilon,Re=0;Re<ze;Re++)if(this._regionQuery(Ne,Re).length>=this.minPts)return Re},Ee.prototype._regionQuery=function(Ne,ze){ze=ze||this.epsilon;for(var Re=[],Ie=0,We=this.dataset.length;Ie<We;Ie++)this.distance(this.dataset[Ne],this.dataset[Ie])<ze&&Re.push(Ie);return Re},Ee.prototype._euclideanDistance=function(Ne,ze){for(var Re=0,Ie=Math.min(Ne.length,ze.length);Ie--;)Re+=(Ne[Ie]-ze[Ie])*(Ne[Ie]-ze[Ie]);return Math.sqrt(Re)},Nt.exports&&(Nt.exports=Ee)},8759:Nt=>{function nt(Me,ue,Ee){this._queue=[],this._priorities=[],this._sorting="desc",this._init(Me,ue,Ee)}nt.prototype.insert=function(Me,ue){for(var Ee=this._queue.length,Ne=Ee;Ne--;){var ze=this._priorities[Ne];"desc"===this._sorting?ue>ze&&(Ee=Ne):ue<ze&&(Ee=Ne)}this._insertAt(Me,ue,Ee)},nt.prototype.remove=function(Me){for(var ue=this._queue.length;ue--;)if(Me===this._queue[ue]){this._queue.splice(ue,1),this._priorities.splice(ue,1);break}},nt.prototype.forEach=function(Me){this._queue.forEach(Me)},nt.prototype.getElements=function(){return this._queue},nt.prototype.getElementPriority=function(Me){return this._priorities[Me]},nt.prototype.getPriorities=function(){return this._priorities},nt.prototype.getElementsWithPriorities=function(){for(var Me=[],ue=0,Ee=this._queue.length;ue<Ee;ue++)Me.push([this._queue[ue],this._priorities[ue]]);return Me},nt.prototype._init=function(Me,ue,Ee){if(Me&&ue){if(this._queue=[],this._priorities=[],Me.length!==ue.length)throw new Error("Arrays must have the same length");for(var Ne=0;Ne<Me.length;Ne++)this.insert(Me[Ne],ue[Ne])}Ee&&(this._sorting=Ee)},nt.prototype._insertAt=function(Me,ue,Ee){this._queue.length===Ee?(this._queue.push(Me),this._priorities.push(ue)):(this._queue.splice(Ee,0,Me),this._priorities.splice(Ee,0,ue))},Nt.exports&&(Nt.exports=nt)},7470:(Nt,nt,Me)=>{Nt.exports&&(Nt.exports={DBSCAN:Me(1817),KMEANS:Me(4273),OPTICS:Me(8680),PriorityQueue:Me(8759)})},5469:Nt=>{"use strict";function nt(be,qe,Ce){Ce=Ce||2;var Je,nn,vt,xn,_n,ci,$t,Qe=qe&&qe.length,rt=Qe?qe[0]*Ce:be.length,_e=Me(be,0,rt,Ce,!0),St=[];if(!_e||_e.next===_e.prev)return St;if(Qe&&(_e=function We(be,qe,Ce,Qe){var _e,St,vt,rt=[];for(_e=0,St=qe.length;_e<St;_e++)(vt=Me(be,qe[_e]*Qe,_e<St-1?qe[_e+1]*Qe:be.length,Qe,!1))===vt.next&&(vt.steiner=!0),rt.push(Ve(vt));for(rt.sort(ct),_e=0;_e<rt.length;_e++)Ce=ft(rt[_e],Ce);return Ce}(be,qe,_e,Ce)),be.length>80*Ce){Je=vt=be[0],nn=xn=be[1];for(var $n=Ce;$n<rt;$n+=Ce)(_n=be[$n])<Je&&(Je=_n),(ci=be[$n+1])<nn&&(nn=ci),_n>vt&&(vt=_n),ci>xn&&(xn=ci);$t=0!==($t=Math.max(vt-Je,xn-nn))?32767/$t:0}return Ee(_e,St,Ce,Je,nn,$t,0),St}function Me(be,qe,Ce,Qe,rt){var _e,St;if(rt===At(be,qe,Ce,Qe)>0)for(_e=qe;_e<Ce;_e+=Qe)St=He(_e,be[_e],be[_e+1],St);else for(_e=Ce-Qe;_e>=qe;_e-=Qe)St=He(_e,be[_e],be[_e+1],St);return St&&Y(St,St.next)&&(oe(St),St=St.next),St}function ue(be,qe){if(!be)return be;qe||(qe=be);var Qe,Ce=be;do{if(Qe=!1,Ce.steiner||!Y(Ce,Ce.next)&&0!==X(Ce.prev,Ce,Ce.next))Ce=Ce.next;else{if(oe(Ce),(Ce=qe=Ce.prev)===Ce.next)break;Qe=!0}}while(Qe||Ce!==qe);return qe}function Ee(be,qe,Ce,Qe,rt,_e,St){if(be){!St&&_e&&function st(be,qe,Ce,Qe){var rt=be;do{0===rt.z&&(rt.z=qt(rt.x,rt.y,qe,Ce,Qe)),rt.prevZ=rt.prev,rt.nextZ=rt.next,rt=rt.next}while(rt!==be);rt.prevZ.nextZ=null,rt.prevZ=null,function yt(be){var qe,Ce,Qe,rt,_e,St,Je,nn,vt=1;do{for(Ce=be,be=null,_e=null,St=0;Ce;){for(St++,Qe=Ce,Je=0,qe=0;qe<vt&&(Je++,Qe=Qe.nextZ);qe++);for(nn=vt;Je>0||nn>0&&Qe;)0!==Je&&(0===nn||!Qe||Ce.z<=Qe.z)?(rt=Ce,Ce=Ce.nextZ,Je--):(rt=Qe,Qe=Qe.nextZ,nn--),_e?_e.nextZ=rt:be=rt,rt.prevZ=_e,_e=rt;Ce=Qe}_e.nextZ=null,vt*=2}while(St>1)}(rt)}(be,Qe,rt,_e);for(var nn,vt,Je=be;be.prev!==be.next;)if(nn=be.prev,vt=be.next,_e?ze(be,Qe,rt,_e):Ne(be))qe.push(nn.i/Ce|0),qe.push(be.i/Ce|0),qe.push(vt.i/Ce|0),oe(be),be=vt.next,Je=vt.next;else if((be=vt)===Je){St?1===St?Ee(be=Re(ue(be),qe,Ce),qe,Ce,Qe,rt,_e,2):2===St&&Ie(be,qe,Ce,Qe,rt,_e):Ee(ue(be),qe,Ce,Qe,rt,_e,1);break}}}function Ne(be){var qe=be.prev,Ce=be,Qe=be.next;if(X(qe,Ce,Qe)>=0)return!1;for(var rt=qe.x,_e=Ce.x,St=Qe.x,Je=qe.y,nn=Ce.y,vt=Qe.y,xn=rt<_e?rt<St?rt:St:_e<St?_e:St,_n=Je<nn?Je<vt?Je:vt:nn<vt?nn:vt,ci=rt>_e?rt>St?rt:St:_e>St?_e:St,$t=Je>nn?Je>vt?Je:vt:nn>vt?nn:vt,$n=Qe.next;$n!==qe;){if($n.x>=xn&&$n.x<=ci&&$n.y>=_n&&$n.y<=$t&&Xe(rt,Je,_e,nn,St,vt,$n.x,$n.y)&&X($n.prev,$n,$n.next)>=0)return!1;$n=$n.next}return!0}function ze(be,qe,Ce,Qe){var rt=be.prev,_e=be,St=be.next;if(X(rt,_e,St)>=0)return!1;for(var Je=rt.x,nn=_e.x,vt=St.x,xn=rt.y,_n=_e.y,ci=St.y,$t=Je<nn?Je<vt?Je:vt:nn<vt?nn:vt,$n=xn<_n?xn<ci?xn:ci:_n<ci?_n:ci,on=Je>nn?Je>vt?Je:vt:nn>vt?nn:vt,Bs=xn>_n?xn>ci?xn:ci:_n>ci?_n:ci,_s=qt($t,$n,qe,Ce,Qe),qs=qt(on,Bs,qe,Ce,Qe),di=be.prevZ,vi=be.nextZ;di&&di.z>=_s&&vi&&vi.z<=qs;){if(di.x>=$t&&di.x<=on&&di.y>=$n&&di.y<=Bs&&di!==rt&&di!==St&&Xe(Je,xn,nn,_n,vt,ci,di.x,di.y)&&X(di.prev,di,di.next)>=0||(di=di.prevZ,vi.x>=$t&&vi.x<=on&&vi.y>=$n&&vi.y<=Bs&&vi!==rt&&vi!==St&&Xe(Je,xn,nn,_n,vt,ci,vi.x,vi.y)&&X(vi.prev,vi,vi.next)>=0))return!1;vi=vi.nextZ}for(;di&&di.z>=_s;){if(di.x>=$t&&di.x<=on&&di.y>=$n&&di.y<=Bs&&di!==rt&&di!==St&&Xe(Je,xn,nn,_n,vt,ci,di.x,di.y)&&X(di.prev,di,di.next)>=0)return!1;di=di.prevZ}for(;vi&&vi.z<=qs;){if(vi.x>=$t&&vi.x<=on&&vi.y>=$n&&vi.y<=Bs&&vi!==rt&&vi!==St&&Xe(Je,xn,nn,_n,vt,ci,vi.x,vi.y)&&X(vi.prev,vi,vi.next)>=0)return!1;vi=vi.nextZ}return!0}function Re(be,qe,Ce){var Qe=be;do{var rt=Qe.prev,_e=Qe.next.next;!Y(rt,_e)&&we(rt,Qe,Qe.next,_e)&&$(rt,_e)&&$(_e,rt)&&(qe.push(rt.i/Ce|0),qe.push(Qe.i/Ce|0),qe.push(_e.i/Ce|0),oe(Qe),oe(Qe.next),Qe=be=_e),Qe=Qe.next}while(Qe!==be);return ue(Qe)}function Ie(be,qe,Ce,Qe,rt,_e){var St=be;do{for(var Je=St.next.next;Je!==St.prev;){if(St.i!==Je.i&&j(St,Je)){var nn=Be(St,Je);return St=ue(St,St.next),nn=ue(nn,nn.next),Ee(St,qe,Ce,Qe,rt,_e,0),void Ee(nn,qe,Ce,Qe,rt,_e,0)}Je=Je.next}St=St.next}while(St!==be)}function ct(be,qe){return be.x-qe.x}function ft(be,qe){var Ce=function Vt(be,qe){var St,Ce=qe,Qe=be.x,rt=be.y,_e=-1/0;do{if(rt<=Ce.y&&rt>=Ce.next.y&&Ce.next.y!==Ce.y){var Je=Ce.x+(rt-Ce.y)*(Ce.next.x-Ce.x)/(Ce.next.y-Ce.y);if(Je<=Qe&&Je>_e&&(_e=Je,St=Ce.x<Ce.next.x?Ce:Ce.next,Je===Qe))return St}Ce=Ce.next}while(Ce!==qe);if(!St)return null;var ci,nn=St,vt=St.x,xn=St.y,_n=1/0;Ce=St;do{Qe>=Ce.x&&Ce.x>=vt&&Qe!==Ce.x&&Xe(rt<xn?Qe:_e,rt,vt,xn,rt<xn?_e:Qe,rt,Ce.x,Ce.y)&&(ci=Math.abs(rt-Ce.y)/(Qe-Ce.x),$(Ce,be)&&(ci<_n||ci===_n&&(Ce.x>St.x||Ce.x===St.x&&Ct(St,Ce)))&&(St=Ce,_n=ci)),Ce=Ce.next}while(Ce!==nn);return St}(be,qe);if(!Ce)return qe;var Qe=Be(Ce,be);return ue(Qe,Qe.next),ue(Ce,Ce.next)}function Ct(be,qe){return X(be.prev,be,qe.prev)<0&&X(qe.next,be,be.next)<0}function qt(be,qe,Ce,Qe,rt){return(be=1431655765&((be=858993459&((be=252645135&((be=16711935&((be=(be-Ce)*rt|0)|be<<8))|be<<4))|be<<2))|be<<1))|(qe=1431655765&((qe=858993459&((qe=252645135&((qe=16711935&((qe=(qe-Qe)*rt|0)|qe<<8))|qe<<4))|qe<<2))|qe<<1))<<1}function Ve(be){var qe=be,Ce=be;do{(qe.x<Ce.x||qe.x===Ce.x&&qe.y<Ce.y)&&(Ce=qe),qe=qe.next}while(qe!==be);return Ce}function Xe(be,qe,Ce,Qe,rt,_e,St,Je){return(rt-St)*(qe-Je)>=(be-St)*(_e-Je)&&(be-St)*(Qe-Je)>=(Ce-St)*(qe-Je)&&(Ce-St)*(_e-Je)>=(rt-St)*(Qe-Je)}function j(be,qe){return be.next.i!==qe.i&&be.prev.i!==qe.i&&!function ce(be,qe){var Ce=be;do{if(Ce.i!==be.i&&Ce.next.i!==be.i&&Ce.i!==qe.i&&Ce.next.i!==qe.i&&we(Ce,Ce.next,be,qe))return!0;Ce=Ce.next}while(Ce!==be);return!1}(be,qe)&&($(be,qe)&&$(qe,be)&&function je(be,qe){var Ce=be,Qe=!1,rt=(be.x+qe.x)/2,_e=(be.y+qe.y)/2;do{Ce.y>_e!=Ce.next.y>_e&&Ce.next.y!==Ce.y&&rt<(Ce.next.x-Ce.x)*(_e-Ce.y)/(Ce.next.y-Ce.y)+Ce.x&&(Qe=!Qe),Ce=Ce.next}while(Ce!==be);return Qe}(be,qe)&&(X(be.prev,be,qe.prev)||X(be,qe.prev,qe))||Y(be,qe)&&X(be.prev,be,be.next)>0&&X(qe.prev,qe,qe.next)>0)}function X(be,qe,Ce){return(qe.y-be.y)*(Ce.x-qe.x)-(qe.x-be.x)*(Ce.y-qe.y)}function Y(be,qe){return be.x===qe.x&&be.y===qe.y}function we(be,qe,Ce,Qe){var rt=se(X(be,qe,Ce)),_e=se(X(be,qe,Qe)),St=se(X(Ce,Qe,be)),Je=se(X(Ce,Qe,qe));return!!(rt!==_e&&St!==Je||0===rt&&Z(be,Ce,qe)||0===_e&&Z(be,Qe,qe)||0===St&&Z(Ce,be,Qe)||0===Je&&Z(Ce,qe,Qe))}function Z(be,qe,Ce){return qe.x<=Math.max(be.x,Ce.x)&&qe.x>=Math.min(be.x,Ce.x)&&qe.y<=Math.max(be.y,Ce.y)&&qe.y>=Math.min(be.y,Ce.y)}function se(be){return be>0?1:be<0?-1:0}function $(be,qe){return X(be.prev,be,be.next)<0?X(be,qe,be.next)>=0&&X(be,be.prev,qe)>=0:X(be,qe,be.prev)<0||X(be,be.next,qe)<0}function Be(be,qe){var Ce=new kt(be.i,be.x,be.y),Qe=new kt(qe.i,qe.x,qe.y),rt=be.next,_e=qe.prev;return be.next=qe,qe.prev=be,Ce.next=rt,rt.prev=Ce,Qe.next=Ce,Ce.prev=Qe,_e.next=Qe,Qe.prev=_e,Qe}function He(be,qe,Ce,Qe){var rt=new kt(be,qe,Ce);return Qe?(rt.next=Qe.next,rt.prev=Qe,Qe.next.prev=rt,Qe.next=rt):(rt.prev=rt,rt.next=rt),rt}function oe(be){be.next.prev=be.prev,be.prev.next=be.next,be.prevZ&&(be.prevZ.nextZ=be.nextZ),be.nextZ&&(be.nextZ.prevZ=be.prevZ)}function kt(be,qe,Ce){this.i=be,this.x=qe,this.y=Ce,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function At(be,qe,Ce,Qe){for(var rt=0,_e=qe,St=Ce-Qe;_e<Ce;_e+=Qe)rt+=(be[St]-be[_e])*(be[_e+1]+be[St+1]),St=_e;return rt}Nt.exports=nt,Nt.exports.default=nt,nt.deviation=function(be,qe,Ce,Qe){var rt=qe&&qe.length,St=Math.abs(At(be,0,rt?qe[0]*Ce:be.length,Ce));if(rt)for(var Je=0,nn=qe.length;Je<nn;Je++)St-=Math.abs(At(be,qe[Je]*Ce,Je<nn-1?qe[Je+1]*Ce:be.length,Ce));var _n=0;for(Je=0;Je<Qe.length;Je+=3){var ci=Qe[Je]*Ce,$t=Qe[Je+1]*Ce,$n=Qe[Je+2]*Ce;_n+=Math.abs((be[ci]-be[$n])*(be[$t+1]-be[ci+1])-(be[ci]-be[$t])*(be[$n+1]-be[ci+1]))}return 0===St&&0===_n?0:Math.abs((_n-St)/St)},nt.flatten=function(be){for(var qe=be[0][0].length,Ce={vertices:[],holes:[],dimensions:qe},Qe=0,rt=0;rt<be.length;rt++){for(var _e=0;_e<be[rt].length;_e++)for(var St=0;St<qe;St++)Ce.vertices.push(be[rt][_e][St]);rt>0&&Ce.holes.push(Qe+=be[rt-1].length)}return Ce}},3457:Nt=>{"use strict";var nt="Function.prototype.bind called on incompatible ",Me=Array.prototype.slice,ue=Object.prototype.toString,Ee="[object Function]";Nt.exports=function(ze){var Re=this;if("function"!=typeof Re||ue.call(Re)!==Ee)throw new TypeError(nt+Re);for(var We,Ie=Me.call(arguments,1),ct=function(){if(this instanceof We){var yt=Re.apply(this,Ie.concat(Me.call(arguments)));return Object(yt)===yt?yt:this}return Re.apply(ze,Ie.concat(Me.call(arguments)))},ft=Math.max(0,Re.length-Ie.length),Vt=[],Ct=0;Ct<ft;Ct++)Vt.push("$"+Ct);if(We=Function("binder","return function ("+Vt.join(",")+"){ return binder.apply(this,arguments); }")(ct),Re.prototype){var st=function(){};st.prototype=Re.prototype,We.prototype=new st,st.prototype=null}return We}},4444:(Nt,nt,Me)=>{"use strict";var ue=Me(3457);Nt.exports=Function.prototype.bind||ue},9582:Nt=>{"use strict";var nt=function(){return"string"==typeof function(){}.name},Me=Object.getOwnPropertyDescriptor;if(Me)try{Me([],"length")}catch{Me=null}nt.functionsHaveConfigurableNames=function(){if(!nt()||!Me)return!1;var Ne=Me(function(){},"name");return!!Ne&&!!Ne.configurable};var ue=Function.prototype.bind;nt.boundFunctionsHaveNames=function(){return nt()&&"function"==typeof ue&&""!==function(){}.bind().name},Nt.exports=nt},5013:(Nt,nt,Me)=>{var ue=Me(6952),Ee=function(Ie){this.precision=Ie&&Ie.precision?Ie.precision:17,this.direction=!(!Ie||!Ie.direction)&&Ie.direction,this.pseudoNode=!(!Ie||!Ie.pseudoNode)&&Ie.pseudoNode,this.objectComparator=Ie&&Ie.objectComparator?Ie.objectComparator:Re};function Ne(Ie){return Ie.coordinates.map(function(We){return{type:Ie.type.replace("Multi",""),coordinates:We}})}function ze(Ie,We){return Ie.hasOwnProperty("coordinates")?Ie.coordinates.length===We.coordinates.length:Ie.length===We.length}function Re(Ie,We){return ue(Ie,We,{strict:!0})}Ee.prototype.compare=function(Ie,We){if(Ie.type!==We.type||!ze(Ie,We))return!1;switch(Ie.type){case"Point":return this.compareCoord(Ie.coordinates,We.coordinates);case"LineString":return this.compareLine(Ie.coordinates,We.coordinates,0,!1);case"Polygon":return this.comparePolygon(Ie,We);case"Feature":return this.compareFeature(Ie,We);default:if(0===Ie.type.indexOf("Multi")){var ct=this,ft=Ne(Ie),Vt=Ne(We);return ft.every(function(Ct){return this.some(function(st){return ct.compare(Ct,st)})},Vt)}}return!1},Ee.prototype.compareCoord=function(Ie,We){if(Ie.length!==We.length)return!1;for(var ct=0;ct<Ie.length;ct++)if(Ie[ct].toFixed(this.precision)!==We[ct].toFixed(this.precision))return!1;return!0},Ee.prototype.compareLine=function(Ie,We,ct,ft){if(!ze(Ie,We))return!1;var Vt=this.pseudoNode?Ie:this.removePseudo(Ie),Ct=this.pseudoNode?We:this.removePseudo(We);if(!ft||this.compareCoord(Vt[0],Ct[0])||(Ct=this.fixStartIndex(Ct,Vt))){var st=this.compareCoord(Vt[ct],Ct[ct]);return this.direction||st?this.comparePath(Vt,Ct):!!this.compareCoord(Vt[ct],Ct[Ct.length-(1+ct)])&&this.comparePath(Vt.slice().reverse(),Ct)}},Ee.prototype.fixStartIndex=function(Ie,We){for(var ct,ft=-1,Vt=0;Vt<Ie.length;Vt++)if(this.compareCoord(Ie[Vt],We[0])){ft=Vt;break}return ft>=0&&(ct=[].concat(Ie.slice(ft,Ie.length),Ie.slice(1,ft+1))),ct},Ee.prototype.comparePath=function(Ie,We){var ct=this;return Ie.every(function(ft,Vt){return ct.compareCoord(ft,this[Vt])},We)},Ee.prototype.comparePolygon=function(Ie,We){if(this.compareLine(Ie.coordinates[0],We.coordinates[0],1,!0)){var ct=Ie.coordinates.slice(1,Ie.coordinates.length),ft=We.coordinates.slice(1,We.coordinates.length),Vt=this;return ct.every(function(Ct){return this.some(function(st){return Vt.compareLine(Ct,st,1,!0)})},ft)}return!1},Ee.prototype.compareFeature=function(Ie,We){return!(Ie.id!==We.id||!this.objectComparator(Ie.properties,We.properties)||!this.compareBBox(Ie,We))&&this.compare(Ie.geometry,We.geometry)},Ee.prototype.compareBBox=function(Ie,We){return!!(!Ie.bbox&&!We.bbox||Ie.bbox&&We.bbox&&this.compareCoord(Ie.bbox,We.bbox))},Ee.prototype.removePseudo=function(Ie){return Ie},Nt.exports=Ee},5406:(Nt,nt,Me)=>{var ue=Me(2402),Ee=Me(8275),Ne=Me(3269),ze=Me(1503).Z,Re=Ne.featureEach,ct=Ee.featureCollection;function ft(Vt){var Ct=new ue(Vt);return Ct.insert=function(st){if("Feature"!==st.type)throw new Error("invalid feature");return st.bbox=st.bbox?st.bbox:ze(st),ue.prototype.insert.call(this,st)},Ct.load=function(st){var yt=[];return Array.isArray(st)?st.forEach(function(qt){if("Feature"!==qt.type)throw new Error("invalid features");qt.bbox=qt.bbox?qt.bbox:ze(qt),yt.push(qt)}):Re(st,function(qt){if("Feature"!==qt.type)throw new Error("invalid features");qt.bbox=qt.bbox?qt.bbox:ze(qt),yt.push(qt)}),ue.prototype.load.call(this,yt)},Ct.remove=function(st,yt){if("Feature"!==st.type)throw new Error("invalid feature");return st.bbox=st.bbox?st.bbox:ze(st),ue.prototype.remove.call(this,st,yt)},Ct.clear=function(){return ue.prototype.clear.call(this)},Ct.search=function(st){var yt=ue.prototype.search.call(this,this.toBBox(st));return ct(yt)},Ct.collides=function(st){return ue.prototype.collides.call(this,this.toBBox(st))},Ct.all=function(){var st=ue.prototype.all.call(this);return ct(st)},Ct.toJSON=function(){return ue.prototype.toJSON.call(this)},Ct.fromJSON=function(st){return ue.prototype.fromJSON.call(this,st)},Ct.toBBox=function(st){var yt;if(st.bbox)yt=st.bbox;else if(Array.isArray(st)&&4===st.length)yt=st;else if(Array.isArray(st)&&6===st.length)yt=[st[0],st[1],st[3],st[4]];else if("Feature"===st.type)yt=ze(st);else{if("FeatureCollection"!==st.type)throw new Error("invalid geojson");yt=ze(st)}return{minX:yt[0],minY:yt[1],maxX:yt[2],maxY:yt[3]}},Ct}Nt.exports=ft,Nt.exports.default=ft},5203:(Nt,nt,Me)=>{"use strict";var ue,Ee=SyntaxError,Ne=Function,ze=TypeError,Re=function(He){try{return Ne('"use strict"; return ('+He+").constructor;")()}catch{}},Ie=Object.getOwnPropertyDescriptor;if(Ie)try{Ie({},"")}catch{Ie=null}var We=function(){throw new ze},ct=Ie?function(){try{return We}catch{try{return Ie(arguments,"callee").get}catch{return We}}}():We,ft=Me(2969)(),Vt=Object.getPrototypeOf||function(He){return He.__proto__},Ct={},st=typeof Uint8Array>"u"?ue:Vt(Uint8Array),yt={"%AggregateError%":typeof AggregateError>"u"?ue:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ue:ArrayBuffer,"%ArrayIteratorPrototype%":ft?Vt([][Symbol.iterator]()):ue,"%AsyncFromSyncIteratorPrototype%":ue,"%AsyncFunction%":Ct,"%AsyncGenerator%":Ct,"%AsyncGeneratorFunction%":Ct,"%AsyncIteratorPrototype%":Ct,"%Atomics%":typeof Atomics>"u"?ue:Atomics,"%BigInt%":typeof BigInt>"u"?ue:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ue:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?ue:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ue:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ue:FinalizationRegistry,"%Function%":Ne,"%GeneratorFunction%":Ct,"%Int8Array%":typeof Int8Array>"u"?ue:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ue:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ue:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ft?Vt(Vt([][Symbol.iterator]())):ue,"%JSON%":"object"==typeof JSON?JSON:ue,"%Map%":typeof Map>"u"?ue:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ft?ue:Vt((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ue:Promise,"%Proxy%":typeof Proxy>"u"?ue:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?ue:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ue:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ft?ue:Vt((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ue:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ft?Vt(""[Symbol.iterator]()):ue,"%Symbol%":ft?Symbol:ue,"%SyntaxError%":Ee,"%ThrowTypeError%":ct,"%TypedArray%":st,"%TypeError%":ze,"%Uint8Array%":typeof Uint8Array>"u"?ue:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ue:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ue:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ue:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?ue:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ue:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ue:WeakSet},qt=function He(oe){var kt;if("%AsyncFunction%"===oe)kt=Re("async function () {}");else if("%GeneratorFunction%"===oe)kt=Re("function* () {}");else if("%AsyncGeneratorFunction%"===oe)kt=Re("async function* () {}");else if("%AsyncGenerator%"===oe){var At=He("%AsyncGeneratorFunction%");At&&(kt=At.prototype)}else if("%AsyncIteratorPrototype%"===oe){var be=He("%AsyncGenerator%");be&&(kt=Vt(be.prototype))}return yt[oe]=kt,kt},Ve={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Xe=Me(4444),j=Me(3164),X=Xe.call(Function.call,Array.prototype.concat),Y=Xe.call(Function.apply,Array.prototype.splice),we=Xe.call(Function.call,String.prototype.replace),Z=Xe.call(Function.call,String.prototype.slice),se=Xe.call(Function.call,RegExp.prototype.exec),ce=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$=/\\(\\)?/g,je=function(oe){var kt=Z(oe,0,1),At=Z(oe,-1);if("%"===kt&&"%"!==At)throw new Ee("invalid intrinsic syntax, expected closing `%`");if("%"===At&&"%"!==kt)throw new Ee("invalid intrinsic syntax, expected opening `%`");var be=[];return we(oe,ce,function(qe,Ce,Qe,rt){be[be.length]=Qe?we(rt,$,"$1"):Ce||qe}),be},Be=function(oe,kt){var be,At=oe;if(j(Ve,At)&&(At="%"+(be=Ve[At])[0]+"%"),j(yt,At)){var qe=yt[At];if(qe===Ct&&(qe=qt(At)),typeof qe>"u"&&!kt)throw new ze("intrinsic "+oe+" exists, but is not available. Please file an issue!");return{alias:be,name:At,value:qe}}throw new Ee("intrinsic "+oe+" does not exist!")};Nt.exports=function(oe,kt){if("string"!=typeof oe||0===oe.length)throw new ze("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof kt)throw new ze('"allowMissing" argument must be a boolean');if(null===se(/^%?[^%]*%?$/g,oe))throw new Ee("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var At=je(oe),be=At.length>0?At[0]:"",qe=Be("%"+be+"%",kt),Ce=qe.name,Qe=qe.value,rt=!1,_e=qe.alias;_e&&(be=_e[0],Y(At,X([0,1],_e)));for(var St=1,Je=!0;St<At.length;St+=1){var nn=At[St],vt=Z(nn,0,1),xn=Z(nn,-1);if(('"'===vt||"'"===vt||"`"===vt||'"'===xn||"'"===xn||"`"===xn)&&vt!==xn)throw new Ee("property names with quotes must have matching quotes");if(("constructor"===nn||!Je)&&(rt=!0),j(yt,Ce="%"+(be+="."+nn)+"%"))Qe=yt[Ce];else if(null!=Qe){if(!(nn in Qe)){if(!kt)throw new ze("base intrinsic for "+oe+" exists, but the property is not available.");return}if(Ie&&St+1>=At.length){var _n=Ie(Qe,nn);Qe=(Je=!!_n)&&"get"in _n&&!("originalValue"in _n.get)?_n.get:Qe[nn]}else Je=j(Qe,nn),Qe=Qe[nn];Je&&!rt&&(yt[Ce]=Qe)}}return Qe}},7027:(Nt,nt,Me)=>{"use strict";var Ee=Me(5203)("%Object.defineProperty%",!0),Ne=function(){if(Ee)try{return Ee({},"a",{value:1}),!0}catch{return!1}return!1};Ne.hasArrayLengthDefineBug=function(){if(!Ne())return null;try{return 1!==Ee([],"length",{value:1}).length}catch{return!0}},Nt.exports=Ne},2969:(Nt,nt,Me)=>{"use strict";var ue=typeof Symbol<"u"&&Symbol,Ee=Me(1983);Nt.exports=function(){return"function"==typeof ue&&"function"==typeof Symbol&&"symbol"==typeof ue("foo")&&"symbol"==typeof Symbol("bar")&&Ee()}},1983:Nt=>{"use strict";Nt.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var Me={},ue=Symbol("test"),Ee=Object(ue);if("string"==typeof ue||"[object Symbol]"!==Object.prototype.toString.call(ue)||"[object Symbol]"!==Object.prototype.toString.call(Ee))return!1;for(ue in Me[ue]=42,Me)return!1;if("function"==typeof Object.keys&&0!==Object.keys(Me).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(Me).length)return!1;var ze=Object.getOwnPropertySymbols(Me);if(1!==ze.length||ze[0]!==ue||!Object.prototype.propertyIsEnumerable.call(Me,ue))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var Re=Object.getOwnPropertyDescriptor(Me,ue);if(42!==Re.value||!0!==Re.enumerable)return!1}return!0}},6259:(Nt,nt,Me)=>{"use strict";var ue=Me(1983);Nt.exports=function(){return ue()&&!!Symbol.toStringTag}},3164:(Nt,nt,Me)=>{"use strict";var ue=Me(4444);Nt.exports=ue.call(Function.call,Object.prototype.hasOwnProperty)},4159:function(Nt){Nt.exports=function(){"use strict";var nt=function(E,S){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,L){D.__proto__=L}||function(D,L){for(var O in L)Object.prototype.hasOwnProperty.call(L,O)&&(D[O]=L[O])})(E,S)};function Me(E,S){if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function D(){this.constructor=E}nt(E,S),E.prototype=null===S?Object.create(S):(D.prototype=S.prototype,new D)}var ue=function(){return ue=Object.assign||function(S){for(var D,L=1,O=arguments.length;L<O;L++)for(var G in D=arguments[L])Object.prototype.hasOwnProperty.call(D,G)&&(S[G]=D[G]);return S},ue.apply(this,arguments)};function Ee(E,S,D,L){return new(D||(D=Promise))(function(G,ie){function ye(lt){try{Ze(L.next(lt))}catch(dt){ie(dt)}}function xe(lt){try{Ze(L.throw(lt))}catch(dt){ie(dt)}}function Ze(lt){lt.done?G(lt.value):function O(G){return G instanceof D?G:new D(function(ie){ie(G)})}(lt.value).then(ye,xe)}Ze((L=L.apply(E,S||[])).next())})}function Ne(E,S){var L,O,G,ie,D={label:0,sent:function(){if(1&G[0])throw G[1];return G[1]},trys:[],ops:[]};return ie={next:ye(0),throw:ye(1),return:ye(2)},"function"==typeof Symbol&&(ie[Symbol.iterator]=function(){return this}),ie;function ye(Ze){return function(lt){return function xe(Ze){if(L)throw new TypeError("Generator is already executing.");for(;D;)try{if(L=1,O&&(G=2&Ze[0]?O.return:Ze[0]?O.throw||((G=O.return)&&G.call(O),0):O.next)&&!(G=G.call(O,Ze[1])).done)return G;switch(O=0,G&&(Ze=[2&Ze[0],G.value]),Ze[0]){case 0:case 1:G=Ze;break;case 4:return D.label++,{value:Ze[1],done:!1};case 5:D.label++,O=Ze[1],Ze=[0];continue;case 7:Ze=D.ops.pop(),D.trys.pop();continue;default:if(!(G=(G=D.trys).length>0&&G[G.length-1])&&(6===Ze[0]||2===Ze[0])){D=0;continue}if(3===Ze[0]&&(!G||Ze[1]>G[0]&&Ze[1]<G[3])){D.label=Ze[1];break}if(6===Ze[0]&&D.label<G[1]){D.label=G[1],G=Ze;break}if(G&&D.label<G[2]){D.label=G[2],D.ops.push(Ze);break}G[2]&&D.ops.pop(),D.trys.pop();continue}Ze=S.call(E,D)}catch(lt){Ze=[6,lt],O=0}finally{L=G=0}if(5&Ze[0])throw Ze[1];return{value:Ze[0]?Ze[1]:void 0,done:!0}}([Ze,lt])}}}function ze(E,S,D){if(D||2===arguments.length)for(var G,L=0,O=S.length;L<O;L++)(G||!(L in S))&&(G||(G=Array.prototype.slice.call(S,0,L)),G[L]=S[L]);return E.concat(G||S)}for(var Re=function(){function E(S,D,L,O){this.left=S,this.top=D,this.width=L,this.height=O}return E.prototype.add=function(S,D,L,O){return new E(this.left+S,this.top+D,this.width+L,this.height+O)},E.fromClientRect=function(S,D){return new E(D.left+S.windowBounds.left,D.top+S.windowBounds.top,D.width,D.height)},E.fromDOMRectList=function(S,D){var L=Array.from(D).find(function(O){return 0!==O.width});return L?new E(L.left+S.windowBounds.left,L.top+S.windowBounds.top,L.width,L.height):E.EMPTY},E.EMPTY=new E(0,0,0,0),E}(),Ie=function(E,S){return Re.fromClientRect(E,S.getBoundingClientRect())},ct=function(E){for(var S=[],D=0,L=E.length;D<L;){var O=E.charCodeAt(D++);if(O>=55296&&O<=56319&&D<L){var G=E.charCodeAt(D++);56320==(64512&G)?S.push(((1023&O)<<10)+(1023&G)+65536):(S.push(O),D--)}else S.push(O)}return S},ft=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];if(String.fromCodePoint)return String.fromCodePoint.apply(String,E);var D=E.length;if(!D)return"";for(var L=[],O=-1,G="";++O<D;){var ie=E[O];ie<=65535?L.push(ie):L.push(55296+((ie-=65536)>>10),ie%1024+56320),(O+1===D||L.length>16384)&&(G+=String.fromCharCode.apply(String,L),L.length=0)}return G},Vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ct=typeof Uint8Array>"u"?[]:new Uint8Array(256),st=0;st<Vt.length;st++)Ct[Vt.charCodeAt(st)]=st;for(var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qt=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ve=0;Ve<yt.length;Ve++)qt[yt.charCodeAt(Ve)]=Ve;for(var Qe=function(E,S,D){return E.slice?E.slice(S,D):new Uint16Array(Array.prototype.slice.call(E,S,D))},St=function(){function E(S,D,L,O,G,ie){this.initialValue=S,this.errorValue=D,this.highStart=L,this.highValueIndex=O,this.index=G,this.data=ie}return E.prototype.get=function(S){var D;if(S>=0){if(S<55296||S>56319&&S<=65535)return this.data[D=((D=this.index[S>>5])<<2)+(31&S)];if(S<=65535)return this.data[D=((D=this.index[2048+(S-55296>>5)])<<2)+(31&S)];if(S<this.highStart)return D=this.index[D=2080+(S>>11)],this.data[D=((D=this.index[D+=S>>5&63])<<2)+(31&S)];if(S<=1114111)return this.data[this.highValueIndex]}return this.errorValue},E}(),Je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nn=typeof Uint8Array>"u"?[]:new Uint8Array(256),vt=0;vt<Je.length;vt++)nn[Je.charCodeAt(vt)]=vt;var D,L,O,ie,ye,vi=10,te=13,Te=15,mt=17,Ut=18,Kt=19,Mt=20,bi=21,ki=22,Ii=24,vr=25,lr=26,_r=27,Vs=28,Go=30,wa=32,ys=33,j1=34,Qo=35,H2=37,lc=38,Bi=39,Yc=40,ul=42,Pm=[9001,65288],Tr="\xd7",ru=(D=function(E){var L,G,ie,ye,xe,S=.75*E.length,D=E.length,O=0;"="===E[E.length-1]&&(S--,"="===E[E.length-2]&&S--);var Ze=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(S):new Array(S),lt=Array.isArray(Ze)?Ze:new Uint8Array(Ze);for(L=0;L<D;L+=4)G=qt[E.charCodeAt(L)],ie=qt[E.charCodeAt(L+1)],ye=qt[E.charCodeAt(L+2)],xe=qt[E.charCodeAt(L+3)],lt[O++]=G<<2|ie>>4,lt[O++]=(15&ie)<<4|ye>>2,lt[O++]=(3&ye)<<6|63&xe;return Ze}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),L=Array.isArray(D)?function(E){for(var S=E.length,D=[],L=0;L<S;L+=4)D.push(E[L+3]<<24|E[L+2]<<16|E[L+1]<<8|E[L]);return D}(D):new Uint32Array(D),O=Array.isArray(D)?function(E){for(var S=E.length,D=[],L=0;L<S;L+=2)D.push(E[L+1]<<8|E[L]);return D}(D):new Uint16Array(D),ie=Qe(O,12,L[4]/2),ye=2===L[5]?Qe(O,(24+L[4])/2):function(E,S,D){return E.slice?E.slice(S,D):new Uint32Array(Array.prototype.slice.call(E,S,D))}(L,Math.ceil((24+L[4])/4)),new St(L[0],L[1],L[2],L[3],ie,ye)),Ra=[Go,36],$l=[1,2,3,5],xi=[vi,8],t1=[_r,lr],Fa=$l.concat(xi),A2=[lc,Bi,Yc,j1,Qo],_1=[Te,te],y1=function(E,S,D,L){var O=L[D];if(Array.isArray(E)?-1!==E.indexOf(O):E===O)for(var G=D;G<=L.length;){if((ie=L[++G])===S)return!0;if(ie!==vi)break}if(O===vi)for(G=D;G>0;){var ye=L[--G];if(Array.isArray(E)?-1!==E.indexOf(ye):E===ye)for(var xe=D;xe<=L.length;){var ie;if((ie=L[++xe])===S)return!0;if(ie!==vi)break}if(ye!==vi)break}return!1},r0=function(E,S){for(var D=E;D>=0;){var L=S[D];if(L!==vi)return L;D--}return 0},w1=function(E,S,D,L,O){if(0===D[L])return Tr;var G=L-1;if(Array.isArray(O)&&!0===O[G])return Tr;var ie=G-1,ye=G+1,xe=S[G],Ze=ie>=0?S[ie]:0,lt=S[ye];if(2===xe&&3===lt)return Tr;if(-1!==$l.indexOf(xe))return"!";if(-1!==$l.indexOf(lt)||-1!==xi.indexOf(lt))return Tr;if(8===r0(G,S))return"\xf7";if(11===ru.get(E[G])||(xe===wa||xe===ys)&&11===ru.get(E[ye])||7===xe||7===lt||9===xe||-1===[vi,te,Te].indexOf(xe)&&9===lt||-1!==[mt,Ut,Kt,Ii,Vs].indexOf(lt)||r0(G,S)===ki||y1(23,ki,G,S)||y1([mt,Ut],bi,G,S)||y1(12,12,G,S))return Tr;if(xe===vi)return"\xf7";if(23===xe||23===lt)return Tr;if(16===lt||16===xe)return"\xf7";if(-1!==[te,Te,bi].indexOf(lt)||14===xe||36===Ze&&-1!==_1.indexOf(xe)||xe===Vs&&36===lt||lt===Mt||-1!==Ra.indexOf(lt)&&xe===vr||-1!==Ra.indexOf(xe)&&lt===vr||xe===_r&&-1!==[H2,wa,ys].indexOf(lt)||-1!==[H2,wa,ys].indexOf(xe)&&lt===lr||-1!==Ra.indexOf(xe)&&-1!==t1.indexOf(lt)||-1!==t1.indexOf(xe)&&-1!==Ra.indexOf(lt)||-1!==[_r,lr].indexOf(xe)&&(lt===vr||-1!==[ki,Te].indexOf(lt)&&S[ye+1]===vr)||-1!==[ki,Te].indexOf(xe)&&lt===vr||xe===vr&&-1!==[vr,Vs,Ii].indexOf(lt))return Tr;if(-1!==[vr,Vs,Ii,mt,Ut].indexOf(lt))for(var dt=G;dt>=0;){if((Ft=S[dt])===vr)return Tr;if(-1===[Vs,Ii].indexOf(Ft))break;dt--}if(-1!==[_r,lr].indexOf(lt))for(dt=-1!==[mt,Ut].indexOf(xe)?ie:G;dt>=0;){var Ft;if((Ft=S[dt])===vr)return Tr;if(-1===[Vs,Ii].indexOf(Ft))break;dt--}if(lc===xe&&-1!==[lc,Bi,j1,Qo].indexOf(lt)||-1!==[Bi,j1].indexOf(xe)&&-1!==[Bi,Yc].indexOf(lt)||-1!==[Yc,Qo].indexOf(xe)&&lt===Yc||-1!==A2.indexOf(xe)&&-1!==[Mt,lr].indexOf(lt)||-1!==A2.indexOf(lt)&&xe===_r||-1!==Ra.indexOf(xe)&&-1!==Ra.indexOf(lt)||xe===Ii&&-1!==Ra.indexOf(lt)||-1!==Ra.concat(vr).indexOf(xe)&&lt===ki&&-1===Pm.indexOf(E[ye])||-1!==Ra.concat(vr).indexOf(lt)&&xe===Ut)return Tr;if(41===xe&&41===lt){for(var Gn=D[G],Tn=1;Gn>0&&41===S[--Gn];)Tn++;if(Tn%2!=0)return Tr}return xe===wa&&lt===ys?Tr:"\xf7"},R6=function(E,S){S||(S={lineBreak:"normal",wordBreak:"normal"});var D=function(E,S){void 0===S&&(S="strict");var D=[],L=[],O=[];return E.forEach(function(G,ie){var ye=ru.get(G);if(ye>50?(O.push(!0),ye-=50):O.push(!1),-1!==["normal","auto","loose"].indexOf(S)&&-1!==[8208,8211,12316,12448].indexOf(G))return L.push(ie),D.push(16);if(4===ye||11===ye){if(0===ie)return L.push(ie),D.push(Go);var xe=D[ie-1];return-1===Fa.indexOf(xe)?(L.push(L[ie-1]),D.push(xe)):(L.push(ie),D.push(Go))}return L.push(ie),31===ye?D.push("strict"===S?bi:H2):ye===ul||29===ye?D.push(Go):43===ye?D.push(G>=131072&&G<=196605||G>=196608&&G<=262141?H2:Go):void D.push(ye)}),[L,D,O]}(E,S.lineBreak),L=D[0],O=D[1],G=D[2];return("break-all"===S.wordBreak||"break-word"===S.wordBreak)&&(O=O.map(function(ye){return-1!==[vr,Go,ul].indexOf(ye)?H2:ye})),[L,O,"keep-all"===S.wordBreak?G.map(function(ye,xe){return ye&&E[xe]>=19968&&E[xe]<=40959}):void 0]},vo=function(){function E(S,D,L,O){this.codePoints=S,this.required="!"===D,this.start=L,this.end=O}return E.prototype.slice=function(){return ft.apply(void 0,this.codePoints.slice(this.start,this.end))},E}(),Ks=function(E){return E>=48&&E<=57},zn=function(E){return Ks(E)||E>=65&&E<=70||E>=97&&E<=102},Qf=function(E){return 10===E||9===E||32===E},go=function(E){return function(E){return function(E){return E>=97&&E<=122}(E)||function(E){return E>=65&&E<=90}(E)}(E)||function(E){return E>=128}(E)||95===E},ka=function(E){return go(E)||Ks(E)||45===E},q1=function(E){return E>=0&&E<=8||11===E||E>=14&&E<=31||127===E},_2=function(E,S){return 92===E&&10!==S},qo=function(E,S,D){return 45===E?go(S)||_2(S,D):!!go(E)||!(92!==E||!_2(E,S))},ws=function(E,S,D){return 43===E||45===E?!!Ks(S)||46===S&&Ks(D):Ks(46===E?S:E)},Ko=function(E){var S=0,D=1;(43===E[S]||45===E[S])&&(45===E[S]&&(D=-1),S++);for(var L=[];Ks(E[S]);)L.push(E[S++]);var O=L.length?parseInt(ft.apply(void 0,L),10):0;46===E[S]&&S++;for(var G=[];Ks(E[S]);)G.push(E[S++]);var ie=G.length,ye=ie?parseInt(ft.apply(void 0,G),10):0;(69===E[S]||101===E[S])&&S++;var xe=1;(43===E[S]||45===E[S])&&(45===E[S]&&(xe=-1),S++);for(var Ze=[];Ks(E[S]);)Ze.push(E[S++]);var lt=Ze.length?parseInt(ft.apply(void 0,Ze),10):0;return D*(O+ye*Math.pow(10,-ie))*Math.pow(10,xe*lt)},li={type:2},ou={type:3},Pr={type:4},s1={type:13},n2={type:8},Yl={type:21},c0={type:9},ml={type:10},l0={type:11},Lr={type:12},Rn={type:14},Xs={type:23},u0={type:1},dc={type:25},oi={type:24},hr={type:26},_4={type:27},ht={type:28},b1={type:29},nr={type:31},ta={type:32},K1=function(){function E(){this._value=[]}return E.prototype.write=function(S){this._value=this._value.concat(ct(S))},E.prototype.read=function(){for(var S=[],D=this.consumeToken();D!==ta;)S.push(D),D=this.consumeToken();return S},E.prototype.consumeToken=function(){var S=this.consumeCodePoint();switch(S){case 34:return this.consumeStringToken(34);case 35:var D=this.peekCodePoint(0),L=this.peekCodePoint(1),O=this.peekCodePoint(2);if(ka(D)||_2(L,O)){var G=qo(D,L,O)?2:1;return{type:5,value:this.consumeName(),flags:G}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),s1;break;case 39:return this.consumeStringToken(39);case 40:return li;case 41:return ou;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Rn;break;case 43:if(ws(S,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(S),this.consumeNumericToken();break;case 44:return Pr;case 45:var ye=S,xe=this.peekCodePoint(0),Ze=this.peekCodePoint(1);if(ws(ye,xe,Ze))return this.reconsumeCodePoint(S),this.consumeNumericToken();if(qo(ye,xe,Ze))return this.reconsumeCodePoint(S),this.consumeIdentLikeToken();if(45===xe&&62===Ze)return this.consumeCodePoint(),this.consumeCodePoint(),oi;break;case 46:if(ws(S,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(S),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var lt=this.consumeCodePoint();if(42===lt&&47===(lt=this.consumeCodePoint()))return this.consumeToken();if(-1===lt)return this.consumeToken()}break;case 58:return hr;case 59:return _4;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),dc;break;case 64:var dt=this.peekCodePoint(0),Ft=this.peekCodePoint(1),Gn=this.peekCodePoint(2);if(qo(dt,Ft,Gn))return{type:7,value:this.consumeName()};break;case 91:return ht;case 92:if(_2(S,this.peekCodePoint(0)))return this.reconsumeCodePoint(S),this.consumeIdentLikeToken();break;case 93:return b1;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),n2;break;case 123:return l0;case 125:return Lr;case 117:case 85:var Tn=this.peekCodePoint(0),Qn=this.peekCodePoint(1);return 43===Tn&&(zn(Qn)||63===Qn)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(S),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),c0;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),Yl;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ml;break;case-1:return ta}return Qf(S)?(this.consumeWhiteSpace(),nr):Ks(S)?(this.reconsumeCodePoint(S),this.consumeNumericToken()):go(S)?(this.reconsumeCodePoint(S),this.consumeIdentLikeToken()):{type:6,value:ft(S)}},E.prototype.consumeCodePoint=function(){var S=this._value.shift();return typeof S>"u"?-1:S},E.prototype.reconsumeCodePoint=function(S){this._value.unshift(S)},E.prototype.peekCodePoint=function(S){return S>=this._value.length?-1:this._value[S]},E.prototype.consumeUnicodeRangeToken=function(){for(var S=[],D=this.consumeCodePoint();zn(D)&&S.length<6;)S.push(D),D=this.consumeCodePoint();for(var L=!1;63===D&&S.length<6;)S.push(D),D=this.consumeCodePoint(),L=!0;if(L)return{type:30,start:parseInt(ft.apply(void 0,S.map(function(xe){return 63===xe?48:xe})),16),end:parseInt(ft.apply(void 0,S.map(function(xe){return 63===xe?70:xe})),16)};var ie=parseInt(ft.apply(void 0,S),16);if(45===this.peekCodePoint(0)&&zn(this.peekCodePoint(1))){this.consumeCodePoint(),D=this.consumeCodePoint();for(var ye=[];zn(D)&&ye.length<6;)ye.push(D),D=this.consumeCodePoint();return{type:30,start:ie,end:parseInt(ft.apply(void 0,ye),16)}}return{type:30,start:ie,end:ie}},E.prototype.consumeIdentLikeToken=function(){var S=this.consumeName();return"url"===S.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:S}):{type:20,value:S}},E.prototype.consumeUrlToken=function(){var S=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:22,value:""};var D=this.peekCodePoint(0);if(39===D||34===D){var L=this.consumeStringToken(this.consumeCodePoint());return 0===L.type&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:L.value}):(this.consumeBadUrlRemnants(),Xs)}for(;;){var O=this.consumeCodePoint();if(-1===O||41===O)return{type:22,value:ft.apply(void 0,S)};if(Qf(O))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:ft.apply(void 0,S)}):(this.consumeBadUrlRemnants(),Xs);if(34===O||39===O||40===O||q1(O))return this.consumeBadUrlRemnants(),Xs;if(92===O){if(!_2(O,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),Xs;S.push(this.consumeEscapedCodePoint())}else S.push(O)}},E.prototype.consumeWhiteSpace=function(){for(;Qf(this.peekCodePoint(0));)this.consumeCodePoint()},E.prototype.consumeBadUrlRemnants=function(){for(;;){var S=this.consumeCodePoint();if(41===S||-1===S)return;_2(S,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},E.prototype.consumeStringSlice=function(S){for(var L="";S>0;){var O=Math.min(5e4,S);L+=ft.apply(void 0,this._value.splice(0,O)),S-=O}return this._value.shift(),L},E.prototype.consumeStringToken=function(S){for(var D="",L=0;;){var O=this._value[L];if(-1===O||void 0===O||O===S)return{type:0,value:D+=this.consumeStringSlice(L)};if(10===O)return this._value.splice(0,L),u0;if(92===O){var G=this._value[L+1];-1!==G&&void 0!==G&&(10===G?(D+=this.consumeStringSlice(L),L=-1,this._value.shift()):_2(O,G)&&(D+=this.consumeStringSlice(L),D+=ft(this.consumeEscapedCodePoint()),L=-1))}L++}},E.prototype.consumeNumber=function(){var S=[],D=4,L=this.peekCodePoint(0);for((43===L||45===L)&&S.push(this.consumeCodePoint());Ks(this.peekCodePoint(0));)S.push(this.consumeCodePoint());L=this.peekCodePoint(0);var O=this.peekCodePoint(1);if(46===L&&Ks(O))for(S.push(this.consumeCodePoint(),this.consumeCodePoint()),D=8;Ks(this.peekCodePoint(0));)S.push(this.consumeCodePoint());L=this.peekCodePoint(0),O=this.peekCodePoint(1);var G=this.peekCodePoint(2);if((69===L||101===L)&&((43===O||45===O)&&Ks(G)||Ks(O)))for(S.push(this.consumeCodePoint(),this.consumeCodePoint()),D=8;Ks(this.peekCodePoint(0));)S.push(this.consumeCodePoint());return[Ko(S),D]},E.prototype.consumeNumericToken=function(){var S=this.consumeNumber(),D=S[0],L=S[1],O=this.peekCodePoint(0),G=this.peekCodePoint(1),ie=this.peekCodePoint(2);return qo(O,G,ie)?{type:15,number:D,flags:L,unit:this.consumeName()}:37===O?(this.consumeCodePoint(),{type:16,number:D,flags:L}):{type:17,number:D,flags:L}},E.prototype.consumeEscapedCodePoint=function(){var S=this.consumeCodePoint();if(zn(S)){for(var D=ft(S);zn(this.peekCodePoint(0))&&D.length<6;)D+=ft(this.consumeCodePoint());Qf(this.peekCodePoint(0))&&this.consumeCodePoint();var L=parseInt(D,16);return 0===L||function(E){return E>=55296&&E<=57343}(L)||L>1114111?65533:L}return-1===S?65533:S},E.prototype.consumeName=function(){for(var S="";;){var D=this.consumeCodePoint();if(ka(D))S+=ft(D);else{if(!_2(D,this.peekCodePoint(0)))return this.reconsumeCodePoint(D),S;S+=ft(this.consumeEscapedCodePoint())}}},E}(),r2=function(){function E(S){this._tokens=S}return E.create=function(S){var D=new K1;return D.write(S),new E(D.read())},E.parseValue=function(S){return E.create(S).parseComponentValue()},E.parseValues=function(S){return E.create(S).parseComponentValues()},E.prototype.parseComponentValue=function(){for(var S=this.consumeToken();31===S.type;)S=this.consumeToken();if(32===S.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(S);var D=this.consumeComponentValue();do{S=this.consumeToken()}while(31===S.type);if(32===S.type)return D;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},E.prototype.parseComponentValues=function(){for(var S=[];;){var D=this.consumeComponentValue();if(32===D.type)return S;S.push(D),S.push()}},E.prototype.consumeComponentValue=function(){var S=this.consumeToken();switch(S.type){case 11:case 28:case 2:return this.consumeSimpleBlock(S.type);case 19:return this.consumeFunction(S)}return S},E.prototype.consumeSimpleBlock=function(S){for(var D={type:S,values:[]},L=this.consumeToken();;){if(32===L.type||Bc(L,S))return D;this.reconsumeToken(L),D.values.push(this.consumeComponentValue()),L=this.consumeToken()}},E.prototype.consumeFunction=function(S){for(var D={name:S.value,values:[],type:18};;){var L=this.consumeToken();if(32===L.type||3===L.type)return D;this.reconsumeToken(L),D.values.push(this.consumeComponentValue())}},E.prototype.consumeToken=function(){var S=this._tokens.shift();return typeof S>"u"?ta:S},E.prototype.reconsumeToken=function(S){this._tokens.unshift(S)},E}(),Li=function(E){return 15===E.type},Gs=function(E){return 17===E.type},sn=function(E){return 20===E.type},Ri=function(E){return 0===E.type},gr=function(E,S){return sn(E)&&E.value===S},Ds=function(E){return 31!==E.type},O2=function(E){return 31!==E.type&&4!==E.type},ao=function(E){var S=[],D=[];return E.forEach(function(L){if(4===L.type){if(0===D.length)throw new Error("Error parsing function args, zero tokens for arg");return S.push(D),void(D=[])}31!==L.type&&D.push(L)}),D.length&&S.push(D),S},Bc=function(E,S){return 11===S&&12===E.type||28===S&&29===E.type||2===S&&3===E.type},fr=function(E){return 17===E.type||15===E.type},ks=function(E){return 16===E.type||fr(E)},Pa=function(E){return E.length>1?[E[0],E[1]]:[E[0]]},ri={type:17,number:0,flags:4},pc={type:16,number:50,flags:4},Ha={type:16,number:100,flags:4},gc=function(E,S,D){var L=E[0],O=E[1];return[Pi(L,S),Pi(typeof O<"u"?O:L,D)]},Pi=function(E,S){if(16===E.type)return E.number/100*S;if(Li(E))switch(E.unit){case"rem":case"em":return 16*E.number;default:return E.number}return E.number},Oa_parse=function(E,S){if(15===S.type)switch(S.unit){case"deg":return Math.PI*S.number/180;case"grad":return Math.PI/200*S.number;case"rad":return S.number;case"turn":return 2*Math.PI*S.number}throw new Error("Unsupported angle type")},Wf=function(E){return 15===E.type&&("deg"===E.unit||"grad"===E.unit||"rad"===E.unit||"turn"===E.unit)},cr=function(E){switch(E.filter(sn).map(function(D){return D.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ri,ri];case"to top":case"bottom":return y2(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ri,Ha];case"to right":case"left":return y2(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ha,Ha];case"to bottom":case"top":return y2(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ha,ri];case"to left":case"right":return y2(270)}return 0},y2=function(E){return Math.PI*E/180},N2_parse=function(E,S){if(18===S.type){var D=Ps[S.name];if(typeof D>"u")throw new Error('Attempting to parse an unsupported color function "'+S.name+'"');return D(E,S.values)}if(5===S.type){if(3===S.value.length){var L=S.value.substring(0,1),O=S.value.substring(1,2),G=S.value.substring(2,3);return w2(parseInt(L+L,16),parseInt(O+O,16),parseInt(G+G,16),1)}if(4===S.value.length){L=S.value.substring(0,1),O=S.value.substring(1,2),G=S.value.substring(2,3);var ie=S.value.substring(3,4);return w2(parseInt(L+L,16),parseInt(O+O,16),parseInt(G+G,16),parseInt(ie+ie,16)/255)}if(6===S.value.length)return L=S.value.substring(0,2),O=S.value.substring(2,4),G=S.value.substring(4,6),w2(parseInt(L,16),parseInt(O,16),parseInt(G,16),1);if(8===S.value.length)return L=S.value.substring(0,2),O=S.value.substring(2,4),G=S.value.substring(4,6),ie=S.value.substring(6,8),w2(parseInt(L,16),parseInt(O,16),parseInt(G,16),parseInt(ie,16)/255)}if(20===S.type){var ye=S1[S.value.toUpperCase()];if(typeof ye<"u")return ye}return S1.TRANSPARENT},mc=function(E){return 0==(255&E)},Ca=function(E){var S=255&E,D=255&E>>8,L=255&E>>16,O=255&E>>24;return S<255?"rgba("+O+","+L+","+D+","+S/255+")":"rgb("+O+","+L+","+D+")"},w2=function(E,S,D,L){return(E<<24|S<<16|D<<8|Math.round(255*L)<<0)>>>0},Al=function(E,S){if(17===E.type)return E.number;if(16===E.type){var D=3===S?1:255;return 3===S?E.number/100*D:Math.round(E.number/100*D)}return 0},M1=function(E,S){var D=S.filter(O2);if(3===D.length){var L=D.map(Al);return w2(L[0],L[1],L[2],1)}if(4===D.length){var ye=D.map(Al);return w2(ye[0],ye[1],ye[2],ye[3])}return 0};function Dr(E,S,D){return D<0&&(D+=1),D>=1&&(D-=1),D<1/6?(S-E)*D*6+E:D<.5?S:D<2/3?6*(S-E)*(2/3-D)+E:E}var au=function(E,S){var D=S.filter(O2),L=D[0],O=D[1],G=D[2],ie=D[3],ye=(17===L.type?y2(L.number):Oa_parse(E,L))/(2*Math.PI),xe=ks(O)?O.number/100:0,Ze=ks(G)?G.number/100:0,lt=typeof ie<"u"&&ks(ie)?Pi(ie,1):1;if(0===xe)return w2(255*Ze,255*Ze,255*Ze,1);var dt=Ze<=.5?Ze*(xe+1):Ze+xe-Ze*xe,Ft=2*Ze-dt,Gn=Dr(Ft,dt,ye+1/3),Tn=Dr(Ft,dt,ye),Qn=Dr(Ft,dt,ye-1/3);return w2(255*Gn,255*Tn,255*Qn,lt)},Ps={hsl:au,hsla:au,rgb:M1,rgba:M1},To=function(E,S){return N2_parse(E,r2.create(S).parseComponentValue())},S1={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},h0={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(E,S){return S.map(function(D){if(sn(D))switch(D.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Zl={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fa=function(E,S){var D=N2_parse(E,S[0]),L=S[1];return L&&ks(L)?{color:D,stop:L}:{color:D,stop:null}},vl=function(E,S){var D=E[0],L=E[E.length-1];null===D.stop&&(D.stop=ri),null===L.stop&&(L.stop=Ha);for(var O=[],G=0,ie=0;ie<E.length;ie++){var ye=E[ie].stop;if(null!==ye){var xe=Pi(ye,S);O.push(xe>G?xe:G),G=xe}else O.push(null)}var Ze=null;for(ie=0;ie<O.length;ie++){var lt=O[ie];if(null===lt)null===Ze&&(Ze=ie);else if(null!==Ze){for(var dt=ie-Ze,Gn=(lt-O[Ze-1])/(dt+1),Tn=1;Tn<=dt;Tn++)O[Ze+Tn-1]=Gn*Tn;Ze=null}}return E.map(function(Qn,wr){return{color:Qn.color,stop:Math.max(Math.min(1,O[wr]/S),0)}})},C2=function(E,S,D){var L="number"==typeof E?E:function(E,S,D){var L=S/2,O=D/2,G=Pi(E[0],S)-L,ie=O-Pi(E[1],D);return(Math.atan2(ie,G)+2*Math.PI)%(2*Math.PI)}(E,S,D),O=Math.abs(S*Math.sin(L))+Math.abs(D*Math.cos(L)),G=S/2,ie=D/2,ye=O/2,xe=Math.sin(L-Math.PI/2)*ye,Ze=Math.cos(L-Math.PI/2)*ye;return[O,G-Ze,G+Ze,ie-xe,ie+xe]},co=function(E,S){return Math.sqrt(E*E+S*S)},pp=function(E,S,D,L,O){return[[0,0],[0,S],[E,0],[E,S]].reduce(function(ie,ye){var lt=co(D-ye[0],L-ye[1]);return(O?lt<ie.optimumDistance:lt>ie.optimumDistance)?{optimumCorner:ye,optimumDistance:lt}:ie},{optimumDistance:O?1/0:-1/0,optimumCorner:null}).optimumCorner},da=function(E,S){var D=y2(180),L=[];return ao(S).forEach(function(O,G){if(0===G){var ie=O[0];if(20===ie.type&&-1!==["top","left","right","bottom"].indexOf(ie.value))return void(D=cr(O));if(Wf(ie))return void(D=(Oa_parse(E,ie)+y2(270))%y2(360))}var ye=fa(E,O);L.push(ye)}),{angle:D,stops:L,type:1}},V2="closest-side",s2="farthest-side",k6="closest-corner",cu="farthest-corner",Ac="ellipse",Na="contain",vc=function(E,S){var D=0,L=3,O=[],G=[];return ao(S).forEach(function(ie,ye){var xe=!0;if(0===ye?xe=ie.reduce(function(lt,dt){if(sn(dt))switch(dt.value){case"center":return G.push(pc),!1;case"top":case"left":return G.push(ri),!1;case"right":case"bottom":return G.push(Ha),!1}else if(ks(dt)||fr(dt))return G.push(dt),!1;return lt},xe):1===ye&&(xe=ie.reduce(function(lt,dt){if(sn(dt))switch(dt.value){case"circle":return D=0,!1;case Ac:return D=1,!1;case Na:case V2:return L=0,!1;case s2:return L=1,!1;case k6:return L=2,!1;case"cover":case cu:return L=3,!1}else if(fr(dt)||ks(dt))return Array.isArray(L)||(L=[]),L.push(dt),!1;return lt},xe)),xe){var Ze=fa(E,ie);O.push(Ze)}}),{size:L,shape:D,stops:O,position:G,type:2}},F3_parse=function(E,S){if(22===S.type){var D={url:S.value,type:0};return E.cache.addImage(S.value),D}if(18===S.type){var L=a1[S.name];if(typeof L>"u")throw new Error('Attempting to parse an unsupported image function "'+S.name+'"');return L(E,S.values)}throw new Error("Unsupported image type "+S.type)};for(var a1={"linear-gradient":function(E,S){var D=y2(180),L=[];return ao(S).forEach(function(O,G){if(0===G){var ie=O[0];if(20===ie.type&&"to"===ie.value)return void(D=cr(O));if(Wf(ie))return void(D=Oa_parse(E,ie))}var ye=fa(E,O);L.push(ye)}),{angle:D,stops:L,type:1}},"-moz-linear-gradient":da,"-ms-linear-gradient":da,"-o-linear-gradient":da,"-webkit-linear-gradient":da,"radial-gradient":function(E,S){var D=0,L=3,O=[],G=[];return ao(S).forEach(function(ie,ye){var xe=!0;if(0===ye){var Ze=!1;xe=ie.reduce(function(dt,Ft){if(Ze)if(sn(Ft))switch(Ft.value){case"center":return G.push(pc),dt;case"top":case"left":return G.push(ri),dt;case"right":case"bottom":return G.push(Ha),dt}else(ks(Ft)||fr(Ft))&&G.push(Ft);else if(sn(Ft))switch(Ft.value){case"circle":return D=0,!1;case Ac:return D=1,!1;case"at":return Ze=!0,!1;case V2:return L=0,!1;case"cover":case s2:return L=1,!1;case Na:case k6:return L=2,!1;case cu:return L=3,!1}else if(fr(Ft)||ks(Ft))return Array.isArray(L)||(L=[]),L.push(Ft),!1;return dt},xe)}if(xe){var lt=fa(E,ie);O.push(lt)}}),{size:L,shape:D,stops:O,position:G,type:2}},"-moz-radial-gradient":vc,"-ms-radial-gradient":vc,"-o-radial-gradient":vc,"-webkit-radial-gradient":vc,"-webkit-gradient":function(E,S){var D=y2(180),L=[],O=1;return ao(S).forEach(function(xe,Ze){var lt=xe[0];if(0===Ze){if(sn(lt)&&"linear"===lt.value)return void(O=1);if(sn(lt)&&"radial"===lt.value)return void(O=2)}if(18===lt.type)if("from"===lt.name){var dt=N2_parse(E,lt.values[0]);L.push({stop:ri,color:dt})}else if("to"===lt.name)dt=N2_parse(E,lt.values[0]),L.push({stop:Ha,color:dt});else if("color-stop"===lt.name){var Ft=lt.values.filter(O2);if(2===Ft.length){dt=N2_parse(E,Ft[1]);var Gn=Ft[0];Gs(Gn)&&L.push({stop:{type:16,number:100*Gn.number,flags:Gn.flags},color:dt})}}}),1===O?{angle:(D+y2(180))%y2(360),stops:L,type:O}:{size:3,shape:0,stops:L,position:[],type:O}}},lu={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(E,S){if(0===S.length)return[];var D=S[0];return 20===D.type&&"none"===D.value?[]:S.filter(function(L){return O2(L)&&function d0(E){return!(20===E.type&&"none"===E.value||18===E.type&&!a1[E.name])}(L)}).map(function(L){return F3_parse(E,L)})}},yr={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(E,S){return S.map(function(D){if(sn(D))switch(D.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},G2={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(E,S){return ao(S).map(function(D){return D.filter(ks)}).map(Pa)}},Lo={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(E,S){return ao(S).map(function(D){return D.filter(sn).map(function(L){return L.value}).join(" ")}).map(mp)}},mp=function(E){switch(E){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},k3=(()=>{return(E=k3||(k3={})).AUTO="auto",E.CONTAIN="contain",E.COVER="cover",k3;var E})(),c1={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(E,S){return ao(S).map(function(D){return D.filter(P3)})}},P3=function(E){return sn(E)||ks(E)},w4=function(E){return{name:"border-"+E+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},uu=w4("top"),Va=w4("right"),ia=w4("bottom"),T1=w4("left"),Jl=function(E){return{name:"border-radius-"+E,initialValue:"0 0",prefix:!1,type:1,parse:function(S,D){return Pa(D.filter(ks))}}},_c=Jl("top-left"),Ap=Jl("top-right"),ra=Jl("bottom-right"),Ua=Jl("bottom-left"),H6=function(E){return{name:"border-"+E+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(S,D){switch(D){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},o2=H6("top"),b2=H6("right"),fh=H6("bottom"),z6=H6("left"),H3=function(E){return{name:"border-"+E+"-width",initialValue:"0",type:0,prefix:!1,parse:function(S,D){return Li(D)?D.number:0}}},sa=H3("top"),p0=H3("right"),z3=H3("bottom"),O6=H3("left"),x2={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},O3={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(E,S){return"rtl"===S?1:0}},hu={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(E,S){return S.filter(sn).reduce(function(D,L){return D|zi(L.value)},0)}},zi=function(E){switch(E){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},N3={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(E,S){switch(S){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Oi={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(E,S){return 20===S.type&&"normal"===S.value?0:17===S.type||15===S.type?S.number:0}},M2=(()=>{return(E=M2||(M2={})).NORMAL="normal",E.STRICT="strict",M2;var E})(),g0={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(E,S){return"strict"===S?M2.STRICT:M2.NORMAL}},C4={name:"line-height",initialValue:"normal",prefix:!1,type:4},X1=function(E,S){return sn(E)&&"normal"===E.value?1.2*S:17===E.type?S*E.number:ks(E)?Pi(E,S):S},vp={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(E,S){return 20===S.type&&"none"===S.value?null:F3_parse(E,S)}},Rc={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(E,S){return"inside"===S?0:1}},Dt={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(E,S){switch(S){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Mr=function(E){return{name:"margin-"+E,initialValue:"0",prefix:!1,type:4}},gi=Mr("top"),h=Mr("right"),d=Mr("bottom"),m=Mr("left"),v={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(E,S){return S.filter(sn).map(function(D){switch(D.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},b={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(E,S){return"break-word"===S?"break-word":"normal"}},B=function(E){return{name:"padding-"+E,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},z=B("top"),q=B("right"),pe=B("bottom"),Ue=B("left"),gt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(E,S){switch(S){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},pt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(E,S){switch(S){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},hn={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(E,S){return 1===S.length&&gr(S[0],"none")?[]:ao(S).map(function(D){for(var L={color:S1.TRANSPARENT,offsetX:ri,offsetY:ri,blur:ri},O=0,G=0;G<D.length;G++){var ie=D[G];fr(ie)?(0===O?L.offsetX=ie:1===O?L.offsetY=ie:L.blur=ie,O++):L.color=N2_parse(E,ie)}return L})}},Mn={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(E,S){switch(S){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Fn={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(E,S){if(20===S.type&&"none"===S.value)return null;if(18===S.type){var D=Do[S.name];if(typeof D>"u")throw new Error('Attempting to parse an unsupported transform function "'+S.name+'"');return D(S.values)}return null}},Do={matrix:function(E){var S=E.filter(function(D){return 17===D.type}).map(function(D){return D.number});return 6===S.length?S:null},matrix3d:function(E){var S=E.filter(function(xe){return 17===xe.type}).map(function(xe){return xe.number});return 16===S.length?[S[0],S[1],S[4],S[5],S[12],S[13]]:null}},l1={type:16,number:50,flags:4},_l=[l1,l1],yl={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(E,S){var D=S.filter(ks);return 2!==D.length?_l:[D[0],D[1]]}},dh={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(E,S){switch(S){case"hidden":return 1;case"collapse":return 2;default:return 0}}},ph=(()=>{return(E=ph||(ph={})).NORMAL="normal",E.BREAK_ALL="break-all",E.KEEP_ALL="keep-all",ph;var E})(),Om={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(E,S){switch(S){case"break-all":return ph.BREAK_ALL;case"keep-all":return ph.KEEP_ALL;default:return ph.NORMAL}}},HT={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(E,S){if(20===S.type)return{auto:!0,order:0};if(Gs(S))return{auto:!1,order:S.number};throw new Error("Invalid z-index number parsed")}},Nm={name:"time",parse:function(E,S){if(15===S.type)switch(S.unit.toLowerCase()){case"s":return 1e3*S.number;case"ms":return S.number}throw new Error("Unsupported time type")}},Vm={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(E,S){return Gs(S)?S.number:1}},Ay={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},vy={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(E,S){return S.filter(sn).map(function(D){switch(D.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(D){return 0!==D})}},_y={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(E,S){var D=[],L=[];return S.forEach(function(O){switch(O.type){case 20:case 0:D.push(O.value);break;case 17:D.push(O.number.toString());break;case 4:L.push(D.join(" ")),D.length=0}}),D.length&&L.push(D.join(" ")),L.map(function(O){return-1===O.indexOf(" ")?O:"'"+O+"'"})}},yy={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Um={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(E,S){return Gs(S)?S.number:sn(S)&&"bold"===S.value?700:400}},zT={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(E,S){return S.filter(sn).map(function(D){return D.value})}},OT={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(E,S){switch(S){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Hs=function(E,S){return 0!=(E&S)},m0={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(E,S){if(0===S.length)return[];var D=S[0];return 20===D.type&&"none"===D.value?[]:S}},Ga={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(E,S){if(0===S.length)return null;var D=S[0];if(20===D.type&&"none"===D.value)return null;for(var L=[],O=S.filter(Ds),G=0;G<O.length;G++){var ie=O[G],ye=O[G+1];if(20===ie.type){var xe=ye&&Gs(ye)?ye.number:1;L.push({counter:ie.value,increment:xe})}}return L}},Io={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(E,S){if(0===S.length)return[];for(var D=[],L=S.filter(Ds),O=0;O<L.length;O++){var G=L[O],ie=L[O+1];if(sn(G)&&"none"!==G.value){var ye=ie&&Gs(ie)?ie.number:0;D.push({counter:G.value,reset:ye})}}return D}},NT={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(E,S){return S.filter(Li).map(function(D){return Nm.parse(E,D)})}},wy={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(E,S){if(0===S.length)return null;var D=S[0];if(20===D.type&&"none"===D.value)return null;var L=[],O=S.filter(Ri);if(O.length%2!=0)return null;for(var G=0;G<O.length;G+=2)L.push({open:O[G].value,close:O[G+1].value});return L}},Cy=function(E,S,D){if(!E)return"";var L=E[Math.min(S,E.length-1)];return L?D?L.open:L.close:""},VT={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(E,S){return 1===S.length&&gr(S[0],"none")?[]:ao(S).map(function(D){for(var L={color:255,offsetX:ri,offsetY:ri,blur:ri,spread:ri,inset:!1},O=0,G=0;G<D.length;G++){var ie=D[G];gr(ie,"inset")?L.inset=!0:fr(ie)?(0===O?L.offsetX=ie:1===O?L.offsetY=ie:2===O?L.blur=ie:L.spread=ie,O++):L.color=N2_parse(E,ie)}return L})}},UT={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(E,S){var L=[];return S.filter(sn).forEach(function(O){switch(O.value){case"stroke":L.push(1);break;case"fill":L.push(0);break;case"markers":L.push(2)}}),[0,1,2].forEach(function(O){-1===L.indexOf(O)&&L.push(O)}),L}},_p={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},yp={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(E,S){return Li(S)?S.number:0}},wp=function(){function E(S,D){var L,O;this.animationDuration=si(S,NT,D.animationDuration),this.backgroundClip=si(S,h0,D.backgroundClip),this.backgroundColor=si(S,Zl,D.backgroundColor),this.backgroundImage=si(S,lu,D.backgroundImage),this.backgroundOrigin=si(S,yr,D.backgroundOrigin),this.backgroundPosition=si(S,G2,D.backgroundPosition),this.backgroundRepeat=si(S,Lo,D.backgroundRepeat),this.backgroundSize=si(S,c1,D.backgroundSize),this.borderTopColor=si(S,uu,D.borderTopColor),this.borderRightColor=si(S,Va,D.borderRightColor),this.borderBottomColor=si(S,ia,D.borderBottomColor),this.borderLeftColor=si(S,T1,D.borderLeftColor),this.borderTopLeftRadius=si(S,_c,D.borderTopLeftRadius),this.borderTopRightRadius=si(S,Ap,D.borderTopRightRadius),this.borderBottomRightRadius=si(S,ra,D.borderBottomRightRadius),this.borderBottomLeftRadius=si(S,Ua,D.borderBottomLeftRadius),this.borderTopStyle=si(S,o2,D.borderTopStyle),this.borderRightStyle=si(S,b2,D.borderRightStyle),this.borderBottomStyle=si(S,fh,D.borderBottomStyle),this.borderLeftStyle=si(S,z6,D.borderLeftStyle),this.borderTopWidth=si(S,sa,D.borderTopWidth),this.borderRightWidth=si(S,p0,D.borderRightWidth),this.borderBottomWidth=si(S,z3,D.borderBottomWidth),this.borderLeftWidth=si(S,O6,D.borderLeftWidth),this.boxShadow=si(S,VT,D.boxShadow),this.color=si(S,x2,D.color),this.direction=si(S,O3,D.direction),this.display=si(S,hu,D.display),this.float=si(S,N3,D.cssFloat),this.fontFamily=si(S,_y,D.fontFamily),this.fontSize=si(S,yy,D.fontSize),this.fontStyle=si(S,OT,D.fontStyle),this.fontVariant=si(S,zT,D.fontVariant),this.fontWeight=si(S,Um,D.fontWeight),this.letterSpacing=si(S,Oi,D.letterSpacing),this.lineBreak=si(S,g0,D.lineBreak),this.lineHeight=si(S,C4,D.lineHeight),this.listStyleImage=si(S,vp,D.listStyleImage),this.listStylePosition=si(S,Rc,D.listStylePosition),this.listStyleType=si(S,Dt,D.listStyleType),this.marginTop=si(S,gi,D.marginTop),this.marginRight=si(S,h,D.marginRight),this.marginBottom=si(S,d,D.marginBottom),this.marginLeft=si(S,m,D.marginLeft),this.opacity=si(S,Vm,D.opacity);var G=si(S,v,D.overflow);this.overflowX=G[0],this.overflowY=G[G.length>1?1:0],this.overflowWrap=si(S,b,D.overflowWrap),this.paddingTop=si(S,z,D.paddingTop),this.paddingRight=si(S,q,D.paddingRight),this.paddingBottom=si(S,pe,D.paddingBottom),this.paddingLeft=si(S,Ue,D.paddingLeft),this.paintOrder=si(S,UT,D.paintOrder),this.position=si(S,pt,D.position),this.textAlign=si(S,gt,D.textAlign),this.textDecorationColor=si(S,Ay,null!==(L=D.textDecorationColor)&&void 0!==L?L:D.color),this.textDecorationLine=si(S,vy,null!==(O=D.textDecorationLine)&&void 0!==O?O:D.textDecoration),this.textShadow=si(S,hn,D.textShadow),this.textTransform=si(S,Mn,D.textTransform),this.transform=si(S,Fn,D.transform),this.transformOrigin=si(S,yl,D.transformOrigin),this.visibility=si(S,dh,D.visibility),this.webkitTextStrokeColor=si(S,_p,D.webkitTextStrokeColor),this.webkitTextStrokeWidth=si(S,yp,D.webkitTextStrokeWidth),this.wordBreak=si(S,Om,D.wordBreak),this.zIndex=si(S,HT,D.zIndex)}return E.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},E.prototype.isTransparent=function(){return mc(this.backgroundColor)},E.prototype.isTransformed=function(){return null!==this.transform},E.prototype.isPositioned=function(){return 0!==this.position},E.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},E.prototype.isFloating=function(){return 0!==this.float},E.prototype.isInlineLevel=function(){return Hs(this.display,4)||Hs(this.display,33554432)||Hs(this.display,268435456)||Hs(this.display,536870912)||Hs(this.display,67108864)||Hs(this.display,134217728)},E}(),Gm=function E(S,D){this.content=si(S,m0,D.content),this.quotes=si(S,wy,D.quotes)},Qm=function E(S,D){this.counterIncrement=si(S,Ga,D.counterIncrement),this.counterReset=si(S,Io,D.counterReset)},si=function(E,S,D){var L=new K1,O=null!==D&&typeof D<"u"?D.toString():S.initialValue;L.write(O);var G=new r2(L.read());switch(S.type){case 2:var ie=G.parseComponentValue();return S.parse(E,sn(ie)?ie.value:S.initialValue);case 0:return S.parse(E,G.parseComponentValue());case 1:return S.parse(E,G.parseComponentValues());case 4:return G.parseComponentValue();case 3:switch(S.format){case"angle":return Oa_parse(E,G.parseComponentValue());case"color":return N2_parse(E,G.parseComponentValue());case"image":return F3_parse(E,G.parseComponentValue());case"length":var ye=G.parseComponentValue();return fr(ye)?ye:ri;case"length-percentage":var xe=G.parseComponentValue();return ks(xe)?xe:ri;case"time":return Nm.parse(E,G.parseComponentValue())}}},Wm=function(E,S){var D=function(E){switch(E.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(E);return 1===D||S===D},b4=function E(S,D){this.context=S,this.textNodes=[],this.elements=[],this.flags=0,Wm(D,3),this.styles=new wp(S,window.getComputedStyle(D,null)),aA(D)&&(this.styles.animationDuration.some(function(L){return L>0})&&(D.style.animationDuration="0s"),null!==this.styles.transform&&(D.style.transform="none")),this.bounds=Ie(this.context,D),Wm(D,4)&&(this.flags|=16)},Cp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U6=typeof Uint8Array>"u"?[]:new Uint8Array(256),bp=0;bp<Cp.length;bp++)U6[Cp.charCodeAt(bp)]=bp;for(var Sy=function(E,S,D){return E.slice?E.slice(S,D):new Uint16Array(Array.prototype.slice.call(E,S,D))},Xm=function(){function E(S,D,L,O,G,ie){this.initialValue=S,this.errorValue=D,this.highStart=L,this.highValueIndex=O,this.index=G,this.data=ie}return E.prototype.get=function(S){var D;if(S>=0){if(S<55296||S>56319&&S<=65535)return this.data[D=((D=this.index[S>>5])<<2)+(31&S)];if(S<=65535)return this.data[D=((D=this.index[2048+(S-55296>>5)])<<2)+(31&S)];if(S<this.highStart)return D=this.index[D=2080+(S>>11)],this.data[D=((D=this.index[D+=S>>5&63])<<2)+(31&S)];if(S<=1114111)return this.data[this.highValueIndex]}return this.errorValue},E}(),Q6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ep=typeof Uint8Array>"u"?[]:new Uint8Array(256),Tp=0;Tp<Q6.length;Tp++)Ep[Q6.charCodeAt(Tp)]=Tp;var Kf=8,Zm=9,Jm=11,gh=12,Dy=function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];if(String.fromCodePoint)return String.fromCodePoint.apply(String,E);var D=E.length;if(!D)return"";for(var L=[],O=-1,G="";++O<D;){var ie=E[O];ie<=65535?L.push(ie):L.push(55296+((ie-=65536)>>10),ie%1024+56320),(O+1===D||L.length>16384)&&(G+=String.fromCharCode.apply(String,L),L.length=0)}return G},e3=function(E,S){var D=function(E){var L,G,ie,ye,xe,S=.75*E.length,D=E.length,O=0;"="===E[E.length-1]&&(S--,"="===E[E.length-2]&&S--);var Ze=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(S):new Array(S),lt=Array.isArray(Ze)?Ze:new Uint8Array(Ze);for(L=0;L<D;L+=4)G=U6[E.charCodeAt(L)],ie=U6[E.charCodeAt(L+1)],ye=U6[E.charCodeAt(L+2)],xe=U6[E.charCodeAt(L+3)],lt[O++]=G<<2|ie>>4,lt[O++]=(15&ie)<<4|ye>>2,lt[O++]=(3&ye)<<6|63&xe;return Ze}(E),L=Array.isArray(D)?function(E){for(var S=E.length,D=[],L=0;L<S;L+=4)D.push(E[L+3]<<24|E[L+2]<<16|E[L+1]<<8|E[L]);return D}(D):new Uint32Array(D),O=Array.isArray(D)?function(E){for(var S=E.length,D=[],L=0;L<S;L+=2)D.push(E[L+1]<<8|E[L]);return D}(D):new Uint16Array(D),ie=Sy(O,12,L[4]/2),ye=2===L[5]?Sy(O,(24+L[4])/2):function(E,S,D){return E.slice?E.slice(S,D):new Uint32Array(Array.prototype.slice.call(E,S,D))}(L,Math.ceil((24+L[4])/4));return new Xm(L[0],L[1],L[2],L[3],ie,ye)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),Xf=function(E){return e3.get(E)},Iy=function(E,S,D){var L=D-2,O=S[L],G=S[D-1],ie=S[D];if(2===G&&3===ie)return"\xd7";if(2===G||3===G||4===G||2===ie||3===ie||4===ie)return"\xf7";if(G===Kf&&-1!==[Kf,Zm,Jm,gh].indexOf(ie)||(G===Jm||G===Zm)&&(ie===Zm||10===ie)||(G===gh||10===G)&&10===ie||13===ie||5===ie||7===ie||1===G)return"\xd7";if(13===G&&14===ie){for(;5===O;)O=S[--L];if(14===O)return"\xd7"}if(15===G&&15===ie){for(var ye=0;15===O;)ye++,O=S[--L];if(ye%2==0)return"\xd7"}return"\xf7"},eA=function(E){var S=function(E){for(var S=[],D=0,L=E.length;D<L;){var O=E.charCodeAt(D++);if(O>=55296&&O<=56319&&D<L){var G=E.charCodeAt(D++);56320==(64512&G)?S.push(((1023&O)<<10)+(1023&G)+65536):(S.push(O),D--)}else S.push(O)}return S}(E),D=S.length,L=0,O=0,G=S.map(Xf);return{next:function(){if(L>=D)return{done:!0,value:null};for(var ie="\xd7";L<D&&"\xd7"===(ie=Iy(0,G,++L)););if("\xd7"!==ie||L===D){var ye=Dy.apply(null,S.slice(O,L));return O=L,{value:ye,done:!1}}return{done:!0,value:null}}}},jT=function(E){return 0===E[0]&&255===E[1]&&0===E[2]&&255===E[3]},By=function(E,S,D,L,O){var G="http://www.w3.org/2000/svg",ie=document.createElementNS(G,"svg"),ye=document.createElementNS(G,"foreignObject");return ie.setAttributeNS(null,"width",E.toString()),ie.setAttributeNS(null,"height",S.toString()),ye.setAttributeNS(null,"width","100%"),ye.setAttributeNS(null,"height","100%"),ye.setAttributeNS(null,"x",D.toString()),ye.setAttributeNS(null,"y",L.toString()),ye.setAttributeNS(null,"externalResourcesRequired","true"),ie.appendChild(ye),ye.appendChild(O),ie},$T=function(E){return new Promise(function(S,D){var L=new Image;L.onload=function(){return S(L)},L.onerror=D,L.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(E))})},a2={get SUPPORT_RANGE_BOUNDS(){var E=function(E){if(E.createRange){var D=E.createRange();if(D.getBoundingClientRect){var L=E.createElement("boundtest");L.style.height="123px",L.style.display="block",E.body.appendChild(L),D.selectNode(L);var O=D.getBoundingClientRect(),G=Math.round(O.height);if(E.body.removeChild(L),123===G)return!0}}return!1}(document);return Object.defineProperty(a2,"SUPPORT_RANGE_BOUNDS",{value:E}),E},get SUPPORT_WORD_BREAKING(){var E=a2.SUPPORT_RANGE_BOUNDS&&function(E){var S=E.createElement("boundtest");S.style.width="50px",S.style.display="block",S.style.fontSize="12px",S.style.letterSpacing="0px",S.style.wordSpacing="0px",E.body.appendChild(S);var D=E.createRange();S.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var L=S.firstChild,O=ct(L.data).map(function(xe){return ft(xe)}),G=0,ie={},ye=O.every(function(xe,Ze){D.setStart(L,G),D.setEnd(L,G+xe.length);var lt=D.getBoundingClientRect();G+=xe.length;var dt=lt.x>ie.x||lt.y>ie.y;return ie=lt,0===Ze||dt});return E.body.removeChild(S),ye}(document);return Object.defineProperty(a2,"SUPPORT_WORD_BREAKING",{value:E}),E},get SUPPORT_SVG_DRAWING(){var E=function(E){var S=new Image,D=E.createElement("canvas"),L=D.getContext("2d");if(!L)return!1;S.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{L.drawImage(S,0,0),D.toDataURL()}catch{return!1}return!0}(document);return Object.defineProperty(a2,"SUPPORT_SVG_DRAWING",{value:E}),E},get SUPPORT_FOREIGNOBJECT_DRAWING(){var E="function"==typeof Array.from&&"function"==typeof window.fetch?function(E){var S=E.createElement("canvas"),D=100;S.width=D,S.height=D;var L=S.getContext("2d");if(!L)return Promise.reject(!1);L.fillStyle="rgb(0, 255, 0)",L.fillRect(0,0,D,D);var O=new Image,G=S.toDataURL();O.src=G;var ie=By(D,D,0,0,O);return L.fillStyle="red",L.fillRect(0,0,D,D),$T(ie).then(function(ye){L.drawImage(ye,0,0);var xe=L.getImageData(0,0,D,D).data;L.fillStyle="red",L.fillRect(0,0,D,D);var Ze=E.createElement("div");return Ze.style.backgroundImage="url("+G+")",Ze.style.height=D+"px",jT(xe)?$T(By(D,D,0,0,Ze)):Promise.reject(!1)}).then(function(ye){return L.drawImage(ye,0,0),jT(L.getImageData(0,0,D,D).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(a2,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:E}),E},get SUPPORT_CORS_IMAGES(){var E=typeof(new Image).crossOrigin<"u";return Object.defineProperty(a2,"SUPPORT_CORS_IMAGES",{value:E}),E},get SUPPORT_RESPONSE_TYPE(){var E="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(a2,"SUPPORT_RESPONSE_TYPE",{value:E}),E},get SUPPORT_CORS_XHR(){var E="withCredentials"in new XMLHttpRequest;return Object.defineProperty(a2,"SUPPORT_CORS_XHR",{value:E}),E},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var E=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(a2,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:E}),E}},fu=function E(S,D){this.text=S,this.bounds=D},jV=function(E,S){var D=S.ownerDocument;if(D){var L=D.createElement("html2canvaswrapper");L.appendChild(S.cloneNode(!0));var O=S.parentNode;if(O){O.replaceChild(L,S);var G=Ie(E,L);return L.firstChild&&O.replaceChild(L.firstChild,L),G}}return Re.EMPTY},L1=function(E,S,D){var L=E.ownerDocument;if(!L)throw new Error("Node has no owner document");var O=L.createRange();return O.setStart(E,S),O.setEnd(E,S+D),O},j6=function(E){if(a2.SUPPORT_NATIVE_TEXT_SEGMENTATION){var S=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(S.segment(E)).map(function(D){return D.segment})}return function(E){for(var L,S=eA(E),D=[];!(L=S.next()).done;)L.value&&D.push(L.value.slice());return D}(E)},$V=function(E,S){return 0!==S.letterSpacing?j6(E):function(E,S){if(a2.SUPPORT_NATIVE_TEXT_SEGMENTATION){var D=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(D.segment(E)).map(function(L){return L.segment})}return wl(E,S)}(E,S)},qT=[32,160,4961,65792,65793,4153,4241],wl=function(E,S){for(var O,D=function(E,S){var D=ct(E),L=R6(D,S),O=L[0],G=L[1],ie=L[2],ye=D.length,xe=0,Ze=0;return{next:function(){if(Ze>=ye)return{done:!0,value:null};for(var lt=Tr;Ze<ye&&(lt=w1(D,G,O,++Ze,ie))===Tr;);if(lt!==Tr||Ze===ye){var dt=new vo(D,lt,xe,Ze);return xe=Ze,{value:dt,done:!1}}return{done:!0,value:null}}}}(E,{lineBreak:S.lineBreak,wordBreak:"break-word"===S.overflowWrap?"break-word":S.wordBreak}),L=[],G=function(){if(O.value){var ie=O.value.slice(),ye=ct(ie),xe="";ye.forEach(function(Ze){-1===qT.indexOf(Ze)?xe+=ft(Ze):(xe.length&&L.push(xe),L.push(ft(Ze)),xe="")}),xe.length&&L.push(xe)}};!(O=D.next()).done;)G();return L},du=function E(S,D,L){this.text=Ry(D.data,L.textTransform),this.textBounds=function(E,S,D,L){var O=$V(S,D),G=[],ie=0;return O.forEach(function(ye){if(D.textDecorationLine.length||ye.trim().length>0)if(a2.SUPPORT_RANGE_BOUNDS){var xe=L1(L,ie,ye.length).getClientRects();if(xe.length>1){var Ze=j6(ye),lt=0;Ze.forEach(function(Ft){G.push(new fu(Ft,Re.fromDOMRectList(E,L1(L,lt+ie,Ft.length).getClientRects()))),lt+=Ft.length})}else G.push(new fu(ye,Re.fromDOMRectList(E,xe)))}else{var dt=L.splitText(ye.length);G.push(new fu(ye,jV(E,L))),L=dt}else a2.SUPPORT_RANGE_BOUNDS||(L=L.splitText(ye.length));ie+=ye.length}),G}(S,this.text,L,D)},Ry=function(E,S){switch(S){case 1:return E.toLowerCase();case 3:return E.replace(Rp,q6);case 2:return E.toUpperCase();default:return E}},Rp=/(^|\s|:|-|\(|\))([a-z])/g,q6=function(E,S,D){return E.length>0?S+D.toUpperCase():E},tA=function(E){function S(D,L){var O=E.call(this,D,L)||this;return O.src=L.currentSrc||L.src,O.intrinsicWidth=L.naturalWidth,O.intrinsicHeight=L.naturalHeight,O.context.cache.addImage(O.src),O}return Me(S,E),S}(b4),Fy=function(E){function S(D,L){var O=E.call(this,D,L)||this;return O.canvas=L,O.intrinsicWidth=L.width,O.intrinsicHeight=L.height,O}return Me(S,E),S}(b4),ky=function(E){function S(D,L){var O=E.call(this,D,L)||this,G=new XMLSerializer,ie=Ie(D,L);return L.setAttribute("width",ie.width+"px"),L.setAttribute("height",ie.height+"px"),O.svg="data:image/svg+xml,"+encodeURIComponent(G.serializeToString(L)),O.intrinsicWidth=L.width.baseVal.value,O.intrinsicHeight=L.height.baseVal.value,O.context.cache.addImage(O.svg),O}return Me(S,E),S}(b4),KT=function(E){function S(D,L){var O=E.call(this,D,L)||this;return O.value=L.value,O}return Me(S,E),S}(b4),Py=function(E){function S(D,L){var O=E.call(this,D,L)||this;return O.start=L.start,O.reversed="boolean"==typeof L.reversed&&!0===L.reversed,O}return Me(S,E),S}(b4),Hy=[{type:15,flags:0,unit:"px",number:3}],Cl=[{type:16,flags:0,number:50}],iA="checkbox",K6="radio",XT="password",zy=707406591,rA=function(E){function S(D,L){var O=E.call(this,D,L)||this;switch(O.type=L.type.toLowerCase(),O.checked=L.checked,O.value=function(E){var S=E.type===XT?new Array(E.value.length+1).join("\u2022"):E.value;return 0===S.length?E.placeholder||"":S}(L),(O.type===iA||O.type===K6)&&(O.styles.backgroundColor=3739148031,O.styles.borderTopColor=O.styles.borderRightColor=O.styles.borderBottomColor=O.styles.borderLeftColor=2779096575,O.styles.borderTopWidth=O.styles.borderRightWidth=O.styles.borderBottomWidth=O.styles.borderLeftWidth=1,O.styles.borderTopStyle=O.styles.borderRightStyle=O.styles.borderBottomStyle=O.styles.borderLeftStyle=1,O.styles.backgroundClip=[0],O.styles.backgroundOrigin=[0],O.bounds=function(E){return E.width>E.height?new Re(E.left+(E.width-E.height)/2,E.top,E.height,E.height):E.width<E.height?new Re(E.left,E.top+(E.height-E.width)/2,E.width,E.width):E}(O.bounds)),O.type){case iA:O.styles.borderTopRightRadius=O.styles.borderTopLeftRadius=O.styles.borderBottomRightRadius=O.styles.borderBottomLeftRadius=Hy;break;case K6:O.styles.borderTopRightRadius=O.styles.borderTopLeftRadius=O.styles.borderBottomRightRadius=O.styles.borderBottomLeftRadius=Cl}return O}return Me(S,E),S}(b4),Oy=function(E){function S(D,L){var O=E.call(this,D,L)||this,G=L.options[L.selectedIndex||0];return O.value=G&&G.text||"",O}return Me(S,E),S}(b4),Ny=function(E){function S(D,L){var O=E.call(this,D,L)||this;return O.value=L.value,O}return Me(S,E),S}(b4),Vy=function(E){function S(D,L){var O=E.call(this,D,L)||this;O.src=L.src,O.width=parseInt(L.width,10)||0,O.height=parseInt(L.height,10)||0,O.backgroundColor=O.styles.backgroundColor;try{if(L.contentWindow&&L.contentWindow.document&&L.contentWindow.document.documentElement){O.tree=Jf(D,L.contentWindow.document.documentElement);var G=L.contentWindow.document.documentElement?To(D,getComputedStyle(L.contentWindow.document.documentElement).backgroundColor):S1.TRANSPARENT,ie=L.contentWindow.document.body?To(D,getComputedStyle(L.contentWindow.document.body).backgroundColor):S1.TRANSPARENT;O.backgroundColor=mc(G)?mc(ie)?O.styles.backgroundColor:ie:G}}catch{}return O}return Me(S,E),S}(b4),sA=["OL","UL","MENU"],mh=function(E,S,D,L){for(var O=S.firstChild,G=void 0;O;O=G)if(G=O.nextSibling,Uy(O)&&O.data.trim().length>0)D.textNodes.push(new du(E,O,D.styles));else if(ed(O))if(y0(O)&&O.assignedNodes)O.assignedNodes().forEach(function(ye){return mh(E,ye,D,L)});else{var ie=YT(E,O);ie.styles.isVisible()&&(oA(O,ie,L)?ie.flags|=4:Fp(ie.styles)&&(ie.flags|=2),-1!==sA.indexOf(O.tagName)&&(ie.flags|=8),D.elements.push(ie),O.shadowRoot?mh(E,O.shadowRoot,ie,L):!t3(O)&&!cA(O)&&!Z6(O)&&mh(E,O,ie,L))}},YT=function(E,S){return lA(S)?new tA(E,S):kp(S)?new Fy(E,S):cA(S)?new ky(E,S):Y6(S)?new KT(E,S):td(S)?new Py(E,S):ZT(S)?new rA(E,S):Z6(S)?new Oy(E,S):t3(S)?new Ny(E,S):Gy(S)?new Vy(E,S):new b4(E,S)},Jf=function(E,S){var D=YT(E,S);return D.flags|=4,mh(E,S,D,D),D},oA=function(E,S,D){return S.styles.isPositionedWithZIndex()||S.styles.opacity<1||S.styles.isTransformed()||Cs(E)&&D.styles.isTransparent()},Fp=function(E){return E.isPositioned()||E.isFloating()},Uy=function(E){return E.nodeType===Node.TEXT_NODE},ed=function(E){return E.nodeType===Node.ELEMENT_NODE},aA=function(E){return ed(E)&&typeof E.style<"u"&&!X6(E)},X6=function(E){return"object"==typeof E.className},Y6=function(E){return"LI"===E.tagName},td=function(E){return"OL"===E.tagName},ZT=function(E){return"INPUT"===E.tagName},cA=function(E){return"svg"===E.tagName},Cs=function(E){return"BODY"===E.tagName},kp=function(E){return"CANVAS"===E.tagName},nd=function(E){return"VIDEO"===E.tagName},lA=function(E){return"IMG"===E.tagName},Gy=function(E){return"IFRAME"===E.tagName},Qy=function(E){return"STYLE"===E.tagName},t3=function(E){return"TEXTAREA"===E.tagName},Z6=function(E){return"SELECT"===E.tagName},y0=function(E){return"SLOT"===E.tagName},Wy=function(E){return E.tagName.indexOf("-")>0},jy=function(){function E(){this.counters={}}return E.prototype.getCounterValue=function(S){var D=this.counters[S];return D&&D.length?D[D.length-1]:1},E.prototype.getCounterValues=function(S){return this.counters[S]||[]},E.prototype.pop=function(S){var D=this;S.forEach(function(L){return D.counters[L].pop()})},E.prototype.parse=function(S){var D=this,L=S.counterIncrement,O=S.counterReset,G=!0;null!==L&&L.forEach(function(ye){var xe=D.counters[ye.counter];xe&&0!==ye.increment&&(G=!1,xe.length||xe.push(1),xe[Math.max(0,xe.length-1)]+=ye.increment)});var ie=[];return G&&O.forEach(function(ye){var xe=D.counters[ye.counter];ie.push(ye.counter),xe||(xe=D.counters[ye.counter]=[]),xe.push(ye.reset)}),ie},E}(),id={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},J6={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},$y={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},JT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},rd=function(E,S,D,L,O,G){return E<S||E>D?n8(E,O,G.length>0):L.integers.reduce(function(ie,ye,xe){for(;E>=ye;)E-=ye,ie+=L.values[xe];return ie},"")+G},Ah=function(E,S,D,L){var O="";do{D||E--,O=L(E)+O,E/=S}while(E*S>=S);return O},oa=function(E,S,D,L,O){var G=D-S+1;return(E<0?"-":"")+(Ah(Math.abs(E),G,L,function(ie){return ft(Math.floor(ie%G)+S)})+O)},vh=function(E,S,D){void 0===D&&(D=". ");var L=S.length;return Ah(Math.abs(E),L,!1,function(O){return S[Math.floor(O%L)]})+D},gu=function(E,S,D,L,O,G){if(E<-9999||E>9999)return n8(E,4,O.length>0);var ie=Math.abs(E),ye=O;if(0===ie)return S[0]+ye;for(var xe=0;ie>0&&xe<=4;xe++){var Ze=ie%10;0===Ze&&Hs(G,1)&&""!==ye?ye=S[Ze]+ye:Ze>1||1===Ze&&0===xe||1===Ze&&1===xe&&Hs(G,2)||1===Ze&&1===xe&&Hs(G,4)&&E>100||1===Ze&&xe>1&&Hs(G,8)?ye=S[Ze]+(xe>0?D[xe-1]:"")+ye:1===Ze&&xe>0&&(ye=D[xe-1]+ye),ie=Math.floor(ie/10)}return(E<0?L:"")+ye},Hp="\ub9c8\uc774\ub108\uc2a4",n8=function(E,S,D){var L=D?". ":"",O=D?"\u3001":"",G=D?", ":"",ie=D?" ":"";switch(S){case 0:return"\u2022"+ie;case 1:return"\u25e6"+ie;case 2:return"\u25fe"+ie;case 5:var ye=oa(E,48,57,!0,L);return ye.length<4?"0"+ye:ye;case 4:return vh(E,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",O);case 6:return rd(E,1,3999,id,3,L).toLowerCase();case 7:return rd(E,1,3999,id,3,L);case 8:return oa(E,945,969,!1,L);case 9:return oa(E,97,122,!1,L);case 10:return oa(E,65,90,!1,L);case 11:return oa(E,1632,1641,!0,L);case 12:case 49:return rd(E,1,9999,J6,3,L);case 35:return rd(E,1,9999,J6,3,L).toLowerCase();case 13:return oa(E,2534,2543,!0,L);case 14:case 30:return oa(E,6112,6121,!0,L);case 15:return vh(E,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",O);case 16:return vh(E,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",O);case 17:case 48:return gu(E,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8ca0",O,14);case 47:return gu(E,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8ca0",O,15);case 42:return gu(E,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8d1f",O,14);case 41:return gu(E,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8d1f",O,15);case 26:return gu(E,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",O,0);case 25:return gu(E,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",O,7);case 31:return gu(E,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",Hp,G,7);case 33:return gu(E,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",Hp,G,0);case 32:return gu(E,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",Hp,G,7);case 18:return oa(E,2406,2415,!0,L);case 20:return rd(E,1,19999,JT,3,L);case 21:return oa(E,2790,2799,!0,L);case 22:return oa(E,2662,2671,!0,L);case 22:return rd(E,1,10999,$y,3,L);case 23:return vh(E,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return vh(E,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return oa(E,3302,3311,!0,L);case 28:return vh(E,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",O);case 29:return vh(E,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",O);case 34:return oa(E,3792,3801,!0,L);case 37:return oa(E,6160,6169,!0,L);case 38:return oa(E,4160,4169,!0,L);case 39:return oa(E,2918,2927,!0,L);case 40:return oa(E,1776,1785,!0,L);case 43:return oa(E,3046,3055,!0,L);case 44:return oa(E,3174,3183,!0,L);case 45:return oa(E,3664,3673,!0,L);case 46:return oa(E,3872,3881,!0,L);default:return oa(E,48,57,!0,L)}},hA="data-html2canvas-ignore",eL=function(){function E(S,D,L){if(this.context=S,this.options=L,this.scrolledElements=[],this.referenceElement=D,this.counters=new jy,this.quoteDepth=0,!D.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(D.ownerDocument.documentElement,!1)}return E.prototype.toIFrame=function(S,D){var L=this,O=qV(S,D);if(!O.contentWindow)return Promise.reject("Unable to find iframe window");var G=S.defaultView.pageXOffset,ie=S.defaultView.pageYOffset,ye=O.contentWindow,xe=ye.document,Ze=Xy(O).then(function(){return Ee(L,void 0,void 0,function(){var lt,dt;return Ne(this,function(Ft){switch(Ft.label){case 0:return this.scrolledElements.forEach(iL),ye&&(ye.scrollTo(D.left,D.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(ye.scrollY!==D.top||ye.scrollX!==D.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(ye.scrollX-D.left,ye.scrollY-D.top,0,0))),lt=this.options.onclone,typeof(dt=this.clonedReferenceElement)>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:xe.fonts&&xe.fonts.ready?[4,xe.fonts.ready]:[3,2];case 1:Ft.sent(),Ft.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,tL(xe)]:[3,4];case 3:Ft.sent(),Ft.label=4;case 4:return"function"==typeof lt?[2,Promise.resolve().then(function(){return lt(xe,dt)}).then(function(){return O})]:[2,O]}})})});return xe.open(),xe.write(sd(document.doctype)+"<html></html>"),nL(this.referenceElement.ownerDocument,G,ie),xe.replaceChild(xe.adoptNode(this.documentElement),xe.documentElement),xe.close(),Ze},E.prototype.createElementClone=function(S){if(Wm(S,2),kp(S))return this.createCanvasClone(S);if(nd(S))return this.createVideoClone(S);if(Qy(S))return this.createStyleClone(S);var D=S.cloneNode(!1);return lA(D)&&(lA(S)&&S.currentSrc&&S.currentSrc!==S.src&&(D.src=S.currentSrc,D.srcset=""),"lazy"===D.loading&&(D.loading="eager")),Wy(D)?this.createCustomElementClone(D):D},E.prototype.createCustomElementClone=function(S){var D=document.createElement("html2canvascustomelement");return r8(S.style,D),D},E.prototype.createStyleClone=function(S){try{var D=S.sheet;if(D&&D.cssRules){var L=[].slice.call(D.cssRules,0).reduce(function(G,ie){return ie&&"string"==typeof ie.cssText?G+ie.cssText:G},""),O=S.cloneNode(!1);return O.textContent=L,O}}catch(G){if(this.context.logger.error("Unable to access cssRules property",G),"SecurityError"!==G.name)throw G}return S.cloneNode(!1)},E.prototype.createCanvasClone=function(S){var D;if(this.options.inlineImages&&S.ownerDocument){var L=S.ownerDocument.createElement("img");try{return L.src=S.toDataURL(),L}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",S)}}var O=S.cloneNode(!1);try{O.width=S.width,O.height=S.height;var G=S.getContext("2d"),ie=O.getContext("2d");if(ie)if(!this.options.allowTaint&&G)ie.putImageData(G.getImageData(0,0,S.width,S.height),0,0);else{var ye=null!==(D=S.getContext("webgl2"))&&void 0!==D?D:S.getContext("webgl");ye&&!1===ye.getContextAttributes()?.preserveDrawingBuffer&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",S),ie.drawImage(S,0,0)}return O}catch{this.context.logger.info("Unable to clone canvas as it is tainted",S)}return O},E.prototype.createVideoClone=function(S){var D=S.ownerDocument.createElement("canvas");D.width=S.offsetWidth,D.height=S.offsetHeight;var L=D.getContext("2d");try{return L&&(L.drawImage(S,0,0,D.width,D.height),this.options.allowTaint||L.getImageData(0,0,D.width,D.height)),D}catch{this.context.logger.info("Unable to clone video as it is tainted",S)}var O=S.ownerDocument.createElement("canvas");return O.width=S.offsetWidth,O.height=S.offsetHeight,O},E.prototype.appendChildNode=function(S,D,L){(!ed(D)||!function(E){return"SCRIPT"===E.tagName}(D)&&!D.hasAttribute(hA)&&("function"!=typeof this.options.ignoreElements||!this.options.ignoreElements(D)))&&(!this.options.copyStyles||!ed(D)||!Qy(D))&&S.appendChild(this.cloneNode(D,L))},E.prototype.cloneChildNodes=function(S,D,L){for(var O=this,G=S.shadowRoot?S.shadowRoot.firstChild:S.firstChild;G;G=G.nextSibling)if(ed(G)&&y0(G)&&"function"==typeof G.assignedNodes){var ie=G.assignedNodes();ie.length&&ie.forEach(function(ye){return O.appendChildNode(D,ye,L)})}else this.appendChildNode(D,G,L)},E.prototype.cloneNode=function(S,D){if(Uy(S))return document.createTextNode(S.data);if(!S.ownerDocument)return S.cloneNode(!1);var L=S.ownerDocument.defaultView;if(L&&ed(S)&&(aA(S)||X6(S))){var O=this.createElementClone(S);O.style.transitionProperty="none";var G=L.getComputedStyle(S),ie=L.getComputedStyle(S,":before"),ye=L.getComputedStyle(S,":after");this.referenceElement===S&&aA(O)&&(this.clonedReferenceElement=O),Cs(O)&&Yy(O);var xe=this.counters.parse(new Qm(this.context,G)),Ze=this.resolvePseudoContent(S,O,ie,_h.BEFORE);Wy(S)&&(D=!0),nd(S)||this.cloneChildNodes(S,O,D),Ze&&O.insertBefore(Ze,O.firstChild);var lt=this.resolvePseudoContent(S,O,ye,_h.AFTER);return lt&&O.appendChild(lt),this.counters.pop(xe),(G&&(this.options.copyStyles||X6(S))&&!Gy(S)||D)&&r8(G,O),(0!==S.scrollTop||0!==S.scrollLeft)&&this.scrolledElements.push([O,S.scrollLeft,S.scrollTop]),(t3(S)||Z6(S))&&(t3(O)||Z6(O))&&(O.value=S.value),O}return S.cloneNode(!1)},E.prototype.resolvePseudoContent=function(S,D,L,O){var G=this;if(L){var ie=L.content,ye=D.ownerDocument;if(ye&&ie&&"none"!==ie&&"-moz-alt-content"!==ie&&"none"!==L.display){this.counters.parse(new Qm(this.context,L));var xe=new Gm(this.context,L),Ze=ye.createElement("html2canvaspseudoelement");r8(L,Ze),xe.content.forEach(function(dt){if(0===dt.type)Ze.appendChild(ye.createTextNode(dt.value));else if(22===dt.type){var Ft=ye.createElement("img");Ft.src=dt.value,Ft.style.opacity="1",Ze.appendChild(Ft)}else if(18===dt.type){if("attr"===dt.name){var Gn=dt.values.filter(sn);Gn.length&&Ze.appendChild(ye.createTextNode(S.getAttribute(Gn[0].value)||""))}else if("counter"===dt.name){var Tn=dt.values.filter(O2),wr=Tn[1];if((Qn=Tn[0])&&sn(Qn)){var _i=G.counters.getCounterValue(Qn.value),ui=wr&&sn(wr)?Dt.parse(G.context,wr.value):3;Ze.appendChild(ye.createTextNode(n8(_i,ui,!1)))}}else if("counters"===dt.name){var Qn,Ws=dt.values.filter(O2),Cr=Ws[1];if(wr=Ws[2],(Qn=Ws[0])&&sn(Qn)){var ir=G.counters.getCounterValues(Qn.value),Yn=wr&&sn(wr)?Dt.parse(G.context,wr.value):3,zs=Cr&&0===Cr.type?Cr.value:"",Is=ir.map(function(Y1){return n8(Y1,Yn,!1)}).join(zs);Ze.appendChild(ye.createTextNode(Is))}}}else if(20===dt.type)switch(dt.value){case"open-quote":Ze.appendChild(ye.createTextNode(Cy(xe.quotes,G.quoteDepth++,!0)));break;case"close-quote":Ze.appendChild(ye.createTextNode(Cy(xe.quotes,--G.quoteDepth,!1)));break;default:Ze.appendChild(ye.createTextNode(dt.value))}}),Ze.className=s8+" "+Np;var lt=O===_h.BEFORE?" "+s8:" "+Np;return X6(D)?D.className.baseValue+=lt:D.className+=lt,Ze}}},E.destroy=function(S){return!!S.parentNode&&(S.parentNode.removeChild(S),!0)},E}(),_h=(()=>{return(E=_h||(_h={}))[E.BEFORE=0]="BEFORE",E[E.AFTER=1]="AFTER",_h;var E})(),qV=function(E,S){var D=E.createElement("iframe");return D.className="html2canvas-container",D.style.visibility="hidden",D.style.position="fixed",D.style.left="-10000px",D.style.top="0px",D.style.border="0",D.width=S.width.toString(),D.height=S.height.toString(),D.scrolling="no",D.setAttribute(hA,"true"),E.body.appendChild(D),D},fA=function(E){return new Promise(function(S){E.complete?S():E.src?(E.onload=S,E.onerror=S):S()})},tL=function(E){return Promise.all([].slice.call(E.images,0).map(fA))},Xy=function(E){return new Promise(function(S,D){var L=E.contentWindow;if(!L)return D("No window assigned for iframe");var O=L.document;L.onload=E.onload=function(){L.onload=E.onload=null;var G=setInterval(function(){O.body.childNodes.length>0&&"complete"===O.readyState&&(clearInterval(G),S(E))},50)}})},zp=["all","d","content"],r8=function(E,S){for(var D=E.length-1;D>=0;D--){var L=E.item(D);-1===zp.indexOf(L)&&S.style.setProperty(L,E.getPropertyValue(L))}return S},sd=function(E){var S="";return E&&(S+="<!DOCTYPE ",E.name&&(S+=E.name),E.internalSubset&&(S+=E.internalSubset),E.publicId&&(S+='"'+E.publicId+'"'),E.systemId&&(S+='"'+E.systemId+'"'),S+=">"),S},nL=function(E,S,D){E&&E.defaultView&&(S!==E.defaultView.pageXOffset||D!==E.defaultView.pageYOffset)&&E.defaultView.scrollTo(S,D)},iL=function(E){var S=E[0],L=E[2];S.scrollLeft=E[1],S.scrollTop=L},s8="___html2canvas___pseudoelement_before",Np="___html2canvas___pseudoelement_after",dA='{\n    content: "" !important;\n    display: none !important;\n}',Yy=function(E){yh(E,"."+s8+":before"+dA+"\n         ."+Np+":after"+dA)},yh=function(E,S){var D=E.ownerDocument;if(D){var L=D.createElement("style");L.textContent=S,E.appendChild(L)}},Zy=function(){function E(){}return E.getOrigin=function(S){var D=E._link;return D?(D.href=S,D.href=D.href,D.protocol+D.hostname+D.port):"about:blank"},E.isSameOrigin=function(S){return E.getOrigin(S)===E._origin},E.setContext=function(S){E._link=S.document.createElement("a"),E._origin=E.getOrigin(S.location.href)},E._origin="about:blank",E}(),rL=function(){function E(S,D){this.context=S,this._options=D,this._cache={}}return E.prototype.addImage=function(S){var D=Promise.resolve();return this.has(S)||(pA(S)||bl(S))&&(this._cache[S]=this.loadImage(S)).catch(function(){}),D},E.prototype.match=function(S){return this._cache[S]},E.prototype.loadImage=function(S){return Ee(this,void 0,void 0,function(){var D,L,O,G,ie=this;return Ne(this,function(ye){switch(ye.label){case 0:return D=Zy.isSameOrigin(S),L=!n3(S)&&!0===this._options.useCORS&&a2.SUPPORT_CORS_IMAGES&&!D,O=!n3(S)&&!D&&!pA(S)&&"string"==typeof this._options.proxy&&a2.SUPPORT_CORS_XHR&&!L,D||!1!==this._options.allowTaint||n3(S)||pA(S)||O||L?(G=S,O?[4,this.proxy(G)]:[3,2]):[2];case 1:G=ye.sent(),ye.label=2;case 2:return this.context.logger.debug("Added image "+S.substring(0,256)),[4,new Promise(function(xe,Ze){var lt=new Image;lt.onload=function(){return xe(lt)},lt.onerror=Ze,(cL(G)||L)&&(lt.crossOrigin="anonymous"),lt.src=G,!0===lt.complete&&setTimeout(function(){return xe(lt)},500),ie._options.imageTimeout>0&&setTimeout(function(){return Ze("Timed out ("+ie._options.imageTimeout+"ms) loading image")},ie._options.imageTimeout)})];case 3:return[2,ye.sent()]}})})},E.prototype.has=function(S){return typeof this._cache[S]<"u"},E.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},E.prototype.proxy=function(S){var D=this,L=this._options.proxy;if(!L)throw new Error("No proxy defined");var O=S.substring(0,256);return new Promise(function(G,ie){var ye=a2.SUPPORT_RESPONSE_TYPE?"blob":"text",xe=new XMLHttpRequest;xe.onload=function(){if(200===xe.status)if("text"===ye)G(xe.response);else{var dt=new FileReader;dt.addEventListener("load",function(){return G(dt.result)},!1),dt.addEventListener("error",function(Ft){return ie(Ft)},!1),dt.readAsDataURL(xe.response)}else ie("Failed to proxy resource "+O+" with status code "+xe.status)},xe.onerror=ie;var Ze=L.indexOf("?")>-1?"&":"?";if(xe.open("GET",""+L+Ze+"url="+encodeURIComponent(S)+"&responseType="+ye),"text"!==ye&&xe instanceof XMLHttpRequest&&(xe.responseType=ye),D._options.imageTimeout){var lt=D._options.imageTimeout;xe.timeout=lt,xe.ontimeout=function(){return ie("Timed out ("+lt+"ms) proxying "+O)}}xe.send()})},E}(),sL=/^data:image\/svg\+xml/i,oL=/^data:image\/.*;base64,/i,aL=/^data:image\/.*/i,bl=function(E){return a2.SUPPORT_SVG_DRAWING||!lL(E)},n3=function(E){return aL.test(E)},cL=function(E){return oL.test(E)},pA=function(E){return"blob"===E.substr(0,4)},lL=function(E){return"svg"===E.substr(-3).toLowerCase()||sL.test(E)},Xn=function(){function E(S,D){this.type=0,this.x=S,this.y=D}return E.prototype.add=function(S,D){return new E(this.x+S,this.y+D)},E}(),od=function(E,S,D){return new Xn(E.x+(S.x-E.x)*D,E.y+(S.y-E.y)*D)},Vp=function(){function E(S,D,L,O){this.type=1,this.start=S,this.startControl=D,this.endControl=L,this.end=O}return E.prototype.subdivide=function(S,D){var L=od(this.start,this.startControl,S),O=od(this.startControl,this.endControl,S),G=od(this.endControl,this.end,S),ie=od(L,O,S),ye=od(O,G,S),xe=od(ie,ye,S);return D?new E(this.start,L,ie,xe):new E(xe,ye,G,this.end)},E.prototype.add=function(S,D){return new E(this.start.add(S,D),this.startControl.add(S,D),this.endControl.add(S,D),this.end.add(S,D))},E.prototype.reverse=function(){return new E(this.end,this.endControl,this.startControl,this.start)},E}(),xl=function(E){return 1===E.type},uL=function E(S){var D=S.styles,L=S.bounds,O=gc(D.borderTopLeftRadius,L.width,L.height),G=O[0],ie=O[1],ye=gc(D.borderTopRightRadius,L.width,L.height),xe=ye[0],Ze=ye[1],lt=gc(D.borderBottomRightRadius,L.width,L.height),dt=lt[0],Ft=lt[1],Gn=gc(D.borderBottomLeftRadius,L.width,L.height),Tn=Gn[0],Qn=Gn[1],wr=[];wr.push((G+xe)/L.width),wr.push((Tn+dt)/L.width),wr.push((ie+Qn)/L.height),wr.push((Ze+Ft)/L.height);var _i=Math.max.apply(Math,wr);_i>1&&(G/=_i,ie/=_i,xe/=_i,Ze/=_i,dt/=_i,Ft/=_i,Tn/=_i,Qn/=_i);var ui=L.width-xe,Ws=L.height-Ft,Cr=L.width-dt,ir=L.height-Qn,Yn=D.borderTopWidth,zs=D.borderRightWidth,Is=D.borderBottomWidth,Ni=D.borderLeftWidth,D1=Pi(D.paddingTop,S.bounds.width),Y1=Pi(D.paddingRight,S.bounds.width),fn=Pi(D.paddingBottom,S.bounds.width),yo=Pi(D.paddingLeft,S.bounds.width);this.topLeftBorderDoubleOuterBox=G>0||ie>0?pa(L.left+Ni/3,L.top+Yn/3,G-Ni/3,ie-Yn/3,Ys.TOP_LEFT):new Xn(L.left+Ni/3,L.top+Yn/3),this.topRightBorderDoubleOuterBox=G>0||ie>0?pa(L.left+ui,L.top+Yn/3,xe-zs/3,Ze-Yn/3,Ys.TOP_RIGHT):new Xn(L.left+L.width-zs/3,L.top+Yn/3),this.bottomRightBorderDoubleOuterBox=dt>0||Ft>0?pa(L.left+Cr,L.top+Ws,dt-zs/3,Ft-Is/3,Ys.BOTTOM_RIGHT):new Xn(L.left+L.width-zs/3,L.top+L.height-Is/3),this.bottomLeftBorderDoubleOuterBox=Tn>0||Qn>0?pa(L.left+Ni/3,L.top+ir,Tn-Ni/3,Qn-Is/3,Ys.BOTTOM_LEFT):new Xn(L.left+Ni/3,L.top+L.height-Is/3),this.topLeftBorderDoubleInnerBox=G>0||ie>0?pa(L.left+2*Ni/3,L.top+2*Yn/3,G-2*Ni/3,ie-2*Yn/3,Ys.TOP_LEFT):new Xn(L.left+2*Ni/3,L.top+2*Yn/3),this.topRightBorderDoubleInnerBox=G>0||ie>0?pa(L.left+ui,L.top+2*Yn/3,xe-2*zs/3,Ze-2*Yn/3,Ys.TOP_RIGHT):new Xn(L.left+L.width-2*zs/3,L.top+2*Yn/3),this.bottomRightBorderDoubleInnerBox=dt>0||Ft>0?pa(L.left+Cr,L.top+Ws,dt-2*zs/3,Ft-2*Is/3,Ys.BOTTOM_RIGHT):new Xn(L.left+L.width-2*zs/3,L.top+L.height-2*Is/3),this.bottomLeftBorderDoubleInnerBox=Tn>0||Qn>0?pa(L.left+2*Ni/3,L.top+ir,Tn-2*Ni/3,Qn-2*Is/3,Ys.BOTTOM_LEFT):new Xn(L.left+2*Ni/3,L.top+L.height-2*Is/3),this.topLeftBorderStroke=G>0||ie>0?pa(L.left+Ni/2,L.top+Yn/2,G-Ni/2,ie-Yn/2,Ys.TOP_LEFT):new Xn(L.left+Ni/2,L.top+Yn/2),this.topRightBorderStroke=G>0||ie>0?pa(L.left+ui,L.top+Yn/2,xe-zs/2,Ze-Yn/2,Ys.TOP_RIGHT):new Xn(L.left+L.width-zs/2,L.top+Yn/2),this.bottomRightBorderStroke=dt>0||Ft>0?pa(L.left+Cr,L.top+Ws,dt-zs/2,Ft-Is/2,Ys.BOTTOM_RIGHT):new Xn(L.left+L.width-zs/2,L.top+L.height-Is/2),this.bottomLeftBorderStroke=Tn>0||Qn>0?pa(L.left+Ni/2,L.top+ir,Tn-Ni/2,Qn-Is/2,Ys.BOTTOM_LEFT):new Xn(L.left+Ni/2,L.top+L.height-Is/2),this.topLeftBorderBox=G>0||ie>0?pa(L.left,L.top,G,ie,Ys.TOP_LEFT):new Xn(L.left,L.top),this.topRightBorderBox=xe>0||Ze>0?pa(L.left+ui,L.top,xe,Ze,Ys.TOP_RIGHT):new Xn(L.left+L.width,L.top),this.bottomRightBorderBox=dt>0||Ft>0?pa(L.left+Cr,L.top+Ws,dt,Ft,Ys.BOTTOM_RIGHT):new Xn(L.left+L.width,L.top+L.height),this.bottomLeftBorderBox=Tn>0||Qn>0?pa(L.left,L.top+ir,Tn,Qn,Ys.BOTTOM_LEFT):new Xn(L.left,L.top+L.height),this.topLeftPaddingBox=G>0||ie>0?pa(L.left+Ni,L.top+Yn,Math.max(0,G-Ni),Math.max(0,ie-Yn),Ys.TOP_LEFT):new Xn(L.left+Ni,L.top+Yn),this.topRightPaddingBox=xe>0||Ze>0?pa(L.left+Math.min(ui,L.width-zs),L.top+Yn,ui>L.width+zs?0:Math.max(0,xe-zs),Math.max(0,Ze-Yn),Ys.TOP_RIGHT):new Xn(L.left+L.width-zs,L.top+Yn),this.bottomRightPaddingBox=dt>0||Ft>0?pa(L.left+Math.min(Cr,L.width-Ni),L.top+Math.min(Ws,L.height-Is),Math.max(0,dt-zs),Math.max(0,Ft-Is),Ys.BOTTOM_RIGHT):new Xn(L.left+L.width-zs,L.top+L.height-Is),this.bottomLeftPaddingBox=Tn>0||Qn>0?pa(L.left+Ni,L.top+Math.min(ir,L.height-Is),Math.max(0,Tn-Ni),Math.max(0,Qn-Is),Ys.BOTTOM_LEFT):new Xn(L.left+Ni,L.top+L.height-Is),this.topLeftContentBox=G>0||ie>0?pa(L.left+Ni+yo,L.top+Yn+D1,Math.max(0,G-(Ni+yo)),Math.max(0,ie-(Yn+D1)),Ys.TOP_LEFT):new Xn(L.left+Ni+yo,L.top+Yn+D1),this.topRightContentBox=xe>0||Ze>0?pa(L.left+Math.min(ui,L.width+Ni+yo),L.top+Yn+D1,ui>L.width+Ni+yo?0:xe-Ni+yo,Ze-(Yn+D1),Ys.TOP_RIGHT):new Xn(L.left+L.width-(zs+Y1),L.top+Yn+D1),this.bottomRightContentBox=dt>0||Ft>0?pa(L.left+Math.min(Cr,L.width-(Ni+yo)),L.top+Math.min(Ws,L.height+Yn+D1),Math.max(0,dt-(zs+Y1)),Ft-(Is+fn),Ys.BOTTOM_RIGHT):new Xn(L.left+L.width-(zs+Y1),L.top+L.height-(Is+fn)),this.bottomLeftContentBox=Tn>0||Qn>0?pa(L.left+Ni+yo,L.top+ir,Math.max(0,Tn-(Ni+yo)),Qn-(Is+fn),Ys.BOTTOM_LEFT):new Xn(L.left+Ni+yo,L.top+L.height-(Is+fn))},Ys=(()=>{return(E=Ys||(Ys={}))[E.TOP_LEFT=0]="TOP_LEFT",E[E.TOP_RIGHT=1]="TOP_RIGHT",E[E.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",E[E.BOTTOM_LEFT=3]="BOTTOM_LEFT",Ys;var E})(),pa=function(E,S,D,L,O){var G=(Math.sqrt(2)-1)/3*4,ie=D*G,ye=L*G,xe=E+D,Ze=S+L;switch(O){case Ys.TOP_LEFT:return new Vp(new Xn(E,Ze),new Xn(E,Ze-ye),new Xn(xe-ie,S),new Xn(xe,S));case Ys.TOP_RIGHT:return new Vp(new Xn(E,S),new Xn(E+ie,S),new Xn(xe,Ze-ye),new Xn(xe,Ze));case Ys.BOTTOM_RIGHT:return new Vp(new Xn(xe,S),new Xn(xe,S+ye),new Xn(E+ie,Ze),new Xn(E,Ze));default:return new Vp(new Xn(xe,Ze),new Xn(xe-ie,Ze),new Xn(E,S+ye),new Xn(E,S))}},Up=function(E){return[E.topLeftBorderBox,E.topRightBorderBox,E.bottomRightBorderBox,E.bottomLeftBorderBox]},r3=function(E){return[E.topLeftPaddingBox,E.topRightPaddingBox,E.bottomRightPaddingBox,E.bottomLeftPaddingBox]},o8=function E(S,D,L){this.offsetX=S,this.offsetY=D,this.matrix=L,this.type=0,this.target=6},a8=function E(S,D){this.path=S,this.target=D,this.type=1},Jy=function E(S){this.opacity=S,this.type=2,this.target=6},hL=function(E){return 1===E.type},fL=function(E,S){return E.length===S.length&&E.some(function(D,L){return D===S[L]})},Qp=function E(S){this.element=S,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},dL=function(){function E(S,D){if(this.container=S,this.parent=D,this.effects=[],this.curves=new uL(this.container),this.container.styles.opacity<1&&this.effects.push(new Jy(this.container.styles.opacity)),null!==this.container.styles.transform&&this.effects.push(new o8(this.container.bounds.left+this.container.styles.transformOrigin[0].number,this.container.bounds.top+this.container.styles.transformOrigin[1].number,this.container.styles.transform)),0!==this.container.styles.overflowX){var ie=Up(this.curves),ye=r3(this.curves);fL(ie,ye)?this.effects.push(new a8(ie,6)):(this.effects.push(new a8(ie,2)),this.effects.push(new a8(ye,4)))}}return E.prototype.getEffects=function(S){for(var D=-1===[2,3].indexOf(this.container.styles.position),L=this.parent,O=this.effects.slice(0);L;){var G=L.effects.filter(function(xe){return!hL(xe)});if(D||0!==L.container.styles.position||!L.parent){if(O.unshift.apply(O,G),D=-1===[2,3].indexOf(L.container.styles.position),0!==L.container.styles.overflowX){var ie=Up(L.curves),ye=r3(L.curves);fL(ie,ye)||O.unshift(new a8(ye,6))}}else O.unshift.apply(O,G);L=L.parent}return O.filter(function(xe){return Hs(xe.target,S)})},E}(),tw=function(E,S,D,L){E.container.elements.forEach(function(O){var G=Hs(O.flags,4),ie=Hs(O.flags,2),ye=new dL(O,E);Hs(O.styles.display,2048)&&L.push(ye);var xe=Hs(O.flags,8)?[]:L;if(G||ie){var Ze=G||O.styles.isPositioned()?D:S,lt=new Qp(ye);if(O.styles.isPositioned()||O.styles.opacity<1||O.styles.isTransformed()){var dt=O.styles.zIndex.order;if(dt<0){var Ft=0;Ze.negativeZIndex.some(function(Tn,Qn){return dt>Tn.element.container.styles.zIndex.order?(Ft=Qn,!1):Ft>0}),Ze.negativeZIndex.splice(Ft,0,lt)}else if(dt>0){var Gn=0;Ze.positiveZIndex.some(function(Tn,Qn){return dt>=Tn.element.container.styles.zIndex.order?(Gn=Qn+1,!1):Gn>0}),Ze.positiveZIndex.splice(Gn,0,lt)}else Ze.zeroOrAutoZIndexOrTransformedOrOpacity.push(lt)}else O.styles.isFloating()?Ze.nonPositionedFloats.push(lt):Ze.nonPositionedInlineLevel.push(lt);tw(ye,lt,G?lt:D,xe)}else O.styles.isInlineLevel()?S.inlineLevel.push(ye):S.nonInlineLevel.push(ye),tw(ye,S,D,xe);Hs(O.flags,8)&&mA(O,xe)})},mA=function(E,S){for(var D=E instanceof Py?E.start:1,L=E instanceof Py&&E.reversed,O=0;O<S.length;O++){var G=S[O];G.container instanceof KT&&"number"==typeof G.container.value&&0!==G.container.value&&(D=G.container.value),G.listValue=n8(D,G.container.styles.listStyleType,!0),D+=L?-1:1}},nw=function(E,S){switch(S){case 0:return Ml(E.topLeftBorderBox,E.topLeftPaddingBox,E.topRightBorderBox,E.topRightPaddingBox);case 1:return Ml(E.topRightBorderBox,E.topRightPaddingBox,E.bottomRightBorderBox,E.bottomRightPaddingBox);case 2:return Ml(E.bottomRightBorderBox,E.bottomRightPaddingBox,E.bottomLeftBorderBox,E.bottomLeftPaddingBox);default:return Ml(E.bottomLeftBorderBox,E.bottomLeftPaddingBox,E.topLeftBorderBox,E.topLeftPaddingBox)}},wh=function(E,S){var D=[];return xl(E)?D.push(E.subdivide(.5,!1)):D.push(E),xl(S)?D.push(S.subdivide(.5,!0)):D.push(S),D},Ml=function(E,S,D,L){var O=[];return xl(E)?O.push(E.subdivide(.5,!1)):O.push(E),xl(D)?O.push(D.subdivide(.5,!0)):O.push(D),xl(L)?O.push(L.subdivide(.5,!0).reverse()):O.push(L),xl(S)?O.push(S.subdivide(.5,!1).reverse()):O.push(S),O},Wp=function(E){var D=E.styles;return E.bounds.add(D.borderLeftWidth,D.borderTopWidth,-(D.borderRightWidth+D.borderLeftWidth),-(D.borderTopWidth+D.borderBottomWidth))},jp=function(E){var S=E.styles,D=E.bounds,L=Pi(S.paddingLeft,D.width),O=Pi(S.paddingRight,D.width),G=Pi(S.paddingTop,D.width),ie=Pi(S.paddingBottom,D.width);return D.add(L+S.borderLeftWidth,G+S.borderTopWidth,-(S.borderRightWidth+S.borderLeftWidth+L+O),-(S.borderTopWidth+S.borderBottomWidth+G+ie))},AA=function(E,S,D){var L=function(E,S){return 0===E?S.bounds:2===E?jp(S):Wp(S)}(ad(E.styles.backgroundOrigin,S),E),O=function(E,S){return 0===E?S.bounds:2===E?jp(S):Wp(S)}(ad(E.styles.backgroundClip,S),E),G=AL(ad(E.styles.backgroundSize,S),D,L),ie=G[0],ye=G[1],xe=gc(ad(E.styles.backgroundPosition,S),L.width-ie,L.height-ye);return[vL(ad(E.styles.backgroundRepeat,S),xe,G,L,O),Math.round(L.left+xe[0]),Math.round(L.top+xe[1]),ie,ye]},kc=function(E){return sn(E)&&E.value===k3.AUTO},c8=function(E){return"number"==typeof E},AL=function(E,S,D){var L=S[0],O=S[1],G=S[2],ie=E[0],ye=E[1];if(!ie)return[0,0];if(ks(ie)&&ye&&ks(ye))return[Pi(ie,D.width),Pi(ye,D.height)];var xe=c8(G);if(sn(ie)&&(ie.value===k3.CONTAIN||ie.value===k3.COVER))return c8(G)?D.width/D.height<G!=(ie.value===k3.COVER)?[D.width,D.width/G]:[D.height*G,D.height]:[D.width,D.height];var lt=c8(L),dt=c8(O),Ft=lt||dt;if(kc(ie)&&(!ye||kc(ye)))return lt&&dt?[L,O]:xe||Ft?Ft&&xe?[lt?L:O*G,dt?O:L/G]:[lt?L:D.width,dt?O:D.height]:[D.width,D.height];if(xe){var _i=0,ui=0;return ks(ie)?_i=Pi(ie,D.width):ks(ye)&&(ui=Pi(ye,D.height)),kc(ie)?_i=ui*G:(!ye||kc(ye))&&(ui=_i/G),[_i,ui]}var Ws=null,Cr=null;if(ks(ie)?Ws=Pi(ie,D.width):ye&&ks(ye)&&(Cr=Pi(ye,D.height)),null!==Ws&&(!ye||kc(ye))&&(Cr=lt&&dt?Ws/L*O:D.height),null!==Cr&&kc(ie)&&(Ws=lt&&dt?Cr/O*L:D.width),null!==Ws&&null!==Cr)return[Ws,Cr];throw new Error("Unable to calculate background-size for element")},ad=function(E,S){var D=E[S];return typeof D>"u"?E[0]:D},vL=function(E,S,D,L,O){var G=S[0],ie=S[1],ye=D[0],xe=D[1];switch(E){case 2:return[new Xn(Math.round(L.left),Math.round(L.top+ie)),new Xn(Math.round(L.left+L.width),Math.round(L.top+ie)),new Xn(Math.round(L.left+L.width),Math.round(xe+L.top+ie)),new Xn(Math.round(L.left),Math.round(xe+L.top+ie))];case 3:return[new Xn(Math.round(L.left+G),Math.round(L.top)),new Xn(Math.round(L.left+G+ye),Math.round(L.top)),new Xn(Math.round(L.left+G+ye),Math.round(L.height+L.top)),new Xn(Math.round(L.left+G),Math.round(L.height+L.top))];case 1:return[new Xn(Math.round(L.left+G),Math.round(L.top+ie)),new Xn(Math.round(L.left+G+ye),Math.round(L.top+ie)),new Xn(Math.round(L.left+G+ye),Math.round(L.top+ie+xe)),new Xn(Math.round(L.left+G),Math.round(L.top+ie+xe))];default:return[new Xn(Math.round(O.left),Math.round(O.top)),new Xn(Math.round(O.left+O.width),Math.round(O.top)),new Xn(Math.round(O.left+O.width),Math.round(O.height+O.top)),new Xn(Math.round(O.left),Math.round(O.height+O.top))]}},rw="Hidden Text",YV=function(){function E(S){this._data={},this._document=S}return E.prototype.parseMetrics=function(S,D){var L=this._document.createElement("div"),O=this._document.createElement("img"),G=this._document.createElement("span"),ie=this._document.body;L.style.visibility="hidden",L.style.fontFamily=S,L.style.fontSize=D,L.style.margin="0",L.style.padding="0",L.style.whiteSpace="nowrap",ie.appendChild(L),O.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",O.width=1,O.height=1,O.style.margin="0",O.style.padding="0",O.style.verticalAlign="baseline",G.style.fontFamily=S,G.style.fontSize=D,G.style.margin="0",G.style.padding="0",G.appendChild(this._document.createTextNode(rw)),L.appendChild(G),L.appendChild(O);var ye=O.offsetTop-G.offsetTop+2;L.removeChild(G),L.appendChild(this._document.createTextNode(rw)),L.style.lineHeight="normal",O.style.verticalAlign="super";var xe=O.offsetTop-L.offsetTop+2;return ie.removeChild(L),{baseline:ye,middle:xe}},E.prototype.getMetrics=function(S,D){var L=S+" "+D;return typeof this._data[L]>"u"&&(this._data[L]=this.parseMetrics(S,D)),this._data[L]},E}(),yL=function E(S,D){this.context=S,this.options=D},vA=function(E){function S(D,L){var O=E.call(this,D,L)||this;return O._activeEffects=[],O.canvas=L.canvas?L.canvas:document.createElement("canvas"),O.ctx=O.canvas.getContext("2d"),L.canvas||(O.canvas.width=Math.floor(L.width*L.scale),O.canvas.height=Math.floor(L.height*L.scale),O.canvas.style.width=L.width+"px",O.canvas.style.height=L.height+"px"),O.fontMetrics=new YV(document),O.ctx.scale(O.options.scale,O.options.scale),O.ctx.translate(-L.x,-L.y),O.ctx.textBaseline="bottom",O._activeEffects=[],O.context.logger.debug("Canvas renderer initialized ("+L.width+"x"+L.height+") with scale "+L.scale),O}return Me(S,E),S.prototype.applyEffects=function(D){for(var L=this;this._activeEffects.length;)this.popEffect();D.forEach(function(O){return L.applyEffect(O)})},S.prototype.applyEffect=function(D){this.ctx.save(),function(E){return 2===E.type}(D)&&(this.ctx.globalAlpha=D.opacity),function(E){return 0===E.type}(D)&&(this.ctx.translate(D.offsetX,D.offsetY),this.ctx.transform(D.matrix[0],D.matrix[1],D.matrix[2],D.matrix[3],D.matrix[4],D.matrix[5]),this.ctx.translate(-D.offsetX,-D.offsetY)),hL(D)&&(this.path(D.path),this.ctx.clip()),this._activeEffects.push(D)},S.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},S.prototype.renderStack=function(D){return Ee(this,void 0,void 0,function(){return Ne(this,function(O){switch(O.label){case 0:return D.element.container.styles.isVisible()?[4,this.renderStackContent(D)]:[3,2];case 1:O.sent(),O.label=2;case 2:return[2]}})})},S.prototype.renderNode=function(D){return Ee(this,void 0,void 0,function(){return Ne(this,function(L){switch(L.label){case 0:return Hs(D.container.flags,16),D.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(D)]:[3,3];case 1:return L.sent(),[4,this.renderNodeContent(D)];case 2:L.sent(),L.label=3;case 3:return[2]}})})},S.prototype.renderTextWithLetterSpacing=function(D,L,O){var G=this;0===L?this.ctx.fillText(D.text,D.bounds.left,D.bounds.top+O):j6(D.text).reduce(function(ye,xe){return G.ctx.fillText(xe,ye,D.bounds.top+O),ye+G.ctx.measureText(xe).width},D.bounds.left)},S.prototype.createFontStyle=function(D){var L=D.fontVariant.filter(function(ie){return"normal"===ie||"small-caps"===ie}).join(""),O=cw(D.fontFamily).join(", "),G=Li(D.fontSize)?""+D.fontSize.number+D.fontSize.unit:D.fontSize.number+"px";return[[D.fontStyle,L,D.fontWeight,G,O].join(" "),O,G]},S.prototype.renderTextNode=function(D,L){return Ee(this,void 0,void 0,function(){var O,ie,ye,xe,Ze,lt,dt,Ft=this;return Ne(this,function(Gn){return O=this.createFontStyle(L),ie=O[1],ye=O[2],this.ctx.font=O[0],this.ctx.direction=1===L.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",xe=this.fontMetrics.getMetrics(ie,ye),Ze=xe.baseline,lt=xe.middle,dt=L.paintOrder,D.textBounds.forEach(function(Tn){dt.forEach(function(Qn){switch(Qn){case 0:Ft.ctx.fillStyle=Ca(L.color),Ft.renderTextWithLetterSpacing(Tn,L.letterSpacing,Ze);var wr=L.textShadow;wr.length&&Tn.text.trim().length&&(wr.slice(0).reverse().forEach(function(_i){Ft.ctx.shadowColor=Ca(_i.color),Ft.ctx.shadowOffsetX=_i.offsetX.number*Ft.options.scale,Ft.ctx.shadowOffsetY=_i.offsetY.number*Ft.options.scale,Ft.ctx.shadowBlur=_i.blur.number,Ft.renderTextWithLetterSpacing(Tn,L.letterSpacing,Ze)}),Ft.ctx.shadowColor="",Ft.ctx.shadowOffsetX=0,Ft.ctx.shadowOffsetY=0,Ft.ctx.shadowBlur=0),L.textDecorationLine.length&&(Ft.ctx.fillStyle=Ca(L.textDecorationColor||L.color),L.textDecorationLine.forEach(function(_i){switch(_i){case 1:Ft.ctx.fillRect(Tn.bounds.left,Math.round(Tn.bounds.top+Ze),Tn.bounds.width,1);break;case 2:Ft.ctx.fillRect(Tn.bounds.left,Math.round(Tn.bounds.top),Tn.bounds.width,1);break;case 3:Ft.ctx.fillRect(Tn.bounds.left,Math.ceil(Tn.bounds.top+lt),Tn.bounds.width,1)}}));break;case 1:L.webkitTextStrokeWidth&&Tn.text.trim().length&&(Ft.ctx.strokeStyle=Ca(L.webkitTextStrokeColor),Ft.ctx.lineWidth=L.webkitTextStrokeWidth,Ft.ctx.lineJoin=window.chrome?"miter":"round",Ft.ctx.strokeText(Tn.text,Tn.bounds.left,Tn.bounds.top+Ze)),Ft.ctx.strokeStyle="",Ft.ctx.lineWidth=0,Ft.ctx.lineJoin="miter"}})}),[2]})})},S.prototype.renderReplacedElement=function(D,L,O){if(O&&D.intrinsicWidth>0&&D.intrinsicHeight>0){var G=jp(D),ie=r3(L);this.path(ie),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(O,0,0,D.intrinsicWidth,D.intrinsicHeight,G.left,G.top,G.width,G.height),this.ctx.restore()}},S.prototype.renderNodeContent=function(D){return Ee(this,void 0,void 0,function(){var L,O,G,ie,ye,lt,dt,Ft,Tn,Qn,wr,_i,ui,Ws,Cr,ir;return Ne(this,function(Yn){switch(Yn.label){case 0:this.applyEffects(D.getEffects(4)),O=D.curves,G=(L=D.container).styles,ie=0,ye=L.textNodes,Yn.label=1;case 1:return ie<ye.length?[4,this.renderTextNode(ye[ie],G)]:[3,4];case 2:Yn.sent(),Yn.label=3;case 3:return ie++,[3,1];case 4:if(!(L instanceof tA))return[3,8];Yn.label=5;case 5:return Yn.trys.push([5,7,,8]),[4,this.context.cache.match(L.src)];case 6:return ui=Yn.sent(),this.renderReplacedElement(L,O,ui),[3,8];case 7:return Yn.sent(),this.context.logger.error("Error loading image "+L.src),[3,8];case 8:if(L instanceof Fy&&this.renderReplacedElement(L,O,L.canvas),!(L instanceof ky))return[3,12];Yn.label=9;case 9:return Yn.trys.push([9,11,,12]),[4,this.context.cache.match(L.svg)];case 10:return ui=Yn.sent(),this.renderReplacedElement(L,O,ui),[3,12];case 11:return Yn.sent(),this.context.logger.error("Error loading svg "+L.svg.substring(0,255)),[3,12];case 12:return L instanceof Vy&&L.tree?[4,new S(this.context,{scale:this.options.scale,backgroundColor:L.backgroundColor,x:0,y:0,width:L.width,height:L.height}).render(L.tree)]:[3,14];case 13:lt=Yn.sent(),L.width&&L.height&&this.ctx.drawImage(lt,0,0,L.width,L.height,L.bounds.left,L.bounds.top,L.bounds.width,L.bounds.height),Yn.label=14;case 14:if(L instanceof rA&&(dt=Math.min(L.bounds.width,L.bounds.height),L.type===iA?L.checked&&(this.ctx.save(),this.path([new Xn(L.bounds.left+.39363*dt,L.bounds.top+.79*dt),new Xn(L.bounds.left+.16*dt,L.bounds.top+.5549*dt),new Xn(L.bounds.left+.27347*dt,L.bounds.top+.44071*dt),new Xn(L.bounds.left+.39694*dt,L.bounds.top+.5649*dt),new Xn(L.bounds.left+.72983*dt,L.bounds.top+.23*dt),new Xn(L.bounds.left+.84*dt,L.bounds.top+.34085*dt),new Xn(L.bounds.left+.39363*dt,L.bounds.top+.79*dt)]),this.ctx.fillStyle=Ca(zy),this.ctx.fill(),this.ctx.restore()):L.type===K6&&L.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(L.bounds.left+dt/2,L.bounds.top+dt/2,dt/4,0,2*Math.PI,!0),this.ctx.fillStyle=Ca(zy),this.ctx.fill(),this.ctx.restore())),sw(L)&&L.value.length){switch(Ft=this.createFontStyle(G),Tn=this.fontMetrics.getMetrics(Cr=Ft[0],Ft[1]).baseline,this.ctx.font=Cr,this.ctx.fillStyle=Ca(G.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=aw(L.styles.textAlign),ir=jp(L),Qn=0,L.styles.textAlign){case 1:Qn+=ir.width/2;break;case 2:Qn+=ir.width}wr=ir.add(Qn,0,0,-ir.height/2+1),this.ctx.save(),this.path([new Xn(ir.left,ir.top),new Xn(ir.left+ir.width,ir.top),new Xn(ir.left+ir.width,ir.top+ir.height),new Xn(ir.left,ir.top+ir.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new fu(L.value,wr),G.letterSpacing,Tn),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Hs(L.styles.display,2048))return[3,20];if(null===L.styles.listStyleImage)return[3,19];if(0!==(_i=L.styles.listStyleImage).type)return[3,18];ui=void 0,Ws=_i.url,Yn.label=15;case 15:return Yn.trys.push([15,17,,18]),[4,this.context.cache.match(Ws)];case 16:return ui=Yn.sent(),this.ctx.drawImage(ui,L.bounds.left-(ui.width+10),L.bounds.top),[3,18];case 17:return Yn.sent(),this.context.logger.error("Error loading list-style-image "+Ws),[3,18];case 18:return[3,20];case 19:D.listValue&&-1!==L.styles.listStyleType&&(Cr=this.createFontStyle(G)[0],this.ctx.font=Cr,this.ctx.fillStyle=Ca(G.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",ir=new Re(L.bounds.left,L.bounds.top+Pi(L.styles.paddingTop,L.bounds.width),L.bounds.width,X1(G.lineHeight,G.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new fu(D.listValue,ir),G.letterSpacing,X1(G.lineHeight,G.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Yn.label=20;case 20:return[2]}})})},S.prototype.renderStackContent=function(D){return Ee(this,void 0,void 0,function(){var L,O,G,ie,ye,xe,Ze,lt,dt,Ft,Gn,Tn,Qn,wr;return Ne(this,function(ui){switch(ui.label){case 0:return Hs(D.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(D.element)];case 1:ui.sent(),L=0,O=D.negativeZIndex,ui.label=2;case 2:return L<O.length?[4,this.renderStack(O[L])]:[3,5];case 3:ui.sent(),ui.label=4;case 4:return L++,[3,2];case 5:return[4,this.renderNodeContent(D.element)];case 6:ui.sent(),G=0,ie=D.nonInlineLevel,ui.label=7;case 7:return G<ie.length?[4,this.renderNode(ie[G])]:[3,10];case 8:ui.sent(),ui.label=9;case 9:return G++,[3,7];case 10:ye=0,xe=D.nonPositionedFloats,ui.label=11;case 11:return ye<xe.length?[4,this.renderStack(xe[ye])]:[3,14];case 12:ui.sent(),ui.label=13;case 13:return ye++,[3,11];case 14:Ze=0,lt=D.nonPositionedInlineLevel,ui.label=15;case 15:return Ze<lt.length?[4,this.renderStack(lt[Ze])]:[3,18];case 16:ui.sent(),ui.label=17;case 17:return Ze++,[3,15];case 18:dt=0,Ft=D.inlineLevel,ui.label=19;case 19:return dt<Ft.length?[4,this.renderNode(Ft[dt])]:[3,22];case 20:ui.sent(),ui.label=21;case 21:return dt++,[3,19];case 22:Gn=0,Tn=D.zeroOrAutoZIndexOrTransformedOrOpacity,ui.label=23;case 23:return Gn<Tn.length?[4,this.renderStack(Tn[Gn])]:[3,26];case 24:ui.sent(),ui.label=25;case 25:return Gn++,[3,23];case 26:Qn=0,wr=D.positiveZIndex,ui.label=27;case 27:return Qn<wr.length?[4,this.renderStack(wr[Qn])]:[3,30];case 28:ui.sent(),ui.label=29;case 29:return Qn++,[3,27];case 30:return[2]}})})},S.prototype.mask=function(D){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(D.slice(0).reverse()),this.ctx.closePath()},S.prototype.path=function(D){this.ctx.beginPath(),this.formatPath(D),this.ctx.closePath()},S.prototype.formatPath=function(D){var L=this;D.forEach(function(O,G){var ie=xl(O)?O.start:O;0===G?L.ctx.moveTo(ie.x,ie.y):L.ctx.lineTo(ie.x,ie.y),xl(O)&&L.ctx.bezierCurveTo(O.startControl.x,O.startControl.y,O.endControl.x,O.endControl.y,O.end.x,O.end.y)})},S.prototype.renderRepeat=function(D,L,O,G){this.path(D),this.ctx.fillStyle=L,this.ctx.translate(O,G),this.ctx.fill(),this.ctx.translate(-O,-G)},S.prototype.resizeImage=function(D,L,O){var G;if(D.width===L&&D.height===O)return D;var ye=(null!==(G=this.canvas.ownerDocument)&&void 0!==G?G:document).createElement("canvas");return ye.width=Math.max(1,L),ye.height=Math.max(1,O),ye.getContext("2d").drawImage(D,0,0,D.width,D.height,0,0,L,O),ye},S.prototype.renderBackgroundImage=function(D){return Ee(this,void 0,void 0,function(){var L,O,G,ie,ye;return Ne(this,function(Ze){switch(Ze.label){case 0:L=D.styles.backgroundImage.length-1,O=function(lt){var dt,Ft,Gn,Tn,Qn,wr,_i,ui,Ws,Cr,ir,Yn,zs,Is,Ni,D1,Y1,fn,yo,c2,s3,Yo,Q2,Ch,Pc,C0,mu,bh,Au,vu,b0;return Ne(this,function(u8){switch(u8.label){case 0:if(0!==lt.type)return[3,5];dt=void 0,Ft=lt.url,u8.label=1;case 1:return u8.trys.push([1,3,,4]),[4,G.context.cache.match(Ft)];case 2:return dt=u8.sent(),[3,4];case 3:return u8.sent(),G.context.logger.error("Error loading background-image "+Ft),[3,4];case 4:return dt&&(Gn=AA(D,L,[dt.width,dt.height,dt.width/dt.height]),D1=Gn[0],Yo=Gn[1],Q2=Gn[2],Is=G.ctx.createPattern(G.resizeImage(dt,yo=Gn[3],c2=Gn[4]),"repeat"),G.renderRepeat(D1,Is,Yo,Q2)),[3,6];case 5:!function(E){return 1===E.type}(lt)?function(E){return 2===E.type}(lt)&&(Ni=AA(D,L,[null,null,null]),D1=Ni[0],Y1=Ni[1],fn=Ni[2],c2=Ni[4],Yo=Pi((s3=0===lt.position.length?[pc]:lt.position)[0],yo=Ni[3]),Q2=Pi(s3[s3.length-1],c2),Ch=function(E,S,D,L,O){var G=0,ie=0;switch(E.size){case 0:0===E.shape?G=ie=Math.min(Math.abs(S),Math.abs(S-L),Math.abs(D),Math.abs(D-O)):1===E.shape&&(G=Math.min(Math.abs(S),Math.abs(S-L)),ie=Math.min(Math.abs(D),Math.abs(D-O)));break;case 2:if(0===E.shape)G=ie=Math.min(co(S,D),co(S,D-O),co(S-L,D),co(S-L,D-O));else if(1===E.shape){var ye=Math.min(Math.abs(D),Math.abs(D-O))/Math.min(Math.abs(S),Math.abs(S-L)),xe=pp(L,O,S,D,!0);ie=ye*(G=co(xe[0]-S,(xe[1]-D)/ye))}break;case 1:0===E.shape?G=ie=Math.max(Math.abs(S),Math.abs(S-L),Math.abs(D),Math.abs(D-O)):1===E.shape&&(G=Math.max(Math.abs(S),Math.abs(S-L)),ie=Math.max(Math.abs(D),Math.abs(D-O)));break;case 3:if(0===E.shape)G=ie=Math.max(co(S,D),co(S,D-O),co(S-L,D),co(S-L,D-O));else if(1===E.shape){ye=Math.max(Math.abs(D),Math.abs(D-O))/Math.max(Math.abs(S),Math.abs(S-L));var dt=pp(L,O,S,D,!1);ie=ye*(G=co(dt[0]-S,(dt[1]-D)/ye))}}return Array.isArray(E.size)&&(G=Pi(E.size[0],L),ie=2===E.size.length?Pi(E.size[1],O):G),[G,ie]}(lt,Yo,Q2,yo,c2),C0=Ch[1],(Pc=Ch[0])>0&&C0>0&&(mu=G.ctx.createRadialGradient(Y1+Yo,fn+Q2,0,Y1+Yo,fn+Q2,Pc),vl(lt.stops,2*Pc).forEach(function(xh){return mu.addColorStop(xh.stop,Ca(xh.color))}),G.path(D1),G.ctx.fillStyle=mu,Pc!==C0?(bh=D.bounds.left+.5*D.bounds.width,Au=D.bounds.top+.5*D.bounds.height,b0=1/(vu=C0/Pc),G.ctx.save(),G.ctx.translate(bh,Au),G.ctx.transform(1,0,0,vu,0,0),G.ctx.translate(-bh,-Au),G.ctx.fillRect(Y1,b0*(fn-Au)+Au,yo,c2*b0),G.ctx.restore()):G.ctx.fill())):(Tn=AA(D,L,[null,null,null]),D1=Tn[0],Yo=Tn[1],Q2=Tn[2],Qn=C2(lt.angle,yo=Tn[3],c2=Tn[4]),wr=Qn[0],_i=Qn[1],ui=Qn[2],Ws=Qn[3],Cr=Qn[4],(ir=document.createElement("canvas")).width=yo,ir.height=c2,Yn=ir.getContext("2d"),zs=Yn.createLinearGradient(_i,Ws,ui,Cr),vl(lt.stops,wr).forEach(function(xh){return zs.addColorStop(xh.stop,Ca(xh.color))}),Yn.fillStyle=zs,Yn.fillRect(0,0,yo,c2),yo>0&&c2>0&&(Is=G.ctx.createPattern(ir,"repeat"),G.renderRepeat(D1,Is,Yo,Q2))),u8.label=6;case 6:return L--,[2]}})},G=this,ie=0,ye=D.styles.backgroundImage.slice(0).reverse(),Ze.label=1;case 1:return ie<ye.length?[5,O(ye[ie])]:[3,4];case 2:Ze.sent(),Ze.label=3;case 3:return ie++,[3,1];case 4:return[2]}})})},S.prototype.renderSolidBorder=function(D,L,O){return Ee(this,void 0,void 0,function(){return Ne(this,function(G){return this.path(nw(O,L)),this.ctx.fillStyle=Ca(D),this.ctx.fill(),[2]})})},S.prototype.renderDoubleBorder=function(D,L,O,G){return Ee(this,void 0,void 0,function(){var ie,ye;return Ne(this,function(xe){switch(xe.label){case 0:return L<3?[4,this.renderSolidBorder(D,O,G)]:[3,2];case 1:return xe.sent(),[2];case 2:return ie=function(E,S){switch(S){case 0:return Ml(E.topLeftBorderBox,E.topLeftBorderDoubleOuterBox,E.topRightBorderBox,E.topRightBorderDoubleOuterBox);case 1:return Ml(E.topRightBorderBox,E.topRightBorderDoubleOuterBox,E.bottomRightBorderBox,E.bottomRightBorderDoubleOuterBox);case 2:return Ml(E.bottomRightBorderBox,E.bottomRightBorderDoubleOuterBox,E.bottomLeftBorderBox,E.bottomLeftBorderDoubleOuterBox);default:return Ml(E.bottomLeftBorderBox,E.bottomLeftBorderDoubleOuterBox,E.topLeftBorderBox,E.topLeftBorderDoubleOuterBox)}}(G,O),this.path(ie),this.ctx.fillStyle=Ca(D),this.ctx.fill(),ye=function(E,S){switch(S){case 0:return Ml(E.topLeftBorderDoubleInnerBox,E.topLeftPaddingBox,E.topRightBorderDoubleInnerBox,E.topRightPaddingBox);case 1:return Ml(E.topRightBorderDoubleInnerBox,E.topRightPaddingBox,E.bottomRightBorderDoubleInnerBox,E.bottomRightPaddingBox);case 2:return Ml(E.bottomRightBorderDoubleInnerBox,E.bottomRightPaddingBox,E.bottomLeftBorderDoubleInnerBox,E.bottomLeftPaddingBox);default:return Ml(E.bottomLeftBorderDoubleInnerBox,E.bottomLeftPaddingBox,E.topLeftBorderDoubleInnerBox,E.topLeftPaddingBox)}}(G,O),this.path(ye),this.ctx.fill(),[2]}})})},S.prototype.renderNodeBackgroundAndBorders=function(D){return Ee(this,void 0,void 0,function(){var L,O,G,ie,ye,xe,Ze,lt,dt=this;return Ne(this,function(Ft){switch(Ft.label){case 0:return this.applyEffects(D.getEffects(2)),O=!mc((L=D.container.styles).backgroundColor)||L.backgroundImage.length,G=[{style:L.borderTopStyle,color:L.borderTopColor,width:L.borderTopWidth},{style:L.borderRightStyle,color:L.borderRightColor,width:L.borderRightWidth},{style:L.borderBottomStyle,color:L.borderBottomColor,width:L.borderBottomWidth},{style:L.borderLeftStyle,color:L.borderLeftColor,width:L.borderLeftWidth}],ie=ow(ad(L.backgroundClip,0),D.curves),O||L.boxShadow.length?(this.ctx.save(),this.path(ie),this.ctx.clip(),mc(L.backgroundColor)||(this.ctx.fillStyle=Ca(L.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(D.container)]):[3,2];case 1:Ft.sent(),this.ctx.restore(),L.boxShadow.slice(0).reverse().forEach(function(Gn){dt.ctx.save();var Tn=Up(D.curves),Qn=Gn.inset?0:1e4,wr=function(E,S,D,L,O){return E.map(function(G,ie){switch(ie){case 0:return G.add(S,D);case 1:return G.add(S+L,D);case 2:return G.add(S+L,D+O);case 3:return G.add(S,D+O)}return G})}(Tn,(Gn.inset?1:-1)*Gn.spread.number-Qn,(Gn.inset?1:-1)*Gn.spread.number,Gn.spread.number*(Gn.inset?-2:2),Gn.spread.number*(Gn.inset?-2:2));Gn.inset?(dt.path(Tn),dt.ctx.clip(),dt.mask(wr)):(dt.mask(Tn),dt.ctx.clip(),dt.path(wr)),dt.ctx.shadowOffsetX=Gn.offsetX.number+Qn,dt.ctx.shadowOffsetY=Gn.offsetY.number,dt.ctx.shadowColor=Ca(Gn.color),dt.ctx.shadowBlur=Gn.blur.number,dt.ctx.fillStyle=Gn.inset?Ca(Gn.color):"rgba(0,0,0,1)",dt.ctx.fill(),dt.ctx.restore()}),Ft.label=2;case 2:ye=0,xe=0,Ze=G,Ft.label=3;case 3:return xe<Ze.length?0!==(lt=Ze[xe]).style&&!mc(lt.color)&&lt.width>0?2!==lt.style?[3,5]:[4,this.renderDashedDottedBorder(lt.color,lt.width,ye,D.curves,2)]:[3,11]:[3,13];case 4:return Ft.sent(),[3,11];case 5:return 3!==lt.style?[3,7]:[4,this.renderDashedDottedBorder(lt.color,lt.width,ye,D.curves,3)];case 6:return Ft.sent(),[3,11];case 7:return 4!==lt.style?[3,9]:[4,this.renderDoubleBorder(lt.color,lt.width,ye,D.curves)];case 8:return Ft.sent(),[3,11];case 9:return[4,this.renderSolidBorder(lt.color,ye,D.curves)];case 10:Ft.sent(),Ft.label=11;case 11:ye++,Ft.label=12;case 12:return xe++,[3,3];case 13:return[2]}})})},S.prototype.renderDashedDottedBorder=function(D,L,O,G,ie){return Ee(this,void 0,void 0,function(){var ye,xe,Ze,lt,dt,Ft,Gn,Tn,Qn,wr,_i,ui,Ws,Cr,ir,Yn;return Ne(this,function(zs){return this.ctx.save(),ye=function(E,S){switch(S){case 0:return wh(E.topLeftBorderStroke,E.topRightBorderStroke);case 1:return wh(E.topRightBorderStroke,E.bottomRightBorderStroke);case 2:return wh(E.bottomRightBorderStroke,E.bottomLeftBorderStroke);default:return wh(E.bottomLeftBorderStroke,E.topLeftBorderStroke)}}(G,O),xe=nw(G,O),2===ie&&(this.path(xe),this.ctx.clip()),xl(xe[0])?(Ze=xe[0].start.x,lt=xe[0].start.y):(Ze=xe[0].x,lt=xe[0].y),xl(xe[1])?(dt=xe[1].end.x,Ft=xe[1].end.y):(dt=xe[1].x,Ft=xe[1].y),Gn=0===O||2===O?Math.abs(Ze-dt):Math.abs(lt-Ft),this.ctx.beginPath(),this.formatPath(3===ie?ye:xe.slice(0,2)),Tn=L<3?3*L:2*L,Qn=L<3?2*L:L,3===ie&&(Tn=L,Qn=L),wr=!0,Gn<=2*Tn?wr=!1:Gn<=2*Tn+Qn?(Tn*=_i=Gn/(2*Tn+Qn),Qn*=_i):(ui=Math.floor((Gn+Qn)/(Tn+Qn)),Ws=(Gn-ui*Tn)/(ui-1),Qn=(Cr=(Gn-(ui+1)*Tn)/ui)<=0||Math.abs(Qn-Ws)<Math.abs(Qn-Cr)?Ws:Cr),wr&&this.ctx.setLineDash(3===ie?[0,Tn+Qn]:[Tn,Qn]),3===ie?(this.ctx.lineCap="round",this.ctx.lineWidth=L):this.ctx.lineWidth=2*L+1.1,this.ctx.strokeStyle=Ca(D),this.ctx.stroke(),this.ctx.setLineDash([]),2===ie&&(xl(xe[0])&&(ir=xe[3],Yn=xe[0],this.ctx.beginPath(),this.formatPath([new Xn(ir.end.x,ir.end.y),new Xn(Yn.start.x,Yn.start.y)]),this.ctx.stroke()),xl(xe[1])&&(ir=xe[1],Yn=xe[2],this.ctx.beginPath(),this.formatPath([new Xn(ir.end.x,ir.end.y),new Xn(Yn.start.x,Yn.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},S.prototype.render=function(D){return Ee(this,void 0,void 0,function(){var L;return Ne(this,function(O){switch(O.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ca(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),L=function(E){var S=new dL(E,null),D=new Qp(S),L=[];return tw(S,D,D,L),mA(S.container,L),D}(D),[4,this.renderStack(L)];case 1:return O.sent(),this.applyEffects([]),[2,this.canvas]}})})},S}(yL),sw=function(E){return E instanceof Ny||E instanceof Oy||E instanceof rA&&E.type!==K6&&E.type!==iA},ow=function(E,S){switch(E){case 0:return Up(S);case 2:return function(E){return[E.topLeftContentBox,E.topRightContentBox,E.bottomRightContentBox,E.bottomLeftContentBox]}(S);default:return r3(S)}},aw=function(E){switch(E){case 1:return"center";case 2:return"right";default:return"left"}},wL=["-apple-system","system-ui"],cw=function(E){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?E.filter(function(S){return-1===wL.indexOf(S)}):E},lw=function(E){function S(D,L){var O=E.call(this,D,L)||this;return O.canvas=L.canvas?L.canvas:document.createElement("canvas"),O.ctx=O.canvas.getContext("2d"),O.options=L,O.canvas.width=Math.floor(L.width*L.scale),O.canvas.height=Math.floor(L.height*L.scale),O.canvas.style.width=L.width+"px",O.canvas.style.height=L.height+"px",O.ctx.scale(O.options.scale,O.options.scale),O.ctx.translate(-L.x,-L.y),O.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+L.width+"x"+L.height+" at "+L.x+","+L.y+") with scale "+L.scale),O}return Me(S,E),S.prototype.render=function(D){return Ee(this,void 0,void 0,function(){var L,O;return Ne(this,function(G){switch(G.label){case 0:return L=By(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,D),[4,_A(L)];case 1:return O=G.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ca(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(O,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},S}(yL),_A=function(E){return new Promise(function(S,D){var L=new Image;L.onload=function(){S(L)},L.onerror=D,L.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(E))})},ZV=function(){function E(S){var L=S.enabled;this.id=S.id,this.enabled=L,this.start=Date.now()}return E.prototype.debug=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.debug?console.debug.apply(console,ze([this.id,this.getTime()+"ms"],S)):this.info.apply(this,S))},E.prototype.getTime=function(){return Date.now()-this.start},E.prototype.info=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&typeof window<"u"&&window.console&&"function"==typeof console.info&&console.info.apply(console,ze([this.id,this.getTime()+"ms"],S))},E.prototype.warn=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.warn?console.warn.apply(console,ze([this.id,this.getTime()+"ms"],S)):this.info.apply(this,S))},E.prototype.error=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.error?console.error.apply(console,ze([this.id,this.getTime()+"ms"],S)):this.info.apply(this,S))},E.instances={},E}(),CL=function(){function E(S,D){var L;this.windowBounds=D,this.instanceName="#"+E.instanceCount++,this.logger=new ZV({id:this.instanceName,enabled:S.logging}),this.cache=null!==(L=S.cache)&&void 0!==L?L:new rL(this,S)}return E.instanceCount=1,E}();typeof window<"u"&&Zy.setContext(window);var uw=function(E,S){return Ee(void 0,void 0,void 0,function(){var D,L,O,G,ie,ye,xe,Ze,lt,dt,Ft,Gn,Tn,Qn,wr,_i,ui,Ws,Cr,ir,Yn,Is,Ni,D1,Y1,fn,yo,c2,s3,Yo,Q2,Ch,Pc,C0,mu,bh,Au,vu;return Ne(this,function(b0){switch(b0.label){case 0:if(!E||"object"!=typeof E)return[2,Promise.reject("Invalid element provided as first argument")];if(!(D=E.ownerDocument))throw new Error("Element is not attached to a Document");if(!(L=D.defaultView))throw new Error("Document is not attached to a Window");return O={allowTaint:null!==(Is=S.allowTaint)&&void 0!==Is&&Is,imageTimeout:null!==(Ni=S.imageTimeout)&&void 0!==Ni?Ni:15e3,proxy:S.proxy,useCORS:null!==(D1=S.useCORS)&&void 0!==D1&&D1},G=ue({logging:null===(Y1=S.logging)||void 0===Y1||Y1,cache:S.cache},O),ie={windowWidth:null!==(fn=S.windowWidth)&&void 0!==fn?fn:L.innerWidth,windowHeight:null!==(yo=S.windowHeight)&&void 0!==yo?yo:L.innerHeight,scrollX:null!==(c2=S.scrollX)&&void 0!==c2?c2:L.pageXOffset,scrollY:null!==(s3=S.scrollY)&&void 0!==s3?s3:L.pageYOffset},ye=new Re(ie.scrollX,ie.scrollY,ie.windowWidth,ie.windowHeight),xe=new CL(G,ye),Ze=null!==(Yo=S.foreignObjectRendering)&&void 0!==Yo&&Yo,lt={allowTaint:null!==(Q2=S.allowTaint)&&void 0!==Q2&&Q2,onclone:S.onclone,ignoreElements:S.ignoreElements,inlineImages:Ze,copyStyles:Ze},xe.logger.debug("Starting document clone with size "+ye.width+"x"+ye.height+" scrolled to "+-ye.left+","+-ye.top),dt=new eL(xe,E,lt),(Ft=dt.clonedReferenceElement)?[4,dt.toIFrame(D,ye)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Gn=b0.sent(),Tn=Cs(Ft)||function(E){return"HTML"===E.tagName}(Ft)?function(E){var S=E.body,D=E.documentElement;if(!S||!D)throw new Error("Unable to get document size");var L=Math.max(Math.max(S.scrollWidth,D.scrollWidth),Math.max(S.offsetWidth,D.offsetWidth),Math.max(S.clientWidth,D.clientWidth)),O=Math.max(Math.max(S.scrollHeight,D.scrollHeight),Math.max(S.offsetHeight,D.offsetHeight),Math.max(S.clientHeight,D.clientHeight));return new Re(0,0,L,O)}(Ft.ownerDocument):Ie(xe,Ft),Qn=Tn.width,wr=Tn.height,_i=Tn.left,ui=Tn.top,Ws=hw(xe,Ft,S.backgroundColor),Cr={canvas:S.canvas,backgroundColor:Ws,scale:null!==(Pc=null!==(Ch=S.scale)&&void 0!==Ch?Ch:L.devicePixelRatio)&&void 0!==Pc?Pc:1,x:(null!==(C0=S.x)&&void 0!==C0?C0:0)+_i,y:(null!==(mu=S.y)&&void 0!==mu?mu:0)+ui,width:null!==(bh=S.width)&&void 0!==bh?bh:Math.ceil(Qn),height:null!==(Au=S.height)&&void 0!==Au?Au:Math.ceil(wr)},Ze?(xe.logger.debug("Document cloned, using foreign object rendering"),[4,new lw(xe,Cr).render(Ft)]):[3,3];case 2:return ir=b0.sent(),[3,5];case 3:return xe.logger.debug("Document cloned, element located at "+_i+","+ui+" with size "+Qn+"x"+wr+" using computed rendering"),xe.logger.debug("Starting DOM parsing"),Yn=Jf(xe,Ft),Ws===Yn.styles.backgroundColor&&(Yn.styles.backgroundColor=S1.TRANSPARENT),xe.logger.debug("Starting renderer for element at "+Cr.x+","+Cr.y+" with size "+Cr.width+"x"+Cr.height),[4,new vA(xe,Cr).render(Yn)];case 4:ir=b0.sent(),b0.label=5;case 5:return(!(null!==(vu=S.removeContainer)&&void 0!==vu)||vu)&&(eL.destroy(Gn)||xe.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),xe.logger.debug("Finished rendering"),[2,ir]}})})},hw=function(E,S,D){var L=S.ownerDocument,O=L.documentElement?To(E,getComputedStyle(L.documentElement).backgroundColor):S1.TRANSPARENT,G=L.body?To(E,getComputedStyle(L.body).backgroundColor):S1.TRANSPARENT,ie="string"==typeof D?To(E,D):null===D?S1.TRANSPARENT:4294967295;return S===L.documentElement?mc(O)?mc(G)?ie:G:O:ie};return function(E,S){return void 0===S&&(S={}),uw(E,S)}}()},3407:(Nt,nt,Me)=>{"use strict";var ue=Me(6259)(),Ne=Me(5834)("Object.prototype.toString"),ze=function(ct){return!(ue&&ct&&"object"==typeof ct&&Symbol.toStringTag in ct)&&"[object Arguments]"===Ne(ct)},Re=function(ct){return!!ze(ct)||null!==ct&&"object"==typeof ct&&"number"==typeof ct.length&&ct.length>=0&&"[object Array]"!==Ne(ct)&&"[object Function]"===Ne(ct.callee)},Ie=function(){return ze(arguments)}();ze.isLegacyArguments=Re,Nt.exports=Ie?ze:Re},2374:(Nt,nt,Me)=>{"use strict";var ue=Date.prototype.getDay,Ne=Object.prototype.toString,Re=Me(6259)();Nt.exports=function(We){return"object"==typeof We&&null!==We&&(Re?function(We){try{return ue.call(We),!0}catch{return!1}}(We):"[object Date]"===Ne.call(We))}},2342:(Nt,nt,Me)=>{"use strict";var Ne,ze,Re,Ie,ue=Me(5834),Ee=Me(6259)();if(Ee){Ne=ue("Object.prototype.hasOwnProperty"),ze=ue("RegExp.prototype.exec"),Re={};var We=function(){throw Re};Ie={toString:We,valueOf:We},"symbol"==typeof Symbol.toPrimitive&&(Ie[Symbol.toPrimitive]=We)}var ct=ue("Object.prototype.toString"),ft=Object.getOwnPropertyDescriptor;Nt.exports=Ee?function(st){if(!st||"object"!=typeof st)return!1;var yt=ft(st,"lastIndex");if(!yt||!Ne(yt,"value"))return!1;try{ze(st,Ie)}catch(Ve){return Ve===Re}}:function(st){return!(!st||"object"!=typeof st&&"function"!=typeof st)&&"[object RegExp]"===ct(st)}},5943:Nt=>{"use strict";var nt=Object.getOwnPropertySymbols,Me=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;function Ee(ze){if(null==ze)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(ze)}Nt.exports=function Ne(){try{if(!Object.assign)return!1;var ze=new String("abc");if(ze[5]="de","5"===Object.getOwnPropertyNames(ze)[0])return!1;for(var Re={},Ie=0;Ie<10;Ie++)Re["_"+String.fromCharCode(Ie)]=Ie;if("0123456789"!==Object.getOwnPropertyNames(Re).map(function(ft){return Re[ft]}).join(""))return!1;var ct={};return"abcdefghijklmnopqrst".split("").forEach(function(ft){ct[ft]=ft}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},ct)).join("")}catch{return!1}}()?Object.assign:function(ze,Re){for(var Ie,ct,We=Ee(ze),ft=1;ft<arguments.length;ft++){for(var Vt in Ie=Object(arguments[ft]))Me.call(Ie,Vt)&&(We[Vt]=Ie[Vt]);if(nt){ct=nt(Ie);for(var Ct=0;Ct<ct.length;Ct++)ue.call(Ie,ct[Ct])&&(We[ct[Ct]]=Ie[ct[Ct]])}}return We}},1175:Nt=>{"use strict";var nt=function(Me){return Me!=Me};Nt.exports=function(ue,Ee){return 0===ue&&0===Ee?1/ue==1/Ee:!!(ue===Ee||nt(ue)&&nt(Ee))}},2e3:(Nt,nt,Me)=>{"use strict";var ue=Me(2358),Ee=Me(5685),Ne=Me(1175),ze=Me(6305),Re=Me(3859),Ie=Ee(ze(),Object);ue(Ie,{getPolyfill:ze,implementation:Ne,shim:Re}),Nt.exports=Ie},6305:(Nt,nt,Me)=>{"use strict";var ue=Me(1175);Nt.exports=function(){return"function"==typeof Object.is?Object.is:ue}},3859:(Nt,nt,Me)=>{"use strict";var ue=Me(6305),Ee=Me(2358);Nt.exports=function(){var ze=ue();return Ee(Object,{is:ze},{is:function(){return Object.is!==ze}}),ze}},2450:(Nt,nt,Me)=>{"use strict";var ue;if(!Object.keys){var Ee=Object.prototype.hasOwnProperty,Ne=Object.prototype.toString,ze=Me(9978),Re=Object.prototype.propertyIsEnumerable,Ie=!Re.call({toString:null},"toString"),We=Re.call(function(){},"prototype"),ct=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ft=function(yt){var qt=yt.constructor;return qt&&qt.prototype===yt},Vt={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Ct=function(){if(typeof window>"u")return!1;for(var yt in window)try{if(!Vt["$"+yt]&&Ee.call(window,yt)&&null!==window[yt]&&"object"==typeof window[yt])try{ft(window[yt])}catch{return!0}}catch{return!0}return!1}();ue=function(qt){var Ve=null!==qt&&"object"==typeof qt,Xe="[object Function]"===Ne.call(qt),j=ze(qt),X=Ve&&"[object String]"===Ne.call(qt),Y=[];if(!Ve&&!Xe&&!j)throw new TypeError("Object.keys called on a non-object");var we=We&&Xe;if(X&&qt.length>0&&!Ee.call(qt,0))for(var Z=0;Z<qt.length;++Z)Y.push(String(Z));if(j&&qt.length>0)for(var se=0;se<qt.length;++se)Y.push(String(se));else for(var ce in qt)(!we||"prototype"!==ce)&&Ee.call(qt,ce)&&Y.push(String(ce));if(Ie)for(var $=function(yt){if(typeof window>"u"||!Ct)return ft(yt);try{return ft(yt)}catch{return!1}}(qt),je=0;je<ct.length;++je)(!$||"constructor"!==ct[je])&&Ee.call(qt,ct[je])&&Y.push(ct[je]);return Y}}Nt.exports=ue},1356:(Nt,nt,Me)=>{"use strict";var ue=Array.prototype.slice,Ee=Me(9978),Ne=Object.keys,ze=Ne?function(We){return Ne(We)}:Me(2450),Re=Object.keys;ze.shim=function(){if(Object.keys){var We=function(){var ct=Object.keys(arguments);return ct&&ct.length===arguments.length}(1,2);We||(Object.keys=function(ft){return Ee(ft)?Re(ue.call(ft)):Re(ft)})}else Object.keys=ze;return Object.keys||ze},Nt.exports=ze},9978:Nt=>{"use strict";var nt=Object.prototype.toString;Nt.exports=function(ue){var Ee=nt.call(ue),Ne="[object Arguments]"===Ee;return Ne||(Ne="[object Array]"!==Ee&&null!==ue&&"object"==typeof ue&&"number"==typeof ue.length&&ue.length>=0&&"[object Function]"===nt.call(ue.callee)),Ne}},1766:Nt=>{Nt.exports=function(Me,ue,Ee,Ne){var ze=Me[0],Re=Me[1],Ie=!1;void 0===Ee&&(Ee=0),void 0===Ne&&(Ne=ue.length);for(var We=(Ne-Ee)/2,ct=0,ft=We-1;ct<We;ft=ct++){var Vt=ue[Ee+2*ct+0],Ct=ue[Ee+2*ct+1],yt=ue[Ee+2*ft+1];Ct>Re!=yt>Re&&ze<(ue[Ee+2*ft+0]-Vt)*(Re-Ct)/(yt-Ct)+Vt&&(Ie=!Ie)}return Ie}},3870:(Nt,nt,Me)=>{var ue=Me(1766),Ee=Me(2260);Nt.exports=function(ze,Re,Ie,We){return Re.length>0&&Array.isArray(Re[0])?Ee(ze,Re,Ie,We):ue(ze,Re,Ie,We)},Nt.exports.nested=Ee,Nt.exports.flat=ue},2260:Nt=>{Nt.exports=function(Me,ue,Ee,Ne){var ze=Me[0],Re=Me[1],Ie=!1;void 0===Ee&&(Ee=0),void 0===Ne&&(Ne=ue.length);for(var We=Ne-Ee,ct=0,ft=We-1;ct<We;ft=ct++){var Vt=ue[ct+Ee][0],Ct=ue[ct+Ee][1],yt=ue[ft+Ee][1];Ct>Re!=yt>Re&&ze<(ue[ft+Ee][0]-Vt)*(Re-Ct)/(yt-Ct)+Vt&&(Ie=!Ie)}return Ie}},9855:function(Nt){Nt.exports=function(){"use strict";function nt(it,le){if(!(it instanceof le))throw new TypeError("Cannot call a class as a function")}function Me(it,le){for(var te=0;te<le.length;te++){var J=le[te];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(it,J.key,J)}}function ue(it,le,te){return le&&Me(it.prototype,le),te&&Me(it,te),it}var Ee=function it(le,te){this.next=null,this.key=le,this.data=te,this.left=null,this.right=null};function Ne(it,le){return it>le?1:it<le?-1:0}function ze(it,le,te){for(var J=new Ee(null,null),Te=J,$e=J;;){var mt=te(it,le.key);if(mt<0){if(null===le.left)break;if(te(it,le.left.key)<0&&(le.left=(Ut=le.left).right,Ut.right=le,null===(le=Ut).left))break;$e.left=le,$e=le,le=le.left}else{if(!(mt>0))break;if(null===le.right)break;var Ut;if(te(it,le.right.key)>0&&(le.right=(Ut=le.right).left,Ut.left=le,null===(le=Ut).right))break;Te.right=le,Te=le,le=le.right}}return Te.right=le.left,$e.left=le.right,le.left=J.right,le.right=J.left,le}function Re(it,le,te,J){var Te=new Ee(it,le);if(null===te)return Te.left=Te.right=null,Te;var $e=J(it,(te=ze(it,te,J)).key);return $e<0?(Te.left=te.left,Te.right=te,te.left=null):$e>=0&&(Te.right=te.right,Te.left=te,te.right=null),Te}function Ie(it,le,te){var J=null,Te=null;if(le){var $e=te((le=ze(it,le,te)).key,it);0===$e?(J=le.left,Te=le.right):$e<0?(Te=le.right,le.right=null,J=le):(J=le.left,le.left=null,Te=le)}return{left:J,right:Te}}function ct(it,le,te,J,Te){if(it){J(le+(te?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+Te(it)+"\n");var $e=le+(te?"    ":"\u2502   ");it.left&&ct(it.left,$e,!1,J,Te),it.right&&ct(it.right,$e,!0,J,Te)}}var ft=function(){function it(le){void 0===le&&(le=Ne),this._root=null,this._size=0,this._comparator=le}return it.prototype.insert=function(le,te){return this._size++,this._root=Re(le,te,this._root,this._comparator)},it.prototype.add=function(le,te){var J=new Ee(le,te);null===this._root&&(J.left=J.right=null,this._size++,this._root=J);var Te=this._comparator,$e=ze(le,this._root,Te),mt=Te(le,$e.key);return 0===mt?this._root=$e:(mt<0?(J.left=$e.left,J.right=$e,$e.left=null):mt>0&&(J.right=$e.right,J.left=$e,$e.right=null),this._size++,this._root=J),this._root},it.prototype.remove=function(le){this._root=this._remove(le,this._root,this._comparator)},it.prototype._remove=function(le,te,J){var Te;return null===te?null:0===J(le,(te=ze(le,te,J)).key)?(null===te.left?Te=te.right:(Te=ze(le,te.left,J)).right=te.right,this._size--,Te):te},it.prototype.pop=function(){var le=this._root;if(le){for(;le.left;)le=le.left;return this._root=ze(le.key,this._root,this._comparator),this._root=this._remove(le.key,this._root,this._comparator),{key:le.key,data:le.data}}return null},it.prototype.findStatic=function(le){for(var te=this._root,J=this._comparator;te;){var Te=J(le,te.key);if(0===Te)return te;te=Te<0?te.left:te.right}return null},it.prototype.find=function(le){return this._root&&(this._root=ze(le,this._root,this._comparator),0!==this._comparator(le,this._root.key))?null:this._root},it.prototype.contains=function(le){for(var te=this._root,J=this._comparator;te;){var Te=J(le,te.key);if(0===Te)return!0;te=Te<0?te.left:te.right}return!1},it.prototype.forEach=function(le,te){for(var J=this._root,Te=[],$e=!1;!$e;)null!==J?(Te.push(J),J=J.left):0!==Te.length?(J=Te.pop(),le.call(te,J),J=J.right):$e=!0;return this},it.prototype.range=function(le,te,J,Te){for(var $e=[],mt=this._comparator,Ut=this._root;0!==$e.length||Ut;)if(Ut)$e.push(Ut),Ut=Ut.left;else{if(mt((Ut=$e.pop()).key,te)>0)break;if(mt(Ut.key,le)>=0&&J.call(Te,Ut))return this;Ut=Ut.right}return this},it.prototype.keys=function(){var le=[];return this.forEach(function(te){return le.push(te.key)}),le},it.prototype.values=function(){var le=[];return this.forEach(function(te){return le.push(te.data)}),le},it.prototype.min=function(){return this._root?this.minNode(this._root).key:null},it.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},it.prototype.minNode=function(le){if(void 0===le&&(le=this._root),le)for(;le.left;)le=le.left;return le},it.prototype.maxNode=function(le){if(void 0===le&&(le=this._root),le)for(;le.right;)le=le.right;return le},it.prototype.at=function(le){for(var te=this._root,J=!1,Te=0,$e=[];!J;)if(te)$e.push(te),te=te.left;else if($e.length>0){if(te=$e.pop(),Te===le)return te;Te++,te=te.right}else J=!0;return null},it.prototype.next=function(le){var te=this._root,J=null;if(le.right){for(J=le.right;J.left;)J=J.left;return J}for(var Te=this._comparator;te;){var $e=Te(le.key,te.key);if(0===$e)break;$e<0?(J=te,te=te.left):te=te.right}return J},it.prototype.prev=function(le){var te=this._root,J=null;if(null!==le.left){for(J=le.left;J.right;)J=J.right;return J}for(var Te=this._comparator;te;){var $e=Te(le.key,te.key);if(0===$e)break;$e<0?te=te.left:(J=te,te=te.right)}return J},it.prototype.clear=function(){return this._root=null,this._size=0,this},it.prototype.toList=function(){return function st(it){for(var le=it,te=[],J=!1,Te=new Ee(null,null),$e=Te;!J;)le?(te.push(le),le=le.left):te.length>0?le=(le=$e=$e.next=te.pop()).right:J=!0;return $e.next=null,Te.next}(this._root)},it.prototype.load=function(le,te,J){void 0===te&&(te=[]),void 0===J&&(J=!1);var Te=le.length,$e=this._comparator;if(J&&Ve(le,te,0,Te-1,$e),null===this._root)this._root=Vt(le,te,0,Te),this._size=Te;else{var mt=function qt(it,le,te){for(var J=new Ee(null,null),Te=J,$e=it,mt=le;null!==$e&&null!==mt;)te($e.key,mt.key)<0?(Te.next=$e,$e=$e.next):(Te.next=mt,mt=mt.next),Te=Te.next;return null!==$e?Te.next=$e:null!==mt&&(Te.next=mt),J.next}(this.toList(),function Ct(it,le){for(var te=new Ee(null,null),J=te,Te=0;Te<it.length;Te++)J=J.next=new Ee(it[Te],le[Te]);return J.next=null,te.next}(le,te),$e);this._root=yt({head:mt},0,Te=this._size+Te)}return this},it.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(it.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(it.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),it.prototype.toString=function(le){void 0===le&&(le=function(Te){return String(Te.key)});var te=[];return ct(this._root,"",!0,function(J){return te.push(J)},le),te.join("")},it.prototype.update=function(le,te,J){var Te=this._comparator,$e=Ie(le,this._root,Te),mt=$e.left,Ut=$e.right;Te(le,te)<0?Ut=Re(te,J,Ut,Te):mt=Re(te,J,mt,Te),this._root=function We(it,le,te){return null===le?it:(null===it||((le=ze(it.key,le,te)).left=it),le)}(mt,Ut,Te)},it.prototype.split=function(le){return Ie(le,this._root,this._comparator)},it}();function Vt(it,le,te,J){var Te=J-te;if(Te>0){var $e=te+Math.floor(Te/2),Kt=new Ee(it[$e],le[$e]);return Kt.left=Vt(it,le,te,$e),Kt.right=Vt(it,le,$e+1,J),Kt}return null}function yt(it,le,te){var J=te-le;if(J>0){var Te=le+Math.floor(J/2),$e=yt(it,le,Te),mt=it.head;return mt.left=$e,it.head=it.head.next,mt.right=yt(it,Te+1,te),mt}return null}function Ve(it,le,te,J,Te){if(!(te>=J)){for(var $e=it[te+J>>1],mt=te-1,Ut=J+1;;){do{mt++}while(Te(it[mt],$e)<0);do{Ut--}while(Te(it[Ut],$e)>0);if(mt>=Ut)break;var Kt=it[mt];it[mt]=it[Ut],it[Ut]=Kt,Kt=le[mt],le[mt]=le[Ut],le[Ut]=Kt}Ve(it,le,te,Ut,Te),Ve(it,le,Ut+1,J,Te)}}var Xe=function(le,te){return le.ll.x<=te.x&&te.x<=le.ur.x&&le.ll.y<=te.y&&te.y<=le.ur.y},j=function(le,te){return te.ur.x<le.ll.x||le.ur.x<te.ll.x||te.ur.y<le.ll.y||le.ur.y<te.ll.y?null:{ll:{x:le.ll.x<te.ll.x?te.ll.x:le.ll.x,y:le.ll.y<te.ll.y?te.ll.y:le.ll.y},ur:{x:le.ur.x<te.ur.x?le.ur.x:te.ur.x,y:le.ur.y<te.ur.y?le.ur.y:te.ur.y}}},X=Number.EPSILON;void 0===X&&(X=Math.pow(2,-52));var Y=X*X,we=function(le,te){if(-X<le&&le<X&&-X<te&&te<X)return 0;var J=le-te;return J*J<Y*le*te?0:le<te?-1:1},Z=function(){function it(){nt(this,it),this.reset()}return ue(it,[{key:"reset",value:function(){this.xRounder=new se,this.yRounder=new se}},{key:"round",value:function(te,J){return{x:this.xRounder.round(te),y:this.yRounder.round(J)}}}]),it}(),se=function(){function it(){nt(this,it),this.tree=new ft,this.round(0)}return ue(it,[{key:"round",value:function(te){var J=this.tree.add(te),Te=this.tree.prev(J);if(null!==Te&&0===we(J.key,Te.key))return this.tree.remove(te),Te.key;var $e=this.tree.next(J);return null!==$e&&0===we(J.key,$e.key)?(this.tree.remove(te),$e.key):te}}]),it}(),ce=new Z,$=function(le,te){return le.x*te.y-le.y*te.x},je=function(le,te){return le.x*te.x+le.y*te.y},Be=function(le,te,J){var mt=$({x:te.x-le.x,y:te.y-le.y},{x:J.x-le.x,y:J.y-le.y});return we(mt,0)},He=function(le){return Math.sqrt(je(le,le))},oe=function(le,te,J){var Te={x:te.x-le.x,y:te.y-le.y},$e={x:J.x-le.x,y:J.y-le.y};return $($e,Te)/He($e)/He(Te)},kt=function(le,te,J){var Te={x:te.x-le.x,y:te.y-le.y},$e={x:J.x-le.x,y:J.y-le.y};return je($e,Te)/He($e)/He(Te)},At=function(le,te,J){return 0===te.y?null:{x:le.x+te.x/te.y*(J-le.y),y:J}},be=function(le,te,J){return 0===te.x?null:{x:J,y:le.y+te.y/te.x*(J-le.x)}},Ce=function(){function it(le,te){nt(this,it),void 0===le.events?le.events=[this]:le.events.push(this),this.point=le,this.isLeft=te}return ue(it,null,[{key:"compare",value:function(te,J){var Te=it.comparePoints(te.point,J.point);return 0!==Te?Te:(te.point!==J.point&&te.link(J),te.isLeft!==J.isLeft?te.isLeft?1:-1:rt.compare(te.segment,J.segment))}},{key:"comparePoints",value:function(te,J){return te.x<J.x?-1:te.x>J.x?1:te.y<J.y?-1:te.y>J.y?1:0}}]),ue(it,[{key:"link",value:function(te){if(te.point===this.point)throw new Error("Tried to link already linked events");for(var J=te.point.events,Te=0,$e=J.length;Te<$e;Te++){var mt=J[Te];this.point.events.push(mt),mt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var te=this.point.events.length,J=0;J<te;J++){var Te=this.point.events[J];if(void 0===Te.segment.consumedBy)for(var $e=J+1;$e<te;$e++){var mt=this.point.events[$e];void 0===mt.consumedBy&&Te.otherSE.point.events===mt.otherSE.point.events&&Te.segment.consume(mt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var te=[],J=0,Te=this.point.events.length;J<Te;J++){var $e=this.point.events[J];$e!==this&&!$e.segment.ringOut&&$e.segment.isInResult()&&te.push($e)}return te}},{key:"getLeftmostComparator",value:function(te){var J=this,Te=new Map,$e=function(Ut){var Kt=Ut.otherSE;Te.set(Ut,{sine:oe(J.point,te.point,Kt.point),cosine:kt(J.point,te.point,Kt.point)})};return function(mt,Ut){Te.has(mt)||$e(mt),Te.has(Ut)||$e(Ut);var Kt=Te.get(mt),Mt=Kt.sine,bi=Kt.cosine,ki=Te.get(Ut),yn=ki.sine,Ii=ki.cosine;return Mt>=0&&yn>=0?bi<Ii?1:bi>Ii?-1:0:Mt<0&&yn<0?bi<Ii?-1:bi>Ii?1:0:yn<Mt?-1:yn>Mt?1:0}}}]),it}(),Qe=0,rt=function(){function it(le,te,J,Te){nt(this,it),this.id=++Qe,this.leftSE=le,le.segment=this,le.otherSE=te,this.rightSE=te,te.segment=this,te.otherSE=le,this.rings=J,this.windings=Te}return ue(it,null,[{key:"compare",value:function(te,J){var Te=te.leftSE.point.x,$e=J.leftSE.point.x,mt=te.rightSE.point.x,Ut=J.rightSE.point.x;if(Ut<Te)return 1;if(mt<$e)return-1;var Kt=te.leftSE.point.y,Mt=J.leftSE.point.y,bi=te.rightSE.point.y,ki=J.rightSE.point.y;if(Te<$e){if(Mt<Kt&&Mt<bi)return 1;if(Mt>Kt&&Mt>bi)return-1;var yn=te.comparePoint(J.leftSE.point);if(yn<0)return 1;if(yn>0)return-1;var Ii=J.comparePoint(te.rightSE.point);return 0!==Ii?Ii:-1}if(Te>$e){if(Kt<Mt&&Kt<ki)return-1;if(Kt>Mt&&Kt>ki)return 1;var vr=J.comparePoint(te.leftSE.point);if(0!==vr)return vr;var lr=te.comparePoint(J.rightSE.point);return lr<0?1:lr>0?-1:1}if(Kt<Mt)return-1;if(Kt>Mt)return 1;if(mt<Ut){var _r=J.comparePoint(te.rightSE.point);if(0!==_r)return _r}if(mt>Ut){var Vs=te.comparePoint(J.rightSE.point);if(Vs<0)return 1;if(Vs>0)return-1}if(mt!==Ut){var ya=bi-Kt,Go=mt-Te,Eo=ki-Mt,wa=Ut-$e;if(ya>Go&&Eo<wa)return 1;if(ya<Go&&Eo>wa)return-1}return mt>Ut?1:mt<Ut||bi<ki?-1:bi>ki?1:te.id<J.id?-1:te.id>J.id?1:0}}]),ue(it,[{key:"replaceRightSE",value:function(te){this.rightSE=te,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var te=this.leftSE.point.y,J=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:te<J?te:J},ur:{x:this.rightSE.point.x,y:te>J?te:J}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(te){return te.x===this.leftSE.point.x&&te.y===this.leftSE.point.y||te.x===this.rightSE.point.x&&te.y===this.rightSE.point.y}},{key:"comparePoint",value:function(te){if(this.isAnEndpoint(te))return 0;var J=this.leftSE.point,Te=this.rightSE.point,$e=this.vector();if(J.x===Te.x)return te.x===J.x?0:te.x<J.x?1:-1;if(te.x===J.x+(te.y-J.y)/$e.y*$e.x)return 0;var Mt=J.y+(te.x-J.x)/$e.x*$e.y;return te.y===Mt?0:te.y<Mt?-1:1}},{key:"getIntersection",value:function(te){var J=this.bbox(),Te=te.bbox(),$e=j(J,Te);if(null===$e)return null;var mt=this.leftSE.point,Ut=this.rightSE.point,Kt=te.leftSE.point,Mt=te.rightSE.point,bi=Xe(J,Kt)&&0===this.comparePoint(Kt),ki=Xe(Te,mt)&&0===te.comparePoint(mt),yn=Xe(J,Mt)&&0===this.comparePoint(Mt),Ii=Xe(Te,Ut)&&0===te.comparePoint(Ut);if(ki&&bi)return Ii&&!yn?Ut:!Ii&&yn?Mt:null;if(ki)return yn&&mt.x===Mt.x&&mt.y===Mt.y?null:mt;if(bi)return Ii&&Ut.x===Kt.x&&Ut.y===Kt.y?null:Kt;if(Ii&&yn)return null;if(Ii)return Ut;if(yn)return Mt;var vr=function(le,te,J,Te){if(0===te.x)return be(J,Te,le.x);if(0===Te.x)return be(le,te,J.x);if(0===te.y)return At(J,Te,le.y);if(0===Te.y)return At(le,te,J.y);var $e=$(te,Te);if(0==$e)return null;var mt={x:J.x-le.x,y:J.y-le.y},Ut=$(mt,te)/$e,Kt=$(mt,Te)/$e;return{x:(le.x+Kt*te.x+(J.x+Ut*Te.x))/2,y:(le.y+Kt*te.y+(J.y+Ut*Te.y))/2}}(mt,this.vector(),Kt,te.vector());return null!==vr&&Xe($e,vr)?ce.round(vr.x,vr.y):null}},{key:"split",value:function(te){var J=[],Te=void 0!==te.events,$e=new Ce(te,!0),mt=new Ce(te,!1),Ut=this.rightSE;this.replaceRightSE(mt),J.push(mt),J.push($e);var Kt=new it($e,Ut,this.rings.slice(),this.windings.slice());return Ce.comparePoints(Kt.leftSE.point,Kt.rightSE.point)>0&&Kt.swapEvents(),Ce.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Te&&($e.checkForConsuming(),mt.checkForConsuming()),J}},{key:"swapEvents",value:function(){var te=this.rightSE;this.rightSE=this.leftSE,this.leftSE=te,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var J=0,Te=this.windings.length;J<Te;J++)this.windings[J]*=-1}},{key:"consume",value:function(te){for(var J=this,Te=te;J.consumedBy;)J=J.consumedBy;for(;Te.consumedBy;)Te=Te.consumedBy;var $e=it.compare(J,Te);if(0!==$e){if($e>0){var mt=J;J=Te,Te=mt}if(J.prev===Te){var Ut=J;J=Te,Te=Ut}for(var Kt=0,Mt=Te.rings.length;Kt<Mt;Kt++){var bi=Te.rings[Kt],ki=Te.windings[Kt],yn=J.rings.indexOf(bi);-1===yn?(J.rings.push(bi),J.windings.push(ki)):J.windings[yn]+=ki}Te.rings=null,Te.windings=null,Te.consumedBy=J,Te.leftSE.consumedBy=J.leftSE,Te.rightSE.consumedBy=J.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var te=this.beforeState();this._afterState={rings:te.rings.slice(0),windings:te.windings.slice(0),multiPolys:[]};for(var J=this._afterState.rings,Te=this._afterState.windings,$e=this._afterState.multiPolys,mt=0,Ut=this.rings.length;mt<Ut;mt++){var Kt=this.rings[mt],Mt=this.windings[mt],bi=J.indexOf(Kt);-1===bi?(J.push(Kt),Te.push(Mt)):Te[bi]+=Mt}for(var ki=[],yn=[],Ii=0,vr=J.length;Ii<vr;Ii++)if(0!==Te[Ii]){var lr=J[Ii],_r=lr.poly;if(-1===yn.indexOf(_r))if(lr.isExterior)ki.push(_r);else{-1===yn.indexOf(_r)&&yn.push(_r);var Vs=ki.indexOf(lr.poly);-1!==Vs&&ki.splice(Vs,1)}}for(var ya=0,Go=ki.length;ya<Go;ya++){var Eo=ki[ya].multiPoly;-1===$e.indexOf(Eo)&&$e.push(Eo)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var te=this.beforeState().multiPolys,J=this.afterState().multiPolys;switch(on.type){case"union":this._isInResult=0===te.length!=(0===J.length);break;case"intersection":var mt,Ut;te.length<J.length?(mt=te.length,Ut=J.length):(mt=J.length,Ut=te.length),this._isInResult=Ut===on.numMultiPolys&&mt<Ut;break;case"xor":var Kt=Math.abs(te.length-J.length);this._isInResult=Kt%2==1;break;case"difference":var Mt=function(ki){return 1===ki.length&&ki[0].isSubject};this._isInResult=Mt(te)!==Mt(J);break;default:throw new Error("Unrecognized operation type found ".concat(on.type))}return this._isInResult}}],[{key:"fromRing",value:function(te,J,Te){var $e,mt,Ut,Kt=Ce.comparePoints(te,J);if(Kt<0)$e=te,mt=J,Ut=1;else{if(!(Kt>0))throw new Error("Tried to create degenerate segment at [".concat(te.x,", ").concat(te.y,"]"));$e=J,mt=te,Ut=-1}return new it(new Ce($e,!0),new Ce(mt,!1),[Te],[Ut])}}]),it}(),_e=function(){function it(le,te,J){if(nt(this,it),!Array.isArray(le)||0===le.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=te,this.isExterior=J,this.segments=[],"number"!=typeof le[0][0]||"number"!=typeof le[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Te=ce.round(le[0][0],le[0][1]);this.bbox={ll:{x:Te.x,y:Te.y},ur:{x:Te.x,y:Te.y}};for(var $e=Te,mt=1,Ut=le.length;mt<Ut;mt++){if("number"!=typeof le[mt][0]||"number"!=typeof le[mt][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Kt=ce.round(le[mt][0],le[mt][1]);Kt.x===$e.x&&Kt.y===$e.y||(this.segments.push(rt.fromRing($e,Kt,this)),Kt.x<this.bbox.ll.x&&(this.bbox.ll.x=Kt.x),Kt.y<this.bbox.ll.y&&(this.bbox.ll.y=Kt.y),Kt.x>this.bbox.ur.x&&(this.bbox.ur.x=Kt.x),Kt.y>this.bbox.ur.y&&(this.bbox.ur.y=Kt.y),$e=Kt)}(Te.x!==$e.x||Te.y!==$e.y)&&this.segments.push(rt.fromRing($e,Te,this))}return ue(it,[{key:"getSweepEvents",value:function(){for(var te=[],J=0,Te=this.segments.length;J<Te;J++){var $e=this.segments[J];te.push($e.leftSE),te.push($e.rightSE)}return te}}]),it}(),St=function(){function it(le,te){if(nt(this,it),!Array.isArray(le))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new _e(le[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var J=1,Te=le.length;J<Te;J++){var $e=new _e(le[J],this,!1);$e.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=$e.bbox.ll.x),$e.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=$e.bbox.ll.y),$e.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=$e.bbox.ur.x),$e.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=$e.bbox.ur.y),this.interiorRings.push($e)}this.multiPoly=te}return ue(it,[{key:"getSweepEvents",value:function(){for(var te=this.exteriorRing.getSweepEvents(),J=0,Te=this.interiorRings.length;J<Te;J++)for(var $e=this.interiorRings[J].getSweepEvents(),mt=0,Ut=$e.length;mt<Ut;mt++)te.push($e[mt]);return te}}]),it}(),Je=function(){function it(le,te){if(nt(this,it),!Array.isArray(le))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof le[0][0][0]&&(le=[le])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var J=0,Te=le.length;J<Te;J++){var $e=new St(le[J],this);$e.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=$e.bbox.ll.x),$e.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=$e.bbox.ll.y),$e.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=$e.bbox.ur.x),$e.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=$e.bbox.ur.y),this.polys.push($e)}this.isSubject=te}return ue(it,[{key:"getSweepEvents",value:function(){for(var te=[],J=0,Te=this.polys.length;J<Te;J++)for(var $e=this.polys[J].getSweepEvents(),mt=0,Ut=$e.length;mt<Ut;mt++)te.push($e[mt]);return te}}]),it}(),nn=function(){function it(le){nt(this,it),this.events=le;for(var te=0,J=le.length;te<J;te++)le[te].segment.ringOut=this;this.poly=null}return ue(it,null,[{key:"factory",value:function(te){for(var J=[],Te=0,$e=te.length;Te<$e;Te++){var mt=te[Te];if(mt.isInResult()&&!mt.ringOut){for(var Ut=null,Kt=mt.leftSE,Mt=mt.rightSE,bi=[Kt],ki=Kt.point,yn=[];Ut=Kt,bi.push(Kt=Mt),Kt.point!==ki;)for(;;){var Ii=Kt.getAvailableLinkedEvents();if(0===Ii.length){var vr=bi[0].point,lr=bi[bi.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(vr.x,",")+" ".concat(vr.y,"]. Last matching segment found ends at")+" [".concat(lr.x,", ").concat(lr.y,"]."))}if(1===Ii.length){Mt=Ii[0].otherSE;break}for(var _r=null,Vs=0,ya=yn.length;Vs<ya;Vs++)if(yn[Vs].point===Kt.point){_r=Vs;break}if(null===_r){yn.push({index:bi.length,point:Kt.point});var wa=Kt.getLeftmostComparator(Ut);Mt=Ii.sort(wa)[0].otherSE;break}var Go=yn.splice(_r)[0],Eo=bi.splice(Go.index);Eo.unshift(Eo[0].otherSE),J.push(new it(Eo.reverse()))}J.push(new it(bi))}}return J}}]),ue(it,[{key:"getGeom",value:function(){for(var te=this.events[0].point,J=[te],Te=1,$e=this.events.length-1;Te<$e;Te++){var mt=this.events[Te].point;0!==Be(mt,te,this.events[Te+1].point)&&(J.push(mt),te=mt)}if(1===J.length)return null;0===Be(J[0],te,J[1])&&J.shift(),J.push(J[0]);for(var bi=this.isExteriorRing()?1:-1,ki=this.isExteriorRing()?0:J.length-1,yn=this.isExteriorRing()?J.length:-1,Ii=[],vr=ki;vr!=yn;vr+=bi)Ii.push([J[vr].x,J[vr].y]);return Ii}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var te=this.enclosingRing();this._isExteriorRing=!te||!te.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var te=this.events[0],J=1,Te=this.events.length;J<Te;J++){var $e=this.events[J];Ce.compare(te,$e)>0&&(te=$e)}for(var mt=te.segment.prevInResult(),Ut=mt?mt.prevInResult():null;;){if(!mt)return null;if(!Ut)return mt.ringOut;if(Ut.ringOut!==mt.ringOut)return Ut.ringOut.enclosingRing()!==mt.ringOut?mt.ringOut:mt.ringOut.enclosingRing();mt=Ut.prevInResult(),Ut=mt?mt.prevInResult():null}}}]),it}(),vt=function(){function it(le){nt(this,it),this.exteriorRing=le,le.poly=this,this.interiorRings=[]}return ue(it,[{key:"addInterior",value:function(te){this.interiorRings.push(te),te.poly=this}},{key:"getGeom",value:function(){var te=[this.exteriorRing.getGeom()];if(null===te[0])return null;for(var J=0,Te=this.interiorRings.length;J<Te;J++){var $e=this.interiorRings[J].getGeom();null!==$e&&te.push($e)}return te}}]),it}(),xn=function(){function it(le){nt(this,it),this.rings=le,this.polys=this._composePolys(le)}return ue(it,[{key:"getGeom",value:function(){for(var te=[],J=0,Te=this.polys.length;J<Te;J++){var $e=this.polys[J].getGeom();null!==$e&&te.push($e)}return te}},{key:"_composePolys",value:function(te){for(var J=[],Te=0,$e=te.length;Te<$e;Te++){var mt=te[Te];if(!mt.poly)if(mt.isExteriorRing())J.push(new vt(mt));else{var Ut=mt.enclosingRing();Ut.poly||J.push(new vt(Ut)),Ut.poly.addInterior(mt)}}return J}}]),it}(),_n=function(){function it(le){var te=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rt.compare;nt(this,it),this.queue=le,this.tree=new ft(te),this.segments=[]}return ue(it,[{key:"process",value:function(te){var J=te.segment,Te=[];if(te.consumedBy)return te.isLeft?this.queue.remove(te.otherSE):this.tree.remove(J),Te;var $e=te.isLeft?this.tree.insert(J):this.tree.find(J);if(!$e)throw new Error("Unable to find segment #".concat(J.id," ")+"[".concat(J.leftSE.point.x,", ").concat(J.leftSE.point.y,"] -> ")+"[".concat(J.rightSE.point.x,", ").concat(J.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var mt=$e,Ut=$e,Kt=void 0,Mt=void 0;void 0===Kt;)null===(mt=this.tree.prev(mt))?Kt=null:void 0===mt.key.consumedBy&&(Kt=mt.key);for(;void 0===Mt;)null===(Ut=this.tree.next(Ut))?Mt=null:void 0===Ut.key.consumedBy&&(Mt=Ut.key);if(te.isLeft){var bi=null;if(Kt){var ki=Kt.getIntersection(J);if(null!==ki&&(J.isAnEndpoint(ki)||(bi=ki),!Kt.isAnEndpoint(ki)))for(var yn=this._splitSafely(Kt,ki),Ii=0,vr=yn.length;Ii<vr;Ii++)Te.push(yn[Ii])}var lr=null;if(Mt){var _r=Mt.getIntersection(J);if(null!==_r&&(J.isAnEndpoint(_r)||(lr=_r),!Mt.isAnEndpoint(_r)))for(var Vs=this._splitSafely(Mt,_r),ya=0,Go=Vs.length;ya<Go;ya++)Te.push(Vs[ya])}if(null!==bi||null!==lr){var Eo;Eo=null===bi?lr:null===lr||Ce.comparePoints(bi,lr)<=0?bi:lr,this.queue.remove(J.rightSE),Te.push(J.rightSE);for(var ys=J.split(Eo),j1=0,Qo=ys.length;j1<Qo;j1++)Te.push(ys[j1])}Te.length>0?(this.tree.remove(J),Te.push(te)):(this.segments.push(J),J.prev=Kt)}else{if(Kt&&Mt){var rn=Kt.getIntersection(Mt);if(null!==rn){if(!Kt.isAnEndpoint(rn))for(var H2=this._splitSafely(Kt,rn),lc=0,Bi=H2.length;lc<Bi;lc++)Te.push(H2[lc]);if(!Mt.isAnEndpoint(rn))for(var Yc=this._splitSafely(Mt,rn),uo=0,ul=Yc.length;uo<ul;uo++)Te.push(Yc[uo])}}this.tree.remove(J)}return Te}},{key:"_splitSafely",value:function(te,J){this.tree.remove(te);var Te=te.rightSE;this.queue.remove(Te);var $e=te.split(J);return $e.push(Te),void 0===te.consumedBy&&this.tree.insert(te),$e}}]),it}(),ci=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,$t=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,on=new(function(){function it(){nt(this,it)}return ue(it,[{key:"run",value:function(te,J,Te){on.type=te,ce.reset();for(var $e=[new Je(J,!0)],mt=0,Ut=Te.length;mt<Ut;mt++)$e.push(new Je(Te[mt],!1));if(on.numMultiPolys=$e.length,"difference"===on.type)for(var Kt=$e[0],Mt=1;Mt<$e.length;)null!==j($e[Mt].bbox,Kt.bbox)?Mt++:$e.splice(Mt,1);if("intersection"===on.type)for(var bi=0,ki=$e.length;bi<ki;bi++)for(var yn=$e[bi],Ii=bi+1,vr=$e.length;Ii<vr;Ii++)if(null===j(yn.bbox,$e[Ii].bbox))return[];for(var lr=new ft(Ce.compare),_r=0,Vs=$e.length;_r<Vs;_r++)for(var ya=$e[_r].getSweepEvents(),Go=0,Eo=ya.length;Go<Eo;Go++)if(lr.insert(ya[Go]),lr.size>ci)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var wa=new _n(lr),ys=lr.size,j1=lr.pop();j1;){var Qo=j1.key;if(lr.size===ys){var rn=Qo.segment;throw new Error("Unable to pop() ".concat(Qo.isLeft?"left":"right"," SweepEvent ")+"[".concat(Qo.point.x,", ").concat(Qo.point.y,"] from segment #").concat(rn.id," ")+"[".concat(rn.leftSE.point.x,", ").concat(rn.leftSE.point.y,"] -> ")+"[".concat(rn.rightSE.point.x,", ").concat(rn.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(lr.size>ci)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(wa.segments.length>$t)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var H2=wa.process(Qo),lc=0,Bi=H2.length;lc<Bi;lc++){var Yc=H2[lc];void 0===Yc.consumedBy&&lr.insert(Yc)}ys=lr.size,j1=lr.pop()}ce.reset();var uo=nn.factory(wa.segments);return new xn(uo).getGeom()}}]),it}());return{union:function(le){for(var te=arguments.length,J=new Array(te>1?te-1:0),Te=1;Te<te;Te++)J[Te-1]=arguments[Te];return on.run("union",le,J)},intersection:function(le){for(var te=arguments.length,J=new Array(te>1?te-1:0),Te=1;Te<te;Te++)J[Te-1]=arguments[Te];return on.run("intersection",le,J)},xor:function(le){for(var te=arguments.length,J=new Array(te>1?te-1:0),Te=1;Te<te;Te++)J[Te-1]=arguments[Te];return on.run("xor",le,J)},difference:function(le){for(var te=arguments.length,J=new Array(te>1?te-1:0),Te=1;Te<te;Te++)J[Te-1]=arguments[Te];return on.run("difference",le,J)}}}()},2402:function(Nt){Nt.exports=function(){"use strict";function nt(Ve,Xe,j,X,Y){!function we(Z,se,ce,$,je){for(;$>ce;){if($-ce>600){var Be=$-ce+1,He=se-ce+1,oe=Math.log(Be),kt=.5*Math.exp(2*oe/3),At=.5*Math.sqrt(oe*kt*(Be-kt)/Be)*(He-Be/2<0?-1:1);we(Z,se,Math.max(ce,Math.floor(se-He*kt/Be+At)),Math.min($,Math.floor(se+(Be-He)*kt/Be+At)),je)}var Ce=Z[se],Qe=ce,rt=$;for(Me(Z,ce,se),je(Z[$],Ce)>0&&Me(Z,ce,$);Qe<rt;){for(Me(Z,Qe,rt),Qe++,rt--;je(Z[Qe],Ce)<0;)Qe++;for(;je(Z[rt],Ce)>0;)rt--}0===je(Z[ce],Ce)?Me(Z,ce,rt):Me(Z,++rt,$),rt<=se&&(ce=rt+1),se<=rt&&($=rt-1)}}(Ve,Xe,j||0,X||Ve.length-1,Y||ue)}function Me(Ve,Xe,j){var X=Ve[Xe];Ve[Xe]=Ve[j],Ve[j]=X}function ue(Ve,Xe){return Ve<Xe?-1:Ve>Xe?1:0}var Ee=function(Ve){void 0===Ve&&(Ve=9),this._maxEntries=Math.max(4,Ve),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Ne(Ve,Xe,j){if(!j)return Xe.indexOf(Ve);for(var X=0;X<Xe.length;X++)if(j(Ve,Xe[X]))return X;return-1}function ze(Ve,Xe){Re(Ve,0,Ve.children.length,Xe,Ve)}function Re(Ve,Xe,j,X,Y){Y||(Y=yt(null)),Y.minX=1/0,Y.minY=1/0,Y.maxX=-1/0,Y.maxY=-1/0;for(var we=Xe;we<j;we++){var Z=Ve.children[we];Ie(Y,Ve.leaf?X(Z):Z)}return Y}function Ie(Ve,Xe){return Ve.minX=Math.min(Ve.minX,Xe.minX),Ve.minY=Math.min(Ve.minY,Xe.minY),Ve.maxX=Math.max(Ve.maxX,Xe.maxX),Ve.maxY=Math.max(Ve.maxY,Xe.maxY),Ve}function We(Ve,Xe){return Ve.minX-Xe.minX}function ct(Ve,Xe){return Ve.minY-Xe.minY}function ft(Ve){return(Ve.maxX-Ve.minX)*(Ve.maxY-Ve.minY)}function Vt(Ve){return Ve.maxX-Ve.minX+(Ve.maxY-Ve.minY)}function Ct(Ve,Xe){return Ve.minX<=Xe.minX&&Ve.minY<=Xe.minY&&Xe.maxX<=Ve.maxX&&Xe.maxY<=Ve.maxY}function st(Ve,Xe){return Xe.minX<=Ve.maxX&&Xe.minY<=Ve.maxY&&Xe.maxX>=Ve.minX&&Xe.maxY>=Ve.minY}function yt(Ve){return{children:Ve,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function qt(Ve,Xe,j,X,Y){for(var we=[Xe,j];we.length;)if(!((j=we.pop())-(Xe=we.pop())<=X)){var Z=Xe+Math.ceil((j-Xe)/X/2)*X;nt(Ve,Z,Xe,j,Y),we.push(Xe,Z,Z,j)}}return Ee.prototype.all=function(){return this._all(this.data,[])},Ee.prototype.search=function(Ve){var Xe=this.data,j=[];if(!st(Ve,Xe))return j;for(var X=this.toBBox,Y=[];Xe;){for(var we=0;we<Xe.children.length;we++){var Z=Xe.children[we],se=Xe.leaf?X(Z):Z;st(Ve,se)&&(Xe.leaf?j.push(Z):Ct(Ve,se)?this._all(Z,j):Y.push(Z))}Xe=Y.pop()}return j},Ee.prototype.collides=function(Ve){var Xe=this.data;if(!st(Ve,Xe))return!1;for(var j=[];Xe;){for(var X=0;X<Xe.children.length;X++){var Y=Xe.children[X],we=Xe.leaf?this.toBBox(Y):Y;if(st(Ve,we)){if(Xe.leaf||Ct(Ve,we))return!0;j.push(Y)}}Xe=j.pop()}return!1},Ee.prototype.load=function(Ve){if(!Ve||!Ve.length)return this;if(Ve.length<this._minEntries){for(var Xe=0;Xe<Ve.length;Xe++)this.insert(Ve[Xe]);return this}var j=this._build(Ve.slice(),0,Ve.length-1,0);if(this.data.children.length)if(this.data.height===j.height)this._splitRoot(this.data,j);else{if(this.data.height<j.height){var X=this.data;this.data=j,j=X}this._insert(j,this.data.height-j.height-1,!0)}else this.data=j;return this},Ee.prototype.insert=function(Ve){return Ve&&this._insert(Ve,this.data.height-1),this},Ee.prototype.clear=function(){return this.data=yt([]),this},Ee.prototype.remove=function(Ve,Xe){if(!Ve)return this;for(var j,X,Y,we=this.data,Z=this.toBBox(Ve),se=[],ce=[];we||se.length;){if(we||(we=se.pop(),X=se[se.length-1],j=ce.pop(),Y=!0),we.leaf){var $=Ne(Ve,we.children,Xe);if(-1!==$)return we.children.splice($,1),se.push(we),this._condense(se),this}Y||we.leaf||!Ct(we,Z)?X?(j++,we=X.children[j],Y=!1):we=null:(se.push(we),ce.push(j),j=0,X=we,we=we.children[0])}return this},Ee.prototype.toBBox=function(Ve){return Ve},Ee.prototype.compareMinX=function(Ve,Xe){return Ve.minX-Xe.minX},Ee.prototype.compareMinY=function(Ve,Xe){return Ve.minY-Xe.minY},Ee.prototype.toJSON=function(){return this.data},Ee.prototype.fromJSON=function(Ve){return this.data=Ve,this},Ee.prototype._all=function(Ve,Xe){for(var j=[];Ve;)Ve.leaf?Xe.push.apply(Xe,Ve.children):j.push.apply(j,Ve.children),Ve=j.pop();return Xe},Ee.prototype._build=function(Ve,Xe,j,X){var Y,we=j-Xe+1,Z=this._maxEntries;if(we<=Z)return ze(Y=yt(Ve.slice(Xe,j+1)),this.toBBox),Y;X||(X=Math.ceil(Math.log(we)/Math.log(Z)),Z=Math.ceil(we/Math.pow(Z,X-1))),(Y=yt([])).leaf=!1,Y.height=X;var se=Math.ceil(we/Z),ce=se*Math.ceil(Math.sqrt(Z));qt(Ve,Xe,j,ce,this.compareMinX);for(var $=Xe;$<=j;$+=ce){var je=Math.min($+ce-1,j);qt(Ve,$,je,se,this.compareMinY);for(var Be=$;Be<=je;Be+=se){var He=Math.min(Be+se-1,je);Y.children.push(this._build(Ve,Be,He,X-1))}}return ze(Y,this.toBBox),Y},Ee.prototype._chooseSubtree=function(Ve,Xe,j,X){for(;X.push(Xe),!Xe.leaf&&X.length-1!==j;){for(var Y=1/0,we=1/0,Z=void 0,se=0;se<Xe.children.length;se++){var ce=Xe.children[se],$=ft(ce),je=(Be=Ve,He=ce,(Math.max(He.maxX,Be.maxX)-Math.min(He.minX,Be.minX))*(Math.max(He.maxY,Be.maxY)-Math.min(He.minY,Be.minY))-$);je<we?(we=je,Y=$<Y?$:Y,Z=ce):je===we&&$<Y&&(Y=$,Z=ce)}Xe=Z||Xe.children[0]}var Be,He;return Xe},Ee.prototype._insert=function(Ve,Xe,j){var X=j?Ve:this.toBBox(Ve),Y=[],we=this._chooseSubtree(X,this.data,Xe,Y);for(we.children.push(Ve),Ie(we,X);Xe>=0&&Y[Xe].children.length>this._maxEntries;)this._split(Y,Xe),Xe--;this._adjustParentBBoxes(X,Y,Xe)},Ee.prototype._split=function(Ve,Xe){var j=Ve[Xe],X=j.children.length,Y=this._minEntries;this._chooseSplitAxis(j,Y,X);var we=this._chooseSplitIndex(j,Y,X),Z=yt(j.children.splice(we,j.children.length-we));Z.height=j.height,Z.leaf=j.leaf,ze(j,this.toBBox),ze(Z,this.toBBox),Xe?Ve[Xe-1].children.push(Z):this._splitRoot(j,Z)},Ee.prototype._splitRoot=function(Ve,Xe){this.data=yt([Ve,Xe]),this.data.height=Ve.height+1,this.data.leaf=!1,ze(this.data,this.toBBox)},Ee.prototype._chooseSplitIndex=function(Ve,Xe,j){for(var X,Y,we,Z,se,ce,$,je=1/0,Be=1/0,He=Xe;He<=j-Xe;He++){var oe=Re(Ve,0,He,this.toBBox),kt=Re(Ve,He,j,this.toBBox),At=(Y=oe,we=kt,void 0,void 0,void 0,void 0,Z=Math.max(Y.minX,we.minX),se=Math.max(Y.minY,we.minY),ce=Math.min(Y.maxX,we.maxX),$=Math.min(Y.maxY,we.maxY),Math.max(0,ce-Z)*Math.max(0,$-se)),be=ft(oe)+ft(kt);At<je?(je=At,X=He,Be=be<Be?be:Be):At===je&&be<Be&&(Be=be,X=He)}return X||j-Xe},Ee.prototype._chooseSplitAxis=function(Ve,Xe,j){var X=Ve.leaf?this.compareMinX:We,Y=Ve.leaf?this.compareMinY:ct;this._allDistMargin(Ve,Xe,j,X)<this._allDistMargin(Ve,Xe,j,Y)&&Ve.children.sort(X)},Ee.prototype._allDistMargin=function(Ve,Xe,j,X){Ve.children.sort(X);for(var Y=this.toBBox,we=Re(Ve,0,Xe,Y),Z=Re(Ve,j-Xe,j,Y),se=Vt(we)+Vt(Z),ce=Xe;ce<j-Xe;ce++){var $=Ve.children[ce];Ie(we,Ve.leaf?Y($):$),se+=Vt(we)}for(var je=j-Xe-1;je>=Xe;je--){var Be=Ve.children[je];Ie(Z,Ve.leaf?Y(Be):Be),se+=Vt(Z)}return se},Ee.prototype._adjustParentBBoxes=function(Ve,Xe,j){for(var X=j;X>=0;X--)Ie(Xe[X],Ve)},Ee.prototype._condense=function(Ve){for(var Xe=Ve.length-1,j=void 0;Xe>=0;Xe--)0===Ve[Xe].children.length?Xe>0?(j=Ve[Xe-1].children).splice(j.indexOf(Ve[Xe]),1):this.clear():ze(Ve[Xe],this.toBBox)},Ee}()},4468:(Nt,nt,Me)=>{"use strict";var ue=Me(9582).functionsHaveConfigurableNames(),Ee=Object,Ne=TypeError;Nt.exports=function(){if(null!=this&&this!==Ee(this))throw new Ne("RegExp.prototype.flags getter called on non-object");var Re="";return this.hasIndices&&(Re+="d"),this.global&&(Re+="g"),this.ignoreCase&&(Re+="i"),this.multiline&&(Re+="m"),this.dotAll&&(Re+="s"),this.unicode&&(Re+="u"),this.sticky&&(Re+="y"),Re},ue&&Object.defineProperty&&Object.defineProperty(Nt.exports,"name",{value:"get flags"})},9235:(Nt,nt,Me)=>{"use strict";var ue=Me(2358),Ee=Me(5685),Ne=Me(4468),ze=Me(6343),Re=Me(1956),Ie=Ee(ze());ue(Ie,{getPolyfill:ze,implementation:Ne,shim:Re}),Nt.exports=Ie},6343:(Nt,nt,Me)=>{"use strict";var ue=Me(4468),Ee=Me(2358).supportsDescriptors,Ne=Object.getOwnPropertyDescriptor;Nt.exports=function(){if(Ee&&"gim"===/a/gim.flags){var Re=Ne(RegExp.prototype,"flags");if(Re&&"function"==typeof Re.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var Ie="",We={};if(Object.defineProperty(We,"hasIndices",{get:function(){Ie+="d"}}),Object.defineProperty(We,"sticky",{get:function(){Ie+="y"}}),"dy"===Ie)return Re.get}}return ue}},1956:(Nt,nt,Me)=>{"use strict";var ue=Me(2358).supportsDescriptors,Ee=Me(6343),Ne=Object.getOwnPropertyDescriptor,ze=Object.defineProperty,Re=TypeError,Ie=Object.getPrototypeOf,We=/a/;Nt.exports=function(){if(!ue||!Ie)throw new Re("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var ft=Ee(),Vt=Ie(We),Ct=Ne(Vt,"flags");return(!Ct||Ct.get!==ft)&&ze(Vt,"flags",{configurable:!0,enumerable:!1,get:ft}),ft}},9231:Nt=>{"use strict";Nt.exports={eudist:function(Me,ue,Ee){for(var Ne=Me.length,ze=0,Re=0;Re<Ne;Re++){var Ie=(Me[Re]||0)-(ue[Re]||0);ze+=Ie*Ie}return Ee?Math.sqrt(ze):ze},mandist:function(Me,ue,Ee){for(var Ne=Me.length,ze=0,Re=0;Re<Ne;Re++)ze+=Math.abs((Me[Re]||0)-(ue[Re]||0));return Ee?Math.sqrt(ze):ze},dist:function(Me,ue,Ee){var Ne=Math.abs(Me-ue);return Ee?Ne:Ne*Ne}}},5561:(Nt,nt,Me)=>{"use strict";var ue=Me(9231),Ee=ue.eudist,Ne=ue.dist;Nt.exports={kmrand:function(Re,Ie){for(var We={},ct=[],ft=Ie<<2,Vt=Re.length,Ct=Re[0].length>0;ct.length<Ie&&ft-- >0;){var st=Re[Math.floor(Math.random()*Vt)],yt=Ct?st.join("_"):""+st;We[yt]||(We[yt]=!0,ct.push(st))}if(ct.length<Ie)throw new Error("Error initializating clusters");return ct},kmpp:function(Re,Ie){var We=Re[0].length?Ee:Ne,ct=[],ft=Re.length,Vt=Re[0].length>0,st=Re[Math.floor(Math.random()*ft)];for(Vt&&st.join("_"),ct.push(st);ct.length<Ie;){for(var qt=[],Ve=ct.length,Xe=0,j=[],X=0;X<ft;X++){for(var Y=1/0,we=0;we<Ve;we++){var Z=We(Re[X],ct[we]);Z<=Y&&(Y=Z)}qt[X]=Y}for(var se=0;se<ft;se++)Xe+=qt[se];for(var ce=0;ce<ft;ce++)j[ce]={i:ce,v:Re[ce],pr:qt[ce]/Xe,cs:0};j.sort(function(He,oe){return He.pr-oe.pr}),j[0].cs=j[0].pr;for(var $=1;$<ft;$++)j[$].cs=j[$-1].cs+j[$].pr;for(var je=Math.random(),Be=0;Be<ft-1&&j[Be++].cs<je;);ct.push(j[Be-1].v)}return ct}}},9475:(Nt,nt,Me)=>{"use strict";var ue=Me(9231),Ee=Me(5561),Ne=ue.eudist,Ie=Ee.kmrand,We=Ee.kmpp;function ft(Ct,st,yt){yt=yt||[];for(var qt=0;qt<Ct;qt++)yt[qt]=st;return yt}Nt.exports=function Vt(Ct,st,yt,qt){var Ve=[],Xe=[],j=[],X=[],Y=!1,we=qt||1e4,Z=Ct.length,se=Ct[0].length,ce=se>0,$=[];if(yt)Ve="kmrand"==yt?Ie(Ct,st):"kmpp"==yt?We(Ct,st):yt;else for(var je={};Ve.length<st;){var Be=Math.floor(Math.random()*Z);je[Be]||(je[Be]=!0,Ve.push(Ct[Be]))}do{ft(st,0,$);for(var He=0;He<Z;He++){for(var oe=1/0,kt=0,At=0;At<st;At++)(X=ce?Ne(Ct[He],Ve[At]):Math.abs(Ct[He]-Ve[At]))<=oe&&(oe=X,kt=At);j[He]=kt,$[kt]++}for(var be=[],Ce=(Xe=[],0);Ce<st;Ce++)be[Ce]=ce?ft(se,0,be[Ce]):0,Xe[Ce]=Ve[Ce];if(ce){for(var Qe=0;Qe<st;Qe++)Ve[Qe]=[];for(var rt=0;rt<Z;rt++)for(var St=be[j[rt]],Je=Ct[rt],nn=0;nn<se;nn++)St[nn]+=Je[nn];Y=!0;for(var vt=0;vt<st;vt++){for(var xn=Ve[vt],_n=be[vt],ci=Xe[vt],$t=$[vt],$n=0;$n<se;$n++)xn[$n]=_n[$n]/$t||0;if(Y)for(var on=0;on<se;on++)if(ci[on]!=xn[on]){Y=!1;break}}}else{for(var Bs=0;Bs<Z;Bs++)be[j[Bs]]+=Ct[Bs];for(var qs=0;qs<st;qs++)Ve[qs]=be[qs]/$[qs]||0;Y=!0;for(var di=0;di<st;di++)if(Xe[di]!=Ve[di]){Y=!1;break}}Y=Y||--we<=0}while(!Y);return{it:1e4-we,k:st,idxs:j,centroids:Ve}}},7253:(Nt,nt,Me)=>{"use strict";Me.r(nt),Me.d(nt,{default:()=>ue});class ue{constructor(ze=[],Re=Ee){if(this.data=ze,this.length=this.data.length,this.compare=Re,this.length>0)for(let Ie=(this.length>>1)-1;Ie>=0;Ie--)this._down(Ie)}push(ze){this.data.push(ze),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const ze=this.data[0],Re=this.data.pop();return this.length--,this.length>0&&(this.data[0]=Re,this._down(0)),ze}peek(){return this.data[0]}_up(ze){const{data:Re,compare:Ie}=this,We=Re[ze];for(;ze>0;){const ct=ze-1>>1,ft=Re[ct];if(Ie(We,ft)>=0)break;Re[ze]=ft,ze=ct}Re[ze]=We}_down(ze){const{data:Re,compare:Ie}=this,We=this.length>>1,ct=Re[ze];for(;ze<We;){let ft=1+(ze<<1),Vt=Re[ft];const Ct=ft+1;if(Ct<this.length&&Ie(Re[Ct],Vt)<0&&(ft=Ct,Vt=Re[Ct]),Ie(Vt,ct)>=0)break;Re[ze]=Vt,ze=ft}Re[ze]=ct}}function Ee(Ne,ze){return Ne<ze?-1:Ne>ze?1:0}},770:function(Nt,nt){!function(Me){"use strict";function ue(){}function Ee(h){this.message=h||""}function Ne(h){this.message=h||""}function ze(h){this.message=h||""}function Re(){}function Ie(h){return null===h?m2:h.color}function We(h){return null===h?null:h.parent}function ct(h,d){null!==h&&(h.color=d)}function ft(h){return null===h?null:h.left}function Vt(h){return null===h?null:h.right}function Ct(){this.root_=null,this.size_=0}function st(){}function yt(){this.array_=[],arguments[0]instanceof ys&&this.addAll(arguments[0])}function qt(){}function Ve(h){this.message=h||""}function Xe(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(h){if(null==this)throw new TypeError(this+" is not an object");var d=Object(this),m=Math.max(Math.min(d.length,9007199254740991),0)||0,v=1 in arguments&&parseInt(Number(arguments[1]),10)||0;v=v<0?Math.max(m+v,0):Math.min(v,m);var b=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:m;for(b=b<0?Math.max(m+arguments[2],0):Math.min(b,m);v<b;)d[v]=h,++v;return d},writable:!0}),Number.isFinite=Number.isFinite||function(h){return"number"==typeof h&&isFinite(h)},Number.isInteger=Number.isInteger||function(h){return"number"==typeof h&&isFinite(h)&&Math.floor(h)===h},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(h){return h!=h},Math.trunc=Math.trunc||function(h){return h<0?Math.ceil(h):Math.floor(h)};var j=function(){};j.prototype.interfaces_=function(){return[]},j.prototype.getClass=function(){return j},j.prototype.equalsWithTolerance=function(h,d,m){return Math.abs(h-d)<=m};var X=function(h){function d(m){h.call(this,m),this.name="IllegalArgumentException",this.message=m,this.stack=(new h).stack}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d}(Error),Y=function(){},we={MAX_VALUE:{configurable:!0}};Y.isNaN=function(h){return Number.isNaN(h)},Y.doubleToLongBits=function(h){return h},Y.longBitsToDouble=function(h){return h},Y.isInfinite=function(h){return!Number.isFinite(h)},we.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Y,we);var Z=function(){},se=function(){},ce=function(){},$=function h(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=h.NULL_ORDINATE;else if(1===arguments.length){var d=arguments[0];this.x=d.x,this.y=d.y,this.z=d.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=h.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},je={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};$.prototype.setOrdinate=function(h,d){switch(h){case $.X:this.x=d;break;case $.Y:this.y=d;break;case $.Z:this.z=d;break;default:throw new X("Invalid ordinate index: "+h)}},$.prototype.equals2D=function(){if(1===arguments.length){var h=arguments[0];return this.x===h.x&&this.y===h.y}if(2===arguments.length){var d=arguments[0],m=arguments[1];return!!j.equalsWithTolerance(this.x,d.x,m)&&!!j.equalsWithTolerance(this.y,d.y,m)}},$.prototype.getOrdinate=function(h){switch(h){case $.X:return this.x;case $.Y:return this.y;case $.Z:return this.z}throw new X("Invalid ordinate index: "+h)},$.prototype.equals3D=function(h){return this.x===h.x&&this.y===h.y&&(this.z===h.z||Y.isNaN(this.z))&&Y.isNaN(h.z)},$.prototype.equals=function(h){return h instanceof $&&this.equals2D(h)},$.prototype.equalInZ=function(h,d){return j.equalsWithTolerance(this.z,h.z,d)},$.prototype.compareTo=function(h){return this.x<h.x?-1:this.x>h.x?1:this.y<h.y?-1:this.y>h.y?1:0},$.prototype.clone=function(){},$.prototype.copy=function(){return new $(this)},$.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},$.prototype.distance3D=function(h){var d=this.x-h.x,m=this.y-h.y,v=this.z-h.z;return Math.sqrt(d*d+m*m+v*v)},$.prototype.distance=function(h){var d=this.x-h.x,m=this.y-h.y;return Math.sqrt(d*d+m*m)},$.prototype.hashCode=function(){var h=17;return 37*(h=37*h+$.hashCode(this.x))+$.hashCode(this.y)},$.prototype.setCoordinate=function(h){this.x=h.x,this.y=h.y,this.z=h.z},$.prototype.interfaces_=function(){return[Z,se,ue]},$.prototype.getClass=function(){return $},$.hashCode=function(){if(1===arguments.length){var d=Y.doubleToLongBits(arguments[0]);return Math.trunc((d^d)>>>32)}},je.DimensionalComparator.get=function(){return Be},je.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},je.NULL_ORDINATE.get=function(){return Y.NaN},je.X.get=function(){return 0},je.Y.get=function(){return 1},je.Z.get=function(){return 2},Object.defineProperties($,je);var Be=function(h){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var d=arguments[0];if(2!==d&&3!==d)throw new X("only 2 or 3 dimensions may be specified");this._dimensionsToTest=d}};Be.prototype.compare=function(h,d){var m=h,v=d,b=Be.compare(m.x,v.x);if(0!==b)return b;var B=Be.compare(m.y,v.y);return 0!==B?B:this._dimensionsToTest<=2?0:Be.compare(m.z,v.z)},Be.prototype.interfaces_=function(){return[ce]},Be.prototype.getClass=function(){return Be},Be.compare=function(h,d){return h<d?-1:h>d?1:Y.isNaN(h)?Y.isNaN(d)?0:-1:Y.isNaN(d)?1:0};var He=function(){};He.prototype.create=function(){},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var oe=function(){},kt={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};oe.prototype.interfaces_=function(){return[]},oe.prototype.getClass=function(){return oe},oe.toLocationSymbol=function(h){switch(h){case oe.EXTERIOR:return"e";case oe.BOUNDARY:return"b";case oe.INTERIOR:return"i";case oe.NONE:return"-"}throw new X("Unknown location value: "+h)},kt.INTERIOR.get=function(){return 0},kt.BOUNDARY.get=function(){return 1},kt.EXTERIOR.get=function(){return 2},kt.NONE.get=function(){return-1},Object.defineProperties(oe,kt);var At=function(h,d){return h.interfaces_&&h.interfaces_().indexOf(d)>-1},be=function(){},qe={LOG_10:{configurable:!0}};be.prototype.interfaces_=function(){return[]},be.prototype.getClass=function(){return be},be.log10=function(h){var d=Math.log(h);return Y.isInfinite(d)||Y.isNaN(d)?d:d/be.LOG_10},be.min=function(h,d,m,v){var b=h;return d<b&&(b=d),m<b&&(b=m),v<b&&(b=v),b},be.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var h=arguments[0],d=arguments[1],m=arguments[2];return h<d?d:h>m?m:h}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var v=arguments[0],b=arguments[1],B=arguments[2];return v<b?b:v>B?B:v}},be.wrap=function(h,d){return h<0?d- -h%d:h%d},be.max=function(){if(3===arguments.length){var d=arguments[1],m=arguments[2],v=arguments[0];return d>v&&(v=d),m>v&&(v=m),v}if(4===arguments.length){var B=arguments[1],z=arguments[2],q=arguments[3],pe=arguments[0];return B>pe&&(pe=B),z>pe&&(pe=z),q>pe&&(pe=q),pe}},be.average=function(h,d){return(h+d)/2},qe.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(be,qe);var Ce=function(h){this.str=h};Ce.prototype.append=function(h){this.str+=h},Ce.prototype.setCharAt=function(h,d){this.str=this.str.substr(0,h)+d+this.str.substr(h+1)},Ce.prototype.toString=function(h){return this.str};var Qe=function(h){this.value=h};Qe.prototype.intValue=function(){return this.value},Qe.prototype.compareTo=function(h){return this.value<h?-1:this.value>h?1:0},Qe.isNaN=function(h){return Number.isNaN(h)};var rt=function(){};rt.isWhitespace=function(h){return h<=32&&h>=0||127===h},rt.toUpperCase=function(h){return h.toUpperCase()};var _e=function h(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof h?this.init(arguments[0]):"string"==typeof arguments[0]&&h.call(this,h.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},St={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};_e.prototype.le=function(h){return(this._hi<h._hi||this._hi===h._hi)&&this._lo<=h._lo},_e.prototype.extractSignificantDigits=function(h,d){var m=this.abs(),v=_e.magnitude(m._hi),b=_e.TEN.pow(v);(m=m.divide(b)).gt(_e.TEN)?(m=m.divide(_e.TEN),v+=1):m.lt(_e.ONE)&&(m=m.multiply(_e.TEN),v-=1);for(var B=v+1,z=new Ce,q=_e.MAX_PRINT_DIGITS-1,pe=0;pe<=q;pe++){h&&pe===B&&z.append(".");var Ue=Math.trunc(m._hi);if(Ue<0)break;var gt=!1,pt=0;Ue>9?(gt=!0,pt="9"):pt="0"+Ue,z.append(pt),m=m.subtract(_e.valueOf(Ue)).multiply(_e.TEN),gt&&m.selfAdd(_e.TEN);var hn=!0,Mn=_e.magnitude(m._hi);if(Mn<0&&Math.abs(Mn)>=q-pe&&(hn=!1),!hn)break}return d[0]=v,z.toString()},_e.prototype.sqr=function(){return this.multiply(this)},_e.prototype.doubleValue=function(){return this._hi+this._lo},_e.prototype.subtract=function(){return arguments[0]instanceof _e?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},_e.prototype.equals=function(){if(1===arguments.length){var h=arguments[0];return this._hi===h._hi&&this._lo===h._lo}},_e.prototype.isZero=function(){return 0===this._hi&&0===this._lo},_e.prototype.selfSubtract=function(){if(arguments[0]instanceof _e){var h=arguments[0];return this.isNaN()?this:this.selfAdd(-h._hi,-h._lo)}if("number"==typeof arguments[0]){var d=arguments[0];return this.isNaN()?this:this.selfAdd(-d,0)}},_e.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},_e.prototype.min=function(h){return this.le(h)?this:h},_e.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof _e){var h=arguments[0];return this.selfDivide(h._hi,h._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var m=arguments[0],b=null,B=null,z=null,q=null,pe=null,Ue=null,gt=null,pt=null;return this._hi=pt=(pe=this._hi/m)+(Ue=(this._hi-(gt=pe*m)-(pt=(b=(Ue=_e.SPLIT*pe)-(b=Ue-pe))*(z=(pt=_e.SPLIT*m)-(z=pt-m))-gt+b*(q=m-z)+(B=pe-b)*z+B*q)+this._lo-pe*arguments[1])/m),this._lo=pe-pt+Ue,this}},_e.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},_e.prototype.divide=function(){if(arguments[0]instanceof _e){var h=arguments[0],d=null,m=null,v=null,b=null,B=null,z=null,q=null,pe=null;return m=(B=this._hi/h._hi)-(d=(z=_e.SPLIT*B)-(d=z-B)),pe=d*(v=(pe=_e.SPLIT*h._hi)-(v=pe-h._hi))-(q=B*h._hi)+d*(b=h._hi-v)+m*v+m*b,new _e(pe=B+(z=(this._hi-q-pe+this._lo-B*h._lo)/h._hi),B-pe+z)}if("number"==typeof arguments[0]){var Ue=arguments[0];return Y.isNaN(Ue)?_e.createNaN():_e.copy(this).selfDivide(Ue,0)}},_e.prototype.ge=function(h){return(this._hi>h._hi||this._hi===h._hi)&&this._lo>=h._lo},_e.prototype.pow=function(h){if(0===h)return _e.valueOf(1);var d=new _e(this),m=_e.valueOf(1),v=Math.abs(h);if(v>1)for(;v>0;)v%2==1&&m.selfMultiply(d),(v/=2)>0&&(d=d.sqr());else m=d;return h<0?m.reciprocal():m},_e.prototype.ceil=function(){if(this.isNaN())return _e.NaN;var h=Math.ceil(this._hi),d=0;return h===this._hi&&(d=Math.ceil(this._lo)),new _e(h,d)},_e.prototype.compareTo=function(h){return this._hi<h._hi?-1:this._hi>h._hi?1:this._lo<h._lo?-1:this._lo>h._lo?1:0},_e.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},_e.prototype.setValue=function(){return arguments[0]instanceof _e||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},_e.prototype.max=function(h){return this.ge(h)?this:h},_e.prototype.sqrt=function(){if(this.isZero())return _e.valueOf(0);if(this.isNegative())return _e.NaN;var h=1/Math.sqrt(this._hi),m=_e.valueOf(this._hi*h),v=this.subtract(m.sqr())._hi*(.5*h);return m.add(v)},_e.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof _e){var h=arguments[0];return this.selfAdd(h._hi,h._lo)}if("number"==typeof arguments[0]){var d=arguments[0],m=null,v=null,b=null,z=null,q=null;return this._hi=(m=(b=this._hi+d)+(q=d-(z=b-this._hi)+(this._hi-(b-z))+this._lo))+(v=q+(b-m)),this._lo=v+(m-this._hi),this}}else if(2===arguments.length){var pe=arguments[0],Ue=arguments[1],gt=null,pt=null,hn=null,Mn=null,Fn=null,Jn=null,Hr=null;Fn=(Mn=this._hi+pe)-(Jn=Mn-this._hi),hn=(pt=this._lo+Ue)-(Hr=pt-this._lo);var Do=(gt=Mn+(Jn=(Fn=pe-Jn+(this._hi-Fn))+pt))+(Jn=(hn=Ue-Hr+(this._lo-hn))+(Jn+(Mn-gt))),l1=Jn+(gt-Do);return this._hi=Do,this._lo=l1,this}},_e.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof _e){var h=arguments[0];return this.selfMultiply(h._hi,h._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var m=arguments[0],b=null,B=null,z=null,q=null,pe=null,Ue=null;b=(pe=_e.SPLIT*this._hi)-this._hi,b=pe-b;var gt=(pe=this._hi*m)+(Ue=b*(z=(Ue=_e.SPLIT*m)-(z=Ue-m))-pe+b*(q=m-z)+(B=this._hi-b)*z+B*q+(this._hi*arguments[1]+this._lo*m)),pt=Ue+(b=pe-gt);return this._hi=gt,this._lo=pt,this}},_e.prototype.selfSqr=function(){return this.selfMultiply(this)},_e.prototype.floor=function(){if(this.isNaN())return _e.NaN;var h=Math.floor(this._hi),d=0;return h===this._hi&&(d=Math.floor(this._lo)),new _e(h,d)},_e.prototype.negate=function(){return this.isNaN()?this:new _e(-this._hi,-this._lo)},_e.prototype.clone=function(){},_e.prototype.multiply=function(){if(arguments[0]instanceof _e){var h=arguments[0];return h.isNaN()?_e.createNaN():_e.copy(this).selfMultiply(h)}if("number"==typeof arguments[0]){var d=arguments[0];return Y.isNaN(d)?_e.createNaN():_e.copy(this).selfMultiply(d,0)}},_e.prototype.isNaN=function(){return Y.isNaN(this._hi)},_e.prototype.intValue=function(){return Math.trunc(this._hi)},_e.prototype.toString=function(){var h=_e.magnitude(this._hi);return h>=-3&&h<=20?this.toStandardNotation():this.toSciNotation()},_e.prototype.toStandardNotation=function(){var h=this.getSpecialNumberString();if(null!==h)return h;var d=new Array(1).fill(null),m=this.extractSignificantDigits(!0,d),v=d[0]+1,b=m;return"."===m.charAt(0)?b="0"+m:v<0?b="0."+_e.stringOfChar("0",-v)+m:-1===m.indexOf(".")&&(b=m+_e.stringOfChar("0",v-m.length)+".0"),this.isNegative()?"-"+b:b},_e.prototype.reciprocal=function(){var d,v,b,z,h=null,m=null,B=null,q=null;d=(b=1/this._hi)-(h=(B=_e.SPLIT*b)-(h=B-b)),m=(q=_e.SPLIT*this._hi)-this._hi;var pe=b+(B=(1-(z=b*this._hi)-(q=h*(m=q-m)-z+h*(v=this._hi-m)+d*m+d*v)-b*this._lo)/this._hi);return new _e(pe,b-pe+B)},_e.prototype.toSciNotation=function(){if(this.isZero())return _e.SCI_NOT_ZERO;var h=this.getSpecialNumberString();if(null!==h)return h;var d=new Array(1).fill(null),m=this.extractSignificantDigits(!1,d),v=_e.SCI_NOT_EXPONENT_CHAR+d[0];if("0"===m.charAt(0))throw new Error("Found leading zero: "+m);var b="";m.length>1&&(b=m.substring(1));var B=m.charAt(0)+"."+b;return this.isNegative()?"-"+B+v:B+v},_e.prototype.abs=function(){return this.isNaN()?_e.NaN:this.isNegative()?this.negate():new _e(this)},_e.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},_e.prototype.lt=function(h){return(this._hi<h._hi||this._hi===h._hi)&&this._lo<h._lo},_e.prototype.add=function(){if(arguments[0]instanceof _e){var h=arguments[0];return _e.copy(this).selfAdd(h)}if("number"==typeof arguments[0]){var d=arguments[0];return _e.copy(this).selfAdd(d)}},_e.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof _e){var d=arguments[0];this._hi=d._hi,this._lo=d._lo}}else if(2===arguments.length){var v=arguments[1];this._hi=arguments[0],this._lo=v}},_e.prototype.gt=function(h){return(this._hi>h._hi||this._hi===h._hi)&&this._lo>h._lo},_e.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},_e.prototype.trunc=function(){return this.isNaN()?_e.NaN:this.isPositive()?this.floor():this.ceil()},_e.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},_e.prototype.interfaces_=function(){return[ue,Z,se]},_e.prototype.getClass=function(){return _e},_e.sqr=function(h){return _e.valueOf(h).selfMultiply(h)},_e.valueOf=function(){return"string"==typeof arguments[0]?_e.parse(arguments[0]):"number"==typeof arguments[0]?new _e(arguments[0]):void 0},_e.sqrt=function(h){return _e.valueOf(h).sqrt()},_e.parse=function(h){for(var d=0,m=h.length;rt.isWhitespace(h.charAt(d));)d++;var v=!1;if(d<m){var b=h.charAt(d);"-"!==b&&"+"!==b||(d++,"-"===b&&(v=!0))}for(var B=new _e,z=0,q=0,pe=0;!(d>=m);){var Ue=h.charAt(d);if(d++,rt.isDigit(Ue)){var gt=Ue-"0";B.selfMultiply(_e.TEN),B.selfAdd(gt),z++}else{if("."!==Ue){if("e"===Ue||"E"===Ue){var pt=h.substring(d);try{pe=Qe.parseInt(pt)}catch(Hr){throw Hr instanceof Error?new Error("Invalid exponent "+pt+" in string "+h):Hr}break}throw new Error("Unexpected character '"+Ue+"' at position "+d+" in string "+h)}q=z}}var hn=B,Mn=z-q-pe;if(0===Mn)hn=B;else if(Mn>0){var Fn=_e.TEN.pow(Mn);hn=B.divide(Fn)}else if(Mn<0){var Jn=_e.TEN.pow(-Mn);hn=B.multiply(Jn)}return v?hn.negate():hn},_e.createNaN=function(){return new _e(Y.NaN,Y.NaN)},_e.copy=function(h){return new _e(h)},_e.magnitude=function(h){var d=Math.abs(h),m=Math.log(d)/Math.log(10),v=Math.trunc(Math.floor(m));return 10*Math.pow(10,v)<=d&&(v+=1),v},_e.stringOfChar=function(h,d){for(var m=new Ce,v=0;v<d;v++)m.append(h);return m.toString()},St.PI.get=function(){return new _e(3.141592653589793,12246467991473532e-32)},St.TWO_PI.get=function(){return new _e(6.283185307179586,24492935982947064e-32)},St.PI_2.get=function(){return new _e(1.5707963267948966,6123233995736766e-32)},St.E.get=function(){return new _e(2.718281828459045,14456468917292502e-32)},St.NaN.get=function(){return new _e(Y.NaN,Y.NaN)},St.EPS.get=function(){return 123259516440783e-46},St.SPLIT.get=function(){return 134217729},St.MAX_PRINT_DIGITS.get=function(){return 32},St.TEN.get=function(){return _e.valueOf(10)},St.ONE.get=function(){return _e.valueOf(1)},St.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},St.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(_e,St);var Je=function(){},nn={DP_SAFE_EPSILON:{configurable:!0}};Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je},Je.orientationIndex=function(h,d,m){var v=Je.orientationIndexFilter(h,d,m);if(v<=1)return v;var b=_e.valueOf(d.x).selfAdd(-h.x),B=_e.valueOf(d.y).selfAdd(-h.y),z=_e.valueOf(m.x).selfAdd(-d.x),q=_e.valueOf(m.y).selfAdd(-d.y);return b.selfMultiply(q).selfSubtract(B.selfMultiply(z)).signum()},Je.signOfDet2x2=function(h,d,m,v){return h.multiply(v).selfSubtract(d.multiply(m)).signum()},Je.intersection=function(h,d,m,v){var b=_e.valueOf(v.y).selfSubtract(m.y).selfMultiply(_e.valueOf(d.x).selfSubtract(h.x)),B=_e.valueOf(v.x).selfSubtract(m.x).selfMultiply(_e.valueOf(d.y).selfSubtract(h.y)),z=b.subtract(B),q=_e.valueOf(v.x).selfSubtract(m.x).selfMultiply(_e.valueOf(h.y).selfSubtract(m.y)),pe=_e.valueOf(v.y).selfSubtract(m.y).selfMultiply(_e.valueOf(h.x).selfSubtract(m.x)),Ue=q.subtract(pe).selfDivide(z).doubleValue(),gt=_e.valueOf(h.x).selfAdd(_e.valueOf(d.x).selfSubtract(h.x).selfMultiply(Ue)).doubleValue(),pt=_e.valueOf(d.x).selfSubtract(h.x).selfMultiply(_e.valueOf(h.y).selfSubtract(m.y)),hn=_e.valueOf(d.y).selfSubtract(h.y).selfMultiply(_e.valueOf(h.x).selfSubtract(m.x)),Mn=pt.subtract(hn).selfDivide(z).doubleValue(),Fn=_e.valueOf(m.y).selfAdd(_e.valueOf(v.y).selfSubtract(m.y).selfMultiply(Mn)).doubleValue();return new $(gt,Fn)},Je.orientationIndexFilter=function(h,d,m){var v=null,b=(h.x-m.x)*(d.y-m.y),B=(h.y-m.y)*(d.x-m.x),z=b-B;if(b>0){if(B<=0)return Je.signum(z);v=b+B}else{if(!(b<0)||B>=0)return Je.signum(z);v=-b-B}var q=Je.DP_SAFE_EPSILON*v;return z>=q||-z>=q?Je.signum(z):2},Je.signum=function(h){return h>0?1:h<0?-1:0},nn.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Je,nn);var vt=function(){},xn={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};xn.X.get=function(){return 0},xn.Y.get=function(){return 1},xn.Z.get=function(){return 2},xn.M.get=function(){return 3},vt.prototype.setOrdinate=function(h,d,m){},vt.prototype.size=function(){},vt.prototype.getOrdinate=function(h,d){},vt.prototype.getCoordinate=function(){},vt.prototype.getCoordinateCopy=function(h){},vt.prototype.getDimension=function(){},vt.prototype.getX=function(h){},vt.prototype.clone=function(){},vt.prototype.expandEnvelope=function(h){},vt.prototype.copy=function(){},vt.prototype.getY=function(h){},vt.prototype.toCoordinateArray=function(){},vt.prototype.interfaces_=function(){return[se]},vt.prototype.getClass=function(){return vt},Object.defineProperties(vt,xn);var _n=function(){},ci=function(h){function d(){h.call(this,"Projective point not representable on the Cartesian plane.")}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(_n),$t=function(){};$t.arraycopy=function(h,d,m,v,b){for(var B=0,z=d;z<d+b;z++)m[v+B]=h[z],B++},$t.getProperty=function(h){return{"line.separator":"\n"}[h]};var $n=function h(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var d=arguments[0];this.x=d.x,this.y=d.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var v=arguments[1];this.x=arguments[0],this.y=v,this.w=1}else if(arguments[0]instanceof h&&arguments[1]instanceof h){var b=arguments[0],B=arguments[1];this.x=b.y*B.w-B.y*b.w,this.y=B.x*b.w-b.x*B.w,this.w=b.x*B.y-B.x*b.y}else if(arguments[0]instanceof $&&arguments[1]instanceof $){var z=arguments[0],q=arguments[1];this.x=z.y-q.y,this.y=q.x-z.x,this.w=z.x*q.y-q.x*z.y}}else if(3===arguments.length){var Ue=arguments[1],gt=arguments[2];this.x=arguments[0],this.y=Ue,this.w=gt}else if(4===arguments.length){var pt=arguments[0],hn=arguments[1],Mn=arguments[2],Fn=arguments[3],Jn=pt.y-hn.y,Hr=hn.x-pt.x,Do=pt.x*hn.y-hn.x*pt.y,l1=Mn.y-Fn.y,_l=Fn.x-Mn.x,yl=Mn.x*Fn.y-Fn.x*Mn.y;this.x=Hr*yl-_l*Do,this.y=l1*Do-Jn*yl,this.w=Jn*_l-l1*Hr}};$n.prototype.getY=function(){var h=this.y/this.w;if(Y.isNaN(h)||Y.isInfinite(h))throw new ci;return h},$n.prototype.getX=function(){var h=this.x/this.w;if(Y.isNaN(h)||Y.isInfinite(h))throw new ci;return h},$n.prototype.getCoordinate=function(){var h=new $;return h.x=this.getX(),h.y=this.getY(),h},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n},$n.intersection=function(h,d,m,v){var b=h.y-d.y,B=d.x-h.x,z=h.x*d.y-d.x*h.y,q=m.y-v.y,pe=v.x-m.x,Ue=m.x*v.y-v.x*m.y,gt=b*pe-q*B,pt=(B*Ue-pe*z)/gt,hn=(q*z-b*Ue)/gt;if(Y.isNaN(pt)||Y.isInfinite(pt)||Y.isNaN(hn)||Y.isInfinite(hn))throw new ci;return new $(pt,hn)};var on=function h(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof $){var d=arguments[0];this.init(d.x,d.x,d.y,d.y)}else arguments[0]instanceof h&&this.init(arguments[0]);else if(2===arguments.length){var v=arguments[0],b=arguments[1];this.init(v.x,b.x,v.y,b.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},Bs={serialVersionUID:{configurable:!0}};on.prototype.getArea=function(){return this.getWidth()*this.getHeight()},on.prototype.equals=function(h){if(!(h instanceof on))return!1;var d=h;return this.isNull()?d.isNull():this._maxx===d.getMaxX()&&this._maxy===d.getMaxY()&&this._minx===d.getMinX()&&this._miny===d.getMinY()},on.prototype.intersection=function(h){return this.isNull()||h.isNull()||!this.intersects(h)?new on:new on(this._minx>h._minx?this._minx:h._minx,this._maxx<h._maxx?this._maxx:h._maxx,this._miny>h._miny?this._miny:h._miny,this._maxy<h._maxy?this._maxy:h._maxy)},on.prototype.isNull=function(){return this._maxx<this._minx},on.prototype.getMaxX=function(){return this._maxx},on.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];return this.covers(h.x,h.y)}if(arguments[0]instanceof on){var d=arguments[0];return!this.isNull()&&!d.isNull()&&d.getMinX()>=this._minx&&d.getMaxX()<=this._maxx&&d.getMinY()>=this._miny&&d.getMaxY()<=this._maxy}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];return!this.isNull()&&m>=this._minx&&m<=this._maxx&&v>=this._miny&&v<=this._maxy}},on.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof on){var h=arguments[0];return!this.isNull()&&!h.isNull()&&!(h._minx>this._maxx||h._maxx<this._minx||h._miny>this._maxy||h._maxy<this._miny)}if(arguments[0]instanceof $){var d=arguments[0];return this.intersects(d.x,d.y)}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];return!this.isNull()&&!(m>this._maxx||m<this._minx||v>this._maxy||v<this._miny)}},on.prototype.getMinY=function(){return this._miny},on.prototype.getMinX=function(){return this._minx},on.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];this.expandToInclude(h.x,h.y)}else if(arguments[0]instanceof on){var d=arguments[0];if(d.isNull())return null;this.isNull()?(this._minx=d.getMinX(),this._maxx=d.getMaxX(),this._miny=d.getMinY(),this._maxy=d.getMaxY()):(d._minx<this._minx&&(this._minx=d._minx),d._maxx>this._maxx&&(this._maxx=d._maxx),d._miny<this._miny&&(this._miny=d._miny),d._maxy>this._maxy&&(this._maxy=d._maxy))}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];this.isNull()?(this._minx=m,this._maxx=m,this._miny=v,this._maxy=v):(m<this._minx&&(this._minx=m),m>this._maxx&&(this._maxx=m),v<this._miny&&(this._miny=v),v>this._maxy&&(this._maxy=v))}},on.prototype.minExtent=function(){if(this.isNull())return 0;var h=this.getWidth(),d=this.getHeight();return h<d?h:d},on.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},on.prototype.compareTo=function(h){var d=h;return this.isNull()?d.isNull()?0:-1:d.isNull()?1:this._minx<d._minx?-1:this._minx>d._minx?1:this._miny<d._miny?-1:this._miny>d._miny?1:this._maxx<d._maxx?-1:this._maxx>d._maxx?1:this._maxy<d._maxy?-1:this._maxy>d._maxy?1:0},on.prototype.translate=function(h,d){if(this.isNull())return null;this.init(this.getMinX()+h,this.getMaxX()+h,this.getMinY()+d,this.getMaxY()+d)},on.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},on.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},on.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},on.prototype.maxExtent=function(){if(this.isNull())return 0;var h=this.getWidth(),d=this.getHeight();return h>d?h:d},on.prototype.expandBy=function(){if(1===arguments.length){var h=arguments[0];this.expandBy(h,h)}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this.isNull())return null;this._minx-=d,this._maxx+=d,this._miny-=m,this._maxy+=m,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},on.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof on)return this.covers(arguments[0]);if(arguments[0]instanceof $)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},on.prototype.centre=function(){return this.isNull()?null:new $((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},on.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];this.init(h.x,h.x,h.y,h.y)}else if(arguments[0]instanceof on){var d=arguments[0];this._minx=d._minx,this._maxx=d._maxx,this._miny=d._miny,this._maxy=d._maxy}}else if(2===arguments.length){var m=arguments[0],v=arguments[1];this.init(m.x,v.x,m.y,v.y)}else if(4===arguments.length){var b=arguments[0],B=arguments[1],z=arguments[2],q=arguments[3];b<B?(this._minx=b,this._maxx=B):(this._minx=B,this._maxx=b),z<q?(this._miny=z,this._maxy=q):(this._miny=q,this._maxy=z)}},on.prototype.getMaxY=function(){return this._maxy},on.prototype.distance=function(h){if(this.intersects(h))return 0;var d=0;this._maxx<h._minx?d=h._minx-this._maxx:this._minx>h._maxx&&(d=this._minx-h._maxx);var m=0;return this._maxy<h._miny?m=h._miny-this._maxy:this._miny>h._maxy&&(m=this._miny-h._maxy),0===d?m:0===m?d:Math.sqrt(d*d+m*m)},on.prototype.hashCode=function(){var h=17;return 37*(h=37*(h=37*(h=37*h+$.hashCode(this._minx))+$.hashCode(this._maxx))+$.hashCode(this._miny))+$.hashCode(this._maxy)},on.prototype.interfaces_=function(){return[Z,ue]},on.prototype.getClass=function(){return on},on.intersects=function(){if(3===arguments.length){var h=arguments[0],d=arguments[1],m=arguments[2];return m.x>=(h.x<d.x?h.x:d.x)&&m.x<=(h.x>d.x?h.x:d.x)&&m.y>=(h.y<d.y?h.y:d.y)&&m.y<=(h.y>d.y?h.y:d.y)}if(4===arguments.length){var v=arguments[0],b=arguments[1],B=arguments[2],z=arguments[3],q=Math.min(B.x,z.x),pe=Math.max(B.x,z.x),Ue=Math.min(v.x,b.x),gt=Math.max(v.x,b.x);return!(Ue>pe||gt<q||(q=Math.min(B.y,z.y),pe=Math.max(B.y,z.y),Ue=Math.min(v.y,b.y),gt=Math.max(v.y,b.y),Ue>pe||gt<q))}},Bs.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(on,Bs);var _s={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},qs=function(h){this.geometryFactory=h||new qi};qs.prototype.read=function(h){var d,m;h=h.replace(/[\n\r]/g," ");var b=_s.typeStr.exec(h);if(-1!==h.search("EMPTY")&&((b=_s.emptyTypeStr.exec(h))[2]=void 0),b&&(m=b[1].toLowerCase(),vi[m]&&(d=vi[m].apply(this,[b[2]]))),void 0===d)throw new Error("Could not parse WKT "+h);return d},qs.prototype.write=function(h){return this.extractGeometry(h)},qs.prototype.extractGeometry=function(h){var d=h.getGeometryType().toLowerCase();if(!di[d])return null;var m=d.toUpperCase();return h.isEmpty()?m+" EMPTY":m+"("+di[d].apply(this,[h])+")"};var di={coordinate:function(h){return h.x+" "+h.y},point:function(h){return di.coordinate.call(this,h._coordinates._coordinates[0])},multipoint:function(h){for(var d=[],m=0,v=h._geometries.length;m<v;++m)d.push("("+di.point.apply(this,[h._geometries[m]])+")");return d.join(",")},linestring:function(h){for(var d=[],m=0,v=h._points._coordinates.length;m<v;++m)d.push(di.coordinate.apply(this,[h._points._coordinates[m]]));return d.join(",")},linearring:function(h){for(var d=[],m=0,v=h._points._coordinates.length;m<v;++m)d.push(di.coordinate.apply(this,[h._points._coordinates[m]]));return d.join(",")},multilinestring:function(h){for(var d=[],m=0,v=h._geometries.length;m<v;++m)d.push("("+di.linestring.apply(this,[h._geometries[m]])+")");return d.join(",")},polygon:function(h){var d=[];d.push("("+di.linestring.apply(this,[h._shell])+")");for(var m=0,v=h._holes.length;m<v;++m)d.push("("+di.linestring.apply(this,[h._holes[m]])+")");return d.join(",")},multipolygon:function(h){for(var d=[],m=0,v=h._geometries.length;m<v;++m)d.push("("+di.polygon.apply(this,[h._geometries[m]])+")");return d.join(",")},geometrycollection:function(h){for(var d=[],m=0,v=h._geometries.length;m<v;++m)d.push(this.extractGeometry(h._geometries[m]));return d.join(",")}},vi={point:function(h){if(void 0===h)return this.geometryFactory.createPoint();var d=h.trim().split(_s.spaces);return this.geometryFactory.createPoint(new $(Number.parseFloat(d[0]),Number.parseFloat(d[1])))},multipoint:function(h){if(void 0===h)return this.geometryFactory.createMultiPoint();for(var d,m=h.trim().split(","),v=[],b=0,B=m.length;b<B;++b)d=m[b].replace(_s.trimParens,"$1"),v.push(vi.point.apply(this,[d]));return this.geometryFactory.createMultiPoint(v)},linestring:function(h){if(void 0===h)return this.geometryFactory.createLineString();for(var d,m=h.trim().split(","),v=[],b=0,B=m.length;b<B;++b)d=m[b].trim().split(_s.spaces),v.push(new $(Number.parseFloat(d[0]),Number.parseFloat(d[1])));return this.geometryFactory.createLineString(v)},linearring:function(h){if(void 0===h)return this.geometryFactory.createLinearRing();for(var d,m=h.trim().split(","),v=[],b=0,B=m.length;b<B;++b)d=m[b].trim().split(_s.spaces),v.push(new $(Number.parseFloat(d[0]),Number.parseFloat(d[1])));return this.geometryFactory.createLinearRing(v)},multilinestring:function(h){if(void 0===h)return this.geometryFactory.createMultiLineString();for(var d,m=h.trim().split(_s.parenComma),v=[],b=0,B=m.length;b<B;++b)d=m[b].replace(_s.trimParens,"$1"),v.push(vi.linestring.apply(this,[d]));return this.geometryFactory.createMultiLineString(v)},polygon:function(h){if(void 0===h)return this.geometryFactory.createPolygon();for(var d,m,v,b,B=h.trim().split(_s.parenComma),z=[],q=0,pe=B.length;q<pe;++q)d=B[q].replace(_s.trimParens,"$1"),m=vi.linestring.apply(this,[d]),v=this.geometryFactory.createLinearRing(m._points),0===q?b=v:z.push(v);return this.geometryFactory.createPolygon(b,z)},multipolygon:function(h){if(void 0===h)return this.geometryFactory.createMultiPolygon();for(var d,m=h.trim().split(_s.doubleParenComma),v=[],b=0,B=m.length;b<B;++b)d=m[b].replace(_s.trimParens,"$1"),v.push(vi.polygon.apply(this,[d]));return this.geometryFactory.createMultiPolygon(v)},geometrycollection:function(h){if(void 0===h)return this.geometryFactory.createGeometryCollection();for(var d=(h=h.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),m=[],v=0,b=d.length;v<b;++v)m.push(this.read(d[v]));return this.geometryFactory.createGeometryCollection(m)}},it=function(h){this.parser=new qs(h)};it.prototype.write=function(h){return this.parser.write(h)},it.toLineString=function(h,d){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+h.x+" "+h.y+", "+d.x+" "+d.y+" )"};var le=function(h){function d(m){h.call(this,m),this.name="RuntimeException",this.message=m,this.stack=(new h).stack}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d}(Error),te=function(h){function d(){h.call(this),0===arguments.length?h.call(this):1===arguments.length&&h.call(this,arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(le),J=function(){};J.prototype.interfaces_=function(){return[]},J.prototype.getClass=function(){return J},J.shouldNeverReachHere=function(){if(0===arguments.length)J.shouldNeverReachHere(null);else if(1===arguments.length){var h=arguments[0];throw new te("Should never reach here"+(null!==h?": "+h:""))}},J.isTrue=function(){var d;if(1===arguments.length)J.isTrue(arguments[0],null);else if(2===arguments.length&&(d=arguments[1],!arguments[0]))throw null===d?new te:new te(d)},J.equals=function(){var h,d,m;if(2===arguments.length)J.equals(h=arguments[0],d=arguments[1],null);else if(3===arguments.length&&(m=arguments[2],!(d=arguments[1]).equals(h=arguments[0])))throw new te("Expected "+h+" but encountered "+d+(null!==m?": "+m:""))};var Te=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new $,this._intPt[1]=new $,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},$e={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Te.prototype.getIndexAlongSegment=function(h,d){return this.computeIntLineIndex(),this._intLineIndex[h][d]},Te.prototype.getTopologySummary=function(){var h=new Ce;return this.isEndPoint()&&h.append(" endpoint"),this._isProper&&h.append(" proper"),this.isCollinear()&&h.append(" collinear"),h.toString()},Te.prototype.computeIntersection=function(h,d,m,v){this._inputLines[0][0]=h,this._inputLines[0][1]=d,this._inputLines[1][0]=m,this._inputLines[1][1]=v,this._result=this.computeIntersect(h,d,m,v)},Te.prototype.getIntersectionNum=function(){return this._result},Te.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var h=arguments[0];this.getEdgeDistance(h,0)>this.getEdgeDistance(h,1)?(this._intLineIndex[h][0]=0,this._intLineIndex[h][1]=1):(this._intLineIndex[h][0]=1,this._intLineIndex[h][1]=0)}},Te.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Te.prototype.setPrecisionModel=function(h){this._precisionModel=h},Te.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var h=arguments[0],d=0;d<this._result;d++)if(!this._intPt[d].equals2D(this._inputLines[h][0])&&!this._intPt[d].equals2D(this._inputLines[h][1]))return!0;return!1}},Te.prototype.getIntersection=function(h){return this._intPt[h]},Te.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Te.prototype.hasIntersection=function(){return this._result!==Te.NO_INTERSECTION},Te.prototype.getEdgeDistance=function(h,d){return Te.computeEdgeDistance(this._intPt[d],this._inputLines[h][0],this._inputLines[h][1])},Te.prototype.isCollinear=function(){return this._result===Te.COLLINEAR_INTERSECTION},Te.prototype.toString=function(){return it.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+it.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Te.prototype.getEndpoint=function(h,d){return this._inputLines[h][d]},Te.prototype.isIntersection=function(h){for(var d=0;d<this._result;d++)if(this._intPt[d].equals2D(h))return!0;return!1},Te.prototype.getIntersectionAlongSegment=function(h,d){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[h][d]]},Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te},Te.computeEdgeDistance=function(h,d,m){var v=Math.abs(m.x-d.x),b=Math.abs(m.y-d.y),B=-1;if(h.equals(d))B=0;else if(h.equals(m))B=v>b?v:b;else{var z=Math.abs(h.x-d.x),q=Math.abs(h.y-d.y);0!==(B=v>b?z:q)||h.equals(d)||(B=Math.max(z,q))}return J.isTrue(!(0===B&&!h.equals(d)),"Bad distance calculation"),B},Te.nonRobustComputeEdgeDistance=function(h,d,m){var v=h.x-d.x,b=h.y-d.y,B=Math.sqrt(v*v+b*b);return J.isTrue(!(0===B&&!h.equals(d)),"Invalid distance calculation"),B},$e.DONT_INTERSECT.get=function(){return 0},$e.DO_INTERSECT.get=function(){return 1},$e.COLLINEAR.get=function(){return 2},$e.NO_INTERSECTION.get=function(){return 0},$e.POINT_INTERSECTION.get=function(){return 1},$e.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Te,$e);var mt=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.isInSegmentEnvelopes=function(m){var v=new on(this._inputLines[0][0],this._inputLines[0][1]),b=new on(this._inputLines[1][0],this._inputLines[1][1]);return v.contains(m)&&b.contains(m)},d.prototype.computeIntersection=function(){if(3!==arguments.length)return h.prototype.computeIntersection.apply(this,arguments);var m=arguments[0],v=arguments[1],b=arguments[2];if(this._isProper=!1,on.intersects(v,b,m)&&0===Mt.orientationIndex(v,b,m)&&0===Mt.orientationIndex(b,v,m))return this._isProper=!0,(m.equals(v)||m.equals(b))&&(this._isProper=!1),this._result=h.POINT_INTERSECTION,null;this._result=h.NO_INTERSECTION},d.prototype.normalizeToMinimum=function(m,v,b,B,z){z.x=this.smallestInAbsValue(m.x,v.x,b.x,B.x),z.y=this.smallestInAbsValue(m.y,v.y,b.y,B.y),m.x-=z.x,m.y-=z.y,v.x-=z.x,v.y-=z.y,b.x-=z.x,b.y-=z.y,B.x-=z.x,B.y-=z.y},d.prototype.safeHCoordinateIntersection=function(m,v,b,B){var z=null;try{z=$n.intersection(m,v,b,B)}catch(q){if(!(q instanceof ci))throw q;z=d.nearestEndpoint(m,v,b,B)}return z},d.prototype.intersection=function(m,v,b,B){var z=this.intersectionWithNormalization(m,v,b,B);return this.isInSegmentEnvelopes(z)||(z=new $(d.nearestEndpoint(m,v,b,B))),null!==this._precisionModel&&this._precisionModel.makePrecise(z),z},d.prototype.smallestInAbsValue=function(m,v,b,B){var z=m,q=Math.abs(z);return Math.abs(v)<q&&(z=v,q=Math.abs(v)),Math.abs(b)<q&&(z=b,q=Math.abs(b)),Math.abs(B)<q&&(z=B),z},d.prototype.checkDD=function(m,v,b,B,z){var q=Je.intersection(m,v,b,B),pe=this.isInSegmentEnvelopes(q);$t.out.println("DD in env = "+pe+"  --------------------- "+q),z.distance(q)>1e-4&&$t.out.println("Distance = "+z.distance(q))},d.prototype.intersectionWithNormalization=function(m,v,b,B){var z=new $(m),q=new $(v),pe=new $(b),Ue=new $(B),gt=new $;this.normalizeToEnvCentre(z,q,pe,Ue,gt);var pt=this.safeHCoordinateIntersection(z,q,pe,Ue);return pt.x+=gt.x,pt.y+=gt.y,pt},d.prototype.computeCollinearIntersection=function(m,v,b,B){var z=on.intersects(m,v,b),q=on.intersects(m,v,B),pe=on.intersects(b,B,m),Ue=on.intersects(b,B,v);return z&&q?(this._intPt[0]=b,this._intPt[1]=B,h.COLLINEAR_INTERSECTION):pe&&Ue?(this._intPt[0]=m,this._intPt[1]=v,h.COLLINEAR_INTERSECTION):z&&pe?(this._intPt[0]=b,this._intPt[1]=m,!b.equals(m)||q||Ue?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):z&&Ue?(this._intPt[0]=b,this._intPt[1]=v,!b.equals(v)||q||pe?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):q&&pe?(this._intPt[0]=B,this._intPt[1]=m,!B.equals(m)||z||Ue?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):q&&Ue?(this._intPt[0]=B,this._intPt[1]=v,!B.equals(v)||z||pe?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):h.NO_INTERSECTION},d.prototype.normalizeToEnvCentre=function(m,v,b,B,z){var q=m.x<v.x?m.x:v.x,pe=m.y<v.y?m.y:v.y,Ue=m.x>v.x?m.x:v.x,gt=m.y>v.y?m.y:v.y,pt=b.x<B.x?b.x:B.x,hn=b.y<B.y?b.y:B.y,Mn=b.x>B.x?b.x:B.x,Fn=b.y>B.y?b.y:B.y,Hr=((pe>hn?pe:hn)+(gt<Fn?gt:Fn))/2;z.x=((q>pt?q:pt)+(Ue<Mn?Ue:Mn))/2,z.y=Hr,m.x-=z.x,m.y-=z.y,v.x-=z.x,v.y-=z.y,b.x-=z.x,b.y-=z.y,B.x-=z.x,B.y-=z.y},d.prototype.computeIntersect=function(m,v,b,B){if(this._isProper=!1,!on.intersects(m,v,b,B))return h.NO_INTERSECTION;var z=Mt.orientationIndex(m,v,b),q=Mt.orientationIndex(m,v,B);if(z>0&&q>0||z<0&&q<0)return h.NO_INTERSECTION;var pe=Mt.orientationIndex(b,B,m),Ue=Mt.orientationIndex(b,B,v);return pe>0&&Ue>0||pe<0&&Ue<0?h.NO_INTERSECTION:0===z&&0===q&&0===pe&&0===Ue?this.computeCollinearIntersection(m,v,b,B):(0===z||0===q||0===pe||0===Ue?(this._isProper=!1,m.equals2D(b)||m.equals2D(B)?this._intPt[0]=m:v.equals2D(b)||v.equals2D(B)?this._intPt[0]=v:0===z?this._intPt[0]=new $(b):0===q?this._intPt[0]=new $(B):0===pe?this._intPt[0]=new $(m):0===Ue&&(this._intPt[0]=new $(v))):(this._isProper=!0,this._intPt[0]=this.intersection(m,v,b,B)),h.POINT_INTERSECTION)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.nearestEndpoint=function(m,v,b,B){var z=m,q=Mt.distancePointLine(m,b,B),pe=Mt.distancePointLine(v,b,B);return pe<q&&(q=pe,z=v),(pe=Mt.distancePointLine(b,m,v))<q&&(q=pe,z=b),(pe=Mt.distancePointLine(B,m,v))<q&&(q=pe,z=B),z},d}(Te),Ut=function(){};Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut},Ut.orientationIndex=function(h,d,m){return Ut.signOfDet2x2(d.x-h.x,d.y-h.y,m.x-d.x,m.y-d.y)},Ut.signOfDet2x2=function(h,d,m,v){var b=null,B=null,z=null;if(b=1,0===h||0===v)return 0===d||0===m?0:d>0?m>0?-b:b:m>0?b:-b;if(0===d||0===m)return v>0?h>0?b:-b:h>0?-b:b;if(d>0?v>0?d<=v||(b=-b,B=h,h=m,m=B,B=d,d=v,v=B):d<=-v?(b=-b,m=-m,v=-v):(B=h,h=-m,m=B,B=d,d=-v,v=B):v>0?-d<=v?(b=-b,h=-h,d=-d):(B=-h,h=m,m=B,B=-d,d=v,v=B):d>=v?(h=-h,d=-d,m=-m,v=-v):(b=-b,B=-h,h=-m,m=B,B=-d,d=-v,v=B),h>0){if(!(m>0&&h<=m))return b}else{if(m>0||!(h>=m))return-b;b=-b,h=-h,m=-m}for(;;){if((v-=(z=Math.floor(m/h))*d)<0)return-b;if(v>d)return b;if(h>(m-=z*h)+m){if(d<v+v)return b}else{if(d>v+v)return-b;m=h-m,v=d-v,b=-b}if(0===v)return 0===m?0:-b;if(0===m||(h-=(z=Math.floor(h/m))*m,(d-=z*v)<0))return b;if(d>v)return-b;if(m>h+h){if(v<d+d)return-b}else{if(v>d+d)return b;h=m-h,d=v-d,b=-b}if(0===d)return 0===h?0:b;if(0===h)return-b}};var Kt=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};Kt.prototype.countSegment=function(h,d){if(h.x<this._p.x&&d.x<this._p.x)return null;if(this._p.x===d.x&&this._p.y===d.y)return this._isPointOnSegment=!0,null;if(h.y===this._p.y&&d.y===this._p.y){var m=h.x,v=d.x;return m>v&&(m=d.x,v=h.x),this._p.x>=m&&this._p.x<=v&&(this._isPointOnSegment=!0),null}if(h.y>this._p.y&&d.y<=this._p.y||d.y>this._p.y&&h.y<=this._p.y){var B=h.y-this._p.y,q=d.y-this._p.y,pe=Ut.signOfDet2x2(h.x-this._p.x,B,d.x-this._p.x,q);if(0===pe)return this._isPointOnSegment=!0,null;q<B&&(pe=-pe),pe>0&&this._crossingCount++}},Kt.prototype.isPointInPolygon=function(){return this.getLocation()!==oe.EXTERIOR},Kt.prototype.getLocation=function(){return this._isPointOnSegment?oe.BOUNDARY:this._crossingCount%2==1?oe.INTERIOR:oe.EXTERIOR},Kt.prototype.isOnSegment=function(){return this._isPointOnSegment},Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt},Kt.locatePointInRing=function(){if(arguments[0]instanceof $&&At(arguments[1],vt)){for(var d=arguments[1],m=new Kt(arguments[0]),v=new $,b=new $,B=1;B<d.size();B++)if(d.getCoordinate(B,v),d.getCoordinate(B-1,b),m.countSegment(v,b),m.isOnSegment())return m.getLocation();return m.getLocation()}if(arguments[0]instanceof $&&arguments[1]instanceof Array){for(var q=arguments[1],pe=new Kt(arguments[0]),Ue=1;Ue<q.length;Ue++)if(pe.countSegment(q[Ue],q[Ue-1]),pe.isOnSegment())return pe.getLocation();return pe.getLocation()}};var Mt=function(){},bi={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Mt.prototype.interfaces_=function(){return[]},Mt.prototype.getClass=function(){return Mt},Mt.orientationIndex=function(h,d,m){return Je.orientationIndex(h,d,m)},Mt.signedArea=function(){if(arguments[0]instanceof Array){var h=arguments[0];if(h.length<3)return 0;for(var d=0,m=h[0].x,v=1;v<h.length-1;v++)d+=(h[v].x-m)*(h[v-1].y-h[v+1].y);return d/2}if(At(arguments[0],vt)){var z=arguments[0],q=z.size();if(q<3)return 0;var pe=new $,Ue=new $,gt=new $;z.getCoordinate(0,Ue),z.getCoordinate(1,gt);var pt=Ue.x;gt.x-=pt;for(var hn=0,Mn=1;Mn<q-1;Mn++)pe.y=Ue.y,Ue.x=gt.x,Ue.y=gt.y,z.getCoordinate(Mn+1,gt),gt.x-=pt,hn+=Ue.x*(pe.y-gt.y);return hn/2}},Mt.distanceLineLine=function(h,d,m,v){if(h.equals(d))return Mt.distancePointLine(h,m,v);if(m.equals(v))return Mt.distancePointLine(v,h,d);var b=!1;if(on.intersects(h,d,m,v)){var B=(d.x-h.x)*(v.y-m.y)-(d.y-h.y)*(v.x-m.x);if(0===B)b=!0;else{var q=((h.y-m.y)*(d.x-h.x)-(h.x-m.x)*(d.y-h.y))/B,pe=((h.y-m.y)*(v.x-m.x)-(h.x-m.x)*(v.y-m.y))/B;(pe<0||pe>1||q<0||q>1)&&(b=!0)}}else b=!0;return b?be.min(Mt.distancePointLine(h,m,v),Mt.distancePointLine(d,m,v),Mt.distancePointLine(m,h,d),Mt.distancePointLine(v,h,d)):0},Mt.isPointInRing=function(h,d){return Mt.locatePointInRing(h,d)!==oe.EXTERIOR},Mt.computeLength=function(h){var d=h.size();if(d<=1)return 0;var m=0,v=new $;h.getCoordinate(0,v);for(var b=v.x,B=v.y,z=1;z<d;z++){h.getCoordinate(z,v);var q=v.x,pe=v.y,Ue=q-b,gt=pe-B;m+=Math.sqrt(Ue*Ue+gt*gt),b=q,B=pe}return m},Mt.isCCW=function(h){var d=h.length-1;if(d<3)throw new X("Ring has fewer than 4 points, so orientation cannot be determined");for(var m=h[0],v=0,b=1;b<=d;b++){var B=h[b];B.y>m.y&&(m=B,v=b)}var z=v;do{(z-=1)<0&&(z=d)}while(h[z].equals2D(m)&&z!==v);var q=v;do{q=(q+1)%d}while(h[q].equals2D(m)&&q!==v);var pe=h[z],Ue=h[q];if(pe.equals2D(m)||Ue.equals2D(m)||pe.equals2D(Ue))return!1;var gt=Mt.computeOrientation(pe,m,Ue);return 0===gt?pe.x>Ue.x:gt>0},Mt.locatePointInRing=function(h,d){return Kt.locatePointInRing(h,d)},Mt.distancePointLinePerpendicular=function(h,d,m){var v=(m.x-d.x)*(m.x-d.x)+(m.y-d.y)*(m.y-d.y);return Math.abs(((d.y-h.y)*(m.x-d.x)-(d.x-h.x)*(m.y-d.y))/v)*Math.sqrt(v)},Mt.computeOrientation=function(h,d,m){return Mt.orientationIndex(h,d,m)},Mt.distancePointLine=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1];if(0===d.length)throw new X("Line array must contain at least one vertex");for(var m=h.distance(d[0]),v=0;v<d.length-1;v++){var b=Mt.distancePointLine(h,d[v],d[v+1]);b<m&&(m=b)}return m}if(3===arguments.length){var B=arguments[0],z=arguments[1],q=arguments[2];if(z.x===q.x&&z.y===q.y)return B.distance(z);var pe=(q.x-z.x)*(q.x-z.x)+(q.y-z.y)*(q.y-z.y),Ue=((B.x-z.x)*(q.x-z.x)+(B.y-z.y)*(q.y-z.y))/pe;return Ue<=0?B.distance(z):Ue>=1?B.distance(q):Math.abs(((z.y-B.y)*(q.x-z.x)-(z.x-B.x)*(q.y-z.y))/pe)*Math.sqrt(pe)}},Mt.isOnLine=function(h,d){for(var m=new mt,v=1;v<d.length;v++)if(m.computeIntersection(h,d[v-1],d[v]),m.hasIntersection())return!0;return!1},bi.CLOCKWISE.get=function(){return-1},bi.RIGHT.get=function(){return Mt.CLOCKWISE},bi.COUNTERCLOCKWISE.get=function(){return 1},bi.LEFT.get=function(){return Mt.COUNTERCLOCKWISE},bi.COLLINEAR.get=function(){return 0},bi.STRAIGHT.get=function(){return Mt.COLLINEAR},Object.defineProperties(Mt,bi);var ki=function(){};ki.prototype.filter=function(h){},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki};var yn=function(){var h=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=h,this._SRID=h.getSRID()},Ii={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};yn.prototype.isGeometryCollection=function(){return this.getSortIndex()===yn.SORTINDEX_GEOMETRYCOLLECTION},yn.prototype.getFactory=function(){return this._factory},yn.prototype.getGeometryN=function(h){return this},yn.prototype.getArea=function(){return 0},yn.prototype.isRectangle=function(){return!1},yn.prototype.equals=function(){if(arguments[0]instanceof yn){var h=arguments[0];return null!==h&&this.equalsTopo(h)}if(arguments[0]instanceof Object){var d=arguments[0];return d instanceof yn&&this.equalsExact(d)}},yn.prototype.equalsExact=function(h){return this===h||this.equalsExact(h,0)},yn.prototype.geometryChanged=function(){this.apply(yn.geometryChangedFilter)},yn.prototype.geometryChangedAction=function(){this._envelope=null},yn.prototype.equalsNorm=function(h){return null!==h&&this.norm().equalsExact(h.norm())},yn.prototype.getLength=function(){return 0},yn.prototype.getNumGeometries=function(){return 1},yn.prototype.compareTo=function(){if(1===arguments.length){var h=arguments[0],d=h;return this.getSortIndex()!==d.getSortIndex()?this.getSortIndex()-d.getSortIndex():this.isEmpty()&&d.isEmpty()?0:this.isEmpty()?-1:d.isEmpty()?1:this.compareToSameClass(h)}if(2===arguments.length){var m=arguments[0],v=arguments[1];return this.getSortIndex()!==m.getSortIndex()?this.getSortIndex()-m.getSortIndex():this.isEmpty()&&m.isEmpty()?0:this.isEmpty()?-1:m.isEmpty()?1:this.compareToSameClass(m,v)}},yn.prototype.getUserData=function(){return this._userData},yn.prototype.getSRID=function(){return this._SRID},yn.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},yn.prototype.checkNotGeometryCollection=function(h){if(h.getSortIndex()===yn.SORTINDEX_GEOMETRYCOLLECTION)throw new X("This method does not support GeometryCollection arguments")},yn.prototype.equal=function(h,d,m){return 0===m?h.equals(d):h.distance(d)<=m},yn.prototype.norm=function(){var h=this.copy();return h.normalize(),h},yn.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},yn.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new on(this._envelope)},yn.prototype.setSRID=function(h){this._SRID=h},yn.prototype.setUserData=function(h){this._userData=h},yn.prototype.compare=function(h,d){for(var m=h.iterator(),v=d.iterator();m.hasNext()&&v.hasNext();){var b=m.next(),B=v.next(),z=b.compareTo(B);if(0!==z)return z}return m.hasNext()?1:v.hasNext()?-1:0},yn.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},yn.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===yn.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===yn.SORTINDEX_MULTIPOINT||this.getSortIndex()===yn.SORTINDEX_MULTILINESTRING||this.getSortIndex()===yn.SORTINDEX_MULTIPOLYGON},yn.prototype.interfaces_=function(){return[se,Z,ue]},yn.prototype.getClass=function(){return yn},yn.hasNonEmptyElements=function(h){for(var d=0;d<h.length;d++)if(!h[d].isEmpty())return!0;return!1},yn.hasNullElements=function(h){for(var d=0;d<h.length;d++)if(null===h[d])return!0;return!1},Ii.serialVersionUID.get=function(){return 0x799ea46522854c00},Ii.SORTINDEX_POINT.get=function(){return 0},Ii.SORTINDEX_MULTIPOINT.get=function(){return 1},Ii.SORTINDEX_LINESTRING.get=function(){return 2},Ii.SORTINDEX_LINEARRING.get=function(){return 3},Ii.SORTINDEX_MULTILINESTRING.get=function(){return 4},Ii.SORTINDEX_POLYGON.get=function(){return 5},Ii.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Ii.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Ii.geometryChangedFilter.get=function(){return vr},Object.defineProperties(yn,Ii);var vr=function(){};vr.interfaces_=function(){return[ki]},vr.filter=function(h){h.geometryChangedAction()};var lr=function(){};lr.prototype.filter=function(h){},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var _r=function(){},Vs={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};_r.prototype.isInBoundary=function(h){},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},Vs.Mod2BoundaryNodeRule.get=function(){return ya},Vs.EndPointBoundaryNodeRule.get=function(){return Go},Vs.MultiValentEndPointBoundaryNodeRule.get=function(){return Eo},Vs.MonoValentEndPointBoundaryNodeRule.get=function(){return wa},Vs.MOD2_BOUNDARY_RULE.get=function(){return new ya},Vs.ENDPOINT_BOUNDARY_RULE.get=function(){return new Go},Vs.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Eo},Vs.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new wa},Vs.OGC_SFS_BOUNDARY_RULE.get=function(){return _r.MOD2_BOUNDARY_RULE},Object.defineProperties(_r,Vs);var ya=function(){};ya.prototype.isInBoundary=function(h){return h%2==1},ya.prototype.interfaces_=function(){return[_r]},ya.prototype.getClass=function(){return ya};var Go=function(){};Go.prototype.isInBoundary=function(h){return h>0},Go.prototype.interfaces_=function(){return[_r]},Go.prototype.getClass=function(){return Go};var Eo=function(){};Eo.prototype.isInBoundary=function(h){return h>1},Eo.prototype.interfaces_=function(){return[_r]},Eo.prototype.getClass=function(){return Eo};var wa=function(){};wa.prototype.isInBoundary=function(h){return 1===h},wa.prototype.interfaces_=function(){return[_r]},wa.prototype.getClass=function(){return wa};var ys=function(){};ys.prototype.add=function(){},ys.prototype.addAll=function(){},ys.prototype.isEmpty=function(){},ys.prototype.iterator=function(){},ys.prototype.size=function(){},ys.prototype.toArray=function(){},ys.prototype.remove=function(){},(Ee.prototype=new Error).name="IndexOutOfBoundsException";var j1=function(){};j1.prototype.hasNext=function(){},j1.prototype.next=function(){},j1.prototype.remove=function(){};var Qo=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.get=function(){},d.prototype.set=function(){},d.prototype.isEmpty=function(){},d}(ys);(Ne.prototype=new Error).name="NoSuchElementException";var rn=function(h){function d(){h.call(this),this.array_=[],arguments[0]instanceof ys&&this.addAll(arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.ensureCapacity=function(){},d.prototype.interfaces_=function(){return[h,ys]},d.prototype.add=function(m){return 1===arguments.length?this.array_.push(m):this.array_.splice(arguments[0],arguments[1]),!0},d.prototype.clear=function(){this.array_=[]},d.prototype.addAll=function(m){for(var v=m.iterator();v.hasNext();)this.add(v.next());return!0},d.prototype.set=function(m,v){var b=this.array_[m];return this.array_[m]=v,b},d.prototype.iterator=function(){return new H2(this)},d.prototype.get=function(m){if(m<0||m>=this.size())throw new Ee;return this.array_[m]},d.prototype.isEmpty=function(){return 0===this.array_.length},d.prototype.size=function(){return this.array_.length},d.prototype.toArray=function(){for(var m=[],v=0,b=this.array_.length;v<b;v++)m.push(this.array_[v]);return m},d.prototype.remove=function(m){for(var v=!1,b=0,B=this.array_.length;b<B;b++)if(this.array_[b]===m){this.array_.splice(b,1),v=!0;break}return v},d}(Qo),H2=function(h){function d(m){h.call(this),this.arrayList_=m,this.position_=0}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Ne;return this.arrayList_.get(this.position_++)},d.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},d.prototype.set=function(m){return this.arrayList_.set(this.position_-1,m)},d.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},d}(j1),lc=function(h){function d(){if(h.call(this),0!==arguments.length)if(1===arguments.length){var v=arguments[0];this.ensureCapacity(v.length),this.add(v,!0)}else if(2===arguments.length){var b=arguments[0],B=arguments[1];this.ensureCapacity(b.length),this.add(b,B)}}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={coordArrayType:{configurable:!0}};return m.coordArrayType.get=function(){return new Array(0).fill(null)},d.prototype.getCoordinate=function(v){return this.get(v)},d.prototype.addAll=function(){if(2===arguments.length){for(var b=arguments[1],B=!1,z=arguments[0].iterator();z.hasNext();)this.add(z.next(),b),B=!0;return B}return h.prototype.addAll.apply(this,arguments)},d.prototype.clone=function(){for(var v=h.prototype.clone.call(this),b=0;b<this.size();b++)v.add(b,this.get(b).copy());return v},d.prototype.toCoordinateArray=function(){return this.toArray(d.coordArrayType)},d.prototype.add=function(){if(1===arguments.length)h.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof $&&"boolean"==typeof arguments[1]){var z=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(z))return null;h.prototype.add.call(this,z)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var Ue=arguments[0],gt=arguments[1];if(arguments[2])for(var pt=0;pt<Ue.length;pt++)this.add(Ue[pt],gt);else for(var hn=Ue.length-1;hn>=0;hn--)this.add(Ue[hn],gt);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof $){var Mn=arguments[0],Fn=arguments[1];if(!arguments[2]){var Jn=this.size();if(Jn>0&&(Mn>0&&this.get(Mn-1).equals2D(Fn)||Mn<Jn&&this.get(Mn).equals2D(Fn)))return null}h.prototype.add.call(this,Mn,Fn)}}else if(4===arguments.length){var Hr=arguments[0],Do=arguments[1],l1=arguments[2],_l=arguments[3],yl=1;l1>_l&&(yl=-1);for(var dh=l1;dh!==_l;dh+=yl)this.add(Hr[dh],Do);return!0}},d.prototype.closeRing=function(){this.size()>0&&this.add(new $(this.get(0)),!1)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},Object.defineProperties(d,m),d}(rn),Bi=function(){},Yc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Yc.ForwardComparator.get=function(){return uo},Yc.BidirectionalComparator.get=function(){return ul},Yc.coordArrayType.get=function(){return new Array(0).fill(null)},Bi.prototype.interfaces_=function(){return[]},Bi.prototype.getClass=function(){return Bi},Bi.isRing=function(h){return!(h.length<4||!h[0].equals2D(h[h.length-1]))},Bi.ptNotInList=function(h,d){for(var m=0;m<h.length;m++){var v=h[m];if(Bi.indexOf(v,d)<0)return v}return null},Bi.scroll=function(h,d){var m=Bi.indexOf(d,h);if(m<0)return null;var v=new Array(h.length).fill(null);$t.arraycopy(h,m,v,0,h.length-m),$t.arraycopy(h,0,v,h.length-m,m),$t.arraycopy(v,0,h,0,h.length)},Bi.equals=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1];if(h===d)return!0;if(null===h||null===d||h.length!==d.length)return!1;for(var m=0;m<h.length;m++)if(!h[m].equals(d[m]))return!1;return!0}if(3===arguments.length){var v=arguments[0],b=arguments[1],B=arguments[2];if(v===b)return!0;if(null===v||null===b||v.length!==b.length)return!1;for(var z=0;z<v.length;z++)if(0!==B.compare(v[z],b[z]))return!1;return!0}},Bi.intersection=function(h,d){for(var m=new lc,v=0;v<h.length;v++)d.intersects(h[v])&&m.add(h[v],!0);return m.toCoordinateArray()},Bi.hasRepeatedPoints=function(h){for(var d=1;d<h.length;d++)if(h[d-1].equals(h[d]))return!0;return!1},Bi.removeRepeatedPoints=function(h){return Bi.hasRepeatedPoints(h)?new lc(h,!1).toCoordinateArray():h},Bi.reverse=function(h){for(var d=h.length-1,m=Math.trunc(d/2),v=0;v<=m;v++){var b=h[v];h[v]=h[d-v],h[d-v]=b}},Bi.removeNull=function(h){for(var d=0,m=0;m<h.length;m++)null!==h[m]&&d++;var v=new Array(d).fill(null);if(0===d)return v;for(var b=0,B=0;B<h.length;B++)null!==h[B]&&(v[b++]=h[B]);return v},Bi.copyDeep=function(){if(1===arguments.length){for(var h=arguments[0],d=new Array(h.length).fill(null),m=0;m<h.length;m++)d[m]=new $(h[m]);return d}if(5===arguments.length)for(var v=arguments[0],b=arguments[1],B=arguments[2],z=arguments[3],q=arguments[4],pe=0;pe<q;pe++)B[z+pe]=new $(v[b+pe])},Bi.isEqualReversed=function(h,d){for(var m=0;m<h.length;m++)if(0!==h[m].compareTo(d[h.length-m-1]))return!1;return!0},Bi.envelope=function(h){for(var d=new on,m=0;m<h.length;m++)d.expandToInclude(h[m]);return d},Bi.toCoordinateArray=function(h){return h.toArray(Bi.coordArrayType)},Bi.atLeastNCoordinatesOrNothing=function(h,d){return d.length>=h?d:[]},Bi.indexOf=function(h,d){for(var m=0;m<d.length;m++)if(h.equals(d[m]))return m;return-1},Bi.increasingDirection=function(h){for(var d=0;d<Math.trunc(h.length/2);d++){var v=h[d].compareTo(h[h.length-1-d]);if(0!==v)return v}return 1},Bi.compare=function(h,d){for(var m=0;m<h.length&&m<d.length;){var v=h[m].compareTo(d[m]);if(0!==v)return v;m++}return m<d.length?-1:m<h.length?1:0},Bi.minCoordinate=function(h){for(var d=null,m=0;m<h.length;m++)(null===d||d.compareTo(h[m])>0)&&(d=h[m]);return d},Bi.extract=function(h,d,m){d=be.clamp(d,0,h.length);var v=(m=be.clamp(m,-1,h.length))-d+1;m<0&&(v=0),d>=h.length&&(v=0),m<d&&(v=0);var b=new Array(v).fill(null);if(0===v)return b;for(var B=0,z=d;z<=m;z++)b[B++]=h[z];return b},Object.defineProperties(Bi,Yc);var uo=function(){};uo.prototype.compare=function(h,d){return Bi.compare(h,d)},uo.prototype.interfaces_=function(){return[ce]},uo.prototype.getClass=function(){return uo};var ul=function(){};ul.prototype.compare=function(h,d){var m=h,v=d;if(m.length<v.length)return-1;if(m.length>v.length)return 1;if(0===m.length)return 0;var b=Bi.compare(m,v);return Bi.isEqualReversed(m,v)?0:b},ul.prototype.OLDcompare=function(h,d){var m=h,v=d;if(m.length<v.length)return-1;if(m.length>v.length)return 1;if(0===m.length)return 0;for(var b=Bi.increasingDirection(m),B=Bi.increasingDirection(v),z=b>0?0:m.length-1,q=B>0?0:m.length-1,pe=0;pe<m.length;pe++){var Ue=m[z].compareTo(v[q]);if(0!==Ue)return Ue;z+=b,q+=B}return 0},ul.prototype.interfaces_=function(){return[ce]},ul.prototype.getClass=function(){return ul};var iu=function(){};iu.prototype.get=function(){},iu.prototype.put=function(){},iu.prototype.size=function(){},iu.prototype.values=function(){},iu.prototype.entrySet=function(){};var Pm=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d}(iu);(ze.prototype=new Error).name="OperationNotSupported",(Re.prototype=new ys).contains=function(){};var zf=function(h){function d(){h.call(this),this.array_=[],arguments[0]instanceof ys&&this.addAll(arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.contains=function(m){for(var v=0,b=this.array_.length;v<b;v++)if(this.array_[v]===m)return!0;return!1},d.prototype.add=function(m){return!this.contains(m)&&(this.array_.push(m),!0)},d.prototype.addAll=function(m){for(var v=m.iterator();v.hasNext();)this.add(v.next());return!0},d.prototype.remove=function(m){throw new Error},d.prototype.size=function(){return this.array_.length},d.prototype.isEmpty=function(){return 0===this.array_.length},d.prototype.toArray=function(){for(var m=[],v=0,b=this.array_.length;v<b;v++)m.push(this.array_[v]);return m},d.prototype.iterator=function(){return new Tr(this)},d}(Re),Tr=function(h){function d(m){h.call(this),this.hashSet_=m,this.position_=0}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Ne;return this.hashSet_.array_[this.position_++]},d.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},d.prototype.remove=function(){throw new ze},d}(j1),m2=0;(Ct.prototype=new Pm).get=function(h){for(var d=this.root_;null!==d;){var m=h.compareTo(d.key);if(m<0)d=d.left;else{if(!(m>0))return d.value;d=d.right}}return null},Ct.prototype.put=function(h,d){if(null===this.root_)return this.root_={key:h,value:d,left:null,right:null,parent:null,color:m2,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var m,v,b=this.root_;do{if(m=b,(v=h.compareTo(b.key))<0)b=b.left;else{if(!(v>0)){var B=b.value;return b.value=d,B}b=b.right}}while(null!==b);var z={key:h,left:null,right:null,value:d,parent:m,color:m2,getValue:function(){return this.value},getKey:function(){return this.key}};return v<0?m.left=z:m.right=z,this.fixAfterInsertion(z),this.size_++,null},Ct.prototype.fixAfterInsertion=function(h){for(h.color=1;null!=h&&h!==this.root_&&1===h.parent.color;)if(We(h)===ft(We(We(h)))){var d=Vt(We(We(h)));1===Ie(d)?(ct(We(h),m2),ct(d,m2),ct(We(We(h)),1),h=We(We(h))):(h===Vt(We(h))&&(h=We(h),this.rotateLeft(h)),ct(We(h),m2),ct(We(We(h)),1),this.rotateRight(We(We(h))))}else{var m=ft(We(We(h)));1===Ie(m)?(ct(We(h),m2),ct(m,m2),ct(We(We(h)),1),h=We(We(h))):(h===ft(We(h))&&(h=We(h),this.rotateRight(h)),ct(We(h),m2),ct(We(We(h)),1),this.rotateLeft(We(We(h))))}this.root_.color=m2},Ct.prototype.values=function(){var h=new rn,d=this.getFirstEntry();if(null!==d)for(h.add(d.value);null!==(d=Ct.successor(d));)h.add(d.value);return h},Ct.prototype.entrySet=function(){var h=new zf,d=this.getFirstEntry();if(null!==d)for(h.add(d);null!==(d=Ct.successor(d));)h.add(d);return h},Ct.prototype.rotateLeft=function(h){if(null!=h){var d=h.right;h.right=d.left,null!=d.left&&(d.left.parent=h),d.parent=h.parent,null===h.parent?this.root_=d:h.parent.left===h?h.parent.left=d:h.parent.right=d,d.left=h,h.parent=d}},Ct.prototype.rotateRight=function(h){if(null!=h){var d=h.left;h.left=d.right,null!=d.right&&(d.right.parent=h),d.parent=h.parent,null===h.parent?this.root_=d:h.parent.right===h?h.parent.right=d:h.parent.left=d,d.right=h,h.parent=d}},Ct.prototype.getFirstEntry=function(){var h=this.root_;if(null!=h)for(;null!=h.left;)h=h.left;return h},Ct.successor=function(h){if(null===h)return null;if(null!==h.right){for(var d=h.right;null!==d.left;)d=d.left;return d}for(var m=h.parent,v=h;null!==m&&v===m.right;)v=m,m=m.parent;return m},Ct.prototype.size=function(){return this.size_};var ru=function(){};ru.prototype.interfaces_=function(){return[]},ru.prototype.getClass=function(){return ru},st.prototype=new Re,(yt.prototype=new st).contains=function(h){for(var d=0,m=this.array_.length;d<m;d++)if(0===this.array_[d].compareTo(h))return!0;return!1},yt.prototype.add=function(h){if(this.contains(h))return!1;for(var d=0,m=this.array_.length;d<m;d++)if(1===this.array_[d].compareTo(h))return this.array_.splice(d,0,h),!0;return this.array_.push(h),!0},yt.prototype.addAll=function(h){for(var d=h.iterator();d.hasNext();)this.add(d.next());return!0},yt.prototype.remove=function(h){throw new ze},yt.prototype.size=function(){return this.array_.length},yt.prototype.isEmpty=function(){return 0===this.array_.length},yt.prototype.toArray=function(){for(var h=[],d=0,m=this.array_.length;d<m;d++)h.push(this.array_[d]);return h},yt.prototype.iterator=function(){return new Ra(this)};var Ra=function(h){this.treeSet_=h,this.position_=0};Ra.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Ne;return this.treeSet_.array_[this.position_++]},Ra.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ra.prototype.remove=function(){throw new ze};var $l=function(){};$l.sort=function(){var h,d,m,b=arguments[0];if(1===arguments.length)b.sort(function(z,q){return z.compareTo(q)});else if(2===arguments.length)m=arguments[1],b.sort(function(z,q){return m.compare(z,q)});else if(3===arguments.length){(d=b.slice(arguments[1],arguments[2])).sort();var B=b.slice(0,arguments[1]).concat(d,b.slice(arguments[2],b.length));for(b.splice(0,b.length),h=0;h<B.length;h++)b.push(B[h])}else if(4===arguments.length)for(d=b.slice(arguments[1],arguments[2]),m=arguments[3],d.sort(function(z,q){return m.compare(z,q)}),B=b.slice(0,arguments[1]).concat(d,b.slice(arguments[2],b.length)),b.splice(0,b.length),h=0;h<B.length;h++)b.push(B[h])},$l.asList=function(h){for(var d=new rn,m=0,v=h.length;m<v;m++)d.add(h[m]);return d};var xi=function(){},t1={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};t1.P.get=function(){return 0},t1.L.get=function(){return 1},t1.A.get=function(){return 2},t1.FALSE.get=function(){return-1},t1.TRUE.get=function(){return-2},t1.DONTCARE.get=function(){return-3},t1.SYM_FALSE.get=function(){return"F"},t1.SYM_TRUE.get=function(){return"T"},t1.SYM_DONTCARE.get=function(){return"*"},t1.SYM_P.get=function(){return"0"},t1.SYM_L.get=function(){return"1"},t1.SYM_A.get=function(){return"2"},xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi},xi.toDimensionSymbol=function(h){switch(h){case xi.FALSE:return xi.SYM_FALSE;case xi.TRUE:return xi.SYM_TRUE;case xi.DONTCARE:return xi.SYM_DONTCARE;case xi.P:return xi.SYM_P;case xi.L:return xi.SYM_L;case xi.A:return xi.SYM_A}throw new X("Unknown dimension value: "+h)},xi.toDimensionValue=function(h){switch(rt.toUpperCase(h)){case xi.SYM_FALSE:return xi.FALSE;case xi.SYM_TRUE:return xi.TRUE;case xi.SYM_DONTCARE:return xi.DONTCARE;case xi.SYM_P:return xi.P;case xi.SYM_L:return xi.L;case xi.SYM_A:return xi.A}throw new X("Unknown dimension symbol: "+h)},Object.defineProperties(xi,t1);var Fa=function(){};Fa.prototype.filter=function(h){},Fa.prototype.interfaces_=function(){return[]},Fa.prototype.getClass=function(){return Fa};var A2=function(){};A2.prototype.filter=function(h,d){},A2.prototype.isDone=function(){},A2.prototype.isGeometryChanged=function(){},A2.prototype.interfaces_=function(){return[]},A2.prototype.getClass=function(){return A2};var _1=function(h){function d(v,b){if(h.call(this,b),this._geometries=v||[],h.hasNullElements(this._geometries))throw new X("geometries must not contain null elements")}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){for(var v=new on,b=0;b<this._geometries.length;b++)v.expandToInclude(this._geometries[b].getEnvelopeInternal());return v},d.prototype.getGeometryN=function(v){return this._geometries[v]},d.prototype.getSortIndex=function(){return h.SORTINDEX_GEOMETRYCOLLECTION},d.prototype.getCoordinates=function(){for(var v=new Array(this.getNumPoints()).fill(null),b=-1,B=0;B<this._geometries.length;B++)for(var z=this._geometries[B].getCoordinates(),q=0;q<z.length;q++)v[++b]=z[q];return v},d.prototype.getArea=function(){for(var v=0,b=0;b<this._geometries.length;b++)v+=this._geometries[b].getArea();return v},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],b=arguments[1];if(!this.isEquivalentClass(v))return!1;var B=v;if(this._geometries.length!==B._geometries.length)return!1;for(var z=0;z<this._geometries.length;z++)if(!this._geometries[z].equalsExact(B._geometries[z],b))return!1;return!0}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){for(var v=0;v<this._geometries.length;v++)this._geometries[v].normalize();$l.sort(this._geometries)},d.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},d.prototype.getBoundaryDimension=function(){for(var v=xi.FALSE,b=0;b<this._geometries.length;b++)v=Math.max(v,this._geometries[b].getBoundaryDimension());return v},d.prototype.getDimension=function(){for(var v=xi.FALSE,b=0;b<this._geometries.length;b++)v=Math.max(v,this._geometries[b].getDimension());return v},d.prototype.getLength=function(){for(var v=0,b=0;b<this._geometries.length;b++)v+=this._geometries[b].getLength();return v},d.prototype.getNumPoints=function(){for(var v=0,b=0;b<this._geometries.length;b++)v+=this._geometries[b].getNumPoints();return v},d.prototype.getNumGeometries=function(){return this._geometries.length},d.prototype.reverse=function(){for(var b=new Array(this._geometries.length).fill(null),B=0;B<this._geometries.length;B++)b[B]=this._geometries[B].reverse();return this.getFactory().createGeometryCollection(b)},d.prototype.compareToSameClass=function(){if(1===arguments.length){var v=arguments[0],b=new yt($l.asList(this._geometries)),B=new yt($l.asList(v._geometries));return this.compare(b,B)}if(2===arguments.length){for(var q=arguments[1],pe=arguments[0],Ue=this.getNumGeometries(),gt=pe.getNumGeometries(),pt=0;pt<Ue&&pt<gt;){var hn=this.getGeometryN(pt),Mn=pe.getGeometryN(pt),Fn=hn.compareToSameClass(Mn,q);if(0!==Fn)return Fn;pt++}return pt<Ue?1:pt<gt?-1:0}},d.prototype.apply=function(){if(At(arguments[0],lr))for(var v=arguments[0],b=0;b<this._geometries.length;b++)this._geometries[b].apply(v);else if(At(arguments[0],A2)){var B=arguments[0];if(0===this._geometries.length)return null;for(var z=0;z<this._geometries.length&&(this._geometries[z].apply(B),!B.isDone());z++);B.isGeometryChanged()&&this.geometryChanged()}else if(At(arguments[0],Fa)){var q=arguments[0];q.filter(this);for(var pe=0;pe<this._geometries.length;pe++)this._geometries[pe].apply(q)}else if(At(arguments[0],ki)){var Ue=arguments[0];Ue.filter(this);for(var gt=0;gt<this._geometries.length;gt++)this._geometries[gt].apply(Ue)}},d.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),J.shouldNeverReachHere(),null},d.prototype.clone=function(){var v=h.prototype.clone.call(this);v._geometries=new Array(this._geometries.length).fill(null);for(var b=0;b<this._geometries.length;b++)v._geometries[b]=this._geometries[b].clone();return v},d.prototype.getGeometryType=function(){return"GeometryCollection"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),b=0;b<v.length;b++)v[b]=this._geometries[b].copy();return new d(v,this._factory)},d.prototype.isEmpty=function(){for(var v=0;v<this._geometries.length;v++)if(!this._geometries[v].isEmpty())return!1;return!0},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(d,m),d}(yn),T3=function(h){function d(){h.apply(this,arguments)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return yn.SORTINDEX_MULTILINESTRING},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],b=arguments[1];return!!this.isEquivalentClass(v)&&h.prototype.equalsExact.call(this,v,b)}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return this.isClosed()?xi.FALSE:0},d.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var v=0;v<this._geometries.length;v++)if(!this._geometries[v].isClosed())return!1;return!0},d.prototype.getDimension=function(){return 1},d.prototype.reverse=function(){for(var v=this._geometries.length,b=new Array(v).fill(null),B=0;B<this._geometries.length;B++)b[v-1-B]=this._geometries[B].reverse();return this.getFactory().createMultiLineString(b)},d.prototype.getBoundary=function(){return new y1(this).getBoundary()},d.prototype.getGeometryType=function(){return"MultiLineString"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),b=0;b<v.length;b++)v[b]=this._geometries[b].copy();return new d(v,this._factory)},d.prototype.interfaces_=function(){return[ru]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(d,m),d}(_1),y1=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var h=arguments[0],d=_r.MOD2_BOUNDARY_RULE;this._geom=h,this._geomFact=h.getFactory(),this._bnRule=d}else if(2===arguments.length){var m=arguments[0],v=arguments[1];this._geom=m,this._geomFact=m.getFactory(),this._bnRule=v}};y1.prototype.boundaryMultiLineString=function(h){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var d=this.computeBoundaryCoordinates(h);return 1===d.length?this._geomFact.createPoint(d[0]):this._geomFact.createMultiPointFromCoords(d)},y1.prototype.getBoundary=function(){return this._geom instanceof ho?this.boundaryLineString(this._geom):this._geom instanceof T3?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},y1.prototype.boundaryLineString=function(h){return this._geom.isEmpty()?this.getEmptyMultiPoint():h.isClosed()?this._bnRule.isInBoundary(2)?h.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([h.getStartPoint(),h.getEndPoint()])},y1.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},y1.prototype.computeBoundaryCoordinates=function(h){var d=new rn;this._endpointMap=new Ct;for(var m=0;m<h.getNumGeometries();m++){var v=h.getGeometryN(m);0!==v.getNumPoints()&&(this.addEndpoint(v.getCoordinateN(0)),this.addEndpoint(v.getCoordinateN(v.getNumPoints()-1)))}for(var b=this._endpointMap.entrySet().iterator();b.hasNext();){var B=b.next(),z=B.getValue().count;this._bnRule.isInBoundary(z)&&d.add(B.getKey())}return Bi.toCoordinateArray(d)},y1.prototype.addEndpoint=function(h){var d=this._endpointMap.get(h);null===d&&(d=new r0,this._endpointMap.put(h,d)),d.count++},y1.prototype.interfaces_=function(){return[]},y1.prototype.getClass=function(){return y1},y1.getBoundary=function(){return 1===arguments.length?new y1(arguments[0]).getBoundary():2===arguments.length?new y1(arguments[0],arguments[1]).getBoundary():void 0};var r0=function(){this.count=null};r0.prototype.interfaces_=function(){return[]},r0.prototype.getClass=function(){return r0};var w1=function(){},R6={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};w1.prototype.interfaces_=function(){return[]},w1.prototype.getClass=function(){return w1},w1.chars=function(h,d){for(var m=new Array(d).fill(null),v=0;v<d;v++)m[v]=h;return String(m)},w1.getStackTrace=function(){if(1===arguments.length){var h=arguments[0],d=new function(){},m=new function(){}(d);return h.printStackTrace(m),d.toString()}if(2===arguments.length){for(var b=arguments[1],B="",z=new function(){}(new function(){}(w1.getStackTrace(arguments[0]))),q=0;q<b;q++)try{B+=z.readLine()+w1.NEWLINE}catch(pe){if(!(pe instanceof qt))throw pe;J.shouldNeverReachHere()}return B}},w1.split=function(h,d){for(var m=d.length,v=new rn,b=""+h,B=b.indexOf(d);B>=0;){var z=b.substring(0,B);v.add(z),B=(b=b.substring(B+m)).indexOf(d)}b.length>0&&v.add(b);for(var q=new Array(v.size()).fill(null),pe=0;pe<q.length;pe++)q[pe]=v.get(pe);return q},w1.toString=function(){if(1===arguments.length)return w1.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},w1.spaces=function(h){return w1.chars(" ",h)},R6.NEWLINE.get=function(){return $t.getProperty("line.separator")},R6.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(w1,R6);var vo=function(){};vo.prototype.interfaces_=function(){return[]},vo.prototype.getClass=function(){return vo},vo.copyCoord=function(h,d,m,v){for(var b=Math.min(h.getDimension(),m.getDimension()),B=0;B<b;B++)m.setOrdinate(v,B,h.getOrdinate(d,B))},vo.isRing=function(h){var d=h.size();return 0===d||!(d<=3)&&h.getOrdinate(0,vt.X)===h.getOrdinate(d-1,vt.X)&&h.getOrdinate(0,vt.Y)===h.getOrdinate(d-1,vt.Y)},vo.isEqual=function(h,d){var m=h.size();if(m!==d.size())return!1;for(var v=Math.min(h.getDimension(),d.getDimension()),b=0;b<m;b++)for(var B=0;B<v;B++){var z=h.getOrdinate(b,B),q=d.getOrdinate(b,B);if(!(h.getOrdinate(b,B)===d.getOrdinate(b,B)||Y.isNaN(z)&&Y.isNaN(q)))return!1}return!0},vo.extend=function(h,d,m){var v=h.create(m,d.getDimension()),b=d.size();if(vo.copy(d,0,v,0,b),b>0)for(var B=b;B<m;B++)vo.copy(d,b-1,v,B,1);return v},vo.reverse=function(h){for(var d=h.size()-1,m=Math.trunc(d/2),v=0;v<=m;v++)vo.swap(h,v,d-v)},vo.swap=function(h,d,m){if(d===m)return null;for(var v=0;v<h.getDimension();v++){var b=h.getOrdinate(d,v);h.setOrdinate(d,v,h.getOrdinate(m,v)),h.setOrdinate(m,v,b)}},vo.copy=function(h,d,m,v,b){for(var B=0;B<b;B++)vo.copyCoord(h,d+B,m,v+B)},vo.toString=function(){if(1===arguments.length){var h=arguments[0],d=h.size();if(0===d)return"()";var m=h.getDimension(),v=new Ce;v.append("(");for(var b=0;b<d;b++){b>0&&v.append(" ");for(var B=0;B<m;B++)B>0&&v.append(","),v.append(w1.toString(h.getOrdinate(b,B)))}return v.append(")"),v.toString()}},vo.ensureValidRing=function(h,d){var m=d.size();return 0===m?d:m<=3?vo.createClosedRing(h,d,4):d.getOrdinate(0,vt.X)===d.getOrdinate(m-1,vt.X)&&d.getOrdinate(0,vt.Y)===d.getOrdinate(m-1,vt.Y)?d:vo.createClosedRing(h,d,m+1)},vo.createClosedRing=function(h,d,m){var v=h.create(m,d.getDimension()),b=d.size();vo.copy(d,0,v,0,b);for(var B=b;B<m;B++)vo.copy(d,0,v,B,1);return v};var ho=function(h){function d(v,b){h.call(this,b),this._points=null,this.init(v)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new on:this._points.expandEnvelope(new on)},d.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},d.prototype.getSortIndex=function(){return h.SORTINDEX_LINESTRING},d.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],b=arguments[1];if(!this.isEquivalentClass(v))return!1;var B=v;if(this._points.size()!==B._points.size())return!1;for(var z=0;z<this._points.size();z++)if(!this.equal(this._points.getCoordinate(z),B._points.getCoordinate(z),b))return!1;return!0}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){for(var v=0;v<Math.trunc(this._points.size()/2);v++){var b=this._points.size()-1-v;if(!this._points.getCoordinate(v).equals(this._points.getCoordinate(b)))return this._points.getCoordinate(v).compareTo(this._points.getCoordinate(b))>0&&vo.reverse(this._points),null}},d.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},d.prototype.getBoundaryDimension=function(){return this.isClosed()?xi.FALSE:0},d.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},d.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},d.prototype.getDimension=function(){return 1},d.prototype.getLength=function(){return Mt.computeLength(this._points)},d.prototype.getNumPoints=function(){return this._points.size()},d.prototype.reverse=function(){var v=this._points.copy();return vo.reverse(v),this.getFactory().createLineString(v)},d.prototype.compareToSameClass=function(){if(1===arguments.length){for(var v=arguments[0],b=0,B=0;b<this._points.size()&&B<v._points.size();){var z=this._points.getCoordinate(b).compareTo(v._points.getCoordinate(B));if(0!==z)return z;b++,B++}return b<this._points.size()?1:B<v._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},d.prototype.apply=function(){if(At(arguments[0],lr))for(var v=arguments[0],b=0;b<this._points.size();b++)v.filter(this._points.getCoordinate(b));else if(At(arguments[0],A2)){var B=arguments[0];if(0===this._points.size())return null;for(var z=0;z<this._points.size()&&(B.filter(this._points,z),!B.isDone());z++);B.isGeometryChanged()&&this.geometryChanged()}else(At(arguments[0],Fa)||At(arguments[0],ki))&&arguments[0].filter(this)},d.prototype.getBoundary=function(){return new y1(this).getBoundary()},d.prototype.isEquivalentClass=function(v){return v instanceof d},d.prototype.clone=function(){var v=h.prototype.clone.call(this);return v._points=this._points.clone(),v},d.prototype.getCoordinateN=function(v){return this._points.getCoordinate(v)},d.prototype.getGeometryType=function(){return"LineString"},d.prototype.copy=function(){return new d(this._points.copy(),this._factory)},d.prototype.getCoordinateSequence=function(){return this._points},d.prototype.isEmpty=function(){return 0===this._points.size()},d.prototype.init=function(v){if(null===v&&(v=this.getFactory().getCoordinateSequenceFactory().create([])),1===v.size())throw new X("Invalid number of points in LineString (found "+v.size()+" - must be 0 or >= 2)");this._points=v},d.prototype.isCoordinate=function(v){for(var b=0;b<this._points.size();b++)if(this._points.getCoordinate(b).equals(v))return!0;return!1},d.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},d.prototype.getPointN=function(v){return this.getFactory().createPoint(this._points.getCoordinate(v))},d.prototype.interfaces_=function(){return[ru]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(d,m),d}(yn),uh=function(){};uh.prototype.interfaces_=function(){return[]},uh.prototype.getClass=function(){return uh};var uc=function(h){function d(v,b){h.call(this,b),this._coordinates=v||null,this.init(this._coordinates)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new on;var v=new on;return v.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),v},d.prototype.getSortIndex=function(){return h.SORTINDEX_POINT},d.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],b=arguments[1];return!!this.isEquivalentClass(v)&&(!(!this.isEmpty()||!v.isEmpty())||this.isEmpty()===v.isEmpty()&&this.equal(v.getCoordinate(),this.getCoordinate(),b))}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){},d.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},d.prototype.getBoundaryDimension=function(){return xi.FALSE},d.prototype.getDimension=function(){return 0},d.prototype.getNumPoints=function(){return this.isEmpty()?0:1},d.prototype.reverse=function(){return this.copy()},d.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},d.prototype.compareToSameClass=function(){if(1===arguments.length){var v=arguments[0];return this.getCoordinate().compareTo(v.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},d.prototype.apply=function(){if(At(arguments[0],lr)){var v=arguments[0];if(this.isEmpty())return null;v.filter(this.getCoordinate())}else if(At(arguments[0],A2)){var b=arguments[0];if(this.isEmpty())return null;b.filter(this._coordinates,0),b.isGeometryChanged()&&this.geometryChanged()}else(At(arguments[0],Fa)||At(arguments[0],ki))&&arguments[0].filter(this)},d.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},d.prototype.clone=function(){var v=h.prototype.clone.call(this);return v._coordinates=this._coordinates.clone(),v},d.prototype.getGeometryType=function(){return"Point"},d.prototype.copy=function(){return new d(this._coordinates.copy(),this._factory)},d.prototype.getCoordinateSequence=function(){return this._coordinates},d.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},d.prototype.isEmpty=function(){return 0===this._coordinates.size()},d.prototype.init=function(v){null===v&&(v=this.getFactory().getCoordinateSequenceFactory().create([])),J.isTrue(v.size()<=1),this._coordinates=v},d.prototype.isSimple=function(){return!0},d.prototype.interfaces_=function(){return[uh]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(d,m),d}(yn),v2=function(){};v2.prototype.interfaces_=function(){return[]},v2.prototype.getClass=function(){return v2};var Wo=function(h){function d(v,b,B){if(h.call(this,B),this._shell=null,this._holes=null,null===v&&(v=this.getFactory().createLinearRing()),null===b&&(b=[]),h.hasNullElements(b))throw new X("holes must not contain null elements");if(v.isEmpty()&&h.hasNonEmptyElements(b))throw new X("shell is empty but holes are not");this._shell=v,this._holes=b}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},d.prototype.getSortIndex=function(){return h.SORTINDEX_POLYGON},d.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var v=new Array(this.getNumPoints()).fill(null),b=-1,B=this._shell.getCoordinates(),z=0;z<B.length;z++)v[++b]=B[z];for(var q=0;q<this._holes.length;q++)for(var pe=this._holes[q].getCoordinates(),Ue=0;Ue<pe.length;Ue++)v[++b]=pe[Ue];return v},d.prototype.getArea=function(){var v=0;v+=Math.abs(Mt.signedArea(this._shell.getCoordinateSequence()));for(var b=0;b<this._holes.length;b++)v-=Math.abs(Mt.signedArea(this._holes[b].getCoordinateSequence()));return v},d.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var v=this._shell.getCoordinateSequence(),b=this.getEnvelopeInternal(),B=0;B<5;B++){var z=v.getX(B);if(z!==b.getMinX()&&z!==b.getMaxX())return!1;var q=v.getY(B);if(q!==b.getMinY()&&q!==b.getMaxY())return!1}for(var pe=v.getX(0),Ue=v.getY(0),gt=1;gt<=4;gt++){var pt=v.getX(gt),hn=v.getY(gt);if(pt!==pe==(hn!==Ue))return!1;pe=pt,Ue=hn}return!0},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],b=arguments[1];if(!this.isEquivalentClass(v))return!1;var B=v;if(!this._shell.equalsExact(B._shell,b)||this._holes.length!==B._holes.length)return!1;for(var pe=0;pe<this._holes.length;pe++)if(!this._holes[pe].equalsExact(B._holes[pe],b))return!1;return!0}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var v=0;v<this._holes.length;v++)this.normalize(this._holes[v],!1);$l.sort(this._holes)}else if(2===arguments.length){var b=arguments[0],B=arguments[1];if(b.isEmpty())return null;var z=new Array(b.getCoordinates().length-1).fill(null);$t.arraycopy(b.getCoordinates(),0,z,0,z.length);var q=Bi.minCoordinate(b.getCoordinates());Bi.scroll(z,q),$t.arraycopy(z,0,b.getCoordinates(),0,z.length),b.getCoordinates()[z.length]=z[0],Mt.isCCW(b.getCoordinates())===B&&Bi.reverse(b.getCoordinates())}},d.prototype.getCoordinate=function(){return this._shell.getCoordinate()},d.prototype.getNumInteriorRing=function(){return this._holes.length},d.prototype.getBoundaryDimension=function(){return 1},d.prototype.getDimension=function(){return 2},d.prototype.getLength=function(){var v=0;v+=this._shell.getLength();for(var b=0;b<this._holes.length;b++)v+=this._holes[b].getLength();return v},d.prototype.getNumPoints=function(){for(var v=this._shell.getNumPoints(),b=0;b<this._holes.length;b++)v+=this._holes[b].getNumPoints();return v},d.prototype.reverse=function(){var v=this.copy();v._shell=this._shell.copy().reverse(),v._holes=new Array(this._holes.length).fill(null);for(var b=0;b<this._holes.length;b++)v._holes[b]=this._holes[b].copy().reverse();return v},d.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},d.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var q=arguments[1],pe=arguments[0],pt=this._shell.compareToSameClass(pe._shell,q);if(0!==pt)return pt;for(var hn=this.getNumInteriorRing(),Mn=pe.getNumInteriorRing(),Fn=0;Fn<hn&&Fn<Mn;){var Jn=this.getInteriorRingN(Fn),Hr=pe.getInteriorRingN(Fn),Do=Jn.compareToSameClass(Hr,q);if(0!==Do)return Do;Fn++}return Fn<hn?1:Fn<Mn?-1:0}},d.prototype.apply=function(v){if(At(v,lr)){this._shell.apply(v);for(var b=0;b<this._holes.length;b++)this._holes[b].apply(v)}else if(At(v,A2)){if(this._shell.apply(v),!v.isDone())for(var B=0;B<this._holes.length&&(this._holes[B].apply(v),!v.isDone());B++);v.isGeometryChanged()&&this.geometryChanged()}else if(At(v,Fa))v.filter(this);else if(At(v,ki)){v.filter(this),this._shell.apply(v);for(var z=0;z<this._holes.length;z++)this._holes[z].apply(v)}},d.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var v=new Array(this._holes.length+1).fill(null);v[0]=this._shell;for(var b=0;b<this._holes.length;b++)v[b+1]=this._holes[b];return v.length<=1?this.getFactory().createLinearRing(v[0].getCoordinateSequence()):this.getFactory().createMultiLineString(v)},d.prototype.clone=function(){var v=h.prototype.clone.call(this);v._shell=this._shell.clone(),v._holes=new Array(this._holes.length).fill(null);for(var b=0;b<this._holes.length;b++)v._holes[b]=this._holes[b].clone();return v},d.prototype.getGeometryType=function(){return"Polygon"},d.prototype.copy=function(){for(var v=this._shell.copy(),b=new Array(this._holes.length).fill(null),B=0;B<b.length;B++)b[B]=this._holes[B].copy();return new d(v,b,this._factory)},d.prototype.getExteriorRing=function(){return this._shell},d.prototype.isEmpty=function(){return this._shell.isEmpty()},d.prototype.getInteriorRingN=function(v){return this._holes[v]},d.prototype.interfaces_=function(){return[v2]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(d,m),d}(yn),ql=function(h){function d(){h.apply(this,arguments)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return yn.SORTINDEX_MULTIPOINT},d.prototype.isValid=function(){return!0},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],b=arguments[1];return!!this.isEquivalentClass(v)&&h.prototype.equalsExact.call(this,v,b)}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():h.prototype.getCoordinate.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return xi.FALSE},d.prototype.getDimension=function(){return 0},d.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},d.prototype.getGeometryType=function(){return"MultiPoint"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),b=0;b<v.length;b++)v[b]=this._geometries[b].copy();return new d(v,this._factory)},d.prototype.interfaces_=function(){return[uh]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(d,m),d}(_1),z2=function(h){function d(v,b){v instanceof $&&b instanceof qi&&(v=b.getCoordinateSequenceFactory().create(v)),h.call(this,v,b),this.validateConstruction()}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return yn.SORTINDEX_LINEARRING},d.prototype.getBoundaryDimension=function(){return xi.FALSE},d.prototype.isClosed=function(){return!!this.isEmpty()||h.prototype.isClosed.call(this)},d.prototype.reverse=function(){var v=this._points.copy();return vo.reverse(v),this.getFactory().createLinearRing(v)},d.prototype.validateConstruction=function(){if(!this.isEmpty()&&!h.prototype.isClosed.call(this))throw new X("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<d.MINIMUM_VALID_SIZE)throw new X("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},d.prototype.getGeometryType=function(){return"LinearRing"},d.prototype.copy=function(){return new d(this._points.copy(),this._factory)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},m.MINIMUM_VALID_SIZE.get=function(){return 4},m.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(d,m),d}(ho),Ic=function(h){function d(){h.apply(this,arguments)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return yn.SORTINDEX_MULTIPOLYGON},d.prototype.equalsExact=function(){if(2===arguments.length){var v=arguments[0],b=arguments[1];return!!this.isEquivalentClass(v)&&h.prototype.equalsExact.call(this,v,b)}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return 1},d.prototype.getDimension=function(){return 2},d.prototype.reverse=function(){for(var b=new Array(this._geometries.length).fill(null),B=0;B<this._geometries.length;B++)b[B]=this._geometries[B].reverse();return this.getFactory().createMultiPolygon(b)},d.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var v=new rn,b=0;b<this._geometries.length;b++)for(var B=this._geometries[b].getBoundary(),z=0;z<B.getNumGeometries();z++)v.add(B.getGeometryN(z));var q=new Array(v.size()).fill(null);return this.getFactory().createMultiLineString(v.toArray(q))},d.prototype.getGeometryType=function(){return"MultiPolygon"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),b=0;b<v.length;b++)v[b]=this._geometries[b].copy();return new d(v,this._factory)},d.prototype.interfaces_=function(){return[v2]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(d,m),d}(_1),hs=function(h){this._factory=h||null,this._isUserDataCopied=!1},Zc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};hs.prototype.setCopyUserData=function(h){this._isUserDataCopied=h},hs.prototype.edit=function(h,d){if(null===h)return null;var m=this.editInternal(h,d);return this._isUserDataCopied&&m.setUserData(h.getUserData()),m},hs.prototype.editInternal=function(h,d){return null===this._factory&&(this._factory=h.getFactory()),h instanceof _1?this.editGeometryCollection(h,d):h instanceof Wo?this.editPolygon(h,d):h instanceof uc||h instanceof ho?d.edit(h,this._factory):(J.shouldNeverReachHere("Unsupported Geometry class: "+h.getClass().getName()),null)},hs.prototype.editGeometryCollection=function(h,d){for(var m=d.edit(h,this._factory),v=new rn,b=0;b<m.getNumGeometries();b++){var B=this.edit(m.getGeometryN(b),d);null===B||B.isEmpty()||v.add(B)}return m.getClass()===ql?this._factory.createMultiPoint(v.toArray([])):m.getClass()===T3?this._factory.createMultiLineString(v.toArray([])):m.getClass()===Ic?this._factory.createMultiPolygon(v.toArray([])):this._factory.createGeometryCollection(v.toArray([]))},hs.prototype.editPolygon=function(h,d){var m=d.edit(h,this._factory);if(null===m&&(m=this._factory.createPolygon(null)),m.isEmpty())return m;var v=this.edit(m.getExteriorRing(),d);if(null===v||v.isEmpty())return this._factory.createPolygon();for(var b=new rn,B=0;B<m.getNumInteriorRing();B++){var z=this.edit(m.getInteriorRingN(B),d);null===z||z.isEmpty()||b.add(z)}return this._factory.createPolygon(v,b.toArray([]))},hs.prototype.interfaces_=function(){return[]},hs.prototype.getClass=function(){return hs},hs.GeometryEditorOperation=function(){},Zc.NoOpGeometryOperation.get=function(){return L3},Zc.CoordinateOperation.get=function(){return hl},Zc.CoordinateSequenceOperation.get=function(){return Rs},Object.defineProperties(hs,Zc);var L3=function(){};L3.prototype.edit=function(h,d){return h},L3.prototype.interfaces_=function(){return[hs.GeometryEditorOperation]},L3.prototype.getClass=function(){return L3};var hl=function(){};hl.prototype.edit=function(h,d){var m=this.editCoordinates(h.getCoordinates(),h);return null===m?h:h instanceof z2?d.createLinearRing(m):h instanceof ho?d.createLineString(m):h instanceof uc?m.length>0?d.createPoint(m[0]):d.createPoint():h},hl.prototype.interfaces_=function(){return[hs.GeometryEditorOperation]},hl.prototype.getClass=function(){return hl};var Rs=function(){};Rs.prototype.edit=function(h,d){return h instanceof z2?d.createLinearRing(this.edit(h.getCoordinateSequence(),h)):h instanceof ho?d.createLineString(this.edit(h.getCoordinateSequence(),h)):h instanceof uc?d.createPoint(this.edit(h.getCoordinateSequence(),h)):h},Rs.prototype.interfaces_=function(){return[hs.GeometryEditorOperation]},Rs.prototype.getClass=function(){return Rs};var fo=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var h=arguments[0];this._coordinates=new Array(h).fill(null);for(var d=0;d<h;d++)this._coordinates[d]=new $}else if(At(arguments[0],vt)){var m=arguments[0];if(null===m)return this._coordinates=new Array(0).fill(null),null;this._dimension=m.getDimension(),this._coordinates=new Array(m.size()).fill(null);for(var v=0;v<this._coordinates.length;v++)this._coordinates[v]=m.getCoordinateCopy(v)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var b=arguments[0],B=arguments[1];this._coordinates=b,this._dimension=B,null===b&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var z=arguments[0],q=arguments[1];this._coordinates=new Array(z).fill(null),this._dimension=q;for(var pe=0;pe<z;pe++)this._coordinates[pe]=new $}},oo={serialVersionUID:{configurable:!0}};fo.prototype.setOrdinate=function(h,d,m){switch(d){case vt.X:this._coordinates[h].x=m;break;case vt.Y:this._coordinates[h].y=m;break;case vt.Z:this._coordinates[h].z=m;break;default:throw new X("invalid ordinateIndex")}},fo.prototype.size=function(){return this._coordinates.length},fo.prototype.getOrdinate=function(h,d){switch(d){case vt.X:return this._coordinates[h].x;case vt.Y:return this._coordinates[h].y;case vt.Z:return this._coordinates[h].z}return Y.NaN},fo.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var d=arguments[0],m=arguments[1];m.x=this._coordinates[d].x,m.y=this._coordinates[d].y,m.z=this._coordinates[d].z}},fo.prototype.getCoordinateCopy=function(h){return new $(this._coordinates[h])},fo.prototype.getDimension=function(){return this._dimension},fo.prototype.getX=function(h){return this._coordinates[h].x},fo.prototype.clone=function(){for(var h=new Array(this.size()).fill(null),d=0;d<this._coordinates.length;d++)h[d]=this._coordinates[d].clone();return new fo(h,this._dimension)},fo.prototype.expandEnvelope=function(h){for(var d=0;d<this._coordinates.length;d++)h.expandToInclude(this._coordinates[d]);return h},fo.prototype.copy=function(){for(var h=new Array(this.size()).fill(null),d=0;d<this._coordinates.length;d++)h[d]=this._coordinates[d].copy();return new fo(h,this._dimension)},fo.prototype.toString=function(){if(this._coordinates.length>0){var h=new Ce(17*this._coordinates.length);h.append("("),h.append(this._coordinates[0]);for(var d=1;d<this._coordinates.length;d++)h.append(", "),h.append(this._coordinates[d]);return h.append(")"),h.toString()}return"()"},fo.prototype.getY=function(h){return this._coordinates[h].y},fo.prototype.toCoordinateArray=function(){return this._coordinates},fo.prototype.interfaces_=function(){return[vt,ue]},fo.prototype.getClass=function(){return fo},oo.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(fo,oo);var hc=function(){},s0={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};hc.prototype.readResolve=function(){return hc.instance()},hc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new fo(arguments[0]);if(At(arguments[0],vt))return new fo(arguments[0])}else if(2===arguments.length){var m=arguments[0],v=arguments[1];return v>3&&(v=3),v<2?new fo(m):new fo(m,v)}},hc.prototype.interfaces_=function(){return[He,ue]},hc.prototype.getClass=function(){return hc},hc.instance=function(){return hc.instanceObject},s0.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},s0.instanceObject.get=function(){return new hc},Object.defineProperties(hc,s0);var pr=function(h){function d(){h.call(this),this.map_=new Map}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.get=function(m){return this.map_.get(m)||null},d.prototype.put=function(m,v){return this.map_.set(m,v),v},d.prototype.values=function(){for(var m=new rn,v=this.map_.values(),b=v.next();!b.done;)m.add(b.value),b=v.next();return m},d.prototype.entrySet=function(){var m=new zf;return this.map_.entries().forEach(function(v){return m.add(v)}),m},d.prototype.size=function(){return this.map_.size()},d}(iu),Ln=function h(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=h.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof fl){var d=arguments[0];this._modelType=d,d===h.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var m=arguments[0];this._modelType=h.FIXED,this.setScale(m)}else if(arguments[0]instanceof h){var v=arguments[0];this._modelType=v._modelType,this._scale=v._scale}},C1={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Ln.prototype.equals=function(h){return h instanceof Ln&&this._modelType===h._modelType&&this._scale===h._scale},Ln.prototype.compareTo=function(h){var d=h,m=this.getMaximumSignificantDigits(),v=d.getMaximumSignificantDigits();return new Qe(m).compareTo(new Qe(v))},Ln.prototype.getScale=function(){return this._scale},Ln.prototype.isFloating=function(){return this._modelType===Ln.FLOATING||this._modelType===Ln.FLOATING_SINGLE},Ln.prototype.getType=function(){return this._modelType},Ln.prototype.toString=function(){var h="UNKNOWN";return this._modelType===Ln.FLOATING?h="Floating":this._modelType===Ln.FLOATING_SINGLE?h="Floating-Single":this._modelType===Ln.FIXED&&(h="Fixed (Scale="+this.getScale()+")"),h},Ln.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var h=arguments[0];return Y.isNaN(h)||this._modelType===Ln.FLOATING_SINGLE?h:this._modelType===Ln.FIXED?Math.round(h*this._scale)/this._scale:h}if(arguments[0]instanceof $){var d=arguments[0];if(this._modelType===Ln.FLOATING)return null;d.x=this.makePrecise(d.x),d.y=this.makePrecise(d.y)}},Ln.prototype.getMaximumSignificantDigits=function(){var h=16;return this._modelType===Ln.FLOATING?h=16:this._modelType===Ln.FLOATING_SINGLE?h=6:this._modelType===Ln.FIXED&&(h=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),h},Ln.prototype.setScale=function(h){this._scale=Math.abs(h)},Ln.prototype.interfaces_=function(){return[ue,Z]},Ln.prototype.getClass=function(){return Ln},Ln.mostPrecise=function(h,d){return h.compareTo(d)>=0?h:d},C1.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},C1.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Ln,C1);var fl=function h(d){this._name=d||null,h.nameToTypeMap.put(d,this)},jt={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};fl.prototype.readResolve=function(){return fl.nameToTypeMap.get(this._name)},fl.prototype.toString=function(){return this._name},fl.prototype.interfaces_=function(){return[ue]},fl.prototype.getClass=function(){return fl},jt.serialVersionUID.get=function(){return-552860263173159e4},jt.nameToTypeMap.get=function(){return new pr},Object.defineProperties(fl,jt),Ln.Type=fl,Ln.FIXED=new fl("FIXED"),Ln.FLOATING=new fl("FLOATING"),Ln.FLOATING_SINGLE=new fl("FLOATING SINGLE");var qi=function h(){this._precisionModel=new Ln,this._SRID=0,this._coordinateSequenceFactory=h.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?At(arguments[0],He)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Ln&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},tr={serialVersionUID:{configurable:!0}};qi.prototype.toGeometry=function(h){return h.isNull()?this.createPoint(null):h.getMinX()===h.getMaxX()&&h.getMinY()===h.getMaxY()?this.createPoint(new $(h.getMinX(),h.getMinY())):h.getMinX()===h.getMaxX()||h.getMinY()===h.getMaxY()?this.createLineString([new $(h.getMinX(),h.getMinY()),new $(h.getMaxX(),h.getMaxY())]):this.createPolygon(this.createLinearRing([new $(h.getMinX(),h.getMinY()),new $(h.getMinX(),h.getMaxY()),new $(h.getMaxX(),h.getMaxY()),new $(h.getMaxX(),h.getMinY()),new $(h.getMinX(),h.getMinY())]),null)},qi.prototype.createLineString=function(h){return h?h instanceof Array?new ho(this.getCoordinateSequenceFactory().create(h),this):At(h,vt)?new ho(h,this):void 0:new ho(this.getCoordinateSequenceFactory().create([]),this)},qi.prototype.createMultiLineString=function(){return 0===arguments.length?new T3(null,this):1===arguments.length?new T3(arguments[0],this):void 0},qi.prototype.buildGeometry=function(h){for(var d=null,m=!1,v=!1,b=h.iterator();b.hasNext();){var B=b.next(),z=B.getClass();null===d&&(d=z),z!==d&&(m=!0),B.isGeometryCollectionOrDerived()&&(v=!0)}if(null===d)return this.createGeometryCollection();if(m||v)return this.createGeometryCollection(qi.toGeometryArray(h));var q=h.iterator().next();if(h.size()>1){if(q instanceof Wo)return this.createMultiPolygon(qi.toPolygonArray(h));if(q instanceof ho)return this.createMultiLineString(qi.toLineStringArray(h));if(q instanceof uc)return this.createMultiPoint(qi.toPointArray(h));J.shouldNeverReachHere("Unhandled class: "+q.getClass().getName())}return q},qi.prototype.createMultiPointFromCoords=function(h){return this.createMultiPoint(null!==h?this.getCoordinateSequenceFactory().create(h):null)},qi.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];return this.createPoint(null!==h?this.getCoordinateSequenceFactory().create([h]):null)}if(At(arguments[0],vt))return new uc(arguments[0],this)}},qi.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},qi.prototype.createPolygon=function(){if(0===arguments.length)return new Wo(null,null,this);if(1===arguments.length){if(At(arguments[0],vt))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof z2)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new Wo(arguments[0],arguments[1],this)},qi.prototype.getSRID=function(){return this._SRID},qi.prototype.createGeometryCollection=function(){return 0===arguments.length?new _1(null,this):1===arguments.length?new _1(arguments[0],this):void 0},qi.prototype.createGeometry=function(h){return new hs(this).edit(h,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},qi.prototype.getPrecisionModel=function(){return this._precisionModel},qi.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var h=arguments[0];return this.createLinearRing(null!==h?this.getCoordinateSequenceFactory().create(h):null)}if(At(arguments[0],vt))return new z2(arguments[0],this)}},qi.prototype.createMultiPolygon=function(){return 0===arguments.length?new Ic(null,this):1===arguments.length?new Ic(arguments[0],this):void 0},qi.prototype.createMultiPoint=function(){if(0===arguments.length)return new ql(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new ql(arguments[0],this);if(arguments[0]instanceof Array){var d=arguments[0];return this.createMultiPoint(null!==d?this.getCoordinateSequenceFactory().create(d):null)}if(At(arguments[0],vt)){var m=arguments[0];if(null===m)return this.createMultiPoint(new Array(0).fill(null));for(var v=new Array(m.size()).fill(null),b=0;b<m.size();b++){var B=this.getCoordinateSequenceFactory().create(1,m.getDimension());vo.copy(m,b,B,0,1),v[b]=this.createPoint(B)}return this.createMultiPoint(v)}}},qi.prototype.interfaces_=function(){return[ue]},qi.prototype.getClass=function(){return qi},qi.toMultiPolygonArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.toGeometryArray=function(h){if(null===h)return null;var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.getDefaultCoordinateSequenceFactory=function(){return hc.instance()},qi.toMultiLineStringArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.toLineStringArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.toMultiPointArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.toLinearRingArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.toPointArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.toPolygonArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},qi.createPointFromInternalCoord=function(h,d){return d.getPrecisionModel().makePrecise(h),d.getFactory().createPoint(h)},tr.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(qi,tr);var Fs=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Of=function(h){this.geometryFactory=h||new qi};Of.prototype.read=function(h){var d,m=(d="string"==typeof h?JSON.parse(h):h).type;if(!dl[m])throw new Error("Unknown GeoJSON type: "+d.type);return-1!==Fs.indexOf(m)?dl[m].apply(this,[d.coordinates]):dl[m].apply(this,"GeometryCollection"===m?[d.geometries]:[d])},Of.prototype.write=function(h){var d=h.getGeometryType();if(!Kl[d])throw new Error("Geometry is not supported");return Kl[d].apply(this,[h])};var dl={Feature:function(h){var d={};for(var m in h)d[m]=h[m];if(h.geometry){if(!dl[h.geometry.type])throw new Error("Unknown GeoJSON type: "+h.type);d.geometry=this.read(h.geometry)}return h.bbox&&(d.bbox=dl.bbox.apply(this,[h.bbox])),d},FeatureCollection:function(h){var d={};if(h.features){d.features=[];for(var m=0;m<h.features.length;++m)d.features.push(this.read(h.features[m]))}return h.bbox&&(d.bbox=this.parse.bbox.apply(this,[h.bbox])),d},coordinates:function(h){for(var d=[],m=0;m<h.length;++m){var v=h[m];d.push(new $(v[0],v[1]))}return d},bbox:function(h){return this.geometryFactory.createLinearRing([new $(h[0],h[1]),new $(h[2],h[1]),new $(h[2],h[3]),new $(h[0],h[3]),new $(h[0],h[1])])},Point:function(h){var d=new $(h[0],h[1]);return this.geometryFactory.createPoint(d)},MultiPoint:function(h){for(var d=[],m=0;m<h.length;++m)d.push(dl.Point.apply(this,[h[m]]));return this.geometryFactory.createMultiPoint(d)},LineString:function(h){var d=dl.coordinates.apply(this,[h]);return this.geometryFactory.createLineString(d)},MultiLineString:function(h){for(var d=[],m=0;m<h.length;++m)d.push(dl.LineString.apply(this,[h[m]]));return this.geometryFactory.createMultiLineString(d)},Polygon:function(h){for(var d=dl.coordinates.apply(this,[h[0]]),m=this.geometryFactory.createLinearRing(d),v=[],b=1;b<h.length;++b){var z=dl.coordinates.apply(this,[h[b]]),q=this.geometryFactory.createLinearRing(z);v.push(q)}return this.geometryFactory.createPolygon(m,v)},MultiPolygon:function(h){for(var d=[],m=0;m<h.length;++m)d.push(dl.Polygon.apply(this,[h[m]]));return this.geometryFactory.createMultiPolygon(d)},GeometryCollection:function(h){for(var d=[],m=0;m<h.length;++m)d.push(this.read(h[m]));return this.geometryFactory.createGeometryCollection(d)}},Kl={coordinate:function(h){return[h.x,h.y]},Point:function(h){return{type:"Point",coordinates:Kl.coordinate.apply(this,[h.getCoordinate()])}},MultiPoint:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var b=Kl.Point.apply(this,[h._geometries[m]]);d.push(b.coordinates)}return{type:"MultiPoint",coordinates:d}},LineString:function(h){for(var d=[],m=h.getCoordinates(),v=0;v<m.length;++v)d.push(Kl.coordinate.apply(this,[m[v]]));return{type:"LineString",coordinates:d}},MultiLineString:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var b=Kl.LineString.apply(this,[h._geometries[m]]);d.push(b.coordinates)}return{type:"MultiLineString",coordinates:d}},Polygon:function(h){var d=[],m=Kl.LineString.apply(this,[h._shell]);d.push(m.coordinates);for(var v=0;v<h._holes.length;++v){var B=Kl.LineString.apply(this,[h._holes[v]]);d.push(B.coordinates)}return{type:"Polygon",coordinates:d}},MultiPolygon:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var b=Kl.Polygon.apply(this,[h._geometries[m]]);d.push(b.coordinates)}return{type:"MultiPolygon",coordinates:d}},GeometryCollection:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var v=h._geometries[m],b=v.getGeometryType();d.push(Kl[b].apply(this,[v]))}return{type:"GeometryCollection",geometries:d}}},D3=function(h){this.geometryFactory=h||new qi,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Of(this.geometryFactory)};D3.prototype.read=function(h){var d=this.parser.read(h);return this.precisionModel.getType()===Ln.FIXED&&this.reducePrecision(d),d},D3.prototype.reducePrecision=function(h){var d,m;if(h.coordinate)this.precisionModel.makePrecise(h.coordinate);else if(h.points)for(d=0,m=h.points.length;d<m;d++)this.precisionModel.makePrecise(h.points[d]);else if(h.geometries)for(d=0,m=h.geometries.length;d<m;d++)this.reducePrecision(h.geometries[d])};var Jc=function(){this.parser=new Of(this.geometryFactory)};Jc.prototype.write=function(h){return this.parser.write(h)};var un=function(){},Nf={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.opposite=function(h){return h===un.LEFT?un.RIGHT:h===un.RIGHT?un.LEFT:h},Nf.ON.get=function(){return 0},Nf.LEFT.get=function(){return 1},Nf.RIGHT.get=function(){return 2},Object.defineProperties(un,Nf),(Ve.prototype=new Error).name="EmptyStackException",(Xe.prototype=new Qo).add=function(h){return this.array_.push(h),!0},Xe.prototype.get=function(h){if(h<0||h>=this.size())throw new Error;return this.array_[h]},Xe.prototype.push=function(h){return this.array_.push(h),h},Xe.prototype.pop=function(h){if(0===this.array_.length)throw new Ve;return this.array_.pop()},Xe.prototype.peek=function(){if(0===this.array_.length)throw new Ve;return this.array_[this.array_.length-1]},Xe.prototype.empty=function(){return 0===this.array_.length},Xe.prototype.isEmpty=function(){return this.empty()},Xe.prototype.search=function(h){return this.array_.indexOf(h)},Xe.prototype.size=function(){return this.array_.length},Xe.prototype.toArray=function(){for(var h=[],d=0,m=this.array_.length;d<m;d++)h.push(this.array_[d]);return h};var pl=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};pl.prototype.getCoordinate=function(){return this._minCoord},pl.prototype.getRightmostSide=function(h,d){var m=this.getRightmostSideOfSegment(h,d);return m<0&&(m=this.getRightmostSideOfSegment(h,d-1)),m<0&&(this._minCoord=null,this.checkForRightmostCoordinate(h)),m},pl.prototype.findRightmostEdgeAtVertex=function(){var h=this._minDe.getEdge().getCoordinates();J.isTrue(this._minIndex>0&&this._minIndex<h.length,"rightmost point expected to be interior vertex of edge");var d=h[this._minIndex-1],m=h[this._minIndex+1],v=Mt.computeOrientation(this._minCoord,m,d),b=!1;(d.y<this._minCoord.y&&m.y<this._minCoord.y&&v===Mt.COUNTERCLOCKWISE||d.y>this._minCoord.y&&m.y>this._minCoord.y&&v===Mt.CLOCKWISE)&&(b=!0),b&&(this._minIndex=this._minIndex-1)},pl.prototype.getRightmostSideOfSegment=function(h,d){var m=h.getEdge().getCoordinates();if(d<0||d+1>=m.length||m[d].y===m[d+1].y)return-1;var v=un.LEFT;return m[d].y<m[d+1].y&&(v=un.RIGHT),v},pl.prototype.getEdge=function(){return this._orientedDe},pl.prototype.checkForRightmostCoordinate=function(h){for(var d=h.getEdge().getCoordinates(),m=0;m<d.length-1;m++)(null===this._minCoord||d[m].x>this._minCoord.x)&&(this._minDe=h,this._minIndex=m,this._minCoord=d[m])},pl.prototype.findRightmostEdgeAtNode=function(){var h=this._minDe.getNode().getEdges();this._minDe=h.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},pl.prototype.findEdge=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next();m.isForward()&&this.checkForRightmostCoordinate(m)}J.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===un.LEFT&&(this._orientedDe=this._minDe.getSym())},pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl};var n1=function(h){function d(m,v){h.call(this,d.msgWithCoord(m,v)),this.pt=v?new $(v):null,this.name="TopologyException"}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.getCoordinate=function(){return this.pt},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.msgWithCoord=function(m,v){return v?m:m+" [ "+v+" ]"},d}(le),hh=function(){this.array_=[]};hh.prototype.addLast=function(h){this.array_.push(h)},hh.prototype.removeFirst=function(){return this.array_.shift()},hh.prototype.isEmpty=function(){return 0===this.array_.length};var ea=function(){this._finder=null,this._dirEdgeList=new rn,this._nodes=new rn,this._rightMostCoord=null,this._env=null,this._finder=new pl};ea.prototype.clearVisitedEdges=function(){for(var h=this._dirEdgeList.iterator();h.hasNext();)h.next().setVisited(!1)},ea.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},ea.prototype.computeNodeDepth=function(h){for(var d=null,m=h.getEdges().iterator();m.hasNext();){var v=m.next();if(v.isVisited()||v.getSym().isVisited()){d=v;break}}if(null===d)throw new n1("unable to find edge to compute depths at "+h.getCoordinate());h.getEdges().computeDepths(d);for(var b=h.getEdges().iterator();b.hasNext();){var B=b.next();B.setVisited(!0),this.copySymDepths(B)}},ea.prototype.computeDepth=function(h){this.clearVisitedEdges();var d=this._finder.getEdge();d.setEdgeDepths(un.RIGHT,h),this.copySymDepths(d),this.computeDepths(d)},ea.prototype.create=function(h){this.addReachable(h),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},ea.prototype.findResultEdges=function(){for(var h=this._dirEdgeList.iterator();h.hasNext();){var d=h.next();d.getDepth(un.RIGHT)>=1&&d.getDepth(un.LEFT)<=0&&!d.isInteriorAreaEdge()&&d.setInResult(!0)}},ea.prototype.computeDepths=function(h){var d=new zf,m=new hh,v=h.getNode();for(m.addLast(v),d.add(v),h.setVisited(!0);!m.isEmpty();){var b=m.removeFirst();d.add(b),this.computeNodeDepth(b);for(var B=b.getEdges().iterator();B.hasNext();){var z=B.next().getSym();if(!z.isVisited()){var q=z.getNode();d.contains(q)||(m.addLast(q),d.add(q))}}}},ea.prototype.compareTo=function(h){return this._rightMostCoord.x<h._rightMostCoord.x?-1:this._rightMostCoord.x>h._rightMostCoord.x?1:0},ea.prototype.getEnvelope=function(){if(null===this._env){for(var h=new on,d=this._dirEdgeList.iterator();d.hasNext();)for(var m=d.next().getEdge().getCoordinates(),v=0;v<m.length-1;v++)h.expandToInclude(m[v]);this._env=h}return this._env},ea.prototype.addReachable=function(h){var d=new Xe;for(d.add(h);!d.empty();){var m=d.pop();this.add(m,d)}},ea.prototype.copySymDepths=function(h){var d=h.getSym();d.setDepth(un.LEFT,h.getDepth(un.RIGHT)),d.setDepth(un.RIGHT,h.getDepth(un.LEFT))},ea.prototype.add=function(h,d){h.setVisited(!0),this._nodes.add(h);for(var m=h.getEdges().iterator();m.hasNext();){var v=m.next();this._dirEdgeList.add(v);var b=v.getSym().getNode();b.isVisited()||d.push(b)}},ea.prototype.getNodes=function(){return this._nodes},ea.prototype.getDirectedEdges=function(){return this._dirEdgeList},ea.prototype.interfaces_=function(){return[Z]},ea.prototype.getClass=function(){return ea};var Us=function h(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var m=arguments[0];this.init(1),this.location[un.ON]=m}else if(arguments[0]instanceof h){var v=arguments[0];if(this.init(v.location.length),null!==v)for(var b=0;b<this.location.length;b++)this.location[b]=v.location[b]}}else if(3===arguments.length){var B=arguments[0],z=arguments[1],q=arguments[2];this.init(3),this.location[un.ON]=B,this.location[un.LEFT]=z,this.location[un.RIGHT]=q}};Us.prototype.setAllLocations=function(h){for(var d=0;d<this.location.length;d++)this.location[d]=h},Us.prototype.isNull=function(){for(var h=0;h<this.location.length;h++)if(this.location[h]!==oe.NONE)return!1;return!0},Us.prototype.setAllLocationsIfNull=function(h){for(var d=0;d<this.location.length;d++)this.location[d]===oe.NONE&&(this.location[d]=h)},Us.prototype.isLine=function(){return 1===this.location.length},Us.prototype.merge=function(h){if(h.location.length>this.location.length){var d=new Array(3).fill(null);d[un.ON]=this.location[un.ON],d[un.LEFT]=oe.NONE,d[un.RIGHT]=oe.NONE,this.location=d}for(var m=0;m<this.location.length;m++)this.location[m]===oe.NONE&&m<h.location.length&&(this.location[m]=h.location[m])},Us.prototype.getLocations=function(){return this.location},Us.prototype.flip=function(){if(this.location.length<=1)return null;var h=this.location[un.LEFT];this.location[un.LEFT]=this.location[un.RIGHT],this.location[un.RIGHT]=h},Us.prototype.toString=function(){var h=new Ce;return this.location.length>1&&h.append(oe.toLocationSymbol(this.location[un.LEFT])),h.append(oe.toLocationSymbol(this.location[un.ON])),this.location.length>1&&h.append(oe.toLocationSymbol(this.location[un.RIGHT])),h.toString()},Us.prototype.setLocations=function(h,d,m){this.location[un.ON]=h,this.location[un.LEFT]=d,this.location[un.RIGHT]=m},Us.prototype.get=function(h){return h<this.location.length?this.location[h]:oe.NONE},Us.prototype.isArea=function(){return this.location.length>1},Us.prototype.isAnyNull=function(){for(var h=0;h<this.location.length;h++)if(this.location[h]===oe.NONE)return!0;return!1},Us.prototype.setLocation=function(){1===arguments.length?this.setLocation(un.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},Us.prototype.init=function(h){this.location=new Array(h).fill(null),this.setAllLocations(oe.NONE)},Us.prototype.isEqualOnSide=function(h,d){return this.location[d]===h.location[d]},Us.prototype.allPositionsEqual=function(h){for(var d=0;d<this.location.length;d++)if(this.location[d]!==h)return!1;return!0},Us.prototype.interfaces_=function(){return[]},Us.prototype.getClass=function(){return Us};var fs=function h(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var d=arguments[0];this.elt[0]=new Us(d),this.elt[1]=new Us(d)}else if(arguments[0]instanceof h){var m=arguments[0];this.elt[0]=new Us(m.elt[0]),this.elt[1]=new Us(m.elt[1])}}else if(2===arguments.length){var v=arguments[0],b=arguments[1];this.elt[0]=new Us(oe.NONE),this.elt[1]=new Us(oe.NONE),this.elt[v].setLocation(b)}else if(3===arguments.length){var B=arguments[0],z=arguments[1],q=arguments[2];this.elt[0]=new Us(B,z,q),this.elt[1]=new Us(B,z,q)}else if(4===arguments.length){var pe=arguments[0],Ue=arguments[1],gt=arguments[2],pt=arguments[3];this.elt[0]=new Us(oe.NONE,oe.NONE,oe.NONE),this.elt[1]=new Us(oe.NONE,oe.NONE,oe.NONE),this.elt[pe].setLocations(Ue,gt,pt)}};fs.prototype.getGeometryCount=function(){var h=0;return this.elt[0].isNull()||h++,this.elt[1].isNull()||h++,h},fs.prototype.setAllLocations=function(h,d){this.elt[h].setAllLocations(d)},fs.prototype.isNull=function(h){return this.elt[h].isNull()},fs.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var h=arguments[0];this.setAllLocationsIfNull(0,h),this.setAllLocationsIfNull(1,h)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},fs.prototype.isLine=function(h){return this.elt[h].isLine()},fs.prototype.merge=function(h){for(var d=0;d<2;d++)null===this.elt[d]&&null!==h.elt[d]?this.elt[d]=new Us(h.elt[d]):this.elt[d].merge(h.elt[d])},fs.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},fs.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(un.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},fs.prototype.toString=function(){var h=new Ce;return null!==this.elt[0]&&(h.append("A:"),h.append(this.elt[0].toString())),null!==this.elt[1]&&(h.append(" B:"),h.append(this.elt[1].toString())),h.toString()},fs.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},fs.prototype.isAnyNull=function(h){return this.elt[h].isAnyNull()},fs.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(un.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},fs.prototype.isEqualOnSide=function(h,d){return this.elt[0].isEqualOnSide(h.elt[0],d)&&this.elt[1].isEqualOnSide(h.elt[1],d)},fs.prototype.allPositionsEqual=function(h,d){return this.elt[h].allPositionsEqual(d)},fs.prototype.toLine=function(h){this.elt[h].isArea()&&(this.elt[h]=new Us(this.elt[h].location[0]))},fs.prototype.interfaces_=function(){return[]},fs.prototype.getClass=function(){return fs},fs.toLineLabel=function(h){for(var d=new fs(oe.NONE),m=0;m<2;m++)d.setLocation(m,h.getLocation(m));return d};var jo=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new rn,this._pts=new rn,this._label=new fs(oe.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new rn,this._geometryFactory=null;var h=arguments[0];this._geometryFactory=arguments[1],this.computePoints(h),this.computeRing()};jo.prototype.computeRing=function(){if(null!==this._ring)return null;for(var h=new Array(this._pts.size()).fill(null),d=0;d<this._pts.size();d++)h[d]=this._pts.get(d);this._ring=this._geometryFactory.createLinearRing(h),this._isHole=Mt.isCCW(this._ring.getCoordinates())},jo.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},jo.prototype.computePoints=function(h){this._startDe=h;var d=h,m=!0;do{if(null===d)throw new n1("Found null DirectedEdge");if(d.getEdgeRing()===this)throw new n1("Directed Edge visited twice during ring-building at "+d.getCoordinate());this._edges.add(d);var v=d.getLabel();J.isTrue(v.isArea()),this.mergeLabel(v),this.addPoints(d.getEdge(),d.isForward(),m),m=!1,this.setEdgeRing(d,this),d=this.getNext(d)}while(d!==this._startDe)},jo.prototype.getLinearRing=function(){return this._ring},jo.prototype.getCoordinate=function(h){return this._pts.get(h)},jo.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var h=this._startDe;do{var d=h.getNode().getEdges().getOutgoingDegree(this);d>this._maxNodeDegree&&(this._maxNodeDegree=d),h=this.getNext(h)}while(h!==this._startDe);this._maxNodeDegree*=2},jo.prototype.addPoints=function(h,d,m){var v=h.getCoordinates();if(d){var b=1;m&&(b=0);for(var B=b;B<v.length;B++)this._pts.add(v[B])}else{var z=v.length-2;m&&(z=v.length-1);for(var q=z;q>=0;q--)this._pts.add(v[q])}},jo.prototype.isHole=function(){return this._isHole},jo.prototype.setInResult=function(){var h=this._startDe;do{h.getEdge().setInResult(!0),h=h.getNext()}while(h!==this._startDe)},jo.prototype.containsPoint=function(h){var d=this.getLinearRing();if(!d.getEnvelopeInternal().contains(h)||!Mt.isPointInRing(h,d.getCoordinates()))return!1;for(var m=this._holes.iterator();m.hasNext();)if(m.next().containsPoint(h))return!1;return!0},jo.prototype.addHole=function(h){this._holes.add(h)},jo.prototype.isShell=function(){return null===this._shell},jo.prototype.getLabel=function(){return this._label},jo.prototype.getEdges=function(){return this._edges},jo.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},jo.prototype.getShell=function(){return this._shell},jo.prototype.mergeLabel=function(){if(1===arguments.length){var h=arguments[0];this.mergeLabel(h,0),this.mergeLabel(h,1)}else if(2===arguments.length){var m=arguments[1],v=arguments[0].getLocation(m,un.RIGHT);if(v===oe.NONE)return null;if(this._label.getLocation(m)===oe.NONE)return this._label.setLocation(m,v),null}},jo.prototype.setShell=function(h){this._shell=h,null!==h&&h.addHole(this)},jo.prototype.toPolygon=function(h){for(var d=new Array(this._holes.size()).fill(null),m=0;m<this._holes.size();m++)d[m]=this._holes.get(m).getLinearRing();return h.createPolygon(this.getLinearRing(),d)},jo.prototype.interfaces_=function(){return[]},jo.prototype.getClass=function(){return jo};var Vf=function(h){function d(){h.call(this,arguments[0],arguments[1])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.setEdgeRing=function(m,v){m.setMinEdgeRing(v)},d.prototype.getNext=function(m){return m.getNextMin()},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(jo),Hm=function(h){function d(){h.call(this,arguments[0],arguments[1])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.buildMinimalRings=function(){var m=new rn,v=this._startDe;do{if(null===v.getMinEdgeRing()){var b=new Vf(v,this._geometryFactory);m.add(b)}v=v.getNext()}while(v!==this._startDe);return m},d.prototype.setEdgeRing=function(m,v){m.setEdgeRing(v)},d.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var m=this._startDe;do{m.getNode().getEdges().linkMinimalDirectedEdges(this),m=m.getNext()}while(m!==this._startDe)},d.prototype.getNext=function(m){return m.getNext()},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(jo),e2=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])};e2.prototype.setVisited=function(h){this._isVisited=h},e2.prototype.setInResult=function(h){this._isInResult=h},e2.prototype.isCovered=function(){return this._isCovered},e2.prototype.isCoveredSet=function(){return this._isCoveredSet},e2.prototype.setLabel=function(h){this._label=h},e2.prototype.getLabel=function(){return this._label},e2.prototype.setCovered=function(h){this._isCovered=h,this._isCoveredSet=!0},e2.prototype.updateIM=function(h){J.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(h)},e2.prototype.isInResult=function(){return this._isInResult},e2.prototype.isVisited=function(){return this._isVisited},e2.prototype.interfaces_=function(){return[]},e2.prototype.getClass=function(){return e2};var fc=function(h){function d(){h.call(this),this._coord=null,this._edges=null;var v=arguments[1];this._coord=arguments[0],this._edges=v,this._label=new fs(0,oe.NONE)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.isIncidentEdgeInResult=function(){for(var m=this.getEdges().getEdges().iterator();m.hasNext();)if(m.next().getEdge().isInResult())return!0;return!1},d.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},d.prototype.getCoordinate=function(){return this._coord},d.prototype.print=function(m){m.println("node "+this._coord+" lbl: "+this._label)},d.prototype.computeIM=function(m){},d.prototype.computeMergedLocation=function(m,v){var b=oe.NONE;if(b=this._label.getLocation(v),!m.isNull(v)){var B=m.getLocation(v);b!==oe.BOUNDARY&&(b=B)}return b},d.prototype.setLabel=function(){if(2!==arguments.length)return h.prototype.setLabel.apply(this,arguments);var m=arguments[0],v=arguments[1];null===this._label?this._label=new fs(m,v):this._label.setLocation(m,v)},d.prototype.getEdges=function(){return this._edges},d.prototype.mergeLabel=function(){if(arguments[0]instanceof d)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof fs)for(var v=arguments[0],b=0;b<2;b++){var B=this.computeMergedLocation(v,b);this._label.getLocation(b)===oe.NONE&&this._label.setLocation(b,B)}},d.prototype.add=function(m){this._edges.insert(m),m.setNode(this)},d.prototype.setLabelBoundary=function(m){if(null===this._label)return null;var v=oe.NONE;null!==this._label&&(v=this._label.getLocation(m)),this._label.setLocation(m,v===oe.BOUNDARY?oe.INTERIOR:oe.BOUNDARY)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(e2),ur=function(){this.nodeMap=new Ct,this.nodeFact=null,this.nodeFact=arguments[0]};ur.prototype.find=function(h){return this.nodeMap.get(h)},ur.prototype.addNode=function(){if(arguments[0]instanceof $){var h=arguments[0],d=this.nodeMap.get(h);return null===d&&(d=this.nodeFact.createNode(h),this.nodeMap.put(h,d)),d}if(arguments[0]instanceof fc){var m=arguments[0],v=this.nodeMap.get(m.getCoordinate());return null===v?(this.nodeMap.put(m.getCoordinate(),m),m):(v.mergeLabel(m),v)}},ur.prototype.print=function(h){for(var d=this.iterator();d.hasNext();)d.next().print(h)},ur.prototype.iterator=function(){return this.nodeMap.values().iterator()},ur.prototype.values=function(){return this.nodeMap.values()},ur.prototype.getBoundaryNodes=function(h){for(var d=new rn,m=this.iterator();m.hasNext();){var v=m.next();v.getLabel().getLocation(h)===oe.BOUNDARY&&d.add(v)}return d},ur.prototype.add=function(h){var d=h.getCoordinate();this.addNode(d).add(h)},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur};var Ls=function(){},Uf={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Ls.prototype.interfaces_=function(){return[]},Ls.prototype.getClass=function(){return Ls},Ls.isNorthern=function(h){return h===Ls.NE||h===Ls.NW},Ls.isOpposite=function(h,d){return h!==d&&(h-d+4)%4==2},Ls.commonHalfPlane=function(h,d){if(h===d)return h;if((h-d+4)%4==2)return-1;var m=h<d?h:d;return 0===m&&3===(h>d?h:d)?3:m},Ls.isInHalfPlane=function(h,d){return d===Ls.SE?h===Ls.SE||h===Ls.SW:h===d||h===d+1},Ls.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var h=arguments[0],d=arguments[1];if(0===h&&0===d)throw new X("Cannot compute the quadrant for point ( "+h+", "+d+" )");return h>=0?d>=0?Ls.NE:Ls.SE:d>=0?Ls.NW:Ls.SW}if(arguments[0]instanceof $&&arguments[1]instanceof $){var m=arguments[0],v=arguments[1];if(v.x===m.x&&v.y===m.y)throw new X("Cannot compute the quadrant for two identical points "+m);return v.x>=m.x?v.y>=m.y?Ls.NE:Ls.SE:v.y>=m.y?Ls.NW:Ls.SW}},Uf.NE.get=function(){return 0},Uf.NW.get=function(){return 1},Uf.SW.get=function(){return 2},Uf.SE.get=function(){return 3},Object.defineProperties(Ls,Uf);var po=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var m=arguments[1],v=arguments[2];this._edge=arguments[0],this.init(m,v),this._label=null}else if(4===arguments.length){var B=arguments[1],z=arguments[2],q=arguments[3];this._edge=arguments[0],this.init(B,z),this._label=q}};po.prototype.compareDirection=function(h){return this._dx===h._dx&&this._dy===h._dy?0:this._quadrant>h._quadrant?1:this._quadrant<h._quadrant?-1:Mt.computeOrientation(h._p0,h._p1,this._p1)},po.prototype.getDy=function(){return this._dy},po.prototype.getCoordinate=function(){return this._p0},po.prototype.setNode=function(h){this._node=h},po.prototype.print=function(h){var d=Math.atan2(this._dy,this._dx),m=this.getClass().getName(),v=m.lastIndexOf("."),b=m.substring(v+1);h.print("  "+b+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+d+"   "+this._label)},po.prototype.compareTo=function(h){return this.compareDirection(h)},po.prototype.getDirectedCoordinate=function(){return this._p1},po.prototype.getDx=function(){return this._dx},po.prototype.getLabel=function(){return this._label},po.prototype.getEdge=function(){return this._edge},po.prototype.getQuadrant=function(){return this._quadrant},po.prototype.getNode=function(){return this._node},po.prototype.toString=function(){var h=Math.atan2(this._dy,this._dx),d=this.getClass().getName(),m=d.lastIndexOf(".");return"  "+d.substring(m+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+h+"   "+this._label},po.prototype.computeLabel=function(h){},po.prototype.init=function(h,d){this._p0=h,this._p1=d,this._dx=d.x-h.x,this._dy=d.y-h.y,this._quadrant=Ls.quadrant(this._dx,this._dy),J.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},po.prototype.interfaces_=function(){return[Z]},po.prototype.getClass=function(){return po};var Lt=function(h){function d(){var m=arguments[0],v=arguments[1];if(h.call(this,m),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=v,v)this.init(m.getCoordinate(0),m.getCoordinate(1));else{var b=m.getNumPoints()-1;this.init(m.getCoordinate(b),m.getCoordinate(b-1))}this.computeDirectedLabel()}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.getNextMin=function(){return this._nextMin},d.prototype.getDepth=function(m){return this._depth[m]},d.prototype.setVisited=function(m){this._isVisited=m},d.prototype.computeDirectedLabel=function(){this._label=new fs(this._edge.getLabel()),this._isForward||this._label.flip()},d.prototype.getNext=function(){return this._next},d.prototype.setDepth=function(m,v){if(-999!==this._depth[m]&&this._depth[m]!==v)throw new n1("assigned depths do not match",this.getCoordinate());this._depth[m]=v},d.prototype.isInteriorAreaEdge=function(){for(var m=!0,v=0;v<2;v++)this._label.isArea(v)&&this._label.getLocation(v,un.LEFT)===oe.INTERIOR&&this._label.getLocation(v,un.RIGHT)===oe.INTERIOR||(m=!1);return m},d.prototype.setNextMin=function(m){this._nextMin=m},d.prototype.print=function(m){h.prototype.print.call(this,m),m.print(" "+this._depth[un.LEFT]+"/"+this._depth[un.RIGHT]),m.print(" ("+this.getDepthDelta()+")"),this._isInResult&&m.print(" inResult")},d.prototype.setMinEdgeRing=function(m){this._minEdgeRing=m},d.prototype.isLineEdge=function(){var m=this._label.isLine(0)||this._label.isLine(1),v=!this._label.isArea(0)||this._label.allPositionsEqual(0,oe.EXTERIOR),b=!this._label.isArea(1)||this._label.allPositionsEqual(1,oe.EXTERIOR);return m&&v&&b},d.prototype.setEdgeRing=function(m){this._edgeRing=m},d.prototype.getMinEdgeRing=function(){return this._minEdgeRing},d.prototype.getDepthDelta=function(){var m=this._edge.getDepthDelta();return this._isForward||(m=-m),m},d.prototype.setInResult=function(m){this._isInResult=m},d.prototype.getSym=function(){return this._sym},d.prototype.isForward=function(){return this._isForward},d.prototype.getEdge=function(){return this._edge},d.prototype.printEdge=function(m){this.print(m),m.print(" "),this._isForward?this._edge.print(m):this._edge.printReverse(m)},d.prototype.setSym=function(m){this._sym=m},d.prototype.setVisitedEdge=function(m){this.setVisited(m),this._sym.setVisited(m)},d.prototype.setEdgeDepths=function(m,v){var b=this.getEdge().getDepthDelta();this._isForward||(b=-b);var B=1;m===un.LEFT&&(B=-1);var z=un.opposite(m),q=v+b*B;this.setDepth(m,v),this.setDepth(z,q)},d.prototype.getEdgeRing=function(){return this._edgeRing},d.prototype.isInResult=function(){return this._isInResult},d.prototype.setNext=function(m){this._next=m},d.prototype.isVisited=function(){return this._isVisited},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.depthFactor=function(m,v){return m===oe.EXTERIOR&&v===oe.INTERIOR?1:m===oe.INTERIOR&&v===oe.EXTERIOR?-1:0},d}(po),su=function(){};su.prototype.createNode=function(h){return new fc(h,null)},su.prototype.interfaces_=function(){return[]},su.prototype.getClass=function(){return su};var wn=function(){this._edges=new rn,this._nodes=null,this._edgeEndList=new rn,0===arguments.length?this._nodes=new ur(new su):1===arguments.length&&(this._nodes=new ur(arguments[0]))};wn.prototype.printEdges=function(h){h.println("Edges:");for(var d=0;d<this._edges.size();d++){h.println("edge "+d+":");var m=this._edges.get(d);m.print(h),m.eiList.print(h)}},wn.prototype.find=function(h){return this._nodes.find(h)},wn.prototype.addNode=function(){return arguments[0]instanceof fc||arguments[0]instanceof $?this._nodes.addNode(arguments[0]):void 0},wn.prototype.getNodeIterator=function(){return this._nodes.iterator()},wn.prototype.linkResultDirectedEdges=function(){for(var h=this._nodes.iterator();h.hasNext();)h.next().getEdges().linkResultDirectedEdges()},wn.prototype.debugPrintln=function(h){$t.out.println(h)},wn.prototype.isBoundaryNode=function(h,d){var m=this._nodes.find(d);if(null===m)return!1;var v=m.getLabel();return null!==v&&v.getLocation(h)===oe.BOUNDARY},wn.prototype.linkAllDirectedEdges=function(){for(var h=this._nodes.iterator();h.hasNext();)h.next().getEdges().linkAllDirectedEdges()},wn.prototype.matchInSameDirection=function(h,d,m,v){return!!h.equals(m)&&Mt.computeOrientation(h,d,v)===Mt.COLLINEAR&&Ls.quadrant(h,d)===Ls.quadrant(m,v)},wn.prototype.getEdgeEnds=function(){return this._edgeEndList},wn.prototype.debugPrint=function(h){$t.out.print(h)},wn.prototype.getEdgeIterator=function(){return this._edges.iterator()},wn.prototype.findEdgeInSameDirection=function(h,d){for(var m=0;m<this._edges.size();m++){var v=this._edges.get(m),b=v.getCoordinates();if(this.matchInSameDirection(h,d,b[0],b[1])||this.matchInSameDirection(h,d,b[b.length-1],b[b.length-2]))return v}return null},wn.prototype.insertEdge=function(h){this._edges.add(h)},wn.prototype.findEdgeEnd=function(h){for(var d=this.getEdgeEnds().iterator();d.hasNext();){var m=d.next();if(m.getEdge()===h)return m}return null},wn.prototype.addEdges=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next();this._edges.add(m);var v=new Lt(m,!0),b=new Lt(m,!1);v.setSym(b),b.setSym(v),this.add(v),this.add(b)}},wn.prototype.add=function(h){this._nodes.add(h),this._edgeEndList.add(h)},wn.prototype.getNodes=function(){return this._nodes.values()},wn.prototype.findEdge=function(h,d){for(var m=0;m<this._edges.size();m++){var v=this._edges.get(m),b=v.getCoordinates();if(h.equals(b[0])&&d.equals(b[1]))return v}return null},wn.prototype.interfaces_=function(){return[]},wn.prototype.getClass=function(){return wn},wn.linkResultDirectedEdges=function(h){for(var d=h.iterator();d.hasNext();)d.next().getEdges().linkResultDirectedEdges()};var r1=function(){this._geometryFactory=null,this._shellList=new rn,this._geometryFactory=arguments[0]};r1.prototype.sortShellsAndHoles=function(h,d,m){for(var v=h.iterator();v.hasNext();){var b=v.next();b.isHole()?m.add(b):d.add(b)}},r1.prototype.computePolygons=function(h){for(var d=new rn,m=h.iterator();m.hasNext();){var v=m.next().toPolygon(this._geometryFactory);d.add(v)}return d},r1.prototype.placeFreeHoles=function(h,d){for(var m=d.iterator();m.hasNext();){var v=m.next();if(null===v.getShell()){var b=this.findEdgeRingContaining(v,h);if(null===b)throw new n1("unable to assign hole to a shell",v.getCoordinate(0));v.setShell(b)}}},r1.prototype.buildMinimalEdgeRings=function(h,d,m){for(var v=new rn,b=h.iterator();b.hasNext();){var B=b.next();if(B.getMaxNodeDegree()>2){B.linkDirectedEdgesForMinimalEdgeRings();var z=B.buildMinimalRings(),q=this.findShell(z);null!==q?(this.placePolygonHoles(q,z),d.add(q)):m.addAll(z)}else v.add(B)}return v},r1.prototype.containsPoint=function(h){for(var d=this._shellList.iterator();d.hasNext();)if(d.next().containsPoint(h))return!0;return!1},r1.prototype.buildMaximalEdgeRings=function(h){for(var d=new rn,m=h.iterator();m.hasNext();){var v=m.next();if(v.isInResult()&&v.getLabel().isArea()&&null===v.getEdgeRing()){var b=new Hm(v,this._geometryFactory);d.add(b),b.setInResult()}}return d},r1.prototype.placePolygonHoles=function(h,d){for(var m=d.iterator();m.hasNext();){var v=m.next();v.isHole()&&v.setShell(h)}},r1.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},r1.prototype.findEdgeRingContaining=function(h,d){for(var m=h.getLinearRing(),v=m.getEnvelopeInternal(),b=m.getCoordinateN(0),B=null,z=null,q=d.iterator();q.hasNext();){var pe=q.next(),Ue=pe.getLinearRing(),gt=Ue.getEnvelopeInternal();null!==B&&(z=B.getLinearRing().getEnvelopeInternal());var pt=!1;gt.contains(v)&&Mt.isPointInRing(b,Ue.getCoordinates())&&(pt=!0),pt&&(null===B||z.contains(gt))&&(B=pe)}return B},r1.prototype.findShell=function(h){for(var d=0,m=null,v=h.iterator();v.hasNext();){var b=v.next();b.isHole()||(m=b,d++)}return J.isTrue(d<=1,"found two shells in MinimalEdgeRing list"),m},r1.prototype.add=function(){if(1===arguments.length){var h=arguments[0];this.add(h.getEdgeEnds(),h.getNodes())}else if(2===arguments.length){var d=arguments[0];wn.linkResultDirectedEdges(arguments[1]);var v=this.buildMaximalEdgeRings(d),b=new rn,B=this.buildMinimalEdgeRings(v,this._shellList,b);this.sortShellsAndHoles(B,this._shellList,b),this.placeFreeHoles(this._shellList,b)}},r1.prototype.interfaces_=function(){return[]},r1.prototype.getClass=function(){return r1};var o0=function(){};o0.prototype.getBounds=function(){},o0.prototype.interfaces_=function(){return[]},o0.prototype.getClass=function(){return o0};var t2=function(){this._bounds=null,this._item=null;var d=arguments[1];this._bounds=arguments[0],this._item=d};t2.prototype.getItem=function(){return this._item},t2.prototype.getBounds=function(){return this._bounds},t2.prototype.interfaces_=function(){return[o0,ue]},t2.prototype.getClass=function(){return t2};var gl=function(){this._size=null,this._items=null,this._size=0,this._items=new rn,this._items.add(null)};gl.prototype.poll=function(){if(this.isEmpty())return null;var h=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),h},gl.prototype.size=function(){return this._size},gl.prototype.reorder=function(h){for(var d=null,m=this._items.get(h);2*h<=this._size&&((d=2*h)!==this._size&&this._items.get(d+1).compareTo(this._items.get(d))<0&&d++,this._items.get(d).compareTo(m)<0);h=d)this._items.set(h,this._items.get(d));this._items.set(h,m)},gl.prototype.clear=function(){this._size=0,this._items.clear()},gl.prototype.isEmpty=function(){return 0===this._size},gl.prototype.add=function(h){this._items.add(null),this._size+=1;var d=this._size;for(this._items.set(0,h);h.compareTo(this._items.get(Math.trunc(d/2)))<0;d/=2)this._items.set(d,this._items.get(Math.trunc(d/2)));this._items.set(d,h)},gl.prototype.interfaces_=function(){return[]},gl.prototype.getClass=function(){return gl};var Xl=function(){};Xl.prototype.visitItem=function(h){},Xl.prototype.interfaces_=function(){return[]},Xl.prototype.getClass=function(){return Xl};var I3=function(){};I3.prototype.insert=function(h,d){},I3.prototype.remove=function(h,d){},I3.prototype.query=function(){},I3.prototype.interfaces_=function(){return[]},I3.prototype.getClass=function(){return I3};var _o=function(){this._childBoundables=new rn,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])},Gf={serialVersionUID:{configurable:!0}};_o.prototype.getLevel=function(){return this._level},_o.prototype.size=function(){return this._childBoundables.size()},_o.prototype.getChildBoundables=function(){return this._childBoundables},_o.prototype.addChildBoundable=function(h){J.isTrue(null===this._bounds),this._childBoundables.add(h)},_o.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},_o.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},_o.prototype.interfaces_=function(){return[o0,ue]},_o.prototype.getClass=function(){return _o},Gf.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(_o,Gf);var Ks=function(){};Ks.reverseOrder=function(){return{compare:function(h,d){return d.compareTo(h)}}},Ks.min=function(h){return Ks.sort(h),h.get(0)},Ks.sort=function(h,d){var m=h.toArray();d?$l.sort(m,d):$l.sort(m);for(var v=h.iterator(),b=0,B=m.length;b<B;b++)v.next(),v.set(m[b])},Ks.singletonList=function(h){var d=new rn;return d.add(h),d};var $o=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var d=arguments[1],m=arguments[2];this._boundable1=arguments[0],this._boundable2=d,this._itemDistance=m,this._distance=this.distance()};$o.prototype.expandToQueue=function(h,d){var m=$o.isComposite(this._boundable1),v=$o.isComposite(this._boundable2);if(m&&v)return $o.area(this._boundable1)>$o.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,h,d),null):(this.expand(this._boundable2,this._boundable1,h,d),null);if(m)return this.expand(this._boundable1,this._boundable2,h,d),null;if(v)return this.expand(this._boundable2,this._boundable1,h,d),null;throw new X("neither boundable is composite")},$o.prototype.isLeaves=function(){return!($o.isComposite(this._boundable1)||$o.isComposite(this._boundable2))},$o.prototype.compareTo=function(h){return this._distance<h._distance?-1:this._distance>h._distance?1:0},$o.prototype.expand=function(h,d,m,v){for(var b=h.getChildBoundables().iterator();b.hasNext();){var B=b.next(),z=new $o(B,d,this._itemDistance);z.getDistance()<v&&m.add(z)}},$o.prototype.getBoundable=function(h){return 0===h?this._boundable1:this._boundable2},$o.prototype.getDistance=function(){return this._distance},$o.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},$o.prototype.interfaces_=function(){return[Z]},$o.prototype.getClass=function(){return $o},$o.area=function(h){return h.getBounds().getArea()},$o.isComposite=function(h){return h instanceof _o};var zn=function h(){if(this._root=null,this._built=!1,this._itemBoundables=new rn,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=h.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var m=arguments[0];J.isTrue(m>1,"Node capacity must be greater than 1"),this._nodeCapacity=m}},a0={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};zn.prototype.getNodeCapacity=function(){return this._nodeCapacity},zn.prototype.lastNode=function(h){return h.get(h.size()-1)},zn.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var h=0,d=arguments[0].getChildBoundables().iterator();d.hasNext();){var m=d.next();m instanceof _o?h+=this.size(m):m instanceof t2&&(h+=1)}return h}},zn.prototype.removeItem=function(h,d){for(var m=null,v=h.getChildBoundables().iterator();v.hasNext();){var b=v.next();b instanceof t2&&b.getItem()===d&&(m=b)}return null!==m&&(h.getChildBoundables().remove(m),!0)},zn.prototype.itemsTree=function(){if(0===arguments.length){this.build();var h=this.itemsTree(this._root);return null===h?new rn:h}if(1===arguments.length){for(var d=arguments[0],m=new rn,v=d.getChildBoundables().iterator();v.hasNext();){var b=v.next();if(b instanceof _o){var B=this.itemsTree(b);null!==B&&m.add(B)}else b instanceof t2?m.add(b.getItem()):J.shouldNeverReachHere()}return m.size()<=0?null:m}},zn.prototype.insert=function(h,d){J.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new t2(h,d))},zn.prototype.boundablesAtLevel=function(){if(1===arguments.length){var h=arguments[0],d=new rn;return this.boundablesAtLevel(h,this._root,d),d}if(3===arguments.length){var m=arguments[0],v=arguments[1],b=arguments[2];if(J.isTrue(m>-2),v.getLevel()===m)return b.add(v),null;for(var B=v.getChildBoundables().iterator();B.hasNext();){var z=B.next();z instanceof _o?this.boundablesAtLevel(m,z,b):(J.isTrue(z instanceof t2),-1===m&&b.add(z))}return null}},zn.prototype.query=function(){if(1===arguments.length){var h=arguments[0];this.build();var d=new rn;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),h)&&this.query(h,this._root,d),d}if(2===arguments.length){var m=arguments[0],v=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),m)&&this.query(m,this._root,v)}else if(3===arguments.length)if(At(arguments[2],Xl)&&arguments[0]instanceof Object&&arguments[1]instanceof _o)for(var b=arguments[0],z=arguments[2],q=arguments[1].getChildBoundables(),pe=0;pe<q.size();pe++){var Ue=q.get(pe);this.getIntersectsOp().intersects(Ue.getBounds(),b)&&(Ue instanceof _o?this.query(b,Ue,z):Ue instanceof t2?z.visitItem(Ue.getItem()):J.shouldNeverReachHere())}else if(At(arguments[2],Qo)&&arguments[0]instanceof Object&&arguments[1]instanceof _o)for(var gt=arguments[0],hn=arguments[2],Mn=arguments[1].getChildBoundables(),Fn=0;Fn<Mn.size();Fn++){var Jn=Mn.get(Fn);this.getIntersectsOp().intersects(Jn.getBounds(),gt)&&(Jn instanceof _o?this.query(gt,Jn,hn):Jn instanceof t2?hn.add(Jn.getItem()):J.shouldNeverReachHere())}},zn.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},zn.prototype.getRoot=function(){return this.build(),this._root},zn.prototype.remove=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),h)&&this.remove(h,this._root,d)}if(3===arguments.length){var m=arguments[0],v=arguments[1],b=arguments[2],B=this.removeItem(v,b);if(B)return!0;for(var z=null,q=v.getChildBoundables().iterator();q.hasNext();){var pe=q.next();if(this.getIntersectsOp().intersects(pe.getBounds(),m)&&pe instanceof _o&&(B=this.remove(m,pe,b))){z=pe;break}}return null!==z&&z.getChildBoundables().isEmpty()&&v.getChildBoundables().remove(z),B}},zn.prototype.createHigherLevels=function(h,d){J.isTrue(!h.isEmpty());var m=this.createParentBoundables(h,d+1);return 1===m.size()?m.get(0):this.createHigherLevels(m,d+1)},zn.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var h=0,d=arguments[0].getChildBoundables().iterator();d.hasNext();){var m=d.next();if(m instanceof _o){var v=this.depth(m);v>h&&(h=v)}}return h+1}},zn.prototype.createParentBoundables=function(h,d){J.isTrue(!h.isEmpty());var m=new rn;m.add(this.createNode(d));var v=new rn(h);Ks.sort(v,this.getComparator());for(var b=v.iterator();b.hasNext();){var B=b.next();this.lastNode(m).getChildBoundables().size()===this.getNodeCapacity()&&m.add(this.createNode(d)),this.lastNode(m).addChildBoundable(B)}return m},zn.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},zn.prototype.interfaces_=function(){return[ue]},zn.prototype.getClass=function(){return zn},zn.compareDoubles=function(h,d){return h>d?1:h<d?-1:0},a0.IntersectsOp.get=function(){return zm},a0.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},a0.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(zn,a0);var zm=function(){},$1=function(){};$1.prototype.distance=function(h,d){},$1.prototype.interfaces_=function(){return[]},$1.prototype.getClass=function(){return $1};var F6=function(h){function d(v){h.call(this,v=v||d.DEFAULT_NODE_CAPACITY)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return d.prototype.createParentBoundablesFromVerticalSlices=function(v,b){J.isTrue(v.length>0);for(var B=new rn,z=0;z<v.length;z++)B.addAll(this.createParentBoundablesFromVerticalSlice(v[z],b));return B},d.prototype.createNode=function(v){return new Qf(v)},d.prototype.size=function(){return 0===arguments.length?h.prototype.size.call(this):h.prototype.size.apply(this,arguments)},d.prototype.insert=function(){if(2!==arguments.length)return h.prototype.insert.apply(this,arguments);var v=arguments[0],b=arguments[1];if(v.isNull())return null;h.prototype.insert.call(this,v,b)},d.prototype.getIntersectsOp=function(){return d.intersectsOp},d.prototype.verticalSlices=function(v,b){for(var B=Math.trunc(Math.ceil(v.size()/b)),z=new Array(b).fill(null),q=v.iterator(),pe=0;pe<b;pe++){z[pe]=new rn;for(var Ue=0;q.hasNext()&&Ue<B;){var gt=q.next();z[pe].add(gt),Ue++}}return z},d.prototype.query=function(){if(1===arguments.length)return h.prototype.query.call(this,arguments[0]);2===arguments.length?h.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(At(arguments[2],Xl)&&arguments[0]instanceof Object&&arguments[1]instanceof _o||At(arguments[2],Qo)&&arguments[0]instanceof Object&&arguments[1]instanceof _o)&&h.prototype.query.call(this,arguments[0],arguments[1],arguments[2])},d.prototype.getComparator=function(){return d.yComparator},d.prototype.createParentBoundablesFromVerticalSlice=function(v,b){return h.prototype.createParentBoundables.call(this,v,b)},d.prototype.remove=function(){return 2===arguments.length?h.prototype.remove.call(this,arguments[0],arguments[1]):h.prototype.remove.apply(this,arguments)},d.prototype.depth=function(){return 0===arguments.length?h.prototype.depth.call(this):h.prototype.depth.apply(this,arguments)},d.prototype.createParentBoundables=function(v,b){J.isTrue(!v.isEmpty());var B=Math.trunc(Math.ceil(v.size()/this.getNodeCapacity())),z=new rn(v);Ks.sort(z,d.xComparator);var q=this.verticalSlices(z,Math.trunc(Math.ceil(Math.sqrt(B))));return this.createParentBoundablesFromVerticalSlices(q,b)},d.prototype.nearestNeighbour=function(){if(1===arguments.length){if(At(arguments[0],$1)){var v=arguments[0],b=new $o(this.getRoot(),this.getRoot(),v);return this.nearestNeighbour(b)}if(arguments[0]instanceof $o)return this.nearestNeighbour(arguments[0],Y.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof d&&At(arguments[1],$1)){var z=arguments[0],q=arguments[1],pe=new $o(this.getRoot(),z.getRoot(),q);return this.nearestNeighbour(pe)}if(arguments[0]instanceof $o&&"number"==typeof arguments[1]){var Ue=arguments[0],gt=arguments[1],pt=null,hn=new gl;for(hn.add(Ue);!hn.isEmpty()&&gt>0;){var Mn=hn.poll(),Fn=Mn.getDistance();if(Fn>=gt)break;Mn.isLeaves()?(gt=Fn,pt=Mn):Mn.expandToQueue(hn,gt)}return[pt.getBoundable(0).getItem(),pt.getBoundable(1).getItem()]}}else if(3===arguments.length){var Do=arguments[2],l1=new t2(arguments[0],arguments[1]),_l=new $o(this.getRoot(),l1,Do);return this.nearestNeighbour(_l)[0]}},d.prototype.interfaces_=function(){return[I3,ue]},d.prototype.getClass=function(){return d},d.centreX=function(v){return d.avg(v.getMinX(),v.getMaxX())},d.avg=function(v,b){return(v+b)/2},d.centreY=function(v){return d.avg(v.getMinY(),v.getMaxY())},m.STRtreeNode.get=function(){return Qf},m.serialVersionUID.get=function(){return 0x39920f7d5f261e0},m.xComparator.get=function(){return{interfaces_:function(){return[ce]},compare:function(v,b){return h.compareDoubles(d.centreX(v.getBounds()),d.centreX(b.getBounds()))}}},m.yComparator.get=function(){return{interfaces_:function(){return[ce]},compare:function(v,b){return h.compareDoubles(d.centreY(v.getBounds()),d.centreY(b.getBounds()))}}},m.intersectsOp.get=function(){return{interfaces_:function(){return[h.IntersectsOp]},intersects:function(v,b){return v.intersects(b)}}},m.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(d,m),d}(zn),Qf=function(h){function d(){h.call(this,arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.computeBounds=function(){for(var m=null,v=this.getChildBoundables().iterator();v.hasNext();){var b=v.next();null===m?m=new on(b.getBounds()):m.expandToInclude(b.getBounds())}return m},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(_o),go=function(){};go.prototype.interfaces_=function(){return[]},go.prototype.getClass=function(){return go},go.relativeSign=function(h,d){return h<d?-1:h>d?1:0},go.compare=function(h,d,m){if(d.equals2D(m))return 0;var v=go.relativeSign(d.x,m.x),b=go.relativeSign(d.y,m.y);switch(h){case 0:return go.compareValue(v,b);case 1:return go.compareValue(b,v);case 2:return go.compareValue(b,-v);case 3:return go.compareValue(-v,b);case 4:return go.compareValue(-v,-b);case 5:return go.compareValue(-b,-v);case 6:return go.compareValue(-b,v);case 7:return go.compareValue(v,-b)}return J.shouldNeverReachHere("invalid octant value"),0},go.compareValue=function(h,d){return h<0?-1:h>0?1:d<0?-1:d>0?1:0};var ka=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var h=arguments[0],d=arguments[1],m=arguments[2],v=arguments[3];this._segString=h,this.coord=new $(d),this.segmentIndex=m,this._segmentOctant=v,this._isInterior=!d.equals2D(h.getCoordinate(m))};ka.prototype.getCoordinate=function(){return this.coord},ka.prototype.print=function(h){h.print(this.coord),h.print(" seg # = "+this.segmentIndex)},ka.prototype.compareTo=function(h){var d=h;return this.segmentIndex<d.segmentIndex?-1:this.segmentIndex>d.segmentIndex?1:this.coord.equals2D(d.coord)?0:go.compare(this._segmentOctant,this.coord,d.coord)},ka.prototype.isEndPoint=function(h){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===h},ka.prototype.isInterior=function(){return this._isInterior},ka.prototype.interfaces_=function(){return[Z]},ka.prototype.getClass=function(){return ka};var q1=function(){this._nodeMap=new Ct,this._edge=null,this._edge=arguments[0]};q1.prototype.getSplitCoordinates=function(){var h=new lc;this.addEndpoints();for(var d=this.iterator(),m=d.next();d.hasNext();){var v=d.next();this.addEdgeCoordinates(m,v,h),m=v}return h.toCoordinateArray()},q1.prototype.addCollapsedNodes=function(){var h=new rn;this.findCollapsesFromInsertedNodes(h),this.findCollapsesFromExistingVertices(h);for(var d=h.iterator();d.hasNext();){var m=d.next().intValue();this.add(this._edge.getCoordinate(m),m)}},q1.prototype.print=function(h){h.println("Intersections:");for(var d=this.iterator();d.hasNext();)d.next().print(h)},q1.prototype.findCollapsesFromExistingVertices=function(h){for(var d=0;d<this._edge.size()-2;d++){var m=this._edge.getCoordinate(d),v=this._edge.getCoordinate(d+2);m.equals2D(v)&&h.add(new Qe(d+1))}},q1.prototype.addEdgeCoordinates=function(h,d,m){var v=this._edge.getCoordinate(d.segmentIndex),b=d.isInterior()||!d.coord.equals2D(v);m.add(new $(h.coord),!1);for(var B=h.segmentIndex+1;B<=d.segmentIndex;B++)m.add(this._edge.getCoordinate(B));b&&m.add(new $(d.coord))},q1.prototype.iterator=function(){return this._nodeMap.values().iterator()},q1.prototype.addSplitEdges=function(h){this.addEndpoints(),this.addCollapsedNodes();for(var d=this.iterator(),m=d.next();d.hasNext();){var v=d.next(),b=this.createSplitEdge(m,v);h.add(b),m=v}},q1.prototype.findCollapseIndex=function(h,d,m){if(!h.coord.equals2D(d.coord))return!1;var v=d.segmentIndex-h.segmentIndex;return d.isInterior()||v--,1===v&&(m[0]=h.segmentIndex+1,!0)},q1.prototype.findCollapsesFromInsertedNodes=function(h){for(var d=new Array(1).fill(null),m=this.iterator(),v=m.next();m.hasNext();){var b=m.next();this.findCollapseIndex(v,b,d)&&h.add(new Qe(d[0])),v=b}},q1.prototype.getEdge=function(){return this._edge},q1.prototype.addEndpoints=function(){var h=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(h),h)},q1.prototype.createSplitEdge=function(h,d){var m=d.segmentIndex-h.segmentIndex+2,v=this._edge.getCoordinate(d.segmentIndex),b=d.isInterior()||!d.coord.equals2D(v);b||m--;var B=new Array(m).fill(null),z=0;B[z++]=new $(h.coord);for(var q=h.segmentIndex+1;q<=d.segmentIndex;q++)B[z++]=this._edge.getCoordinate(q);return b&&(B[z]=new $(d.coord)),new Ko(B,this._edge.getData())},q1.prototype.add=function(h,d){var m=new ka(this._edge,h,d,this._edge.getSegmentOctant(d)),v=this._nodeMap.get(m);return null!==v?(J.isTrue(v.coord.equals2D(h),"Found equal nodes with different coordinates"),v):(this._nodeMap.put(m,m),m)},q1.prototype.checkSplitEdgesCorrectness=function(h){var d=this._edge.getCoordinates(),m=h.get(0).getCoordinate(0);if(!m.equals2D(d[0]))throw new le("bad split edge start point at "+m);var v=h.get(h.size()-1).getCoordinates(),b=v[v.length-1];if(!b.equals2D(d[d.length-1]))throw new le("bad split edge end point at "+b)},q1.prototype.interfaces_=function(){return[]},q1.prototype.getClass=function(){return q1};var _2=function(){};_2.prototype.interfaces_=function(){return[]},_2.prototype.getClass=function(){return _2},_2.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var h=arguments[0],d=arguments[1];if(0===h&&0===d)throw new X("Cannot compute the octant for point ( "+h+", "+d+" )");var m=Math.abs(h),v=Math.abs(d);return h>=0?d>=0?m>=v?0:1:m>=v?7:6:d>=0?m>=v?3:2:m>=v?4:5}if(arguments[0]instanceof $&&arguments[1]instanceof $){var b=arguments[0],B=arguments[1],z=B.x-b.x,q=B.y-b.y;if(0===z&&0===q)throw new X("Cannot compute the octant for two identical points "+b);return _2.octant(z,q)}};var qo=function(){};qo.prototype.getCoordinates=function(){},qo.prototype.size=function(){},qo.prototype.getCoordinate=function(h){},qo.prototype.isClosed=function(){},qo.prototype.setData=function(h){},qo.prototype.getData=function(){},qo.prototype.interfaces_=function(){return[]},qo.prototype.getClass=function(){return qo};var ws=function(){};ws.prototype.addIntersection=function(h,d){},ws.prototype.interfaces_=function(){return[qo]},ws.prototype.getClass=function(){return ws};var Ko=function(){this._nodeList=new q1(this),this._pts=null,this._data=null;var d=arguments[1];this._pts=arguments[0],this._data=d};Ko.prototype.getCoordinates=function(){return this._pts},Ko.prototype.size=function(){return this._pts.length},Ko.prototype.getCoordinate=function(h){return this._pts[h]},Ko.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ko.prototype.getSegmentOctant=function(h){return h===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(h),this.getCoordinate(h+1))},Ko.prototype.setData=function(h){this._data=h},Ko.prototype.safeOctant=function(h,d){return h.equals2D(d)?0:_2.octant(h,d)},Ko.prototype.getData=function(){return this._data},Ko.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var v=arguments[1],B=new $(arguments[0].getIntersection(arguments[3]));this.addIntersection(B,v)}},Ko.prototype.toString=function(){return it.toLineString(new fo(this._pts))},Ko.prototype.getNodeList=function(){return this._nodeList},Ko.prototype.addIntersectionNode=function(h,d){var m=d,v=m+1;return v<this._pts.length&&h.equals2D(this._pts[v])&&(m=v),this._nodeList.add(h,m)},Ko.prototype.addIntersections=function(h,d,m){for(var v=0;v<h.getIntersectionNum();v++)this.addIntersection(h,d,m,v)},Ko.prototype.interfaces_=function(){return[ws]},Ko.prototype.getClass=function(){return Ko},Ko.getNodedSubstrings=function(){if(1===arguments.length){var h=arguments[0],d=new rn;return Ko.getNodedSubstrings(h,d),d}if(2===arguments.length)for(var v=arguments[1],b=arguments[0].iterator();b.hasNext();)b.next().getNodeList().addSplitEdges(v)};var li=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new $,this.p1=new $;else if(1===arguments.length){var h=arguments[0];this.p0=new $(h.p0),this.p1=new $(h.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var v=arguments[2],b=arguments[3];this.p0=new $(arguments[0],arguments[1]),this.p1=new $(v,b)}},ou={serialVersionUID:{configurable:!0}};li.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},li.prototype.orientationIndex=function(){if(arguments[0]instanceof li){var h=arguments[0],d=Mt.orientationIndex(this.p0,this.p1,h.p0),m=Mt.orientationIndex(this.p0,this.p1,h.p1);return d>=0&&m>=0||d<=0&&m<=0?Math.max(d,m):0}if(arguments[0]instanceof $)return Mt.orientationIndex(this.p0,this.p1,arguments[0])},li.prototype.toGeometry=function(h){return h.createLineString([this.p0,this.p1])},li.prototype.isVertical=function(){return this.p0.x===this.p1.x},li.prototype.equals=function(h){if(!(h instanceof li))return!1;var d=h;return this.p0.equals(d.p0)&&this.p1.equals(d.p1)},li.prototype.intersection=function(h){var d=new mt;return d.computeIntersection(this.p0,this.p1,h.p0,h.p1),d.hasIntersection()?d.getIntersection(0):null},li.prototype.project=function(){if(arguments[0]instanceof $){var h=arguments[0];if(h.equals(this.p0)||h.equals(this.p1))return new $(h);var d=this.projectionFactor(h),m=new $;return m.x=this.p0.x+d*(this.p1.x-this.p0.x),m.y=this.p0.y+d*(this.p1.y-this.p0.y),m}if(arguments[0]instanceof li){var v=arguments[0],b=this.projectionFactor(v.p0),B=this.projectionFactor(v.p1);if(b>=1&&B>=1||b<=0&&B<=0)return null;var z=this.project(v.p0);b<0&&(z=this.p0),b>1&&(z=this.p1);var q=this.project(v.p1);return B<0&&(q=this.p0),B>1&&(q=this.p1),new li(z,q)}},li.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},li.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},li.prototype.getCoordinate=function(h){return 0===h?this.p0:this.p1},li.prototype.distancePerpendicular=function(h){return Mt.distancePointLinePerpendicular(h,this.p0,this.p1)},li.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},li.prototype.midPoint=function(){return li.midPoint(this.p0,this.p1)},li.prototype.projectionFactor=function(h){if(h.equals(this.p0))return 0;if(h.equals(this.p1))return 1;var d=this.p1.x-this.p0.x,m=this.p1.y-this.p0.y,v=d*d+m*m;return v<=0?Y.NaN:((h.x-this.p0.x)*d+(h.y-this.p0.y)*m)/v},li.prototype.closestPoints=function(h){var d=this.intersection(h);if(null!==d)return[d,d];var m=new Array(2).fill(null),v=Y.MAX_VALUE,b=null,B=this.closestPoint(h.p0);v=B.distance(h.p0),m[0]=B,m[1]=h.p0;var z=this.closestPoint(h.p1);(b=z.distance(h.p1))<v&&(v=b,m[0]=z,m[1]=h.p1);var q=h.closestPoint(this.p0);(b=q.distance(this.p0))<v&&(v=b,m[0]=this.p0,m[1]=q);var pe=h.closestPoint(this.p1);return(b=pe.distance(this.p1))<v&&(v=b,m[0]=this.p1,m[1]=pe),m},li.prototype.closestPoint=function(h){var d=this.projectionFactor(h);return d>0&&d<1?this.project(h):this.p0.distance(h)<this.p1.distance(h)?this.p0:this.p1},li.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},li.prototype.getLength=function(){return this.p0.distance(this.p1)},li.prototype.compareTo=function(h){var d=h,m=this.p0.compareTo(d.p0);return 0!==m?m:this.p1.compareTo(d.p1)},li.prototype.reverse=function(){var h=this.p0;this.p0=this.p1,this.p1=h},li.prototype.equalsTopo=function(h){return this.p0.equals(h.p0)&&(this.p1.equals(h.p1)||this.p0.equals(h.p1))&&this.p1.equals(h.p0)},li.prototype.lineIntersection=function(h){try{return $n.intersection(this.p0,this.p1,h.p0,h.p1)}catch(d){if(!(d instanceof ci))throw d}return null},li.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},li.prototype.pointAlongOffset=function(h,d){var m=this.p0.x+h*(this.p1.x-this.p0.x),v=this.p0.y+h*(this.p1.y-this.p0.y),b=this.p1.x-this.p0.x,B=this.p1.y-this.p0.y,z=Math.sqrt(b*b+B*B),q=0,pe=0;if(0!==d){if(z<=0)throw new Error("Cannot compute offset from zero-length line segment");q=d*b/z,pe=d*B/z}return new $(m-pe,v+q)},li.prototype.setCoordinates=function(){if(1===arguments.length){var h=arguments[0];this.setCoordinates(h.p0,h.p1)}else if(2===arguments.length){var d=arguments[0],m=arguments[1];this.p0.x=d.x,this.p0.y=d.y,this.p1.x=m.x,this.p1.y=m.y}},li.prototype.segmentFraction=function(h){var d=this.projectionFactor(h);return d<0?d=0:(d>1||Y.isNaN(d))&&(d=1),d},li.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},li.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},li.prototype.distance=function(){if(arguments[0]instanceof li){var h=arguments[0];return Mt.distanceLineLine(this.p0,this.p1,h.p0,h.p1)}if(arguments[0]instanceof $)return Mt.distancePointLine(arguments[0],this.p0,this.p1)},li.prototype.pointAlong=function(h){var d=new $;return d.x=this.p0.x+h*(this.p1.x-this.p0.x),d.y=this.p0.y+h*(this.p1.y-this.p0.y),d},li.prototype.hashCode=function(){var h=Y.doubleToLongBits(this.p0.x);h^=31*Y.doubleToLongBits(this.p0.y);var d=Math.trunc(h)^Math.trunc(h>>32),m=Y.doubleToLongBits(this.p1.x);return m^=31*Y.doubleToLongBits(this.p1.y),d^Math.trunc(m)^Math.trunc(m>>32)},li.prototype.interfaces_=function(){return[Z,ue]},li.prototype.getClass=function(){return li},li.midPoint=function(h,d){return new $((h.x+d.x)/2,(h.y+d.y)/2)},ou.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(li,ou);var Pr=function(){this.tempEnv1=new on,this.tempEnv2=new on,this._overlapSeg1=new li,this._overlapSeg2=new li};Pr.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var m=arguments[2],v=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),m.getLineSegment(v,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr};var s1=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var d=arguments[1],m=arguments[2],v=arguments[3];this._pts=arguments[0],this._start=d,this._end=m,this._context=v};s1.prototype.getLineSegment=function(h,d){d.p0=this._pts[h],d.p1=this._pts[h+1]},s1.prototype.computeSelect=function(h,d,m,v){if(v.tempEnv1.init(this._pts[d],this._pts[m]),m-d==1)return v.select(this,d),null;if(!h.intersects(v.tempEnv1))return null;var z=Math.trunc((d+m)/2);d<z&&this.computeSelect(h,d,z,v),z<m&&this.computeSelect(h,z,m,v)},s1.prototype.getCoordinates=function(){for(var h=new Array(this._end-this._start+1).fill(null),d=0,m=this._start;m<=this._end;m++)h[d++]=this._pts[m];return h},s1.prototype.computeOverlaps=function(h,d){this.computeOverlapsInternal(this._start,this._end,h,h._start,h._end,d)},s1.prototype.setId=function(h){this._id=h},s1.prototype.select=function(h,d){this.computeSelect(h,this._start,this._end,d)},s1.prototype.getEnvelope=function(){return null===this._env&&(this._env=new on(this._pts[this._start],this._pts[this._end])),this._env},s1.prototype.getEndIndex=function(){return this._end},s1.prototype.getStartIndex=function(){return this._start},s1.prototype.getContext=function(){return this._context},s1.prototype.getId=function(){return this._id},s1.prototype.computeOverlapsInternal=function(h,d,m,v,b,B){var z=this._pts[h],q=this._pts[d],pe=m._pts[v],Ue=m._pts[b];if(d-h==1&&b-v==1)return B.overlap(this,h,m,v),null;if(B.tempEnv1.init(z,q),B.tempEnv2.init(pe,Ue),!B.tempEnv1.intersects(B.tempEnv2))return null;var gt=Math.trunc((h+d)/2),pt=Math.trunc((v+b)/2);h<gt&&(v<pt&&this.computeOverlapsInternal(h,gt,m,v,pt,B),pt<b&&this.computeOverlapsInternal(h,gt,m,pt,b,B)),gt<d&&(v<pt&&this.computeOverlapsInternal(gt,d,m,v,pt,B),pt<b&&this.computeOverlapsInternal(gt,d,m,pt,b,B))},s1.prototype.interfaces_=function(){return[]},s1.prototype.getClass=function(){return s1};var n2=function(){};n2.prototype.interfaces_=function(){return[]},n2.prototype.getClass=function(){return n2},n2.getChainStartIndices=function(h){var d=0,m=new rn;m.add(new Qe(d));do{var v=n2.findChainEnd(h,d);m.add(new Qe(v)),d=v}while(d<h.length-1);return n2.toIntArray(m)},n2.findChainEnd=function(h,d){for(var m=d;m<h.length-1&&h[m].equals2D(h[m+1]);)m++;if(m>=h.length-1)return h.length-1;for(var v=Ls.quadrant(h[m],h[m+1]),b=d+1;b<h.length&&(h[b-1].equals2D(h[b])||Ls.quadrant(h[b-1],h[b])===v);)b++;return b-1},n2.getChains=function(){if(1===arguments.length)return n2.getChains(arguments[0],null);if(2===arguments.length){for(var d=arguments[0],m=arguments[1],v=new rn,b=n2.getChainStartIndices(d),B=0;B<b.length-1;B++){var z=new s1(d,b[B],b[B+1],m);v.add(z)}return v}},n2.toIntArray=function(h){for(var d=new Array(h.size()).fill(null),m=0;m<d.length;m++)d[m]=h.get(m).intValue();return d};var Yl=function(){};Yl.prototype.computeNodes=function(h){},Yl.prototype.getNodedSubstrings=function(){},Yl.prototype.interfaces_=function(){return[]},Yl.prototype.getClass=function(){return Yl};var c0=function(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])};c0.prototype.setSegmentIntersector=function(h){this._segInt=h},c0.prototype.interfaces_=function(){return[Yl]},c0.prototype.getClass=function(){return c0};var ml=function(h){function d(v){v?h.call(this,v):h.call(this),this._monoChains=new rn,this._index=new F6,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={SegmentOverlapAction:{configurable:!0}};return d.prototype.getMonotoneChains=function(){return this._monoChains},d.prototype.getNodedSubstrings=function(){return Ko.getNodedSubstrings(this._nodedSegStrings)},d.prototype.getIndex=function(){return this._index},d.prototype.add=function(v){for(var b=n2.getChains(v.getCoordinates(),v).iterator();b.hasNext();){var B=b.next();B.setId(this._idCounter++),this._index.insert(B.getEnvelope(),B),this._monoChains.add(B)}},d.prototype.computeNodes=function(v){this._nodedSegStrings=v;for(var b=v.iterator();b.hasNext();)this.add(b.next());this.intersectChains()},d.prototype.intersectChains=function(){for(var v=new l0(this._segInt),b=this._monoChains.iterator();b.hasNext();)for(var B=b.next(),z=this._index.query(B.getEnvelope()).iterator();z.hasNext();){var q=z.next();if(q.getId()>B.getId()&&(B.computeOverlaps(q,v),this._nOverlaps++),this._segInt.isDone())return null}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},m.SegmentOverlapAction.get=function(){return l0},Object.defineProperties(d,m),d}(c0),l0=function(h){function d(){h.call(this),this._si=null,this._si=arguments[0]}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.overlap=function(){if(4!==arguments.length)return h.prototype.overlap.apply(this,arguments);var v=arguments[1],b=arguments[2],B=arguments[3],z=arguments[0].getContext(),q=b.getContext();this._si.processIntersections(z,v,q,B)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Pr),Lr=function h(){if(this._quadrantSegments=h.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=h.CAP_ROUND,this._joinStyle=h.JOIN_ROUND,this._mitreLimit=h.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=h.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var v=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(v)}else if(4===arguments.length){var B=arguments[1],z=arguments[2],q=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(B),this.setJoinStyle(z),this.setMitreLimit(q)}},Rn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Lr.prototype.getEndCapStyle=function(){return this._endCapStyle},Lr.prototype.isSingleSided=function(){return this._isSingleSided},Lr.prototype.setQuadrantSegments=function(h){this._quadrantSegments=h,0===this._quadrantSegments&&(this._joinStyle=Lr.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Lr.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),h<=0&&(this._quadrantSegments=1),this._joinStyle!==Lr.JOIN_ROUND&&(this._quadrantSegments=Lr.DEFAULT_QUADRANT_SEGMENTS)},Lr.prototype.getJoinStyle=function(){return this._joinStyle},Lr.prototype.setJoinStyle=function(h){this._joinStyle=h},Lr.prototype.setSimplifyFactor=function(h){this._simplifyFactor=h<0?0:h},Lr.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Lr.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Lr.prototype.setEndCapStyle=function(h){this._endCapStyle=h},Lr.prototype.getMitreLimit=function(){return this._mitreLimit},Lr.prototype.setMitreLimit=function(h){this._mitreLimit=h},Lr.prototype.setSingleSided=function(h){this._isSingleSided=h},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.bufferDistanceError=function(h){var d=Math.PI/2/h;return 1-Math.cos(d/2)},Rn.CAP_ROUND.get=function(){return 1},Rn.CAP_FLAT.get=function(){return 2},Rn.CAP_SQUARE.get=function(){return 3},Rn.JOIN_ROUND.get=function(){return 1},Rn.JOIN_MITRE.get=function(){return 2},Rn.JOIN_BEVEL.get=function(){return 3},Rn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Rn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Rn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Lr,Rn);var Xs=function(h){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Mt.COUNTERCLOCKWISE,this._inputLine=h||null},u0={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Xs.prototype.isDeletable=function(h,d,m,v){var b=this._inputLine[h],B=this._inputLine[d],z=this._inputLine[m];return!!this.isConcave(b,B,z)&&!!this.isShallow(b,B,z,v)&&this.isShallowSampled(b,B,h,m,v)},Xs.prototype.deleteShallowConcavities=function(){for(var h=1,d=this.findNextNonDeletedIndex(h),m=this.findNextNonDeletedIndex(d),v=!1;m<this._inputLine.length;){var b=!1;this.isDeletable(h,d,m,this._distanceTol)&&(this._isDeleted[d]=Xs.DELETE,b=!0,v=!0),d=this.findNextNonDeletedIndex(h=b?m:d),m=this.findNextNonDeletedIndex(d)}return v},Xs.prototype.isShallowConcavity=function(h,d,m,v){return Mt.computeOrientation(h,d,m)===this._angleOrientation&&Mt.distancePointLine(d,h,m)<v},Xs.prototype.isShallowSampled=function(h,d,m,v,b){var B=Math.trunc((v-m)/Xs.NUM_PTS_TO_CHECK);B<=0&&(B=1);for(var z=m;z<v;z+=B)if(!this.isShallow(h,d,this._inputLine[z],b))return!1;return!0},Xs.prototype.isConcave=function(h,d,m){return Mt.computeOrientation(h,d,m)===this._angleOrientation},Xs.prototype.simplify=function(h){this._distanceTol=Math.abs(h),h<0&&(this._angleOrientation=Mt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var d=!1;do{d=this.deleteShallowConcavities()}while(d);return this.collapseLine()},Xs.prototype.findNextNonDeletedIndex=function(h){for(var d=h+1;d<this._inputLine.length&&this._isDeleted[d]===Xs.DELETE;)d++;return d},Xs.prototype.isShallow=function(h,d,m,v){return Mt.distancePointLine(d,h,m)<v},Xs.prototype.collapseLine=function(){for(var h=new lc,d=0;d<this._inputLine.length;d++)this._isDeleted[d]!==Xs.DELETE&&h.add(this._inputLine[d]);return h.toCoordinateArray()},Xs.prototype.interfaces_=function(){return[]},Xs.prototype.getClass=function(){return Xs},Xs.simplify=function(h,d){return new Xs(h).simplify(d)},u0.INIT.get=function(){return 0},u0.DELETE.get=function(){return 1},u0.KEEP.get=function(){return 1},u0.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Xs,u0);var dc=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new rn},oi={COORDINATE_ARRAY_TYPE:{configurable:!0}};dc.prototype.getCoordinates=function(){return this._ptList.toArray(dc.COORDINATE_ARRAY_TYPE)},dc.prototype.setPrecisionModel=function(h){this._precisionModel=h},dc.prototype.addPt=function(h){var d=new $(h);if(this._precisionModel.makePrecise(d),this.isRedundant(d))return null;this._ptList.add(d)},dc.prototype.revere=function(){},dc.prototype.addPts=function(h,d){if(d)for(var m=0;m<h.length;m++)this.addPt(h[m]);else for(var v=h.length-1;v>=0;v--)this.addPt(h[v])},dc.prototype.isRedundant=function(h){if(this._ptList.size()<1)return!1;var d=this._ptList.get(this._ptList.size()-1);return h.distance(d)<this._minimimVertexDistance},dc.prototype.toString=function(){return(new qi).createLineString(this.getCoordinates()).toString()},dc.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var h=new $(this._ptList.get(0)),d=this._ptList.get(this._ptList.size()-1);if(h.equals(d))return null;this._ptList.add(h)},dc.prototype.setMinimumVertexDistance=function(h){this._minimimVertexDistance=h},dc.prototype.interfaces_=function(){return[]},dc.prototype.getClass=function(){return dc},oi.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(dc,oi);var hr=function(){},_4={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr},hr.toDegrees=function(h){return 180*h/Math.PI},hr.normalize=function(h){for(;h>Math.PI;)h-=hr.PI_TIMES_2;for(;h<=-Math.PI;)h+=hr.PI_TIMES_2;return h},hr.angle=function(){if(1===arguments.length){var h=arguments[0];return Math.atan2(h.y,h.x)}if(2===arguments.length){var d=arguments[0],m=arguments[1];return Math.atan2(m.y-d.y,m.x-d.x)}},hr.isAcute=function(h,d,m){return(h.x-d.x)*(m.x-d.x)+(h.y-d.y)*(m.y-d.y)>0},hr.isObtuse=function(h,d,m){return(h.x-d.x)*(m.x-d.x)+(h.y-d.y)*(m.y-d.y)<0},hr.interiorAngle=function(h,d,m){var v=hr.angle(d,h),b=hr.angle(d,m);return Math.abs(b-v)},hr.normalizePositive=function(h){if(h<0){for(;h<0;)h+=hr.PI_TIMES_2;h>=hr.PI_TIMES_2&&(h=0)}else{for(;h>=hr.PI_TIMES_2;)h-=hr.PI_TIMES_2;h<0&&(h=0)}return h},hr.angleBetween=function(h,d,m){var v=hr.angle(d,h),b=hr.angle(d,m);return hr.diff(v,b)},hr.diff=function(h,d){var m=null;return(m=h<d?d-h:h-d)>Math.PI&&(m=2*Math.PI-m),m},hr.toRadians=function(h){return h*Math.PI/180},hr.getTurn=function(h,d){var m=Math.sin(d-h);return m>0?hr.COUNTERCLOCKWISE:m<0?hr.CLOCKWISE:hr.NONE},hr.angleBetweenOriented=function(h,d,m){var v=hr.angle(d,h),b=hr.angle(d,m)-v;return b<=-Math.PI?b+hr.PI_TIMES_2:b>Math.PI?b-hr.PI_TIMES_2:b},_4.PI_TIMES_2.get=function(){return 2*Math.PI},_4.PI_OVER_2.get=function(){return Math.PI/2},_4.PI_OVER_4.get=function(){return Math.PI/4},_4.COUNTERCLOCKWISE.get=function(){return Mt.COUNTERCLOCKWISE},_4.CLOCKWISE.get=function(){return Mt.CLOCKWISE},_4.NONE.get=function(){return Mt.COLLINEAR},Object.defineProperties(hr,_4);var ht=function h(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new li,this._seg1=new li,this._offset0=new li,this._offset1=new li,this._side=0,this._hasNarrowConcaveAngle=!1;var m=arguments[1],v=arguments[2];this._precisionModel=arguments[0],this._bufParams=m,this._li=new mt,this._filletAngleQuantum=Math.PI/2/m.getQuadrantSegments(),m.getQuadrantSegments()>=8&&m.getJoinStyle()===Lr.JOIN_ROUND&&(this._closingSegLengthFactor=h.MAX_CLOSING_SEG_LEN_FACTOR),this.init(v)},b1={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};ht.prototype.addNextSegment=function(h,d){if(this._s0=this._s1,this._s1=this._s2,this._s2=h,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var m=Mt.computeOrientation(this._s0,this._s1,this._s2),v=m===Mt.CLOCKWISE&&this._side===un.LEFT||m===Mt.COUNTERCLOCKWISE&&this._side===un.RIGHT;0===m?this.addCollinear(d):v?this.addOutsideTurn(m,d):this.addInsideTurn(m,d)},ht.prototype.addLineEndCap=function(h,d){var m=new li(h,d),v=new li;this.computeOffsetSegment(m,un.LEFT,this._distance,v);var b=new li;this.computeOffsetSegment(m,un.RIGHT,this._distance,b);var q=Math.atan2(d.y-h.y,d.x-h.x);switch(this._bufParams.getEndCapStyle()){case Lr.CAP_ROUND:this._segList.addPt(v.p1),this.addFilletArc(d,q+Math.PI/2,q-Math.PI/2,Mt.CLOCKWISE,this._distance),this._segList.addPt(b.p1);break;case Lr.CAP_FLAT:this._segList.addPt(v.p1),this._segList.addPt(b.p1);break;case Lr.CAP_SQUARE:var pe=new $;pe.x=Math.abs(this._distance)*Math.cos(q),pe.y=Math.abs(this._distance)*Math.sin(q);var Ue=new $(v.p1.x+pe.x,v.p1.y+pe.y),gt=new $(b.p1.x+pe.x,b.p1.y+pe.y);this._segList.addPt(Ue),this._segList.addPt(gt)}},ht.prototype.getCoordinates=function(){return this._segList.getCoordinates()},ht.prototype.addMitreJoin=function(h,d,m,v){var b=!0,B=null;try{B=$n.intersection(d.p0,d.p1,m.p0,m.p1),(v<=0?1:B.distance(h)/Math.abs(v))>this._bufParams.getMitreLimit()&&(b=!1)}catch(z){if(!(z instanceof ci))throw z;B=new $(0,0),b=!1}b?this._segList.addPt(B):this.addLimitedMitreJoin(d,m,v,this._bufParams.getMitreLimit())},ht.prototype.addFilletCorner=function(h,d,m,v,b){var q=Math.atan2(d.y-h.y,d.x-h.x),gt=Math.atan2(m.y-h.y,m.x-h.x);v===Mt.CLOCKWISE?q<=gt&&(q+=2*Math.PI):q>=gt&&(q-=2*Math.PI),this._segList.addPt(d),this.addFilletArc(h,q,gt,v,b),this._segList.addPt(m)},ht.prototype.addOutsideTurn=function(h,d){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*ht.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Lr.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Lr.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(d&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,h,this._distance),this._segList.addPt(this._offset1.p0))},ht.prototype.createSquare=function(h){this._segList.addPt(new $(h.x+this._distance,h.y+this._distance)),this._segList.addPt(new $(h.x+this._distance,h.y-this._distance)),this._segList.addPt(new $(h.x-this._distance,h.y-this._distance)),this._segList.addPt(new $(h.x-this._distance,h.y+this._distance)),this._segList.closeRing()},ht.prototype.addSegments=function(h,d){this._segList.addPts(h,d)},ht.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},ht.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},ht.prototype.initSideSegments=function(h,d,m){this._s1=h,this._s2=d,this._side=m,this._seg1.setCoordinates(h,d),this.computeOffsetSegment(this._seg1,m,this._distance,this._offset1)},ht.prototype.addLimitedMitreJoin=function(h,d,m,v){var b=this._seg0.p1,B=hr.angle(b,this._seg0.p0),z=hr.angleBetweenOriented(this._seg0.p0,b,this._seg1.p1)/2,q=hr.normalize(B+z),pe=hr.normalize(q+Math.PI),Ue=v*m,gt=m-Ue*Math.abs(Math.sin(z)),pt=b.x+Ue*Math.cos(pe),hn=b.y+Ue*Math.sin(pe),Mn=new $(pt,hn),Fn=new li(b,Mn),Jn=Fn.pointAlongOffset(1,gt),Hr=Fn.pointAlongOffset(1,-gt);this._side===un.LEFT?(this._segList.addPt(Jn),this._segList.addPt(Hr)):(this._segList.addPt(Hr),this._segList.addPt(Jn))},ht.prototype.computeOffsetSegment=function(h,d,m,v){var b=d===un.LEFT?1:-1,B=h.p1.x-h.p0.x,z=h.p1.y-h.p0.y,q=Math.sqrt(B*B+z*z),pe=b*m*B/q,Ue=b*m*z/q;v.p0.x=h.p0.x-Ue,v.p0.y=h.p0.y+pe,v.p1.x=h.p1.x-Ue,v.p1.y=h.p1.y+pe},ht.prototype.addFilletArc=function(h,d,m,v,b){var B=v===Mt.CLOCKWISE?-1:1,z=Math.abs(d-m),q=Math.trunc(z/this._filletAngleQuantum+.5);if(q<1)return null;for(var pe=z/q,Ue=0,gt=new $;Ue<z;){var pt=d+B*Ue;gt.x=h.x+b*Math.cos(pt),gt.y=h.y+b*Math.sin(pt),this._segList.addPt(gt),Ue+=pe}},ht.prototype.addInsideTurn=function(h,d){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*ht.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var m=new $((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(m);var v=new $((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(v)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},ht.prototype.createCircle=function(h){var d=new $(h.x+this._distance,h.y);this._segList.addPt(d),this.addFilletArc(h,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},ht.prototype.addBevelJoin=function(h,d){this._segList.addPt(h.p1),this._segList.addPt(d.p0)},ht.prototype.init=function(h){this._distance=h,this._maxCurveSegmentError=h*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new dc,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(h*ht.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},ht.prototype.addCollinear=function(h){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Lr.JOIN_BEVEL||this._bufParams.getJoinStyle()===Lr.JOIN_MITRE?(h&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Mt.CLOCKWISE,this._distance))},ht.prototype.closeRing=function(){this._segList.closeRing()},ht.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht},b1.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},b1.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},b1.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},b1.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(ht,b1);var nr=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var d=arguments[1];this._precisionModel=arguments[0],this._bufParams=d};nr.prototype.getOffsetCurve=function(h,d){if(this._distance=d,0===d)return null;var m=d<0,v=Math.abs(d),b=this.getSegGen(v);h.length<=1?this.computePointCurve(h[0],b):this.computeOffsetCurve(h,m,b);var B=b.getCoordinates();return m&&Bi.reverse(B),B},nr.prototype.computeSingleSidedBufferCurve=function(h,d,m){var v=this.simplifyTolerance(this._distance);if(d){m.addSegments(h,!0);var b=Xs.simplify(h,-v),B=b.length-1;m.initSideSegments(b[B],b[B-1],un.LEFT),m.addFirstSegment();for(var z=B-2;z>=0;z--)m.addNextSegment(b[z],!0)}else{m.addSegments(h,!1);var q=Xs.simplify(h,v),pe=q.length-1;m.initSideSegments(q[0],q[1],un.LEFT),m.addFirstSegment();for(var Ue=2;Ue<=pe;Ue++)m.addNextSegment(q[Ue],!0)}m.addLastSegment(),m.closeRing()},nr.prototype.computeRingBufferCurve=function(h,d,m){var v=this.simplifyTolerance(this._distance);d===un.RIGHT&&(v=-v);var b=Xs.simplify(h,v),B=b.length-1;m.initSideSegments(b[B-1],b[0],d);for(var z=1;z<=B;z++)m.addNextSegment(b[z],1!==z);m.closeRing()},nr.prototype.computeLineBufferCurve=function(h,d){var m=this.simplifyTolerance(this._distance),v=Xs.simplify(h,m),b=v.length-1;d.initSideSegments(v[0],v[1],un.LEFT);for(var B=2;B<=b;B++)d.addNextSegment(v[B],!0);d.addLastSegment(),d.addLineEndCap(v[b-1],v[b]);var z=Xs.simplify(h,-m),q=z.length-1;d.initSideSegments(z[q],z[q-1],un.LEFT);for(var pe=q-2;pe>=0;pe--)d.addNextSegment(z[pe],!0);d.addLastSegment(),d.addLineEndCap(z[1],z[0]),d.closeRing()},nr.prototype.computePointCurve=function(h,d){switch(this._bufParams.getEndCapStyle()){case Lr.CAP_ROUND:d.createCircle(h);break;case Lr.CAP_SQUARE:d.createSquare(h)}},nr.prototype.getLineCurve=function(h,d){if(this._distance=d,d<0&&!this._bufParams.isSingleSided()||0===d)return null;var m=Math.abs(d),v=this.getSegGen(m);return h.length<=1?this.computePointCurve(h[0],v):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(h,d<0,v):this.computeLineBufferCurve(h,v),v.getCoordinates()},nr.prototype.getBufferParameters=function(){return this._bufParams},nr.prototype.simplifyTolerance=function(h){return h*this._bufParams.getSimplifyFactor()},nr.prototype.getRingCurve=function(h,d,m){if(this._distance=m,h.length<=2)return this.getLineCurve(h,m);if(0===m)return nr.copyCoordinates(h);var v=this.getSegGen(m);return this.computeRingBufferCurve(h,d,v),v.getCoordinates()},nr.prototype.computeOffsetCurve=function(h,d,m){var v=this.simplifyTolerance(this._distance);if(d){var b=Xs.simplify(h,-v),B=b.length-1;m.initSideSegments(b[B],b[B-1],un.LEFT),m.addFirstSegment();for(var z=B-2;z>=0;z--)m.addNextSegment(b[z],!0)}else{var q=Xs.simplify(h,v),pe=q.length-1;m.initSideSegments(q[0],q[1],un.LEFT),m.addFirstSegment();for(var Ue=2;Ue<=pe;Ue++)m.addNextSegment(q[Ue],!0)}m.addLastSegment()},nr.prototype.getSegGen=function(h){return new ht(this._precisionModel,this._bufParams,h)},nr.prototype.interfaces_=function(){return[]},nr.prototype.getClass=function(){return nr},nr.copyCoordinates=function(h){for(var d=new Array(h.length).fill(null),m=0;m<d.length;m++)d[m]=new $(h[m]);return d};var ta=function(){this._subgraphs=null,this._seg=new li,this._cga=new Mt,this._subgraphs=arguments[0]},K1={DepthSegment:{configurable:!0}};ta.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var h=arguments[0],d=new rn,m=this._subgraphs.iterator();m.hasNext();){var v=m.next(),b=v.getEnvelope();h.y<b.getMinY()||h.y>b.getMaxY()||this.findStabbedSegments(h,v.getDirectedEdges(),d)}return d}if(3===arguments.length)if(At(arguments[2],Qo)&&arguments[0]instanceof $&&arguments[1]instanceof Lt){for(var B=arguments[0],z=arguments[1],q=arguments[2],pe=z.getEdge().getCoordinates(),Ue=0;Ue<pe.length-1;Ue++)if(this._seg.p0=pe[Ue],this._seg.p1=pe[Ue+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<B.x||this._seg.isHorizontal()||B.y<this._seg.p0.y||B.y>this._seg.p1.y||Mt.computeOrientation(this._seg.p0,this._seg.p1,B)===Mt.RIGHT)){var gt=z.getDepth(un.LEFT);this._seg.p0.equals(pe[Ue])||(gt=z.getDepth(un.RIGHT));var pt=new r2(this._seg,gt);q.add(pt)}}else if(At(arguments[2],Qo)&&arguments[0]instanceof $&&At(arguments[1],Qo))for(var hn=arguments[0],Fn=arguments[2],Jn=arguments[1].iterator();Jn.hasNext();){var Hr=Jn.next();Hr.isForward()&&this.findStabbedSegments(hn,Hr,Fn)}},ta.prototype.getDepth=function(h){var d=this.findStabbedSegments(h);return 0===d.size()?0:Ks.min(d)._leftDepth},ta.prototype.interfaces_=function(){return[]},ta.prototype.getClass=function(){return ta},K1.DepthSegment.get=function(){return r2},Object.defineProperties(ta,K1);var r2=function(){this._upwardSeg=null,this._leftDepth=null;var d=arguments[1];this._upwardSeg=new li(arguments[0]),this._leftDepth=d};r2.prototype.compareTo=function(h){var d=h;if(this._upwardSeg.minX()>=d._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=d._upwardSeg.minX())return-1;var m=this._upwardSeg.orientationIndex(d._upwardSeg);return 0!==m||0!=(m=-1*d._upwardSeg.orientationIndex(this._upwardSeg))?m:this._upwardSeg.compareTo(d._upwardSeg)},r2.prototype.compareX=function(h,d){var m=h.p0.compareTo(d.p0);return 0!==m?m:h.p1.compareTo(d.p1)},r2.prototype.toString=function(){return this._upwardSeg.toString()},r2.prototype.interfaces_=function(){return[Z]},r2.prototype.getClass=function(){return r2};var Li=function(h,d,m){this.p0=h||null,this.p1=d||null,this.p2=m||null};Li.prototype.area=function(){return Li.area(this.p0,this.p1,this.p2)},Li.prototype.signedArea=function(){return Li.signedArea(this.p0,this.p1,this.p2)},Li.prototype.interpolateZ=function(h){if(null===h)throw new X("Supplied point is null.");return Li.interpolateZ(h,this.p0,this.p1,this.p2)},Li.prototype.longestSideLength=function(){return Li.longestSideLength(this.p0,this.p1,this.p2)},Li.prototype.isAcute=function(){return Li.isAcute(this.p0,this.p1,this.p2)},Li.prototype.circumcentre=function(){return Li.circumcentre(this.p0,this.p1,this.p2)},Li.prototype.area3D=function(){return Li.area3D(this.p0,this.p1,this.p2)},Li.prototype.centroid=function(){return Li.centroid(this.p0,this.p1,this.p2)},Li.prototype.inCentre=function(){return Li.inCentre(this.p0,this.p1,this.p2)},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.area=function(h,d,m){return Math.abs(((m.x-h.x)*(d.y-h.y)-(d.x-h.x)*(m.y-h.y))/2)},Li.signedArea=function(h,d,m){return((m.x-h.x)*(d.y-h.y)-(d.x-h.x)*(m.y-h.y))/2},Li.det=function(h,d,m,v){return h*v-d*m},Li.interpolateZ=function(h,d,m,v){var b=d.x,B=d.y,z=m.x-b,q=v.x-b,pe=m.y-B,Ue=v.y-B,gt=z*Ue-q*pe,pt=h.x-b,hn=h.y-B;return d.z+(Ue*pt-q*hn)/gt*(m.z-d.z)+(-pe*pt+z*hn)/gt*(v.z-d.z)},Li.longestSideLength=function(h,d,m){var v=h.distance(d),b=d.distance(m),B=m.distance(h),z=v;return b>z&&(z=b),B>z&&(z=B),z},Li.isAcute=function(h,d,m){return!!hr.isAcute(h,d,m)&&!!hr.isAcute(d,m,h)&&!!hr.isAcute(m,h,d)},Li.circumcentre=function(h,d,m){var v=m.x,b=m.y,B=h.x-v,z=h.y-b,q=d.x-v,pe=d.y-b,Ue=2*Li.det(B,z,q,pe),gt=Li.det(z,B*B+z*z,pe,q*q+pe*pe),pt=Li.det(B,B*B+z*z,q,q*q+pe*pe);return new $(v-gt/Ue,b+pt/Ue)},Li.perpendicularBisector=function(h,d){var m=d.x-h.x,v=d.y-h.y,b=new $n(h.x+m/2,h.y+v/2,1),B=new $n(h.x-v+m/2,h.y+m+v/2,1);return new $n(b,B)},Li.angleBisector=function(h,d,m){var v=d.distance(h),b=v/(v+d.distance(m));return new $(h.x+b*(m.x-h.x),h.y+b*(m.y-h.y))},Li.area3D=function(h,d,m){var v=d.x-h.x,b=d.y-h.y,B=d.z-h.z,z=m.x-h.x,q=m.y-h.y,pe=m.z-h.z,Ue=b*pe-B*q,gt=B*z-v*pe,pt=v*q-b*z;return Math.sqrt(Ue*Ue+gt*gt+pt*pt)/2},Li.centroid=function(h,d,m){return new $((h.x+d.x+m.x)/3,(h.y+d.y+m.y)/3)},Li.inCentre=function(h,d,m){var v=d.distance(m),b=h.distance(m),B=h.distance(d),z=v+b+B;return new $((v*h.x+b*d.x+B*m.x)/z,(v*h.y+b*d.y+B*m.y)/z)};var Gs=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new rn;var d=arguments[1],m=arguments[2];this._inputGeom=arguments[0],this._distance=d,this._curveBuilder=m};Gs.prototype.addPoint=function(h){if(this._distance<=0)return null;var d=h.getCoordinates(),m=this._curveBuilder.getLineCurve(d,this._distance);this.addCurve(m,oe.EXTERIOR,oe.INTERIOR)},Gs.prototype.addPolygon=function(h){var d=this._distance,m=un.LEFT;this._distance<0&&(d=-this._distance,m=un.RIGHT);var v=h.getExteriorRing(),b=Bi.removeRepeatedPoints(v.getCoordinates());if(this._distance<0&&this.isErodedCompletely(v,this._distance)||this._distance<=0&&b.length<3)return null;this.addPolygonRing(b,d,m,oe.EXTERIOR,oe.INTERIOR);for(var B=0;B<h.getNumInteriorRing();B++){var z=h.getInteriorRingN(B),q=Bi.removeRepeatedPoints(z.getCoordinates());this._distance>0&&this.isErodedCompletely(z,-this._distance)||this.addPolygonRing(q,d,un.opposite(m),oe.INTERIOR,oe.EXTERIOR)}},Gs.prototype.isTriangleErodedCompletely=function(h,d){var m=new Li(h[0],h[1],h[2]),v=m.inCentre();return Mt.distancePointLine(v,m.p0,m.p1)<Math.abs(d)},Gs.prototype.addLineString=function(h){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var d=Bi.removeRepeatedPoints(h.getCoordinates()),m=this._curveBuilder.getLineCurve(d,this._distance);this.addCurve(m,oe.EXTERIOR,oe.INTERIOR)},Gs.prototype.addCurve=function(h,d,m){if(null===h||h.length<2)return null;var v=new Ko(h,new fs(0,oe.BOUNDARY,d,m));this._curveList.add(v)},Gs.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Gs.prototype.addPolygonRing=function(h,d,m,v,b){if(0===d&&h.length<z2.MINIMUM_VALID_SIZE)return null;var B=v,z=b;h.length>=z2.MINIMUM_VALID_SIZE&&Mt.isCCW(h)&&(B=b,z=v,m=un.opposite(m));var q=this._curveBuilder.getRingCurve(h,m,d);this.addCurve(q,B,z)},Gs.prototype.add=function(h){if(h.isEmpty())return null;h instanceof Wo?this.addPolygon(h):h instanceof ho?this.addLineString(h):h instanceof uc?this.addPoint(h):(h instanceof ql||h instanceof T3||h instanceof Ic||h instanceof _1)&&this.addCollection(h)},Gs.prototype.isErodedCompletely=function(h,d){var m=h.getCoordinates();if(m.length<4)return d<0;if(4===m.length)return this.isTriangleErodedCompletely(m,d);var v=h.getEnvelopeInternal(),b=Math.min(v.getHeight(),v.getWidth());return d<0&&2*Math.abs(d)>b},Gs.prototype.addCollection=function(h){for(var d=0;d<h.getNumGeometries();d++){var m=h.getGeometryN(d);this.add(m)}},Gs.prototype.interfaces_=function(){return[]},Gs.prototype.getClass=function(){return Gs};var sn=function(){};sn.prototype.locate=function(h){},sn.prototype.interfaces_=function(){return[]},sn.prototype.getClass=function(){return sn};var Ri=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var h=arguments[0];this._parent=h,this._atStart=!0,this._index=0,this._max=h.getNumGeometries()};Ri.prototype.next=function(){if(this._atStart)return this._atStart=!1,Ri.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Ne;var h=this._parent.getGeometryN(this._index++);return h instanceof _1?(this._subcollectionIterator=new Ri(h),this._subcollectionIterator.next()):h},Ri.prototype.remove=function(){throw new Error(this.getClass().getName())},Ri.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Ri.prototype.interfaces_=function(){return[j1]},Ri.prototype.getClass=function(){return Ri},Ri.isAtomic=function(h){return!(h instanceof _1)};var gr=function(){this._geom=null,this._geom=arguments[0]};gr.prototype.locate=function(h){return gr.locate(h,this._geom)},gr.prototype.interfaces_=function(){return[sn]},gr.prototype.getClass=function(){return gr},gr.isPointInRing=function(h,d){return!!d.getEnvelopeInternal().intersects(h)&&Mt.isPointInRing(h,d.getCoordinates())},gr.containsPointInPolygon=function(h,d){if(d.isEmpty())return!1;var m=d.getExteriorRing();if(!gr.isPointInRing(h,m))return!1;for(var v=0;v<d.getNumInteriorRing();v++){var b=d.getInteriorRingN(v);if(gr.isPointInRing(h,b))return!1}return!0},gr.containsPoint=function(h,d){if(d instanceof Wo)return gr.containsPointInPolygon(h,d);if(d instanceof _1)for(var m=new Ri(d);m.hasNext();){var v=m.next();if(v!==d&&gr.containsPoint(h,v))return!0}return!1},gr.locate=function(h,d){return d.isEmpty()?oe.EXTERIOR:gr.containsPoint(h,d)?oe.INTERIOR:oe.EXTERIOR};var Ds=function(){this._edgeMap=new Ct,this._edgeList=null,this._ptInAreaLocation=[oe.NONE,oe.NONE]};Ds.prototype.getNextCW=function(h){this.getEdges();var d=this._edgeList.indexOf(h),m=d-1;return 0===d&&(m=this._edgeList.size()-1),this._edgeList.get(m)},Ds.prototype.propagateSideLabels=function(h){for(var d=oe.NONE,m=this.iterator();m.hasNext();){var v=m.next().getLabel();v.isArea(h)&&v.getLocation(h,un.LEFT)!==oe.NONE&&(d=v.getLocation(h,un.LEFT))}if(d===oe.NONE)return null;for(var b=d,B=this.iterator();B.hasNext();){var z=B.next(),q=z.getLabel();if(q.getLocation(h,un.ON)===oe.NONE&&q.setLocation(h,un.ON,b),q.isArea(h)){var pe=q.getLocation(h,un.LEFT),Ue=q.getLocation(h,un.RIGHT);if(Ue!==oe.NONE){if(Ue!==b)throw new n1("side location conflict",z.getCoordinate());pe===oe.NONE&&J.shouldNeverReachHere("found single null side (at "+z.getCoordinate()+")"),b=pe}else J.isTrue(q.getLocation(h,un.LEFT)===oe.NONE,"found single null side"),q.setLocation(h,un.RIGHT,b),q.setLocation(h,un.LEFT,b)}}},Ds.prototype.getCoordinate=function(){var h=this.iterator();return h.hasNext()?h.next().getCoordinate():null},Ds.prototype.print=function(h){$t.out.println("EdgeEndStar:   "+this.getCoordinate());for(var d=this.iterator();d.hasNext();)d.next().print(h)},Ds.prototype.isAreaLabelsConsistent=function(h){return this.computeEdgeEndLabels(h.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Ds.prototype.checkAreaLabelsConsistent=function(h){var d=this.getEdges();if(d.size()<=0)return!0;var m=d.size()-1,v=d.get(m).getLabel().getLocation(h,un.LEFT);J.isTrue(v!==oe.NONE,"Found unlabelled area edge");for(var b=v,B=this.iterator();B.hasNext();){var z=B.next().getLabel();J.isTrue(z.isArea(h),"Found non-area edge");var q=z.getLocation(h,un.LEFT),pe=z.getLocation(h,un.RIGHT);if(q===pe||pe!==b)return!1;b=q}return!0},Ds.prototype.findIndex=function(h){this.iterator();for(var d=0;d<this._edgeList.size();d++)if(this._edgeList.get(d)===h)return d;return-1},Ds.prototype.iterator=function(){return this.getEdges().iterator()},Ds.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new rn(this._edgeMap.values())),this._edgeList},Ds.prototype.getLocation=function(h,d,m){return this._ptInAreaLocation[h]===oe.NONE&&(this._ptInAreaLocation[h]=gr.locate(d,m[h].getGeometry())),this._ptInAreaLocation[h]},Ds.prototype.toString=function(){var h=new Ce;h.append("EdgeEndStar:   "+this.getCoordinate()),h.append("\n");for(var d=this.iterator();d.hasNext();){var m=d.next();h.append(m),h.append("\n")}return h.toString()},Ds.prototype.computeEdgeEndLabels=function(h){for(var d=this.iterator();d.hasNext();)d.next().computeLabel(h)},Ds.prototype.computeLabelling=function(h){this.computeEdgeEndLabels(h[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var d=[!1,!1],m=this.iterator();m.hasNext();)for(var v=m.next().getLabel(),b=0;b<2;b++)v.isLine(b)&&v.getLocation(b)===oe.BOUNDARY&&(d[b]=!0);for(var B=this.iterator();B.hasNext();)for(var z=B.next(),q=z.getLabel(),pe=0;pe<2;pe++)if(q.isAnyNull(pe)){var Ue=oe.NONE;if(d[pe])Ue=oe.EXTERIOR;else{var gt=z.getCoordinate();Ue=this.getLocation(pe,gt,h)}q.setAllLocationsIfNull(pe,Ue)}},Ds.prototype.getDegree=function(){return this._edgeMap.size()},Ds.prototype.insertEdgeEnd=function(h,d){this._edgeMap.put(h,d),this._edgeList=null},Ds.prototype.interfaces_=function(){return[]},Ds.prototype.getClass=function(){return Ds};var O2=function(h){function d(){h.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var m=null,v=null,b=this._SCANNING_FOR_INCOMING,B=0;B<this._resultAreaEdgeList.size();B++){var z=this._resultAreaEdgeList.get(B),q=z.getSym();if(z.getLabel().isArea())switch(null===m&&z.isInResult()&&(m=z),b){case this._SCANNING_FOR_INCOMING:if(!q.isInResult())continue;v=q,b=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!z.isInResult())continue;v.setNext(z),b=this._SCANNING_FOR_INCOMING}}if(b===this._LINKING_TO_OUTGOING){if(null===m)throw new n1("no outgoing dirEdge found",this.getCoordinate());J.isTrue(m.isInResult(),"unable to link last incoming dirEdge"),v.setNext(m)}},d.prototype.insert=function(m){this.insertEdgeEnd(m,m)},d.prototype.getRightmostEdge=function(){var m=this.getEdges(),v=m.size();if(v<1)return null;var b=m.get(0);if(1===v)return b;var B=m.get(v-1),z=b.getQuadrant(),q=B.getQuadrant();return Ls.isNorthern(z)&&Ls.isNorthern(q)?b:Ls.isNorthern(z)||Ls.isNorthern(q)?0!==b.getDy()?b:0!==B.getDy()?B:(J.shouldNeverReachHere("found two horizontal edges incident on node"),null):B},d.prototype.print=function(m){$t.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var v=this.iterator();v.hasNext();){var b=v.next();m.print("out "),b.print(m),m.println(),m.print("in "),b.getSym().print(m),m.println()}},d.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new rn;for(var m=this.iterator();m.hasNext();){var v=m.next();(v.isInResult()||v.getSym().isInResult())&&this._resultAreaEdgeList.add(v)}return this._resultAreaEdgeList},d.prototype.updateLabelling=function(m){for(var v=this.iterator();v.hasNext();){var b=v.next().getLabel();b.setAllLocationsIfNull(0,m.getLocation(0)),b.setAllLocationsIfNull(1,m.getLocation(1))}},d.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var m=null,v=null,b=this._edgeList.size()-1;b>=0;b--){var B=this._edgeList.get(b),z=B.getSym();null===v&&(v=z),null!==m&&z.setNext(m),m=B}v.setNext(m)},d.prototype.computeDepths=function(){if(1===arguments.length){var m=arguments[0],v=this.findIndex(m),b=m.getDepth(un.LEFT),B=m.getDepth(un.RIGHT),z=this.computeDepths(v+1,this._edgeList.size(),b);if(this.computeDepths(0,v,z)!==B)throw new n1("depth mismatch at "+m.getCoordinate())}else if(3===arguments.length){for(var pe=arguments[1],Ue=arguments[2],gt=arguments[0];gt<pe;gt++){var pt=this._edgeList.get(gt);pt.setEdgeDepths(un.RIGHT,Ue),Ue=pt.getDepth(un.LEFT)}return Ue}},d.prototype.mergeSymLabels=function(){for(var m=this.iterator();m.hasNext();){var v=m.next();v.getLabel().merge(v.getSym().getLabel())}},d.prototype.linkMinimalDirectedEdges=function(m){for(var v=null,b=null,B=this._SCANNING_FOR_INCOMING,z=this._resultAreaEdgeList.size()-1;z>=0;z--){var q=this._resultAreaEdgeList.get(z),pe=q.getSym();switch(null===v&&q.getEdgeRing()===m&&(v=q),B){case this._SCANNING_FOR_INCOMING:if(pe.getEdgeRing()!==m)continue;b=pe,B=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(q.getEdgeRing()!==m)continue;b.setNextMin(q),B=this._SCANNING_FOR_INCOMING}}B===this._LINKING_TO_OUTGOING&&(J.isTrue(null!==v,"found null for first outgoing dirEdge"),J.isTrue(v.getEdgeRing()===m,"unable to link last incoming dirEdge"),b.setNextMin(v))},d.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var m=0,v=this.iterator();v.hasNext();)v.next().isInResult()&&m++;return m}if(1===arguments.length){for(var b=arguments[0],B=0,z=this.iterator();z.hasNext();)z.next().getEdgeRing()===b&&B++;return B}},d.prototype.getLabel=function(){return this._label},d.prototype.findCoveredLineEdges=function(){for(var m=oe.NONE,v=this.iterator();v.hasNext();){var b=v.next(),B=b.getSym();if(!b.isLineEdge()){if(b.isInResult()){m=oe.INTERIOR;break}if(B.isInResult()){m=oe.EXTERIOR;break}}}if(m===oe.NONE)return null;for(var z=m,q=this.iterator();q.hasNext();){var pe=q.next(),Ue=pe.getSym();pe.isLineEdge()?pe.getEdge().setCovered(z===oe.INTERIOR):(pe.isInResult()&&(z=oe.EXTERIOR),Ue.isInResult()&&(z=oe.INTERIOR))}},d.prototype.computeLabelling=function(m){h.prototype.computeLabelling.call(this,m),this._label=new fs(oe.NONE);for(var v=this.iterator();v.hasNext();)for(var b=v.next().getEdge().getLabel(),B=0;B<2;B++){var z=b.getLocation(B);z!==oe.INTERIOR&&z!==oe.BOUNDARY||this._label.setLocation(B,oe.INTERIOR)}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Ds),ao=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.createNode=function(m){return new fc(m,new O2)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(su),Bc=function h(){this._pts=null,this._orientation=null;var d=arguments[0];this._pts=d,this._orientation=h.orientation(d)};Bc.prototype.compareTo=function(h){return Bc.compareOriented(this._pts,this._orientation,h._pts,h._orientation)},Bc.prototype.interfaces_=function(){return[Z]},Bc.prototype.getClass=function(){return Bc},Bc.orientation=function(h){return 1===Bi.increasingDirection(h)},Bc.compareOriented=function(h,d,m,v){for(var b=d?1:-1,B=v?1:-1,z=d?h.length:-1,q=v?m.length:-1,pe=d?0:h.length-1,Ue=v?0:m.length-1;;){var gt=h[pe].compareTo(m[Ue]);if(0!==gt)return gt;var pt=(pe+=b)===z,hn=(Ue+=B)===q;if(pt&&!hn)return-1;if(!pt&&hn)return 1;if(pt&&hn)return 0}};var fr=function(){this._edges=new rn,this._ocaMap=new Ct};fr.prototype.print=function(h){h.print("MULTILINESTRING ( ");for(var d=0;d<this._edges.size();d++){var m=this._edges.get(d);d>0&&h.print(","),h.print("(");for(var v=m.getCoordinates(),b=0;b<v.length;b++)b>0&&h.print(","),h.print(v[b].x+" "+v[b].y);h.println(")")}h.print(")  ")},fr.prototype.addAll=function(h){for(var d=h.iterator();d.hasNext();)this.add(d.next())},fr.prototype.findEdgeIndex=function(h){for(var d=0;d<this._edges.size();d++)if(this._edges.get(d).equals(h))return d;return-1},fr.prototype.iterator=function(){return this._edges.iterator()},fr.prototype.getEdges=function(){return this._edges},fr.prototype.get=function(h){return this._edges.get(h)},fr.prototype.findEqualEdge=function(h){var d=new Bc(h.getCoordinates());return this._ocaMap.get(d)},fr.prototype.add=function(h){this._edges.add(h);var d=new Bc(h.getCoordinates());this._ocaMap.put(d,h)},fr.prototype.interfaces_=function(){return[]},fr.prototype.getClass=function(){return fr};var ks=function(){};ks.prototype.processIntersections=function(h,d,m,v){},ks.prototype.isDone=function(){},ks.prototype.interfaces_=function(){return[]},ks.prototype.getClass=function(){return ks};var Pa=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};Pa.prototype.isTrivialIntersection=function(h,d,m,v){if(h===m&&1===this._li.getIntersectionNum()){if(Pa.isAdjacentSegments(d,v))return!0;if(h.isClosed()){var b=h.size()-1;if(0===d&&v===b||0===v&&d===b)return!0}}return!1},Pa.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Pa.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Pa.prototype.getLineIntersector=function(){return this._li},Pa.prototype.hasProperIntersection=function(){return this._hasProper},Pa.prototype.processIntersections=function(h,d,m,v){if(h===m&&d===v)return null;this.numTests++;var b=h.getCoordinates()[d],B=h.getCoordinates()[d+1],z=m.getCoordinates()[v],q=m.getCoordinates()[v+1];this._li.computeIntersection(b,B,z,q),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(h,d,m,v)||(this._hasIntersection=!0,h.addIntersections(this._li,d,0),m.addIntersections(this._li,v,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Pa.prototype.hasIntersection=function(){return this._hasIntersection},Pa.prototype.isDone=function(){return!1},Pa.prototype.hasInteriorIntersection=function(){return this._hasInterior},Pa.prototype.interfaces_=function(){return[ks]},Pa.prototype.getClass=function(){return Pa},Pa.isAdjacentSegments=function(h,d){return 1===Math.abs(h-d)};var ri=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var d=arguments[1],m=arguments[2];this.coord=new $(arguments[0]),this.segmentIndex=d,this.dist=m};ri.prototype.getSegmentIndex=function(){return this.segmentIndex},ri.prototype.getCoordinate=function(){return this.coord},ri.prototype.print=function(h){h.print(this.coord),h.print(" seg # = "+this.segmentIndex),h.println(" dist = "+this.dist)},ri.prototype.compareTo=function(h){return this.compare(h.segmentIndex,h.dist)},ri.prototype.isEndPoint=function(h){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===h},ri.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},ri.prototype.getDistance=function(){return this.dist},ri.prototype.compare=function(h,d){return this.segmentIndex<h?-1:this.segmentIndex>h?1:this.dist<d?-1:this.dist>d?1:0},ri.prototype.interfaces_=function(){return[Z]},ri.prototype.getClass=function(){return ri};var pc=function(){this._nodeMap=new Ct,this.edge=null,this.edge=arguments[0]};pc.prototype.print=function(h){h.println("Intersections:");for(var d=this.iterator();d.hasNext();)d.next().print(h)},pc.prototype.iterator=function(){return this._nodeMap.values().iterator()},pc.prototype.addSplitEdges=function(h){this.addEndpoints();for(var d=this.iterator(),m=d.next();d.hasNext();){var v=d.next(),b=this.createSplitEdge(m,v);h.add(b),m=v}},pc.prototype.addEndpoints=function(){var h=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[h],h,0)},pc.prototype.createSplitEdge=function(h,d){var m=d.segmentIndex-h.segmentIndex+2,b=d.dist>0||!d.coord.equals2D(this.edge.pts[d.segmentIndex]);b||m--;var B=new Array(m).fill(null),z=0;B[z++]=new $(h.coord);for(var q=h.segmentIndex+1;q<=d.segmentIndex;q++)B[z++]=this.edge.pts[q];return b&&(B[z]=d.coord),new B3(B,new fs(this.edge._label))},pc.prototype.add=function(h,d,m){var v=new ri(h,d,m),b=this._nodeMap.get(v);return null!==b?b:(this._nodeMap.put(v,v),v)},pc.prototype.isIntersection=function(h){for(var d=this.iterator();d.hasNext();)if(d.next().coord.equals(h))return!0;return!1},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc};var Ha=function(){};Ha.prototype.getChainStartIndices=function(h){var d=0,m=new rn;m.add(new Qe(d));do{var v=this.findChainEnd(h,d);m.add(new Qe(v)),d=v}while(d<h.length-1);return Ha.toIntArray(m)},Ha.prototype.findChainEnd=function(h,d){for(var m=Ls.quadrant(h[d],h[d+1]),v=d+1;v<h.length&&Ls.quadrant(h[v-1],h[v])===m;)v++;return v-1},Ha.prototype.interfaces_=function(){return[]},Ha.prototype.getClass=function(){return Ha},Ha.toIntArray=function(h){for(var d=new Array(h.size()).fill(null),m=0;m<d.length;m++)d[m]=h.get(m).intValue();return d};var gc=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new on,this.env2=new on;var h=arguments[0];this.e=h,this.pts=h.getCoordinates();var d=new Ha;this.startIndex=d.getChainStartIndices(this.pts)};gc.prototype.getCoordinates=function(){return this.pts},gc.prototype.getMaxX=function(h){var d=this.pts[this.startIndex[h]].x,m=this.pts[this.startIndex[h+1]].x;return d>m?d:m},gc.prototype.getMinX=function(h){var d=this.pts[this.startIndex[h]].x,m=this.pts[this.startIndex[h+1]].x;return d<m?d:m},gc.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var h=arguments[0],d=arguments[1],m=arguments[2];this.computeIntersectsForChain(this.startIndex[h],this.startIndex[h+1],d,d.startIndex[m],d.startIndex[m+1],arguments[3])}else if(6===arguments.length){var b=arguments[0],B=arguments[1],z=arguments[2],q=arguments[3],pe=arguments[4],Ue=arguments[5],gt=this.pts[b],pt=this.pts[B],hn=z.pts[q],Mn=z.pts[pe];if(B-b==1&&pe-q==1)return Ue.addIntersections(this.e,b,z.e,q),null;if(this.env1.init(gt,pt),this.env2.init(hn,Mn),!this.env1.intersects(this.env2))return null;var Fn=Math.trunc((b+B)/2),Jn=Math.trunc((q+pe)/2);b<Fn&&(q<Jn&&this.computeIntersectsForChain(b,Fn,z,q,Jn,Ue),Jn<pe&&this.computeIntersectsForChain(b,Fn,z,Jn,pe,Ue)),Fn<B&&(q<Jn&&this.computeIntersectsForChain(Fn,B,z,q,Jn,Ue),Jn<pe&&this.computeIntersectsForChain(Fn,B,z,Jn,pe,Ue))}},gc.prototype.getStartIndexes=function(){return this.startIndex},gc.prototype.computeIntersects=function(h,d){for(var m=0;m<this.startIndex.length-1;m++)for(var v=0;v<h.startIndex.length-1;v++)this.computeIntersectsForChain(m,h,v,d)},gc.prototype.interfaces_=function(){return[]},gc.prototype.getClass=function(){return gc};var Pi=function h(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var d=0;d<2;d++)for(var m=0;m<3;m++)this._depth[d][m]=h.NULL_VALUE},x1={NULL_VALUE:{configurable:!0}};Pi.prototype.getDepth=function(h,d){return this._depth[h][d]},Pi.prototype.setDepth=function(h,d,m){this._depth[h][d]=m},Pi.prototype.isNull=function(){if(0===arguments.length){for(var h=0;h<2;h++)for(var d=0;d<3;d++)if(this._depth[h][d]!==Pi.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===Pi.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===Pi.NULL_VALUE:void 0},Pi.prototype.normalize=function(){for(var h=0;h<2;h++)if(!this.isNull(h)){var d=this._depth[h][1];this._depth[h][2]<d&&(d=this._depth[h][2]),d<0&&(d=0);for(var m=1;m<3;m++){var v=0;this._depth[h][m]>d&&(v=1),this._depth[h][m]=v}}},Pi.prototype.getDelta=function(h){return this._depth[h][un.RIGHT]-this._depth[h][un.LEFT]},Pi.prototype.getLocation=function(h,d){return this._depth[h][d]<=0?oe.EXTERIOR:oe.INTERIOR},Pi.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Pi.prototype.add=function(){if(1===arguments.length)for(var h=arguments[0],d=0;d<2;d++)for(var m=1;m<3;m++){var v=h.getLocation(d,m);v!==oe.EXTERIOR&&v!==oe.INTERIOR||(this.isNull(d,m)?this._depth[d][m]=Pi.depthAtLocation(v):this._depth[d][m]+=Pi.depthAtLocation(v))}else 3===arguments.length&&arguments[2]===oe.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.depthAtLocation=function(h){return h===oe.EXTERIOR?0:h===oe.INTERIOR?1:Pi.NULL_VALUE},x1.NULL_VALUE.get=function(){return-1},Object.defineProperties(Pi,x1);var B3=function(h){function d(){if(h.call(this),this.pts=null,this._env=null,this.eiList=new pc(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Pi,this._depthDelta=0,1===arguments.length)d.call(this,arguments[0],null);else if(2===arguments.length){var b=arguments[1];this.pts=arguments[0],this._label=b}}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.getDepth=function(){return this._depth},d.prototype.getCollapsedEdge=function(){var m=new Array(2).fill(null);return m[0]=this.pts[0],m[1]=this.pts[1],new d(m,fs.toLineLabel(this._label))},d.prototype.isIsolated=function(){return this._isIsolated},d.prototype.getCoordinates=function(){return this.pts},d.prototype.setIsolated=function(m){this._isIsolated=m},d.prototype.setName=function(m){this._name=m},d.prototype.equals=function(m){if(!(m instanceof d))return!1;var v=m;if(this.pts.length!==v.pts.length)return!1;for(var b=!0,B=!0,z=this.pts.length,q=0;q<this.pts.length;q++)if(this.pts[q].equals2D(v.pts[q])||(b=!1),this.pts[q].equals2D(v.pts[--z])||(B=!1),!b&&!B)return!1;return!0},d.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},d.prototype.print=function(m){m.print("edge "+this._name+": "),m.print("LINESTRING (");for(var v=0;v<this.pts.length;v++)v>0&&m.print(","),m.print(this.pts[v].x+" "+this.pts[v].y);m.print(")  "+this._label+" "+this._depthDelta)},d.prototype.computeIM=function(m){d.updateIM(this._label,m)},d.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},d.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},d.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},d.prototype.getDepthDelta=function(){return this._depthDelta},d.prototype.getNumPoints=function(){return this.pts.length},d.prototype.printReverse=function(m){m.print("edge "+this._name+": ");for(var v=this.pts.length-1;v>=0;v--)m.print(this.pts[v]+" ");m.println("")},d.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new gc(this)),this._mce},d.prototype.getEnvelope=function(){if(null===this._env){this._env=new on;for(var m=0;m<this.pts.length;m++)this._env.expandToInclude(this.pts[m])}return this._env},d.prototype.addIntersection=function(m,v,b,B){var z=new $(m.getIntersection(B)),q=v,pe=m.getEdgeDistance(b,B),Ue=q+1;Ue<this.pts.length&&z.equals2D(this.pts[Ue])&&(q=Ue,pe=0),this.eiList.add(z,q,pe)},d.prototype.toString=function(){var m=new Ce;m.append("edge "+this._name+": "),m.append("LINESTRING (");for(var v=0;v<this.pts.length;v++)v>0&&m.append(","),m.append(this.pts[v].x+" "+this.pts[v].y);return m.append(")  "+this._label+" "+this._depthDelta),m.toString()},d.prototype.isPointwiseEqual=function(m){if(this.pts.length!==m.pts.length)return!1;for(var v=0;v<this.pts.length;v++)if(!this.pts[v].equals2D(m.pts[v]))return!1;return!0},d.prototype.setDepthDelta=function(m){this._depthDelta=m},d.prototype.getEdgeIntersectionList=function(){return this.eiList},d.prototype.addIntersections=function(m,v,b){for(var B=0;B<m.getIntersectionNum();B++)this.addIntersection(m,v,b,B)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.updateIM=function(){if(2!==arguments.length)return h.prototype.updateIM.apply(this,arguments);var m=arguments[0],v=arguments[1];v.setAtLeastIfValid(m.getLocation(0,un.ON),m.getLocation(1,un.ON),1),m.isArea()&&(v.setAtLeastIfValid(m.getLocation(0,un.LEFT),m.getLocation(1,un.LEFT),2),v.setAtLeastIfValid(m.getLocation(0,un.RIGHT),m.getLocation(1,un.RIGHT),2))},d}(e2),Xo=function(h){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new fr,this._bufParams=h||null};Xo.prototype.setWorkingPrecisionModel=function(h){this._workingPrecisionModel=h},Xo.prototype.insertUniqueEdge=function(h){var d=this._edgeList.findEqualEdge(h);if(null!==d){var m=d.getLabel(),v=h.getLabel();d.isPointwiseEqual(h)||(v=new fs(h.getLabel())).flip(),m.merge(v);var b=Xo.depthDelta(v),B=d.getDepthDelta()+b;d.setDepthDelta(B)}else this._edgeList.add(h),h.setDepthDelta(Xo.depthDelta(h.getLabel()))},Xo.prototype.buildSubgraphs=function(h,d){for(var m=new rn,v=h.iterator();v.hasNext();){var b=v.next(),B=b.getRightmostCoordinate(),z=new ta(m).getDepth(B);b.computeDepth(z),b.findResultEdges(),m.add(b),d.add(b.getDirectedEdges(),b.getNodes())}},Xo.prototype.createSubgraphs=function(h){for(var d=new rn,m=h.getNodes().iterator();m.hasNext();){var v=m.next();if(!v.isVisited()){var b=new ea;b.create(v),d.add(b)}}return Ks.sort(d,Ks.reverseOrder()),d},Xo.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Xo.prototype.getNoder=function(h){if(null!==this._workingNoder)return this._workingNoder;var d=new ml,m=new mt;return m.setPrecisionModel(h),d.setSegmentIntersector(new Pa(m)),d},Xo.prototype.buffer=function(h,d){var m=this._workingPrecisionModel;null===m&&(m=h.getPrecisionModel()),this._geomFact=h.getFactory();var v=new nr(m,this._bufParams),b=new Gs(h,d,v).getCurves();if(b.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(b,m),this._graph=new wn(new ao),this._graph.addEdges(this._edgeList.getEdges());var B=this.createSubgraphs(this._graph),z=new r1(this._geomFact);this.buildSubgraphs(B,z);var q=z.getPolygons();return q.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(q)},Xo.prototype.computeNodedEdges=function(h,d){var m=this.getNoder(d);m.computeNodes(h);for(var v=m.getNodedSubstrings().iterator();v.hasNext();){var b=v.next(),B=b.getCoordinates();if(2!==B.length||!B[0].equals2D(B[1])){var z=b.getData(),q=new B3(b.getCoordinates(),new fs(z));this.insertUniqueEdge(q)}}},Xo.prototype.setNoder=function(h){this._workingNoder=h},Xo.prototype.interfaces_=function(){return[]},Xo.prototype.getClass=function(){return Xo},Xo.depthDelta=function(h){var d=h.getLocation(0,un.LEFT),m=h.getLocation(0,un.RIGHT);return d===oe.INTERIOR&&m===oe.EXTERIOR?1:d===oe.EXTERIOR&&m===oe.INTERIOR?-1:0},Xo.convertSegStrings=function(h){for(var d=new qi,m=new rn;h.hasNext();){var v=h.next(),b=d.createLineString(v.getCoordinates());m.add(b)}return d.buildGeometry(m)};var za=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var d=arguments[1];this._noder=arguments[0],this._scaleFactor=d,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var v=arguments[1],b=arguments[2],B=arguments[3];this._noder=arguments[0],this._scaleFactor=v,this._offsetX=b,this._offsetY=B,this._isScaled=!this.isIntegerPrecision()}};za.prototype.rescale=function(){if(At(arguments[0],ys))for(var h=arguments[0].iterator();h.hasNext();){var d=h.next();this.rescale(d.getCoordinates())}else if(arguments[0]instanceof Array){for(var m=arguments[0],v=0;v<m.length;v++)m[v].x=m[v].x/this._scaleFactor+this._offsetX,m[v].y=m[v].y/this._scaleFactor+this._offsetY;2===m.length&&m[0].equals2D(m[1])&&$t.out.println(m)}},za.prototype.scale=function(){if(At(arguments[0],ys)){for(var h=arguments[0],d=new rn,m=h.iterator();m.hasNext();){var v=m.next();d.add(new Ko(this.scale(v.getCoordinates()),v.getData()))}return d}if(arguments[0]instanceof Array){for(var b=arguments[0],B=new Array(b.length).fill(null),z=0;z<b.length;z++)B[z]=new $(Math.round((b[z].x-this._offsetX)*this._scaleFactor),Math.round((b[z].y-this._offsetY)*this._scaleFactor),b[z].z);return Bi.removeRepeatedPoints(B)}},za.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},za.prototype.getNodedSubstrings=function(){var h=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(h),h},za.prototype.computeNodes=function(h){var d=h;this._isScaled&&(d=this.scale(h)),this._noder.computeNodes(d)},za.prototype.interfaces_=function(){return[Yl]},za.prototype.getClass=function(){return za};var Oa=function(){this._li=new mt,this._segStrings=null,this._segStrings=arguments[0]},Wf={fact:{configurable:!0}};Oa.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var h=this._segStrings.iterator();h.hasNext();){var d=h.next().getCoordinates();this.checkEndPtVertexIntersections(d[0],this._segStrings),this.checkEndPtVertexIntersections(d[d.length-1],this._segStrings)}else if(2===arguments.length)for(var m=arguments[0],v=arguments[1].iterator();v.hasNext();)for(var b=v.next().getCoordinates(),B=1;B<b.length-1;B++)if(b[B].equals(m))throw new le("found endpt/interior pt intersection at index "+B+" :pt "+m)},Oa.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var h=this._segStrings.iterator();h.hasNext();)for(var d=h.next(),m=this._segStrings.iterator();m.hasNext();){var v=m.next();this.checkInteriorIntersections(d,v)}else if(2===arguments.length)for(var b=arguments[0],B=arguments[1],z=b.getCoordinates(),q=B.getCoordinates(),pe=0;pe<z.length-1;pe++)for(var Ue=0;Ue<q.length-1;Ue++)this.checkInteriorIntersections(b,pe,B,Ue);else if(4===arguments.length){var gt=arguments[0],pt=arguments[1],hn=arguments[2],Mn=arguments[3];if(gt===hn&&pt===Mn)return null;var Fn=gt.getCoordinates()[pt],Jn=gt.getCoordinates()[pt+1],Hr=hn.getCoordinates()[Mn],Do=hn.getCoordinates()[Mn+1];if(this._li.computeIntersection(Fn,Jn,Hr,Do),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Fn,Jn)||this.hasInteriorIntersection(this._li,Hr,Do)))throw new le("found non-noded intersection at "+Fn+"-"+Jn+" and "+Hr+"-"+Do)}},Oa.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Oa.prototype.checkCollapses=function(){if(0===arguments.length)for(var h=this._segStrings.iterator();h.hasNext();){var d=h.next();this.checkCollapses(d)}else if(1===arguments.length)for(var m=arguments[0].getCoordinates(),v=0;v<m.length-2;v++)this.checkCollapse(m[v],m[v+1],m[v+2])},Oa.prototype.hasInteriorIntersection=function(h,d,m){for(var v=0;v<h.getIntersectionNum();v++){var b=h.getIntersection(v);if(!b.equals(d)&&!b.equals(m))return!0}return!1},Oa.prototype.checkCollapse=function(h,d,m){if(h.equals(m))throw new le("found non-noded collapse at "+Oa.fact.createLineString([h,d,m]))},Oa.prototype.interfaces_=function(){return[]},Oa.prototype.getClass=function(){return Oa},Wf.fact.get=function(){return new qi},Object.defineProperties(Oa,Wf);var cr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var h=arguments[0],d=arguments[1],m=arguments[2];if(this._originalPt=h,this._pt=h,this._scaleFactor=d,this._li=m,d<=0)throw new X("Scale factor must be non-zero");1!==d&&(this._pt=new $(this.scale(h.x),this.scale(h.y)),this._p0Scaled=new $,this._p1Scaled=new $),this.initCorners(this._pt)},y2={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};cr.prototype.intersectsScaled=function(h,d){var m=Math.min(h.x,d.x),v=Math.max(h.x,d.x),b=Math.min(h.y,d.y),B=Math.max(h.y,d.y),z=this._maxx<m||this._minx>v||this._maxy<b||this._miny>B;if(z)return!1;var q=this.intersectsToleranceSquare(h,d);return J.isTrue(!(z&&q),"Found bad envelope test"),q},cr.prototype.initCorners=function(h){this._minx=h.x-.5,this._maxx=h.x+.5,this._miny=h.y-.5,this._maxy=h.y+.5,this._corner[0]=new $(this._maxx,this._maxy),this._corner[1]=new $(this._minx,this._maxy),this._corner[2]=new $(this._minx,this._miny),this._corner[3]=new $(this._maxx,this._miny)},cr.prototype.intersects=function(h,d){return 1===this._scaleFactor?this.intersectsScaled(h,d):(this.copyScaled(h,this._p0Scaled),this.copyScaled(d,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},cr.prototype.scale=function(h){return Math.round(h*this._scaleFactor)},cr.prototype.getCoordinate=function(){return this._originalPt},cr.prototype.copyScaled=function(h,d){d.x=this.scale(h.x),d.y=this.scale(h.y)},cr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var h=cr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new on(this._originalPt.x-h,this._originalPt.x+h,this._originalPt.y-h,this._originalPt.y+h)}return this._safeEnv},cr.prototype.intersectsPixelClosure=function(h,d){return this._li.computeIntersection(h,d,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(h,d,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(h,d,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(h,d,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},cr.prototype.intersectsToleranceSquare=function(h,d){var m=!1,v=!1;return this._li.computeIntersection(h,d,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(h,d,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(m=!0),this._li.computeIntersection(h,d,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(v=!0),this._li.computeIntersection(h,d,this._corner[3],this._corner[0]),this._li.isProper()||m&&v||h.equals(this._pt)||d.equals(this._pt)))))},cr.prototype.addSnappedNode=function(h,d){var m=h.getCoordinate(d),v=h.getCoordinate(d+1);return!!this.intersects(m,v)&&(h.addIntersection(this.getCoordinate(),d),!0)},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},y2.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(cr,y2);var N2=function(){this.tempEnv1=new on,this.selectedSegment=new li};N2.prototype.select=function(){1!==arguments.length&&2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},N2.prototype.interfaces_=function(){return[]},N2.prototype.getClass=function(){return N2};var mc=function(){this._index=null,this._index=arguments[0]},Ca={HotPixelSnapAction:{configurable:!0}};mc.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var d=arguments[0],m=arguments[1],v=arguments[2],b=d.getSafeEnvelope(),B=new w2(d,m,v);return this._index.query(b,{interfaces_:function(){return[Xl]},visitItem:function(z){z.select(b,B)}}),B.isNodeAdded()}},mc.prototype.interfaces_=function(){return[]},mc.prototype.getClass=function(){return mc},Ca.HotPixelSnapAction.get=function(){return w2},Object.defineProperties(mc,Ca);var w2=function(h){function d(){h.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var v=arguments[1],b=arguments[2];this._hotPixel=arguments[0],this._parentEdge=v,this._hotPixelVertexIndex=b}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.isNodeAdded=function(){return this._isNodeAdded},d.prototype.select=function(){if(2!==arguments.length)return h.prototype.select.apply(this,arguments);var v=arguments[1],b=arguments[0].getContext();if(null!==this._parentEdge&&b===this._parentEdge&&v===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(b,v)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(N2),Al=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new rn};Al.prototype.processIntersections=function(h,d,m,v){if(h===m&&d===v)return null;var b=h.getCoordinates()[d],B=h.getCoordinates()[d+1],z=m.getCoordinates()[v],q=m.getCoordinates()[v+1];if(this._li.computeIntersection(b,B,z,q),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var pe=0;pe<this._li.getIntersectionNum();pe++)this._interiorIntersections.add(this._li.getIntersection(pe));h.addIntersections(this._li,d,0),m.addIntersections(this._li,v,1)}},Al.prototype.isDone=function(){return!1},Al.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Al.prototype.interfaces_=function(){return[ks]},Al.prototype.getClass=function(){return Al};var M1=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var h=arguments[0];this._pm=h,this._li=new mt,this._li.setPrecisionModel(h),this._scaleFactor=h.getScale()};M1.prototype.checkCorrectness=function(h){var d=Ko.getNodedSubstrings(h),m=new Oa(d);try{m.checkValid()}catch(v){if(!(v instanceof _n))throw v;v.printStackTrace()}},M1.prototype.getNodedSubstrings=function(){return Ko.getNodedSubstrings(this._nodedSegStrings)},M1.prototype.snapRound=function(h,d){var m=this.findInteriorIntersections(h,d);this.computeIntersectionSnaps(m),this.computeVertexSnaps(h)},M1.prototype.findInteriorIntersections=function(h,d){var m=new Al(d);return this._noder.setSegmentIntersector(m),this._noder.computeNodes(h),m.getInteriorIntersections()},M1.prototype.computeVertexSnaps=function(){if(At(arguments[0],ys))for(var h=arguments[0].iterator();h.hasNext();){var d=h.next();this.computeVertexSnaps(d)}else if(arguments[0]instanceof Ko)for(var m=arguments[0],v=m.getCoordinates(),b=0;b<v.length;b++){var B=new cr(v[b],this._scaleFactor,this._li);this._pointSnapper.snap(B,m,b)&&m.addIntersection(v[b],b)}},M1.prototype.computeNodes=function(h){this._nodedSegStrings=h,this._noder=new ml,this._pointSnapper=new mc(this._noder.getIndex()),this.snapRound(h,this._li)},M1.prototype.computeIntersectionSnaps=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next(),v=new cr(m,this._scaleFactor,this._li);this._pointSnapper.snap(v)}},M1.prototype.interfaces_=function(){return[Yl]},M1.prototype.getClass=function(){return M1};var Dr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Lr,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var m=arguments[1];this._argGeom=arguments[0],this._bufParams=m}},au={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Dr.prototype.bufferFixedPrecision=function(h){var d=new za(new M1(new Ln(1)),h.getScale()),m=new Xo(this._bufParams);m.setWorkingPrecisionModel(h),m.setNoder(d),this._resultGeometry=m.buffer(this._argGeom,this._distance)},Dr.prototype.bufferReducedPrecision=function(){var h=this;if(0===arguments.length){for(var d=Dr.MAX_PRECISION_DIGITS;d>=0;d--){try{h.bufferReducedPrecision(d)}catch(B){if(!(B instanceof n1))throw B;h._saveException=B}if(null!==h._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var v=Dr.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),b=new Ln(v);this.bufferFixedPrecision(b)}},Dr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var h=this._argGeom.getFactory().getPrecisionModel();h.getType()===Ln.FIXED?this.bufferFixedPrecision(h):this.bufferReducedPrecision()},Dr.prototype.setQuadrantSegments=function(h){this._bufParams.setQuadrantSegments(h)},Dr.prototype.bufferOriginalPrecision=function(){try{var h=new Xo(this._bufParams);this._resultGeometry=h.buffer(this._argGeom,this._distance)}catch(d){if(!(d instanceof le))throw d;this._saveException=d}},Dr.prototype.getResultGeometry=function(h){return this._distance=h,this.computeGeometry(),this._resultGeometry},Dr.prototype.setEndCapStyle=function(h){this._bufParams.setEndCapStyle(h)},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.bufferOp=function(){if(2===arguments.length){var d=arguments[1];return new Dr(arguments[0]).getResultGeometry(d)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof yn&&"number"==typeof arguments[1]){var v=arguments[1],b=arguments[2],B=new Dr(arguments[0]);return B.setQuadrantSegments(b),B.getResultGeometry(v)}if(arguments[2]instanceof Lr&&arguments[0]instanceof yn&&"number"==typeof arguments[1]){var q=arguments[1];return new Dr(arguments[0],arguments[2]).getResultGeometry(q)}}else if(4===arguments.length){var gt=arguments[1],pt=arguments[2],hn=arguments[3],Mn=new Dr(arguments[0]);return Mn.setQuadrantSegments(pt),Mn.setEndCapStyle(hn),Mn.getResultGeometry(gt)}},Dr.precisionScaleFactor=function(h,d,m){var v=h.getEnvelopeInternal(),b=be.max(Math.abs(v.getMaxX()),Math.abs(v.getMaxY()),Math.abs(v.getMinX()),Math.abs(v.getMinY()))+2*(d>0?d:0),B=m-Math.trunc(Math.log(b)/Math.log(10)+1);return Math.pow(10,B)},au.CAP_ROUND.get=function(){return Lr.CAP_ROUND},au.CAP_BUTT.get=function(){return Lr.CAP_FLAT},au.CAP_FLAT.get=function(){return Lr.CAP_FLAT},au.CAP_SQUARE.get=function(){return Lr.CAP_SQUARE},au.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Dr,au);var Ps=function(){this._pt=[new $,new $],this._distance=Y.NaN,this._isNull=!0};Ps.prototype.getCoordinates=function(){return this._pt},Ps.prototype.getCoordinate=function(h){return this._pt[h]},Ps.prototype.setMinimum=function(){if(1===arguments.length){var h=arguments[0];this.setMinimum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var v=d.distance(m);v<this._distance&&this.initialize(d,m,v)}},Ps.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var h=arguments[0],d=arguments[1];this._pt[0].setCoordinate(h),this._pt[1].setCoordinate(d),this._distance=h.distance(d),this._isNull=!1}else if(3===arguments.length){var v=arguments[1],b=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(v),this._distance=b,this._isNull=!1}},Ps.prototype.getDistance=function(){return this._distance},Ps.prototype.setMaximum=function(){if(1===arguments.length){var h=arguments[0];this.setMaximum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var v=d.distance(m);v>this._distance&&this.initialize(d,m,v)}},Ps.prototype.interfaces_=function(){return[]},Ps.prototype.getClass=function(){return Ps};var To=function(){};To.prototype.interfaces_=function(){return[]},To.prototype.getClass=function(){return To},To.computeDistance=function(){if(arguments[2]instanceof Ps&&arguments[0]instanceof ho&&arguments[1]instanceof $)for(var d=arguments[1],m=arguments[2],v=arguments[0].getCoordinates(),b=new li,B=0;B<v.length-1;B++){b.setCoordinates(v[B],v[B+1]);var z=b.closestPoint(d);m.setMinimum(z,d)}else if(arguments[2]instanceof Ps&&arguments[0]instanceof Wo&&arguments[1]instanceof $){var q=arguments[0],pe=arguments[1],Ue=arguments[2];To.computeDistance(q.getExteriorRing(),pe,Ue);for(var gt=0;gt<q.getNumInteriorRing();gt++)To.computeDistance(q.getInteriorRingN(gt),pe,Ue)}else if(arguments[2]instanceof Ps&&arguments[0]instanceof yn&&arguments[1]instanceof $){var pt=arguments[0],hn=arguments[1],Mn=arguments[2];if(pt instanceof ho)To.computeDistance(pt,hn,Mn);else if(pt instanceof Wo)To.computeDistance(pt,hn,Mn);else if(pt instanceof _1)for(var Fn=pt,Jn=0;Jn<Fn.getNumGeometries();Jn++){var Hr=Fn.getGeometryN(Jn);To.computeDistance(Hr,hn,Mn)}else Mn.setMinimum(pt.getCoordinate(),hn)}else if(arguments[2]instanceof Ps&&arguments[0]instanceof li&&arguments[1]instanceof $){var l1=arguments[1],_l=arguments[2],yl=arguments[0].closestPoint(l1);_l.setMinimum(yl,l1)}};var S1=function(h){this._maxPtDist=new Ps,this._inputGeom=h||null},h0={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};S1.prototype.computeMaxMidpointDistance=function(h){var d=new fa(this._inputGeom);h.apply(d),this._maxPtDist.setMaximum(d.getMaxPointDistance())},S1.prototype.computeMaxVertexDistance=function(h){var d=new Zl(this._inputGeom);h.apply(d),this._maxPtDist.setMaximum(d.getMaxPointDistance())},S1.prototype.findDistance=function(h){return this.computeMaxVertexDistance(h),this.computeMaxMidpointDistance(h),this._maxPtDist.getDistance()},S1.prototype.getDistancePoints=function(){return this._maxPtDist},S1.prototype.interfaces_=function(){return[]},S1.prototype.getClass=function(){return S1},h0.MaxPointDistanceFilter.get=function(){return Zl},h0.MaxMidpointDistanceFilter.get=function(){return fa},Object.defineProperties(S1,h0);var Zl=function(h){this._maxPtDist=new Ps,this._minPtDist=new Ps,this._geom=h||null};Zl.prototype.filter=function(h){this._minPtDist.initialize(),To.computeDistance(this._geom,h,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Zl.prototype.getMaxPointDistance=function(){return this._maxPtDist},Zl.prototype.interfaces_=function(){return[lr]},Zl.prototype.getClass=function(){return Zl};var fa=function(h){this._maxPtDist=new Ps,this._minPtDist=new Ps,this._geom=h||null};fa.prototype.filter=function(h,d){if(0===d)return null;var m=h.getCoordinate(d-1),v=h.getCoordinate(d),b=new $((m.x+v.x)/2,(m.y+v.y)/2);this._minPtDist.initialize(),To.computeDistance(this._geom,b,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},fa.prototype.isDone=function(){return!1},fa.prototype.isGeometryChanged=function(){return!1},fa.prototype.getMaxPointDistance=function(){return this._maxPtDist},fa.prototype.interfaces_=function(){return[A2]},fa.prototype.getClass=function(){return fa};var vl=function(h){this._comps=h||null};vl.prototype.filter=function(h){h instanceof Wo&&this._comps.add(h)},vl.prototype.interfaces_=function(){return[Fa]},vl.prototype.getClass=function(){return vl},vl.getPolygons=function(){if(1===arguments.length)return vl.getPolygons(arguments[0],new rn);if(2===arguments.length){var d=arguments[0],m=arguments[1];return d instanceof Wo?m.add(d):d instanceof _1&&d.apply(new vl(m)),m}};var o1=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var m=arguments[1];this._lines=arguments[0],this._isForcedToLineString=m}};o1.prototype.filter=function(h){if(this._isForcedToLineString&&h instanceof z2){var d=h.getFactory().createLineString(h.getCoordinateSequence());return this._lines.add(d),null}h instanceof ho&&this._lines.add(h)},o1.prototype.setForceToLineString=function(h){this._isForcedToLineString=h},o1.prototype.interfaces_=function(){return[ki]},o1.prototype.getClass=function(){return o1},o1.getGeometry=function(){if(1===arguments.length){var h=arguments[0];return h.getFactory().buildGeometry(o1.getLines(h))}if(2===arguments.length){var d=arguments[0],m=arguments[1];return d.getFactory().buildGeometry(o1.getLines(d,m))}},o1.getLines=function(){if(1===arguments.length)return o1.getLines(arguments[0],!1);if(2===arguments.length){if(At(arguments[0],ys)&&At(arguments[1],ys)){for(var m=arguments[1],v=arguments[0].iterator();v.hasNext();){var b=v.next();o1.getLines(b,m)}return m}if(arguments[0]instanceof yn&&"boolean"==typeof arguments[1]){var B=arguments[0],z=arguments[1],q=new rn;return B.apply(new o1(q,z)),q}if(arguments[0]instanceof yn&&At(arguments[1],ys)){var pe=arguments[0],Ue=arguments[1];return pe instanceof ho?Ue.add(pe):pe.apply(new o1(Ue)),Ue}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&At(arguments[0],ys)&&At(arguments[1],ys)){for(var pt=arguments[1],hn=arguments[2],Mn=arguments[0].iterator();Mn.hasNext();){var Fn=Mn.next();o1.getLines(Fn,pt,hn)}return pt}if("boolean"==typeof arguments[2]&&arguments[0]instanceof yn&&At(arguments[1],ys)){var Hr=arguments[1];return arguments[0].apply(new o1(Hr,arguments[2])),Hr}}};var C2=function(){if(this._boundaryRule=_r.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var h=arguments[0];if(null===h)throw new X("Rule must be non-null");this._boundaryRule=h}};C2.prototype.locateInternal=function(){if(arguments[0]instanceof $&&arguments[1]instanceof Wo){var h=arguments[0],d=arguments[1];if(d.isEmpty())return oe.EXTERIOR;var m=d.getExteriorRing(),v=this.locateInPolygonRing(h,m);if(v===oe.EXTERIOR)return oe.EXTERIOR;if(v===oe.BOUNDARY)return oe.BOUNDARY;for(var b=0;b<d.getNumInteriorRing();b++){var B=d.getInteriorRingN(b),z=this.locateInPolygonRing(h,B);if(z===oe.INTERIOR)return oe.EXTERIOR;if(z===oe.BOUNDARY)return oe.BOUNDARY}return oe.INTERIOR}if(arguments[0]instanceof $&&arguments[1]instanceof ho){var q=arguments[0],pe=arguments[1];if(!pe.getEnvelopeInternal().intersects(q))return oe.EXTERIOR;var Ue=pe.getCoordinates();return pe.isClosed()||!q.equals(Ue[0])&&!q.equals(Ue[Ue.length-1])?Mt.isOnLine(q,Ue)?oe.INTERIOR:oe.EXTERIOR:oe.BOUNDARY}if(arguments[0]instanceof $&&arguments[1]instanceof uc){var gt=arguments[0];return arguments[1].getCoordinate().equals2D(gt)?oe.INTERIOR:oe.EXTERIOR}},C2.prototype.locateInPolygonRing=function(h,d){return d.getEnvelopeInternal().intersects(h)?Mt.locatePointInRing(h,d.getCoordinates()):oe.EXTERIOR},C2.prototype.intersects=function(h,d){return this.locate(h,d)!==oe.EXTERIOR},C2.prototype.updateLocationInfo=function(h){h===oe.INTERIOR&&(this._isIn=!0),h===oe.BOUNDARY&&this._numBoundaries++},C2.prototype.computeLocation=function(h,d){if(d instanceof uc&&this.updateLocationInfo(this.locateInternal(h,d)),d instanceof ho)this.updateLocationInfo(this.locateInternal(h,d));else if(d instanceof Wo)this.updateLocationInfo(this.locateInternal(h,d));else if(d instanceof T3)for(var m=d,v=0;v<m.getNumGeometries();v++){var b=m.getGeometryN(v);this.updateLocationInfo(this.locateInternal(h,b))}else if(d instanceof Ic)for(var B=d,z=0;z<B.getNumGeometries();z++){var q=B.getGeometryN(z);this.updateLocationInfo(this.locateInternal(h,q))}else if(d instanceof _1)for(var pe=new Ri(d);pe.hasNext();){var Ue=pe.next();Ue!==d&&this.computeLocation(h,Ue)}},C2.prototype.locate=function(h,d){return d.isEmpty()?oe.EXTERIOR:d instanceof ho||d instanceof Wo?this.locateInternal(h,d):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(h,d),this._boundaryRule.isInBoundary(this._numBoundaries)?oe.BOUNDARY:this._numBoundaries>0||this._isIn?oe.INTERIOR:oe.EXTERIOR)},C2.prototype.interfaces_=function(){return[]},C2.prototype.getClass=function(){return C2};var co=function h(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)h.call(this,arguments[0],h.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var b=arguments[1],B=arguments[2];this._component=arguments[0],this._segIndex=b,this._pt=B}},pp={INSIDE_AREA:{configurable:!0}};co.prototype.isInsideArea=function(){return this._segIndex===co.INSIDE_AREA},co.prototype.getCoordinate=function(){return this._pt},co.prototype.getGeometryComponent=function(){return this._component},co.prototype.getSegmentIndex=function(){return this._segIndex},co.prototype.interfaces_=function(){return[]},co.prototype.getClass=function(){return co},pp.INSIDE_AREA.get=function(){return-1},Object.defineProperties(co,pp);var y4=function(h){this._pts=h||null};y4.prototype.filter=function(h){h instanceof uc&&this._pts.add(h)},y4.prototype.interfaces_=function(){return[Fa]},y4.prototype.getClass=function(){return y4},y4.getPoints=function(){if(1===arguments.length){var h=arguments[0];return h instanceof uc?Ks.singletonList(h):y4.getPoints(h,new rn)}if(2===arguments.length){var d=arguments[0],m=arguments[1];return d instanceof uc?m.add(d):d instanceof _1&&d.apply(new y4(m)),m}};var f0=function(){this._locations=null,this._locations=arguments[0]};f0.prototype.filter=function(h){(h instanceof uc||h instanceof ho||h instanceof Wo)&&this._locations.add(new co(h,0,h.getCoordinate()))},f0.prototype.interfaces_=function(){return[Fa]},f0.prototype.getClass=function(){return f0},f0.getLocations=function(h){var d=new rn;return h.apply(new f0(d)),d};var da=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new C2,this._minDistanceLocation=null,this._minDistance=Y.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var m=arguments[0],v=arguments[1],b=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=m,this._geom[1]=v,this._terminateDistance=b}};da.prototype.computeContainmentDistance=function(){if(0===arguments.length){var h=new Array(2).fill(null);if(this.computeContainmentDistance(0,h),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,h)}else if(2===arguments.length){var d=arguments[0],m=arguments[1],v=1-d,b=vl.getPolygons(this._geom[d]);if(b.size()>0){var B=f0.getLocations(this._geom[v]);if(this.computeContainmentDistance(B,b,m),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[v]=m[0],this._minDistanceLocation[d]=m[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&At(arguments[0],Qo)&&At(arguments[1],Qo)){for(var z=arguments[0],q=arguments[1],pe=arguments[2],Ue=0;Ue<z.size();Ue++)for(var gt=z.get(Ue),pt=0;pt<q.size();pt++)if(this.computeContainmentDistance(gt,q.get(pt),pe),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof co&&arguments[1]instanceof Wo){var hn=arguments[0],Mn=arguments[1],Fn=arguments[2],Jn=hn.getCoordinate();if(oe.EXTERIOR!==this._ptLocator.locate(Jn,Mn))return this._minDistance=0,Fn[0]=hn,Fn[1]=new co(Mn,Jn),null}},da.prototype.computeMinDistanceLinesPoints=function(h,d,m){for(var v=0;v<h.size();v++)for(var b=h.get(v),B=0;B<d.size();B++){var z=d.get(B);if(this.computeMinDistance(b,z,m),this._minDistance<=this._terminateDistance)return null}},da.prototype.computeFacetDistance=function(){var h=new Array(2).fill(null),d=o1.getLines(this._geom[0]),m=o1.getLines(this._geom[1]),v=y4.getPoints(this._geom[0]),b=y4.getPoints(this._geom[1]);return this.computeMinDistanceLines(d,m,h),this.updateMinDistance(h,!1),this._minDistance<=this._terminateDistance?null:(h[0]=null,h[1]=null,this.computeMinDistanceLinesPoints(d,b,h),this.updateMinDistance(h,!1),this._minDistance<=this._terminateDistance?null:(h[0]=null,h[1]=null,this.computeMinDistanceLinesPoints(m,v,h),this.updateMinDistance(h,!0),this._minDistance<=this._terminateDistance?null:(h[0]=null,h[1]=null,this.computeMinDistancePoints(v,b,h),void this.updateMinDistance(h,!1))))},da.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},da.prototype.updateMinDistance=function(h,d){if(null===h[0])return null;d?(this._minDistanceLocation[0]=h[1],this._minDistanceLocation[1]=h[0]):(this._minDistanceLocation[0]=h[0],this._minDistanceLocation[1]=h[1])},da.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},da.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof ho&&arguments[1]instanceof uc){var h=arguments[0],d=arguments[1],m=arguments[2];if(h.getEnvelopeInternal().distance(d.getEnvelopeInternal())>this._minDistance)return null;for(var v=h.getCoordinates(),b=d.getCoordinate(),B=0;B<v.length-1;B++){var z=Mt.distancePointLine(b,v[B],v[B+1]);if(z<this._minDistance){this._minDistance=z;var q=new li(v[B],v[B+1]).closestPoint(b);m[0]=new co(h,B,q),m[1]=new co(d,0,b)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof ho&&arguments[1]instanceof ho){var pe=arguments[0],Ue=arguments[1],gt=arguments[2];if(pe.getEnvelopeInternal().distance(Ue.getEnvelopeInternal())>this._minDistance)return null;for(var pt=pe.getCoordinates(),hn=Ue.getCoordinates(),Mn=0;Mn<pt.length-1;Mn++)for(var Fn=0;Fn<hn.length-1;Fn++){var Jn=Mt.distanceLineLine(pt[Mn],pt[Mn+1],hn[Fn],hn[Fn+1]);if(Jn<this._minDistance){this._minDistance=Jn;var Hr=new li(pt[Mn],pt[Mn+1]),Do=new li(hn[Fn],hn[Fn+1]),l1=Hr.closestPoints(Do);gt[0]=new co(pe,Mn,l1[0]),gt[1]=new co(Ue,Fn,l1[1])}if(this._minDistance<=this._terminateDistance)return null}}},da.prototype.computeMinDistancePoints=function(h,d,m){for(var v=0;v<h.size();v++)for(var b=h.get(v),B=0;B<d.size();B++){var z=d.get(B),q=b.getCoordinate().distance(z.getCoordinate());if(q<this._minDistance&&(this._minDistance=q,m[0]=new co(b,0,b.getCoordinate()),m[1]=new co(z,0,z.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},da.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new X("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},da.prototype.computeMinDistanceLines=function(h,d,m){for(var v=0;v<h.size();v++)for(var b=h.get(v),B=0;B<d.size();B++){var z=d.get(B);if(this.computeMinDistance(b,z,m),this._minDistance<=this._terminateDistance)return null}},da.prototype.interfaces_=function(){return[]},da.prototype.getClass=function(){return da},da.distance=function(h,d){return new da(h,d).distance()},da.isWithinDistance=function(h,d,m){return new da(h,d,m).distance()<=m},da.nearestPoints=function(h,d){return new da(h,d).nearestPoints()};var E1=function(){this._pt=[new $,new $],this._distance=Y.NaN,this._isNull=!0};E1.prototype.getCoordinates=function(){return this._pt},E1.prototype.getCoordinate=function(h){return this._pt[h]},E1.prototype.setMinimum=function(){if(1===arguments.length){var h=arguments[0];this.setMinimum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var v=d.distance(m);v<this._distance&&this.initialize(d,m,v)}},E1.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var h=arguments[0],d=arguments[1];this._pt[0].setCoordinate(h),this._pt[1].setCoordinate(d),this._distance=h.distance(d),this._isNull=!1}else if(3===arguments.length){var v=arguments[1],b=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(v),this._distance=b,this._isNull=!1}},E1.prototype.toString=function(){return it.toLineString(this._pt[0],this._pt[1])},E1.prototype.getDistance=function(){return this._distance},E1.prototype.setMaximum=function(){if(1===arguments.length){var h=arguments[0];this.setMaximum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var v=d.distance(m);v>this._distance&&this.initialize(d,m,v)}},E1.prototype.interfaces_=function(){return[]},E1.prototype.getClass=function(){return E1};var V2=function(){};V2.prototype.interfaces_=function(){return[]},V2.prototype.getClass=function(){return V2},V2.computeDistance=function(){if(arguments[2]instanceof E1&&arguments[0]instanceof ho&&arguments[1]instanceof $)for(var h=arguments[0],d=arguments[1],m=arguments[2],v=new li,b=h.getCoordinates(),B=0;B<b.length-1;B++){v.setCoordinates(b[B],b[B+1]);var z=v.closestPoint(d);m.setMinimum(z,d)}else if(arguments[2]instanceof E1&&arguments[0]instanceof Wo&&arguments[1]instanceof $){var q=arguments[0],pe=arguments[1],Ue=arguments[2];V2.computeDistance(q.getExteriorRing(),pe,Ue);for(var gt=0;gt<q.getNumInteriorRing();gt++)V2.computeDistance(q.getInteriorRingN(gt),pe,Ue)}else if(arguments[2]instanceof E1&&arguments[0]instanceof yn&&arguments[1]instanceof $){var pt=arguments[0],hn=arguments[1],Mn=arguments[2];if(pt instanceof ho)V2.computeDistance(pt,hn,Mn);else if(pt instanceof Wo)V2.computeDistance(pt,hn,Mn);else if(pt instanceof _1)for(var Fn=pt,Jn=0;Jn<Fn.getNumGeometries();Jn++){var Hr=Fn.getGeometryN(Jn);V2.computeDistance(Hr,hn,Mn)}else Mn.setMinimum(pt.getCoordinate(),hn)}else if(arguments[2]instanceof E1&&arguments[0]instanceof li&&arguments[1]instanceof $){var l1=arguments[1],_l=arguments[2],yl=arguments[0].closestPoint(l1);_l.setMinimum(yl,l1)}};var s2=function(){this._g0=null,this._g1=null,this._ptDist=new E1,this._densifyFrac=0;var d=arguments[1];this._g0=arguments[0],this._g1=d},k6={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};s2.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},s2.prototype.setDensifyFraction=function(h){if(h>1||h<=0)throw new X("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=h},s2.prototype.compute=function(h,d){this.computeOrientedDistance(h,d,this._ptDist),this.computeOrientedDistance(d,h,this._ptDist)},s2.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},s2.prototype.computeOrientedDistance=function(h,d,m){var v=new cu(d);if(h.apply(v),m.setMaximum(v.getMaxPointDistance()),this._densifyFrac>0){var b=new R3(d,this._densifyFrac);h.apply(b),m.setMaximum(b.getMaxPointDistance())}},s2.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},s2.prototype.interfaces_=function(){return[]},s2.prototype.getClass=function(){return s2},s2.distance=function(){if(2===arguments.length)return new s2(arguments[0],arguments[1]).distance();if(3===arguments.length){var b=arguments[2],B=new s2(arguments[0],arguments[1]);return B.setDensifyFraction(b),B.distance()}},k6.MaxPointDistanceFilter.get=function(){return cu},k6.MaxDensifiedByFractionDistanceFilter.get=function(){return R3},Object.defineProperties(s2,k6);var cu=function(){this._maxPtDist=new E1,this._minPtDist=new E1,this._euclideanDist=new V2,this._geom=null,this._geom=arguments[0]};cu.prototype.filter=function(h){this._minPtDist.initialize(),V2.computeDistance(this._geom,h,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},cu.prototype.getMaxPointDistance=function(){return this._maxPtDist},cu.prototype.interfaces_=function(){return[lr]},cu.prototype.getClass=function(){return cu};var R3=function(){this._maxPtDist=new E1,this._minPtDist=new E1,this._geom=null,this._numSubSegs=0;var d=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/d))};R3.prototype.filter=function(h,d){if(0===d)return null;for(var m=h.getCoordinate(d-1),v=h.getCoordinate(d),b=(v.x-m.x)/this._numSubSegs,B=(v.y-m.y)/this._numSubSegs,z=0;z<this._numSubSegs;z++){var Ue=new $(m.x+z*b,m.y+z*B);this._minPtDist.initialize(),V2.computeDistance(this._geom,Ue,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},R3.prototype.isDone=function(){return!1},R3.prototype.isGeometryChanged=function(){return!1},R3.prototype.getMaxPointDistance=function(){return this._maxPtDist},R3.prototype.interfaces_=function(){return[A2]},R3.prototype.getClass=function(){return R3};var Ac=function(h,d,m){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=h||null,this._bufDistance=d||null,this._result=m||null},P6={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Ac.prototype.checkMaximumDistance=function(h,d,m){var v=new s2(d,h);if(v.setDensifyFraction(.25),this._maxDistanceFound=v.orientedDistance(),this._maxDistanceFound>m){this._isValid=!1;var b=v.getCoordinates();this._errorLocation=b[1],this._errorIndicator=h.getFactory().createLineString(b),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+it.toLineString(b[0],b[1])+")"}},Ac.prototype.isValid=function(){var h=Math.abs(this._bufDistance),d=Ac.MAX_DISTANCE_DIFF_FRAC*h;return this._minValidDistance=h-d,this._maxValidDistance=h+d,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Ac.VERBOSE&&$t.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Ac.prototype.checkNegativeValid=function(){if(!(this._input instanceof Wo||this._input instanceof Ic||this._input instanceof _1))return null;var h=this.getPolygonLines(this._input);if(this.checkMinimumDistance(h,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(h,this._result,this._maxValidDistance)},Ac.prototype.getErrorIndicator=function(){return this._errorIndicator},Ac.prototype.checkMinimumDistance=function(h,d,m){var v=new da(h,d,m);if(this._minDistanceFound=v.distance(),this._minDistanceFound<m){this._isValid=!1;var b=v.nearestPoints();this._errorLocation=v.nearestPoints()[1],this._errorIndicator=h.getFactory().createLineString(b),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+it.toLineString(b[0],b[1])+" )"}},Ac.prototype.checkPositiveValid=function(){var h=this._result.getBoundary();if(this.checkMinimumDistance(this._input,h,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,h,this._maxValidDistance)},Ac.prototype.getErrorLocation=function(){return this._errorLocation},Ac.prototype.getPolygonLines=function(h){for(var d=new rn,m=new o1(d),v=vl.getPolygons(h).iterator();v.hasNext();)v.next().apply(m);return h.getFactory().buildGeometry(d)},Ac.prototype.getErrorMessage=function(){return this._errMsg},Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac},P6.VERBOSE.get=function(){return!1},P6.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Ac,P6);var Na=function(h,d,m){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=h||null,this._distance=d||null,this._result=m||null},gp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Na.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Na.prototype.checkEnvelope=function(){if(this._distance<0)return null;var h=this._distance*Na.MAX_ENV_DIFF_FRAC;0===h&&(h=.001);var d=new on(this._input.getEnvelopeInternal());d.expandBy(this._distance);var m=new on(this._result.getEnvelopeInternal());m.expandBy(h),m.contains(d)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(m)),this.report("Envelope")},Na.prototype.checkDistance=function(){var h=new Ac(this._input,this._distance,this._result);h.isValid()||(this._isValid=!1,this._errorMsg=h.getErrorMessage(),this._errorLocation=h.getErrorLocation(),this._errorIndicator=h.getErrorIndicator()),this.report("Distance")},Na.prototype.checkArea=function(){var h=this._input.getArea(),d=this._result.getArea();this._distance>0&&h>d&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&h<d&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Na.prototype.checkPolygonal=function(){this._result instanceof Wo||this._result instanceof Ic||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Na.prototype.getErrorIndicator=function(){return this._errorIndicator},Na.prototype.getErrorLocation=function(){return this._errorLocation},Na.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Na.prototype.report=function(h){if(!Na.VERBOSE)return null;$t.out.println("Check "+h+": "+(this._isValid?"passed":"FAILED"))},Na.prototype.getErrorMessage=function(){return this._errorMsg},Na.prototype.interfaces_=function(){return[]},Na.prototype.getClass=function(){return Na},Na.isValidMsg=function(h,d,m){var v=new Na(h,d,m);return v.isValid()?null:v.getErrorMessage()},Na.isValid=function(h,d,m){return!!new Na(h,d,m).isValid()},gp.VERBOSE.get=function(){return!1},gp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Na,gp);var vc=function(){this._pts=null,this._data=null;var d=arguments[1];this._pts=arguments[0],this._data=d};vc.prototype.getCoordinates=function(){return this._pts},vc.prototype.size=function(){return this._pts.length},vc.prototype.getCoordinate=function(h){return this._pts[h]},vc.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},vc.prototype.getSegmentOctant=function(h){return h===this._pts.length-1?-1:_2.octant(this.getCoordinate(h),this.getCoordinate(h+1))},vc.prototype.setData=function(h){this._data=h},vc.prototype.getData=function(){return this._data},vc.prototype.toString=function(){return it.toLineString(new fo(this._pts))},vc.prototype.interfaces_=function(){return[qo]},vc.prototype.getClass=function(){return vc};var na=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new rn,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};na.prototype.getInteriorIntersection=function(){return this._interiorIntersection},na.prototype.setCheckEndSegmentsOnly=function(h){this._isCheckEndSegmentsOnly=h},na.prototype.getIntersectionSegments=function(){return this._intSegments},na.prototype.count=function(){return this._intersectionCount},na.prototype.getIntersections=function(){return this._intersections},na.prototype.setFindAllIntersections=function(h){this._findAllIntersections=h},na.prototype.setKeepIntersections=function(h){this._keepIntersections=h},na.prototype.processIntersections=function(h,d,m,v){if(!this._findAllIntersections&&this.hasIntersection()||h===m&&d===v||this._isCheckEndSegmentsOnly&&!this.isEndSegment(h,d)&&!this.isEndSegment(m,v))return null;var b=h.getCoordinates()[d],B=h.getCoordinates()[d+1],z=m.getCoordinates()[v],q=m.getCoordinates()[v+1];this._li.computeIntersection(b,B,z,q),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=b,this._intSegments[1]=B,this._intSegments[2]=z,this._intSegments[3]=q,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},na.prototype.isEndSegment=function(h,d){return 0===d||d>=h.size()-2},na.prototype.hasIntersection=function(){return null!==this._interiorIntersection},na.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},na.prototype.interfaces_=function(){return[ks]},na.prototype.getClass=function(){return na},na.createAllIntersectionsFinder=function(h){var d=new na(h);return d.setFindAllIntersections(!0),d},na.createAnyIntersectionFinder=function(h){return new na(h)},na.createIntersectionCounter=function(h){var d=new na(h);return d.setFindAllIntersections(!0),d.setKeepIntersections(!1),d};var U2=function(){this._li=new mt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};U2.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},U2.prototype.getIntersections=function(){return this._segInt.getIntersections()},U2.prototype.isValid=function(){return this.execute(),this._isValid},U2.prototype.setFindAllIntersections=function(h){this._findAllIntersections=h},U2.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new na(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var h=new ml;if(h.setSegmentIntersector(this._segInt),h.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},U2.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new n1(this.getErrorMessage(),this._segInt.getInteriorIntersection())},U2.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var h=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+it.toLineString(h[0],h[1])+" and "+it.toLineString(h[2],h[3])},U2.prototype.interfaces_=function(){return[]},U2.prototype.getClass=function(){return U2},U2.computeIntersections=function(h){var d=new U2(h);return d.setFindAllIntersections(!0),d.isValid(),d.getIntersections()};var F3=function h(){this._nv=null,this._nv=new U2(h.toSegmentStrings(arguments[0]))};F3.prototype.checkValid=function(){this._nv.checkValid()},F3.prototype.interfaces_=function(){return[]},F3.prototype.getClass=function(){return F3},F3.toSegmentStrings=function(h){for(var d=new rn,m=h.iterator();m.hasNext();){var v=m.next();d.add(new vc(v.getCoordinates(),v))}return d},F3.checkValid=function(h){new F3(h).checkValid()};var d0=function(h){this._mapOp=h};d0.prototype.map=function(h){for(var d=new rn,m=0;m<h.getNumGeometries();m++){var v=this._mapOp.map(h.getGeometryN(m));v.isEmpty()||d.add(v)}return h.getFactory().createGeometryCollection(qi.toGeometryArray(d))},d0.prototype.interfaces_=function(){return[]},d0.prototype.getClass=function(){return d0},d0.map=function(h,d){return new d0(d).map(h)};var a1=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new rn,this._resultLineList=new rn;var d=arguments[1],m=arguments[2];this._op=arguments[0],this._geometryFactory=d,this._ptLocator=m};a1.prototype.collectLines=function(h){for(var d=this._op.getGraph().getEdgeEnds().iterator();d.hasNext();){var m=d.next();this.collectLineEdge(m,h,this._lineEdgesList),this.collectBoundaryTouchEdge(m,h,this._lineEdgesList)}},a1.prototype.labelIsolatedLine=function(h,d){var m=this._ptLocator.locate(h.getCoordinate(),this._op.getArgGeometry(d));h.getLabel().setLocation(d,m)},a1.prototype.build=function(h){return this.findCoveredLineEdges(),this.collectLines(h),this.buildLines(h),this._resultLineList},a1.prototype.collectLineEdge=function(h,d,m){var v=h.getLabel(),b=h.getEdge();h.isLineEdge()&&(h.isVisited()||!Oi.isResultOfOp(v,d)||b.isCovered()||(m.add(b),h.setVisitedEdge(!0)))},a1.prototype.findCoveredLineEdges=function(){for(var h=this._op.getGraph().getNodes().iterator();h.hasNext();)h.next().getEdges().findCoveredLineEdges();for(var d=this._op.getGraph().getEdgeEnds().iterator();d.hasNext();){var m=d.next(),v=m.getEdge();if(m.isLineEdge()&&!v.isCoveredSet()){var b=this._op.isCoveredByA(m.getCoordinate());v.setCovered(b)}}},a1.prototype.labelIsolatedLines=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next(),v=m.getLabel();m.isIsolated()&&(v.isNull(0)?this.labelIsolatedLine(m,0):this.labelIsolatedLine(m,1))}},a1.prototype.buildLines=function(h){for(var d=this._lineEdgesList.iterator();d.hasNext();){var m=d.next(),v=this._geometryFactory.createLineString(m.getCoordinates());this._resultLineList.add(v),m.setInResult(!0)}},a1.prototype.collectBoundaryTouchEdge=function(h,d,m){var v=h.getLabel();return h.isLineEdge()||h.isVisited()||h.isInteriorAreaEdge()||h.getEdge().isInResult()?null:(J.isTrue(!(h.isInResult()||h.getSym().isInResult())||!h.getEdge().isInResult()),void(Oi.isResultOfOp(v,d)&&d===Oi.INTERSECTION&&(m.add(h.getEdge()),h.setVisitedEdge(!0))))},a1.prototype.interfaces_=function(){return[]},a1.prototype.getClass=function(){return a1};var lu=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new rn;var d=arguments[1];this._op=arguments[0],this._geometryFactory=d};lu.prototype.filterCoveredNodeToPoint=function(h){var d=h.getCoordinate();if(!this._op.isCoveredByLA(d)){var m=this._geometryFactory.createPoint(d);this._resultPointList.add(m)}},lu.prototype.extractNonCoveredResultNodes=function(h){for(var d=this._op.getGraph().getNodes().iterator();d.hasNext();){var m=d.next();if(!(m.isInResult()||m.isIncidentEdgeInResult()||0!==m.getEdges().getDegree()&&h!==Oi.INTERSECTION)){var v=m.getLabel();Oi.isResultOfOp(v,h)&&this.filterCoveredNodeToPoint(m)}}},lu.prototype.build=function(h){return this.extractNonCoveredResultNodes(h),this._resultPointList},lu.prototype.interfaces_=function(){return[]},lu.prototype.getClass=function(){return lu};var yr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};yr.prototype.transformPoint=function(h,d){return this._factory.createPoint(this.transformCoordinates(h.getCoordinateSequence(),h))},yr.prototype.transformPolygon=function(h,d){var m=!0,v=this.transformLinearRing(h.getExteriorRing(),h);null!==v&&v instanceof z2&&!v.isEmpty()||(m=!1);for(var b=new rn,B=0;B<h.getNumInteriorRing();B++){var z=this.transformLinearRing(h.getInteriorRingN(B),h);null===z||z.isEmpty()||(z instanceof z2||(m=!1),b.add(z))}if(m)return this._factory.createPolygon(v,b.toArray([]));var q=new rn;return null!==v&&q.add(v),q.addAll(b),this._factory.buildGeometry(q)},yr.prototype.createCoordinateSequence=function(h){return this._factory.getCoordinateSequenceFactory().create(h)},yr.prototype.getInputGeometry=function(){return this._inputGeom},yr.prototype.transformMultiLineString=function(h,d){for(var m=new rn,v=0;v<h.getNumGeometries();v++){var b=this.transformLineString(h.getGeometryN(v),h);null!==b&&(b.isEmpty()||m.add(b))}return this._factory.buildGeometry(m)},yr.prototype.transformCoordinates=function(h,d){return this.copy(h)},yr.prototype.transformLineString=function(h,d){return this._factory.createLineString(this.transformCoordinates(h.getCoordinateSequence(),h))},yr.prototype.transformMultiPoint=function(h,d){for(var m=new rn,v=0;v<h.getNumGeometries();v++){var b=this.transformPoint(h.getGeometryN(v),h);null!==b&&(b.isEmpty()||m.add(b))}return this._factory.buildGeometry(m)},yr.prototype.transformMultiPolygon=function(h,d){for(var m=new rn,v=0;v<h.getNumGeometries();v++){var b=this.transformPolygon(h.getGeometryN(v),h);null!==b&&(b.isEmpty()||m.add(b))}return this._factory.buildGeometry(m)},yr.prototype.copy=function(h){return h.copy()},yr.prototype.transformGeometryCollection=function(h,d){for(var m=new rn,v=0;v<h.getNumGeometries();v++){var b=this.transform(h.getGeometryN(v));null!==b&&(this._pruneEmptyGeometry&&b.isEmpty()||m.add(b))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(qi.toGeometryArray(m)):this._factory.buildGeometry(m)},yr.prototype.transform=function(h){if(this._inputGeom=h,this._factory=h.getFactory(),h instanceof uc)return this.transformPoint(h,null);if(h instanceof ql)return this.transformMultiPoint(h,null);if(h instanceof z2)return this.transformLinearRing(h,null);if(h instanceof ho)return this.transformLineString(h,null);if(h instanceof T3)return this.transformMultiLineString(h,null);if(h instanceof Wo)return this.transformPolygon(h,null);if(h instanceof Ic)return this.transformMultiPolygon(h,null);if(h instanceof _1)return this.transformGeometryCollection(h,null);throw new X("Unknown Geometry subtype: "+h.getClass().getName())},yr.prototype.transformLinearRing=function(h,d){var m=this.transformCoordinates(h.getCoordinateSequence(),h);if(null===m)return this._factory.createLinearRing(null);var v=m.size();return v>0&&v<4&&!this._preserveType?this._factory.createLineString(m):this._factory.createLinearRing(m)},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr};var G2=function h(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new li,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof ho&&"number"==typeof arguments[1]){var m=arguments[1];h.call(this,arguments[0].getCoordinates(),m)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var v=arguments[0],b=arguments[1];this._srcPts=v,this._isClosed=h.isClosed(v),this._snapTolerance=b}};G2.prototype.snapVertices=function(h,d){for(var m=this._isClosed?h.size()-1:h.size(),v=0;v<m;v++){var b=h.get(v),B=this.findSnapForVertex(b,d);null!==B&&(h.set(v,new $(B)),0===v&&this._isClosed&&h.set(h.size()-1,new $(B)))}},G2.prototype.findSnapForVertex=function(h,d){for(var m=0;m<d.length;m++){if(h.equals2D(d[m]))return null;if(h.distance(d[m])<this._snapTolerance)return d[m]}return null},G2.prototype.snapTo=function(h){var d=new lc(this._srcPts);return this.snapVertices(d,h),this.snapSegments(d,h),d.toCoordinateArray()},G2.prototype.snapSegments=function(h,d){if(0===d.length)return null;var m=d.length;d[0].equals2D(d[d.length-1])&&(m=d.length-1);for(var v=0;v<m;v++){var b=d[v],B=this.findSegmentIndexToSnap(b,h);B>=0&&h.add(B+1,new $(b),!1)}},G2.prototype.findSegmentIndexToSnap=function(h,d){for(var m=Y.MAX_VALUE,v=-1,b=0;b<d.size()-1;b++){if(this._seg.p0=d.get(b),this._seg.p1=d.get(b+1),this._seg.p0.equals2D(h)||this._seg.p1.equals2D(h)){if(this._allowSnappingToSourceVertices)continue;return-1}var B=this._seg.distance(h);B<this._snapTolerance&&B<m&&(m=B,v=b)}return v},G2.prototype.setAllowSnappingToSourceVertices=function(h){this._allowSnappingToSourceVertices=h},G2.prototype.interfaces_=function(){return[]},G2.prototype.getClass=function(){return G2},G2.isClosed=function(h){return!(h.length<=1)&&h[0].equals2D(h[h.length-1])};var Lo=function(h){this._srcGeom=h||null},mp={SNAP_PRECISION_FACTOR:{configurable:!0}};Lo.prototype.snapTo=function(h,d){var m=this.extractTargetCoordinates(h);return new k3(d,m).transform(this._srcGeom)},Lo.prototype.snapToSelf=function(h,d){var m=this.extractTargetCoordinates(this._srcGeom),v=new k3(h,m,!0).transform(this._srcGeom),b=v;return d&&At(b,v2)&&(b=v.buffer(0)),b},Lo.prototype.computeSnapTolerance=function(h){return this.computeMinimumSegmentLength(h)/10},Lo.prototype.extractTargetCoordinates=function(h){for(var d=new yt,m=h.getCoordinates(),v=0;v<m.length;v++)d.add(m[v]);return d.toArray(new Array(0).fill(null))},Lo.prototype.computeMinimumSegmentLength=function(h){for(var d=Y.MAX_VALUE,m=0;m<h.length-1;m++){var v=h[m].distance(h[m+1]);v<d&&(d=v)}return d},Lo.prototype.interfaces_=function(){return[]},Lo.prototype.getClass=function(){return Lo},Lo.snap=function(h,d,m){var v=new Array(2).fill(null),b=new Lo(h);v[0]=b.snapTo(d,m);var B=new Lo(d);return v[1]=B.snapTo(v[0],m),v},Lo.computeOverlaySnapTolerance=function(){if(1===arguments.length){var h=arguments[0],d=Lo.computeSizeBasedSnapTolerance(h),m=h.getPrecisionModel();if(m.getType()===Ln.FIXED){var v=1/m.getScale()*2/1.415;v>d&&(d=v)}return d}if(2===arguments.length){var B=arguments[1];return Math.min(Lo.computeOverlaySnapTolerance(arguments[0]),Lo.computeOverlaySnapTolerance(B))}},Lo.computeSizeBasedSnapTolerance=function(h){var d=h.getEnvelopeInternal();return Math.min(d.getHeight(),d.getWidth())*Lo.SNAP_PRECISION_FACTOR},Lo.snapToSelf=function(h,d,m){return new Lo(h).snapToSelf(d,m)},mp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Lo,mp);var k3=function(h){function d(m,v,b){h.call(this),this._snapTolerance=m||null,this._snapPts=v||null,this._isSelfSnap=void 0!==b&&b}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.snapLine=function(m,v){var b=new G2(m,this._snapTolerance);return b.setAllowSnappingToSourceVertices(this._isSelfSnap),b.snapTo(v)},d.prototype.transformCoordinates=function(m,v){var b=m.toCoordinateArray(),B=this.snapLine(b,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(B)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(yr),c1=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};c1.prototype.getCommon=function(){return Y.longBitsToDouble(this._commonBits)},c1.prototype.add=function(h){var d=Y.doubleToLongBits(h);return this._isFirst?(this._commonBits=d,this._commonSignExp=c1.signExpBits(this._commonBits),this._isFirst=!1,null):c1.signExpBits(d)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=c1.numCommonMostSigMantissaBits(this._commonBits,d),void(this._commonBits=c1.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},c1.prototype.toString=function(){if(1===arguments.length){var h=arguments[0],d=Y.longBitsToDouble(h),m="0000000000000000000000000000000000000000000000000000000000000000"+Y.toBinaryString(h),v=m.substring(m.length-64);return v.substring(0,1)+"  "+v.substring(1,12)+"(exp) "+v.substring(12)+" [ "+d+" ]"}},c1.prototype.interfaces_=function(){return[]},c1.prototype.getClass=function(){return c1},c1.getBit=function(h,d){return 0!=(h&1<<d)?1:0},c1.signExpBits=function(h){return h>>52},c1.zeroLowerBits=function(h,d){return h&~((1<<d)-1)},c1.numCommonMostSigMantissaBits=function(h,d){for(var m=0,v=52;v>=0;v--){if(c1.getBit(h,v)!==c1.getBit(d,v))return m;m++}return 52};var P3=function(){this._commonCoord=null,this._ccFilter=new uu},w4={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};P3.prototype.addCommonBits=function(h){var d=new Va(this._commonCoord);h.apply(d),h.geometryChanged()},P3.prototype.removeCommonBits=function(h){if(0===this._commonCoord.x&&0===this._commonCoord.y)return h;var d=new $(this._commonCoord);d.x=-d.x,d.y=-d.y;var m=new Va(d);return h.apply(m),h.geometryChanged(),h},P3.prototype.getCommonCoordinate=function(){return this._commonCoord},P3.prototype.add=function(h){h.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},P3.prototype.interfaces_=function(){return[]},P3.prototype.getClass=function(){return P3},w4.CommonCoordinateFilter.get=function(){return uu},w4.Translater.get=function(){return Va},Object.defineProperties(P3,w4);var uu=function(){this._commonBitsX=new c1,this._commonBitsY=new c1};uu.prototype.filter=function(h){this._commonBitsX.add(h.x),this._commonBitsY.add(h.y)},uu.prototype.getCommonCoordinate=function(){return new $(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},uu.prototype.interfaces_=function(){return[lr]},uu.prototype.getClass=function(){return uu};var Va=function(){this.trans=null,this.trans=arguments[0]};Va.prototype.filter=function(h,d){var m=h.getOrdinate(d,0)+this.trans.x,v=h.getOrdinate(d,1)+this.trans.y;h.setOrdinate(d,0,m),h.setOrdinate(d,1,v)},Va.prototype.isDone=function(){return!1},Va.prototype.isGeometryChanged=function(){return!0},Va.prototype.interfaces_=function(){return[A2]},Va.prototype.getClass=function(){return Va};var ia=function(h,d){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=h,this._geom[1]=d,this.computeSnapTolerance()};ia.prototype.selfSnap=function(h){return new Lo(h).snapTo(h,this._snapTolerance)},ia.prototype.removeCommonBits=function(h){this._cbr=new P3,this._cbr.add(h[0]),this._cbr.add(h[1]);var d=new Array(2).fill(null);return d[0]=this._cbr.removeCommonBits(h[0].copy()),d[1]=this._cbr.removeCommonBits(h[1].copy()),d},ia.prototype.prepareResult=function(h){return this._cbr.addCommonBits(h),h},ia.prototype.getResultGeometry=function(h){var d=this.snap(this._geom),m=Oi.overlayOp(d[0],d[1],h);return this.prepareResult(m)},ia.prototype.checkValid=function(h){h.isValid()||$t.out.println("Snapped geometry is invalid")},ia.prototype.computeSnapTolerance=function(){this._snapTolerance=Lo.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ia.prototype.snap=function(h){var d=this.removeCommonBits(h);return Lo.snap(d[0],d[1],this._snapTolerance)},ia.prototype.interfaces_=function(){return[]},ia.prototype.getClass=function(){return ia},ia.overlayOp=function(h,d,m){return new ia(h,d).getResultGeometry(m)},ia.union=function(h,d){return ia.overlayOp(h,d,Oi.UNION)},ia.intersection=function(h,d){return ia.overlayOp(h,d,Oi.INTERSECTION)},ia.symDifference=function(h,d){return ia.overlayOp(h,d,Oi.SYMDIFFERENCE)},ia.difference=function(h,d){return ia.overlayOp(h,d,Oi.DIFFERENCE)};var T1=function(h,d){this._geom=new Array(2).fill(null),this._geom[0]=h,this._geom[1]=d};T1.prototype.getResultGeometry=function(h){var d=null,m=!1,v=null;try{d=Oi.overlayOp(this._geom[0],this._geom[1],h),m=!0}catch(b){if(!(b instanceof le))throw b;v=b}if(!m)try{d=ia.overlayOp(this._geom[0],this._geom[1],h)}catch(b){throw b instanceof le?v:b}return d},T1.prototype.interfaces_=function(){return[]},T1.prototype.getClass=function(){return T1},T1.overlayOp=function(h,d,m){return new T1(h,d).getResultGeometry(m)},T1.union=function(h,d){return T1.overlayOp(h,d,Oi.UNION)},T1.intersection=function(h,d){return T1.overlayOp(h,d,Oi.INTERSECTION)},T1.symDifference=function(h,d){return T1.overlayOp(h,d,Oi.SYMDIFFERENCE)},T1.difference=function(h,d){return T1.overlayOp(h,d,Oi.DIFFERENCE)};var Jl=function(){this.mce=null,this.chainIndex=null;var d=arguments[1];this.mce=arguments[0],this.chainIndex=d};Jl.prototype.computeIntersections=function(h,d){this.mce.computeIntersectsForChain(this.chainIndex,h.mce,h.chainIndex,d)},Jl.prototype.interfaces_=function(){return[]},Jl.prototype.getClass=function(){return Jl};var _c=function h(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var d=arguments[0],m=arguments[1];this._eventType=h.DELETE,this._xValue=d,this._insertEvent=m}else if(3===arguments.length){var v=arguments[0],b=arguments[1],B=arguments[2];this._eventType=h.INSERT,this._label=v,this._xValue=b,this._obj=B}},Ap={INSERT:{configurable:!0},DELETE:{configurable:!0}};_c.prototype.isDelete=function(){return this._eventType===_c.DELETE},_c.prototype.setDeleteEventIndex=function(h){this._deleteEventIndex=h},_c.prototype.getObject=function(){return this._obj},_c.prototype.compareTo=function(h){return this._xValue<h._xValue?-1:this._xValue>h._xValue?1:this._eventType<h._eventType?-1:this._eventType>h._eventType?1:0},_c.prototype.getInsertEvent=function(){return this._insertEvent},_c.prototype.isInsert=function(){return this._eventType===_c.INSERT},_c.prototype.isSameLabel=function(h){return null!==this._label&&this._label===h._label},_c.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},_c.prototype.interfaces_=function(){return[Z]},_c.prototype.getClass=function(){return _c},Ap.INSERT.get=function(){return 1},Ap.DELETE.get=function(){return 2},Object.defineProperties(_c,Ap);var ra=function(){};ra.prototype.interfaces_=function(){return[]},ra.prototype.getClass=function(){return ra};var Ua=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var d=arguments[1],m=arguments[2];this._li=arguments[0],this._includeProper=d,this._recordIsolated=m};Ua.prototype.isTrivialIntersection=function(h,d,m,v){if(h===m&&1===this._li.getIntersectionNum()){if(Ua.isAdjacentSegments(d,v))return!0;if(h.isClosed()){var b=h.getNumPoints()-1;if(0===d&&v===b||0===v&&d===b)return!0}}return!1},Ua.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Ua.prototype.setIsDoneIfProperInt=function(h){this._isDoneWhenProperInt=h},Ua.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Ua.prototype.isBoundaryPointInternal=function(h,d){for(var m=d.iterator();m.hasNext();){var v=m.next().getCoordinate();if(h.isIntersection(v))return!0}return!1},Ua.prototype.hasProperIntersection=function(){return this._hasProper},Ua.prototype.hasIntersection=function(){return this._hasIntersection},Ua.prototype.isDone=function(){return this._isDone},Ua.prototype.isBoundaryPoint=function(h,d){return!(null===d||!this.isBoundaryPointInternal(h,d[0])&&!this.isBoundaryPointInternal(h,d[1]))},Ua.prototype.setBoundaryNodes=function(h,d){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=h,this._bdyNodes[1]=d},Ua.prototype.addIntersections=function(h,d,m,v){if(h===m&&d===v)return null;this.numTests++;var b=h.getCoordinates()[d],B=h.getCoordinates()[d+1],z=m.getCoordinates()[v],q=m.getCoordinates()[v+1];this._li.computeIntersection(b,B,z,q),this._li.hasIntersection()&&(this._recordIsolated&&(h.setIsolated(!1),m.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(h,d,m,v)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(h.addIntersections(this._li,d,0),m.addIntersections(this._li,v,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Ua.prototype.interfaces_=function(){return[]},Ua.prototype.getClass=function(){return Ua},Ua.isAdjacentSegments=function(h,d){return 1===Math.abs(h-d)};var H6=function(h){function d(){h.call(this),this.events=new rn,this.nOverlaps=null}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.prepareEvents=function(){Ks.sort(this.events);for(var m=0;m<this.events.size();m++){var v=this.events.get(m);v.isDelete()&&v.getInsertEvent().setDeleteEventIndex(m)}},d.prototype.computeIntersections=function(){if(1===arguments.length){var m=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var v=0;v<this.events.size();v++){var b=this.events.get(v);if(b.isInsert()&&this.processOverlaps(v,b.getDeleteEventIndex(),b,m),m.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Ua&&At(arguments[0],Qo)&&At(arguments[1],Qo)){var B=arguments[0],z=arguments[1],q=arguments[2];this.addEdges(B,B),this.addEdges(z,z),this.computeIntersections(q)}else if("boolean"==typeof arguments[2]&&At(arguments[0],Qo)&&arguments[1]instanceof Ua){var pe=arguments[0],Ue=arguments[1];arguments[2]?this.addEdges(pe,null):this.addEdges(pe),this.computeIntersections(Ue)}},d.prototype.addEdge=function(m,v){for(var b=m.getMonotoneChainEdge(),B=b.getStartIndexes(),z=0;z<B.length-1;z++){var q=new Jl(b,z),pe=new _c(v,b.getMinX(z),q);this.events.add(pe),this.events.add(new _c(b.getMaxX(z),pe))}},d.prototype.processOverlaps=function(m,v,b,B){for(var z=b.getObject(),q=m;q<v;q++){var pe=this.events.get(q);if(pe.isInsert()){var Ue=pe.getObject();b.isSameLabel(pe)||(z.computeIntersections(Ue,B),this.nOverlaps++)}}},d.prototype.addEdges=function(){if(1===arguments.length)for(var m=arguments[0].iterator();m.hasNext();){var v=m.next();this.addEdge(v,v)}else if(2===arguments.length)for(var B=arguments[1],z=arguments[0].iterator();z.hasNext();){var q=z.next();this.addEdge(q,B)}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(ra),o2=function(){this._min=Y.POSITIVE_INFINITY,this._max=Y.NEGATIVE_INFINITY},b2={NodeComparator:{configurable:!0}};o2.prototype.getMin=function(){return this._min},o2.prototype.intersects=function(h,d){return!(this._min>d||this._max<h)},o2.prototype.getMax=function(){return this._max},o2.prototype.toString=function(){return it.toLineString(new $(this._min,0),new $(this._max,0))},o2.prototype.interfaces_=function(){return[]},o2.prototype.getClass=function(){return o2},b2.NodeComparator.get=function(){return fh},Object.defineProperties(o2,b2);var fh=function(){};fh.prototype.compare=function(h,d){var b=(h._min+h._max)/2,B=(d._min+d._max)/2;return b<B?-1:b>B?1:0},fh.prototype.interfaces_=function(){return[ce]},fh.prototype.getClass=function(){return fh};var z6=function(h){function d(){h.call(this),this._item=null;var v=arguments[1],b=arguments[2];this._min=arguments[0],this._max=v,this._item=b}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.query=function(m,v,b){if(!this.intersects(m,v))return null;b.visitItem(this._item)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(o2),H3=function(h){function d(){h.call(this),this._node1=null,this._node2=null;var v=arguments[1];this._node1=arguments[0],this._node2=v,this.buildExtent(this._node1,this._node2)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.buildExtent=function(m,v){this._min=Math.min(m._min,v._min),this._max=Math.max(m._max,v._max)},d.prototype.query=function(m,v,b){if(!this.intersects(m,v))return null;null!==this._node1&&this._node1.query(m,v,b),null!==this._node2&&this._node2.query(m,v,b)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(o2),sa=function(){this._leaves=new rn,this._root=null,this._level=0};sa.prototype.buildTree=function(){Ks.sort(this._leaves,new o2.NodeComparator);for(var h=this._leaves,d=null,m=new rn;;){if(this.buildLevel(h,m),1===m.size())return m.get(0);d=h,h=m,m=d}},sa.prototype.insert=function(h,d,m){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new z6(h,d,m))},sa.prototype.query=function(h,d,m){this.init(),this._root.query(h,d,m)},sa.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},sa.prototype.printNode=function(h){$t.out.println(it.toLineString(new $(h._min,this._level),new $(h._max,this._level)))},sa.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},sa.prototype.buildLevel=function(h,d){this._level++,d.clear();for(var m=0;m<h.size();m+=2){var v=h.get(m);if(null===(m+1<h.size()?h.get(m):null))d.add(v);else{var b=new H3(h.get(m),h.get(m+1));d.add(b)}}},sa.prototype.interfaces_=function(){return[]},sa.prototype.getClass=function(){return sa};var p0=function(){this._items=new rn};p0.prototype.visitItem=function(h){this._items.add(h)},p0.prototype.getItems=function(){return this._items},p0.prototype.interfaces_=function(){return[Xl]},p0.prototype.getClass=function(){return p0};var z3=function(){this._index=null;var h=arguments[0];if(!At(h,v2))throw new X("Argument must be Polygonal");this._index=new O3(h)},O6={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};z3.prototype.locate=function(h){var d=new Kt(h),m=new x2(d);return this._index.query(h.y,h.y,m),d.getLocation()},z3.prototype.interfaces_=function(){return[sn]},z3.prototype.getClass=function(){return z3},O6.SegmentVisitor.get=function(){return x2},O6.IntervalIndexedGeometry.get=function(){return O3},Object.defineProperties(z3,O6);var x2=function(){this._counter=null,this._counter=arguments[0]};x2.prototype.visitItem=function(h){var d=h;this._counter.countSegment(d.getCoordinate(0),d.getCoordinate(1))},x2.prototype.interfaces_=function(){return[Xl]},x2.prototype.getClass=function(){return x2};var O3=function(){this._index=new sa,this.init(arguments[0])};O3.prototype.init=function(h){for(var d=o1.getLines(h).iterator();d.hasNext();){var m=d.next().getCoordinates();this.addLine(m)}},O3.prototype.addLine=function(h){for(var d=1;d<h.length;d++){var m=new li(h[d-1],h[d]),v=Math.min(m.p0.y,m.p1.y),b=Math.max(m.p0.y,m.p1.y);this._index.insert(v,b,m)}},O3.prototype.query=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1],m=new p0;return this._index.query(h,d,m),m.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},O3.prototype.interfaces_=function(){return[]},O3.prototype.getClass=function(){return O3};var hu=function(h){function d(){if(h.call(this),this._parentGeom=null,this._lineEdgeMap=new pr,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new C2,2===arguments.length){var v=arguments[1],b=_r.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=v,this._boundaryNodeRule=b,null!==v&&this.add(v)}else if(3===arguments.length){var z=arguments[1],q=arguments[2];this._argIndex=arguments[0],this._parentGeom=z,this._boundaryNodeRule=q,null!==z&&this.add(z)}}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.insertBoundaryPoint=function(m,v){var b=this._nodes.addNode(v).getLabel(),B=1;b.getLocation(m,un.ON)===oe.BOUNDARY&&B++;var z=d.determineBoundary(this._boundaryNodeRule,B);b.setLocation(m,z)},d.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var B=arguments[1],z=arguments[2],q=new Ua(arguments[0],!0,!1);return q.setIsDoneIfProperInt(z),this.createEdgeSetIntersector().computeIntersections(this._edges,q,B||!(this._parentGeom instanceof z2||this._parentGeom instanceof Wo||this._parentGeom instanceof Ic)),this.addSelfIntersectionNodes(this._argIndex),q}},d.prototype.computeSplitEdges=function(m){for(var v=this._edges.iterator();v.hasNext();)v.next().eiList.addSplitEdges(m)},d.prototype.computeEdgeIntersections=function(m,v,b){var B=new Ua(v,b,!0);return B.setBoundaryNodes(this.getBoundaryNodes(),m.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,m._edges,B),B},d.prototype.getGeometry=function(){return this._parentGeom},d.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},d.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},d.prototype.addPoint=function(){if(arguments[0]instanceof uc){var m=arguments[0].getCoordinate();this.insertPoint(this._argIndex,m,oe.INTERIOR)}else arguments[0]instanceof $&&this.insertPoint(this._argIndex,arguments[0],oe.INTERIOR)},d.prototype.addPolygon=function(m){this.addPolygonRing(m.getExteriorRing(),oe.EXTERIOR,oe.INTERIOR);for(var v=0;v<m.getNumInteriorRing();v++){var b=m.getInteriorRingN(v);this.addPolygonRing(b,oe.INTERIOR,oe.EXTERIOR)}},d.prototype.addEdge=function(m){this.insertEdge(m);var v=m.getCoordinates();this.insertPoint(this._argIndex,v[0],oe.BOUNDARY),this.insertPoint(this._argIndex,v[v.length-1],oe.BOUNDARY)},d.prototype.addLineString=function(m){var v=Bi.removeRepeatedPoints(m.getCoordinates());if(v.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=v[0],null;var b=new B3(v,new fs(this._argIndex,oe.INTERIOR));this._lineEdgeMap.put(m,b),this.insertEdge(b),J.isTrue(v.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,v[0]),this.insertBoundaryPoint(this._argIndex,v[v.length-1])},d.prototype.getInvalidPoint=function(){return this._invalidPoint},d.prototype.getBoundaryPoints=function(){for(var m=this.getBoundaryNodes(),v=new Array(m.size()).fill(null),b=0,B=m.iterator();B.hasNext();){var z=B.next();v[b++]=z.getCoordinate().copy()}return v},d.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},d.prototype.addSelfIntersectionNode=function(m,v,b){if(this.isBoundaryNode(m,v))return null;b===oe.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(m,v):this.insertPoint(m,v,b)},d.prototype.addPolygonRing=function(m,v,b){if(m.isEmpty())return null;var B=Bi.removeRepeatedPoints(m.getCoordinates());if(B.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=B[0],null;var z=v,q=b;Mt.isCCW(B)&&(z=b,q=v);var pe=new B3(B,new fs(this._argIndex,oe.BOUNDARY,z,q));this._lineEdgeMap.put(m,pe),this.insertEdge(pe),this.insertPoint(this._argIndex,B[0],oe.BOUNDARY)},d.prototype.insertPoint=function(m,v,b){var B=this._nodes.addNode(v),z=B.getLabel();null===z?B._label=new fs(m,b):z.setLocation(m,b)},d.prototype.createEdgeSetIntersector=function(){return new H6},d.prototype.addSelfIntersectionNodes=function(m){for(var v=this._edges.iterator();v.hasNext();)for(var b=v.next(),B=b.getLabel().getLocation(m),z=b.eiList.iterator();z.hasNext();){var q=z.next();this.addSelfIntersectionNode(m,q.coord,B)}},d.prototype.add=function(){if(1!==arguments.length)return h.prototype.add.apply(this,arguments);var m=arguments[0];if(m.isEmpty())return null;if(m instanceof Ic&&(this._useBoundaryDeterminationRule=!1),m instanceof Wo)this.addPolygon(m);else if(m instanceof ho)this.addLineString(m);else if(m instanceof uc)this.addPoint(m);else if(m instanceof ql)this.addCollection(m);else if(m instanceof T3)this.addCollection(m);else if(m instanceof Ic)this.addCollection(m);else{if(!(m instanceof _1))throw new Error(m.getClass().getName());this.addCollection(m)}},d.prototype.addCollection=function(m){for(var v=0;v<m.getNumGeometries();v++){var b=m.getGeometryN(v);this.add(b)}},d.prototype.locate=function(m){return At(this._parentGeom,v2)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new z3(this._parentGeom)),this._areaPtLocator.locate(m)):this._ptLocator.locate(m,this._parentGeom)},d.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):h.prototype.findEdge.apply(this,arguments)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.determineBoundary=function(m,v){return m.isInBoundary(v)?oe.BOUNDARY:oe.INTERIOR},d}(wn),zi=function(){if(this._li=new mt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var h=arguments[0];this.setComputationPrecision(h.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new hu(0,h)}else if(2===arguments.length){var d=arguments[0],m=arguments[1],v=_r.OGC_SFS_BOUNDARY_RULE;d.getPrecisionModel().compareTo(m.getPrecisionModel())>=0?this.setComputationPrecision(d.getPrecisionModel()):this.setComputationPrecision(m.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new hu(0,d,v),this._arg[1]=new hu(1,m,v)}else if(3===arguments.length){var b=arguments[0],B=arguments[1],z=arguments[2];b.getPrecisionModel().compareTo(B.getPrecisionModel())>=0?this.setComputationPrecision(b.getPrecisionModel()):this.setComputationPrecision(B.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new hu(0,b,z),this._arg[1]=new hu(1,B,z)}};zi.prototype.getArgGeometry=function(h){return this._arg[h].getGeometry()},zi.prototype.setComputationPrecision=function(h){this._resultPrecisionModel=h,this._li.setPrecisionModel(this._resultPrecisionModel)},zi.prototype.interfaces_=function(){return[]},zi.prototype.getClass=function(){return zi};var N3=function(){};N3.prototype.interfaces_=function(){return[]},N3.prototype.getClass=function(){return N3},N3.map=function(){if(arguments[0]instanceof yn&&At(arguments[1],N3.MapOp)){for(var h=arguments[0],d=arguments[1],m=new rn,v=0;v<h.getNumGeometries();v++){var b=d.map(h.getGeometryN(v));null!==b&&m.add(b)}return h.getFactory().buildGeometry(m)}if(At(arguments[0],ys)&&At(arguments[1],N3.MapOp)){for(var B=arguments[0],z=arguments[1],q=new rn,pe=B.iterator();pe.hasNext();){var Ue=pe.next(),gt=z.map(Ue);null!==gt&&q.add(gt)}return q}},N3.MapOp=function(){};var Oi=function(h){function d(){var m=arguments[0];h.call(this,m,arguments[1]),this._ptLocator=new C2,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new fr,this._resultPolyList=new rn,this._resultLineList=new rn,this._resultPointList=new rn,this._graph=new wn(new ao),this._geomFact=m.getFactory()}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.insertUniqueEdge=function(m){var v=this._edgeList.findEqualEdge(m);if(null!==v){var b=v.getLabel(),B=m.getLabel();v.isPointwiseEqual(m)||(B=new fs(m.getLabel())).flip();var z=v.getDepth();z.isNull()&&z.add(b),z.add(B),b.merge(B)}else this._edgeList.add(m)},d.prototype.getGraph=function(){return this._graph},d.prototype.cancelDuplicateResultEdges=function(){for(var m=this._graph.getEdgeEnds().iterator();m.hasNext();){var v=m.next(),b=v.getSym();v.isInResult()&&b.isInResult()&&(v.setInResult(!1),b.setInResult(!1))}},d.prototype.isCoveredByLA=function(m){return!!this.isCovered(m,this._resultLineList)||!!this.isCovered(m,this._resultPolyList)},d.prototype.computeGeometry=function(m,v,b,B){var z=new rn;return z.addAll(m),z.addAll(v),z.addAll(b),z.isEmpty()?d.createEmptyResult(B,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(z)},d.prototype.mergeSymLabels=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();)m.next().getEdges().mergeSymLabels()},d.prototype.isCovered=function(m,v){for(var b=v.iterator();b.hasNext();){var B=b.next();if(this._ptLocator.locate(m,B)!==oe.EXTERIOR)return!0}return!1},d.prototype.replaceCollapsedEdges=function(){for(var m=new rn,v=this._edgeList.iterator();v.hasNext();){var b=v.next();b.isCollapsed()&&(v.remove(),m.add(b.getCollapsedEdge()))}this._edgeList.addAll(m)},d.prototype.updateNodeLabelling=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();){var v=m.next(),b=v.getEdges().getLabel();v.getLabel().merge(b)}},d.prototype.getResultGeometry=function(m){return this.computeOverlay(m),this._resultGeom},d.prototype.insertUniqueEdges=function(m){for(var v=m.iterator();v.hasNext();){var b=v.next();this.insertUniqueEdge(b)}},d.prototype.computeOverlay=function(m){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var v=new rn;this._arg[0].computeSplitEdges(v),this._arg[1].computeSplitEdges(v),this.insertUniqueEdges(v),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),F3.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(m),this.cancelDuplicateResultEdges();var b=new r1(this._geomFact);b.add(this._graph),this._resultPolyList=b.getPolygons();var B=new a1(this,this._geomFact,this._ptLocator);this._resultLineList=B.build(m);var z=new lu(this,this._geomFact,this._ptLocator);this._resultPointList=z.build(m),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,m)},d.prototype.labelIncompleteNode=function(m,v){var b=this._ptLocator.locate(m.getCoordinate(),this._arg[v].getGeometry());m.getLabel().setLocation(v,b)},d.prototype.copyPoints=function(m){for(var v=this._arg[m].getNodeIterator();v.hasNext();){var b=v.next();this._graph.addNode(b.getCoordinate()).setLabel(m,b.getLabel().getLocation(m))}},d.prototype.findResultAreaEdges=function(m){for(var v=this._graph.getEdgeEnds().iterator();v.hasNext();){var b=v.next(),B=b.getLabel();B.isArea()&&!b.isInteriorAreaEdge()&&d.isResultOfOp(B.getLocation(0,un.RIGHT),B.getLocation(1,un.RIGHT),m)&&b.setInResult(!0)}},d.prototype.computeLabelsFromDepths=function(){for(var m=this._edgeList.iterator();m.hasNext();){var v=m.next(),b=v.getLabel(),B=v.getDepth();if(!B.isNull()){B.normalize();for(var z=0;z<2;z++)b.isNull(z)||!b.isArea()||B.isNull(z)||(0===B.getDelta(z)?b.toLine(z):(J.isTrue(!B.isNull(z,un.LEFT),"depth of LEFT side has not been initialized"),b.setLocation(z,un.LEFT,B.getLocation(z,un.LEFT)),J.isTrue(!B.isNull(z,un.RIGHT),"depth of RIGHT side has not been initialized"),b.setLocation(z,un.RIGHT,B.getLocation(z,un.RIGHT))))}}},d.prototype.computeLabelling=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();)m.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},d.prototype.labelIncompleteNodes=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();){var v=m.next(),b=v.getLabel();v.isIsolated()&&(b.isNull(0)?this.labelIncompleteNode(v,0):this.labelIncompleteNode(v,1)),v.getEdges().updateLabelling(b)}},d.prototype.isCoveredByA=function(m){return!!this.isCovered(m,this._resultPolyList)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(zi);Oi.overlayOp=function(h,d,m){return new Oi(h,d).getResultGeometry(m)},Oi.intersection=function(h,d){if(h.isEmpty()||d.isEmpty())return Oi.createEmptyResult(Oi.INTERSECTION,h,d,h.getFactory());if(h.isGeometryCollection()){var m=d;return d0.map(h,{interfaces_:function(){return[N3.MapOp]},map:function(v){return v.intersection(m)}})}return h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),T1.overlayOp(h,d,Oi.INTERSECTION)},Oi.symDifference=function(h,d){if(h.isEmpty()||d.isEmpty()){if(h.isEmpty()&&d.isEmpty())return Oi.createEmptyResult(Oi.SYMDIFFERENCE,h,d,h.getFactory());if(h.isEmpty())return d.copy();if(d.isEmpty())return h.copy()}return h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),T1.overlayOp(h,d,Oi.SYMDIFFERENCE)},Oi.resultDimension=function(h,d,m){var v=d.getDimension(),b=m.getDimension(),B=-1;switch(h){case Oi.INTERSECTION:B=Math.min(v,b);break;case Oi.UNION:B=Math.max(v,b);break;case Oi.DIFFERENCE:B=v;break;case Oi.SYMDIFFERENCE:B=Math.max(v,b)}return B},Oi.createEmptyResult=function(h,d,m,v){var b=null;switch(Oi.resultDimension(h,d,m)){case-1:b=v.createGeometryCollection(new Array(0).fill(null));break;case 0:b=v.createPoint();break;case 1:b=v.createLineString();break;case 2:b=v.createPolygon()}return b},Oi.difference=function(h,d){return h.isEmpty()?Oi.createEmptyResult(Oi.DIFFERENCE,h,d,h.getFactory()):d.isEmpty()?h.copy():(h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),T1.overlayOp(h,d,Oi.DIFFERENCE))},Oi.isResultOfOp=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1],m=h.getLocation(0),v=h.getLocation(1);return Oi.isResultOfOp(m,v,d)}if(3===arguments.length){var b=arguments[0],B=arguments[1];switch(b===oe.BOUNDARY&&(b=oe.INTERIOR),B===oe.BOUNDARY&&(B=oe.INTERIOR),arguments[2]){case Oi.INTERSECTION:return b===oe.INTERIOR&&B===oe.INTERIOR;case Oi.UNION:return b===oe.INTERIOR||B===oe.INTERIOR;case Oi.DIFFERENCE:return b===oe.INTERIOR&&B!==oe.INTERIOR;case Oi.SYMDIFFERENCE:return b===oe.INTERIOR&&B!==oe.INTERIOR||b!==oe.INTERIOR&&B===oe.INTERIOR}return!1}},Oi.INTERSECTION=1,Oi.UNION=2,Oi.DIFFERENCE=3,Oi.SYMDIFFERENCE=4;var M2=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new C2,this._seg=new li;var h=arguments[0],d=arguments[1];this._g=h,this._boundaryDistanceTolerance=d,this._linework=this.extractLinework(h)};M2.prototype.isWithinToleranceOfBoundary=function(h){for(var d=0;d<this._linework.getNumGeometries();d++)for(var m=this._linework.getGeometryN(d).getCoordinateSequence(),v=0;v<m.size()-1;v++)if(m.getCoordinate(v,this._seg.p0),m.getCoordinate(v+1,this._seg.p1),this._seg.distance(h)<=this._boundaryDistanceTolerance)return!0;return!1},M2.prototype.getLocation=function(h){return this.isWithinToleranceOfBoundary(h)?oe.BOUNDARY:this._ptLocator.locate(h,this._g)},M2.prototype.extractLinework=function(h){var d=new g0;h.apply(d);var m=d.getLinework(),v=qi.toLineStringArray(m);return h.getFactory().createMultiLineString(v)},M2.prototype.interfaces_=function(){return[]},M2.prototype.getClass=function(){return M2};var g0=function(){this._linework=null,this._linework=new rn};g0.prototype.getLinework=function(){return this._linework},g0.prototype.filter=function(h){if(h instanceof Wo){var d=h;this._linework.add(d.getExteriorRing());for(var m=0;m<d.getNumInteriorRing();m++)this._linework.add(d.getInteriorRingN(m))}},g0.prototype.interfaces_=function(){return[Fa]},g0.prototype.getClass=function(){return g0};var C4=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};C4.prototype.extractPoints=function(h,d,m){for(var v=h.getCoordinates(),b=0;b<v.length-1;b++)this.computeOffsetPoints(v[b],v[b+1],d,m)},C4.prototype.setSidesToGenerate=function(h,d){this._doLeft=h,this._doRight=d},C4.prototype.getPoints=function(h){for(var d=new rn,m=o1.getLines(this._g).iterator();m.hasNext();){var v=m.next();this.extractPoints(v,h,d)}return d},C4.prototype.computeOffsetPoints=function(h,d,m,v){var b=d.x-h.x,B=d.y-h.y,z=Math.sqrt(b*b+B*B),q=m*b/z,pe=m*B/z,Ue=(d.x+h.x)/2,gt=(d.y+h.y)/2;if(this._doLeft){var pt=new $(Ue-pe,gt+q);v.add(pt)}if(this._doRight){var hn=new $(Ue+pe,gt-q);v.add(hn)}},C4.prototype.interfaces_=function(){return[]},C4.prototype.getClass=function(){return C4};var X1=function h(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=h.TOLERANCE,this._testCoords=new rn;var d=arguments[0],m=arguments[1],v=arguments[2];this._boundaryDistanceTolerance=h.computeBoundaryDistanceTolerance(d,m),this._geom=[d,m,v],this._locFinder=[new M2(this._geom[0],this._boundaryDistanceTolerance),new M2(this._geom[1],this._boundaryDistanceTolerance),new M2(this._geom[2],this._boundaryDistanceTolerance)]},vp={TOLERANCE:{configurable:!0}};X1.prototype.reportResult=function(h,d,m){$t.out.println("Overlay result invalid - A:"+oe.toLocationSymbol(d[0])+" B:"+oe.toLocationSymbol(d[1])+" expected:"+(m?"i":"e")+" actual:"+oe.toLocationSymbol(d[2]))},X1.prototype.isValid=function(h){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(h)},X1.prototype.checkValid=function(){if(1===arguments.length){for(var h=arguments[0],d=0;d<this._testCoords.size();d++){var m=this._testCoords.get(d);if(!this.checkValid(h,m))return this._invalidLocation=m,!1}return!0}if(2===arguments.length){var v=arguments[0],b=arguments[1];return this._location[0]=this._locFinder[0].getLocation(b),this._location[1]=this._locFinder[1].getLocation(b),this._location[2]=this._locFinder[2].getLocation(b),!!X1.hasLocation(this._location,oe.BOUNDARY)||this.isValidResult(v,this._location)}},X1.prototype.addTestPts=function(h){var d=new C4(h);this._testCoords.addAll(d.getPoints(5*this._boundaryDistanceTolerance))},X1.prototype.isValidResult=function(h,d){var m=Oi.isResultOfOp(d[0],d[1],h),v=!(m^d[2]===oe.INTERIOR);return v||this.reportResult(h,d,m),v},X1.prototype.getInvalidLocation=function(){return this._invalidLocation},X1.prototype.interfaces_=function(){return[]},X1.prototype.getClass=function(){return X1},X1.hasLocation=function(h,d){for(var m=0;m<3;m++)if(h[m]===d)return!0;return!1},X1.computeBoundaryDistanceTolerance=function(h,d){return Math.min(Lo.computeSizeBasedSnapTolerance(h),Lo.computeSizeBasedSnapTolerance(d))},X1.isValid=function(h,d,m,v){return new X1(h,d,v).isValid(m)},vp.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(X1,vp);var Rc=function h(d){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=h.extractFactory(d),this._inputGeoms=d};Rc.prototype.extractElements=function(h,d){if(null===h)return null;for(var m=0;m<h.getNumGeometries();m++){var v=h.getGeometryN(m);this._skipEmpty&&v.isEmpty()||d.add(v)}},Rc.prototype.combine=function(){for(var h=new rn,d=this._inputGeoms.iterator();d.hasNext();){var m=d.next();this.extractElements(m,h)}return 0===h.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(h)},Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc},Rc.combine=function(){return 1===arguments.length?new Rc(arguments[0]).combine():2===arguments.length?new Rc(Rc.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Rc(Rc.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Rc.extractFactory=function(h){return h.isEmpty()?null:h.iterator().next().getFactory()},Rc.createList=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1],m=new rn;return m.add(h),m.add(d),m}if(3===arguments.length){var v=arguments[0],b=arguments[1],B=arguments[2],z=new rn;return z.add(v),z.add(b),z.add(B),z}};var Dt=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new rn)},Mr={STRTREE_NODE_CAPACITY:{configurable:!0}};Dt.prototype.reduceToGeometries=function(h){for(var d=new rn,m=h.iterator();m.hasNext();){var v=m.next(),b=null;At(v,Qo)?b=this.unionTree(v):v instanceof yn&&(b=v),d.add(b)}return d},Dt.prototype.extractByEnvelope=function(h,d,m){for(var v=new rn,b=0;b<d.getNumGeometries();b++){var B=d.getGeometryN(b);B.getEnvelopeInternal().intersects(h)?v.add(B):m.add(B)}return this._geomFactory.buildGeometry(v)},Dt.prototype.unionOptimized=function(h,d){var m=h.getEnvelopeInternal(),v=d.getEnvelopeInternal();if(!m.intersects(v))return Rc.combine(h,d);if(h.getNumGeometries()<=1&&d.getNumGeometries()<=1)return this.unionActual(h,d);var b=m.intersection(v);return this.unionUsingEnvelopeIntersection(h,d,b)},Dt.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var h=new F6(Dt.STRTREE_NODE_CAPACITY),d=this._inputPolys.iterator();d.hasNext();){var m=d.next();h.insert(m.getEnvelopeInternal(),m)}this._inputPolys=null;var v=h.itemsTree();return this.unionTree(v)},Dt.prototype.binaryUnion=function(){if(1===arguments.length){var h=arguments[0];return this.binaryUnion(h,0,h.size())}if(3===arguments.length){var d=arguments[0],m=arguments[1],v=arguments[2];if(v-m<=1){var b=Dt.getGeometry(d,m);return this.unionSafe(b,null)}if(v-m==2)return this.unionSafe(Dt.getGeometry(d,m),Dt.getGeometry(d,m+1));var B=Math.trunc((v+m)/2),z=this.binaryUnion(d,m,B),q=this.binaryUnion(d,B,v);return this.unionSafe(z,q)}},Dt.prototype.repeatedUnion=function(h){for(var d=null,m=h.iterator();m.hasNext();){var v=m.next();d=null===d?v.copy():d.union(v)}return d},Dt.prototype.unionSafe=function(h,d){return null===h&&null===d?null:null===h?d.copy():null===d?h.copy():this.unionOptimized(h,d)},Dt.prototype.unionActual=function(h,d){return Dt.restrictToPolygons(h.union(d))},Dt.prototype.unionTree=function(h){var d=this.reduceToGeometries(h);return this.binaryUnion(d)},Dt.prototype.unionUsingEnvelopeIntersection=function(h,d,m){var v=new rn,b=this.extractByEnvelope(m,h,v),B=this.extractByEnvelope(m,d,v),z=this.unionActual(b,B);return v.add(z),Rc.combine(v)},Dt.prototype.bufferUnion=function(){if(1===arguments.length){var h=arguments[0];return h.get(0).getFactory().buildGeometry(h).buffer(0)}if(2===arguments.length){var d=arguments[0],m=arguments[1];return d.getFactory().createGeometryCollection([d,m]).buffer(0)}},Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},Dt.restrictToPolygons=function(h){if(At(h,v2))return h;var d=vl.getPolygons(h);return 1===d.size()?d.get(0):h.getFactory().createMultiPolygon(qi.toPolygonArray(d))},Dt.getGeometry=function(h,d){return d>=h.size()?null:h.get(d)},Dt.union=function(h){return new Dt(h).union()},Mr.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Dt,Mr);var gi=function(){};gi.prototype.interfaces_=function(){return[]},gi.prototype.getClass=function(){return gi},gi.union=function(h,d){if(h.isEmpty()||d.isEmpty()){if(h.isEmpty()&&d.isEmpty())return Oi.createEmptyResult(Oi.UNION,h,d,h.getFactory());if(h.isEmpty())return d.copy();if(d.isEmpty())return h.copy()}return h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),T1.overlayOp(h,d,Oi.UNION)},Me.GeoJSONReader=D3,Me.GeoJSONWriter=Jc,Me.OverlayOp=Oi,Me.UnionOp=gi,Me.BufferOp=Dr,Object.defineProperty(Me,"__esModule",{value:!0})}(nt)}},Nt=>{Nt(Nt.s=6683)}]);