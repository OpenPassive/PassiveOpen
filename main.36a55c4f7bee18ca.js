(self.webpackChunkpassiveopen=self.webpackChunkpassiveopen||[]).push([[179],{155:(Gu,Wu,da)=>{"use strict";function xn(n){return"function"==typeof n}function ei(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const ju=ei(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,s)=>`${s+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function w1(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class fi{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const r of t)r.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(xn(i))try{i()}catch(r){e=r instanceof ju?r.errors:[r]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const r of s)try{A5(r)}catch(o){e=e??[],o instanceof ju?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ju(e)}}add(e){var t;if(e&&e!==this)if(this.closed)A5(e);else{if(e instanceof fi){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&w1(t,e)}remove(e){const{_finalizers:t}=this;t&&w1(t,e),e instanceof fi&&e._removeParent(this)}}fi.EMPTY=(()=>{const n=new fi;return n.closed=!0,n})();const fc=fi.EMPTY;function E5(n){return n instanceof fi||n&&"closed"in n&&xn(n.remove)&&xn(n.add)&&xn(n.unsubscribe)}function A5(n){xn(n)?n():n.unsubscribe()}const S1={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Za={setTimeout(n,e,...t){const{delegate:i}=Za;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Za;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function W4(n){Za.setTimeout(()=>{const{onUnhandledError:e}=S1;if(!e)throw n;e(n)})}function pc(){}const mc=ge("C",void 0,void 0);function ge(n,e,t){return{kind:n,value:e,error:t}}let Ue=null;function _t(n){if(S1.useDeprecatedSynchronousErrorHandling){const e=!Ue;if(e&&(Ue={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Ue;if(Ue=null,t)throw i}}else n()}class vt extends fi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,E5(e)&&e.add(this)):this.destination=Vl}static create(e,t,i){return new mn(e,t,i)}next(e){this.isStopped?Yi(function ce(n){return ge("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Yi(function D5(n){return ge("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Yi(mc,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const St=Function.prototype.bind;function cn(n,e){return St.call(n,e)}class An{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){pi(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){pi(i)}else pi(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){pi(t)}}}class mn extends vt{constructor(e,t,i){let s;if(super(),xn(e)||!e)s={next:e??void 0,error:t??void 0,complete:i??void 0};else{let r;this&&S1.useDeprecatedNextContext?(r=Object.create(e),r.unsubscribe=()=>this.unsubscribe(),s={next:e.next&&cn(e.next,r),error:e.error&&cn(e.error,r),complete:e.complete&&cn(e.complete,r)}):s=e}this.destination=new An(s)}}function pi(n){S1.useDeprecatedSynchronousErrorHandling?function bt(n){S1.useDeprecatedSynchronousErrorHandling&&Ue&&(Ue.errorThrown=!0,Ue.error=n)}(n):W4(n)}function Yi(n,e){const{onStoppedNotification:t}=S1;t&&Za.setTimeout(()=>t(n,e))}const Vl={closed:!0,next:pc,error:function qn(n){throw n},complete:pc},T1="function"==typeof Symbol&&Symbol.observable||"@@observable";function kr(n){return n}function L5(n){return 0===n.length?kr:1===n.length?n[0]:function(t){return n.reduce((i,s)=>s(i),t)}}let Tn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,s){const r=function bse(n){return n&&n instanceof vt||function vo(n){return n&&xn(n.next)&&xn(n.error)&&xn(n.complete)}(n)&&E5(n)}(t)?t:new mn(t,i,s);return _t(()=>{const{operator:o,source:a}=this;r.add(o?o.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=vc(i))((s,r)=>{const o=new mn({next:a=>{try{t(a)}catch(c){r(c),o.unsubscribe()}},error:r,complete:s});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[T1](){return this}pipe(...t){return L5(t)(this)}toPromise(t){return new(t=vc(t))((i,s)=>{let r;this.subscribe(o=>r=o,o=>s(o),()=>i(r))})}}return n.create=e=>new n(e),n})();function vc(n){var e;return null!==(e=n??S1.Promise)&&void 0!==e?e:Promise}const xse=ei(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Tt=(()=>{class n extends Tn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new zA(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new xse}next(t){_t(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){_t(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){_t(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:s,observers:r}=this;return i||s?fc:(this.currentObservers=null,r.push(t),new fi(()=>{this.currentObservers=null,w1(r,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:s,isStopped:r}=this;i?t.error(s):r&&t.complete()}asObservable(){const t=new Tn;return t.source=this,t}}return n.create=(e,t)=>new zA(e,t),n})();class zA extends Tt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:fc}}function kA(n){return xn(n?.lift)}function Fi(n){return e=>{if(kA(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function mi(n,e,t,i,s){return new Mse(n,e,t,i,s)}class Mse extends vt{constructor(e,t,i,s,r,o){super(e),this.onFinalize=r,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=s?function(a){try{s(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Pt(n,e){return Fi((t,i)=>{let s=0;t.subscribe(mi(i,r=>{i.next(n.call(e,r,s++))}))})}function Pl(n){return this instanceof Pl?(this.v=n,this):new Pl(n)}function Sse(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=t.apply(n,e||[]),r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(d){i[d]&&(s[d]=function(f){return new Promise(function(p,m){r.push([d,f,p,m])>1||a(d,f)})})}function a(d,f){try{!function c(d){d.value instanceof Pl?Promise.resolve(d.value.v).then(l,u):h(r[0][2],d)}(i[d](f))}catch(p){h(r[0][3],p)}}function l(d){a("next",d)}function u(d){a("throw",d)}function h(d,f){d(f),r.shift(),r.length&&a(r[0][0],r[0][1])}}function Tse(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function HA(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(o){return new Promise(function(a,c){!function s(r,o,a,c){Promise.resolve(c).then(function(l){r({value:l,done:a})},o)}(a,c,(o=n[r](o)).done,o.value)})}}}const mv=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function VA(n){return xn(n?.then)}function PA(n){return xn(n[T1])}function OA(n){return Symbol.asyncIterator&&xn(n?.[Symbol.asyncIterator])}function NA(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const FA=function Ase(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function BA(n){return xn(n?.[FA])}function UA(n){return Sse(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:s}=yield Pl(t.read());if(s)return yield Pl(void 0);yield yield Pl(i)}}finally{t.releaseLock()}})}function GA(n){return xn(n?.getReader)}function Rr(n){if(n instanceof Tn)return n;if(null!=n){if(PA(n))return function Dse(n){return new Tn(e=>{const t=n[T1]();if(xn(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(mv(n))return function Lse(n){return new Tn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(VA(n))return function zse(n){return new Tn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,W4)})}(n);if(OA(n))return WA(n);if(BA(n))return function kse(n){return new Tn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(GA(n))return function Rse(n){return WA(UA(n))}(n)}throw NA(n)}function WA(n){return new Tn(e=>{(function Ise(n,e){var t,i,s,r;return function Cse(n,e,t,i){return new(t||(t=Promise))(function(r,o){function a(u){try{l(i.next(u))}catch(h){o(h)}}function c(u){try{l(i.throw(u))}catch(h){o(h)}}function l(u){u.done?r(u.value):function s(r){return r instanceof t?r:new t(function(o){o(r)})}(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Tse(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=t.return)&&(yield r.call(t))}finally{if(s)throw s.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Ka(n,e,t,i=0,s=!1){const r=e.schedule(function(){t(),s?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(r),!s)return r}function Zs(n,e,t=1/0){return xn(e)?Zs((i,s)=>Pt((r,o)=>e(i,r,s,o))(Rr(n(i,s))),t):("number"==typeof e&&(t=e),Fi((i,s)=>function Hse(n,e,t,i,s,r,o,a){const c=[];let l=0,u=0,h=!1;const d=()=>{h&&!c.length&&!l&&e.complete()},f=m=>l<i?p(m):c.push(m),p=m=>{r&&e.next(m),l++;let g=!1;Rr(t(m,u++)).subscribe(mi(e,v=>{s?.(v),r?f(v):e.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<i;){const v=c.shift();o?Ka(e,o,()=>p(v)):p(v)}d()}catch(v){e.error(v)}}))};return n.subscribe(mi(e,f,()=>{h=!0,d()})),()=>{a?.()}}(i,s,n,t)))}function j4(n=1/0){return Zs(kr,n)}const Qa=new Tn(n=>n.complete());function jA(n){return n&&xn(n.schedule)}function gv(n){return n[n.length-1]}function $A(n){return xn(gv(n))?n.pop():void 0}function $u(n){return jA(gv(n))?n.pop():void 0}function qA(n,e=0){return Fi((t,i)=>{t.subscribe(mi(i,s=>Ka(i,n,()=>i.next(s),e),()=>Ka(i,n,()=>i.complete(),e),s=>Ka(i,n,()=>i.error(s),e)))})}function YA(n,e=0){return Fi((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function XA(n,e){if(!n)throw new Error("Iterable cannot be null");return new Tn(t=>{Ka(t,e,()=>{const i=n[Symbol.asyncIterator]();Ka(t,e,()=>{i.next().then(s=>{s.done?t.complete():t.next(s.value)})},0,!0)})})}function ms(n,e){return e?function Gse(n,e){if(null!=n){if(PA(n))return function Ose(n,e){return Rr(n).pipe(YA(e),qA(e))}(n,e);if(mv(n))return function Fse(n,e){return new Tn(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(VA(n))return function Nse(n,e){return Rr(n).pipe(YA(e),qA(e))}(n,e);if(OA(n))return XA(n,e);if(BA(n))return function Bse(n,e){return new Tn(t=>{let i;return Ka(t,e,()=>{i=n[FA](),Ka(t,e,()=>{let s,r;try{({value:s,done:r}=i.next())}catch(o){return void t.error(o)}r?t.complete():t.next(s)},0,!0)}),()=>xn(i?.return)&&i.return()})}(n,e);if(GA(n))return function Use(n,e){return XA(UA(n),e)}(n,e)}throw NA(n)}(n,e):Rr(n)}function Ja(...n){const e=$u(n),t=function Pse(n,e){return"number"==typeof gv(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Rr(i[0]):j4(t)(ms(i,e)):Qa}function ZA(n={}){const{connector:e=(()=>new Tt),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:s=!0}=n;return r=>{let o,a,c,l=0,u=!1,h=!1;const d=()=>{a?.unsubscribe(),a=void 0},f=()=>{d(),o=c=void 0,u=h=!1},p=()=>{const m=o;f(),m?.unsubscribe()};return Fi((m,g)=>{l++,!h&&!u&&d();const v=c=c??e();g.add(()=>{l--,0===l&&!h&&!u&&(a=vv(p,s))}),v.subscribe(g),!o&&l>0&&(o=new mn({next:_=>v.next(_),error:_=>{h=!0,d(),a=vv(f,t,_),v.error(_)},complete:()=>{u=!0,d(),a=vv(f,i),v.complete()}}),Rr(m).subscribe(o))})(r)}}function vv(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new mn({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function ti(n){for(let e in n)if(n[e]===ti)return e;throw Error("Could not find renamed property on target object.")}function _v(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ni(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ni).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function yv(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Wse=ti({__forward_ref__:ti});function gn(n){return n.__forward_ref__=gn,n.toString=function(){return ni(this())},n}function Ut(n){return bv(n)?n():n}function bv(n){return"function"==typeof n&&n.hasOwnProperty(Wse)&&n.__forward_ref__===gn}class Se extends Error{constructor(e,t){super(function z5(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Zt(n){return"string"==typeof n?n:null==n?"":String(n)}function k5(n,e){throw new Se(-201,!1)}function yo(n,e){null==n&&function Wn(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function _e(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}const Zse=_e;function ut(n){return{providers:n.providers||[],imports:n.imports||[]}}function R5(n){return KA(n,I5)||KA(n,JA)}function KA(n,e){return n.hasOwnProperty(e)?n[e]:null}function QA(n){return n&&(n.hasOwnProperty(xv)||n.hasOwnProperty(ere))?n[xv]:null}const I5=ti({\u0275prov:ti}),xv=ti({\u0275inj:ti}),JA=ti({ngInjectableDef:ti}),ere=ti({ngInjectorDef:ti});var Rt=(()=>((Rt=Rt||{})[Rt.Default=0]="Default",Rt[Rt.Host=1]="Host",Rt[Rt.Self=2]="Self",Rt[Rt.SkipSelf=4]="SkipSelf",Rt[Rt.Optional=8]="Optional",Rt))();let Mv;function Zo(n){const e=Mv;return Mv=n,e}function eD(n,e,t){const i=R5(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Rt.Optional?null:void 0!==e?e:void k5(ni(n))}function _c(n){return{toString:n}.toString()}var E1=(()=>((E1=E1||{})[E1.OnPush=0]="OnPush",E1[E1.Default=1]="Default",E1))(),A1=(()=>{return(n=A1||(A1={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",A1;var n})();const ii=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),$4={},Fn=[],H5=ti({\u0275cmp:ti}),Cv=ti({\u0275dir:ti}),wv=ti({\u0275pipe:ti}),tD=ti({\u0275mod:ti}),t2=ti({\u0275fac:ti}),qu=ti({__NG_ELEMENT_ID__:ti});let nre=0;function dt(n){return _c(()=>{const t=!0===n.standalone,i={},s={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===E1.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Fn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||A1.Emulated,id:"c"+nre++,styles:n.styles||Fn,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.dependencies,o=n.features;return s.inputs=sD(n.inputs,i),s.outputs=sD(n.outputs),o&&o.forEach(a=>a(s)),s.directiveDefs=r?()=>("function"==typeof r?r():r).map(nD).filter(iD):null,s.pipeDefs=r?()=>("function"==typeof r?r():r).map(Hr).filter(iD):null,s})}function nD(n){return Yn(n)||Ir(n)}function iD(n){return null!==n}function ft(n){return _c(()=>({type:n.type,bootstrap:n.bootstrap||Fn,declarations:n.declarations||Fn,imports:n.imports||Fn,exports:n.exports||Fn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function sD(n,e){if(null==n)return $4;const t={};for(const i in n)if(n.hasOwnProperty(i)){let s=n[i],r=s;Array.isArray(s)&&(r=s[1],s=s[0]),t[s]=i,e&&(e[s]=r)}return t}const le=dt;function Jr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Yn(n){return n[H5]||null}function Ir(n){return n[Cv]||null}function Hr(n){return n[wv]||null}function bo(n,e){const t=n[tD]||null;if(!t&&!0===e)throw new Error(`Type ${ni(n)} does not have '\u0275mod' property.`);return t}function eo(n){return Array.isArray(n)&&"object"==typeof n[1]}function L1(n){return Array.isArray(n)&&!0===n[1]}function Ev(n){return 0!=(8&n.flags)}function N5(n){return 2==(2&n.flags)}function F5(n){return 1==(1&n.flags)}function z1(n){return null!==n.template}function cre(n){return 0!=(256&n[2])}function Ul(n,e){return n.hasOwnProperty(t2)?n[t2]:null}class hre{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Bi(){return aD}function aD(n){return n.type.prototype.ngOnChanges&&(n.setInput=fre),dre}function dre(){const n=lD(this),e=n?.current;if(e){const t=n.previous;if(t===$4)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function fre(n,e,t,i){const s=lD(n)||function pre(n,e){return n[cD]=e}(n,{previous:$4,current:null}),r=s.current||(s.current={}),o=s.previous,a=this.declaredInputs[t],c=o[a];r[a]=new hre(c&&c.currentValue,e,o===$4),n[i]=e}Bi.ngInherit=!0;const cD="__ngSimpleChanges__";function lD(n){return n[cD]||null}function Cs(n){for(;Array.isArray(n);)n=n[0];return n}function B5(n,e){return Cs(e[n])}function Jo(n,e){return Cs(e[n.index])}function kv(n,e){return n.data[e]}function K4(n,e){return n[e]}function Mo(n,e){const t=e[n];return eo(t)?t:t[0]}function U5(n){return 64==(64&n[2])}function yc(n,e){return null==e?null:n[e]}function uD(n){n[18]=0}function Rv(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const Yt={lFrame:bD(null),bindingsEnabled:!0};function dD(){return Yt.bindingsEnabled}function Ee(){return Yt.lFrame.lView}function En(){return Yt.lFrame.tView}function Gt(n){return Yt.lFrame.contextLView=n,n[8]}function Wt(n){return Yt.lFrame.contextLView=null,n}function Os(){let n=fD();for(;null!==n&&64===n.type;)n=n.parent;return n}function fD(){return Yt.lFrame.currentTNode}function fa(n,e){const t=Yt.lFrame;t.currentTNode=n,t.isParent=e}function Iv(){return Yt.lFrame.isParent}function Hv(){Yt.lFrame.isParent=!1}function Vr(){const n=Yt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function n2(){return Yt.lFrame.bindingIndex}function Q4(){return Yt.lFrame.bindingIndex++}function s2(n){const e=Yt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Dre(n,e){const t=Yt.lFrame;t.bindingIndex=t.bindingRootIndex=n,Vv(e)}function Vv(n){Yt.lFrame.currentDirectiveIndex=n}function Pv(n){const e=Yt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function vD(){return Yt.lFrame.currentQueryIndex}function Ov(n){Yt.lFrame.currentQueryIndex=n}function zre(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function _D(n,e,t){if(t&Rt.SkipSelf){let s=e,r=n;for(;!(s=s.parent,null!==s||t&Rt.Host||(s=zre(r),null===s||(r=r[15],10&s.type))););if(null===s)return!1;e=s,n=r}const i=Yt.lFrame=yD();return i.currentTNode=e,i.lView=n,!0}function Nv(n){const e=yD(),t=n[1];Yt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function yD(){const n=Yt.lFrame,e=null===n?null:n.child;return null===e?bD(n):e}function bD(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function xD(){const n=Yt.lFrame;return Yt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const MD=xD;function Fv(){const n=xD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Pr(){return Yt.lFrame.selectedIndex}function bc(n){Yt.lFrame.selectedIndex=n}function Zi(){const n=Yt.lFrame;return kv(n.tView,n.selectedIndex)}function wi(){Yt.lFrame.currentNamespace="svg"}function G5(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const r=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=r;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),l&&((n.viewHooks||(n.viewHooks=[])).push(t,l),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,l)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function W5(n,e,t){wD(n,e,3,t)}function j5(n,e,t,i){(3&n[2])===t&&wD(n,e,t,i)}function Bv(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function wD(n,e,t,i){const r=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[18]+=65536),(a<r||-1==r)&&(Ore(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function Ore(n,e,t,i){const s=t[i]<0,r=t[i+1],a=n[s?-t[i]:t[i]];if(s){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{r.call(a)}finally{}}}else try{r.call(a)}finally{}}class Ju{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function $5(n,e,t){let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const r=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,r)}else{const r=s,o=t[++i];TD(r)?n.setProperty(e,r,o):n.setAttribute(e,r,o),i++}}return i}function SD(n){return 3===n||4===n||6===n}function TD(n){return 64===n.charCodeAt(0)}function q5(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const s=e[i];"number"==typeof s?t=s:0===t||ED(n,t,s,null,-1===t||2===t?e[++i]:null)}}return n}function ED(n,e,t,i,s){let r=0,o=n.length;if(-1===e)o=-1;else for(;r<n.length;){const a=n[r++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=r-1;break}}}for(;r<n.length;){const a=n[r];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==s&&(n[r+1]=s));if(i===n[r+1])return void(n[r+2]=s)}r++,null!==i&&r++,null!==s&&r++}-1!==o&&(n.splice(o,0,e),r=o+1),n.splice(r++,0,t),null!==i&&n.splice(r++,0,i),null!==s&&n.splice(r++,0,s)}function AD(n){return-1!==n}function J4(n){return 32767&n}function e0(n,e){let t=function Gre(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let Gv=!0;function Y5(n){const e=Gv;return Gv=n,e}let Wre=0;const pa={};function th(n,e){const t=jv(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,Wv(i.data,n),Wv(e,null),Wv(i.blueprint,null));const s=X5(n,e),r=n.injectorIndex;if(AD(s)){const o=J4(s),a=e0(s,e),c=a[1].data;for(let l=0;l<8;l++)e[r+l]=a[o+l]|c[o+l]}return e[r+8]=s,r}function Wv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function jv(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function X5(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,s=e;for(;null!==s;){if(i=PD(s),null===i)return-1;if(t++,s=s[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Z5(n,e,t){!function jre(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(qu)&&(i=t[qu]),null==i&&(i=t[qu]=Wre++);const s=255&i;e.data[n+(s>>5)]|=1<<s}(n,e,t)}function zD(n,e,t){if(t&Rt.Optional||void 0!==n)return n;k5()}function kD(n,e,t,i){if(t&Rt.Optional&&void 0===i&&(i=null),0==(t&(Rt.Self|Rt.Host))){const s=n[9],r=Zo(void 0);try{return s?s.get(e,i,t&Rt.Optional):eD(e,i,t&Rt.Optional)}finally{Zo(r)}}return zD(i,0,t)}function RD(n,e,t,i=Rt.Default,s){if(null!==n){if(1024&e[2]){const o=function Zre(n,e,t,i,s){let r=n,o=e;for(;null!==r&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=ID(r,o,t,i|Rt.Self,pa);if(a!==pa)return a;let c=r.parent;if(!c){const l=o[21];if(l){const u=l.get(t,pa,i);if(u!==pa)return u}c=PD(o),o=o[15]}r=c}return s}(n,e,t,i,pa);if(o!==pa)return o}const r=ID(n,e,t,i,pa);if(r!==pa)return r}return kD(e,t,i,s)}function ID(n,e,t,i,s){const r=function Yre(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(qu)?n[qu]:void 0;return"number"==typeof e?e>=0?255&e:Xre:e}(t);if("function"==typeof r){if(!_D(e,n,i))return i&Rt.Host?zD(s,0,i):kD(e,t,i,s);try{const o=r(i);if(null!=o||i&Rt.Optional)return o;k5()}finally{MD()}}else if("number"==typeof r){let o=null,a=jv(n,e),c=-1,l=i&Rt.Host?e[16][6]:null;for((-1===a||i&Rt.SkipSelf)&&(c=-1===a?X5(n,e):e[a+8],-1!==c&&VD(i,!1)?(o=e[1],a=J4(c),e=e0(c,e)):a=-1);-1!==a;){const u=e[1];if(HD(r,a,u.data)){const h=qre(a,e,t,o,i,l);if(h!==pa)return h}c=e[a+8],-1!==c&&VD(i,e[1].data[a+8]===l)&&HD(r,a,e)?(o=u,a=J4(c),e=e0(c,e)):a=-1}}return s}function qre(n,e,t,i,s,r){const o=e[1],a=o.data[n+8],u=K5(a,o,t,null==i?N5(a)&&Gv:i!=o&&0!=(3&a.type),s&Rt.Host&&r===a);return null!==u?nh(e,o,u,a):pa}function K5(n,e,t,i,s){const r=n.providerIndexes,o=e.data,a=1048575&r,c=n.directiveStart,u=r>>20,d=s?a+u:n.directiveEnd;for(let f=i?a:a+u;f<d;f++){const p=o[f];if(f<c&&t===p||f>=c&&p.type===t)return f}if(s){const f=o[c];if(f&&z1(f)&&f.type===t)return c}return null}function nh(n,e,t,i){let s=n[t];const r=e.data;if(function Nre(n){return n instanceof Ju}(s)){const o=s;o.resolving&&function jse(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Se(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Nn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Zt(n)}(r[t]));const a=Y5(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Zo(o.injectImpl):null;_D(n,i,Rt.Default);try{s=n[t]=o.factory(void 0,r,n,i),e.firstCreatePass&&t>=i.directiveStart&&function Pre(n,e,t){const{ngOnChanges:i,ngOnInit:s,ngDoCheck:r}=e.type.prototype;if(i){const o=aD(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}s&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,s),r&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,r),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,r))}(t,r[t],e)}finally{null!==c&&Zo(c),Y5(a),o.resolving=!1,MD()}}return s}function HD(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function VD(n,e){return!(n&Rt.Self||n&Rt.Host&&e)}class t0{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return RD(this._tNode,this._lView,e,i,t)}}function Xre(){return new t0(Os(),Ee())}function Ke(n){return _c(()=>{const e=n.prototype.constructor,t=e[t2]||$v(e),i=Object.prototype;let s=Object.getPrototypeOf(n.prototype).constructor;for(;s&&s!==i;){const r=s[t2]||$v(s);if(r&&r!==t)return r;s=Object.getPrototypeOf(s)}return r=>new r})}function $v(n){return bv(n)?()=>{const e=$v(Ut(n));return e&&e()}:Ul(n)}function PD(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function e1(n){return function $re(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let s=0;for(;s<i;){const r=t[s];if(SD(r))break;if(0===r)s+=2;else if("number"==typeof r)for(s++;s<i&&"string"==typeof t[s];)s++;else{if(r===e)return t[s+1];s+=2}}}return null}(Os(),n)}const s0="__parameters__";function o0(n,e,t){return _c(()=>{const i=function qv(n){return function(...t){if(n){const i=n(...t);for(const s in i)this[s]=i[s]}}}(e);function s(...r){if(this instanceof s)return i.apply(this,r),this;const o=new s(...r);return a.annotation=o,a;function a(c,l,u){const h=c.hasOwnProperty(s0)?c[s0]:Object.defineProperty(c,s0,{value:[]})[s0];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),c}}return t&&(s.prototype=Object.create(t.prototype)),s.prototype.ngMetadataName=n,s.annotationCls=s,s})}class fe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=_e({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Co(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),Co(i,e)):e!==n&&e.push(i)}return e}function r2(n,e){n.forEach(t=>Array.isArray(t)?r2(t,e):e(t))}function ND(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Q5(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function rh(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function wo(n,e,t){let i=a0(n,e);return i>=0?n[1|i]=t:(i=~i,function eoe(n,e,t,i){let s=n.length;if(s==e)n.push(t,i);else if(1===s)n.push(i,n[0]),n[0]=t;else{for(s--,n.push(n[s-1],n[s]);s>e;)n[s]=n[s-2],s--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Xv(n,e){const t=a0(n,e);if(t>=0)return n[1|t]}function a0(n,e){return function UD(n,e,t){let i=0,s=n.length>>t;for(;s!==i;){const r=i+(s-i>>1),o=n[r<<t];if(e===o)return r<<t;o>e?s=r:i=r+1}return~(s<<t)}(n,e,1)}const oh={},Kv="__NG_DI_FLAG__",ef="ngTempTokenPath",coe=/\n/gm,GD="__source";let ah;function c0(n){const e=ah;return ah=n,e}function uoe(n,e=Rt.Default){if(void 0===ah)throw new Se(-203,!1);return null===ah?eD(n,void 0,e):ah.get(n,e&Rt.Optional?null:void 0,e)}function J(n,e=Rt.Default){return(function tre(){return Mv}()||uoe)(Ut(n),e)}function Dn(n,e=Rt.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),J(n,e)}function Qv(n){const e=[];for(let t=0;t<n.length;t++){const i=Ut(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Se(900,!1);let s,r=Rt.Default;for(let o=0;o<i.length;o++){const a=i[o],c=hoe(a);"number"==typeof c?-1===c?s=a.token:r|=c:s=a}e.push(J(s,r))}else e.push(J(i))}return e}function ch(n,e){return n[Kv]=e,n.prototype[Kv]=e,n}function hoe(n){return n[Kv]}const o2=ch(o0("Optional"),8),Gl=ch(o0("SkipSelf"),4);let e_,sf,rf;function u0(n){return function t_(){if(void 0===sf&&(sf=null,ii.trustedTypes))try{sf=ii.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return sf}()?.createHTML(n)||n}function JD(n){return function n_(){if(void 0===rf&&(rf=null,ii.trustedTypes))try{rf=ii.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return rf}()?.createHTML(n)||n}class Wl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Toe extends Wl{getTypeName(){return"HTML"}}class Eoe extends Wl{getTypeName(){return"Style"}}class Aoe extends Wl{getTypeName(){return"Script"}}class Doe extends Wl{getTypeName(){return"URL"}}class Loe extends Wl{getTypeName(){return"ResourceURL"}}function So(n){return n instanceof Wl?n.changingThisBreaksApplicationSecurity:n}function ma(n,e){const t=function zoe(n){return n instanceof Wl&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class Poe{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(u0(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class Ooe{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=u0(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=u0(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let s=t.length-1;0<s;s--){const o=t.item(s).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const Foe=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function af(n){return(n=String(n)).match(Foe)?n:"unsafe:"+n}function a2(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function hh(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const iL=a2("area,br,col,hr,img,wbr"),sL=a2("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),rL=a2("rp,rt"),i_=hh(iL,hh(sL,a2("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),hh(rL,a2("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),hh(rL,sL)),s_=a2("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),oL=hh(s_,a2("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),a2("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Boe=a2("script,style,template");class Uoe{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=this.checkClobberedElement(t,t.nextSibling);if(s){t=s;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!i_.hasOwnProperty(t))return this.sanitizedSomething=!0,!Boe.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let s=0;s<i.length;s++){const r=i.item(s),o=r.name,a=o.toLowerCase();if(!oL.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=r.value;s_[a]&&(c=af(c)),this.buf.push(" ",o,'="',aL(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();i_.hasOwnProperty(t)&&!iL.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(aL(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Goe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Woe=/([^\#-~ |!])/g;function aL(n){return n.replace(/&/g,"&amp;").replace(Goe,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Woe,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cf;function cL(n,e){let t=null;try{cf=cf||function nL(n){const e=new Ooe(n);return function Noe(){try{return!!(new window.DOMParser).parseFromString(u0(""),"text/html")}catch{return!1}}()?new Poe(e):e}(n);let i=e?String(e):"";t=cf.getInertBodyElement(i);let s=5,r=i;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,i=r,r=t.innerHTML,t=cf.getInertBodyElement(i)}while(i!==r);return u0((new Uoe).sanitizeChildren(r_(t)||t))}finally{if(t){const i=r_(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function r_(n){return"content"in n&&function joe(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Hn=(()=>((Hn=Hn||{})[Hn.NONE=0]="NONE",Hn[Hn.HTML=1]="HTML",Hn[Hn.STYLE=2]="STYLE",Hn[Hn.SCRIPT=3]="SCRIPT",Hn[Hn.URL=4]="URL",Hn[Hn.RESOURCE_URL=5]="RESOURCE_URL",Hn))();function Mc(n){const e=dh();return e?JD(e.sanitize(Hn.HTML,n)||""):ma(n,"HTML")?JD(So(n)):cL(function QD(){return void 0!==e_?e_:typeof document<"u"?document:void 0}(),Zt(n))}function Cc(n){const e=dh();return e?e.sanitize(Hn.URL,n)||"":ma(n,"URL")?So(n):af(Zt(n))}function dh(){const n=Ee();return n&&n[12]}const o_=new fe("ENVIRONMENT_INITIALIZER"),uL=new fe("INJECTOR",-1),hL=new fe("INJECTOR_DEF_TYPES");class dL{get(e,t=oh){if(t===oh){const i=new Error(`NullInjectorError: No provider for ${ni(e)}!`);throw i.name="NullInjectorError",i}return t}}function Qoe(...n){return{\u0275providers:fL(0,n)}}function fL(n,...e){const t=[],i=new Set;let s;return r2(e,r=>{const o=r;a_(o,t,[],i)&&(s||(s=[]),s.push(o))}),void 0!==s&&pL(s,t),t}function pL(n,e){for(let t=0;t<n.length;t++){const{providers:s}=n[t];r2(s,r=>{e.push(r)})}}function a_(n,e,t,i){if(!(n=Ut(n)))return!1;let s=null,r=QA(n);const o=!r&&Yn(n);if(r||o){if(o&&!o.standalone)return!1;s=n}else{const c=n.ngModule;if(r=QA(c),!r)return!1;s=c}const a=i.has(s);if(o){if(a)return!1;if(i.add(s),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)a_(l,e,t,i)}}else{if(!r)return!1;{if(null!=r.imports&&!a){let l;i.add(s);try{r2(r.imports,u=>{a_(u,e,t,i)&&(l||(l=[]),l.push(u))})}finally{}void 0!==l&&pL(l,e)}if(!a){const l=Ul(s)||(()=>new s);e.push({provide:s,useFactory:l,deps:Fn},{provide:hL,useValue:s,multi:!0},{provide:o_,useValue:()=>J(s),multi:!0})}const c=r.providers;null==c||a||r2(c,u=>{e.push(u)})}}return s!==n&&void 0!==n.providers}const Joe=ti({provide:String,useValue:ti});function c_(n){return null!==n&&"object"==typeof n&&Joe in n}function jl(n){return"function"==typeof n}const l_=new fe("Set Injector scope."),lf={},t1e={};let u_;function uf(){return void 0===u_&&(u_=new dL),u_}class wc{}class vL extends wc{constructor(e,t,i,s){super(),this.parent=t,this.source=i,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,d_(e,o=>this.processProvider(o)),this.records.set(uL,h0(void 0,this)),s.has("environment")&&this.records.set(wc,h0(void 0,this));const r=this.records.get(l_);null!=r&&"string"==typeof r.value&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(hL.multi,Fn,Rt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=c0(this),i=Zo(void 0);try{return e()}finally{c0(t),Zo(i)}}get(e,t=oh,i=Rt.Default){this.assertNotDestroyed();const s=c0(this),r=Zo(void 0);try{if(!(i&Rt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function o1e(n){return"function"==typeof n||"object"==typeof n&&n instanceof fe}(e)&&R5(e);a=c&&this.injectableDefInScope(c)?h0(h_(e),lf):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Rt.Self?uf():this.parent).get(e,t=i&Rt.Optional&&t===oh?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[ef]=o[ef]||[]).unshift(ni(e)),s)throw o;return function doe(n,e,t,i){const s=n[ef];throw e[GD]&&s.unshift(e[GD]),n.message=function foe(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let s=ni(e);if(Array.isArray(e))s=e.map(ni).join(" -> ");else if("object"==typeof e){let r=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];r.push(o+":"+("string"==typeof a?JSON.stringify(a):ni(a)))}s=`{${r.join(", ")}}`}return`${t}${i?"("+i+")":""}[${s}]: ${n.replace(coe,"\n  ")}`}("\n"+n.message,s,t,i),n.ngTokenPath=s,n[ef]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Zo(r),c0(s)}}resolveInjectorInitializers(){const e=c0(this),t=Zo(void 0);try{const i=this.get(o_.multi,Fn,Rt.Self);for(const s of i)s()}finally{c0(e),Zo(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(ni(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(e){let t=jl(e=Ut(e))?e:Ut(e&&e.provide);const i=function i1e(n){return c_(n)?h0(void 0,n.useValue):h0(_L(n),lf)}(e);if(jl(e)||!0!==e.multi)this.records.get(t);else{let s=this.records.get(t);s||(s=h0(void 0,lf,!0),s.factory=()=>Qv(s.multi),this.records.set(t,s)),t=e,s.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===lf&&(t.value=t1e,t.value=t.factory()),"object"==typeof t.value&&t.value&&function r1e(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ut(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function h_(n){const e=R5(n),t=null!==e?e.factory:Ul(n);if(null!==t)return t;if(n instanceof fe)throw new Se(204,!1);if(n instanceof Function)return function n1e(n){const e=n.length;if(e>0)throw rh(e,"?"),new Se(204,!1);const t=function Qse(n){const e=n&&(n[I5]||n[JA]);if(e){const t=function Jse(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Se(204,!1)}function _L(n,e,t){let i;if(jl(n)){const s=Ut(n);return Ul(s)||h_(s)}if(c_(n))i=()=>Ut(n.useValue);else if(function gL(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Qv(n.deps||[]));else if(function mL(n){return!(!n||!n.useExisting)}(n))i=()=>J(Ut(n.useExisting));else{const s=Ut(n&&(n.useClass||n.provide));if(!function s1e(n){return!!n.deps}(n))return Ul(s)||h_(s);i=()=>new s(...Qv(n.deps))}return i}function h0(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function a1e(n){return!!n.\u0275providers}function d_(n,e){for(const t of n)Array.isArray(t)?d_(t,e):a1e(t)?d_(t.\u0275providers,e):e(t)}class yL{}class u1e{resolveComponentFactory(e){throw function l1e(n){const e=Error(`No component factory found for ${ni(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let $l=(()=>{class n{}return n.NULL=new u1e,n})();function h1e(){return d0(Os(),Ee())}function d0(n,e){return new je(Jo(n,e))}let je=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=h1e,n})();function d1e(n){return n instanceof je?n.nativeElement:n}class fh{}let To=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function f1e(){const n=Ee(),t=Mo(Os().index,n);return(eo(t)?t:n)[11]}(),n})(),p1e=(()=>{class n{}return n.\u0275prov=_e({token:n,providedIn:"root",factory:()=>null}),n})();class Sc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const m1e=new Sc("14.2.2"),f_={};function __(n){return n.ngOriginalError}class c2{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&__(e);for(;t&&__(t);)t=__(t);return t||null}}const y_=new Map;let E1e=0;const x_="__ngContext__";function mr(n,e){eo(e)?(n[x_]=e[20],function D1e(n){y_.set(n[20],n)}(e)):n[x_]=e}function kL(n){return n.ownerDocument.defaultView}function RL(n){return n.ownerDocument}function l2(n){return n instanceof Function?n():n}var to=(()=>((to=to||{})[to.Important=1]="Important",to[to.DashCase=2]="DashCase",to))();function C_(n,e){return undefined(n,e)}function mh(n){const e=n[3];return L1(e)?e[3]:e}function w_(n){return VL(n[13])}function S_(n){return VL(n[4])}function VL(n){for(;null!==n&&!L1(n);)n=n[4];return n}function p0(n,e,t,i,s){if(null!=i){let r,o=!1;L1(i)?r=i:eo(i)&&(o=!0,i=i[0]);const a=Cs(i);0===n&&null!==t?null==s?UL(e,t,a):ql(e,t,a,s||null,!0):1===n&&null!==t?ql(e,t,a,s||null,!0):2===n?function XL(n,e,t){const i=hf(n,e);i&&function eae(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=r&&function iae(n,e,t,i,s){const r=t[7];r!==Cs(t)&&p0(e,n,i,r,s);for(let a=10;a<t.length;a++){const c=t[a];gh(c[1],c,n,e,i,r)}}(e,n,r,t,s)}}function E_(n,e,t){return n.createElement(e,t)}function OL(n,e){const t=n[9],i=t.indexOf(e),s=e[3];512&e[2]&&(e[2]&=-513,Rv(s,-1)),t.splice(i,1)}function A_(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const s=i[17];null!==s&&s!==n&&OL(s,i),e>0&&(n[t-1][4]=i[4]);const r=Q5(n,10+e);!function $1e(n,e){gh(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=r[19];null!==o&&o.detachView(r[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function NL(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&gh(n,e,t,3,null,null),function X1e(n){let e=n[13];if(!e)return D_(n[1],n);for(;e;){let t=null;if(eo(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)eo(e)&&D_(e[1],e),e=e[3];null===e&&(e=n),eo(e)&&D_(e[1],e),t=e&&e[4]}e=t}}(e)}}function D_(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function J1e(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const s=e[t[i]];if(!(s instanceof Ju)){const r=t[i+1];if(Array.isArray(r))for(let o=0;o<r.length;o+=2){const a=s[r[o]],c=r[o+1];try{c.call(a)}finally{}}else try{r.call(s)}finally{}}}}(n,e),function Q1e(n,e){const t=n.cleanup,i=e[7];let s=-1;if(null!==t)for(let r=0;r<t.length-1;r+=2)if("string"==typeof t[r]){const o=t[r+1],a="function"==typeof o?o(e):Cs(e[o]),c=i[s=t[r+2]],l=t[r+3];"boolean"==typeof l?a.removeEventListener(t[r],c,l):l>=0?i[s=l]():i[s=-l].unsubscribe(),r+=2}else{const o=i[s=t[r+1]];t[r].call(o)}if(null!==i){for(let r=s+1;r<i.length;r++)(0,i[r])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&L1(e[3])){t!==e[3]&&OL(t,e);const i=e[19];null!==i&&i.detachView(n)}!function L1e(n){y_.delete(n[20])}(e)}}function FL(n,e,t){return function BL(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const s=n.data[i.directiveStart].encapsulation;if(s===A1.None||s===A1.Emulated)return null}return Jo(i,t)}(n,e.parent,t)}function ql(n,e,t,i,s){n.insertBefore(e,t,i,s)}function UL(n,e,t){n.appendChild(e,t)}function GL(n,e,t,i,s){null!==i?ql(n,e,t,i,s):UL(n,e,t)}function hf(n,e){return n.parentNode(e)}function WL(n,e,t){return $L(n,e,t)}let $L=function jL(n,e,t){return 40&n.type?Jo(n,t):null};function df(n,e,t,i){const s=FL(n,i,e),r=e[11],a=WL(i.parent||e[6],i,e);if(null!=s)if(Array.isArray(t))for(let c=0;c<t.length;c++)GL(r,s,t[c],a,!1);else GL(r,s,t,a,!1)}function ff(n,e){if(null!==e){const t=e.type;if(3&t)return Jo(e,n);if(4&t)return z_(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return ff(n,i);{const s=n[e.index];return L1(s)?z_(-1,s):Cs(s)}}if(32&t)return C_(e,n)()||Cs(n[e.index]);{const i=YL(n,e);return null!==i?Array.isArray(i)?i[0]:ff(mh(n[16]),i):ff(n,e.next)}}return null}function YL(n,e){return null!==e?n[16][6].projection[e.projection]:null}function z_(n,e){const t=10+n+1;if(t<e.length){const i=e[t],s=i[1].firstChild;if(null!==s)return ff(i,s)}return e[7]}function k_(n,e,t,i,s,r,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&mr(Cs(a),i),t.flags|=4),64!=(64&t.flags))if(8&c)k_(n,e,t.child,i,s,r,!1),p0(e,n,s,a,r);else if(32&c){const l=C_(t,i);let u;for(;u=l();)p0(e,n,s,u,r);p0(e,n,s,a,r)}else 16&c?ZL(n,e,i,t,s,r):p0(e,n,s,a,r);t=o?t.projectionNext:t.next}}function gh(n,e,t,i,s,r){k_(t,i,n.firstChild,e,s,r,!1)}function ZL(n,e,t,i,s,r){const o=t[16],c=o[6].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)p0(e,n,s,c[l],r);else k_(n,e,c,o[3],s,r,!0)}function KL(n,e,t){n.setAttribute(e,"style",t)}function R_(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function QL(n,e,t){let i=n.length;for(;;){const s=n.indexOf(e,t);if(-1===s)return s;if(0===s||n.charCodeAt(s-1)<=32){const r=e.length;if(s+r===i||n.charCodeAt(s+r)<=32)return s}t=s+1}}const JL="ng-template";function rae(n,e,t){let i=0;for(;i<n.length;){let s=n[i++];if(t&&"class"===s){if(s=n[i],-1!==QL(s.toLowerCase(),e,0))return!0}else if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}}return!1}function ez(n){return 4===n.type&&n.value!==JL}function oae(n,e,t){return e===(4!==n.type||t?n.value:JL)}function aae(n,e,t){let i=4;const s=n.attrs||[],r=function uae(n){for(let e=0;e<n.length;e++)if(SD(n[e]))return e;return n.length}(s);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!oae(n,c,t)||""===c&&1===e.length){if(k1(i))return!1;o=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!rae(n.attrs,l,t)){if(k1(i))return!1;o=!0}continue}const h=cae(8&i?"class":c,s,ez(n),t);if(-1===h){if(k1(i))return!1;o=!0;continue}if(""!==l){let d;d=h>r?"":s[h+1].toLowerCase();const f=8&i?d:null;if(f&&-1!==QL(f,l,0)||2&i&&l!==d){if(k1(i))return!1;o=!0}}}}else{if(!o&&!k1(i)&&!k1(c))return!1;if(o&&k1(c))continue;o=!1,i=c|1&i}}return k1(i)||o}function k1(n){return 0==(1&n)}function cae(n,e,t,i){if(null===e)return-1;let s=0;if(i||!t){let r=!1;for(;s<e.length;){const o=e[s];if(o===n)return s;if(3===o||6===o)r=!0;else{if(1===o||2===o){let a=e[++s];for(;"string"==typeof a;)a=e[++s];continue}if(4===o)break;if(0===o){s+=4;continue}}s+=r?1:2}return-1}return function hae(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function tz(n,e,t=!1){for(let i=0;i<e.length;i++)if(aae(n,e[i],t))return!0;return!1}function dae(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let s=0;s<n.length;s++)if(n[s]!==i[s])continue e;return!0}}return!1}function nz(n,e){return n?":not("+e.trim()+")":e}function fae(n){let e=n[0],t=1,i=2,s="",r=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?s+="."+o:4&i&&(s+=" "+o);else""!==s&&!k1(o)&&(e+=nz(r,s),s=""),i=o,r=r||!k1(i);t++}return""!==s&&(e+=nz(r,s)),e}const Kt={};function H(n){iz(En(),Ee(),Pr()+n,!1)}function iz(n,e,t,i){if(!i)if(3==(3&e[2])){const r=n.preOrderCheckHooks;null!==r&&W5(e,r,t)}else{const r=n.preOrderHooks;null!==r&&j5(e,r,0,t)}bc(t)}function az(n,e=null,t=null,i){const s=cz(n,e,t,i);return s.resolveInjectorInitializers(),s}function cz(n,e=null,t=null,i,s=new Set){const r=[t||Fn,Qoe(n)];return i=i||("object"==typeof n?void 0:ni(n)),new vL(r,e||uf(),i||null,s)}let ws=(()=>{class n{static create(t,i){if(Array.isArray(t))return az({name:""},i,t,"");{const s=t.name??"";return az({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=oh,n.NULL=new dL,n.\u0275prov=_e({token:n,providedIn:"any",factory:()=>J(uL)}),n.__NG_ELEMENT_ID__=-1,n})();function T(n,e=Rt.Default){const t=Ee();return null===t?J(n,e):RD(Os(),t,Ut(n),e)}function Yl(){throw new Error("invalid")}function mf(n,e){return n<<17|e<<2}function R1(n){return n>>17&32767}function O_(n){return 2|n}function u2(n){return(131068&n)>>2}function N_(n,e){return-131069&n|e<<2}function F_(n){return 1|n}function Sz(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i],r=t[i+1];if(-1!==r){const o=n.data[r];Ov(s),o.contentQueries(2,e[r],r)}}}function _f(n,e,t,i,s,r,o,a,c,l,u){const h=e.blueprint.slice();return h[0]=s,h[2]=76|i,(null!==u||n&&1024&n[2])&&(h[2]|=1024),uD(h),h[3]=h[15]=n,h[8]=t,h[10]=o||n&&n[10],h[11]=a||n&&n[11],h[12]=c||n&&n[12]||null,h[9]=l||n&&n[9]||null,h[6]=r,h[20]=function A1e(){return E1e++}(),h[21]=u,h[16]=2==e.type?n[16]:h,h}function g0(n,e,t,i,s){let r=n.data[e];if(null===r)r=function Y_(n,e,t,i,s){const r=fD(),o=Iv(),c=n.data[e]=function Xae(n,e,t,i,s,r){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?r:r&&r.parent,t,e,i,s);return null===n.firstChild&&(n.firstChild=c),null!==r&&(o?null==r.child&&null!==c.parent&&(r.child=c):null===r.next&&(r.next=c)),c}(n,e,t,i,s),function Are(){return Yt.lFrame.inI18n}()&&(r.flags|=64);else if(64&r.type){r.type=t,r.value=i,r.attrs=s;const o=function Qu(){const n=Yt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();r.injectorIndex=null===o?-1:o.injectorIndex}return fa(r,!0),r}function v0(n,e,t,i){if(0===t)return-1;const s=e.length;for(let r=0;r<t;r++)e.push(i),n.blueprint.push(i),n.data.push(null);return s}function X_(n,e,t){Nv(e);try{const i=n.viewQuery;null!==i&&iy(1,i,t);const s=n.template;null!==s&&Tz(n,e,s,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Sz(n,e),n.staticViewQueries&&iy(2,n.viewQuery,t);const r=n.components;null!==r&&function $ae(n,e){for(let t=0;t<e.length;t++)h2e(n,e[t])}(e,r)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,Fv()}}function yf(n,e,t,i){const s=e[2];if(128!=(128&s)){Nv(e);try{uD(e),function mD(n){return Yt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Tz(n,e,t,2,i);const o=3==(3&s);if(o){const l=n.preOrderCheckHooks;null!==l&&W5(e,l,null)}else{const l=n.preOrderHooks;null!==l&&j5(e,l,0,null),Bv(e,0)}if(function l2e(n){for(let e=w_(n);null!==e;e=S_(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const s=t[i],r=s[3];0==(512&s[2])&&Rv(r,1),s[2]|=512}}}(e),function c2e(n){for(let e=w_(n);null!==e;e=S_(e))for(let t=10;t<e.length;t++){const i=e[t],s=i[1];U5(i)&&yf(s,i,s.template,i[8])}}(e),null!==n.contentQueries&&Sz(n,e),o){const l=n.contentCheckHooks;null!==l&&W5(e,l)}else{const l=n.contentHooks;null!==l&&j5(e,l,1),Bv(e,1)}!function Wae(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)bc(~s);else{const r=s,o=t[++i],a=t[++i];Dre(o,r),a(2,e[r])}}}finally{bc(-1)}}(n,e);const a=n.components;null!==a&&function jae(n,e){for(let t=0;t<e.length;t++)u2e(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&iy(2,c,i),o){const l=n.viewCheckHooks;null!==l&&W5(e,l)}else{const l=n.viewHooks;null!==l&&j5(e,l,2),Bv(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Rv(e[3],-1))}finally{Fv()}}}function Tz(n,e,t,i,s){const r=Pr(),o=2&i;try{bc(-1),o&&e.length>22&&iz(n,e,22,!1),t(i,s)}finally{bc(r)}}function Ez(n,e,t){if(Ev(e)){const s=e.directiveEnd;for(let r=e.directiveStart;r<s;r++){const o=n.data[r];o.contentQueries&&o.contentQueries(1,t[r],r)}}}function Z_(n,e,t){!dD()||(function e2e(n,e,t,i){const s=t.directiveStart,r=t.directiveEnd;n.firstCreatePass||th(t,e),mr(i,e);const o=t.initialInputs;for(let a=s;a<r;a++){const c=n.data[a],l=z1(c);l&&r2e(e,t,c);const u=nh(e,n,a,t);mr(u,e),null!==o&&o2e(0,a-s,u,c,0,o),l&&(Mo(t.index,e)[8]=u)}}(n,e,t,Jo(t,e)),128==(128&t.flags)&&function t2e(n,e,t){const i=t.directiveStart,s=t.directiveEnd,r=t.index,o=function Lre(){return Yt.lFrame.currentDirectiveIndex}();try{bc(r);for(let a=i;a<s;a++){const c=n.data[a],l=e[a];Vv(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Iz(c,l)}}finally{bc(-1),Vv(o)}}(n,e,t))}function K_(n,e,t=Jo){const i=e.localNames;if(null!==i){let s=e.index+1;for(let r=0;r<i.length;r+=2){const o=i[r+1],a=-1===o?t(e,n):n[o];n[s++]=a}}}function Az(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Q_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Q_(n,e,t,i,s,r,o,a,c,l){const u=22+i,h=u+s,d=function qae(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Kt);return t}(u,h),f="function"==typeof l?l():l;return d[1]={type:n,blueprint:d,template:t,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof r?r():r,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function Dz(n,e,t,i){const s=Nz(e);null===t?s.push(i):(s.push(t),n.firstCreatePass&&Fz(n).push(i,s.length-1))}function Lz(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const s=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,s):t[i]=[e,s]}return t}function zz(n,e){const i=e.directiveEnd,s=n.data,r=e.attrs,o=[];let a=null,c=null;for(let l=e.directiveStart;l<i;l++){const u=s[l],h=u.inputs,d=null===r||ez(e)?null:a2e(h,r);o.push(d),a=Lz(h,l,a),c=Lz(u.outputs,l,c)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=c}function Eo(n,e,t,i,s,r,o,a){const c=Jo(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?(sy(n,t,u,i,s),N5(e)&&kz(t,e.index)):3&e.type&&(i=function Zae(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),s=null!=o?o(s,e.value||"",i):s,r.setProperty(c,i,s))}function kz(n,e){const t=Mo(e,n);16&t[2]||(t[2]|=32)}function J_(n,e,t,i){let s=!1;if(dD()){const r=function n2e(n,e,t){const i=n.directiveRegistry;let s=null;if(i)for(let r=0;r<i.length;r++){const o=i[r];tz(t,o.selectors,!1)&&(s||(s=[]),Z5(th(t,e),n,o.type),z1(o)?(Hz(n,t),s.unshift(o)):s.push(o))}return s}(n,e,t),o=null===i?null:{"":-1};if(null!==r){s=!0,Vz(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const h=r[u];h.providersResolver&&h.providersResolver(h)}let a=!1,c=!1,l=v0(n,e,r.length,null);for(let u=0;u<r.length;u++){const h=r[u];t.mergedAttrs=q5(t.mergedAttrs,h.hostAttrs),Pz(n,t,e,l,h),s2e(l,h,o),null!==h.contentQueries&&(t.flags|=8),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=128);const d=h.type.prototype;!a&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!c&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),c=!0),l++}zz(n,t)}o&&function i2e(n,e,t){if(e){const i=n.localNames=[];for(let s=0;s<e.length;s+=2){const r=t[e[s+1]];if(null==r)throw new Se(-301,!1);i.push(e[s],r)}}}(t,i,o)}return t.mergedAttrs=q5(t.mergedAttrs,t.attrs),s}function Rz(n,e,t,i,s,r){const o=r.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const c=~e.index;(function Jae(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=c&&a.push(c),a.push(i,s,o)}}function Iz(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Hz(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function s2e(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;z1(e)&&(t[""]=n)}}function Vz(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Pz(n,e,t,i,s){n.data[i]=s;const r=s.factory||(s.factory=Ul(s.type)),o=new Ju(r,z1(s),T);n.blueprint[i]=o,t[i]=o,Rz(n,e,0,i,v0(n,t,s.hostVars,Kt),s)}function r2e(n,e,t){const i=Jo(e,n),s=Az(t),r=n[10],o=bf(n,_f(n,s,null,t.onPush?32:16,i,e,r,r.createRenderer(i,t),null,null,null));n[e.index]=o}function ga(n,e,t,i,s,r){const o=Jo(n,e);!function ey(n,e,t,i,s,r,o){if(null==r)n.removeAttribute(e,s,t);else{const a=null==o?Zt(r):o(r,i||"",s);n.setAttribute(e,s,a,t)}}(e[11],o,r,n.value,t,i,s)}function o2e(n,e,t,i,s,r){const o=r[e];if(null!==o){const a=i.setInput;for(let c=0;c<o.length;){const l=o[c++],u=o[c++],h=o[c++];null!==a?i.setInput(t,h,l,u):t[u]=h}}}function a2e(n,e){let t=null,i=0;for(;i<e.length;){const s=e[i];if(0!==s)if(5!==s){if("number"==typeof s)break;n.hasOwnProperty(s)&&(null===t&&(t=[]),t.push(s,n[s],e[i+1])),i+=2}else i+=2;else i+=4}return t}function Oz(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function u2e(n,e){const t=Mo(e,n);if(U5(t)){const i=t[1];48&t[2]?yf(i,t,i.template,t[8]):t[5]>0&&ty(t)}}function ty(n){for(let i=w_(n);null!==i;i=S_(i))for(let s=10;s<i.length;s++){const r=i[s];if(U5(r))if(512&r[2]){const o=r[1];yf(o,r,o.template,r[8])}else r[5]>0&&ty(r)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const s=Mo(t[i],n);U5(s)&&s[5]>0&&ty(s)}}function h2e(n,e){const t=Mo(e,n),i=t[1];(function d2e(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),X_(i,t,t[8])}function bf(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function ny(n){for(;n;){n[2]|=32;const e=mh(n);if(cre(n)&&!e)return n;n=e}return null}function xf(n,e,t,i=!0){const s=e[10];s.begin&&s.begin();try{yf(n,e,n.template,t)}catch(o){throw i&&Uz(e,o),o}finally{s.end&&s.end()}}function iy(n,e,t){Ov(0),e(n,t)}function Nz(n){return n[7]||(n[7]=[])}function Fz(n){return n.cleanup||(n.cleanup=[])}function Bz(n,e,t){return(null===n||z1(n))&&(t=function _re(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function Uz(n,e){const t=n[9],i=t?t.get(c2,null):null;i&&i.handleError(e)}function sy(n,e,t,i,s){for(let r=0;r<t.length;){const o=t[r++],a=t[r++],c=e[o],l=n.data[o];null!==l.setInput?l.setInput(c,s,i,a):c[a]=s}}function h2(n,e,t){const i=B5(e,n);!function PL(n,e,t){n.setValue(e,t)}(n[11],i,t)}function Mf(n,e,t){let i=t?n.styles:null,s=t?n.classes:null,r=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?r=a:1==r?s=yv(s,a):2==r&&(i=yv(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=s:n.classesWithoutHost=s}function Cf(n,e,t,i,s=!1){for(;null!==t;){const r=e[t.index];if(null!==r&&i.push(Cs(r)),L1(r))for(let a=10;a<r.length;a++){const c=r[a],l=c[1].firstChild;null!==l&&Cf(c[1],c,l,i)}const o=t.type;if(8&o)Cf(n,e,t.child,i);else if(32&o){const a=C_(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=YL(e,t);if(Array.isArray(a))i.push(...a);else{const c=mh(e[16]);Cf(c[1],c,a,i,!0)}}t=s?t.projectionNext:t.next}return i}class vh{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Cf(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(L1(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(A_(e,i),Q5(t,i))}this._attachedToViewContainer=!1}NL(this._lView[1],this._lView)}onDestroy(e){Dz(this._lView[1],this._lView,null,e)}markForCheck(){ny(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){xf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Y1e(n,e){gh(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=e}}class f2e extends vh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;xf(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class ry extends $l{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Yn(e);return new _h(t,this.ngModule)}}function Gz(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class m2e{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){const s=this.injector.get(e,f_,i);return s!==f_||t===f_?s:this.parentInjector.get(e,t,i)}}class _h extends yL{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function pae(n){return n.map(fae).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Gz(this.componentDef.inputs)}get outputs(){return Gz(this.componentDef.outputs)}create(e,t,i,s){let r=(s=s||this.ngModule)instanceof wc?s:s?.injector;r&&null!==this.componentDef.getStandaloneInjector&&(r=this.componentDef.getStandaloneInjector(r)||r);const o=r?new m2e(e,r):e,a=o.get(fh,null);if(null===a)throw new Se(407,!1);const c=o.get(p1e,null),l=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",h=i?function Yae(n,e,t){return n.selectRootElement(e,t===A1.ShadowDom)}(l,i,this.componentDef.encapsulation):E_(a.createRenderer(null,this.componentDef),u,function p2e(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),d=this.componentDef.onPush?288:272,f=Q_(0,null,null,1,0,null,null,null,null,null),p=_f(null,f,null,d,null,null,a,l,c,o,null);let m,g;Nv(p);try{const v=function _2e(n,e,t,i,s,r){const o=t[1];t[22]=n;const c=g0(o,22,2,"#host",null),l=c.mergedAttrs=e.hostAttrs;null!==l&&(Mf(c,l,!0),null!==n&&($5(s,n,l),null!==c.classes&&R_(s,n,c.classes),null!==c.styles&&KL(s,n,c.styles)));const u=i.createRenderer(n,e),h=_f(t,Az(e),null,e.onPush?32:16,t[22],c,i,u,r||null,null,null);return o.firstCreatePass&&(Z5(th(c,t),o,e.type),Hz(o,c),Vz(c,t.length,1)),bf(t,h),t[22]=h}(h,this.componentDef,p,a,l);if(h)if(i)$5(l,h,["ng-version",m1e.full]);else{const{attrs:_,classes:y}=function mae(n){const e=[],t=[];let i=1,s=2;for(;i<n.length;){let r=n[i];if("string"==typeof r)2===s?""!==r&&e.push(r,n[++i]):8===s&&t.push(r);else{if(!k1(s))break;s=r}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);_&&$5(l,h,_),y&&y.length>0&&R_(l,h,y.join(" "))}if(g=kv(f,22),void 0!==t){const _=g.projection=[];for(let y=0;y<this.ngContentSelectors.length;y++){const b=t[y];_.push(null!=b?Array.from(b):null)}}m=function y2e(n,e,t,i){const s=t[1],r=function Qae(n,e,t){const i=Os();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Pz(n,i,e,v0(n,e,1,null),t),zz(n,i));const s=nh(e,n,i.directiveStart,i);mr(s,e);const r=Jo(i,e);return r&&mr(r,e),s}(s,t,e);if(n[8]=t[8]=r,null!==i)for(const a of i)a(r,e);if(e.contentQueries){const a=Os();e.contentQueries(1,r,a.directiveStart)}const o=Os();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(bc(o.index),Rz(t[1],o,0,o.directiveStart,o.directiveEnd,e),Iz(e,r)),r}(v,this.componentDef,p,[b2e]),X_(f,p,null)}finally{Fv()}return new v2e(this.componentType,m,d0(g,p),p,g)}}class v2e extends class c1e{}{constructor(e,t,i,s,r){super(),this.location=i,this._rootLView=s,this._tNode=r,this.instance=t,this.hostView=this.changeDetectorRef=new f2e(s),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let s;if(null!==i&&(s=i[e])){const r=this._rootLView;sy(r[1],r,s,e,t),kz(r,this._tNode.index)}}get injector(){return new t0(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function b2e(){const n=Os();G5(Ee()[1],n)}function pe(n){let e=function Wz(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let s;if(z1(n))s=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Se(903,!1);s=e.\u0275dir}if(s){if(t){i.push(s);const o=n;o.inputs=oy(n.inputs),o.declaredInputs=oy(n.declaredInputs),o.outputs=oy(n.outputs);const a=s.hostBindings;a&&w2e(n,a);const c=s.viewQuery,l=s.contentQueries;if(c&&M2e(n,c),l&&C2e(n,l),_v(n.inputs,s.inputs),_v(n.declaredInputs,s.declaredInputs),_v(n.outputs,s.outputs),z1(s)&&s.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(s.data.animation)}}const r=s.features;if(r)for(let o=0;o<r.length;o++){const a=r[o];a&&a.ngInherit&&a(n),a===pe&&(t=!1)}}e=Object.getPrototypeOf(e)}!function x2e(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const s=n[i];s.hostVars=e+=s.hostVars,s.hostAttrs=q5(s.hostAttrs,t=q5(t,s.hostAttrs))}}(i)}function oy(n){return n===$4?{}:n===Fn?[]:n}function M2e(n,e){const t=n.viewQuery;n.viewQuery=t?(i,s)=>{e(i,s),t(i,s)}:e}function C2e(n,e){const t=n.contentQueries;n.contentQueries=t?(i,s,r)=>{e(i,s,r),t(i,s,r)}:e}function w2e(n,e){const t=n.hostBindings;n.hostBindings=t?(i,s)=>{e(i,s),t(i,s)}:e}let wf=null;function Xl(){if(!wf){const n=ii.Symbol;if(n&&n.iterator)wf=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(wf=i)}}}return wf}function yh(n){return!!ay(n)&&(Array.isArray(n)||!(n instanceof Map)&&Xl()in n)}function ay(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function va(n,e,t){return n[e]=t}function gr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Zl(n,e,t,i){const s=gr(n,e,t);return gr(n,e+1,i)||s}function Mn(n,e,t,i){const s=Ee();return gr(s,Q4(),e)&&(En(),ga(Zi(),s,n,e,t,i)),Mn}function y0(n,e,t,i){return gr(n,Q4(),t)?e+Zt(t)+i:Kt}function b0(n,e,t,i,s,r){const a=Zl(n,n2(),t,s);return s2(2),a?e+Zt(t)+i+Zt(s)+r:Kt}function S0(n,e,t,i,s,r,o,a,c,l,u,h,d,f,p,m){const g=n2();let v=function t1(n,e,t,i,s,r){const o=Zl(n,e,t,i);return Zl(n,e+2,s,r)||o}(n,g,t,s,o,c);return v=function Sf(n,e,t,i,s){const r=Zl(n,e,t,i);return gr(n,e+2,s)||r}(n,g+4,u,d,p)||v,s2(7),v?e+Zt(t)+i+Zt(s)+r+Zt(o)+a+Zt(c)+l+Zt(u)+h+Zt(d)+f+Zt(p)+m:Kt}function Ve(n,e,t,i,s,r,o,a){const c=Ee(),l=En(),u=n+22,h=l.firstCreatePass?function k2e(n,e,t,i,s,r,o,a,c){const l=e.consts,u=g0(e,n,4,o||null,yc(l,a));J_(e,t,u,yc(l,c)),G5(e,u);const h=u.tViews=Q_(2,u,i,s,r,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,i,s,r,o):l.data[u];fa(h,!1);const d=c[11].createComment("");df(l,c,d,h),mr(d,c),bf(c,c[u]=Oz(d,c,d,h)),F5(h)&&Z_(l,c,h),null!=o&&K_(c,h,a)}function Si(n){return K4(function Ere(){return Yt.lFrame.contextLView}(),22+n)}function Z(n,e,t){const i=Ee();return gr(i,Q4(),e)&&Eo(En(),Zi(),i,n,e,i[11],t,!1),Z}function cy(n,e,t,i,s){const o=s?"class":"style";sy(n,t,e.inputs[o],o,i)}function M(n,e,t,i){const s=Ee(),r=En(),o=22+n,a=s[11],c=s[o]=E_(a,e,function Vre(){return Yt.lFrame.currentNamespace}()),l=r.firstCreatePass?function I2e(n,e,t,i,s,r,o){const a=e.consts,l=g0(e,n,2,s,yc(a,r));return J_(e,t,l,yc(a,o)),null!==l.attrs&&Mf(l,l.attrs,!1),null!==l.mergedAttrs&&Mf(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,r,s,0,e,t,i):r.data[o];fa(l,!0);const u=l.mergedAttrs;null!==u&&$5(a,c,u);const h=l.classes;null!==h&&R_(a,c,h);const d=l.styles;return null!==d&&KL(a,c,d),64!=(64&l.flags)&&df(r,s,c,l),0===function Mre(){return Yt.lFrame.elementDepthCount}()&&mr(c,s),function Cre(){Yt.lFrame.elementDepthCount++}(),F5(l)&&(Z_(r,s,l),Ez(r,l,s)),null!==i&&K_(s,l),M}function S(){let n=Os();Iv()?Hv():(n=n.parent,fa(n,!1));const e=n;!function wre(){Yt.lFrame.elementDepthCount--}();const t=En();return t.firstCreatePass&&(G5(t,n),Ev(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Bre(n){return 0!=(16&n.flags)}(e)&&cy(t,e,Ee(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Ure(n){return 0!=(32&n.flags)}(e)&&cy(t,e,Ee(),e.stylesWithoutHost,!1),S}function te(n,e,t,i){return M(n,e,t,i),S(),te}function si(n,e,t){const i=Ee(),s=En(),r=n+22,o=s.firstCreatePass?function H2e(n,e,t,i,s){const r=e.consts,o=yc(r,i),a=g0(e,n,8,"ng-container",o);return null!==o&&Mf(a,o,!0),J_(e,t,a,yc(r,s)),null!==e.queries&&e.queries.elementStart(e,a),a}(r,s,i,e,t):s.data[r];fa(o,!0);const a=i[r]=i[11].createComment("");return df(s,i,a,o),mr(a,i),F5(o)&&(Z_(s,i,o),Ez(s,o,i)),null!=t&&K_(i,o),si}function ri(){let n=Os();const e=En();return Iv()?Hv():(n=n.parent,fa(n,!1)),e.firstCreatePass&&(G5(e,n),Ev(n)&&e.queries.elementEnd(n)),ri}function I1(n,e,t){return si(n,e,t),ri(),I1}function Ss(){return Ee()}function xh(n){return!!n&&"function"==typeof n.then}function ek(n){return!!n&&"function"==typeof n.subscribe}const ly=ek;function We(n,e,t,i){const s=Ee(),r=En(),o=Os();return tk(r,s,s[11],o,n,e,0,i),We}function Tf(n,e){const t=Os(),i=Ee(),s=En();return tk(s,i,Bz(Pv(s.data),t,i),t,n,e),Tf}function tk(n,e,t,i,s,r,o,a){const c=F5(i),u=n.firstCreatePass&&Fz(n),h=e[8],d=Nz(e);let f=!0;if(3&i.type||a){const g=Jo(i,e),v=a?a(g):g,_=d.length,y=a?x=>a(Cs(x[i.index])):i.index;let b=null;if(!a&&c&&(b=function V2e(n,e,t,i){const s=n.cleanup;if(null!=s)for(let r=0;r<s.length-1;r+=2){const o=s[r];if(o===t&&s[r+1]===i){const a=e[7],c=s[r+2];return a.length>c?a[c]:null}"string"==typeof o&&(r+=2)}return null}(n,e,s,i.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=r,b.__ngLastListenerFn__=r,f=!1;else{r=ik(i,e,h,r,!1);const x=t.listen(v,s,r);d.push(r,x),u&&u.push(s,y,_,_+1)}}else r=ik(i,e,h,r,!1);const p=i.outputs;let m;if(f&&null!==p&&(m=p[s])){const g=m.length;if(g)for(let v=0;v<g;v+=2){const w=e[m[v]][m[v+1]].subscribe(r),L=d.length;d.push(r,w),u&&u.push(s,i.index,L,-(L+1))}}}function nk(n,e,t,i){try{return!1!==t(i)}catch(s){return Uz(n,s),!1}}function ik(n,e,t,i,s){return function r(o){if(o===Function)return i;ny(2&n.flags?Mo(n.index,e):e);let c=nk(e,0,i,o),l=r.__ngNextListenerFn__;for(;l;)c=nk(e,0,l,o)&&c,l=l.__ngNextListenerFn__;return s&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function Ge(n=1){return function kre(n){return(Yt.lFrame.contextLView=function Rre(n,e){for(;n>0;)e=e[15],n--;return e}(n,Yt.lFrame.contextLView))[8]}(n)}function P2e(n,e){let t=null;const i=function lae(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let s=0;s<e.length;s++){const r=e[s];if("*"!==r){if(null===i?tz(n,r,!0):dae(i,r))return s}else t=s}return t}function Ki(n){const e=Ee()[16][6];if(!e.projection){const i=e.projection=rh(n?n.length:1,null),s=i.slice();let r=e.child;for(;null!==r;){const o=n?P2e(r,n):0;null!==o&&(s[o]?s[o].projectionNext=r:i[o]=r,s[o]=r),r=r.next}}}function Vn(n,e=0,t){const i=Ee(),s=En(),r=g0(s,22+n,16,null,t||null);null===r.projection&&(r.projection=e),Hv(),64!=(64&r.flags)&&function nae(n,e,t){ZL(e[11],0,e,t,FL(n,t,e),WL(t.parent||e[6],t,e))}(s,i,r)}function _a(n,e,t){return vn(n,"",e,"",t),_a}function vn(n,e,t,i,s){const r=Ee(),o=y0(r,e,t,i);return o!==Kt&&Eo(En(),Zi(),r,n,o,r[11],s,!1),vn}function dk(n,e,t,i,s){const r=n[t+1],o=null===e;let a=i?R1(r):u2(r),c=!1;for(;0!==a&&(!1===c||o);){const u=n[a+1];F2e(n[a],e)&&(c=!0,n[a+1]=i?F_(u):O_(u)),a=i?R1(u):u2(u)}c&&(n[t+1]=i?O_(r):F_(r))}function F2e(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&a0(n,e)>=0}const Fs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function fk(n){return n.substring(Fs.key,Fs.keyEnd)}function pk(n,e){const t=Fs.textEnd;return t===e?-1:(e=Fs.keyEnd=function W2e(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Fs.key=e,t),E0(n,e,t))}function E0(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Qs(n,e,t){return H1(n,e,t,!1),Qs}function Et(n,e){return H1(n,e,null,!0),Et}function ba(n,e){for(let t=function U2e(n){return function gk(n){Fs.key=0,Fs.keyEnd=0,Fs.value=0,Fs.valueEnd=0,Fs.textEnd=n.length}(n),pk(n,E0(n,0,Fs.textEnd))}(e);t>=0;t=pk(e,t))wo(n,fk(e),!0)}function H1(n,e,t,i){const s=Ee(),r=En(),o=s2(2);r.firstUpdatePass&&xk(r,n,o,i),e!==Kt&&gr(s,o,e)&&Ck(r,r.data[Pr()],s,s[11],n,s[o+1]=function ece(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ni(So(n)))),n}(e,t),i,o)}function V1(n,e,t,i){const s=En(),r=s2(2);s.firstUpdatePass&&xk(s,null,r,i);const o=Ee();if(t!==Kt&&gr(o,r,t)){const a=s.data[Pr()];if(Sk(a,i)&&!bk(s,r)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=yv(c,t||"")),cy(s,a,o,t,i)}else!function J2e(n,e,t,i,s,r,o,a){s===Kt&&(s=Fn);let c=0,l=0,u=0<s.length?s[0]:null,h=0<r.length?r[0]:null;for(;null!==u||null!==h;){const d=c<s.length?s[c+1]:void 0,f=l<r.length?r[l+1]:void 0;let m,p=null;u===h?(c+=2,l+=2,d!==f&&(p=h,m=f)):null===h||null!==u&&u<h?(c+=2,p=u):(l+=2,p=h,m=f),null!==p&&Ck(n,e,t,i,p,m,o,a),u=c<s.length?s[c]:null,h=l<r.length?r[l]:null}}(s,a,o,o[11],o[r+1],o[r+1]=function Q2e(n,e,t){if(null==t||""===t)return Fn;const i=[],s=So(t);if(Array.isArray(s))for(let r=0;r<s.length;r++)n(i,s[r],!0);else if("object"==typeof s)for(const r in s)s.hasOwnProperty(r)&&n(i,r,s[r]);else"string"==typeof s&&e(i,s);return i}(n,e,t),i,r)}}function bk(n,e){return e>=n.expandoStartIndex}function xk(n,e,t,i){const s=n.data;if(null===s[t+1]){const r=s[Pr()],o=bk(n,t);Sk(r,i)&&null===e&&!o&&(e=!1),e=function Y2e(n,e,t,i){const s=Pv(n);let r=i?e.residualClasses:e.residualStyles;if(null===s)0===(i?e.classBindings:e.styleBindings)&&(t=Mh(t=uy(null,n,e,t,i),e.attrs,i),r=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==s)if(t=uy(s,n,e,t,i),null===r){let c=function X2e(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==u2(i))return n[R1(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=uy(null,n,e,c[1],i),c=Mh(c,e.attrs,i),function Z2e(n,e,t,i){n[R1(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else r=function K2e(n,e,t){let i;const s=e.directiveEnd;for(let r=1+e.directiveStylingLast;r<s;r++)i=Mh(i,n[r].hostAttrs,t);return Mh(i,e.attrs,t)}(n,e,i)}return void 0!==r&&(i?e.residualClasses=r:e.residualStyles=r),t}(s,r,e,i),function O2e(n,e,t,i,s,r){let o=r?e.classBindings:e.styleBindings,a=R1(o),c=u2(o);n[i]=t;let u,l=!1;if(Array.isArray(t)){const h=t;u=h[1],(null===u||a0(h,u)>0)&&(l=!0)}else u=t;if(s)if(0!==c){const d=R1(n[a+1]);n[i+1]=mf(d,a),0!==d&&(n[d+1]=N_(n[d+1],i)),n[a+1]=function Iae(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=mf(a,0),0!==a&&(n[a+1]=N_(n[a+1],i)),a=i;else n[i+1]=mf(c,0),0===a?a=i:n[c+1]=N_(n[c+1],i),c=i;l&&(n[i+1]=O_(n[i+1])),dk(n,u,i,!0),dk(n,u,i,!1),function N2e(n,e,t,i,s){const r=s?n.residualClasses:n.residualStyles;null!=r&&"string"==typeof e&&a0(r,e)>=0&&(t[i+1]=F_(t[i+1]))}(e,u,n,i,r),o=mf(a,c),r?e.classBindings=o:e.styleBindings=o}(s,r,e,t,o,i)}}function uy(n,e,t,i,s){let r=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(r=e[a],i=Mh(i,r.hostAttrs,s),r!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Mh(n,e,t){const i=t?1:2;let s=-1;if(null!==e)for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?s=o:s===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),wo(n,o,!!t||e[++r]))}return void 0===n?null:n}function Ck(n,e,t,i,s,r,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1];Ef(function vz(n){return 1==(1&n)}(l)?wk(c,e,t,s,u2(l),o):void 0)||(Ef(r)||function gz(n){return 2==(2&n)}(l)&&(r=wk(c,null,t,s,a,o)),function sae(n,e,t,i,s){if(e)s?n.addClass(t,i):n.removeClass(t,i);else{let r=-1===i.indexOf("-")?void 0:to.DashCase;null==s?n.removeStyle(t,i,r):("string"==typeof s&&s.endsWith("!important")&&(s=s.slice(0,-10),r|=to.Important),n.setStyle(t,i,s,r))}}(i,o,B5(Pr(),t),s,r))}function wk(n,e,t,i,s,r){const o=null===e;let a;for(;s>0;){const c=n[s],l=Array.isArray(c),u=l?c[1]:c,h=null===u;let d=t[s+1];d===Kt&&(d=h?Fn:void 0);let f=h?Xv(d,i):u===i?d:void 0;if(l&&!Ef(f)&&(f=Xv(c,i)),Ef(f)&&(a=f,o))return a;const p=n[s+1];s=o?R1(p):u2(p)}if(null!==e){let c=r?e.residualClasses:e.residualStyles;null!=c&&(a=Xv(c,i))}return a}function Ef(n){return void 0!==n}function Sk(n,e){return 0!=(n.flags&(e?16:32))}function E(n,e=""){const t=Ee(),i=En(),s=n+22,r=i.firstCreatePass?g0(i,s,1,e,null):i.data[s],o=t[s]=function T_(n,e){return n.createText(e)}(t[11],e);df(i,t,o,r),fa(r,!1)}function Ch(n){return mt("",n,""),Ch}function mt(n,e,t){const i=Ee(),s=y0(i,n,e,t);return s!==Kt&&h2(i,Pr(),s),mt}function Af(n,e,t,i,s){const r=Ee(),o=b0(r,n,e,t,i,s);return o!==Kt&&h2(r,Pr(),o),Af}function vi(n,e,t){V1(wo,ba,y0(Ee(),n,e,t),!0)}function A0(n,e,t,i,s){return H1(n,y0(Ee(),e,t,i),s,!1),A0}function Kl(n,e,t){const i=Ee();return gr(i,Q4(),e)&&Eo(En(),Zi(),i,n,e,i[11],t,!0),Kl}function Df(n,e,t){const i=Ee();if(gr(i,Q4(),e)){const r=En(),o=Zi();Eo(r,o,i,n,e,Bz(Pv(r.data),o,i),t,!0)}return Df}const L0="en-US";let jk=L0;function fy(n,e,t,i,s){if(n=Ut(n),Array.isArray(n))for(let r=0;r<n.length;r++)fy(n[r],e,t,i,s);else{const r=En(),o=Ee();let a=jl(n)?n:Ut(n.provide),c=_L(n);const l=Os(),u=1048575&l.providerIndexes,h=l.directiveStart,d=l.providerIndexes>>20;if(jl(n)||!n.multi){const f=new Ju(c,s,T),p=my(a,e,s?u:u+d,h);-1===p?(Z5(th(l,o),r,a),py(r,n,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,s&&(l.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=my(a,e,u+d,h),p=my(a,e,u,u+d),m=f>=0&&t[f],g=p>=0&&t[p];if(s&&!g||!s&&!m){Z5(th(l,o),r,a);const v=function mle(n,e,t,i,s){const r=new Ju(n,t,T);return r.multi=[],r.index=e,r.componentProviders=0,gR(r,s,i&&!t),r}(s?ple:fle,t.length,s,i,c);!s&&g&&(t[p].providerFactory=v),py(r,n,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,s&&(l.providerIndexes+=1048576),t.push(v),o.push(v)}else py(r,n,f>-1?f:p,gR(t[s?p:f],c,!s&&i));!s&&i&&g&&t[p].componentProviders++}}}function py(n,e,t,i){const s=jl(e),r=function e1e(n){return!!n.useClass}(e);if(s||r){const c=(r?Ut(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!s&&e.multi){const u=l.indexOf(t);-1===u?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function gR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function my(n,e,t,i){for(let s=t;s<i;s++)if(e[s]===n)return s;return-1}function fle(n,e,t,i){return gy(this.multi,[])}function ple(n,e,t,i){const s=this.multi;let r;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=nh(t,t[1],this.providerFactory.index,i);r=a.slice(0,o),gy(s,r);for(let c=o;c<a.length;c++)r.push(a[c])}else r=[],gy(s,r);return r}function gy(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function At(n,e=[]){return t=>{t.providersResolver=(i,s)=>function dle(n,e,t){const i=En();if(i.firstCreatePass){const s=z1(n);fy(t,i.data,i.blueprint,s,!0),fy(e,i.data,i.blueprint,s,!1)}}(i,s?s(n):n,e)}}class Jl{}class vR{}class _R extends Jl{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ry(this);const i=bo(e);this._bootstrapComponents=l2(i.bootstrap),this._r3Injector=cz(e,t,[{provide:Jl,useValue:this},{provide:$l,useValue:this.componentFactoryResolver}],ni(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class vy extends vR{constructor(e){super(),this.moduleType=e}create(e){return new _R(this.moduleType,e)}}class vle extends Jl{constructor(e,t,i){super(),this.componentFactoryResolver=new ry(this),this.instance=null;const s=new vL([...e,{provide:Jl,useValue:this},{provide:$l,useValue:this.componentFactoryResolver}],t||uf(),i,new Set(["environment"]));this.injector=s,s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function If(n,e,t=null){return new vle(n,e,t).injector}let _le=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=fL(0,t.type),s=i.length>0?If([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,s)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=_e({token:n,providedIn:"environment",factory:()=>new n(J(wc))}),n})();function yR(n){n.getStandaloneInjector=e=>e.get(_le).getOrCreateStandaloneInjector(n)}function Ac(n,e,t){const i=Vr()+n,s=Ee();return s[i]===Kt?va(s,i,t?e.call(t):e()):function bh(n,e){return n[e]}(s,i)}function d2(n,e,t,i){return ER(Ee(),Vr(),n,e,t,i)}function TR(n,e,t,i,s){return function AR(n,e,t,i,s,r,o){const a=e+t;return Zl(n,a,s,r)?va(n,a+2,o?i.call(o,s,r):i(s,r)):Dh(n,a+2)}(Ee(),Vr(),n,e,t,i,s)}function Dh(n,e){const t=n[e];return t===Kt?void 0:t}function ER(n,e,t,i,s,r){const o=e+t;return gr(n,o,s)?va(n,o+1,r?i.call(r,s):i(s)):Dh(n,o+1)}function Bs(n,e){const t=En();let i;const s=n+22;t.firstCreatePass?(i=function Ile(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[s]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(s,i.onDestroy)):i=t.data[s];const r=i.factory||(i.factory=Ul(i.type)),o=Zo(T);try{const a=Y5(!1),c=r();return Y5(a),function R2e(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Ee(),s,c),c}finally{Zo(o)}}function Us(n,e,t){const i=n+22,s=Ee(),r=K4(s,i);return function Lh(n,e){return n[1].data[e].pure}(s,i)?ER(s,Vr(),e,r.transform,t,r):r.transform(t)}function yy(n){return e=>{setTimeout(n,void 0,e)}}const $t=class Nle extends Tt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let s=e,r=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;s=c.next?.bind(c),r=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(r=yy(r),s&&(s=yy(s)),o&&(o=yy(o)));const a=super.subscribe({next:s,error:r,complete:o});return e instanceof fi&&e.add(a),a}};function Fle(){return this._results[Xl()]()}class z0{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Xl(),i=z0.prototype;i[t]||(i[t]=Fle)}get changes(){return this._changes||(this._changes=new $t)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const s=Co(e);(this._changesDetected=!function Qre(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let s=n[i],r=e[i];if(t&&(s=t(s),r=t(r)),r!==s)return!1}return!0}(i._results,s,t))&&(i._results=s,i.length=s.length,i.last=s[this.length-1],i.first=s[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Js=(()=>{class n{}return n.__NG_ELEMENT_ID__=Gle,n})();const Ble=Js,Ule=class extends Ble{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tViews,s=_f(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);s[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(s[19]=o.createEmbeddedView(i)),X_(i,s,e),new vh(s)}};function Gle(){return Hf(Os(),Ee())}function Hf(n,e){return 4&n.type?new Ule(e,n,d0(n,e)):null}let er=(()=>{class n{}return n.__NG_ELEMENT_ID__=Wle,n})();function Wle(){return IR(Os(),Ee())}const jle=er,kR=class extends jle{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return d0(this._hostTNode,this._hostLView)}get injector(){return new t0(this._hostTNode,this._hostLView)}get parentInjector(){const e=X5(this._hostTNode,this._hostLView);if(AD(e)){const t=e0(e,this._hostLView),i=J4(e);return new t0(t[1].data[i+8],t)}return new t0(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=RR(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let s,r;"number"==typeof i?s=i:null!=i&&(s=i.index,r=i.injector);const o=e.createEmbeddedView(t||{},r);return this.insert(o,s),o}createComponent(e,t,i,s,r){const o=e&&!function sh(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const h=t||{};a=h.index,i=h.injector,s=h.projectableNodes,r=h.environmentInjector||h.ngModuleRef}const c=o?e:new _h(Yn(e)),l=i||this.parentInjector;if(!r&&null==c.ngModule){const d=(o?l:this.parentInjector).get(wc,null);d&&(r=d)}const u=c.create(l,s,void 0,r);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,s=i[1];if(function xre(n){return L1(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const h=i[3],d=new kR(h,h[6],h[3]);d.detach(d.indexOf(e))}}const r=this._adjustIndex(t),o=this._lContainer;!function Z1e(n,e,t,i){const s=10+i,r=t.length;i>0&&(t[s-1][4]=e),i<r-10?(e[4]=t[s],ND(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function K1e(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(s,i,o,r);const a=z_(r,o),c=i[11],l=hf(c,o[7]);return null!==l&&function q1e(n,e,t,i,s,r){i[0]=s,i[6]=e,gh(n,i,t,1,s,r)}(s,o[6],c,i,l,a),e.attachToViewContainerRef(),ND(by(o),r,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=RR(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=A_(this._lContainer,t);i&&(Q5(by(this._lContainer),t),NL(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=A_(this._lContainer,t);return i&&null!=Q5(by(this._lContainer),t)?new vh(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function RR(n){return n[8]}function by(n){return n[8]||(n[8]=[])}function IR(n,e){let t;const i=e[n.index];if(L1(i))t=i;else{let s;if(8&n.type)s=Cs(i);else{const r=e[11];s=r.createComment("");const o=Jo(n,e);ql(r,hf(r,o),s,function tae(n,e){return n.nextSibling(e)}(r,o),!1)}e[n.index]=t=Oz(i,e,s,n),bf(e,t)}return new kR(t,n,e)}class xy{constructor(e){this.queryList=e,this.matches=null}clone(){return new xy(this.queryList)}setDirty(){this.queryList.setDirty()}}class My{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,s=[];for(let r=0;r<i;r++){const o=t.getByIndex(r);s.push(this.queries[o.indexInDeclarationView].clone())}return new My(s)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==NR(e,t).matches&&this.queries[t].setDirty()}}class HR{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class Cy{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const s=null!==t?t.length:0,r=this.getByIndex(i).embeddedTView(e,s);r&&(r.indexInDeclarationView=i,null!==t?t.push(r):t=[r])}return null!==t?new Cy(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class wy{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new wy(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let s=0;s<i.length;s++){const r=i[s];this.matchTNodeWithReadOption(e,t,Yle(t,r)),this.matchTNodeWithReadOption(e,t,K5(t,e,r,!1,!1))}else i===Js?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,K5(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const s=this.metadata.read;if(null!==s)if(s===je||s===er||s===Js&&4&t.type)this.addMatch(t.index,-2);else{const r=K5(t,e,s,!1,!1);null!==r&&this.addMatch(t.index,r)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Yle(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function Zle(n,e,t,i){return-1===t?function Xle(n,e){return 11&n.type?d0(n,e):4&n.type?Hf(n,e):null}(e,n):-2===t?function Kle(n,e,t){return t===je?d0(e,n):t===Js?Hf(e,n):t===er?IR(e,n):void 0}(n,e,i):nh(n,n[1],t,e)}function VR(n,e,t,i){const s=e[19].queries[i];if(null===s.matches){const r=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:Zle(e,r[l],o[c+1],t.metadata.read))}s.matches=a}return s.matches}function Sy(n,e,t,i){const s=n.queries.getByIndex(t),r=s.matches;if(null!==r){const o=VR(n,e,s,t);for(let a=0;a<r.length;a+=2){const c=r[a];if(c>0)i.push(o[a/2]);else{const l=r[a+1],u=e[-c];for(let h=10;h<u.length;h++){const d=u[h];d[17]===d[3]&&Sy(d[1],d,l,i)}if(null!==u[9]){const h=u[9];for(let d=0;d<h.length;d++){const f=h[d];Sy(f[1],f,l,i)}}}}}return i}function Ot(n){const e=Ee(),t=En(),i=vD();Ov(i+1);const s=NR(t,i);if(n.dirty&&function bre(n){return 4==(4&n[2])}(e)===(2==(2&s.metadata.flags))){if(null===s.matches)n.reset([]);else{const r=s.crossesNgTemplate?Sy(t,e,i,[]):VR(t,e,s,i);n.reset(r,d1e),n.notifyOnChanges()}return!0}return!1}function _i(n,e,t){const i=En();i.firstCreatePass&&(OR(i,new HR(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),PR(i,Ee(),e)}function Ti(n,e,t,i){const s=En();if(s.firstCreatePass){const r=Os();OR(s,new HR(e,t,i),r.index),function Jle(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(s,n),2==(2&t)&&(s.staticContentQueries=!0)}PR(s,Ee(),t)}function Nt(){return function Qle(n,e){return n[19].queries[e].queryList}(Ee(),vD())}function PR(n,e,t){const i=new z0(4==(4&t));Dz(n,e,i,i.destroy),null===e[19]&&(e[19]=new My),e[19].queries.push(new xy(i))}function OR(n,e,t){null===n.queries&&(n.queries=new Cy),n.queries.track(new wy(e,t))}function NR(n,e){return n.queries.getByIndex(e)}function xa(n,e){return Hf(n,e)}function Pf(...n){}const kh=new fe("Application Initializer");let Of=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Pf,this.reject=Pf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,s)=>{this.resolve=i,this.reject=s})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let s=0;s<this.appInits.length;s++){const r=this.appInits[s]();if(xh(r))t.push(r);else if(ly(r)){const o=new Promise((a,c)=>{r.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(s=>{this.reject(s)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(J(kh,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Rh=new fe("AppId",{providedIn:"root",factory:function sI(){return`${Ly()}${Ly()}${Ly()}`}});function Ly(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const rI=new fe("Platform Initializer"),Ao=new fe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Nf=new fe("appBootstrapListener"),Do=new fe("AnimationModuleType");let y3e=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ma=new fe("LocaleId",{providedIn:"root",factory:()=>Dn(Ma,Rt.Optional|Rt.SkipSelf)||function b3e(){return typeof $localize<"u"&&$localize.locale||L0}()});class M3e{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let zy=(()=>{class n{compileModuleSync(t){return new vy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),r=l2(bo(t).declarations).reduce((o,a)=>{const c=Yn(a);return c&&o.push(new _h(c)),o},[]);return new M3e(i,r)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const S3e=(()=>Promise.resolve(0))();function ky(n){typeof Zone>"u"?S3e.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Lt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $t(!1),this.onMicrotaskEmpty=new $t(!1),this.onStable=new $t(!1),this.onError=new $t(!1),typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();const s=this;if(s._nesting=0,s._outer=s._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const r=Zone.AsyncStackTaggingZoneSpec;s._inner=s._inner.fork(new r("Angular"))}Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&t,s.shouldCoalesceRunChangeDetection=i,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function T3e(){let n=ii.requestAnimationFrame,e=ii.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function D3e(n){const e=()=>{!function A3e(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ii,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Iy(n),n.isCheckStableRunning=!0,Ry(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Iy(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,s,r,o,a)=>{try{return cI(n),t.invokeTask(s,r,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===r.type||n.shouldCoalesceRunChangeDetection)&&e(),lI(n)}},onInvoke:(t,i,s,r,o,a,c)=>{try{return cI(n),t.invoke(s,r,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),lI(n)}},onHasTask:(t,i,s,r)=>{t.hasTask(s,r),i===s&&("microTask"==r.change?(n._hasPendingMicrotasks=r.microTask,Iy(n),Ry(n)):"macroTask"==r.change&&(n.hasPendingMacrotasks=r.macroTask))},onHandleError:(t,i,s,r)=>(t.handleError(s,r),n.runOutsideAngular(()=>n.onError.emit(r)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Lt.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(Lt.isInAngularZone())throw new Se(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,s){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+s,e,E3e,Pf,Pf);try{return r.runTask(o,t,i)}finally{r.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const E3e={};function Ry(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Iy(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function cI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function lI(n){n._nesting--,Ry(n)}class L3e{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $t,this.onMicrotaskEmpty=new $t,this.onStable=new $t,this.onError=new $t}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,s){return e.apply(t,i)}}const uI=new fe(""),Ff=new fe("");let Py,Hy=(()=>{class n{constructor(t,i,s){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Py||(function z3e(n){Py=n}(s),s.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Lt.assertNotInAngularZone(),ky(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ky(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,s){let r=-1;i&&i>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==r),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:s})}whenStable(t,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,s){return[]}}return n.\u0275fac=function(t){return new(t||n)(J(Lt),J(Vy),J(Ff))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})(),Vy=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return Py?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Dc=null;const hI=new fe("AllowMultipleToken"),Oy=new fe("PlatformDestroyListeners");class dI{constructor(e,t){this.name=e,this.token=t}}function pI(n,e,t=[]){const i=`Platform: ${e}`,s=new fe(i);return(r=[])=>{let o=Ny();if(!o||o.injector.get(hI,!1)){const a=[...t,...r,{provide:s,useValue:!0}];n?n(a):function I3e(n){if(Dc&&!Dc.get(hI,!1))throw new Se(400,!1);Dc=n;const e=n.get(gI);(function fI(n){const e=n.get(rI,null);e&&e.forEach(t=>t())})(n)}(function mI(n=[],e){return ws.create({name:e,providers:[{provide:l_,useValue:"platform"},{provide:Oy,useValue:new Set([()=>Dc=null])},...n]})}(a,i))}return function V3e(n){const e=Ny();if(!e)throw new Se(401,!1);return e}()}}function Ny(){return Dc?.get(gI)??null}let gI=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const s=function _I(n,e){let t;return t="noop"===n?new L3e:("zone.js"===n?void 0:n)||new Lt(e),t}(i?.ngZone,function vI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),r=[{provide:Lt,useValue:s}];return s.run(()=>{const o=ws.create({providers:r,parent:this.injector,name:t.moduleType.name}),a=t.create(o),c=a.injector.get(c2,null);if(!c)throw new Se(402,!1);return s.runOutsideAngular(()=>{const l=s.onError.subscribe({next:u=>{c.handleError(u)}});a.onDestroy(()=>{Bf(this._modules,a),l.unsubscribe()})}),function yI(n,e,t){try{const i=t();return xh(i)?i.catch(s=>{throw e.runOutsideAngular(()=>n.handleError(s)),s}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(c,s,()=>{const l=a.injector.get(Of);return l.runInitializers(),l.donePromise.then(()=>(function $k(n){yo(n,"Expected localeId to be defined"),"string"==typeof n&&(jk=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Ma,L0)||L0),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const s=bI({},i);return function k3e(n,e,t){const i=new vy(t);return Promise.resolve(i)}(0,0,t).then(r=>this.bootstrapModuleFactory(r,s))}_moduleDoBootstrap(t){const i=t.injector.get(I0);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(s=>i.bootstrap(s));else{if(!t.instance.ngDoBootstrap)throw new Se(403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(Oy,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(J(ws))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function bI(n,e){return Array.isArray(e)?e.reduce(bI,n):{...n,...e}}let I0=(()=>{class n{constructor(t,i,s){this._zone=t,this._injector=i,this._exceptionHandler=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const r=new Tn(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Tn(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{Lt.assertNotInAngularZone(),ky(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{Lt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),l.unsubscribe()}});this.isStable=Ja(r,o.pipe(ZA()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const s=t instanceof yL;if(!this._injector.get(Of).done)throw!s&&function q4(n){const e=Yn(n)||Ir(n)||Hr(n);return null!==e&&e.standalone}(t),new Se(405,false);let o;o=s?t:this._injector.get($l).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function R3e(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Jl),l=o.create(ws.NULL,[],i||o.selector,a),u=l.location.nativeElement,h=l.injector.get(uI,null);return h?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Bf(this.components,l),h?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new Se(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Bf(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Nf,[]).concat(this._bootstrapListeners).forEach(s=>s(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Bf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Se(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(J(Lt),J(wc),J(c2))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Bf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let MI=!0,CI=!1;function Uf(){return CI=!0,MI}let Ts=(()=>{class n{}return n.__NG_ELEMENT_ID__=N3e,n})();function N3e(n){return function F3e(n,e,t){if(N5(n)&&!t){const i=Mo(n.index,e);return new vh(i,i)}return 47&n.type?new vh(e[16],e):null}(Os(),Ee(),16==(16&n))}class EI{constructor(){}supports(e){return yh(e)}create(e){return new $3e(e)}}const j3e=(n,e)=>e;class $3e{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||j3e}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,s=0,r=null;for(;t||i;){const o=!i||t&&t.currentIndex<DI(i,s,r)?t:i,a=DI(o,s,r),c=o.currentIndex;if(o===i)s--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)s++;else{r||(r=[]);const l=a-s,u=c-s;if(l!=u){for(let d=0;d<l;d++){const f=d<r.length?r[d]:r[d]=0,p=f+d;u<=p&&p<l&&(r[d]=f+1)}r[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!yh(e))throw new Se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let s,r,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)r=e[a],o=this._trackByFn(a,r),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,r,o,a)),Object.is(t.item,r)||this._addIdentityChange(t,r)):(t=this._mismatch(t,r,o,a),i=!0),t=t._next}else s=0,function D2e(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Xl()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(s,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,s)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,s),i=!0),t=t._next,s++}),this.length=s;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,s){let r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,s)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,s))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,s)):e=this._addAfter(new q3e(t,i),r,s),e}_verifyReinsertion(e,t,i,s){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==r?e=this._reinsertAfter(r,e._prev,s):e.currentIndex!=s&&(e.currentIndex=s,this._addToMoves(e,s)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const s=e._prevRemoved,r=e._nextRemoved;return null===s?this._removalsHead=r:s._nextRemoved=r,null===r?this._removalsTail=s:r._prevRemoved=s,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const s=null===t?this._itHead:t._next;return e._next=s,e._prev=t,null===s?this._itTail=e:s._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new AI),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new AI),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class q3e{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Y3e{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class AI{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new Y3e,this.map.set(t,i)),i.add(e)}get(e,t){const s=this.map.get(e);return s?s.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function DI(n,e,t){const i=n.previousIndex;if(null===i)return i;let s=0;return t&&i<t.length&&(s=t[i]),i+e+s}class LI{constructor(){}supports(e){return e instanceof Map||ay(e)}create(){return new X3e}}class X3e{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||ay(e)))throw new Se(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,s)=>{if(t&&t.key===s)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(s,i);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const s=this._records.get(e);this._maybeAddToChanges(s,t);const r=s._prev,o=s._next;return r&&(r._next=o),o&&(o._prev=r),s._next=null,s._prev=null,s}const i=new Z3e(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class Z3e{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function zI(){return new Ca([new EI])}let Ca=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const s=i.factories.slice();t=t.concat(s)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||zI()),deps:[[n,new Gl,new o2]]}}find(t){const i=this.factories.find(s=>s.supports(t));if(null!=i)return i;throw new Se(901,!1)}}return n.\u0275prov=_e({token:n,providedIn:"root",factory:zI}),n})();function kI(){return new t3([new LI])}let t3=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const s=i.factories.slice();t=t.concat(s)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||kI()),deps:[[n,new Gl,new o2]]}}find(t){const i=this.factories.find(s=>s.supports(t));if(i)return i;throw new Se(901,!1)}}return n.\u0275prov=_e({token:n,providedIn:"root",factory:kI}),n})();const J3e=pI(null,"core",[]);let e4e=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(J(I0))},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({}),n})();function p2(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let jf=null;function wa(){return jf}const Ct=new fe("DocumentToken");let Wy=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:function(){return function s4e(){return J(RI)}()},providedIn:"platform"}),n})();const r4e=new fe("Location Initialized");let RI=(()=>{class n extends Wy{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wa().getBaseHref(this._doc)}onPopState(t){const i=wa().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=wa().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,s){II()?this._history.pushState(t,i,s):this.location.hash=s}replaceState(t,i,s){II()?this._history.replaceState(t,i,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(J(Ct))},n.\u0275prov=_e({token:n,factory:function(){return function o4e(){return new RI(J(Ct))}()},providedIn:"platform"}),n})();function II(){return!!window.history.pushState}function jy(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function HI(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function m2(n){return n&&"?"!==n[0]?"?"+n:n}let n3=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:function(){return Dn(PI)},providedIn:"root"}),n})();const VI=new fe("appBaseHref");let PI=(()=>{class n extends n3{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Dn(Ct).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return jy(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+m2(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${i}${s}`:i}pushState(t,i,s,r){const o=this.prepareExternalUrl(s+m2(r));this._platformLocation.pushState(t,i,o)}replaceState(t,i,s,r){const o=this.prepareExternalUrl(s+m2(r));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(J(Wy),J(VI,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),a4e=(()=>{class n extends n3{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=jy(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,s,r){let o=this.prepareExternalUrl(s+m2(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,s,r){let o=this.prepareExternalUrl(s+m2(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(J(Wy),J(VI,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})(),Ih=(()=>{class n{constructor(t){this._subject=new $t,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._baseHref=HI(OI(i)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+m2(i))}normalize(t){return n.stripTrailingSlash(function l4e(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,OI(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",s=null){this._locationStrategy.pushState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m2(i)),s)}replaceState(t,i="",s=null){this._locationStrategy.replaceState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m2(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(s=>s(t,i))}subscribe(t,i,s){return this._subject.subscribe({next:t,error:i,complete:s})}}return n.normalizeQueryParams=m2,n.joinWithSlash=jy,n.stripTrailingSlash=HI,n.\u0275fac=function(t){return new(t||n)(J(n3))},n.\u0275prov=_e({token:n,factory:function(){return function c4e(){return new Ih(J(n3))}()},providedIn:"root"}),n})();function OI(n){return n.replace(/\/index.html$/,"")}function qI(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[s,r]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(s.trim()===e)return decodeURIComponent(r)}return null}class q4e{constructor(e,t,i,s){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let v2=(()=>{class n{constructor(t,i,s){this._viewContainer=t,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((s,r,o)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new q4e(s.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===r?void 0:r);else if(null!==r){const a=i.get(r);i.move(a,o),ZI(a,s)}});for(let s=0,r=i.length;s<r;s++){const a=i.get(s).context;a.index=s,a.count=r,a.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{ZI(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(T(er),T(Js),T(Ca))},n.\u0275dir=le({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ZI(n,e){n.context.$implicit=e.item}let Lo=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new X4e,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){KI("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){KI("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(T(er),T(Js))},n.\u0275dir=le({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class X4e{constructor(){this.$implicit=null,this.ngIf=null}}function KI(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ni(e)}'.`)}class nb{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let t7=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=le({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),QI=(()=>{class n{constructor(t,i,s){this.ngSwitch=s,s._addCase(),this._view=new nb(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(T(er),T(Js),T(t7,9))},n.\u0275dir=le({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),s3=(()=>{class n{constructor(t,i,s){this._ngEl=t,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[s,r]=t.split("."),o=-1===s.indexOf("-")?void 0:to.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,s,r?`${i}${r}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,s,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(t3),T(To))},n.\u0275dir=le({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),eH=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:s,ngTemplateOutletContext:r,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(s,r,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(T(er))},n.\u0275dir=le({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Bi]}),n})();class Q4e{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}}class J4e{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const e0e=new J4e,t0e=new Q4e;let r3=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(xh(t))return e0e;if(ek(t))return t0e;throw function N1(n,e){return new Se(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(T(Ts,16))},n.\u0275pipe=Jr({name:"async",type:n,pure:!1,standalone:!0}),n})(),io=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({}),n})();const nH="browser";function Lc(n){return n===nH}function H0(n){return"server"===n}let x0e=(()=>{class n{}return n.\u0275prov=_e({token:n,providedIn:"root",factory:()=>new M0e(J(Ct),window)}),n})();class M0e{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function C0e(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=i.currentNode;for(;s;){const r=s.shadowRoot;if(r){const o=r.getElementById(e)||r.querySelector(`[name="${e}"]`);if(o)return o}s=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(i-r[0],s-r[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=iH(this.window.history)||iH(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function iH(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class sH{}class ab extends class B0e extends class i4e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function n4e(n){jf||(jf=n)}(new ab)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function U0e(){return Oh=Oh||document.querySelector("base"),Oh?Oh.getAttribute("href"):null}();return null==t?null:function G0e(n){s7=s7||document.createElement("a"),s7.setAttribute("href",n);const e=s7.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Oh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qI(document.cookie,e)}}let s7,Oh=null;const cH=new fe("TRANSITION_ID"),j0e=[{provide:kh,useFactory:function W0e(n,e,t){return()=>{t.get(Of).donePromise.then(()=>{const i=wa(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let r=0;r<s.length;r++)i.remove(s[r])})}},deps:[cH,Ct,ws],multi:!0}];let q0e=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();const r7=new fe("EventManagerPlugins");let o7=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,s){return this._findPluginFor(i).addEventListener(t,i,s)}addGlobalEventListener(t,i,s){return this._findPluginFor(i).addGlobalEventListener(t,i,s)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const s=this._plugins;for(let r=0;r<s.length;r++){const o=s[r];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(J(r7),J(Lt))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();class lH{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const s=wa().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,i)}}let uH=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),i.add(s))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})(),Nh=(()=>{class n extends uH{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,s){t.forEach(r=>{const o=this._doc.createElement("style");o.textContent=r,s.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(hH),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,s)=>{this._addStylesToHost(t,s,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(hH))}}return n.\u0275fac=function(t){return new(t||n)(J(Ct))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();function hH(n){wa().remove(n)}const cb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},lb=/%COMP%/g;function a7(n,e,t){for(let i=0;i<e.length;i++){let s=e[i];Array.isArray(s)?a7(n,s,t):(s=s.replace(lb,n),t.push(s))}return t}function pH(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let c7=(()=>{class n{constructor(t,i,s){this.eventManager=t,this.sharedStylesHost=i,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new ub(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case A1.Emulated:{let s=this.rendererByCompId.get(i.id);return s||(s=new J0e(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,s)),s.applyToHost(t),s}case 1:case A1.ShadowDom:return new e6e(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const s=a7(i.id,i.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(J(o7),J(Nh),J(Rh))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();class ub{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(cb[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(gH(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(gH(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,s){if(s){t=s+":"+t;const r=cb[s];r?e.setAttributeNS(r,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const s=cb[i];s?e.removeAttributeNS(s,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,s){s&(to.DashCase|to.Important)?e.style.setProperty(t,i,s&to.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&to.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,pH(i)):this.eventManager.addEventListener(e,t,pH(i))}}function gH(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class J0e extends ub{constructor(e,t,i,s){super(e),this.component=i;const r=a7(s+"-"+i.id,i.styles,[]);t.addStyles(r),this.contentAttr=function Z0e(n){return"_ngcontent-%COMP%".replace(lb,n)}(s+"-"+i.id),this.hostAttr=function K0e(n){return"_nghost-%COMP%".replace(lb,n)}(s+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class e6e extends ub{constructor(e,t,i,s){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const r=a7(s.id,s.styles,[]);for(let o=0;o<r.length;o++){const a=document.createElement("style");a.textContent=r[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let t6e=(()=>{class n extends lH{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,s){return t.addEventListener(i,s,!1),()=>this.removeEventListener(t,i,s)}removeEventListener(t,i,s){return t.removeEventListener(i,s)}}return n.\u0275fac=function(t){return new(t||n)(J(Ct))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();const vH=["alt","control","meta","shift"],n6e={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},i6e={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let s6e=(()=>{class n extends lH{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,s){const r=n.parseEventName(i),o=n.eventCallback(r.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wa().onAndCancel(t,r.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const r=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),vH.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=r,0!=i.length||0===r.length)return null;const c={};return c.domEventName=s,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let s=n6e[t.key]||t.key,r="";return i.indexOf("code.")>-1&&(s=t.code,r="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),vH.forEach(o=>{o!==s&&(0,i6e[o])(t)&&(r+=o+".")}),r+=s,r===i)}static eventCallback(t,i,s){return r=>{n.matchEventFullKeyCode(r,t)&&s.runGuarded(()=>i(r))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(J(Ct))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();const yH=[{provide:Ao,useValue:nH},{provide:rI,useValue:function r6e(){ab.makeCurrent()},multi:!0},{provide:Ct,useFactory:function a6e(){return function Coe(n){e_=n}(document),document},deps:[]}],c6e=pI(J3e,"browser",yH),bH=new fe(""),xH=[{provide:Ff,useClass:class $0e{addToWindow(e){ii.getAngularTestability=(i,s=!0)=>{const r=e.findTestabilityInTree(i,s);if(null==r)throw new Error("Could not find testability for element.");return r},ii.getAllAngularTestabilities=()=>e.getAllTestabilities(),ii.getAllAngularRootElements=()=>e.getAllRootElements(),ii.frameworkStabilizers||(ii.frameworkStabilizers=[]),ii.frameworkStabilizers.push(i=>{const s=ii.getAllAngularTestabilities();let r=s.length,o=!1;const a=function(c){o=o||c,r--,0==r&&i(o)};s.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?wa().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:uI,useClass:Hy,deps:[Lt,Vy,Ff]},{provide:Hy,useClass:Hy,deps:[Lt,Vy,Ff]}],MH=[{provide:l_,useValue:"root"},{provide:c2,useFactory:function o6e(){return new c2},deps:[]},{provide:r7,useClass:t6e,multi:!0,deps:[Ct,Lt,Ao]},{provide:r7,useClass:s6e,multi:!0,deps:[Ct]},{provide:c7,useClass:c7,deps:[o7,Nh,Rh]},{provide:fh,useExisting:c7},{provide:uH,useExisting:Nh},{provide:Nh,useClass:Nh,deps:[Ct]},{provide:o7,useClass:o7,deps:[r7,Lt]},{provide:sH,useClass:q0e,deps:[]},[]];let CH=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Rh,useValue:t.appId},{provide:cH,useExisting:Rh},j0e]}}}return n.\u0275fac=function(t){return new(t||n)(J(bH,12))},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({providers:[...MH,...xH],imports:[io,e4e]}),n})(),wH=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(J(Ct))},n.\u0275prov=_e({token:n,factory:function(t){let i=null;return i=t?new t:function u6e(){return new wH(J(Ct))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let V0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:function(t){let i=null;return i=t?new(t||n):J(EH),i},providedIn:"root"}),n})(),EH=(()=>{class n extends V0{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Hn.NONE:return i;case Hn.HTML:return ma(i,"HTML")?So(i):cL(this._doc,String(i)).toString();case Hn.STYLE:return ma(i,"Style")?So(i):i;case Hn.SCRIPT:if(ma(i,"Script"))return So(i);throw new Error("unsafe value used in a script context");case Hn.URL:return ma(i,"URL")?So(i):af(String(i));case Hn.RESOURCE_URL:if(ma(i,"ResourceURL"))return So(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function koe(n){return new Toe(n)}(t)}bypassSecurityTrustStyle(t){return function Roe(n){return new Eoe(n)}(t)}bypassSecurityTrustScript(t){return function Ioe(n){return new Aoe(n)}(t)}bypassSecurityTrustUrl(t){return function Hoe(n){return new Doe(n)}(t)}bypassSecurityTrustResourceUrl(t){return function Voe(n){return new Loe(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(J(Ct))},n.\u0275prov=_e({token:n,factory:function(t){let i=null;return i=t?new t:function v6e(n){return new EH(n.get(Ct))}(J(ws)),i},providedIn:"root"}),n})();function qt(n){return null!=n&&"false"!=`${n}`}function zo(n,e=0){return function _6e(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function l7(n){return Array.isArray(n)?n:[n]}function Ds(n){return null==n?"":"string"==typeof n?n:`${n}px`}function o3(n){return n instanceof je?n.nativeElement:n}function pt(...n){return ms(n,$u(n))}const{isArray:y6e}=Array;function fb(n){return Pt(e=>function b6e(n,e){return y6e(e)?n(...e):n(e)}(n,e))}const x6e=["addListener","removeListener"],M6e=["addEventListener","removeEventListener"],C6e=["on","off"];function F1(n,e,t,i){if(xn(t)&&(i=t,t=void 0),i)return F1(n,e,t).pipe(fb(i));const[s,r]=function T6e(n){return xn(n.addEventListener)&&xn(n.removeEventListener)}(n)?M6e.map(o=>a=>n[o](e,a,t)):function w6e(n){return xn(n.addListener)&&xn(n.removeListener)}(n)?x6e.map(AH(n,e)):function S6e(n){return xn(n.on)&&xn(n.off)}(n)?C6e.map(AH(n,e)):[];if(!s&&mv(n))return Zs(o=>F1(o,e,t))(Rr(n));if(!s)throw new TypeError("Invalid event target");return new Tn(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return s(a),()=>r(a)})}function AH(n,e){return t=>i=>n[t](e,i)}class E6e extends fi{constructor(e,t){super()}schedule(e,t=0){return this}}const u7={setInterval(n,e,...t){const{delegate:i}=u7;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=u7;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class pb extends E6e{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return u7.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;u7.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,i=!1;try{this.work(e)}catch(r){i=!0,s=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,w1(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Fh={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Fh;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const s=e(r=>{t=void 0,n(r)});return new fi(()=>t?.(s))},requestAnimationFrame(...n){const{delegate:e}=Fh;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Fh;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},DH={now:()=>(DH.delegate||Date).now(),delegate:void 0};class Bh{constructor(e,t=Bh.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Bh.now=DH.now;class mb extends Bh{constructor(e,t=Bh.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}new class D6e extends mb{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let s;e=e||i.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,s){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw s}}}(class A6e extends pb{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Fh.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(s=>s.id===t)||(Fh.cancelAnimationFrame(t),e._scheduled=void 0)}});let gb,z6e=1;const h7={};function LH(n){return n in h7&&(delete h7[n],!0)}const k6e={setImmediate(n){const e=z6e++;return h7[e]=!0,gb||(gb=Promise.resolve()),gb.then(()=>LH(e)&&n()),e},clearImmediate(n){LH(n)}},{setImmediate:R6e,clearImmediate:I6e}=k6e,d7={setImmediate(...n){const{delegate:e}=d7;return(e?.setImmediate||R6e)(...n)},clearImmediate(n){const{delegate:e}=d7;return(e?.clearImmediate||I6e)(n)},delegate:void 0},f7=(new class V6e extends mb{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let s;e=e||i.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,s){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw s}}}(class H6e extends pb{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=d7.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(s=>s.id===t)||(d7.clearImmediate(t),e._scheduled=void 0)}}),new mb(pb)),O6e=f7;function zH(n=0,e,t=O6e){let i=-1;return null!=e&&(jA(e)?t=e:i=e),new Tn(s=>{let r=function F6e(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;r<0&&(r=0);let o=0;return t.schedule(function(){s.closed||(s.next(o++),0<=i?this.schedule(void 0,i):s.complete())},r)})}function kH(n,e=f7){return function N6e(n){return Fi((e,t)=>{let i=!1,s=null,r=null,o=!1;const a=()=>{if(r?.unsubscribe(),r=null,i){i=!1;const l=s;s=null,t.next(l)}o&&t.complete()},c=()=>{r=null,o&&t.complete()};e.subscribe(mi(t,l=>{i=!0,s=l,r||Rr(n(l)).subscribe(r=mi(t,a,c))},()=>{o=!0,(!i||!r||r.closed)&&t.complete()}))})}(()=>zH(n,e))}function Pn(n,e){return Fi((t,i)=>{let s=0;t.subscribe(mi(i,r=>n.call(e,r,s++)&&i.next(r)))})}function Bn(n){return Fi((e,t)=>{Rr(n).subscribe(mi(t,()=>t.complete(),pc)),!t.closed&&e.subscribe(t)})}let vb;try{vb=typeof Intl<"u"&&Intl.v8BreakIterator}catch{vb=!1}let Uh,p7,a3,_b,Br=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Lc(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!vb)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(J(Ao))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function kc(n){return function B6e(){if(null==Uh&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Uh=!0}))}finally{Uh=Uh||!1}return Uh}()?n:!!n.capture}function IH(){if(null==a3){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return a3=!1,a3;if("scrollBehavior"in document.documentElement.style)a3=!0;else{const n=Element.prototype.scrollTo;a3=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return a3}function Gh(){if("object"!=typeof document||!document)return 0;if(null==p7){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),p7=0,0===n.scrollLeft&&(n.scrollLeft=1,p7=0===n.scrollLeft?1:2),n.remove()}return p7}function HH(n){if(function U6e(){if(null==_b){const n=typeof document<"u"?document.head:null;_b=!(!n||!n.createShadowRoot&&!n.attachShadow)}return _b}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function yb(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function c3(n){return n.composedPath?n.composedPath()[0]:n.target}function bb(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const G6e=new fe("cdk-dir-doc",{providedIn:"root",factory:function W6e(){return Dn(Ct)}}),j6e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let _2=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new $t,t){const s=t.documentElement?t.documentElement.dir:null;this.value=function $6e(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?j6e.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||s||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(J(G6e,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),l3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({}),n})(),m7=(()=>{class n{constructor(t,i,s){this._ngZone=t,this._platform=i,this._scrolled=new Tt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Tn(i=>{this._globalSubscription||this._addGlobalListener();const s=t>0?this._scrolled.pipe(kH(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):pt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const s=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Pn(r=>!r||s.indexOf(r)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((s,r)=>{this._scrollableContainsElement(r,t)&&i.push(r)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let s=o3(i),r=t.getElementRef().nativeElement;do{if(s==r)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>F1(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(J(Lt),J(Br),J(Ct,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wh=(()=>{class n{constructor(t,i,s,r){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=s,this.dir=r,this._destroyed=new Tt,this._elementScrolled=new Tn(o=>this.ngZone.runOutsideAngular(()=>F1(this.elementRef.nativeElement,"scroll").pipe(Bn(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,s=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=s?t.end:t.start),null==t.right&&(t.right=s?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),s&&0!=Gh()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==Gh()?t.left=t.right:1==Gh()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;IH()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",s="right",r=this.elementRef.nativeElement;if("top"==t)return r.scrollTop;if("bottom"==t)return r.scrollHeight-r.clientHeight-r.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?s:i:"end"==t&&(t=o?i:s),o&&2==Gh()?t==i?r.scrollWidth-r.clientWidth-r.scrollLeft:r.scrollLeft:o&&1==Gh()?t==i?r.scrollLeft+r.scrollWidth-r.clientWidth:-r.scrollLeft:t==i?r.scrollLeft:r.scrollWidth-r.clientWidth-r.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(m7),T(Lt),T(_2,8))},n.\u0275dir=le({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),jh=(()=>{class n{constructor(t,i,s){this._platform=t,this._change=new Tt,this._changeListener=r=>{this._change.next(r)},this._document=s,i.runOutsideAngular(()=>{if(t.isBrowser){const r=this._getWindow();r.addEventListener("resize",this._changeListener),r.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+s,right:t.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),s=t.documentElement,r=s.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||i.scrollY||s.scrollTop||0,left:-r.left||t.body.scrollLeft||i.scrollX||s.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(kH(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(J(Br),J(Lt),J(Ct,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),u3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({}),n})(),g7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[l3,u3,l3,u3]}),n})();class xb{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class $h extends xb{constructor(e,t,i,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=s}}class Mb extends xb{constructor(e,t,i,s){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=s}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class X6e extends xb{constructor(e){super(),this.element=e instanceof je?e.nativeElement:e}}class Cb{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof $h?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Mb?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof X6e?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Z6e extends Cb{constructor(e,t,i,s,r){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=s,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=r}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let s;return e.viewContainerRef?(s=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>s.destroy())):(s=i.create(e.injector||this._defaultInjector||ws.NULL),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=e,s}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(s=>this.outletElement.appendChild(s)),i.detectChanges(),this.setDisposeFn(()=>{let s=t.indexOf(i);-1!==s&&t.remove(s)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let wb=(()=>{class n extends Cb{constructor(t,i,s){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new $t,this.attachDomPortal=r=>{const o=r.element,a=this._document.createComment("dom-portal");r.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=r,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=s}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(r,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(T($l),T(er),T(Ct))},n.\u0275dir=le({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[pe]}),n})(),Rc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({}),n})();function cr(n){return n<=0?()=>Qa:Fi((e,t)=>{let i=0;e.subscribe(mi(t,s=>{++i<=n&&(t.next(s),n<=i&&t.complete())}))})}const VH=IH();class K6e{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ds(-this._previousScrollPosition.left),e.style.top=Ds(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,s=this._document.body.style,r=i.scrollBehavior||"",o=s.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),VH&&(i.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),VH&&(i.scrollBehavior=r,s.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class Q6e{constructor(e,t,i,s){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class PH{enable(){}disable(){}attach(){}}function Sb(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function OH(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class J6e{constructor(e,t,i,s){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=s,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:s}=this._viewportRuler.getViewportSize();Sb(t,[{width:i,height:s,bottom:s,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let eue=(()=>{class n{constructor(t,i,s,r){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=s,this.noop=()=>new PH,this.close=o=>new Q6e(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new K6e(this._viewportRuler,this._document),this.reposition=o=>new J6e(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=r}}return n.\u0275fac=function(t){return new(t||n)(J(m7),J(jh),J(Lt),J(Ct))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class NH{constructor(e){if(this.scrollStrategy=new PH,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class v7{constructor(e,t,i,s,r){this.offsetX=i,this.offsetY=s,this.panelClass=r,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class tue{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let FH=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(J(Ct))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nue=(()=>{class n extends FH{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=s=>{const r=this._attachedOverlays;for(let o=r.length-1;o>-1;o--)if(r[o]._keydownEvents.observers.length>0){const a=r[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(s)):a.next(s);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(J(Ct),J(Lt,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iue=(()=>{class n extends FH{constructor(t,i,s){super(t),this._platform=i,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=r=>{this._pointerDownEventTarget=c3(r)},this._clickListener=r=>{const o=c3(r),a="click"===r.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const u=c[l];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(r)):h.next(r)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(J(Ct),J(Br),J(Lt,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_7=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||bb()){const s=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let r=0;r<s.length;r++)s[r].remove()}const i=this._document.createElement("div");i.classList.add(t),bb()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(J(Ct),J(Br))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class qh{constructor(e,t,i,s,r,o,a,c,l,u=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=s,this._ngZone=r,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Tt,this._attachments=new Tt,this._detachments=new Tt,this._locationChanges=fi.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Tt,this._outsidePointerEvents=new Tt,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(cr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Ds(this._config.width),e.height=Ds(this._config.height),e.minWidth=Ds(this._config.minWidth),e.minHeight=Ds(this._config.minHeight),e.maxWidth=Ds(this._config.maxWidth),e.maxHeight=Ds(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const s=l7(t||[]).filter(r=>!!r);s.length&&(i?e.classList.add(...s):e.classList.remove(...s))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Bn(Ja(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const BH="cdk-overlay-connected-position-bounding-box",sue=/([A-Za-z%]+)$/;class rue{constructor(e,t,i,s,r){this._viewportRuler=t,this._document=i,this._platform=s,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Tt,this._resizeSubscription=fi.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(BH),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,s=this._containerRect,r=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,s,a),l=this._getOverlayPoint(c,t,a),u=this._getOverlayFit(l,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(u,l,i)?r.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(r.length){let a=null,c=-1;for(const l of r){const u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&h3(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(BH),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let s,r;if("center"==i.originX)s=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;s="start"==i.originX?o:a}return t.left<0&&(s-=t.left),r="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(r-=t.top),{x:s,y:r}}_getOverlayPoint(e,t,i){let s,r;return s="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,r="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+s,y:e.y+r}}_getOverlayFit(e,t,i,s){const r=GH(t);let{x:o,y:a}=e,c=this._getOffset(s,"x"),l=this._getOffset(s,"y");c&&(o+=c),l&&(a+=l);let d=0-a,f=a+r.height-i.height,p=this._subtractOverflows(r.width,0-o,o+r.width-i.width),m=this._subtractOverflows(r.height,d,f),g=p*m;return{visibleArea:g,isCompletelyWithinViewport:r.width*r.height===g,fitsInViewportVertically:m===r.height,fitsInViewportHorizontally:p==r.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const s=i.bottom-t.y,r=i.right-t.x,o=UH(this._overlayRef.getConfig().minHeight),a=UH(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportHorizontally||null!=a&&a<=r;return(e.fitsInViewportVertically||null!=o&&o<=s)&&l}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const s=GH(t),r=this._viewportRect,o=Math.max(e.x+s.width-r.width,0),a=Math.max(e.y+s.height-r.height,0),c=Math.max(r.top-i.top-e.y,0),l=Math.max(r.left-i.left-e.x,0);let u=0,h=0;return u=s.width<=r.width?l||-o:e.x<this._viewportMargin?r.left-i.left-e.x:0,h=s.height<=r.height?c||-a:e.y<this._viewportMargin?r.top-i.top-e.y:0,this._previousPushAmount={x:u,y:h},{x:e.x+u,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),s=new tue(e,i);this._positionChanges.next(s)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,s=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let r=0;r<t.length;r++)t[r].style.transformOrigin=`${i} ${s}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,s=this._isRtl();let r,o,a,u,h,d;if("top"===t.overlayY)o=e.y,r=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,r=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;r=2*f,o=e.y-f,r>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}if("end"===t.overlayX&&!s||"start"===t.overlayX&&s)d=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!s||"end"===t.overlayX&&s)h=e.x,u=i.right-e.x;else{const f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,h=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-p/2)}return{top:o,left:h,bottom:a,right:d,width:u,height:r}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{const r=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;s.height=Ds(i.height),s.top=Ds(i.top),s.bottom=Ds(i.bottom),s.width=Ds(i.width),s.left=Ds(i.left),s.right=Ds(i.right),s.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",s.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",r&&(s.maxHeight=Ds(r)),o&&(s.maxWidth=Ds(o))}this._lastBoundingBoxSize=i,h3(this._boundingBox.style,s)}_resetBoundingBoxStyles(){h3(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){h3(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},s=this._hasExactPosition(),r=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(s){const u=this._viewportRuler.getViewportScrollPosition();h3(i,this._getExactOverlayY(t,e,u)),h3(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(s?i.maxHeight=Ds(o.maxHeight):r&&(i.maxHeight="")),o.maxWidth&&(s?i.maxWidth=Ds(o.maxWidth):r&&(i.maxWidth="")),h3(this._pane.style,i)}_getExactOverlayY(e,t,i){let s={top:"",bottom:""},r=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i)),"bottom"===e.overlayY?s.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":s.top=Ds(r.y),s}_getExactOverlayX(e,t,i){let o,s={left:"",right:""},r=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?s.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":s.left=Ds(r.x),s}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:OH(e,i),isOriginOutsideView:Sb(e,i),isOverlayClipped:OH(t,i),isOverlayOutsideView:Sb(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,s)=>i-Math.max(s,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&l7(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof je)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function h3(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function UH(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(sue);return t&&"px"!==t?null:parseFloat(e)}return n||null}function GH(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const WH="cdk-global-overlay-wrapper";class oue{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(WH),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:s,height:r,maxWidth:o,maxHeight:a}=i,c=!("100%"!==s&&"100vw"!==s||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==r&&"100vh"!==r||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,h=this._xOffset,d="rtl"===this._overlayRef.getConfig().direction;let f="",p="",m="";c?m="flex-start":"center"===u?(m="center",d?p=h:f=h):d?"left"===u||"end"===u?(m="flex-end",f=h):("right"===u||"start"===u)&&(m="flex-start",p=h):"left"===u||"start"===u?(m="flex-start",f=h):("right"===u||"end"===u)&&(m="flex-end",p=h),e.position=this._cssPosition,e.marginLeft=c?"0":f,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":p,t.justifyContent=m,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(WH),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let aue=(()=>{class n{constructor(t,i,s,r){this._viewportRuler=t,this._document=i,this._platform=s,this._overlayContainer=r}global(){return new oue}flexibleConnectedTo(t){return new rue(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(J(jh),J(Ct),J(Br),J(_7))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cue=0,r1=(()=>{class n{constructor(t,i,s,r,o,a,c,l,u,h,d,f){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=s,this._positionBuilder=r,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=l,this._directionality=u,this._location=h,this._outsideClickDispatcher=d,this._animationsModuleType=f}create(t){const i=this._createHostElement(),s=this._createPaneElement(i),r=this._createPortalOutlet(s),o=new NH(t);return o.direction=o.direction||this._directionality.value,new qh(r,i,s,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+cue++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(I0)),new Z6e(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(J(eue),J(_7),J($l),J(aue),J(nue),J(ws),J(Lt),J(Ct),J(_2),J(Ih),J(iue),J(Do,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();const lue=new fe("cdk-connected-overlay-scroll-strategy");let uue=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(T(je))},n.\u0275dir=le({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})();const due={provide:lue,deps:[r1],useFactory:function hue(n){return()=>n.scrollStrategies.reposition()}};let Ic=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({providers:[r1,due],imports:[l3,Rc,g7,g7]}),n})();var y7={prefix:"fab",iconName:"discord",icon:[640,512,[],"f392","M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"]},Eb={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};class Un extends Tt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const b7=ei(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:j9e}=Array,{getPrototypeOf:$9e,prototype:q9e,keys:Y9e}=Object;function CV(n){if(1===n.length){const e=n[0];if(j9e(e))return{args:e,keys:null};if(function X9e(n){return n&&"object"==typeof n&&$9e(n)===q9e}(e)){const t=Y9e(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function wV(n,e){return n.reduce((t,i,s)=>(t[i]=e[s],t),{})}function Ab(...n){const e=$u(n),t=$A(n),{args:i,keys:s}=CV(n);if(0===i.length)return ms([],e);const r=new Tn(function Z9e(n,e,t=kr){return i=>{SV(e,()=>{const{length:s}=n,r=new Array(s);let o=s,a=s;for(let c=0;c<s;c++)SV(e,()=>{const l=ms(n[c],e);let u=!1;l.subscribe(mi(i,h=>{r[c]=h,u||(u=!0,a--),a||i.next(t(r.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,s?o=>wV(s,o):kr));return t?r.pipe(fb(t)):r}function SV(n,e,t){n?Ka(t,n,e):e()}function x7(...n){return function K9e(){return j4(1)}()(ms(n,$u(n)))}function M7(n){return new Tn(e=>{Rr(n()).subscribe(e)})}function O0(n,e){const t=xn(n)?n:()=>n,i=s=>s.error(t());return new Tn(e?s=>e.schedule(i,0,s):i)}function Db(){return Fi((n,e)=>{let t=null;n._refCount++;const i=mi(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,r=t;t=null,s&&(!r||s===r)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class Lb extends Tn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,kA(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fi;const t=this.getSubject();e.add(this.source.subscribe(mi(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fi.EMPTY)}return e}refCount(){return Db()(this)}}function Sa(n,e){return Fi((t,i)=>{let s=null,r=0,o=!1;const a=()=>o&&!s&&i.complete();t.subscribe(mi(i,c=>{s?.unsubscribe();let l=0;const u=r++;Rr(n(c,u)).subscribe(s=mi(i,h=>i.next(e?e(c,h,u,l++):h),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function y2(...n){const e=$u(n);return Fi((t,i)=>{(e?x7(n,t,e):x7(n,t)).subscribe(i)})}function C7(n){return Fi((e,t)=>{let i=!1;e.subscribe(mi(t,s=>{i=!0,t.next(s)},()=>{i||t.next(n),t.complete()}))})}function TV(n=Q9e){return Fi((e,t)=>{let i=!1;e.subscribe(mi(t,s=>{i=!0,t.next(s)},()=>i?t.complete():t.error(n())))})}function Q9e(){return new b7}function Hc(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Pn((s,r)=>n(s,r,i)):kr,cr(1),t?C7(e):TV(()=>new b7))}function Vc(n,e){return xn(e)?Zs(n,e,1):Zs(n,1)}function Ei(n,e,t){const i=xn(n)||e||t?{next:n,error:e,complete:t}:n;return i?Fi((s,r)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;s.subscribe(mi(r,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),r.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),r.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),r.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):kr}function Ta(n){return Fi((e,t)=>{let r,i=null,s=!1;i=e.subscribe(mi(t,void 0,void 0,o=>{r=Rr(n(o,Ta(n)(e))),i?(i.unsubscribe(),i=null,r.subscribe(t)):s=!0})),s&&(i.unsubscribe(),i=null,r.subscribe(t))})}function J9e(n,e,t,i,s){return(r,o)=>{let a=t,c=e,l=0;r.subscribe(mi(o,u=>{const h=l++;c=a?n(c,u,h):(a=!0,u),i&&o.next(c)},s&&(()=>{a&&o.next(c),o.complete()})))}}function EV(n,e){return Fi(J9e(n,e,arguments.length>=2,!0))}function zb(n){return n<=0?()=>Qa:Fi((e,t)=>{let i=[];e.subscribe(mi(t,s=>{i.push(s),n<i.length&&i.shift()},()=>{for(const s of i)t.next(s);t.complete()},void 0,()=>{i=null}))})}function AV(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Pn((s,r)=>n(s,r,i)):kr,zb(1),t?C7(e):TV(()=>new b7))}function kb(n){return Pt(()=>n)}function w7(n){return Fi((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const un="primary",Yh=Symbol("RouteTitle");class tme{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function N0(n){return new tme(n)}function nme(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const s={};for(let r=0;r<i.length;r++){const o=i[r],a=n[r];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:s}}function Ea(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let s;for(let r=0;r<t.length;r++)if(s=t[r],!DV(n[s],e[s]))return!1;return!0}function DV(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((s,r)=>i[r]===s)}return n===e}function LV(n){return Array.prototype.concat.apply([],n)}function zV(n){return n.length>0?n[n.length-1]:null}function lr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Pc(n){return ly(n)?n:xh(n)?ms(Promise.resolve(n)):pt(n)}const rme={exact:function IV(n,e,t){if(!f3(n.segments,e.segments)||!S7(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!IV(n.children[i],e.children[i],t))return!1;return!0},subset:HV},kV={exact:function ome(n,e){return Ea(n,e)},subset:function ame(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>DV(n[t],e[t]))},ignored:()=>!0};function RV(n,e,t){return rme[t.paths](n.root,e.root,t.matrixParams)&&kV[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function HV(n,e,t){return VV(n,e,e.segments,t)}function VV(n,e,t,i){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!f3(s,t)||e.hasChildren()||!S7(s,t,i))}if(n.segments.length===t.length){if(!f3(n.segments,t)||!S7(n.segments,t,i))return!1;for(const s in e.children)if(!n.children[s]||!HV(n.children[s],e.children[s],i))return!1;return!0}{const s=t.slice(0,n.segments.length),r=t.slice(n.segments.length);return!!(f3(n.segments,s)&&S7(n.segments,s,i)&&n.children[un])&&VV(n.children[un],e,r,i)}}function S7(n,e,t){return e.every((i,s)=>kV[t](n[s].parameters,i.parameters))}class d3{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=N0(this.queryParams)),this._queryParamMap}toString(){return ume.serialize(this)}}class hn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,lr(t,(i,s)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return T7(this)}}class Xh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=N0(this.parameters)),this._parameterMap}toString(){return FV(this)}}function f3(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let PV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:function(){return new Ib},providedIn:"root"}),n})();class Ib{parse(e){const t=new yme(e);return new d3(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Zh(e.root,!0)}`,i=function fme(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(s=>`${E7(t)}=${E7(s)}`).join("&"):`${E7(t)}=${E7(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function hme(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ume=new Ib;function T7(n){return n.segments.map(e=>FV(e)).join("/")}function Zh(n,e){if(!n.hasChildren())return T7(n);if(e){const t=n.children[un]?Zh(n.children[un],!1):"",i=[];return lr(n.children,(s,r)=>{r!==un&&i.push(`${r}:${Zh(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function lme(n,e){let t=[];return lr(n.children,(i,s)=>{s===un&&(t=t.concat(e(i,s)))}),lr(n.children,(i,s)=>{s!==un&&(t=t.concat(e(i,s)))}),t}(n,(i,s)=>s===un?[Zh(n.children[un],!1)]:[`${s}:${Zh(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[un]?`${T7(n)}/${t[0]}`:`${T7(n)}/(${t.join("//")})`}}function OV(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function E7(n){return OV(n).replace(/%3B/gi,";")}function Hb(n){return OV(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function A7(n){return decodeURIComponent(n)}function NV(n){return A7(n.replace(/\+/g,"%20"))}function FV(n){return`${Hb(n.path)}${function dme(n){return Object.keys(n).map(e=>`;${Hb(e)}=${Hb(n[e])}`).join("")}(n.parameters)}`}const pme=/^[^\/()?;=#]+/;function D7(n){const e=n.match(pme);return e?e[0]:""}const mme=/^[^=?&#]+/,vme=/^[^&#]+/;class yme{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hn([],{}):new hn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[un]=new hn(e,t)),i}parseSegment(){const e=D7(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Se(4009,!1);return this.capture(e),new Xh(A7(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=D7(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=D7(this.remaining);s&&(i=s,this.capture(i))}e[A7(t)]=A7(i)}parseQueryParam(e){const t=function gme(n){const e=n.match(mme);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function _me(n){const e=n.match(vme);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const s=NV(t),r=NV(i);if(e.hasOwnProperty(s)){let o=e[s];Array.isArray(o)||(o=[o],e[s]=o),o.push(r)}else e[s]=r}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=D7(this.remaining),s=this.remaining[i.length];if("/"!==s&&")"!==s&&";"!==s)throw new Se(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):e&&(r=un);const o=this.parseChildren();t[r]=1===Object.keys(o).length?o[un]:new hn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Se(4011,!1)}}function Vb(n){return n.segments.length>0?new hn([],{[un]:n}):n}function L7(n){const e={};for(const i of Object.keys(n.children)){const r=L7(n.children[i]);(r.segments.length>0||r.hasChildren())&&(e[i]=r)}return function bme(n){if(1===n.numberOfChildren&&n.children[un]){const e=n.children[un];return new hn(n.segments.concat(e.segments),e.children)}return n}(new hn(n.segments,e))}function p3(n){return n instanceof d3}function Cme(n,e,t,i,s){if(0===t.length)return F0(e.root,e.root,e.root,i,s);const r=function GV(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new UV(!0,0,n);let e=0,t=!1;const i=n.reduce((s,r,o)=>{if("object"==typeof r&&null!=r){if(r.outlets){const a={};return lr(r.outlets,(c,l)=>{a[l]="string"==typeof c?c.split("/"):c}),[...s,{outlets:a}]}if(r.segmentPath)return[...s,r.segmentPath]}return"string"!=typeof r?[...s,r]:0===o?(r.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&s.push(a))}),s):[...s,r]},[]);return new UV(t,e,i)}(t);return r.toRoot()?F0(e.root,e.root,new hn([],{}),i,s):function o(c){const l=function Sme(n,e,t,i){if(n.isAbsolute)return new B0(e.root,!0,0);if(-1===i)return new B0(t,t===e.root,0);return function WV(n,e,t){let i=n,s=e,r=t;for(;r>s;){if(r-=s,i=i.parent,!i)throw new Se(4005,!1);s=i.segments.length}return new B0(i,!1,s-r)}(t,i+(Kh(n.commands[0])?0:1),n.numberOfDoubleDots)}(r,e,n.snapshot?._urlSegment,c),u=l.processChildren?Jh(l.segmentGroup,l.index,r.commands):Ob(l.segmentGroup,l.index,r.commands);return F0(e.root,l.segmentGroup,u,i,s)}(n.snapshot?._lastPathIndex)}function Kh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Qh(n){return"object"==typeof n&&null!=n&&n.outlets}function F0(n,e,t,i,s){let o,r={};i&&lr(i,(c,l)=>{r[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:BV(n,e,t);const a=Vb(L7(o));return new d3(a,r,s)}function BV(n,e,t){const i={};return lr(n.children,(s,r)=>{i[r]=s===e?t:BV(s,e,t)}),new hn(n.segments,i)}class UV{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Kh(i[0]))throw new Se(4003,!1);const s=i.find(Qh);if(s&&s!==zV(i))throw new Se(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class B0{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function Ob(n,e,t){if(n||(n=new hn([],{})),0===n.segments.length&&n.hasChildren())return Jh(n,e,t);const i=function Eme(n,e,t){let i=0,s=e;const r={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(i>=t.length)return r;const o=n.segments[s],a=t[i];if(Qh(a))break;const c=`${a}`,l=i<t.length-1?t[i+1]:null;if(s>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!$V(c,l,o))return r;i+=2}else{if(!$V(c,{},o))return r;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}(n,e,t),s=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const r=new hn(n.segments.slice(0,i.pathIndex),{});return r.children[un]=new hn(n.segments.slice(i.pathIndex),n.children),Jh(r,0,s)}return i.match&&0===s.length?new hn(n.segments,{}):i.match&&!n.hasChildren()?Nb(n,e,t):i.match?Jh(n,0,s):Nb(n,e,t)}function Jh(n,e,t){if(0===t.length)return new hn(n.segments,{});{const i=function Tme(n){return Qh(n[0])?n[0].outlets:{[un]:n}}(t),s={};return lr(i,(r,o)=>{"string"==typeof r&&(r=[r]),null!==r&&(s[o]=Ob(n.children[o],e,r))}),lr(n.children,(r,o)=>{void 0===i[o]&&(s[o]=r)}),new hn(n.segments,s)}}function Nb(n,e,t){const i=n.segments.slice(0,e);let s=0;for(;s<t.length;){const r=t[s];if(Qh(r)){const c=Ame(r.outlets);return new hn(i,c)}if(0===s&&Kh(t[0])){i.push(new Xh(n.segments[e].path,jV(t[0]))),s++;continue}const o=Qh(r)?r.outlets[un]:`${r}`,a=s<t.length-1?t[s+1]:null;o&&a&&Kh(a)?(i.push(new Xh(o,jV(a))),s+=2):(i.push(new Xh(o,{})),s++)}return new hn(i,{})}function Ame(n){const e={};return lr(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=Nb(new hn([],{}),0,t))}),e}function jV(n){const e={};return lr(n,(t,i)=>e[i]=`${t}`),e}function $V(n,e,t){return n==t.path&&Ea(e,t.parameters)}class b2{constructor(e,t){this.id=e,this.url=t}}class Fb extends b2{constructor(e,t,i="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Aa extends b2{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class z7 extends b2{constructor(e,t,i,s){super(e,t),this.reason=i,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qV extends b2{constructor(e,t,i,s){super(e,t),this.error=i,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Dme extends b2{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lme extends b2{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zme extends b2{constructor(e,t,i,s,r){super(e,t),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=r,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class kme extends b2{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rme extends b2{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ime{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Hme{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Vme{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pme{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ome{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nme{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YV{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class XV{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Bb(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=Bb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ub(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Ub(e,this._root).map(t=>t.value)}}function Bb(n,e){if(n===e.value)return e;for(const t of e.children){const i=Bb(n,t);if(i)return i}return null}function Ub(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Ub(n,t);if(i.length)return i.unshift(e),i}return[]}class x2{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function U0(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ZV extends XV{constructor(e,t){super(e),this.snapshot=t,Gb(this,e)}toString(){return this.snapshot.toString()}}function KV(n,e){const t=function Bme(n,e){const o=new k7([],{},{},"",{},un,e,null,n.root,-1,{});return new JV("",new x2(o,[]))}(n,e),i=new Un([new Xh("",{})]),s=new Un({}),r=new Un({}),o=new Un({}),a=new Un(""),c=new Oc(i,s,o,a,r,un,e,t.root);return c.snapshot=t.root,new ZV(new x2(c,[]),t)}class Oc{constructor(e,t,i,s,r,o,a,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.title=this.data?.pipe(Pt(l=>l[Yh]))??pt(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Pt(e=>N0(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Pt(e=>N0(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function QV(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const s=t[i],r=t[i-1];if(s.routeConfig&&""===s.routeConfig.path)i--;else{if(r.component)break;i--}}return function Ume(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class k7{constructor(e,t,i,s,r,o,a,c,l,u,h,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.title=this.data?.[Yh],this.routeConfig=c,this._urlSegment=l,this._lastPathIndex=u,this._correctedLastPathIndex=d??u,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=N0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=N0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class JV extends XV{constructor(e,t){super(t),this.url=e,Gb(this,t)}toString(){return eP(this._root)}}function Gb(n,e){e.value._routerState=n,e.children.forEach(t=>Gb(n,t))}function eP(n){const e=n.children.length>0?` { ${n.children.map(eP).join(", ")} } `:"";return`${n.value}${e}`}function Wb(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ea(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ea(e.params,t.params)||n.params.next(t.params),function ime(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ea(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ea(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function jb(n,e){const t=Ea(n.params,e.params)&&function cme(n,e){return f3(n,e)&&n.every((t,i)=>Ea(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||jb(n.parent,e.parent))}function ed(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const s=function Wme(n,e,t){return e.children.map(i=>{for(const s of t.children)if(n.shouldReuseRoute(i.value,s.value.snapshot))return ed(n,i,s);return ed(n,i)})}(n,e,t);return new x2(i,s)}{if(n.shouldAttach(e.value)){const r=n.retrieve(e.value);if(null!==r){const o=r.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ed(n,a)),o}}const i=function jme(n){return new Oc(new Un(n.url),new Un(n.params),new Un(n.queryParams),new Un(n.fragment),new Un(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(r=>ed(n,r));return new x2(i,s)}}const $b="ngNavigationCancelingError";function tP(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=p3(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=nP(!1,0,e);return s.url=t,s.navigationBehaviorOptions=i,s}function nP(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[$b]=!0,i.cancellationCode=e,t&&(i.url=t),i}function iP(n){return sP(n)&&p3(n.url)}function sP(n){return n&&n[$b]}class $me{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new td,this.attachRef=null}}let td=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const s=this.getOrCreateContext(t);s.outlet=i,this.contexts.set(t,s)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new $me,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const R7=!1;let I7=(()=>{class n{constructor(t,i,s,r,o){this.parentContexts=t,this.location=i,this.changeDetector=r,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new $t,this.deactivateEvents=new $t,this.attachEvents=new $t,this.detachEvents=new $t,this.name=s||un,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Se(4012,R7);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Se(4012,R7);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Se(4012,R7);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Se(4013,R7);this._activatedRoute=t;const s=this.location,o=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new qme(t,a,s.injector);if(i&&function Yme(n){return!!n.resolveComponentFactory}(i)){const l=i.resolveComponentFactory(o);this.activated=s.createComponent(l,s.length,c)}else this.activated=s.createComponent(o,{index:s.length,injector:c,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(T(td),T(er),e1("name"),T(Ts),T(wc))},n.\u0275dir=le({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class qme{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Oc?this.route:e===td?this.childContexts:this.parent.get(e,t)}}let qb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=dt({type:n,selectors:[["ng-component"]],standalone:!0,features:[yR],decls:1,vars:0,template:function(t,i){1&t&&te(0,"router-outlet")},dependencies:[I7],encapsulation:2}),n})();function rP(n,e){return n.providers&&!n._injector&&(n._injector=If(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Xb(n){const e=n.children&&n.children.map(Xb),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==un&&(t.component=qb),t}function o1(n){return n.outlet||un}function oP(n,e){const t=n.filter(i=>o1(i)===e);return t.push(...n.filter(i=>o1(i)!==e)),t}function nd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Jme{constructor(e,t,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Wb(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const s=U0(t);e.children.forEach(r=>{const o=r.value.outlet;this.deactivateRoutes(r,s[o],i),delete s[o]}),lr(s,(r,o)=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(e,t,i){const s=e.value,r=t?t.value:null;if(s===r)if(s.component){const o=i.getContext(s.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else r&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),s=i&&e.value.component?i.children:t,r=U0(e);for(const o of Object.keys(r))this.deactivateRouteAndItsChildren(r[o],s);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),s=i&&e.value.component?i.children:t,r=U0(e);for(const o of Object.keys(r))this.deactivateRouteAndItsChildren(r[o],s);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const s=U0(t);e.children.forEach(r=>{this.activateRoutes(r,s[r.value.outlet],i),this.forwardEvent(new Nme(r.value.snapshot))}),e.children.length&&this.forwardEvent(new Pme(e.value.snapshot))}activateRoutes(e,t,i){const s=e.value,r=t?t.value:null;if(Wb(s),s===r)if(s.component){const o=i.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(s.component){const o=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Wb(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=nd(s.snapshot),c=a?.get($l)??null;o.attachRef=null,o.route=s,o.resolver=c,o.injector=a,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class aP{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class H7{constructor(e,t){this.component=e,this.route=t}}function ege(n,e,t){const i=n._root;return id(i,e?e._root:null,t,[i.value])}function G0(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function Kse(n){return null!==R5(n)}(n)?e.get(n):n:i}function id(n,e,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=U0(e);return n.children.forEach(o=>{(function nge(n,e,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){const c=function ige(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!f3(n.url,e.url);case"pathParamsOrQueryParamsChange":return!f3(n.url,e.url)||!Ea(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jb(n,e)||!Ea(n.queryParams,e.queryParams);default:return!jb(n,e)}}(o,r,r.routeConfig.runGuardsAndResolvers);c?s.canActivateChecks.push(new aP(i)):(r.data=o.data,r._resolvedData=o._resolvedData),id(n,e,r.component?a?a.children:null:t,i,s),c&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new H7(a.outlet.component,o))}else o&&sd(e,a,s),s.canActivateChecks.push(new aP(i)),id(n,null,r.component?a?a.children:null:t,i,s)})(o,r[o.value.outlet],t,i.concat([o.value]),s),delete r[o.value.outlet]}),lr(r,(o,a)=>sd(o,t.getContext(a),s)),s}function sd(n,e,t){const i=U0(n),s=n.value;lr(i,(r,o)=>{sd(r,s.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new H7(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function rd(n){return"function"==typeof n}function Zb(n){return n instanceof b7||"EmptyError"===n?.name}const V7=Symbol("INITIAL_VALUE");function W0(){return Sa(n=>Ab(n.map(e=>e.pipe(cr(1),y2(V7)))).pipe(Pt(e=>{for(const t of e)if(!0!==t){if(t===V7)return V7;if(!1===t||t instanceof d3)return t}return!0}),Pn(e=>e!==V7),cr(1)))}function cP(n){return function gc(...n){return L5(n)}(Ei(e=>{if(p3(e))throw tP(0,e)}),Pt(e=>!0===e))}const Kb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lP(n,e,t,i,s){const r=Qb(n,e,t);return r.matched?function bge(n,e,t,i){const s=e.canMatch;return s&&0!==s.length?pt(s.map(o=>{const a=G0(o,n);return Pc(function lge(n){return n&&rd(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(W0(),cP()):pt(!0)}(i=rP(e,i),e,t).pipe(Pt(o=>!0===o?r:{...Kb})):pt(r)}function Qb(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Kb}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||nme)(t,n,e);if(!s)return{...Kb};const r={};lr(s.posParams,(a,c)=>{r[c]=a.path});const o=s.consumed.length>0?{...r,...s.consumed[s.consumed.length-1].parameters}:r;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function P7(n,e,t,i,s="corrected"){if(t.length>0&&function Cge(n,e,t){return t.some(i=>O7(n,e,i)&&o1(i)!==un)}(n,t,i)){const o=new hn(e,function Mge(n,e,t,i){const s={};s[un]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const r of t)if(""===r.path&&o1(r)!==un){const o=new hn([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,s[o1(r)]=o}return s}(n,e,i,new hn(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function wge(n,e,t){return t.some(i=>O7(n,e,i))}(n,t,i)){const o=new hn(n.segments,function xge(n,e,t,i,s,r){const o={};for(const a of i)if(O7(n,t,a)&&!s[o1(a)]){const c=new hn([],{});c._sourceSegment=n,c._segmentIndexShift="legacy"===r?n.segments.length:e.length,o[o1(a)]=c}return{...s,...o}}(n,e,t,i,n.children,s));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const r=new hn(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function O7(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function uP(n,e,t,i){return!!(o1(n)===i||i!==un&&O7(e,t,n))&&("**"===n.path||Qb(e,n,t).matched)}function hP(n,e,t){return 0===e.length&&!n.children[t]}const N7=!1;class F7{constructor(e){this.segmentGroup=e||null}}class dP{constructor(e){this.urlTree=e}}function od(n){return O0(new F7(n))}function fP(n){return O0(new dP(n))}class Age{constructor(e,t,i,s,r){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=s,this.config=r,this.allowRedirects=!0}apply(){const e=P7(this.urlTree.root,[],[],this.config).segmentGroup,t=new hn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,un).pipe(Pt(r=>this.createUrlTree(L7(r),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ta(r=>{if(r instanceof dP)return this.allowRedirects=!1,this.match(r.urlTree);throw r instanceof F7?this.noMatchError(r):r}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,un).pipe(Pt(s=>this.createUrlTree(L7(s),e.queryParams,e.fragment))).pipe(Ta(s=>{throw s instanceof F7?this.noMatchError(s):s}))}noMatchError(e){return new Se(4002,N7)}createUrlTree(e,t,i){const s=Vb(e);return new d3(s,t,i)}expandSegmentGroup(e,t,i,s){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(Pt(r=>new hn([],r))):this.expandSegment(e,i,t,i.segments,s,!0)}expandChildren(e,t,i){const s=[];for(const r of Object.keys(i.children))"primary"===r?s.unshift(r):s.push(r);return ms(s).pipe(Vc(r=>{const o=i.children[r],a=oP(t,r);return this.expandSegmentGroup(e,a,o,r).pipe(Pt(c=>({segment:c,outlet:r})))}),EV((r,o)=>(r[o.outlet]=o.segment,r),{}),AV())}expandSegment(e,t,i,s,r,o){return ms(i).pipe(Vc(a=>this.expandSegmentAgainstRoute(e,t,i,a,s,r,o).pipe(Ta(l=>{if(l instanceof F7)return pt(null);throw l}))),Hc(a=>!!a),Ta((a,c)=>{if(Zb(a))return hP(t,s,r)?pt(new hn([],{})):od(t);throw a}))}expandSegmentAgainstRoute(e,t,i,s,r,o,a){return uP(s,t,r,o)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,r,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o):od(t):od(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,s,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,s){const r=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?fP(r):this.lineralizeSegments(i,r).pipe(Zs(o=>{const a=new hn(o,{});return this.expandSegment(e,a,t,o,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=Qb(t,s,r);if(!a)return od(t);const h=this.applyRedirectCommands(c,s.redirectTo,u);return s.redirectTo.startsWith("/")?fP(h):this.lineralizeSegments(s,h).pipe(Zs(d=>this.expandSegment(e,t,i,d.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,i,s,r){return"**"===i.path?(e=rP(i,e),i.loadChildren?(i._loadedRoutes?pt({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(Pt(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new hn(s,{})))):pt(new hn(s,{}))):lP(t,i,s,e).pipe(Sa(({matched:o,consumedSegments:a,remainingSegments:c})=>o?this.getChildConfig(e=i._injector??e,i,s).pipe(Zs(u=>{const h=u.injector??e,d=u.routes,{segmentGroup:f,slicedSegments:p}=P7(t,a,c,d),m=new hn(f.segments,f.children);if(0===p.length&&m.hasChildren())return this.expandChildren(h,d,m).pipe(Pt(y=>new hn(a,y)));if(0===d.length&&0===p.length)return pt(new hn(a,{}));const g=o1(i)===r;return this.expandSegment(h,m,d,p,g?un:r,!0).pipe(Pt(_=>new hn(a.concat(_.segments),_.children)))})):od(t)))}getChildConfig(e,t,i){return t.children?pt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?pt({routes:t._loadedRoutes,injector:t._loadedInjector}):function yge(n,e,t,i){const s=e.canLoad;return void 0===s||0===s.length?pt(!0):pt(s.map(o=>{const a=G0(o,n);return Pc(function rge(n){return n&&rd(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(W0(),cP())}(e,t,i).pipe(Zs(s=>s?this.configLoader.loadChildren(e,t).pipe(Ei(r=>{t._loadedRoutes=r.routes,t._loadedInjector=r.injector})):function Tge(n){return O0(nP(N7,3))}())):pt({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],s=t.root;for(;;){if(i=i.concat(s.segments),0===s.numberOfChildren)return pt(i);if(s.numberOfChildren>1||!s.children[un])return O0(new Se(4e3,N7));s=s.children[un]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,s){const r=this.createSegmentGroup(e,t.root,i,s);return new d3(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return lr(e,(s,r)=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,s){const r=this.createSegments(e,t.segments,i,s);let o={};return lr(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,i,s)}),new hn(r,o)}createSegments(e,t,i,s){return t.map(r=>r.path.startsWith(":")?this.findPosParam(e,r,s):this.findOrReturn(r,i))}findPosParam(e,t,i){const s=i[t.path.substring(1)];if(!s)throw new Se(4001,N7);return s}findOrReturn(e,t){let i=0;for(const s of t){if(s.path===e.path)return t.splice(i),s;i++}return e}}class Lge{}class Rge{constructor(e,t,i,s,r,o,a,c){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=s,this.url=r,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=c}recognize(){const e=P7(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,un).pipe(Pt(t=>{if(null===t)return null;const i=new k7([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},un,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new x2(i,t),r=new JV(this.url,s);return this.inheritParamsAndData(r._root),r}))}inheritParamsAndData(e){const t=e.value,i=QV(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,i,s){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,s)}processChildren(e,t,i){return ms(Object.keys(i.children)).pipe(Vc(s=>{const r=i.children[s],o=oP(t,s);return this.processSegmentGroup(e,o,r,s)}),EV((s,r)=>s&&r?(s.push(...r),s):null),function eme(n,e=!1){return Fi((t,i)=>{let s=0;t.subscribe(mi(i,r=>{const o=n(r,s++);(o||e)&&i.next(r),!o&&i.complete()}))})}(s=>null!==s),C7(null),AV(),Pt(s=>{if(null===s)return null;const r=pP(s);return function Ige(n){n.sort((e,t)=>e.value.outlet===un?-1:t.value.outlet===un?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}))}processSegment(e,t,i,s,r){return ms(t).pipe(Vc(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,s,r)),Hc(o=>!!o),Ta(o=>{if(Zb(o))return hP(i,s,r)?pt([]):pt(null);throw o}))}processSegmentAgainstRoute(e,t,i,s,r){if(t.redirectTo||!uP(t,i,s,r))return pt(null);let o;if("**"===t.path){const a=s.length>0?zV(s).parameters:{},c=gP(i)+s.length;o=pt({snapshot:new k7(s,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_P(t),o1(t),t.component??t._loadedComponent??null,t,mP(i),c,yP(t),c),consumedSegments:[],remainingSegments:[]})}else o=lP(i,t,s,e).pipe(Pt(({matched:a,consumedSegments:c,remainingSegments:l,parameters:u})=>{if(!a)return null;const h=gP(i)+c.length;return{snapshot:new k7(c,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_P(t),o1(t),t.component??t._loadedComponent??null,t,mP(i),h,yP(t),h),consumedSegments:c,remainingSegments:l}}));return o.pipe(Sa(a=>{if(null===a)return pt(null);const{snapshot:c,consumedSegments:l,remainingSegments:u}=a;e=t._injector??e;const h=t._loadedInjector??e,d=function Hge(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:p}=P7(i,l,u,d.filter(g=>void 0===g.redirectTo),this.relativeLinkResolution);if(0===p.length&&f.hasChildren())return this.processChildren(h,d,f).pipe(Pt(g=>null===g?null:[new x2(c,g)]));if(0===d.length&&0===p.length)return pt([new x2(c,[])]);const m=o1(t)===r;return this.processSegment(h,d,f,p,m?un:r).pipe(Pt(g=>null===g?null:[new x2(c,g)]))}))}}function Vge(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function pP(n){const e=[],t=new Set;for(const i of n){if(!Vge(i)){e.push(i);continue}const s=e.find(r=>i.value.routeConfig===r.value.routeConfig);void 0!==s?(s.children.push(...i.children),t.add(s)):e.push(i)}for(const i of t){const s=pP(i.children);e.push(new x2(i.value,s))}return e.filter(i=>!t.has(i))}function mP(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function gP(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function _P(n){return n.data||{}}function yP(n){return n.resolve||{}}function bP(n){return"string"==typeof n.title||null===n.title}function Jb(n){return Sa(e=>{const t=n(e);return t?ms(t).pipe(Pt(()=>e)):pt(e)})}let xP=(()=>{class n{buildTitle(t){let i,s=t.root;for(;void 0!==s;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(r=>r.outlet===un);return i}getResolvedTitleForRoute(t){return t.data[Yh]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:function(){return Dn(MP)},providedIn:"root"}),n})(),MP=(()=>{class n extends xP{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(J(wH))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Wge{}class $ge extends class jge{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const U7=new fe("",{providedIn:"root",factory:()=>({})}),ex=new fe("ROUTES");let tx=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return pt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Pc(t.loadComponent()).pipe(Ei(r=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=r}),w7(()=>{this.componentLoaders.delete(t)})),s=new Lb(i,()=>new Tt).pipe(Db());return this.componentLoaders.set(t,s),s}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return pt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const r=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(Pt(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let c,l,u=!1;Array.isArray(a)?l=a:(c=a.create(t).injector,l=LV(c.get(ex,[],Rt.Self|Rt.Optional)));return{routes:l.map(Xb),injector:c}}),w7(()=>{this.childrenLoaders.delete(i)})),o=new Lb(r,()=>new Tt).pipe(Db());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return Pc(t()).pipe(Zs(i=>i instanceof vR||Array.isArray(i)?pt(i):ms(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(J(ws),J(zy))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Yge{}class Xge{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Zge(n){throw n}function Kge(n,e,t){return e.parse("/")}const Qge={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jge={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function wP(){const n=Dn(PV),e=Dn(td),t=Dn(Ih),i=Dn(ws),s=Dn(zy),r=Dn(ex,{optional:!0})??[],o=Dn(U7,{optional:!0})??{},a=Dn(MP),c=Dn(xP,{optional:!0}),l=Dn(Yge,{optional:!0}),u=Dn(Wge,{optional:!0}),h=new vs(null,n,e,t,i,s,LV(r));return l&&(h.urlHandlingStrategy=l),u&&(h.routeReuseStrategy=u),h.titleStrategy=c??a,function eve(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,h),h}let vs=(()=>{class n{constructor(t,i,s,r,o,a,c){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=s,this.location=r,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Tt,this.errorHandler=Zge,this.malformedUriErrorHandler=Kge,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>pt(void 0),this.urlHandlingStrategy=new Xge,this.routeReuseStrategy=new $ge,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(tx),this.configLoader.onLoadEndListener=d=>this.triggerEvent(new Hme(d)),this.configLoader.onLoadStartListener=d=>this.triggerEvent(new Ime(d)),this.ngModule=o.get(Jl),this.console=o.get(y3e);const h=o.get(Lt);this.isNgZoneEnabled=h instanceof Lt&&Lt.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function sme(){return new d3(new hn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=KV(this.currentUrlTree,this.rootComponentType),this.transitions=new Un({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(Pn(s=>0!==s.id),Pt(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Sa(s=>{let r=!1,o=!1;return pt(s).pipe(Ei(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Sa(a=>{const c=this.browserUrlTree.toString(),l=!this.navigated||a.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||l)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return SP(a.source)&&(this.browserUrlTree=a.extractedUrl),pt(a).pipe(Sa(h=>{const d=this.transitions.getValue();return i.next(new Fb(h.id,this.serializeUrl(h.extractedUrl),h.source,h.restoredState)),d!==this.transitions.getValue()?Qa:Promise.resolve(h)}),function Dge(n,e,t,i){return Sa(s=>function Ege(n,e,t,i,s){return new Age(n,e,t,i,s).apply()}(n,e,t,s.extractedUrl,i).pipe(Pt(r=>({...s,urlAfterRedirects:r}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ei(h=>{this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects},s.urlAfterRedirects=h.urlAfterRedirects}),function Oge(n,e,t,i,s,r){return Zs(o=>function kge(n,e,t,i,s,r,o="emptyOnly",a="legacy"){return new Rge(n,e,t,i,s,o,a,r).recognize().pipe(Sa(c=>null===c?function zge(n){return new Tn(e=>e.error(n))}(new Lge):pt(c)))}(n,e,t,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,s,r).pipe(Pt(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Ei(h=>{if(s.targetSnapshot=h.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!h.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl);this.setBrowserUrl(f,h)}this.browserUrlTree=h.urlAfterRedirects}const d=new Dme(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);i.next(d)}));if(l&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:d,extractedUrl:f,source:p,restoredState:m,extras:g}=a,v=new Fb(d,this.serializeUrl(f),p,m);i.next(v);const _=KV(f,this.rootComponentType).snapshot;return pt(s={...a,targetSnapshot:_,urlAfterRedirects:f,extras:{...g,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Qa}),Ei(a=>{const c=new Lme(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(c)}),Pt(a=>s={...a,guards:ege(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function hge(n,e){return Zs(t=>{const{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=t;return 0===o.length&&0===r.length?pt({...t,guardsResult:!0}):function dge(n,e,t,i){return ms(n).pipe(Zs(s=>function _ge(n,e,t,i,s){const r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return r&&0!==r.length?pt(r.map(a=>{const c=nd(e)??s,l=G0(a,c);return Pc(function cge(n){return n&&rd(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,i):c.runInContext(()=>l(n,e,t,i))).pipe(Hc())})).pipe(W0()):pt(!0)}(s.component,s.route,t,e,i)),Hc(s=>!0!==s,!0))}(o,i,s,n).pipe(Zs(a=>a&&function sge(n){return"boolean"==typeof n}(a)?function fge(n,e,t,i){return ms(e).pipe(Vc(s=>x7(function mge(n,e){return null!==n&&e&&e(new Vme(n)),pt(!0)}(s.route.parent,i),function pge(n,e){return null!==n&&e&&e(new Ome(n)),pt(!0)}(s.route,i),function vge(n,e,t){const i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(o=>function tge(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>M7(()=>pt(o.guards.map(c=>{const l=nd(o.node)??t,u=G0(c,l);return Pc(function age(n){return n&&rd(n.canActivateChild)}(u)?u.canActivateChild(i,n):l.runInContext(()=>u(i,n))).pipe(Hc())})).pipe(W0())));return pt(r).pipe(W0())}(n,s.path,t),function gge(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return pt(!0);const s=i.map(r=>M7(()=>{const o=nd(e)??t,a=G0(r,o);return Pc(function oge(n){return n&&rd(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Hc())}));return pt(s).pipe(W0())}(n,s.route,t))),Hc(s=>!0!==s,!0))}(i,r,n,e):pt(a)),Pt(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Ei(a=>{if(s.guardsResult=a.guardsResult,p3(a.guardsResult))throw tP(0,a.guardsResult);const c=new zme(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(c)}),Pn(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),Jb(a=>{if(a.guards.canActivateChecks.length)return pt(a).pipe(Ei(c=>{const l=new kme(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}),Sa(c=>{let l=!1;return pt(c).pipe(function Nge(n,e){return Zs(t=>{const{targetSnapshot:i,guards:{canActivateChecks:s}}=t;if(!s.length)return pt(t);let r=0;return ms(s).pipe(Vc(o=>function Fge(n,e,t,i){const s=n.routeConfig,r=n._resolve;return void 0!==s?.title&&!bP(s)&&(r[Yh]=s.title),function Bge(n,e,t,i){const s=function Uge(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return pt({});const r={};return ms(s).pipe(Zs(o=>function Gge(n,e,t,i){const s=nd(e)??i,r=G0(n,s);return Pc(r.resolve?r.resolve(e,t):s.runInContext(()=>r(e,t)))}(n[o],e,t,i).pipe(Hc(),Ei(a=>{r[o]=a}))),zb(1),kb(r),Ta(o=>Zb(o)?Qa:O0(o)))}(r,n,e,i).pipe(Pt(o=>(n._resolvedData=o,n.data=QV(n,t).resolve,s&&bP(s)&&(n.data[Yh]=s.title),null)))}(o.route,i,n,e)),Ei(()=>r++),zb(1),Zs(o=>r===s.length?pt(t):Qa))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ei({next:()=>l=!0,complete:()=>{l||(this.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),Ei(c=>{const l=new Rme(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}))}),Jb(a=>{const c=l=>{const u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(Ei(h=>{l.component=h}),Pt(()=>{})));for(const h of l.children)u.push(...c(h));return u};return Ab(c(a.targetSnapshot.root)).pipe(C7(),cr(1))}),Jb(()=>this.afterPreactivation()),Pt(a=>{const c=function Gme(n,e,t){const i=ed(n,e._root,t?t._root:void 0);return new ZV(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return s={...a,targetRouterState:c}}),Ei(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>Pt(i=>(new Jme(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Ei({next(){r=!0},complete(){r=!0}}),w7(()=>{r||o||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Ta(a=>{if(o=!0,sP(a)){iP(a)||(this.navigated=!0,this.restoreHistory(s,!0));const c=new z7(s.id,this.serializeUrl(s.extractedUrl),a.message,a.cancellationCode);if(i.next(c),iP(a)){const l=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||SP(s.source)};this.scheduleNavigation(l,"imperative",null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const c=new qV(s.id,this.serializeUrl(s.extractedUrl),a,s.targetSnapshot??void 0);i.next(c);try{s.resolve(this.errorHandler(a))}catch(l){s.reject(l)}}return Qa}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const s={replaceUrl:!0},r=t.state?.navigationId?t.state:null;if(r){const a={...r};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(s.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,i,r,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Xb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:s,queryParams:r,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,l=s||this.routerState.root,u=c?this.currentUrlTree.fragment:o;let h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...r};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=r||null}return null!==h&&(h=this.removeEmptyProps(h)),Cme(l,this.currentUrlTree,t,h,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){const s=p3(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function tve(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new Se(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(s){i=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return i}isActive(t,i){let s;if(s=!0===i?{...Qge}:!1===i?{...Jge}:i,p3(t))return RV(this.currentUrlTree,t,s);const r=this.parseUrl(t);return RV(this.currentUrlTree,r,s)}removeEmptyProps(t){return Object.keys(t).reduce((i,s)=>{const r=t[s];return null!=r&&(i[s]=r),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Aa(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,s,r,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,f)=>{a=d,c=f});const u=++this.navigationId;let h;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),h=s&&s.\u0275routerPageId?s.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):h=0,this.setTransition({id:u,targetPageId:h,source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}setBrowserUrl(t,i){const s=this.urlSerializer.serialize(t),r={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl?this.location.replaceState(s,"",r):this.location.go(s,"",r)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i,s){const r=new z7(t.id,this.serializeUrl(t.extractedUrl),i,s);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){Yl()},n.\u0275prov=_e({token:n,factory:function(){return wP()},providedIn:"root"}),n})();function SP(n){return"imperative"!==n}let ad=(()=>{class n{constructor(t,i,s,r,o){this.router=t,this.route=i,this.tabIndexAttribute=s,this.renderer=r,this.el=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Tt,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=p2(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=p2(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=p2(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,s=this.el.nativeElement;null!==t?i.setAttribute(s,"tabindex",t):i.removeAttribute(s,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(T(vs),T(Oc),e1("tabindex"),T(To),T(je))},n.\u0275dir=le({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&We("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Bi]}),n})(),nx=(()=>{class n{constructor(t,i,s){this.router=t,this.route=i,this.locationStrategy=s,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Tt,this.subscription=t.events.subscribe(r=>{r instanceof Aa&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=p2(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=p2(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=p2(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,i,s,r,o){return!!(0!==t||i||s||r||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(T(vs),T(Oc),T(n3))},n.\u0275dir=le({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,i){1&t&&We("click",function(r){return i.onClick(r.button,r.ctrlKey,r.shiftKey,r.altKey,r.metaKey)}),2&t&&Mn("target",i.target)("href",i.href,Cc)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Bi]}),n})(),TP=(()=>{class n{constructor(t,i,s,r,o,a){this.router=t,this.element=i,this.renderer=s,this.cdr=r,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new $t,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof Aa&&this.update()})}ngAfterContentInit(){pt(this.links.changes,this.linksWithHrefs.changes,pt(null)).pipe(j4()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=ms(t).pipe(j4()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(s=>!!s)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function nve(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>!!s.urlTree&&t.isActive(s.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(T(vs),T(je),T(To),T(Ts),T(ad,8),T(nx,8))},n.\u0275dir=le({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,i,s){if(1&t&&(Ti(s,ad,5),Ti(s,nx,5)),2&t){let r;Ot(r=Nt())&&(i.links=r),Ot(r=Nt())&&(i.linksWithHrefs=r)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Bi]}),n})();class EP{}let ive=(()=>{class n{constructor(t,i,s,r,o){this.router=t,this.injector=s,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Pn(t=>t instanceof Aa),Vc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const s=[];for(const r of i){r.providers&&!r._injector&&(r._injector=If(r.providers,t,`Route: ${r.path}`));const o=r._injector??t,a=r._loadedInjector??o;r.loadChildren&&!r._loadedRoutes&&void 0===r.canLoad||r.loadComponent&&!r._loadedComponent?s.push(this.preloadConfig(o,r)):(r.children||r._loadedRoutes)&&s.push(this.processRoutes(a,r.children??r._loadedRoutes))}return ms(s).pipe(j4())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let s;s=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):pt(null);const r=s.pipe(Zs(o=>null===o?pt(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?ms([r,this.loader.loadComponent(i)]).pipe(j4()):r})}}return n.\u0275fac=function(t){return new(t||n)(J(vs),J(zy),J(wc),J(EP),J(tx))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ix=new fe("");let AP=(()=>{class n{constructor(t,i,s={}){this.router=t,this.viewportScroller=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Fb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Aa&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof YV&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new YV(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Yl()},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();function j0(n,e){return{\u0275kind:n,\u0275providers:e}}function sx(n){return[{provide:ex,multi:!0,useValue:n}]}function LP(){const n=Dn(ws);return e=>{const t=n.get(I0);if(e!==t.components[0])return;const i=n.get(vs),s=n.get(zP);1===n.get(rx)&&i.initialNavigation(),n.get(kP,null,Rt.Optional)?.setUpPreloading(),n.get(ix,null,Rt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),s.next(),s.complete()}}const zP=new fe("",{factory:()=>new Tt}),rx=new fe("",{providedIn:"root",factory:()=>1});const kP=new fe("");function ave(n){return j0(0,[{provide:kP,useExisting:ive},{provide:EP,useExisting:n}])}const RP=new fe("ROUTER_FORROOT_GUARD"),cve=[Ih,{provide:PV,useClass:Ib},{provide:vs,useFactory:wP},td,{provide:Oc,useFactory:function DP(n){return n.routerState.root},deps:[vs]},tx];function lve(){return new dI("Router",vs)}let uve=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[cve,[],sx(t),{provide:RP,useFactory:pve,deps:[[vs,new o2,new Gl]]},{provide:U7,useValue:i||{}},i?.useHash?{provide:n3,useClass:a4e}:{provide:n3,useClass:PI},{provide:ix,useFactory:()=>{const n=Dn(vs),e=Dn(x0e),t=Dn(U7);return t.scrollOffset&&e.setOffset(t.scrollOffset),new AP(n,e,t)}},i?.preloadingStrategy?ave(i.preloadingStrategy).\u0275providers:[],{provide:dI,multi:!0,useFactory:lve},i?.initialNavigation?mve(i):[],[{provide:IP,useFactory:LP},{provide:Nf,multi:!0,useExisting:IP}]]}}static forChild(t){return{ngModule:n,providers:[sx(t)]}}}return n.\u0275fac=function(t){return new(t||n)(J(RP,8))},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[qb]}),n})();function pve(n){return"guarded"}function mve(n){return["disabled"===n.initialNavigation?j0(3,[{provide:kh,multi:!0,useFactory:()=>{const e=Dn(vs);return()=>{e.setUpLocationChangeListener()}}},{provide:rx,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?j0(2,[{provide:rx,useValue:0},{provide:kh,multi:!0,deps:[ws],useFactory:e=>{const t=e.get(r4e,Promise.resolve());let i=!1;return()=>t.then(()=>new Promise(r=>{const o=e.get(vs),a=e.get(zP);(function s(r){e.get(vs).events.pipe(Pn(a=>a instanceof Aa||a instanceof z7||a instanceof qV),Pt(a=>a instanceof Aa||a instanceof z7&&(0===a.code||1===a.code)&&null),Pn(a=>null!==a),cr(1)).subscribe(()=>{r()})})(()=>{r(!0),i=!0}),o.afterPreactivation=()=>(r(!0),i||a.closed?pt(void 0):a),o.initialNavigation()}))}}]).\u0275providers:[]]}const IP=new fe("");var a1=(()=>{return(n=a1||(a1={})).insulated="insulated",n.orientation="orientation",n.baseDimension="base-dimension",n.extensionToNorth="extension-north",n.extensionToSouth="extension-south",n.extensionToWest="extension-west",n.extensionToEast="extension-east",n.halfCircle="half-circle",n.bendPoint="bend-point",n.roofBoth="roof-both",n.roofCircle="roof-circle",n.roof70="roof-70",n.roofWalls="roof-walls",n.efficiency="efficiency",n.greyOut="greyOut",n.amountSteps="amount-steps",n.viewlines="viewlines",n.warmWaterBuffer="warm-water-buffer",n.iJoists="i-joits",n.dampOpen="damp-open",n.airTight="air-tight",n.pipeLayer="pipe-layer",n.woodFiberPlate="wood-fiber-plate",a1;var n})(),re=(()=>{return(n=re||(re={})).welcome="welcome",n.passiv="passiv",n.basics="basics",n.extensions="extensions",n.tower="tower",n.end="end",n.EndOfPageHouse="EndOfPageHouse",n.roofBasics="roof-basics",n.roofCircle="roof-circle",n.roofIntermezzo="roof-intermezzo",n.roof70="roof70",n.roofChoice="roof-choice",n.roofEdge="roof-edge",n.stairStart="stair-start",n.stairBasic="stair-basic",n.stairCheck="stair-check",n.stairPlan="stair-plan",n.facadeStart="facade-start",n.facadeWindow="facade-window",n.facadeBrick="facade-Brick",n.facadeDoor="facade-Door",n.constructionWelcome="construction-welcome",n.constructionFoundation="construction-foundation",n.constructionCrawlerSpace="construction-crawler-space",n.constructionGroundFloor="construction-ground-floor",n.constructionWallSole="construction-wall-sole",n.constructionWallJoists="construction-wall-joists",n.constructionWallOSB="construction-wall-osb",n.constructionWallTape="construction-wall-tape",n.constructionFloorLVL="construction-floor-lvl",n.constructionRoofRidge="construction-roof-ridge",n.constructionRoofJoist="construction-roof-joist",n.constructionRoofInside="construction-roof-inside",n.constructionRoofOuterSheet="construction-roof-outerSheet",n.constructionRoofSpace="construction-roof-space",n.constructionRoofTiles="construction-roof-tiles",n.constructionWallInsulation="construction-wall-insulation",n.constructionWallOuterSheet="construction-wall-outer-sheet",n.constructionWallSpace="construction-wall-space",n.constructionWallFacade="construction-wall-facade",n.constructionWallGips="construction-wall-gips",n.constructionWallService="construction-wall-service",n.constructionFloor="construction-floor",n.constructionFloorOSB="construction-floor-osb",n.constructionRoof="construction-roof",n.constructionWallFinish="construction-wall-finish",n.constructionParameters="construction-parameters",n.installationWelcome="installations-welcome",n.installationDrinkWater="installations-drink-water",n.installationGreyWater="installations-grey-water",n.installationHeating="installations-heating",n.installationElectricity="installations-electricity",n.installationVentilation="installations-ventilation",n.installationSmartHome="installations-smartHome",n.wiredWelcome="wired-welcome",n.wiredPower="wired-power",n.wiredEthernet="wired-ethernet",n.wiredSafety="wired-safety",n.wiredExtra="wired-extra",n.wiredLight="wired-light",n.wiredVent="wired-vent",n.wiredWater="wired-water",n.costsWelcome="costs-welcome",n.costsConstruction="costs-construction",n.costsPreparations="costs-preparations",n.costsOpenings="costs-openings",n.costsElectra="costs-electra",n.costsWater="costs-water",n.costsFinishes="costs-finishes",n.costsOuterFinishes="costs-outer-finishes",n.costsTotals="costs-totals",n.House3D="House3D",re;var n})(),ie=(()=>{return(n=ie||(ie={})).top="top",n.ground="ground",n.ceiling="ceiling",n.all="all",n.none="none",ie;var n})(),Nc=(()=>{return(n=Nc||(Nc={})).left="left",n.right="right",n.none="none",Nc;var n})(),Xn=(()=>{return(n=Xn||(Xn={})).plan="plan",n.cross="cross",n.stairPlan="stairPlan",n.stairCross="stairCross",n.construction="construction",n.House3D="House3D",n.none="none",Xn;var n})(),X=(()=>{return(n=X||(X={})).perilex="perilex",n.socket="socket",n.lightBulb="light-bulb",n.lightSwitch="light-switch",n.dlc="dlc",n.dimmer="dimmer",n.poe="poe",n.ethernet="ethernet",n.wifi="wifi",n.camera="camera",n.alarm="alarm",n.smoke="smoke",n.pir="pir",n.blinds="blinds",n.temperature="temperature",n.ventIn="vent-in",n.ventOut="vent-out",n.waterCold="water-cold",n.waterRain="water-rain",n.waterWarm="water-warm",n.drain="drain",n.shower="shower",n.toilet="toilet",X;var n})(),tr=(()=>{return(n=tr||(tr={})).doors="doors",n.stats="stats",n.theoreticalWalls="theoreticalWalls",n.silhouette="silhouette",n.measure="measure",n.decoration="decoration",n.stramien="stramien",n.towerFootprint="towerFootprint",n.grid="grid",n.walkLine="walkLine",n.minimumHeight="minimumHeight",n.mirror="mirror",tr;var n})(),B1=(()=>{return(n=B1||(B1={})).OutsidePOE="OutsidePOE",n.SharedEthernet="SharedEthernet",B1;var n})(),yt=(()=>{return(n=yt||(yt={})).foundation="A1-construction-foundation",n.crawlerSpace="A2-construction-crawler-space",n.groundFloor="A3-construction-ground-floor",n.sole="A4-construction-sole",n.joists="A5-construction-joists",n.osbWall="A6-construction-osb-wall",n.tapes="A7-construction-tapes",n.floorLVL="B1-construction-floorLVL",n.topFloorJoists="B2-construction-top-floor-joists",n.topFloorOSB="B2-construction-top-floor-osb",n.roofRidge="B3-construction-roof-ridge",n.roofJoists="B4-construction-roof-joists",n.roofOSB="B5-construction-roof-osb",n.insulation="C1-construction-insulation",n.outerSheet="C2-construction-outerSheet",n.roofOuterSheets="C3-construction-roof-outerSheet",n.roofSpace="C4-construction-roof-space",n.roofTiles="C5-construction-roof-tiles",n.space="D1-construction-space",n.facade="D2-construction-facade",n.serviceBeams="E1-construction-serviceBeams",n.serviceInsulation="E2-construction-serviceInsulation",n.gips="E3-construction-gips",yt;var n})();let m3=(()=>{class n{constructor(t,i){this.document=t,this.platformId=i,this.documentIsAccessible=Lc(this.platformId)}static getCookieRegExp(t){const i=t.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(t){return!!this.documentIsAccessible&&(t=encodeURIComponent(t),n.getCookieRegExp(t).test(this.document.cookie))}get(t){if(this.documentIsAccessible&&this.check(t)){t=encodeURIComponent(t);const s=n.getCookieRegExp(t).exec(this.document.cookie);return s[1]?n.safeDecodeURIComponent(s[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const t={},i=this.document;return i.cookie&&""!==i.cookie&&i.cookie.split(";").forEach(s=>{const[r,o]=s.split("=");t[n.safeDecodeURIComponent(r.replace(/^ /,""))]=n.safeDecodeURIComponent(o)}),t}set(t,i,s,r,o,a,c){if(!this.documentIsAccessible)return;if("number"==typeof s||s instanceof Date||r||o||a||c)return void this.set(t,i,{expires:s,path:r,domain:o,secure:a,sameSite:c||"Lax"});let l=encodeURIComponent(t)+"="+encodeURIComponent(i)+";";const u=s||{};u.expires&&(l+="number"==typeof u.expires?"expires="+new Date((new Date).getTime()+1e3*u.expires*60*60*24).toUTCString()+";":"expires="+u.expires.toUTCString()+";"),u.path&&(l+="path="+u.path+";"),u.domain&&(l+="domain="+u.domain+";"),!1===u.secure&&"None"===u.sameSite&&(u.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),u.secure&&(l+="secure;"),u.sameSite||(u.sameSite="Lax"),l+="sameSite="+u.sameSite+";",this.document.cookie=l}delete(t,i,s,r,o="Lax"){if(!this.documentIsAccessible)return;const a=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:a,path:i,domain:s,secure:r,sameSite:o})}deleteAll(t,i,s,r="Lax"){if(!this.documentIsAccessible)return;const o=this.getAll();for(const a in o)o.hasOwnProperty(a)&&this.delete(a,t,i,s,r)}}return n.\u0275fac=function(t){return new(t||n)(J(Ct),J(Ao))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bi=(()=>{class n{constructor(t,i){this.cookieService=t,this.router=i,this.darkMode=!1,this.title="Lindelund",this.update$=new Tt,this.tag$=new Un(void 0),this.graphic$=new Un(void 0),this.states$=new Un({}),this.popupActive$=new Un(!1),this.fullscreen$=new Un(!0),this.svgTransform$=new Un(void 0),this.page$=this.router.events.pipe(Pn(s=>s instanceof Aa),y2(this.router),Pt(s=>s.url.toLowerCase().split("/")[1])),this.floor$=new Un(ie.ground),this.discord="https://discord.gg/hrjfzY3yTp",this.github="https://github.com/PassiveOpen/PassiveOpen.github.io",this.scroll$=new Un({scroll:0,percentage:0,section:void 0,graphicSide:void 0,graphic:void 0}),this.getCookies()}setStatesSilent(t,i,s){t.flatMap(r=>this.setState(r,i,s,!1))}hardSetStates(t){const i=this.states$.value;Object.entries(t).forEach(([s,r])=>{i[s]=r}),this.commitState(i)}setState(t,i,s,r=!0){const o=this.states$.value;s&&(o[t]=Boolean(this.cookieService.get("states"))),o[t]=i||void 0===o[t]||!o[t],r?this.commitState(o):this.silentStates=o}commitState(t){this.states$.next(t),this.cookieService.set("states",JSON.stringify(t))}setTransformCookie(t,i){this.svgTransform$.next({[i]:t}),this.cookieService.set("svgTransform",JSON.stringify(this.svgTransform$.value))}getCookies(){let t=this.cookieService.get("floor");""===t&&(t=ie.ground),this.floor$.next(t);let i=this.cookieService.get("fullscreen");i=""!==i&&"true"===i,this.fullscreen$.next(i);let s=this.cookieService.get("svgTransform");(""===s||!1===i)&&(s="{}"),this.svgTransform$.next(JSON.parse(s));let r=this.cookieService.get("darkMode");this.setDarkMode(""===r?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches:"true"===r);let o=this.cookieService.get("states");""===o&&(o="{}"),this.states$.next(JSON.parse(o))}setFloor(t){let i;void 0!==t?i=t:(this.floor$.value===ie.ground&&(i=ie.top),this.floor$.value===ie.top&&(i=ie.ground)),this.floor$.next(i),this.cookieService.set("floor",i),this.update$.next()}setTag(t){this.tag$.next(t),this.update$.next()}setDarkMode(t,i=!1){document.body.classList.remove("light"),document.body.classList.remove("dark"),this.darkMode=void 0!==t?t:!this.darkMode,this.darkMode?document.body.classList.add("dark"):document.body.classList.add("light"),i&&this.cookieService.set("darkMode",`${this.darkMode}`,.1)}}return n.\u0275fac=function(t){return new(t||n)(J(m3),J(vs))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function g3(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function $0(n,e=f7){return Fi((t,i)=>{let s=null,r=null,o=null;const a=()=>{if(s){s.unsubscribe(),s=null;const l=r;r=null,i.next(l)}};function c(){const l=o+n,u=e.now();if(u<l)return s=this.schedule(void 0,l-u),void i.add(s);a()}t.subscribe(mi(i,l=>{r=l,o=e.now(),s||(s=e.schedule(c,n),i.add(s))},()=>{a(),i.complete()},void 0,()=>{r=s=null}))})}function lx(n){return Pn((e,t)=>n<=t)}function FP(n,e=kr){return n=n??Lve,Fi((t,i)=>{let s,r=!0;t.subscribe(mi(i,o=>{const a=e(o);(r||!n(s,a))&&(r=!1,s=a,i.next(o))}))})}function Lve(n,e){return n===e}let BP=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zve=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=o3(t);return new Tn(s=>{const o=this._observeElement(i).subscribe(s);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new Tt,s=this._mutationObserverFactory.create(r=>i.next(r));s&&s.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:s,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:s}=this._observedElements.get(t);i&&i.disconnect(),s.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(J(BP))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UP=(()=>{class n{constructor(t,i,s){this._contentObserver=t,this._elementRef=i,this._ngZone=s,this.event=new $t,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=qt(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=zo(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe($0(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(T(zve),T(je),T(Lt))},n.\u0275dir=le({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),cd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({providers:[BP]}),n})();const GP=new Set;let q0,kve=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Ive}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Rve(n){if(!GP.has(n))try{q0||(q0=document.createElement("style"),q0.setAttribute("type","text/css"),document.head.appendChild(q0)),q0.sheet&&(q0.sheet.insertRule(`@media ${n} {body{ }}`,0),GP.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(J(Br))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ive(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Hve=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Tt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return WP(l7(t)).some(s=>this._registerQuery(s).mql.matches)}observe(t){let r=Ab(WP(l7(t)).map(o=>this._registerQuery(o).observable));return r=x7(r.pipe(cr(1)),r.pipe(lx(1),$0(0))),r.pipe(Pt(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),r={observable:new Tn(o=>{const a=c=>this._zone.run(()=>o.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(y2(i),Pt(({matches:o})=>({query:t,matches:o})),Bn(this._destroySubject)),mql:i};return this._queries.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(J(kve),J(Lt))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function WP(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let ld=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Bve(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function Fve(n){try{return n.frameElement}catch{return null}}(function Xve(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===YP(i)||!this.isVisible(i)))return!1;let s=t.nodeName.toLowerCase(),r=YP(t);return t.hasAttribute("contenteditable")?-1!==r:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function qve(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===s?!!t.hasAttribute("controls")&&-1!==r:"video"===s?-1!==r&&(null!==r||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function Yve(n){return!function Gve(n){return function jve(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Uve(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Wve(n){return function $ve(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||qP(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(J(Br))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qP(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function YP(n){if(!qP(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Zve{constructor(e,t,i,s,r=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=s,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const s=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(s)return s}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const s=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(s)return s}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(cr(1)).subscribe(e)}}let $7=(()=>{class n{constructor(t,i,s){this._checker=t,this._ngZone=i,this._document=s}create(t,i=!1){return new Zve(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(J(ld),J(Lt),J(Ct))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function XP(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function ZP(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Kve=new fe("cdk-input-modality-detector-options"),Qve={ignoreKeys:[18,17,224,91,16]},Y0=kc({passive:!0,capture:!0});let Jve=(()=>{class n{constructor(t,i,s,r){this._platform=t,this._mostRecentTarget=null,this._modality=new Un(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=c3(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(XP(o)?"keyboard":"mouse"),this._mostRecentTarget=c3(o))},this._onTouchstart=o=>{ZP(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=c3(o))},this._options={...Qve,...r},this.modalityDetected=this._modality.pipe(lx(1)),this.modalityChanged=this.modalityDetected.pipe(FP()),t.isBrowser&&i.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Y0),s.addEventListener("mousedown",this._onMousedown,Y0),s.addEventListener("touchstart",this._onTouchstart,Y0)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Y0),document.removeEventListener("mousedown",this._onMousedown,Y0),document.removeEventListener("touchstart",this._onTouchstart,Y0))}}return n.\u0275fac=function(t){return new(t||n)(J(Br),J(Lt),J(Ct),J(Kve,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const t_e=new fe("cdk-focus-monitor-default-options"),q7=kc({passive:!0,capture:!0});let U1=(()=>{class n{constructor(t,i,s,r,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Tt,this._rootNodeFocusAndBlurListener=a=>{for(let l=c3(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=r,this._detectionMode=o?.detectionMode||0}monitor(t,i=!1){const s=o3(t);if(!this._platform.isBrowser||1!==s.nodeType)return pt(null);const r=HH(s)||this._getDocument(),o=this._elementInfo.get(s);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new Tt,rootNode:r};return this._elementInfo.set(s,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=o3(t),s=this._elementInfo.get(i);s&&(s.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(s))}focusVia(t,i,s){const r=o3(t);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof r.focus&&r.focus(s))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const s=this._elementInfo.get(i),r=c3(t);!s||!s.checkChildren&&i!==r||this._originChanged(i,this._getFocusOrigin(r),s)}_onBlur(t,i){const s=this._elementInfo.get(i);!s||s.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(s,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,s=this._rootNodeFocusListenerCount.get(i)||0;s||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,q7),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,q7)}),this._rootNodeFocusListenerCount.set(i,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Bn(this._stopInputModalityDetector)).subscribe(r=>{this._setOrigin(r,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const s=this._rootNodeFocusListenerCount.get(i);s>1?this._rootNodeFocusListenerCount.set(i,s-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,q7),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,q7),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,s){this._setClasses(t,i),this._emitOrigin(s,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((s,r)=>{(r===t||s.checkChildren&&r.contains(t))&&i.push([r,s])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:s}=this._inputModalityDetector;if("mouse"!==s||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const r=t.labels;if(r)for(let o=0;o<r.length;o++)if(r[o].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(J(Lt),J(Br),J(Jve),J(Ct,8),J(t_e,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const QP="cdk-high-contrast-black-on-white",JP="cdk-high-contrast-white-on-black",ux="cdk-high-contrast-active";let eO=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=Dn(Hve).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(t):null,r=(s&&s.backgroundColor||"").replace(/ /g,"");switch(t.remove(),r){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(ux,QP,JP),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(ux,QP):2===i&&t.add(ux,JP)}}}return n.\u0275fac=function(t){return new(t||n)(J(Br),J(Ct))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hx=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(J(eO))},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[cd]}),n})();const i_e=new fe("mat-sanity-checks",{providedIn:"root",factory:function n_e(){return!0}});let wt=(()=>{class n{constructor(t,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!bb()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(J(eO),J(i_e,8),J(Ct))},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[l3,l3]}),n})();function ud(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=qt(e)}}}function v3(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function M2(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=qt(e)}}}function Y7(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?zo(t):this.defaultTabIndex}}}let iO=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=le({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function hd(n,e,t){n.nativeElement.classList.toggle(e,t)}let X7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[wt,wt]}),n})();class r_e{constructor(e,t,i,s=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=s,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const oO={enterDuration:225,exitDuration:150},dx=kc({passive:!0}),aO=["mousedown","touchstart"],cO=["mouseup","mouseleave","touchend","touchcancel"];class a_e{constructor(e,t,i,s){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,s.isBrowser&&(this._containerElement=o3(i))}fadeInRipple(e,t,i={}){const s=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r={...oO,...i.animation};i.centered&&(e=s.left+s.width/2,t=s.top+s.height/2);const o=i.radius||function c_e(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),s=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+s*s)}(e,t,s),a=e-s.left,c=t-s.top,l=r.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=c-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);const h=window.getComputedStyle(u),f=h.transitionDuration,p="none"===h.transitionProperty||"0s"===f||"0s, 0s"===f,m=new r_e(this,u,i,p);u.style.transform="scale3d(1, 1, 1)",m.state=0,i.persistent||(this._mostRecentTransientRipple=m);let g=null;return!p&&(l||r.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const v=()=>this._finishRippleTransition(m),_=()=>this._destroyRipple(m);u.addEventListener("transitionend",v),u.addEventListener("transitioncancel",_),g={onTransitionEnd:v,onTransitionCancel:_}}),this._activeRipples.set(m,g),(p||!l)&&this._finishRippleTransition(m),m}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...oO,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=o3(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(aO))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(cO),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=XP(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!ZP(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,dx)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(aO.forEach(e=>{this._triggerElement.removeEventListener(e,this,dx)}),this._pointerUpEventsRegistered&&cO.forEach(e=>{this._triggerElement.removeEventListener(e,this,dx)}))}}const l_e=new fe("mat-ripple-global-options");let C2=(()=>{class n{constructor(t,i,s,r,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new a_e(this,i,t,s)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,s){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...s}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(Lt),T(Br),T(l_e,8),T(Do,8))},n.\u0275dir=le({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&Et("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),G1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[wt,wt]}),n})(),fx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[wt]}),n})(),lO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[G1,io,wt,fx]}),n})();const h_e=["*",[["mat-toolbar-row"]]],d_e=["*","mat-toolbar-row"],f_e=v3(class{constructor(n){this._elementRef=n}});let p_e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=le({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),m_e=(()=>{class n extends f_e{constructor(t,i,s){super(t),this._platform=i,this._document=s}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(Br),T(Ct))},n.\u0275cmp=dt({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,i,s){if(1&t&&Ti(s,p_e,5),2&t){let r;Ot(r=Nt())&&(i._toolbarRows=r)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,i){2&t&&Et("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[pe],ngContentSelectors:d_e,decls:2,vars:0,template:function(t,i){1&t&&(Ki(h_e),Vn(0),Vn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),g_e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[wt,wt]}),n})();class px{}const w2="*";function _r(n,e){return{type:7,name:n,definitions:e,options:{}}}function oi(n,e=null){return{type:4,styles:e,timings:n}}function uO(n,e=null){return{type:3,steps:n,options:e}}function hO(n,e=null){return{type:2,steps:n,options:e}}function zt(n){return{type:6,styles:n,offset:null}}function ai(n,e,t){return{type:0,name:n,styles:e,options:t}}function xi(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function mx(n=null){return{type:9,options:n}}function gx(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function dO(n){Promise.resolve().then(n)}class dd{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){dO(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class fO{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,s=0;const r=this.players.length;0==r?dO(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==r&&this._onFinish()}),o.onDestroy(()=>{++i==r&&this._onDestroy()}),o.onStart(()=>{++s==r&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const s=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(s)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const Z7=["*"],y_e=["content"];function b_e(n,e){if(1&n){const t=Ss();M(0,"div",2),We("click",function(){return Gt(t),Wt(Ge()._onBackdropClicked())}),S()}2&n&&Et("mat-drawer-shown",Ge()._isShowingBackdrop())}function x_e(n,e){1&n&&(M(0,"mat-drawer-content"),Vn(1,2),S())}const M_e=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],C_e=["mat-drawer","mat-drawer-content","*"];function w_e(n,e){if(1&n){const t=Ss();M(0,"div",2),We("click",function(){return Gt(t),Wt(Ge()._onBackdropClicked())}),S()}2&n&&Et("mat-drawer-shown",Ge()._isShowingBackdrop())}function S_e(n,e){1&n&&(M(0,"mat-sidenav-content"),Vn(1,2),S())}const T_e=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],E_e=["mat-sidenav","mat-sidenav-content","*"],pO={transformDrawer:_r("transform",[ai("open, open-instant",zt({transform:"none",visibility:"visible"})),ai("void",zt({"box-shadow":"none",visibility:"hidden"})),xi("void => open-instant",oi("0ms")),xi("void <=> open, open-instant => void",oi("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},D_e=new fe("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function L_e(){return!1}}),_x=new fe("MAT_DRAWER_CONTAINER");let K7=(()=>{class n extends Wh{constructor(t,i,s,r,o){super(s,r,o),this._changeDetectorRef=t,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(T(Ts),T(gn(()=>gO)),T(je),T(m7),T(Lt))},n.\u0275cmp=dt({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,i){2&t&&Qs("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[At([{provide:Wh,useExisting:n}]),pe],ngContentSelectors:Z7,decls:1,vars:0,template:function(t,i){1&t&&(Ki(),Vn(0))},encapsulation:2,changeDetection:0}),n})(),mO=(()=>{class n{constructor(t,i,s,r,o,a,c,l){this._elementRef=t,this._focusTrapFactory=i,this._focusMonitor=s,this._platform=r,this._ngZone=o,this._interactivityChecker=a,this._doc=c,this._container=l,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Tt,this._animationEnd=new Tt,this._animationState="void",this.openedChange=new $t(!0),this._openedStream=this.openedChange.pipe(Pn(u=>u),Pt(()=>{})),this.openedStart=this._animationStarted.pipe(Pn(u=>u.fromState!==u.toState&&0===u.toState.indexOf("open")),kb(void 0)),this._closedStream=this.openedChange.pipe(Pn(u=>!u),Pt(()=>{})),this.closedStart=this._animationStarted.pipe(Pn(u=>u.fromState!==u.toState&&"void"===u.toState),kb(void 0)),this._destroyed=new Tt,this.onPositionChanged=new $t,this._modeChanged=new Tt,this.openedChange.subscribe(u=>{u?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{F1(this._elementRef.nativeElement,"keydown").pipe(Pn(u=>27===u.keyCode&&!this.disableClose&&!g3(u)),Bn(this._destroyed)).subscribe(u=>this._ngZone.run(()=>{this.close(),u.stopPropagation(),u.preventDefault()}))}),this._animationEnd.pipe(FP((u,h)=>u.fromState===h.fromState&&u.toState===h.toState)).subscribe(u=>{const{fromState:h,toState:d}=u;(0===d.indexOf("open")&&"void"===h||"void"===d&&0===h.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=qt(t)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=qt(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(qt(t))}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const s=()=>{t.removeEventListener("blur",s),t.removeEventListener("mousedown",s),t.removeAttribute("tabindex")};t.addEventListener("blur",s),t.addEventListener("mousedown",s)})),t.focus(i)}_focusByCssSelector(t,i){let s=this._elementRef.nativeElement.querySelector(t);s&&this._forceFocus(s,i)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{!i&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,i){t&&i&&(this._openedVia=i);const s=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),s}_setOpen(t,i,s){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(s)),this._updateFocusTrapState(),new Promise(r=>{this.openedChange.pipe(cr(1)).subscribe(o=>r(o?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const i=this._elementRef.nativeElement,s=i.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),s.insertBefore(this._anchor,i)),s.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}}return n.\u0275fac=function(t){return new(t||n)(T(je),T($7),T(U1),T(Br),T(Lt),T(ld),T(Ct,8),T(_x,8))},n.\u0275cmp=dt({type:n,selectors:[["mat-drawer"]],viewQuery:function(t,i){if(1&t&&_i(y_e,5),2&t){let s;Ot(s=Nt())&&(i._content=s.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,i){1&t&&Tf("@transform.start",function(r){return i._animationStarted.next(r)})("@transform.done",function(r){return i._animationEnd.next(r)}),2&t&&(Mn("align",null),Df("@transform",i._animationState),Et("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Z7,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,i){1&t&&(Ki(),M(0,"div",0,1),Vn(2),S())},dependencies:[Wh],encapsulation:2,data:{animation:[pO.transformDrawer]},changeDetection:0}),n})(),gO=(()=>{class n{constructor(t,i,s,r,o,a=!1,c){this._dir=t,this._element=i,this._ngZone=s,this._changeDetectorRef=r,this._animationMode=c,this._drawers=new z0,this.backdropClick=new $t,this._destroyed=new Tt,this._doCheckSubject=new Tt,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Tt,t&&t.change.pipe(Bn(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(Bn(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=a}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=qt(t)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(t){this._backdropOverride=null==t?null:qt(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(y2(this._allDrawers),Bn(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(y2(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe($0(10),Bn(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,i=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const s=this._left._getWidth();t+=s,i-=s}if(this._right&&this._right.opened)if("side"==this._right.mode)i+=this._right._getWidth();else if("push"==this._right.mode){const s=this._right._getWidth();i+=s,t-=s}t=t||null,i=i||null,(t!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:t,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(Pn(i=>i.fromState!==i.toState),Bn(this._drawers.changes)).subscribe(i=>{"open-instant"!==i.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Bn(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(Bn(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(cr(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Bn(Ja(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const i=this._element.nativeElement.classList,s="mat-drawer-container-has-open";t?i.add(s):i.remove(s)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return n.\u0275fac=function(t){return new(t||n)(T(_2,8),T(je),T(Lt),T(Ts),T(jh),T(D_e),T(Do,8))},n.\u0275cmp=dt({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(t,i,s){if(1&t&&(Ti(s,K7,5),Ti(s,mO,5)),2&t){let r;Ot(r=Nt())&&(i._content=r.first),Ot(r=Nt())&&(i._allDrawers=r)}},viewQuery:function(t,i){if(1&t&&_i(K7,5),2&t){let s;Ot(s=Nt())&&(i._userContent=s.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,i){2&t&&Et("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[At([{provide:_x,useExisting:n}])],ngContentSelectors:C_e,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,i){1&t&&(Ki(M_e),Ve(0,b_e,1,2,"div",0),Vn(1),Vn(2,1),Ve(3,x_e,2,0,"mat-drawer-content",1)),2&t&&(Z("ngIf",i.hasBackdrop),H(3),Z("ngIf",!i._content))},dependencies:[Lo,K7],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),n})(),yx=(()=>{class n extends K7{constructor(t,i,s,r,o){super(t,i,s,r,o)}}return n.\u0275fac=function(t){return new(t||n)(T(Ts),T(gn(()=>_O)),T(je),T(m7),T(Lt))},n.\u0275cmp=dt({type:n,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,i){2&t&&Qs("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[At([{provide:Wh,useExisting:n}]),pe],ngContentSelectors:Z7,decls:1,vars:0,template:function(t,i){1&t&&(Ki(),Vn(0))},encapsulation:2,changeDetection:0}),n})(),vO=(()=>{class n extends mO{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=qt(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=zo(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=zo(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275cmp=dt({type:n,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,i){2&t&&(Mn("align",null),Qs("top",i.fixedInViewport?i.fixedTopGap:null,"px")("bottom",i.fixedInViewport?i.fixedBottomGap:null,"px"),Et("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened)("mat-sidenav-fixed",i.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[pe],ngContentSelectors:Z7,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,i){1&t&&(Ki(),M(0,"div",0,1),Vn(2),S())},dependencies:[Wh],encapsulation:2,data:{animation:[pO.transformDrawer]},changeDetection:0}),n})(),_O=(()=>{class n extends gO{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275cmp=dt({type:n,selectors:[["mat-sidenav-container"]],contentQueries:function(t,i,s){if(1&t&&(Ti(s,yx,5),Ti(s,vO,5)),2&t){let r;Ot(r=Nt())&&(i._content=r.first),Ot(r=Nt())&&(i._allDrawers=r)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,i){2&t&&Et("mat-drawer-container-explicit-backdrop",i._backdropOverride)},exportAs:["matSidenavContainer"],features:[At([{provide:_x,useExisting:n}]),pe],ngContentSelectors:E_e,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,i){1&t&&(Ki(T_e),Ve(0,w_e,1,2,"div",0),Vn(1),Vn(2,1),Ve(3,S_e,2,0,"mat-sidenav-content",1)),2&t&&(Z("ngIf",i.hasBackdrop),H(3),Z("ngIf",!i._content))},dependencies:[Lo,yx],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),n})(),z_e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[io,wt,u3,u3,wt]}),n})();function yO(n){for(let e in n){let t=n[e]??"";switch(e){case"display":n.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":n["-webkit-"+e]=t;break;case"flex-direction":n["-webkit-flex-direction"]=t,n["flex-direction"]=t;break;case"order":n.order=n["-webkit-"+e]=isNaN(+t)?"0":t}}return n}const bx="inline",Q7=["row","column","row-reverse","column-reverse"];function bO(n){let[e,t,i]=xO(n);return function R_e(n,e=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":n,"flex-wrap":e||null}}(e,t,i)}function xO(n){n=n?.toLowerCase()??"";let[e,t,i]=n.split(" ");return Q7.find(s=>s===e)||(e=Q7[0]),t===bx&&(t=i!==bx?i:"",i=bx),[e,k_e(t),!!i]}function fd(n){let[e]=xO(n);return e.indexOf("row")>-1}function k_e(n){if(n)switch(n.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":n="wrap-reverse";break;case"no":case"none":case"nowrap":n="nowrap";break;default:n="wrap"}return n}function S2(n,...e){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(let t of e)if(null!=t)for(let i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}const H_e={provide:Nf,useFactory:function I_e(n,e){return()=>{if(Lc(e)){const t=Array.from(n.querySelectorAll(`[class*=${MO}]`)),i=/\bflex-layout-.+?\b/g;t.forEach(s=>{s.classList.contains(`${MO}ssr`)&&s.parentNode?s.parentNode.removeChild(s):s.className.replace(i,"")})}}},deps:[Ct,Ao],multi:!0},MO="flex-layout-";let xx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({providers:[H_e]}),n})();class _3{constructor(e=!1,t="all",i="",s="",r=0){this.matches=e,this.mediaQuery=t,this.mqAlias=i,this.suffix=s,this.priority=r,this.property=""}clone(){return new _3(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let V_e=(()=>{class n{constructor(){this.stylesheet=new Map}addStyleToElement(t,i,s){const r=this.stylesheet.get(t);r?r.set(i,s):this.stylesheet.set(t,new Map([[i,s]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,i){const s=this.stylesheet.get(t);let r="";if(s){const o=s.get(i);("number"==typeof o||"string"==typeof o)&&(r=o+"")}return r}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Mx={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},W1=new fe("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>Mx}),X0=new fe("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),Cx=new fe("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function CO(n,e){return n=n?.clone()??new _3,e&&(n.mqAlias=e.alias,n.mediaQuery=e.mediaQuery,n.suffix=e.suffix,n.priority=e.priority),n}class Ji{constructor(){this.shouldCache=!0}sideEffect(e,t,i){}}let Ai=(()=>{class n{constructor(t,i,s,r){this._serverStylesheet=t,this._serverModuleLoaded=i,this._platformId=s,this.layoutConfig=r}applyStyleToElement(t,i,s=null){let r={};"string"==typeof i&&(r[i]=s,i=r),r=this.layoutConfig.disableVendorPrefixes?i:yO(i),this._applyMultiValueStyleToElement(r,t)}applyStyleToElements(t,i=[]){const s=this.layoutConfig.disableVendorPrefixes?t:yO(t);i.forEach(r=>{this._applyMultiValueStyleToElement(s,r)})}getFlowDirection(t){const i="flex-direction";let s=this.lookupStyle(t,i);return[s||"row",this.lookupInlineStyle(t,i)||H0(this._platformId)&&this._serverModuleLoaded?s:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,i){return t.getAttribute(i)??""}lookupInlineStyle(t,i){return Lc(this._platformId)?t.style.getPropertyValue(i):function P_e(n,e){return wO(n)[e]??""}(t,i)}lookupStyle(t,i,s=!1){let r="";return t&&((r=this.lookupInlineStyle(t,i))||(Lc(this._platformId)?s||(r=getComputedStyle(t).getPropertyValue(i)):this._serverModuleLoaded&&(r=this._serverStylesheet.getStyleForElement(t,i)))),r?r.trim():""}_applyMultiValueStyleToElement(t,i){Object.keys(t).sort().forEach(s=>{const r=t[s],o=Array.isArray(r)?r:[r];o.sort();for(let a of o)a=a?a+"":"",Lc(this._platformId)||!this._serverModuleLoaded?Lc(this._platformId)?i.style.setProperty(s,a):O_e(i,s,a):this._serverStylesheet.addStyleToElement(i,s,a)})}}return n.\u0275fac=function(t){return new(t||n)(J(V_e),J(X0),J(Ao),J(W1))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function O_e(n,e,t){e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const i=wO(n);i[e]=t??"",function N_e(n,e){let t="";for(const i in e)e[i]&&(t+=`${i}:${e[i]};`);n.setAttribute("style",t)}(n,i)}function wO(n){const e={},t=n.getAttribute("style");if(t){const i=t.split(/;+/g);for(let s=0;s<i.length;s++){const r=i[s].trim();if(r.length>0){const o=r.indexOf(":");if(-1===o)throw new Error(`Invalid CSS style: ${r}`);e[r.substr(0,o).trim()]=r.substr(o+1).trim()}}}return e}function pd(n,e){return(e&&e.priority||0)-(n&&n.priority||0)}function F_e(n,e){return(n.priority||0)-(e.priority||0)}let wx=(()=>{class n{constructor(t,i,s){this._zone=t,this._platformId=i,this._document=s,this.source=new Un(new _3(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((i,s)=>{i.matches&&t.push(s)}),t}isActive(t){return this.registry.get(t)?.matches??this.registerQuery(t).some(s=>s.matches)}observe(t,i=!1){if(t&&t.length){const s=this._observable$.pipe(Pn(o=>!i||t.indexOf(o.mediaQuery)>-1));return Ja(new Tn(o=>{const a=this.registerQuery(t);if(a.length){const c=a.pop();a.forEach(l=>{o.next(l)}),this.source.next(c)}o.complete()}),s)}return this._observable$}registerQuery(t){const i=Array.isArray(t)?t:[t],s=[];return function B_e(n,e){const t=n.filter(i=>!SO[i]);if(t.length>0){const i=t.join(", ");try{const s=e.createElement("style");s.setAttribute("type","text/css"),s.styleSheet||s.appendChild(e.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${i} {.fx-query-test{ }}\n`)),e.head.appendChild(s),t.forEach(r=>SO[r]=s)}catch(s){console.error(s)}}}(i,this._document),i.forEach(r=>{const o=c=>{this._zone.run(()=>this.source.next(new _3(c.matches,r)))};let a=this.registry.get(r);a||(a=this.buildMQL(r),a.addListener(o),this.pendingRemoveListenerFns.push(()=>a.removeListener(o)),this.registry.set(r,a)),a.matches&&s.push(new _3(!0,r))}),s}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function U_e(n,e){return e&&window.matchMedia("all").addListener?window.matchMedia(n):{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,Lc(this._platformId))}}return n.\u0275fac=function(t){return new(t||n)(J(Lt),J(Ao),J(Ct))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const SO={},G_e=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],TO="(orientation: portrait) and (max-width: 599.98px)",EO="(orientation: landscape) and (max-width: 959.98px)",AO="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",DO="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",LO="(orientation: portrait) and (min-width: 840px)",zO="(orientation: landscape) and (min-width: 1280px)",T2={HANDSET:`${TO}, ${EO}`,TABLET:`${AO} , ${DO}`,WEB:`${LO}, ${zO} `,HANDSET_PORTRAIT:`${TO}`,TABLET_PORTRAIT:`${AO} `,WEB_PORTRAIT:`${LO}`,HANDSET_LANDSCAPE:`${EO}`,TABLET_LANDSCAPE:`${DO}`,WEB_LANDSCAPE:`${zO}`},W_e=[{alias:"handset",priority:2e3,mediaQuery:T2.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:T2.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:T2.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:T2.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:T2.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:T2.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:T2.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:T2.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:T2.WEB_PORTRAIT,overlapping:!0}],j_e=/(\.|-|_)/g;function $_e(n){let e=n.length>0?n.charAt(0):"",t=n.length>1?n.slice(1):"";return e.toUpperCase()+t}const Z_e=new fe("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const n=Dn(Cx),e=Dn(W1),t=[].concat.apply([],(n||[]).map(s=>Array.isArray(s)?s:[s]));return function X_e(n,e=[]){const t={};return n.forEach(i=>{t[i.alias]=i}),e.forEach(i=>{t[i.alias]?S2(t[i.alias],i):t[i.alias]=i}),function Y_e(n){return n.forEach(e=>{e.suffix||(e.suffix=function q_e(n){return n.replace(j_e,"|").split("|").map($_e).join("")}(e.alias),e.overlapping=!!e.overlapping)}),n}(Object.keys(t).map(i=>t[i]))}((e.disableDefaultBps?[]:G_e).concat(e.addOrientationBps?W_e:[]),t)}});let Sx=(()=>{class n{constructor(t){this.findByMap=new Map,this.items=[...t].sort(F_e)}findByAlias(t){return t?this.findWithPredicate(t,i=>i.alias===t):null}findByQuery(t){return this.findWithPredicate(t,i=>i.mediaQuery===t)}get overlappings(){return this.items.filter(t=>t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t?.suffix??"")}findWithPredicate(t,i){let s=this.findByMap.get(t);return s||(s=this.items.find(i)??null,this.findByMap.set(t,s)),s??null}}return n.\u0275fac=function(t){return new(t||n)(J(Z_e))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Z0="print",K_e={alias:Z0,mediaQuery:Z0,priority:1e3};let Q_e=(()=>{class n{constructor(t,i,s){this.breakpoints=t,this.layoutConfig=i,this._document=s,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new J_e,this.deactivations=[]}withPrintQuery(t){return[...t,Z0]}isPrintEvent(t){return t.mediaQuery.startsWith(Z0)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const i=this.breakpoints.findByQuery(t);return(i?[...this.printBreakPoints,i]:this.printBreakPoints).sort(pd)}updateEvent(t){let i=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(i=this.getEventBreakpoints(t)[0],t.mediaQuery=i?.mediaQuery??""),CO(t,i)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const i=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new _3(!0,Z0))),t.updateStyles())},s=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",i),this._document.defaultView.addEventListener("afterprint",s),this.beforePrintEventListeners.push(i),this.afterPrintEventListeners.push(s)}interceptEvents(t){return i=>{this.isPrintEvent(i)?i.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(i)),t.updateStyles()):!i.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(t,i)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,i){this.isPrinting=!0,this.formerActivations=t.activatedBreakpoints,t.activatedBreakpoints=this.queue.addPrintBreakpoints(i)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(t,i){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!i.matches){const s=this.breakpoints.findByQuery(i.mediaQuery);if(s){const r=this.formerActivations&&this.formerActivations.includes(s),o=!this.formerActivations&&t.activatedBreakpoints.includes(s);(r||o)&&(this.deactivations.push(s),this.deactivations.sort(pd))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return n.\u0275fac=function(t){return new(t||n)(J(Sx),J(W1),J(Ct))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class J_e{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(e){return e.push(K_e),e.sort(pd),e.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(e){e&&void 0===this.printBreakpoints.find(i=>i.mediaQuery===e.mediaQuery)&&(this.printBreakpoints=function eye(n){return n?.mediaQuery.startsWith(Z0)??!1}(e)?[e,...this.printBreakpoints]:[...this.printBreakpoints,e])}clear(){this.printBreakpoints=[]}}let Ri=(()=>{class n{constructor(t,i,s){this.matchMedia=t,this.breakpoints=i,this.hook=s,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new Tt,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(t){this._activatedBreakpoints=[...t]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(t){this._useFallbacks=t}onMediaChange(t){const i=this.findByQuery(t.mediaQuery);if(i){t=CO(t,i);const s=this.activatedBreakpoints.indexOf(i);t.matches&&-1===s?(this._activatedBreakpoints.push(i),this._activatedBreakpoints.sort(pd),this.updateStyles()):!t.matches&&-1!==s&&(this._activatedBreakpoints.splice(s,1),this._activatedBreakpoints.sort(pd),this.updateStyles())}}init(t,i,s,r,o=[]){kO(this.updateMap,t,i,s),kO(this.clearMap,t,i,r),this.buildElementKeyMap(t,i),this.watchExtraTriggers(t,i,o)}getValue(t,i,s){const r=this.elementMap.get(t);if(r){const o=void 0!==s?r.get(s):this.getActivatedValues(r,i);if(o)return o.get(i)}}hasValue(t,i){const s=this.elementMap.get(t);if(s){const r=this.getActivatedValues(s,i);if(r)return void 0!==r.get(i)||!1}return!1}setValue(t,i,s,r){let o=this.elementMap.get(t);if(o){const c=(o.get(r)??new Map).set(i,s);o.set(r,c),this.elementMap.set(t,o)}else o=(new Map).set(r,(new Map).set(i,s)),this.elementMap.set(t,o);const a=this.getValue(t,i);void 0!==a&&this.updateElement(t,i,a)}trackValue(t,i){return this.subject.asObservable().pipe(Pn(s=>s.element===t&&s.key===i))}updateStyles(){this.elementMap.forEach((t,i)=>{const s=new Set(this.elementKeyMap.get(i));let r=this.getActivatedValues(t);r&&r.forEach((o,a)=>{this.updateElement(i,a,o),s.delete(a)}),s.forEach(o=>{if(r=this.getActivatedValues(t,o),r){const a=r.get(o);this.updateElement(i,o,a)}else this.clearElement(i,o)})})}clearElement(t,i){const s=this.clearMap.get(t);if(s){const r=s.get(i);r&&(r(),this.subject.next({element:t,key:i,value:""}))}}updateElement(t,i,s){const r=this.updateMap.get(t);if(r){const o=r.get(i);o&&(o(s),this.subject.next({element:t,key:i,value:s}))}}releaseElement(t){const i=this.watcherMap.get(t);i&&(i.forEach(r=>r.unsubscribe()),this.watcherMap.delete(t));const s=this.elementMap.get(t);s&&(s.forEach((r,o)=>s.delete(o)),this.elementMap.delete(t))}triggerUpdate(t,i){const s=this.elementMap.get(t);if(s){const r=this.getActivatedValues(s,i);r&&(i?this.updateElement(t,i,r.get(i)):r.forEach((o,a)=>this.updateElement(t,a,o)))}}buildElementKeyMap(t,i){let s=this.elementKeyMap.get(t);s||(s=new Set,this.elementKeyMap.set(t,s)),s.add(i)}watchExtraTriggers(t,i,s){if(s&&s.length){let r=this.watcherMap.get(t);if(r||(r=new Map,this.watcherMap.set(t,r)),!r.get(i)){const a=Ja(...s).subscribe(()=>{const c=this.getValue(t,i);this.updateElement(t,i,c)});r.set(i,a)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,i){for(let r=0;r<this.activatedBreakpoints.length;r++){const a=t.get(this.activatedBreakpoints[r].alias);if(a&&(void 0===i||a.has(i)&&null!=a.get(i)))return a}if(!this._useFallbacks)return;const s=t.get("");return void 0===i||s&&s.has(i)?s:void 0}observeActivations(){const t=this.breakpoints.items.map(i=>i.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe(Ei(this.hook.interceptEvents(this)),Pn(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return n.\u0275fac=function(t){return new(t||n)(J(wx),J(Sx),J(Q_e))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function kO(n,e,t,i){if(void 0!==i){const s=n.get(e)??new Map;s.set(t,i),n.set(e,s)}}let Gi=(()=>{class n{constructor(t,i,s,r){this.elementRef=t,this.styleBuilder=i,this.styler=s,this.marshal=r,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new Tt,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const s=i.split(".").slice(1).join(".");this.setValue(t[i].currentValue,s)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,i){const s=this.styleBuilder,r=s.shouldCache;let o=this.styleCache.get(t);(!o||!r)&&(o=s.buildStyles(t,i),r&&this.styleCache.set(t,o)),this.mru={...o},this.applyStyleToElement(o),s.sideEffect(t,o,i)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,i=!1){if(t){const[s,r]=this.styler.getFlowDirection(t);if(!r&&i){const o=bO(s);this.styler.applyStyleToElements(o,[t])}return s.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,i,s=this.nativeElement){this.styler.applyStyleToElement(s,t,i)}setValue(t,i){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,i)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(Ji),T(Ai),T(Ri))},n.\u0275dir=le({type:n,features:[Bi]}),n})();function RO(n,e="1",t="1"){let i=[e,t,n],s=n.indexOf("calc");if(s>0){i[2]=IO(n.substring(s).trim());let r=n.substr(0,s).trim().split(" ");2==r.length&&(i[0]=r[0],i[1]=r[1])}else if(0==s)i[2]=IO(n.trim());else{let r=n.split(" ");i=3===r.length?r:[e,t,n]}return i}function IO(n){return n.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}function J7(n,e){if(void 0===e)return n;const t=i=>{const s=+i.slice(0,-"x".length);return n.endsWith("x")&&!isNaN(s)?`${s*e.value}${e.unit}`:n};return n.includes(" ")?n.split(" ").map(t).join(" "):t(n)}let iye=(()=>{class n extends Ji{buildStyles(t,{display:i}){const s=bO(t);return{...s,display:"none"===i?i:s.display}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sye=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let rye=(()=>{class n extends Gi{constructor(t,i,s,r,o){super(t,s,i,r),this._config=o,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(t){const s=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=VO.get(s)??new Map,VO.set(s,this.styleCache),this.currentValue!==t&&(this.addStyles(t,{display:s}),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(Ai),T(iye),T(Ri),T(W1))},n.\u0275dir=le({type:n,features:[pe]}),n})(),y3=(()=>{class n extends rye{constructor(){super(...arguments),this.inputs=sye}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[pe]}),n})();const VO=new Map,PO={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};let oye=(()=>{class n extends Ji{constructor(t,i){super(),this._styler=t,this._config=i}buildStyles(t,i){return t.endsWith(ep)?function pye(n,e){const[t,i]=n.split(" "),r=l=>`-${l}`;let o="0px",a=r(i??t),c="0px";return"rtl"===e?c=r(t):o=r(t),{margin:`0px ${o} ${a} ${c}`}}(t=J7(t=t.slice(0,t.indexOf(ep)),this._config.multiplier),i.directionality):{}}sideEffect(t,i,s){const r=s.items;if(t.endsWith(ep)){const o=function fye(n,e){const[t,i]=n.split(" ");let r="0px",a="0px";return"rtl"===e?a=t:r=t,{padding:`0px ${r} ${i??t} ${a}`}}(t=J7(t=t.slice(0,t.indexOf(ep)),this._config.multiplier),s.directionality);this._styler.applyStyleToElements(o,s.items)}else{t=J7(t,this._config.multiplier),t=this.addFallbackUnit(t);const o=r.pop(),a=function mye(n,e){const t=OO(e.directionality,e.layout),i={...PO};return i[t]=n,i}(t,s);this._styler.applyStyleToElements(a,r),this._styler.applyStyleToElements(PO,[o])}}addFallbackUnit(t){return isNaN(+t)?t:`${t}${this._config.defaultUnit}`}}return n.\u0275fac=function(t){return new(t||n)(J(Ai),J(W1))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const aye=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"];let cye=(()=>{class n extends Gi{constructor(t,i,s,r,o,a){super(t,o,r,a),this.zone=i,this.directionality=s,this.styleUtils=r,this.layout="row",this.DIRECTIVE_KEY="layout-gap",this.observerSubject=new Tt;const c=[this.directionality.change,this.observerSubject.asObservable()];this.init(c),this.marshal.trackValue(this.nativeElement,"layout").pipe(Bn(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}get childrenNodes(){const t=this.nativeElement.children,i=[];for(let s=t.length;s--;)i[s]=t[s];return i}ngAfterContentInit(){this.buildChildObservable(),this.triggerUpdate()}ngOnDestroy(){super.ngOnDestroy(),this.observer&&this.observer.disconnect()}onLayoutChange(t){const s=t.value.split(" ");this.layout=s[0],Q7.find(r=>r===this.layout)||(this.layout="row"),this.triggerUpdate()}updateWithValue(t){const i=this.childrenNodes.filter(s=>1===s.nodeType&&this.willDisplay(s)).sort((s,r)=>{const o=+this.styler.lookupStyle(s,"order"),a=+this.styler.lookupStyle(r,"order");return isNaN(o)||isNaN(a)||o===a?0:o>a?1:-1});if(i.length>0){const s=this.directionality.value,r=this.layout;"row"===r&&"rtl"===s?this.styleCache=lye:"row"===r&&"rtl"!==s?this.styleCache=hye:"column"===r&&"rtl"===s?this.styleCache=uye:"column"===r&&"rtl"!==s&&(this.styleCache=dye),this.addStyles(t,{directionality:s,items:i,layout:r})}}clearStyles(){const t=Object.keys(this.mru).length>0,i=t?"padding":OO(this.directionality.value,this.layout);t&&super.clearStyles(),this.styleUtils.applyStyleToElements({[i]:""},this.childrenNodes)}willDisplay(t){const i=this.marshal.getValue(t,"show-hide");return!0===i||void 0===i&&"none"!==this.styleUtils.lookupStyle(t,"display")}buildChildObservable(){this.zone.runOutsideAngular(()=>{typeof MutationObserver<"u"&&(this.observer=new MutationObserver(t=>{t.some(s=>s.addedNodes&&s.addedNodes.length>0||s.removedNodes&&s.removedNodes.length>0)&&this.observerSubject.next()}),this.observer.observe(this.nativeElement,{childList:!0}))})}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(Lt),T(_2),T(Ai),T(oye),T(Ri))},n.\u0275dir=le({type:n,features:[pe]}),n})(),K0=(()=>{class n extends cye{constructor(){super(...arguments),this.inputs=aye}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[pe]}),n})();const lye=new Map,uye=new Map,hye=new Map,dye=new Map,ep=" grid";function OO(n,e){switch(e){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":default:return"rtl"===n?"margin-left":"margin-right";case"row-reverse":return"rtl"===n?"margin-right":"margin-left"}}let gye=(()=>{class n extends Ji{constructor(t){super(),this.layoutConfig=t}buildStyles(t,i){let[s,r,...o]=t.split(" "),a=o.join(" ");const c=i.direction.indexOf("column")>-1?"column":"row",l=fd(c)?"max-width":"max-height",u=fd(c)?"min-width":"min-height",h=String(a).indexOf("calc")>-1,d=h||"auto"===a,f=String(a).indexOf("%")>-1&&!h,p=String(a).indexOf("px")>-1||String(a).indexOf("rem")>-1||String(a).indexOf("em")>-1||String(a).indexOf("vw")>-1||String(a).indexOf("vh")>-1;let m=h||p;s="0"==s?0:s,r="0"==r?0:r;const g=!s&&!r;let v={};const _={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(a||""){case"":const y=!1!==this.layoutConfig.useColumnBasisZero;a="row"===c?"0%":y?"0.000000001px":"auto";break;case"initial":case"nogrow":s=0,a="auto";break;case"grow":a="100%";break;case"noshrink":r=0,a="auto";break;case"auto":break;case"none":s=0,r=0,a="auto";break;default:!m&&!f&&!isNaN(a)&&(a+="%"),"0%"===a&&(m=!0),"0px"===a&&(a="0%"),v=S2(_,h?{"flex-grow":s,"flex-shrink":r,"flex-basis":m?a:"100%"}:{flex:`${s} ${r} ${m?a:"100%"}`})}return v.flex||v["flex-grow"]||(v=S2(_,h?{"flex-grow":s,"flex-shrink":r,"flex-basis":a}:{flex:`${s} ${r} ${a}`})),"0%"!==a&&"0px"!==a&&"0.000000001px"!==a&&"auto"!==a&&(v[u]=g||m&&s?a:null,v[l]=g||!d&&r?a:null),v[u]||v[l]?i.hasWrap&&(v[h?"flex-basis":"flex"]=v[l]?h?v[l]:`${s} ${r} ${v[l]}`:h?v[u]:`${s} ${r} ${v[u]}`):v=S2(_,h?{"flex-grow":s,"flex-shrink":r,"flex-basis":a}:{flex:`${s} ${r} ${a}`}),S2(v,{"box-sizing":"border-box"})}}return n.\u0275fac=function(t){return new(t||n)(J(W1))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vye=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let _ye=(()=>{class n extends Gi{constructor(t,i,s,r,o){super(t,r,i,o),this.layoutConfig=s,this.marshal=o,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(t){this.flexShrink=t||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(t){this.flexGrow=t||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(Bn(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(Bn(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(t){const s=t.value.split(" ");this.direction=s[0],this.wrap=void 0!==s[1]&&"wrap"===s[1],this.triggerUpdate()}updateWithValue(t){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const s=this.direction,r=s.startsWith("row"),o=this.wrap;r&&o?this.styleCache=xye:r&&!o?this.styleCache=yye:!r&&o?this.styleCache=Mye:!r&&!o&&(this.styleCache=bye);const c=RO(String(t).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(c.join(" "),{direction:s,hasWrap:o})}triggerReflow(){const t=this.activatedValue;if(void 0!==t){const i=RO(t+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,i.join(" "))}}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(Ai),T(W1),T(gye),T(Ri))},n.\u0275dir=le({type:n,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[pe]}),n})(),tp=(()=>{class n extends _ye{constructor(){super(...arguments),this.inputs=vye}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[pe]}),n})();const yye=new Map,bye=new Map,xye=new Map,Mye=new Map;let jye=(()=>{class n extends Ji{buildStyles(t,i){const s={},[r,o]=t.split(" ");switch(r){case"center":s["justify-content"]="center";break;case"space-around":s["justify-content"]="space-around";break;case"space-between":s["justify-content"]="space-between";break;case"space-evenly":s["justify-content"]="space-evenly";break;case"end":case"flex-end":s["justify-content"]="flex-end";break;default:s["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":s["align-items"]=s["align-content"]="flex-start";break;case"center":s["align-items"]=s["align-content"]="center";break;case"end":case"flex-end":s["align-items"]=s["align-content"]="flex-end";break;case"space-between":s["align-content"]="space-between",s["align-items"]="stretch";break;case"space-around":s["align-content"]="space-around",s["align-items"]="stretch";break;case"baseline":s["align-content"]="stretch",s["align-items"]="baseline";break;default:s["align-items"]=s["align-content"]="stretch"}return S2(s,{display:i.inline?"inline-flex":"flex","flex-direction":i.layout,"box-sizing":"border-box","max-width":"stretch"===o?fd(i.layout)?null:"100%":null,"max-height":"stretch"===o&&fd(i.layout)?"100%":null})}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $ye=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let qye=(()=>{class n extends Gi{constructor(t,i,s,r){super(t,s,i,r),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(Bn(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const i=this.layout||"row",s=this.inline;"row"===i&&s?this.styleCache=Qye:"row"!==i||s?"row-reverse"===i&&s?this.styleCache=ebe:"row-reverse"!==i||s?"column"===i&&s?this.styleCache=Jye:"column"!==i||s?"column-reverse"===i&&s?this.styleCache=tbe:"column-reverse"===i&&!s&&(this.styleCache=Kye):this.styleCache=Xye:this.styleCache=Zye:this.styleCache=Yye,this.addStyles(t,{layout:i,inline:s})}onLayoutChange(t){const i=t.value.split(" ");this.layout=i[0],this.inline=t.value.includes("inline"),Q7.find(s=>s===this.layout)||(this.layout="row"),this.triggerUpdate()}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(Ai),T(jye),T(Ri))},n.\u0275dir=le({type:n,features:[pe]}),n})(),b3=(()=>{class n extends qye{constructor(){super(...arguments),this.inputs=$ye}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[pe]}),n})();const Yye=new Map,Xye=new Map,Zye=new Map,Kye=new Map,Qye=new Map,Jye=new Map,ebe=new Map,tbe=new Map;let NO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[xx,l3]}),n})();function FO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function ct(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?FO(Object(t),!0).forEach(function(i){Ws(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):FO(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function np(n){return(np="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function BO(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Ws(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Tx(n,e){return function obe(n){if(Array.isArray(n))return n}(n)||function cbe(n,e){var t=null==n?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,a,i=[],s=!0,r=!1;try{for(t=t.call(n);!(s=(o=t.next()).done)&&(i.push(o.value),!e||i.length!==e);s=!0);}catch(c){r=!0,a=c}finally{try{!s&&null!=t.return&&t.return()}finally{if(r)throw a}}return i}}(n,e)||UO(n,e)||function ube(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gd(n){return function rbe(n){if(Array.isArray(n))return Ex(n)}(n)||function abe(n){if(typeof Symbol<"u"&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||UO(n)||function lbe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UO(n,e){if(n){if("string"==typeof n)return Ex(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ex(n,e)}}function Ex(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var GO=function(){},Ax={},WO={},jO=null,$O={mark:GO,measure:GO};try{typeof window<"u"&&(Ax=window),typeof document<"u"&&(WO=document),typeof MutationObserver<"u"&&(jO=MutationObserver),typeof performance<"u"&&($O=performance)}catch{}var rp,op,ap,cp,lp,qO=(Ax.navigator||{}).userAgent,YO=void 0===qO?"":qO,Fc=Ax,Di=WO,XO=jO,sp=$O,E2=!!Di.documentElement&&!!Di.head&&"function"==typeof Di.addEventListener&&"function"==typeof Di.createElement,ZO=~YO.indexOf("MSIE")||~YO.indexOf("Trident/"),A2="___FONT_AWESOME___",QO="svg-inline--fa",x3="data-fa-i2svg",Lx="data-fa-pseudo-element",zx="data-prefix",kx="data-icon",JO="fontawesome-i2svg",pbe=["HTML","HEAD","STYLE","SCRIPT"],eN=function(){try{return!0}catch{return!1}}(),Li="classic",es="sharp",Rx=[Li,es];function vd(n){return new Proxy(n,{get:function(t,i){return i in t?t[i]:t[Li]}})}var _d=vd((Ws(rp={},Li,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),Ws(rp,es,{fa:"solid",fass:"solid","fa-solid":"solid"}),rp)),yd=vd((Ws(op={},Li,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Ws(op,es,{solid:"fass"}),op)),bd=vd((Ws(ap={},Li,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Ws(ap,es,{fass:"fa-solid"}),ap)),mbe=vd((Ws(cp={},Li,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Ws(cp,es,{"fa-solid":"fass"}),cp)),gbe=/fa(s|r|l|t|d|b|k|ss)?[\-\ ]/,tN="fa-layers-text",vbe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,_be=vd((Ws(lp={},Li,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Ws(lp,es,{900:"fass"}),lp)),nN=[1,2,3,4,5,6,7,8,9,10],ybe=nN.concat([11,12,13,14,15,16,17,18,19,20]),bbe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],xd=new Set;Object.keys(yd[Li]).map(xd.add.bind(xd)),Object.keys(yd[es]).map(xd.add.bind(xd));var xbe=[].concat(Rx,gd(xd),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","duotone-group","swap-opacity","primary","secondary"]).concat(nN.map(function(n){return"".concat(n,"x")})).concat(ybe.map(function(n){return"w-".concat(n)})),Md=Fc.FontAwesomeConfig||{};Di&&"function"==typeof Di.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=Tx(n,2),i=e[1],s=function Cbe(n){return""===n||"false"!==n&&("true"===n||n)}(function Mbe(n){var e=Di.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=s&&(Md[i]=s)});var iN={styleDefault:"solid",familyDefault:"classic",cssPrefix:"fa",replacementClass:QO,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Md.familyPrefix&&(Md.cssPrefix=Md.familyPrefix);var Q0=ct(ct({},iN),Md);Q0.autoReplaceSvg||(Q0.observeMutations=!1);var xt={};Object.keys(iN).forEach(function(n){Object.defineProperty(xt,n,{enumerable:!0,set:function(t){Q0[n]=t,Cd.forEach(function(i){return i(xt)})},get:function(){return Q0[n]}})}),Object.defineProperty(xt,"familyPrefix",{enumerable:!0,set:function(e){Q0.cssPrefix=e,Cd.forEach(function(t){return t(xt)})},get:function(){return Q0.cssPrefix}}),Fc.FontAwesomeConfig=xt;var Cd=[],Da={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function wd(){for(var n=12,e="";n-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function J0(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function Ix(n){return n.classList?J0(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function sN(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function up(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function Hx(n){return n.size!==Da.size||n.x!==Da.x||n.y!==Da.y||n.rotate!==Da.rotate||n.flipX||n.flipY}function rN(){var n="fa",e=QO,t=xt.cssPrefix,i=xt.replacementClass,s=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(t!==n||i!==e){var r=new RegExp("\\.".concat(n,"\\-"),"g"),o=new RegExp("\\--".concat(n,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");s=s.replace(r,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(i))}return s}var oN=!1;function Vx(){xt.autoAddCss&&!oN&&(function Tbe(n){if(n&&E2){var e=Di.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=Di.head.childNodes,i=null,s=t.length-1;s>-1;s--){var r=t[s],o=(r.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=r)}Di.head.insertBefore(e,i)}}(rN()),oN=!0)}var kbe={mixout:function(){return{dom:{css:rN,insertCss:Vx}}},hooks:function(){return{beforeDOMElementCreation:function(){Vx()},beforeI2svg:function(){Vx()}}}},D2=Fc||{};D2[A2]||(D2[A2]={}),D2[A2].styles||(D2[A2].styles={}),D2[A2].hooks||(D2[A2].hooks={}),D2[A2].shims||(D2[A2].shims=[]);var j1=D2[A2],aN=[],hp=!1;function Ibe(n){!E2||(hp?setTimeout(n,0):aN.push(n))}function Sd(n){var e=n.tag,t=n.attributes,i=void 0===t?{}:t,s=n.children,r=void 0===s?[]:s;return"string"==typeof n?sN(n):"<".concat(e," ").concat(function Abe(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(sN(n[t]),'" ')},"").trim()}(i),">").concat(r.map(Sd).join(""),"</").concat(e,">")}function cN(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}E2&&((hp=(Di.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Di.readyState))||Di.addEventListener("DOMContentLoaded",function n(){Di.removeEventListener("DOMContentLoaded",n),hp=1,aN.map(function(e){return e()})}));var Px=function(e,t,i,s){var c,l,u,r=Object.keys(e),o=r.length,a=void 0!==s?function(e,t){return function(i,s,r,o){return e.call(t,i,s,r,o)}}(t,s):t;for(void 0===i?(c=1,u=e[r[0]]):(c=0,u=i);c<o;c++)u=a(u,e[l=r[c]],l,e);return u};function Ox(n){var e=function Vbe(n){for(var e=[],t=0,i=n.length;t<i;){var s=n.charCodeAt(t++);if(s>=55296&&s<=56319&&t<i){var r=n.charCodeAt(t++);56320==(64512&r)?e.push(((1023&s)<<10)+(1023&r)+65536):(e.push(s),t--)}else e.push(s)}return e}(n);return 1===e.length?e[0].toString(16):null}function lN(n){return Object.keys(n).reduce(function(e,t){var i=n[t];return i.icon?e[i.iconName]=i.icon:e[t]=i,e},{})}function Nx(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.skipHooks,s=void 0!==i&&i,r=lN(e);"function"!=typeof j1.hooks.addPack||s?j1.styles[n]=ct(ct({},j1.styles[n]||{}),r):j1.hooks.addPack(n,lN(e)),"fas"===n&&Nx("fa",e)}var dp,fp,pp,e6=j1.styles,Obe=j1.shims,Nbe=(Ws(dp={},Li,Object.values(bd[Li])),Ws(dp,es,Object.values(bd[es])),dp),Fx=null,uN={},hN={},dN={},fN={},pN={},Fbe=(Ws(fp={},Li,Object.keys(_d[Li])),Ws(fp,es,Object.keys(_d[es])),fp);function Ube(n,e){var t=e.split("-"),i=t[0],s=t.slice(1).join("-");return i!==n||""===s||function Bbe(n){return~xbe.indexOf(n)}(s)?null:s}var mN=function(){var e=function(r){return Px(e6,function(o,a,c){return o[c]=Px(a,r,{}),o},{})};uN=e(function(s,r,o){return r[3]&&(s[r[3]]=o),r[2]&&r[2].filter(function(c){return"number"==typeof c}).forEach(function(c){s[c.toString(16)]=o}),s}),hN=e(function(s,r,o){return s[o]=o,r[2]&&r[2].filter(function(c){return"string"==typeof c}).forEach(function(c){s[c]=o}),s}),pN=e(function(s,r,o){var a=r[2];return s[o]=o,a.forEach(function(c){s[c]=o}),s});var t="far"in e6||xt.autoFetchSvg,i=Px(Obe,function(s,r){var o=r[0],a=r[1],c=r[2];return"far"===a&&!t&&(a="fas"),"string"==typeof o&&(s.names[o]={prefix:a,iconName:c}),"number"==typeof o&&(s.unicodes[o.toString(16)]={prefix:a,iconName:c}),s},{names:{},unicodes:{}});dN=i.names,fN=i.unicodes,Fx=mp(xt.styleDefault,{family:xt.familyDefault})};function Bx(n,e){return(uN[n]||{})[e]}function C3(n,e){return(pN[n]||{})[e]}function gN(n){return dN[n]||{prefix:null,iconName:null}}function Uc(){return Fx}function mp(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.family,i=void 0===t?Li:t,s=_d[i][n],r=yd[i][n]||yd[i][s],o=n in j1.styles?n:null;return r||o||null}(function Sbe(n){Cd.push(n)})(function(n){Fx=mp(n.styleDefault,{family:xt.familyDefault})}),mN();var vN=(Ws(pp={},Li,Object.keys(bd[Li])),Ws(pp,es,Object.keys(bd[es])),pp);function gp(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.skipLookups,s=void 0!==i&&i,r=(Ws(e={},Li,"".concat(xt.cssPrefix,"-").concat(Li)),Ws(e,es,"".concat(xt.cssPrefix,"-").concat(es)),e),o=null,a=Li;(n.includes(r[Li])||n.some(function(l){return vN[Li].includes(l)}))&&(a=Li),(n.includes(r[es])||n.some(function(l){return vN[es].includes(l)}))&&(a=es);var c=n.reduce(function(l,u){var h=Ube(xt.cssPrefix,u);if(e6[u]?(u=Nbe[a].includes(u)?mbe[a][u]:u,o=u,l.prefix=u):Fbe[a].indexOf(u)>-1?(o=u,l.prefix=mp(u,{family:a})):h?l.iconName=h:u!==xt.replacementClass&&u!==r[Li]&&u!==r[es]&&l.rest.push(u),!s&&l.prefix&&l.iconName){var d="fa"===o?gN(l.iconName):{},f=C3(l.prefix,l.iconName);d.prefix&&(o=null),l.iconName=d.iconName||f||l.iconName,l.prefix=d.prefix||l.prefix,"far"===l.prefix&&!e6.far&&e6.fas&&!xt.autoFetchSvg&&(l.prefix="fas")}return l},{prefix:null,iconName:null,rest:[]});return(n.includes("fa-brands")||n.includes("fab"))&&(c.prefix="fab"),(n.includes("fa-duotone")||n.includes("fad"))&&(c.prefix="fad"),!c.prefix&&a===es&&(e6.fass||xt.autoFetchSvg)&&(c.prefix="fass",c.iconName=C3(c.prefix,c.iconName)||c.iconName),("fa"===c.prefix||"fa"===o)&&(c.prefix=Uc()||"fas"),c}var jbe=function(){function n(){(function nbe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function ibe(n,e,t){e&&BO(n.prototype,e),t&&BO(n,t),Object.defineProperty(n,"prototype",{writable:!1})}(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];var o=s.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=ct(ct({},t.definitions[a]||{}),o[a]),Nx(a,o[a]);var c=bd[Li][a];c&&Nx(c,o[a]),mN()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var s=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(s).map(function(r){var o=s[r],a=o.prefix,c=o.iconName,l=o.icon,u=l[2];t[a]||(t[a]={}),u.length>0&&u.forEach(function(h){"string"==typeof h&&(t[a][h]=l)}),t[a][c]=l}),t}}]),n}(),_N=[],t6={},n6={},$be=Object.keys(n6);function Gx(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),s=2;s<t;s++)i[s-2]=arguments[s];var r=t6[n]||[];return r.forEach(function(o){e=o.apply(null,[e].concat(i))}),e}function w3(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var s=t6[n]||[];s.forEach(function(r){r.apply(null,t)})}function L2(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return n6[n]?n6[n].apply(null,e):void 0}function Wx(n){"fa"===n.prefix&&(n.prefix="fas");var e=n.iconName,t=n.prefix||Uc();if(e)return e=C3(t,e)||e,cN(yN.definitions,t,e)||cN(j1.styles,t,e)}var yN=new jbe,Xbe={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return E2?(w3("beforeI2svg",e),L2("pseudoElements2svg",e),L2("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===xt.autoReplaceSvg&&(xt.autoReplaceSvg=!0),xt.observeMutations=!0,Ibe(function(){Kbe({autoReplaceSvgRoot:t}),w3("watch",e)})}},Zbe={icon:function(e){if(null===e)return null;if("object"===np(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:C3(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],i=mp(e[0]);return{prefix:i,iconName:C3(i,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(xt.cssPrefix,"-"))>-1||e.match(gbe))){var s=gp(e.split(" "),{skipLookups:!0});return{prefix:s.prefix||Uc(),iconName:C3(s.prefix,s.iconName)||s.iconName}}if("string"==typeof e){var r=Uc();return{prefix:r,iconName:C3(r,e)||e}}}},ko={noAuto:function(){xt.autoReplaceSvg=!1,xt.observeMutations=!1,w3("noAuto")},config:xt,dom:Xbe,parse:Zbe,library:yN,findIconDefinition:Wx,toHtml:Sd},Kbe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,i=void 0===t?Di:t;(Object.keys(j1.styles).length>0||xt.autoFetchSvg)&&E2&&xt.autoReplaceSvg&&ko.dom.i2svg({node:i})};function vp(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return Sd(i)})}}),Object.defineProperty(n,"node",{get:function(){if(E2){var i=Di.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function jx(n){var e=n.icons,t=e.main,i=e.mask,s=n.prefix,r=n.iconName,o=n.transform,a=n.symbol,c=n.title,l=n.maskId,u=n.titleId,h=n.extra,d=n.watchable,f=void 0!==d&&d,p=i.found?i:t,m=p.width,g=p.height,v="fak"===s,_=[xt.replacementClass,r?"".concat(xt.cssPrefix,"-").concat(r):""].filter(function(D){return-1===h.classes.indexOf(D)}).filter(function(D){return""!==D||!!D}).concat(h.classes).join(" "),y={children:[],attributes:ct(ct({},h.attributes),{},{"data-prefix":s,"data-icon":r,class:_,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},b=v&&!~h.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};f&&(y.attributes[x3]=""),c&&(y.children.push({tag:"title",attributes:{id:y.attributes["aria-labelledby"]||"title-".concat(u||wd())},children:[c]}),delete y.attributes.title);var x=ct(ct({},y),{},{prefix:s,iconName:r,main:t,mask:i,maskId:l,transform:o,symbol:a,styles:ct(ct({},b),h.styles)}),w=i.found&&t.found?L2("generateAbstractMask",x)||{children:[],attributes:{}}:L2("generateAbstractIcon",x)||{children:[],attributes:{}},C=w.attributes;return x.children=w.children,x.attributes=C,a?function Jbe(n){var t=n.iconName,i=n.children,s=n.attributes,r=n.symbol,o=!0===r?"".concat(n.prefix,"-").concat(xt.cssPrefix,"-").concat(t):r;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ct(ct({},s),{},{id:o}),children:i}]}]}(x):function Qbe(n){var e=n.children,t=n.main,i=n.mask,s=n.attributes,r=n.styles,o=n.transform;if(Hx(o)&&t.found&&!i.found){var l={x:t.width/t.height/2,y:.5};s.style=up(ct(ct({},r),{},{"transform-origin":"".concat(l.x+o.x/16,"em ").concat(l.y+o.y/16,"em")}))}return[{tag:"svg",attributes:s,children:e}]}(x)}function bN(n){var e=n.content,t=n.width,i=n.height,s=n.transform,r=n.title,o=n.extra,a=n.watchable,c=void 0!==a&&a,l=ct(ct(ct({},o.attributes),r?{title:r}:{}),{},{class:o.classes.join(" ")});c&&(l[x3]="");var u=ct({},o.styles);Hx(s)&&(u.transform=function Lbe(n){var e=n.transform,t=n.width,s=n.height,r=void 0===s?16:s,o=n.startCentered,a=void 0!==o&&o,c="";return c+=a&&ZO?"translate(".concat(e.x/16-(void 0===t?16:t)/2,"em, ").concat(e.y/16-r/2,"em) "):a?"translate(calc(-50% + ".concat(e.x/16,"em), calc(-50% + ").concat(e.y/16,"em)) "):"translate(".concat(e.x/16,"em, ").concat(e.y/16,"em) "),(c+="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "))+"rotate(".concat(e.rotate,"deg) ")}({transform:s,startCentered:!0,width:t,height:i}),u["-webkit-transform"]=u.transform);var h=up(u);h.length>0&&(l.style=h);var d=[];return d.push({tag:"span",attributes:l,children:[e]}),r&&d.push({tag:"span",attributes:{class:"sr-only"},children:[r]}),d}function exe(n){var e=n.content,t=n.title,i=n.extra,s=ct(ct(ct({},i.attributes),t?{title:t}:{}),{},{class:i.classes.join(" ")}),r=up(i.styles);r.length>0&&(s.style=r);var o=[];return o.push({tag:"span",attributes:s,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}var $x=j1.styles;function qx(n){var e=n[0],t=n[1],r=Tx(n.slice(4),1)[0];return{found:!0,width:e,height:t,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(xt.cssPrefix,"-").concat("duotone-group")},children:[{tag:"path",attributes:{class:"".concat(xt.cssPrefix,"-").concat("secondary"),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(xt.cssPrefix,"-").concat("primary"),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var txe={found:!1,width:512,height:512};function Yx(n,e){var t=e;return"fa"===e&&null!==xt.styleDefault&&(e=Uc()),new Promise(function(i,s){if(L2("missingIconAbstract"),"fa"===t){var o=gN(n)||{};n=o.iconName||n,e=o.prefix||e}if(n&&e&&$x[e]&&$x[e][n])return i(qx($x[e][n]));(function nxe(n,e){!eN&&!xt.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))})(n,e),i(ct(ct({},txe),{},{icon:xt.showMissingIcons&&n&&L2("missingIconAbstract")||{}}))})}var xN=function(){},Xx=xt.measurePerformance&&sp&&sp.mark&&sp.measure?sp:{mark:xN,measure:xN},Td='FA "6.2.0"',Zx_begin=function(e){return Xx.mark("".concat(Td," ").concat(e," begins")),function(){return function(e){Xx.mark("".concat(Td," ").concat(e," ends")),Xx.measure("".concat(Td," ").concat(e),"".concat(Td," ").concat(e," begins"),"".concat(Td," ").concat(e," ends"))}(e)}},_p=function(){};function CN(n){return"string"==typeof(n.getAttribute?n.getAttribute(x3):null)}function axe(n){return Di.createElementNS("http://www.w3.org/2000/svg",n)}function cxe(n){return Di.createElement(n)}function wN(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.ceFn,i=void 0===t?"svg"===n.tag?axe:cxe:t;if("string"==typeof n)return Di.createTextNode(n);var s=i(n.tag);Object.keys(n.attributes||[]).forEach(function(o){s.setAttribute(o,n.attributes[o])});var r=n.children||[];return r.forEach(function(o){s.appendChild(wN(o,{ceFn:i}))}),s}var yp={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(s){t.parentNode.insertBefore(wN(s),t)}),null===t.getAttribute(x3)&&xt.keepOriginalSource){var i=Di.createComment(function lxe(n){var e=" ".concat(n.outerHTML," ");return"".concat(e,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~Ix(t).indexOf(xt.replacementClass))return yp.replace(e);var s=new RegExp("".concat(xt.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var r=i[0].attributes.class.split(" ").reduce(function(a,c){return c===xt.replacementClass||c.match(s)?a.toSvg.push(c):a.toNode.push(c),a},{toNode:[],toSvg:[]});i[0].attributes.class=r.toSvg.join(" "),0===r.toNode.length?t.removeAttribute("class"):t.setAttribute("class",r.toNode.join(" "))}var o=i.map(function(a){return Sd(a)}).join("\n");t.setAttribute(x3,""),t.innerHTML=o}};function SN(n){n()}function TN(n,e){var t="function"==typeof e?e:_p;if(0===n.length)t();else{var i=SN;"async"===xt.mutateApproach&&(i=Fc.requestAnimationFrame||SN),i(function(){var s=function oxe(){return!0===xt.autoReplaceSvg?yp.replace:yp[xt.autoReplaceSvg]||yp.replace}(),r=Zx_begin("mutate");n.map(s),r(),t()})}}var Kx=!1;function EN(){Kx=!0}function Qx(){Kx=!1}var bp=null;function AN(n){if(XO&&xt.observeMutations){var e=n.treeCallback,t=void 0===e?_p:e,i=n.nodeCallback,s=void 0===i?_p:i,r=n.pseudoElementsCallback,o=void 0===r?_p:r,a=n.observeMutationsRoot,c=void 0===a?Di:a;bp=new XO(function(l){if(!Kx){var u=Uc();J0(l).forEach(function(h){if("childList"===h.type&&h.addedNodes.length>0&&!CN(h.addedNodes[0])&&(xt.searchPseudoElements&&o(h.target),t(h.target)),"attributes"===h.type&&h.target.parentNode&&xt.searchPseudoElements&&o(h.target.parentNode),"attributes"===h.type&&CN(h.target)&&~bbe.indexOf(h.attributeName))if("class"===h.attributeName&&function sxe(n){var e=n.getAttribute?n.getAttribute(zx):null,t=n.getAttribute?n.getAttribute(kx):null;return e&&t}(h.target)){var d=gp(Ix(h.target)),p=d.iconName;h.target.setAttribute(zx,d.prefix||u),p&&h.target.setAttribute(kx,p)}else(function rxe(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(xt.replacementClass)})(h.target)&&s(h.target)})}}),E2&&bp.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function hxe(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,s){var r=s.split(":"),o=r[0],a=r.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),t}function dxe(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=void 0!==n.innerText?n.innerText.trim():"",s=gp(Ix(n));return s.prefix||(s.prefix=Uc()),e&&t&&(s.prefix=e,s.iconName=t),s.iconName&&s.prefix||(s.prefix&&i.length>0&&(s.iconName=function Gbe(n,e){return(hN[n]||{})[e]}(s.prefix,n.innerText)||Bx(s.prefix,Ox(n.innerText))),!s.iconName&&xt.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(s.iconName=n.firstChild.data)),s}function fxe(n){var e=J0(n.attributes).reduce(function(s,r){return"class"!==s.name&&"style"!==s.name&&(s[r.name]=r.value),s},{}),t=n.getAttribute("title"),i=n.getAttribute("data-fa-title-id");return xt.autoA11y&&(t?e["aria-labelledby"]="".concat(xt.replacementClass,"-title-").concat(i||wd()):(e["aria-hidden"]="true",e.focusable="false")),e}function DN(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},t=dxe(n),i=t.iconName,s=t.prefix,r=t.rest,o=fxe(n),a=Gx("parseNodeAttributes",{},n),c=e.styleParser?hxe(n):[];return ct({iconName:i,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:s,transform:Da,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:c,attributes:o}},a)}var mxe=j1.styles;function LN(n){var e="nest"===xt.autoReplaceSvg?DN(n,{styleParser:!1}):DN(n);return~e.extra.classes.indexOf(tN)?L2("generateLayersText",n,e):L2("generateSvgReplacementMutation",n,e)}var Gc=new Set;function zN(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!E2)return Promise.resolve();var t=Di.documentElement.classList,i=function(h){return t.add("".concat(JO,"-").concat(h))},s=function(h){return t.remove("".concat(JO,"-").concat(h))},r=xt.autoFetchSvg?Gc:Rx.map(function(u){return"fa-".concat(u)}).concat(Object.keys(mxe));r.includes("fa")||r.push("fa");var o=[".".concat(tN,":not([").concat(x3,"])")].concat(r.map(function(u){return".".concat(u,":not([").concat(x3,"])")})).join(", ");if(0===o.length)return Promise.resolve();var a=[];try{a=J0(n.querySelectorAll(o))}catch{}if(!(a.length>0))return Promise.resolve();i("pending"),s("complete");var c=Zx_begin("onTree"),l=a.reduce(function(u,h){try{var d=LN(h);d&&u.push(d)}catch(f){eN||"MissingIcon"===f.name&&console.error(f)}return u},[]);return new Promise(function(u,h){Promise.all(l).then(function(d){TN(d,function(){i("active"),i("complete"),s("pending"),"function"==typeof e&&e(),c(),u()})}).catch(function(d){c(),h(d)})})}function gxe(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;LN(n).then(function(t){t&&TN([t],e)})}Rx.map(function(n){Gc.add("fa-".concat(n))}),Object.keys(_d[Li]).map(Gc.add.bind(Gc)),Object.keys(_d[es]).map(Gc.add.bind(Gc)),Gc=gd(Gc);var _xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.transform,s=void 0===i?Da:i,r=t.symbol,o=void 0!==r&&r,a=t.mask,c=void 0===a?null:a,l=t.maskId,u=void 0===l?null:l,h=t.title,d=void 0===h?null:h,f=t.titleId,p=void 0===f?null:f,m=t.classes,g=void 0===m?[]:m,v=t.attributes,_=void 0===v?{}:v,y=t.styles,b=void 0===y?{}:y;if(e){var x=e.prefix,w=e.iconName,L=e.icon;return vp(ct({type:"icon"},e),function(){return w3("beforeDOMElementCreation",{iconDefinition:e,params:t}),xt.autoA11y&&(d?_["aria-labelledby"]="".concat(xt.replacementClass,"-title-").concat(p||wd()):(_["aria-hidden"]="true",_.focusable="false")),jx({icons:{main:qx(L),mask:c?qx(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:x,iconName:w,transform:ct(ct({},Da),s),symbol:o,title:d,maskId:u,titleId:p,extra:{attributes:_,styles:b,classes:g}})})}},yxe={mixout:function(){return{icon:(n=_xe,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(e||{}).icon?e:Wx(e||{}),s=t.mask;return s&&(s=(s||{}).icon?s:Wx(s||{})),n(i,ct(ct({},t),{},{mask:s}))})};var n},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=zN,t.nodeCallback=gxe,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,r=t.callback;return zN(void 0===i?Di:i,void 0===r?function(){}:r)},e.generateSvgReplacementMutation=function(t,i){var s=i.iconName,r=i.title,o=i.titleId,a=i.prefix,c=i.transform,l=i.symbol,u=i.mask,h=i.maskId,d=i.extra;return new Promise(function(f,p){Promise.all([Yx(s,a),u.iconName?Yx(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=Tx(m,2);f([t,jx({icons:{main:g[0],mask:g[1]},prefix:a,iconName:s,transform:c,symbol:l,maskId:h,title:r,titleId:o,extra:d,watchable:!0})])}).catch(p)})},e.generateAbstractIcon=function(t){var l,i=t.children,s=t.attributes,r=t.main,o=t.transform,c=up(t.styles);return c.length>0&&(s.style=c),Hx(o)&&(l=L2("generateAbstractTransformGrouping",{main:r,transform:o,containerWidth:r.width,iconWidth:r.width})),i.push(l||r.icon),{children:i,attributes:s}}}},bxe={mixout:function(){return{layer:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.classes,r=void 0===s?[]:s;return vp({type:"layer"},function(){w3("beforeDOMElementCreation",{assembler:t,params:i});var o=[];return t(function(a){Array.isArray(a)?a.map(function(c){o=o.concat(c.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(xt.cssPrefix,"-layers")].concat(gd(r)).join(" ")},children:o}]})}}}},xxe={mixout:function(){return{counter:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.title,r=void 0===s?null:s,o=i.classes,a=void 0===o?[]:o,c=i.attributes,l=void 0===c?{}:c,u=i.styles,h=void 0===u?{}:u;return vp({type:"counter",content:t},function(){return w3("beforeDOMElementCreation",{content:t,params:i}),exe({content:t.toString(),title:r,extra:{attributes:l,styles:h,classes:["".concat(xt.cssPrefix,"-layers-counter")].concat(gd(a))}})})}}}},Mxe={mixout:function(){return{text:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.transform,r=void 0===s?Da:s,o=i.title,a=void 0===o?null:o,c=i.classes,l=void 0===c?[]:c,u=i.attributes,h=void 0===u?{}:u,d=i.styles,f=void 0===d?{}:d;return vp({type:"text",content:t},function(){return w3("beforeDOMElementCreation",{content:t,params:i}),bN({content:t,transform:ct(ct({},Da),r),title:a,extra:{attributes:h,styles:f,classes:["".concat(xt.cssPrefix,"-layers-text")].concat(gd(l))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var s=i.title,r=i.transform,o=i.extra,a=null,c=null;if(ZO){var l=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();a=u.width/l,c=u.height/l}return xt.autoA11y&&!s&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,bN({content:t.innerHTML,width:a,height:c,transform:r,title:s,extra:o,watchable:!0})])}}},Cxe=new RegExp('"',"ug"),kN=[1105920,1112319];function RN(n,e){var t="".concat("data-fa-pseudo-element-pending").concat(e.replace(":","-"));return new Promise(function(i,s){if(null!==n.getAttribute(t))return i();var o=J0(n.children).filter(function(L){return L.getAttribute(Lx)===e})[0],a=Fc.getComputedStyle(n,e),c=a.getPropertyValue("font-family").match(vbe),l=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!c)return n.removeChild(o),i();if(c&&"none"!==u&&""!==u){var h=a.getPropertyValue("content"),d=~["Sharp"].indexOf(c[2])?es:Li,f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?yd[d][c[2].toLowerCase()]:_be[d][l],p=function wxe(n){var e=n.replace(Cxe,""),t=function Pbe(n,e){var s,t=n.length,i=n.charCodeAt(e);return i>=55296&&i<=56319&&t>e+1&&(s=n.charCodeAt(e+1))>=56320&&s<=57343?1024*(i-55296)+s-56320+65536:i}(e,0),i=t>=kN[0]&&t<=kN[1],s=2===e.length&&e[0]===e[1];return{value:Ox(s?e[0]:e),isSecondary:i||s}}(h),m=p.value,g=p.isSecondary,v=c[0].startsWith("FontAwesome"),_=Bx(f,m),y=_;if(v){var b=function Wbe(n){var e=fN[n],t=Bx("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}(m);b.iconName&&b.prefix&&(_=b.iconName,f=b.prefix)}if(!_||g||o&&o.getAttribute(zx)===f&&o.getAttribute(kx)===y)i();else{n.setAttribute(t,y),o&&n.removeChild(o);var x=function pxe(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Da,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),w=x.extra;w.attributes[Lx]=e,Yx(_,f).then(function(L){var C=jx(ct(ct({},x),{},{icons:{main:L,mask:{prefix:null,iconName:null,rest:[]}},prefix:f,iconName:y,extra:w,watchable:!0})),D=Di.createElement("svg");"::before"===e?n.insertBefore(D,n.firstChild):n.appendChild(D),D.outerHTML=C.map(function(R){return Sd(R)}).join("\n"),n.removeAttribute(t),i()}).catch(s)}}else i()})}function Sxe(n){return Promise.all([RN(n,"::before"),RN(n,"::after")])}function Txe(n){return!(n.parentNode===document.head||~pbe.indexOf(n.tagName.toUpperCase())||n.getAttribute(Lx)||n.parentNode&&"svg"===n.parentNode.tagName)}function IN(n){if(E2)return new Promise(function(e,t){var i=J0(n.querySelectorAll("*")).filter(Txe).map(Sxe),s=Zx_begin("searchPseudoElements");EN(),Promise.all(i).then(function(){s(),Qx(),e()}).catch(function(){s(),Qx(),t()})})}var Exe={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=IN,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node;xt.searchPseudoElements&&IN(void 0===i?Di:i)}}},HN=!1,Axe={mixout:function(){return{dom:{unwatch:function(){EN(),HN=!0}}}},hooks:function(){return{bootstrap:function(){AN(Gx("mutationObserverCallbacks",{}))},noAuto:function(){!function uxe(){!bp||bp.disconnect()}()},watch:function(t){var i=t.observeMutationsRoot;HN?Qx():AN(Gx("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},VN=function(e){return e.toLowerCase().split(" ").reduce(function(i,s){var r=s.toLowerCase().split("-"),o=r[0],a=r.slice(1).join("-");if(o&&"h"===a)return i.flipX=!0,i;if(o&&"v"===a)return i.flipY=!0,i;if(a=parseFloat(a),isNaN(a))return i;switch(o){case"grow":i.size=i.size+a;break;case"shrink":i.size=i.size-a;break;case"left":i.x=i.x-a;break;case"right":i.x=i.x+a;break;case"up":i.y=i.y-a;break;case"down":i.y=i.y+a;break;case"rotate":i.rotate=i.rotate+a}return i},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},Dxe={mixout:function(){return{parse:{transform:function(t){return VN(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var s=i.getAttribute("data-fa-transform");return s&&(t.transform=VN(s)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,s=t.transform,o=t.iconWidth,a={transform:"translate(".concat(t.containerWidth/2," 256)")},c="translate(".concat(32*s.x,", ").concat(32*s.y,") "),l="scale(".concat(s.size/16*(s.flipX?-1:1),", ").concat(s.size/16*(s.flipY?-1:1),") "),u="rotate(".concat(s.rotate," 0 0)"),f={outer:a,inner:{transform:"".concat(c," ").concat(l," ").concat(u)},path:{transform:"translate(".concat(o/2*-1," -256)")}};return{tag:"g",attributes:ct({},f.outer),children:[{tag:"g",attributes:ct({},f.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:ct(ct({},i.icon.attributes),f.path)}]}]}}}},Jx={x:0,y:0,width:"100%",height:"100%"};function PN(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}var zxe={hooks:function(){return{parseNodeAttributes:function(t,i){var s=i.getAttribute("data-fa-mask"),r=s?gp(s.split(" ").map(function(o){return o.trim()})):{prefix:null,iconName:null,rest:[]};return r.prefix||(r.prefix=Uc()),t.mask=r,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var n,i=t.children,s=t.attributes,r=t.main,o=t.mask,a=t.maskId,u=r.icon,d=o.icon,f=function Dbe(n){var e=n.transform,i=n.iconWidth,s={transform:"translate(".concat(n.containerWidth/2," 256)")},r="translate(".concat(32*e.x,", ").concat(32*e.y,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)");return{outer:s,inner:{transform:"".concat(r," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:t.transform,containerWidth:o.width,iconWidth:r.width}),p={tag:"rect",attributes:ct(ct({},Jx),{},{fill:"white"})},m=u.children?{children:u.children.map(PN)}:{},g={tag:"g",attributes:ct({},f.inner),children:[PN(ct({tag:u.tag,attributes:ct(ct({},u.attributes),f.path)},m))]},v={tag:"g",attributes:ct({},f.outer),children:[g]},_="mask-".concat(a||wd()),y="clip-".concat(a||wd()),b={tag:"mask",attributes:ct(ct({},Jx),{},{id:_,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(n=d,"g"===n.tag?n.children:[n])},b]};return i.push(x,{tag:"rect",attributes:ct({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(_,")")},Jx)}),{children:i,attributes:s}}}},kxe={provides:function(e){var t=!1;Fc.matchMedia&&(t=Fc.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],s={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:ct(ct({},s),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=ct(ct({},r),{},{attributeName:"opacity"}),a={tag:"circle",attributes:ct(ct({},s),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:ct(ct({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ct(ct({},o),{},{values:"1;0;1;1;0;1;"})}),i.push(a),i.push({tag:"path",attributes:ct(ct({},s),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:ct(ct({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:ct(ct({},s),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ct(ct({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},Ixe=[kbe,yxe,bxe,xxe,Mxe,Exe,Axe,Dxe,zxe,kxe,{hooks:function(){return{parseNodeAttributes:function(t,i){var s=i.getAttribute("data-fa-symbol");return t.symbol=null!==s&&(""===s||s),t}}}}];!function qbe(n,e){var t=e.mixoutsTo;_N=n,t6={},Object.keys(n6).forEach(function(i){-1===$be.indexOf(i)&&delete n6[i]}),_N.forEach(function(i){var s=i.mixout?i.mixout():{};if(Object.keys(s).forEach(function(o){"function"==typeof s[o]&&(t[o]=s[o]),"object"===np(s[o])&&Object.keys(s[o]).forEach(function(a){t[o]||(t[o]={}),t[o][a]=s[o][a]})}),i.hooks){var r=i.hooks();Object.keys(r).forEach(function(o){t6[o]||(t6[o]=[]),t6[o].push(r[o])})}i.provides&&i.provides(n6)})}(Ixe,{mixoutsTo:ko});var Hxe=ko.parse,Vxe=ko.icon;const Pxe=["*"],Fxe=n=>{const e={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-inverse":n.inverse,"fa-layers-counter":n.counter,"fa-flip-horizontal":"horizontal"===n.flip||"both"===n.flip,"fa-flip-vertical":"vertical"===n.flip||"both"===n.flip,[`fa-${n.size}`]:null!==n.size,[`fa-rotate-${n.rotate}`]:null!==n.rotate,[`fa-pull-${n.pull}`]:null!==n.pull,[`fa-stack-${n.stackItemSize}`]:null!=n.stackItemSize};return Object.keys(e).map(t=>e[t]?t:null).filter(t=>t)};let Gxe=(()=>{class n{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wxe=(()=>{class n{constructor(){this.definitions={}}addIcons(...t){for(const i of t){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(const s of i.icon[2])"string"==typeof s&&(this.definitions[i.prefix][s]=i)}}addIconPacks(...t){for(const i of t){const s=Object.keys(i).map(r=>i[r]);this.addIcons(...s)}}getIconDefinition(t,i){return t in this.definitions&&i in this.definitions[t]?this.definitions[t][i]:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jxe=(()=>{class n{constructor(){this.stackItemSize="1x"}ngOnChanges(t){if("size"in t)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=le({type:n,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[Bi]}),n})(),$xe=(()=>{class n{constructor(t,i){this.renderer=t,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(t){"size"in t&&(null!=t.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${t.size.currentValue}`),null!=t.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${t.size.previousValue}`))}}return n.\u0275fac=function(t){return new(t||n)(T(To),T(je))},n.\u0275cmp=dt({type:n,selectors:[["fa-stack"]],inputs:{size:"size"},features:[Bi],ngContentSelectors:Pxe,decls:1,vars:0,template:function(t,i){1&t&&(Ki(),Vn(0))},encapsulation:2}),n})(),eM=(()=>{class n{constructor(t,i,s,r,o){this.sanitizer=t,this.config=i,this.iconLibrary=s,this.stackItem=r,this.classes=[],null!=o&&null==r&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(t){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let i=null;if(i=this.icon??this.config.fallbackIcon,t){const s=this.findIconDefinition(i);if(null!=s){const r=this.buildParams();this.renderIcon(s,r)}}}render(){this.ngOnChanges({})}findIconDefinition(t){const i=((n,e)=>(n=>void 0!==n.prefix&&void 0!==n.iconName)(n)?n:Array.isArray(n)&&2===n.length?{prefix:n[0],iconName:n[1]}:"string"==typeof n?{prefix:e,iconName:n}:void 0)(t,this.config.defaultPrefix);return"icon"in i?i:this.iconLibrary.getIconDefinition(i.prefix,i.iconName)??((n=>{throw new Error(`Could not find icon with iconName=${n.iconName} and prefix=${n.prefix} in the icon library.`)})(i),null)}buildParams(){const t={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},i="string"==typeof this.transform?Hxe.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...Fxe(t),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(t,i){const s=Vxe(t,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(s.html.join("\n"))}}return n.\u0275fac=function(t){return new(t||n)(T(V0),T(Gxe),T(Wxe),T(jxe,8),T($xe,8))},n.\u0275cmp=dt({type:n,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(t,i){2&t&&(Kl("innerHTML",i.renderedIconHTML,Mc),Mn("title",i.title))},inputs:{icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[Bi],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),qxe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({}),n})();function ON(...n){const e=$A(n),{args:t,keys:i}=CV(n),s=new Tn(r=>{const{length:o}=t;if(!o)return void r.complete();const a=new Array(o);let c=o,l=o;for(let u=0;u<o;u++){let h=!1;Rr(t[u]).subscribe(mi(r,d=>{h||(h=!0,l--),a[u]=d},()=>c--,void 0,()=>{(!c||!h)&&(l||r.next(i?wV(i,a):a),r.complete())}))}});return e?s.pipe(fb(e)):s}class NN{}class FN{}class z2{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const s=t.slice(0,i),r=s.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(s,r),this.headers.has(r)?this.headers.get(r).push(o):this.headers.set(r,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const s=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(s,i),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof z2?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new z2;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof z2?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...i),this.headers.set(t,s);break;case"d":const r=e.value;if(r){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===r.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Xxe{encodeKey(e){return BN(e)}encodeValue(e){return BN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Kxe=/%(\d[a-f0-9])/gi,Qxe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function BN(n){return encodeURIComponent(n).replace(Kxe,(e,t)=>Qxe[t]??e)}function xp(n){return`${n}`}class Wc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Xxe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Zxe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const r=s.indexOf("="),[o,a]=-1==r?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,r)),e.decodeValue(s.slice(r+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],s=Array.isArray(i)?i.map(xp):[xp(i)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const s=e[i];Array.isArray(s)?s.forEach(r=>{t.push({param:i,value:r,op:"a"})}):t.push({param:i,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Wc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(xp(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const s=i.indexOf(xp(e.value));-1!==s&&i.splice(s,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Jxe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function UN(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function GN(n){return typeof Blob<"u"&&n instanceof Blob}function WN(n){return typeof FormData<"u"&&n instanceof FormData}class Ed{constructor(e,t,i,s){let r;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function eMe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==i?i:null,r=s):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params)),this.headers||(this.headers=new z2),this.context||(this.context=new Jxe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Wc,this.urlWithParams=t}serializeBody(){return null===this.body?null:UN(this.body)||GN(this.body)||WN(this.body)||function tMe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Wc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||WN(this.body)?null:GN(this.body)?this.body.type||null:UN(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Wc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,r=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,d)=>h.set(d,e.setHeaders[d]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,d)=>h.set(d,e.setParams[d]),l)),new Ed(t,i,r,{params:l,headers:c,context:u,reportProgress:a,responseType:s,withCredentials:o})}}var Ls=(()=>((Ls=Ls||{})[Ls.Sent=0]="Sent",Ls[Ls.UploadProgress=1]="UploadProgress",Ls[Ls.ResponseHeader=2]="ResponseHeader",Ls[Ls.DownloadProgress=3]="DownloadProgress",Ls[Ls.Response=4]="Response",Ls[Ls.User=5]="User",Ls))();class tM{constructor(e,t=200,i="OK"){this.headers=e.headers||new z2,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class nM extends tM{constructor(e={}){super(e),this.type=Ls.ResponseHeader}clone(e={}){return new nM({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Mp extends tM{constructor(e={}){super(e),this.type=Ls.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Mp({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class jN extends tM{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function iM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let S3=(()=>{class n{constructor(t){this.handler=t}request(t,i,s={}){let r;if(t instanceof Ed)r=t;else{let c,l;c=s.headers instanceof z2?s.headers:new z2(s.headers),s.params&&(l=s.params instanceof Wc?s.params:new Wc({fromObject:s.params})),r=new Ed(t,i,void 0!==s.body?s.body:null,{headers:c,context:s.context,params:l,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const o=pt(r).pipe(Vc(c=>this.handler.handle(c)));if(t instanceof Ed||"events"===s.observe)return o;const a=o.pipe(Pn(c=>c instanceof Mp));switch(s.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return a.pipe(Pt(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Pt(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Pt(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(Pt(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Wc).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,s={}){return this.request("PATCH",t,iM(s,i))}post(t,i,s={}){return this.request("POST",t,iM(s,i))}put(t,i,s={}){return this.request("PUT",t,iM(s,i))}}return n.\u0275fac=function(t){return new(t||n)(J(NN))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();class $N{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const qN=new fe("HTTP_INTERCEPTORS");let nMe=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();const iMe=/^\)\]\}',?\n/;let YN=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Tn(i=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((f,p)=>s.setRequestHeader(f,p.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&s.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();s.responseType="json"!==f?f:"text"}const r=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const f=s.statusText||"OK",p=new z2(s.getAllResponseHeaders()),m=function sMe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return o=new nM({headers:p,status:s.status,statusText:f,url:m}),o},c=()=>{let{headers:f,status:p,statusText:m,url:g}=a(),v=null;204!==p&&(v=typeof s.response>"u"?s.responseText:s.response),0===p&&(p=v?200:0);let _=p>=200&&p<300;if("json"===t.responseType&&"string"==typeof v){const y=v;v=v.replace(iMe,"");try{v=""!==v?JSON.parse(v):null}catch(b){v=y,_&&(_=!1,v={error:b,text:v})}}_?(i.next(new Mp({body:v,headers:f,status:p,statusText:m,url:g||void 0})),i.complete()):i.error(new jN({error:v,headers:f,status:p,statusText:m,url:g||void 0}))},l=f=>{const{url:p}=a(),m=new jN({error:f,status:s.status||0,statusText:s.statusText||"Unknown Error",url:p||void 0});i.error(m)};let u=!1;const h=f=>{u||(i.next(a()),u=!0);let p={type:Ls.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===t.responseType&&!!s.responseText&&(p.partialText=s.responseText),i.next(p)},d=f=>{let p={type:Ls.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),i.next(p)};return s.addEventListener("load",c),s.addEventListener("error",l),s.addEventListener("timeout",l),s.addEventListener("abort",l),t.reportProgress&&(s.addEventListener("progress",h),null!==r&&s.upload&&s.upload.addEventListener("progress",d)),s.send(r),i.next({type:Ls.Sent}),()=>{s.removeEventListener("error",l),s.removeEventListener("abort",l),s.removeEventListener("load",c),s.removeEventListener("timeout",l),t.reportProgress&&(s.removeEventListener("progress",h),null!==r&&s.upload&&s.upload.removeEventListener("progress",d)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(J(sH))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();const sM=new fe("XSRF_COOKIE_NAME"),rM=new fe("XSRF_HEADER_NAME");class XN{}let rMe=(()=>{class n{constructor(t,i,s){this.doc=t,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=qI(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(J(Ct),J(Ao),J(sM))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})(),oM=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return i.handle(t);const r=this.tokenService.getToken();return null!==r&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,r)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(J(XN),J(rM))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})(),oMe=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(qN,[]);this.chain=i.reduceRight((s,r)=>new $N(s,r),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(J(FN),J(ws))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})(),aMe=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:oM,useClass:nMe}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:sM,useValue:t.cookieName}:[],t.headerName?{provide:rM,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({providers:[oM,{provide:qN,useExisting:oM,multi:!0},{provide:XN,useClass:rMe},{provide:sM,useValue:"XSRF-TOKEN"},{provide:rM,useValue:"X-XSRF-TOKEN"}]}),n})(),cMe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({providers:[S3,{provide:NN,useClass:oMe},YN,{provide:FN,useExisting:YN}],imports:[aMe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const lMe=["*"];let Cp;function Ad(n){return function uMe(){if(void 0===Cp&&(Cp=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(Cp=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Cp}()?.createHTML(n)||n}function ZN(n){return Error(`Unable to find icon with the name "${n}"`)}function KN(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function QN(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class T3{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let Dd=(()=>{class n{constructor(t,i,s,r){this._httpClient=t,this._sanitizer=i,this._errorHandler=r,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=s}addSvgIcon(t,i,s){return this.addSvgIconInNamespace("",t,i,s)}addSvgIconLiteral(t,i,s){return this.addSvgIconLiteralInNamespace("",t,i,s)}addSvgIconInNamespace(t,i,s,r){return this._addSvgIconConfig(t,i,new T3(s,null,r))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,s,r){const o=this._sanitizer.sanitize(Hn.HTML,s);if(!o)throw QN(s);const a=Ad(o);return this._addSvgIconConfig(t,i,new T3("",a,r))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,s){return this._addSvgIconSetConfig(t,new T3(i,null,s))}addSvgIconSetLiteralInNamespace(t,i,s){const r=this._sanitizer.sanitize(Hn.HTML,i);if(!r)throw QN(i);const o=Ad(r);return this._addSvgIconSetConfig(t,new T3("",o,s))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(Hn.RESOURCE_URL,t);if(!i)throw KN(t);const s=this._cachedIconsByUrl.get(i);return s?pt(wp(s)):this._loadSvgIconFromConfig(new T3(t,null)).pipe(Ei(r=>this._cachedIconsByUrl.set(i,r)),Pt(r=>wp(r)))}getNamedSvgIcon(t,i=""){const s=JN(i,t);let r=this._svgIconConfigs.get(s);if(r)return this._getSvgFromConfig(r);if(r=this._getIconConfigFromResolvers(i,t),r)return this._svgIconConfigs.set(s,r),this._getSvgFromConfig(r);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):O0(ZN(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?pt(wp(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Pt(i=>wp(i)))}_getSvgFromIconSetConfigs(t,i){const s=this._extractIconWithNameFromAnySet(t,i);return s?pt(s):ON(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Ta(a=>{const l=`Loading icon set URL: ${this._sanitizer.sanitize(Hn.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),pt(null)})))).pipe(Pt(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw ZN(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let s=i.length-1;s>=0;s--){const r=i[s];if(r.svgText&&r.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(r),a=this._extractSvgIconFromSet(o,t,r.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Ei(i=>t.svgText=i),Pt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?pt(null):this._fetchIcon(t).pipe(Ei(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,s){const r=t.querySelector(`[id="${i}"]`);if(!r)return null;const o=r.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,s);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),s);const a=this._svgElementFromString(Ad("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,s)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const s=i.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(t){const i=this._svgElementFromString(Ad("<svg></svg>")),s=t.attributes;for(let r=0;r<s.length;r++){const{name:o,value:a}=s[r];"id"!==o&&i.setAttribute(o,a)}for(let r=0;r<t.childNodes.length;r++)t.childNodes[r].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[r].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:s}=t,r=s?.withCredentials??!1;if(!this._httpClient)throw function hMe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(Hn.RESOURCE_URL,i);if(!o)throw KN(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const c=this._httpClient.get(o,{responseType:"text",withCredentials:r}).pipe(Pt(l=>Ad(l)),w7(()=>this._inProgressUrlFetches.delete(o)),ZA());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(t,i,s){return this._svgIconConfigs.set(JN(t,i),s),this}_addSvgIconSetConfig(t,i){const s=this._iconSetConfigs.get(t);return s?s.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let s=0;s<this._resolvers.length;s++){const r=this._resolvers[s](i,t);if(r)return fMe(r)?new T3(r.url,null,r.options):new T3(r,null)}}}return n.\u0275fac=function(t){return new(t||n)(J(S3,8),J(V0),J(Ct,8),J(c2))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function wp(n){return n.cloneNode(!0)}function JN(n,e){return n+":"+e}function fMe(n){return!(!n.url||!n.options)}const pMe=v3(class{constructor(n){this._elementRef=n}}),mMe=new fe("MAT_ICON_DEFAULT_OPTIONS"),gMe=new fe("mat-icon-location",{providedIn:"root",factory:function vMe(){const n=Dn(Ct),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),eF=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],_Me=eF.map(n=>`[${n}]`).join(", "),yMe=/^url\(['"]?#(.*?)['"]?\)$/;let Ld=(()=>{class n extends pMe{constructor(t,i,s,r,o,a){super(t),this._iconRegistry=i,this._location=r,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=fi.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),s||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=qt(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const s=t.childNodes[i];(1!==s.nodeType||"svg"===s.nodeName.toLowerCase())&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>t.classList.remove(s)),i.forEach(s=>t.classList.add(s)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((s,r)=>{s.forEach(o=>{r.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(_Me),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let r=0;r<i.length;r++)eF.forEach(o=>{const a=i[r],c=a.getAttribute(o),l=c?c.match(yMe):null;if(l){let u=s.get(a);u||(u=[],s.set(a,u)),u.push({name:o,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,s]=this._splitIconName(t);i&&(this._svgNamespace=i),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,i).pipe(cr(1)).subscribe(r=>this._setSvgElement(r),r=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${s}! ${r.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(Dd),e1("aria-hidden"),T(gMe),T(c2),T(mMe,8))},n.\u0275cmp=dt({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(Mn("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),Et("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[pe],ngContentSelectors:lMe,decls:1,vars:0,template:function(t,i){1&t&&(Ki(),Vn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),tF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[wt,wt]}),n})();function aM(n){return n&&"function"==typeof n.connect&&!(n instanceof Lb)}class nF{applyChanges(e,t,i,s,r){e.forEachOperation((o,a,c)=>{let l,u;if(null==o.previousIndex){const h=i(o,a,c);l=t.createEmbeddedView(h.templateRef,h.context,h.index),u=1}else null==c?(t.remove(a),u=3):(l=t.get(a),t.move(l,c),u=2);r&&r({context:l?.context,operation:u,record:o})})}detach(){}}class cM{constructor(e=!1,t,i=!0,s){this._multiple=e,this._emitChanges=i,this.compareWith=s,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Tt,t&&t.length&&(e?t.forEach(r=>this._markSelected(r)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(i=>this._markSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(i=>this._unmarkSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,i=new Set(e);e.forEach(r=>this._markSelected(r)),t.filter(r=>!i.has(r)).forEach(r=>this._unmarkSelected(r));const s=this._hasQueuedChanges();return this._emitChangeEvent(),s}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,e))return!0;return!1}return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}const zd=new fe("_ViewRepeater");let sF=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(T(To),T(je))},n.\u0275dir=le({type:n}),n})(),E3=(()=>{class n extends sF{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275dir=le({type:n,features:[pe]}),n})();const yr=new fe("NgValueAccessor"),MMe={provide:yr,useExisting:gn(()=>lM),multi:!0},wMe=new fe("CompositionEventMode");let lM=(()=>{class n extends sF{constructor(t,i,s){super(t,i),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function CMe(){const n=wa()?wa().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(T(To),T(je),T(wMe,8))},n.\u0275dir=le({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&We("input",function(r){return i._handleInput(r.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(r){return i._compositionEnd(r.target.value)})},features:[At([MMe]),pe]}),n})();const nr=new fe("NgValidators"),$c=new fe("NgAsyncValidators");function mF(n){return null!=n}function gF(n){return xh(n)?ms(n):n}function vF(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function _F(n,e){return e.map(t=>t(n))}function yF(n){return n.map(e=>function EMe(n){return!n.validate}(e)?e:t=>e.validate(t))}function uM(n){return null!=n?function bF(n){if(!n)return null;const e=n.filter(mF);return 0==e.length?null:function(t){return vF(_F(t,e))}}(yF(n)):null}function hM(n){return null!=n?function xF(n){if(!n)return null;const e=n.filter(mF);return 0==e.length?null:function(t){return ON(_F(t,e).map(gF)).pipe(Pt(vF))}}(yF(n)):null}function MF(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function dM(n){return n?Array.isArray(n)?n:[n]:[]}function Tp(n,e){return Array.isArray(n)?n.includes(e):n===e}function SF(n,e){const t=dM(e);return dM(n).forEach(s=>{Tp(t,s)||t.push(s)}),t}function TF(n,e){return dM(e).filter(t=>!Tp(n,t))}class EF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=uM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ur extends EF{get formDirective(){return null}get path(){return null}}class qc extends EF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Ep=(()=>{class n extends class AF{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(T(qc,2))},n.\u0275dir=le({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Et("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[pe]}),n})();const kd="VALID",Dp="INVALID",s6="PENDING",Rd="DISABLED";function LF(n){return Array.isArray(n)?uM(n):n||null}function zF(n){return Array.isArray(n)?hM(n):n||null}function Lp(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Id(n,e){(function yM(n,e){const t=function CF(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(MF(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function wF(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(MF(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const s=()=>n.updateValueAndValidity();Rp(e._rawValidators,s),Rp(e._rawAsyncValidators,s)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function PMe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&HF(n,e)})}(n,e),function NMe(n,e){const t=(i,s)=>{e.valueAccessor.writeValue(i),s&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function OMe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&HF(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function VMe(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Rp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function HF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function NF(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function FF(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const qMe={provide:qc,useExisting:gn(()=>Vd)},WF=(()=>Promise.resolve())();let Vd=(()=>{class n extends qc{constructor(t,i,s,r,o){super(),this._changeDetectorRef=o,this.control=new class extends class IF{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=LF(this._rawValidators),this._composedAsyncValidatorFn=zF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===kd}get invalid(){return this.status===Dp}get pending(){return this.status==s6}get disabled(){return this.status===Rd}get enabled(){return this.status!==Rd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=LF(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=zF(e)}addValidators(e){this.setValidators(SF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(SF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(TF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(TF(e,this._rawAsyncValidators))}hasValidator(e){return Tp(this._rawValidators,e)}hasAsyncValidator(e){return Tp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=s6,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Rd,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=kd,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kd||this.status===s6)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rd:kd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=s6,this._hasOwnPendingAsyncValidator=!0;const t=gF(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,s)=>i&&i._find(s),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new $t,this.statusChanges=new $t}_calculateStatus(){return this._allControlsDisabled()?Rd:this.errors?Dp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(s6)?s6:this._anyControlsHaveStatus(Dp)?Dp:kd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Lp(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,i){super(function gM(n){return(Lp(n)?n.validators:n)||null}(t),function vM(n,e){return(Lp(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Lp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=FF(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){NF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){NF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){FF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new $t,this._parent=t,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=function xM(n,e){if(!e)return null;let t,i,s;return Array.isArray(e),e.forEach(r=>{r.constructor===lM?t=r:function UMe(n){return Object.getPrototypeOf(n.constructor)===E3}(r)?i=r:s=r}),s||i||t||null}(0,r)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function bM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Id(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){WF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,s=0!==i&&p2(i);WF.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function zp(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(T(Ur,9),T(nr,10),T($c,10),T(yr,10),T(Ts,8))},n.\u0275dir=le({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[At([qMe]),pe,Bi]}),n})(),$F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({}),n})(),_Ce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[$F]}),n})(),yCe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[_Ce]}),n})(),xCe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[wt,wt]}),n})();const lB=["*"],MCe=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],CCe=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],ACe=ud(M2(class{})),DCe=M2(class{}),hB=new fe("MatList"),LCe=new fe("MatNavList");let dB=(()=>{class n extends ACe{constructor(t){super(),this._elementRef=t,this._stateChanges=new Tt,"action-list"===this._getListType()&&(t.nativeElement.classList.add("mat-action-list"),t.nativeElement.setAttribute("role","group"))}_getListType(){const t=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===t?"list":"mat-action-list"===t?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(t){return new(t||n)(T(je))},n.\u0275cmp=dt({type:n,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[At([{provide:hB,useExisting:n}]),pe,Bi],ngContentSelectors:lB,decls:1,vars:0,template:function(t,i){1&t&&(Ki(),Vn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),n})(),fB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=le({type:n,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),n})(),pB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=le({type:n,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),n})(),mB=(()=>{class n extends DCe{constructor(t,i,s,r){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new Tt,this._disabled=!1,this._isInteractiveList=!!(s||r&&"action-list"===r._getListType()),this._list=s||r;const o=this._getHostElement();"button"===o.nodeName.toLowerCase()&&!o.hasAttribute("type")&&o.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(Bn(this._destroyed)).subscribe(()=>{i.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=qt(t)}ngAfterContentInit(){!function rO(n,e,t="mat"){n.changes.pipe(y2(n)).subscribe(({length:i})=>{hd(e,`${t}-2-line`,!1),hd(e,`${t}-3-line`,!1),hd(e,`${t}-multi-line`,!1),2===i||3===i?hd(e,`${t}-${i}-line`,!0):i>3&&hd(e,`${t}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(Ts),T(LCe,8),T(hB,8))},n.\u0275cmp=dt({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,i,s){if(1&t&&(Ti(s,fB,5),Ti(s,pB,5),Ti(s,sO,5)),2&t){let r;Ot(r=Nt())&&(i._avatar=r.first),Ot(r=Nt())&&(i._icon=r.first),Ot(r=Nt())&&(i._lines=r)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:4,hostBindings:function(t,i){2&t&&Et("mat-list-item-disabled",i.disabled)("mat-list-item-with-avatar",i._avatar||i._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[pe],ngContentSelectors:CCe,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,i){1&t&&(Ki(MCe),M(0,"span",0),te(1,"span",1),Vn(2),M(3,"span",2),Vn(4,1),S(),Vn(5,2),S()),2&t&&(H(1),Z("matRippleTrigger",i._getHostElement())("matRippleDisabled",i._isRippleDisabled()))},dependencies:[C2],encapsulation:2,changeDetection:0}),n})(),VCe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[X7,G1,wt,fx,io,X7,wt,fx,xCe]}),n})();class XCe{constructor(e,t,i=!0){this.key=e,this.value=t,this.key=i?e.replace(/['"]/g,"").trim():e.trim(),this.value=i?t.replace(/['"]/g,"").trim():t.trim(),this.value=this.value.replace(/;/,"")}}function vB(n){let e=typeof n;return"object"===e?n.constructor===Array?"array":n.constructor===Set?"set":"object":e}function yB(n){const[e,...t]=n.split(":");return new XCe(e,t.join(":"))}function bB(n,e){return e.key&&(n[e.key]=e.value),n}let QCe=(()=>{class n extends Gi{constructor(t,i,s,r,o,a,c,l,u){super(t,null,i,s),this.sanitizer=r,this.ngStyleInstance=c,this.DIRECTIVE_KEY="ngStyle",this.ngStyleInstance||(this.ngStyleInstance=new s3(t,o,a)),this.init();const h=this.nativeElement.getAttribute("style")??"";this.fallbackStyles=this.buildStyleMap(h),this.isServer=l&&H0(u)}updateWithValue(t){const i=this.buildStyleMap(t);this.ngStyleInstance.ngStyle={...this.fallbackStyles,...i},this.isServer&&this.applyStyleToElement(i),this.ngStyleInstance.ngDoCheck()}clearStyles(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}buildStyleMap(t){const i=s=>this.sanitizer.sanitize(Hn.STYLE,s)??"";if(t)switch(vB(t)){case"string":return xB(function ZCe(n,e=";"){return String(n).trim().split(e).map(t=>t.trim()).filter(t=>""!==t)}(t),i);case"array":return xB(t,i);default:return function _B(n,e){let t=[];return"set"===vB(n)?n.forEach(i=>t.push(i)):Object.keys(n).forEach(i=>{t.push(`${i}:${n[i]}`)}),function KCe(n,e){return n.map(yB).filter(i=>!!i).map(i=>(e&&(i.value=e(i.value)),i)).reduce(bB,{})}(t,e)}(t,i)}return{}}ngDoCheck(){this.ngStyleInstance.ngDoCheck()}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(Ai),T(Ri),T(V0),T(t3),T(To),T(s3,10),T(X0),T(Ao))},n.\u0275dir=le({type:n,features:[pe]}),n})();const JCe=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"];let Vp=(()=>{class n extends QCe{constructor(){super(...arguments),this.inputs=JCe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[pe]}),n})();function xB(n,e){return n.map(yB).filter(i=>!!i).map(i=>(e&&(i.value=e(i.value)),i)).reduce(bB,{})}let MB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[xx]}),n})();function ewe(n,e){1&n&&(M(0,"mat-icon"),E(1,"close"),S())}function twe(n,e){1&n&&(M(0,"mat-icon"),E(1,"menu"),S())}function nwe(n,e){1&n&&(M(0,"span"),E(1,"Close"),S())}function iwe(n,e){if(1&n&&(M(0,"span"),E(1),S()),2&n){const t=Ge();H(1),Ch(t.title)}}function swe(n,e){1&n&&(M(0,"mat-icon"),E(1,"light_mode"),S())}function rwe(n,e){1&n&&(M(0,"mat-icon"),E(1,"dark_mode"),S())}const owe=function(n){return{transform:n}};let awe=(()=>{class n{constructor(t){this.appService=t,this.mini=!0,this.collapsed=!0,this.version="2022.1.0",this.title=this.appService.title}open(){this.mini&&(this.collapsed=!1),this.mini=!this.mini}click(){this.collapsed=!0}ngOnInit(){}get darkMode(){return this.appService.darkMode}set darkMode(t){this.appService.setDarkMode(t,!0)}}return n.\u0275fac=function(t){return new(t||n)(T(bi))},n.\u0275cmp=dt({type:n,selectors:[["app-sidemenu"]],hostVars:4,hostBindings:function(t,i){2&t&&Et("mini",i.mini)("collapsed",i.collapsed)},decls:72,vars:19,consts:[[1,"side"],["fxLayout","column","fxLayoutAlign","start start","fxFlex","1 1",1,"menu"],["mat-list-item","",3,"click"],[4,"ngIf"],["mat-list-item","",1,"title"],[2,"opacity","0","transition","0"],["mat-list-item","","routerLink","/house","routerLinkActive","active",3,"disabled","click"],["house","routerLinkActive"],[2,"font-family","Material Icons Outlined"],["mat-list-item","","routerLink","/stairs","routerLinkActive","active",3,"disabled","click"],["stairs","routerLinkActive"],["mat-list-item","","routerLink","/construction","routerLinkActive","active",3,"disabled","click"],["construction","routerLinkActive"],["mat-list-item","","routerLink","/wired","routerLinkActive","active",3,"disabled","click"],["wired","routerLinkActive"],["mat-list-item","","routerLink","/costs","routerLinkActive","active",3,"disabled","click"],["costs","routerLinkActive"],["mat-list-item","","routerLink","/installations","routerLinkActive","active",3,"disabled","click"],["installations","routerLinkActive"],["mat-list-item","","routerLink","/about","routerLinkActive","active",3,"disabled","click"],["about","routerLinkActive"],["fxFlex","1 1"],["mat-list-item","","color","accent",3,"click"],["fxLayoutAlign","start center","fxLayoutGap","16px"],[1,"version"],["mat-list-item","",2,"opacity","0.7",3,"click"],[3,"ngStyle"]],template:function(t,i){if(1&t&&(M(0,"div",0)(1,"mat-action-list",1)(2,"button",2),We("click",function(){return i.open()}),Ve(3,ewe,2,0,"mat-icon",3),Ve(4,twe,2,0,"mat-icon",3),Ve(5,nwe,2,0,"span",3),Ve(6,iwe,2,1,"span",3),S(),M(7,"button",4)(8,"mat-icon",5),E(9,"gite"),S(),M(10,"span"),E(11),S()(),M(12,"button",6,7),We("click",function(){return i.click()}),M(14,"mat-icon",8),E(15,"home"),S(),M(16,"span"),E(17,"The house"),S()(),M(18,"button",9,10),We("click",function(){return i.click()}),M(20,"mat-icon",8),E(21,"stairs"),S(),M(22,"span"),E(23,"Stairs"),S()(),M(24,"button",11,12),We("click",function(){return i.click()}),M(26,"mat-icon"),E(27,"handyman"),S(),M(28,"span"),E(29,"Construction"),S()(),M(30,"button",13,14),We("click",function(){return i.click()}),M(32,"mat-icon"),E(33,"bolt"),S(),M(34,"span"),E(35,"Wired"),S()(),M(36,"button",15,16),We("click",function(){return i.click()}),M(38,"mat-icon",8),E(39,"savings"),S(),M(40,"span"),E(41,"Costs"),S()(),M(42,"button",17,18),We("click",function(){return i.click()}),M(44,"mat-icon"),E(45,"solar_power"),S(),M(46,"span"),E(47,"Installations"),S()(),M(48,"button",19,20),We("click",function(){return i.click()}),M(50,"mat-icon"),E(51,"people_outline"),S(),M(52,"span"),E(53,"About us"),S()(),te(54,"div",21),M(55,"button",22),We("click",function(){return i.darkMode=!i.darkMode}),M(56,"mat-icon",5),E(57,"dark_mode"),S(),M(58,"span",23),Ve(59,swe,2,0,"mat-icon",3),Ve(60,rwe,2,0,"mat-icon",3),M(61,"div"),E(62),S()()(),M(63,"div",24),E(64),te(65,"span"),E(66," Version"),S(),M(67,"button",25),We("click",function(){return i.collapsed=!i.collapsed}),M(68,"mat-icon",26),E(69,"double_arrow"),S(),M(70,"span"),E(71,"Collapse"),S()()()()),2&t){const s=Si(13),r=Si(19),o=Si(25),a=Si(31),c=Si(37),l=Si(43),u=Si(49);H(3),Z("ngIf",!i.mini),H(1),Z("ngIf",i.mini),H(1),Z("ngIf",!i.mini),H(1),Z("ngIf",i.mini),H(5),Ch(i.title),H(1),Z("disabled",s.isActive),H(6),Z("disabled",r.isActive),H(6),Z("disabled",o.isActive),H(6),Z("disabled",a.isActive),H(6),Z("disabled",c.isActive),H(6),Z("disabled",l.isActive),H(6),Z("disabled",u.isActive),H(11),Z("ngIf",i.darkMode),H(1),Z("ngIf",!i.darkMode),H(2),mt("",i.darkMode?"Light":"Dark"," mode"),H(2),mt("",i.version," "),H(4),Z("ngStyle",d2(17,owe,"rotate("+(i.collapsed?0:-180)+"deg) scale(0.7)"))}},dependencies:[Lo,s3,Ld,dB,mB,y3,K0,b3,tp,Vp,ad,TP],styles:[".side[_ngcontent-%COMP%]{top:0;position:fixed;display:flex;flex-direction:column;max-width:200px;overflow:hidden;transition:.6s;height:100vh;max-height:100vh;border-right:1px solid var(--color-30);border-bottom:1px solid var(--color-30)}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{height:100vh;padding:0}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{min-height:56px;white-space:nowrap;opacity:1;transition:.4s}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:24px;padding-right:24px}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transition:.4s;overflow:initial}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:initial;pointer-events:none;opacity:.7}[_nghost-%COMP%]{display:flex;flex-direction:row}.collapsed[_nghost-%COMP%] > .side[_ngcontent-%COMP%]{max-width:50px}.collapsed[_nghost-%COMP%] > .side[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{opacity:.5}.collapsed[_nghost-%COMP%] > .side[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:hover{opacity:1}.mini[_nghost-%COMP%] > .side[_ngcontent-%COMP%]{max-height:50px}.version[_ngcontent-%COMP%]{padding:0 8px 8px;color:var(--color-30);white-space:nowrap}.version[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:20px;display:inline-block}"]}),n})(),cwe=(()=>{class n{constructor(t){this.appService=t,this.year=(new Date).getFullYear(),this.discord=this.appService.discord,this.github=this.appService.github,this.faDiscord=y7,this.faGithub=Eb}ngOnInit(){}ngAfterViewInit(){}}return n.\u0275fac=function(t){return new(t||n)(T(bi))},n.\u0275cmp=dt({type:n,selectors:[["app-root"]],decls:26,vars:5,consts:[[1,"example-container"],["mode","side","opened",""],["fxLayout","column","fxLayoutAlign","center center"],[2,"font-size","1.3em"],["target","_blank",1,"larger-link",2,"background","var(--primary-color)",3,"href"],[3,"icon"],["target","_blank",1,"larger-link",3,"href"],["target","_blank","href","GeoDev.nl",1,"larger-link"]],template:function(t,i){1&t&&(M(0,"mat-sidenav-container",0)(1,"mat-sidenav",1),te(2,"app-sidemenu"),S(),M(3,"mat-sidenav-content")(4,"main"),te(5,"router-outlet"),S(),M(6,"footer")(7,"mat-toolbar",2)(8,"div",3),E(9,"Join us on our "),M(10,"a",4),te(11,"fa-icon",5),E(12," Discord "),S(),E(13," channel "),S(),M(14,"div"),E(15," Everything is free and open source. See "),M(16,"a",6),te(17,"fa-icon",5),E(18," GitHub "),S()(),M(19,"div"),E(20),te(21,"br"),S(),M(22,"div"),E(23," Build by "),M(24,"a",7),E(25,"GeoDev"),S()()()()()()),2&t&&(H(10),_a("href",i.discord,Cc),H(1),Z("icon",i.faDiscord),H(5),_a("href",i.github,Cc),H(1),Z("icon",i.faGithub),H(3),mt(" PassiveOpen.com 2019 - ",i.year,""))},dependencies:[m_e,vO,_O,yx,y3,b3,eM,I7,awe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}main[_ngcontent-%COMP%]{min-height:calc(100vh - 56px)}footer[_ngcontent-%COMP%]{z-index:1000;position:relative}footer[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{padding:26px 0 80px;font-size:.8rem;opacity:.8;font-weight:400;height:initial}.mat-drawer-content[_ngcontent-%COMP%]{overflow-y:hidden}"]}),n})();function CB(n){return new Se(3e3,!1)}function Gwe(){return typeof window<"u"&&typeof window.document<"u"}function LM(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Yc(n){switch(n.length){case 0:return new dd;case 1:return n[0];default:return new fO(n)}}function wB(n,e,t,i,s=new Map,r=new Map){const o=[],a=[];let c=-1,l=null;if(i.forEach(u=>{const h=u.get("offset"),d=h==c,f=d&&l||new Map;u.forEach((p,m)=>{let g=m,v=p;if("offset"!==m)switch(g=e.normalizePropertyName(g,o),v){case"!":v=s.get(m);break;case w2:v=r.get(m);break;default:v=e.normalizeStyleValue(m,g,v,o)}f.set(g,v)}),d||a.push(f),l=f,c=h}),o.length)throw function zwe(n){return new Se(3502,!1)}();return a}function zM(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&kM(t,"start",n)));break;case"done":n.onDone(()=>i(t&&kM(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&kM(t,"destroy",n)))}}function kM(n,e,t){const r=RM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(r._data=o),r}function RM(n,e,t,i,s="",r=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:s,totalTime:r,disabled:!!o}}function Ro(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function SB(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let IM=(n,e)=>!1,TB=(n,e,t)=>[],EB=null;function HM(n){const e=n.parentNode||n.host;return e===EB?null:e}(LM()||typeof Element<"u")&&(Gwe()?(EB=(()=>document.documentElement)(),IM=(n,e)=>{for(;e;){if(e===n)return!0;e=HM(e)}return!1}):IM=(n,e)=>n.contains(e),TB=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let D3=null,AB=!1;const DB=IM,LB=TB;let zB=(()=>{class n{validateStyleProperty(t){return function jwe(n){D3||(D3=function $we(){return typeof document<"u"?document.body:null}()||{},AB=!!D3.style&&"WebkitAppearance"in D3.style);let e=!0;return D3.style&&!function Wwe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in D3.style,!e&&AB&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in D3.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return DB(t,i)}getParentElement(t){return HM(t)}query(t,i,s){return LB(t,i,s)}computeStyle(t,i,s){return s||""}animate(t,i,s,r,o,a=[],c){return new dd(s,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})(),VM=(()=>{class n{}return n.NOOP=new zB,n})();const PM="ng-enter",Pp="ng-leave",Op="ng-trigger",Np=".ng-trigger",RB="ng-animating",OM=".ng-animating";function k2(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:NM(parseFloat(e[1]),e[2])}function NM(n,e){return"s"===e?1e3*n:n}function Fp(n,e,t){return n.hasOwnProperty("duration")?n:function Xwe(n,e,t){let s,r=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(CB()),{duration:0,delay:0,easing:""};s=NM(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(r=NM(parseFloat(c),a[4]));const l=a[5];l&&(o=l)}else s=n;if(!t){let a=!1,c=e.length;s<0&&(e.push(function lwe(){return new Se(3100,!1)}()),a=!0),r<0&&(e.push(function uwe(){return new Se(3101,!1)}()),a=!0),a&&e.splice(c,0,CB())}return{duration:s,delay:r,easing:o}}(n,e,t)}function Pd(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function IB(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Xc(n,e=new Map,t){if(t)for(let[i,s]of t)e.set(i,s);for(let[i,s]of n)e.set(i,s);return e}function VB(n,e,t){return t?e+":"+t+";":""}function PB(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=VB(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=VB(0,Jwe(t),n.style[t]));n.setAttribute("style",e)}function La(n,e,t){n.style&&(e.forEach((i,s)=>{const r=BM(s);t&&!t.has(s)&&t.set(s,n.style[r]),n.style[r]=i}),LM()&&PB(n))}function L3(n,e){n.style&&(e.forEach((t,i)=>{const s=BM(i);n.style[s]=""}),LM()&&PB(n))}function Od(n){return Array.isArray(n)?1==n.length?n[0]:hO(n):n}const FM=new RegExp("{{\\s*(.+?)\\s*}}","g");function OB(n){let e=[];if("string"==typeof n){let t;for(;t=FM.exec(n);)e.push(t[1]);FM.lastIndex=0}return e}function Nd(n,e,t){const i=n.toString(),s=i.replace(FM,(r,o)=>{let a=e[o];return null==a&&(t.push(function dwe(n){return new Se(3003,!1)}()),a=""),a.toString()});return s==i?n:s}function Bp(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Qwe=/-+([a-z0-9])/g;function BM(n){return n.replace(Qwe,(...e)=>e[1].toUpperCase())}function Jwe(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Io(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function fwe(n){return new Se(3004,!1)}()}}function NB(n,e){return window.getComputedStyle(n)[e]}function rSe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function oSe(n,e,t){if(":"==n[0]){const c=function aSe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function Ewe(n){return new Se(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Twe(n){return new Se(3015,!1)}()),e;const s=i[1],r=i[2],o=i[3];e.push(FB(s,o));"<"==r[0]&&!("*"==s&&"*"==o)&&e.push(FB(o,s))}(i,t,e)):t.push(n),t}const jp=new Set(["true","1"]),$p=new Set(["false","0"]);function FB(n,e){const t=jp.has(n)||$p.has(n),i=jp.has(e)||$p.has(e);return(s,r)=>{let o="*"==n||n==s,a="*"==e||e==r;return!o&&t&&"boolean"==typeof s&&(o=s?jp.has(n):$p.has(n)),!a&&i&&"boolean"==typeof r&&(a=r?jp.has(e):$p.has(e)),o&&a}}const cSe=new RegExp("s*:selfs*,?","g");function UM(n,e,t,i){return new lSe(n).build(e,t,i)}class lSe{constructor(e){this._driver=e}build(e,t,i){const s=new dSe(t);return this._resetContextStyleTimingState(s),Io(this,Od(e),s)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,s=t.depCount=0;const r=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function mwe(){return new Se(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,r.push(this.visitState(c,t))}),c.name=l}else if(1==a.type){const c=this.visitTransition(a,t);i+=c.queryCount,s+=c.depCount,o.push(c)}else t.errors.push(function gwe(){return new Se(3007,!1)}())}),{type:7,name:e.name,states:r,transitions:o,queryCount:i,depCount:s,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(i.containsDynamicStyles){const r=new Set,o=s||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{OB(c).forEach(l=>{o.hasOwnProperty(l)||r.add(l)})})}),r.size&&(Bp(r.values()),t.errors.push(function vwe(n,e){return new Se(3008,!1)}()))}return{type:0,name:e.name,style:i,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Io(this,Od(e.animation),t);return{type:1,matchers:rSe(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:z3(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Io(this,i,t)),options:z3(e.options)}}visitGroup(e,t){const i=t.currentTime;let s=0;const r=e.steps.map(o=>{t.currentTime=i;const a=Io(this,o,t);return s=Math.max(s,t.currentTime),a});return t.currentTime=s,{type:3,steps:r,options:z3(e.options)}}visitAnimate(e,t){const i=function pSe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return GM(Fp(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(r=>"{"==r.charAt(0)&&"{"==r.charAt(1))){const r=GM(0,0,"");return r.dynamic=!0,r.strValue=t,r}const s=Fp(t,e);return GM(s.duration,s.delay,s.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let s,r=e.styles?e.styles:zt({});if(5==r.type)s=this.visitKeyframes(r,t);else{let o=e.styles,a=!1;if(!o){a=!0;const l={};i.easing&&(l.easing=i.easing),o=zt(l)}t.currentTime+=i.duration+i.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,s=c}return t.currentAnimateTimings=null,{type:4,timings:i,style:s,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],s=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of s)"string"==typeof a?a===w2?i.push(a):t.errors.push(new Se(3002,!1)):i.push(IB(a));let r=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!r))for(let c of a.values())if(c.toString().indexOf("{{")>=0){r=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let s=t.currentTime,r=t.currentTime;i&&r>0&&(r-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c);let h=!0;u&&(r!=s&&r>=u.startTime&&s<=u.endTime&&(t.errors.push(function ywe(n,e,t,i,s){return new Se(3010,!1)}()),h=!1),r=u.startTime),h&&l.set(c,{startTime:r,endTime:s}),t.options&&function Kwe(n,e,t){const i=e.params||{},s=OB(n);s.length&&s.forEach(r=>{i.hasOwnProperty(r)||t.push(function hwe(n){return new Se(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function bwe(){return new Se(3011,!1)}()),i;let r=0;const o=[];let a=!1,c=!1,l=0;const u=e.steps.map(v=>{const _=this._makeStyleAst(v,t);let y=null!=_.offset?_.offset:function fSe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(_.styles),b=0;return null!=y&&(r++,b=_.offset=y),c=c||b<0||b>1,a=a||b<l,l=b,o.push(b),_});c&&t.errors.push(function xwe(){return new Se(3012,!1)}()),a&&t.errors.push(function Mwe(){return new Se(3200,!1)}());const h=e.steps.length;let d=0;r>0&&r<h?t.errors.push(function Cwe(){return new Se(3202,!1)}()):0==r&&(d=1/(h-1));const f=h-1,p=t.currentTime,m=t.currentAnimateTimings,g=m.duration;return u.forEach((v,_)=>{const y=d>0?_==f?1:d*_:o[_],b=y*g;t.currentTime=p+m.delay+b,m.duration=b,this._validateStyleAst(v,t),v.offset=y,i.styles.push(v)}),i}visitReference(e,t){return{type:8,animation:Io(this,Od(e.animation),t),options:z3(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:z3(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:z3(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[r,o]=function uSe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(cSe,"")),n=n.replace(/@\*/g,Np).replace(/@\w+/g,t=>Np+"-"+t.slice(1)).replace(/:animating/g,OM),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+r:r,Ro(t.collectedStyles,t.currentQuerySelector,new Map);const a=Io(this,Od(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:r,limit:s.limit||0,optional:!!s.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:z3(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function wwe(){return new Se(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:Fp(e.timings,t.errors,!0);return{type:12,animation:Io(this,Od(e.animation),t),timings:i,options:null}}}class dSe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function z3(n){return n?(n=Pd(n)).params&&(n.params=function hSe(n){return n?Pd(n):null}(n.params)):n={},n}function GM(n,e,t){return{duration:n,delay:e,easing:t}}function WM(n,e,t,i,s,r,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:s,delay:r,totalTime:s+r,easing:o,subTimeline:a}}class qp{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const vSe=new RegExp(":enter","g"),ySe=new RegExp(":leave","g");function jM(n,e,t,i,s,r=new Map,o=new Map,a,c,l=[]){return(new bSe).buildKeyframes(n,e,t,i,s,r,o,a,c,l)}class bSe{buildKeyframes(e,t,i,s,r,o,a,c,l,u=[]){l=l||new qp;const h=new $M(e,t,l,s,r,u,[]);h.options=c;const d=c.delay?k2(c.delay):0;h.currentTimeline.delayNextStep(d),h.currentTimeline.setStyles([o],null,h.errors,c),Io(this,i,h);const f=h.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let m=f.length-1;m>=0;m--){const g=f[m];if(g.element===t){p=g;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,h.errors,c)}return f.length?f.map(p=>p.buildKeyframes()):[WM(t,[],[],[],0,d,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const s=t.createSubContext(e.options),r=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,s,s.options);r!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimateRefDelay(e.animation,t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimateRefDelay(e,t,i){const s=e.options?.delay;if(!s)return;let r;r="string"==typeof s?k2(Nd(s,e.options?.params??{},t.errors)):s,i.delayNextStep(r)}_visitSubInstructions(e,t,i){let r=t.currentTimeline.currentTime;const o=null!=i.duration?k2(i.duration):null,a=null!=i.delay?k2(i.delay):null;return 0!==o&&e.forEach(c=>{const l=t.appendInstructionToTimeline(c,o,a);r=Math.max(r,l.duration+l.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),Io(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let s=t;const r=e.options;if(r&&(r.params||r.delay)&&(s=t.createSubContext(r),s.transformIntoNewTimeline(),null!=r.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=Yp);const o=k2(r.delay);s.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Io(this,o,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>i&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let s=t.currentTimeline.currentTime;const r=e.options&&e.options.delay?k2(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);r&&a.delayNextStep(r),Io(this,o,a),s=Math.max(s,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return Fp(t.params?Nd(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),s.snapshotCurrentStyles());const r=e.style;5==r.type?this.visitKeyframes(r,t):(t.incrementTime(i.duration),this.visitStyle(r,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,s=t.currentAnimateTimings;!s&&i.hasCurrentStyleProperties()&&i.forwardFrame();const r=s&&s.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(r):i.setStyles(e.styles,r,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,s=t.currentTimeline.duration,r=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*r),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(s+r),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,s=e.options||{},r=s.delay?k2(s.delay):0;r&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Yp);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;const h=t.createSubContext(e.options,l);r&&h.delayNextStep(r),l===t.element&&(c=h.currentTimeline),Io(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,h.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,s=t.currentTimeline,r=e.timings,o=Math.abs(r.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime}const u=t.currentTimeline;c&&u.delayNextStep(c);const h=u.currentTime;Io(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=s.currentTime-h+(s.startTime-i.currentTimeline.startTime)}}const Yp={};class $M{constructor(e,t,i,s,r,o,a,c){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=s,this._leaveClassName=r,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Yp,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Xp(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let s=this.options;null!=i.duration&&(s.duration=k2(i.duration)),null!=i.delay&&(s.delay=k2(i.delay));const r=i.params;if(r){let o=s.params;o||(o=this.options.params={}),Object.keys(r).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Nd(r[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(s=>{i[s]=t[s]})}}return e}createSubContext(e=null,t,i){const s=t||this.element,r=new $M(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,i||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(e),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(e){return this.previousNode=Yp,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const s={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},r=new xSe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(r),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,s,r,o){let a=[];if(s&&a.push(this.element),e.length>0){e=(e=e.replace(vSe,"."+this._enterClassName)).replace(ySe,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=i);0!==i&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!r&&0==a.length&&o.push(function Swe(n){return new Se(3014,!1)}()),a}}class Xp{constructor(e,t,i,s){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Xp(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||w2),this._currentKeyframe.set(t,w2);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,s){t&&this._previousKeyframe.set("easing",t);const r=s&&s.params||{},o=function MSe(n,e){const t=new Map;let i;return n.forEach(s=>{if("*"===s){i=i||e.keys();for(let r of i)t.set(r,w2)}else Xc(s,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const l=Nd(c,r,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??w2),this._updateStyle(a,l)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const s=this._styleSummary.get(i);(!s||t.time>s.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((a,c)=>{const l=Xc(a,new Map,this._backFill);l.forEach((u,h)=>{"!"===u?e.add(h):u===w2&&t.add(h)}),i||l.set("offset",c/this.duration),s.push(l)});const r=e.size?Bp(e.values()):[],o=t.size?Bp(t.values()):[];if(i){const a=s[0],c=new Map(a);a.set("offset",0),c.set("offset",1),s=[a,c]}return WM(this.element,s,r,o,this.duration,this.startTime,this.easing,!1)}}class xSe extends Xp{constructor(e,t,i,s,r,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=s,this.postStyleProps=r,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const r=[],o=i+t,a=t/o,c=Xc(e[0]);c.set("offset",0),r.push(c);const l=Xc(e[0]);l.set("offset",GB(a)),r.push(l);const u=e.length-1;for(let h=1;h<=u;h++){let d=Xc(e[h]);const f=d.get("offset");d.set("offset",GB((t+f*i)/o)),r.push(d)}i=o,t=0,s="",e=r}return WM(this.element,e,this.preStyleProps,this.postStyleProps,i,t,s,!0)}}function GB(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class qM{}const CSe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class wSe extends qM{normalizePropertyName(e,t){return BM(e)}normalizeStyleValue(e,t,i,s){let r="";const o=i.toString().trim();if(CSe.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)r="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&s.push(function pwe(n,e){return new Se(3005,!1)}())}return o+r}}function WB(n,e,t,i,s,r,o,a,c,l,u,h,d){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:r,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:h,errors:d}}const YM={};class jB{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,s){return function SSe(n,e,t,i,s){return n.some(r=>r(e,t,i,s))}(this.ast.matchers,e,t,i,s)}buildStyles(e,t,i){let s=this._stateStyles.get("*");return void 0!==e&&(s=this._stateStyles.get(e?.toString())||s),s?s.buildStyles(t,i):new Map}build(e,t,i,s,r,o,a,c,l,u){const h=[],d=this.ast.options&&this.ast.options.params||YM,p=this.buildStyles(i,a&&a.params||YM,h),m=c&&c.params||YM,g=this.buildStyles(s,m,h),v=new Set,_=new Map,y=new Map,b="void"===s,x={params:TSe(m,d),delay:this.ast.options?.delay},w=u?[]:jM(e,t,this.ast.animation,r,o,p,g,x,l,h);let L=0;if(w.forEach(D=>{L=Math.max(D.duration+D.delay,L)}),h.length)return WB(t,this._triggerName,i,s,b,p,g,[],[],_,y,L,h);w.forEach(D=>{const R=D.element,Y=Ro(_,R,new Set);D.preStyleProps.forEach(j=>Y.add(j));const Q=Ro(y,R,new Set);D.postStyleProps.forEach(j=>Q.add(j)),R!==t&&v.add(R)});const C=Bp(v.values());return WB(t,this._triggerName,i,s,b,p,g,w,C,_,y,L)}}function TSe(n,e){const t=Pd(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class ESe{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,s=Pd(this.defaultParams);return Object.keys(e).forEach(r=>{const o=e[r];null!==o&&(s[r]=o)}),this.styles.styles.forEach(r=>{"string"!=typeof r&&r.forEach((o,a)=>{o&&(o=Nd(o,s,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),i.set(c,o)})}),i}}class DSe{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(s=>{this.states.set(s.name,new ESe(s.style,s.options&&s.options.params||{},i))}),$B(this.states,"true","1"),$B(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new jB(e,s,this.states))}),this.fallbackTransition=function LSe(n,e,t){return new jB(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,s){return this.transitionFactories.find(o=>o.match(e,t,i,s))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function $B(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const zSe=new qp;class kSe{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],r=UM(this._driver,t,i,[]);if(i.length)throw function kwe(n){return new Se(3503,!1)}();this._animations.set(e,r)}_buildPlayer(e,t,i){const s=e.element,r=wB(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(s,r,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const s=[],r=this._animations.get(e);let o;const a=new Map;if(r?(o=jM(this._driver,t,r,PM,Pp,new Map,new Map,i,zSe,s),o.forEach(u=>{const h=Ro(a,u.element,new Map);u.postStyleProps.forEach(d=>h.set(d,null))})):(s.push(function Rwe(){return new Se(3300,!1)}()),o=[]),s.length)throw function Iwe(n){return new Se(3504,!1)}();a.forEach((u,h)=>{u.forEach((d,f)=>{u.set(f,this._driver.computeStyle(h,f,w2))})});const l=Yc(o.map(u=>{const h=a.get(u.element);return this._buildPlayer(u,new Map,h)}));return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Hwe(n){return new Se(3301,!1)}();return t}listen(e,t,i,s){const r=RM(t,"","","");return zM(this._getPlayer(e),i,r,s),()=>{}}command(e,t,i,s){if("register"==i)return void this.register(e,s[0]);if("create"==i)return void this.create(e,t,s[0]||{});const r=this._getPlayer(e);switch(i){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const qB="ng-animate-queued",XM="ng-animate-disabled",PSe=[],YB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},OSe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},c1="__ng_removed";class ZM{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function USe(n){return n??null}(i?e.value:e),i){const r=Pd(e);delete r.value,this.options=r}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(s=>{null==i[s]&&(i[s]=t[s])})}}}const Fd="void",KM=new ZM(Fd);class NSe{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,l1(t,this._hostClassName)}listen(e,t,i,s){if(!this._triggers.has(t))throw function Vwe(n,e){return new Se(3302,!1)}();if(null==i||0==i.length)throw function Pwe(n){return new Se(3303,!1)}();if(!function GSe(n){return"start"==n||"done"==n}(i))throw function Owe(n,e){return new Se(3400,!1)}();const r=Ro(this._elementListeners,e,[]),o={name:t,phase:i,callback:s};r.push(o);const a=Ro(this._engine.statesByElement,e,new Map);return a.has(t)||(l1(e,Op),l1(e,Op+"-"+t),a.set(t,KM)),()=>{this._engine.afterFlush(()=>{const c=r.indexOf(o);c>=0&&r.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Nwe(n){return new Se(3401,!1)}();return t}trigger(e,t,i,s=!0){const r=this._getTrigger(t),o=new QM(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(l1(e,Op),l1(e,Op+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const l=new ZM(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=KM),l.value!==Fd&&c.value===l.value){if(!function $Se(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let s=0;s<t.length;s++){const r=t[s];if(!e.hasOwnProperty(r)||n[r]!==e[r])return!1}return!0}(c.params,l.params)){const m=[],g=r.matchStyles(c.value,c.params,m),v=r.matchStyles(l.value,l.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{L3(e,g),La(e,v)})}return}const d=Ro(this._engine.playersByElement,e,[]);d.forEach(m=>{m.namespaceId==this.id&&m.triggerName==t&&m.queued&&m.destroy()});let f=r.matchTransition(c.value,l.value,e,l.params),p=!1;if(!f){if(!s)return;f=r.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:c,toState:l,player:o,isFallbackTransition:p}),p||(l1(e,qB),o.onStart(()=>{r6(e,qB)})),o.onDone(()=>{let m=this.players.indexOf(o);m>=0&&this.players.splice(m,1);const g=this._engine.playersByElement.get(e);if(g){let v=g.indexOf(o);v>=0&&g.splice(v,1)}}),this.players.push(o),d.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,Np,!0);i.forEach(s=>{if(s[c1])return;const r=this._engine.fetchNamespacesByElement(s);r.size?r.forEach(o=>o.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,i,s){const r=this._engine.statesByElement.get(e),o=new Map;if(r){const a=[];if(r.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){const u=this.trigger(e,l,Fd,s);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Yc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const s=new Set;t.forEach(r=>{const o=r.name;if(s.has(o))return;s.add(o);const c=this._triggers.get(o).fallbackTransition,l=i.get(o)||KM,u=new ZM(Fd),h=new QM(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:h,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(i.totalAnimations){const r=i.players.length?i.playersByQueriedElement.get(e):[];if(r&&r.length)s=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)i.markElementAsRemoved(this.id,e,!1,t);else{const r=e[c1];(!r||r===YB)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){l1(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const s=i.player;if(s.destroyed)return;const r=i.element,o=this._elementListeners.get(r);o&&o.forEach(a=>{if(a.name==i.triggerName){const c=RM(r,i.triggerName,i.fromState.value,i.toState.value);c._data=e,zM(i.player,a.phase,c,a.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(i)}),this._queue=[],t.sort((i,s)=>{const r=i.transition.ast.depCount,o=s.transition.ast.depCount;return 0==r||0==o?r-o:this._engine.driver.containsElement(i.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class FSe{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,r)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new NSe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,s=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=s.get(a);if(c){const l=i.indexOf(c);i.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return s.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let s=this._namespaceLookup[e];s&&s.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(i);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let s of i.values())if(s.namespaceId){const r=this._fetchNamespace(s.namespaceId);r&&t.add(r)}return t}trigger(e,t,i,s){if(Zp(t)){const r=this._fetchNamespace(e);if(r)return r.trigger(t,i,s),!0}return!1}insertNode(e,t,i,s){if(!Zp(t))return;const r=t[c1];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),l1(e,XM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),r6(e,XM))}removeNode(e,t,i,s){if(Zp(t)){const r=e?this._fetchNamespace(e):null;if(r?r.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,i,s,r){this.collectedLeaveElements.push(t),t[c1]={namespaceId:e,setForRemoval:s,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:r}}listen(e,t,i,s,r){return Zp(t)?this._fetchNamespace(e).listen(t,i,s,r):()=>{}}_buildInstruction(e,t,i,s,r){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,s,e.fromState.options,e.toState.options,t,r)}destroyInnerAnimations(e){let t=this.driver.query(e,Np,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,OM,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Yc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[c1];if(t&&t.setForRemoval){if(e[c1]=YB,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(XM)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,s)=>this._balanceNamespaceList(i,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)l1(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let s=0;s<i.length;s++)i[s]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Yc(t).onDone(()=>{i.forEach(s=>s())}):i.forEach(s=>s())}}reportError(e){throw function Fwe(n){return new Se(3402,!1)}()}_flushAnimations(e,t){const i=new qp,s=[],r=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(k=>{u.add(k);const O=this.driver.query(k,".ng-animate-queued",!0);for(let N=0;N<O.length;N++)u.add(O[N])});const h=this.bodyNode,d=Array.from(this.statesByElement.keys()),f=KB(d,this.collectedEnterElements),p=new Map;let m=0;f.forEach((k,O)=>{const N=PM+m++;p.set(O,N),k.forEach(B=>l1(B,N))});const g=[],v=new Set,_=new Set;for(let k=0;k<this.collectedLeaveElements.length;k++){const O=this.collectedLeaveElements[k],N=O[c1];N&&N.setForRemoval&&(g.push(O),v.add(O),N.hasAnimation?this.driver.query(O,".ng-star-inserted",!0).forEach(B=>v.add(B)):_.add(O))}const y=new Map,b=KB(d,Array.from(v));b.forEach((k,O)=>{const N=Pp+m++;y.set(O,N),k.forEach(B=>l1(B,N))}),e.push(()=>{f.forEach((k,O)=>{const N=p.get(O);k.forEach(B=>r6(B,N))}),b.forEach((k,O)=>{const N=y.get(O);k.forEach(B=>r6(B,N))}),g.forEach(k=>{this.processLeaveNode(k)})});const x=[],w=[];for(let k=this._namespaceList.length-1;k>=0;k--)this._namespaceList[k].drainQueuedTransitions(t).forEach(N=>{const B=N.player,q=N.element;if(x.push(B),this.collectedEnterElements.length){const Ie=q[c1];if(Ie&&Ie.setForMove){if(Ie.previousTriggersValues&&Ie.previousTriggersValues.has(N.triggerName)){const He=Ie.previousTriggersValues.get(N.triggerName),Qe=this.statesByElement.get(N.element);if(Qe&&Qe.has(N.triggerName)){const Pe=Qe.get(N.triggerName);Pe.value=He,Qe.set(N.triggerName,Pe)}}return void B.destroy()}}const ne=!h||!this.driver.containsElement(h,q),$=y.get(q),ye=p.get(q),oe=this._buildInstruction(N,i,ye,$,ne);if(oe.errors&&oe.errors.length)return void w.push(oe);if(ne)return B.onStart(()=>L3(q,oe.fromStyles)),B.onDestroy(()=>La(q,oe.toStyles)),void s.push(B);if(N.isFallbackTransition)return B.onStart(()=>L3(q,oe.fromStyles)),B.onDestroy(()=>La(q,oe.toStyles)),void s.push(B);const De=[];oe.timelines.forEach(Ie=>{Ie.stretchStartingKeyframe=!0,this.disabledNodes.has(Ie.element)||De.push(Ie)}),oe.timelines=De,i.append(q,oe.timelines),o.push({instruction:oe,player:B,element:q}),oe.queriedElements.forEach(Ie=>Ro(a,Ie,[]).push(B)),oe.preStyleProps.forEach((Ie,He)=>{if(Ie.size){let Qe=c.get(He);Qe||c.set(He,Qe=new Set),Ie.forEach((Pe,Ht)=>Qe.add(Ht))}}),oe.postStyleProps.forEach((Ie,He)=>{let Qe=l.get(He);Qe||l.set(He,Qe=new Set),Ie.forEach((Pe,Ht)=>Qe.add(Ht))})});if(w.length){const k=[];w.forEach(O=>{k.push(function Bwe(n,e){return new Se(3505,!1)}())}),x.forEach(O=>O.destroy()),this.reportError(k)}const L=new Map,C=new Map;o.forEach(k=>{const O=k.element;i.has(O)&&(C.set(O,O),this._beforeAnimationBuild(k.player.namespaceId,k.instruction,L))}),s.forEach(k=>{const O=k.element;this._getPreviousPlayers(O,!1,k.namespaceId,k.triggerName,null).forEach(B=>{Ro(L,O,[]).push(B),B.destroy()})});const D=g.filter(k=>JB(k,c,l)),R=new Map;ZB(R,this.driver,_,l,w2).forEach(k=>{JB(k,c,l)&&D.push(k)});const Q=new Map;f.forEach((k,O)=>{ZB(Q,this.driver,new Set(k),c,"!")}),D.forEach(k=>{const O=R.get(k),N=Q.get(k);R.set(k,new Map([...Array.from(O?.entries()??[]),...Array.from(N?.entries()??[])]))});const j=[],z=[],G={};o.forEach(k=>{const{element:O,player:N,instruction:B}=k;if(i.has(O)){if(u.has(O))return N.onDestroy(()=>La(O,B.toStyles)),N.disabled=!0,N.overrideTotalTime(B.totalTime),void s.push(N);let q=G;if(C.size>1){let $=O;const ye=[];for(;$=$.parentNode;){const oe=C.get($);if(oe){q=oe;break}ye.push($)}ye.forEach(oe=>C.set(oe,q))}const ne=this._buildAnimation(N.namespaceId,B,L,r,Q,R);if(N.setRealPlayer(ne),q===G)j.push(N);else{const $=this.playersByElement.get(q);$&&$.length&&(N.parentPlayer=Yc($)),s.push(N)}}else L3(O,B.fromStyles),N.onDestroy(()=>La(O,B.toStyles)),z.push(N),u.has(O)&&s.push(N)}),z.forEach(k=>{const O=r.get(k.element);if(O&&O.length){const N=Yc(O);k.setRealPlayer(N)}}),s.forEach(k=>{k.parentPlayer?k.syncPlayerEvents(k.parentPlayer):k.destroy()});for(let k=0;k<g.length;k++){const O=g[k],N=O[c1];if(r6(O,Pp),N&&N.hasAnimation)continue;let B=[];if(a.size){let ne=a.get(O);ne&&ne.length&&B.push(...ne);let $=this.driver.query(O,OM,!0);for(let ye=0;ye<$.length;ye++){let oe=a.get($[ye]);oe&&oe.length&&B.push(...oe)}}const q=B.filter(ne=>!ne.destroyed);q.length?WSe(this,O,q):this.processLeaveNode(O)}return g.length=0,j.forEach(k=>{this.players.push(k),k.onDone(()=>{k.destroy();const O=this.players.indexOf(k);this.players.splice(O,1)}),k.play()}),j}elementContainsData(e,t){let i=!1;const s=t[c1];return s&&s.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,s,r){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!r||r==Fd;a.forEach(l=>{l.queued||!c&&l.triggerName!=s||o.push(l)})}}return(i||s)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||s&&s!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const r=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const l=c.element,u=l!==r,h=Ro(i,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),h.push(f)})}L3(r,t.fromStyles)}_buildAnimation(e,t,i,s,r,o){const a=t.triggerName,c=t.element,l=[],u=new Set,h=new Set,d=t.timelines.map(p=>{const m=p.element;u.add(m);const g=m[c1];if(g&&g.removedBeforeQueried)return new dd(p.duration,p.delay);const v=m!==c,_=function jSe(n){const e=[];return QB(n,e),e}((i.get(m)||PSe).map(L=>L.getRealPlayer())).filter(L=>!!L.element&&L.element===m),y=r.get(m),b=o.get(m),x=wB(0,this._normalizer,0,p.keyframes,y,b),w=this._buildPlayer(p,x,_);if(p.subTimeline&&s&&h.add(m),v){const L=new QM(e,a,m);L.setRealPlayer(w),l.push(L)}return w});l.forEach(p=>{Ro(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function BSe(n,e,t){let i=n.get(e);if(i){if(i.length){const s=i.indexOf(t);i.splice(s,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>l1(p,RB));const f=Yc(d);return f.onDestroy(()=>{u.forEach(p=>r6(p,RB)),La(c,t.toStyles)}),h.forEach(p=>{Ro(s,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new dd(e.duration,e.delay)}}class QM{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new dd,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(s=>zM(e,i,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ro(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Zp(n){return n&&1===n.nodeType}function XB(n,e){const t=n.style.display;return n.style.display=e??"none",t}function ZB(n,e,t,i,s){const r=[];t.forEach(c=>r.push(XB(c)));const o=[];i.forEach((c,l)=>{const u=new Map;c.forEach(h=>{const d=e.computeStyle(l,h,s);u.set(h,d),(!d||0==d.length)&&(l[c1]=OSe,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>XB(c,r[a++])),o}function KB(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const s=new Set(e),r=new Map;function o(a){if(!a)return 1;let c=r.get(a);if(c)return c;const l=a.parentNode;return c=t.has(l)?l:s.has(l)?1:o(l),r.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function l1(n,e){n.classList?.add(e)}function r6(n,e){n.classList?.remove(e)}function WSe(n,e,t){Yc(t).onDone(()=>n.processLeaveNode(e))}function QB(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof fO?QB(i.players,e):e.push(i)}}function JB(n,e,t){const i=t.get(n);if(!i)return!1;let s=e.get(n);return s?i.forEach(r=>s.add(r)):e.set(n,i),t.delete(n),!0}class Kp{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(s,r)=>{},this._transitionEngine=new FSe(e,t,i),this._timelineEngine=new kSe(e,t,i),this._transitionEngine.onRemovalComplete=(s,r)=>this.onRemovalComplete(s,r)}registerTrigger(e,t,i,s,r){const o=e+"-"+s;let a=this._triggerCache[o];if(!a){const c=[],u=UM(this._driver,r,c,[]);if(c.length)throw function Lwe(n,e){return new Se(3404,!1)}();a=function ASe(n,e,t){return new DSe(n,e,t)}(s,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,s,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,s){this._transitionEngine.insertNode(e,t,i,s)}onRemove(e,t,i,s){this._transitionEngine.removeNode(e,t,s||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,s){if("@"==i.charAt(0)){const[r,o]=SB(i);this._timelineEngine.command(r,t,o,s)}else this._transitionEngine.trigger(e,t,i,s)}listen(e,t,i,s,r){if("@"==i.charAt(0)){const[o,a]=SB(i);return this._timelineEngine.listen(o,t,a,r)}return this._transitionEngine.listen(e,t,i,s,r)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let YSe=(()=>{class n{constructor(t,i,s){this._element=t,this._startStyles=i,this._endStyles=s,this._state=0;let r=n.initialStylesByElement.get(t);r||n.initialStylesByElement.set(t,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&La(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(La(this._element,this._initialStyles),this._endStyles&&(La(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(L3(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(L3(this._element,this._endStyles),this._endStyles=null),La(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function JM(n){let e=null;return n.forEach((t,i)=>{(function XSe(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class eU{constructor(e,t,i,s){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,s)=>{"offset"!==s&&e.set(s,this._finished?i:NB(this.element,s))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class ZSe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return DB(e,t)}getParentElement(e){return HM(e)}query(e,t,i){return LB(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,s,r,o=[]){const c={duration:i,delay:s,fill:0==s?"both":"forwards"};r&&(c.easing=r);const l=new Map,u=o.filter(f=>f instanceof eU);(function eSe(n,e){return 0===n||0===e})(i,s)&&u.forEach(f=>{f.currentSnapshot.forEach((p,m)=>l.set(m,p))});let h=function Zwe(n){return n.length?n[0]instanceof Map?n:n.map(e=>IB(e)):[]}(t).map(f=>Xc(f));h=function tSe(n,e,t){if(t.size&&e.length){let i=e[0],s=[];if(t.forEach((r,o)=>{i.has(o)||s.push(o),i.set(o,r)}),s.length)for(let r=1;r<e.length;r++){let o=e[r];s.forEach(a=>o.set(a,NB(n,a)))}}return e}(e,h,l);const d=function qSe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=JM(e[0]),e.length>1&&(i=JM(e[e.length-1]))):e instanceof Map&&(t=JM(e)),t||i?new YSe(n,t,i):null}(e,h);return new eU(e,h,c,d)}}let KSe=(()=>{class n extends px{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:A1.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?hO(t):t;return tU(this._renderer,null,i,"register",[s]),new QSe(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(J(fh),J(Ct))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();class QSe extends class v_e{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new JSe(this._id,e,t||{},this._renderer)}}class JSe{constructor(e,t,i,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return tU(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function tU(n,e,t,i,s){return n.setProperty(e,`@@${t}:${i}`,s)}const nU="@.disabled";let eTe=(()=>{class n{constructor(t,i,s){this.delegate=t,this.engine=i,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(r,o)=>{const a=o?.parentNode(r);a&&o.removeChild(a,r)}}createRenderer(t,i){const r=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(r);return u||(u=new iU("",r,this.engine),this._rendererCache.set(r,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=u=>{Array.isArray(u)?u.forEach(c):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(c),new tTe(this,a,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,s){t>=0&&t<this._microtaskId?this._zone.run(()=>i(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(r=>{const[o,a]=r;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(J(fh),J(Kp),J(Lt))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();class iU{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,s=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,s){this.delegate.setAttribute(e,t,i,s)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,s){this.delegate.setStyle(e,t,i,s)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==nU?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class tTe extends iU{constructor(e,t,i,s){super(t,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==nU?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const s=function nTe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let r=t.slice(1),o="";return"@"!=r.charAt(0)&&([r,o]=function iTe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(r)),this.engine.listen(this.namespaceId,s,r,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let sTe=(()=>{class n extends Kp{constructor(t,i,s,r){super(t.body,i,s)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(J(Ct),J(VM),J(qM),J(I0))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();const sU=[{provide:px,useClass:KSe},{provide:qM,useFactory:function rTe(){return new wSe}},{provide:Kp,useClass:sTe},{provide:fh,useFactory:function oTe(n,e,t){return new eTe(n,e,t)},deps:[c7,Kp,Lt]}],eC=[{provide:VM,useFactory:()=>new ZSe},{provide:Do,useValue:"BrowserAnimations"},...sU],rU=[{provide:VM,useClass:zB},{provide:Do,useValue:"NoopAnimations"},...sU];let aTe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?rU:eC}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({providers:eC,imports:[CH]}),n})();const cTe=["mat-button",""],lTe=["*"],hTe=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],dTe=v3(ud(M2(class{constructor(n){this._elementRef=n}})));let tC=(()=>{class n extends dTe{constructor(t,i,s){super(t),this._focusMonitor=i,this._animationMode=s,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of hTe)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(U1),T(Do,8))},n.\u0275cmp=dt({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&_i(C2,5),2&t){let s;Ot(s=Nt())&&(i.ripple=s.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(Mn("disabled",i.disabled||null),Et("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[pe],attrs:cTe,ngContentSelectors:lTe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(Ki(),M(0,"span",0),Vn(1),S(),te(2,"span",1)(3,"span",2)),2&t&&(H(2),Et("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Z("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[C2],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),nC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[G1,wt,wt]}),n})(),fTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({}),n})(),pTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[io,wt,fTe,Rc]}),n})();const mTe=["sliderWrapper"],u1=kc({passive:!1}),bTe={provide:yr,useExisting:gn(()=>Jp),multi:!0};class xTe{}const MTe=Y7(v3(ud(class{constructor(n){this._elementRef=n}}),"accent"));let Jp=(()=>{class n extends MTe{constructor(t,i,s,r,o,a,c,l){super(t),this._focusMonitor=i,this._changeDetectorRef=s,this._dir=r,this._ngZone=a,this._animationMode=l,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new $t,this.input=new $t,this.valueChange=new $t,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=fi.EMPTY,this._pointerDown=u=>{this.disabled||this._isSliding||!Bd(u)&&0!==u.button||this._ngZone.run(()=>{this._touchId=Bd(u)?function CTe(n,e){for(let t=0;t<n.touches.length;t++){const i=n.touches[t].target;if(e===i||e.contains(i))return n.touches[t].identifier}}(u,this._elementRef.nativeElement):void 0;const h=cU(u,this._touchId);if(h){const d=this.value;this._isSliding="pointer",this._lastPointerEvent=u,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(u),this._focusHostElement(),this._updateValueFromPosition(h),this._valueOnSlideStart=d,u.cancelable&&u.preventDefault(),d!=this.value&&this._emitInputEvent()}})},this._pointerMove=u=>{if("pointer"===this._isSliding){const h=cU(u,this._touchId);if(h){u.cancelable&&u.preventDefault();const d=this.value;this._lastPointerEvent=u,this._updateValueFromPosition(h),d!=this.value&&this._emitInputEvent()}}},this._pointerUp=u=>{"pointer"===this._isSliding&&(!Bd(u)||"number"!=typeof this._touchId||iC(u.changedTouches,this._touchId))&&(u.cancelable&&u.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=c,this.tabIndex=parseInt(o)||0,a.runOutsideAngular(()=>{const u=t.nativeElement;u.addEventListener("mousedown",this._pointerDown,u1),u.addEventListener("touchstart",this._pointerDown,u1)})}get invert(){return this._invert}set invert(t){this._invert=qt(t)}get max(){return this._max}set max(t){this._max=zo(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=zo(t,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=zo(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=qt(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?zo(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let i=zo(t,0);this._roundToDecimal&&i!==this.min&&i!==this.max&&(i=parseFloat(i.toFixed(this._roundToDecimal))),this._value=i,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=qt(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const i=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${i})`}}_getTrackFillStyles(){const t=this.percent,s=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${s})`,display:0===t?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,a={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const c=this._shouldInvertAxis();let l;l=this.vertical?c?"Bottom":"Top":c?"Right":"Left",a[`padding${l}`]=`${this._getThumbGap()}px`}return a}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mousedown",this._pointerDown,u1),t.removeEventListener("touchstart",this._pointerDown,u1),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||g3(t)||this._isSliding&&"keyboard"!==this._isSliding)return;const i=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}i!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",t.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const i=this._document,s=Bd(t),o=s?"touchend":"mouseup";i.addEventListener(s?"touchmove":"mousemove",this._pointerMove,u1),i.addEventListener(o,this._pointerUp,u1),s&&i.addEventListener("touchcancel",this._pointerUp,u1);const a=this._getWindow();typeof a<"u"&&a&&a.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener("mousemove",this._pointerMove,u1),t.removeEventListener("mouseup",this._pointerUp,u1),t.removeEventListener("touchmove",this._pointerMove,u1),t.removeEventListener("touchend",this._pointerUp,u1),t.removeEventListener("touchcancel",this._pointerUp,u1);const i=this._getWindow();typeof i<"u"&&i&&i.removeEventListener("blur",this._windowBlur)}_increment(t){const i=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(i+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let o=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(o=1-o),0===o)this.value=this.min;else if(1===o)this.value=this.max;else{const a=this._calculateValue(o),c=Math.round((a-this.min)/this.step)*this.step+this.min;this.value=this._clamp(c,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let t;if("auto"==this.tickInterval){let i=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;t=Math.ceil(30/(i*this.step/(this.max-this.min)))*this.step/i}else t=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=aU(t)?t:0}_createChangeEvent(t=this.value){let i=new xTe;return i.source=this,i.value=t,i}_calculatePercentage(t){const i=((t||0)-this.min)/(this.max-this.min);return aU(i)?i:0}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,i=0,s=1){return Math.max(i,Math.min(t,s))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(U1),T(Ts),T(_2,8),e1("tabindex"),T(Lt),T(Ct),T(Do,8))},n.\u0275cmp=dt({type:n,selectors:[["mat-slider"]],viewQuery:function(t,i){if(1&t&&_i(mTe,5),2&t){let s;Ot(s=Nt())&&(i._sliderWrapper=s.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(t,i){1&t&&We("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()})("keydown",function(r){return i._onKeydown(r)})("keyup",function(){return i._onKeyup()})("mouseenter",function(){return i._onMouseenter()})("selectstart",function(r){return r.preventDefault()}),2&t&&(Kl("tabIndex",i.tabIndex),Mn("aria-disabled",i.disabled)("aria-valuemax",i.max)("aria-valuemin",i.min)("aria-valuenow",i.value)("aria-valuetext",i.valueText??i.displayValue)("aria-orientation",i.vertical?"vertical":"horizontal"),Et("mat-slider-disabled",i.disabled)("mat-slider-has-ticks",i.tickInterval)("mat-slider-horizontal",!i.vertical)("mat-slider-axis-inverted",i._shouldInvertAxis())("mat-slider-invert-mouse-coords",i._shouldInvertMouseCoords())("mat-slider-sliding",i._isSliding)("mat-slider-thumb-label-showing",i.thumbLabel)("mat-slider-vertical",i.vertical)("mat-slider-min-value",i._isMinValue())("mat-slider-hide-last-tick",i.disabled||i._isMinValue()&&i._getThumbGap()&&i._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[At([bTe]),pe],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,i){1&t&&(M(0,"div",0,1)(2,"div",2),te(3,"div",3)(4,"div",4),S(),M(5,"div",5),te(6,"div",6),S(),M(7,"div",7),te(8,"div",8)(9,"div",9),M(10,"div",10)(11,"span",11),E(12),S()()()()),2&t&&(H(3),Z("ngStyle",i._getTrackBackgroundStyles()),H(1),Z("ngStyle",i._getTrackFillStyles()),H(1),Z("ngStyle",i._getTicksContainerStyles()),H(1),Z("ngStyle",i._getTicksStyles()),H(1),Z("ngStyle",i._getThumbContainerStyles()),H(5),Ch(i.displayValue))},dependencies:[s3],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid rgba(0,0,0,0);border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}'],encapsulation:2,changeDetection:0}),n})();function aU(n){return!isNaN(n)&&isFinite(n)}function Bd(n){return"t"===n.type[0]}function cU(n,e){let t;return t=Bd(n)?"number"==typeof e?iC(n.touches,e)||iC(n.changedTouches,e):n.touches[0]||n.changedTouches[0]:n,t?{x:t.clientX,y:t.clientY}:void 0}function iC(n,e){for(let t=0;t<n.length;t++)if(n[t].identifier===e)return n[t]}let wTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[io,wt,wt]}),n})(),hU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({}),n})(),OTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[G1,wt,cd,hU,wt,hU]}),n})();const UTe={provide:new fe("mat-menu-scroll-strategy"),deps:[r1],useFactory:function BTe(n){return()=>n.scrollStrategies.reposition()}};let GTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({providers:[UTe],imports:[io,wt,G1,Ic,u3,wt]}),n})();function WTe(n,e){}class e9{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let fU=(()=>{class n extends Cb{constructor(t,i,s,r,o,a,c,l){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=r,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=c,this._focusMonitor=l,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),h},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=s}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const s=()=>{t.removeEventListener("blur",s),t.removeEventListener("mousedown",s),t.removeAttribute("tabindex")};t.addEventListener("blur",s),t.addEventListener("mousedown",s)})),t.focus(i)}_focusByCssSelector(t,i){let s=this._elementRef.nativeElement.querySelector(t);s&&this._forceFocus(s,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const s=yb(),r=this._elementRef.nativeElement;(!s||s===this._document.body||s===r||r.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=yb();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=yb())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(T(je),T($7),T(Ct,8),T(e9),T(ld),T(Lt),T(qh),T(U1))},n.\u0275cmp=dt({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(1&t&&_i(wb,7),2&t){let s;Ot(s=Nt())&&(i._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){2&t&&Mn("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[pe],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Ve(0,WTe,0,0,"ng-template",0)},dependencies:[wb],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class sC{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Tt,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!g3(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const pU=new fe("DialogScrollStrategy"),jTe=new fe("DialogData"),$Te=new fe("DefaultDialogConfig"),YTe={provide:pU,deps:[r1],useFactory:function qTe(n){return()=>n.scrollStrategies.block()}};let XTe=0,mU=(()=>{class n{constructor(t,i,s,r,o,a){this._overlay=t,this._injector=i,this._defaultOptions=s,this._parentDialog=r,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Tt,this._afterOpenedAtThisLevel=new Tt,this._ariaHiddenElements=new Map,this.afterAllClosed=M7(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(y2(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,i){(i={...this._defaultOptions||new e9,...i}).id=i.id||"cdk-dialog-"+XTe++,i.id&&this.getDialogById(i.id);const r=this._getOverlayConfig(i),o=this._overlay.create(r),a=new sC(o,i),c=this._attachContainer(o,a,i);return a.containerInstance=c,this._attachDialogContent(t,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){rC(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){rC(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),rC(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new NH({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,s){const r=s.injector||s.viewContainerRef?.injector,o=[{provide:e9,useValue:s},{provide:sC,useValue:i},{provide:qh,useValue:t}];let a;s.container?"function"==typeof s.container?a=s.container:(a=s.container.type,o.push(...s.container.providers(s))):a=fU;const c=new $h(a,s.viewContainerRef,ws.create({parent:r||this._injector,providers:o}),s.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,i,s,r){if(t instanceof Js){const o=this._createInjector(r,i,s,void 0);let a={$implicit:r.data,dialogRef:i};r.templateContext&&(a={...a,..."function"==typeof r.templateContext?r.templateContext():r.templateContext}),s.attachTemplatePortal(new Mb(t,null,a,o))}else{const o=this._createInjector(r,i,s,this._injector),a=s.attachComponentPortal(new $h(t,r.viewContainerRef,o,r.componentFactoryResolver));i.componentInstance=a.instance}}_createInjector(t,i,s,r){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:jTe,useValue:t.data},{provide:sC,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,s)):a.push(...t.providers)),t.direction&&(!o||!o.get(_2,null,Rt.Optional))&&a.push({provide:_2,useValue:{value:t.direction,change:pt()}}),ws.create({parent:o||r,providers:a})}_removeOpenDialog(t,i){const s=this.openDialogs.indexOf(t);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,o)=>{r?o.setAttribute("aria-hidden",r):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let s=i.length-1;s>-1;s--){const r=i[s];r!==t&&"SCRIPT"!==r.nodeName&&"STYLE"!==r.nodeName&&!r.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(J(r1),J(ws),J($Te,8),J(n,12),J(_7),J(pU))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})();function rC(n,e){let t=n.length;for(;t--;)e(n[t])}let ZTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({providers:[mU,YTe],imports:[Ic,Rc,hx,Rc]}),n})();function KTe(n,e){}const o6={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},QTe={dialogContainer:_r("dialogContainer",[ai("void, exit",zt({opacity:0,transform:"scale(0.7)"})),ai("enter",zt({transform:"none"})),xi("* => enter",uO([oi("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",zt({transform:"none",opacity:1})),gx("@*",mx(),{optional:!0})]),o6),xi("* => void, * => exit",uO([oi("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",zt({opacity:0})),gx("@*",mx(),{optional:!0})]),o6)])};class t9{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=o6.params.enterAnimationDuration,this.exitAnimationDuration=o6.params.exitAnimationDuration}}let JTe=(()=>{class n extends fU{constructor(t,i,s,r,o,a,c,l){super(t,i,s,r,o,a,c,l),this._animationStateChanged=new $t}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(T(je),T($7),T(Ct,8),T(t9),T(ld),T(Lt),T(qh),T(U1))},n.\u0275cmp=dt({type:n,selectors:[["ng-component"]],features:[pe],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),eEe=(()=>{class n extends JTe{constructor(t,i,s,r,o,a,c,l,u){super(t,i,s,r,o,a,c,u),this._changeDetectorRef=l,this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?this._openAnimationDone(i):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:i})}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||o6.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||o6.params.exitAnimationDuration}}}}return n.\u0275fac=function(t){return new(t||n)(T(je),T($7),T(Ct,8),T(t9),T(ld),T(Lt),T(qh),T(Ts),T(U1))},n.\u0275cmp=dt({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,i){1&t&&Tf("@dialogContainer.start",function(r){return i._onAnimationStart(r)})("@dialogContainer.done",function(r){return i._onAnimationDone(r)}),2&t&&(Kl("id",i._config.id),Mn("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Df("@dialogContainer",i._getAnimationState()))},features:[pe],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Ve(0,KTe,0,0,"ng-template",0)},dependencies:[wb],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[QTe.dialogContainer]}}),n})();class tEe{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Tt,this._beforeClosed=new Tt,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(Pn(s=>"opened"===s.state),cr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Pn(s=>"closed"===s.state),cr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Ja(this.backdropClick(),this.keydownEvents().pipe(Pn(s=>27===s.keyCode&&!this.disableClose&&!g3(s)))).subscribe(s=>{this.disableClose||(s.preventDefault(),function nEe(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===s.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Pn(t=>"closing"===t.state),cr(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const iEe=new fe("MatDialogData"),sEe=new fe("mat-dialog-default-options"),gU=new fe("mat-dialog-scroll-strategy"),oEe={provide:gU,deps:[r1],useFactory:function rEe(n){return()=>n.scrollStrategies.block()}};let aEe=0,cEe=(()=>{class n{constructor(t,i,s,r,o,a,c,l,u,h){this._overlay=t,this._defaultOptions=s,this._parentDialog=r,this._dialogRefConstructor=c,this._dialogContainerType=l,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Tt,this._afterOpenedAtThisLevel=new Tt,this._idPrefix="mat-dialog-",this.afterAllClosed=M7(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(y2(void 0))),this._scrollStrategy=a,this._dialog=i.get(mU)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){let s;(i={...this._defaultOptions||new t9,...i}).id=i.id||`${this._idPrefix}${aEe++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const r=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:t9,useValue:i},{provide:e9,useValue:i}]},templateContext:()=>({dialogRef:s}),providers:(o,a,c)=>(s=new this._dialogRefConstructor(o,i,c),s.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:s}])});return s.componentInstance=r.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(s);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){Yl()},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})(),lEe=(()=>{class n extends cEe{constructor(t,i,s,r,o,a,c,l){super(t,i,r,a,c,o,tEe,eEe,iEe,l)}}return n.\u0275fac=function(t){return new(t||n)(J(r1),J(ws),J(Ih,8),J(sEe,8),J(gU),J(n,12),J(_7),J(Do,8))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})(),uEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({providers:[lEe,oEe],imports:[ZTe,Ic,Rc,wt,wt]}),n})(),CEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[G1,wt,wt]}),n})(),wEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[wt,wt]}),n})();const SEe=["input"],TEe=function(n){return{enterDuration:n}},EEe=["*"],AEe=new fe("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let DEe=0;const LEe={provide:yr,useExisting:gn(()=>bU),multi:!0};class zEe{constructor(e,t){this.source=e,this.checked=t}}const kEe=Y7(v3(M2(ud(class{constructor(n){this._elementRef=n}}))));let REe=(()=>{class n extends kEe{constructor(t,i,s,r,o,a,c){super(t),this._focusMonitor=i,this._changeDetectorRef=s,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new $t,this.toggleChange=new $t,this.tabIndex=parseInt(r)||0,this.color=this.defaultColor=o.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId=`${c}${++DEe}`}get required(){return this._required}set required(t){this._required=qt(t)}get checked(){return this._checked}set checked(t){this._checked=qt(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._focused=!0:t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return n.\u0275fac=function(t){Yl()},n.\u0275dir=le({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[pe]}),n})(),bU=(()=>{class n extends REe{constructor(t,i,s,r,o,a){super(t,i,s,r,o,a,"mat-slide-toggle-")}_createChangeEvent(t){return new zEe(this,t)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}focus(t,i){i?this._focusMonitor.focusVia(this._inputElement,i,t):this._inputElement.nativeElement.focus(t)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(U1),T(Ts),e1("tabindex"),T(AEe),T(Do,8))},n.\u0275cmp=dt({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(t,i){if(1&t&&_i(SEe,5),2&t){let s;Ot(s=Nt())&&(i._inputElement=s.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(t,i){2&t&&(Kl("id",i.id),Mn("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),Et("mat-checked",i.checked)("mat-disabled",i.disabled)("mat-slide-toggle-label-before","before"==i.labelPosition)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[At([LEe]),pe],ngContentSelectors:EEe,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,i){if(1&t&&(Ki(),M(0,"label",0,1)(2,"span",2)(3,"input",3,4),We("change",function(r){return i._onChangeEvent(r)})("click",function(r){return i._onInputClick(r)}),S(),M(5,"span",5),te(6,"span",6),M(7,"span",7),te(8,"span",8),S()()(),M(9,"span",9,10),We("cdkObserveContent",function(){return i._onLabelTextChange()}),M(11,"span",11),E(12,"\xa0"),S(),Vn(13),S()()),2&t){const s=Si(1),r=Si(10);Mn("for",i.inputId),H(2),Et("mat-slide-toggle-bar-no-side-margin",!r.textContent||!r.textContent.trim()),H(1),Z("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex)("checked",i.checked)("disabled",i.disabled),Mn("name",i.name)("aria-checked",i.checked)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),H(4),Z("matRippleTrigger",s)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",d2(18,TEe,i._noopAnimations?0:150))}},dependencies:[C2,UP],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),n})(),xU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({}),n})(),VEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[xU,G1,wt,cd,xU,wt]}),n})(),n9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[io,wt,cd,wt]}),n})(),BEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[l3]}),n})(),oC=(()=>{class n{constructor(){this.changes=new Tt,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const QEe={provide:oC,deps:[[new o2,new Gl,oC]],useFactory:function KEe(n){return n||new oC}};let JEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({providers:[QEe,iO],imports:[wt,io,Rc,nC,BEe,tF,G1,wt]}),n})(),SU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({}),n})(),eAe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({providers:[iO],imports:[SU,n9,wt,SU,n9]}),n})(),rAe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[io,wt,Rc,G1,cd,hx,wt]}),n})(),cAe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[X7,wt,X7,wt]}),n})();const lAe=["button"],uAe=["*"],EU=new fe("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),AU=new fe("MatButtonToggleGroup"),hAe={provide:yr,useExisting:gn(()=>zU),multi:!0};let DU=0;class LU{constructor(e,t){this.source=e,this.value=t}}let zU=(()=>{class n{constructor(t,i){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+DU++,this.valueChange=new $t,this.change=new $t,this.appearance=i&&i.appearance?i.appearance:"standard"}get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=qt(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(i=>i.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=qt(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=qt(t),this._markButtonsForCheck()}ngOnInit(){this._selectionModel=new cM(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const i=new LU(t,this.value);this._controlValueAccessorChangeFn(i.value),this.change.emit(i)}_syncButtonToggle(t,i,s=!1,r=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?i?this._selectionModel.select(t):this._selectionModel.deselect(t):r=!0,r?Promise.resolve().then(()=>this._updateModelValue(t,s)):this._updateModelValue(t,s)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(i=>null!=t.value&&i===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(i=>this._selectValue(i))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const i=this._buttonToggles.find(s=>null!=s.value&&s.value===t);i&&(i.checked=!0,this._selectionModel.select(i))}_updateModelValue(t,i){i&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(T(Ts),T(EU,8))},n.\u0275dir=le({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,i,s){if(1&t&&Ti(s,kU,5),2&t){let r;Ot(r=Nt())&&(i._buttonToggles=r)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,i){2&t&&(Mn("aria-disabled",i.disabled),Et("mat-button-toggle-vertical",i.vertical)("mat-button-toggle-group-appearance-standard","standard"===i.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[At([hAe,{provide:AU,useExisting:n}])]}),n})();const dAe=M2(class{});let kU=(()=>{class n extends dAe{constructor(t,i,s,r,o,a){super(),this._changeDetectorRef=i,this._elementRef=s,this._focusMonitor=r,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new $t;const c=Number(o);this.tabIndex=c||0===c?c:null,this.buttonToggleGroup=t,this.appearance=a&&a.appearance?a.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const i=qt(t);i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=qt(t)}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+DU++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new LU(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return n.\u0275fac=function(t){return new(t||n)(T(AU,8),T(Ts),T(je),T(U1),e1("tabindex"),T(EU,8))},n.\u0275cmp=dt({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(t,i){if(1&t&&_i(lAe,5),2&t){let s;Ot(s=Nt())&&(i._buttonElement=s.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,i){1&t&&We("focus",function(){return i.focus()}),2&t&&(Mn("aria-label",null)("aria-labelledby",null)("id",i.id)("name",null),Et("mat-button-toggle-standalone",!i.buttonToggleGroup)("mat-button-toggle-checked",i.checked)("mat-button-toggle-disabled",i.disabled)("mat-button-toggle-appearance-standard","standard"===i.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[pe],ngContentSelectors:uAe,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,i){if(1&t&&(Ki(),M(0,"button",0,1),We("click",function(){return i._onButtonClick()}),M(2,"span",2),Vn(3),S()(),te(4,"span",3)(5,"span",4)),2&t){const s=Si(1);Z("id",i.buttonId)("disabled",i.disabled||null),Mn("tabindex",i.disabled?-1:i.tabIndex)("aria-pressed",i.checked)("name",i._getButtonName())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby),H(5),Z("matRippleTrigger",s)("matRippleDisabled",i.disableRipple||i.disabled)}},dependencies:[C2],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),n})(),fAe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[wt,G1,wt]}),n})(),gAe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[Ic,Rc,io,nC,wt,wt]}),n})();const xAe={provide:new fe("mat-tooltip-scroll-strategy"),deps:[r1],useFactory:function bAe(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let CAe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({providers:[xAe],imports:[hx,io,Ic,wt,wt,u3]}),n})();const AAe={provide:new fe("mat-select-scroll-strategy"),deps:[r1],useFactory:function EAe(n){return()=>n.scrollStrategies.reposition()}};let DAe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({providers:[AAe],imports:[io,Ic,lO,wt,u3,n9,lO,wt]}),n})();function LAe(n,e){if(1&n&&(wi(),te(0,"circle",4)),2&n){const t=Ge(),i=Si(1);Qs("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),Mn("r",t._getCircleRadius())}}function zAe(n,e){if(1&n&&(wi(),te(0,"circle",4)),2&n){const t=Ge(),i=Si(1);Qs("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),Mn("r",t._getCircleRadius())}}const RAe=v3(class{constructor(n){this._elementRef=n}},"primary"),IAe=new fe("mat-progress-spinner-default-options",{providedIn:"root",factory:function HAe(){return{diameter:100}}});class Zc extends RAe{constructor(e,t,i,s,r,o,a,c){super(e),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=fi.EMPTY,this.mode="determinate";const l=Zc._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),l.has(i.head)||l.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===s&&!!r&&!r._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),r&&(r.color&&(this.color=this.defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth)),t.isBrowser&&t.SAFARI&&a&&o&&c&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&c.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=zo(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=zo(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,zo(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=HH(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){const t=50*(e.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,i=Zc._diameters;let s=i.get(e);if(!s||!s.has(t)){const r=this._document.createElement("style");r.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),r.textContent=this._getAnimationText(),e.appendChild(r),s||(s=new Set,i.set(e,s)),s.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Zc._diameters=new WeakMap,Zc.\u0275fac=function(e){return new(e||Zc)(T(je),T(Br),T(Ct,8),T(Do,8),T(IAe),T(Ts),T(jh),T(Lt))},Zc.\u0275cmp=dt({type:Zc,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(Mn("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),Qs("width",t.diameter,"px")("height",t.diameter,"px"),Et("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[pe],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(wi(),M(0,"svg",0,1),Ve(2,LAe,1,11,"circle",2),Ve(3,zAe,1,9,"circle",3),S()),2&e&&(Qs("width",t.diameter,"px")("height",t.diameter,"px"),Z("ngSwitch","indeterminate"===t.mode),Mn("viewBox",t._getViewBox()),H(2),Z("ngSwitchCase",!0),H(1),Z("ngSwitchCase",!1))},dependencies:[t7,QI],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let PAe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[wt,io,wt]}),n})();const NAe=[[["caption"]],[["colgroup"],["col"]]],FAe=["caption","colgroup, col"];function cC(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=qt(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const a6=new fe("CDK_TABLE");let c6=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(T(Js))},n.\u0275dir=le({type:n,selectors:[["","cdkCellDef",""]]}),n})(),l6=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(T(Js))},n.\u0275dir=le({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),i9=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(T(Js))},n.\u0275dir=le({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class WAe{}const jAe=cC(WAe);let R2=(()=>{class n extends jAe{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const i=this._stickyEnd;this._stickyEnd=qt(t),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(T(a6,8))},n.\u0275dir=le({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,i,s){if(1&t&&(Ti(s,c6,5),Ti(s,l6,5),Ti(s,i9,5)),2&t){let r;Ot(r=Nt())&&(i.cell=r.first),Ot(r=Nt())&&(i.headerCell=r.first),Ot(r=Nt())&&(i.footerCell=r.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[At([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),pe]}),n})();class lC{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let uC=(()=>{class n extends lC{constructor(t,i){super(t,i)}}return n.\u0275fac=function(t){return new(t||n)(T(R2),T(je))},n.\u0275dir=le({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[pe]}),n})(),hC=(()=>{class n extends lC{constructor(t,i){if(super(t,i),1===t._table?._elementRef.nativeElement.nodeType){const s=t._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===s||"treegrid"===s?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(T(R2),T(je))},n.\u0275dir=le({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[pe]}),n})();class HU{constructor(){this.tasks=[],this.endTasks=[]}}const dC=new fe("_COALESCED_STYLE_SCHEDULER");let VU=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new Tt}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new HU,this._getScheduleObservable().pipe(Bn(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new HU;for(const i of t.tasks)i();for(const i of t.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?ms(Promise.resolve(void 0)):this._ngZone.onStable.pipe(cr(1))}}return n.\u0275fac=function(t){return new(t||n)(J(Lt))},n.\u0275prov=_e({token:n,factory:n.\u0275fac}),n})(),fC=(()=>{class n{constructor(t,i){this.template=t,this._differs=i}ngOnChanges(t){if(!this._columnsDiffer){const i=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof Ud?t.headerCell.template:this instanceof Gd?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(T(Js),T(Ca))},n.\u0275dir=le({type:n,features:[Bi]}),n})();class $Ae extends fC{}const qAe=cC($Ae);let Ud=(()=>{class n extends qAe{constructor(t,i,s){super(t,i),this._table=s}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(T(Js),T(Ca),T(a6,8))},n.\u0275dir=le({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[pe,Bi]}),n})();class YAe extends fC{}const XAe=cC(YAe);let Gd=(()=>{class n extends XAe{constructor(t,i,s){super(t,i),this._table=s}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(T(Js),T(Ca),T(a6,8))},n.\u0275dir=le({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[pe,Bi]}),n})(),s9=(()=>{class n extends fC{constructor(t,i,s){super(t,i),this._table=s}}return n.\u0275fac=function(t){return new(t||n)(T(Js),T(Ca),T(a6,8))},n.\u0275dir=le({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[pe]}),n})(),I2=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(t){return new(t||n)(T(er))},n.\u0275dir=le({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),pC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=dt({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&I1(0,0)},dependencies:[I2],encapsulation:2}),n})(),gC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=dt({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&I1(0,0)},dependencies:[I2],encapsulation:2}),n})(),r9=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(t){return new(t||n)(T(Js))},n.\u0275dir=le({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const PU=["top","bottom","left","right"];class ZAe{constructor(e,t,i,s,r=!0,o=!0,a){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=i,this._coalescedStyleScheduler=s,this._isBrowser=r,this._needsPositionStickyOnElement=o,this._positionListener=a,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const i=[];for(const s of e)if(s.nodeType===s.ELEMENT_NODE){i.push(s);for(let r=0;r<s.children.length;r++)i.push(s.children[r])}this._coalescedStyleScheduler.schedule(()=>{for(const s of i)this._removeStickyStyle(s,t)})}updateStickyColumns(e,t,i,s=!0){if(!e.length||!this._isBrowser||!t.some(d=>d)&&!i.some(d=>d))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const r=e[0],o=r.children.length,a=this._getCellWidths(r,s),c=this._getStickyStartColumnPositions(a,t),l=this._getStickyEndColumnPositions(a,i),u=t.lastIndexOf(!0),h=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const d="rtl"===this.direction,f=d?"right":"left",p=d?"left":"right";for(const m of e)for(let g=0;g<o;g++){const v=m.children[g];t[g]&&this._addStickyStyle(v,f,c[g],g===u),i[g]&&this._addStickyStyle(v,p,l[g],g===h)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===u?[]:a.slice(0,u+1).map((m,g)=>t[g]?m:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===h?[]:a.slice(h).map((m,g)=>i[g+h]?m:null).reverse()}))})}stickRows(e,t,i){if(!this._isBrowser)return;const s="bottom"===i?e.slice().reverse():e,r="bottom"===i?t.slice().reverse():t,o=[],a=[],c=[];for(let u=0,h=0;u<s.length;u++){if(!r[u])continue;o[u]=h;const d=s[u];c[u]=this._isNativeHtmlTable?Array.from(d.children):[d];const f=d.getBoundingClientRect().height;h+=f,a[u]=f}const l=r.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let u=0;u<s.length;u++){if(!r[u])continue;const h=o[u],d=u===l;for(const f of c[u])this._addStickyStyle(f,i,h,d)}"top"===i?this._positionListener?.stickyHeaderRowsUpdated({sizes:a,offsets:o,elements:c}):this._positionListener?.stickyFooterRowsUpdated({sizes:a,offsets:o,elements:c})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const i=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(s=>!s)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const s of t)e.style[s]="",e.classList.remove(this._borderCellCss[s]);PU.some(s=>-1===t.indexOf(s)&&e.style[s])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,i,s){e.classList.add(this._stickCellCss),s&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${i}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let i=0;for(const s of PU)e.style[s]&&(i+=t[s]);return i?`${i}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],s=e.children;for(let r=0;r<s.length;r++)i.push(s[r].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(e,t){const i=[];let s=0;for(let r=0;r<e.length;r++)t[r]&&(i[r]=s,s+=e[r]);return i}_getStickyEndColumnPositions(e,t){const i=[];let s=0;for(let r=e.length;r>0;r--)t[r]&&(i[r]=s,s+=e[r]);return i}}const vC=new fe("CDK_SPL");let o9=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(T(er),T(je))},n.\u0275dir=le({type:n,selectors:[["","rowOutlet",""]]}),n})(),a9=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(T(er),T(je))},n.\u0275dir=le({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),c9=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(T(er),T(je))},n.\u0275dir=le({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),l9=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(T(er),T(je))},n.\u0275dir=le({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),u9=(()=>{class n{constructor(t,i,s,r,o,a,c,l,u,h,d,f){this._differs=t,this._changeDetectorRef=i,this._elementRef=s,this._dir=o,this._platform=c,this._viewRepeater=l,this._coalescedStyleScheduler=u,this._viewportRuler=h,this._stickyPositioningListener=d,this._ngZone=f,this._onDestroy=new Tt,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new $t,this.viewChange=new Un({start:0,end:Number.MAX_VALUE}),r||this._elementRef.nativeElement.setAttribute("role","table"),this._document=a,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=qt(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=qt(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(Bn(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),aM(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,i,(s,r,o)=>this._getEmbeddedViewArgs(s.item,o),s=>s.item.data,s=>{1===s.operation&&s.context&&this._renderCellTemplateForItem(s.record.item.rowDef,s.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(s=>{i.get(s.currentIndex).context.$implicit=s.item.data}),this._updateNoDataRow(),this._ngZone&&Lt.isInAngularZone()?this._ngZone.onStable.pipe(cr(1),Bn(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),s=this._elementRef.nativeElement.querySelector("thead");s&&(s.style.display=t.length?"":"none");const r=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,r,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),s=this._elementRef.nativeElement.querySelector("tfoot");s&&(s.style.display=t.length?"":"none");const r=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,r,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,r),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),s=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...i,...s],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((r,o)=>{this._addStickyColumnStyles([r],this._headerRowDefs[o])}),this._rowDefs.forEach(r=>{const o=[];for(let a=0;a<i.length;a++)this._renderRows[a].rowDef===r&&o.push(i[a]);this._addStickyColumnStyles(o,r)}),s.forEach((r,o)=>{this._addStickyColumnStyles([r],this._footerRowDefs[o])}),Array.from(this._columnDefsByName.values()).forEach(r=>r.resetStickyChanged())}_getAllRenderRows(){const t=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let s=0;s<this._data.length;s++){let r=this._data[s];const o=this._getRenderRowsForData(r,s,i.get(r));this._cachedRenderRowsMap.has(r)||this._cachedRenderRowsMap.set(r,new WeakMap);for(let a=0;a<o.length;a++){let c=o[a];const l=this._cachedRenderRowsMap.get(c.data);l.has(c.rowDef)?l.get(c.rowDef).push(c):l.set(c.rowDef,[c]),t.push(c)}}return t}_getRenderRowsForData(t,i,s){return this._getRowDefs(t,i).map(o=>{const a=s&&s.has(o)?s.get(o):[];if(a.length){const c=a.shift();return c.dataIndex=i,c}return{data:t,rowDef:o,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),h9(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=h9(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=h9(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=h9(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(o,a)=>o||!!a.getColumnsDiff(),i=this._rowDefs.reduce(t,!1);i&&this._forceRenderDataRows();const s=this._headerRowDefs.reduce(t,!1);s&&this._forceRenderHeaderRows();const r=this._footerRowDefs.reduce(t,!1);return r&&this._forceRenderFooterRows(),i||s||r}_switchDataSource(t){this._data=[],aM(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;aM(this.dataSource)?t=this.dataSource.connect(this):function OAe(n){return!!n&&(n instanceof Tn||xn(n.lift)&&xn(n.subscribe))}(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=pt(this.dataSource)),this._renderChangeSubscription=t.pipe(Bn(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,i)=>this._renderRow(this._headerRowOutlet,t,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,i)=>this._renderRow(this._footerRowOutlet,t,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,i){const s=Array.from(i.columns||[]).map(a=>this._columnDefsByName.get(a)),r=s.map(a=>a.sticky),o=s.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(t,r,o,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const i=[];for(let s=0;s<t.viewContainer.length;s++){const r=t.viewContainer.get(s);i.push(r.rootNodes[0])}return i}_getRowDefs(t,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let s=[];if(this.multiTemplateDataRows)s=this._rowDefs.filter(r=>!r.when||r.when(i,t));else{let r=this._rowDefs.find(o=>o.when&&o.when(i,t))||this._defaultRowDef;r&&s.push(r)}return s}_getEmbeddedViewArgs(t,i){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:i}}_renderRow(t,i,s,r={}){const o=t.viewContainer.createEmbeddedView(i.template,r,s);return this._renderCellTemplateForItem(i,r),o}_renderCellTemplateForItem(t,i){for(let s of this._getCellTemplates(t))I2.mostRecentCellOutlet&&I2.mostRecentCellOutlet._viewContainer.createEmbeddedView(s,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let i=0,s=t.length;i<s;i++){const o=t.get(i).context;o.count=s,o.first=0===i,o.last=i===s-1,o.even=i%2==0,o.odd=!o.even,this.multiTemplateDataRows?(o.dataIndex=this._renderRows[i].dataIndex,o.renderIndex=i):o.index=this._renderRows[i].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,i=>{const s=this._columnDefsByName.get(i);return t.extractCellTemplate(s)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const s of i){const r=this._document.createElement(s.tag);r.setAttribute("role","rowgroup");for(const o of s.outlets)r.appendChild(o.elementRef.nativeElement);t.appendChild(r)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(i,s)=>i||s.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new ZAe(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:pt()).pipe(Bn(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const s=this._noDataRowOutlet.viewContainer;if(i){const r=s.createEmbeddedView(t.templateRef),o=r.rootNodes[0];1===r.rootNodes.length&&o?.nodeType===this._document.ELEMENT_NODE&&(o.setAttribute("role","row"),o.classList.add(t._contentClassName))}else s.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(t){return new(t||n)(T(Ca),T(Ts),T(je),e1("role"),T(_2,8),T(Ct),T(Br),T(zd),T(dC),T(jh),T(vC,12),T(Lt,8))},n.\u0275cmp=dt({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,i,s){if(1&t&&(Ti(s,r9,5),Ti(s,R2,5),Ti(s,s9,5),Ti(s,Ud,5),Ti(s,Gd,5)),2&t){let r;Ot(r=Nt())&&(i._noDataRow=r.first),Ot(r=Nt())&&(i._contentColumnDefs=r),Ot(r=Nt())&&(i._contentRowDefs=r),Ot(r=Nt())&&(i._contentHeaderRowDefs=r),Ot(r=Nt())&&(i._contentFooterRowDefs=r)}},viewQuery:function(t,i){if(1&t&&(_i(o9,7),_i(a9,7),_i(c9,7),_i(l9,7)),2&t){let s;Ot(s=Nt())&&(i._rowOutlet=s.first),Ot(s=Nt())&&(i._headerRowOutlet=s.first),Ot(s=Nt())&&(i._footerRowOutlet=s.first),Ot(s=Nt())&&(i._noDataRowOutlet=s.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,i){2&t&&Et("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[At([{provide:a6,useExisting:n},{provide:zd,useClass:nF},{provide:dC,useClass:VU},{provide:vC,useValue:null}])],ngContentSelectors:FAe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(Ki(NAe),Vn(0),Vn(1,1),I1(2,0)(3,1)(4,2)(5,3))},dependencies:[o9,a9,c9,l9],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})();function h9(n,e){return n.concat(Array.from(e))}let QAe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[g7]}),n})();const JAe=[[["caption"]],[["colgroup"],["col"]]],eDe=["caption","colgroup, col"];let _C=(()=>{class n extends u9{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275cmp=dt({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(t,i){2&t&&Et("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[At([{provide:zd,useClass:nF},{provide:u9,useExisting:n},{provide:a6,useExisting:n},{provide:dC,useClass:VU},{provide:vC,useValue:null}]),pe],ngContentSelectors:eDe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(Ki(JAe),Vn(0),Vn(1,1),I1(2,0)(3,1)(4,2)(5,3))},dependencies:[o9,a9,c9,l9],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})(),d9=(()=>{class n extends c6{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","matCellDef",""]],features:[At([{provide:c6,useExisting:n}]),pe]}),n})(),f9=(()=>{class n extends l6{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","matHeaderCellDef",""]],features:[At([{provide:l6,useExisting:n}]),pe]}),n})(),p9=(()=>{class n extends R2{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[At([{provide:R2,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),pe]}),n})(),m9=(()=>{class n extends uC{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[pe]}),n})(),g9=(()=>{class n extends hC{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[pe]}),n})(),yC=(()=>{class n extends Ud{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[At([{provide:Ud,useExisting:n}]),pe]}),n})(),bC=(()=>{class n extends s9{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[At([{provide:s9,useExisting:n}]),pe]}),n})(),xC=(()=>{class n extends pC{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275cmp=dt({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[At([{provide:pC,useExisting:n}]),pe],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&I1(0,0)},dependencies:[I2],encapsulation:2}),n})(),MC=(()=>{class n extends gC{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275cmp=dt({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[At([{provide:gC,useExisting:n}]),pe],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&I1(0,0)},dependencies:[I2],encapsulation:2}),n})(),uDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[QAe,wt,wt]}),n})(),dDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[Ic,eAe,g_e,tF,nC,z_e,VCe,pTe,wTe,OTe,GTe,uEe,CEe,JEe,wEe,VEe,n9,uDe,yCe,rAe,cAe,G1,fAe,gAe,CAe,DAe,PAe,g7]}),n})(),cLe=(()=>{class n extends Ji{buildStyles(t,i){let s=!1;(t=t||"none").endsWith("!")&&(t=t.substring(0,t.indexOf("!")),s=!0);const r={display:i.inline?"inline-grid":"grid","grid-auto-columns":"","grid-template-columns":""};return r[s?"grid-auto-columns":"grid-template-columns"]=t,r}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lLe=(()=>{class n extends Gi{constructor(t,i,s,r){super(t,i,s,r),this.DIRECTIVE_KEY="grid-columns",this._inline=!1,this.init()}get inline(){return this._inline}set inline(t){this._inline=qt(t)}updateWithValue(t){this.styleCache=this.inline?hLe:uLe,this.addStyles(t,{inline:this.inline})}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(cLe),T(Ai),T(Ri))},n.\u0275dir=le({type:n,inputs:{inline:["gdInline","inline"]},features:[pe]}),n})();const uLe=new Map,hLe=new Map,dLe=["gdColumns","gdColumns.xs","gdColumns.sm","gdColumns.md","gdColumns.lg","gdColumns.xl","gdColumns.lt-sm","gdColumns.lt-md","gdColumns.lt-lg","gdColumns.lt-xl","gdColumns.gt-xs","gdColumns.gt-sm","gdColumns.gt-md","gdColumns.gt-lg"];let jU=(()=>{class n extends lLe{constructor(){super(...arguments),this.inputs=dLe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","gdColumns",""],["","gdColumns.xs",""],["","gdColumns.sm",""],["","gdColumns.md",""],["","gdColumns.lg",""],["","gdColumns.xl",""],["","gdColumns.lt-sm",""],["","gdColumns.lt-md",""],["","gdColumns.lt-lg",""],["","gdColumns.lt-xl",""],["","gdColumns.gt-xs",""],["","gdColumns.gt-sm",""],["","gdColumns.gt-md",""],["","gdColumns.gt-lg",""]],inputs:{gdColumns:"gdColumns","gdColumns.xs":"gdColumns.xs","gdColumns.sm":"gdColumns.sm","gdColumns.md":"gdColumns.md","gdColumns.lg":"gdColumns.lg","gdColumns.xl":"gdColumns.xl","gdColumns.lt-sm":"gdColumns.lt-sm","gdColumns.lt-md":"gdColumns.lt-md","gdColumns.lt-lg":"gdColumns.lt-lg","gdColumns.lt-xl":"gdColumns.lt-xl","gdColumns.gt-xs":"gdColumns.gt-xs","gdColumns.gt-sm":"gdColumns.gt-sm","gdColumns.gt-md":"gdColumns.gt-md","gdColumns.gt-lg":"gdColumns.gt-lg"},features:[pe]}),n})(),pLe=(()=>{class n extends Ji{buildStyles(t,i){return{display:i.inline?"inline-grid":"grid","grid-gap":t||"0"}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mLe=(()=>{class n extends Gi{constructor(t,i,s,r){super(t,s,i,r),this.DIRECTIVE_KEY="grid-gap",this._inline=!1,this.init()}get inline(){return this._inline}set inline(t){this._inline=qt(t)}updateWithValue(t){this.styleCache=this.inline?vLe:gLe,this.addStyles(t,{inline:this.inline})}}return n.\u0275fac=function(t){return new(t||n)(T(je),T(Ai),T(pLe),T(Ri))},n.\u0275dir=le({type:n,inputs:{inline:["gdInline","inline"]},features:[pe]}),n})();const gLe=new Map,vLe=new Map,_Le=["gdGap","gdGap.xs","gdGap.sm","gdGap.md","gdGap.lg","gdGap.xl","gdGap.lt-sm","gdGap.lt-md","gdGap.lt-lg","gdGap.lt-xl","gdGap.gt-xs","gdGap.gt-sm","gdGap.gt-md","gdGap.gt-lg"];let $U=(()=>{class n extends mLe{constructor(){super(...arguments),this.inputs=_Le}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ke(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","gdGap",""],["","gdGap.xs",""],["","gdGap.sm",""],["","gdGap.md",""],["","gdGap.lg",""],["","gdGap.xl",""],["","gdGap.lt-sm",""],["","gdGap.lt-md",""],["","gdGap.lt-lg",""],["","gdGap.lt-xl",""],["","gdGap.gt-xs",""],["","gdGap.gt-sm",""],["","gdGap.gt-md",""],["","gdGap.gt-lg",""]],inputs:{gdGap:"gdGap","gdGap.xs":"gdGap.xs","gdGap.sm":"gdGap.sm","gdGap.md":"gdGap.md","gdGap.lg":"gdGap.lg","gdGap.xl":"gdGap.xl","gdGap.lt-sm":"gdGap.lt-sm","gdGap.lt-md":"gdGap.lt-md","gdGap.lt-lg":"gdGap.lt-lg","gdGap.lt-xl":"gdGap.lt-xl","gdGap.gt-xs":"gdGap.gt-xs","gdGap.gt-sm":"gdGap.gt-sm","gdGap.gt-md":"gdGap.gt-md","gdGap.gt-lg":"gdGap.gt-lg"},features:[pe]}),n})(),YU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[xx]}),n})(),kLe=(()=>{class n{constructor(t,i){H0(i)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,i=[]){return{ngModule:n,providers:t.serverLoaded?[{provide:W1,useValue:{...Mx,...t}},{provide:Cx,useValue:i,multi:!0},{provide:X0,useValue:!0}]:[{provide:W1,useValue:{...Mx,...t}},{provide:Cx,useValue:i,multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)(J(X0),J(Ao))},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({imports:[NO,MB,YU,NO,MB,YU]}),n})();const CC=new fe("DISQUS_SHORTNAME");class H2{constructor(e,t){this.shortname=e,this._document=t}get DISQUS(){return this._document.defaultView.DISQUS}get disqus_config(){return this._document.defaultView.disqus_config}set disqus_config(e){this._document.defaultView.disqus_config=e}}H2.\u0275fac=function(e){return new(e||H2)(J(CC),J(Ct))},H2.\u0275prov=_e({token:H2,factory:H2.\u0275fac,providedIn:"root"}),H2.ngInjectableDef=Zse({factory:function(){return new H2(Dn(CC),Dn(Ct))},token:H2,providedIn:"root"});let u6=(()=>{class n{constructor(t,i,s){this.renderer=t,this.el=i,this.dService=s,this.newComment=new $t(!0),this.ready=new $t(!0),this.paginate=new $t(!0)}ngOnChanges(){this.dService.DISQUS?this.reset():this.addDisqusScript()}addDisqusScript(){this.dService.disqus_config=this.getConfig();const t=this.renderer.createElement("script");t.src=`//${this.dService.shortname}.disqus.com/embed.js`,t.async=!0,t.type="text/javascript",this.renderer.setAttribute(t,"data-timestamp",(new Date).getTime().toString()),this.renderer.appendChild(this.el.nativeElement,t)}reset(){this.dService.DISQUS.reset({reload:!0,config:this.getConfig()})}getConfig(){const t=this;return function(){this.page.identifier=t.identifier,this.page.url=t.validateUrl(t.url),this.page.title=t.title,this.category_id=t.category,this.language=t.language,this.callbacks.onNewComment=[i=>{t.newComment.emit(i)}],this.callbacks.onReady=[i=>{t.ready.emit(i)}],this.callbacks.onPaginate=[i=>{t.paginate.emit(i)}]}}validateUrl(t){if(t){if(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t))return t;console.warn("[Disqus]: Invalid URL")}}}return n.\u0275fac=function(t){return new(t||n)(T(To),T(je),T(H2))},n.\u0275cmp=dt({type:n,selectors:[["disqus"]],inputs:{url:"url",identifier:"identifier",title:"title",category:"category",language:"language"},outputs:{newComment:"newComment",ready:"ready",paginate:"paginate"},features:[Bi],decls:1,vars:0,consts:[["id","disqus_thread"]],template:function(t,i){1&t&&te(0,"div",0)},encapsulation:2,changeDetection:0}),n})(),RLe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:CC,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({}),n})();function XU(n,e,t,i,s,r,o){try{var a=n[r](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,s)}function ts(n){return function(){var e=this,t=arguments;return new Promise(function(i,s){var r=n.apply(e,t);function o(c){XU(r,i,s,o,a,"next",c)}function a(c){XU(r,i,s,o,a,"throw",c)}o(void 0)})}}const wC=new fe("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),ZU=new fe("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:n}=Dn(Ct);if(!n)throw new Error("Window is not available");return n}}),HLe=new fe("ngx-data-layer",{providedIn:"root",factory:()=>function ILe(n){return n?n.dataLayer=n.dataLayer||[]:null}(Dn(ZU))}),KU=new fe("ngx-gtag-fn",{providedIn:"root",factory:()=>function VLe(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(Dn(ZU),Dn(HLe))}),OLe={provide:kh,multi:!0,useFactory:function NLe(n,e,t){return ts(function*(){if(!n.trackingCode)return void(Uf()||console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule."));if(!e)return void(Uf()||console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface."));t||Uf()||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=n?.initCommands??[],n.initCommands.find(r=>"config"===r.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(r=>"js"===r.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const r of n.initCommands)e(r.command,...r.values);const i=t.createElement("script");i.async=!0,i.src=n.uri,n.nonce&&i.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(i)})},deps:[wC,KU,Ct]};new fe("ngx-google-analytics-routing-settings",{factory:()=>({})});let ULe=(()=>{class n{static forRoot(t,i=[],s,r,o){return{ngModule:n,providers:[{provide:wC,useValue:{trackingCode:t,initCommands:i,uri:s,enableTracing:r,nonce:o}},OLe]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ft({type:n}),n.\u0275inj=ut({}),n})();function SC(n,e){let t=0;if(void 0===e)for(let i of n)(i=+i)&&(t+=i);else{let i=-1;for(let s of n)(s=+e(s,++i,n))&&(t+=s)}return t}function GLe(){}function TC(n){return null==n?GLe:function(){return this.querySelector(n)}}function jLe(n){return null==n?[]:Array.isArray(n)?n:Array.from(n)}function $Le(){return[]}function JU(n){return null==n?$Le:function(){return this.querySelectorAll(n)}}function eG(n){return function(){return this.matches(n)}}function tG(n){return function(e){return e.matches(n)}}var XLe=Array.prototype.find;function KLe(){return this.firstElementChild}var JLe=Array.prototype.filter;function eze(){return Array.from(this.children)}function nG(n){return new Array(n.length)}function v9(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}function rze(n){return function(){return n}}function oze(n,e,t,i,s,r){for(var a,o=0,c=e.length,l=r.length;o<l;++o)(a=e[o])?(a.__data__=r[o],i[o]=a):t[o]=new v9(n,r[o]);for(;o<c;++o)(a=e[o])&&(s[o]=a)}function aze(n,e,t,i,s,r,o){var a,c,f,l=new Map,u=e.length,h=r.length,d=new Array(u);for(a=0;a<u;++a)(c=e[a])&&(d[a]=f=o.call(c,c.__data__,a,e)+"",l.has(f)?s[a]=c:l.set(f,c));for(a=0;a<h;++a)f=o.call(n,r[a],a,r)+"",(c=l.get(f))?(i[a]=c,c.__data__=r[a],l.delete(f)):t[a]=new v9(n,r[a]);for(a=0;a<u;++a)(c=e[a])&&l.get(d[a])===c&&(s[a]=c)}function cze(n){return n.__data__}function uze(n){return"object"==typeof n&&"length"in n?n:Array.from(n)}function gze(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}v9.prototype={constructor:v9,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var EC="http://www.w3.org/1999/xhtml";const iG={svg:"http://www.w3.org/2000/svg",xhtml:EC,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _9(n){var e=n+="",t=e.indexOf(":");return t>=0&&"xmlns"!==(e=n.slice(0,t))&&(n=n.slice(t+1)),iG.hasOwnProperty(e)?{space:iG[e],local:n}:n}function Cze(n){return function(){this.removeAttribute(n)}}function wze(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Sze(n,e){return function(){this.setAttribute(n,e)}}function Tze(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function Eze(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}function Aze(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function sG(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function Lze(n){return function(){this.style.removeProperty(n)}}function zze(n,e,t){return function(){this.style.setProperty(n,e,t)}}function kze(n,e,t){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function h6(n,e){return n.style.getPropertyValue(e)||sG(n).getComputedStyle(n,null).getPropertyValue(e)}function Ize(n){return function(){delete this[n]}}function Hze(n,e){return function(){this[n]=e}}function Vze(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}function rG(n){return n.trim().split(/^|\s+/)}function AC(n){return n.classList||new oG(n)}function oG(n){this._node=n,this._names=rG(n.getAttribute("class")||"")}function aG(n,e){for(var t=AC(n),i=-1,s=e.length;++i<s;)t.add(e[i])}function cG(n,e){for(var t=AC(n),i=-1,s=e.length;++i<s;)t.remove(e[i])}function Oze(n){return function(){aG(this,n)}}function Nze(n){return function(){cG(this,n)}}function Fze(n,e){return function(){(e.apply(this,arguments)?aG:cG)(this,n)}}function Uze(){this.textContent=""}function Gze(n){return function(){this.textContent=n}}function Wze(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function $ze(){this.innerHTML=""}function qze(n){return function(){this.innerHTML=n}}function Yze(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function Zze(){this.nextSibling&&this.parentNode.appendChild(this)}function Qze(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function eke(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===EC&&e.documentElement.namespaceURI===EC?e.createElement(n):e.createElementNS(t,n)}}function tke(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function lG(n){var e=_9(n);return(e.local?tke:eke)(e)}function ike(){return null}function rke(){var n=this.parentNode;n&&n.removeChild(this)}function ake(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function cke(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function dke(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function fke(n){return function(){var e=this.__on;if(e){for(var r,t=0,i=-1,s=e.length;t<s;++t)r=e[t],n.type&&r.type!==n.type||r.name!==n.name?e[++i]=r:this.removeEventListener(r.type,r.listener,r.options);++i?e.length=i:delete this.__on}}}function pke(n,e,t){return function(){var s,i=this.__on,r=function hke(n){return function(e){n.call(this,e,this.__data__)}}(e);if(i)for(var o=0,a=i.length;o<a;++o)if((s=i[o]).type===n.type&&s.name===n.name)return this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=r,s.options=t),void(s.value=e);this.addEventListener(n.type,r,t),s={type:n.type,name:n.name,value:e,listener:r,options:t},i?i.push(s):this.__on=[s]}}function uG(n,e,t){var i=sG(n),s=i.CustomEvent;"function"==typeof s?s=new s(e,t):(s=i.document.createEvent("Event"),t?(s.initEvent(e,t.bubbles,t.cancelable),s.detail=t.detail):s.initEvent(e,!1,!1)),n.dispatchEvent(s)}function gke(n,e){return function(){return uG(this,n,e)}}function vke(n,e){return function(){return uG(this,n,e.apply(this,arguments))}}oG.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var hG=[null];function Ho(n,e){this._groups=n,this._parents=e}function dG(){return new Ho([[document.documentElement]],hG)}Ho.prototype=dG.prototype={constructor:Ho,select:function WLe(n){"function"!=typeof n&&(n=TC(n));for(var e=this._groups,t=e.length,i=new Array(t),s=0;s<t;++s)for(var c,l,r=e[s],o=r.length,a=i[s]=new Array(o),u=0;u<o;++u)(c=r[u])&&(l=n.call(c,c.__data__,u,r))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new Ho(i,this._parents)},selectAll:function YLe(n){n="function"==typeof n?function qLe(n){return function(){return jLe(n.apply(this,arguments))}}(n):JU(n);for(var e=this._groups,t=e.length,i=[],s=[],r=0;r<t;++r)for(var c,o=e[r],a=o.length,l=0;l<a;++l)(c=o[l])&&(i.push(n.call(c,c.__data__,l,o)),s.push(c));return new Ho(i,s)},selectChild:function QLe(n){return this.select(null==n?KLe:function ZLe(n){return function(){return XLe.call(this.children,n)}}("function"==typeof n?n:tG(n)))},selectChildren:function nze(n){return this.selectAll(null==n?eze:function tze(n){return function(){return JLe.call(this.children,n)}}("function"==typeof n?n:tG(n)))},filter:function ize(n){"function"!=typeof n&&(n=eG(n));for(var e=this._groups,t=e.length,i=new Array(t),s=0;s<t;++s)for(var c,r=e[s],o=r.length,a=i[s]=[],l=0;l<o;++l)(c=r[l])&&n.call(c,c.__data__,l,r)&&a.push(c);return new Ho(i,this._parents)},data:function lze(n,e){if(!arguments.length)return Array.from(this,cze);var t=e?aze:oze,i=this._parents,s=this._groups;"function"!=typeof n&&(n=rze(n));for(var r=s.length,o=new Array(r),a=new Array(r),c=new Array(r),l=0;l<r;++l){var u=i[l],h=s[l],d=h.length,f=uze(n.call(u,u&&u.__data__,l,i)),p=f.length,m=a[l]=new Array(p),g=o[l]=new Array(p),v=c[l]=new Array(d);t(u,h,m,g,v,f,e);for(var b,x,_=0,y=0;_<p;++_)if(b=m[_]){for(_>=y&&(y=_+1);!(x=g[y])&&++y<p;);b._next=x||null}}return(o=new Ho(o,i))._enter=a,o._exit=c,o},enter:function sze(){return new Ho(this._enter||this._groups.map(nG),this._parents)},exit:function hze(){return new Ho(this._exit||this._groups.map(nG),this._parents)},join:function dze(n,e,t){var i=this.enter(),s=this,r=this.exit();return"function"==typeof n?(i=n(i))&&(i=i.selection()):i=i.append(n+""),null!=e&&(s=e(s))&&(s=s.selection()),null==t?r.remove():t(r),i&&s?i.merge(s).order():s},merge:function fze(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,s=t.length,o=Math.min(s,i.length),a=new Array(s),c=0;c<o;++c)for(var f,l=t[c],u=i[c],h=l.length,d=a[c]=new Array(h),p=0;p<h;++p)(f=l[p]||u[p])&&(d[p]=f);for(;c<s;++c)a[c]=t[c];return new Ho(a,this._parents)},selection:function bke(){return this},order:function pze(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var o,i=n[e],s=i.length-1,r=i[s];--s>=0;)(o=i[s])&&(r&&4^o.compareDocumentPosition(r)&&r.parentNode.insertBefore(o,r),r=o);return this},sort:function mze(n){function e(h,d){return h&&d?n(h.__data__,d.__data__):!h-!d}n||(n=gze);for(var t=this._groups,i=t.length,s=new Array(i),r=0;r<i;++r){for(var l,o=t[r],a=o.length,c=s[r]=new Array(a),u=0;u<a;++u)(l=o[u])&&(c[u]=l);c.sort(e)}return new Ho(s,this._parents).order()},call:function vze(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function _ze(){return Array.from(this)},node:function yze(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],s=0,r=i.length;s<r;++s){var o=i[s];if(o)return o}return null},size:function bze(){let n=0;for(const e of this)++n;return n},empty:function xze(){return!this.node()},each:function Mze(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var a,s=e[t],r=0,o=s.length;r<o;++r)(a=s[r])&&n.call(a,a.__data__,r,s);return this},attr:function Dze(n,e){var t=_9(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((null==e?t.local?wze:Cze:"function"==typeof e?t.local?Aze:Eze:t.local?Tze:Sze)(t,e))},style:function Rze(n,e,t){return arguments.length>1?this.each((null==e?Lze:"function"==typeof e?kze:zze)(n,e,t??"")):h6(this.node(),n)},property:function Pze(n,e){return arguments.length>1?this.each((null==e?Ize:"function"==typeof e?Vze:Hze)(n,e)):this.node()[n]},classed:function Bze(n,e){var t=rG(n+"");if(arguments.length<2){for(var i=AC(this.node()),s=-1,r=t.length;++s<r;)if(!i.contains(t[s]))return!1;return!0}return this.each(("function"==typeof e?Fze:e?Oze:Nze)(t,e))},text:function jze(n){return arguments.length?this.each(null==n?Uze:("function"==typeof n?Wze:Gze)(n)):this.node().textContent},html:function Xze(n){return arguments.length?this.each(null==n?$ze:("function"==typeof n?Yze:qze)(n)):this.node().innerHTML},raise:function Kze(){return this.each(Zze)},lower:function Jze(){return this.each(Qze)},append:function nke(n){var e="function"==typeof n?n:lG(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function ske(n,e){var t="function"==typeof n?n:lG(n),i=null==e?ike:"function"==typeof e?e:TC(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function oke(){return this.each(rke)},clone:function lke(n){return this.select(n?cke:ake)},datum:function uke(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function mke(n,e,t){var s,o,i=dke(n+""),r=i.length;if(!(arguments.length<2)){for(a=e?pke:fke,s=0;s<r;++s)this.each(a(i[s],e,t));return this}var a=this.node().__on;if(a)for(var u,c=0,l=a.length;c<l;++c)for(s=0,u=a[c];s<r;++s)if((o=i[s]).type===u.type&&o.name===u.name)return u.value},dispatch:function _ke(n,e){return this.each(("function"==typeof e?vke:gke)(n,e))},[Symbol.iterator]:function*yke(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var o,i=n[e],s=0,r=i.length;s<r;++s)(o=i[s])&&(yield o)}};const Wd=dG;var xke={value:()=>{}};function fG(){for(var i,n=0,e=arguments.length,t={};n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new y9(t)}function y9(n){this._=n}function Mke(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",s=t.indexOf(".");if(s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}function Cke(n,e){for(var s,t=0,i=n.length;t<i;++t)if((s=n[t]).name===e)return s.value}function pG(n,e,t){for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n[i]=xke,n=n.slice(0,i).concat(n.slice(i+1));break}return null!=t&&n.push({name:e,value:t}),n}y9.prototype=fG.prototype={constructor:y9,on:function(n,e){var s,t=this._,i=Mke(n+"",t),r=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++r<o;)if(s=(n=i[r]).type)t[s]=pG(t[s],n.name,e);else if(null==e)for(s in t)t[s]=pG(t[s],n.name,null);return this}for(;++r<o;)if((s=(n=i[r]).type)&&(s=Cke(t[s],n.name)))return s},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new y9(n)},call:function(n,e){if((s=arguments.length-2)>0)for(var s,r,t=new Array(s),i=0;i<s;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(i=0,s=(r=this._[n]).length;i<s;++i)r[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],s=0,r=i.length;s<r;++s)i[s].value.apply(e,t)}};const mG=fG;var b9,qd,d6=0,jd=0,$d=0,x9=0,R3=0,M9=0,Yd="object"==typeof performance&&performance.now?performance:Date,vG="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function DC(){return R3||(vG(wke),R3=Yd.now()+M9)}function wke(){R3=0}function C9(){this._call=this._time=this._next=null}function _G(n,e,t){var i=new C9;return i.restart(n,e,t),i}function yG(){R3=(x9=Yd.now())+M9,d6=jd=0;try{!function Ske(){DC(),++d6;for(var e,n=b9;n;)(e=R3-n._time)>=0&&n._call.call(void 0,e),n=n._next;--d6}()}finally{d6=0,function Eke(){for(var n,t,e=b9,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:b9=t);qd=n,LC(i)}(),R3=0}}function Tke(){var n=Yd.now(),e=n-x9;e>1e3&&(M9-=e,x9=n)}function LC(n){d6||(jd&&(jd=clearTimeout(jd)),n-R3>24?(n<1/0&&(jd=setTimeout(yG,n-Yd.now()-M9)),$d&&($d=clearInterval($d))):($d||(x9=Yd.now(),$d=setInterval(Tke,1e3)),d6=1,vG(yG)))}function bG(n,e,t){var i=new C9;return i.restart(s=>{i.stop(),n(s+e)},e=null==e?0:+e,t),i}C9.prototype=_G.prototype={constructor:C9,restart:function(n,e,t){if("function"!=typeof n)throw new TypeError("callback is not a function");t=(null==t?DC():+t)+(null==e?0:+e),!this._next&&qd!==this&&(qd?qd._next=this:b9=this,qd=this),this._call=n,this._time=t,LC()},stop:function(){this._call&&(this._call=null,this._time=1/0,LC())}};var Ake=mG("start","end","cancel","interrupt"),Dke=[];function T9(n,e,t,i,s,r){var o=n.__transition;if(o){if(t in o)return}else n.__transition={};!function Lke(n,e,t){var s,i=n.__transition;function o(l){var u,h,d,f;if(1!==t.state)return c();for(u in i)if((f=i[u]).name===t.name){if(3===f.state)return bG(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",n,n.__data__,f.index,f.group),delete i[u]):+u<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",n,n.__data__,f.index,f.group),delete i[u])}if(bG(function(){3===t.state&&(t.state=4,t.timer.restart(a,t.delay,t.time),a(l))}),t.state=2,t.on.call("start",n,n.__data__,t.index,t.group),2===t.state){for(t.state=3,s=new Array(d=t.tween.length),u=0,h=-1;u<d;++u)(f=t.tween[u].value.call(n,n.__data__,t.index,t.group))&&(s[++h]=f);s.length=h+1}}function a(l){for(var u=l<t.duration?t.ease.call(null,l/t.duration):(t.timer.restart(c),t.state=5,1),h=-1,d=s.length;++h<d;)s[h].call(n,u);5===t.state&&(t.on.call("end",n,n.__data__,t.index,t.group),c())}function c(){for(var l in t.state=6,t.timer.stop(),delete i[e],i)return;delete n.__transition}i[e]=t,t.timer=_G(function r(l){t.state=1,t.timer.restart(o,t.delay,t.time),t.delay<=l&&o(l-t.delay)},0,t.time)}(n,t,{name:e,index:i,group:s,on:Ake,tween:Dke,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:0})}function RC(n,e){var t=$1(n,e);if(t.state>0)throw new Error("too late; already scheduled");return t}function za(n,e){var t=$1(n,e);if(t.state>3)throw new Error("too late; already running");return t}function $1(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function E9(n,e){var i,s,o,t=n.__transition,r=!0;if(t){for(o in e=null==e?null:e+"",t)(i=t[o]).name===e?(s=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(s?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[o]):r=!1;r&&delete n.__transition}}function Kc(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var A9,wG=180/Math.PI,IC={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function SG(n,e,t,i,s,r){var o,a,c;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(c=n*t+e*i)&&(t-=n*c,i-=e*c),(a=Math.sqrt(t*t+i*i))&&(t/=a,i/=a,c/=a),n*i<e*t&&(n=-n,e=-e,c=-c,o=-o),{translateX:s,translateY:r,rotate:Math.atan2(e,n)*wG,skewX:Math.atan(c)*wG,scaleX:o,scaleY:a}}function TG(n,e,t,i){function s(l){return l.length?l.pop()+" ":""}return function(l,u){var h=[],d=[];return l=n(l),u=n(u),function r(l,u,h,d,f,p){if(l!==h||u!==d){var m=f.push("translate(",null,e,null,t);p.push({i:m-4,x:Kc(l,h)},{i:m-2,x:Kc(u,d)})}else(h||d)&&f.push("translate("+h+e+d+t)}(l.translateX,l.translateY,u.translateX,u.translateY,h,d),function o(l,u,h,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:h.push(s(h)+"rotate(",null,i)-2,x:Kc(l,u)})):u&&h.push(s(h)+"rotate("+u+i)}(l.rotate,u.rotate,h,d),function a(l,u,h,d){l!==u?d.push({i:h.push(s(h)+"skewX(",null,i)-2,x:Kc(l,u)}):u&&h.push(s(h)+"skewX("+u+i)}(l.skewX,u.skewX,h,d),function c(l,u,h,d,f,p){if(l!==h||u!==d){var m=f.push(s(f)+"scale(",null,",",null,")");p.push({i:m-4,x:Kc(l,h)},{i:m-2,x:Kc(u,d)})}else(1!==h||1!==d)&&f.push(s(f)+"scale("+h+","+d+")")}(l.scaleX,l.scaleY,u.scaleX,u.scaleY,h,d),l=u=null,function(f){for(var g,p=-1,m=d.length;++p<m;)h[(g=d[p]).i]=g.x(f);return h.join("")}}}var Ike=TG(function kke(n){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?IC:SG(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),Hke=TG(function Rke(n){return null!=n&&(A9||(A9=document.createElementNS("http://www.w3.org/2000/svg","g")),A9.setAttribute("transform",n),n=A9.transform.baseVal.consolidate())?SG((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):IC},", ",")",")");function Vke(n,e){var t,i;return function(){var s=za(this,n),r=s.tween;if(r!==t)for(var o=0,a=(i=t=r).length;o<a;++o)if(i[o].name===e){(i=i.slice()).splice(o,1);break}s.tween=i}}function Pke(n,e,t){var i,s;if("function"!=typeof t)throw new Error;return function(){var r=za(this,n),o=r.tween;if(o!==i){s=(i=o).slice();for(var a={name:e,value:t},c=0,l=s.length;c<l;++c)if(s[c].name===e){s[c]=a;break}c===l&&s.push(a)}r.tween=s}}function HC(n,e,t){var i=n._id;return n.each(function(){var s=za(this,i);(s.value||(s.value={}))[e]=t.apply(this,arguments)}),function(s){return $1(s,i).value[e]}}function VC(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function EG(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function Xd(){}var D9=1/.7,f6="\\s*([+-]?\\d+)\\s*",Kd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ka="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nke=/^#([0-9a-f]{3,8})$/,Fke=new RegExp(`^rgb\\(${f6},${f6},${f6}\\)$`),Bke=new RegExp(`^rgb\\(${ka},${ka},${ka}\\)$`),Uke=new RegExp(`^rgba\\(${f6},${f6},${f6},${Kd}\\)$`),Gke=new RegExp(`^rgba\\(${ka},${ka},${ka},${Kd}\\)$`),Wke=new RegExp(`^hsl\\(${Kd},${ka},${ka}\\)$`),jke=new RegExp(`^hsla\\(${Kd},${ka},${ka},${Kd}\\)$`),AG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function DG(){return this.rgb().formatHex()}function LG(){return this.rgb().formatRgb()}function Qd(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Nke.exec(n))?(t=e[1].length,e=parseInt(e[1],16),6===t?zG(e):3===t?new so(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===t?L9(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===t?L9(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Fke.exec(n))?new so(e[1],e[2],e[3],1):(e=Bke.exec(n))?new so(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Uke.exec(n))?L9(e[1],e[2],e[3],e[4]):(e=Gke.exec(n))?L9(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Wke.exec(n))?IG(e[1],e[2]/100,e[3]/100,1):(e=jke.exec(n))?IG(e[1],e[2]/100,e[3]/100,e[4]):AG.hasOwnProperty(n)?zG(AG[n]):"transparent"===n?new so(NaN,NaN,NaN,0):null}function zG(n){return new so(n>>16&255,n>>8&255,255&n,1)}function L9(n,e,t,i){return i<=0&&(n=e=t=NaN),new so(n,e,t,i)}function Yke(n){return n instanceof Xd||(n=Qd(n)),n?new so((n=n.rgb()).r,n.g,n.b,n.opacity):new so}function z9(n,e,t,i){return 1===arguments.length?Yke(n):new so(n,e,t,i??1)}function so(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}function kG(){return`#${H3(this.r)}${H3(this.g)}${H3(this.b)}`}function RG(){const n=k9(this.opacity);return`${1===n?"rgb(":"rgba("}${I3(this.r)}, ${I3(this.g)}, ${I3(this.b)}${1===n?")":`, ${n})`}`}function k9(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function I3(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function H3(n){return((n=I3(n))<16?"0":"")+n.toString(16)}function IG(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new q1(n,e,t,i)}function HG(n){if(n instanceof q1)return new q1(n.h,n.s,n.l,n.opacity);if(n instanceof Xd||(n=Qd(n)),!n)return new q1;if(n instanceof q1)return n;var e=(n=n.rgb()).r/255,t=n.g/255,i=n.b/255,s=Math.min(e,t,i),r=Math.max(e,t,i),o=NaN,a=r-s,c=(r+s)/2;return a?(o=e===r?(t-i)/a+6*(t<i):t===r?(i-e)/a+2:(e-t)/a+4,a/=c<.5?r+s:2-r-s,o*=60):a=c>0&&c<1?0:o,new q1(o,a,c,n.opacity)}function q1(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}function VG(n){return(n=(n||0)%360)<0?n+360:n}function R9(n){return Math.max(0,Math.min(1,n||0))}function PC(n,e,t){return 255*(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)}function PG(n,e,t,i,s){var r=n*n,o=r*n;return((1-3*n+3*r-o)*e+(4-6*r+3*o)*t+(1+3*n+3*r-3*o)*i+o*s)/6}VC(Xd,Qd,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:DG,formatHex:DG,formatHex8:function $ke(){return this.rgb().formatHex8()},formatHsl:function qke(){return HG(this).formatHsl()},formatRgb:LG,toString:LG}),VC(so,z9,EG(Xd,{brighter(n){return n=null==n?D9:Math.pow(D9,n),new so(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new so(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new so(I3(this.r),I3(this.g),I3(this.b),k9(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kG,formatHex:kG,formatHex8:function Xke(){return`#${H3(this.r)}${H3(this.g)}${H3(this.b)}${H3(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:RG,toString:RG})),VC(q1,function Zke(n,e,t,i){return 1===arguments.length?HG(n):new q1(n,e,t,i??1)},EG(Xd,{brighter(n){return n=null==n?D9:Math.pow(D9,n),new q1(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new q1(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+360*(this.h<0),e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,s=2*t-i;return new so(PC(n>=240?n-240:n+120,s,i),PC(n,s,i),PC(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new q1(VG(this.h),R9(this.s),R9(this.l),k9(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=k9(this.opacity);return`${1===n?"hsl(":"hsla("}${VG(this.h)}, ${100*R9(this.s)}%, ${100*R9(this.l)}%${1===n?")":`, ${n})`}`}}));const OG=n=>()=>n;function FG(n,e){var t=e-n;return t?function NG(n,e){return function(t){return n+t*e}}(n,t):OG(isNaN(n)?e:n)}const BG=function n(e){var t=function eRe(n){return 1==(n=+n)?FG:function(e,t){return t-e?function Jke(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}(e,t,n):OG(isNaN(e)?t:e)}}(e);function i(s,r){var o=t((s=z9(s)).r,(r=z9(r)).r),a=t(s.g,r.g),c=t(s.b,r.b),l=FG(s.opacity,r.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=c(u),s.opacity=l(u),s+""}}return i.gamma=n,i}(1);function UG(n){return function(e){var o,a,t=e.length,i=new Array(t),s=new Array(t),r=new Array(t);for(o=0;o<t;++o)a=z9(e[o]),i[o]=a.r||0,s[o]=a.g||0,r[o]=a.b||0;return i=n(i),s=n(s),r=n(r),a.opacity=1,function(c){return a.r=i(c),a.g=s(c),a.b=r(c),a+""}}}UG(function Kke(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),s=n[i],r=n[i+1];return PG((t-i/e)*e,i>0?n[i-1]:2*s-r,s,r,i<e-1?n[i+2]:2*r-s)}}),UG(function Qke(n){var e=n.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*e);return PG((t-i/e)*e,n[(i+e-1)%e],n[i%e],n[(i+1)%e],n[(i+2)%e])}});var OC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,NC=new RegExp(OC.source,"g");function iRe(n,e){var i,s,r,t=OC.lastIndex=NC.lastIndex=0,o=-1,a=[],c=[];for(n+="",e+="";(i=OC.exec(n))&&(s=NC.exec(e));)(r=s.index)>t&&(r=e.slice(t,r),a[o]?a[o]+=r:a[++o]=r),(i=i[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,c.push({i:o,x:Kc(i,s)})),t=NC.lastIndex;return t<e.length&&(r=e.slice(t),a[o]?a[o]+=r:a[++o]=r),a.length<2?c[0]?function nRe(n){return function(e){return n(e)+""}}(c[0].x):function tRe(n){return function(){return n}}(e):(e=c.length,function(l){for(var h,u=0;u<e;++u)a[(h=c[u]).i]=h.x(l);return a.join("")})}function GG(n,e){var t;return("number"==typeof e?Kc:e instanceof Qd?BG:(t=Qd(e))?(e=t,BG):iRe)(n,e)}function sRe(n){return function(){this.removeAttribute(n)}}function rRe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function oRe(n,e,t){var i,r,s=t+"";return function(){var o=this.getAttribute(n);return o===s?null:o===i?r:r=e(i=o,t)}}function aRe(n,e,t){var i,r,s=t+"";return function(){var o=this.getAttributeNS(n.space,n.local);return o===s?null:o===i?r:r=e(i=o,t)}}function cRe(n,e,t){var i,s,r;return function(){var o,c,a=t(this);return null==a?void this.removeAttribute(n):(o=this.getAttribute(n))===(c=a+"")?null:o===i&&c===s?r:(s=c,r=e(i=o,a))}}function lRe(n,e,t){var i,s,r;return function(){var o,c,a=t(this);return null==a?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local))===(c=a+"")?null:o===i&&c===s?r:(s=c,r=e(i=o,a))}}function hRe(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function dRe(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function fRe(n,e){var t,i;function s(){var r=e.apply(this,arguments);return r!==i&&(t=(i=r)&&dRe(n,r)),t}return s._value=e,s}function pRe(n,e){var t,i;function s(){var r=e.apply(this,arguments);return r!==i&&(t=(i=r)&&hRe(n,r)),t}return s._value=e,s}function gRe(n,e){return function(){RC(this,n).delay=+e.apply(this,arguments)}}function vRe(n,e){return e=+e,function(){RC(this,n).delay=e}}function yRe(n,e){return function(){za(this,n).duration=+e.apply(this,arguments)}}function bRe(n,e){return e=+e,function(){za(this,n).duration=e}}function MRe(n,e){if("function"!=typeof e)throw new Error;return function(){za(this,n).ease=e}}function DRe(n,e,t){var i,s,r=function ARe(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(e)?RC:za;return function(){var o=r(this,n),a=o.on;a!==i&&(s=(i=a).copy()).on(e,t),o.on=s}}var HRe=Wd.prototype.constructor;function WG(n){return function(){this.style.removeProperty(n)}}function URe(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function GRe(n,e,t){var i,s;function r(){var o=e.apply(this,arguments);return o!==s&&(i=(s=o)&&URe(n,o,t)),i}return r._value=e,r}function YRe(n){return function(e){this.textContent=n.call(this,e)}}function XRe(n){var e,t;function i(){var s=n.apply(this,arguments);return s!==t&&(e=(t=s)&&YRe(s)),e}return i._value=n,i}var JRe=0;function V2(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function jG(){return++JRe}var P2=Wd.prototype;V2.prototype=function eIe(n){return Wd().transition(n)}.prototype={constructor:V2,select:function RRe(n){var e=this._name,t=this._id;"function"!=typeof n&&(n=TC(n));for(var i=this._groups,s=i.length,r=new Array(s),o=0;o<s;++o)for(var u,h,a=i[o],c=a.length,l=r[o]=new Array(c),d=0;d<c;++d)(u=a[d])&&(h=n.call(u,u.__data__,d,a))&&("__data__"in u&&(h.__data__=u.__data__),l[d]=h,T9(l[d],e,t,d,l,$1(u,t)));return new V2(r,this._parents,e,t)},selectAll:function IRe(n){var e=this._name,t=this._id;"function"!=typeof n&&(n=JU(n));for(var i=this._groups,s=i.length,r=[],o=[],a=0;a<s;++a)for(var u,c=i[a],l=c.length,h=0;h<l;++h)if(u=c[h]){for(var f,d=n.call(u,u.__data__,h,c),p=$1(u,t),m=0,g=d.length;m<g;++m)(f=d[m])&&T9(f,e,t,m,d,p);r.push(d),o.push(u)}return new V2(r,o,e,t)},selectChild:P2.selectChild,selectChildren:P2.selectChildren,filter:function TRe(n){"function"!=typeof n&&(n=eG(n));for(var e=this._groups,t=e.length,i=new Array(t),s=0;s<t;++s)for(var c,r=e[s],o=r.length,a=i[s]=[],l=0;l<o;++l)(c=r[l])&&n.call(c,c.__data__,l,r)&&a.push(c);return new V2(i,this._parents,this._name,this._id)},merge:function ERe(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,r=Math.min(i,t.length),o=new Array(i),a=0;a<r;++a)for(var d,c=e[a],l=t[a],u=c.length,h=o[a]=new Array(u),f=0;f<u;++f)(d=c[f]||l[f])&&(h[f]=d);for(;a<i;++a)o[a]=e[a];return new V2(o,this._parents,this._name,this._id)},selection:function VRe(){return new HRe(this._groups,this._parents)},transition:function KRe(){for(var n=this._name,e=this._id,t=jG(),i=this._groups,s=i.length,r=0;r<s;++r)for(var c,o=i[r],a=o.length,l=0;l<a;++l)if(c=o[l]){var u=$1(c,e);T9(c,n,t,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new V2(i,this._parents,n,t)},call:P2.call,nodes:P2.nodes,node:P2.node,size:P2.size,empty:P2.empty,each:P2.each,on:function LRe(n,e){var t=this._id;return arguments.length<2?$1(this.node(),t).on.on(n):this.each(DRe(t,n,e))},attr:function uRe(n,e){var t=_9(n),i="transform"===t?Hke:GG;return this.attrTween(n,"function"==typeof e?(t.local?lRe:cRe)(t,i,HC(this,"attr."+n,e)):null==e?(t.local?rRe:sRe)(t):(t.local?aRe:oRe)(t,i,e))},attrTween:function mRe(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;var i=_9(n);return this.tween(t,(i.local?fRe:pRe)(i,e))},style:function BRe(n,e,t){var i="transform"==(n+="")?Ike:GG;return null==e?this.styleTween(n,function PRe(n,e){var t,i,s;return function(){var r=h6(this,n),o=(this.style.removeProperty(n),h6(this,n));return r===o?null:r===t&&o===i?s:s=e(t=r,i=o)}}(n,i)).on("end.style."+n,WG(n)):"function"==typeof e?this.styleTween(n,function NRe(n,e,t){var i,s,r;return function(){var o=h6(this,n),a=t(this),c=a+"";return null==a&&(this.style.removeProperty(n),c=a=h6(this,n)),o===c?null:o===i&&c===s?r:(s=c,r=e(i=o,a))}}(n,i,HC(this,"style."+n,e))).each(function FRe(n,e){var t,i,s,a,r="style."+e,o="end."+r;return function(){var c=za(this,n),l=c.on,u=null==c.value[r]?a||(a=WG(e)):void 0;(l!==t||s!==u)&&(i=(t=l).copy()).on(o,s=u),c.on=i}}(this._id,n)):this.styleTween(n,function ORe(n,e,t){var i,r,s=t+"";return function(){var o=h6(this,n);return o===s?null:o===i?r:r=e(i=o,t)}}(n,i,e),t).on("end.style."+n,null)},styleTween:function WRe(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,GRe(n,e,t??""))},text:function qRe(n){return this.tween("text","function"==typeof n?function $Re(n){return function(){var e=n(this);this.textContent=e??""}}(HC(this,"text",n)):function jRe(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function ZRe(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;return this.tween(e,XRe(n))},remove:function kRe(){return this.on("end.remove",function zRe(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}(this._id))},tween:function Oke(n,e){var t=this._id;if(n+="",arguments.length<2){for(var o,i=$1(this.node(),t).tween,s=0,r=i.length;s<r;++s)if((o=i[s]).name===n)return o.value;return null}return this.each((null==e?Vke:Pke)(t,n,e))},delay:function _Re(n){var e=this._id;return arguments.length?this.each(("function"==typeof n?gRe:vRe)(e,n)):$1(this.node(),e).delay},duration:function xRe(n){var e=this._id;return arguments.length?this.each(("function"==typeof n?yRe:bRe)(e,n)):$1(this.node(),e).duration},ease:function CRe(n){var e=this._id;return arguments.length?this.each(MRe(e,n)):$1(this.node(),e).ease},easeVarying:function SRe(n){if("function"!=typeof n)throw new Error;return this.each(function wRe(n,e){return function(){var t=e.apply(this,arguments);if("function"!=typeof t)throw new Error;za(this,n).ease=t}}(this._id,n))},end:function QRe(){var n,e,t=this,i=t._id,s=t.size();return new Promise(function(r,o){var a={value:o},c={value:function(){0==--s&&r()}};t.each(function(){var l=za(this,i),u=l.on;u!==n&&((e=(n=u).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),l.on=e}),0===s&&r()})},[Symbol.iterator]:P2[Symbol.iterator]};var nIe={time:null,delay:0,duration:250,ease:function tIe(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}};function iIe(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}Wd.prototype.interrupt=function zke(n){return this.each(function(){E9(this,n)})},Wd.prototype.transition=function sIe(n){var e,t;n instanceof V2?(e=n._id,n=n._name):(e=jG(),(t=nIe).time=DC(),n=null==n?null:n+"");for(var i=this._groups,s=i.length,r=0;r<s;++r)for(var c,o=i[r],a=o.length,l=0;l<a;++l)(c=o[l])&&T9(c,n,e,l,o,t||iIe(c,e));return new V2(i,this._parents,n,e)};Math;function Jd(n){return{type:n}}function KG(n){for(var i,e=-1,t=n.length,s=n[t-1],r=0;++e<t;)r+=(i=s)[1]*(s=n[e])[0]-i[0]*s[1];return r/2}function Qc(n,e){if(n=function dIe(n){let e;for(;e=n.sourceEvent;)n=e;return n}(n),void 0===e&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}}return[n.pageX,n.pageY]}function Ln(n){return"string"==typeof n?new Ho([[document.querySelector(n)]],[document.documentElement]):new Ho([[n]],hG)}["w","e"].map(Jd),["n","s"].map(Jd),["n","w","e","s","nw","ne","sw","se"].map(Jd);const WC={capture:!0,passive:!1};function jC(n){n.preventDefault(),n.stopImmediatePropagation()}function fIe(n){var e=n.document.documentElement,t=Ln(n).on("dragstart.drag",jC,WC);"onselectstart"in e?t.on("selectstart.drag",jC,WC):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function pIe(n,e){var t=n.document.documentElement,i=Ln(n).on("dragstart.drag",null);e&&(i.on("click.drag",jC,WC),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function QG(n){return((n=Math.exp(n))+1/n)/2}const _Ie=function n(e,t,i){function s(r,o){var g,v,a=r[0],c=r[1],l=r[2],d=o[2],f=o[0]-a,p=o[1]-c,m=f*f+p*p;if(m<1e-12)v=Math.log(d/l)/e,g=function(L){return[a+L*f,c+L*p,l*Math.exp(e*L*v)]};else{var _=Math.sqrt(m),y=(d*d-l*l+i*m)/(2*l*t*_),b=(d*d-l*l-i*m)/(2*d*t*_),x=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(b*b+1)-b);v=(w-x)/e,g=function(L){var C=L*v,D=QG(x),R=l/(t*_)*(D*function vIe(n){return((n=Math.exp(2*n))-1)/(n+1)}(e*C+x)-function gIe(n){return((n=Math.exp(n))-1/n)/2}(x));return[a+R*f,c+R*p,l*D/QG(e*C+x)]}}return g.duration=1e3*v*e/Math.SQRT2,g}return s.rho=function(r){var o=Math.max(.001,+r),a=o*o;return n(o,a,a*a)},s}(Math.SQRT2,2,4),V9=n=>()=>n;function yIe(n,{sourceEvent:e,target:t,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Ra(n,e,t){this.k=n,this.x=e,this.y=t}Ra.prototype={constructor:Ra,scale:function(n){return 1===n?this:new Ra(this.k*n,this.x,this.y)},translate:function(n,e){return 0===n&0===e?this:new Ra(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $C=new Ra(1,0,0);function qC(n){n.stopImmediatePropagation()}function e8(n){n.preventDefault(),n.stopImmediatePropagation()}function xIe(n){return!(n.ctrlKey&&"wheel"!==n.type||n.button)}function MIe(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n).hasAttribute("viewBox")?[[(n=n.viewBox.baseVal).x,n.y],[n.x+n.width,n.y+n.height]]:[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]:[[0,0],[n.clientWidth,n.clientHeight]]}function JG(){return this.__zoom||$C}function CIe(n){return-n.deltaY*(1===n.deltaMode?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function wIe(){return navigator.maxTouchPoints||"ontouchstart"in this}function SIe(n,e,t){var i=n.invertX(e[0][0])-t[0][0],s=n.invertX(e[1][0])-t[1][0],r=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o))}let P9={};class Gr{constructor(){this.classes=[],this.transform="",this.selector="",this.index=0,this.visible=!0,this.outOfDesign=!1,this.theoretic=!1,this.loaded=!1,this._lineThickness=1,this.tooltip=e=>`<b>${this.name?this.name:this.selector}</b>`}get lineThickness(){return this._lineThickness}set lineThickness(e){this._lineThickness=e}draw(e){return ts(function*(){})()}redraw(e){}init(e,t){}show(e){return(this.floor===e||this.floor===ie.all)&&!this.theoretic&&this.visible&&!this.outOfDesign}update(e,t,i,s=!0){var r=this;return ts(function*(){r.onUpdate(e),void 0!==e.showTower?void 0===r.floor&&r.parent&&r.parent.floor&&(r.floor=r.parent.floor):r.floor=ie.all,r.meterPerPixel=i,s&&(r.init(t,e),yield r.draw(t)),r.show(t)&&(yield r.redraw(t))})()}createSelector(){if(!this.selector)if(this.parent&&(this.parent.selector?this.selector=this.parent.selector:(this.floor===ie.ground&&(this.selector="L0"),this.floor===ie.top&&(this.selector="L1"))),void 0!==this.name)this.selector+=`-${this.name.replace(/\s/g,"")}`;else{let e=this.constructor.name;"sensorType"in this&&(e=this.sensorType),e in P9||(P9[e]=0),P9[e]++,this.selector+=`-${e}-${P9[e]}`}}select(){document.querySelectorAll("svg .selected").forEach((e,t)=>{e.classList.remove("selected")}),this.svg.node().classList.add("selected")}setClass(e){!e.node()||!this.classes||this.classes.forEach(t=>{e.node().classList.add(t)})}}class Ii extends Gr{constructor(e){super(),this.name="",this.coords=[],Object.assign(this,e)}draw(e){var t=this;return ts(function*(){void 0===t.svg&&(t.svg=Ln(`#${t.selector}`)),t.show(e)?(t.svg.attr("points",t.coords.join(" ")).attr("transform",t.transform),t.setClass(t.svg)):t.svg.attr("points","")})()}redraw(e){this.svg&&this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness)}square(e,t,i){this.coords=[[i[0],i[1]],[i[0]+e,i[1]],[i[0]+e,i[1]+t],[i[0],i[1]+t]]}}class ro extends Gr{constructor(e){super(),this.coords=[],this.dash=[],Object.assign(this,e)}draw(e){var t=this;return ts(function*(){void 0===t.svg&&(t.svg=Ln(`#${t.selector}`)),t.show(e)?(t.svg.attr("points",t.coords.join(" ")).attr("transform",t.transform),t.setClass(t.svg)):t.svg.attr("points","")})()}redraw(e){this.svg&&this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness).attr("stroke-dasharray",this.dash.map(t=>t*this.meterPerPixel*this.lineThickness).join(" "))}}class O9 extends Gr{constructor(e){super(),this.d="",Object.assign(this,e)}draw(e){var t=this;return ts(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=Ln(`#${t.selector}`)}t.svg.attr("d",t.d).attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("transform",t.transform),t.setClass(t.svg)})()}setClass(e){!e.node()||0===this.classes.length||e.node().classList.add(this.classes)}}const Oe=(n,e=4)=>Math.round(n*10**e)/10**e,Vo=(n,e=4)=>Oe(n.reduce((t,i)=>t+i,0),e),On=(n,e,t=[0,0],i=4)=>{const s=n*Math.PI/180,r=e*Math.cos(s),o=e*Math.sin(s);return[Oe(r+t[0],i),Oe(o+t[1],i)]},Hi=(n,e,t=3)=>Oe(180*Math.atan2(e[1]-n[1],e[0]-n[0])/Math.PI,t),eW=(n,e,t,i=0,s=0)=>{const r=f=>f*f,o=f=>Math.sqrt(f);var a=1+r(e),c=2*-i+e*(t-s)*2,l=r(i)+r(t-s)-r(n);r(c);const d=(o(r(c)-4*a*l),(-c-o(r(c)-4*a*l))/(2*a));return[d,e*d+t]},g6=(n,e)=>{const[[t,i],[s,r]]=n,[[o,a],[c,l]]=e;var u,d=(l-a)*(s-t)-(c-o)*(r-i);return 0==d?null:[t+(u=((c-o)*(i-a)-(l-a)*(t-o))/d)*(s-t),i+u*(r-i)]},tW=(n,e)=>{const t=[],i=n.length;for(let s=0;s<i-1;s++){const r=[n[s],n[s+1]];g6(r,e)&&t.push(g6(r,e))}return t},ns=(n,e,t=4)=>n&&e?Oe(Math.hypot(e[0]-n[0],e[1]-n[1]),t):0,I=(n,e)=>[n[0]+e[0],n[1]+e[1]],Ce=(n,e,t=!0)=>t?[n[0],e[1]]:[e[0],n[1]];function nW(n){return n*(Math.PI/180)}String.prototype.toTitleCase=function(){return this.replace(/\b\w/g,n=>n.toLocaleUpperCase())};class Wi extends Gr{constructor(e){super(),this.textRotate=0,this.fontSize=14,this.a=[0,0],this.b=[4,4],this.offsetPixels=0,this.offsetMeters=0,this.direction=90,this._lineThickness=.6,this.decimals=1,this.classes=["measure"],Object.assign(this,e)}between(e,t){return[e[0]+(t[0]-e[0])/2,e[1]+(t[1]-e[1])/2]}draw(e){var t=this;return ts(function*(){if(void 0===t.svg&&(t.svg=Ln(`#${t.selector}`),t.setClass(t.svg),t.svgLine=t.svg.append("polyline"),t.svgArrow1=t.svg.append("text"),t.svgArrow2=t.svg.append("text"),t.svgText=t.svg.append("text")),!t.show(e))return t.svgLine.attr("points",""),t.svgText.text(""),t.svgArrow1.text(""),void t.svgArrow2.text("");let i=[...t.a],s=[...t.b],r=[0,0];90===t.direction&&(i=[i[0],Math.max(i[1],s[1])],s=[s[0],Math.max(i[1],s[1])]),-90===t.direction&&(i=[i[0],Math.min(i[1],s[1])],s=[s[0],Math.min(i[1],s[1])]),0===t.direction&&(i=[Math.max(i[0],s[0]),i[1]],s=[Math.max(i[0],s[0]),s[1]]),180===t.direction&&(i=[Math.min(i[0],s[0]),i[1]],s=[Math.min(i[0],s[0]),s[1]]);const o=t.offsetPixels*t.meterPerPixel,a=On(t.direction,o+t.offsetMeters,i),c=On(t.direction,o+t.offsetMeters,s),u=t.between(a,c);var h=c[0]-a[0],d=c[1]-a[1],f=Oe(Math.sqrt(h*h+d*d),t.decimals);t.svg.style("visibility",0===f?"hidden":""),t.svgLine.attr("points",[t.a,i,a,c,s,t.b].join(" ")),t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`\n        translate(${u[0]+r[0]} ${u[1]+r[1]}) \n        rotate(${t.textRotate})\n        `).text(f);let p=90;[90,0].includes(t.direction)&&(p=-90),t.svgArrow1.attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n        translate(${a[0]} ${a[1]}) \n        rotate(${t.direction+p})\n        `).text("<"),t.svgArrow2.attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n          translate(${c[0]} ${c[1]}) \n          rotate(${t.direction+p+180})\n          `).text("<")})()}redraw(e){this.svgArrow2&&(this.svgArrow2.attr("font-size",16*this.meterPerPixel),this.svgArrow1.attr("font-size",16*this.meterPerPixel)),this.svgText&&this.svgText.attr("font-size",this.meterPerPixel*this.fontSize).attr("stroke-width",6*this.meterPerPixel),this.svgLine&&this.svgLine.attr("stroke-width",this.meterPerPixel*this.lineThickness)}}const Mr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],AIe=Math.PI/180,DIe=180/Math.PI;function rn(n){return n*AIe}class YC extends Gr{constructor(){super(),this.selector="distance",this.point1=[-999,-999],this.point2=void 0,this.onUpdate=()=>{}}draw(e){var t=this;return ts(function*(){if(void 0===t.svg&&(t.svg=Ln(`#${t.selector}`),t.svgCircle1=t.svg.append("circle").style("fill","var(--accent-color)").style("cursor","crosshair").attr("stroke-width",0),t.svgCircle2=t.svg.append("circle").style("cursor","crosshair").style("fill","var(--accent-color)").attr("stroke-width",0),t.svgLine=t.svg.append("polyline").style("stroke","var(--accent-color)"),t.svgText=t.svg.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("paint-order","stroke").style("fill","var(--color-100)").style("stroke","var(--color-0)"),t.svgTextAngle=t.svg.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("paint-order","stroke").style("fill","var(--color-100)").style("stroke","var(--color-0)")),!t.show(e))return void t.clear();if(t.svgCircle1.attr("cx",t.point1[0]).attr("cy",t.point1[1]),!t.point2)return void t.clearExceptFirst();t.svgCircle2.attr("cx",t.point2[0]).attr("cy",t.point2[1]),t.svgLine.attr("points",[t.point1,t.point2].join(" "));const i=ns(t.point1,t.point2);var r;t.svgText.text((r=i)<1200?`${Oe(1e3*r,0)}mm`:`${Oe(r,3)}m`),t.svgTextAngle.text(`${Math.abs(Hi(t.point1,t.point2,0))}\xb0`),t.setClass(t.svg)})()}clear(){this.clearExceptFirst(),this.svgCircle1.attr("cx",-999).attr("cy",-999)}clearExceptFirst(){this.svgCircle2.attr("cx",-999).attr("cy",-999),this.svgText.attr("transform","translate(-999, -999)"),this.svgTextAngle.attr("transform","translate(-999, -999)"),this.svgLine.attr("points",[])}redraw(e){if(this.svgCircle1&&this.svgCircle1.attr("r",4*this.meterPerPixel),this.svgCircle2&&this.svgCircle2.attr("r",4*this.meterPerPixel),this.svgLine&&this.svgLine.attr("stroke-width",2*this.meterPerPixel),this.svgText&&this.svgTextAngle&&this.point2){const[t,i]=I((([n,e],[t,i])=>[(t-n)/2+n,(i-e)/2+e])(this.point1,this.point2),[0,-20*this.meterPerPixel]);this.svgText.attr("transform",`translate(${t}, ${i})`).attr("stroke-width",6*this.meterPerPixel).attr("font-size",16*this.meterPerPixel);const[s,r]=I(this.point1,[-20*this.meterPerPixel,0]);this.svgTextAngle.attr("transform",`translate(${s}, ${r})`).attr("stroke-width",6*this.meterPerPixel).attr("font-size",16*this.meterPerPixel)}}}var Ae=(()=>{return(n=Ae||(Ae={})).topFloor="topFloor",n.wallOutside="wallOutside",n.wallInside="wallInside",n.bendInside="bendInside",n.bendOutside="bendOutside",n.topInside="topInside",n.topOutside="topOutside",n.lowestInside="lowestInside",n.lowestOutside="lowestOutside",n.groundFloorInside="groundFloorInside",n.groundFloorOutside="groundFloorOutside",Ae;var n})(),Jt=(()=>{return(n=Jt||(Jt={})).ground="ground",n.crawlerFloor="crawlerFloor",n.crawlerCeiling="crawlerCeiling",n.groundFloor="groundFloor",n.ceiling="ceiling",n.topFloor="topFloor",Jt;var n})(),is=(()=>{return(n=is||(is={})).outer="outer",n.inner="inner",n.sketch="sketch",n.shadow="shadow",is;var n})(),Wr=(()=>{return(n=Wr||(Wr={})).roof70="roof70",n.roofCircle="roofCircle",n.roofCircleAnd70="roofCircleAnd70",Wr;var n})();class IIe{constructor(){this.innerWidth=-1,this.wallOuterThickness=-1,this.ceilingHeight=3.3,this.floorAboveGround=.7,this.crawlerHeight=1,this.crawlerSpace=!0,this.topFloorThickness=.4,this.groundFloorThickness=.48,this.roofCenter=[],this.roofThickness=.4,this.roofCirclePullDown=1,this.roofCircleExtra=-1,this.roofCircleWalls=1,this.roof70offset=.6,this.roof70Extension=1.3,this.roof70Walls=1.4,this.roofRidgeHight=.6,this.roofRidgeWidth=.04,this.bendPoint=[-1,-1],this.bendPointInner=[-1,-1],this.elevations={},this.roofPoints={},this.houseHeight=-1,this.outerWallHeight=-1,this.innerWallHeight=-1,this.gableWallArea=-1,this.minimumHeight=1.5,this.minimumHeightWidth=-1,this.minimumHeightRoom=2.3,this.minimumHeightRoomWidth=-1,this.roofStyle=Wr.roof70,this.viewedRoofStyle=Wr.roof70,this.parts=[],this.create()}create(){this.drawRoofCircle(),this.drawBuilding(),this.drawRoof70(),this.drawHelpers(),this.parts.push(new YC)}calculate(e){this.house=e,this.innerWidth=this.house.outerBase,this.wallOuterThickness=this.house.wallOuterThickness,this.roofCircleExtra=Oe(Math.cos(rn(65))*this.roofCirclePullDown,3),this.bendPoint=[this.roof70offset,-this.roof70offset*Math.tan(rn(70))-this.roof70Walls],this.bendPointInner=[this.roof70offset,-this.roof70offset*Math.tan(rn(70))];const i=0-this.groundFloorThickness,o=i+this.groundFloorThickness+this.ceilingHeight;if(this.elevations={[Jt.ground]:i-(this.crawlerSpace?this.floorAboveGround:0)+this.groundFloorThickness,[Jt.crawlerFloor]:i-(this.crawlerSpace?this.crawlerHeight:0),[Jt.crawlerCeiling]:i,[Jt.groundFloor]:0,[Jt.ceiling]:o,[Jt.topFloor]:o+this.topFloorThickness},this.roofCenter=[Oe(this.house.outerBase/2),Oe(this.elevations[Jt.topFloor])],this.roofPoints={[Ae.topFloor]:[this.wallOuterThickness,this.roofCenter[1]],[Ae.groundFloorOutside]:[0,0],[Ae.groundFloorInside]:[this.wallOuterThickness,0]},this.viewedRoofStyle===Wr.roof70){const c=this.pointOf70Roof();this.roofPoints={...this.roofPoints,[Ae.bendOutside]:c[2],[Ae.bendInside]:c[11],[Ae.topInside]:c[10],[Ae.topOutside]:c[3],[Ae.lowestInside]:c[13],[Ae.lowestOutside]:c[0]}}if(this.viewedRoofStyle===Wr.roofCircle){const c=(l,u)=>{const[h,d]=this.pointOnCircleRoof(Math.PI*(-(4-l)/4),u);return[h,d]};this.roofPoints={...this.roofPoints,[Ae.bendOutside]:c(1,is.outer),[Ae.bendInside]:c(1,is.inner),[Ae.topInside]:c(2,is.inner),[Ae.topOutside]:c(2,is.outer),[Ae.lowestInside]:c(0,is.inner),[Ae.lowestOutside]:c(0,is.outer)}}this.roofPoints[Ae.wallInside]=this.calcPointUnderInnerWall(),this.roofPoints[Ae.wallOutside]=this.calcPointUnderOuterWall(),Object.entries(this.roofPoints).forEach(([c,l],u)=>{this.elevations[c]=Oe(l[1])}),this.gableWallArea=this.calculateGable(),this.innerWallHeight=Math.abs(this.roofPoints[Ae.wallInside][1]),this.outerWallHeight=Math.abs(this.roofPoints[Ae.wallOutside][1]),this.minimumHeightWidth=Oe(this.getIntersectionWithRoof(this.minimumHeight)[0]),this.minimumHeightRoomWidth=Oe(this.getIntersectionWithRoof(this.minimumHeightRoom)[0]),this.lowerAngle=Oe(Hi(this.roofPoints[Ae.lowestOutside],this.roofPoints[Ae.bendOutside]),3),this.upperAngle=Oe(Hi(this.roofPoints[Ae.bendOutside],this.roofPoints[Ae.topOutside]),3)}calculateGable(){const t=this.roofPoints[Ae.wallInside],i=this.roofPoints[Ae.bendInside],s=this.roofPoints[Ae.topInside];return 2*Vo([t[1]*i[0]+(i[1]-t[1])*i[0]/2+(s[0]-i[0])*i[1]+(s[0]-i[0])*(s[1]-i[1])/2])}calcPointUnderInnerWall(){const e=this.roofPoints[Ae.lowestInside];let[t,i]=g6([[this.wallOuterThickness,-100],[this.wallOuterThickness,100]],[e,this.roofPoints[Ae.bendInside]]);return[t,i]}calcPointUnderOuterWall(){const e=this.roofPoints[Ae.lowestInside];let[t,i]=g6([[0,-100],[0,100]],[e,this.roofPoints[Ae.bendInside]]);return e[0]>0&&(i=e[1]),[t,i]}drawBuilding(){this.parts.push(new Ii({selector:"building-ground-fill",onUpdate:function(e){this.square(e.innerWidth+3,Math.abs(e.elevations[Jt.ground])+1.5,[-1.5,-e.elevations[Jt.ground]])}})),this.parts.push(new Ii({selector:"building-ground",onUpdate:function(e){const i=Math.abs(e.elevations[Jt.ground]);this.square(e.innerWidth+3,e.crawlerHeight-i+1.5,[-1.5,i])}})),this.parts.push(new ro({selector:"building-ground-line",onUpdate:function(e){const t=e.elevations[Jt.ground];this.coords=[[-2,-t],[e.innerWidth+2,-t]]}})),this.parts.push(new Ii({selector:"building-crawler",onUpdate:function(e){this.visible=e.crawlerSpace,this.square(e.innerWidth-2*e.wallOuterThickness,e.crawlerHeight,[e.wallOuterThickness,-e.elevations[Jt.crawlerCeiling]])}})),this.parts.push(new Ii({selector:"building-walls",onUpdate:function(e){const t=e.elevations[Jt.topFloor];this.square(e.innerWidth,t+-e.elevations[Jt.crawlerFloor],[0,-t])}})),this.parts.push(new Ii({selector:"building-room",onUpdate:function(e){this.square(e.innerWidth-2*e.wallOuterThickness,e.ceilingHeight,[e.wallOuterThickness,-e.elevations[Jt.ceiling]])}})),this.parts.push(new Ii({selector:"building-fill",onUpdate:function(e){const i=e.elevations[Jt.topFloor]+(e.viewedRoofStyle===Wr.roof70?e.roof70Walls:e.roofCircleWalls);this.square(e.innerWidth,i-e.elevations[Jt.ground],[0,-i])}})),this.parts.push(new Ii({selector:"building-roof-70-wall1",onUpdate:function(e){this.square(e.wallOuterThickness,e.roof70Walls,[0,-e.elevations[Jt.topFloor]-e.roof70Walls])}})),this.parts.push(new Ii({selector:"building-roof-70-wall2",onUpdate:function(e){this.square(e.wallOuterThickness,e.roof70Walls,[e.innerWidth-e.wallOuterThickness,-e.elevations[Jt.topFloor]-e.roof70Walls])}})),this.parts.push(new Ii({selector:"building-roof-circle-wall1",onUpdate:function(e){this.square(e.wallOuterThickness,e.roofCircleWalls,[e.innerWidth-e.wallOuterThickness,-e.elevations[Jt.topFloor]-e.roofCircleWalls])}})),this.parts.push(new Ii({selector:"building-roof-circle-wall2",onUpdate:function(e){this.square(e.wallOuterThickness,e.roofCircleWalls,[0,-e.elevations[Jt.topFloor]-e.roofCircleWalls])}}))}drawHelpers(){this.parts.push(new Wi({selector:"minimum",floor:ie.all,direction:0,textRotate:0,decimals:3,onUpdate:function(e){const t=e.elevations[Jt.topFloor];this.offsetPixels=-20;const i=e.getIntersectionWithRoof(e.minimumHeight);this.offsetMeters=-1,this.a=[+e.wallOuterThickness,-t],this.b=[i[0],-i[1]]}})),this.parts.push(new Wi({selector:"minimum-h",floor:ie.all,direction:-90,textRotate:0,decimals:3,onUpdate:function(e){const t=e.elevations[Jt.topFloor];this.offsetPixels=0;const i=e.getIntersectionWithRoof(e.minimumHeight);this.offsetMeters=1.5,this.a=[+e.wallOuterThickness,-t],this.b=[i[0],-i[1]]}})),this.parts.push(new Wi({selector:"minimum-room",floor:ie.all,direction:0,textRotate:45,decimals:3,onUpdate:function(e){const t=e.elevations[Jt.topFloor];this.offsetPixels=20;const i=e.getIntersectionWithRoof(e.minimumHeightRoom);this.offsetMeters=1;const s=e.innerWidth-i[0];this.a=[e.innerWidth,-t],this.b=[s,-i[1]]}})),this.parts.push(new Wi({selector:"minimum-room-h",floor:ie.all,direction:-90,textRotate:0,decimals:3,onUpdate:function(e){this.offsetPixels=0;const t=e.elevations[Jt.topFloor],i=e.getIntersectionWithRoof(e.minimumHeightRoom);this.offsetMeters=1.5;const s=e.innerWidth-i[0];this.a=[s,-i[1]],this.b=[s+i[0]-e.wallOuterThickness,-t]}})),this.parts.push(new Wi({selector:"lower-roof",floor:ie.all,textRotate:0,decimals:3,onUpdate:function(e){const t=e.roofPoints[Ae.bendInside],i=e.roofPoints[Ae.wallInside];this.offsetPixels=0,this.offsetMeters=-1.5,this.a=[i[0],-i[1]],this.b=[t[0],-t[1]],this.direction=Hi(this.a,this.b)-90}})),this.parts.push(new Wi({selector:"higher-roof",floor:ie.all,textRotate:0,decimals:3,onUpdate:function(e){const t=e.roofPoints[Ae.topInside],i=e.roofPoints[Ae.bendInside];this.offsetPixels=0,this.offsetMeters=1.5,this.a=[i[0],-i[1]],this.b=[t[0],-t[1]],this.direction=Hi(this.a,this.b)-90}}))}getIntersectionWithRoof(e){const t=this.elevations[Jt.topFloor]+e,i=[];return[[this.roofPoints[Ae.topFloor],this.roofPoints[Ae.wallInside]],[this.roofPoints[Ae.wallInside],this.roofPoints[Ae.bendInside]],[this.roofPoints[Ae.bendInside],this.roofPoints[Ae.topInside]]].forEach((c,l,u)=>{const h=g6(c,[[-100,t],[100,t]]);i.push(h)}),i.sort((c,l)=>l[0]-c[0])[0]}drawRoofCircle(){this.parts.push(new Ii({selector:"roof-circle-fill",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),is.outer))].map(t=>[t[0],-t[1]])}})),this.parts.push(new Ii({selector:"roof-circle-shadow",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),is.outer)),...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),is.inner)).reverse()].map(t=>[t[0],-t[1]])}})),this.parts.push(new Ii({selector:"roof-circle",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),is.outer)),...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),is.inner)).reverse()].map(t=>[t[0],-t[1]])}})),this.parts.push(new O9({selector:"roof-circle__h-circle",lineThickness:2,onUpdate:function(e){const[t,i]=e.pointOnCircleRoof(0,is.outer),s=t-e.innerWidth,r=2*s+e.innerWidth;this.d=`M${r},0 a1,1 0 0,0 ${-r},0`,this.transform=`translate(${-s} ${-i})`}})),this.parts.push(new Ii({selector:"roof-circle__h-line",lineThickness:2,onUpdate:function(e){const t=e.pointOnCircleRoof(Math.PI,is.outer);this.coords=[e.pointOnCircleRoof(Math.PI*(-3/4),is.sketch),[e.roofCenter[0],t[1]],t,e.pointOnCircleRoof(0,is.outer),[e.roofCenter[0],t[1]],e.pointOnCircleRoof(Math.PI*(-1/4),is.sketch)].map(function(i){return[i[0],-i[1]]})}}))}drawRoof70(){this.parts.push(new Ii({selector:"roof-70-fill",onUpdate:function(e){this.coords=e.pointOf70Roof().slice(0,7).map(([t,i])=>[t,-i])}})),this.parts.push(new Ii({selector:"roof-70-shadow",onUpdate:function(e){this.coords=e.pointOf70Roof(!0).map(([t,i])=>[t,-i])}})),this.parts.push(new Ii({selector:"roof-70",onUpdate:function(e){this.coords=e.pointOf70Roof().map(([t,i])=>[t,-i])}}))}pointOf70Roof(e=!1){const t=this.roofThickness/Math.sin(rn(70)),i=this.roofThickness/Math.tan(rn(70)),s=Math.sqrt(i**2+this.roofThickness**2),o=(Math.sin(rn(30)),this.innerWidth/2),a=this.roof70offset,c=a*Math.tan(rn(70))+this.roof70Walls,l=On(-40,s),u=a+l[0],h=c+l[1],p=(o-a)*Math.tan(rn(30))+c;return[this.angle(rn(110),this.roof70Extension,[0,-this.roof70Walls]),[0,-this.roof70Walls],[a,-c],[o,-p],[this.innerWidth-a,-c],[this.innerWidth,-this.roof70Walls],this.angle(rn(70),this.roof70Extension,[this.innerWidth,-this.roof70Walls]),this.angle(rn(70),this.roof70Extension,[this.innerWidth-t,-this.roof70Walls]),[this.innerWidth-t,-this.roof70Walls],[this.innerWidth-u,-h],I([o,-p],[0,this.roofThickness/Math.cos(rn(30))]),[u,-h],[t,-this.roof70Walls],this.angle(rn(110),this.roof70Extension,[t,-this.roof70Walls])].map(([m,g])=>[Oe(m,40),Oe(this.roofCenter[1]+-g,40)])}pointOnCircleRoof(e,t){let i;const s=this.roofThickness/Math.cos(rn(22.5));t===is.outer&&(i=this.innerWidth/2+this.roofCircleExtra),t===is.inner&&(i=this.innerWidth/2-s+this.roofCircleExtra),t===is.sketch&&(i=this.innerWidth/2+1.5*s+this.roofCircleExtra);const[r,o]=On(function RIe(n){return n*DIe}(e),i);return[Oe(this.roofCenter[0]+r),Oe(this.roofCenter[1]+Math.abs(o)+this.roofCircleWalls-this.roofCirclePullDown)]}angle(e,t,i=[0,0]){const s=t*Math.cos(e),r=t*Math.sin(e);return[s+i[0],r+i[1]]}}const aW=_r("slideInOut",[xi(":enter",[zt({transform:"translateY(100%)"}),oi("600ms 0ms ease-out",zt({transform:"translateY(0%)"}))]),xi(":leave",[oi("300ms  ease-in",zt({transform:"translateY(100%)"}))])]),HIe=_r("fallInOut",[xi(":enter",[zt({transform:"translateY(-100%)"}),oi("600ms 0ms ease-out",zt({transform:"translateY(0%)"}))]),xi(":leave",[oi("300ms ease-in",zt({transform:"translateY(-100%)"}))])]);class cW extends Gr{constructor(e){super(),this.coords=[],this.floor=ie.ground,this.theoretic=!1,this.tooltip=()=>(console.log(this.selector),`Footprint\n    <br>${this.floor}-level\n    <br>${this.area()}m2`),this.area=()=>Math.abs(Oe(KG(this.coords),1)),Object.assign(this,e)}setup(){}draw(e){var t=this;return ts(function*(){void 0===t.svg&&(t.svg=Ln(`#${t.selector}`),t.name||(t.name=t.selector),t.classes=[`floor-${t.floor}`],t.classes.push("bg-fill")),t.show(e)?(t.svg.attr("points",t.coords.join(" ")),t.setClass(t.svg)):t.svg.attr("points","")})()}}let t8={};var qe=(()=>{return(n=qe||(qe={})).outer="outer",n.inner="inner",n.theoretic="theoretic",qe;var n})(),K=(()=>{return(n=K||(K={})).in="in",n.out="out",n.left="left",n.right="right",K;var n})(),Xt=(()=>{return(n=Xt||(Xt={})).inside="inside",n.outside="outside",n.tower="tower",n.straight="straight",Xt;var n})();class ot extends Gr{constructor(e){super(),this.origin=[0,0],this.orientation="",this.ceiling=-1,this.gable=!1,this.tooltip=()=>`Wall <b>${this.orientation}</b> (${this.parent instanceof cW?"outer wall":"of "+this.parent+" room"} ) \n    <br>Inside ${this.getLength(K.in,2)} m2\n    <br>Outside ${this.outerWallLength=this.getLength(K.out,2)} m2`,Object.assign(this,e)}createSelector(){this.selector=this.parent.selector.replace("Footprint-1","outer");const e=Hi(this.sides[K.in][0],this.sides[K.in][1]);this.orientation=0===e?"North":45===e?"NortEast":-45===e||315===e?"NorthWest":90===e?"East":180===e?"South":270===e||-90===e?"West":`${e}`.split(".")[0],this.selector+=`-${this.orientation}Wall`,this.selector in t8||(t8[this.selector]=0),t8[this.selector]++,t8[this.selector]>1&&(this.selector+=`-${t8[this.selector]}`)}draw(e){var t=this;return ts(function*(){if(void 0===t.svg&&(t.svg=Ln(`#${t.selector}`),t.svgOrigin=t.svg.select(".wall-origin"),t.svgLeft=t.svg.select(".wall-left"),t.svgRight=t.svg.select(".wall-right"),t.svgFill=t.svg.select(".wall-fill"),t.type===qe.outer&&(t.thickness=t.parent.parent.wallOuterThickness),t.type===qe.inner&&(t.thickness=t.parent.parent.wallInnerThickness),t.svg.node()&&t.svg.node().classList.add(`type-${t.type}`)),!t.show(e))return t.svgFill.attr("points",""),t.svgLeft.attr("points",""),t.svgRight.attr("points",""),void t.svgOrigin.attr("r","0");t.svgOrigin.attr("cx",t.origin[0]).attr("cy",t.origin[1]),t.sides.in&&t.sides.out&&t.svgFill.attr("points",[...t.sides.in,...[...t.sides.out].reverse()].join(" "));for(let i of Object.keys(K)){const s=i;if(!(s in t.sides))return;let r;r=s===K.in?t.svgLeft:t.svgRight,r.attr("points",t.sides[s].join(" ")),r.node()&&r.node().classList.add(`side-${s}`)}t.innerWallLength=t.getLength(K.in),t.outerWallLength=t.getLength(K.out)})()}redraw(e){this.svgOrigin&&this.svgOrigin.attr("r",this.meterPerPixel*this.lineThickness*3),this.svgLeft&&this.svgLeft.attr("stroke-width",this.meterPerPixel*this.lineThickness*(this.type===qe.theoretic?4:1)),this.svgRight&&this.svgRight.attr("stroke-width",this.meterPerPixel*this.lineThickness*(this.type===qe.theoretic?4:1))}getLength(e,t=2){const i=this.sides[e];return i&&i[0]&&i[1]?Oe(ns(...i),t):0}getArea(e,t=2){const i=this.getLength(e);return 0===i?0:Oe(i*this.ceiling,t)}getPosition(e,t,i=0){const s=this.sides[e],r=this.getLength(e)*t,o=Hi(s[0],s[1]);return On(o,r+i,s[0])}drawTheoretic(e,t,i){this.thickness=i,"n"===e&&this.drawByRoom(0,1,t,Xt.straight,Xt.straight),"e"===e&&this.drawByRoom(1,2,t,Xt.straight,Xt.straight),"s"===e&&this.drawByRoom(2,3,t,Xt.straight,Xt.straight),"w"===e&&this.drawByRoom(3,0,t,Xt.straight,Xt.straight)}drawByRoom(e,t,i,s,r){if(!1===this.visible)return void(this.sides={[K.in]:[[0,0],[0,0]],[K.out]:[[0,0],[0,0]]});this.type===qe.inner?(this.thickness=i.wallInnerThickness,this.ceiling=i.cross.ceilingHeight):this.type===qe.outer?(this.thickness=i.wallOuterThickness,this.ceiling=i.cross.outerWallHeight):this.type===qe.theoretic?this.ceiling=i.cross.ceilingHeight:console.error(this);const o=(h,d,f)=>d===Xt.inside&&0===h?f+45:d===Xt.inside&&1===h||d===Xt.outside&&0===h?f-45:d===Xt.outside&&1===h?f+45:d===Xt.tower&&0===h?f+67.5:d===Xt.tower&&1===h?f-67.5:d===Xt.straight?f:void 0,a=h=>{const d=Math.sqrt(this.thickness**2*2),f=i.tower;return h===Xt.inside||h===Xt.outside?d:h===Xt.tower?ns(f.innerCoords[0],f.outerCoords[7]):h===Xt.straight?this.thickness:void 0};let c=this.parent.coords[e],l=this.parent.coords[t];this.origin=c,this.innerWallLength=ns(c,l);let u=Hi(c,l)-90;this.sides={[K.in]:[c,l]},this.type!==qe.theoretic&&(this.sides[K.out]=[On(o(0,s,u),a(s),c),On(o(1,r,u),a(r),l)])}}class de extends Gr{constructor(e){super(),this.points=[],this.offset=[0,0],this.offsetWall=.3,this.elevation=.3,this.verticalCableLength=0,this.cableOnly=!1,this.sensorOnly=!1,this.wallSide=K.in,this.cableLength=0,this.amount=1,this.fontSize=14,this.visible=!1,this.showBadge=!1,this.getSensorType=t=>Object.values(X).find(s=>t.includes(s)),this.tooltip=()=>{let t=`<b>${this.sensorType.toTitleCase()} `;return this.cableLength>0&&(t+=`<br>Cable length ${Oe(this.cableLength,1)}m2`),this.group&&(t+=`<br>Group ${this.group}`),t},Object.assign(this,e)}draw(e){var t=this;return ts(function*(){if(void 0===t.svg){if(!t.show(e))return;(void 0===t.floor||e in t.parent)&&(t.floor=t.parent.floor),t.svg=Ln(`#${t.selector}.sensor-cable`),t.sensorType===X.temperature&&(t.sensorOnly=!0),t.cableOnly?(t.lineThickness=2,t.classes.push("sensor-room-cable")):(t.svgG=Ln(`#${t.selector}.sensor-g`),t.showBadge=t.amount>=2&&void 0!==t.svgG,t.svgIcon=Ln(`#${t.selector}.sensor-icon`),t.showBadge&&(t.svgBadge=t.svgG.append("g"),t.svgBadgeCircle=t.svgBadge.append("circle"),t.svgBadgeText=t.svgBadge.append("text"))),t.group&&t.classes.push(`el-group-${t.group}`),t.cableType&&t.classes.push(`cable-${t.cableType}`),t.classes.push(`sensor-${t.sensorType}`)}if(!t.show(e))return t.svgIcon&&t.svgIcon.attr("xlink:href",""),t.svg&&t.svg.attr("points",""),t.svgBadgeCircle&&t.svgBadgeCircle.attr("r",0),t.svgBadgeText&&t.svgBadgeText.attr("font-size",0),void(t.showBadge=!1);t.svgIcon&&t.svgIcon.attr("xlink:href",`#icon-${t.getSensorType(t.selector)}`);const i=t.calcOffsetWall();t.cableOnly||(t.svgIcon.attr("x",`${i[0]}px`).attr("y",`${i[1]}px`),t.setClass(t.svgG),t.setClass(t.svg)),t.showBadge?t.badge(i):(t.svgBadgeCircle&&t.svgBadgeCircle.attr("r",0),t.svgBadgeText&&t.svgBadgeText.text("")),t.sensorOnly||(t.svg.attr("points",t.cablePoints(i,e).join(" ")).attr("transform",t.transform),t.setClass(t.svg),t.cableLength=t.getLength())})()}redraw(e){!this.show(e)||(this.svgBadge&&(this.svgBadge.attr("stroke-width",this.meterPerPixel*this.lineThickness*1).attr("transform",`translate(${10*this.meterPerPixel} ${-10*this.meterPerPixel})`),this.svgBadgeCircle.attr("r",8*this.meterPerPixel),this.svgBadgeText.attr("font-size",this.meterPerPixel*this.fontSize).text(`${this.amount}`)),this.svg&&(this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness*1),this.cableType===B1.OutsidePOE&&this.svg.attr("stroke-dasharray",`${this.meterPerPixel*this.lineThickness*10*.5} ${this.meterPerPixel*this.lineThickness*10}`)))}cablePoints(e,t){return this.show(t)?[e,...this.points]:[]}getLength(){let t=0;return this.points.forEach((i,s,r)=>{s+1!==this.points.length&&(t+=((i,s)=>Math.hypot(s[0]-i[0],s[1]-i[1]))(i,r[s+1]))}),Oe(t+this.verticalCableLength+.3*this.amount)}badge(e){this.svgBadge.attr("class","sensor-badge"),this.svgBadgeCircle.attr("fill",2===this.amount?"white":"#333").attr("cx",e[0]).attr("cy",e[1]).attr("stroke","black"),this.svgBadgeText.attr("fill",2===this.amount?"black":"white").attr("x",e[0]).attr("y",e[1]).attr("text-anchor","middle").attr("class","sensor-badge-text").attr("stroke","none").attr("dominant-baseline","middle").text(`${this.amount}`)}calcOffsetWall(){if(this.parent instanceof ot){const t=this.parent.sides[this.wallSide],i=Hi(t[0],t[1]);return On(i+90,this.offsetWall,this.points[0])}return[this.points[0][0]+this.offset[0],this.points[0][1]+this.offset[1]]}select(){document.querySelectorAll("svg .selected").forEach((e,t)=>{e.classList.remove("selected")}),[X.socket,X.perilex].includes(this.sensorType)?document.querySelectorAll(`.el-group-${this.group}`).forEach((e,t)=>{e.classList.add("selected")}):(this.svg.node().classList.add("selected"),this.svgIcon.node().classList.add("selected"))}}let VIe=(()=>{class n{constructor(){this.class="base",this.html="dummy"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=dt({type:n,selectors:[["tooltip"]],hostAttrs:[1,"popup"],hostVars:2,hostBindings:function(t,i){2&t&&function yk(n){V1(wo,ba,n,!0)}(i.class)},decls:2,vars:1,consts:[[3,"innerHtml"],[1,"popup-arrow","popup-arrow-mid"]],template:function(t,i){1&t&&te(0,"div",0)(1,"div",1),2&t&&Z("innerHtml",i.html,Mc)},styles:[".popup-arrow-mid{left:calc(50% - 10px)!important;background:inherit}[_nghost-%COMP%]{position:relative!important}"]}),n})();class ss extends Gr{constructor(e){super(),this.coords=[],this.floor=ie.ground,this.hole=!1,this.centralElectricity=[0,0],this.theoretic=!1,this.width=0,this.height=0,this.tooltip=()=>{console.log(this.selector);let t=`Room <b>${this.name}</b> \n    <br>${this.floor}-level\n    <br>${this.area()}m2`;return this.width&&(t+=`<br>width: ${this.width}m`),this.height&&(t+=`<br>height: ${this.height}m`),t},this.area=()=>0===this.coords.length||this.hole?0:Math.abs(Oe(KG(this.coords),1)),this.volume=()=>this.floor===ie.top||this.hole||this.floor===ie.ground||this.hole?this.area()*this.parent.cross.ceilingHeight:void 0,this.squaredRoom=(t,i)=>{this.width=Oe(t),this.height=Oe(i),this.coords=[this.northWestCorner,I(this.northWestCorner,[t,0]),I(this.northWestCorner,[t,i]),I(this.northWestCorner,[0,i])],this.center=I(this.northWestCorner,[t/2,i/2]),this.centralElectricity=this.center},Object.assign(this,e)}setup(){}draw(e){var t=this;return ts(function*(){void 0===t.svg&&(t.svg=Ln(`#${t.selector}`),t.name||(t.name=t.selector),t.classes=[`floor-${t.floor}`],t.hole&&(t.classes.push("room-hole"),t.svg.attr("filter","url(#inset-shadow)")),t.classes.push("bg-fill")),t.show(e)?(t.svg.attr("points",t.coords.join(" ")),t.setClass(t.svg)):t.svg.attr("points","")})()}}class PIe extends Gr{constructor(e){super(),this.last=!1,this.visible=!0,this.fontSize=14,Object.assign(this,e)}draw(e){var t=this;return ts(function*(){void 0===t.svg&&(t.svg=Ln(`#${t.selector}`),t.svgRun=t.svg.select(".step-run"),t.svgRise=t.svg.select(".step-rise"),t.svgText=t.svg.select(".step-text"),t.last&&t.classes.push("last")),t.show(e)?(t.svg.style("display",""),t.svg.attr("transform",`translate(${t.index*t.parent.run}, ${-t.index*t.parent.rise})`),t.setClass(t.svg),t.svgRun.attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("points",[[0,0],[0,t.parent.runThickness],[t.last?t.parent.nose:t.parent.run+t.parent.riseThickness+t.parent.nose,t.parent.runThickness],[t.last?t.parent.nose:t.parent.run+t.parent.riseThickness+t.parent.nose,0]].join(" ")),t.svgRise.attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("points",[[t.parent.nose,t.parent.runThickness],[t.parent.nose,t.parent.rise],[t.parent.nose+t.parent.riseThickness,t.parent.rise],[t.parent.nose+t.parent.riseThickness,t.parent.runThickness]].join(" ")),t.svgText.attr("font-size",t.fontSize*t.meterPerPixel).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6*t.meterPerPixel).attr("transform",`\n        translate(${t.parent.run/2} ${16*-t.meterPerPixel}) \n        `).text(t.index)):t.svg.style("display","none")})()}}class lW extends Gr{constructor(e){super(),this.name="",this.cx=0,this.cy=0,this.r=1,this._lineThickness=.2,Object.assign(this,e)}draw(e){var t=this;return ts(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=Ln(`#${t.selector}`)}t.svg.attr("cx",t.cx).attr("cy",t.cy).attr("r",t.r).attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("transform",t.transform),t.setClass(t.svg)})()}}class OIe extends Gr{constructor(e){super(),this.floor=ie.all,this.name="step",this.last=!1,this.visible=!0,this.fontSize=10,this.walkLineXY=[0,0],this.nextWalkLineXY=[0,0],this.stringerXY=[0,0],this.nextStingerXY=[0,0],Object.assign(this,e)}draw(e){var t=this;return ts(function*(){if(void 0===t.svg&&(t.svg=Ln(`#${t.selector}`),t.svgText=t.svg.select(".step-plan-text"),t.svgRise=t.svg.select(".step-plan-rise"),t.svgStep=t.svg.select(".step-plan-lines"),t.last&&t.classes.push("last")),!t.show(e))return t.svgStep.attr("points",""),t.svgRise.attr("points",""),void t.svgText.text("");const i=Hi(t.walkLineXY,t.nextWalkLineXY),s=On(i-45,.8*t.parent.run,t.walkLineXY),r=Hi(t.stringerXY,t.walkLineXY),o=Hi(t.nextStingerXY,t.nextWalkLineXY),a=On(r,10,t.walkLineXY),c=On(o,10,t.nextWalkLineXY),l=tW(t.stringers.out.coords,[t.stringerXY,a]).map(m=>({xy:m,d:ns(m,t.stringerXY)})).sort((m,g)=>m.d-g.d).map(m=>m.xy)[0],u=tW(t.stringers.out.coords,[t.nextStingerXY,c]).map(m=>({xy:m,d:ns(m,t.nextStingerXY)})).sort((m,g)=>m.d-g.d).map(m=>m.xy)[0],h=t.stringers.out.coords[1],d=t.stringers.out.coords[2];let f=null,p=null;h[1]!==l[1]&&h[1]===u[1]&&(p=t.stringers.in.coords[1],f=t.stringers.out.coords[1]),d[0]!==l[0]&&d[0]===u[0]&&(p=t.stringers.in.coords[2],f=t.stringers.out.coords[2]),t.svgStep.attr("points",[t.walkLineXY,t.stringerXY,p,t.nextStingerXY,t.nextWalkLineXY,u,f,l].join(" ")),t.svgRise.attr("points",[On(r+90,t.parent.nose,l),On(r+90,t.parent.nose,t.stringerXY)].join(" ")),t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`translate(${s[0]}, ${s[1]})`).text(t.index),t.setClass(t.svg)})()}redraw(e){this.svgText&&this.svgText.attr("font-size",this.meterPerPixel*this.fontSize),this.svgRise&&this.svgRise.attr("stroke-width",this.meterPerPixel*this.lineThickness*1),this.svgStep&&this.svgStep.attr("stroke-width",this.meterPerPixel*this.lineThickness*1)}}class NIe{constructor(){this.ceilingHeight=3.3,this.floorThickness=.5,this.groundFloorTop=-1,this.topFloorTop=-1,this.topFloorBottom=-1,this.groundElevation=-1,this.totalRise=-1,this.totalRun=6,this.run=.3,this.runThickness=.02,this.rise=.2,this.riseThickness=.02,this.nose=.02,this.steps=20,this.walkWidth=.8,this.stairOrigin=[0,0],this.stepsRight=12,this.leftFlightSteps=5,this.midFlightSteps=4,this.totalWidth=2.7,this.totalHeight=-1,this.lesserHeight=-1,this.intersections={},this.walkLineOffset=.3,this.parts=[],this.create()}create(){this.createBuilding(),this.createStep(),this.createMeasures(),this.createPlan()}calculate(e){this.house=e,this.groundFloorTop=0,this.topFloorTop=-this.house.cross.elevations[Jt.groundFloor],this.totalRise=this.topFloorTop-this.groundFloorTop,this.stairOrigin=[this.house.stramien.in.we.b,this.house.stramien.in.ns.b-5],this.angle=Oe(Math.atan(this.totalRise/this.totalRun)*(180/Math.PI),1),this.run=Oe(this.totalRun/this.steps),this.rise=Oe(this.totalRise/this.steps),this.step=Oe(2*this.run+this.run),this.maxSteps=Math.ceil(this.totalRise/.182),this.minSteps=Math.ceil(this.totalRise/.22);const[t,i]=[this.alongWalkLine(1)[1]-this.stairOrigin[1],this.alongWalkLine(this.steps)[1]-this.stairOrigin[1]];this.totalHeight=Math.max(t,i),this.lesserHeight=Math.min(t,i),this.calculateCorrectionArray();const s={coords:[I(this.stairOrigin,[0*this.totalWidth,t]),I(this.stairOrigin,[0*this.totalWidth,0]),I(this.stairOrigin,[1*this.totalWidth,0]),I(this.stairOrigin,[1*this.totalWidth,i])]};this.stringers={in:{coords:[I(s.coords[0],[1*this.walkWidth,0*this.walkWidth]),I(s.coords[1],[1*this.walkWidth,1*this.walkWidth]),I(s.coords[2],[-1*this.walkWidth,1*this.walkWidth]),I(s.coords[3],[-1*this.walkWidth,0*this.walkWidth])]},out:s}}createBuilding(){this.parts.push(new Ii({selector:"floor-groundfloor",floor:ie.all,parent:this,onUpdate:function(e){this.coords=[[-e.run,e.groundFloorTop],[10,e.groundFloorTop],[10,e.groundFloorTop+e.floorThickness],[-e.run,e.groundFloorTop+e.floorThickness]]}})),this.parts.push(new Ii({selector:"floor-topfloor-shadow",floor:ie.all,parent:this,onUpdate:function(e){this.coords=[[e.totalRun,-e.topFloorTop],[-e.run,-e.topFloorTop],[-e.run,-(e.topFloorTop-e.floorThickness)],[e.totalRun,-(e.topFloorTop-e.floorThickness)]]}})),this.parts.push(new Ii({selector:"floor-topfloor",floor:ie.all,parent:this,onUpdate:function(e){this.coords=[[e.totalRun,-e.topFloorTop],[10,-e.topFloorTop],[10,-(e.topFloorTop-e.floorThickness)],[e.totalRun,-(e.topFloorTop-e.floorThickness)]]}})),this.parts.push(new O9({selector:"nose-line",floor:ie.all,parent:this,onUpdate:function(e){this.d=`M0 0 L${e.totalRun} ${-e.totalRise} `}})),this.parts.push(new O9({selector:"back-line",floor:ie.all,parent:this,onUpdate:function(e){const t=1*e.run+.2;this.d=`M${t} 0 L${On(-e.angle,-e.run/Math.tan(e.angle*Math.PI/180),[e.totalRun+t,-e.totalRise])}`}}))}createStep(){for(let e=1;e<25;e++)this.parts.push(new PIe({selector:`step-${e}`,floor:ie.all,parent:this,index:e,onUpdate:function(t){this.outOfDesign=!(e<t.steps+1),this.last=e===t.steps}}))}createMeasures(){this.parts.push(new Wi({selector:"run-size",floor:ie.all,direction:-90,decimals:3,onUpdate:function(e){this.offsetPixels=0,this.offsetMeters=1*e.rise,this.distance=0,this.a=[7*e.run,7*-e.rise],this.b=[8*e.run,8*-e.rise]}})),this.parts.push(new Wi({selector:"rise-size",floor:ie.all,direction:180,offsetPixels:.5,decimals:3,onUpdate:function(e){this.offsetPixels=0,this.offsetMeters=1*e.run,this.distance=0,this.a=[7*e.run,7*-e.rise],this.b=[8*e.run,8*-e.rise]}})),this.parts.push(new Wi({selector:"total-rise-size",floor:ie.all,direction:0,offsetPixels:0,onUpdate:function(e){const t=e.totalRun+2*e.run;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[t,0],this.b=[t,-e.totalRise]}})),this.parts.push(new Wi({selector:"total-run-size",floor:ie.all,direction:90,onUpdate:function(e){this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[0,0],this.b=[e.totalRun,0]}})),this.parts.push(new Wi({selector:"plateau-width",floor:ie.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0]+0,t],this.b=[e.stairOrigin[0]+e.walkWidth,t]}})),this.parts.push(new Wi({selector:"mid-width",floor:ie.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0]+e.walkWidth,t],this.b=[e.stairOrigin[0]+e.totalWidth-e.walkWidth,t]}})),this.parts.push(new Wi({selector:"total-width",floor:ie.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0],t],this.b=[e.stairOrigin[0]+e.totalWidth,t]}})),this.parts.push(new Wi({selector:"total-height",floor:ie.all,direction:0,onUpdate:function(e){const t=e.stairOrigin[0]+e.totalWidth+.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.b=[t,e.stairOrigin[1]],this.a=[t,e.stairOrigin[1]+e.totalHeight]}})),this.parts.push(new Wi({selector:"lesser-height",floor:ie.all,direction:0,onUpdate:function(e){const t=e.stairOrigin[0]+e.totalWidth+.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.b=[t,e.stairOrigin[1]],this.a=[t,e.stairOrigin[1]+e.lesserHeight]}}))}createPlan(){for(let e=1;e<this.steps+1;e++)this.parts.push(new OIe({selector:`step-plan-${e}`,floor:ie.all,parent:this,index:e,onUpdate:function(t){this.stringers=t.stringers,this.walkLineXY=t.alongWalkLine(e),this.nextWalkLineXY=t.alongWalkLine(e+1),this.stringerXY=t.alongStinger(e),this.nextStingerXY=t.alongStinger(e+1)}})),this.parts.push(new lW({selector:"walk-line-"+e,floor:ie.all,parent:this,onUpdate:function(t){this.r=.2*this.lineThickness,[this.cx,this.cy]=t.alongWalkLine(e)}})),this.parts.push(new lW({selector:"step-stinger-"+e,floor:ie.all,parent:this,onUpdate:function(t){this.r=.2*this.lineThickness,[this.cx,this.cy]=t.alongStinger(e)}}));this.parts.push(new Ii({selector:"clip-ground-floor-ref",floor:ie.ground,onUpdate:function(e){const[t,i]=e.stairOrigin,s=t+e.walkWidth,r=t+e.totalWidth-e.walkWidth,o=Math.max(e.alongWalkLine(1)[1],i+e.walkWidth);Math.max(e.alongWalkLine(e.steps)[1],i+e.walkWidth),this.coords=[[t,i],[r,i],[r,i+e.walkWidth],[s,i+e.walkWidth],[s,o],[t,o]]}})),this.parts.push(new Ii({selector:"outline",floor:ie.all,parent:this,onUpdate:function(e){this.coords=[e.stringers.out.coords[0],e.stringers.out.coords[1],e.stringers.out.coords[2],e.stringers.out.coords[3],e.stringers.in.coords[3],e.stringers.in.coords[2],e.stringers.in.coords[1],e.stringers.in.coords[0]]}})),this.parts.push(new O9({selector:"walk-line",floor:ie.all,parent:this,onUpdate:function(e){const t=e.walkWidth-e.walkLineOffset,i=e.alongWalkLine(e.steps),s=e.alongWalkLine(1);this.d=`\n        M${s[0]} ${s[1]}\n        L${s[0]} ${e.stairOrigin[1]+e.walkWidth}\n        a${e.walkLineOffset},${e.walkLineOffset} 0 0 1 ${e.walkLineOffset},${-e.walkLineOffset}\n        L${e.stairOrigin[0]+e.walkWidth} ${e.stairOrigin[1]+t}\n        L${e.stairOrigin[0]+e.totalWidth-e.walkWidth} ${e.stairOrigin[1]+t}\n        a${e.walkLineOffset},${e.walkLineOffset} 0 0 1 ${e.walkLineOffset},${e.walkLineOffset}\n        L${i[0]} ${i[1]}\n        `}}))}calculateCorrectionArray(){const e=this.walkLineOffset*Math.PI/2,t=(this.totalWidth-2*this.walkWidth)/2,i=(this.stepsRight+1)*this.run,r=this.totalRun-i-e-t,o=i-e-t;this.intersections={};const l=this.getEGMethod(r+e/2,this.alongWalkLine(1)[1]-(this.stairOrigin[1]+this.walkWidth),0,0*this.run,!1),u=this.getEGMethod(t+e/2,this.totalWidth/2-this.walkWidth,l+0,0,!0),h=this.getEGMethod(t+e/2,this.totalWidth/2-this.walkWidth,l+0+u,this.run,!1);this.getEGMethod(o+e/2,this.alongWalkLine(this.steps)[1]-(this.stairOrigin[1]+this.walkWidth),l+0+u+h,0*this.run,!0)}getEGMethod(e,t,i,s,r=!1){let o,a,c,l,u;const h=e-s,d=Math.ceil(h/this.run),f=t-s;r?(o=[0,0],a=[0,h],c=[-f,0],l=eW(f,-a[1]/f,a[1]),l=[-l[0],l[1]]):(o=[0,0],a=[0,h],c=[f,0],l=eW(f,-a[1]/f,a[1]));const p=[];for(let m=0;m<d+1;m++)u=r?[0,Math.min(this.run*(d-m),h)]:[0,Math.min(this.run*m,h)],p.push(g6([o,l],[u,c]));for(let m=0;m<d+1;m++)if(0!==m)try{let g;g=r?p[m+1]:p[m-1],this.intersections[i+m]=this.run-ns(g,p[m])}catch{}return d}alongStinger(e){let t=Oe((e-1)*this.run);const i=this.walkLineOffset*Math.PI/2,s=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsRight+1)*this.run,c=this.alongWalkLine(e),l=this.alongWalkLine(e+1),h=(Hi(c,l),isNaN(this.intersections[e])?0:this.intersections[e]);return t<o-s-i/2?[this.stairOrigin[0]+this.walkWidth,c[1]+h]:t===o?[c[0],c[1]+h]:t<o?[c[0]+h,this.stairOrigin[1]+this.walkWidth]:t-o<s+i/2?[c[0]-h,this.stairOrigin[1]+this.walkWidth]:t===this.totalRun?[c[0]-h,c[1]]:[this.stairOrigin[0]+this.totalWidth-this.walkWidth,c[1]+h]}alongWalkLine(e){let t=(e-1)*this.run;const i=this.walkLineOffset*Math.PI/2,s=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsRight+1)*this.run,a=o-i-s;if(t<a){const[c,l]=[this.stairOrigin[0]+this.walkWidth-this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[c,l+a-t]}if(t<a+i)return t-=a,On(180+t/i*90,this.walkLineOffset,[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth]);if(t<o){t-=a+i;const[c,l]=[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[c+t,l]}if(t<o+s){t-=o;const[c,l]=[this.stairOrigin[0]+this.totalWidth/2,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[c+t,l]}if(t<o+s+i)return t-=o+s,On(t/i*90-90,this.walkLineOffset,[this.stairOrigin[0]+this.totalWidth-this.walkWidth,this.stairOrigin[1]+this.walkWidth]);{t-=o+s+i;const[c,l]=[this.stairOrigin[0]+this.totalWidth-this.walkWidth+this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[c,l+t]}}}class FIe extends Gr{constructor(e){super(),this.origin=[0,0],this.scale=[1,1],this.rotate=0,Object.assign(this,e)}draw(e){var t=this;return ts(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=Ln(`#${t.selector}`),t.svg1=t.svg.select(".house-wind-rose-1"),t.svg2=t.svg.select(".house-wind-rose-2"),t.svgText=t.svg.select(".house-wind-rose-text")}t.svg.style("transform",` \n      translate(${t.origin[0]}px, ${t.origin[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svg1.attr("points",[[0,0],[10,30],[0,20]].map(([s,r])=>[s*t.meterPerPixel,r*t.meterPerPixel]).join(" ")).attr("stroke-width",1),t.svg2.attr("points",[[0,0],[-10,30],[0,20]].map(([s,r])=>[s*t.meterPerPixel,r*t.meterPerPixel]).join(" ")).attr("stroke-width",1),t.svgText.attr("font-size",12).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6).attr("transform",`\n          translate(0 ${-8*t.meterPerPixel}) \n          rotate(${t.rotate})\n          `).text("North")})()}}var Le=(()=>{return(n=Le||(Le={})).gips="gips",n.serviceBeams="serviceBeams",n.osb="osb",n.joists="joist",n.outerSheet="outerSheet",n.space="space",n.facade="facade",n.groundFloorEdge="groundFloorEdge",n.roofJoists="roofJoists",Le;var n})();class Y1{constructor(e){Object.assign(this,e)}updateR(e){void 0!==e&&("Outside"===e.name&&(this.r=.04),void 0===this.r&&(this.r=this.diameter/this.lambda))}updateT(e,t,i){isNaN(this.r)||(this.deltaT=this.r/t*i,this.temp=e.temp+this.deltaT)}}class BIe{constructor(){this.tempMin=-10,this.tempMax=24,this.Thicknesses=Le,this.thickness={[Le.gips]:.0125,[Le.serviceBeams]:.06,[Le.osb]:.015,[Le.joists]:.3,[Le.outerSheet]:.06,[Le.space]:.04,[Le.facade]:.04,[Le.roofJoists]:.4},this.crossDepth={},this.x=[]}get tempDiff(){return this.tempMax-this.tempMin}getRoofPoint(e){const[t,i]=I(this.cross.roofPoints[e],[-this.cross.wallOuterThickness,0]);return[t,i]}calculate(e){this.cross=e.cross;const t=(s,r,o=!1)=>{this.crossDepth[s]=Oe(Math.abs(this.crossDepth[r])+Math.abs(this.thickness[r])),o&&(this.crossDepth[s]=-Math.abs(this.crossDepth[s]))};this.crossDepth[Le.joists]=0,this.crossDepth[Le.osb]=0,this.crossDepth[Le.groundFloorEdge]=.2,t(Le.outerSheet,Le.joists),t(Le.space,Le.outerSheet),t(Le.facade,Le.space),t(Le.serviceBeams,Le.osb,!0),t(Le.gips,Le.serviceBeams,!0);const i=[new Y1({name:"Outside",temp:this.tempMin}),new Y1({name:"r<sub>outside</sub>"}),new Y1({name:"Wood",diameter:this.thickness[Le.facade],lambda:.13}),new Y1({name:"space",diameter:this.thickness[Le.space],lambda:.001}),new Y1({name:"Celit",diameter:this.thickness[Le.outerSheet],lambda:.048}),new Y1({name:"CLS+Glass wol",diameter:this.thickness[Le.joists],lambda:.032}),new Y1({name:"OBS",diameter:this.thickness[Le.osb],lambda:.13}),new Y1({name:"Isolated Installations",diameter:this.thickness[Le.serviceBeams],lambda:.035}),new Y1({name:"Dry wall / Gips ",diameter:this.thickness[Le.gips],lambda:1.3}),new Y1({name:"r<sub>inside</sub>"}),new Y1({name:"Inside",temp:this.tempMax})];i.forEach((s,r)=>{s.updateR(i[r-1])}),this.rConstruction=Oe(Vo(i.map(s=>s.r).filter(s=>s)),1),this.U=Oe(1/this.rConstruction,3),this.outerWallThickness=Oe(Vo(i.map(s=>s.diameter).filter(s=>s)),3),i.forEach((s,r)=>{s.updateT(i[r-1],this.rConstruction,this.tempDiff)}),this.heatCalcs=i}}class GIe extends class UIe{}{constructor(e){super(),this.outerBase=void 0,this.extensionToNorth=void 0,this.extensionToSouth=void 0,this.extensionToWest=void 0,this.extensionToEast=void 0,this.houseWidth=void 0,this.houseLength=void 0,this.gridSizeY=void 0,this.gridSizeX=void 0,this.balconyWidth=void 0,this.balconyEdge=.3,this.serverRoom=[void 0,void 0],this.cross=new IIe,this.stair=new NIe,this.construction=new BIe,this.stats={wall:{},floor:{}},this.tower={show:void 0,innerCoords:void 0,outerCoords:void 0,outerWallOffset:void 0,width:void 0,houseIncrement:void 0,innerIncrement:void 0,outerIncrement:void 0,innerWallLength:void 0,outerWallLength:void 0,intersectionEast:void 0,intersectionWest:void 0,wallOuterThickness:void 0,footprintVisible:!1},Object.assign(this,e),window.house=this,this.calculateHouse(),this.linkParts(),this.calculateStats(),this.createStramien(),this.createGrid(),this.createMeasures(),this.createExtra()}createExtra(){this.parts.push(new YC);const e=new ro({selector:"balcony-edge",floor:ie.ground,lineThickness:1,dash:[1,8],onUpdate:function(r){const o=r.stramien.in,a=r.balconyWidth+r.balconyEdge;this.coords=[[o.we.b,o.ns.b+a],[o.we.c,o.ns.b+a]]}});this.parts.push(e);const t=new ro({selector:"hall-edge",floor:ie.ground,lineThickness:1,dash:[1,8],onUpdate:function(r){const o=r.stramien.in,c=3*r.wallInnerThickness+2;this.coords=[[o.we.b,o.ns.b-c],[o.we.b+(r.stair.totalWidth-r.stair.walkWidth),o.ns.b-c]]}});this.parts.push(t);const i=new ro({selector:"view-lines",floor:ie.ground,lineThickness:3,onUpdate:function(r){const o=r.stramien.in,a=3*r.studDistance,c=o.we.b+1,l=o.ns.b+(o.ns.c-o.ns.b)/2;this.coords=[[c,r.stair.stairOrigin[1]],[c,o.ns.d+a],[c,l],[o.we.a-a,l],[o.we.d+a,l]]}});this.parts.push(i);const s=new Ii({selector:"tower-walls",floor:ie.all,onUpdate:function(r){this.visible=r.tower.footprintVisible,this.coords=[...r.tower.innerCoords,r.tower.innerCoords[0],...[...r.tower.outerCoords].reverse(),r.tower.outerCoords[7]]}});this.parts.push(s),this.parts.push(new ro({selector:"roof-line-1",floor:ie.top,lineThickness:1,dash:[10,10],onUpdate:function(r){const o=r.stramien.in,c=[o.we.b,o.ns.b],l=[o.we.b,o.ns.a];this.coords=[I([o.we.a,o.ns.b],[0,r.cross.minimumHeightWidth]),I(c,[r.cross.minimumHeightWidth,r.cross.minimumHeightWidth]),I(l,[r.cross.minimumHeightWidth,0])]}})),this.parts.push(new ro({selector:"roof-line-2",floor:ie.top,lineThickness:1,dash:[10,10],onUpdate:function(r){const o=r.stramien.in,c=r.tower.show?[o.we.c,o.ns.b-r.tower.houseIncrement-r.cross.minimumHeightWidth]:[o.we.c,o.ns.b];this.coords=[I([o.we.c,o.ns.a],[-r.cross.minimumHeightWidth,0]),I(c,[-r.cross.minimumHeightWidth,r.cross.minimumHeightWidth])]}})),this.parts.push(new ro({selector:"roof-line-3",floor:ie.top,lineThickness:1,dash:[10,10],onUpdate:function(r){const o=r.stramien.in,c=[o.we.d,o.ns.b];this.coords=[I(r.tower.show?[o.we.c+r.tower.houseIncrement+r.cross.minimumHeightWidth,o.ns.b]:[o.we.c,o.ns.b],[-r.cross.minimumHeightWidth,r.cross.minimumHeightWidth]),I(c,[0,r.cross.minimumHeightWidth])]}})),this.parts.push(new ro({selector:"roof-line-4",floor:ie.top,lineThickness:1,dash:[10,10],onUpdate:function(r){const o=r.stramien.in,c=[o.we.c,o.ns.c];this.coords=[I([o.we.d,o.ns.c],[0,-r.cross.minimumHeightWidth]),I(c,[0,-r.cross.minimumHeightWidth])]}})),this.parts.push(new ro({selector:"roof-line-5",floor:ie.top,lineThickness:1,dash:[10,10],onUpdate:function(r){const o=r.stramien.in,c=[o.we.a,o.ns.c];this.coords=[I([o.we.b,o.ns.c],[0,-r.cross.minimumHeightWidth]),I(c,[0,-r.cross.minimumHeightWidth])]}}))}createMeasures(){this.parts.push(new Wi({selector:"house-total-width",floor:ie.all,direction:90,textRotate:0,onUpdate:function(e){const t=e.houseLength+2*e.studDistance;this.offsetPixels=16,this.a=[e.stramien.out.we.a,t],this.b=[e.stramien.out.we.d,t]}}));for(let e=0;e<3;e++){const t=["a","b","c","d"];this.parts.push(new Wi({selector:"house-width-"+(e+1),floor:ie.all,direction:90,textRotate:0,onUpdate:function(s){const r=s.houseLength+2*s.studDistance;this.offsetPixels=0,this.a=[s.stramien.out.we[t[e+0]],r],this.b=[s.stramien.out.we[t[e+1]],r]}}))}this.parts.push(new Wi({selector:"house-height-1",floor:ie.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.a],this.a=[t,e.stramien.out.ns.b]}})),this.parts.push(new Wi({selector:"house-height-inner",floor:ie.all,direction:180,textRotate:0,onUpdate:function(e){const t=1*-e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.in.ns.b],this.a=[t,e.stramien.in.ns.c]}})),this.parts.push(new Wi({selector:"house-height-2",floor:ie.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.b],this.a=[t,e.stramien.out.ns.c]}})),this.parts.push(new Wi({selector:"house-height-3",floor:ie.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.c],this.a=[t,e.stramien.out.ns.d]}})),this.parts.push(new Wi({selector:"house-total-height",floor:ie.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=32,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.a],this.a=[t,e.stramien.out.ns.d]}}))}createStramien(){const e=3*this.studDistance;for(let t of["in","out"])for(let i of["we","ns"])for(let s of["a","b","c","d"]){const r=`house-stramien-${t}-${i}-${s}`;this.parts.push(new ro("ns"===i?{floor:ie.all,selector:r,lineThickness:1.5,onUpdate:function(o){this.coords=[[-e,o.stramien[t][i][s]],[o.houseWidth+e,o.stramien[t][i][s]]]}}:{floor:ie.all,selector:r,lineThickness:1.5,onUpdate:function(o){this.coords=[[o.stramien[t][i][s],-e],[o.stramien[t][i][s],o.houseLength+e]]}}))}}createGrid(){const e=3*this.studDistance;this.gridSizeY=Math.round(this.houseWidth/this.studDistance+2+1);for(let i=0;i<55;i++){const s=[0,this.studAmountWest,this.studAmountWest+this.studAmount,this.studAmountWest+this.studAmount+this.studAmountEast].includes(i-1),o=new ro({selector:`grid-index-${i}.grid-vertical`,lineThickness:s?.8:.6,index:i,floor:ie.all,onUpdate:function(a){const c=(i-1)*a.studDistance;this.points=this.index<a.gridSizeY?[[c,-e],[c,a.houseLength+e]]:[],this.classes=[s?"grid-main":(i-1)%5?"grid-sub":"grid-subsub"]}});o.createSelector(),this.parts.push(o)}this.gridSizeX=Math.round(this.houseLength/this.studDistance+2+1);for(let i=0;i<55;i++){const s=[0,this.studAmountNorth,this.studAmountNorth+this.studAmount,this.studAmountNorth+this.studAmount+this.studAmountSouth].includes(i-1);this.parts.push(new ro({lineThickness:s?.8:.6,selector:`grid-index-${i}.grid-horizontal`,index:i,floor:ie.all,onUpdate:function(o){const a=(i-1)*o.studDistance;this.points=this.index<o.gridSizeX?[[-e,a],[o.houseWidth+e,a]]:[],this.classes=[s?"grid-main":(i-1)%5?"grid-sub":"grid-subsub"]}}))}this.parts[".house-wind-rose"]=new FIe({rotate:0,floor:ie.all,parent:this,onUpdate:function(i){this.origin=[2,0]}})}linkParts(){const e=(t,i)=>{void 0!==t&&(t.parent=i,t.onUpdate(this),t.createSelector(),t.parts&&t.parts.forEach(s=>e(s,t)),this.partsFlatten.push(t))};this.partsFlatten=[],this.parts.forEach(t=>e(t,this))}calculateTower(){this.tower.wallOuterThickness=this.wallOuterThickness,this.tower.outerWallOffset=Oe(this.tower.wallOuterThickness*Math.tan(22.5*Math.PI/180)),this.tower.innerWallLength=this.towerWidth,this.tower.outerWallLength=2*this.tower.outerWallOffset+this.tower.innerWallLength,this.tower.show=this.showTower,this.tower.width=this.towerWidth,this.tower.houseIncrement=Oe(this.tower.outerWallLength/Math.sqrt(2)+this.tower.outerWallLength)}calculateHouse(){this.outerBase=Oe(this.studAmount*this.studDistance),this.extensionToSouth=this.studAmountSouth*this.studDistance,this.extensionToNorth=this.studAmountNorth*this.studDistance,this.extensionToEast=this.studAmountEast*this.studDistance,this.extensionToWest=this.studAmountWest*this.studDistance,this.calculateTower(),this.tower.show?this.extensionToNorth=Math.max(this.extensionToNorth,Math.ceil(this.tower.houseIncrement)):this.tower.houseIncrement=0;const e={we:{a:this.wallOuterThickness,b:this.extensionToWest+1*this.wallOuterThickness,c:this.extensionToWest+1*this.outerBase+-1*this.wallOuterThickness,d:this.extensionToEast+this.outerBase+this.extensionToWest+-1*this.wallOuterThickness},ns:{a:this.wallOuterThickness,b:this.extensionToNorth+1*this.wallOuterThickness,c:this.extensionToNorth+this.outerBase+-1*this.wallOuterThickness,d:this.extensionToNorth+this.outerBase+this.extensionToSouth+-1*this.wallOuterThickness}};this.stramien={in:e,out:{we:{a:e.we.a-this.wallOuterThickness,b:e.we.b-this.wallOuterThickness,c:e.we.c+this.wallOuterThickness,d:e.we.d+this.wallOuterThickness},ns:{a:e.ns.a-this.wallOuterThickness,b:e.ns.b-this.wallOuterThickness,c:e.ns.c+this.wallOuterThickness,d:e.ns.d+this.wallOuterThickness}}},this.serverRoom=[this.stramien.in.we.c-1,this.stramien.in.ns.b-this.wallInnerThickness],this.houseWidth=Oe(this.stramien.out.we.d-this.stramien.out.we.a),this.houseLength=Oe(this.stramien.out.ns.d-this.stramien.out.ns.a),this.calculateTowerCoords(),this.cross.calculate(this),this.stair.calculate(this),this.construction.calculate(this)}calculateStats(){this.getWallLength(),this.getWallArea(),this.getFloorArea()}getWallLength(){this.stats.wall.innerLength=Math.ceil(Vo(Object.values(this.partsFlatten).filter(e=>e instanceof ot).map(e=>e.type===qe.outer?e.getLength(K.in):e.type===qe.inner?e.getLength(K.out)+e.getLength(K.in):0))),this.stats.wall.outerLength=Math.ceil(Vo(Object.values(this.partsFlatten).filter(e=>e instanceof ot).filter(e=>e.type===qe.outer).map(e=>e.getLength(K.out)),1))}getWallArea(){this.stats.wall.innerArea=Math.ceil(Vo(Object.values(this.partsFlatten).filter(e=>e instanceof ot).map(e=>{let t=0;return e.type===qe.inner&&(t+=e.getArea(K.out)),t+=e.getArea(K.in),t}))),this.stats.wall.outerArea=Math.ceil(Vo(Object.values(this.partsFlatten).filter(e=>e instanceof ot).filter(e=>e.type===qe.outer).map(e=>e.getArea(K.out)),1))}getFloorArea(){let e={};Object.keys(ie).map(t=>{e[t]={area:0,volume:0}}),this.partsFlatten.filter(t=>t instanceof ss).filter(t=>"innerFootprint"!==t.name).filter(t=>!t.hole).forEach(t=>{e[t.floor].area+=t.area(),e[t.floor].volume+=t.volume(),e[ie.all].area+=t.area(),e[ie.all].volume+=t.volume()}),Object.keys(ie).map(t=>{e[t]={area:Oe(e[t].area,0),volume:Oe(e[t].volume,0)}}),this.stats.floor=e}calculateTowerCoords(){!1===this.tower.show&&(this.tower.width=0,this.tower.outerWallOffset=0,this.tower.innerWallLength=0,this.tower.outerWallLength=0,this.tower.houseIncrement=0,this.tower.wallOuterThickness=0);let e=this.tower.wallOuterThickness/Math.cos(22.5*Math.PI/180);this.tower.innerIncrement=Math.sqrt(this.tower.innerWallLength**2/2),this.tower.outerIncrement=Math.sqrt(this.tower.outerWallLength**2/2);const t=[this.stramien.out.we.c+this.tower.outerWallOffset,this.stramien.out.ns.b-this.tower.innerIncrement-this.tower.innerWallLength-this.tower.outerWallOffset],i=t,s=I(t,[this.tower.width,0]),r=On(45,this.tower.width,s),o=I(r,[0,this.tower.width]),a=On(135,this.tower.width,o),c=I(a,[-this.tower.width,0]),l=On(225,this.tower.width,c),u=I(l,[0,-this.tower.width]);this.tower.innerCoords=[i,s,r,o,a,c,l,u],this.tower.outerCoords=[On(-112.5,e,i),On(-67.5,e,s),On(-22.5,e,r),On(22.5,e,o),On(67.5,e,a),On(112.5,e,c),On(157.5,e,l),On(202.5,e,u)],this.tower.intersectionWest=I(this.tower.outerCoords[0],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),this.tower.intersectionEast=I(this.tower.outerCoords[3],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),!1===this.tower.show&&(this.tower.intersectionWest=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.intersectionEast=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.innerCoords=[...Array(8).keys()].map(h=>[this.stramien.in.we.c,this.stramien.in.ns.b]),this.tower.outerCoords=[...Array(8).keys()].map(h=>[this.stramien.out.we.c,this.stramien.out.ns.b]))}redrawHouse(e,t,i,s){const r=(o,a)=>{a.parts.forEach(function(){var c=ts(function*(l){void 0!==l&&(yield l.update(o,e,i,s),void 0!==l.parts&&r(o,l))});return function(l){return c.apply(this,arguments)}}())};t===Xn.plan&&(r(this,this),r(this.stair,this.stair)),t===Xn.cross&&r(this.cross,this.cross),[Xn.stairCross,Xn.stairPlan].includes(t)&&r(this.stair,this.stair)}}class ci extends Gr{constructor(e){super(),this.width=.8,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.outside=!1,Object.assign(this,e)}draw(e){var t=this;return ts(function*(){if(void 0===t.svg&&(t.svg=Ln(`#${t.selector}`),t.svgOpening=t.svg.select(".door-wall-opening"),t.svgSwing=t.svg.select(".door-swing")),!t.show(e))return t.svgOpening.attr("points",""),void t.svgSwing.attr("d","");let i;i=1===t.scale[0]?[0,0]:[t.parent.thickness,0],t.svg.style("transform",` \n      translate(${t.origin[0]+i[0]}px, ${t.origin[1]+i[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svgOpening.attr("points",[[0,-t.width],[t.parent.thickness,-t.width],[t.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill"),t.svgSwing.attr("d",`M${t.parent.thickness},0 \n        L0,0  \n        L${-t.width},0  \n        A${t.width},${t.width} 0 0,1  \n        0,${-t.width}\n        L${t.parent.thickness},${-t.width}`)})()}redraw(e){this.svgOpening&&this.svgOpening.attr("stroke-width",this.meterPerPixel*this.lineThickness),this.svgSwing&&this.svgSwing.attr("stroke-width",1*this.meterPerPixel)}}var N2=(()=>{return(n=N2||(N2={})).windowWall="windowWall",n.standard="standard",n.hexagon="hexagon",N2;var n})();class ir extends Gr{constructor(e){super(),this.floor=ie.ground,this.windowForm=N2.standard,this.width=2,this.height=2,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.frameThickness=.1,this.frameDepth=.1,this.innerDepthFrame=.1,this.openable=!0,Object.assign(this,e)}get outerDepthFrame(){return this.innerDepthFrame+this.frameDepth}draw(e){var t=this;return ts(function*(){if(void 0===t.svg&&(t.svg=Ln(`#${t.selector}`),t.svgOpening=t.svg.select(".window-wall-opening"),t.svgPane=t.svg.select(".window-pane")),!t.show(e))return t.svgOpening.attr("points",""),void t.svgPane.attr("d","");let i;i=1===t.scale[0]?[0,0]:[t.parent.thickness,0],t.svg.style("transform",` \n      translate(${t.origin[0]+i[0]}px, ${t.origin[1]+i[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svgOpening.attr("points",[[0,t.width],[t.parent.thickness,t.width],[t.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill"),t.svgPane.attr("d",`M${t.innerDepthFrame},0  \n          L${t.innerDepthFrame},${t.frameThickness} \n          L${t.outerDepthFrame},${t.frameThickness}  \n          L${t.outerDepthFrame},0  \n          \n          L${t.outerDepthFrame},${t.width}  \n          L${t.outerDepthFrame},${t.width-t.frameThickness}  \n          L${t.innerDepthFrame},${t.width-t.frameThickness} \n          L${t.innerDepthFrame},${t.width}  \n\n          L${t.innerDepthFrame},0  \n          L${t.innerDepthFrame},${t.frameThickness} \n          L${t.innerDepthFrame+t.frameDepth/2},${t.frameThickness}  \n          L${t.innerDepthFrame+t.frameDepth/2},${t.width-t.frameThickness}  \n          `)})()}redraw(e){this.svgOpening&&this.svgOpening.attr("stroke-width",this.meterPerPixel*this.lineThickness),this.svgPane&&this.svgPane.attr("stroke-width",1*this.meterPerPixel)}}class zs extends de{constructor(e){super(e),this.sensorType=X.lightBulb,Object.assign(this,e)}}class oo extends de{constructor(e){super(e),this.sensorType=X.ventOut,this.offsetWall=0,this.size=200,Object.assign(this,e)}get lineThickness(){return this.size/1e3/this.meterPerPixel}}class _s extends de{constructor(e){super(e),this.offsetWall=0,this.size=20,this.verticalCableLength=0,this.tooltip=()=>{let t=`<b>${this.sensorType.toTitleCase()} `;return this.cableLength>0&&(t+=`<br>Pipe length ${Oe(this.cableLength,1)}m`),t+=`<br>vertical pipe: ${Oe(this.verticalCableLength,1)}m`,t},Object.assign(this,e)}get lineThickness(){return this.size/1e3/this.meterPerPixel}init(e,t){const i=t.cross.ceilingHeight,s=t.cross.topFloorThickness;this.sensorType===X.toilet?(this.size=120,this.elevation=0,this.verticalCableLength+=e===ie.top?i+2*s:s):this.sensorType===X.waterWarm?(this.size=20,this.elevation=1.6,this.verticalCableLength+=e===ie.ground?i-this.elevation+1*s:s+this.elevation):this.sensorType===X.drain&&(this.size=40,this.elevation=0,this.verticalCableLength+=e===ie.top?i+2*s:s)}}const WIe=[new ss({name:"Toilet-upstairs",floor:ie.top,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b-1-n.wallInnerThickness],this.squaredRoom(1.7,1)},parts:[new ot({floor:ie.top,type:qe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=I(this.parent.northWestCorner,[0,0]),this.sides={[K.out]:[I(this.origin,[0,-n.wallInnerThickness]),I(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[K.in]:[I(this.origin,[0,0]),I(this.origin,[this.parent.width,0])]}},parts:[new _s({sensorType:X.drain,onUpdate:function(n){const e=I(this.parent.getPosition(K.in,.5,0),[0,0]),t=this.parent.parent;this.points=[e,[e[0],t.northWestCorner[1]+t.height/2]]}}),new _s({sensorType:X.waterWarm,onUpdate:function(n){const e=I(this.parent.getPosition(K.in,.5,0),[0,0]);this.points=[e,Ce(n.serverRoom,e,!0),n.serverRoom]}})]}),new ot({type:qe.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=I(e.northWestCorner,[e.width,0]),this.sides={[K.out]:[I(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),I(this.origin,[+n.wallInnerThickness,e.height+n.wallInnerThickness])],[K.in]:[I(this.origin,[0,0]),I(this.origin,[0,e.height])]}}}),new ot({floor:ie.top,type:qe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=I(e.northWestCorner,[e.width,e.height]),this.sides={[K.out]:[I(this.origin,[+n.wallInnerThickness,n.wallInnerThickness]),I(this.origin,[-e.width,n.wallInnerThickness])],[K.in]:[I(this.origin,[0,0]),I(this.origin,[-e.width,0])]}},parts:[new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(K.in,0,1);this.points=[e,Ce(n.serverRoom,e,!0),n.serverRoom]}}),new de({offsetWall:-.3,sensorType:X.lightSwitch,onUpdate:function(n){const e=I(this.parent.getPosition(K.in,0,1),[0,n.wallInnerThickness]);this.points=[e,Ce(n.serverRoom,e,!0),n.serverRoom]}}),new ci({scale:[-1,1],rotate:-90,onUpdate:function(n){this.origin=I(this.parent.getPosition(K.in,0,0),[-n.wallInnerThickness,0])}})]}),new ot({type:qe.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const e=this.parent;this.origin=I(e.northWestCorner,[0*e.width,1*e.height]),this.innerWallLength=e.height,this.sides={[K.in]:[I(this.origin,[0,0]),I(this.origin,[0,-this.innerWallLength])]}},parts:[new _s({sensorType:X.toilet,size:120,onUpdate:function(n){const e=I(this.parent.getPosition(K.in,.5,0),[n.cross.minimumHeightWidth+.1,0]);this.points=[e,Ce(n.serverRoom,e,!0),n.serverRoom]}})]}),new zs({onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),new oo({sensorType:X.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]}),new ss({name:"storage-upstairs",floor:ie.top,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b-1-2*n.wallInnerThickness-1],this.squaredRoom(1.7,1)},parts:[new ot({floor:ie.top,type:qe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=I(this.parent.northWestCorner,[0,0]),this.sides={[K.out]:[I(this.origin,[0,-n.wallInnerThickness]),I(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[K.in]:[I(this.origin,[0,0]),I(this.origin,[this.parent.width,0])]}}}),new ot({type:qe.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=I(e.northWestCorner,[e.width,0]),this.sides={[K.out]:[I(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),I(this.origin,[+n.wallInnerThickness,e.height])],[K.in]:[I(this.origin,[0,0]),I(this.origin,[0,e.height])]}},parts:[new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(K.in,0,.8);this.points=[e,Ce(n.serverRoom,e,!1),n.serverRoom]}}),new ci({scale:[-1,1],rotate:180,onUpdate:function(n){this.origin=I(this.parent.getPosition(K.in,0,0),[-n.wallInnerThickness,0])}})]}),new zs({onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]}),new ss({name:"main-bedroom",floor:ie.top,onUpdate:function(n){this.width=Oe(n.stramien.in.we.c-n.stramien.in.we.b),this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.a],this.height=Oe(n.stramien.in.ns.b-this.northWestCorner[1]-n.tower.houseIncrement-n.wallInnerThickness-1),this.center=I(this.northWestCorner,[this.width/2,this.height/2]),this.centralElectricity=this.center;const t=n.stair.totalWidth+n.wallInnerThickness,i=n.stair.stairOrigin[1]-this.northWestCorner[1]-n.wallInnerThickness;this.coords=[this.northWestCorner,I(this.northWestCorner,[this.width,0]),I(this.northWestCorner,[this.width,this.height]),I(this.northWestCorner,[t,this.height]),I(this.northWestCorner,[t,i]),I(this.northWestCorner,[0,i])]},parts:[new ot({floor:ie.top,type:qe.theoretic,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallOuterThickness,this.origin=I(this.parent.northWestCorner,[0,0]),this.sides={[K.in]:[I(this.origin,[0,0]),I(this.origin,[this.parent.width,0])]}},parts:[new de({offset:[0,.3],amount:2,sensorType:X.socket,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(K.in,.5,-.4);this.points=[t,Ce(e,t,!0),e]}})]}),new ot({floor:ie.top,type:qe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[2],this.innerWallLength=ns(e.coords[3],e.coords[2]),this.sides={[K.out]:[I(this.origin,[0,n.wallInnerThickness]),I(this.origin,[-(this.innerWallLength+n.wallInnerThickness),n.wallInnerThickness])],[K.in]:[I(this.origin,[0,0]),I(this.origin,[-this.innerWallLength,0])]}},parts:[new ci({scale:[1,1],rotate:90,onUpdate:function(n){this.origin=I(this.parent.getPosition(K.in,1,0),[0,0])}}),...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(K.in,1,-1);this.points=[t,Ce(e.serverRoom,t,!1),e.serverRoom]}}))]}),new ot({type:qe.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const e=this.parent;this.origin=e.coords[3],this.innerWallLength=ns(e.coords[4],e.coords[3]),this.sides={[K.out]:[I(this.origin,[-n.wallInnerThickness,n.wallInnerThickness]),I(this.origin,[-n.wallInnerThickness,-this.innerWallLength+n.wallInnerThickness])],[K.in]:[I(this.origin,[0,0]),I(this.origin,[0,-this.innerWallLength])]}}}),new ot({name:"SouthLeft",floor:ie.top,type:qe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[4],this.innerWallLength=ns(e.coords[5],e.coords[4]),this.sides={[K.out]:[I(this.origin,[-n.wallInnerThickness,n.wallInnerThickness]),I(this.origin,[-this.innerWallLength,n.wallInnerThickness])],[K.in]:[I(this.origin,[0,0]),I(this.origin,[-this.innerWallLength,0])]}},parts:[new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(K.in,0,.3);this.points=[t,Ce(e,t,!0),e]}}),new de({offset:[0,.3],amount:2,sensorType:X.socket,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(K.in,0,0);this.points=[t,Ce(e,t,!0),e]}})]}),new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.centralElectricity;this.points=[e,Ce(n.serverRoom,e,!1),n.serverRoom]}}),new zs({onUpdate:function(n){const t=I(this.parent.center,[1,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),new oo({onUpdate:function(n){const e=this.parent,t=I(e.northWestCorner,[e.width/2,2]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]}),new ss({name:"bathroom",floor:ie.top,onUpdate:function(n){const s=n.stramien.in.ns.b-n.stramien.in.ns.a-n.tower.houseIncrement+n.wallInnerThickness+n.wallInnerThickness-1,o=n.stramien.in.ns.b-.5,a=n.tower.innerCoords[3][0]-2;this.northWestCorner=[n.stair.stairOrigin[0]+n.stair.totalWidth+1.0001+n.wallInnerThickness,s],this.center=I(this.northWestCorner,[2,2]),this.coords=[this.northWestCorner,[n.stramien.in.we.c,s],[n.stramien.in.we.c,n.tower.innerCoords[0][1]],n.tower.innerCoords[1],n.tower.innerCoords[2],[n.tower.innerCoords[3][0],o],[a,o],[a,n.stramien.in.ns.b-n.wallInnerThickness],[this.northWestCorner[0],n.stramien.in.ns.b-n.wallInnerThickness]]},parts:[new ot({floor:ie.top,type:qe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[5],this.innerWallLength=ns(e.coords[5],e.coords[6]),this.sides={[K.out]:[I(e.coords[5],[0,n.wallInnerThickness]),I(e.coords[6],[n.wallInnerThickness,n.wallInnerThickness])],[K.in]:[I(e.coords[5],[0,0]),I(e.coords[6],[0,0])]}},parts:[new _s({sensorType:X.shower,onUpdate:function(n){const i=this.parent.getPosition(K.in,0,n.tower.width);this.points=[I(i,[0,-.3]),i,Ce(n.serverRoom,i,!0),n.serverRoom]}}),new _s({sensorType:X.drain,size:50,onUpdate:function(n){const i=this.parent.getPosition(K.in,0,n.tower.width);this.points=[I(i,[0,-.3]),i,Ce(n.serverRoom,i,!0),n.serverRoom]}})]}),new ot({type:qe.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[6],this.innerWallLength=ns(e.coords[6],e.coords[7]),this.sides={[K.out]:[I(e.coords[6],[n.wallInnerThickness,n.wallInnerThickness]),I(e.coords[7],[n.wallInnerThickness,n.wallInnerThickness])],[K.in]:[I(e.coords[6],[0,0]),I(e.coords[7],[0,0])]}}}),new ot({name:"SouthLeft",floor:ie.top,type:qe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[5],this.innerWallLength=ns(e.coords[7],e.coords[8]),this.sides={[K.out]:[I(e.coords[7],[n.wallInnerThickness,n.wallInnerThickness]),I(e.coords[8],[-n.wallInnerThickness,n.wallInnerThickness])],[K.in]:[I(e.coords[7],[0,0]),I(e.coords[8],[0,0])]}},parts:[new ci({scale:[1,1],rotate:90,onUpdate:function(n){this.origin=I(this.parent.getPosition(K.in,1,0),[0,0])}}),...[X.lightSwitch,X.temperature].map(n=>new de({amount:n===X.lightSwitch?2:1,sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(K.in,1,-1);this.points=[t,Ce(e.serverRoom,t,!0),e.serverRoom]}})),...[X.lightSwitch,X.temperature].map(n=>new de({offsetWall:-.3,sensorType:n,onUpdate:function(e){const t=I(this.parent.getPosition(K.in,1,-1),[0,e.wallInnerThickness]);this.points=[t,Ce(e.serverRoom,t,!0),e.serverRoom]}}))]}),new ot({type:qe.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[8],this.innerWallLength=ns(e.coords[8],e.coords[0]),this.sides={[K.out]:[I(e.coords[8],[-n.wallInnerThickness,n.wallInnerThickness]),I(e.coords[0],[-n.wallInnerThickness,0])],[K.in]:[I(e.coords[8],[0,0]),I(e.coords[0],[0,0])]}},parts:[new de({offsetWall:-.3,sensorType:X.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(K.in,1,-.5);this.points=[I(t,[-n.wallInnerThickness,0]),Ce(e,t,!0),e]}}),...[0,1,2].map(n=>new de({amount:1===n?2:1,offsetWall:1===n?-.3:.3,sensorType:X.socket,onUpdate:function(e){const t=e.serverRoom,i=this.parent.getPosition(K.in,(n+1)/4,0);this.points=[I(i,[1===n?-e.wallInnerThickness:0,0]),I(i,[0,0]),Ce(t,i,!1),t]}})),new _s({sensorType:X.drain,onUpdate:function(n){const t=this.parent,i=I(t.getPosition(K.in,2/3,0),[.3,0]),s=I(t.getPosition(K.in,1/3,0),[.3,0]);this.points=[i,s]}}),new _s({sensorType:X.drain,onUpdate:function(n){const i=I(this.parent.getPosition(K.in,1/3,0),[.3,0]);this.points=[i,[i[0],n.stramien.in.ns.b-(.5+n.wallInnerThickness)]]}}),new _s({sensorType:X.waterWarm,onUpdate:function(n){const e=I(this.parent.getPosition(K.in,.6666666666666666,0),[.3,0]),t=I(this.parent.getPosition(K.in,1/3,0),[.3,0]);this.points=[e,t]}}),new _s({sensorType:X.waterWarm,onUpdate:function(n){const e=I(this.parent.getPosition(K.in,.3333333333333333,0),[.3,0]);this.points=[e]}}),...[X.lightSwitch,X.temperature].map(n=>new de({offsetWall:-.3,sensorType:n,onUpdate:function(e){const t=I(this.parent.getPosition(K.in,1,-1),[-e.wallInnerThickness,0]);this.points=[t,Ce(e.serverRoom,t,!1),e.serverRoom]}}))]}),new zs({onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),new oo({sensorType:X.ventIn,size:400,onUpdate:function(n){const t=I(n.serverRoom,[0,-1]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]}),new ss({name:"Upper-east",floor:ie.top,onUpdate:function(n){const t=n.stramien;this.northWestCorner=[t.in.we.c+n.wallInnerThickness,t.in.ns.b+n.balconyWidth+n.wallInnerThickness],this.squaredRoom(t.in.we.d-t.in.we.c-n.wallInnerThickness,t.in.ns.c-t.in.ns.b-n.balconyWidth-n.wallInnerThickness)},parts:[new ot({type:qe.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=I(e.northWestCorner,[0*e.width,0*e.height]),this.sides={[K.out]:[I(e.northWestCorner,[-n.wallInnerThickness,-n.wallInnerThickness]),I(e.northWestCorner,[1*e.width,0*e.height-n.wallInnerThickness])],[K.in]:[I(e.northWestCorner,[0*e.width,0*e.height]),I(e.northWestCorner,[1*e.width,0*e.height])]}},parts:[...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(K.in,0,1);this.points=[t,Ce(e.serverRoom,t,!1),e.serverRoom]}})),new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(K.in,0,1);this.points=[t,Ce(e,t,!1),e]}}),new ci({scale:[1,-1],rotate:-90,onUpdate:function(n){this.origin=I(this.parent.getPosition(K.in,0,0),[0,0])}})]}),new ot({type:qe.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=I(e.northWestCorner,[1*e.width,0*e.height]),this.sides={[K.in]:[I(e.northWestCorner,[1*e.width,0*e.height]),I(e.northWestCorner,[1*e.width,1*e.height])]}}}),new ot({type:qe.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=I(e.northWestCorner,[1*e.width,1*e.height]),this.sides={[K.in]:[I(e.northWestCorner,[1*e.width,1*e.height]),I(e.northWestCorner,[0*e.width,1*e.height])]}}}),new ot({type:qe.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[1],this.sides={[K.out]:[I(e.northWestCorner,[0*e.width-n.wallInnerThickness,1*e.height]),I(e.northWestCorner,[0*e.width-n.wallInnerThickness,0*e.height-n.wallInnerThickness])],[K.in]:[I(e.northWestCorner,[0*e.width,1*e.height]),I(e.northWestCorner,[0*e.width,0*e.height])]}}}),...[0,1,2,3].map(n=>new de({offset:[[0,3].includes(n)?.3:-.3,0],group:11,sensorType:X.socket,onUpdate:function(e){this.points=[I(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new de({group:11,sensorType:X.socket,cableOnly:!0,onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=I(t.coords[0],[1,0]);this.points=[i,t.coords[1],t.coords[2],t.coords[3],t.coords[0],Ce(e,t.coords[0],!1),e]}}),new zs({onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),new oo({onUpdate:function(n){const e=this.parent,t=I(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,Ce(n.serverRoom,i,!0),n.serverRoom]}})]}),new ss({name:"upper-west-one",floor:ie.top,onUpdate:function(n){const e=n.stramien,t=e.in.ns.c-e.in.ns.b-n.balconyWidth-n.wallInnerThickness,i=(e.in.we.b-e.in.we.a)/3-n.wallInnerThickness;this.northWestCorner=[e.in.we.b-1/3*(e.in.we.b-e.in.we.a),e.in.ns.b+n.balconyWidth+n.wallInnerThickness],this.squaredRoom(i,t)},parts:[new ot({floor:ie.top,type:qe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=I(this.parent.northWestCorner,[0,0]),this.sides={[K.out]:[I(this.origin,[0,-n.wallInnerThickness]),I(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[K.in]:[I(this.origin,[0,0]),I(this.origin,[this.parent.width,0])]}},parts:[...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(K.in,1,-1);this.points=[t,Ce(e.serverRoom,t,!1),e.serverRoom]}})),new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(K.in,1,-1);this.points=[t,Ce(e,t,!1),e]}}),new ci({scale:[1,1],rotate:-90,onUpdate:function(n){this.origin=I(this.parent.getPosition(K.in,1,0),[0,0])}})]}),new ot({type:qe.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=I(e.northWestCorner,[e.width,0]),this.sides={[K.out]:[I(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),I(this.origin,[+n.wallInnerThickness,e.height])],[K.in]:[I(this.origin,[0,0]),I(this.origin,[0,e.height])]}},parts:[]}),new ot({type:qe.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=I(e.northWestCorner,[e.width,e.height]),this.sides={[K.in]:[I(this.origin,[0,0]),I(this.origin,[-1*e.width,0*e.height])]}},parts:[]}),new ot({type:qe.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=I(e.northWestCorner,[0*e.width,1*e.height]),this.sides={[K.in]:[I(this.origin,[0,0]),I(this.origin,[0*e.width,-1*e.height])]}},parts:[]}),...[0,1,2,3].map(n=>new de({offset:[[0,3].includes(n)?.3:-.3,0],group:10,sensorType:X.socket,onUpdate:function(e){this.points=[I(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new de({group:10,sensorType:X.socket,cableOnly:!0,onUpdate:function(n){const t=this.parent,i=I(t.coords[1],[-1,0]);this.points=[t.coords[1],t.coords[2],t.coords[3],t.coords[0],i]}}),new zs({onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),new oo({onUpdate:function(n){const e=this.parent,t=I(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,Ce(n.serverRoom,i,!0),n.serverRoom]}})]}),new ss({name:"upper-west-two",floor:ie.top,onUpdate:function(n){const e=n.stramien,t=e.in.ns.c-e.in.ns.b-n.balconyWidth-n.wallInnerThickness,i=(e.in.we.b-e.in.we.a)/3-n.wallInnerThickness;this.northWestCorner=[e.in.we.b-2/3*(e.in.we.b-e.in.we.a),e.in.ns.b+n.balconyWidth+n.wallInnerThickness],this.squaredRoom(i,t)},parts:[new ot({floor:ie.top,type:qe.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=I(this.parent.northWestCorner,[0,0]),this.sides={[K.out]:[I(this.origin,[0,-n.wallInnerThickness]),I(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[K.in]:[I(this.origin,[0,0]),I(this.origin,[this.parent.width,0])]}},parts:[...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(K.in,1,-1);this.points=[t,Ce(e.serverRoom,t,!1),e.serverRoom]}})),new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(K.in,1,-1);this.points=[t,Ce(e,t,!1),e]}}),new ci({scale:[1,1],rotate:-90,onUpdate:function(n){this.origin=I(this.parent.getPosition(K.in,1,0),[0,0])}})]}),new ot({type:qe.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=I(e.northWestCorner,[e.width,0]),this.sides={[K.out]:[I(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),I(this.origin,[+n.wallInnerThickness,e.height])],[K.in]:[I(this.origin,[0,0]),I(this.origin,[0,e.height])]}},parts:[]}),new ot({type:qe.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=I(e.northWestCorner,[e.width,e.height]),this.sides={[K.in]:[I(this.origin,[0,0]),I(this.origin,[-1*e.width,0*e.height])]}},parts:[]}),new ot({type:qe.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=I(e.northWestCorner,[0*e.width,1*e.height]),this.sides={[K.in]:[I(this.origin,[0,0]),I(this.origin,[0*e.width,-1*e.height])]}},parts:[]}),...[0,1,2,3].map(n=>new de({offset:[[0,3].includes(n)?.3:-.3,0],group:10,sensorType:X.socket,onUpdate:function(e){this.points=[I(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new de({group:10,sensorType:X.socket,cableOnly:!0,onUpdate:function(n){const t=this.parent,i=I(t.coords[1],[-1,0]);this.points=[t.coords[1],t.coords[2],t.coords[3],t.coords[0],i]}}),new zs({onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),new oo({onUpdate:function(n){const e=this.parent,t=I(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,Ce(n.serverRoom,i,!0),n.serverRoom]}})]}),new ss({name:"upper-west-three",floor:ie.top,onUpdate:function(n){const e=n.stramien,t=e.in.ns.c-e.in.ns.b,i=(e.in.we.b-e.in.we.a)/3-n.wallInnerThickness;this.northWestCorner=[e.in.we.b-1*(e.in.we.b-e.in.we.a),e.in.ns.b],this.squaredRoom(i,t)},parts:[new ot({floor:ie.top,type:qe.theoretic,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=I(this.parent.northWestCorner,[0,0]),this.sides={[K.in]:[I(this.origin,[0,0]),I(this.origin,[this.parent.width,0])]}},parts:[new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(K.in,1,-1);this.points=[t,Ce(e,t,!1),e]}})]}),new ot({type:qe.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=I(e.northWestCorner,[e.width,0]),this.sides={[K.out]:[I(this.origin,[+n.wallInnerThickness,0]),I(this.origin,[+n.wallInnerThickness,e.height])],[K.in]:[I(this.origin,[0,0]),I(this.origin,[0,e.height])]}},parts:[...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(K.in,0,1);this.points=[t,Ce(e.serverRoom,t,!1),e.serverRoom]}})),new ci({scale:[1,-1],rotate:0,onUpdate:function(n){this.origin=I(this.parent.getPosition(K.in,0,0),[0,0])}})]}),new ot({type:qe.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=I(e.northWestCorner,[e.width,e.height]),this.sides={[K.in]:[I(this.origin,[0,0]),I(this.origin,[-1*e.width,0*e.height])]}},parts:[]}),new ot({type:qe.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=I(e.northWestCorner,[0*e.width,1*e.height]),this.sides={[K.in]:[I(this.origin,[0,0]),I(this.origin,[0*e.width,-1*e.height])]}},parts:[]}),...[0,1,2,3].map(n=>new de({offset:[[0,3].includes(n)?.3:-.3,0],group:10,sensorType:X.socket,onUpdate:function(e){this.points=[I(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new de({group:10,sensorType:X.socket,cableOnly:!0,onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=I(t.coords[1],[0,1]);this.points=[i,t.coords[2],t.coords[3],t.coords[0],t.coords[1],Ce(e,t.coords[1],!0),e]}}),new zs({onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),new oo({onUpdate:function(n){const e=this.parent,t=I(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,Ce(n.serverRoom,i,!0),n.serverRoom]}})]}),new ss({name:"balcony",floor:ie.top,onUpdate:function(n){const s=n.stramien,r=n.stair,o=n.stramien.in.ns.b-n.stramien.in.ns.a-n.tower.houseIncrement+n.wallInnerThickness+n.wallInnerThickness-1,a=n.stair.stairOrigin[0]+n.stair.totalWidth+1.0001,c=n.stramien.in.ns.b-.5+n.wallInnerThickness,l=n.tower.innerCoords[3][0]-2+n.wallInnerThickness,u=I(r.stairOrigin,[r.totalWidth,r.totalHeight]),h=s.in.ns.b+n.balconyWidth,d=s.in.we.a+1/3*(s.in.we.b-s.in.we.a);this.coords=[I(u,[-r.walkWidth,0]),u,[u[0],o],[a,o],[a,s.in.ns.b],[l,s.in.ns.b],[l,c],[s.in.we.c,c],[n.tower.innerCoords[3][0],c],[n.tower.innerCoords[3][0],s.in.ns.b],[s.in.we.d,s.in.ns.b],[s.in.we.d,h],[n.tower.innerCoords[3][0],h],I([s.in.we.c,h],[0,0]),I([s.in.we.c,h],[0,n.balconyEdge]),I([s.in.we.b,h],[0,n.balconyEdge]),I([s.in.we.b,h],[0,0]),[d,h],[d,s.in.ns.b],[u[0]-r.walkWidth,s.in.ns.b]]},parts:[new de({offset:[0,.3],sensorType:X.pir,onUpdate:function(n){const e=n.serverRoom,t=[n.stramien.in.we.b+(n.stramien.in.we.c-n.stramien.in.we.b)/2,n.stramien.in.ns.b];this.points=[I(t,[-n.wallInnerThickness,0]),Ce(e,t,!0),e]}}),...[X.smoke,X.poe,X.wifi].map((n,e)=>new de({offset:[0,n===X.smoke?-1:.3],sensorType:n,onUpdate:function(t){const i=t.serverRoom,s=[t.stramien.in.we.b+(t.stramien.in.we.c-t.stramien.in.we.b)/2,t.stramien.in.ns.b];this.points=[I(s,[-t.wallInnerThickness,0]),Ce(i,s,!0),i]}})),new de({offset:[0,.3],group:10,sensorType:X.socket,onUpdate:function(n){this.points=[I([n.stramien.in.we.b,n.stramien.in.ns.b],[-1,0])]}}),new de({offset:[0,.3],group:10,sensorType:X.socket,onUpdate:function(n){this.points=[I([n.stramien.in.we.c,n.stramien.in.ns.b],[0,0])]}}),new zs({onUpdate:function(n){const t=I(this.parent.coords[0],[1,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]}),new ss({name:"void",floor:ie.top,hole:!0,onUpdate:function(n){const e=[n.stramien.in.we.b,n.stramien.in.ns.b+n.balconyWidth+n.balconyEdge],t=n.stramien.in.ns.d-e[1],i=n.stramien.in.we.c-n.stramien.in.we.b;this.coords=[e,I(e,[1*i,0*t]),I(e,[1*i,1*t]),I(e,[0*i,1*t])]}}),new ss({name:"voidStairs",floor:ie.top,hole:!0,onUpdate:function(n){const e=n.stair;this.northWestCorner=e.stairOrigin;const t=n.stramien.in.ns.b-e.stairOrigin[1]-2-3*n.wallInnerThickness,i=e.totalWidth;this.coords=[this.northWestCorner,I(this.northWestCorner,[i-e.walkWidth,0]),I(this.northWestCorner,[i-e.walkWidth,t]),I(this.northWestCorner,[0,t])]},parts:[new zs({onUpdate:function(n){const t=I(this.parent.northWestCorner,[n.stair.totalWidth/2,1]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]})],jIe={studAmount:12,studDistance:.6,towerWidth:1,wallInnerThickness:.07,wallOuterThickness:.3,roofOuterThickness:.5,studAmountNorth:14,studAmountSouth:3,studAmountWest:13,studAmountEast:8,showTower:!0,balconyWidth:1.2,name:"Lindelund",orientation:{lat:52,log:5.2,rotation:180},parts:[new cW({floor:ie.ground,onUpdate:function(n){const e=n.stramien,t=n.tower;this.coords=[[e.in.we.b,e.in.ns.b],[e.in.we.b,e.in.ns.a],[e.in.we.c,e.in.ns.a],[e.in.we.c,t.innerCoords[0][1]],t.innerCoords[0],t.innerCoords[1],t.innerCoords[2],t.innerCoords[3],[t.innerCoords[3][0],e.in.ns.b],[e.in.we.d,e.in.ns.b],[e.in.we.d,e.in.ns.c],[e.in.we.c,e.in.ns.c],[e.in.we.c,e.in.ns.d],[e.in.we.b,e.in.ns.d],[e.in.we.b,e.in.ns.c],[e.in.we.a,e.in.ns.c],[e.in.we.a,e.in.ns.b]]},parts:[...[...Array(17).keys()].map((n,e,t)=>{const i=[3,4,5,6,7];if([3,4,5,6,7].includes(n))return;const r=[0,11,14,17],o=t.length;return new ot({type:qe.outer,floor:ie.all,onUpdate:function(a){const c=l=>l===i[0]||l===i[4]+1||r.includes(l)?Xt.inside:r.includes(l)?void 0:Xt.outside;this.drawByRoom(n,n+1!==o?n+1:0,a,c(n),c(n+1))},parts:[...16===n?[1,2].map(a=>new ir({rotate:90,width:.6,onUpdate:function(c){this.origin=this.parent.getPosition(K.out,a/3,this.width/2)}})):[],...15===n?[new ir({windowForm:N2.hexagon,floor:ie.top,rotate:0,width:1,onUpdate:function(a){this.origin=this.parent.getPosition(K.out,.5,this.width/2)}}),...[1,2].map(a=>new ir({rotate:0,width:.9,onUpdate:function(c){this.origin=this.parent.getPosition(K.out,a/3,this.width/2)}}))]:[],...14===n?[1,2].map(a=>new ir({rotate:-90,onUpdate:function(c){const l=this.parent;this.width=l.innerWallLength<5?l.innerWallLength/3-.2:1.4,this.origin=l.getPosition(K.out,a/3,this.width/2)}})):[],...12===n?[1].map(a=>new ir({rotate:-90,floor:ie.all,onUpdate:function(c){const l=this.parent;this.width=l.innerWallLength,this.origin=l.getPosition(K.out,a/2,this.width/2)}})):[],...10===n?[1].map(a=>new ir({rotate:-90,width:1.4,onUpdate:function(c){this.origin=this.parent.getPosition(K.out,a/2,this.width/2)}})):[],...9===n?[new ir({windowForm:N2.hexagon,floor:ie.top,rotate:180,width:1,onUpdate:function(a){this.origin=this.parent.getPosition(K.out,.5,this.width/2)}}),...[0,1].map(a=>new ir({rotate:180,width:.8,onUpdate:function(c){this.origin=this.parent.getPosition(K.out,a,this.width/2+(this.width+.8)*(0===a?1:-1))}}))]:[],...8===n?[1].map(a=>new ir({rotate:90,width:.6,onUpdate:function(c){this.origin=this.parent.getPosition(K.out,.5,this.width/2-c.wallOuterThickness/2)}})):[],...2===n?[1,2.5].map(a=>new ir({rotate:180,width:.9,onUpdate:function(c){this.origin=this.parent.getPosition(K.out,a/3,this.width/2)}})):[],...1===n?[new ir({windowForm:N2.hexagon,floor:ie.top,rotate:90,width:1,onUpdate:function(a){this.origin=this.parent.getPosition(K.out,.5,this.width/2)}}),...[1,2].map(a=>new ir({rotate:90,width:.9,onUpdate:function(c){this.origin=this.parent.getPosition(K.out,a/3,this.width/2)}}))]:[],...0===n?[new ci({outside:!0,floor:ie.ground,rotate:0,scale:[1,1],onUpdate:function(a){this.origin=I(this.parent.getPosition(K.in,0,1.2+a.wallInnerThickness),[-a.wallOuterThickness,0])}}),...[2,5].map(a=>new ir({rotate:0,width:.9,onUpdate:function(c){this.origin=this.parent.getPosition(K.out,(a+1)/8,this.width/2)}}))]:[]]})}).filter(n=>n),new ot({type:qe.outer,floor:ie.all,onUpdate:function(n){if(this.ceiling=n.cross.ceilingHeight,this.outOfDesign=!n.showTower,this.outOfDesign)return;const e=n.wallOuterThickness-n.wallInnerThickness;this.origin=[n.stramien.in.we.c,n.tower.innerCoords[0][1]],this.innerWallLength=n.towerWidth-e,this.sides={[K.out]:[n.tower.outerCoords[0],n.tower.outerCoords[1]],[K.in]:[[n.stramien.in.we.c,n.tower.innerCoords[0][1]],n.tower.innerCoords[1]]}},parts:[new de({sensorType:X.socket,amount:2,group:4,onUpdate:function(n){const e=this.parent,t=e.getPosition(K.in,0,0);this.points=[e.getPosition(K.in,1,-.2),t,Ce(t,n.serverRoom,!0),n.serverRoom]}})]}),new ot({type:qe.outer,floor:ie.all,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.outOfDesign=!n.showTower,this.outOfDesign||(this.origin=n.tower.innerCoords[1],this.sides={[K.out]:[n.tower.outerCoords[1],n.tower.outerCoords[2]],[K.in]:[n.tower.innerCoords[1],n.tower.innerCoords[2]]})},parts:[new ci({outside:!0,rotate:135,scale:[1,1],floor:ie.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,this.outOfDesign||(this.origin=this.parent.getPosition(K.out,.5,-this.width/2))}})]}),new ot({type:qe.outer,floor:ie.all,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.outOfDesign=!n.showTower,this.outOfDesign||(this.origin=n.tower.innerCoords[2],this.sides={[K.out]:[n.tower.outerCoords[2],n.tower.outerCoords[3]],[K.in]:[n.tower.innerCoords[2],[n.tower.innerCoords[3][0],n.stramien.in.ns.b]]})},parts:[new de({sensorType:X.socket,amount:2,group:4,onUpdate:function(n){const t=this.parent.getPosition(K.in,0,.2);this.points=[t,Ce(t,n.serverRoom,!0),n.serverRoom]}})]})]}),new ss({name:"West",floor:ie.ground,onUpdate:function(n){const e=n.stramien;this.northWestCorner=[e.in.we.a,e.in.ns.b],this.squaredRoom(e.in.we.b-e.in.we.a-n.wallInnerThickness,e.in.ns.c-e.in.ns.b)},parts:[new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(K.in,3/4,0);this.points=[e,Ce(n,e,!1),n]}}),new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(K.in,1/4,0);this.points=[e,Ce(n,e,!1),n]}}),new de({group:1,sensorType:X.socket,amount:2,offset:[0,.3],onUpdate:function(){const e=I(this.parent.sides[K.in][1],[-1,0]);this.points=[e]}}),new de({group:1,sensorType:X.socket,amount:2,offset:[0,.3],onUpdate:function(){const t=I(this.parent.sides[K.in][1],[-this.parent.parent.width/2,0]);this.points=[t]}}),new de({group:1,sensorType:X.socket,amount:2,offset:[0,.3],onUpdate:function(){const e=I(this.parent.sides[K.in][0],[1,0]);this.points=[e]}})]}),new ot({type:qe.inner,floor:ie.ground,onUpdate:function(n){this.drawByRoom(1,2,n,Xt.straight,Xt.straight)},parts:[new de({group:2,sensorType:X.socket,amount:2,offset:[-.3,0],onUpdate:function(){const e=I(this.parent.sides[K.in][1],[0,-1]);this.points=[e]}}),new de({group:1,sensorType:X.socket,amount:2,offset:[-.3,0],onUpdate:function(){const e=I(this.parent.sides[K.in][0],[0,1]);this.points=[e]}}),new ci({scale:[1,-1],onUpdate:function(n){this.origin=I(this.parent.sides[K.in][0],[0,this.parent.parent.height/2-this.width])}}),new ci({scale:[1,1],onUpdate:function(n){this.origin=I(this.parent.sides[K.in][0],[0,this.parent.parent.height/2+this.width])}}),...[X.dimmer,X.lightSwitch,X.temperature].map((n,e)=>new de({sensorType:n,offsetWall:X.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(K.in,.3333333333333333,0);this.points=[i,Ce(t.serverRoom,i,!1),t.serverRoom]}}))]}),new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new de({group:2,sensorType:X.socket,amount:2,offset:[0,-.3],onUpdate:function(n){const t=I(this.parent.sides[K.in][0],[-1,0]);this.points=[t]}}),new de({group:2,sensorType:X.socket,amount:2,offset:[0,-.3],onUpdate:function(){const e=I(this.parent.sides[K.in][0],[-this.parent.parent.width/2,0]);this.points=[e]}}),new de({group:2,sensorType:X.socket,amount:2,offset:[0,-.3],onUpdate:function(){const e=I(this.parent.sides[K.in][1],[1,0]);this.points=[e]}})]}),new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[new de({group:1,sensorType:X.socket,amount:2,offset:[.3,0],onUpdate:function(){const e=I(this.parent.sides[K.in][1],[0,1]);this.points=[e]}}),new de({group:2,sensorType:X.socket,amount:2,offset:[.3,0],onUpdate:function(){const e=I(this.parent.sides[K.in][0],[0,-1]);this.points=[e]}})]}),new de({sensorType:X.smoke,onUpdate:function(n){const e=I(this.parent.northWestCorner,[.8*this.parent.width,.5*this.parent.height]),t=I(e,[0,.5*-this.parent.height]);this.points=[e,t,Ce(t,n.serverRoom,!1),n.serverRoom]}}),new de({sensorType:X.socket,amount:2,cableOnly:!0,group:1,onUpdate:function(n){const e=this.parent;this.points=[I(e.northWestCorner,[e.width,e.height/2-1]),I(e.northWestCorner,[e.width,0]),I(e.northWestCorner,[0,0]),I(e.northWestCorner,[0,e.height/2-1])]}}),new de({sensorType:X.socket,amount:2,cableOnly:!0,group:2,onUpdate:function(n){const e=this.parent;this.points=[I(e.northWestCorner,[0,e.height/2+1]),I(e.northWestCorner,[0,e.height]),I(e.northWestCorner,[e.width,e.height]),I(e.northWestCorner,[e.width,e.height/2+1])]}}),new de({group:1,sensorType:X.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=I(e.northWestCorner,[e.width-n.wallInnerThickness,0]);this.points=[t,Ce(n.serverRoom,t,!0),n.serverRoom]}}),new de({group:2,sensorType:X.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=I(e.northWestCorner,[e.width,e.height/2+1]);this.points=[I(e.northWestCorner,[e.width-n.wallInnerThickness,e.height/2+1]),t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),...[X.camera,X.poe].map(n=>new de({sensorType:n,cableType:B1.OutsidePOE,offset:[0,-1],onUpdate:function(e){const t=this.parent,i=I(t.northWestCorner,[t.width/2,-e.wallOuterThickness]);this.points=[i,I(i,[0,1]),e.serverRoom]}})),...[X.camera,X.poe].map(n=>new de({sensorType:n,cableType:B1.OutsidePOE,offset:[0,1],onUpdate:function(e){const t=this.parent,i=I(t.northWestCorner,[1,t.height+e.wallOuterThickness]);this.points=[i,I(i,[0,-1]),e.serverRoom]}})),new zs({onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),new oo({sensorType:X.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]}),new ss({name:"East",floor:ie.ground,onUpdate:function(n){const e=n.stramien;this.northWestCorner=[e.in.we.c+n.wallInnerThickness,e.in.ns.b],this.squaredRoom(e.in.we.d-e.in.we.c-n.wallInnerThickness,e.in.ns.c-e.in.ns.b)},parts:[new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(K.in,.3333333333333333,0);this.points=[e,Ce(n.serverRoom,e,!1),n.serverRoom]}}),new de({group:3,sensorType:X.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(K.in,1/3,0)]}}),new de({group:3,sensorType:X.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(K.in,2/3,0)]}}),new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(K.in,3/4,0);this.points=[e,Ce(n,e,!0),n]}})]}),new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[...[X.camera,X.poe].map(n=>new de({sensorType:n,cableType:B1.OutsidePOE,offsetWall:-.3,onUpdate:function(e){const t=this.parent.getPosition(K.in,0,0);this.points=[I(t,[e.wallOuterThickness,0]),I(t,[-1,1]),e.serverRoom]}})),new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(K.in,0,1.5);this.points=[e,Ce(n.serverRoom,e,!1),n.serverRoom]}}),new ci({scale:[-1,-1],onUpdate:function(n){const t=this.parent;this.origin=I(t.origin,[0,t.innerWallLength/2-this.width])}}),new ci({scale:[-1,1],outside:!0,onUpdate:function(n){const t=this.parent;this.origin=I(t.origin,[0,t.innerWallLength/2+this.width])}})]}),new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new de({group:3,amount:2,sensorType:X.socket,onUpdate:function(){this.points=[this.parent.getPosition(K.in,1/3,0)]}}),new de({group:3,sensorType:X.socket,amount:2,offset:[0,.3],onUpdate:function(){this.points=[this.parent.getPosition(K.in,2/3,0)]}}),new de({sensorType:X.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(K.in,1/4,0),t=this.parent.parent.northWestCorner;this.points=[e,Ce(e,t,!0),t,Ce(n,t,!0),n]}})]}),new ot({type:qe.inner,floor:ie.ground,onUpdate:function(n){this.drawByRoom(3,0,n,Xt.straight,Xt.straight)},parts:[...[X.dimmer,X.lightSwitch,X.temperature].map((n,e)=>new de({sensorType:n,offsetWall:X.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(K.in,1,-1.5);this.points=[i,Ce(t.serverRoom,i,!1),t.serverRoom]}})),new ci({scale:[1,1],rotate:180,onUpdate:function(n){this.origin=I(this.parent.sides[K.in][1],[0,this.parent.parent.height/2-this.width])}}),new ci({scale:[1,-1],rotate:180,onUpdate:function(n){this.origin=I(this.parent.sides[K.in][1],[0,this.parent.parent.height/2+this.width])}})]}),new de({sensorType:X.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(n){const e=this.parent;this.points=[I(e.northWestCorner,[e.width,e.height/2-1]),I(e.northWestCorner,[e.width,0]),I(e.northWestCorner,[0,0]),I(e.northWestCorner,[0,e.height/2-1])]}}),new de({sensorType:X.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(n){const e=this.parent;this.points=[I(e.northWestCorner,[0,e.height/2+1]),I(e.northWestCorner,[0,e.height]),I(e.northWestCorner,[e.width,e.height]),I(e.northWestCorner,[e.width,e.height/2+1])]}}),new de({group:3,sensorType:X.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const t=I(this.parent.northWestCorner,[0,0]);this.points=[t,Ce(n.serverRoom,t,!0),n.serverRoom]}}),new de({group:3,sensorType:X.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=I(e.northWestCorner,[-n.wallInnerThickness,e.height/2+1]);this.points=[I(e.northWestCorner,[0,e.height/2+1]),t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),new zs({sensorType:X.lightBulb,onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),new oo({sensorType:X.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]}),new ss({name:"Central",floor:ie.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b],this.squaredRoom(n.stramien.in.we.c-n.stramien.in.we.b,n.stramien.in.ns.d-n.stramien.in.ns.b)},parts:[new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.innerWallLength=n.stramien.in.ns.d-n.stramien.in.ns.c,this.origin=I(this.parent.northWestCorner,[this.parent.width,n.stramien.in.ns.c-n.stramien.in.ns.b]),this.sides={[K.in]:[I(this.origin,[n.wallOuterThickness,+n.wallOuterThickness]),I(this.origin,[n.wallOuterThickness,this.innerWallLength+n.wallOuterThickness])],[K.in]:[I(this.origin,[0,0]),I(this.origin,[0,this.innerWallLength])]}},parts:[new de({group:4,amount:3,sensorType:X.socket,onUpdate:function(){this.points=[this.parent.getPosition(K.in,.5,0)]}}),new de({group:4,amount:2,sensorType:X.socket,onUpdate:function(){this.points=[this.parent.getPosition(K.in,0,-1)]}})]}),new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(K.in,0,1.5);this.points=[e,Ce(n.serverRoom,e,!1),n.serverRoom]}})]}),new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[]}),new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.innerWallLength=n.stramien.in.ns.d-n.stramien.in.ns.c,this.origin=I(this.parent.northWestCorner,[0,n.stramien.in.ns.d-n.stramien.in.ns.b]),this.sides={[K.in]:[I(this.origin,[-n.wallOuterThickness,+n.wallOuterThickness]),I(this.origin,[-n.wallOuterThickness,-this.innerWallLength+n.wallOuterThickness])],[K.in]:[I(this.origin,[0,0]),I(this.origin,[0,-this.innerWallLength])]}},parts:[new de({group:5,amount:6,sensorType:X.socket,onUpdate:function(){this.points=[this.parent.getPosition(K.in,.5,0)]}}),new de({group:5,amount:6,sensorType:X.socket,onUpdate:function(){this.points=[this.parent.getPosition(K.in,1,1)]}})]}),new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[...[X.dimmer,X.lightSwitch,X.temperature].map((n,e)=>new de({sensorType:n,offsetWall:X.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(K.in,1,-1.5);this.points=[i,Ce(t.serverRoom,i,!1),t.serverRoom]}})),...[X.lightSwitch,X.temperature].map((n,e)=>new de({sensorType:n,onUpdate:function(t){const i=this.parent.getPosition(K.in,0,1.5);this.points=[i,Ce(t.serverRoom,i,!1),t.serverRoom]}})),...[X.drain,X.waterWarm].map(n=>new _s({sensorType:n,onUpdate:function(e){const s=this.parent.getPosition(K.in,0,1.5);this.points=[s,Ce(e.serverRoom,s,!0),e.serverRoom]}}))]}),new ot({type:qe.inner,floor:ie.ground,onUpdate:function(n){this.drawByRoom(0,1,n,Xt.straight,Xt.straight)},parts:[new ci({rotate:90,scale:[-1,1],onUpdate:function(n){this.origin=this.parent.getPosition(K.in,0,0)}})]}),new de({group:7,offset:[.6,0],sensorType:X.perilex,verticalCableLength:4,onUpdate:function(n){const e=I(this.parent.northWestCorner,[0,this.parent.height-2]);this.points=[e,Ce(e,n.serverRoom,!0),n.serverRoom]}}),new de({group:4,cableOnly:!0,sensorType:X.socket,amount:2,onUpdate:function(n){const e=I(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[I(this.parent.northWestCorner,[this.parent.width,this.parent.height]),I(this.parent.northWestCorner,[this.parent.width,0]),e,Ce(e,n.serverRoom,!0),n.serverRoom]}}),new de({group:5,cableOnly:!0,sensorType:X.socket,amount:2,onUpdate:function(n){const e=I(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[I(this.parent.northWestCorner,[0,this.parent.height]),I(this.parent.northWestCorner,[0,0]),e,Ce(e,n.serverRoom,!0),n.serverRoom]}}),new de({group:5,amount:6,sensorType:X.socket,onUpdate:function(n){const e=I(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),t=I(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[e,Ce(e,t,!0),t]}}),new de({group:5,amount:2,offset:[.3,0],sensorType:X.socket,onUpdate:function(n){const e=I(this.parent.northWestCorner,[0*this.parent.width,.15*this.parent.height]),t=I(this.parent.northWestCorner,[0,.15*this.parent.height]);this.points=[e,Ce(e,t,!0),t]}}),new de({group:4,amount:2,offset:[-.3,0],sensorType:X.socket,onUpdate:function(n){const e=I(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]),t=I(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]);this.points=[e,Ce(e,t,!0),t]}}),new de({sensorType:X.smoke,verticalCableLength:6,onUpdate:function(n){const e=I(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),t=I(this.parent.northWestCorner,[0*this.parent.width,.8*this.parent.height]),i=this.parent.northWestCorner;this.points=[e,t,i,Ce(i,n.serverRoom,!0),n.serverRoom]}}),new de({sensorType:X.ethernet,offset:[.3,0],onUpdate:function(){const n=this.parent.parent.serverRoom,e=I(this.parent.northWestCorner,[0,.5*this.parent.height-2]);this.points=[e,Ce(n,e,!1),n]}}),new de({sensorType:X.ethernet,offset:[.3,0],onUpdate:function(){const n=this.parent.parent.serverRoom,e=I(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[e,Ce(n,e,!1),n]}}),new de({offset:[-.3,0],sensorType:X.ethernet,onUpdate:function(){const n=this.parent.parent.serverRoom,e=I(this.parent.northWestCorner,[this.parent.width,.5*this.parent.height-2]);this.points=[e,Ce(n,e,!1),n]}}),new de({sensorType:X.pir,cableType:B1.SharedEthernet,offset:[0,.3],onUpdate:function(n){const e=this.parent,t=I(e.northWestCorner,[e.width/2,0]),i=Ce(t,n.serverRoom,!0);this.points=[t,i,n.serverRoom]}}),new zs({onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),new oo({sensorType:X.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]}),new ss({name:"Hall",floor:ie.ground,onUpdate:function(n){this.northWestCorner=n.stair.stairOrigin,this.squaredRoom(n.stair.totalWidth-n.stair.walkWidth,n.stramien.in.ns.b-n.stair.stairOrigin[1]-n.wallInnerThickness)},parts:[new de({sensorType:X.pir,cableType:B1.SharedEthernet,offset:[-.3,0],onUpdate:function(n){const e=this.parent,t=I(e.northWestCorner,[e.width,e.height-1]),i=I(e.northWestCorner,[e.width,e.height]);this.points=[t,i,n.serverRoom]}}),new ot({type:qe.inner,floor:ie.ground,onUpdate:function(n){this.drawByRoom(1,2,n,Xt.straight,Xt.straight)},parts:[new ci({rotate:0,scale:[-1,1],onUpdate:function(n){this.origin=this.parent.getPosition(K.in,1,-(1.2+n.wallInnerThickness))}}),...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,offsetWall:.3,onUpdate:function(e){const t=this.parent.getPosition(K.in,1,-2.5);this.points=[t,Ce(e.serverRoom,t,!1),e.serverRoom]}})),...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,offsetWall:-.3,onUpdate:function(e){const t=I(this.parent.getPosition(K.in,1,-2.5),[e.wallInnerThickness,0]);this.points=[t,Ce(e.serverRoom,t,!1),e.serverRoom]}}))]}),new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(K.in,0,2.5);this.points=[e,Ce(n.serverRoom,e,!1),n.serverRoom]}})]}),new zs({onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]}),new ss({name:"Office",floor:ie.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.a],this.squaredRoom(n.stramien.in.we.c-n.stramien.in.we.b,n.stramien.in.ns.b-n.stramien.in.ns.a-(n.stramien.in.ns.b-n.stair.stairOrigin[1])-n.wallInnerThickness)},parts:[new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[...[2/6,4/6].map(n=>new de({offsetWall:.3,sensorType:X.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(K.in,n,0);this.points=[t,Ce(e,t,!1),e]}}))]}),new ot({type:qe.inner,onUpdate:function(n){this.drawByRoom(2,3,n,Xt.straight,Xt.straight)},parts:[new ci({rotate:90,scale:[1,1],onUpdate:function(n){this.origin=this.parent.getPosition(K.in,1,-(n.stair.totalWidth+n.wallInnerThickness-this.width))}}),...[0,1,2].map(n=>new de({amount:2,offsetWall:-.3,sensorType:X.socket,onUpdate:function(e){const i=this.parent.getPosition(K.in,(n+1)/6,0);this.points=[i]}})),...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,offsetWall:.3,onUpdate:function(e){const i=this.parent.getPosition(K.in,.5,0);this.points=[i,Ce(e.serverRoom,i,!1),e.serverRoom]}})),new de({sensorType:X.lightSwitch,offsetWall:-.3,onUpdate:function(n){const t=I(this.parent.getPosition(K.in,.5,0),[0,n.wallInnerThickness]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]}),new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[...[X.camera,X.poe].map(n=>new de({sensorType:n,cableType:B1.OutsidePOE,offsetWall:-.3,onUpdate:function(e){const t=this.parent.getPosition(K.in,0,0);this.points=[I(t,[e.wallOuterThickness,0]),I(t,[-1,1]),e.serverRoom]}})),...[2/6,4/6].map(n=>new de({offsetWall:-.3,sensorType:X.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(K.in,n,0);this.points=[t,Ce(e,t,!1),e]}}))]}),new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[...[1/6,5/6].map(n=>new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(K.in,n,0);this.points=[t,Ce(e,t,!1),e]}}))]}),new de({sensorType:X.smoke,onUpdate:function(n){const e=I(this.parent.northWestCorner,[.5*this.parent.width,.5*this.parent.height]);this.points=[e,Ce(e,n.serverRoom,!0),n.serverRoom]}}),new de({sensorType:X.socket,amount:2,via:ie.ceiling,group:6,offset:[0,.3],onUpdate:function(n){const i=I(this.parent.northWestCorner,[1,0]);this.points=[i]}}),new de({sensorType:X.socket,amount:2,group:6,offset:[0,.3],onUpdate:function(n){const e=this.parent,i=I(e.northWestCorner,[e.width-1,0]);this.points=[i]}}),new de({sensorType:X.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(n){const e=this.parent,i=I(e.northWestCorner,[0,e.height-1]);this.points=[i]}}),new de({sensorType:X.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(n){const i=I(this.parent.northWestCorner,[0,1]);this.points=[i]}}),new de({sensorType:X.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(n){const e=this.parent,i=I(e.northWestCorner,[e.width,1]);this.points=[i]}}),new de({sensorType:X.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(n){const e=this.parent,i=I(e.northWestCorner,[e.width,e.height-1]);this.points=[i]}}),new de({sensorType:X.socket,amount:2,cableOnly:!0,group:6,onUpdate:function(n){const e=this.parent;this.points=[I(e.northWestCorner,[0,e.height-1]),I(e.northWestCorner,[0,0]),I(e.northWestCorner,[e.width,0]),I(e.northWestCorner,[e.width,e.height]),I(e.northWestCorner,[.5*e.width,e.height]),Ce(n.serverRoom,I(e.northWestCorner,[.5*e.width,e.height]),!1),n.serverRoom]}}),new zs({onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),new oo({sensorType:X.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]}),new ss({name:"Toilet",floor:ie.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b+n.stair.totalWidth-n.stair.walkWidth+n.wallInnerThickness,n.stramien.in.ns.b-1.2-n.wallInnerThickness],this.squaredRoom(.8,1.2)},parts:[new ot({type:qe.inner,onUpdate:function(n){this.drawByRoom(0,1,n,Xt.straight,Xt.outside)},parts:[new _s({sensorType:X.toilet,size:120,onUpdate:function(n){const e=I(this.parent.getPosition(K.in,.5,0),[0,.2]);this.points=[e,Ce(n.serverRoom,e,!0),n.serverRoom]}})]}),new ot({type:qe.inner,onUpdate:function(n){this.drawByRoom(1,2,n,Xt.outside,Xt.straight)},parts:[new _s({sensorType:X.drain,onUpdate:function(n){const e=I(this.parent.getPosition(K.in,.6666666666666666,0),[0,0]);this.points=[e,[e[0],this.parent.parent.northWestCorner[1]+.2]]}}),new _s({sensorType:X.waterWarm,onUpdate:function(n){const e=I(this.parent.getPosition(K.in,.6666666666666666,0),[0,0]);this.points=[e,Ce(n.serverRoom,e,!0),n.serverRoom]}})]}),new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const e=this.parent;this.origin=I(e.northWestCorner,[0*e.width,1*e.height]),this.innerWallLength=e.height,this.sides={[K.in]:[I(this.origin,[0,0]),I(this.origin,[0,-this.innerWallLength])]}},parts:[new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(K.in,0,.8);this.points=[e,Ce(n.serverRoom,e,!1),n.serverRoom]}}),new ci({scale:[1,1],rotate:0,floor:ie.ground,onUpdate:function(n){this.origin=I(this.parent.getPosition(K.in,0,0),[-n.wallInnerThickness,0])}})]}),new zs({onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),new oo({sensorType:X.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]}),new ss({name:"Server",floor:ie.ground,onUpdate:function(n){const t=n.stramien.in.we.b+n.stair.totalWidth-n.stair.walkWidth+1.2;this.northWestCorner=[t,n.stramien.in.ns.b-1-n.wallInnerThickness],this.squaredRoom(n.stramien.in.we.c-t,1)},parts:[new ot({type:qe.inner,onUpdate:function(n){this.drawByRoom(0,1,n,Xt.straight,Xt.straight)},parts:[...[0,1,2].map(n=>new de({amount:1===n?2:1,offsetWall:1===n?-.3:.3,sensorType:X.socket,onUpdate:function(e){const t=e.serverRoom,i=this.parent.getPosition(K.in,(n+1)/4,0);this.points=[I(i,[0,1===n?-e.wallInnerThickness:0]),I(i,[0,0]),Ce(t,i,!1),t]}}))]}),new de({sensorType:X.smoke,onUpdate:function(n){const e=this.parent.center;this.points=[e,Ce(e,n.serverRoom,!0),n.serverRoom]}}),...[X.poe,X.wifi].map(n=>new de({offset:[0,.3],sensorType:n,onUpdate:function(e){const t=this.parent.center;this.points=[t,Ce(t,e.serverRoom,!0),e.serverRoom]}})),...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,offset:[0,.3],onUpdate:function(e){const t=this.parent,i=I(t.northWestCorner,[.2*t.width,0*t.height]),s=I(t.northWestCorner,[0*t.width,0*t.height]);this.points=[i,s,Ce(e.serverRoom,s,!1),e.serverRoom]}})),new zs({onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),new oo({sensorType:X.ventIn,size:100,onUpdate:function(n){const t=this.parent.center;this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]}),new ss({name:"Tower",floor:ie.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,this.outOfDesign||(this.northWestCorner=[n.stramien.out.we.c-(n.wallOuterThickness-n.wallInnerThickness),n.tower.innerCoords[0][1]],this.center=I(this.northWestCorner,[1,1]),this.centralElectricity=this.center,this.coords=[this.northWestCorner,n.tower.innerCoords[0],n.tower.innerCoords[1],n.tower.innerCoords[2],n.tower.innerCoords[3],[n.tower.innerCoords[3][0],n.stramien.in.ns.b-n.wallInnerThickness],[this.northWestCorner[0],n.stramien.in.ns.b-n.wallInnerThickness]])},parts:[new ot({type:qe.inner,floor:ie.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&this.drawByRoom(6,0,n,Xt.outside,Xt.straight)},parts:[new ci({scale:[1,1],rotate:180,floor:ie.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&(this.floor=ie.ground,this.origin=this.parent.getPosition(K.in,1,0))}})]}),new ot({type:qe.inner,floor:ie.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&this.drawByRoom(5,6,n,Xt.straight,Xt.outside)},parts:[new ci({scale:[-1,1],rotate:-90,floor:ie.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&(this.floor=ie.ground,this.origin=this.parent.getPosition(K.in,0,n.wallInnerThickness))}})]}),new de({sensorType:X.pir,cableType:B1.SharedEthernet,offset:[.3,0],onUpdate:function(n){const e=this.parent,t=I(e.northWestCorner,[0,e.height-1]),i=Ce(t,n.serverRoom,!0);this.points=[t,i,n.serverRoom]}}),new zs({onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]}),new ss({name:"Laundry",floor:ie.ground,onUpdate:function(n){const e=n.stramien.in.ns.b-n.stair.stairOrigin[1]-1.2-2*n.wallInnerThickness,t=n.stramien.in.we.b+n.stair.totalWidth-n.stair.walkWidth+n.wallInnerThickness;this.northWestCorner=[t,n.stair.stairOrigin[1]];const i=[t+1.2-n.wallInnerThickness,n.stramien.in.ns.b-1-2*n.wallInnerThickness];this.width=Oe(n.stramien.in.we.c-t);const s=this.width;this.height=Oe(e),this.coords=[this.northWestCorner,I(this.northWestCorner,[s,0]),I(this.northWestCorner,[s,e]),[this.northWestCorner[0]+s,i[1]],i,[i[0],this.northWestCorner[1]+e],I(this.northWestCorner,[0,e])],this.center=I(this.northWestCorner,[s/2,e/2]),this.centralElectricity=this.center},parts:[new ot({type:qe.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new _s({sensorType:X.drain,onUpdate:function(n){const t=this.parent.parent.center;this.points=[t,Ce(n.serverRoom,t,!0),n.serverRoom]}}),...[X.waterCold,X.waterRain].map(n=>new _s({sensorType:n,offsetWall:n===X.waterRain?0:.3,onUpdate:function(e){const i=this.parent.getPosition(K.in,n===X.waterRain?2/3:3/4,0);this.points=[i,Ce(e.serverRoom,i,!1),e.serverRoom]}})),...[X.waterCold,X.waterRain].map(n=>new _s({sensorType:n,offsetWall:n===X.waterRain?0:.3,onUpdate:function(e){const t=this.parent,i=t.getPosition(K.in,n===X.waterRain?1/3:1/4,0),s=t.getPosition(K.in,n===X.waterRain?2/3:3/4,0);this.points=[i,s]}})),new _s({sensorType:X.drain,onUpdate:function(n){const e=this.parent,t=e.parent,i=e.getPosition(K.in,.5,0);this.points=[i,t.center]}})]}),new de({sensorType:X.smoke,onUpdate:function(n){const e=this.parent.center;this.points=[e,Ce(e,n.serverRoom,!0),n.serverRoom]}}),new de({sensorType:X.ethernet,offset:[.3,0],onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=I(t.northWestCorner,[0*t.width,.5*t.height]);this.points=[i,Ce(e,i,!1),e]}}),new zs({onUpdate:function(n){const t=I(this.parent.center,[0,0]);this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}}),new oo({sensorType:X.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Ce(n.serverRoom,t,!1),n.serverRoom]}})]}),...WIe]};var v6=(()=>{return(n=v6||(v6={})).amount="amount",n.name="name",n.sizeOrVersion="sizeOrVersion",n.price="price",n.priceAvg="priceAvg",n.priceMax="priceMax",n.priceTotal="priceTotal",n.remarks="other",n.unit="unit",v6;var n})();class Ia{constructor(e){this.sectionFold=!1,Object.assign(this,e)}}class zi{constructor(e){this.amount=1,this.type="single",Object.assign(this,e)}get calcPrice(){return Oe(this.amount*this.price,2)}get calcAmount(){return this.amount}}class N9 extends zi{constructor(e){super(e),this.costs=[],this.type="group",this.collapsed=!1,Object.assign(this,e)}get folded(){return`<span class="material-icons">expand_${this.collapsed?"less":"more"}</span>`}toggleFold(){this.collapsed=!this.collapsed}get calcPrice(){return SC(this.costs.map(e=>e.calcPrice))}get calcAmount(){return SC(this.costs.map(e=>e.amount))}}class $Ie extends N9{constructor(e){super(e),this.costs=[],this.type="total",Object.assign(this,e)}get calcPrice(){return SC(this.costs.map(e=>e.calcPrice))}get calcAmount(){return 0}get folded(){return'<span class="material-icons">remove</span>'}}let Vi=(()=>{class n{constructor(t){this.appService=t,this.house$=new Un(new GIe(jIe)),this.roomKeys=this.house$.value.partsFlatten.filter(i=>i instanceof ss).map(i=>i.selector),this.wallKeys=this.house$.value.partsFlatten.filter(i=>i instanceof ot).map(i=>i.selector),this.doorKeys=this.house$.value.partsFlatten.filter(i=>i instanceof ci).map(i=>i.selector),this.windowKeys=this.house$.value.partsFlatten.filter(i=>i instanceof ir).map(i=>i.selector),this.sensorKeys=this.house$.value.partsFlatten.filter(i=>i instanceof de).map(i=>i.selector).sort((i,s)=>i.localeCompare(s))}update(t="house",i,s,r){const o=this.house$.value;"house"===t&&(o[i]=s),"stair"===t&&(o.stair[i]=s),"cross"===t&&(o.cross[i]=s),"construction"===t&&(o.construction[i]=s),o.calculateHouse(),o.calculateStats(),this.house$.next(o),void 0!==r&&(this.appService.tag$.next(r),clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.appService.tag$.next(void 0)},600))}destroyParts(){const t=s=>{s.parts.forEach(function(){var r=ts(function*(o){o.svg=void 0,void 0!==o.parts&&t(o)});return function(o){return r.apply(this,arguments)}}())},i=this.house$.value;t(i),t(i.cross),t(i.stair)}getGroups(t){return[...new Set(Object.values(this.house$.value.partsFlatten).filter(s=>s instanceof de).filter(s=>s.sensorType===t).map(s=>s.group))].filter(s=>s).sort((s,r)=>s-r)}getOutlets(t){return Object.values(this.house$.value.partsFlatten).filter(s=>s instanceof de).filter(s=>s.sensorType===t).map(s=>s.amount).reduce((s,r)=>s+r,0)}getCable(t,i=1){return Oe(Object.values(this.house$.value.partsFlatten).filter(r=>r instanceof de).filter(r=>r.sensorType===t).map(r=>r.cableLength).reduce((r,o)=>r+o,0),i)}getWallLength(){const t=this.house$.value;return{innerLength:Math.ceil(Vo(Object.values(t.partsFlatten).filter(r=>r instanceof ot).map(r=>{let o=0;return r.type===qe.inner&&(o+=r.getLength(K.out)),o+=r.getLength(K.in),o}))),outerLength:Math.ceil(Vo(Object.values(t.partsFlatten).filter(r=>r instanceof ot).filter(r=>r.type===qe.outer).map(r=>r.getLength(K.out)),1))}}getWallArea(){const t=this.house$.value;return{innerArea:Math.ceil(Vo(Object.values(t.partsFlatten).filter(r=>r instanceof ot).map(r=>{let o=0;return r.type===qe.inner&&(o+=r.getArea(K.out)),o+=r.getArea(K.in),o}))),outerArea:Math.ceil(Vo(Object.values(t.partsFlatten).filter(r=>r instanceof ot).filter(r=>r.type===qe.outer).map(r=>r.getArea(K.out)),1))}}getT(t,i,s,r=(()=>!0),o=!0){const a=function LIe(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Mr[255&n]+Mr[n>>8&255]+Mr[n>>16&255]+Mr[n>>24&255]+"-"+Mr[255&e]+Mr[e>>8&255]+"-"+Mr[e>>16&15|64]+Mr[e>>24&255]+"-"+Mr[63&t|128]+Mr[t>>8&255]+"-"+Mr[t>>16&255]+Mr[t>>24&255]+Mr[255&i]+Mr[i>>8&255]+Mr[i>>16&255]+Mr[i>>24&255]).toLowerCase()}(),c=Object.values(this.house$.value.partsFlatten.filter(l=>l instanceof t).filter(l=>r(l)).reduce((l,u)=>{const h=i.map(d=>`${u[d]}`).join(",");return h in l||(l[h]={count:0,part:u}),l[h].count+=t!==de||o?1:u.getLength(),l},{})).map(l=>{const u=new zi(s(l.part));return u.amount=Oe(l.count,1),u.uuid=a,u});if(c.length>1){const l=new N9({uuid:a,name:`${c[0].name}`,costs:c});return l[c[0].name]=!1,l}{if(!c[0])return;const l=c[0];return l.uuid=void 0,l}}}return n.\u0275fac=function(t){return new(t||n)(J(bi))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_6=(()=>{class n{constructor(t,i){this.overlay=t,this.houseService=i,this.tooltipHTML$=new Un(void 0),this.unsubscribe=new Tt}attachPopup([t,i],s){this.detachOverlay(),this.origin=s instanceof de?s.svgIcon.node():s.svg.node(),this.overlayRef=this.overlay.create({positionStrategy:this.getPositionStrategy([t,i]),scrollStrategy:this.overlay.scrollStrategies.reposition(),hasBackdrop:!1}),this.overlayRef.backdropClick().pipe(Bn(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.attachOverlay(s)}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&this.overlayRef.detach()}updateOverlay(){}attachOverlay(t){if(this.overlayRef&&!this.overlayRef.hasAttached()){const i=new $h(VIe);this.componentRef=this.overlayRef.attach(i),this.componentRef.instance.html=t.tooltip(this.houseService.house$.value)}}getPositionStrategy([t,i]){return this.overlay.position().flexibleConnectedTo(this.origin).withPositions([new v7({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"},0,-20),new v7({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"},0,20,"flipped")]).withPush(!0)}}return n.\u0275fac=function(t){return new(t||n)(J(r1),J(Vi))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qIe=(()=>{class n{constructor(t,i){this.appService=t,this.houseService=i,this.appService.states$.subscribe(s=>{this.states=s,this.house=this.houseService.house$.value,this.cross=this.house.cross,this.filterOut(),this.appService.update$.next()})}updateStateBasedOnSection(t,i){if(this.section===t)return;this.section=t;const s=this.appService.states$.value;this.buildState(s,[tr.grid],[re.basics].includes(t)),this.buildState(s,[tr.silhouette],[re.roofEdge].includes(t)),this.buildState(s,[tr.measure,tr.minimumHeight],[re.stairBasic,re.stairCheck,re.stairPlan,re.basics,re.roof70,re.roofCircle].includes(t)),this.buildState(s,[tr.doors],![re.passiv,re.welcome].includes(t)),this.buildState(s,[X.socket,X.perilex],[re.wiredPower].includes(t)),this.buildState(s,[X.poe,X.ethernet,X.wifi],[re.wiredEthernet].includes(t)),this.buildState(s,[X.ventIn,X.ventOut],[re.wiredVent].includes(t)),this.buildState(s,[X.dimmer,X.dlc,X.lightBulb,X.lightSwitch],[re.wiredLight].includes(t)),this.buildState(s,[X.toilet,X.shower,X.drain,X.waterCold,X.waterRain,X.waterWarm],[re.wiredWater].includes(t)),this.buildState(s,[X.camera,X.alarm,X.smoke],[re.wiredSafety].includes(t)),this.buildState(s,[X.pir],[re.wiredExtra,re.wiredSafety].includes(t)),this.buildState(s,[X.blinds,X.temperature],[re.wiredExtra].includes(t)),this.statesForConstruction(s,t),this.appService.commitState(s)}statesForConstruction(t,i){const s=[];s.push(re.constructionWallGips),this.buildState(t,[yt.gips],[...s].includes(i)),s.push(re.constructionWallService),this.buildState(t,[yt.serviceBeams,yt.serviceInsulation],[...s].includes(i)),s.push(re.constructionWallFacade),this.buildState(t,[yt.facade],[...s].includes(i)),s.push(re.constructionWallSpace),this.buildState(t,[yt.space],[...s].includes(i)),s.push(re.constructionRoofTiles),this.buildState(t,[yt.roofTiles],[...s].includes(i)),s.push(re.constructionRoofSpace),this.buildState(t,[yt.roofSpace],[...s].includes(i)),s.push(re.constructionRoofOuterSheet),s.push(re.constructionWallOuterSheet),this.buildState(t,[yt.outerSheet,yt.roofOuterSheets],[...s].includes(i)),s.push(re.constructionWallInsulation),this.buildState(t,[yt.insulation],[...s].includes(i)),s.push(re.constructionRoofInside),this.buildState(t,[yt.roofOSB],[...s].includes(i)),s.push(re.constructionRoofJoist),this.buildState(t,[yt.roofJoists],[...s].includes(i)),s.push(re.constructionRoofRidge),this.buildState(t,[yt.roofRidge],[...s].includes(i)),s.push(re.constructionFloor),this.buildState(t,[yt.topFloorJoists,yt.topFloorOSB],[...s].includes(i)),s.push(re.constructionFloorLVL),this.buildState(t,[yt.floorLVL],[...s].includes(i)),s.push(re.constructionWallTape),this.buildState(t,[yt.tapes],[...s].includes(i)),s.push(re.constructionWallOSB),this.buildState(t,[yt.osbWall],[...s].includes(i)),s.push(re.constructionWallJoists),this.buildState(t,[yt.joists],[...s].includes(i)),s.push(re.constructionWallSole),this.buildState(t,[yt.sole],[...s].includes(i)),s.push(re.constructionGroundFloor),this.buildState(t,[yt.groundFloor],[...s].includes(i)),s.push(re.constructionCrawlerSpace),this.buildState(t,[yt.crawlerSpace],[...s].includes(i)),s.push(re.constructionFoundation),this.buildState(t,[yt.foundation],[...s].includes(i))}filterOut(){this.house.tower.footprintVisible=this.states[tr.towerFootprint],this.house.partsFlatten.filter(t=>t instanceof ci).forEach(t=>t.visible=this.states[tr.doors]),this.house.partsFlatten.filter(t=>t instanceof ot).filter(t=>t.type===qe.theoretic).forEach(t=>t.outOfDesign=!this.states[tr.theoreticalWalls]),[...this.house.parts,...this.cross.parts,...this.house.stair.parts].filter(t=>t instanceof Wi).forEach(t=>t.visible=this.states[tr.measure]),this.house.parts.filter(t=>t.selector.includes("house-stramien-")).forEach(t=>{t.visible=this.states[tr.stramien]}),this.house.parts.filter(t=>t.selector.includes("grid-index")).forEach(t=>{t.visible=this.states[tr.grid]}),this.house.partsFlatten.filter(t=>t instanceof de).forEach(t=>{t.visible=this.states[t.sensorType]})}buildState(t,i,s){i.forEach(r=>{t[r]=s})}}return n.\u0275fac=function(t){return new(t||n)(J(bi),J(Vi))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function F2(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function uW(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var XC,h1,ks,ji,f1,ew,tw,vW,bW,w6,h8,c,l,u,h,d,f,n,e,t,i,s,r,o,a,p,Po={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},y6={duration:.5,overwrite:!1,delay:0},d1=1e8,li=1e-8,ZC=2*Math.PI,YIe=ZC/4,XIe=0,hW=Math.sqrt,ZIe=Math.cos,KIe=Math.sin,sr=function(e){return"string"==typeof e},rs=function(e){return"function"==typeof e},B2=function(e){return"number"==typeof e},KC=function(e){return typeof e>"u"},Ha=function(e){return"object"==typeof e},ao=function(e){return!1!==e},dW=function(){return typeof window<"u"},F9=function(e){return rs(e)||sr(e)},fW="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Cr=Array.isArray,QC=/(?:-?\.?\d|\.)+/gi,pW=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,b6=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,JC=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,mW=/[+-]=-?[.\d]+/,gW=/[^,'"\[\]\s]+/gi,QIe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Oo={},B9={},_W=function(e){return(B9=P3(e,Oo))&&Bo},nw=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},U9=function(e,t){return!t&&console.warn(e)},yW=function(e,t){return e&&(Oo[e]=t)&&B9&&(B9[e]=t)||Oo},n8=function(){return 0},JIe={suppressEvents:!0,isStart:!0},s8={suppressEvents:!0},iw={},Jc=[],sw={},No={},rw={},xW=30,G9=[],ow="",aw=function(e){var i,s,t=e[0];if(Ha(t)||rs(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(s=G9.length;s--&&!G9[s].targetTest(t););i=G9[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new YW(e[s],i)))||e.splice(s,1);return e},V3=function(e){return e._gsap||aw(g1(e))[0]._gsap},MW=function(e,t,i){return(i=e[t])&&rs(i)?e[t]():KC(i)&&e.getAttribute&&e.getAttribute(t)||i},co=function(e,t){return(e=e.split(",")).forEach(t)||e},ys=function(e){return Math.round(1e5*e)/1e5||0},ur=function(e){return Math.round(1e7*e)/1e7||0},x6=function(e,t){var i=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),"+"===i?e+s:"-"===i?e-s:"*"===i?e*s:e/s},eHe=function(e,t){for(var i=t.length,s=0;e.indexOf(t[s])<0&&++s<i;);return s<i},W9=function(){var i,s,e=Jc.length,t=Jc.slice(0);for(sw={},Jc.length=0,i=0;i<e;i++)(s=t[i])&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},CW=function(e,t,i,s){Jc.length&&W9(),e.render(t,i,s||h1),Jc.length&&W9()},wW=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(gW).length<2?t:sr(e)?e.trim():e},SW=function(e){return e},p1=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},P3=function(e,t){for(var i in t)e[i]=t[i];return e},TW=function n(e,t){for(var i in t)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=Ha(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},j9=function(e,t){var s,i={};for(s in e)s in t||(i[s]=e[s]);return i},r8=function(e){var t=e.parent||ji,i=e.keyframes?function(e){return function(t,i){for(var s in i)s in t||"duration"===s&&e||"ease"===s||(t[s]=i[s])}}(Cr(e.keyframes)):p1;if(ao(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},EW=function(e,t,i,s,r){void 0===i&&(i="_first"),void 0===s&&(s="_last");var a,o=e[s];if(r)for(a=t[r];o&&o[r]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[s]=t,t._prev=o,t.parent=t._dp=e,t},$9=function(e,t,i,s){void 0===i&&(i="_first"),void 0===s&&(s="_last");var r=t._prev,o=t._next;r?r._next=o:e[i]===t&&(e[i]=o),o?o._prev=r:e[s]===t&&(e[s]=r),t._next=t._prev=t.parent=null},U2=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},O3=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},iHe=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},cw=function(e,t,i,s){return e._startAt&&(h1?e._startAt.revert(s8):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},sHe=function n(e){return!e||e._ts&&n(e.parent)},AW=function(e){return e._repeat?M6(e._tTime,e=e.duration()+e._rDelay)*e:0},M6=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},q9=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Y9=function(e){return e._end=ur(e._start+(e._tDur/Math.abs(e._ts||e._rts||li)||0))},X9=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=ur(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Y9(e),i._dirty||O3(i,e)),e},DW=function(e,t){var i;if((t._time||t._initted&&!t._dur)&&(i=q9(e.rawTime(),t),(!t._dur||a8(0,t.totalDuration(),i)-t._tTime>li)&&t.render(i,!0)),O3(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-li}},Va=function(e,t,i,s){return t.parent&&U2(t),t._start=ur((B2(i)?i:i||e!==ji?m1(e,i,t):e._time)+t._delay),t._end=ur(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),EW(e,t,"_first","_last",e._sort?"_start":0),lw(t)||(e._recent=t),s||DW(e,t),e._ts<0&&X9(e,e._tTime),e},LW=function(e,t){return(Oo.ScrollTrigger||nw("scrollTrigger",t))&&Oo.ScrollTrigger.create(t,e)},zW=function(e,t,i,s){return _w(e,t),e._initted?!i&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&bW!==Fo.frame?(Jc.push(e),e._lazy=[t,s],1):void 0:1},rHe=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},lw=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},C6=function(e,t,i,s){var r=e._repeat,o=ur(t)||0,a=e._tTime/e._tDur;return a&&!s&&(e._time*=o/e._dur),e._dur=o,e._tDur=r?r<0?1e10:ur(o*(r+1)+e._rDelay*r):o,a>0&&!s?X9(e,e._tTime=e._tDur*a):e.parent&&Y9(e),i||O3(e.parent,e),e},kW=function(e){return e instanceof lo?O3(e):C6(e,e._dur)},cHe={_start:0,endTime:n8,totalDuration:n8},m1=function n(e,t,i){var a,c,l,s=e.labels,r=e._recent||cHe,o=e.duration()>=d1?r.endTime(!1):e._dur;return sr(t)&&(isNaN(t)||t in s)?(c=t.charAt(0),l="%"===t.substr(-1),a=t.indexOf("="),"<"===c||">"===c?(a>=0&&(t=t.replace(/=/,"")),("<"===c?r._start:r.endTime(r._repeat>=0))+(parseFloat(t.substr(1))||0)*(l?(a<0?r:i).totalDuration()/100:1)):a<0?(t in s||(s[t]=o),s[t]):(c=parseFloat(t.charAt(a-1)+t.substr(a+1)),l&&i&&(c=c/100*(Cr(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+c:o+c)):null==t?o:+t},o8=function(e,t,i){var a,c,s=B2(t[1]),r=(s?2:1)+(e<2?0:1),o=t[r];if(s&&(o.duration=t[1]),o.parent=i,e){for(a=o,c=i;c&&!("immediateRender"in a);)a=c.vars.defaults||{},c=ao(c.vars.inherit)&&c.parent;o.immediateRender=ao(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[r-1]}return new js(t[0],o,t[r+1])},el=function(e,t){return e||0===e?t(e):t},a8=function(e,t,i){return i<e?e:i>t?t:i},wr=function(e,t){return sr(e)&&(t=QIe.exec(e))?t[1]:""},uw=[].slice,RW=function(e,t){return e&&Ha(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Ha(e[0]))&&!e.nodeType&&e!==f1},g1=function(e,t,i){return ks&&!t&&ks.selector?ks.selector(e):!sr(e)||i||!ew&&S6()?Cr(e)?function(e,t,i){return void 0===i&&(i=[]),e.forEach(function(s){var r;return sr(s)&&!t||RW(s,1)?(r=i).push.apply(r,g1(s)):i.push(s)})||i}(e,i):RW(e)?uw.call(e,0):e?[e]:[]:uw.call((t||tw).querySelectorAll(e),0)},hw=function(e){return e=g1(e)[0]||U9("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return g1(t,i.querySelectorAll?i:i===e?U9("Invalid scope")||tw.createElement("div"):e)}},IW=function(e){return e.sort(function(){return.5-Math.random()})},HW=function(e){if(rs(e))return e;var t=Ha(e)?e:{each:e},i=N3(t.ease),s=t.from||0,r=parseFloat(t.base)||0,o={},a=s>0&&s<1,c=isNaN(s)||a,l=t.axis,u=s,h=s;return sr(s)?u=h={center:.5,edges:.5,end:1}[s]||0:!a&&c&&(u=s[0],h=s[1]),function(d,f,p){var v,_,y,b,x,w,L,C,D,m=(p||t).length,g=o[m];if(!g){if(!(D="auto"===t.grid?0:(t.grid||[1,d1])[1])){for(L=-d1;L<(L=p[D++].getBoundingClientRect().left)&&D<m;);D--}for(g=o[m]=[],v=c?Math.min(D,m)*u-.5:s%D,_=D===d1?0:c?m*h/D-.5:s/D|0,L=0,C=d1,w=0;w<m;w++)y=w%D-v,b=_-(w/D|0),g[w]=x=l?Math.abs("y"===l?b:y):hW(y*y+b*b),x>L&&(L=x),x<C&&(C=x);"random"===s&&IW(g),g.max=L-C,g.min=C,g.v=m=(parseFloat(t.amount)||parseFloat(t.each)*(D>m?m-1:l?"y"===l?m/D:D:Math.max(D,m/D))||0)*("edges"===s?-1:1),g.b=m<0?r-m:r,g.u=wr(t.amount||t.each)||0,i=i&&m<0?jW(i):i}return m=(g[d]-g.min)/g.max||0,ur(g.b+(i?i(m):m)*g.v)+g.u}},dw=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var s=ur(Math.round(parseFloat(i)/e)*e*t);return(s-s%1)/t+(B2(i)?0:wr(i))}},VW=function(e,t){var s,r,i=Cr(e);return!i&&Ha(e)&&(s=i=e.radius||d1,e.values?(e=g1(e.values),(r=!B2(e[0]))&&(s*=s)):e=dw(e.increment)),el(t,i?rs(e)?function(o){return r=e(o),Math.abs(r-o)<=s?r:o}:function(o){for(var d,f,a=parseFloat(r?o.x:o),c=parseFloat(r?o.y:0),l=d1,u=0,h=e.length;h--;)(d=r?(d=e[h].x-a)*d+(f=e[h].y-c)*f:Math.abs(e[h]-a))<l&&(l=d,u=h);return u=!s||l<=s?e[u]:o,r||u===o||B2(o)?u:u+wr(o)}:dw(e))},PW=function(e,t,i,s){return el(Cr(e)?!t:!0===i?!!(i=0):!s,function(){return Cr(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(s=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+.99*i))/i)*i*s)/s})},OW=function(e,t,i){return el(i,function(s){return e[~~t(s)]})},c8=function(e){for(var s,r,o,a,t=0,i="";~(s=e.indexOf("random(",t));)o=e.indexOf(")",s),a="["===e.charAt(s+7),r=e.substr(s+7,o-s-7).match(a?gW:QC),i+=e.substr(t,s-t)+PW(a?r:+r[0],a?0:+r[1],+r[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},NW=function(e,t,i,s,r){var o=t-e,a=s-i;return el(r,function(c){return i+((c-e)/o*a||0)})},FW=function(e,t,i){var o,a,c,s=e.labels,r=d1;for(o in s)(a=s[o]-t)<0==!!i&&a&&r>(a=Math.abs(a))&&(c=o,r=a);return c},v1=function(e,t,i){var c,l,u,s=e.vars,r=s[t],o=ks,a=e._ctx;if(r)return c=s[t+"Params"],l=s.callbackScope||e,i&&Jc.length&&W9(),a&&(ks=a),u=c?r.apply(l,c):r.call(l),ks=o,u},l8=function(e){return U2(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&v1(e,"onInterrupt"),e},vHe=function(e){var t=(e=!e.name&&e.default||e).name,i=rs(e),s=t&&!i&&e.init?function(){this._props=[]}:e,r={init:n8,render:xw,add:gw,kill:RHe,modifier:kHe,rawVars:0},o={targetTest:0,get:0,getSetter:bw,aliases:{},register:0};if(S6(),e!==s){if(No[t])return;p1(s,p1(j9(e,r),o)),P3(s.prototype,P3(r,j9(e,o))),No[s.prop=t]=s,e.targetTest&&(G9.push(s),iw[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}yW(t,s),e.register&&e.register(Bo,s,uo)},ui=255,u8={aqua:[0,ui,ui],lime:[0,ui,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ui],navy:[0,0,128],white:[ui,ui,ui],olive:[128,128,0],yellow:[ui,ui,0],orange:[ui,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ui,0,0],pink:[ui,192,203],cyan:[0,ui,ui],transparent:[ui,ui,ui,0]},fw=function(e,t,i){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)*ui+.5|0},BW=function(e,t,i){var r,o,a,c,l,u,h,d,f,p,s=e?B2(e)?[e>>16,e>>8&ui,e&ui]:0:u8.black;if(!s){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),u8[e])s=u8[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+r+r+o+o+a+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(s=parseInt(e.substr(1,6),16))>>16,s>>8&ui,s&ui,parseInt(e.substr(7),16)/255];s=[(e=parseInt(e.substr(1),16))>>16,e>>8&ui,e&ui]}else if("hsl"===e.substr(0,3))if(s=p=e.match(QC),t){if(~e.indexOf("="))return s=e.match(pW),i&&s.length<4&&(s[3]=1),s}else c=+s[0]%360/360,l=+s[1]/100,r=2*(u=+s[2]/100)-(o=u<=.5?u*(l+1):u+l-u*l),s.length>3&&(s[3]*=1),s[0]=fw(c+1/3,r,o),s[1]=fw(c,r,o),s[2]=fw(c-1/3,r,o);else s=e.match(QC)||u8.transparent;s=s.map(Number)}return t&&!p&&(r=s[0]/ui,o=s[1]/ui,a=s[2]/ui,u=((h=Math.max(r,o,a))+(d=Math.min(r,o,a)))/2,h===d?c=l=0:(f=h-d,l=u>.5?f/(2-h-d):f/(h+d),c=h===r?(o-a)/f+(o<a?6:0):h===o?(a-r)/f+2:(r-o)/f+4,c*=60),s[0]=~~(c+.5),s[1]=~~(100*l+.5),s[2]=~~(100*u+.5)),i&&s.length<4&&(s[3]=1),s},UW=function(e){var t=[],i=[],s=-1;return e.split(tl).forEach(function(r){var o=r.match(b6)||[];t.push.apply(t,o),i.push(s+=o.length+1)}),t.c=i,t},GW=function(e,t,i){var c,l,u,h,s="",r=(e+s).match(tl),o=t?"hsla(":"rgba(",a=0;if(!r)return e;if(r=r.map(function(d){return(d=BW(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),i&&(u=UW(e),(c=i.c).join(s)!==u.c.join(s)))for(h=(l=e.replace(tl,"1").split(b6)).length-1;a<h;a++)s+=l[a]+(~c.indexOf(a)?r.shift()||o+"0,0,0,0)":(u.length?u:r.length?r:i).shift());if(!l)for(h=(l=e.split(tl)).length-1;a<h;a++)s+=l[a]+r[a];return s+l[h]},tl=function(){var e,n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in u8)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),_He=/hsl[a]?\(/,WW=function(e){var i,t=e.join(" ");if(tl.lastIndex=0,tl.test(t))return i=_He.test(t),e[1]=GW(e[1],i),e[0]=GW(e[0],i,UW(e[1])),!0},Fo=(n=Date.now,e=500,t=33,i=n(),s=i,o=r=1e3/240,p=function m(g){var y,b,x,w,v=n()-s,_=!0===g;if(v>e&&(i+=v-t),((y=(x=(s+=v)-i)-o)>0||_)&&(w=++h.frame,d=x-1e3*h.time,h.time=x/=1e3,o+=y+(y>=r?4:r-y),b=1),_||(c=l(m)),b)for(f=0;f<a.length;f++)a[f](x,d,w,g)},h={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(g){return d/(1e3/(g||60))},wake:function(){vW&&(!ew&&dW()&&(f1=ew=window,tw=f1.document||{},Oo.gsap=Bo,(f1.gsapVersions||(f1.gsapVersions=[])).push(Bo.version),_W(B9||f1.GreenSockGlobals||!f1.gsap&&f1||{}),u=f1.requestAnimationFrame),c&&h.sleep(),l=u||function(g){return setTimeout(g,o-1e3*h.time+1|0)},h8=1,p(2))},sleep:function(){(u?f1.cancelAnimationFrame:clearTimeout)(c),h8=0,l=n8},lagSmoothing:function(g,v){e=g||1/li,t=Math.min(v,e,0)},fps:function(g){o=1e3*h.time+(r=1e3/(g||240))},add:function(g,v,_){var y=v?function(b,x,w,L){g(b,x,w,L),h.remove(y)}:g;return h.remove(g),a[_?"unshift":"push"](y),S6(),y},remove:function(g,v){~(v=a.indexOf(g))&&a.splice(v,1)&&f>=v&&f--},_listeners:a=[]}),S6=function(){return!h8&&Fo.wake()},wn={},yHe=/^[\d.\-M][\d.\-,\s]/,bHe=/["']/g,xHe=function(e){for(var a,c,l,t={},i=e.substr(1,e.length-3).split(":"),s=i[0],r=1,o=i.length;r<o;r++)c=i[r],a=r!==o-1?c.lastIndexOf(","):c.length,l=c.substr(0,a),t[s]=isNaN(l)?l.replace(bHe,"").trim():+l,s=c.substr(a+1).trim();return t},jW=function(e){return function(t){return 1-e(1-t)}},$W=function n(e,t){for(var s,i=e._first;i;)i instanceof lo?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(s=i._ease,i._ease=i._yEase,i._yEase=s,i._yoyo=t)),i=i._next},N3=function(e,t){return e&&(rs(e)?e:wn[e]||function(e){var t=(e+"").split("("),i=wn[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[xHe(t[1])]:function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),s=e.indexOf("(",t);return e.substring(t,~s&&s<i?e.indexOf(")",i+1):i)}(e).split(",").map(wW)):wn._CE&&yHe.test(e)?wn._CE("",e):i}(e))||t},F3=function(e,t,i,s){void 0===i&&(i=function(c){return 1-t(1-c)}),void 0===s&&(s=function(c){return c<.5?t(2*c)/2:1-t(2*(1-c))/2});var o,r={easeIn:t,easeOut:i,easeInOut:s};return co(e,function(a){for(var c in wn[a]=Oo[a]=r,wn[o=a.toLowerCase()]=i,r)wn[o+("easeIn"===c?".in":"easeOut"===c?".out":".inOut")]=wn[a+"."+c]=r[c]}),r},qW=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},pw=function n(e,t,i){var s=t>=1?t:1,r=(i||(e?.3:.45))/(t<1?t:1),o=r/ZC*(Math.asin(1/s)||0),a=function(u){return 1===u?1:s*Math.pow(2,-10*u)*KIe((u-o)*r)+1},c="out"===e?a:"in"===e?function(l){return 1-a(1-l)}:qW(a);return r=ZC/r,c.config=function(l,u){return n(e,l,u)},c},mw=function n(e,t){void 0===t&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},s="out"===e?i:"in"===e?function(r){return 1-i(1-r)}:qW(i);return s.config=function(r){return n(e,r)},s};co("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;F3(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(2*i,t)/2:1-Math.pow(2*(1-i),t)/2})}),wn.Linear.easeNone=wn.none=wn.Linear.easeIn,F3("Elastic",pw("in"),pw("out"),pw()),function(n,e){var r=function(a){return a<.36363636363636365?n*a*a:a<.7272727272727273?n*Math.pow(a-1.5/e,2)+.75:a<.9090909090909092?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};F3("Bounce",function(o){return 1-r(1-o)},r)}(7.5625,2.75),F3("Expo",function(n){return n?Math.pow(2,10*(n-1)):0}),F3("Circ",function(n){return-(hW(1-n*n)-1)}),F3("Sine",function(n){return 1===n?1:1-ZIe(n*YIe)}),F3("Back",mw("in"),mw("out"),mw()),wn.SteppedEase=wn.steps=Oo.SteppedEase={config:function(e,t){void 0===e&&(e=1);var i=1/e,s=e+(t?0:1),r=t?1:0;return function(a){return((s*a8(0,.99999999,a)|0)+r)*i}}},y6.ease=wn["quad.out"],co("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return ow+=n+","+n+"Params,"});var YW=function(e,t){this.id=XIe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:MW,this.set=t?t.getSetter:bw},T6=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,C6(this,+t.duration,1,1),this.data=t.data,ks&&(this._ctx=ks,ks.data.push(this)),h8||Fo.wake()}var e=n.prototype;return e.delay=function(i){return i||0===i?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,C6(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,s){if(S6(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(X9(this,i),!r._dp||r.parent||DW(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Va(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===li||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),CW(this,i,s)),this},e.time=function(i,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+AW(this))%(this._dur+this._rDelay)||(i?this._dur:0),s):this._time},e.totalProgress=function(i,s){return arguments.length?this.totalTime(this.totalDuration()*i,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(i,s){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?i:1-i)+AW(this),s):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(i,s){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*r,s):this._repeat?M6(this._tTime,r)+1:1},e.timeScale=function(i){if(!arguments.length)return this._rts===-li?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?q9(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-li?0:this._rts,this.totalTime(a8(-this._delay,this._tDur,s),!0),Y9(this),iHe(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(S6(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==li&&(this._tTime-=li)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&Va(s,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(ao(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var s=this.parent||this._dp;return s?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?q9(s.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){void 0===i&&(i=s8);var s=h1;return h1=i,this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents),"nested"!==this.data&&U2(this),h1=s,this},e.globalTime=function(i){for(var s=this,r=arguments.length?i:s.rawTime();s;)r=s._start+r/(s._ts||1),s=s._dp;return!this.parent&&this.vars.immediateRender?-1:r},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,kW(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var s=this._time;return this._rDelay=i,kW(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,s){return this.totalTime(m1(this,i),ao(s))},e.restart=function(i,s){return this.play().totalTime(i?-this._delay:0,ao(s))},e.play=function(i,s){return null!=i&&this.seek(i,s),this.reversed(!1).paused(!1)},e.reverse=function(i,s){return null!=i&&this.seek(i||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(i,s){return null!=i&&this.seek(i,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-li:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-li,this},e.isActive=function(){var r,i=this.parent||this._dp,s=this._start;return!(i&&!(this._ts&&this._initted&&i.isActive()&&(r=i.rawTime(!0))>=s&&r<this.endTime(!0)-li))},e.eventCallback=function(i,s,r){var o=this.vars;return arguments.length>1?(s?(o[i]=s,r&&(o[i+"Params"]=r),"onUpdate"===i&&(this._onUpdate=s)):delete o[i],this):o[i]},e.then=function(i){var s=this;return new Promise(function(r){var o=rs(i)?i:SW,a=function(){var l=s.then;s.then=null,rs(o)&&(o=o(s))&&(o.then||o===s)&&(s.then=l),r(o),s.then=l};s._initted&&1===s.totalProgress()&&s._ts>=0||!s._tTime&&s._ts<0?a():s._prom=a})},e.kill=function(){l8(this)},n}();p1(T6.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-li,_prom:0,_ps:!1,_rts:1});var lo=function(n){function e(i,s){var r;return void 0===i&&(i={}),(r=n.call(this,i)||this).labels={},r.smoothChildTiming=!!i.smoothChildTiming,r.autoRemoveChildren=!!i.autoRemoveChildren,r._sort=ao(i.sortChildren),ji&&Va(i.parent||ji,F2(r),s),i.reversed&&r.reverse(),i.paused&&r.paused(!0),i.scrollTrigger&&LW(F2(r),i.scrollTrigger),r}uW(e,n);var t=e.prototype;return t.to=function(s,r,o){return o8(0,arguments,this),this},t.from=function(s,r,o){return o8(1,arguments,this),this},t.fromTo=function(s,r,o,a){return o8(2,arguments,this),this},t.set=function(s,r,o){return r.duration=0,r.parent=this,r8(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new js(s,r,m1(this,o),1),this},t.call=function(s,r,o){return Va(this,js.delayedCall(0,s,r),o)},t.staggerTo=function(s,r,o,a,c,l,u){return o.duration=r,o.stagger=o.stagger||a,o.onComplete=l,o.onCompleteParams=u,o.parent=this,new js(s,o,m1(this,c)),this},t.staggerFrom=function(s,r,o,a,c,l,u){return o.runBackwards=1,r8(o).immediateRender=ao(o.immediateRender),this.staggerTo(s,r,o,a,c,l,u)},t.staggerFromTo=function(s,r,o,a,c,l,u,h){return a.startAt=o,r8(a).immediateRender=ao(a.immediateRender),this.staggerTo(s,r,a,c,l,u,h)},t.render=function(s,r,o){var d,f,p,m,g,v,_,y,b,x,w,L,a=this._time,c=this._dirty?this.totalDuration():this._tDur,l=this._dur,u=s<=0?0:ur(s),h=this._zTime<0!=s<0&&(this._initted||!l);if(this!==ji&&u>c&&s>=0&&(u=c),u!==this._tTime||o||h){if(a!==this._time&&l&&(u+=this._time-a,s+=this._time-a),d=u,b=this._start,v=!(y=this._ts),h&&(l||(a=this._zTime),(s||!r)&&(this._zTime=s)),this._repeat){if(w=this._yoyo,g=l+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(100*g+s,r,o);if(d=ur(u%g),u===c?(m=this._repeat,d=l):((m=~~(u/g))&&m===u/g&&(d=l,m--),d>l&&(d=l)),x=M6(this._tTime,g),!a&&this._tTime&&x!==m&&(x=m),w&&1&m&&(d=l-d,L=1),m!==x&&!this._lock){var C=w&&1&x,D=C===(w&&1&m);if(m<x&&(C=!C),a=C?0:l,this._lock=1,this.render(a||(L?0:ur(m*g)),r,!l)._lock=0,this._tTime=u,!r&&this.parent&&v1(this,"onRepeat"),this.vars.repeatRefresh&&!L&&(this.invalidate()._lock=1),a&&a!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,c=this._tDur,D&&(this._lock=2,this.render(a=C?l:-1e-4,!0),this.vars.repeatRefresh&&!L&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;$W(this,L)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(_=function(e,t,i){var s;if(i>t)for(s=e._first;s&&s._start<=i;){if("isPause"===s.data&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=i;){if("isPause"===s.data&&s._start<t)return s;s=s._prev}}(this,ur(a),ur(d)),_&&(u-=d-(d=_._start))),this._tTime=u,this._time=d,this._act=!y,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,a=0),!a&&d&&!r&&(v1(this,"onStart"),this._tTime!==u))return this;if(d>=a&&s>=0)for(f=this._first;f;){if(p=f._next,(f._act||d>=f._start)&&f._ts&&_!==f){if(f.parent!==this)return this.render(s,r,o);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,r,o),d!==this._time||!this._ts&&!v){_=0,p&&(u+=this._zTime=-li);break}}f=p}else{o=o||h1,f=this._last;for(var R=s<0?s:d;f;){if(p=f._prev,(f._act||R<=f._end)&&f._ts&&_!==f){if(f.parent!==this)return this.render(s,r,o);if(f.render(f._ts>0?(R-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(R-f._start)*f._ts,r,o),d!==this._time||!this._ts&&!v){_=0,p&&(u+=this._zTime=R?-li:li);break}}f=p}}if(_&&!r&&(this.pause(),_.render(d>=a?0:-li)._zTime=d>=a?1:-1,this._ts))return this._start=b,Y9(this),this.render(s,r,o);this._onUpdate&&!r&&v1(this,"onUpdate",!0),(u===c&&this._tTime>=this.totalDuration()||!u&&a)&&(b===this._start||Math.abs(y)!==Math.abs(this._ts))&&(this._lock||((s||!l)&&(u===c&&this._ts>0||!u&&this._ts<0)&&U2(this,1),!r&&(!(s<0)||a)&&(u||a||!c)&&(v1(this,u===c&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(s,r){var o=this;if(B2(r)||(r=m1(this,r,s)),!(s instanceof T6)){if(Cr(s))return s.forEach(function(a){return o.add(a,r)}),this;if(sr(s))return this.addLabel(s,r);if(!rs(s))return this;s=js.delayedCall(0,s)}return this!==s?Va(this,s,r):this},t.getChildren=function(s,r,o,a){void 0===s&&(s=!0),void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===a&&(a=-d1);for(var c=[],l=this._first;l;)l._start>=a&&(l instanceof js?r&&c.push(l):(o&&c.push(l),s&&c.push.apply(c,l.getChildren(!0,r,o)))),l=l._next;return c},t.getById=function(s){for(var r=this.getChildren(1,1,1),o=r.length;o--;)if(r[o].vars.id===s)return r[o]},t.remove=function(s){return sr(s)?this.removeLabel(s):rs(s)?this.killTweensOf(s):($9(this,s),s===this._recent&&(this._recent=this._last),O3(this))},t.totalTime=function(s,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ur(Fo.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),n.prototype.totalTime.call(this,s,r),this._forcing=0,this):this._tTime},t.addLabel=function(s,r){return this.labels[s]=m1(this,r),this},t.removeLabel=function(s){return delete this.labels[s],this},t.addPause=function(s,r,o){var a=js.delayedCall(0,r||n8,o);return a.data="isPause",this._hasPause=1,Va(this,a,m1(this,s))},t.removePause=function(s){var r=this._first;for(s=m1(this,s);r;)r._start===s&&"isPause"===r.data&&U2(r),r=r._next},t.killTweensOf=function(s,r,o){for(var a=this.getTweensOf(s,o),c=a.length;c--;)nl!==a[c]&&a[c].kill(s,r);return this},t.getTweensOf=function(s,r){for(var u,o=[],a=g1(s),c=this._first,l=B2(r);c;)c instanceof js?eHe(c._targets,a)&&(l?(!nl||c._initted&&c._ts)&&c.globalTime(0)<=r&&c.globalTime(c.totalDuration())>r:!r||c.isActive())&&o.push(c):(u=c.getTweensOf(a,r)).length&&o.push.apply(o,u),c=c._next;return o},t.tweenTo=function(s,r){r=r||{};var f,o=this,a=m1(o,s),l=r.startAt,u=r.onStart,h=r.onStartParams,d=r.immediateRender,p=js.to(o,p1({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:r.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale())||li,onStart:function(){if(o.pause(),!f){var g=r.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale());p._dur!==g&&C6(p,g,0,1).render(p._time,!0,!0),f=1}u&&u.apply(p,h||[])}},r));return d?p.render(0):p},t.tweenFromTo=function(s,r,o){return this.tweenTo(r,p1({startAt:{time:m1(this,s)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(s){return void 0===s&&(s=this._time),FW(this,m1(this,s))},t.previousLabel=function(s){return void 0===s&&(s=this._time),FW(this,m1(this,s),1)},t.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+li)},t.shiftChildren=function(s,r,o){void 0===o&&(o=0);for(var l,a=this._first,c=this.labels;a;)a._start>=o&&(a._start+=s,a._end+=s),a=a._next;if(r)for(l in c)c[l]>=o&&(c[l]+=s);return O3(this)},t.invalidate=function(){var s=this._first;for(this._lock=0;s;)s.invalidate(),s=s._next;return n.prototype.invalidate.call(this)},t.clear=function(s){void 0===s&&(s=!0);for(var o,r=this._first;r;)o=r._next,this.remove(r),r=o;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),O3(this)},t.totalDuration=function(s){var l,u,h,r=0,o=this,a=o._last,c=d1;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-s:s));if(o._dirty){for(h=o.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),(u=a._start)>c&&o._sort&&a._ts&&!o._lock?(o._lock=1,Va(o,a,u-a._delay,1)._lock=0):c=u,u<0&&a._ts&&(r-=u,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),c=0),a._end>r&&a._ts&&(r=a._end),a=l;C6(o,o===ji&&o._time>r?o._time:r,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(s){if(ji._ts&&(CW(ji,q9(s,ji)),bW=Fo.frame),Fo.frame>=xW){xW+=Po.autoSleep||120;var r=ji._first;if((!r||!r._ts)&&Po.autoSleep&&Fo._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||Fo.sleep()}}},e}(T6);p1(lo.prototype,{_lock:0,_hasPause:0,_forcing:0});var nl,vw,wHe=function(e,t,i,s,r,o,a){var h,d,f,p,m,g,v,_,c=new uo(this._pt,e,t,0,1,ej,null,r),l=0,u=0;for(c.b=i,c.e=s,i+="",(v=~(s+="").indexOf("random("))&&(s=c8(s)),o&&(o(_=[i,s],e,t),i=_[0],s=_[1]),d=i.match(JC)||[];h=JC.exec(s);)p=h[0],m=s.substring(l,h.index),f?f=(f+1)%5:"rgba("===m.substr(-5)&&(f=1),p!==d[u++]&&(g=parseFloat(d[u-1])||0,c._pt={_next:c._pt,p:m||1===u?m:",",s:g,c:"="===p.charAt(1)?x6(g,p)-g:parseFloat(p)-g,m:f&&f<4?Math.round:0},l=JC.lastIndex);return c.c=l<s.length?s.substring(l,s.length):"",c.fp=a,(mW.test(s)||v)&&(c.e=0),this._pt=c,c},gw=function(e,t,i,s,r,o,a,c,l,u){rs(s)&&(s=s(r||0,e,o));var p,h=e[t],d="get"!==i?i:rs(h)?l?e[t.indexOf("set")||!rs(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():h,f=rs(h)?l?DHe:QW:yw;if(sr(s)&&(~s.indexOf("random(")&&(s=c8(s)),"="===s.charAt(1)&&((p=x6(d,s)+(wr(d)||0))||0===p)&&(s=p)),!u||d!==s||vw)return isNaN(d*s)||""===s?(!h&&!(t in e)&&nw(t,s),wHe.call(this,e,t,d,s,f,c||Po.stringFilter,l)):(p=new uo(this._pt,e,t,+d||0,s-(d||0),"boolean"==typeof h?zHe:JW,0,f),l&&(p.fp=l),a&&p.modifier(a,this,e),this._pt=p)},XW=function(e,t,i,s,r,o){var a,c,l,u;if(No[e]&&!1!==(a=new No[e]).init(r,a.rawVars?t[e]:function(e,t,i,s,r){if(rs(e)&&(e=d8(e,r,t,i,s)),!Ha(e)||e.style&&e.nodeType||Cr(e)||fW(e))return sr(e)?d8(e,r,t,i,s):e;var a,o={};for(a in e)o[a]=d8(e[a],r,t,i,s);return o}(t[e],s,r,o,i),i,s,o)&&(i._pt=c=new uo(i._pt,r,e,0,1,a.render,a,0,a.priority),i!==w6))for(l=i._ptLookup[i._targets.indexOf(r)],u=a._props.length;u--;)l[a._props[u]]=c;return a},_w=function n(e,t){var w,L,C,D,R,Y,Q,j,z,G,k,O,N,i=e.vars,s=i.ease,r=i.startAt,o=i.immediateRender,a=i.lazy,c=i.onUpdate,l=i.onUpdateParams,u=i.callbackScope,h=i.runBackwards,d=i.yoyoEase,f=i.keyframes,p=i.autoRevert,m=e._dur,g=e._startAt,v=e._targets,_=e.parent,y=_&&"nested"===_.data?_.vars.targets:v,b="auto"===e._overwrite&&!XC,x=e.timeline;if(x&&(!f||!s)&&(s="none"),e._ease=N3(s,y6.ease),e._yEase=d?jW(N3(!0===d?s:d,y6.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!x&&!!i.runBackwards,!x||f&&!i.stagger){if(O=(j=v[0]?V3(v[0]).harness:0)&&i[j.prop],w=j9(i,iw),g&&(t<0&&h&&o&&!p?g.render(-1,!0):g.revert(h&&m?s8:JIe),g._lazy=0),r){if(U2(e._startAt=js.set(v,p1({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:ao(a),startAt:null,delay:0,onUpdate:c,onUpdateParams:l,callbackScope:u,stagger:0},r))),t<0&&(h1||!o&&!p)&&e._startAt.revert(s8),o&&m&&t<=0)return void(t&&(e._zTime=t))}else if(h&&m&&!g)if(t&&(o=!1),C=p1({overwrite:!1,data:"isFromStart",lazy:o&&ao(a),immediateRender:o,stagger:0,parent:_},w),O&&(C[j.prop]=O),U2(e._startAt=js.set(v,C)),t<0&&(h1?e._startAt.revert(s8):e._startAt.render(-1,!0)),e._zTime=t,o){if(!t)return}else n(e._startAt,li);for(e._pt=e._ptCache=0,a=m&&ao(a)||a&&!m,L=0;L<v.length;L++){if(Q=(R=v[L])._gsap||aw(v)[L]._gsap,e._ptLookup[L]=G={},sw[Q.id]&&Jc.length&&W9(),k=y===v?L:y.indexOf(R),j&&!1!==(z=new j).init(R,O||w,e,k,y)&&(e._pt=D=new uo(e._pt,R,z.name,0,1,z.render,z,0,z.priority),z._props.forEach(function(B){G[B]=D}),z.priority&&(Y=1)),!j||O)for(C in w)No[C]&&(z=XW(C,w,e,k,R,y))?z.priority&&(Y=1):G[C]=D=gw.call(e,R,C,"get",w[C],k,y,0,i.stringFilter);e._op&&e._op[L]&&e.kill(R,e._op[L]),b&&e._pt&&(nl=e,ji.killTweensOf(R,G,e.globalTime(t)),N=!e.parent,nl=0),e._pt&&a&&(sw[Q.id]=1)}Y&&tj(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!N,f&&t<=0&&x.render(d1,!0,!0)},AHe=function(e,t,i,s){var o,a,r=t.ease||s||"power1.inOut";if(Cr(t))a=i[e]||(i[e]=[]),t.forEach(function(c,l){return a.push({t:l/(t.length-1)*100,v:c,e:r})});else for(o in t)a=i[o]||(i[o]=[]),"ease"===o||a.push({t:parseFloat(e),v:t[o],e:r})},d8=function(e,t,i,s,r){return rs(e)?e.call(t,i,s,r):sr(e)&&~e.indexOf("random(")?c8(e):e},ZW=ow+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",KW={};co(ZW+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return KW[n]=1});var js=function(n){function e(i,s,r,o){var a;"number"==typeof s&&(r.duration=s,s=r,r=null);var b,x,w,L,C,D,R,Y,c=(a=n.call(this,o?s:r8(s))||this).vars,l=c.duration,u=c.delay,h=c.immediateRender,d=c.stagger,f=c.overwrite,p=c.keyframes,m=c.defaults,g=c.scrollTrigger,v=c.yoyoEase,_=s.parent||ji,y=(Cr(i)||fW(i)?B2(i[0]):"length"in s)?[i]:g1(i);if(a._targets=y.length?aw(y):U9("GSAP target "+i+" not found. https://greensock.com",!Po.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,p||d||F9(l)||F9(u)){if(s=a.vars,(b=a.timeline=new lo({data:"nested",defaults:m||{},targets:_&&"nested"===_.data?_.vars.targets:y})).kill(),b.parent=b._dp=F2(a),b._start=0,d||F9(l)||F9(u)){if(L=y.length,R=d&&HW(d),Ha(d))for(C in d)~ZW.indexOf(C)&&(Y||(Y={}),Y[C]=d[C]);for(x=0;x<L;x++)(w=j9(s,KW)).stagger=0,v&&(w.yoyoEase=v),Y&&P3(w,Y),D=y[x],w.duration=+d8(l,F2(a),x,D,y),w.delay=(+d8(u,F2(a),x,D,y)||0)-a._delay,!d&&1===L&&w.delay&&(a._delay=u=w.delay,a._start+=u,w.delay=0),b.to(D,w,R?R(x,D,y):0),b._ease=wn.none;b.duration()?l=u=0:a.timeline=0}else if(p){r8(p1(b.vars.defaults,{ease:"none"})),b._ease=N3(p.ease||s.ease||"none");var j,z,G,Q=0;if(Cr(p))p.forEach(function(k){return b.to(y,k,">")}),b.duration();else{for(C in w={},p)"ease"===C||"easeEach"===C||AHe(C,p[C],w,p.easeEach);for(C in w)for(j=w[C].sort(function(k,O){return k.t-O.t}),Q=0,x=0;x<j.length;x++)(G={ease:(z=j[x]).e,duration:(z.t-(x?j[x-1].t:0))/100*l})[C]=z.v,b.to(y,G,Q),Q+=G.duration;b.duration()<l&&b.to({},{duration:l-b.duration()})}}l||a.duration(l=b.duration())}else a.timeline=0;return!0===f&&!XC&&(nl=F2(a),ji.killTweensOf(y),nl=0),Va(_,F2(a),r),s.reversed&&a.reverse(),s.paused&&a.paused(!0),(h||!l&&!p&&a._start===ur(_._time)&&ao(h)&&sHe(F2(a))&&"nested"!==_.data)&&(a._tTime=-li,a.render(Math.max(0,-u))),g&&LW(F2(a),g),a}uW(e,n);var t=e.prototype;return t.render=function(s,r,o){var d,f,p,m,g,v,_,y,b,a=this._time,c=this._tDur,l=this._dur,u=s<0,h=s>c-li&&!u?c:s<li?0:s;if(l){if(h!==this._tTime||!s||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(d=h,y=this.timeline,this._repeat){if(m=l+this._rDelay,this._repeat<-1&&u)return this.totalTime(100*m+s,r,o);if(d=ur(h%m),h===c?(p=this._repeat,d=l):((p=~~(h/m))&&p===h/m&&(d=l,p--),d>l&&(d=l)),(v=this._yoyo&&1&p)&&(b=this._yEase,d=l-d),g=M6(this._tTime,m),d===a&&!o&&this._initted)return this._tTime=h,this;p!==g&&(y&&this._yEase&&$W(y,v),this.vars.repeatRefresh&&!v&&!this._lock&&(this._lock=o=1,this.render(ur(m*p),!0).invalidate()._lock=0))}if(!this._initted){if(zW(this,u?s:d,o,r))return this._tTime=0,this;if(a!==this._time)return this;if(l!==this._dur)return this.render(s,r,o)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=_=(b||this._ease)(d/l),this._from&&(this.ratio=_=1-_),d&&!a&&!r&&(v1(this,"onStart"),this._tTime!==h))return this;for(f=this._pt;f;)f.r(_,f.d),f=f._next;y&&y.render(s<0?s:!d&&v?-li:y._dur*y._ease(d/this._dur),r,o)||this._startAt&&(this._zTime=s),this._onUpdate&&!r&&(u&&cw(this,s,0,o),v1(this,"onUpdate")),this._repeat&&p!==g&&this.vars.onRepeat&&!r&&this.parent&&v1(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&cw(this,s,0,!0),(s||!l)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&U2(this,1),!r&&(!u||a)&&(h||a)&&(v1(this,h===c?"onComplete":"onReverseComplete",!0),this._prom&&!(h<c&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,i,s){var l,u,h,r=e.ratio,o=t<0||!t&&(!e._start&&rHe(e)&&(e._initted||!lw(e))||(e._ts<0||e._dp._ts<0)&&!lw(e))?0:1,a=e._rDelay,c=0;if(a&&e._repeat&&(c=a8(0,e._tDur,t),u=M6(c,a),e._yoyo&&1&u&&(o=1-o),u!==M6(e._tTime,a)&&(r=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==r||h1||s||e._zTime===li||!t&&e._zTime){if(!e._initted&&zW(e,t,s,i))return;for(h=e._zTime,e._zTime=t||(i?li:0),i||(i=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=c,l=e._pt;l;)l.r(o,l.d),l=l._next;t<0&&cw(e,t,0,!0),e._onUpdate&&!i&&v1(e,"onUpdate"),c&&e._repeat&&!i&&e.parent&&v1(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&U2(e,1),!i&&!h1&&(v1(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,s,r,o);return this},t.targets=function(){return this._targets},t.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),n.prototype.invalidate.call(this)},t.resetTo=function(s,r,o,a){h8||Fo.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||_w(this,c),function(e,t,i,s,r,o,a){var l,u,h,d,c=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!c)for(c=e._ptCache[t]=[],h=e._ptLookup,d=e._targets.length;d--;){if((l=h[d][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return vw=1,e.vars[t]="+=0",_w(e,a),vw=0,1;c.push(l)}for(d=c.length;d--;)(l=(u=c[d])._pt||u).s=!s&&0!==s||r?l.s+(s||0)+o*l.c:s,l.c=i-l.s,u.e&&(u.e=ys(i)+wr(u.e)),u.b&&(u.b=l.s+wr(u.b))}(this,s,r,o,a,this._ease(c/this._dur),c)?this.resetTo(s,r,o,a):(X9(this,0),this.parent||EW(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(s,r){if(void 0===r&&(r="all"),!(s||r&&"all"!==r))return this._lazy=this._pt=0,this.parent?l8(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(s,r,nl&&!0!==nl.vars.overwrite)._first||l8(this),this.parent&&o!==this.timeline.totalDuration()&&C6(this,this._dur*this.timeline._tDur/o,0,1),this}var h,d,f,p,m,g,v,a=this._targets,c=s?g1(s):a,l=this._ptLookup,u=this._pt;if((!r||"all"===r)&&function(e,t){for(var i=e.length,s=i===t.length;s&&i--&&e[i]===t[i];);return i<0}(a,c))return"all"===r&&(this._pt=0),l8(this);for(h=this._op=this._op||[],"all"!==r&&(sr(r)&&(m={},co(r,function(_){return m[_]=1}),r=m),r=function(e,t){var r,o,a,c,i=e[0]?V3(e[0]).harness:0,s=i&&i.aliases;if(!s)return t;for(o in r=P3({},t),s)if(o in r)for(a=(c=s[o].split(",")).length;a--;)r[c[a]]=r[o];return r}(a,r)),v=a.length;v--;)if(~c.indexOf(a[v]))for(m in d=l[v],"all"===r?(h[v]=r,p=d,f={}):(f=h[v]=h[v]||{},p=r),p)(g=d&&d[m])&&((!("kill"in g.d)||!0===g.d.kill(m))&&$9(this,g,"_pt"),delete d[m]),"all"!==f&&(f[m]=1);return this._initted&&!this._pt&&u&&l8(this),this},e.to=function(s,r){return new e(s,r,arguments[2])},e.from=function(s,r){return o8(1,arguments)},e.delayedCall=function(s,r,o,a){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:r,onReverseComplete:r,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(s,r,o){return o8(2,arguments)},e.set=function(s,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(s,r)},e.killTweensOf=function(s,r,o){return ji.killTweensOf(s,r,o)},e}(T6);p1(js.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),co("staggerTo,staggerFrom,staggerFromTo",function(n){js[n]=function(){var e=new lo,t=uw.call(arguments,0);return t.splice("staggerFromTo"===n?5:4,0,0),e[n].apply(e,t)}});var yw=function(e,t,i){return e[t]=i},QW=function(e,t,i){return e[t](i)},DHe=function(e,t,i,s){return e[t](s.fp,i)},LHe=function(e,t,i){return e.setAttribute(t,i)},bw=function(e,t){return rs(e[t])?QW:KC(e[t])&&e.setAttribute?LHe:yw},JW=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},zHe=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},ej=function(e,t){var i=t._pt,s="";if(!e&&t.b)s=t.b;else if(1===e&&t.e)s=t.e;else{for(;i;)s=i.p+(i.m?i.m(i.s+i.c*e):Math.round(1e4*(i.s+i.c*e))/1e4)+s,i=i._next;s+=t.c}t.set(t.t,t.p,s,t)},xw=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},kHe=function(e,t,i,s){for(var o,r=this._pt;r;)o=r._next,r.p===s&&r.modifier(e,t,i),r=o},RHe=function(e){for(var i,s,t=this._pt;t;)s=t._next,t.p===e&&!t.op||t.op===e?$9(this,t,"_pt"):t.dep||(i=1),t=s;return!i},IHe=function(e,t,i,s){s.mSet(e,t,s.m.call(s.tween,i,s.mt),s)},tj=function(e){for(var i,s,r,o,t=e._pt;t;){for(i=t._next,s=r;s&&s.pr>t.pr;)s=s._next;(t._prev=s?s._prev:o)?t._prev._next=t:r=t,(t._next=s)?s._prev=t:o=t,t=i}e._pt=r},uo=function(){function n(t,i,s,r,o,a,c,l,u){this.t=i,this.s=r,this.c=o,this.p=s,this.r=a||JW,this.d=c||this,this.set=l||yw,this.pr=u||0,this._next=t,t&&(t._prev=this)}return n.prototype.modifier=function(i,s,r){this.mSet=this.mSet||this.set,this.set=IHe,this.m=i,this.mt=r,this.tween=s},n}();co(ow+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return iw[n]=1}),Oo.TweenMax=Oo.TweenLite=js,Oo.TimelineLite=Oo.TimelineMax=lo,ji=new lo({sortChildren:!1,defaults:y6,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Po.stringFilter=WW;var E6=[],Z9={},HHe=[],nj=0,Mw=function(e){return(Z9[e]||HHe).map(function(t){return t()})},Cw=function(){var e=Date.now(),t=[];e-nj>2&&(Mw("matchMediaInit"),E6.forEach(function(i){var o,a,c,l,s=i.queries,r=i.conditions;for(a in s)(o=f1.matchMedia(s[a]).matches)&&(c=1),o!==r[a]&&(r[a]=o,l=1);l&&(i.revert(),c&&t.push(i))}),Mw("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i)}),nj=e,Mw("matchMedia"))},ij=function(){function n(t,i){this.selector=i&&hw(i),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=n.prototype;return e.add=function(i,s,r){rs(i)&&(r=s,s=i,i=rs);var o=this,a=function(){var h,l=ks,u=o.selector;return l&&l!==o&&l.data.push(o),r&&(o.selector=hw(r)),ks=o,h=s.apply(o,arguments),rs(h)&&o._r.push(h),ks=l,o.selector=u,o.isReverted=!1,h};return o.last=a,i===rs?a(o):i?o[i]=a:a},e.ignore=function(i){var s=ks;ks=null,i(this),ks=s},e.getTweens=function(){var i=[];return this.data.forEach(function(s){return s instanceof n?i.push.apply(i,s.getTweens()):s instanceof js&&i.push(s)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,s){var r=this;if(i?(this.getTweens().map(function(a){return{g:a.globalTime(0),t:a}}).sort(function(a,c){return c.g-a.g||-1}).forEach(function(a){return a.t.revert(i)}),this.data.forEach(function(a){return!(a instanceof T6)&&a.revert&&a.revert(i)}),this._r.forEach(function(a){return a(i,r)}),this.isReverted=!0):this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),s){var o=E6.indexOf(this);~o&&E6.splice(o,1)}},e.revert=function(i){this.kill(i||{})},n}(),VHe=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(i,s,r){Ha(i)||(i={matches:i});var c,l,u,o=new ij(0,r||this.scope),a=o.conditions={};for(l in this.contexts.push(o),s=o.add("onMatch",s),o.queries=i,i)"all"===l?u=1:(c=f1.matchMedia(i[l]))&&(E6.indexOf(o)<0&&E6.push(o),(a[l]=c.matches)&&(u=1),c.addListener?c.addListener(Cw):c.addEventListener("change",Cw));return u&&s(o),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(s){return s.kill(i,!0)})},n}(),K9={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(s){return vHe(s)})},timeline:function(e){return new lo(e)},getTweensOf:function(e,t){return ji.getTweensOf(e,t)},getProperty:function(e,t,i,s){sr(e)&&(e=g1(e)[0]);var r=V3(e||{}).get,o=i?SW:wW;return"native"===i&&(i=""),e&&(t?o((No[t]&&No[t].get||r)(e,t,i,s)):function(a,c,l){return o((No[a]&&No[a].get||r)(e,a,c,l))})},quickSetter:function(e,t,i){if((e=g1(e)).length>1){var s=e.map(function(u){return Bo.quickSetter(u,t,i)}),r=s.length;return function(u){for(var h=r;h--;)s[h](u)}}var o=No[t],a=V3(e=e[0]||{}),c=a.harness&&(a.harness.aliases||{})[t]||t,l=o?function(u){var h=new o;w6._pt=0,h.init(e,i?u+i:u,w6,0,[e]),h.render(1,h),w6._pt&&xw(1,w6)}:a.set(e,c);return o?l:function(u){return l(e,c,i?u+i:u,a,1)}},quickTo:function(e,t,i){var s,r=Bo.to(e,P3(((s={})[t]="+=0.1",s.paused=!0,s),i||{})),o=function(c,l,u){return r.resetTo(t,c,l,u)};return o.tween=r,o},isTweening:function(e){return ji.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=N3(e.ease,y6.ease)),TW(y6,e||{})},config:function(e){return TW(Po,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.defaults,o=e.extendTimeline;(e.plugins||"").split(",").forEach(function(a){return a&&!No[a]&&!Oo[a]&&U9(t+" effect requires "+a+" plugin.")}),rw[t]=function(a,c,l){return i(g1(a),p1(c||{},r),l)},o&&(lo.prototype[t]=function(a,c,l){return this.add(rw[t](a,Ha(c)?c:(l=c)&&{},this),l)})},registerEase:function(e,t){wn[e]=N3(t)},parseEase:function(e,t){return arguments.length?N3(e,t):wn},getById:function(e){return ji.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var s,r,i=new lo(e);for(i.smoothChildTiming=ao(e.smoothChildTiming),ji.remove(i),i._dp=0,i._time=i._tTime=ji._time,s=ji._first;s;)r=s._next,(t||!(!s._dur&&s instanceof js&&s.vars.onComplete===s._targets[0]))&&Va(i,s,s._start-s._delay),s=r;return Va(ji,i,0),i},context:function(e,t){return e?new ij(e,t):ks},matchMedia:function(e){return new VHe(e)},matchMediaRefresh:function(){return E6.forEach(function(e){var i,s,t=e.conditions;for(s in t)t[s]&&(t[s]=!1,i=1);i&&e.revert()})||Cw()},addEventListener:function(e,t){var i=Z9[e]||(Z9[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=Z9[e],s=i&&i.indexOf(t);s>=0&&i.splice(s,1)},utils:{wrap:function n(e,t,i){var s=t-e;return Cr(e)?OW(e,n(0,e.length),t):el(i,function(r){return(s+(r-e)%s)%s+e})},wrapYoyo:function n(e,t,i){var s=t-e,r=2*s;return Cr(e)?OW(e,n(0,e.length-1),t):el(i,function(o){return e+((o=(r+(o-e)%r)%r||0)>s?r-o:o)})},distribute:HW,random:PW,snap:VW,normalize:function(e,t,i){return NW(e,t,0,1,i)},getUnit:wr,clamp:function(e,t,i){return el(i,function(s){return a8(e,t,s)})},splitColor:BW,toArray:g1,selector:hw,mapRange:NW,pipe:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(s){return t.reduce(function(r,o){return o(r)},s)}},unitize:function(e,t){return function(i){return e(parseFloat(i))+(t||wr(i))}},interpolate:function n(e,t,i,s){var r=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!r){var c,l,u,h,d,o=sr(e),a={};if(!0===i&&(s=1)&&(i=null),o)e={p:e},t={p:t};else if(Cr(e)&&!Cr(t)){for(u=[],d=(h=e.length)-2,l=1;l<h;l++)u.push(n(e[l-1],e[l]));h--,r=function(p){p*=h;var m=Math.min(d,~~p);return u[m](p-m)},i=t}else s||(e=P3(Cr(e)?[]:{},e));if(!u){for(c in t)gw.call(a,e,c,"get",t[c]);r=function(p){return xw(p,a)||(o?e.p:e)}}}return el(i,r)},shuffle:IW},install:_W,effects:rw,ticker:Fo,updateRoot:lo.updateRoot,plugins:No,globalTimeline:ji,core:{PropTween:uo,globals:yW,Tween:js,Timeline:lo,Animation:T6,getCache:V3,_removeLinkedListItem:$9,reverting:function(){return h1},context:function(e){return e&&ks&&(ks.data.push(e),e._ctx=ks),ks},suppressOverwrites:function(e){return XC=e}}};co("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return K9[n]=js[n]}),Fo.add(lo.updateRoot),w6=K9.to({},{duration:0});var PHe=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},ww=function(e,t){return{name:e,rawVars:1,init:function(s,r,o){o._onInit=function(a){var c,l;if(sr(r)&&(c={},co(r,function(u){return c[u]=1}),r=c),t){for(l in c={},r)c[l]=t(r[l]);r=c}!function(e,t){var s,r,o,i=e._targets;for(s in t)for(r=i.length;r--;)(o=e._ptLookup[r][s])&&(o=o.d)&&(o._pt&&(o=PHe(o,s)),o&&o.modifier&&o.modifier(t[s],e,i[r],s))}(a,r)}}}},Bo=K9.registerPlugin({name:"attr",init:function(e,t,i,s,r){var o,a,c;for(o in this.tween=i,t)c=e.getAttribute(o)||"",(a=this.add(e,"setAttribute",(c||0)+"",t[o],s,r,0,0,o)).op=o,a.b=c,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)h1?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},ww("roundProps",dw),ww("modifiers"),ww("snap",VW))||K9;js.version=lo.version=Bo.version="3.11.1",vW=1,dW()&&S6();var sj,il,A6,Sw,B3,rj,Tw,hj,G2={},U3=180/Math.PI,D6=Math.PI/180,L6=Math.atan2,oj=1e8,Ew=/([A-Z])/g,BHe=/(left|right|width|margin|padding|x)/i,UHe=/[\s,\(]\S/,W2={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Aw=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},GHe=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},WHe=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},jHe=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},aj=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},cj=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},$He=function(e,t,i){return e.style[t]=i},qHe=function(e,t,i){return e.style.setProperty(t,i)},YHe=function(e,t,i){return e._gsap[t]=i},XHe=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},ZHe=function(e,t,i,s,r){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(r,o)},KHe=function(e,t,i,s,r){var o=e._gsap;o[t]=i,o.renderTransform(r,o)},os="transform",X1=os+"Origin",QHe=function(e){var t=this,i=this.target,s=i.style;if(e in G2){if(this.tfm=this.tfm||{},"transform"!==e&&(~(e=W2[e]||e).indexOf(",")?e.split(",").forEach(function(r){return t.tfm[r]=j2(i,r)}):this.tfm[e]=i._gsap.x?i._gsap[e]:j2(i,e)),this.props.indexOf(os)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(X1,"")),e=os}s&&this.props.push(e,s[e])},lj=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},JHe=function(){var r,o,e=this.props,t=this.target,i=t.style,s=t._gsap;for(r=0;r<e.length;r+=2)e[r+1]?i[e[r]]=e[r+1]:i.removeProperty(e[r].replace(Ew,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)s[o]=this.tfm[o];s.svg&&(s.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),(r=Tw())&&!r.isStart&&!i[os]&&(lj(i),s.uncache=1)}},uj=function(e,t){var i={target:e,props:[],revert:JHe,save:QHe};return t&&t.split(",").forEach(function(s){return i.save(s)}),i},Dw=function(e,t){var i=il.createElementNS?il.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):il.createElement(e);return i.style?i:il.createElement(e)},Pa=function n(e,t,i){var s=getComputedStyle(e);return s[t]||s.getPropertyValue(t.replace(Ew,"-$1").toLowerCase())||s.getPropertyValue(t)||!i&&n(e,z6(t)||t,1)||""},dj="O,Moz,ms,Ms,Webkit".split(","),z6=function(e,t,i){var r=(t||B3).style,o=5;if(e in r&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(dj[o]+e in r););return o<0?null:(3===o?"ms":o>=0?dj[o]:"")+e},Lw=function(){typeof window<"u"&&window.document&&(sj=window,A6=(il=sj.document).documentElement,B3=Dw("div")||{style:{}},Dw("div"),os=z6(os),X1=os+"Origin",B3.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",hj=!!z6("perspective"),Tw=Bo.core.reverting,Sw=1)},zw=function n(e){var o,t=Dw("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,r=this.style.cssText;if(A6.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),A6.removeChild(t),this.style.cssText=r,o},fj=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},pj=function(e){var t;try{t=e.getBBox()}catch{t=zw.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===zw||(t=zw.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+fj(e,["x","cx","x1"])||0,y:+fj(e,["y","cy","y1"])||0,width:0,height:0}},mj=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!pj(e))},f8=function(e,t){if(t){var i=e.style;t in G2&&t!==X1&&(t=os),i.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),i.removeProperty(t.replace(Ew,"-$1").toLowerCase())):i.removeAttribute(t)}},sl=function(e,t,i,s,r,o){var a=new uo(e._pt,t,i,0,1,o?cj:aj);return e._pt=a,a.b=s,a.e=r,e._props.push(i),a},gj={deg:1,rad:1,turn:1},eVe={grid:1,flex:1},rl=function n(e,t,i,s){var p,m,g,v,r=parseFloat(i)||0,o=(i+"").trim().substr((r+"").length)||"px",a=B3.style,c=BHe.test(t),l="svg"===e.tagName.toLowerCase(),u=(l?"client":"offset")+(c?"Width":"Height"),h=100,d="px"===s,f="%"===s;return s===o||!r||gj[s]||gj[o]?r:("px"!==o&&!d&&(r=n(e,t,i,"px")),v=e.getCTM&&mj(e),!f&&"%"!==o||!G2[t]&&!~t.indexOf("adius")?(a[c?"width":"height"]=h+(d?o:s),m=~t.indexOf("adius")||"em"===s&&e.appendChild&&!l?e:e.parentNode,v&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===il||!m.appendChild)&&(m=il.body),(g=m._gsap)&&f&&g.width&&c&&g.time===Fo.time&&!g.uncache?ys(r/g.width*h):((f||"%"===o)&&!eVe[Pa(m,"display")]&&(a.position=Pa(e,"position")),m===e&&(a.position="static"),m.appendChild(B3),p=B3[u],m.removeChild(B3),a.position="absolute",c&&f&&((g=V3(m)).time=Fo.time,g.width=m[u]),ys(d?p*r/h:p&&r?h/p*r:0))):(p=v?e.getBBox()[c?"width":"height"]:e[u],ys(f?r/p*h:r/100*p)))},j2=function(e,t,i,s){var r;return Sw||Lw(),t in W2&&"transform"!==t&&~(t=W2[t]).indexOf(",")&&(t=t.split(",")[0]),G2[t]&&"transform"!==t?(r=m8(e,s),r="transformOrigin"!==t?r[t]:r.svg?r.origin:J9(Pa(e,X1))+" "+r.zOrigin+"px"):(!(r=e.style[t])||"auto"===r||s||~(r+"").indexOf("calc("))&&(r=Q9[t]&&Q9[t](e,t,i)||Pa(e,t)||MW(e,t)||("opacity"===t?1:0)),i&&!~(r+"").trim().indexOf(" ")?rl(e,t,r,i)+i:r},tVe=function(e,t,i,s){if(!i||"none"===i){var r=z6(t,e,1),o=r&&Pa(e,r,1);o&&o!==i?(t=r,i=o):"borderColor"===t&&(i=Pa(e,"borderTopColor"))}var u,h,d,f,p,m,g,v,_,y,b,a=new uo(this._pt,e.style,t,0,1,ej),c=0,l=0;if(a.b=i,a.e=s,i+="","auto"==(s+="")&&(e.style[t]=s,s=Pa(e,t)||s,e.style[t]=i),WW(u=[i,s]),s=u[1],d=(i=u[0]).match(b6)||[],(s.match(b6)||[]).length){for(;h=b6.exec(s);)g=h[0],_=s.substring(c,h.index),p?p=(p+1)%5:("rgba("===_.substr(-5)||"hsla("===_.substr(-5))&&(p=1),g!==(m=d[l++]||"")&&(f=parseFloat(m)||0,b=m.substr((f+"").length),"="===g.charAt(1)&&(g=x6(f,g)+b),v=parseFloat(g),y=g.substr((v+"").length),c=b6.lastIndex-y.length,y||(y=y||Po.units[t]||b,c===s.length&&(s+=y,a.e+=y)),b!==y&&(f=rl(e,t,m,y)||0),a._pt={_next:a._pt,p:_||1===l?_:",",s:f,c:v-f,m:p&&p<4||"zIndex"===t?Math.round:0});a.c=c<s.length?s.substring(c,s.length):""}else a.r="display"===t&&"none"===s?cj:aj;return mW.test(s)&&(a.e=0),this._pt=a,a},vj={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},nVe=function(e){var t=e.split(" "),i=t[0],s=t[1]||"50%";return("top"===i||"bottom"===i||"left"===s||"right"===s)&&(e=i,i=s,s=e),t[0]=vj[i]||i,t[1]=vj[s]||s,t.join(" ")},iVe=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var a,c,l,i=t.t,s=i.style,r=t.u,o=i._gsap;if("all"===r||!0===r)s.cssText="",c=1;else for(l=(r=r.split(",")).length;--l>-1;)G2[a=r[l]]&&(c=1,a="transformOrigin"===a?X1:os),f8(i,a);c&&(f8(i,os),o&&(o.svg&&i.removeAttribute("transform"),m8(i,1),o.uncache=1,lj(s)))}},Q9={clearProps:function(e,t,i,s,r){if("isFromStart"!==r.data){var o=e._pt=new uo(e._pt,t,i,0,0,iVe);return o.u=s,o.pr=-10,o.tween=r,e._props.push(i),1}}},p8=[1,0,0,1,0,0],_j={},yj=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},bj=function(e){var t=Pa(e,os);return yj(t)?p8:t.substr(7).match(pW).map(ys)},kw=function(e,t){var o,a,c,l,i=e._gsap||V3(e),s=e.style,r=bj(e);return i.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(r=[(c=e.transform.baseVal.consolidate().matrix).a,c.b,c.c,c.d,c.e,c.f]).join(",")?p8:r:(r===p8&&!e.offsetParent&&e!==A6&&!i.svg&&(c=s.display,s.display="block",(!(o=e.parentNode)||!e.offsetParent)&&(l=1,a=e.nextElementSibling,A6.appendChild(e)),r=bj(e),c?s.display=c:f8(e,"display"),l&&(a?o.insertBefore(e,a):o?o.appendChild(e):A6.removeChild(e))),t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},Rw=function(e,t,i,s,r,o){var w,L,D,a=e._gsap,c=r||kw(e,!0),l=a.xOrigin||0,u=a.yOrigin||0,h=a.xOffset||0,d=a.yOffset||0,f=c[0],p=c[1],m=c[2],g=c[3],v=c[4],_=c[5],y=t.split(" "),b=parseFloat(y[0])||0,x=parseFloat(y[1])||0;i?c!==p8&&(L=f*g-p*m)&&(D=b*(-p/L)+x*(f/L)-(f*_-p*v)/L,b=b*(g/L)+x*(-m/L)+(m*_-g*v)/L,x=D):(b=(w=pj(e)).x+(~y[0].indexOf("%")?b/100*w.width:b),x=w.y+(~(y[1]||y[0]).indexOf("%")?x/100*w.height:x)),s||!1!==s&&a.smooth?(a.xOffset=h+((v=b-l)*f+(_=x-u)*m)-v,a.yOffset=d+(v*p+_*g)-_):a.xOffset=a.yOffset=0,a.xOrigin=b,a.yOrigin=x,a.smooth=!!s,a.origin=t,a.originIsAbsolute=!!i,e.style[X1]="0px 0px",o&&(sl(o,a,"xOrigin",l,b),sl(o,a,"yOrigin",u,x),sl(o,a,"xOffset",h,a.xOffset),sl(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",b+" "+x)},m8=function(e,t){var i=e._gsap||new YW(e);if("x"in i&&!t&&!i.uncache)return i;var u,h,d,f,p,m,g,v,_,y,b,x,w,L,C,D,R,Y,Q,j,z,G,k,O,N,B,q,ne,$,ye,oe,De,s=e.style,r=i.scaleX<0,o="px",a="deg",c=getComputedStyle(e),l=Pa(e,X1)||"0";return u=h=d=m=g=v=_=y=b=0,f=p=1,i.svg=!(!e.getCTM||!mj(e)),c.translate&&(("none"!==c.translate||"none"!==c.scale||"none"!==c.rotate)&&(s[os]=("none"!==c.translate?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==c.rotate?"rotate("+c.rotate+") ":"")+("none"!==c.scale?"scale("+c.scale.split(" ").join(",")+") ":"")+c[os]),s.scale=s.rotate=s.translate="none"),L=kw(e,i.svg),i.svg&&(i.uncache?(N=e.getBBox(),l=i.xOrigin-N.x+"px "+(i.yOrigin-N.y)+"px",O=""):O=!t&&e.getAttribute("data-svg-origin"),Rw(e,O||l,!!O||i.originIsAbsolute,!1!==i.smooth,L)),x=i.xOrigin||0,w=i.yOrigin||0,L!==p8&&(Y=L[0],Q=L[1],j=L[2],z=L[3],u=G=L[4],h=k=L[5],6===L.length?(f=Math.sqrt(Y*Y+Q*Q),p=Math.sqrt(z*z+j*j),m=Y||Q?L6(Q,Y)*U3:0,(_=j||z?L6(j,z)*U3+m:0)&&(p*=Math.abs(Math.cos(_*D6))),i.svg&&(u-=x-(x*Y+w*j),h-=w-(x*Q+w*z))):(ye=L[7],q=L[8],ne=L[9],oe=L[11],u=L[12],h=L[13],d=L[14],g=(C=L6(De=L[6],$=L[10]))*U3,C&&(O=G*(D=Math.cos(-C))+q*(R=Math.sin(-C)),N=k*D+ne*R,B=De*D+$*R,q=G*-R+q*D,ne=k*-R+ne*D,$=De*-R+$*D,oe=ye*-R+oe*D,G=O,k=N,De=B),v=(C=L6(-j,$))*U3,C&&(D=Math.cos(-C),oe=z*(R=Math.sin(-C))+oe*D,Y=O=Y*D-q*R,Q=N=Q*D-ne*R,j=B=j*D-$*R),m=(C=L6(Q,Y))*U3,C&&(O=Y*(D=Math.cos(C))+Q*(R=Math.sin(C)),N=G*D+k*R,Q=Q*D-Y*R,k=k*D-G*R,Y=O,G=N),g&&Math.abs(g)+Math.abs(m)>359.9&&(g=m=0,v=180-v),f=ys(Math.sqrt(Y*Y+Q*Q+j*j)),p=ys(Math.sqrt(k*k+De*De)),C=L6(G,k),_=Math.abs(C)>2e-4?C*U3:0,b=oe?1/(oe<0?-oe:oe):0),i.svg&&(O=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!yj(Pa(e,os)),O&&e.setAttribute("transform",O))),Math.abs(_)>90&&Math.abs(_)<270&&(r?(f*=-1,_+=m<=0?180:-180,m+=m<=0?180:-180):(p*=-1,_+=_<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=h-((i.yPercent=h&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=d+o,i.scaleX=ys(f),i.scaleY=ys(p),i.rotation=ys(m)+a,i.rotationX=ys(g)+a,i.rotationY=ys(v)+a,i.skewX=_+a,i.skewY=y+a,i.transformPerspective=b+o,(i.zOrigin=parseFloat(l.split(" ")[2])||0)&&(s[X1]=J9(l)),i.xOffset=i.yOffset=0,i.force3D=Po.force3D,i.renderTransform=i.svg?rVe:hj?xj:sVe,i.uncache=0,i},J9=function(e){return(e=e.split(" "))[0]+" "+e[1]},Iw=function(e,t,i){var s=wr(t);return ys(parseFloat(t)+parseFloat(rl(e,"x",i+"px",s)))+s},sVe=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,xj(e,t)},G3="0deg",g8="0px",W3=") ",xj=function(e,t){var i=t||this,s=i.xPercent,r=i.yPercent,o=i.x,a=i.y,c=i.z,l=i.rotation,u=i.rotationY,h=i.rotationX,d=i.skewX,f=i.skewY,p=i.scaleX,m=i.scaleY,g=i.transformPerspective,v=i.force3D,_=i.target,y=i.zOrigin,b="",x="auto"===v&&e&&1!==e||!0===v;if(y&&(h!==G3||u!==G3)){var D,w=parseFloat(u)*D6,L=Math.sin(w),C=Math.cos(w);w=parseFloat(h)*D6,D=Math.cos(w),o=Iw(_,o,L*D*-y),a=Iw(_,a,-Math.sin(w)*-y),c=Iw(_,c,C*D*-y+y)}g!==g8&&(b+="perspective("+g+W3),(s||r)&&(b+="translate("+s+"%, "+r+"%) "),(x||o!==g8||a!==g8||c!==g8)&&(b+=c!==g8||x?"translate3d("+o+", "+a+", "+c+") ":"translate("+o+", "+a+W3),l!==G3&&(b+="rotate("+l+W3),u!==G3&&(b+="rotateY("+u+W3),h!==G3&&(b+="rotateX("+h+W3),(d!==G3||f!==G3)&&(b+="skew("+d+", "+f+W3),(1!==p||1!==m)&&(b+="scale("+p+", "+m+W3),_.style[os]=b||"translate(0, 0)"},rVe=function(e,t){var x,w,L,C,D,i=t||this,s=i.xPercent,r=i.yPercent,o=i.x,a=i.y,c=i.rotation,l=i.skewX,u=i.skewY,h=i.scaleX,d=i.scaleY,f=i.target,p=i.xOrigin,m=i.yOrigin,g=i.xOffset,v=i.yOffset,_=i.forceCSS,y=parseFloat(o),b=parseFloat(a);c=parseFloat(c),l=parseFloat(l),(u=parseFloat(u))&&(l+=u=parseFloat(u),c+=u),c||l?(c*=D6,l*=D6,x=Math.cos(c)*h,w=Math.sin(c)*h,L=Math.sin(c-l)*-d,C=Math.cos(c-l)*d,l&&(u*=D6,D=Math.tan(l-u),L*=D=Math.sqrt(1+D*D),C*=D,u&&(D=Math.tan(u),x*=D=Math.sqrt(1+D*D),w*=D)),x=ys(x),w=ys(w),L=ys(L),C=ys(C)):(x=h,C=d,w=L=0),(y&&!~(o+"").indexOf("px")||b&&!~(a+"").indexOf("px"))&&(y=rl(f,"x",o,"px"),b=rl(f,"y",a,"px")),(p||m||g||v)&&(y=ys(y+p-(p*x+m*L)+g),b=ys(b+m-(p*w+m*C)+v)),(s||r)&&(D=f.getBBox(),y=ys(y+s/100*D.width),b=ys(b+r/100*D.height)),f.setAttribute("transform",D="matrix("+x+","+w+","+L+","+C+","+y+","+b+")"),_&&(f.style[os]=D)},oVe=function(e,t,i,s,r){var h,d,o=360,a=sr(r),l=parseFloat(r)*(a&&~r.indexOf("rad")?U3:1)-s,u=s+l+"deg";return a&&("short"===(h=r.split("_")[1])&&(l%=o)!=l%180&&(l+=l<0?o:-o),"cw"===h&&l<0?l=(l+o*oj)%o-~~(l/o)*o:"ccw"===h&&l>0&&(l=(l-o*oj)%o-~~(l/o)*o)),e._pt=d=new uo(e._pt,t,i,s,l,GHe),d.e=u,d.u="deg",e._props.push(i),d},Mj=function(e,t){for(var i in t)e[i]=t[i];return e},aVe=function(e,t,i){var a,c,l,u,h,d,p,s=Mj({},i._gsap),o=i.style;for(c in s.svg?(l=i.getAttribute("transform"),i.setAttribute("transform",""),o[os]=t,a=m8(i,1),f8(i,os),i.setAttribute("transform",l)):(l=getComputedStyle(i)[os],o[os]=t,a=m8(i,1),o[os]=l),G2)(l=s[c])!==(u=a[c])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(c)<0&&(h=wr(l)!==(p=wr(u))?rl(i,c,l,p):parseFloat(l),d=parseFloat(u),e._pt=new uo(e._pt,a,c,h,d-h,Aw),e._pt.u=p||0,e._props.push(c));Mj(a,s)};co("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",s="Bottom",r="Left",o=(e<3?[t,i,s,r]:[t+r,t+i,s+i,s+r]).map(function(a){return e<2?n+a:"border"+a+n});Q9[e>1?"border"+n:n]=function(a,c,l,u,h){var d,f;if(arguments.length<4)return d=o.map(function(p){return j2(a,p,l)}),5===(f=d.join(" ")).split(d[0]).length?d[0]:f;d=(u+"").split(" "),f={},o.forEach(function(p,m){return f[p]=d[m]=d[m]||d[(m-1)/2|0]}),a.init(c,f,h)}});var Cj={name:"css",register:Lw,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,s,r){var l,u,h,d,f,p,m,g,v,_,y,b,x,w,L,C,o=this._props,a=e.style,c=i.vars.startAt;for(m in Sw||Lw(),this.styles=this.styles||uj(e),C=this.styles.props,this.tween=i,t)if("autoRound"!==m&&(u=t[m],!No[m]||!XW(m,t,i,s,e,r)))if(p=Q9[m],"function"==(f=typeof u)&&(f=typeof(u=u.call(i,s,e,r))),"string"===f&&~u.indexOf("random(")&&(u=c8(u)),p)p(this,e,m,u,i)&&(L=1);else if("--"===m.substr(0,2))l=(getComputedStyle(e).getPropertyValue(m)+"").trim(),u+="",tl.lastIndex=0,tl.test(l)||(g=wr(l),v=wr(u)),v?g!==v&&(l=rl(e,m,l,v)+v):g&&(u+=g),this.add(a,"setProperty",l,u,s,r,0,0,m),o.push(m),C.push(m,a[m]);else if("undefined"!==f){if(c&&m in c?(l="function"==typeof c[m]?c[m].call(i,s,e,r):c[m],sr(l)&&~l.indexOf("random(")&&(l=c8(l)),wr(l+"")||(l+=Po.units[m]||wr(j2(e,m))||""),"="===(l+"").charAt(1)&&(l=j2(e,m))):l=j2(e,m),d=parseFloat(l),(_="string"===f&&"="===u.charAt(1)&&u.substr(0,2))&&(u=u.substr(2)),h=parseFloat(u),m in W2&&("autoAlpha"===m&&(1===d&&"hidden"===j2(e,"visibility")&&h&&(d=0),C.push("visibility",a.visibility),sl(this,a,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),"scale"!==m&&"transform"!==m&&~(m=W2[m]).indexOf(",")&&(m=m.split(",")[0])),y=m in G2)if(this.styles.save(m),b||((x=e._gsap).renderTransform&&!t.parseTransform||m8(e,t.parseTransform),w=!1!==t.smoothOrigin&&x.smooth,(b=this._pt=new uo(this._pt,a,os,0,1,x.renderTransform,x,0,-1)).dep=1),"scale"===m)this._pt=new uo(this._pt,x,"scaleY",x.scaleY,(_?x6(x.scaleY,_+h):h)-x.scaleY||0,Aw),this._pt.u=0,o.push("scaleY",m),m+="X";else{if("transformOrigin"===m){C.push(X1,a[X1]),u=nVe(u),x.svg?Rw(e,u,0,w,0,this):((v=parseFloat(u.split(" ")[2])||0)!==x.zOrigin&&sl(this,x,"zOrigin",x.zOrigin,v),sl(this,a,m,J9(l),J9(u)));continue}if("svgOrigin"===m){Rw(e,u,1,w,0,this);continue}if(m in _j){oVe(this,x,m,d,_?x6(d,_+u):u);continue}if("smoothOrigin"===m){sl(this,x,"smooth",x.smooth,u);continue}if("force3D"===m){x[m]=u;continue}if("transform"===m){aVe(this,u,e);continue}}else m in a||(m=z6(m)||m);if(y||(h||0===h)&&(d||0===d)&&!UHe.test(u)&&m in a)h||(h=0),(g=(l+"").substr((d+"").length))!==(v=wr(u)||(m in Po.units?Po.units[m]:g))&&(d=rl(e,m,l,v)),this._pt=new uo(this._pt,y?x:a,m,d,(_?x6(d,_+h):h)-d,y||"px"!==v&&"zIndex"!==m||!1===t.autoRound?Aw:jHe),this._pt.u=v||0,g!==v&&"%"!==v&&(this._pt.b=l,this._pt.r=WHe);else if(m in a)tVe.call(this,e,m,l,_?_+u:u);else{if(!(m in e)){nw(m,u);continue}this.add(e,m,l||e[m],_?_+u:u,s,r)}y||C.push(m,a[m]),o.push(m)}L&&tj(this)},render:function(e,t){if(t.tween._time||!Tw())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:j2,aliases:W2,getSetter:function(e,t,i){var s=W2[t];return s&&s.indexOf(",")<0&&(t=s),t in G2&&t!==X1&&(e._gsap.x||j2(e,"x"))?i&&rj===i?"scale"===t?XHe:YHe:(rj=i||{})&&("scale"===t?ZHe:KHe):e.style&&!KC(e.style[t])?$He:~t.indexOf("-")?qHe:bw(e,t)},core:{_removeProperty:f8,_getMatrix:kw}};Bo.utils.checkPrefix=z6,Bo.core.getStyleSaver=uj,function(n,e,t,i){var s=co(n+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(r){G2[r]=1});co(e,function(r){Po.units[r]="deg",_j[r]=1}),W2[s[13]]=n+","+e,co("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(r){var o=r.split(":");W2[o[1]]=s[o[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),co("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Po.units[n]="px"}),Bo.registerPlugin(Cj);var j3=Bo.registerPlugin(Cj)||Bo;const Na=1e3,jr=1001,V6=1002,Rs=1003,as=1006,al=1008,X3=1009,Z3=1014,cl=1015,P6=1016,O6=1020,K1=1023,K3=1026,N6=1027,y8=2300,F6=2301,ll=3e3,Zn=3001,$2="srgb",Q3="srgb-linear";class J3{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const s=this._listeners[e];if(void 0!==s){const r=s.indexOf(t);-1!==r&&s.splice(r,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const s=i.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}}const Sr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let s$=1234567;const e4=Math.PI/180,b8=180/Math.PI;function Uo(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Sr[255&n]+Sr[n>>8&255]+Sr[n>>16&255]+Sr[n>>24&255]+"-"+Sr[255&e]+Sr[e>>8&255]+"-"+Sr[e>>16&15|64]+Sr[e>>24&255]+"-"+Sr[63&t|128]+Sr[t>>8&255]+"-"+Sr[t>>16&255]+Sr[t>>24&255]+Sr[255&i]+Sr[i>>8&255]+Sr[i>>16&255]+Sr[i>>24&255]).toLowerCase()}function bs(n,e,t){return Math.max(e,Math.min(t,n))}function qw(n,e){return(n%e+e)%e}function x8(n,e,t){return(1-t)*n+t*e}function Yw(n){return 0==(n&n-1)&&0!==n}function r$(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function am(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function q2(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function hi(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}var yPe=Object.freeze({__proto__:null,DEG2RAD:e4,RAD2DEG:b8,generateUUID:Uo,clamp:bs,euclideanModulo:qw,mapLinear:function oPe(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)},inverseLerp:function aPe(n,e,t){return n!==e?(t-n)/(e-n):0},lerp:x8,damp:function cPe(n,e,t,i){return x8(n,e,1-Math.exp(-t*i))},pingpong:function lPe(n,e=1){return e-Math.abs(qw(n,2*e)-e)},smoothstep:function uPe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*(3-2*n)},smootherstep:function hPe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*n*(n*(6*n-15)+10)},randInt:function dPe(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function fPe(n,e){return n+Math.random()*(e-n)},randFloatSpread:function pPe(n){return n*(.5-Math.random())},seededRandom:function mPe(n){void 0!==n&&(s$=n);let e=s$+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function gPe(n){return n*e4},radToDeg:function vPe(n){return n*b8},isPowerOfTwo:Yw,ceilPowerOfTwo:r$,floorPowerOfTwo:am,setQuaternionFromProperEuler:function _Pe(n,e,t,i,s){const r=Math.cos,o=Math.sin,a=r(t/2),c=o(t/2),l=r((e+i)/2),u=o((e+i)/2),h=r((e-i)/2),d=o((e-i)/2),f=r((i-e)/2),p=o((i-e)/2);switch(s){case"XYX":n.set(a*u,c*h,c*d,a*l);break;case"YZY":n.set(c*d,a*u,c*h,a*l);break;case"ZXZ":n.set(c*h,c*d,a*u,a*l);break;case"XZX":n.set(a*u,c*p,c*f,a*l);break;case"YXY":n.set(c*f,a*u,c*p,a*l);break;case"ZYZ":n.set(c*p,c*f,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}},normalize:hi,denormalize:q2});class Me{constructor(e=0,t=0){Me.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*s+e.x,this.y=r*s+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ho{constructor(){ho.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,s,r,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=s,u[2]=a,u[3]=t,u[4]=r,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],h=i[7],d=i[2],f=i[5],p=i[8],m=s[0],g=s[3],v=s[6],_=s[1],y=s[4],b=s[7],x=s[2],w=s[5],L=s[8];return r[0]=o*m+a*_+c*x,r[3]=o*g+a*y+c*w,r[6]=o*v+a*b+c*L,r[1]=l*m+u*_+h*x,r[4]=l*g+u*y+h*w,r[7]=l*v+u*b+h*L,r[2]=d*m+f*_+p*x,r[5]=d*g+f*y+p*w,r[8]=d*v+f*b+p*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*r*u+i*a*c+s*r*l-s*o*c}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=u*o-a*l,d=a*c-u*r,f=l*r-o*c,p=t*h+i*d+s*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=h*m,e[1]=(s*l-u*i)*m,e[2]=(a*i-s*o)*m,e[3]=d*m,e[4]=(u*t-s*c)*m,e[5]=(s*r-a*t)*m,e[6]=f*m,e[7]=(i*c-l*t)*m,e[8]=(o*t-i*r)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,r,o,a){const c=Math.cos(r),l=Math.sin(r);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-s*l,s*c,-s*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),s=this.elements,r=s[0],o=s[3],a=s[6],c=s[1],l=s[4],u=s[7];return s[0]=t*r+i*c,s[3]=t*o+i*l,s[6]=t*a+i*u,s[1]=-i*r+t*c,s[4]=-i*o+t*l,s[7]=-i*a+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function o$(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function M8(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function t4(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function cm(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Xw={[$2]:{[Q3]:t4},[Q3]:{[$2]:cm}},Q1={legacyMode:!0,get workingColorSpace(){return Q3},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(Xw[e]&&void 0!==Xw[e][t]){const i=Xw[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},a$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},$s={r:0,g:0,b:0},J1={h:0,s:0,l:0},lm={h:0,s:0,l:0};function Zw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function um(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let W6,$e=(()=>{class n{constructor(t,i,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===i&&void 0===s?this.set(t):this.setRGB(t,i,s)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=$2){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Q1.toWorkingColorSpace(this,i),this}setRGB(t,i,s,r=Q3){return this.r=t,this.g=i,this.b=s,Q1.toWorkingColorSpace(this,r),this}setHSL(t,i,s,r=Q3){if(t=qw(t,1),i=bs(i,0,1),s=bs(s,0,1),0===i)this.r=this.g=this.b=s;else{const o=s<=.5?s*(1+i):s+i-s*i,a=2*s-o;this.r=Zw(a,o,t+1/3),this.g=Zw(a,o,t),this.b=Zw(a,o,t-1/3)}return Q1.toWorkingColorSpace(this,r),this}setStyle(t,i=$2){function s(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const c=r[2];switch(r[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,Q1.toWorkingColorSpace(this,i),s(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,Q1.toWorkingColorSpace(this,i),s(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c)){const l=parseFloat(o[1])/360,u=parseFloat(o[2])/100,h=parseFloat(o[3])/100;return s(o[4]),this.setHSL(l,u,h,i)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=r[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,Q1.toWorkingColorSpace(this,i),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,Q1.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=$2){const s=a$[t.toLowerCase()];return void 0!==s?this.setHex(s,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=t4(t.r),this.g=t4(t.g),this.b=t4(t.b),this}copyLinearToSRGB(t){return this.r=cm(t.r),this.g=cm(t.g),this.b=cm(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=$2){return Q1.fromWorkingColorSpace(um(this,$s),t),bs(255*$s.r,0,255)<<16^bs(255*$s.g,0,255)<<8^bs(255*$s.b,0,255)<<0}getHexString(t=$2){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=Q3){Q1.fromWorkingColorSpace(um(this,$s),i);const s=$s.r,r=$s.g,o=$s.b,a=Math.max(s,r,o),c=Math.min(s,r,o);let l,u;const h=(c+a)/2;if(c===a)l=0,u=0;else{const d=a-c;switch(u=h<=.5?d/(a+c):d/(2-a-c),a){case s:l=(r-o)/d+(r<o?6:0);break;case r:l=(o-s)/d+2;break;case o:l=(s-r)/d+4}l/=6}return t.h=l,t.s=u,t.l=h,t}getRGB(t,i=Q3){return Q1.fromWorkingColorSpace(um(this,$s),i),t.r=$s.r,t.g=$s.g,t.b=$s.b,t}getStyle(t=$2){return Q1.fromWorkingColorSpace(um(this,$s),t),t!==$2?`color(${t} ${$s.r} ${$s.g} ${$s.b})`:`rgb(${255*$s.r|0},${255*$s.g|0},${255*$s.b|0})`}offsetHSL(t,i,s){return this.getHSL(J1),J1.h+=t,J1.s+=i,J1.l+=s,this.setHSL(J1.h,J1.s,J1.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,s){return this.r=t.r+(i.r-t.r)*s,this.g=t.g+(i.g-t.g)*s,this.b=t.b+(i.b-t.b)*s,this}lerpHSL(t,i){this.getHSL(J1),t.getHSL(lm);const s=x8(J1.h,lm.h,i),r=x8(J1.s,lm.s,i),o=x8(J1.l,lm.l,i);return this.setHSL(s,r,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return n.NAMES=a$,n})();class c${static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===W6&&(W6=M8("canvas")),W6.width=e.width,W6.height=e.height;const i=W6.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=W6}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=M8("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=255*t4(r[o]/255);return i.putImageData(s,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*t4(t[i]/255)):t4(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class j6{constructor(e=null){this.isSource=!0,this.uuid=Uo(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(null!==s){let r;if(Array.isArray(s)){r=[];for(let o=0,a=s.length;o<a;o++)r.push(Kw(s[o].isDataTexture?s[o].image:s[o]))}else r=Kw(s);i.url=r}return t||(e.images[this.uuid]=i),i}}function Kw(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?c$.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let xPe=0,ea=(()=>{class n extends J3{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,s=jr,r=jr,o=as,a=al,c=K1,l=X3,u=1,h=ll){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:xPe++}),this.uuid=Uo(),this.name="",this.source=new j6(t),this.mipmaps=[],this.mapping=i,this.wrapS=s,this.wrapT=r,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new Me(0,0),this.repeat=new Me(1,1),this.center=new Me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ho,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const s={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),i||(t.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Na:t.x=t.x-Math.floor(t.x);break;case jr:t.x=t.x<0?0:1;break;case V6:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Na:t.y=t.y-Math.floor(t.y);break;case jr:t.y=t.y<0?0:1;break;case V6:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();class jn{constructor(e=0,t=0,i=0,s=1){jn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s+o[12]*r,this.y=o[1]*t+o[5]*i+o[9]*s+o[13]*r,this.z=o[2]*t+o[6]*i+o[10]*s+o[14]*r,this.w=o[3]*t+o[7]*i+o[11]*s+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,r;const c=e.elements,l=c[0],u=c[4],h=c[8],d=c[1],f=c[5],p=c[9],m=c[2],g=c[6],v=c[10];if(Math.abs(u-d)<.01&&Math.abs(h-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+m)<.1&&Math.abs(p+g)<.1&&Math.abs(l+f+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(l+1)/2,b=(f+1)/2,x=(v+1)/2,w=(u+d)/4,L=(h+m)/4,C=(p+g)/4;return y>b&&y>x?y<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(y),s=w/i,r=L/i):b>x?b<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(b),i=w/s,r=C/s):x<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(x),i=L/r,s=C/r),this.set(i,s,r,t),this}let _=Math.sqrt((g-p)*(g-p)+(h-m)*(h-m)+(d-u)*(d-u));return Math.abs(_)<.001&&(_=1),this.x=(g-p)/_,this.y=(h-m)/_,this.z=(d-u)/_,this.w=Math.acos((l+f+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class hl extends J3{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new jn(0,0,e,t),this.scissorTest=!1,this.viewport=new jn(0,0,e,t),this.texture=new ea({width:e,height:t,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:as,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new j6(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Qw extends ea{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Rs,this.minFilter=Rs,this.wrapR=jr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class l$ extends ea{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Rs,this.minFilter=Rs,this.wrapR=jr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Tr{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,r,o,a){let c=i[s+0],l=i[s+1],u=i[s+2],h=i[s+3];const d=r[o+0],f=r[o+1],p=r[o+2],m=r[o+3];if(0===a)return e[t+0]=c,e[t+1]=l,e[t+2]=u,void(e[t+3]=h);if(1===a)return e[t+0]=d,e[t+1]=f,e[t+2]=p,void(e[t+3]=m);if(h!==m||c!==d||l!==f||u!==p){let g=1-a;const v=c*d+l*f+u*p+h*m,_=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){const x=Math.sqrt(y),w=Math.atan2(x,v*_);g=Math.sin(g*w)/x,a=Math.sin(a*w)/x}const b=a*_;if(c=c*g+d*b,l=l*g+f*b,u=u*g+p*b,h=h*g+m*b,g===1-a){const x=1/Math.sqrt(c*c+l*l+u*u+h*h);c*=x,l*=x,u*=x,h*=x}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,s,r,o){const a=i[s],c=i[s+1],l=i[s+2],u=i[s+3],h=r[o],d=r[o+1],f=r[o+2],p=r[o+3];return e[t]=a*p+u*h+c*f-l*d,e[t+1]=c*p+u*d+l*h-a*f,e[t+2]=l*p+u*f+a*d-c*h,e[t+3]=u*p-a*h-c*d-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,s=e._y,r=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(s/2),h=a(r/2),d=c(i/2),f=c(s/2),p=c(r/2);switch(o){case"XYZ":this._x=d*u*h+l*f*p,this._y=l*f*h-d*u*p,this._z=l*u*p+d*f*h,this._w=l*u*h-d*f*p;break;case"YXZ":this._x=d*u*h+l*f*p,this._y=l*f*h-d*u*p,this._z=l*u*p-d*f*h,this._w=l*u*h+d*f*p;break;case"ZXY":this._x=d*u*h-l*f*p,this._y=l*f*h+d*u*p,this._z=l*u*p+d*f*h,this._w=l*u*h-d*f*p;break;case"ZYX":this._x=d*u*h-l*f*p,this._y=l*f*h+d*u*p,this._z=l*u*p-d*f*h,this._w=l*u*h+d*f*p;break;case"YZX":this._x=d*u*h+l*f*p,this._y=l*f*h+d*u*p,this._z=l*u*p-d*f*h,this._w=l*u*h-d*f*p;break;case"XZY":this._x=d*u*h-l*f*p,this._y=l*f*h-d*u*p,this._z=l*u*p+d*f*h,this._w=l*u*h+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],r=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],h=t[10],d=i+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-c)*f,this._y=(r-l)*f,this._z=(o-s)*f}else if(i>a&&i>h){const f=2*Math.sqrt(1+i-a-h);this._w=(u-c)/f,this._x=.25*f,this._y=(s+o)/f,this._z=(r+l)/f}else if(a>h){const f=2*Math.sqrt(1+a-i-h);this._w=(r-l)/f,this._x=(s+o)/f,this._y=.25*f,this._z=(c+u)/f}else{const f=2*Math.sqrt(1+h-i-a);this._w=(o-s)/f,this._x=(r+l)/f,this._y=(c+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(bs(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,r=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+s*l-r*c,this._y=s*u+o*c+r*a-i*l,this._z=r*u+o*l+i*c-s*a,this._w=o*u-i*a-s*c-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,s=this._y,r=this._z,o=this._w;let a=o*e._w+i*e._x+s*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=s,this._z=r,this;const c=1-a*a;if(c<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*s+t*this._y,this._z=f*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),h=Math.sin((1-t)*u)/l,d=Math.sin(t*u)/l;return this._w=o*h+this._w*d,this._x=i*h+this._x*d,this._y=s*h+this._y*d,this._z=r*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),s=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(s),i*Math.sin(r),i*Math.cos(r),t*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class V{constructor(e=0,t=0,i=0){V.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(u$.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(u$.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*s,this.y=r[1]*t+r[4]*i+r[7]*s,this.z=r[2]*t+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=e.elements,o=1/(r[3]*t+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*s+r[12])*o,this.y=(r[1]*t+r[5]*i+r[9]*s+r[13])*o,this.z=(r[2]*t+r[6]*i+r[10]*s+r[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,r=e.x,o=e.y,a=e.z,c=e.w,l=c*t+o*s-a*i,u=c*i+a*t-r*s,h=c*s+r*i-o*t,d=-r*t-o*i-a*s;return this.x=l*c+d*-r+u*-a-h*-o,this.y=u*c+d*-o+h*-r-l*-a,this.z=h*c+d*-a+l*-o-u*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*s,this.y=r[1]*t+r[5]*i+r[9]*s,this.z=r[2]*t+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,r=e.z,o=t.x,a=t.y,c=t.z;return this.x=s*c-r*a,this.y=r*o-i*c,this.z=i*a-s*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Jw.copy(this).projectOnVector(e),this.sub(Jw)}reflect(e){return this.sub(Jw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(bs(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Jw=new V,u$=new Tr;class n4{constructor(e=new V(1/0,1/0,1/0),t=new V(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,s=1/0,r=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.length;c<l;c+=3){const u=e[c],h=e[c+1],d=e[c+2];u<t&&(t=u),h<i&&(i=h),d<s&&(s=d),u>r&&(r=u),h>o&&(o=h),d>a&&(a=d)}return this.min.set(t,i,s),this.max.set(r,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,s=1/0,r=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.count;c<l;c++){const u=e.getX(c),h=e.getY(c),d=e.getZ(c);u<t&&(t=u),h<i&&(i=h),d<s&&(s=d),u>r&&(r=u),h>o&&(o=h),d>a&&(a=d)}return this.min.set(t,i,s),this.max.set(r,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=s4.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){const r=i.attributes.position;for(let o=0,a=r.count;o<a;o++)s4.fromBufferAttribute(r,o).applyMatrix4(e.matrixWorld),this.expandByPoint(s4)}else null===i.boundingBox&&i.computeBoundingBox(),eS.copy(i.boundingBox),eS.applyMatrix4(e.matrixWorld),this.union(eS);const s=e.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,s4),s4.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(C8),hm.subVectors(this.max,C8),$6.subVectors(e.a,C8),q6.subVectors(e.b,C8),Y6.subVectors(e.c,C8),dl.subVectors(q6,$6),fl.subVectors(Y6,q6),r4.subVectors($6,Y6);let t=[0,-dl.z,dl.y,0,-fl.z,fl.y,0,-r4.z,r4.y,dl.z,0,-dl.x,fl.z,0,-fl.x,r4.z,0,-r4.x,-dl.y,dl.x,0,-fl.y,fl.x,0,-r4.y,r4.x,0];return!(!tS(t,$6,q6,Y6,hm)||(t=[1,0,0,0,1,0,0,0,1],!tS(t,$6,q6,Y6,hm)))&&(dm.crossVectors(dl,fl),t=[dm.x,dm.y,dm.z],tS(t,$6,q6,Y6,hm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return s4.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(s4).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Y2[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Y2[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Y2[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Y2[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Y2[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Y2[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Y2[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Y2[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Y2)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Y2=[new V,new V,new V,new V,new V,new V,new V,new V],s4=new V,eS=new n4,$6=new V,q6=new V,Y6=new V,dl=new V,fl=new V,r4=new V,C8=new V,hm=new V,dm=new V,o4=new V;function tS(n,e,t,i,s){for(let r=0,o=n.length-3;r<=o;r+=3){o4.fromArray(n,r);const a=s.x*Math.abs(o4.x)+s.y*Math.abs(o4.y)+s.z*Math.abs(o4.z),c=e.dot(o4),l=t.dot(o4),u=i.dot(o4);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const MPe=new n4,h$=new V,fm=new V,nS=new V;class a4{constructor(e=new V,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):MPe.setFromPoints(e).getCenter(i);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){nS.subVectors(e,this.center);const t=nS.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=.5*(i-this.radius);this.center.add(nS.multiplyScalar(s/i)),this.radius+=s}return this}union(e){return!0===this.center.equals(e.center)?fm.set(0,0,1).multiplyScalar(e.radius):fm.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(h$.copy(e.center).add(fm)),this.expandByPoint(h$.copy(e.center).sub(fm)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const X2=new V,iS=new V,pm=new V,pl=new V,sS=new V,mm=new V,rS=new V;class gm{constructor(e=new V,t=new V(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,X2)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=X2.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(X2.copy(this.direction).multiplyScalar(t).add(this.origin),X2.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){iS.copy(e).add(t).multiplyScalar(.5),pm.copy(t).sub(e).normalize(),pl.copy(this.origin).sub(iS);const r=.5*e.distanceTo(t),o=-this.direction.dot(pm),a=pl.dot(this.direction),c=-pl.dot(pm),l=pl.lengthSq(),u=Math.abs(1-o*o);let h,d,f,p;if(u>0)if(h=o*c-a,d=o*a-c,p=r*u,h>=0)if(d>=-p)if(d<=p){const m=1/u;h*=m,d*=m,f=h*(h+o*d+2*a)+d*(o*h+d+2*c)+l}else d=r,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*c)+l;else d=-r,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*c)+l;else d<=-p?(h=Math.max(0,-(-o*r+a)),d=h>0?-r:Math.min(Math.max(-r,-c),r),f=-h*h+d*(d+2*c)+l):d<=p?(h=0,d=Math.min(Math.max(-r,-c),r),f=d*(d+2*c)+l):(h=Math.max(0,-(o*r+a)),d=h>0?r:Math.min(Math.max(-r,-c),r),f=-h*h+d*(d+2*c)+l);else d=o>0?-r:r,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*c)+l;return i&&i.copy(this.direction).multiplyScalar(h).add(this.origin),s&&s.copy(pm).multiplyScalar(d).add(iS),f}intersectSphere(e,t){X2.subVectors(e.center,this.origin);const i=X2.dot(this.direction),s=X2.dot(X2)-i*i,r=e.radius*e.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=i-o,c=i+o;return a<0&&c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,r,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return l>=0?(i=(e.min.x-d.x)*l,s=(e.max.x-d.x)*l):(i=(e.max.x-d.x)*l,s=(e.min.x-d.x)*l),u>=0?(r=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(r=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),i>o||r>s||((r>i||i!=i)&&(i=r),(o<s||s!=s)&&(s=o),h>=0?(a=(e.min.z-d.z)*h,c=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,c=(e.min.z-d.z)*h),i>c||a>s)||((a>i||i!=i)&&(i=a),(c<s||s!=s)&&(s=c),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return null!==this.intersectBox(e,X2)}intersectTriangle(e,t,i,s,r){sS.subVectors(t,e),mm.subVectors(i,e),rS.crossVectors(sS,mm);let a,o=this.direction.dot(rS);if(o>0){if(s)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}pl.subVectors(this.origin,e);const c=a*this.direction.dot(mm.crossVectors(pl,mm));if(c<0)return null;const l=a*this.direction.dot(sS.cross(pl));if(l<0||c+l>o)return null;const u=-a*pl.dot(rS);return u<0?null:this.at(u/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Dt{constructor(){Dt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,s,r,o,a,c,l,u,h,d,f,p,m,g){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=s,v[1]=r,v[5]=o,v[9]=a,v[13]=c,v[2]=l,v[6]=u,v[10]=h,v[14]=d,v[3]=f,v[7]=p,v[11]=m,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Dt).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/X6.setFromMatrixColumn(e,0).length(),r=1/X6.setFromMatrixColumn(e,1).length(),o=1/X6.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,r=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(s),l=Math.sin(s),u=Math.cos(r),h=Math.sin(r);if("XYZ"===e.order){const d=o*u,f=o*h,p=a*u,m=a*h;t[0]=c*u,t[4]=-c*h,t[8]=l,t[1]=f+p*l,t[5]=d-m*l,t[9]=-a*c,t[2]=m-d*l,t[6]=p+f*l,t[10]=o*c}else if("YXZ"===e.order){const d=c*u,f=c*h,p=l*u,m=l*h;t[0]=d+m*a,t[4]=p*a-f,t[8]=o*l,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=m+d*a,t[10]=o*c}else if("ZXY"===e.order){const d=c*u,f=c*h,p=l*u,m=l*h;t[0]=d-m*a,t[4]=-o*h,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=m-d*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if("ZYX"===e.order){const d=o*u,f=o*h,p=a*u,m=a*h;t[0]=c*u,t[4]=p*l-f,t[8]=d*l+m,t[1]=c*h,t[5]=m*l+d,t[9]=f*l-p,t[2]=-l,t[6]=a*c,t[10]=o*c}else if("YZX"===e.order){const d=o*c,f=o*l,p=a*c,m=a*l;t[0]=c*u,t[4]=m-d*h,t[8]=p*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=f*h+p,t[10]=d-m*h}else if("XZY"===e.order){const d=o*c,f=o*l,p=a*c,m=a*l;t[0]=c*u,t[4]=-h,t[8]=l*u,t[1]=d*h+m,t[5]=o*u,t[9]=f*h-p,t[2]=p*h-f,t[6]=a*u,t[10]=m*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(CPe,e,wPe)}lookAt(e,t,i){const s=this.elements;return Go.subVectors(e,t),0===Go.lengthSq()&&(Go.z=1),Go.normalize(),ml.crossVectors(i,Go),0===ml.lengthSq()&&(1===Math.abs(i.z)?Go.x+=1e-4:Go.z+=1e-4,Go.normalize(),ml.crossVectors(i,Go)),ml.normalize(),vm.crossVectors(Go,ml),s[0]=ml.x,s[4]=vm.x,s[8]=Go.x,s[1]=ml.y,s[5]=vm.y,s[9]=Go.y,s[2]=ml.z,s[6]=vm.z,s[10]=Go.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],h=i[5],d=i[9],f=i[13],p=i[2],m=i[6],g=i[10],v=i[14],_=i[3],y=i[7],b=i[11],x=i[15],w=s[0],L=s[4],C=s[8],D=s[12],R=s[1],Y=s[5],Q=s[9],j=s[13],z=s[2],G=s[6],k=s[10],O=s[14],N=s[3],B=s[7],q=s[11],ne=s[15];return r[0]=o*w+a*R+c*z+l*N,r[4]=o*L+a*Y+c*G+l*B,r[8]=o*C+a*Q+c*k+l*q,r[12]=o*D+a*j+c*O+l*ne,r[1]=u*w+h*R+d*z+f*N,r[5]=u*L+h*Y+d*G+f*B,r[9]=u*C+h*Q+d*k+f*q,r[13]=u*D+h*j+d*O+f*ne,r[2]=p*w+m*R+g*z+v*N,r[6]=p*L+m*Y+g*G+v*B,r[10]=p*C+m*Q+g*k+v*q,r[14]=p*D+m*j+g*O+v*ne,r[3]=_*w+y*R+b*z+x*N,r[7]=_*L+y*Y+b*G+x*B,r[11]=_*C+y*Q+b*k+x*q,r[15]=_*D+y*j+b*O+x*ne,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],r=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],h=e[6],d=e[10],f=e[14];return e[3]*(+r*c*h-s*l*h-r*a*d+i*l*d+s*a*f-i*c*f)+e[7]*(+t*c*f-t*l*d+r*o*d-s*o*f+s*l*u-r*c*u)+e[11]*(+t*l*h-t*a*f-r*o*h+i*o*f+r*a*u-i*l*u)+e[15]*(-s*a*u-t*c*h+t*a*d+s*o*h-i*o*d+i*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],v=e[15],_=h*g*l-m*d*l+m*c*f-a*g*f-h*c*v+a*d*v,y=p*d*l-u*g*l-p*c*f+o*g*f+u*c*v-o*d*v,b=u*m*l-p*h*l+p*a*f-o*m*f-u*a*v+o*h*v,x=p*h*c-u*m*c-p*a*d+o*m*d+u*a*g-o*h*g,w=t*_+i*y+s*b+r*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/w;return e[0]=_*L,e[1]=(m*d*r-h*g*r-m*s*f+i*g*f+h*s*v-i*d*v)*L,e[2]=(a*g*r-m*c*r+m*s*l-i*g*l-a*s*v+i*c*v)*L,e[3]=(h*c*r-a*d*r-h*s*l+i*d*l+a*s*f-i*c*f)*L,e[4]=y*L,e[5]=(u*g*r-p*d*r+p*s*f-t*g*f-u*s*v+t*d*v)*L,e[6]=(p*c*r-o*g*r-p*s*l+t*g*l+o*s*v-t*c*v)*L,e[7]=(o*d*r-u*c*r+u*s*l-t*d*l-o*s*f+t*c*f)*L,e[8]=b*L,e[9]=(p*h*r-u*m*r-p*i*f+t*m*f+u*i*v-t*h*v)*L,e[10]=(o*m*r-p*a*r+p*i*l-t*m*l-o*i*v+t*a*v)*L,e[11]=(u*a*r-o*h*r-u*i*l+t*h*l+o*i*f-t*a*f)*L,e[12]=x*L,e[13]=(u*m*s-p*h*s+p*i*d-t*m*d-u*i*g+t*h*g)*L,e[14]=(p*a*s-o*m*s-p*i*c+t*m*c+o*i*g-t*a*g)*L,e[15]=(o*h*s-u*a*s+u*i*c-t*h*c-o*i*d+t*a*d)*L,this}scale(e){const t=this.elements,i=e.x,s=e.y,r=e.z;return t[0]*=i,t[4]*=s,t[8]*=r,t[1]*=i,t[5]*=s,t[9]*=r,t[2]*=i,t[6]*=s,t[10]*=r,t[3]*=i,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),r=1-i,o=e.x,a=e.y,c=e.z,l=r*o,u=r*a;return this.set(l*o+i,l*a-s*c,l*c+s*a,0,l*a+s*c,u*a+i,u*c-s*o,0,l*c-s*a,u*c+s*o,r*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,r,o){return this.set(1,i,r,0,e,1,o,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,r=t._x,o=t._y,a=t._z,c=t._w,l=r+r,u=o+o,h=a+a,d=r*l,f=r*u,p=r*h,m=o*u,g=o*h,v=a*h,_=c*l,y=c*u,b=c*h,x=i.x,w=i.y,L=i.z;return s[0]=(1-(m+v))*x,s[1]=(f+b)*x,s[2]=(p-y)*x,s[3]=0,s[4]=(f-b)*w,s[5]=(1-(d+v))*w,s[6]=(g+_)*w,s[7]=0,s[8]=(p+y)*L,s[9]=(g-_)*L,s[10]=(1-(d+m))*L,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let r=X6.set(s[0],s[1],s[2]).length();const o=X6.set(s[4],s[5],s[6]).length(),a=X6.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],ta.copy(this);const l=1/r,u=1/o,h=1/a;return ta.elements[0]*=l,ta.elements[1]*=l,ta.elements[2]*=l,ta.elements[4]*=u,ta.elements[5]*=u,ta.elements[6]*=u,ta.elements[8]*=h,ta.elements[9]*=h,ta.elements[10]*=h,t.setFromRotationMatrix(ta),i.x=r,i.y=o,i.z=a,this}makePerspective(e,t,i,s,r,o){const a=this.elements,l=2*r/(i-s),u=(t+e)/(t-e),h=(i+s)/(i-s),d=-(o+r)/(o-r),f=-2*o*r/(o-r);return a[0]=2*r/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,s,r,o){const a=this.elements,c=1/(t-e),l=1/(i-s),u=1/(o-r),h=(t+e)*c,d=(i+s)*l,f=(o+r)*u;return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const X6=new V,ta=new Dt,CPe=new V(0,0,0),wPe=new V(1,1,1),ml=new V,vm=new V,Go=new V,d$=new Dt,f$=new Tr;let SPe=(()=>{class n{constructor(t=0,i=0,s=0,r=n.DefaultOrder){this.isEuler=!0,this._x=t,this._y=i,this._z=s,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,s,r=this._order){return this._x=t,this._y=i,this._z=s,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,s=!0){const r=t.elements,o=r[0],a=r[4],c=r[8],l=r[1],u=r[5],h=r[9],d=r[2],f=r[6],p=r[10];switch(i){case"XYZ":this._y=Math.asin(bs(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-bs(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,o),this._z=0);break;case"ZXY":this._x=Math.asin(bs(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-bs(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(bs(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-bs(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===s&&this._onChangeCallback(),this}setFromQuaternion(t,i,s){return d$.makeRotationFromQuaternion(t),this.setFromRotationMatrix(d$,i,s)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return f$.setFromEuler(this),this.setFromQuaternion(f$,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n})();class oS{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let TPe=0;const p$=new V,Z6=new Tr,Z2=new Dt,_m=new V,w8=new V,EPe=new V,APe=new Tr,m$=new V(1,0,0),g$=new V(0,1,0),v$=new V(0,0,1),DPe={type:"added"},_$={type:"removed"};let hr=(()=>{class n extends J3{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:TPe++}),this.uuid=Uo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DefaultUp.clone();const t=new V,i=new SPe,s=new Tr,r=new V(1,1,1);i._onChange(function o(){s.setFromEuler(i,!1)}),s._onChange(function a(){i.setFromQuaternion(s,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Dt},normalMatrix:{value:new ho}}),this.matrix=new Dt,this.matrixWorld=new Dt,this.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,this.layers=new oS,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Z6.setFromAxisAngle(t,i),this.quaternion.multiply(Z6),this}rotateOnWorldAxis(t,i){return Z6.setFromAxisAngle(t,i),this.quaternion.premultiply(Z6),this}rotateX(t){return this.rotateOnAxis(m$,t)}rotateY(t){return this.rotateOnAxis(g$,t)}rotateZ(t){return this.rotateOnAxis(v$,t)}translateOnAxis(t,i){return p$.copy(t).applyQuaternion(this.quaternion),this.position.add(p$.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(m$,t)}translateY(t){return this.translateOnAxis(g$,t)}translateZ(t){return this.translateOnAxis(v$,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Z2.copy(this.matrixWorld).invert())}lookAt(t,i,s){t.isVector3?_m.copy(t):_m.set(t,i,s);const r=this.parent;this.updateWorldMatrix(!0,!1),w8.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Z2.lookAt(w8,_m,this.up):Z2.lookAt(_m,w8,this.up),this.quaternion.setFromRotationMatrix(Z2),r&&(Z2.extractRotation(r.matrixWorld),Z6.setFromRotationMatrix(Z2),this.quaternion.premultiply(Z6.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(DPe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(_$)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(_$)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Z2.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Z2.multiply(t.parent.matrixWorld)),t.applyMatrix4(Z2),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let s=0,r=this.children.length;s<r;s++){const a=this.children[s].getObjectByProperty(t,i);if(void 0!==a)return a}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(w8,t,EPe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(w8,APe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let s=0,r=i.length;s<r;s++)i[s].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let s=0,r=i.length;s<r;s++)i[s].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let s=0,r=i.length;s<r;s++){const o=i[s];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const s=this.parent;if(!0===t&&null!==s&&!0===s.matrixWorldAutoUpdate&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const r=this.children;for(let o=0,a=r.length;o<a;o++){const c=r[o];!0===c.matrixWorldAutoUpdate&&c.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,s={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function o(c,l){return void 0===c[l.uuid]&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=o(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const l=c.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++)o(t.shapes,l[u]);else o(t.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));r.material=c}else r.material=o(t.materials,this.material);if(this.children.length>0){r.children=[];for(let c=0;c<this.children.length;c++)r.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let c=0;c<this.animations.length;c++)r.animations.push(o(t.animations,this.animations[c]))}if(i){const c=a(t.geometries),l=a(t.materials),u=a(t.textures),h=a(t.images),d=a(t.shapes),f=a(t.skeletons),p=a(t.animations),m=a(t.nodes);c.length>0&&(s.geometries=c),l.length>0&&(s.materials=l),u.length>0&&(s.textures=u),h.length>0&&(s.images=h),d.length>0&&(s.shapes=d),f.length>0&&(s.skeletons=f),p.length>0&&(s.animations=p),m.length>0&&(s.nodes=m)}return s.object=r,s;function a(c){const l=[];for(const u in c){const h=c[u];delete h.metadata,l.push(h)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let s=0;s<t.children.length;s++)this.add(t.children[s].clone());return this}}return n.DefaultUp=new V(0,1,0),n.DefaultMatrixAutoUpdate=!0,n.DefaultMatrixWorldAutoUpdate=!0,n})();const na=new V,K2=new V,aS=new V,Q2=new V,K6=new V,Q6=new V,y$=new V,cS=new V,lS=new V,uS=new V;class ia{constructor(e=new V,t=new V,i=new V){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),na.subVectors(e,t),s.cross(na);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,i,s,r){na.subVectors(s,t),K2.subVectors(i,t),aS.subVectors(e,t);const o=na.dot(na),a=na.dot(K2),c=na.dot(aS),l=K2.dot(K2),u=K2.dot(aS),h=o*l-a*a;if(0===h)return r.set(-2,-1,-1);const d=1/h,f=(l*c-a*u)*d,p=(o*u-a*c)*d;return r.set(1-f-p,p,f)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,Q2),Q2.x>=0&&Q2.y>=0&&Q2.x+Q2.y<=1}static getUV(e,t,i,s,r,o,a,c){return this.getBarycoord(e,t,i,s,Q2),c.set(0,0),c.addScaledVector(r,Q2.x),c.addScaledVector(o,Q2.y),c.addScaledVector(a,Q2.z),c}static isFrontFacing(e,t,i,s){return na.subVectors(i,t),K2.subVectors(e,t),na.cross(K2).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return na.subVectors(this.c,this.b),K2.subVectors(this.a,this.b),.5*na.cross(K2).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ia.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ia.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,s,r){return ia.getUV(e,this.a,this.b,this.c,t,i,s,r)}containsPoint(e){return ia.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ia.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,r=this.c;let o,a;K6.subVectors(s,i),Q6.subVectors(r,i),cS.subVectors(e,i);const c=K6.dot(cS),l=Q6.dot(cS);if(c<=0&&l<=0)return t.copy(i);lS.subVectors(e,s);const u=K6.dot(lS),h=Q6.dot(lS);if(u>=0&&h<=u)return t.copy(s);const d=c*h-u*l;if(d<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(K6,o);uS.subVectors(e,r);const f=K6.dot(uS),p=Q6.dot(uS);if(p>=0&&f<=p)return t.copy(r);const m=f*l-c*p;if(m<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(i).addScaledVector(Q6,a);const g=u*p-f*h;if(g<=0&&h-u>=0&&f-p>=0)return y$.subVectors(r,s),a=(h-u)/(h-u+(f-p)),t.copy(s).addScaledVector(y$,a);const v=1/(g+m+d);return o=m*v,a=d*v,t.copy(i).addScaledVector(K6,o).addScaledVector(Q6,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let LPe=0;class $r extends J3{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:LPe++}),this.uuid=Uo(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const s=this[t];void 0!==s?s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function s(r){const o=[];for(const a in r){const c=r[a];delete c.metadata,o.push(c)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const r=s(e.textures),o=s(e.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const s=t.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Wo extends $r{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Is=new V,ym=new Me;class Pi{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)ym.fromBufferAttribute(this,t),ym.applyMatrix3(e),this.setXY(t,ym.x,ym.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Is.fromBufferAttribute(this,t),Is.applyMatrix3(e),this.setXYZ(t,Is.x,Is.y,Is.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Is.fromBufferAttribute(this,t),Is.applyMatrix4(e),this.setXYZ(t,Is.x,Is.y,Is.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Is.fromBufferAttribute(this,t),Is.applyNormalMatrix(e),this.setXYZ(t,Is.x,Is.y,Is.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Is.fromBufferAttribute(this,t),Is.transformDirection(e),this.setXYZ(t,Is.x,Is.y,Is.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=q2(t,this.array)),t}setX(e,t){return this.normalized&&(t=hi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=q2(t,this.array)),t}setY(e,t){return this.normalized&&(t=hi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=q2(t,this.array)),t}setZ(e,t){return this.normalized&&(t=hi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=q2(t,this.array)),t}setW(e,t){return this.normalized&&(t=hi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=hi(t,this.array),i=hi(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=hi(t,this.array),i=hi(i,this.array),s=hi(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=hi(t,this.array),i=hi(i,this.array),s=hi(s,this.array),r=hi(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class b$ extends Pi{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class x$ extends Pi{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class ht extends Pi{constructor(e,t,i){super(new Float32Array(e),t,i)}}let zPe=0;const y1=new Dt,hS=new hr,J6=new V,jo=new n4,S8=new n4,rr=new V;class on extends J3{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:zPe++}),this.uuid=Uo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(o$(e)?x$:b$)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const r=(new ho).getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return void 0!==s&&(s.transformDirection(e),s.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return y1.makeRotationFromQuaternion(e),this.applyMatrix4(y1),this}rotateX(e){return y1.makeRotationX(e),this.applyMatrix4(y1),this}rotateY(e){return y1.makeRotationY(e),this.applyMatrix4(y1),this}rotateZ(e){return y1.makeRotationZ(e),this.applyMatrix4(y1),this}translate(e,t,i){return y1.makeTranslation(e,t,i),this.applyMatrix4(y1),this}scale(e,t,i){return y1.makeScale(e,t,i),this.applyMatrix4(y1),this}lookAt(e){return hS.lookAt(e),hS.updateMatrix(),this.applyMatrix4(hS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(J6).negate(),this.translate(J6.x,J6.y,J6.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new ht(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new n4);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++)jo.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(rr.addVectors(this.boundingBox.min,jo.min),this.boundingBox.expandByPoint(rr),rr.addVectors(this.boundingBox.max,jo.max),this.boundingBox.expandByPoint(rr)):(this.boundingBox.expandByPoint(jo.min),this.boundingBox.expandByPoint(jo.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new a4);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new V,1/0);if(e){const i=this.boundingSphere.center;if(jo.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++)S8.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(rr.addVectors(jo.min,S8.min),jo.expandByPoint(rr),rr.addVectors(jo.max,S8.max),jo.expandByPoint(rr)):(jo.expandByPoint(S8.min),jo.expandByPoint(S8.max));jo.getCenter(i);let s=0;for(let r=0,o=e.count;r<o;r++)rr.fromBufferAttribute(e,r),s=Math.max(s,i.distanceToSquared(rr));if(t)for(let r=0,o=t.length;r<o;r++){const a=t[r],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)rr.fromBufferAttribute(a,l),c&&(J6.fromBufferAttribute(e,l),rr.add(J6)),s=Math.max(s,i.distanceToSquared(rr))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,s=t.position.array,r=t.normal.array,o=t.uv.array,a=s.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Pi(new Float32Array(4*a),4));const c=this.getAttribute("tangent").array,l=[],u=[];for(let R=0;R<a;R++)l[R]=new V,u[R]=new V;const h=new V,d=new V,f=new V,p=new Me,m=new Me,g=new Me,v=new V,_=new V;function y(R,Y,Q){h.fromArray(s,3*R),d.fromArray(s,3*Y),f.fromArray(s,3*Q),p.fromArray(o,2*R),m.fromArray(o,2*Y),g.fromArray(o,2*Q),d.sub(h),f.sub(h),m.sub(p),g.sub(p);const j=1/(m.x*g.y-g.x*m.y);!isFinite(j)||(v.copy(d).multiplyScalar(g.y).addScaledVector(f,-m.y).multiplyScalar(j),_.copy(f).multiplyScalar(m.x).addScaledVector(d,-g.x).multiplyScalar(j),l[R].add(v),l[Y].add(v),l[Q].add(v),u[R].add(_),u[Y].add(_),u[Q].add(_))}let b=this.groups;0===b.length&&(b=[{start:0,count:i.length}]);for(let R=0,Y=b.length;R<Y;++R){const Q=b[R],j=Q.start;for(let G=j,k=j+Q.count;G<k;G+=3)y(i[G+0],i[G+1],i[G+2])}const x=new V,w=new V,L=new V,C=new V;function D(R){L.fromArray(r,3*R),C.copy(L);const Y=l[R];x.copy(Y),x.sub(L.multiplyScalar(L.dot(Y))).normalize(),w.crossVectors(C,Y);const j=w.dot(u[R])<0?-1:1;c[4*R]=x.x,c[4*R+1]=x.y,c[4*R+2]=x.z,c[4*R+3]=j}for(let R=0,Y=b.length;R<Y;++R){const Q=b[R],j=Q.start;for(let G=j,k=j+Q.count;G<k;G+=3)D(i[G+0]),D(i[G+1]),D(i[G+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Pi(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let d=0,f=i.count;d<f;d++)i.setXYZ(d,0,0,0);const s=new V,r=new V,o=new V,a=new V,c=new V,l=new V,u=new V,h=new V;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),m=e.getX(d+1),g=e.getX(d+2);s.fromBufferAttribute(t,p),r.fromBufferAttribute(t,m),o.fromBufferAttribute(t,g),u.subVectors(o,r),h.subVectors(s,r),u.cross(h),a.fromBufferAttribute(i,p),c.fromBufferAttribute(i,m),l.fromBufferAttribute(i,g),a.add(u),c.add(u),l.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(m,c.x,c.y,c.z),i.setXYZ(g,l.x,l.y,l.z)}else for(let d=0,f=t.count;d<f;d+=3)s.fromBufferAttribute(t,d+0),r.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,r),h.subVectors(s,r),u.cross(h),i.setXYZ(d+0,u.x,u.y,u.z),i.setXYZ(d+1,u.x,u.y,u.z),i.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)rr.fromBufferAttribute(e,t),rr.normalize(),e.setXYZ(t,rr.x,rr.y,rr.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,h=a.normalized,d=new l.constructor(c.length*u);let f=0,p=0;for(let m=0,g=c.length;m<g;m++){f=a.isInterleavedBufferAttribute?c[m]*a.data.stride+a.offset:c[m]*u;for(let v=0;v<u;v++)d[p++]=l[f++]}return new Pi(d,u,h)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new on,i=this.index.array,s=this.attributes;for(const a in s){const l=e(s[a],i);t.setAttribute(a,l)}const r=this.morphAttributes;for(const a in r){const c=[],l=r[a];for(let u=0,h=l.length;u<h;u++){const f=e(l[u],i);c.push(f)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const l in c)void 0!==c[l]&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const s={};let r=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let h=0,d=l.length;h<d;h++)u.push(l[h].toJSON(e.data));u.length>0&&(s[c]=u,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const s=e.attributes;for(const l in s)this.setAttribute(l,s[l].clone(t));const r=e.morphAttributes;for(const l in r){const u=[],h=r[l];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const h=o[l];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const M$=new Dt,eu=new gm,dS=new a4,gl=new V,vl=new V,_l=new V,fS=new V,pS=new V,mS=new V,bm=new V,xm=new V,Mm=new V,Cm=new Me,wm=new Me,Sm=new Me,gS=new V,Tm=new V;class cs extends hr{constructor(e=new on,t=new Wo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}raycast(e,t){const i=this.geometry,s=this.material,r=this.matrixWorld;if(void 0===s||(null===i.boundingSphere&&i.computeBoundingSphere(),dS.copy(i.boundingSphere),dS.applyMatrix4(r),!1===e.ray.intersectsSphere(dS))||(M$.copy(r).invert(),eu.copy(e.ray).applyMatrix4(M$),null!==i.boundingBox&&!1===eu.intersectsBox(i.boundingBox)))return;let o;const a=i.index,c=i.attributes.position,l=i.morphAttributes.position,u=i.morphTargetsRelative,h=i.attributes.uv,d=i.attributes.uv2,f=i.groups,p=i.drawRange;if(null!==a)if(Array.isArray(s))for(let m=0,g=f.length;m<g;m++){const v=f[m],_=s[v.materialIndex];for(let x=Math.max(v.start,p.start),w=Math.min(a.count,Math.min(v.start+v.count,p.start+p.count));x<w;x+=3){const L=a.getX(x),C=a.getX(x+1),D=a.getX(x+2);o=Em(this,_,e,eu,c,l,u,h,d,L,C,D),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else for(let v=Math.max(0,p.start),_=Math.min(a.count,p.start+p.count);v<_;v+=3){const y=a.getX(v),b=a.getX(v+1),x=a.getX(v+2);o=Em(this,s,e,eu,c,l,u,h,d,y,b,x),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}else if(void 0!==c)if(Array.isArray(s))for(let m=0,g=f.length;m<g;m++){const v=f[m],_=s[v.materialIndex];for(let x=Math.max(v.start,p.start),w=Math.min(c.count,Math.min(v.start+v.count,p.start+p.count));x<w;x+=3)o=Em(this,_,e,eu,c,l,u,h,d,x,x+1,x+2),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=v.materialIndex,t.push(o))}else for(let v=Math.max(0,p.start),_=Math.min(c.count,p.start+p.count);v<_;v+=3)o=Em(this,s,e,eu,c,l,u,h,d,v,v+1,v+2),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}function Em(n,e,t,i,s,r,o,a,c,l,u,h){gl.fromBufferAttribute(s,l),vl.fromBufferAttribute(s,u),_l.fromBufferAttribute(s,h);const d=n.morphTargetInfluences;if(r&&d){bm.set(0,0,0),xm.set(0,0,0),Mm.set(0,0,0);for(let p=0,m=r.length;p<m;p++){const g=d[p],v=r[p];0!==g&&(fS.fromBufferAttribute(v,l),pS.fromBufferAttribute(v,u),mS.fromBufferAttribute(v,h),o?(bm.addScaledVector(fS,g),xm.addScaledVector(pS,g),Mm.addScaledVector(mS,g)):(bm.addScaledVector(fS.sub(gl),g),xm.addScaledVector(pS.sub(vl),g),Mm.addScaledVector(mS.sub(_l),g)))}gl.add(bm),vl.add(xm),_l.add(Mm)}n.isSkinnedMesh&&(n.boneTransform(l,gl),n.boneTransform(u,vl),n.boneTransform(h,_l));const f=function kPe(n,e,t,i,s,r,o,a){let c;if(c=1===e.side?i.intersectTriangle(o,r,s,!0,a):i.intersectTriangle(s,r,o,2!==e.side,a),null===c)return null;Tm.copy(a),Tm.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(Tm);return l<t.near||l>t.far?null:{distance:l,point:Tm.clone(),object:n}}(n,e,t,i,gl,vl,_l,gS);if(f){a&&(Cm.fromBufferAttribute(a,l),wm.fromBufferAttribute(a,u),Sm.fromBufferAttribute(a,h),f.uv=ia.getUV(gS,gl,vl,_l,Cm,wm,Sm,new Me)),c&&(Cm.fromBufferAttribute(c,l),wm.fromBufferAttribute(c,u),Sm.fromBufferAttribute(c,h),f.uv2=ia.getUV(gS,gl,vl,_l,Cm,wm,Sm,new Me));const p={a:l,b:u,c:h,normal:new V,materialIndex:0};ia.getNormal(gl,vl,_l,p.normal),f.face=p}return f}class c4 extends on{constructor(e=1,t=1,i=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const c=[],l=[],u=[],h=[];let d=0,f=0;function p(m,g,v,_,y,b,x,w,L,C,D){const R=b/L,Y=x/C,Q=b/2,j=x/2,z=w/2,G=L+1,k=C+1;let O=0,N=0;const B=new V;for(let q=0;q<k;q++){const ne=q*Y-j;for(let $=0;$<G;$++)B[m]=($*R-Q)*_,B[g]=ne*y,B[v]=z,l.push(B.x,B.y,B.z),B[m]=0,B[g]=0,B[v]=w>0?1:-1,u.push(B.x,B.y,B.z),h.push($/L),h.push(1-q/C),O+=1}for(let q=0;q<C;q++)for(let ne=0;ne<L;ne++){const ye=d+ne+G*(q+1),oe=d+(ne+1)+G*(q+1),De=d+(ne+1)+G*q;c.push(d+ne+G*q,ye,De),c.push(ye,oe,De),N+=6}a.addGroup(f,N,D),f+=N,d+=O}p("z","y","x",-1,-1,i,t,e,o,r,0),p("z","y","x",1,-1,i,t,-e,o,r,1),p("x","z","y",1,1,e,i,t,s,o,2),p("x","z","y",1,-1,e,i,-t,s,o,3),p("x","y","z",1,-1,e,t,i,s,r,4),p("x","y","z",-1,-1,e,t,-i,s,r,5),this.setIndex(c),this.setAttribute("position",new ht(l,3)),this.setAttribute("normal",new ht(u,3)),this.setAttribute("uv",new ht(h,2))}static fromJSON(e){return new c4(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function tu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];e[t][i]=s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.clone():Array.isArray(s)?s.slice():s}}return e}function Er(n){const e={};for(let t=0;t<n.length;t++){const i=tu(n[t]);for(const s in i)e[s]=i[s]}return e}const C$={clone:tu,merge:Er};class J2 extends $r{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=tu(e.uniforms),this.uniformsGroups=function RPe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;t.uniforms[s]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const s in this.extensions)!0===this.extensions[s]&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class vS extends hr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Dt,this.projectionMatrix=new Dt,this.projectionMatrixInverse=new Dt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Hs extends vS{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*b8*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*e4*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*b8*Math.atan(Math.tan(.5*e4*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,s,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*e4*this.fov)/this.zoom,i=2*t,s=this.aspect*i,r=-.5*s;const o=this.view;if(null!==this.view&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;r+=o.offsetX*s/c,t-=o.offsetY*i/l,s*=o.width/c,i*=o.height/l}const a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class VPe extends hr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const s=new Hs(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new V(1,0,0)),this.add(s);const r=new Hs(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new V(-1,0,0)),this.add(r);const o=new Hs(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new V(0,1,0)),this.add(o);const a=new Hs(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new V(0,-1,0)),this.add(a);const c=new Hs(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new V(0,0,1)),this.add(c);const l=new Hs(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new V(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[s,r,o,a,c,l]=this.children,u=e.getRenderTarget(),h=e.toneMapping,d=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,s),e.setRenderTarget(i,1),e.render(t,r),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,c),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=h,e.xr.enabled=d,i.texture.needsPMREMUpdate=!0}}class Am extends ea{constructor(e,t,i,s,r,o,a,c,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,s,r,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class PPe extends hl{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new Am([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:as}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new c4(5,5,5),r=new J2({name:"CubemapFromEquirect",uniforms:tu(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=t;const o=new cs(s,r),a=t.minFilter;return t.minFilter===al&&(t.minFilter=as),new VPe(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,s){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,s);e.setRenderTarget(r)}}const _S=new V,OPe=new V,NPe=new ho;class b1{constructor(e=new V(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=_S.subVectors(i,t).cross(OPe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(_S),s=this.normal.dot(i);if(0===s)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(i).multiplyScalar(r).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||NPe.getNormalMatrix(e),s=this.coplanarPoint(_S).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const su=new a4,Dm=new V;class yS{constructor(e=new b1,t=new b1,i=new b1,s=new b1,r=new b1,o=new b1){this.planes=[e,t,i,s,r,o]}set(e,t,i,s,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(s),a[4].copy(r),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,s=i[0],r=i[1],o=i[2],a=i[3],c=i[4],l=i[5],u=i[6],h=i[7],d=i[8],f=i[9],p=i[10],m=i[11],g=i[12],v=i[13],_=i[14],y=i[15];return t[0].setComponents(a-s,h-c,m-d,y-g).normalize(),t[1].setComponents(a+s,h+c,m+d,y+g).normalize(),t[2].setComponents(a+r,h+l,m+f,y+v).normalize(),t[3].setComponents(a-r,h-l,m-f,y-v).normalize(),t[4].setComponents(a-o,h-u,m-p,y-_).normalize(),t[5].setComponents(a+o,h+u,m+p,y+_).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),su.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(su)}intersectsSprite(e){return su.center.set(0,0,0),su.radius=.7071067811865476,su.applyMatrix4(e.matrixWorld),this.intersectsSphere(su)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(Dm.x=s.normal.x>0?e.max.x:e.min.x,Dm.y=s.normal.y>0?e.max.y:e.min.y,Dm.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Dm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function w$(){let n=null,e=!1,t=null,i=null;function s(r,o){t(r,o),i=n.requestAnimationFrame(s)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){n=r}}}function FPe(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),i.get(l)},remove:function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=i.get(l);u&&(n.deleteBuffer(u.buffer),i.delete(l))},update:function c(l,u){if(l.isGLBufferAttribute){const d=i.get(l);return void((!d||d.version<l.version)&&i.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version}))}l.isInterleavedBufferAttribute&&(l=l.data);const h=i.get(l);void 0===h?i.set(l,function s(l,u){const h=l.array,d=l.usage,f=n.createBuffer();let p;if(n.bindBuffer(u,f),n.bufferData(u,h,d),l.onUploadCallback(),h instanceof Float32Array)p=5126;else if(h instanceof Uint16Array)if(l.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=5131}else p=5123;else if(h instanceof Int16Array)p=5122;else if(h instanceof Uint32Array)p=5125;else if(h instanceof Int32Array)p=5124;else if(h instanceof Int8Array)p=5120;else if(h instanceof Uint8Array)p=5121;else{if(!(h instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);p=5121}return{buffer:f,type:p,bytesPerElement:h.BYTES_PER_ELEMENT,version:l.version}}(l,u)):h.version<l.version&&(function r(l,u,h){const d=u.array,f=u.updateRange;n.bindBuffer(h,l),-1===f.count?n.bufferSubData(h,0,d):(t?n.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):n.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1)}(h.buffer,l,u),h.version=l.version)}}}class ru extends on{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const r=e/2,o=t/2,a=Math.floor(i),c=Math.floor(s),l=a+1,u=c+1,h=e/a,d=t/c,f=[],p=[],m=[],g=[];for(let v=0;v<u;v++){const _=v*d-o;for(let y=0;y<l;y++)p.push(y*h-r,-_,0),m.push(0,0,1),g.push(y/a),g.push(1-v/c)}for(let v=0;v<c;v++)for(let _=0;_<a;_++){const b=_+l*(v+1),x=_+1+l*(v+1),w=_+1+l*v;f.push(_+l*v,b,w),f.push(b,x,w)}this.setIndex(f),this.setAttribute("position",new ht(p,3)),this.setAttribute("normal",new ht(m,3)),this.setAttribute("uv",new ht(g,2))}static fromJSON(e){return new ru(e.width,e.height,e.widthSegments,e.heightSegments)}}const yn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Ze={common:{diffuse:{value:new $e(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ho},uv2Transform:{value:new ho},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Me(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $e(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new $e(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ho}},sprite:{diffuse:{value:new $e(16777215)},opacity:{value:1},center:{value:new Me(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ho}}},Fa={basic:{uniforms:Er([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.fog]),vertexShader:yn.meshbasic_vert,fragmentShader:yn.meshbasic_frag},lambert:{uniforms:Er([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,Ze.lights,{emissive:{value:new $e(0)}}]),vertexShader:yn.meshlambert_vert,fragmentShader:yn.meshlambert_frag},phong:{uniforms:Er([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,Ze.lights,{emissive:{value:new $e(0)},specular:{value:new $e(1118481)},shininess:{value:30}}]),vertexShader:yn.meshphong_vert,fragmentShader:yn.meshphong_frag},standard:{uniforms:Er([Ze.common,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.roughnessmap,Ze.metalnessmap,Ze.fog,Ze.lights,{emissive:{value:new $e(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:yn.meshphysical_vert,fragmentShader:yn.meshphysical_frag},toon:{uniforms:Er([Ze.common,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.gradientmap,Ze.fog,Ze.lights,{emissive:{value:new $e(0)}}]),vertexShader:yn.meshtoon_vert,fragmentShader:yn.meshtoon_frag},matcap:{uniforms:Er([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,{matcap:{value:null}}]),vertexShader:yn.meshmatcap_vert,fragmentShader:yn.meshmatcap_frag},points:{uniforms:Er([Ze.points,Ze.fog]),vertexShader:yn.points_vert,fragmentShader:yn.points_frag},dashed:{uniforms:Er([Ze.common,Ze.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:yn.linedashed_vert,fragmentShader:yn.linedashed_frag},depth:{uniforms:Er([Ze.common,Ze.displacementmap]),vertexShader:yn.depth_vert,fragmentShader:yn.depth_frag},normal:{uniforms:Er([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,{opacity:{value:1}}]),vertexShader:yn.meshnormal_vert,fragmentShader:yn.meshnormal_frag},sprite:{uniforms:Er([Ze.sprite,Ze.fog]),vertexShader:yn.sprite_vert,fragmentShader:yn.sprite_frag},background:{uniforms:{uvTransform:{value:new ho},t2D:{value:null}},vertexShader:yn.background_vert,fragmentShader:yn.background_frag},cube:{uniforms:Er([Ze.envmap,{opacity:{value:1}}]),vertexShader:yn.cube_vert,fragmentShader:yn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:yn.equirect_vert,fragmentShader:yn.equirect_frag},distanceRGBA:{uniforms:Er([Ze.common,Ze.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:yn.distanceRGBA_vert,fragmentShader:yn.distanceRGBA_frag},shadow:{uniforms:Er([Ze.lights,Ze.fog,{color:{value:new $e(0)},opacity:{value:1}}]),vertexShader:yn.shadow_vert,fragmentShader:yn.shadow_frag}};function NNe(n,e,t,i,s,r){const o=new $e(0);let c,l,a=!0===s?0:1,u=null,h=0,d=null;function p(m,g){t.buffers.color.setClear(m.r,m.g,m.b,g,r)}return{getClearColor:function(){return o},setClearColor:function(m,g=1){o.set(m),a=g,p(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(m){a=m,p(o,a)},render:function f(m,g){let v=!1,_=!0===g.isScene?g.background:null;_&&_.isTexture&&(_=e.get(_));const y=n.xr,b=y.getSession&&y.getSession();b&&"additive"===b.environmentBlendMode&&(_=null),null===_?p(o,a):_&&_.isColor&&(p(_,1),v=!0),(n.autoClear||v)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),_&&(_.isCubeTexture||306===_.mapping)?(void 0===l&&(l=new cs(new c4(1,1,1),new J2({name:"BackgroundCubeMaterial",uniforms:tu(Fa.cube.uniforms),vertexShader:Fa.cube.vertexShader,fragmentShader:Fa.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(x,w,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=_,l.material.uniforms.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,(u!==_||h!==_.version||d!==n.toneMapping)&&(l.material.needsUpdate=!0,u=_,h=_.version,d=n.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null)):_&&_.isTexture&&(void 0===c&&(c=new cs(new ru(2,2),new J2({name:"BackgroundMaterial",uniforms:tu(Fa.background.uniforms),vertexShader:Fa.background.vertexShader,fragmentShader:Fa.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=_,!0===_.matrixAutoUpdate&&_.updateMatrix(),c.material.uniforms.uvTransform.value.copy(_.matrix),(u!==_||h!==_.version||d!==n.toneMapping)&&(c.material.needsUpdate=!0,u=_,h=_.version,d=n.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null))}}}function FNe(n,e,t,i){const s=n.getParameter(34921),r=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==r,a={},c=g(null);let l=c,u=!1;function f(z){return i.isWebGL2?n.bindVertexArray(z):r.bindVertexArrayOES(z)}function p(z){return i.isWebGL2?n.deleteVertexArray(z):r.deleteVertexArrayOES(z)}function g(z){const G=[],k=[],O=[];for(let N=0;N<s;N++)G[N]=0,k[N]=0,O[N]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:G,enabledAttributes:k,attributeDivisors:O,object:z,attributes:{},index:null}}function y(){const z=l.newAttributes;for(let G=0,k=z.length;G<k;G++)z[G]=0}function b(z){x(z,0)}function x(z,G){const O=l.enabledAttributes,N=l.attributeDivisors;l.newAttributes[z]=1,0===O[z]&&(n.enableVertexAttribArray(z),O[z]=1),N[z]!==G&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,G),N[z]=G)}function w(){const z=l.newAttributes,G=l.enabledAttributes;for(let k=0,O=G.length;k<O;k++)G[k]!==z[k]&&(n.disableVertexAttribArray(k),G[k]=0)}function L(z,G,k,O,N,B){!0!==i.isWebGL2||5124!==k&&5125!==k?n.vertexAttribPointer(z,G,k,O,N,B):n.vertexAttribIPointer(z,G,k,N,B)}function Q(){j(),u=!0,l!==c&&(l=c,f(l.object))}function j(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function h(z,G,k,O,N){let B=!1;if(o){const q=function m(z,G,k){const O=!0===k.wireframe;let N=a[z.id];void 0===N&&(N={},a[z.id]=N);let B=N[G.id];void 0===B&&(B={},N[G.id]=B);let q=B[O];return void 0===q&&(q=g(function d(){return i.isWebGL2?n.createVertexArray():r.createVertexArrayOES()}()),B[O]=q),q}(O,k,G);l!==q&&(l=q,f(l.object)),B=function v(z,G,k,O){const N=l.attributes,B=G.attributes;let q=0;const ne=k.getAttributes();for(const $ in ne)if(ne[$].location>=0){const oe=N[$];let De=B[$];if(void 0===De&&("instanceMatrix"===$&&z.instanceMatrix&&(De=z.instanceMatrix),"instanceColor"===$&&z.instanceColor&&(De=z.instanceColor)),void 0===oe||oe.attribute!==De||De&&oe.data!==De.data)return!0;q++}return l.attributesNum!==q||l.index!==O}(z,O,k,N),B&&function _(z,G,k,O){const N={},B=G.attributes;let q=0;const ne=k.getAttributes();for(const $ in ne)if(ne[$].location>=0){let oe=B[$];void 0===oe&&("instanceMatrix"===$&&z.instanceMatrix&&(oe=z.instanceMatrix),"instanceColor"===$&&z.instanceColor&&(oe=z.instanceColor));const De={};De.attribute=oe,oe&&oe.data&&(De.data=oe.data),N[$]=De,q++}l.attributes=N,l.attributesNum=q,l.index=O}(z,O,k,N)}else{const q=!0===G.wireframe;(l.geometry!==O.id||l.program!==k.id||l.wireframe!==q)&&(l.geometry=O.id,l.program=k.id,l.wireframe=q,B=!0)}null!==N&&t.update(N,34963),(B||u)&&(u=!1,function C(z,G,k,O){if(!1===i.isWebGL2&&(z.isInstancedMesh||O.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;y();const N=O.attributes,B=k.getAttributes(),q=G.defaultAttributeValues;for(const ne in B){const $=B[ne];if($.location>=0){let ye=N[ne];if(void 0===ye&&("instanceMatrix"===ne&&z.instanceMatrix&&(ye=z.instanceMatrix),"instanceColor"===ne&&z.instanceColor&&(ye=z.instanceColor)),void 0!==ye){const oe=ye.normalized,De=ye.itemSize,he=t.get(ye);if(void 0===he)continue;const Ie=he.buffer,He=he.type,Qe=he.bytesPerElement;if(ye.isInterleavedBufferAttribute){const Pe=ye.data,Ht=Pe.stride,be=ye.offset;if(Pe.isInstancedInterleavedBuffer){for(let me=0;me<$.locationSize;me++)x($.location+me,Pe.meshPerAttribute);!0!==z.isInstancedMesh&&void 0===O._maxInstanceCount&&(O._maxInstanceCount=Pe.meshPerAttribute*Pe.count)}else for(let me=0;me<$.locationSize;me++)b($.location+me);n.bindBuffer(34962,Ie);for(let me=0;me<$.locationSize;me++)L($.location+me,De/$.locationSize,He,oe,Ht*Qe,(be+De/$.locationSize*me)*Qe)}else{if(ye.isInstancedBufferAttribute){for(let Pe=0;Pe<$.locationSize;Pe++)x($.location+Pe,ye.meshPerAttribute);!0!==z.isInstancedMesh&&void 0===O._maxInstanceCount&&(O._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let Pe=0;Pe<$.locationSize;Pe++)b($.location+Pe);n.bindBuffer(34962,Ie);for(let Pe=0;Pe<$.locationSize;Pe++)L($.location+Pe,De/$.locationSize,He,oe,De*Qe,De/$.locationSize*Pe*Qe)}}else if(void 0!==q){const oe=q[ne];if(void 0!==oe)switch(oe.length){case 2:n.vertexAttrib2fv($.location,oe);break;case 3:n.vertexAttrib3fv($.location,oe);break;case 4:n.vertexAttrib4fv($.location,oe);break;default:n.vertexAttrib1fv($.location,oe)}}}}w()}(z,G,k,O),null!==N&&n.bindBuffer(34963,t.get(N).buffer))},reset:Q,resetDefaultState:j,dispose:function D(){Q();for(const z in a){const G=a[z];for(const k in G){const O=G[k];for(const N in O)p(O[N].object),delete O[N];delete G[k]}delete a[z]}},releaseStatesOfGeometry:function R(z){if(void 0===a[z.id])return;const G=a[z.id];for(const k in G){const O=G[k];for(const N in O)p(O[N].object),delete O[N];delete G[k]}delete a[z.id]},releaseStatesOfProgram:function Y(z){for(const G in a){const k=a[G];if(void 0===k[z.id])continue;const O=k[z.id];for(const N in O)p(O[N].object),delete O[N];delete k[z.id]}},initAttributes:y,enableAttribute:b,disableUnusedAttributes:w}}function BNe(n,e,t,i){const s=i.isWebGL2;let r;this.setMode=function o(l){r=l},this.render=function a(l,u){n.drawArrays(r,l,u),t.update(u,r,1)},this.renderInstances=function c(l,u,h){if(0===h)return;let d,f;if(s)d=n,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===d)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");d[f](r,l,u,h),t.update(u,r,h)}}function UNe(n,e,t){let i;function r(L){if("highp"===L){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";L="mediump"}return"mediump"===L&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const c=r(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const l=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,h=n.getParameter(34930),d=n.getParameter(35660),f=n.getParameter(3379),p=n.getParameter(34076),m=n.getParameter(34921),g=n.getParameter(36347),v=n.getParameter(36348),_=n.getParameter(36349),y=d>0,b=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function s(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const L=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:_,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?n.getParameter(36183):0}}function GNe(n){const e=this;let t=null,i=0,s=!1,r=!1;const o=new b1,a=new ho,c={value:null,needsUpdate:!1};function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(h,d,f,p){const m=null!==h?h.length:0;let g=null;if(0!==m){if(g=c.value,!0!==p||null===g){const v=f+4*m,_=d.matrixWorldInverse;a.getNormalMatrix(_),(null===g||g.length<v)&&(g=new Float32Array(v));for(let y=0,b=f;y!==m;++y,b+=4)o.copy(h[y]).applyMatrix4(_,a),o.normal.toArray(g,b),g[b+3]=o.constant}c.value=g,c.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d,f){const p=0!==h.length||d||0!==i||s;return s=d,t=u(h,f,0),i=h.length,p},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1,l()},this.setState=function(h,d,f){const p=h.clippingPlanes,m=h.clipIntersection,g=h.clipShadows,v=n.get(h);if(!s||null===p||0===p.length||r&&!g)r?u(null):l();else{const _=r?0:i,y=4*_;let b=v.clippingState||null;c.value=b,b=u(p,d,y,f);for(let x=0;x!==y;++x)b[x]=t[x];v.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=_}}}function WNe(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function s(o){const a=o.target;a.removeEventListener("dispose",s);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const c=o.image;if(c&&c.height>0){const l=new PPe(c.height/2);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",s),t(l.texture,o.mapping)}return null}}}return o},dispose:function r(){e=new WeakMap}}}Fa.physical={uniforms:Er([Fa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Me(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new $e(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new $e(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new $e(1,1,1)},specularColorMap:{value:null}}]),vertexShader:yn.meshphysical_vert,fragmentShader:yn.meshphysical_frag};class Lm extends vS{constructor(e=-1,t=1,i=1,s=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-e,o=i+e,a=s+t,c=s-t;if(null!==this.view&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=l*this.view.offsetX,o=r+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const S$=[.125,.215,.35,.446,.526,.582],bS=new Lm,T$=new $e;let xS=null;const u4=(1+Math.sqrt(5))/2,au=1/u4,E$=[new V(1,1,1),new V(-1,1,1),new V(1,1,-1),new V(-1,1,-1),new V(0,u4,au),new V(0,u4,-au),new V(au,0,u4),new V(-au,0,u4),new V(u4,au,0),new V(-u4,au,0)];class A${constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){xS=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,s,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=z$(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=L$(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(xS),e.scissorTest=!1,zm(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),xS=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:as,minFilter:as,generateMipmaps:!1,type:P6,format:K1,encoding:ll,depthBuffer:!1},s=D$(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=D$(e,t,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function jNe(n){const e=[],t=[],i=[];let s=n;const r=n-4+1+S$.length;for(let o=0;o<r;o++){const a=Math.pow(2,s);t.push(a);let c=1/a;o>n-4?c=S$[o-n+4-1]:0===o&&(c=0),i.push(c);const l=1/(a-2),u=-l,h=1+l,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,p=6,m=3,g=2,v=1,_=new Float32Array(m*p*f),y=new Float32Array(g*p*f),b=new Float32Array(v*p*f);for(let w=0;w<f;w++){const L=w%3*2/3-1,C=w>2?0:-1;_.set([L,C,0,L+2/3,C,0,L+2/3,C+1,0,L,C,0,L+2/3,C+1,0,L,C+1,0],m*p*w),y.set(d,g*p*w),b.set([w,w,w,w,w,w],v*p*w)}const x=new on;x.setAttribute("position",new Pi(_,m)),x.setAttribute("uv",new Pi(y,g)),x.setAttribute("faceIndex",new Pi(b,v)),e.push(x),s>4&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(r)),this._blurMaterial=function $Ne(n,e,t){const i=new Float32Array(20),s=new V(0,1,0);return new J2({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,e,t)}return s}_compileMaterial(e){const t=new cs(this._lodPlanes[0],e);this._renderer.compile(t,bS)}_sceneToCubeUV(e,t,i,s){const a=new Hs(90,1,t,i),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,d=u.toneMapping;u.getClearColor(T$),u.toneMapping=0,u.autoClear=!1;const f=new Wo({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new cs(new c4,f);let m=!1;const g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,m=!0):(f.color.copy(T$),m=!0);for(let v=0;v<6;v++){const _=v%3;0===_?(a.up.set(0,c[v],0),a.lookAt(l[v],0,0)):1===_?(a.up.set(0,0,c[v]),a.lookAt(0,l[v],0)):(a.up.set(0,c[v],0),a.lookAt(0,0,l[v]));const y=this._cubeSize;zm(s,_*y,v>2?y:0,y,y),u.setRenderTarget(s),m&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=d,u.autoClear=h,e.background=g}_textureToCubeUV(e,t){const i=this._renderer,s=301===e.mapping||302===e.mapping;s?(null===this._cubemapMaterial&&(this._cubemapMaterial=z$()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=L$());const r=s?this._cubemapMaterial:this._equirectMaterial,o=new cs(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const c=this._cubeSize;zm(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,bS)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const r=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(e,s-1,s,r,E$[(s-1)%E$.length])}t.autoClear=i}_blur(e,t,i,s,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,s,"latitudinal",r),this._halfBlur(o,e,i,i,s,"longitudinal",r)}_halfBlur(e,t,i,s,r,o,a){const c=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const h=new cs(this._lodPlanes[s],l),d=l.uniforms,f=this._sizeLods[i]-1,p=isFinite(r)?Math.PI/(2*f):2*Math.PI/39,m=r/p,g=isFinite(r)?1+Math.floor(3*m):20;g>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const v=[];let _=0;for(let L=0;L<20;++L){const C=L/m,D=Math.exp(-C*C/2);v.push(D),0===L?_+=D:L<g&&(_+=2*D)}for(let L=0;L<v.length;L++)v[L]=v[L]/_;d.envMap.value=e.texture,d.samples.value=g,d.weights.value=v,d.latitudinal.value="latitudinal"===o,a&&(d.poleAxis.value=a);const{_lodMax:y}=this;d.dTheta.value=p,d.mipInt.value=y-i;const b=this._sizeLods[s];zm(t,3*b*(s>y-4?s-y+4:0),4*(this._cubeSize-b),3*b,2*b),c.setRenderTarget(t),c.render(h,bS)}}function D$(n,e,t){const i=new hl(n,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function zm(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function L$(){return new J2({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function z$(){return new J2({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function qNe(n){let e=new WeakMap,t=null;function r(a){const c=a.target;c.removeEventListener("dispose",r);const l=e.get(c);void 0!==l&&(e.delete(c),l.dispose())}return{get:function i(a){if(a&&a.isTexture){const c=a.mapping,l=303===c||304===c,u=301===c||302===c;if(l||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let h=e.get(a);return null===t&&(t=new A$(n)),h=l?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}if(e.has(a))return e.get(a).texture;{const h=a.image;if(l&&h&&h.height>0||u&&h&&function s(a){let c=0;for(let u=0;u<6;u++)void 0!==a[u]&&c++;return 6===c}(h)){null===t&&(t=new A$(n));const d=l?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",r),d.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function YNe(n){const e={};function t(i){if(void 0!==e[i])return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const s=t(i);return null===s&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function XNe(n,e,t,i){const s={},r=new WeakMap;function o(h){const d=h.target;null!==d.index&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);d.removeEventListener("dispose",o),delete s[d.id];const f=r.get(d);f&&(e.remove(f),r.delete(d)),i.releaseStatesOfGeometry(d),!0===d.isInstancedBufferGeometry&&delete d._maxInstanceCount,t.memory.geometries--}function l(h){const d=[],f=h.index,p=h.attributes.position;let m=0;if(null!==f){const _=f.array;m=f.version;for(let y=0,b=_.length;y<b;y+=3){const x=_[y+0],w=_[y+1],L=_[y+2];d.push(x,w,w,L,L,x)}}else{m=p.version;for(let y=0,b=p.array.length/3-1;y<b;y+=3){const x=y+0,w=y+1,L=y+2;d.push(x,w,w,L,L,x)}}const g=new(o$(d)?x$:b$)(d,1);g.version=m;const v=r.get(h);v&&e.remove(v),r.set(h,g)}return{get:function a(h,d){return!0===s[d.id]||(d.addEventListener("dispose",o),s[d.id]=!0,t.memory.geometries++),d},update:function c(h){const d=h.attributes;for(const p in d)e.update(d[p],34962);const f=h.morphAttributes;for(const p in f){const m=f[p];for(let g=0,v=m.length;g<v;g++)e.update(m[g],34962)}},getWireframeAttribute:function u(h){const d=r.get(h);if(d){const f=h.index;null!==f&&d.version<f.version&&l(h)}else l(h);return r.get(h)}}}function ZNe(n,e,t,i){const s=i.isWebGL2;let r,a,c;this.setMode=function o(d){r=d},this.setIndex=function l(d){a=d.type,c=d.bytesPerElement},this.render=function u(d,f){n.drawElements(r,f,a,d*c),t.update(f,r,1)},this.renderInstances=function h(d,f,p){if(0===p)return;let m,g;if(s)m=n,g="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",null===m)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[g](r,f,a,d*c,p),t.update(f,r,p)}}function KNe(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function s(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(r,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(r/3);break;case 1:t.lines+=a*(r/2);break;case 3:t.lines+=a*(r-1);break;case 2:t.lines+=a*r;break;case 0:t.points+=a*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function QNe(n,e){return n[0]-e[0]}function JNe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function eFe(n,e,t){const i={},s=new Float32Array(8),r=new WeakMap,o=new jn,a=[];for(let l=0;l<8;l++)a[l]=[l,0];return{update:function c(l,u,h,d){const f=l.morphTargetInfluences;if(!0===e.isWebGL2){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=void 0!==p?p.length:0;let g=r.get(u);if(void 0===g||g.count!==m){let G=function(){j.dispose(),r.delete(u),u.removeEventListener("dispose",G)};void 0!==g&&g.texture.dispose();const y=void 0!==u.morphAttributes.position,b=void 0!==u.morphAttributes.normal,x=void 0!==u.morphAttributes.color,w=u.morphAttributes.position||[],L=u.morphAttributes.normal||[],C=u.morphAttributes.color||[];let D=0;!0===y&&(D=1),!0===b&&(D=2),!0===x&&(D=3);let R=u.attributes.position.count*D,Y=1;R>e.maxTextureSize&&(Y=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const Q=new Float32Array(R*Y*4*m),j=new Qw(Q,R,Y,m);j.type=cl,j.needsUpdate=!0;const z=4*D;for(let k=0;k<m;k++){const O=w[k],N=L[k],B=C[k],q=R*Y*4*k;for(let ne=0;ne<O.count;ne++){const $=ne*z;!0===y&&(o.fromBufferAttribute(O,ne),Q[q+$+0]=o.x,Q[q+$+1]=o.y,Q[q+$+2]=o.z,Q[q+$+3]=0),!0===b&&(o.fromBufferAttribute(N,ne),Q[q+$+4]=o.x,Q[q+$+5]=o.y,Q[q+$+6]=o.z,Q[q+$+7]=0),!0===x&&(o.fromBufferAttribute(B,ne),Q[q+$+8]=o.x,Q[q+$+9]=o.y,Q[q+$+10]=o.z,Q[q+$+11]=4===B.itemSize?o.w:1)}}g={count:m,texture:j,size:new Me(R,Y)},r.set(u,g),u.addEventListener("dispose",G)}let v=0;for(let y=0;y<f.length;y++)v+=f[y];const _=u.morphTargetsRelative?1:1-v;d.getUniforms().setValue(n,"morphTargetBaseInfluence",_),d.getUniforms().setValue(n,"morphTargetInfluences",f),d.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const p=void 0===f?0:f.length;let m=i[u.id];if(void 0===m||m.length!==p){m=[];for(let b=0;b<p;b++)m[b]=[b,0];i[u.id]=m}for(let b=0;b<p;b++){const x=m[b];x[0]=b,x[1]=f[b]}m.sort(JNe);for(let b=0;b<8;b++)b<p&&m[b][1]?(a[b][0]=m[b][0],a[b][1]=m[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(QNe);const g=u.morphAttributes.position,v=u.morphAttributes.normal;let _=0;for(let b=0;b<8;b++){const x=a[b],w=x[0],L=x[1];w!==Number.MAX_SAFE_INTEGER&&L?(g&&u.getAttribute("morphTarget"+b)!==g[w]&&u.setAttribute("morphTarget"+b,g[w]),v&&u.getAttribute("morphNormal"+b)!==v[w]&&u.setAttribute("morphNormal"+b,v[w]),s[b]=L,_+=L):(g&&!0===u.hasAttribute("morphTarget"+b)&&u.deleteAttribute("morphTarget"+b),v&&!0===u.hasAttribute("morphNormal"+b)&&u.deleteAttribute("morphNormal"+b),s[b]=0)}const y=u.morphTargetsRelative?1:1-_;d.getUniforms().setValue(n,"morphTargetBaseInfluence",y),d.getUniforms().setValue(n,"morphTargetInfluences",s)}}}}function tFe(n,e,t,i){let s=new WeakMap;function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),null!==l.instanceColor&&t.remove(l.instanceColor)}return{update:function r(c){const l=i.render.frame,h=e.get(c,c.geometry);return s.get(h)!==l&&(e.update(h),s.set(h,l)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),t.update(c.instanceMatrix,34962),null!==c.instanceColor&&t.update(c.instanceColor,34962)),h},dispose:function o(){s=new WeakMap}}}const k$=new ea,R$=new Qw,I$=new l$,H$=new Am,V$=[],P$=[],O$=new Float32Array(16),N$=new Float32Array(9),F$=new Float32Array(4);function cu(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let r=V$[s];if(void 0===r&&(r=new Float32Array(s),V$[s]=r),0!==e){i.toArray(r,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(r,a)}return r}function qr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Yr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function km(n,e){let t=P$[e];void 0===t&&(t=new Int32Array(e),P$[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function nFe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function iFe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qr(t,e))return;n.uniform2fv(this.addr,e),Yr(t,e)}}function sFe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(qr(t,e))return;n.uniform3fv(this.addr,e),Yr(t,e)}}function rFe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qr(t,e))return;n.uniform4fv(this.addr,e),Yr(t,e)}}function oFe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(qr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Yr(t,e)}else{if(qr(t,i))return;F$.set(i),n.uniformMatrix2fv(this.addr,!1,F$),Yr(t,i)}}function aFe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(qr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Yr(t,e)}else{if(qr(t,i))return;N$.set(i),n.uniformMatrix3fv(this.addr,!1,N$),Yr(t,i)}}function cFe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(qr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Yr(t,e)}else{if(qr(t,i))return;O$.set(i),n.uniformMatrix4fv(this.addr,!1,O$),Yr(t,i)}}function lFe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function uFe(n,e){const t=this.cache;qr(t,e)||(n.uniform2iv(this.addr,e),Yr(t,e))}function hFe(n,e){const t=this.cache;qr(t,e)||(n.uniform3iv(this.addr,e),Yr(t,e))}function dFe(n,e){const t=this.cache;qr(t,e)||(n.uniform4iv(this.addr,e),Yr(t,e))}function fFe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function pFe(n,e){const t=this.cache;qr(t,e)||(n.uniform2uiv(this.addr,e),Yr(t,e))}function mFe(n,e){const t=this.cache;qr(t,e)||(n.uniform3uiv(this.addr,e),Yr(t,e))}function gFe(n,e){const t=this.cache;qr(t,e)||(n.uniform4uiv(this.addr,e),Yr(t,e))}function vFe(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2D(e||k$,s)}function _Fe(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||I$,s)}function yFe(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||H$,s)}function bFe(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||R$,s)}function MFe(n,e){n.uniform1fv(this.addr,e)}function CFe(n,e){const t=cu(e,this.size,2);n.uniform2fv(this.addr,t)}function wFe(n,e){const t=cu(e,this.size,3);n.uniform3fv(this.addr,t)}function SFe(n,e){const t=cu(e,this.size,4);n.uniform4fv(this.addr,t)}function TFe(n,e){const t=cu(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function EFe(n,e){const t=cu(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function AFe(n,e){const t=cu(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function DFe(n,e){n.uniform1iv(this.addr,e)}function LFe(n,e){n.uniform2iv(this.addr,e)}function zFe(n,e){n.uniform3iv(this.addr,e)}function kFe(n,e){n.uniform4iv(this.addr,e)}function RFe(n,e){n.uniform1uiv(this.addr,e)}function IFe(n,e){n.uniform2uiv(this.addr,e)}function HFe(n,e){n.uniform3uiv(this.addr,e)}function VFe(n,e){n.uniform4uiv(this.addr,e)}function PFe(n,e,t){const i=e.length,s=km(t,i);n.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)t.setTexture2D(e[r]||k$,s[r])}function OFe(n,e,t){const i=e.length,s=km(t,i);n.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)t.setTexture3D(e[r]||I$,s[r])}function NFe(n,e,t){const i=e.length,s=km(t,i);n.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)t.setTextureCube(e[r]||H$,s[r])}function FFe(n,e,t){const i=e.length,s=km(t,i);n.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)t.setTexture2DArray(e[r]||R$,s[r])}class UFe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function xFe(n){switch(n){case 5126:return nFe;case 35664:return iFe;case 35665:return sFe;case 35666:return rFe;case 35674:return oFe;case 35675:return aFe;case 35676:return cFe;case 5124:case 35670:return lFe;case 35667:case 35671:return uFe;case 35668:case 35672:return hFe;case 35669:case 35673:return dFe;case 5125:return fFe;case 36294:return pFe;case 36295:return mFe;case 36296:return gFe;case 35678:case 36198:case 36298:case 36306:case 35682:return vFe;case 35679:case 36299:case 36307:return _Fe;case 35680:case 36300:case 36308:case 36293:return yFe;case 36289:case 36303:case 36311:case 36292:return bFe}}(t.type)}}class GFe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function BFe(n){switch(n){case 5126:return MFe;case 35664:return CFe;case 35665:return wFe;case 35666:return SFe;case 35674:return TFe;case 35675:return EFe;case 35676:return AFe;case 5124:case 35670:return DFe;case 35667:case 35671:return LFe;case 35668:case 35672:return zFe;case 35669:case 35673:return kFe;case 5125:return RFe;case 36294:return IFe;case 36295:return HFe;case 36296:return VFe;case 35678:case 36198:case 36298:case 36306:case 35682:return PFe;case 35679:case 36299:case 36307:return OFe;case 35680:case 36300:case 36308:case 36293:return NFe;case 36289:case 36303:case 36311:case 36292:return FFe}}(t.type)}}class WFe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let r=0,o=s.length;r!==o;++r){const a=s[r];a.setValue(e,t[a.id],i)}}}const CS=/(\w+)(\])?(\[|\.)?/g;function B$(n,e){n.seq.push(e),n.map[e.id]=e}function jFe(n,e,t){const i=n.name,s=i.length;for(CS.lastIndex=0;;){const r=CS.exec(i),o=CS.lastIndex;let a=r[1];const l=r[3];if("]"===r[2]&&(a|=0),void 0===l||"["===l&&o+2===s){B$(t,void 0===l?new UFe(a,n,e):new GFe(a,n,e));break}{let h=t.map[a];void 0===h&&(h=new WFe(a),B$(t,h)),t=h}}}class Rm{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let s=0;s<i;++s){const r=e.getActiveUniform(t,s);jFe(r,e.getUniformLocation(t,r.name),this)}}setValue(e,t,i,s){const r=this.map[t];void 0!==r&&r.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];void 0!==s&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let r=0,o=t.length;r!==o;++r){const a=t[r],c=i[a.id];!1!==c.needsUpdate&&a.setValue(e,c.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,r=e.length;s!==r;++s){const o=e[s];o.id in t&&i.push(o)}return i}}function U$(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let $Fe=0;function G$(n,e,t){const i=n.getShaderParameter(e,35713),s=n.getShaderInfoLog(e).trim();if(i&&""===s)return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const o=parseInt(r[1]);return t.toUpperCase()+"\n\n"+s+"\n\n"+function qFe(n,e){const t=n.split("\n"),i=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let o=s;o<r;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return s}function XFe(n,e){const t=function YFe(n){switch(n){case ll:return["Linear","( value )"];case Zn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function ZFe(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function T8(n){return""!==n}function W$(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function j$(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const eBe=/^[ \t]*#include +<([\w\d./]+)>/gm;function wS(n){return n.replace(eBe,tBe)}function tBe(n,e){const t=yn[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return wS(t)}const nBe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function $$(n){return n.replace(nBe,iBe)}function iBe(n,e,t,i){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function q$(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function lBe(n,e,t,i){const s=n.getContext(),r=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=function sBe(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),l=function rBe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function oBe(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),h=function aBe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),d=function cBe(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),f=t.isWebGL2?"":function KFe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(T8).join("\n")}(t),p=function QFe(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(r),m=s.createProgram();let g,v,_=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(g=[p].filter(T8).join("\n"),g.length>0&&(g+="\n"),v=[f,p].filter(T8).join("\n"),v.length>0&&(v+="\n")):(g=[q$(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(T8).join("\n"),v=[f,q$(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?yn.tonemapping_pars_fragment:"",0!==t.toneMapping?ZFe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",yn.encodings_pars_fragment,XFe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(T8).join("\n")),o=wS(o),o=W$(o,t),o=j$(o,t),a=wS(a),a=W$(a,t),a=j$(a,t),o=$$(o),a=$$(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(_="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=_+v+a,x=U$(s,35633,_+g+o),w=U$(s,35632,b);if(s.attachShader(m,x),s.attachShader(m,w),void 0!==t.index0AttributeName?s.bindAttribLocation(m,0,t.index0AttributeName):!0===t.morphTargets&&s.bindAttribLocation(m,0,"position"),s.linkProgram(m),n.debug.checkShaderErrors){const D=s.getProgramInfoLog(m).trim(),R=s.getShaderInfoLog(x).trim(),Y=s.getShaderInfoLog(w).trim();let Q=!0,j=!0;if(!1===s.getProgramParameter(m,35714)){Q=!1;const z=G$(s,x,"vertex"),G=G$(s,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+D+"\n"+z+"\n"+G)}else""!==D?console.warn("THREE.WebGLProgram: Program Info Log:",D):(""===R||""===Y)&&(j=!1);j&&(this.diagnostics={runnable:Q,programLog:D,vertexShader:{log:R,prefix:g},fragmentShader:{log:Y,prefix:v}})}let L,C;return s.deleteShader(x),s.deleteShader(w),this.getUniforms=function(){return void 0===L&&(L=new Rm(s,m)),L},this.getAttributes=function(){return void 0===C&&(C=function JFe(n,e){const t={},i=n.getProgramParameter(e,35721);for(let s=0;s<i;s++){const r=n.getActiveAttrib(e,s),o=r.name;let a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),t[o]={type:r.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(s,m)),C},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(m),this.program=void 0},this.name=t.shaderName,this.id=$Fe++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=w,this}let uBe=0;class hBe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,s=this._getShaderStage(e.vertexShader),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(s)&&(o.add(s),s.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new dBe(e),t.set(e,i)),i}}class dBe{constructor(e){this.id=uBe++,this.code=e,this.usedTimes=0}}function fBe(n,e,t,i,s,r,o){const a=new oS,c=new hBe,l=[],u=s.isWebGL2,h=s.logarithmicDepthBuffer,d=s.vertexTextures;let f=s.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function m(C,D,R,Y,Q){const j=Y.fog,z=Q.geometry,k=(C.isMeshStandardMaterial?t:e).get(C.envMap||(C.isMeshStandardMaterial?Y.environment:null)),O=k&&306===k.mapping?k.image.height:null,N=p[C.type];null!==C.precision&&(f=s.getMaxPrecision(C.precision),f!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",f,"instead."));const B=z.morphAttributes.position||z.morphAttributes.normal||z.morphAttributes.color,q=void 0!==B?B.length:0;let $,ye,oe,De,ne=0;if(void 0!==z.morphAttributes.position&&(ne=1),void 0!==z.morphAttributes.normal&&(ne=2),void 0!==z.morphAttributes.color&&(ne=3),N){const Ht=Fa[N];$=Ht.vertexShader,ye=Ht.fragmentShader}else $=C.vertexShader,ye=C.fragmentShader,c.update(C),oe=c.getVertexShaderID(C),De=c.getFragmentShaderID(C);const he=n.getRenderTarget(),He=C.clearcoat>0,Qe=C.iridescence>0;return{isWebGL2:u,shaderID:N,shaderName:C.type,vertexShader:$,fragmentShader:ye,defines:C.defines,customVertexShaderID:oe,customFragmentShaderID:De,isRawShaderMaterial:!0===C.isRawShaderMaterial,glslVersion:C.glslVersion,precision:f,instancing:!0===Q.isInstancedMesh,instancingColor:!0===Q.isInstancedMesh&&null!==Q.instanceColor,supportsVertexTextures:d,outputEncoding:null===he?n.outputEncoding:!0===he.isXRRenderTarget?he.texture.encoding:ll,map:!!C.map,matcap:!!C.matcap,envMap:!!k,envMapMode:k&&k.mapping,envMapCubeUVHeight:O,lightMap:!!C.lightMap,aoMap:!!C.aoMap,emissiveMap:!!C.emissiveMap,bumpMap:!!C.bumpMap,normalMap:!!C.normalMap,objectSpaceNormalMap:1===C.normalMapType,tangentSpaceNormalMap:0===C.normalMapType,decodeVideoTexture:!!C.map&&!0===C.map.isVideoTexture&&C.map.encoding===Zn,clearcoat:He,clearcoatMap:He&&!!C.clearcoatMap,clearcoatRoughnessMap:He&&!!C.clearcoatRoughnessMap,clearcoatNormalMap:He&&!!C.clearcoatNormalMap,iridescence:Qe,iridescenceMap:Qe&&!!C.iridescenceMap,iridescenceThicknessMap:Qe&&!!C.iridescenceThicknessMap,displacementMap:!!C.displacementMap,roughnessMap:!!C.roughnessMap,metalnessMap:!!C.metalnessMap,specularMap:!!C.specularMap,specularIntensityMap:!!C.specularIntensityMap,specularColorMap:!!C.specularColorMap,opaque:!1===C.transparent&&1===C.blending,alphaMap:!!C.alphaMap,alphaTest:C.alphaTest>0,gradientMap:!!C.gradientMap,sheen:C.sheen>0,sheenColorMap:!!C.sheenColorMap,sheenRoughnessMap:!!C.sheenRoughnessMap,transmission:C.transmission>0,transmissionMap:!!C.transmissionMap,thicknessMap:!!C.thicknessMap,combine:C.combine,vertexTangents:!!C.normalMap&&!!z.attributes.tangent,vertexColors:C.vertexColors,vertexAlphas:!0===C.vertexColors&&!!z.attributes.color&&4===z.attributes.color.itemSize,vertexUvs:!!(C.map||C.bumpMap||C.normalMap||C.specularMap||C.alphaMap||C.emissiveMap||C.roughnessMap||C.metalnessMap||C.clearcoatMap||C.clearcoatRoughnessMap||C.clearcoatNormalMap||C.iridescenceMap||C.iridescenceThicknessMap||C.displacementMap||C.transmissionMap||C.thicknessMap||C.specularIntensityMap||C.specularColorMap||C.sheenColorMap||C.sheenRoughnessMap),uvsVertexOnly:!(C.map||C.bumpMap||C.normalMap||C.specularMap||C.alphaMap||C.emissiveMap||C.roughnessMap||C.metalnessMap||C.clearcoatNormalMap||C.iridescenceMap||C.iridescenceThicknessMap||C.transmission>0||C.transmissionMap||C.thicknessMap||C.specularIntensityMap||C.specularColorMap||C.sheen>0||C.sheenColorMap||C.sheenRoughnessMap||!C.displacementMap),fog:!!j,useFog:!0===C.fog,fogExp2:j&&j.isFogExp2,flatShading:!!C.flatShading,sizeAttenuation:C.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===Q.isSkinnedMesh,morphTargets:void 0!==z.morphAttributes.position,morphNormals:void 0!==z.morphAttributes.normal,morphColors:void 0!==z.morphAttributes.color,morphTargetsCount:q,morphTextureStride:ne,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&R.length>0,shadowMapType:n.shadowMap.type,toneMapping:C.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:C.premultipliedAlpha,doubleSided:2===C.side,flipSided:1===C.side,useDepthPacking:!!C.depthPacking,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:C.extensions&&C.extensions.derivatives,extensionFragDepth:C.extensions&&C.extensions.fragDepth,extensionDrawBuffers:C.extensions&&C.extensions.drawBuffers,extensionShaderTextureLOD:C.extensions&&C.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}},getProgramCacheKey:function g(C){const D=[];if(C.shaderID?D.push(C.shaderID):(D.push(C.customVertexShaderID),D.push(C.customFragmentShaderID)),void 0!==C.defines)for(const R in C.defines)D.push(R),D.push(C.defines[R]);return!1===C.isRawShaderMaterial&&(function v(C,D){C.push(D.precision),C.push(D.outputEncoding),C.push(D.envMapMode),C.push(D.envMapCubeUVHeight),C.push(D.combine),C.push(D.vertexUvs),C.push(D.fogExp2),C.push(D.sizeAttenuation),C.push(D.morphTargetsCount),C.push(D.morphAttributeCount),C.push(D.numDirLights),C.push(D.numPointLights),C.push(D.numSpotLights),C.push(D.numSpotLightMaps),C.push(D.numHemiLights),C.push(D.numRectAreaLights),C.push(D.numDirLightShadows),C.push(D.numPointLightShadows),C.push(D.numSpotLightShadows),C.push(D.numSpotLightShadowsWithMaps),C.push(D.shadowMapType),C.push(D.toneMapping),C.push(D.numClippingPlanes),C.push(D.numClipIntersection),C.push(D.depthPacking)}(D,C),function _(C,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.map&&a.enable(4),D.matcap&&a.enable(5),D.envMap&&a.enable(6),D.lightMap&&a.enable(7),D.aoMap&&a.enable(8),D.emissiveMap&&a.enable(9),D.bumpMap&&a.enable(10),D.normalMap&&a.enable(11),D.objectSpaceNormalMap&&a.enable(12),D.tangentSpaceNormalMap&&a.enable(13),D.clearcoat&&a.enable(14),D.clearcoatMap&&a.enable(15),D.clearcoatRoughnessMap&&a.enable(16),D.clearcoatNormalMap&&a.enable(17),D.iridescence&&a.enable(18),D.iridescenceMap&&a.enable(19),D.iridescenceThicknessMap&&a.enable(20),D.displacementMap&&a.enable(21),D.specularMap&&a.enable(22),D.roughnessMap&&a.enable(23),D.metalnessMap&&a.enable(24),D.gradientMap&&a.enable(25),D.alphaMap&&a.enable(26),D.alphaTest&&a.enable(27),D.vertexColors&&a.enable(28),D.vertexAlphas&&a.enable(29),D.vertexUvs&&a.enable(30),D.vertexTangents&&a.enable(31),D.uvsVertexOnly&&a.enable(32),C.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.physicallyCorrectLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.specularIntensityMap&&a.enable(15),D.specularColorMap&&a.enable(16),D.transmission&&a.enable(17),D.transmissionMap&&a.enable(18),D.thicknessMap&&a.enable(19),D.sheen&&a.enable(20),D.sheenColorMap&&a.enable(21),D.sheenRoughnessMap&&a.enable(22),D.decodeVideoTexture&&a.enable(23),D.opaque&&a.enable(24),C.push(a.mask)}(D,C),D.push(n.outputEncoding)),D.push(C.customProgramCacheKey),D.join()},getUniforms:function y(C){const D=p[C.type];let R;return R=D?C$.clone(Fa[D].uniforms):C.uniforms,R},acquireProgram:function b(C,D){let R;for(let Y=0,Q=l.length;Y<Q;Y++){const j=l[Y];if(j.cacheKey===D){R=j,++R.usedTimes;break}}return void 0===R&&(R=new lBe(n,D,C,r),l.push(R)),R},releaseProgram:function x(C){if(0==--C.usedTimes){const D=l.indexOf(C);l[D]=l[l.length-1],l.pop(),C.destroy()}},releaseShaderCache:function w(C){c.remove(C)},programs:l,dispose:function L(){c.dispose()}}}function pBe(){let n=new WeakMap;return{get:function e(r){let o=n.get(r);return void 0===o&&(o={},n.set(r,o)),o},remove:function t(r){n.delete(r)},update:function i(r,o,a){n.get(r)[o]=a},dispose:function s(){n=new WeakMap}}}function mBe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Y$(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function X$(){const n=[];let e=0;const t=[],i=[],s=[];function o(h,d,f,p,m,g){let v=n[e];return void 0===v?(v={id:h.id,object:h,geometry:d,material:f,groupOrder:p,renderOrder:h.renderOrder,z:m,group:g},n[e]=v):(v.id=h.id,v.object=h,v.geometry=d,v.material=f,v.groupOrder=p,v.renderOrder=h.renderOrder,v.z=m,v.group=g),e++,v}return{opaque:t,transmissive:i,transparent:s,init:function r(){e=0,t.length=0,i.length=0,s.length=0},push:function a(h,d,f,p,m,g){const v=o(h,d,f,p,m,g);f.transmission>0?i.push(v):!0===f.transparent?s.push(v):t.push(v)},unshift:function c(h,d,f,p,m,g){const v=o(h,d,f,p,m,g);f.transmission>0?i.unshift(v):!0===f.transparent?s.unshift(v):t.unshift(v)},finish:function u(){for(let h=e,d=n.length;h<d;h++){const f=n[h];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function l(h,d){t.length>1&&t.sort(h||mBe),i.length>1&&i.sort(d||Y$),s.length>1&&s.sort(d||Y$)}}}function gBe(){let n=new WeakMap;return{get:function e(i,s){const r=n.get(i);let o;return void 0===r?(o=new X$,n.set(i,[o])):s>=r.length?(o=new X$,r.push(o)):o=r[s],o},dispose:function t(){n=new WeakMap}}}function vBe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new V,color:new $e};break;case"SpotLight":t={position:new V,direction:new V,color:new $e,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new V,color:new $e,distance:0,decay:0};break;case"HemisphereLight":t={direction:new V,skyColor:new $e,groundColor:new $e};break;case"RectAreaLight":t={color:new $e,position:new V,halfWidth:new V,halfHeight:new V}}return n[e.id]=t,t}}}let yBe=0;function bBe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function xBe(n,e){const t=new vBe,i=function _Be(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)s.probe.push(new V);const r=new V,o=new Dt,a=new Dt;return{setup:function c(u,h){let d=0,f=0,p=0;for(let Y=0;Y<9;Y++)s.probe[Y].set(0,0,0);let m=0,g=0,v=0,_=0,y=0,b=0,x=0,w=0,L=0,C=0;u.sort(bBe);const D=!0!==h?Math.PI:1;for(let Y=0,Q=u.length;Y<Q;Y++){const j=u[Y],z=j.color,G=j.intensity,k=j.distance,O=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)d+=z.r*G*D,f+=z.g*G*D,p+=z.b*G*D;else if(j.isLightProbe)for(let N=0;N<9;N++)s.probe[N].addScaledVector(j.sh.coefficients[N],G);else if(j.isDirectionalLight){const N=t.get(j);if(N.color.copy(j.color).multiplyScalar(j.intensity*D),j.castShadow){const B=j.shadow,q=i.get(j);q.shadowBias=B.bias,q.shadowNormalBias=B.normalBias,q.shadowRadius=B.radius,q.shadowMapSize=B.mapSize,s.directionalShadow[m]=q,s.directionalShadowMap[m]=O,s.directionalShadowMatrix[m]=j.shadow.matrix,b++}s.directional[m]=N,m++}else if(j.isSpotLight){const N=t.get(j);N.position.setFromMatrixPosition(j.matrixWorld),N.color.copy(z).multiplyScalar(G*D),N.distance=k,N.coneCos=Math.cos(j.angle),N.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),N.decay=j.decay,s.spot[v]=N;const B=j.shadow;if(j.map&&(s.spotLightMap[L]=j.map,L++,B.updateMatrices(j),j.castShadow&&C++),s.spotLightMatrix[v]=B.matrix,j.castShadow){const q=i.get(j);q.shadowBias=B.bias,q.shadowNormalBias=B.normalBias,q.shadowRadius=B.radius,q.shadowMapSize=B.mapSize,s.spotShadow[v]=q,s.spotShadowMap[v]=O,w++}v++}else if(j.isRectAreaLight){const N=t.get(j);N.color.copy(z).multiplyScalar(G),N.halfWidth.set(.5*j.width,0,0),N.halfHeight.set(0,.5*j.height,0),s.rectArea[_]=N,_++}else if(j.isPointLight){const N=t.get(j);if(N.color.copy(j.color).multiplyScalar(j.intensity*D),N.distance=j.distance,N.decay=j.decay,j.castShadow){const B=j.shadow,q=i.get(j);q.shadowBias=B.bias,q.shadowNormalBias=B.normalBias,q.shadowRadius=B.radius,q.shadowMapSize=B.mapSize,q.shadowCameraNear=B.camera.near,q.shadowCameraFar=B.camera.far,s.pointShadow[g]=q,s.pointShadowMap[g]=O,s.pointShadowMatrix[g]=j.shadow.matrix,x++}s.point[g]=N,g++}else if(j.isHemisphereLight){const N=t.get(j);N.skyColor.copy(j.color).multiplyScalar(G*D),N.groundColor.copy(j.groundColor).multiplyScalar(G*D),s.hemi[y]=N,y++}}_>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(s.rectAreaLTC1=Ze.LTC_FLOAT_1,s.rectAreaLTC2=Ze.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(s.rectAreaLTC1=Ze.LTC_HALF_1,s.rectAreaLTC2=Ze.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=d,s.ambient[1]=f,s.ambient[2]=p;const R=s.hash;(R.directionalLength!==m||R.pointLength!==g||R.spotLength!==v||R.rectAreaLength!==_||R.hemiLength!==y||R.numDirectionalShadows!==b||R.numPointShadows!==x||R.numSpotShadows!==w||R.numSpotMaps!==L)&&(s.directional.length=m,s.spot.length=v,s.rectArea.length=_,s.point.length=g,s.hemi.length=y,s.directionalShadow.length=b,s.directionalShadowMap.length=b,s.pointShadow.length=x,s.pointShadowMap.length=x,s.spotShadow.length=w,s.spotShadowMap.length=w,s.directionalShadowMatrix.length=b,s.pointShadowMatrix.length=x,s.spotLightMatrix.length=w+L-C,s.spotLightMap.length=L,s.numSpotLightShadowsWithMaps=C,R.directionalLength=m,R.pointLength=g,R.spotLength=v,R.rectAreaLength=_,R.hemiLength=y,R.numDirectionalShadows=b,R.numPointShadows=x,R.numSpotShadows=w,R.numSpotMaps=L,s.version=yBe++)},setupView:function l(u,h){let d=0,f=0,p=0,m=0,g=0;const v=h.matrixWorldInverse;for(let _=0,y=u.length;_<y;_++){const b=u[_];if(b.isDirectionalLight){const x=s.directional[d];x.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(r),x.direction.transformDirection(v),d++}else if(b.isSpotLight){const x=s.spot[p];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(v),x.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(r),x.direction.transformDirection(v),p++}else if(b.isRectAreaLight){const x=s.rectArea[m];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(v),a.identity(),o.copy(b.matrixWorld),o.premultiply(v),a.extractRotation(o),x.halfWidth.set(.5*b.width,0,0),x.halfHeight.set(0,.5*b.height,0),x.halfWidth.applyMatrix4(a),x.halfHeight.applyMatrix4(a),m++}else if(b.isPointLight){const x=s.point[f];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(v),f++}else if(b.isHemisphereLight){const x=s.hemi[g];x.direction.setFromMatrixPosition(b.matrixWorld),x.direction.transformDirection(v),g++}}},state:s}}function Z$(n,e){const t=new xBe(n,e),i=[],s=[];return{init:function r(){i.length=0,s.length=0},state:{lightsArray:i,shadowsArray:s,lights:t},setupLights:function c(h){t.setup(i,h)},setupLightsView:function l(h){t.setupView(i,h)},pushLight:function o(h){i.push(h)},pushShadow:function a(h){s.push(h)}}}function MBe(n,e){let t=new WeakMap;return{get:function i(r,o=0){const a=t.get(r);let c;return void 0===a?(c=new Z$(n,e),t.set(r,[c])):o>=a.length?(c=new Z$(n,e),a.push(c)):c=a[o],c},dispose:function s(){t=new WeakMap}}}class K$ extends $r{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Q$ extends $r{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new V,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function SBe(n,e,t){let i=new yS;const s=new Me,r=new Me,o=new jn,a=new K$({depthPacking:3201}),c=new Q$,l={},u=t.maxTextureSize,h={0:1,1:0,2:2},d=new J2({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Me},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new on;p.setAttribute("position",new Pi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new cs(p,d),g=this;function v(b,x){const w=e.update(m);d.defines.VSM_SAMPLES!==b.blurSamples&&(d.defines.VSM_SAMPLES=b.blurSamples,f.defines.VSM_SAMPLES=b.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===b.mapPass&&(b.mapPass=new hl(s.x,s.y)),d.uniforms.shadow_pass.value=b.map.texture,d.uniforms.resolution.value=b.mapSize,d.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(x,null,w,d,m,null),f.uniforms.shadow_pass.value=b.mapPass.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(x,null,w,f,m,null)}function _(b,x,w,L,C,D){let R=null;const Y=!0===w.isPointLight?b.customDistanceMaterial:b.customDepthMaterial;if(R=void 0!==Y?Y:!0===w.isPointLight?c:a,n.localClippingEnabled&&!0===x.clipShadows&&Array.isArray(x.clippingPlanes)&&0!==x.clippingPlanes.length||x.displacementMap&&0!==x.displacementScale||x.alphaMap&&x.alphaTest>0){const Q=R.uuid,j=x.uuid;let z=l[Q];void 0===z&&(z={},l[Q]=z);let G=z[j];void 0===G&&(G=R.clone(),z[j]=G),R=G}return R.visible=x.visible,R.wireframe=x.wireframe,R.side=3===D?null!==x.shadowSide?x.shadowSide:x.side:null!==x.shadowSide?x.shadowSide:h[x.side],R.alphaMap=x.alphaMap,R.alphaTest=x.alphaTest,R.clipShadows=x.clipShadows,R.clippingPlanes=x.clippingPlanes,R.clipIntersection=x.clipIntersection,R.displacementMap=x.displacementMap,R.displacementScale=x.displacementScale,R.displacementBias=x.displacementBias,R.wireframeLinewidth=x.wireframeLinewidth,R.linewidth=x.linewidth,!0===w.isPointLight&&!0===R.isMeshDistanceMaterial&&(R.referencePosition.setFromMatrixPosition(w.matrixWorld),R.nearDistance=L,R.farDistance=C),R}function y(b,x,w,L,C){if(!1===b.visible)return;if(b.layers.test(x.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&3===C)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,b.matrixWorld);const Y=e.update(b),Q=b.material;if(Array.isArray(Q)){const j=Y.groups;for(let z=0,G=j.length;z<G;z++){const k=j[z],O=Q[k.materialIndex];if(O&&O.visible){const N=_(b,O,L,w.near,w.far,C);n.renderBufferDirect(w,null,Y,N,b,k)}}}else if(Q.visible){const j=_(b,Q,L,w.near,w.far,C);n.renderBufferDirect(w,null,Y,j,b,null)}}const R=b.children;for(let Y=0,Q=R.length;Y<Q;Y++)y(R[Y],x,w,L,C)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(b,x,w){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===b.length)return;const L=n.getRenderTarget(),C=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),R=n.state;R.setBlending(0),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);for(let Y=0,Q=b.length;Y<Q;Y++){const j=b[Y],z=j.shadow;if(void 0===z){console.warn("THREE.WebGLShadowMap:",j,"has no shadow.");continue}if(!1===z.autoUpdate&&!1===z.needsUpdate)continue;s.copy(z.mapSize);const G=z.getFrameExtents();s.multiply(G),r.copy(z.mapSize),(s.x>u||s.y>u)&&(s.x>u&&(r.x=Math.floor(u/G.x),s.x=r.x*G.x,z.mapSize.x=r.x),s.y>u&&(r.y=Math.floor(u/G.y),s.y=r.y*G.y,z.mapSize.y=r.y)),null===z.map&&(z.map=new hl(s.x,s.y,3!==this.type?{minFilter:Rs,magFilter:Rs}:{}),z.map.texture.name=j.name+".shadowMap",z.camera.updateProjectionMatrix()),n.setRenderTarget(z.map),n.clear();const k=z.getViewportCount();for(let O=0;O<k;O++){const N=z.getViewport(O);o.set(r.x*N.x,r.y*N.y,r.x*N.z,r.y*N.w),R.viewport(o),z.updateMatrices(j,O),i=z.getFrustum(),y(x,w,z.camera,j,this.type)}!0!==z.isPointLightShadow&&3===this.type&&v(z,w),z.needsUpdate=!1}g.needsUpdate=!1,n.setRenderTarget(L,C,D)}}function TBe(n,e,t){const i=t.isWebGL2,a=new function s(){let ee=!1;const Xe=new jn;let ve=null;const st=new jn(0,0,0,0);return{setMask:function(tt){ve!==tt&&!ee&&(n.colorMask(tt,tt,tt,tt),ve=tt)},setLocked:function(tt){ee=tt},setClear:function(tt,fn,Ms,Ni,hs){!0===hs&&(tt*=Ni,fn*=Ni,Ms*=Ni),Xe.set(tt,fn,Ms,Ni),!1===st.equals(Xe)&&(n.clearColor(tt,fn,Ms,Ni),st.copy(Xe))},reset:function(){ee=!1,ve=null,st.set(-1,0,0,0)}}},c=new function r(){let ee=!1,Xe=null,ve=null,st=null;return{setTest:function(tt){tt?Ie(2929):He(2929)},setMask:function(tt){Xe!==tt&&!ee&&(n.depthMask(tt),Xe=tt)},setFunc:function(tt){if(ve!==tt){if(tt)switch(tt){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);ve=tt}},setLocked:function(tt){ee=tt},setClear:function(tt){st!==tt&&(n.clearDepth(tt),st=tt)},reset:function(){ee=!1,Xe=null,ve=null,st=null}}},l=new function o(){let ee=!1,Xe=null,ve=null,st=null,tt=null,fn=null,Ms=null,Ni=null,hs=null;return{setTest:function(Qn){ee||(Qn?Ie(2960):He(2960))},setMask:function(Qn){Xe!==Qn&&!ee&&(n.stencilMask(Qn),Xe=Qn)},setFunc:function(Qn,ds,fs){(ve!==Qn||st!==ds||tt!==fs)&&(n.stencilFunc(Qn,ds,fs),ve=Qn,st=ds,tt=fs)},setOp:function(Qn,ds,fs){(fn!==Qn||Ms!==ds||Ni!==fs)&&(n.stencilOp(Qn,ds,fs),fn=Qn,Ms=ds,Ni=fs)},setLocked:function(Qn){ee=Qn},setClear:function(Qn){hs!==Qn&&(n.clearStencil(Qn),hs=Qn)},reset:function(){ee=!1,Xe=null,ve=null,st=null,tt=null,fn=null,Ms=null,Ni=null,hs=null}}},u=new WeakMap,h=new WeakMap;let d={},f={},p=new WeakMap,m=[],g=null,v=!1,_=null,y=null,b=null,x=null,w=null,L=null,C=null,D=!1,R=null,Y=null,Q=null,j=null,z=null;const G=n.getParameter(35661);let k=!1,O=0;const N=n.getParameter(7938);-1!==N.indexOf("WebGL")?(O=parseFloat(/^WebGL (\d)/.exec(N)[1]),k=O>=1):-1!==N.indexOf("OpenGL ES")&&(O=parseFloat(/^OpenGL ES (\d)/.exec(N)[1]),k=O>=2);let B=null,q={};const ne=n.getParameter(3088),$=n.getParameter(2978),ye=(new jn).fromArray(ne),oe=(new jn).fromArray($);function De(ee,Xe,ve){const st=new Uint8Array(4),tt=n.createTexture();n.bindTexture(ee,tt),n.texParameteri(ee,10241,9728),n.texParameteri(ee,10240,9728);for(let fn=0;fn<ve;fn++)n.texImage2D(Xe+fn,0,6408,1,1,0,6408,5121,st);return tt}const he={};function Ie(ee){!0!==d[ee]&&(n.enable(ee),d[ee]=!0)}function He(ee){!1!==d[ee]&&(n.disable(ee),d[ee]=!1)}he[3553]=De(3553,3553,1),he[34067]=De(34067,34069,6),a.setClear(0,0,0,1),c.setClear(1),l.setClear(0),Ie(2929),c.setFunc(3),Be(!1),Ne(1),Ie(2884),Re(0);const be={100:32774,101:32778,102:32779};if(i)be[103]=32775,be[104]=32776;else{const ee=e.get("EXT_blend_minmax");null!==ee&&(be[103]=ee.MIN_EXT,be[104]=ee.MAX_EXT)}const me={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Re(ee,Xe,ve,st,tt,fn,Ms,Ni){if(0!==ee){if(!1===v&&(Ie(3042),v=!0),5===ee)tt=tt||Xe,fn=fn||ve,Ms=Ms||st,(Xe!==y||tt!==w)&&(n.blendEquationSeparate(be[Xe],be[tt]),y=Xe,w=tt),(ve!==b||st!==x||fn!==L||Ms!==C)&&(n.blendFuncSeparate(me[ve],me[st],me[fn],me[Ms]),b=ve,x=st,L=fn,C=Ms),_=ee,D=null;else if(ee!==_||Ni!==D){if((100!==y||100!==w)&&(n.blendEquation(32774),y=100,w=100),Ni)switch(ee){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee)}else switch(ee){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee)}b=null,x=null,L=null,C=null,_=ee,D=Ni}}else!0===v&&(He(3042),v=!1)}function Be(ee){R!==ee&&(n.frontFace(ee?2304:2305),R=ee)}function Ne(ee){0!==ee?(Ie(2884),ee!==Y&&n.cullFace(1===ee?1029:2===ee?1028:1032)):He(2884),Y=ee}function gt(ee,Xe,ve){ee?(Ie(32823),(j!==Xe||z!==ve)&&(n.polygonOffset(Xe,ve),j=Xe,z=ve)):He(32823)}function Sn(ee){void 0===ee&&(ee=33984+G-1),B!==ee&&(n.activeTexture(ee),B=ee)}return{buffers:{color:a,depth:c,stencil:l},enable:Ie,disable:He,bindFramebuffer:function Qe(ee,Xe){return f[ee]!==Xe&&(n.bindFramebuffer(ee,Xe),f[ee]=Xe,i&&(36009===ee&&(f[36160]=Xe),36160===ee&&(f[36009]=Xe)),!0)},drawBuffers:function Pe(ee,Xe){let ve=m,st=!1;if(ee)if(ve=p.get(Xe),void 0===ve&&(ve=[],p.set(Xe,ve)),ee.isWebGLMultipleRenderTargets){const tt=ee.texture;if(ve.length!==tt.length||36064!==ve[0]){for(let fn=0,Ms=tt.length;fn<Ms;fn++)ve[fn]=36064+fn;ve.length=tt.length,st=!0}}else 36064!==ve[0]&&(ve[0]=36064,st=!0);else 1029!==ve[0]&&(ve[0]=1029,st=!0);st&&(t.isWebGL2?n.drawBuffers(ve):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ve))},useProgram:function Ht(ee){return g!==ee&&(n.useProgram(ee),g=ee,!0)},setBlending:Re,setMaterial:function at(ee,Xe){2===ee.side?He(2884):Ie(2884);let ve=1===ee.side;Xe&&(ve=!ve),Be(ve),1===ee.blending&&!1===ee.transparent?Re(0):Re(ee.blending,ee.blendEquation,ee.blendSrc,ee.blendDst,ee.blendEquationAlpha,ee.blendSrcAlpha,ee.blendDstAlpha,ee.premultipliedAlpha),c.setFunc(ee.depthFunc),c.setTest(ee.depthTest),c.setMask(ee.depthWrite),a.setMask(ee.colorWrite);const st=ee.stencilWrite;l.setTest(st),st&&(l.setMask(ee.stencilWriteMask),l.setFunc(ee.stencilFunc,ee.stencilRef,ee.stencilFuncMask),l.setOp(ee.stencilFail,ee.stencilZFail,ee.stencilZPass)),gt(ee.polygonOffset,ee.polygonOffsetFactor,ee.polygonOffsetUnits),!0===ee.alphaToCoverage?Ie(32926):He(32926)},setFlipSided:Be,setCullFace:Ne,setLineWidth:function nt(ee){ee!==Q&&(k&&n.lineWidth(ee),Q=ee)},setPolygonOffset:gt,setScissorTest:function Qt(ee){ee?Ie(3089):He(3089)},activeTexture:Sn,bindTexture:function W(ee,Xe){null===B&&Sn();let ve=q[B];void 0===ve&&(ve={type:void 0,texture:void 0},q[B]=ve),(ve.type!==ee||ve.texture!==Xe)&&(n.bindTexture(ee,Xe||he[ee]),ve.type=ee,ve.texture=Xe)},unbindTexture:function P(){const ee=q[B];void 0!==ee&&void 0!==ee.type&&(n.bindTexture(ee.type,null),ee.type=void 0,ee.texture=void 0)},compressedTexImage2D:function ue(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},texImage2D:function Te(){try{n.texImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},texImage3D:function ke(){try{n.texImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},updateUBOMapping:function jt(ee,Xe){let ve=h.get(Xe);void 0===ve&&(ve=new WeakMap,h.set(Xe,ve));let st=ve.get(ee);void 0===st&&(st=n.getUniformBlockIndex(Xe,ee.name),ve.set(ee,st))},uniformBlockBinding:function dn(ee,Xe){const st=h.get(Xe).get(ee);u.get(ee)!==st&&(n.uniformBlockBinding(Xe,st,ee.__bindingPointIndex),u.set(ee,st))},texStorage2D:function Mt(){try{n.texStorage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},texStorage3D:function F(){try{n.texStorage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},texSubImage2D:function ze(){try{n.texSubImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},texSubImage3D:function Fe(){try{n.texSubImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},compressedTexSubImage2D:function Ye(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},scissor:function Je(ee){!1===ye.equals(ee)&&(n.scissor(ee.x,ee.y,ee.z,ee.w),ye.copy(ee))},viewport:function et(ee){!1===oe.equals(ee)&&(n.viewport(ee.x,ee.y,ee.z,ee.w),oe.copy(ee))},reset:function di(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},B=null,q={},f={},p=new WeakMap,m=[],g=null,v=!1,_=null,y=null,b=null,x=null,w=null,L=null,C=null,D=!1,R=null,Y=null,Q=null,j=null,z=null,ye.set(0,0,n.canvas.width,n.canvas.height),oe.set(0,0,n.canvas.width,n.canvas.height),a.reset(),c.reset(),l.reset()}}}function EBe(n,e,t,i,s,r,o){const a=s.isWebGL2,c=s.maxTextures,l=s.maxCubemapSize,u=s.maxTextureSize,h=s.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function _(W,P){return v?new OffscreenCanvas(W,P):M8("canvas")}function y(W,P,ue,ze){let Fe=1;if((W.width>ze||W.height>ze)&&(Fe=ze/Math.max(W.width,W.height)),Fe<1||!0===P){if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap){const Ye=P?am:Math.floor,Mt=Ye(Fe*W.width),F=Ye(Fe*W.height);void 0===m&&(m=_(Mt,F));const Te=ue?_(Mt,F):m;return Te.width=Mt,Te.height=F,Te.getContext("2d").drawImage(W,0,0,Mt,F),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+W.width+"x"+W.height+") to ("+Mt+"x"+F+")."),Te}return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+W.width+"x"+W.height+")."),W}return W}function b(W){return Yw(W.width)&&Yw(W.height)}function w(W,P){return W.generateMipmaps&&P&&W.minFilter!==Rs&&W.minFilter!==as}function L(W){n.generateMipmap(W)}function C(W,P,ue,ze,Fe=!1){if(!1===a)return P;if(null!==W){if(void 0!==n[W])return n[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let Ye=P;return 6403===P&&(5126===ue&&(Ye=33326),5131===ue&&(Ye=33325),5121===ue&&(Ye=33321)),33319===P&&(5126===ue&&(Ye=33328),5131===ue&&(Ye=33327),5121===ue&&(Ye=33323)),6408===P&&(5126===ue&&(Ye=34836),5131===ue&&(Ye=34842),5121===ue&&(Ye=ze===Zn&&!1===Fe?35907:32856),32819===ue&&(Ye=32854),32820===ue&&(Ye=32855)),(33325===Ye||33326===Ye||33327===Ye||33328===Ye||34842===Ye||34836===Ye)&&e.get("EXT_color_buffer_float"),Ye}function D(W,P,ue){return!0===w(W,ue)||W.isFramebufferTexture&&W.minFilter!==Rs&&W.minFilter!==as?Math.log2(Math.max(P.width,P.height))+1:void 0!==W.mipmaps&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?P.mipmaps.length:1}function R(W){return W===Rs||1004===W||1005===W?9728:9729}function Y(W){const P=W.target;P.removeEventListener("dispose",Y),function j(W){const P=i.get(W);if(void 0===P.__webglInit)return;const ue=W.source,ze=g.get(ue);if(ze){const Fe=ze[P.__cacheKey];Fe.usedTimes--,0===Fe.usedTimes&&z(W),0===Object.keys(ze).length&&g.delete(ue)}i.remove(W)}(P),P.isVideoTexture&&p.delete(P)}function Q(W){const P=W.target;P.removeEventListener("dispose",Q),function G(W){const P=W.texture,ue=i.get(W),ze=i.get(P);if(void 0!==ze.__webglTexture&&(n.deleteTexture(ze.__webglTexture),o.memory.textures--),W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let Fe=0;Fe<6;Fe++)n.deleteFramebuffer(ue.__webglFramebuffer[Fe]),ue.__webglDepthbuffer&&n.deleteRenderbuffer(ue.__webglDepthbuffer[Fe]);else{if(n.deleteFramebuffer(ue.__webglFramebuffer),ue.__webglDepthbuffer&&n.deleteRenderbuffer(ue.__webglDepthbuffer),ue.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ue.__webglMultisampledFramebuffer),ue.__webglColorRenderbuffer)for(let Fe=0;Fe<ue.__webglColorRenderbuffer.length;Fe++)ue.__webglColorRenderbuffer[Fe]&&n.deleteRenderbuffer(ue.__webglColorRenderbuffer[Fe]);ue.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ue.__webglDepthRenderbuffer)}if(W.isWebGLMultipleRenderTargets)for(let Fe=0,Ye=P.length;Fe<Ye;Fe++){const Mt=i.get(P[Fe]);Mt.__webglTexture&&(n.deleteTexture(Mt.__webglTexture),o.memory.textures--),i.remove(P[Fe])}i.remove(P),i.remove(W)}(P)}function z(W){const P=i.get(W);n.deleteTexture(P.__webglTexture),delete g.get(W.source)[P.__cacheKey],o.memory.textures--}let k=0;function q(W,P){const ue=i.get(W);if(W.isVideoTexture&&function Qt(W){const P=o.render.frame;p.get(W)!==P&&(p.set(W,P),W.update())}(W),!1===W.isRenderTargetTexture&&W.version>0&&ue.__version!==W.version){const ze=W.image;if(null===ze)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==ze.complete)return void He(ue,W,P);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+P),t.bindTexture(3553,ue.__webglTexture)}const oe={[Na]:10497,[jr]:33071,[V6]:33648},De={[Rs]:9728,1004:9984,1005:9986,[as]:9729,1007:9985,[al]:9987};function he(W,P,ue){if(ue?(n.texParameteri(W,10242,oe[P.wrapS]),n.texParameteri(W,10243,oe[P.wrapT]),(32879===W||35866===W)&&n.texParameteri(W,32882,oe[P.wrapR]),n.texParameteri(W,10240,De[P.magFilter]),n.texParameteri(W,10241,De[P.minFilter])):(n.texParameteri(W,10242,33071),n.texParameteri(W,10243,33071),(32879===W||35866===W)&&n.texParameteri(W,32882,33071),(P.wrapS!==jr||P.wrapT!==jr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(W,10240,R(P.magFilter)),n.texParameteri(W,10241,R(P.minFilter)),P.minFilter!==Rs&&P.minFilter!==as&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const ze=e.get("EXT_texture_filter_anisotropic");if(P.type===cl&&!1===e.has("OES_texture_float_linear")||!1===a&&P.type===P6&&!1===e.has("OES_texture_half_float_linear"))return;(P.anisotropy>1||i.get(P).__currentAnisotropy)&&(n.texParameterf(W,ze.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(P.anisotropy,s.getMaxAnisotropy())),i.get(P).__currentAnisotropy=P.anisotropy)}}function Ie(W,P){let ue=!1;void 0===W.__webglInit&&(W.__webglInit=!0,P.addEventListener("dispose",Y));const ze=P.source;let Fe=g.get(ze);void 0===Fe&&(Fe={},g.set(ze,Fe));const Ye=function B(W){const P=[];return P.push(W.wrapS),P.push(W.wrapT),P.push(W.magFilter),P.push(W.minFilter),P.push(W.anisotropy),P.push(W.internalFormat),P.push(W.format),P.push(W.type),P.push(W.generateMipmaps),P.push(W.premultiplyAlpha),P.push(W.flipY),P.push(W.unpackAlignment),P.push(W.encoding),P.join()}(P);if(Ye!==W.__cacheKey){void 0===Fe[Ye]&&(Fe[Ye]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ue=!0),Fe[Ye].usedTimes++;const Mt=Fe[W.__cacheKey];void 0!==Mt&&(Fe[W.__cacheKey].usedTimes--,0===Mt.usedTimes&&z(P)),W.__cacheKey=Ye,W.__webglTexture=Fe[Ye].texture}return ue}function He(W,P,ue){let ze=3553;P.isDataArrayTexture&&(ze=35866),P.isData3DTexture&&(ze=32879);const Fe=Ie(W,P),Ye=P.source;if(t.activeTexture(33984+ue),t.bindTexture(ze,W.__webglTexture),Ye.version!==Ye.__currentVersion||!0===Fe){n.pixelStorei(37440,P.flipY),n.pixelStorei(37441,P.premultiplyAlpha),n.pixelStorei(3317,P.unpackAlignment),n.pixelStorei(37443,0);const Mt=function x(W){return!a&&(W.wrapS!==jr||W.wrapT!==jr||W.minFilter!==Rs&&W.minFilter!==as)}(P)&&!1===b(P.image);let F=y(P.image,Mt,!1,u);F=Sn(P,F);const Te=b(F)||a,ke=r.convert(P.format,P.encoding);let jt,Je=r.convert(P.type),et=C(P.internalFormat,ke,Je,P.encoding,P.isVideoTexture);he(ze,P,Te);const dn=P.mipmaps,di=a&&!0!==P.isVideoTexture,ee=void 0===Ye.__currentVersion||!0===Fe,Xe=D(P,F,Te);if(P.isDepthTexture)et=6402,a?et=P.type===cl?36012:P.type===Z3?33190:P.type===O6?35056:33189:P.type===cl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),P.format===K3&&6402===et&&1012!==P.type&&P.type!==Z3&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),P.type=Z3,Je=r.convert(P.type)),P.format===N6&&6402===et&&(et=34041,P.type!==O6&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),P.type=O6,Je=r.convert(P.type))),ee&&(di?t.texStorage2D(3553,1,et,F.width,F.height):t.texImage2D(3553,0,et,F.width,F.height,0,ke,Je,null));else if(P.isDataTexture)if(dn.length>0&&Te){di&&ee&&t.texStorage2D(3553,Xe,et,dn[0].width,dn[0].height);for(let ve=0,st=dn.length;ve<st;ve++)jt=dn[ve],di?t.texSubImage2D(3553,ve,0,0,jt.width,jt.height,ke,Je,jt.data):t.texImage2D(3553,ve,et,jt.width,jt.height,0,ke,Je,jt.data);P.generateMipmaps=!1}else di?(ee&&t.texStorage2D(3553,Xe,et,F.width,F.height),t.texSubImage2D(3553,0,0,0,F.width,F.height,ke,Je,F.data)):t.texImage2D(3553,0,et,F.width,F.height,0,ke,Je,F.data);else if(P.isCompressedTexture){di&&ee&&t.texStorage2D(3553,Xe,et,dn[0].width,dn[0].height);for(let ve=0,st=dn.length;ve<st;ve++)jt=dn[ve],P.format!==K1?null!==ke?di?t.compressedTexSubImage2D(3553,ve,0,0,jt.width,jt.height,ke,jt.data):t.compressedTexImage2D(3553,ve,et,jt.width,jt.height,0,jt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):di?t.texSubImage2D(3553,ve,0,0,jt.width,jt.height,ke,Je,jt.data):t.texImage2D(3553,ve,et,jt.width,jt.height,0,ke,Je,jt.data)}else if(P.isDataArrayTexture)di?(ee&&t.texStorage3D(35866,Xe,et,F.width,F.height,F.depth),t.texSubImage3D(35866,0,0,0,0,F.width,F.height,F.depth,ke,Je,F.data)):t.texImage3D(35866,0,et,F.width,F.height,F.depth,0,ke,Je,F.data);else if(P.isData3DTexture)di?(ee&&t.texStorage3D(32879,Xe,et,F.width,F.height,F.depth),t.texSubImage3D(32879,0,0,0,0,F.width,F.height,F.depth,ke,Je,F.data)):t.texImage3D(32879,0,et,F.width,F.height,F.depth,0,ke,Je,F.data);else if(P.isFramebufferTexture){if(ee)if(di)t.texStorage2D(3553,Xe,et,F.width,F.height);else{let ve=F.width,st=F.height;for(let tt=0;tt<Xe;tt++)t.texImage2D(3553,tt,et,ve,st,0,ke,Je,null),ve>>=1,st>>=1}}else if(dn.length>0&&Te){di&&ee&&t.texStorage2D(3553,Xe,et,dn[0].width,dn[0].height);for(let ve=0,st=dn.length;ve<st;ve++)jt=dn[ve],di?t.texSubImage2D(3553,ve,0,0,ke,Je,jt):t.texImage2D(3553,ve,et,ke,Je,jt);P.generateMipmaps=!1}else di?(ee&&t.texStorage2D(3553,Xe,et,F.width,F.height),t.texSubImage2D(3553,0,0,0,ke,Je,F)):t.texImage2D(3553,0,et,ke,Je,F);w(P,Te)&&L(ze),Ye.__currentVersion=Ye.version,P.onUpdate&&P.onUpdate(P)}W.__version=P.version}function Pe(W,P,ue,ze,Fe){const Ye=r.convert(ue.format,ue.encoding),Mt=r.convert(ue.type),F=C(ue.internalFormat,Ye,Mt,ue.encoding);i.get(P).__hasExternalTextures||(32879===Fe||35866===Fe?t.texImage3D(Fe,0,F,P.width,P.height,P.depth,0,Ye,Mt,null):t.texImage2D(Fe,0,F,P.width,P.height,0,Ye,Mt,null)),t.bindFramebuffer(36160,W),gt(P)?d.framebufferTexture2DMultisampleEXT(36160,ze,Fe,i.get(ue).__webglTexture,0,nt(P)):n.framebufferTexture2D(36160,ze,Fe,i.get(ue).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ht(W,P,ue){if(n.bindRenderbuffer(36161,W),P.depthBuffer&&!P.stencilBuffer){let ze=33189;if(ue||gt(P)){const Fe=P.depthTexture;Fe&&Fe.isDepthTexture&&(Fe.type===cl?ze=36012:Fe.type===Z3&&(ze=33190));const Ye=nt(P);gt(P)?d.renderbufferStorageMultisampleEXT(36161,Ye,ze,P.width,P.height):n.renderbufferStorageMultisample(36161,Ye,ze,P.width,P.height)}else n.renderbufferStorage(36161,ze,P.width,P.height);n.framebufferRenderbuffer(36160,36096,36161,W)}else if(P.depthBuffer&&P.stencilBuffer){const ze=nt(P);ue&&!1===gt(P)?n.renderbufferStorageMultisample(36161,ze,35056,P.width,P.height):gt(P)?d.renderbufferStorageMultisampleEXT(36161,ze,35056,P.width,P.height):n.renderbufferStorage(36161,34041,P.width,P.height),n.framebufferRenderbuffer(36160,33306,36161,W)}else{const ze=!0===P.isWebGLMultipleRenderTargets?P.texture:[P.texture];for(let Fe=0;Fe<ze.length;Fe++){const Ye=ze[Fe],Mt=r.convert(Ye.format,Ye.encoding),F=r.convert(Ye.type),Te=C(Ye.internalFormat,Mt,F,Ye.encoding),ke=nt(P);ue&&!1===gt(P)?n.renderbufferStorageMultisample(36161,ke,Te,P.width,P.height):gt(P)?d.renderbufferStorageMultisampleEXT(36161,ke,Te,P.width,P.height):n.renderbufferStorage(36161,Te,P.width,P.height)}}n.bindRenderbuffer(36161,null)}function me(W){const P=i.get(W),ue=!0===W.isWebGLCubeRenderTarget;if(W.depthTexture&&!P.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");!function be(W,P){if(P&&P.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,W),!P.depthTexture||!P.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(P.depthTexture).__webglTexture||P.depthTexture.image.width!==P.width||P.depthTexture.image.height!==P.height)&&(P.depthTexture.image.width=P.width,P.depthTexture.image.height=P.height,P.depthTexture.needsUpdate=!0),q(P.depthTexture,0);const ze=i.get(P.depthTexture).__webglTexture,Fe=nt(P);if(P.depthTexture.format===K3)gt(P)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,ze,0,Fe):n.framebufferTexture2D(36160,36096,3553,ze,0);else{if(P.depthTexture.format!==N6)throw new Error("Unknown depthTexture format");gt(P)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,ze,0,Fe):n.framebufferTexture2D(36160,33306,3553,ze,0)}}(P.__webglFramebuffer,W)}else if(ue){P.__webglDepthbuffer=[];for(let ze=0;ze<6;ze++)t.bindFramebuffer(36160,P.__webglFramebuffer[ze]),P.__webglDepthbuffer[ze]=n.createRenderbuffer(),Ht(P.__webglDepthbuffer[ze],W,!1)}else t.bindFramebuffer(36160,P.__webglFramebuffer),P.__webglDepthbuffer=n.createRenderbuffer(),Ht(P.__webglDepthbuffer,W,!1);t.bindFramebuffer(36160,null)}function nt(W){return Math.min(h,W.samples)}function gt(W){const P=i.get(W);return a&&W.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==P.__useRenderToTexture}function Sn(W,P){const ue=W.encoding,ze=W.format,Fe=W.type;return!0===W.isCompressedTexture||!0===W.isVideoTexture||1035===W.format||ue!==ll&&(ue===Zn?!1===a?!0===e.has("EXT_sRGB")&&ze===K1?(W.format=1035,W.minFilter=as,W.generateMipmaps=!1):P=c$.sRGBToLinear(P):(ze!==K1||Fe!==X3)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ue)),P}this.allocateTextureUnit=function N(){const W=k;return W>=c&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+c),k+=1,W},this.resetTextureUnits=function O(){k=0},this.setTexture2D=q,this.setTexture2DArray=function ne(W,P){const ue=i.get(W);W.version>0&&ue.__version!==W.version?He(ue,W,P):(t.activeTexture(33984+P),t.bindTexture(35866,ue.__webglTexture))},this.setTexture3D=function $(W,P){const ue=i.get(W);W.version>0&&ue.__version!==W.version?He(ue,W,P):(t.activeTexture(33984+P),t.bindTexture(32879,ue.__webglTexture))},this.setTextureCube=function ye(W,P){const ue=i.get(W);W.version>0&&ue.__version!==W.version?function Qe(W,P,ue){if(6!==P.image.length)return;const ze=Ie(W,P),Fe=P.source;if(t.activeTexture(33984+ue),t.bindTexture(34067,W.__webglTexture),Fe.version!==Fe.__currentVersion||!0===ze){n.pixelStorei(37440,P.flipY),n.pixelStorei(37441,P.premultiplyAlpha),n.pixelStorei(3317,P.unpackAlignment),n.pixelStorei(37443,0);const Ye=P.isCompressedTexture||P.image[0].isCompressedTexture,Mt=P.image[0]&&P.image[0].isDataTexture,F=[];for(let ve=0;ve<6;ve++)F[ve]=Ye||Mt?Mt?P.image[ve].image:P.image[ve]:y(P.image[ve],!1,!0,l),F[ve]=Sn(P,F[ve]);const Te=F[0],ke=b(Te)||a,Je=r.convert(P.format,P.encoding),et=r.convert(P.type),jt=C(P.internalFormat,Je,et,P.encoding),dn=a&&!0!==P.isVideoTexture,di=void 0===Fe.__currentVersion||!0===ze;let Xe,ee=D(P,Te,ke);if(he(34067,P,ke),Ye){dn&&di&&t.texStorage2D(34067,ee,jt,Te.width,Te.height);for(let ve=0;ve<6;ve++){Xe=F[ve].mipmaps;for(let st=0;st<Xe.length;st++){const tt=Xe[st];P.format!==K1?null!==Je?dn?t.compressedTexSubImage2D(34069+ve,st,0,0,tt.width,tt.height,Je,tt.data):t.compressedTexImage2D(34069+ve,st,jt,tt.width,tt.height,0,tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):dn?t.texSubImage2D(34069+ve,st,0,0,tt.width,tt.height,Je,et,tt.data):t.texImage2D(34069+ve,st,jt,tt.width,tt.height,0,Je,et,tt.data)}}}else{Xe=P.mipmaps,dn&&di&&(Xe.length>0&&ee++,t.texStorage2D(34067,ee,jt,F[0].width,F[0].height));for(let ve=0;ve<6;ve++)if(Mt){dn?t.texSubImage2D(34069+ve,0,0,0,F[ve].width,F[ve].height,Je,et,F[ve].data):t.texImage2D(34069+ve,0,jt,F[ve].width,F[ve].height,0,Je,et,F[ve].data);for(let st=0;st<Xe.length;st++){const fn=Xe[st].image[ve].image;dn?t.texSubImage2D(34069+ve,st+1,0,0,fn.width,fn.height,Je,et,fn.data):t.texImage2D(34069+ve,st+1,jt,fn.width,fn.height,0,Je,et,fn.data)}}else{dn?t.texSubImage2D(34069+ve,0,0,0,Je,et,F[ve]):t.texImage2D(34069+ve,0,jt,Je,et,F[ve]);for(let st=0;st<Xe.length;st++){const tt=Xe[st];dn?t.texSubImage2D(34069+ve,st+1,0,0,Je,et,tt.image[ve]):t.texImage2D(34069+ve,st+1,jt,Je,et,tt.image[ve])}}}w(P,ke)&&L(34067),Fe.__currentVersion=Fe.version,P.onUpdate&&P.onUpdate(P)}W.__version=P.version}(ue,W,P):(t.activeTexture(33984+P),t.bindTexture(34067,ue.__webglTexture))},this.rebindTextures=function Re(W,P,ue){const ze=i.get(W);void 0!==P&&Pe(ze.__webglFramebuffer,W,W.texture,36064,3553),void 0!==ue&&me(W)},this.setupRenderTarget=function at(W){const P=W.texture,ue=i.get(W),ze=i.get(P);W.addEventListener("dispose",Q),!0!==W.isWebGLMultipleRenderTargets&&(void 0===ze.__webglTexture&&(ze.__webglTexture=n.createTexture()),ze.__version=P.version,o.memory.textures++);const Fe=!0===W.isWebGLCubeRenderTarget,Ye=!0===W.isWebGLMultipleRenderTargets,Mt=b(W)||a;if(Fe){ue.__webglFramebuffer=[];for(let F=0;F<6;F++)ue.__webglFramebuffer[F]=n.createFramebuffer()}else{if(ue.__webglFramebuffer=n.createFramebuffer(),Ye)if(s.drawBuffers){const F=W.texture;for(let Te=0,ke=F.length;Te<ke;Te++){const Je=i.get(F[Te]);void 0===Je.__webglTexture&&(Je.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&W.samples>0&&!1===gt(W)){const F=Ye?P:[P];ue.__webglMultisampledFramebuffer=n.createFramebuffer(),ue.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ue.__webglMultisampledFramebuffer);for(let Te=0;Te<F.length;Te++){const ke=F[Te];ue.__webglColorRenderbuffer[Te]=n.createRenderbuffer(),n.bindRenderbuffer(36161,ue.__webglColorRenderbuffer[Te]);const Je=r.convert(ke.format,ke.encoding),et=r.convert(ke.type),jt=C(ke.internalFormat,Je,et,ke.encoding),dn=nt(W);n.renderbufferStorageMultisample(36161,dn,jt,W.width,W.height),n.framebufferRenderbuffer(36160,36064+Te,36161,ue.__webglColorRenderbuffer[Te])}n.bindRenderbuffer(36161,null),W.depthBuffer&&(ue.__webglDepthRenderbuffer=n.createRenderbuffer(),Ht(ue.__webglDepthRenderbuffer,W,!0)),t.bindFramebuffer(36160,null)}}if(Fe){t.bindTexture(34067,ze.__webglTexture),he(34067,P,Mt);for(let F=0;F<6;F++)Pe(ue.__webglFramebuffer[F],W,P,36064,34069+F);w(P,Mt)&&L(34067),t.unbindTexture()}else if(Ye){const F=W.texture;for(let Te=0,ke=F.length;Te<ke;Te++){const Je=F[Te],et=i.get(Je);t.bindTexture(3553,et.__webglTexture),he(3553,Je,Mt),Pe(ue.__webglFramebuffer,W,Je,36064+Te,3553),w(Je,Mt)&&L(3553)}t.unbindTexture()}else{let F=3553;(W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(a?F=W.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(F,ze.__webglTexture),he(F,P,Mt),Pe(ue.__webglFramebuffer,W,P,36064,F),w(P,Mt)&&L(F),t.unbindTexture()}W.depthBuffer&&me(W)},this.updateRenderTargetMipmap=function Be(W){const P=b(W)||a,ue=!0===W.isWebGLMultipleRenderTargets?W.texture:[W.texture];for(let ze=0,Fe=ue.length;ze<Fe;ze++){const Ye=ue[ze];if(w(Ye,P)){const Mt=W.isWebGLCubeRenderTarget?34067:3553,F=i.get(Ye).__webglTexture;t.bindTexture(Mt,F),L(Mt),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Ne(W){if(a&&W.samples>0&&!1===gt(W)){const P=W.isWebGLMultipleRenderTargets?W.texture:[W.texture],ue=W.width,ze=W.height;let Fe=16384;const Ye=[],Mt=W.stencilBuffer?33306:36096,F=i.get(W),Te=!0===W.isWebGLMultipleRenderTargets;if(Te)for(let ke=0;ke<P.length;ke++)t.bindFramebuffer(36160,F.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+ke,36161,null),t.bindFramebuffer(36160,F.__webglFramebuffer),n.framebufferTexture2D(36009,36064+ke,3553,null,0);t.bindFramebuffer(36008,F.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,F.__webglFramebuffer);for(let ke=0;ke<P.length;ke++){Ye.push(36064+ke),W.depthBuffer&&Ye.push(Mt);const Je=void 0!==F.__ignoreDepthValues&&F.__ignoreDepthValues;if(!1===Je&&(W.depthBuffer&&(Fe|=256),W.stencilBuffer&&(Fe|=1024)),Te&&n.framebufferRenderbuffer(36008,36064,36161,F.__webglColorRenderbuffer[ke]),!0===Je&&(n.invalidateFramebuffer(36008,[Mt]),n.invalidateFramebuffer(36009,[Mt])),Te){const et=i.get(P[ke]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,et,0)}n.blitFramebuffer(0,0,ue,ze,0,0,ue,ze,Fe,9728),f&&n.invalidateFramebuffer(36008,Ye)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Te)for(let ke=0;ke<P.length;ke++){t.bindFramebuffer(36160,F.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+ke,36161,F.__webglColorRenderbuffer[ke]);const Je=i.get(P[ke]).__webglTexture;t.bindFramebuffer(36160,F.__webglFramebuffer),n.framebufferTexture2D(36009,36064+ke,3553,Je,0)}t.bindFramebuffer(36009,F.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=me,this.setupFrameBufferTexture=Pe,this.useMultisampledRTT=gt}function ABe(n,e,t){const i=t.isWebGL2;return{convert:function s(r,o=null){let a;if(r===X3)return 5121;if(1017===r)return 32819;if(1018===r)return 32820;if(1010===r)return 5120;if(1011===r)return 5122;if(1012===r)return 5123;if(1013===r)return 5124;if(r===Z3)return 5125;if(r===cl)return 5126;if(r===P6)return i?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===r)return 6406;if(r===K1)return 6408;if(1024===r)return 6409;if(1025===r)return 6410;if(r===K3)return 6402;if(r===N6)return 34041;if(1028===r)return 6403;if(1022===r)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===r)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===r)return 36244;if(1030===r)return 33319;if(1031===r)return 33320;if(1033===r)return 36249;if(33776===r||33777===r||33778===r||33779===r)if(o===Zn){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===r)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===r)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===r)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===r)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===r)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===r)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===r)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===r)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===r||35841===r||35842===r||35843===r){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===r)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===r)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===r)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===r)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===r)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===r||37496===r){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===r)return o===Zn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===r)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===r||37809===r||37810===r||37811===r||37812===r||37813===r||37814===r||37815===r||37816===r||37817===r||37818===r||37819===r||37820===r||37821===r){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===r)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===r)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===r)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===r)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===r)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===r)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===r)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===r)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===r)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===r)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===r)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===r)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===r)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===r)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===r){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===r)return o===Zn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return r===O6?i?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[r]?n[r]:null}}}class DBe extends Hs{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class qs extends hr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const LBe={type:"move"};class SS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new qs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new qs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new V,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new V),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new qs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new V,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new V),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let s=null,r=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const m of e.hand.values()){const g=t.getJointPose(m,i);if(void 0===l.joints[m.jointName]){const _=new qs;_.matrixAutoUpdate=!1,_.visible=!1,l.joints[m.jointName]=_,l.add(_)}const v=l.joints[m.jointName];null!==g&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=g.radius),v.visible=null!==g}const d=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),f=.02,p=.005;l.inputState.pinching&&d>f+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&d<=f-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),null!==r&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1));null!==a&&(s=t.getPose(e.targetRaySpace,i),null===s&&null!==r&&(s=r),null!==s&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(LBe)))}return null!==a&&(a.visible=null!==s),null!==c&&(c.visible=null!==r),null!==l&&(l.visible=null!==o),this}}class zBe extends ea{constructor(e,t,i,s,r,o,a,c,l,u){if((u=void 0!==u?u:K3)!==K3&&u!==N6)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===K3&&(i=Z3),void 0===i&&u===N6&&(i=O6),super(null,s,r,o,a,c,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:Rs,this.minFilter=void 0!==c?c:Rs,this.flipY=!1,this.generateMipmaps=!1}}class kBe extends J3{constructor(e,t){super();const i=this;let s=null,r=1,o=null,a="local-floor",c=null,l=null,u=null,h=null,d=null,f=null;const p=t.getContextAttributes();let m=null,g=null;const v=[],_=[],y=new Hs;y.layers.enable(1),y.viewport=new jn;const b=new Hs;b.layers.enable(2),b.viewport=new jn;const x=[y,b],w=new DBe;w.layers.enable(1),w.layers.enable(2);let L=null,C=null;function D(B){const q=_.indexOf(B.inputSource);if(-1===q)return;const ne=v[q];void 0!==ne&&ne.dispatchEvent({type:B.type,data:B.inputSource})}function R(){s.removeEventListener("select",D),s.removeEventListener("selectstart",D),s.removeEventListener("selectend",D),s.removeEventListener("squeeze",D),s.removeEventListener("squeezestart",D),s.removeEventListener("squeezeend",D),s.removeEventListener("end",R),s.removeEventListener("inputsourceschange",Y);for(let B=0;B<v.length;B++){const q=_[B];null!==q&&(_[B]=null,v[B].disconnect(q))}L=null,C=null,e.setRenderTarget(m),d=null,h=null,u=null,s=null,g=null,N.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function Y(B){for(let q=0;q<B.removed.length;q++){const ne=B.removed[q],$=_.indexOf(ne);$>=0&&(_[$]=null,v[$].dispatchEvent({type:"disconnected",data:ne}))}for(let q=0;q<B.added.length;q++){const ne=B.added[q];let $=_.indexOf(ne);if(-1===$){for(let oe=0;oe<v.length;oe++){if(oe>=_.length){_.push(ne),$=oe;break}if(null===_[oe]){_[oe]=ne,$=oe;break}}if(-1===$)break}const ye=v[$];ye&&ye.dispatchEvent({type:"connected",data:ne})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(B){let q=v[B];return void 0===q&&(q=new SS,v[B]=q),q.getTargetRaySpace()},this.getControllerGrip=function(B){let q=v[B];return void 0===q&&(q=new SS,v[B]=q),q.getGripSpace()},this.getHand=function(B){let q=v[B];return void 0===q&&(q=new SS,v[B]=q),q.getHandSpace()},this.setFramebufferScaleFactor=function(B){r=B,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(B){a=B,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(B){c=B},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return s},this.setSession=function(){var B=ts(function*(q){if(s=q,null!==s){if(m=e.getRenderTarget(),s.addEventListener("select",D),s.addEventListener("selectstart",D),s.addEventListener("selectend",D),s.addEventListener("squeeze",D),s.addEventListener("squeezestart",D),s.addEventListener("squeezeend",D),s.addEventListener("end",R),s.addEventListener("inputsourceschange",Y),!0!==p.xrCompatible&&(yield t.makeXRCompatible()),void 0===s.renderState.layers||!1===e.capabilities.isWebGL2)d=new XRWebGLLayer(s,t,{antialias:void 0!==s.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:r}),s.updateRenderState({baseLayer:d}),g=new hl(d.framebufferWidth,d.framebufferHeight,{format:K1,type:X3,encoding:e.outputEncoding,stencilBuffer:p.stencil});else{let ne=null,$=null,ye=null;p.depth&&(ye=p.stencil?35056:33190,ne=p.stencil?N6:K3,$=p.stencil?O6:Z3);const oe={colorFormat:32856,depthFormat:ye,scaleFactor:r};u=new XRWebGLBinding(s,t),h=u.createProjectionLayer(oe),s.updateRenderState({layers:[h]}),g=new hl(h.textureWidth,h.textureHeight,{format:K1,type:X3,depthTexture:new zBe(h.textureWidth,h.textureHeight,$,void 0,void 0,void 0,void 0,void 0,void 0,ne),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(1),c=null,o=yield s.requestReferenceSpace(a),N.setContext(s),N.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(q){return B.apply(this,arguments)}}();const Q=new V,j=new V;function G(B,q){null===q?B.matrixWorld.copy(B.matrix):B.matrixWorld.multiplyMatrices(q.matrixWorld,B.matrix),B.matrixWorldInverse.copy(B.matrixWorld).invert()}this.updateCamera=function(B){if(null===s)return;w.near=b.near=y.near=B.near,w.far=b.far=y.far=B.far,(L!==w.near||C!==w.far)&&(s.updateRenderState({depthNear:w.near,depthFar:w.far}),L=w.near,C=w.far);const q=B.parent,ne=w.cameras;G(w,q);for(let ye=0;ye<ne.length;ye++)G(ne[ye],q);w.matrixWorld.decompose(w.position,w.quaternion,w.scale),B.matrix.copy(w.matrix),B.matrix.decompose(B.position,B.quaternion,B.scale);const $=B.children;for(let ye=0,oe=$.length;ye<oe;ye++)$[ye].updateMatrixWorld(!0);2===ne.length?function z(B,q,ne){Q.setFromMatrixPosition(q.matrixWorld),j.setFromMatrixPosition(ne.matrixWorld);const $=Q.distanceTo(j),ye=q.projectionMatrix.elements,oe=ne.projectionMatrix.elements,De=ye[14]/(ye[10]-1),he=ye[14]/(ye[10]+1),Ie=(ye[9]+1)/ye[5],He=(ye[9]-1)/ye[5],Qe=(ye[8]-1)/ye[0],Pe=(oe[8]+1)/oe[0],Ht=De*Qe,be=De*Pe,me=$/(-Qe+Pe),Re=me*-Qe;q.matrixWorld.decompose(B.position,B.quaternion,B.scale),B.translateX(Re),B.translateZ(me),B.matrixWorld.compose(B.position,B.quaternion,B.scale),B.matrixWorldInverse.copy(B.matrixWorld).invert();const at=De+me,Be=he+me;B.projectionMatrix.makePerspective(Ht-Re,be+($-Re),Ie*he/Be*at,He*he/Be*at,at,Be)}(w,y,b):w.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return w},this.getFoveation=function(){return null!==h?h.fixedFoveation:null!==d?d.fixedFoveation:void 0},this.setFoveation=function(B){null!==h&&(h.fixedFoveation=B),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=B)};let k=null;const N=new w$;N.setAnimationLoop(function O(B,q){if(l=q.getViewerPose(c||o),f=q,null!==l){const ne=l.views;null!==d&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let $=!1;ne.length!==w.cameras.length&&(w.cameras.length=0,$=!0);for(let ye=0;ye<ne.length;ye++){const oe=ne[ye];let De=null;if(null!==d)De=d.getViewport(oe);else{const Ie=u.getViewSubImage(h,oe);De=Ie.viewport,0===ye&&(e.setRenderTargetTextures(g,Ie.colorTexture,h.ignoreDepthValues?void 0:Ie.depthStencilTexture),e.setRenderTarget(g))}let he=x[ye];void 0===he&&(he=new Hs,he.layers.enable(ye),he.viewport=new jn,x[ye]=he),he.matrix.fromArray(oe.transform.matrix),he.projectionMatrix.fromArray(oe.projectionMatrix),he.viewport.set(De.x,De.y,De.width,De.height),0===ye&&w.matrix.copy(he.matrix),!0===$&&w.cameras.push(he)}}for(let ne=0;ne<v.length;ne++){const $=_[ne],ye=v[ne];null!==$&&void 0!==ye&&ye.update($,q,c||o)}k&&k(B,q),f=null}),this.setAnimationLoop=function(B){k=B},this.dispose=function(){}}}function RBe(n,e){function s(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,1===g.side&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),1===g.side&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const v=e.get(g).envMap;if(v&&(m.envMap.value=v,m.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const b=!0!==n.physicallyCorrectLights?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*b}let _,y;g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity),g.map?_=g.map:g.specularMap?_=g.specularMap:g.displacementMap?_=g.displacementMap:g.normalMap?_=g.normalMap:g.bumpMap?_=g.bumpMap:g.roughnessMap?_=g.roughnessMap:g.metalnessMap?_=g.metalnessMap:g.alphaMap?_=g.alphaMap:g.emissiveMap?_=g.emissiveMap:g.clearcoatMap?_=g.clearcoatMap:g.clearcoatNormalMap?_=g.clearcoatNormalMap:g.clearcoatRoughnessMap?_=g.clearcoatRoughnessMap:g.iridescenceMap?_=g.iridescenceMap:g.iridescenceThicknessMap?_=g.iridescenceThicknessMap:g.specularIntensityMap?_=g.specularIntensityMap:g.specularColorMap?_=g.specularColorMap:g.transmissionMap?_=g.transmissionMap:g.thicknessMap?_=g.thicknessMap:g.sheenColorMap?_=g.sheenColorMap:g.sheenRoughnessMap&&(_=g.sheenRoughnessMap),void 0!==_&&(_.isWebGLRenderTarget&&(_=_.texture),!0===_.matrixAutoUpdate&&_.updateMatrix(),m.uvTransform.value.copy(_.matrix)),g.aoMap?y=g.aoMap:g.lightMap&&(y=g.lightMap),void 0!==y&&(y.isWebGLRenderTarget&&(y=y.texture),!0===y.matrixAutoUpdate&&y.updateMatrix(),m.uv2Transform.value.copy(y.matrix))}return{refreshFogUniforms:function t(m,g){m.fogColor.value.copy(g.color),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)},refreshMaterialUniforms:function i(m,g,v,_,y){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(m,g):g.isMeshToonMaterial?(s(m,g),function u(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}(m,g)):g.isMeshPhongMaterial?(s(m,g),function l(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}(m,g)):g.isMeshStandardMaterial?(s(m,g),function h(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}(m,g),g.isMeshPhysicalMaterial&&function d(m,g,v){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,1===g.side&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}(m,g,y)):g.isMeshMatcapMaterial?(s(m,g),function f(m,g){g.matcap&&(m.matcap.value=g.matcap)}(m,g)):g.isMeshDepthMaterial?s(m,g):g.isMeshDistanceMaterial?(s(m,g),function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}(m,g)):g.isMeshNormalMaterial?s(m,g):g.isLineBasicMaterial?(function r(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}(m,g),g.isLineDashedMaterial&&function o(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}(m,g)):g.isPointsMaterial?function a(m,g,v,_){let y;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*v,m.scale.value=.5*_,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?y=g.map:g.alphaMap&&(y=g.alphaMap),void 0!==y&&(!0===y.matrixAutoUpdate&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix))}(m,g,v,_):g.isSpriteMaterial?function c(m,g){let v;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),void 0!==v&&(!0===v.matrixAutoUpdate&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix))}(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function IBe(n,e,t,i){let s={},r={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function f(_,y,b){const x=_.value;if(void 0===b[y])return b[y]="number"==typeof x?x:x.clone(),!0;if("number"==typeof x){if(b[y]!==x)return b[y]=x,!0}else{const w=b[y];if(!1===w.equals(x))return w.copy(x),!0}return!1}function m(_){const y=_.value,b={boundary:0,storage:0};return"number"==typeof y?(b.boundary=4,b.storage=4):y.isVector2?(b.boundary=8,b.storage=8):y.isVector3||y.isColor?(b.boundary=16,b.storage=12):y.isVector4?(b.boundary=16,b.storage=16):y.isMatrix3?(b.boundary=48,b.storage=48):y.isMatrix4?(b.boundary=64,b.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),b}function g(_){const y=_.target;y.removeEventListener("dispose",g);const b=o.indexOf(y.__bindingPointIndex);o.splice(b,1),n.deleteBuffer(s[y.id]),delete s[y.id],delete r[y.id]}return{bind:function c(_,y){i.uniformBlockBinding(_,y.program)},update:function l(_,y){let b=s[_.id];void 0===b&&(function p(_){const y=_.uniforms;let b=0;let w=0;for(let L=0,C=y.length;L<C;L++){const D=y[L],R=m(D);if(D.__data=new Float32Array(R.storage/Float32Array.BYTES_PER_ELEMENT),D.__offset=b,L>0){w=b%16;const Y=16-w;0!==w&&Y-R.boundary<0&&(b+=16-w,D.__offset=b)}b+=R.storage}w=b%16,w>0&&(b+=16-w),_.__size=b,_.__cache={}}(_),b=function u(_){const y=function h(){for(let _=0;_<a;_++)if(-1===o.indexOf(_))return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();_.__bindingPointIndex=y;const b=n.createBuffer(),x=_.__size,w=_.usage;return n.bindBuffer(35345,b),n.bufferData(35345,x,w),n.bindBuffer(35345,null),n.bindBufferBase(35345,y,b),b}(_),s[_.id]=b,_.addEventListener("dispose",g)),i.updateUBOMapping(_,y.program);const w=e.render.frame;r[_.id]!==w&&(function d(_){const b=_.uniforms,x=_.__cache;n.bindBuffer(35345,s[_.id]);for(let w=0,L=b.length;w<L;w++){const C=b[w];if(!0===f(C,w,x)){const D=C.value,R=C.__offset;"number"==typeof D?(C.__data[0]=D,n.bufferSubData(35345,R,C.__data)):(C.value.isMatrix3?(C.__data[0]=C.value.elements[0],C.__data[1]=C.value.elements[1],C.__data[2]=C.value.elements[2],C.__data[3]=C.value.elements[0],C.__data[4]=C.value.elements[3],C.__data[5]=C.value.elements[4],C.__data[6]=C.value.elements[5],C.__data[7]=C.value.elements[0],C.__data[8]=C.value.elements[6],C.__data[9]=C.value.elements[7],C.__data[10]=C.value.elements[8],C.__data[11]=C.value.elements[0]):D.toArray(C.__data),n.bufferSubData(35345,R,C.__data))}}n.bindBuffer(35345,null)}(_),r[_.id]=w)},dispose:function v(){for(const _ in s)n.deleteBuffer(s[_]);o=[],s={},r={}}}}function TS(n={}){this.isWebGLRenderer=!0;const e=void 0!==n.canvas?n.canvas:function HBe(){const n=M8("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,i=void 0===n.depth||n.depth,s=void 0===n.stencil||n.stencil,r=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,c=void 0!==n.powerPreference?n.powerPreference:"default",l=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let h=null,d=null;const f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ll,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let g=!1,v=0,_=0,y=null,b=-1,x=null;const w=new jn,L=new jn;let C=null,D=e.width,R=e.height,Y=1,Q=null,j=null;const z=new jn(0,0,D,R),G=new jn(0,0,D,R);let k=!1;const O=new yS;let N=!1,B=!1,q=null;const ne=new Dt,$=new Me,ye=new V,oe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function De(){return null===y?Y:1}let He,Qe,Pe,Ht,be,me,Re,at,Be,Ne,nt,gt,Qt,Sn,W,P,ue,ze,Fe,Ye,Mt,F,Te,ke,he=t;function Ie(U,ae){for(let xe=0;xe<U.length;xe++){const we=e.getContext(U[xe],ae);if(null!==we)return we}return null}try{const U={alpha:!0,depth:i,stencil:s,antialias:r,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:c,failIfMajorPerformanceCaveat:l};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r144"),e.addEventListener("webglcontextlost",jt,!1),e.addEventListener("webglcontextrestored",dn,!1),e.addEventListener("webglcontextcreationerror",di,!1),null===he){const ae=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&ae.shift(),he=Ie(ae,U),null===he)throw Ie(ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}function Je(){He=new YNe(he),Qe=new UNe(he,He,n),He.init(Qe),F=new ABe(he,He,Qe),Pe=new TBe(he,He,Qe),Ht=new KNe,be=new pBe,me=new EBe(he,He,Pe,be,Qe,F,Ht),Re=new WNe(m),at=new qNe(m),Be=new FPe(he,Qe),Te=new FNe(he,He,Be,Qe),Ne=new XNe(he,Be,Ht,Te),nt=new tFe(he,Ne,Be,Ht),Fe=new eFe(he,Qe,me),P=new GNe(be),gt=new fBe(m,Re,at,He,Qe,Te,P),Qt=new RBe(m,be),Sn=new gBe,W=new MBe(He,Qe),ze=new NNe(m,Re,Pe,nt,u,o),ue=new SBe(m,nt,Qe),ke=new IBe(he,Ht,Qe,Pe),Ye=new BNe(he,He,Ht,Qe),Mt=new ZNe(he,He,Ht,Qe),Ht.programs=gt.programs,m.capabilities=Qe,m.extensions=He,m.properties=be,m.renderLists=Sn,m.shadowMap=ue,m.state=Pe,m.info=Ht}Je();const et=new kBe(m,he);function jt(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function dn(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const U=Ht.autoReset,ae=ue.enabled,xe=ue.autoUpdate,se=ue.needsUpdate,we=ue.type;Je(),Ht.autoReset=U,ue.enabled=ae,ue.autoUpdate=xe,ue.needsUpdate=se,ue.type=we}function di(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function ee(U){const ae=U.target;ae.removeEventListener("dispose",ee),function Xe(U){(function ve(U){const ae=be.get(U).programs;void 0!==ae&&(ae.forEach(function(xe){gt.releaseProgram(xe)}),U.isShaderMaterial&&gt.releaseShaderCache(U))})(U),be.remove(U)}(ae)}this.xr=et,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){const U=He.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=He.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(U){void 0!==U&&(Y=U,this.setSize(D,R,!1))},this.getSize=function(U){return U.set(D,R)},this.setSize=function(U,ae,xe){et.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(D=U,R=ae,e.width=Math.floor(U*Y),e.height=Math.floor(ae*Y),!1!==xe&&(e.style.width=U+"px",e.style.height=ae+"px"),this.setViewport(0,0,U,ae))},this.getDrawingBufferSize=function(U){return U.set(D*Y,R*Y).floor()},this.setDrawingBufferSize=function(U,ae,xe){D=U,R=ae,Y=xe,e.width=Math.floor(U*xe),e.height=Math.floor(ae*xe),this.setViewport(0,0,U,ae)},this.getCurrentViewport=function(U){return U.copy(w)},this.getViewport=function(U){return U.copy(z)},this.setViewport=function(U,ae,xe,se){U.isVector4?z.set(U.x,U.y,U.z,U.w):z.set(U,ae,xe,se),Pe.viewport(w.copy(z).multiplyScalar(Y).floor())},this.getScissor=function(U){return U.copy(G)},this.setScissor=function(U,ae,xe,se){U.isVector4?G.set(U.x,U.y,U.z,U.w):G.set(U,ae,xe,se),Pe.scissor(L.copy(G).multiplyScalar(Y).floor())},this.getScissorTest=function(){return k},this.setScissorTest=function(U){Pe.setScissorTest(k=U)},this.setOpaqueSort=function(U){Q=U},this.setTransparentSort=function(U){j=U},this.getClearColor=function(U){return U.copy(ze.getClearColor())},this.setClearColor=function(){ze.setClearColor.apply(ze,arguments)},this.getClearAlpha=function(){return ze.getClearAlpha()},this.setClearAlpha=function(){ze.setClearAlpha.apply(ze,arguments)},this.clear=function(U=!0,ae=!0,xe=!0){let se=0;U&&(se|=16384),ae&&(se|=256),xe&&(se|=1024),he.clear(se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",jt,!1),e.removeEventListener("webglcontextrestored",dn,!1),e.removeEventListener("webglcontextcreationerror",di,!1),Sn.dispose(),W.dispose(),be.dispose(),Re.dispose(),at.dispose(),nt.dispose(),Te.dispose(),ke.dispose(),gt.dispose(),et.dispose(),et.removeEventListener("sessionstart",fn),et.removeEventListener("sessionend",Ms),q&&(q.dispose(),q=null),Ni.stop()},this.renderBufferDirect=function(U,ae,xe,se,we,Vt){null===ae&&(ae=oe);const en=we.isMesh&&we.matrixWorld.determinant()<0,pn=function zr(U,ae,xe,se,we){!0!==ae.isScene&&(ae=oe),me.resetTextureUnits();const Vt=ae.fog,pn=null===y?m.outputEncoding:!0===y.isXRRenderTarget?y.texture.encoding:ll,nn=(se.isMeshStandardMaterial?at:Re).get(se.envMap||(se.isMeshStandardMaterial?ae.environment:null)),Jn=!0===se.vertexColors&&!!xe.attributes.color&&4===xe.attributes.color.itemSize,Rn=!!se.normalMap&&!!xe.attributes.tangent,In=!!xe.morphAttributes.position,ps=!!xe.morphAttributes.normal,U4=!!xe.morphAttributes.color,Fu=se.toneMapped?m.toneMapping:0,Bu=xe.morphAttributes.position||xe.morphAttributes.normal||xe.morphAttributes.color,Xa=void 0!==Bu?Bu.length:0,$n=be.get(se),Uu=d.state.lights;!0!==N||!0!==B&&U===x||P.setState(se,U,U===x&&se.id===b);let Ps=!1;se.version===$n.__version?($n.needsLights&&$n.lightsStateVersion!==Uu.state.version||$n.outputEncoding!==pn||we.isInstancedMesh&&!1===$n.instancing||!we.isInstancedMesh&&!0===$n.instancing||we.isSkinnedMesh&&!1===$n.skinning||!we.isSkinnedMesh&&!0===$n.skinning||$n.envMap!==nn||!0===se.fog&&$n.fog!==Vt||void 0!==$n.numClippingPlanes&&($n.numClippingPlanes!==P.numPlanes||$n.numIntersection!==P.numIntersection)||$n.vertexAlphas!==Jn||$n.vertexTangents!==Rn||$n.morphTargets!==In||$n.morphNormals!==ps||$n.morphColors!==U4||$n.toneMapping!==Fu||!0===Qe.isWebGL2&&$n.morphTargetsCount!==Xa)&&(Ps=!0):(Ps=!0,$n.__version=se.version);let C1=$n.currentProgram;!0===Ps&&(C1=dc(se,ae,we));let Hl=!1,T5=!1,AA=!1;const Qr=C1.getUniforms(),G4=$n.uniforms;if(Pe.useProgram(C1.program)&&(Hl=!0,T5=!0,AA=!0),se.id!==b&&(b=se.id,T5=!0),Hl||x!==U){if(Qr.setValue(he,"projectionMatrix",U.projectionMatrix),Qe.logarithmicDepthBuffer&&Qr.setValue(he,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),x!==U&&(x=U,T5=!0,AA=!0),se.isShaderMaterial||se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshStandardMaterial||se.envMap){const Xo=Qr.map.cameraPosition;void 0!==Xo&&Xo.setValue(he,ye.setFromMatrixPosition(U.matrixWorld))}(se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshLambertMaterial||se.isMeshBasicMaterial||se.isMeshStandardMaterial||se.isShaderMaterial)&&Qr.setValue(he,"isOrthographic",!0===U.isOrthographicCamera),(se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshLambertMaterial||se.isMeshBasicMaterial||se.isMeshStandardMaterial||se.isShaderMaterial||se.isShadowMaterial||we.isSkinnedMesh)&&Qr.setValue(he,"viewMatrix",U.matrixWorldInverse)}if(we.isSkinnedMesh){Qr.setOptional(he,we,"bindMatrix"),Qr.setOptional(he,we,"bindMatrixInverse");const Xo=we.skeleton;Xo&&(Qe.floatVertexTextures?(null===Xo.boneTexture&&Xo.computeBoneTexture(),Qr.setValue(he,"boneTexture",Xo.boneTexture,me),Qr.setValue(he,"boneTextureSize",Xo.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const DA=xe.morphAttributes;if((void 0!==DA.position||void 0!==DA.normal||void 0!==DA.color&&!0===Qe.isWebGL2)&&Fe.update(we,xe,se,C1),(T5||$n.receiveShadow!==we.receiveShadow)&&($n.receiveShadow=we.receiveShadow,Qr.setValue(he,"receiveShadow",we.receiveShadow)),se.isMeshGouraudMaterial&&null!==se.envMap&&(G4.envMap.value=nn,G4.flipEnvMap.value=nn.isCubeTexture&&!1===nn.isRenderTargetTexture?-1:1),T5&&(Qr.setValue(he,"toneMappingExposure",m.toneMappingExposure),$n.needsLights&&function go(U,ae){U.ambientLightColor.needsUpdate=ae,U.lightProbe.needsUpdate=ae,U.directionalLights.needsUpdate=ae,U.directionalLightShadows.needsUpdate=ae,U.pointLights.needsUpdate=ae,U.pointLightShadows.needsUpdate=ae,U.spotLights.needsUpdate=ae,U.spotLightShadows.needsUpdate=ae,U.rectAreaLights.needsUpdate=ae,U.hemisphereLights.needsUpdate=ae}(G4,AA),Vt&&!0===se.fog&&Qt.refreshFogUniforms(G4,Vt),Qt.refreshMaterialUniforms(G4,se,Y,R,q),Rm.upload(he,$n.uniformsList,G4,me)),se.isShaderMaterial&&!0===se.uniformsNeedUpdate&&(Rm.upload(he,$n.uniformsList,G4,me),se.uniformsNeedUpdate=!1),se.isSpriteMaterial&&Qr.setValue(he,"center",we.center),Qr.setValue(he,"modelViewMatrix",we.modelViewMatrix),Qr.setValue(he,"normalMatrix",we.normalMatrix),Qr.setValue(he,"modelMatrix",we.matrixWorld),se.isShaderMaterial||se.isRawShaderMaterial){const Xo=se.uniformsGroups;for(let LA=0,_9t=Xo.length;LA<_9t;LA++)if(Qe.isWebGL2){const yse=Xo[LA];ke.update(yse,C1),ke.bind(yse,C1)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return C1}(U,ae,xe,se,we);Pe.setMaterial(se,en);let nn=xe.index;const Jn=xe.attributes.position;if(null===nn){if(void 0===Jn||0===Jn.count)return}else if(0===nn.count)return;let Rn=1;!0===se.wireframe&&(nn=Ne.getWireframeAttribute(xe),Rn=2),Te.setup(we,se,pn,xe,nn);let In,ps=Ye;null!==nn&&(In=Be.get(nn),ps=Mt,ps.setIndex(In));const U4=null!==nn?nn.count:Jn.count,Fu=xe.drawRange.start*Rn,Bu=xe.drawRange.count*Rn,Xa=null!==Vt?Vt.start*Rn:0,$n=null!==Vt?Vt.count*Rn:1/0,Uu=Math.max(Fu,Xa),Ps=Math.min(U4,Fu+Bu,Xa+$n)-1,C1=Math.max(0,Ps-Uu+1);if(0!==C1){if(we.isMesh)!0===se.wireframe?(Pe.setLineWidth(se.wireframeLinewidth*De()),ps.setMode(1)):ps.setMode(4);else if(we.isLine){let Hl=se.linewidth;void 0===Hl&&(Hl=1),Pe.setLineWidth(Hl*De()),ps.setMode(we.isLineSegments?1:we.isLineLoop?2:3)}else we.isPoints?ps.setMode(0):we.isSprite&&ps.setMode(4);if(we.isInstancedMesh)ps.renderInstances(Uu,C1,we.count);else if(xe.isInstancedBufferGeometry){const Hl=Math.min(xe.instanceCount,xe._maxInstanceCount);ps.renderInstances(Uu,C1,Hl)}else ps.render(Uu,C1)}},this.compile=function(U,ae){function xe(se,we,Vt){!0===se.transparent&&2===se.side?(se.side=1,se.needsUpdate=!0,dc(se,we,Vt),se.side=0,se.needsUpdate=!0,dc(se,we,Vt),se.side=2):dc(se,we,Vt)}d=W.get(U),d.init(),p.push(d),U.traverseVisible(function(se){se.isLight&&se.layers.test(ae.layers)&&(d.pushLight(se),se.castShadow&&d.pushShadow(se))}),d.setupLights(m.physicallyCorrectLights),U.traverse(function(se){const we=se.material;if(we)if(Array.isArray(we))for(let Vt=0;Vt<we.length;Vt++)xe(we[Vt],U,se);else xe(we,U,se)}),p.pop(),d=null};let st=null;function fn(){Ni.stop()}function Ms(){Ni.start()}const Ni=new w$;function hs(U,ae,xe,se){if(!1===U.visible)return;if(U.layers.test(ae.layers))if(U.isGroup)xe=U.renderOrder;else if(U.isLOD)!0===U.autoUpdate&&U.update(ae);else if(U.isLight)d.pushLight(U),U.castShadow&&d.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||O.intersectsSprite(U)){se&&ye.setFromMatrixPosition(U.matrixWorld).applyMatrix4(ne);const en=nt.update(U),pn=U.material;pn.visible&&h.push(U,en,pn,xe,ye.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(U.isSkinnedMesh&&U.skeleton.frame!==Ht.render.frame&&(U.skeleton.update(),U.skeleton.frame=Ht.render.frame),!U.frustumCulled||O.intersectsObject(U))){se&&ye.setFromMatrixPosition(U.matrixWorld).applyMatrix4(ne);const en=nt.update(U),pn=U.material;if(Array.isArray(pn)){const nn=en.groups;for(let Jn=0,Rn=nn.length;Jn<Rn;Jn++){const In=nn[Jn],ps=pn[In.materialIndex];ps&&ps.visible&&h.push(U,en,ps,xe,ye.z,In)}}else pn.visible&&h.push(U,en,pn,xe,ye.z,null)}const Vt=U.children;for(let en=0,pn=Vt.length;en<pn;en++)hs(Vt[en],ae,xe,se)}function Qn(U,ae,xe,se){const we=U.opaque,Vt=U.transmissive,en=U.transparent;d.setupLightsView(xe),Vt.length>0&&function ds(U,ae,xe){const se=Qe.isWebGL2;null===q&&(q=new hl(1,1,{generateMipmaps:!0,type:He.has("EXT_color_buffer_half_float")?P6:X3,minFilter:al,samples:se&&!0===r?4:0})),m.getDrawingBufferSize($),se?q.setSize($.x,$.y):q.setSize(am($.x),am($.y));const we=m.getRenderTarget();m.setRenderTarget(q),m.clear();const Vt=m.toneMapping;m.toneMapping=0,fs(U,ae,xe),m.toneMapping=Vt,me.updateMultisampleRenderTarget(q),me.updateRenderTargetMipmap(q),m.setRenderTarget(we)}(we,ae,xe),se&&Pe.viewport(w.copy(se)),we.length>0&&fs(we,ae,xe),Vt.length>0&&fs(Vt,ae,xe),en.length>0&&fs(en,ae,xe),Pe.buffers.depth.setTest(!0),Pe.buffers.depth.setMask(!0),Pe.buffers.color.setMask(!0),Pe.setPolygonOffset(!1)}function fs(U,ae,xe){const se=!0===ae.isScene?ae.overrideMaterial:null;for(let we=0,Vt=U.length;we<Vt;we++){const en=U[we],pn=en.object,nn=en.geometry,Jn=null===se?en.material:se,Rn=en.group;pn.layers.test(xe.layers)&&Kr(pn,ae,xe,nn,Jn,Rn)}}function Kr(U,ae,xe,se,we,Vt){U.onBeforeRender(m,ae,xe,se,we,Vt),U.modelViewMatrix.multiplyMatrices(xe.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),we.onBeforeRender(m,ae,xe,se,U,Vt),!0===we.transparent&&2===we.side?(we.side=1,we.needsUpdate=!0,m.renderBufferDirect(xe,ae,se,we,U,Vt),we.side=0,we.needsUpdate=!0,m.renderBufferDirect(xe,ae,se,we,U,Vt),we.side=2):m.renderBufferDirect(xe,ae,se,we,U,Vt),U.onAfterRender(m,ae,xe,se,we,Vt)}function dc(U,ae,xe){!0!==ae.isScene&&(ae=oe);const se=be.get(U),we=d.state.lights,en=we.state.version,pn=gt.getParameters(U,we.state,d.state.shadowsArray,ae,xe),nn=gt.getProgramCacheKey(pn);let Jn=se.programs;se.environment=U.isMeshStandardMaterial?ae.environment:null,se.fog=ae.fog,se.envMap=(U.isMeshStandardMaterial?at:Re).get(U.envMap||se.environment),void 0===Jn&&(U.addEventListener("dispose",ee),Jn=new Map,se.programs=Jn);let Rn=Jn.get(nn);if(void 0!==Rn){if(se.currentProgram===Rn&&se.lightsStateVersion===en)return B4(U,pn),Rn}else pn.uniforms=gt.getUniforms(U),U.onBuild(xe,pn,m),U.onBeforeCompile(pn,m),Rn=gt.acquireProgram(pn,nn),Jn.set(nn,Rn),se.uniforms=pn.uniforms;const In=se.uniforms;(!U.isShaderMaterial&&!U.isRawShaderMaterial||!0===U.clipping)&&(In.clippingPlanes=P.uniform),B4(U,pn),se.needsLights=function ha(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&!0===U.lights}(U),se.lightsStateVersion=en,se.needsLights&&(In.ambientLightColor.value=we.state.ambient,In.lightProbe.value=we.state.probe,In.directionalLights.value=we.state.directional,In.directionalLightShadows.value=we.state.directionalShadow,In.spotLights.value=we.state.spot,In.spotLightShadows.value=we.state.spotShadow,In.rectAreaLights.value=we.state.rectArea,In.ltc_1.value=we.state.rectAreaLTC1,In.ltc_2.value=we.state.rectAreaLTC2,In.pointLights.value=we.state.point,In.pointLightShadows.value=we.state.pointShadow,In.hemisphereLights.value=we.state.hemi,In.directionalShadowMap.value=we.state.directionalShadowMap,In.directionalShadowMatrix.value=we.state.directionalShadowMatrix,In.spotShadowMap.value=we.state.spotShadowMap,In.spotLightMatrix.value=we.state.spotLightMatrix,In.spotLightMap.value=we.state.spotLightMap,In.pointShadowMap.value=we.state.pointShadowMap,In.pointShadowMatrix.value=we.state.pointShadowMatrix);const ps=Rn.getUniforms(),U4=Rm.seqWithValue(ps.seq,In);return se.currentProgram=Rn,se.uniformsList=U4,Rn}function B4(U,ae){const xe=be.get(U);xe.outputEncoding=ae.outputEncoding,xe.instancing=ae.instancing,xe.skinning=ae.skinning,xe.morphTargets=ae.morphTargets,xe.morphNormals=ae.morphNormals,xe.morphColors=ae.morphColors,xe.morphTargetsCount=ae.morphTargetsCount,xe.numClippingPlanes=ae.numClippingPlanes,xe.numIntersection=ae.numClipIntersection,xe.vertexAlphas=ae.vertexAlphas,xe.vertexTangents=ae.vertexTangents,xe.toneMapping=ae.toneMapping}Ni.setAnimationLoop(function tt(U){st&&st(U)}),typeof self<"u"&&Ni.setContext(self),this.setAnimationLoop=function(U){st=U,et.setAnimationLoop(U),null===U?Ni.stop():Ni.start()},et.addEventListener("sessionstart",fn),et.addEventListener("sessionend",Ms),this.render=function(U,ae){if(void 0===ae||!0===ae.isCamera){if(!0!==g){if(!0===U.matrixWorldAutoUpdate&&U.updateMatrixWorld(),null===ae.parent&&!0===ae.matrixWorldAutoUpdate&&ae.updateMatrixWorld(),!0===et.enabled&&!0===et.isPresenting&&(!0===et.cameraAutoUpdate&&et.updateCamera(ae),ae=et.getCamera()),!0===U.isScene&&U.onBeforeRender(m,U,ae,y),d=W.get(U,p.length),d.init(),p.push(d),ne.multiplyMatrices(ae.projectionMatrix,ae.matrixWorldInverse),O.setFromProjectionMatrix(ne),B=this.localClippingEnabled,N=P.init(this.clippingPlanes,B,ae),h=Sn.get(U,f.length),h.init(),f.push(h),hs(U,ae,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(Q,j),!0===N&&P.beginShadows(),ue.render(d.state.shadowsArray,U,ae),!0===N&&P.endShadows(),!0===this.info.autoReset&&this.info.reset(),ze.render(h,U),d.setupLights(m.physicallyCorrectLights),ae.isArrayCamera){const se=ae.cameras;for(let we=0,Vt=se.length;we<Vt;we++){const en=se[we];Qn(h,U,en,en.viewport)}}else Qn(h,U,ae);null!==y&&(me.updateMultisampleRenderTarget(y),me.updateRenderTargetMipmap(y)),!0===U.isScene&&U.onAfterRender(m,U,ae),Te.resetDefaultState(),b=-1,x=null,p.pop(),d=p.length>0?p[p.length-1]:null,f.pop(),h=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(U,ae,xe){be.get(U.texture).__webglTexture=ae,be.get(U.depthTexture).__webglTexture=xe;const se=be.get(U);se.__hasExternalTextures=!0,se.__hasExternalTextures&&(se.__autoAllocateDepthBuffer=void 0===xe,se.__autoAllocateDepthBuffer||!0===He.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),se.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,ae){const xe=be.get(U);xe.__webglFramebuffer=ae,xe.__useDefaultFramebuffer=void 0===ae},this.setRenderTarget=function(U,ae=0,xe=0){y=U,v=ae,_=xe;let se=!0;if(U){const nn=be.get(U);void 0!==nn.__useDefaultFramebuffer?(Pe.bindFramebuffer(36160,null),se=!1):void 0===nn.__webglFramebuffer?me.setupRenderTarget(U):nn.__hasExternalTextures&&me.rebindTextures(U,be.get(U.texture).__webglTexture,be.get(U.depthTexture).__webglTexture)}let we=null,Vt=!1,en=!1;if(U){const nn=U.texture;(nn.isData3DTexture||nn.isDataArrayTexture)&&(en=!0);const Jn=be.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(we=Jn[ae],Vt=!0):we=Qe.isWebGL2&&U.samples>0&&!1===me.useMultisampledRTT(U)?be.get(U).__webglMultisampledFramebuffer:Jn,w.copy(U.viewport),L.copy(U.scissor),C=U.scissorTest}else w.copy(z).multiplyScalar(Y).floor(),L.copy(G).multiplyScalar(Y).floor(),C=k;if(Pe.bindFramebuffer(36160,we)&&Qe.drawBuffers&&se&&Pe.drawBuffers(U,we),Pe.viewport(w),Pe.scissor(L),Pe.setScissorTest(C),Vt){const nn=be.get(U.texture);he.framebufferTexture2D(36160,36064,34069+ae,nn.__webglTexture,xe)}else if(en){const nn=be.get(U.texture);he.framebufferTextureLayer(36160,36064,nn.__webglTexture,xe||0,ae||0)}b=-1},this.readRenderTargetPixels=function(U,ae,xe,se,we,Vt,en){if(!U||!U.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let pn=be.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&void 0!==en&&(pn=pn[en]),pn){Pe.bindFramebuffer(36160,pn);try{const nn=U.texture,Jn=nn.format,Rn=nn.type;if(Jn!==K1&&F.convert(Jn)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const In=Rn===P6&&(He.has("EXT_color_buffer_half_float")||Qe.isWebGL2&&He.has("EXT_color_buffer_float"));if(!(Rn===X3||F.convert(Rn)===he.getParameter(35738)||Rn===cl&&(Qe.isWebGL2||He.has("OES_texture_float")||He.has("WEBGL_color_buffer_float"))||In))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ae>=0&&ae<=U.width-se&&xe>=0&&xe<=U.height-we&&he.readPixels(ae,xe,se,we,F.convert(Jn),F.convert(Rn),Vt)}finally{const nn=null!==y?be.get(y).__webglFramebuffer:null;Pe.bindFramebuffer(36160,nn)}}},this.copyFramebufferToTexture=function(U,ae,xe=0){const se=Math.pow(2,-xe),we=Math.floor(ae.image.width*se),Vt=Math.floor(ae.image.height*se);me.setTexture2D(ae,0),he.copyTexSubImage2D(3553,xe,0,0,U.x,U.y,we,Vt),Pe.unbindTexture()},this.copyTextureToTexture=function(U,ae,xe,se=0){const we=ae.image.width,Vt=ae.image.height,en=F.convert(xe.format),pn=F.convert(xe.type);me.setTexture2D(xe,0),he.pixelStorei(37440,xe.flipY),he.pixelStorei(37441,xe.premultiplyAlpha),he.pixelStorei(3317,xe.unpackAlignment),ae.isDataTexture?he.texSubImage2D(3553,se,U.x,U.y,we,Vt,en,pn,ae.image.data):ae.isCompressedTexture?he.compressedTexSubImage2D(3553,se,U.x,U.y,ae.mipmaps[0].width,ae.mipmaps[0].height,en,ae.mipmaps[0].data):he.texSubImage2D(3553,se,U.x,U.y,en,pn,ae.image),0===se&&xe.generateMipmaps&&he.generateMipmap(3553),Pe.unbindTexture()},this.copyTextureToTexture3D=function(U,ae,xe,se,we=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Vt=U.max.x-U.min.x+1,en=U.max.y-U.min.y+1,pn=U.max.z-U.min.z+1,nn=F.convert(se.format),Jn=F.convert(se.type);let Rn;if(se.isData3DTexture)me.setTexture3D(se,0),Rn=32879;else{if(!se.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");me.setTexture2DArray(se,0),Rn=35866}he.pixelStorei(37440,se.flipY),he.pixelStorei(37441,se.premultiplyAlpha),he.pixelStorei(3317,se.unpackAlignment);const In=he.getParameter(3314),ps=he.getParameter(32878),U4=he.getParameter(3316),Fu=he.getParameter(3315),Bu=he.getParameter(32877),Xa=xe.isCompressedTexture?xe.mipmaps[0]:xe.image;he.pixelStorei(3314,Xa.width),he.pixelStorei(32878,Xa.height),he.pixelStorei(3316,U.min.x),he.pixelStorei(3315,U.min.y),he.pixelStorei(32877,U.min.z),xe.isDataTexture||xe.isData3DTexture?he.texSubImage3D(Rn,we,ae.x,ae.y,ae.z,Vt,en,pn,nn,Jn,Xa.data):xe.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(Rn,we,ae.x,ae.y,ae.z,Vt,en,pn,nn,Xa.data)):he.texSubImage3D(Rn,we,ae.x,ae.y,ae.z,Vt,en,pn,nn,Jn,Xa),he.pixelStorei(3314,In),he.pixelStorei(32878,ps),he.pixelStorei(3316,U4),he.pixelStorei(3315,Fu),he.pixelStorei(32877,Bu),0===we&&se.generateMipmaps&&he.generateMipmap(Rn),Pe.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?me.setTextureCube(U,0):U.isData3DTexture?me.setTexture3D(U,0):U.isDataArrayTexture?me.setTexture2DArray(U,0):me.setTexture2D(U,0),Pe.unbindTexture()},this.resetState=function(){v=0,_=0,y=null,Pe.reset(),Te.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class VBe extends TS{}).prototype.isWebGL1Renderer=!0;class DS extends hr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class LS{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Uo()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Uo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Uo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Xr=new V;class h4{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Xr.fromBufferAttribute(this,t),Xr.applyMatrix4(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Xr.fromBufferAttribute(this,t),Xr.applyNormalMatrix(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Xr.fromBufferAttribute(this,t),Xr.transformDirection(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}setX(e,t){return this.normalized&&(t=hi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=hi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=hi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=hi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=q2(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=q2(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=q2(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=q2(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=hi(t,this.array),i=hi(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=hi(t,this.array),i=hi(i,this.array),s=hi(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=hi(t,this.array),i=hi(i,this.array),s=hi(s,this.array),r=hi(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new Pi(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new h4(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const sq=new V,rq=new jn,oq=new jn,NBe=new V,aq=new Dt;class cq extends cs{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Dt,this.bindMatrixInverse=new Dt}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new jn,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,s=this.geometry;rq.fromBufferAttribute(s.attributes.skinIndex,e),oq.fromBufferAttribute(s.attributes.skinWeight,e),sq.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const o=oq.getComponent(r);if(0!==o){const a=rq.getComponent(r);aq.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(NBe.copy(sq).applyMatrix4(aq),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class kS extends hr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class L8 extends ea{constructor(e=null,t=1,i=1,s,r,o,a,c,l=Rs,u=Rs,h,d){super(null,o,a,c,l,u,s,r,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const lq=new Dt,FBe=new Dt;class Om{constructor(e=[],t=[]){this.uuid=Uo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new Dt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Dt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let r=0,o=e.length;r<o;r++)lq.multiplyMatrices(e[r]?e[r].matrixWorld:FBe,t[r]),lq.toArray(i,16*r);null!==s&&(s.needsUpdate=!0)}clone(){return new Om(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=r$(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new L8(t,e,e,K1,cl);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const r=e.bones[i];let o=t[r];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new kS),this.bones.push(o),this.boneInverses.push((new Dt).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,r=t.length;s<r;s++)e.bones.push(t[s].uuid),e.boneInverses.push(i[s].toArray());return e}}class dr extends $r{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new $e(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const dq=new V,fq=new V,pq=new Dt,RS=new gm,Fm=new a4;class d4 extends hr{constructor(e=new on,t=new dr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let s=1,r=t.count;s<r;s++)dq.fromBufferAttribute(t,s-1),fq.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=dq.distanceTo(fq);e.setAttribute("lineDistance",new ht(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Fm.copy(i.boundingSphere),Fm.applyMatrix4(s),Fm.radius+=r,!1===e.ray.intersectsSphere(Fm))return;pq.copy(s).invert(),RS.copy(e.ray).applyMatrix4(pq);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=new V,u=new V,h=new V,d=new V,f=this.isLineSegments?2:1,p=i.index,g=i.attributes.position;if(null!==p)for(let y=Math.max(0,o.start),b=Math.min(p.count,o.start+o.count)-1;y<b;y+=f){const x=p.getX(y),w=p.getX(y+1);if(l.fromBufferAttribute(g,x),u.fromBufferAttribute(g,w),RS.distanceSqToSegment(l,u,d,h)>c)continue;d.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(d);C<e.near||C>e.far||t.push({distance:C,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(let y=Math.max(0,o.start),b=Math.min(g.count,o.start+o.count)-1;y<b;y+=f){if(l.fromBufferAttribute(g,y),u.fromBufferAttribute(g,y+1),RS.distanceSqToSegment(l,u,d,h)>c)continue;d.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(d);w<e.near||w>e.far||t.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}const mq=new V,gq=new V;class fu extends d4{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let s=0,r=t.count;s<r;s+=2)mq.fromBufferAttribute(t,s),gq.fromBufferAttribute(t,s+1),i[s]=0===s?0:i[s-1],i[s+1]=i[s]+mq.distanceTo(gq);e.setAttribute("lineDistance",new ht(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class vq extends d4{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class f4 extends $r{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new $e(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const _q=new Dt,IS=new gm,Bm=new a4,Um=new V;class R8 extends hr{constructor(e=new on,t=new f4){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Bm.copy(i.boundingSphere),Bm.applyMatrix4(s),Bm.radius+=r,!1===e.ray.intersectsSphere(Bm))return;_q.copy(s).invert(),IS.copy(e.ray).applyMatrix4(_q);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,h=i.attributes.position;if(null!==l)for(let p=Math.max(0,o.start),m=Math.min(l.count,o.start+o.count);p<m;p++){const g=l.getX(p);Um.fromBufferAttribute(h,g),yq(Um,g,c,s,e,t,this)}else for(let p=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);p<m;p++)Um.fromBufferAttribute(h,p),yq(Um,p,c,s,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function yq(n,e,t,i,s,r,o){const a=IS.distanceSqToPoint(n);if(a<t){const c=new V;IS.closestPointToPoint(n,c),c.applyMatrix4(i);const l=s.ray.origin.distanceTo(c);if(l<s.near||l>s.far)return;r.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}class Ba{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,s=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),r+=i.distanceTo(s),t.push(r),s=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let s=0;const r=i.length;let o;o=t||e*i[r-1];let l,a=0,c=r-1;for(;a<=c;)if(s=Math.floor(a+(c-a)/2),l=i[s]-o,l<0)a=s+1;else{if(!(l>0)){c=s;break}c=s-1}if(s=c,i[s]===o)return s/(r-1);const u=i[s];return(s+(o-u)/(i[s+1]-u))/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const o=this.getPoint(s),a=this.getPoint(r),c=t||(o.isVector2?new Me:new V);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new V,s=[],r=[],o=[],a=new V,c=new Dt;for(let f=0;f<=e;f++)s[f]=this.getTangentAt(f/e,new V);r[0]=new V,o[0]=new V;let l=Number.MAX_VALUE;const u=Math.abs(s[0].x),h=Math.abs(s[0].y),d=Math.abs(s[0].z);u<=l&&(l=u,i.set(1,0,0)),h<=l&&(l=h,i.set(0,1,0)),d<=l&&i.set(0,0,1),a.crossVectors(s[0],i).normalize(),r[0].crossVectors(s[0],a),o[0].crossVectors(s[0],r[0]);for(let f=1;f<=e;f++){if(r[f]=r[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(s[f-1],s[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(bs(s[f-1].dot(s[f]),-1,1));r[f].applyMatrix4(c.makeRotationAxis(a,p))}o[f].crossVectors(s[f],r[f])}if(!0===t){let f=Math.acos(bs(r[0].dot(r[e]),-1,1));f/=e,s[0].dot(a.crossVectors(r[0],r[e]))>0&&(f=-f);for(let p=1;p<=e;p++)r[p].applyMatrix4(c.makeRotationAxis(s[p],f*p)),o[p].crossVectors(s[p],r[p])}return{tangents:s,normals:r,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class HS extends Ba{constructor(e=0,t=0,i=1,s=1,r=0,o=2*Math.PI,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t){const i=t||new Me,s=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(r=o?0:s),!0===this.aClockwise&&!o&&(r===s?r=-s:r-=s);const a=this.aStartAngle+e*r;let c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=c-this.aX,f=l-this.aY;c=d*u-f*h+this.aX,l=d*h+f*u+this.aY}return i.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function VS(){let n=0,e=0,t=0,i=0;function s(r,o,a,c){n=r,e=a,t=-3*r+3*o-2*a-c,i=2*r-2*o+a+c}return{initCatmullRom:function(r,o,a,c,l){s(o,a,l*(a-r),l*(c-o))},initNonuniformCatmullRom:function(r,o,a,c,l,u,h){let d=(o-r)/l-(a-r)/(l+u)+(a-o)/u,f=(a-o)/u-(c-o)/(u+h)+(c-a)/h;d*=u,f*=u,s(o,a,d,f)},calc:function(r){const o=r*r;return n+e*r+t*o+i*(o*r)}}}const Gm=new V,PS=new VS,OS=new VS,NS=new VS;function bq(n,e,t,i,s){const r=.5*(i-e),o=.5*(s-t),a=n*n;return(2*t-2*i+r+o)*(n*a)+(-3*t+3*i-2*r-o)*a+r*n+t}function I8(n,e,t,i){return function jBe(n,e){const t=1-n;return t*t*e}(n,e)+function $Be(n,e){return 2*(1-n)*n*e}(n,t)+function qBe(n,e){return n*n*e}(n,i)}function H8(n,e,t,i,s){return function YBe(n,e){const t=1-n;return t*t*t*e}(n,e)+function XBe(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function ZBe(n,e){return 3*(1-n)*n*n*e}(n,i)+function KBe(n,e){return n*n*n*e}(n,s)}class xq extends Ba{constructor(e=new Me,t=new Me,i=new Me,s=new Me){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new Me){const i=t,s=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(H8(e,s.x,r.x,o.x,a.x),H8(e,s.y,r.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class FS extends Ba{constructor(e=new Me,t=new Me){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Me){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Me;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Mq extends Ba{constructor(e=new Me,t=new Me,i=new Me){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Me){const i=t,s=this.v0,r=this.v1,o=this.v2;return i.set(I8(e,s.x,r.x,o.x),I8(e,s.y,r.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class wq extends Ba{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Me){const i=t,s=this.points,r=(s.length-1)*e,o=Math.floor(r),a=r-o,c=s[0===o?o:o-1],l=s[o],u=s[o>s.length-2?s.length-1:o+1],h=s[o>s.length-3?s.length-1:o+2];return i.set(bq(a,c.x,l.x,u.x,h.x),bq(a,c.y,l.y,u.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push((new Me).fromArray(s))}return this}}var BS=Object.freeze({__proto__:null,ArcCurve:class GBe extends HS{constructor(e,t,i,s,r,o){super(e,t,i,i,s,r,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class WBe extends Ba{constructor(e=[],t=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=s}getPoint(e,t=new V){const i=t,s=this.points,r=s.length,o=(r-(this.closed?0:1))*e;let l,u,a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/r)+1)*r:0===c&&a===r-1&&(a=r-2,c=1),this.closed||a>0?l=s[(a-1)%r]:(Gm.subVectors(s[0],s[1]).add(s[0]),l=Gm);const h=s[a%r],d=s[(a+1)%r];if(this.closed||a+2<r?u=s[(a+2)%r]:(Gm.subVectors(s[r-1],s[r-2]).add(s[r-1]),u=Gm),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let p=Math.pow(l.distanceToSquared(h),f),m=Math.pow(h.distanceToSquared(d),f),g=Math.pow(d.distanceToSquared(u),f);m<1e-4&&(m=1),p<1e-4&&(p=m),g<1e-4&&(g=m),PS.initNonuniformCatmullRom(l.x,h.x,d.x,u.x,p,m,g),OS.initNonuniformCatmullRom(l.y,h.y,d.y,u.y,p,m,g),NS.initNonuniformCatmullRom(l.z,h.z,d.z,u.z,p,m,g)}else"catmullrom"===this.curveType&&(PS.initCatmullRom(l.x,h.x,d.x,u.x,this.tension),OS.initCatmullRom(l.y,h.y,d.y,u.y,this.tension),NS.initCatmullRom(l.z,h.z,d.z,u.z,this.tension));return i.set(PS.calc(c),OS.calc(c),NS.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push((new V).fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:xq,CubicBezierCurve3:class QBe extends Ba{constructor(e=new V,t=new V,i=new V,s=new V){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new V){const i=t,s=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(H8(e,s.x,r.x,o.x,a.x),H8(e,s.y,r.y,o.y,a.y),H8(e,s.z,r.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:HS,LineCurve:FS,LineCurve3:class JBe extends Ba{constructor(e=new V,t=new V){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new V){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Mq,QuadraticBezierCurve3:class Cq extends Ba{constructor(e=new V,t=new V,i=new V){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new V){const i=t,s=this.v0,r=this.v1,o=this.v2;return i.set(I8(e,s.x,r.x,o.x),I8(e,s.y,r.y,o.y),I8(e,s.z,r.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:wq});class eUe extends Ba{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new FS(t,e))}getPoint(e,t){const i=e*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=i){const o=s[r]-i,a=this.curves[r],c=a.getLength();return a.getPointAt(0===c?0:1-o/c,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,s=this.curves.length;i<s;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let s=0,r=this.curves;s<r.length;s++){const o=r[s],c=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let l=0;l<c.length;l++){const u=c[l];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push((new BS[s.type]).fromJSON(s))}return this}}class Wm extends eUe{constructor(e){super(),this.type="Path",this.currentPoint=new Me,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new FS(this.currentPoint.clone(),new Me(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,s){const r=new Mq(this.currentPoint.clone(),new Me(e,t),new Me(i,s));return this.curves.push(r),this.currentPoint.set(i,s),this}bezierCurveTo(e,t,i,s,r,o){const a=new xq(this.currentPoint.clone(),new Me(e,t),new Me(i,s),new Me(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new wq(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,s,r,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,s,r,o),this}absarc(e,t,i,s,r,o){return this.absellipse(e,t,i,i,s,r,o),this}ellipse(e,t,i,s,r,o,a,c){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,s,r,o,a,c),this}absellipse(e,t,i,s,r,o,a,c){const l=new HS(e,t,i,s,r,o,a,c);if(this.curves.length>0){const h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class m4 extends Wm{constructor(e){super(e),this.uuid=Uo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,s=this.holes.length;i<s;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push((new Wm).fromJSON(s))}return this}}function Sq(n,e,t,i,s){let r,o;if(s===function _Ue(n,e,t,i){let s=0;for(let r=e,o=t-i;r<t;r+=i)s+=(n[o]-n[r])*(n[r+1]+n[o+1]),o=r;return s}(n,e,t,i)>0)for(r=e;r<t;r+=i)o=Aq(r,n[r],n[r+1],o);else for(r=t-i;r>=e;r-=i)o=Aq(r,n[r],n[r+1],o);return o&&Xm(o,o.next)&&(N8(o),o=o.next),o}function yl(n,e){if(!n)return n;e||(e=n);let i,t=n;do{if(i=!1,t.steiner||!Xm(t,t.next)&&0!==$i(t.prev,t,t.next))t=t.next;else{if(N8(t),t=e=t.prev,t===t.next)break;i=!0}}while(i||t!==e);return e}function P8(n,e,t,i,s,r,o){if(!n)return;!o&&r&&function dUe(n,e,t,i){let s=n;do{null===s.z&&(s.z=qS(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,function fUe(n){let e,t,i,s,r,o,a,c,l=1;do{for(t=n,n=null,r=null,o=0;t;){for(o++,i=t,a=0,e=0;e<l&&(a++,i=i.nextZ,i);e++);for(c=l;a>0||c>0&&i;)0!==a&&(0===c||!i||t.z<=i.z)?(s=t,t=t.nextZ,a--):(s=i,i=i.nextZ,c--),r?r.nextZ=s:n=s,s.prevZ=r,r=s;t=i}r.nextZ=null,l*=2}while(o>1)}(s)}(n,i,s,r);let c,l,a=n;for(;n.prev!==n.next;)if(c=n.prev,l=n.next,r?sUe(n,i,s,r):iUe(n))e.push(c.i/t),e.push(n.i/t),e.push(l.i/t),N8(n),n=l.next,a=l.next;else if((n=l)===a){o?1===o?P8(n=rUe(yl(n),e,t),e,t,i,s,r,2):2===o&&oUe(n,e,t,i,s,r):P8(yl(n),e,t,i,s,r,1);break}}function iUe(n){const e=n.prev,t=n,i=n.next;if($i(e,t,i)>=0)return!1;let s=n.next.next;for(;s!==n.prev;){if(pu(e.x,e.y,t.x,t.y,i.x,i.y,s.x,s.y)&&$i(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function sUe(n,e,t,i){const s=n.prev,r=n,o=n.next;if($i(s,r,o)>=0)return!1;const l=s.x>r.x?s.x>o.x?s.x:o.x:r.x>o.x?r.x:o.x,u=s.y>r.y?s.y>o.y?s.y:o.y:r.y>o.y?r.y:o.y,h=qS(s.x<r.x?s.x<o.x?s.x:o.x:r.x<o.x?r.x:o.x,s.y<r.y?s.y<o.y?s.y:o.y:r.y<o.y?r.y:o.y,e,t,i),d=qS(l,u,e,t,i);let f=n.prevZ,p=n.nextZ;for(;f&&f.z>=h&&p&&p.z<=d;){if(f!==n.prev&&f!==n.next&&pu(s.x,s.y,r.x,r.y,o.x,o.y,f.x,f.y)&&$i(f.prev,f,f.next)>=0||(f=f.prevZ,p!==n.prev&&p!==n.next&&pu(s.x,s.y,r.x,r.y,o.x,o.y,p.x,p.y)&&$i(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=h;){if(f!==n.prev&&f!==n.next&&pu(s.x,s.y,r.x,r.y,o.x,o.y,f.x,f.y)&&$i(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==n.prev&&p!==n.next&&pu(s.x,s.y,r.x,r.y,o.x,o.y,p.x,p.y)&&$i(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function rUe(n,e,t){let i=n;do{const s=i.prev,r=i.next.next;!Xm(s,r)&&Tq(s,i,i.next,r)&&O8(s,r)&&O8(r,s)&&(e.push(s.i/t),e.push(i.i/t),e.push(r.i/t),N8(i),N8(i.next),i=n=r),i=i.next}while(i!==n);return yl(i)}function oUe(n,e,t,i,s,r){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&mUe(o,a)){let c=Eq(o,a);return o=yl(o,o.next),c=yl(c,c.next),P8(o,e,t,i,s,r),void P8(c,e,t,i,s,r)}a=a.next}o=o.next}while(o!==n)}function cUe(n,e){return n.x-e.x}function lUe(n,e){if(e=function uUe(n,e){let t=e;const i=n.x,s=n.y;let o,r=-1/0;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const d=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>r){if(r=d,d===i){if(s===t.y)return t;if(s===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===r)return o;const a=o,c=o.x,l=o.y;let h,u=1/0;t=o;do{i>=t.x&&t.x>=c&&i!==t.x&&pu(s<l?i:r,s,c,l,s<l?r:i,s,t.x,t.y)&&(h=Math.abs(s-t.y)/(i-t.x),O8(t,n)&&(h<u||h===u&&(t.x>o.x||t.x===o.x&&hUe(o,t)))&&(o=t,u=h)),t=t.next}while(t!==a);return o}(n,e),e){const t=Eq(e,n);yl(e,e.next),yl(t,t.next)}}function hUe(n,e){return $i(n.prev,n,e.prev)<0&&$i(e.next,n,n.next)<0}function qS(n,e,t,i,s){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*s)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*s)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function pUe(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function pu(n,e,t,i,s,r,o,a){return(s-o)*(e-a)-(n-o)*(r-a)>=0&&(n-o)*(i-a)-(t-o)*(e-a)>=0&&(t-o)*(r-a)-(s-o)*(i-a)>=0}function mUe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function gUe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Tq(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(O8(n,e)&&O8(e,n)&&function vUe(n,e){let t=n,i=!1;const s=(n.x+e.x)/2,r=(n.y+e.y)/2;do{t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next}while(t!==n);return i}(n,e)&&($i(n.prev,n,e.prev)||$i(n,e.prev,e))||Xm(n,e)&&$i(n.prev,n,n.next)>0&&$i(e.prev,e,e.next)>0)}function $i(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Xm(n,e){return n.x===e.x&&n.y===e.y}function Tq(n,e,t,i){const s=Km($i(n,e,t)),r=Km($i(n,e,i)),o=Km($i(t,i,n)),a=Km($i(t,i,e));return!!(s!==r&&o!==a||0===s&&Zm(n,t,e)||0===r&&Zm(n,i,e)||0===o&&Zm(t,n,i)||0===a&&Zm(t,e,i))}function Zm(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Km(n){return n>0?1:n<0?-1:0}function O8(n,e){return $i(n.prev,n,n.next)<0?$i(n,e,n.next)>=0&&$i(n,n.prev,e)>=0:$i(n,e,n.prev)<0||$i(n,n.next,e)<0}function Eq(n,e){const t=new YS(n.i,n.x,n.y),i=new YS(e.i,e.x,e.y),s=n.next,r=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,i.next=t,t.prev=i,r.next=i,i.prev=r,i}function Aq(n,e,t,i){const s=new YS(n,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function N8(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function YS(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ec{static area(e){const t=e.length;let i=0;for(let s=t-1,r=0;r<t;s=r++)i+=e[s].x*e[r].y-e[r].x*e[s].y;return.5*i}static isClockWise(e){return ec.area(e)<0}static triangulateShape(e,t){const i=[],s=[],r=[];Dq(e),Lq(i,e);let o=e.length;t.forEach(Dq);for(let c=0;c<t.length;c++)s.push(o),o+=t[c].length,Lq(i,t[c]);const a=function(n,e,t=2){const i=e&&e.length,s=i?e[0]*t:n.length;let r=Sq(n,0,s,t,!0);const o=[];if(!r||r.next===r.prev)return o;let a,c,l,u,h,d,f;if(i&&(r=function aUe(n,e,t,i){const s=[];let r,o,a,c,l;for(r=0,o=e.length;r<o;r++)a=e[r]*i,c=r<o-1?e[r+1]*i:n.length,l=Sq(n,a,c,i,!1),l===l.next&&(l.steiner=!0),s.push(pUe(l));for(s.sort(cUe),r=0;r<s.length;r++)lUe(s[r],t),t=yl(t,t.next);return t}(n,e,r,t)),n.length>80*t){a=l=n[0],c=u=n[1];for(let p=t;p<s;p+=t)h=n[p],d=n[p+1],h<a&&(a=h),d<c&&(c=d),h>l&&(l=h),d>u&&(u=d);f=Math.max(l-a,u-c),f=0!==f?1/f:0}return P8(r,o,t,a,c,f),o}(i,s);for(let c=0;c<a.length;c+=3)r.push(a.slice(c,c+3));return r}}function Dq(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Lq(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Jm extends on{constructor(e=new m4([new Me(0,.5),new Me(-.5,-.5),new Me(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],s=[],r=[],o=[];let a=0,c=0;if(!1===Array.isArray(e))l(e);else for(let u=0;u<e.length;u++)l(e[u]),this.addGroup(a,c,u),a+=c,c=0;function l(u){const h=s.length/3,d=u.extractPoints(t);let f=d.shape;const p=d.holes;!1===ec.isClockWise(f)&&(f=f.reverse());for(let g=0,v=p.length;g<v;g++){const _=p[g];!0===ec.isClockWise(_)&&(p[g]=_.reverse())}const m=ec.triangulateShape(f,p);for(let g=0,v=p.length;g<v;g++)f=f.concat(p[g]);for(let g=0,v=f.length;g<v;g++){const _=f[g];s.push(_.x,_.y,0),r.push(0,0,1),o.push(_.x,_.y)}for(let g=0,v=m.length;g<v;g++){const _=m[g];i.push(_[0]+h,_[1]+h,_[2]+h),c+=3}}this.setIndex(i),this.setAttribute("position",new ht(s,3)),this.setAttribute("normal",new ht(r,3)),this.setAttribute("uv",new ht(o,2))}toJSON(){const e=super.toJSON();return function xUe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++)e.shapes.push(n[t].uuid);else e.shapes.push(n.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let s=0,r=e.shapes.length;s<r;s++)i.push(t[e.shapes[s]]);return new Jm(i,e.curveSegments)}}class F8 extends $r{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new $e(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bl extends F8{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Me(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return bs(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new $e(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new $e(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new $e(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Rq extends $r{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new $e(16777215),this.specular=new $e(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ys extends $r{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function x1(n,e,t){return nT(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)}function g4(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function nT(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Iq(n){const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(function e(s,r){return n[s]-n[r]}),i}function iT(n,e,t){const i=n.length,s=new n.constructor(i);for(let r=0,o=0;o!==i;++r){const a=t[r]*e;for(let c=0;c!==e;++c)s[o++]=n[a+c]}return s}function sT(n,e,t,i){let s=1,r=n[0];for(;void 0!==r&&void 0===r[i];)r=n[s++];if(void 0===r)return;let o=r[i];if(void 0!==o)if(Array.isArray(o))do{o=r[i],void 0!==o&&(e.push(r.time),t.push.apply(t,o)),r=n[s++]}while(void 0!==r);else if(void 0!==o.toArray)do{o=r[i],void 0!==o&&(e.push(r.time),o.toArray(t,t.length)),r=n[s++]}while(void 0!==r);else do{o=r[i],void 0!==o&&(e.push(r.time),t.push(o)),r=n[s++]}while(void 0!==r)}class B8{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==s?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],r=t[i-1];e:{t:{let o;n:{i:if(!(e<s)){for(let a=i+2;;){if(void 0===s){if(e<r)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(r=s,s=t[++i],e<s)break t}o=t.length;break n}if(e>=r)break e;{const a=t[1];e<a&&(i=2,r=a);for(let c=i-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(s=r,r=t[--i-1],e>=r)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(s=t[i],r=t[i-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===s)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,s)}return this.interpolate_(i,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s;for(let o=0;o!==s;++o)t[o]=i[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class zUe extends B8{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const s=this.parameterPositions;let r=e-2,o=e+1,a=s[r],c=s[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=e,a=2*t-i;break;case 2402:r=s.length-2,a=t+s[r]-s[r+1];break;default:r=e,a=i}if(void 0===c)switch(this.getSettings_().endingEnd){case 2401:o=e,c=2*i-t;break;case 2402:o=1,c=i+s[1]-s[0];break;default:o=e-1,c=t}const l=.5*(i-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=r*u,this._offsetNext=o*u}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,p=(i-t)/(s-t),m=p*p,g=m*p,v=-d*g+2*d*m-d*p,_=(1+d)*g+(-1.5-2*d)*m+(-.5+d)*p+1,y=(-1-f)*g+(1.5+f)*m+.5*p,b=f*g-f*m;for(let x=0;x!==a;++x)r[x]=v*o[u+x]+_*o[l+x]+y*o[c+x]+b*o[h+x];return r}}class Hq extends B8{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(s-t),h=1-u;for(let d=0;d!==a;++d)r[d]=o[l+d]*h+o[c+d]*u;return r}}class kUe extends B8{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ua{constructor(e,t,i,s){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=g4(t,this.TimeBufferType),this.values=g4(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:g4(e.times,Array),values:g4(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new kUe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Hq(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new zUe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case y8:t=this.InterpolantFactoryMethodDiscrete;break;case F6:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return y8;case this.InterpolantFactoryMethodLinear:return F6;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let r=0,o=s-1;for(;r!==s&&i[r]<e;)++r;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==r||o!==s){r>=o&&(o=Math.max(o,1),r=o-1);const a=this.getValueSize();this.times=x1(i,r,o),this.values=x1(this.values,r*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==r;a++){const c=i[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==o&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(void 0!==s&&nT(s))for(let a=0,c=s.length;a!==c;++a){const l=s[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=x1(this.times),t=x1(this.values),i=this.getValueSize(),s=2302===this.getInterpolation(),r=e.length-1;let o=1;for(let a=1;a<r;++a){let c=!1;const l=e[a];if(l!==e[a+1]&&(1!==a||l!==e[0]))if(s)c=!0;else{const h=a*i,d=h-i,f=h+i;for(let p=0;p!==i;++p){const m=t[h+p];if(m!==t[d+p]||m!==t[f+p]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const h=a*i,d=o*i;for(let f=0;f!==i;++f)t[d+f]=t[h+f]}++o}}if(r>0){e[o]=e[r];for(let a=r*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=x1(e,0,o),this.values=x1(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=x1(this.times,0),t=x1(this.values,0),s=new(0,this.constructor)(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}Ua.prototype.TimeBufferType=Float32Array,Ua.prototype.ValueBufferType=Float32Array,Ua.prototype.DefaultInterpolation=F6;class mu extends Ua{}mu.prototype.ValueTypeName="bool",mu.prototype.ValueBufferType=Array,mu.prototype.DefaultInterpolation=y8,mu.prototype.InterpolantFactoryMethodLinear=void 0,mu.prototype.InterpolantFactoryMethodSmooth=void 0;class Vq extends Ua{}Vq.prototype.ValueTypeName="color";class U8 extends Ua{}U8.prototype.ValueTypeName="number";class RUe extends B8{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(s-t);let l=e*a;for(let u=l+a;l!==u;l+=4)Tr.slerpFlat(r,0,o,l-a,o,l,c);return r}}class v4 extends Ua{InterpolantFactoryMethodLinear(e){return new RUe(this.times,this.values,this.getValueSize(),e)}}v4.prototype.ValueTypeName="quaternion",v4.prototype.DefaultInterpolation=F6,v4.prototype.InterpolantFactoryMethodSmooth=void 0;class gu extends Ua{}gu.prototype.ValueTypeName="string",gu.prototype.ValueBufferType=Array,gu.prototype.DefaultInterpolation=y8,gu.prototype.InterpolantFactoryMethodLinear=void 0,gu.prototype.InterpolantFactoryMethodSmooth=void 0;class G8 extends Ua{}G8.prototype.ValueTypeName="vector";class W8{constructor(e,t=-1,i,s=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=Uo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(HUe(i[o]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=i.length;r!==o;++r)t.push(Ua.toJSON(i[r]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const r=t.length,o=[];for(let a=0;a<r;a++){let c=[],l=[];c.push((a+r-1)%r,a,(a+1)%r),l.push(0,1,0);const u=Iq(c);c=iT(c,1,u),l=iT(l,1,u),!s&&0===c[0]&&(c.push(r),l.push(l[0])),o.push(new U8(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const l=e[a],u=l.name.match(r);if(u&&u.length>1){const h=u[1];let d=s[h];d||(s[h]=d=[]),d.push(l)}}const o=[];for(const a in s)o.push(this.CreateFromMorphTargetSequence(a,s[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,d,f,p,m){if(0!==f.length){const g=[],v=[];sT(f,g,v,p),0!==g.length&&m.push(new h(d,g,v))}},s=[],r=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let h=0;h<l.length;h++){const d=l[h].keys;if(d&&0!==d.length)if(d[0].morphTargets){const f={};let p;for(p=0;p<d.length;p++)if(d[p].morphTargets)for(let m=0;m<d[p].morphTargets.length;m++)f[d[p].morphTargets[m]]=-1;for(const m in f){const g=[],v=[];for(let _=0;_!==d[p].morphTargets.length;++_){const y=d[p];g.push(y.time),v.push(y.morphTarget===m?1:0)}s.push(new U8(".morphTargetInfluence["+m+"]",g,v))}c=f.length*o}else{const f=".bones["+t[h].name+"]";i(G8,f+".position",d,"pos",s),i(v4,f+".quaternion",d,"rot",s),i(G8,f+".scale",d,"scl",s)}}return 0===s.length?null:new this(r,c,s,a)}resetDuration(){let t=0;for(let i=0,s=this.tracks.length;i!==s;++i){const r=this.tracks[i];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function HUe(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function IUe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return U8;case"vector":case"vector2":case"vector3":case"vector4":return G8;case"color":return Vq;case"quaternion":return v4;case"bool":case"boolean":return mu;case"string":return gu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];sT(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const vu={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Pq{constructor(e,t,i){const s=this;let c,r=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===r&&void 0!==s.onStart&&s.onStart(u,o,a),r=!0},this.itemEnd=function(u){o++,void 0!==s.onProgress&&s.onProgress(u,o,a),o===a&&(r=!1,void 0!==s.onLoad&&s.onLoad())},this.itemError=function(u){void 0!==s.onError&&s.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,h){return l.push(u,h),this},this.removeHandler=function(u){const h=l.indexOf(u);return-1!==h&&l.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=l.length;h<d;h+=2){const f=l[h],p=l[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}}const VUe=new Pq;class _u{constructor(e){this.manager=void 0!==e?e:VUe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,r){i.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const tc={};class PUe extends Error{constructor(e,t){super(e),this.response=t}}class sa extends _u{constructor(e){super(e)}load(e,t,i,s){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=vu.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(void 0!==tc[e])return void tc[e].push({onLoad:t,onProgress:i,onError:s});tc[e]=[],tc[e].push({onLoad:t,onProgress:i,onError:s});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(l=>{if(200===l.status||0===l.status){if(0===l.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===l.body||void 0===l.body.getReader)return l;const u=tc[e],h=l.body.getReader(),d=l.headers.get("Content-Length"),f=d?parseInt(d):0,p=0!==f;let m=0;const g=new ReadableStream({start(v){!function _(){h.read().then(({done:y,value:b})=>{if(y)v.close();else{m+=b.byteLength;const x=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:f});for(let w=0,L=u.length;w<L;w++){const C=u[w];C.onProgress&&C.onProgress(x)}v.enqueue(b),_()}})}()}});return new Response(g)}throw new PUe(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return l.json();default:if(void 0===a)return l.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),d=h&&h[1]?h[1].toLowerCase():void 0,f=new TextDecoder(d);return l.arrayBuffer().then(p=>f.decode(p))}}}).then(l=>{vu.add(e,l);const u=tc[e];delete tc[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onLoad&&f.onLoad(l)}}).catch(l=>{const u=tc[e];if(void 0===u)throw this.manager.itemError(e),l;delete tc[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onError&&f.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class tg extends _u{constructor(e){super(e)}load(e,t,i,s){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=vu.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const a=M8("img");function c(){u(),vu.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(h){u(),s&&s(h),r.manager.itemError(e),r.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class $o extends _u{constructor(e){super(e)}load(e,t,i,s){const r=new ea,o=new tg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){r.image=a,r.needsUpdate=!0,void 0!==t&&t(r)},i,s),r}}class ng extends hr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new $e(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const Oq=new Dt,Nq=new V,Fq=new V;class rT{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Me(512,512),this.map=null,this.mapPass=null,this.matrix=new Dt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new yS,this._frameExtents=new Me(1,1),this._viewportCount=1,this._viewports=[new jn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Nq.setFromMatrixPosition(e.matrixWorld),t.position.copy(Nq),Fq.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Fq),t.updateMatrixWorld(),Oq.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Oq),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class NUe extends rT{constructor(){super(new Hs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*b8*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(i!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=i,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Bq extends ng{constructor(e,t,i=0,s=Math.PI/3,r=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(hr.DefaultUp),this.updateMatrix(),this.target=new hr,this.distance=i,this.angle=s,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new NUe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Uq=new Dt,j8=new V,oT=new V;class FUe extends rT{constructor(){super(new Hs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Me(4,2),this._viewportCount=6,this._viewports=[new jn(2,1,1,1),new jn(0,1,1,1),new jn(3,1,1,1),new jn(1,1,1,1),new jn(3,0,1,1),new jn(1,0,1,1)],this._cubeDirections=[new V(1,0,0),new V(-1,0,0),new V(0,0,1),new V(0,0,-1),new V(0,1,0),new V(0,-1,0)],this._cubeUps=[new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,0,1),new V(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),j8.setFromMatrixPosition(e.matrixWorld),i.position.copy(j8),oT.copy(i.position),oT.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(oT),i.updateMatrixWorld(),s.makeTranslation(-j8.x,-j8.y,-j8.z),Uq.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Uq)}}class Gq extends ng{constructor(e,t,i=0,s=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new FUe}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class BUe extends rT{constructor(){super(new Lm(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ig extends ng{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hr.DefaultUp),this.updateMatrix(),this.target=new hr,this.shadow=new BUe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class aT extends ng{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class nc{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class YUe extends _u{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=vu.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(c){vu.add(e,c),t&&t(c),r.manager.itemEnd(e)}).catch(function(c){s&&s(c),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}}const lT="\\[\\]\\.:\\/",JUe=new RegExp("["+lT+"]","g"),uT="[^"+lT+"]",eGe="[^"+lT.replace("\\.","")+"]",rGe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",uT)+/(WCOD+)?/.source.replace("WCOD",eGe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uT)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uT)+"$"),oGe=["material","materials","bones","map"];class aGe{constructor(e,t,i){const s=i||Mi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const s=this._bindings[this._targetGroup.nCachedObjects_];void 0!==s&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=i.length;s!==r;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let Mi=(()=>{class n{constructor(t,i,s){this.path=i,this.parsedPath=s||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,s){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,s):new n(t,i,s)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(JUe,"")}static parseTrackName(t){const i=rGe.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const s={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},r=s.nodeName&&s.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const o=s.nodeName.substring(r+1);-1!==oGe.indexOf(o)&&(s.nodeName=s.nodeName.substring(0,r),s.objectName=o)}if(null===s.propertyName||0===s.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return s}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const s=t.skeleton.getBoneByName(i);if(void 0!==s)return s}if(t.children){const s=function(o){for(let a=0;a<o.length;a++){const c=o[a];if(c.name===i||c.uuid===i)return c;const l=s(c.children);if(l)return l}return null},r=s(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const s=this.resolvedProperty;for(let r=0,o=s.length;r!==o;++r)t[i++]=s[r]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const s=this.resolvedProperty;for(let r=0,o=s.length;r!==o;++r)s[r]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const s=this.resolvedProperty;for(let r=0,o=s.length;r!==o;++r)s[r]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const s=this.resolvedProperty;for(let r=0,o=s.length;r!==o;++r)s[r]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,s=i.objectName,r=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(s){let u=i.objectIndex;switch(s){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===u){u=h;break}break;case"map":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[s])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[s]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[r];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+r+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=aGe,n})();Mi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Mi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Mi.prototype.GetterByBindingType=[Mi.prototype._getValue_direct,Mi.prototype._getValue_array,Mi.prototype._getValue_arrayElement,Mi.prototype._getValue_toArray],Mi.prototype.SetterByBindingTypeAndVersioning=[[Mi.prototype._setValue_direct,Mi.prototype._setValue_direct_setNeedsUpdate,Mi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Mi.prototype._setValue_array,Mi.prototype._setValue_array_setNeedsUpdate,Mi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Mi.prototype._setValue_arrayElement,Mi.prototype._setValue_arrayElement_setNeedsUpdate,Mi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Mi.prototype._setValue_fromArray,Mi.prototype._setValue_fromArray_setNeedsUpdate,Mi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class eY{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(bs(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class uY extends fu{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],s=new on;s.setAttribute("position",new ht(t,3)),s.setAttribute("color",new ht([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(s,new dr({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,i){const s=new $e,r=this.geometry.attributes.color.array;return s.set(e),s.toArray(r,0),s.toArray(r,3),s.set(t),s.toArray(r,6),s.toArray(r,9),s.set(i),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"144"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="144");const hY={type:"change"},pT={type:"start"},dY={type:"end"};class fY extends J3{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new V,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(F){F.addEventListener("keydown",Sn),this._domElementKeyEvents=F},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(hY),i.update(),r=s.NONE},this.update=function(){const F=new V,Te=(new Tr).setFromUnitVectors(e.up,new V(0,1,0)),ke=Te.clone().invert(),Je=new V,et=new Tr,jt=2*Math.PI;return function(){const di=i.object.position;F.copy(di).sub(i.target),F.applyQuaternion(Te),a.setFromVector3(F),i.autoRotate&&r===s.NONE&&D(function L(){return 2*Math.PI/60/60*i.autoRotateSpeed}()),i.enableDamping?(a.theta+=c.theta*i.dampingFactor,a.phi+=c.phi*i.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let ee=i.minAzimuthAngle,Xe=i.maxAzimuthAngle;return isFinite(ee)&&isFinite(Xe)&&(ee<-Math.PI?ee+=jt:ee>Math.PI&&(ee-=jt),Xe<-Math.PI?Xe+=jt:Xe>Math.PI&&(Xe-=jt),a.theta=ee<=Xe?Math.max(ee,Math.min(Xe,a.theta)):a.theta>(ee+Xe)/2?Math.max(ee,a.theta):Math.min(Xe,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=l,a.radius=Math.max(i.minDistance,Math.min(i.maxDistance,a.radius)),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),F.setFromSpherical(a),F.applyQuaternion(ke),di.copy(i.target).add(F),i.object.lookAt(i.target),!0===i.enableDamping?(c.theta*=1-i.dampingFactor,c.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(c.set(0,0,0),u.set(0,0,0)),l=1,!!(h||Je.distanceToSquared(i.object.position)>o||8*(1-et.dot(i.object.quaternion))>o)&&(i.dispatchEvent(hY),Je.copy(i.object.position),et.copy(i.object.quaternion),h=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",ue),i.domElement.removeEventListener("pointerdown",Re),i.domElement.removeEventListener("pointercancel",Ne),i.domElement.removeEventListener("wheel",Qt),i.domElement.removeEventListener("pointermove",at),i.domElement.removeEventListener("pointerup",Be),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",Sn)};const i=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=s.NONE;const o=1e-6,a=new eY,c=new eY;let l=1;const u=new V;let h=!1;const d=new Me,f=new Me,p=new Me,m=new Me,g=new Me,v=new Me,_=new Me,y=new Me,b=new Me,x=[],w={};function C(){return Math.pow(.95,i.zoomSpeed)}function D(F){c.theta-=F}function R(F){c.phi-=F}const Y=function(){const F=new V;return function(ke,Je){F.setFromMatrixColumn(Je,0),F.multiplyScalar(-ke),u.add(F)}}(),Q=function(){const F=new V;return function(ke,Je){!0===i.screenSpacePanning?F.setFromMatrixColumn(Je,1):(F.setFromMatrixColumn(Je,0),F.crossVectors(i.object.up,F)),F.multiplyScalar(ke),u.add(F)}}(),j=function(){const F=new V;return function(ke,Je){const et=i.domElement;if(i.object.isPerspectiveCamera){F.copy(i.object.position).sub(i.target);let dn=F.length();dn*=Math.tan(i.object.fov/2*Math.PI/180),Y(2*ke*dn/et.clientHeight,i.object.matrix),Q(2*Je*dn/et.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(Y(ke*(i.object.right-i.object.left)/i.object.zoom/et.clientWidth,i.object.matrix),Q(Je*(i.object.top-i.object.bottom)/i.object.zoom/et.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function z(F){i.object.isPerspectiveCamera?l/=F:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*F)),i.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function G(F){i.object.isPerspectiveCamera?l*=F:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/F)),i.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function k(F){d.set(F.clientX,F.clientY)}function N(F){m.set(F.clientX,F.clientY)}function oe(){1===x.length?d.set(x[0].pageX,x[0].pageY):d.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function De(){1===x.length?m.set(x[0].pageX,x[0].pageY):m.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function he(){const F=x[0].pageX-x[1].pageX,Te=x[0].pageY-x[1].pageY,ke=Math.sqrt(F*F+Te*Te);_.set(0,ke)}function Qe(F){if(1==x.length)f.set(F.pageX,F.pageY);else{const ke=Mt(F);f.set(.5*(F.pageX+ke.x),.5*(F.pageY+ke.y))}p.subVectors(f,d).multiplyScalar(i.rotateSpeed);const Te=i.domElement;D(2*Math.PI*p.x/Te.clientHeight),R(2*Math.PI*p.y/Te.clientHeight),d.copy(f)}function Pe(F){if(1===x.length)g.set(F.pageX,F.pageY);else{const Te=Mt(F);g.set(.5*(F.pageX+Te.x),.5*(F.pageY+Te.y))}v.subVectors(g,m).multiplyScalar(i.panSpeed),j(v.x,v.y),m.copy(g)}function Ht(F){const Te=Mt(F),ke=F.pageX-Te.x,Je=F.pageY-Te.y,et=Math.sqrt(ke*ke+Je*Je);y.set(0,et),b.set(0,Math.pow(y.y/_.y,i.zoomSpeed)),z(b.y),_.copy(y)}function Re(F){!1!==i.enabled&&(0===x.length&&(i.domElement.setPointerCapture(F.pointerId),i.domElement.addEventListener("pointermove",at),i.domElement.addEventListener("pointerup",Be)),function ze(F){x.push(F)}(F),"touch"===F.pointerType?function W(F){switch(Ye(F),x.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;oe(),r=s.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;De(),r=s.TOUCH_PAN;break;default:r=s.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Ie(){i.enableZoom&&he(),i.enablePan&&De()})(),r=s.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function He(){i.enableZoom&&he(),i.enableRotate&&oe()})(),r=s.TOUCH_DOLLY_ROTATE;break;default:r=s.NONE}break;default:r=s.NONE}r!==s.NONE&&i.dispatchEvent(pT)}(F):function nt(F){let Te;switch(F.button){case 0:Te=i.mouseButtons.LEFT;break;case 1:Te=i.mouseButtons.MIDDLE;break;case 2:Te=i.mouseButtons.RIGHT;break;default:Te=-1}switch(Te){case 1:if(!1===i.enableZoom)return;(function O(F){_.set(F.clientX,F.clientY)})(F),r=s.DOLLY;break;case 0:if(F.ctrlKey||F.metaKey||F.shiftKey){if(!1===i.enablePan)return;N(F),r=s.PAN}else{if(!1===i.enableRotate)return;k(F),r=s.ROTATE}break;case 2:if(F.ctrlKey||F.metaKey||F.shiftKey){if(!1===i.enableRotate)return;k(F),r=s.ROTATE}else{if(!1===i.enablePan)return;N(F),r=s.PAN}break;default:r=s.NONE}r!==s.NONE&&i.dispatchEvent(pT)}(F))}function at(F){!1!==i.enabled&&("touch"===F.pointerType?function P(F){switch(Ye(F),r){case s.TOUCH_ROTATE:if(!1===i.enableRotate)return;Qe(F),i.update();break;case s.TOUCH_PAN:if(!1===i.enablePan)return;Pe(F),i.update();break;case s.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function be(F){i.enableZoom&&Ht(F),i.enablePan&&Pe(F)})(F),i.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function me(F){i.enableZoom&&Ht(F),i.enableRotate&&Qe(F)})(F),i.update();break;default:r=s.NONE}}(F):function gt(F){switch(r){case s.ROTATE:if(!1===i.enableRotate)return;!function B(F){f.set(F.clientX,F.clientY),p.subVectors(f,d).multiplyScalar(i.rotateSpeed);const Te=i.domElement;D(2*Math.PI*p.x/Te.clientHeight),R(2*Math.PI*p.y/Te.clientHeight),d.copy(f),i.update()}(F);break;case s.DOLLY:if(!1===i.enableZoom)return;!function q(F){y.set(F.clientX,F.clientY),b.subVectors(y,_),b.y>0?z(C()):b.y<0&&G(C()),_.copy(y),i.update()}(F);break;case s.PAN:if(!1===i.enablePan)return;!function ne(F){g.set(F.clientX,F.clientY),v.subVectors(g,m).multiplyScalar(i.panSpeed),j(v.x,v.y),m.copy(g),i.update()}(F)}}(F))}function Be(F){Fe(F),0===x.length&&(i.domElement.releasePointerCapture(F.pointerId),i.domElement.removeEventListener("pointermove",at),i.domElement.removeEventListener("pointerup",Be)),i.dispatchEvent(dY),r=s.NONE}function Ne(F){Fe(F)}function Qt(F){!1===i.enabled||!1===i.enableZoom||r!==s.NONE||(F.preventDefault(),i.dispatchEvent(pT),function $(F){F.deltaY<0?G(C()):F.deltaY>0&&z(C()),i.update()}(F),i.dispatchEvent(dY))}function Sn(F){!1===i.enabled||!1===i.enablePan||function ye(F){let Te=!1;switch(F.code){case i.keys.UP:j(0,i.keyPanSpeed),Te=!0;break;case i.keys.BOTTOM:j(0,-i.keyPanSpeed),Te=!0;break;case i.keys.LEFT:j(i.keyPanSpeed,0),Te=!0;break;case i.keys.RIGHT:j(-i.keyPanSpeed,0),Te=!0}Te&&(F.preventDefault(),i.update())}(F)}function ue(F){!1!==i.enabled&&F.preventDefault()}function Fe(F){delete w[F.pointerId];for(let Te=0;Te<x.length;Te++)if(x[Te].pointerId==F.pointerId)return void x.splice(Te,1)}function Ye(F){let Te=w[F.pointerId];void 0===Te&&(Te=new Me,w[F.pointerId]=Te),Te.set(F.pageX,F.pageY)}function Mt(F){return w[(F.pointerId===x[0].pointerId?x[1]:x[0]).pointerId]}i.domElement.addEventListener("contextmenu",ue),i.domElement.addEventListener("pointerdown",Re),i.domElement.addEventListener("pointercancel",Ne),i.domElement.addEventListener("wheel",Qt,{passive:!1}),this.update()}}class mGe extends _u{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new bGe(t)}),this.register(function(t){return new EGe(t)}),this.register(function(t){return new AGe(t)}),this.register(function(t){return new MGe(t)}),this.register(function(t){return new CGe(t)}),this.register(function(t){return new wGe(t)}),this.register(function(t){return new SGe(t)}),this.register(function(t){return new yGe(t)}),this.register(function(t){return new TGe(t)}),this.register(function(t){return new xGe(t)}),this.register(function(t){return new vGe(t)}),this.register(function(t){return new DGe(t)})}load(e,t,i,s){const r=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:nc.extractUrlBase(e),this.manager.itemStart(e);const a=function(l){s?s(l):console.error(l),r.manager.itemError(e),r.manager.itemEnd(e)},c=new sa(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{r.parse(l,o,function(u){t(u),r.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;const o={},a={};if("string"==typeof e)r=e;else if(nc.decodeText(new Uint8Array(e,0,4))===pY){try{o[bn.KHR_BINARY_GLTF]=new LGe(e)}catch(h){return void(s&&s(h))}r=o[bn.KHR_BINARY_GLTF].content}else r=nc.decodeText(new Uint8Array(e));const c=JSON.parse(r);if(void 0===c.asset||c.asset.version[0]<2)return void(s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new GGe(c,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](l);a[h.name]=h,o[h.name]=!0}if(c.extensionsUsed)for(let u=0;u<c.extensionsUsed.length;++u){const h=c.extensionsUsed[u],d=c.extensionsRequired||[];switch(h){case bn.KHR_MATERIALS_UNLIT:o[h]=new _Ge;break;case bn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[h]=new RGe;break;case bn.KHR_DRACO_MESH_COMPRESSION:o[h]=new zGe(c,this.dracoLoader);break;case bn.KHR_TEXTURE_TRANSFORM:o[h]=new kGe;break;case bn.KHR_MESH_QUANTIZATION:o[h]=new IGe;break;default:d.indexOf(h)>=0&&void 0===a[h]&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,t,s,r)})}}function gGe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const bn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class vGe{constructor(e){this.parser=e,this.name=bn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const r=t.json,c=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let l;const u=new $e(16777215);void 0!==c.color&&u.fromArray(c.color);const h=void 0!==c.range?c.range:0;switch(c.type){case"directional":l=new ig(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new Gq(u),l.distance=h;break;case"spot":l=new Bq(u),l.distance=h,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,void 0!==c.intensity&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),s=Promise.resolve(l),t.cache.add(i,s),s}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(c){return i._getNodeRef(t.cache,a,c)})}}class _Ge{constructor(){this.name=bn.KHR_MATERIALS_UNLIT}getMaterialType(){return Wo}extendParams(e,t,i){const s=[];e.color=new $e(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==r.baseColorTexture&&s.push(i.assignTexture(e,"map",r.baseColorTexture,Zn))}return Promise.all(s)}}class yGe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class bGe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?bl:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Me(a,a)}return Promise.all(r)}}class xGe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?bl:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&r.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&r.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class MGe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?bl:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new $e(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Zn)),void 0!==o.sheenRoughnessTexture&&r.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class CGe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?bl:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class wGe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?bl:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new $e(a[0],a[1],a[2]),Promise.all(r)}}class SGe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?bl:null}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class TGe{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?bl:null}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new $e(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&r.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Zn)),Promise.all(r)}}class EGe{constructor(e){this.parser=e,this.name=bn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class AGe{constructor(e){this.parser=e,this.name=bn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let c=i.textureLoader;if(a.uri){const l=i.options.manager.getHandler(a.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,o.source,c);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class DGe{constructor(e){this.name=bn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(a){const u=s.count,h=s.byteStride,d=new Uint8Array(a,s.byteOffset||0,s.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,h,d,s.mode,s.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(u*h);return o.decodeGltfBuffer(new Uint8Array(f),u,h,d,s.mode,s.filter),f})})}return null}}const pY="glTF";class LGe{constructor(e){this.name=bn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:nc.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==pY)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,s=new DataView(e,12);let r=0;for(;r<i;){const o=s.getUint32(r,!0);r+=4;const a=s.getUint32(r,!0);if(r+=4,1313821514===a){const c=new Uint8Array(e,12+r,o);this.content=nc.decodeText(c)}else if(5130562===a){const c=12+r;this.body=e.slice(c,c+o)}r+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class zGe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=bn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},l={};for(const u in o){const h=gT[u]||u.toLowerCase();a[h]=o[u]}for(const u in e.attributes){const h=gT[u]||u.toLowerCase();if(void 0!==o[u]){const d=i.accessors[e.attributes[u]];l[h]=q8[d.componentType].name,c[h]=!0===d.normalized}}return t.getDependency("bufferView",r).then(function(u){return new Promise(function(h){s.decodeDracoFile(u,function(d){for(const f in d.attributes){const p=d.attributes[f],m=c[f];void 0!==m&&(p.normalized=m)}h(d)},a,l)})})}}class kGe{constructor(){this.name=bn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class mT extends F8{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),s=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new $e).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(c){for(const l in a)c.uniforms[l]=a[l];c.fragmentShader=c.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",s).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(c){a.specular.value=c}},specularMap:{get:function(){return a.specularMap.value},set:function(c){a.specularMap.value=c,c?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(c){a.glossiness.value=c}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(c){a.glossinessMap.value=c,c?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class RGe{constructor(){this.name=bn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return mT}extendParams(e,t,i){const s=t.extensions[this.name];e.color=new $e(1,1,1),e.opacity=1;const r=[];if(Array.isArray(s.diffuseFactor)){const o=s.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(void 0!==s.diffuseTexture&&r.push(i.assignTexture(e,"map",s.diffuseTexture,Zn)),e.emissive=new $e(0,0,0),e.glossiness=void 0!==s.glossinessFactor?s.glossinessFactor:1,e.specular=new $e(1,1,1),Array.isArray(s.specularFactor)&&e.specular.fromArray(s.specularFactor),void 0!==s.specularGlossinessTexture){const o=s.specularGlossinessTexture;r.push(i.assignTexture(e,"glossinessMap",o)),r.push(i.assignTexture(e,"specularMap",o,Zn))}return Promise.all(r)}createMaterial(e){const t=new mT(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}class IGe{constructor(){this.name=bn.KHR_MESH_QUANTIZATION}}class gY extends B8{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=i[r+o];return t}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=2*a,l=3*a,u=s-t,h=(i-t)/u,d=h*h,f=d*h,p=e*l,m=p-l,g=-2*f+3*d,v=f-d,_=1-g,y=v-d+h;for(let b=0;b!==a;b++)r[b]=_*o[m+b+a]+y*(o[m+b+c]*u)+g*o[p+b+a]+v*(o[p+b]*u);return r}}const HGe=new Tr;class VGe extends gY{interpolate_(e,t,i,s){const r=super.interpolate_(e,t,i,s);return HGe.fromArray(r).normalize().toArray(r),r}}const q8={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},vY={9728:Rs,9729:as,9984:1004,9985:1007,9986:1005,9987:al},_Y={33071:jr,33648:V6,10497:Na},yY={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},gT={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ml={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},PGe={CUBICSPLINE:void 0,LINEAR:F6,STEP:y8};function OGe(n){return void 0===n.DefaultMaterial&&(n.DefaultMaterial=new F8({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial}function Y8(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function C4(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function FGe(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function BGe(n){const e=n.extensions&&n.extensions[bn.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+bY(e.attributes):n.indices+":"+bY(n.attributes)+":"+n.mode,t}function bY(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function _T(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class GGe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new gGe,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;this.textureLoader=typeof createImageBitmap>"u"||i||s&&r<98?new $o(this.options.manager):new YUe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new sa(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:i,userData:{}};Y8(r,a,s),C4(a,s),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let a=0,c=o.length;a<c;a++)e[o[a]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),r=(o,a)=>{const c=this.associations.get(o);null!=c&&this.associations.set(a,c);for(const[l,u]of o.children.entries())r(u,a.children[l])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this.loadNode(t);break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(r,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[bn.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){i.load(nc.resolveURL(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteOffset||0;return i.slice(r,r+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(void 0===s.bufferView&&void 0===s.sparse)return Promise.resolve(null);const r=[];return r.push(void 0!==s.bufferView?this.getDependency("bufferView",s.bufferView):null),void 0!==s.sparse&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const a=o[0],c=yY[s.type],l=q8[s.componentType],u=l.BYTES_PER_ELEMENT,d=s.byteOffset||0,f=void 0!==s.bufferView?i.bufferViews[s.bufferView].byteStride:void 0,p=!0===s.normalized;let m,g;if(f&&f!==u*c){const v=Math.floor(d/f),_="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+v+":"+s.count;let y=t.cache.get(_);y||(m=new l(a,v*f,s.count*f/u),y=new LS(m,f/u),t.cache.add(_,y)),g=new h4(y,c,d%f/u,p)}else m=null===a?new l(s.count*c):new l(a,d,s.count*c),g=new Pi(m,c,p);if(void 0!==s.sparse){const b=s.sparse.values.byteOffset||0,x=new(0,q8[s.sparse.indices.componentType])(o[1],s.sparse.indices.byteOffset||0,s.sparse.count*yY.SCALAR),w=new l(o[2],b,s.sparse.count*c);null!==a&&(g=new Pi(g.array.slice(),g.itemSize,g.normalized));for(let L=0,C=x.length;L<C;L++){const D=x[L];if(g.setX(D,w[L*c]),c>=2&&g.setY(D,w[L*c+1]),c>=3&&g.setZ(D,w[L*c+2]),c>=4&&g.setW(D,w[L*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const t=this.json,r=t.textures[e].source,o=t.images[r];let a=this.textureLoader;if(o.uri){const c=this.options.manager.getHandler(o.uri);null!==c&&(a=c)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,i){const s=this,r=this.json,o=r.textures[e],a=r.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,i).then(function(u){u.flipY=!1,o.name&&(u.name=o.name);const d=(r.samplers||{})[o.sampler]||{};return u.magFilter=vY[d.magFilter]||as,u.minFilter=vY[d.minFilter]||al,u.wrapS=_Y[d.wrapS]||Na,u.wrapT=_Y[d.wrapT]||Na,s.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){const s=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(h=>h.clone());const o=s.images[e],a=self.URL||self.webkitURL;let c=o.uri||"",l=!1;if(void 0!==o.bufferView)c=this.getDependency("bufferView",o.bufferView).then(function(h){l=!0;const d=new Blob([h],{type:o.mimeType});return c=a.createObjectURL(d),c});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(c).then(function(h){return new Promise(function(d,f){let p=d;!0===t.isImageBitmapLoader&&(p=function(m){const g=new ea(m);g.needsUpdate=!0,d(g)}),t.load(nc.resolveURL(h,r.path),p,void 0,f)})}).then(function(h){return!0===l&&a.revokeObjectURL(c),h.userData.mimeType=o.mimeType||function UGe(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),h});return this.sourceCache[e]=u,u}assignTexture(e,t,i,s){const r=this;return this.getDependency("texture",i.index).then(function(o){if(void 0!==i.texCoord&&0!=i.texCoord&&!("aoMap"===t&&1==i.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),r.extensions[bn.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[bn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=r.associations.get(o);o=r.extensions[bn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),r.associations.set(o,c)}}return void 0!==s&&(o.encoding=s),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new f4,$r.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new dr,$r.prototype.copy.call(c,i),c.color.copy(i.color),this.cache.add(a,c)),i=c}if(s||r||o){let a="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),s&&(a+="derivative-tangents:"),r&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),r&&(c.vertexColors=!0),o&&(c.flatShading=!0),s&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}i.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return F8}loadMaterial(e){const t=this,s=this.extensions,r=this.json.materials[e];let o;const a={},c=r.extensions||{},l=[];if(c[bn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const h=s[bn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=h.getMaterialType(),l.push(h.extendParams(a,r,t))}else if(c[bn.KHR_MATERIALS_UNLIT]){const h=s[bn.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),l.push(h.extendParams(a,r,t))}else{const h=r.pbrMetallicRoughness||{};if(a.color=new $e(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const d=h.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}void 0!==h.baseColorTexture&&l.push(t.assignTexture(a,"map",h.baseColorTexture,Zn)),a.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,a.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(l.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}!0===r.doubleSided&&(a.side=2);const u=r.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==Wo&&(l.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new Me(1,1),void 0!==r.normalTexture.scale)){const h=r.normalTexture.scale;a.normalScale.set(h,h)}return void 0!==r.occlusionTexture&&o!==Wo&&(l.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==Wo&&(a.emissive=(new $e).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&o!==Wo&&l.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,Zn)),Promise.all(l).then(function(){let h;return h=o===mT?s[bn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),r.name&&(h.name=r.name),C4(h,r),t.associations.set(h,{materials:e}),r.extensions&&Y8(s,h,r),h})}createUniqueName(e){const t=Mi.sanitizeNodeName(e||"");let i=t;for(let s=1;this.nodeNamesUsed[i];++s)i=t+"_"+s;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function r(a){return i[bn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return MY(c,a,t)})}const o=[];for(let a=0,c=e.length;a<c;a++){const l=e[a],u=BGe(l),h=s[u];if(h)o.push(h.promise);else{let d;d=l.extensions&&l.extensions[bn.KHR_DRACO_MESH_COMPRESSION]?r(l):MY(new on,l,t),s[u]={primitive:l,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,s=this.extensions,r=this.json.meshes[e],o=r.primitives,a=[];for(let c=0,l=o.length;c<l;c++){const u=void 0===o[c].material?OGe(this.cache):this.getDependency("material",o[c].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(c){const l=c.slice(0,c.length-1),u=c[c.length-1],h=[];for(let f=0,p=u.length;f<p;f++){const m=u[f],g=o[f];let v;const _=l[f];if(4===g.mode||5===g.mode||6===g.mode||void 0===g.mode)v=!0===r.isSkinnedMesh?new cq(m,_):new cs(m,_),!0===v.isSkinnedMesh&&!v.geometry.attributes.skinWeight.normalized&&v.normalizeSkinWeights(),5===g.mode?v.geometry=CY(v.geometry,1):6===g.mode&&(v.geometry=CY(v.geometry,2));else if(1===g.mode)v=new fu(m,_);else if(3===g.mode)v=new d4(m,_);else if(2===g.mode)v=new vq(m,_);else{if(0!==g.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);v=new R8(m,_)}Object.keys(v.geometry.morphAttributes).length>0&&FGe(v,r),v.name=t.createUniqueName(r.name||"mesh_"+e),C4(v,r),g.extensions&&Y8(s,v,g),t.assignFinalMaterial(v),h.push(v)}for(let f=0,p=h.length;f<p;f++)t.associations.set(h[f],{meshes:e,primitives:f});if(1===h.length)return h[0];const d=new qs;t.associations.set(d,{meshes:e});for(let f=0,p=h.length;f<p;f++)d.add(h[f]);return d})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(s)return"perspective"===i.type?t=new Hs(yPe.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===i.type&&(t=new Lm(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),C4(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(s){return i.inverseBindMatrices=s,i})}loadAnimation(e){const i=this.json.animations[e],s=[],r=[],o=[],a=[],c=[];for(let l=0,u=i.channels.length;l<u;l++){const h=i.channels[l],d=i.samplers[h.sampler],f=h.target,m=void 0!==i.parameters?i.parameters[d.input]:d.input,g=void 0!==i.parameters?i.parameters[d.output]:d.output;s.push(this.getDependency("node",f.node)),r.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",g)),a.push(d),c.push(f)}return Promise.all([Promise.all(s),Promise.all(r),Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const u=l[0],h=l[1],d=l[2],f=l[3],p=l[4],m=[];for(let v=0,_=u.length;v<_;v++){const y=u[v],b=h[v],x=d[v],w=f[v],L=p[v];if(void 0===y)continue;let C;switch(y.updateMatrix(),Ml[L.path]){case Ml.weights:C=U8;break;case Ml.rotation:C=v4;break;default:C=G8}const D=y.name?y.name:y.uuid,R=void 0!==w.interpolation?PGe[w.interpolation]:F6,Y=[];Ml[L.path]===Ml.weights?y.traverse(function(j){j.morphTargetInfluences&&Y.push(j.name?j.name:j.uuid)}):Y.push(D);let Q=x.array;if(x.normalized){const j=_T(Q.constructor),z=new Float32Array(Q.length);for(let G=0,k=Q.length;G<k;G++)z[G]=Q[G]*j;Q=z}for(let j=0,z=Y.length;j<z;j++){const G=new C(Y[j]+"."+Ml[L.path],b.array,Q,R);"CUBICSPLINE"===w.interpolation&&(G.createInterpolant=function(O){return new(this instanceof v4?VGe:gY)(this.times,this.values,this.getValueSize()/3,O)},G.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(G)}}return new W8(i.name?i.name:"animation_"+e,void 0,m)})}createNodeMesh(e){const i=this,s=this.json.nodes[e];return void 0===s.mesh?null:i.getDependency("mesh",s.mesh).then(function(r){const o=i._getNodeRef(i.meshCache,s.mesh,r);return void 0!==s.weights&&o.traverse(function(a){if(a.isMesh)for(let c=0,l=s.weights.length;c<l;c++)a.morphTargetInfluences[c]=s.weights[c]}),o})}loadNode(e){const i=this.extensions,s=this,r=this.json.nodes[e],o=r.name?s.createUniqueName(r.name):"";return function(){const a=[],c=s._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),void 0!==r.camera&&a.push(s.getDependency("camera",r.camera).then(function(l){return s._getNodeRef(s.cameraCache,r.camera,l)})),s._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),Promise.all(a)}().then(function(a){let c;if(c=!0===r.isBone?new kS:a.length>1?new qs:1===a.length?a[0]:new hr,c!==a[0])for(let l=0,u=a.length;l<u;l++)c.add(a[l]);if(r.name&&(c.userData.name=r.name,c.name=o),C4(c,r),r.extensions&&Y8(i,c,r),void 0!==r.matrix){const l=new Dt;l.fromArray(r.matrix),c.applyMatrix4(l)}else void 0!==r.translation&&c.position.fromArray(r.translation),void 0!==r.rotation&&c.quaternion.fromArray(r.rotation),void 0!==r.scale&&c.scale.fromArray(r.scale);return s.associations.has(c)||s.associations.set(c,{}),s.associations.get(c).nodes=e,c})}loadScene(e){const t=this.json,i=this.extensions,s=this.json.scenes[e],r=this,o=new qs;s.name&&(o.name=r.createUniqueName(s.name)),C4(o,s),s.extensions&&Y8(i,o,s);const a=s.nodes||[],c=[];for(let l=0,u=a.length;l<u;l++)c.push(xY(a[l],o,t,r));return Promise.all(c).then(function(){return r.associations=(u=>{const h=new Map;for(const[d,f]of r.associations)(d instanceof $r||d instanceof ea)&&h.set(d,f);return u.traverse(d=>{const f=r.associations.get(d);null!=f&&h.set(d,f)}),h})(o),o})}}function xY(n,e,t,i){const s=t.nodes[n];return i.getDependency("node",n).then(function(r){if(void 0===s.skin)return r;let o;return i.getDependency("skin",s.skin).then(function(a){o=a;const c=[];for(let l=0,u=o.joints.length;l<u;l++)c.push(i.getDependency("node",o.joints[l]));return Promise.all(c)}).then(function(a){return r.traverse(function(c){if(!c.isMesh)return;const l=[],u=[];for(let h=0,d=a.length;h<d;h++){const f=a[h];if(f){l.push(f);const p=new Dt;void 0!==o.inverseBindMatrices&&p.fromArray(o.inverseBindMatrices.array,16*h),u.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[h])}c.bind(new Om(l,u),c.matrixWorld)}),r})}).then(function(r){e.add(r);const o=[];if(s.children){const a=s.children;for(let c=0,l=a.length;c<l;c++)o.push(xY(a[c],r,t,i))}return Promise.all(o)})}function MY(n,e,t){const i=e.attributes,s=[];function r(o,a){return t.getDependency("accessor",o).then(function(c){n.setAttribute(a,c)})}for(const o in i){const a=gT[o]||o.toLowerCase();a in n.attributes||s.push(r(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});s.push(o)}return C4(n,e),function WGe(n,e,t){const i=e.attributes,s=new n4;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],c=a.min,l=a.max;if(void 0===c||void 0===l)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(s.set(new V(c[0],c[1],c[2]),new V(l[0],l[1],l[2])),a.normalized){const u=_T(q8[a.componentType]);s.min.multiplyScalar(u),s.max.multiplyScalar(u)}}const r=e.targets;if(void 0!==r){const a=new V,c=new V;for(let l=0,u=r.length;l<u;l++){const h=r[l];if(void 0!==h.POSITION){const d=t.json.accessors[h.POSITION],f=d.min,p=d.max;if(void 0!==f&&void 0!==p){if(c.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),c.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),c.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),d.normalized){const m=_T(q8[d.componentType]);c.multiplyScalar(m)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}n.boundingBox=s;const o=new a4;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(s).then(function(){return void 0!==e.targets?function NGe(n,e,t){let i=!1,s=!1,r=!1;for(let l=0,u=e.length;l<u;l++){const h=e[l];if(void 0!==h.POSITION&&(i=!0),void 0!==h.NORMAL&&(s=!0),void 0!==h.COLOR_0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(n);const o=[],a=[],c=[];for(let l=0,u=e.length;l<u;l++){const h=e[l];if(i){const d=void 0!==h.POSITION?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(d)}if(s){const d=void 0!==h.NORMAL?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(d)}if(r){const d=void 0!==h.COLOR_0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;c.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const h=l[1],d=l[2];return i&&(n.morphAttributes.position=l[0]),s&&(n.morphAttributes.normal=h),r&&(n.morphAttributes.color=d),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}function CY(n,e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let c=0;c<a.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}const i=t.count-2,s=[];if(2===e)for(let o=1;o<=i;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=n.clone();return r.setIndex(s),r}const jGe=/^[og]\s*(.+)?/,$Ge=/^mtllib /,qGe=/^usemtl /,YGe=/^usemap /,wY=/\s+/,SY=new V,yT=new V,TY=new V,EY=new V,M1=new V,hg=new $e;function XGe(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(s,r){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:s||"",mtllib:Array.isArray(r)&&r.length>0?r[r.length-1]:"",smooth:void 0!==o?o.smooth:this.smooth,groupStart:void 0!==o?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(c){const l={index:"number"==typeof c?c:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return l.clone=this.clone.bind(l),l}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(s){const r=this.currentMaterial();if(r&&-1===r.groupEnd&&(r.groupEnd=this.geometry.vertices.length/3,r.groupCount=r.groupEnd-r.groupStart,r.inherited=!1),s&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return s&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),r}},i&&i.name&&"function"==typeof i.clone){const s=i.clone(0);s.inherited=!0,this.object.materials.push(s)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseNormalIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseUVIndex:function(e,t){const i=parseInt(e,10);return 2*(i>=0?i-1:i+t/2)},addVertex:function(e,t,i){const s=this.vertices,r=this.object.geometry.vertices;r.push(s[e+0],s[e+1],s[e+2]),r.push(s[t+0],s[t+1],s[t+2]),r.push(s[i+0],s[i+1],s[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const s=this.normals,r=this.object.geometry.normals;r.push(s[e+0],s[e+1],s[e+2]),r.push(s[t+0],s[t+1],s[t+2]),r.push(s[i+0],s[i+1],s[i+2])},addFaceNormal:function(e,t,i){const s=this.vertices,r=this.object.geometry.normals;SY.fromArray(s,e),yT.fromArray(s,t),TY.fromArray(s,i),M1.subVectors(TY,yT),EY.subVectors(SY,yT),M1.cross(EY),M1.normalize(),r.push(M1.x,M1.y,M1.z),r.push(M1.x,M1.y,M1.z),r.push(M1.x,M1.y,M1.z)},addColor:function(e,t,i){const s=this.colors,r=this.object.geometry.colors;void 0!==s[e]&&r.push(s[e+0],s[e+1],s[e+2]),void 0!==s[t]&&r.push(s[t+0],s[t+1],s[t+2]),void 0!==s[i]&&r.push(s[i+0],s[i+1],s[i+2])},addUV:function(e,t,i){const s=this.uvs,r=this.object.geometry.uvs;r.push(s[e+0],s[e+1]),r.push(s[t+0],s[t+1]),r.push(s[i+0],s[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,s,r,o,a,c,l){const u=this.vertices.length;let h=this.parseVertexIndex(e,u),d=this.parseVertexIndex(t,u),f=this.parseVertexIndex(i,u);if(this.addVertex(h,d,f),this.addColor(h,d,f),void 0!==a&&""!==a){const p=this.normals.length;h=this.parseNormalIndex(a,p),d=this.parseNormalIndex(c,p),f=this.parseNormalIndex(l,p),this.addNormal(h,d,f)}else this.addFaceNormal(h,d,f);if(void 0!==s&&""!==s){const p=this.uvs.length;h=this.parseUVIndex(s,p),d=this.parseUVIndex(r,p),f=this.parseUVIndex(o,p),this.addUV(h,d,f),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,s=e.length;i<s;i++){const r=this.parseVertexIndex(e[i],t);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,s=this.uvs.length;for(let r=0,o=e.length;r<o;r++)this.addVertexLine(this.parseVertexIndex(e[r],i));for(let r=0,o=t.length;r<o;r++)this.addUVLine(this.parseUVIndex(t[r],s))}};return n.startObject("",!1),n}class ZGe extends _u{constructor(e){super(e),this.materials=null}load(e,t,i,s){const r=this,o=new sa(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(r.parse(a))}catch(c){s?s(c):console.error(c),r.manager.itemError(e)}},i,s)}setMaterials(e){return this.materials=e,this}parse(e){const t=new XGe;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const i=e.split("\n");let s=[];for(let a=0,c=i.length;a<c;a++){const l=i[a].trimStart();if(0===l.length)continue;const u=l.charAt(0);if("#"!==u)if("v"===u){const h=l.split(wY);switch(h[0]){case"v":t.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(hg.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6])).convertSRGBToLinear(),t.colors.push(hg.r,hg.g,hg.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":t.uvs.push(parseFloat(h[1]),parseFloat(h[2]))}}else if("f"===u){const d=l.slice(1).trim().split(wY),f=[];for(let m=0,g=d.length;m<g;m++){const v=d[m];if(v.length>0){const _=v.split("/");f.push(_)}}const p=f[0];for(let m=1,g=f.length-1;m<g;m++){const v=f[m],_=f[m+1];t.addFace(p[0],v[0],_[0],p[1],v[1],_[1],p[2],v[2],_[2])}}else if("l"===u){const h=l.substring(1).trim().split(" ");let d=[];const f=[];if(-1===l.indexOf("/"))d=h;else for(let p=0,m=h.length;p<m;p++){const g=h[p].split("/");""!==g[0]&&d.push(g[0]),""!==g[1]&&f.push(g[1])}t.addLineGeometry(d,f)}else if("p"===u){const d=l.slice(1).trim().split(" ");t.addPointGeometry(d)}else if(null!==(s=jGe.exec(l))){const h=(" "+s[0].slice(1).trim()).slice(1);t.startObject(h)}else if(qGe.test(l))t.object.startMaterial(l.substring(7).trim(),t.materialLibraries);else if($Ge.test(l))t.materialLibraries.push(l.substring(7).trim());else if(YGe.test(l))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===u){if(s=l.split(" "),s.length>1){const d=s[1].trim().toLowerCase();t.object.smooth="0"!==d&&"off"!==d}else t.object.smooth=!0;const h=t.object.currentMaterial();h&&(h.smooth=t.object.smooth)}else{if("\0"===l)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+l+'"')}}t.finalize();const r=new qs;if(r.materialLibraries=[].concat(t.materialLibraries),1==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let a=0,c=t.objects.length;a<c;a++){const l=t.objects[a],u=l.geometry,h=l.materials,d="Line"===u.type,f="Points"===u.type;let p=!1;if(0===u.vertices.length)continue;const m=new on;m.setAttribute("position",new ht(u.vertices,3)),u.normals.length>0&&m.setAttribute("normal",new ht(u.normals,3)),u.colors.length>0&&(p=!0,m.setAttribute("color",new ht(u.colors,3))),!0===u.hasUVIndices&&m.setAttribute("uv",new ht(u.uvs,2));const g=[];for(let _=0,y=h.length;_<y;_++){const b=h[_],x=b.name+"_"+b.smooth+"_"+p;let w=t.materials[x];if(null!==this.materials)if(w=this.materials.create(b.name),!d||!w||w instanceof dr){if(f&&w&&!(w instanceof f4)){const L=new f4({size:10,sizeAttenuation:!1});$r.prototype.copy.call(L,w),L.color.copy(w.color),L.map=w.map,w=L}}else{const L=new dr;$r.prototype.copy.call(L,w),L.color.copy(w.color),w=L}void 0===w&&(w=d?new dr:f?new f4({size:1,sizeAttenuation:!1}):new Rq,w.name=b.name,w.flatShading=!b.smooth,w.vertexColors=p,t.materials[x]=w),g.push(w)}let v;if(g.length>1){for(let _=0,y=h.length;_<y;_++){const b=h[_];m.addGroup(b.groupStart,b.groupCount,_)}v=d?new fu(m,g):f?new R8(m,g):new cs(m,g)}else v=d?new fu(m,g[0]):f?new R8(m,g[0]):new cs(m,g[0]);v.name=l.name,r.add(v)}else if(t.vertices.length>0){const a=new f4({size:1,sizeAttenuation:!1}),c=new on;c.setAttribute("position",new ht(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(c.setAttribute("color",new ht(t.colors,3)),a.vertexColors=!0);const l=new R8(c,a);r.add(l)}return r}}var lt=(()=>(function(n){n.ground="ground",n.pine="pine",n.osb="osb",n.gips="gips",n.insulation="insulation",n.outerSheet="outerSheet",n.facade="facade",n.tape="tape",n.foam="foam",n.hollowCoreSlap="hollowCoreSlap",n.concrete="concrete",n.whiteWood="whiteWood"}(lt||(lt={})),lt))();let dg=(()=>{class n{constructor(){this.colors={},this.textureHollowCoreSlap=(new $o).load("assets/textures/hollowCoreSlap.jpg"),this.textureHollowCoreSlapSide=(new $o).load("assets/textures/hollowCoreSlapSide.jpg"),this.textureHollowCoreSlapPlain=(new $o).load("assets/textures/hollowCoreSlapPlain.jpg"),this.textureFoam=(new $o).load("assets/textures/foam.jpg"),this.textureGips=(new $o).load("assets/textures/gips.jpg"),this.texturePine=(new $o).load("assets/textures/western-yellow-pine.jpg"),this.textureWhiteWood=(new $o).load("assets/textures/whiteWood.jpg"),[0,5,10,15,20,30,40,50,60,70,80,90,100].forEach(t=>{this.colors[t]=getComputedStyle(document.body).getPropertyValue(`--color-${t}`).trim()})}filter(t,i){t.children.forEach(s=>{console.log(s.name,i),s.visible=!!s.name.includes(i)})}lights(t){const i=new aT(16777215,.8);t.add(i);const s=new ig(16777215,.4);s.position.set(30,30,30),s.target.position.set(0,0,0),s.castShadow=!0,s.shadow.mapSize.width=1024,s.shadow.mapSize.height=1024,s.shadow.camera.near=.5,s.shadow.camera.far=500,t.add(s)}createSimpleMesh(t){const r=new m4;r.moveTo(5,5),r.bezierCurveTo(5,5,4,0,0,0),r.bezierCurveTo(-6,0,-6,7,-6,7),r.bezierCurveTo(-6,11,-3,15.4,5,19),r.bezierCurveTo(12,15.4,16,11,16,7),r.bezierCurveTo(16,7,16,0,10,0),r.bezierCurveTo(7,0,5,5,5,5);const o=new Jm(r),a=new Wo({color:65280});return new cs(o,a)}getMaterial(t){let i=[new Ys({color:65280})];if(t===lt.pine&&(i=[new Ys({map:this.texturePine})]),t===lt.whiteWood&&(i=[new Ys({map:this.textureWhiteWood})]),t===lt.osb){const s=(new $o).load("assets/textures/osb.jpg");s.matrixAutoUpdate=!1,i=[new Ys({map:s})]}if(t===lt.hollowCoreSlap){const s=this.textureHollowCoreSlapSide.clone();s.rotation=rn(90),s.wrapS=Na,s.wrapT=Na,s.offset.set(.2,1),s.repeat.set(4,4);const r=(new $o).load("assets/textures/hollowCoreSlapPlain.jpg");r.wrapS=Na,r.wrapT=V6,r.repeat.set(1,1.8),i=[new Ys({map:this.textureHollowCoreSlapSide}),new Ys({map:this.textureHollowCoreSlapSide}),new Ys({map:r}),new Ys({map:this.textureFoam}),new Ys({map:this.textureHollowCoreSlap}),new Ys({map:this.textureHollowCoreSlap})]}if(t===lt.gips&&(this.textureGips.matrixAutoUpdate=!1,i=[new Ys({map:this.textureGips})]),t===lt.ground&&(i=[new Ys({color:this.colors[10]})]),t===lt.concrete&&(i=[new Ys({map:this.textureHollowCoreSlapPlain})]),t===lt.tape&&(i=[new Ys({color:7829367})]),t===lt.foam&&(i=[new Ys({map:this.textureFoam})]),t===lt.insulation){const s=(new $o).load("assets/textures/insulation.png");s.matrixAutoUpdate=!1,i=[new Ys({map:s})]}if(t===lt.outerSheet){const s=(new $o).load("assets/textures/insulation.png");s.matrixAutoUpdate=!1,i=[new Ys({map:s})],i[0].color=new $e(6372634)}if(t===lt.facade){const s=(new $o).load("assets/textures/western-yellow-pine.jpg");s.matrixAutoUpdate=!1,i=[new Ys({map:s})],i[0].color=new $e(8394776)}return 1===i.length&&(i=[i[0],i[0],i[0],i[0],i[0],i[0]]),i.forEach(s=>{s.transparent=!0,s.needsUpdate=!0}),i}createCube(t){const{material:i,whd:s,xyz:r}=t,[o,a,c]=s,[l,u,h]=r||[0,0,0],d=new c4(o,a,c),f=new cs(d,this.getMaterial(i));return f.position.set(o/2+l,a/2+u,c/2+h),f.castShadow=!0,f.receiveShadow=!0,f}importGLTF(t,i){(new mGe).load(`/assets/models/${t}`,r=>{const o=r.scene;o.children.forEach(a=>{a.castShadow=!0,a.receiveShadow=!0}),o.castShadow=!0,o.receiveShadow=!0,o.name=t,i(o)})}importOBJ(t,i,s){(new ZGe).load(`/assets/models/${i}`,o=>{o.children.forEach(a=>{a.castShadow=!0,a.receiveShadow=!0}),o.castShadow=!0,o.receiveShadow=!0,o.name=i,t.add(o),s(o)})}basicGround(t,i){const r=new ru(100,100,1,1),o=this.getMaterial(lt.whiteWood),a=new cs(r,o[0]);a.position.set(0,i,0),a.rotateX(-Math.PI/2),a.receiveShadow=!0,t.add(a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KGe=(()=>{class n extends cs{constructor(t,i={}){super(t),this.isReflector=!0,this.type="Reflector",this.camera=new Hs;const s=this,r=new $e(void 0!==i.color?i.color:8355711),o=i.textureWidth||512,a=i.textureHeight||512,c=i.clipBias||0,l=i.shader||n.ReflectorShader,u=void 0!==i.multisample?i.multisample:4,h=new b1,d=new V,f=new V,p=new V,m=new Dt,g=new V(0,0,-1),v=new jn,_=new V,y=new V,b=new jn,x=new Dt,w=this.camera,L=new hl(o,a,{samples:u,type:P6}),C=new J2({uniforms:C$.clone(l.uniforms),fragmentShader:l.fragmentShader,vertexShader:l.vertexShader});C.uniforms.tDiffuse.value=L.texture,C.uniforms.color.value=r,C.uniforms.textureMatrix.value=x,this.material=C,this.onBeforeRender=function(D,R,Y){if(f.setFromMatrixPosition(s.matrixWorld),p.setFromMatrixPosition(Y.matrixWorld),m.extractRotation(s.matrixWorld),d.set(0,0,1),d.applyMatrix4(m),_.subVectors(f,p),_.dot(d)>0)return;_.reflect(d).negate(),_.add(f),m.extractRotation(Y.matrixWorld),g.set(0,0,-1),g.applyMatrix4(m),g.add(p),y.subVectors(f,g),y.reflect(d).negate(),y.add(f),w.position.copy(_),w.up.set(0,1,0),w.up.applyMatrix4(m),w.up.reflect(d),w.lookAt(y),w.far=Y.far,w.updateMatrixWorld(),w.projectionMatrix.copy(Y.projectionMatrix),x.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),x.multiply(w.projectionMatrix),x.multiply(w.matrixWorldInverse),x.multiply(s.matrixWorld),h.setFromNormalAndCoplanarPoint(d,f),h.applyMatrix4(w.matrixWorldInverse),v.set(h.normal.x,h.normal.y,h.normal.z,h.constant);const Q=w.projectionMatrix;b.x=(Math.sign(v.x)+Q.elements[8])/Q.elements[0],b.y=(Math.sign(v.y)+Q.elements[9])/Q.elements[5],b.z=-1,b.w=(1+Q.elements[10])/Q.elements[14],v.multiplyScalar(2/v.dot(b)),Q.elements[2]=v.x,Q.elements[6]=v.y,Q.elements[10]=v.z+1-c,Q.elements[14]=v.w,s.visible=!1;const j=D.getRenderTarget(),z=D.xr.enabled,G=D.shadowMap.autoUpdate,k=D.outputEncoding,O=D.toneMapping;D.xr.enabled=!1,D.shadowMap.autoUpdate=!1,D.outputEncoding=ll,D.toneMapping=0,D.setRenderTarget(L),D.state.buffers.depth.setMask(!0),!1===D.autoClear&&D.clear(),D.render(R,w),D.xr.enabled=z,D.shadowMap.autoUpdate=G,D.outputEncoding=k,D.toneMapping=O,D.setRenderTarget(j);const N=Y.viewport;void 0!==N&&D.state.viewport(N),s.visible=!0},this.getRenderTarget=function(){return L},this.dispose=function(){L.dispose(),s.material.dispose()}}}return n.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:"\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}",fragmentShader:"\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\n\t\t}"},n})();class QGe{constructor(e){this.height=1.2,this.width=.8,this.bottom=1.2,this.thicknessOSB=.015,this.gap=.1,Object.assign(this,e),this.top=this.bottom+this.height,this.roughHeight=this.height+2*this.gap,this.roughHeightOSB=this.roughHeight+2*this.thicknessOSB,this.roughWidth=this.width+2*this.gap,this.roughWidthOSB=this.roughWidth+2*this.thicknessOSB,this.roughBottom=this.bottom-this.gap,this.roughBottomOSB=this.roughBottom-this.thicknessOSB,this.roughTop=this.top+this.gap,this.roughTopOSB=this.roughTop+this.thicknessOSB,console.log(this)}}class bT{constructor(e){this.top=0,this.array=new Float32Array(e)}write(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y,this.array[this.top++]=e.z}}class JGe{constructor(e){this.top=0,this.array=new Float32Array(e)}write(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y}}class Ga{constructor(e){this.plane=null,this.front=null,this.back=null,this.polygons=[],e&&this.build(e)}clone(){const e=new Ga;return e.plane=this.plane&&this.plane.clone(),e.front=this.front&&this.front.clone(),e.back=this.back&&this.back.clone(),e.polygons=this.polygons.map(t=>t.clone()),e}invert(){for(let t=0;t<this.polygons.length;t++)this.polygons[t].flip();this.plane&&this.plane.flip(),this.front&&this.front.invert(),this.back&&this.back.invert();const e=this.front;this.front=this.back,this.back=e}clipPolygons(e){if(!this.plane)return e.slice();let t=new Array,i=new Array;for(let s=0;s<e.length;s++)this.plane.splitPolygon(e[s],t,i,t,i);return this.front&&(t=this.front.clipPolygons(t)),i=this.back?this.back.clipPolygons(i):[],t.concat(i)}clipTo(e){this.polygons=e.clipPolygons(this.polygons),this.front&&this.front.clipTo(e),this.back&&this.back.clipTo(e)}allPolygons(){let e=this.polygons.slice();return this.front&&(e=e.concat(this.front.allPolygons())),this.back&&(e=e.concat(this.back.allPolygons())),e}build(e){if(!e.length)return;this.plane||(this.plane=e[0].plane.clone());const t=[],i=[];for(let s=0;s<e.length;s++)this.plane.splitPolygon(e[s],this.polygons,this.polygons,t,i);t.length&&(this.front||(this.front=new Ga),this.front.build(t)),i.length&&(this.back||(this.back=new Ga),this.back.build(i))}}class fo{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}clone(){return new fo(this.x,this.y,this.z)}negate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}times(e){return this.x*=e,this.y*=e,this.z*=e,this}dividedBy(e){return this.x/=e,this.y/=e,this.z/=e,this}lerp(e,t){return this.add((new fo).copy(e).sub(this).times(t))}unit(){return this.dividedBy(this.length())}length(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))}normalize(){return this.unit()}cross(e){const t=this.clone(),i=t.x,s=t.y,r=t.z,o=e.x,a=e.y,c=e.z;return this.x=s*c-r*a,this.y=r*o-i*c,this.z=i*a-s*o,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}toVector3(){return new V(this.x,this.y,this.z)}}let eWe=(()=>{class n{constructor(t,i){this.normal=t,this.w=i,this.normal=t,this.w=i}clone(){return new n(this.normal.clone(),this.w)}flip(){this.normal.negate(),this.w=-this.w}splitPolygon(t,i,s,r,o){let h=0;const d=[];for(let f=0;f<t.vertices.length;f++){const p=this.normal.dot(t.vertices[f].pos)-this.w,m=p<-n.EPSILON?2:p>n.EPSILON?1:0;h|=m,d.push(m)}switch(h){case 0:(this.normal.dot(t.plane.normal)>0?i:s).push(t);break;case 1:r.push(t);break;case 2:o.push(t);break;case 3:{const f=[],p=[];for(let m=0;m<t.vertices.length;m++){const g=(m+1)%t.vertices.length,v=d[m],_=d[g],y=t.vertices[m],b=t.vertices[g];if(2!=v&&f.push(y),1!=v&&p.push(2!=v?y.clone():y),3==(v|_)){const x=(this.w-this.normal.dot(y.pos))/this.normal.dot((new fo).copy(b.pos).sub(y.pos)),w=y.interpolate(b,x);f.push(w),p.push(w.clone())}}f.length>=3&&r.push(new yu(f,t.shared)),p.length>=3&&o.push(new yu(p,t.shared));break}}}static fromPoints(t,i,s){const r=(new fo).copy(i).sub(t).cross((new fo).copy(s).sub(t)).normalize();return new n(r.clone(),r.dot(t))}}return n.EPSILON=1e-5,n})();class yu{constructor(e,t){this.vertices=e,this.shared=t,this.plane=eWe.fromPoints(e[0].pos,e[1].pos,e[2].pos)}clone(){return new yu(this.vertices.map(e=>e.clone()),this.shared)}flip(){this.vertices.reverse().map(e=>e.flip()),this.plane.flip()}}class fg{constructor(e,t,i,s){this.pos=(new fo).copy(e),this.normal=(new fo).copy(t),this.uv=(new fo).copy(i),this.uv.z=0,s&&(this.color=(new fo).copy(s))}clone(){return new fg(this.pos,this.normal,this.uv,this.color)}flip(){this.normal.negate()}interpolate(e,t){return new fg(this.pos.clone().lerp(e.pos,t),this.normal.clone().lerp(e.normal,t),this.uv.clone().lerp(e.uv,t),this.color&&e.color&&this.color.clone().lerp(e.color,t))}}class qi{constructor(){this.polygons=new Array}static fromPolygons(e){const t=new qi;return t.polygons=e,t}static fromGeometry(e,t){let i=[];const s=e.attributes.position,r=e.attributes.normal,o=e.attributes.uv,a=e.attributes.color,c=e.groups;let l;if(e.index)l=e.index.array;else{l=new Array(s.array.length/s.itemSize|0);for(let h=0;h<l.length;h++)l[h]=h}i=new Array(l.length/3|0);for(let h=0,d=0,f=l.length;h<f;h+=3,d++){const p=new Array(3);for(let m=0;m<3;m++){const g=l[h+m],v=3*g,_=2*g,w=r.array[v],L=r.array[v+1],C=r.array[v+2],D=o?.array[_],R=o?.array[_+1];p[m]=new fg(new fo(s.array[v],s.array[v+1],s.array[v+2]),new fo(w,L,C),new fo(D,R,0),a&&new fo(a.array[_],a.array[_+1],a.array[_+2]))}if(void 0===t&&c&&c.length>0)for(const m of c)h>=m.start&&h<m.start+m.count&&(i[d]=new yu(p,m.materialIndex));else i[d]=new yu(p,t)}return qi.fromPolygons(i.filter(h=>!isNaN(h.plane.normal.x)))}static toGeometry(e,t){let i=0;const s=e.polygons;for(const f of s)i+=f.vertices.length-2;const r=new on,o=new bT(3*i*3),a=new bT(3*i*3),c=new JGe(2*i*3);let l;const u=[],h=[];for(const f of s){const p=f.vertices,m=p.length;void 0!==f.shared&&(u[f.shared]||(u[f.shared]=[])),m&&void 0!==p[0].color&&(l||(l=new bT(3*i*3)));for(let g=3;g<=m;g++)(void 0===f.shared?h:u[f.shared]).push(o.top/3,o.top/3+1,o.top/3+2),o.write(p[0].pos),o.write(p[g-2].pos),o.write(p[g-1].pos),a.write(p[0].normal),a.write(p[g-2].normal),a.write(p[g-1].normal),c&&(c.write(p[0].uv),c.write(p[g-2].uv),c.write(p[g-1].uv)),l&&(l.write(p[0].color),l.write(p[g-2].color),l.write(p[g-1].color))}r.setAttribute("position",new Pi(o.array,3)),r.setAttribute("normal",new Pi(a.array,3)),c&&r.setAttribute("uv",new Pi(c.array,2)),l&&r.setAttribute("color",new Pi(l.array,3));for(let f=0;f<u.length;f++)void 0===u[f]&&(u[f]=[]);if(u.length){let f=[],p=0;for(let m=0;m<u.length;m++)r.addGroup(p,u[m].length,m),p+=u[m].length,f=f.concat(u[m]);r.addGroup(p,h.length,u.length),f=f.concat(h),r.setIndex(f)}const d=(new Dt).copy(t).invert();return r.applyMatrix4(d),r.computeBoundingSphere(),r.computeBoundingBox(),r}static fromMesh(e,t){const i=qi.fromGeometry(e.geometry,t),s=new V,r=new ho;r.getNormalMatrix(e.matrix);for(let o=0;o<i.polygons.length;o++){const a=i.polygons[o];for(let c=0;c<a.vertices.length;c++){const l=a.vertices[c];l.pos.copy(s.copy(l.pos.toVector3()).applyMatrix4(e.matrix)),l.normal.copy(s.copy(l.normal.toVector3()).applyMatrix3(r))}}return i}static toMesh(e,t,i){const s=qi.toGeometry(e,t),r=new cs(s,i);return r.matrix.copy(t),r.matrix.decompose(r.position,r.quaternion,r.scale),r.rotation.setFromQuaternion(r.quaternion),r.updateMatrixWorld(),r.castShadow=r.receiveShadow=!0,r}static union(e,t){const i=qi.fromMesh(e),s=qi.fromMesh(t);return qi.toMesh(i.union(s),e.matrix,e.material)}static subtract(e,t){const i=qi.fromMesh(e),s=qi.fromMesh(t);return qi.toMesh(i.subtract(s),e.matrix,e.material)}static intersect(e,t){const i=qi.fromMesh(e),s=qi.fromMesh(t);return qi.toMesh(i.intersect(s),e.matrix,e.material)}clone(){const e=new qi;return e.polygons=this.polygons.map(t=>t.clone()).filter(t=>Number.isFinite(t.plane.w)),e}toPolygons(){return this.polygons}union(e){const t=new Ga(this.clone().polygons),i=new Ga(e.clone().polygons);return t.clipTo(i),i.clipTo(t),i.invert(),i.clipTo(t),i.invert(),t.build(i.allPolygons()),qi.fromPolygons(t.allPolygons())}subtract(e){const t=new Ga(this.clone().polygons),i=new Ga(e.clone().polygons);return t.invert(),t.clipTo(i),i.clipTo(t),i.invert(),i.clipTo(t),i.invert(),t.build(i.allPolygons()),t.invert(),qi.fromPolygons(t.allPolygons())}intersect(e){const t=new Ga(this.clone().polygons),i=new Ga(e.clone().polygons);return t.invert(),i.clipTo(t),i.invert(),t.clipTo(i),i.clipTo(t),t.build(i.allPolygons()),t.invert(),qi.fromPolygons(t.allPolygons())}inverse(){const e=this.clone();for(const t of e.polygons)t.flip();return e}toMesh(e,t){return qi.toMesh(this,e,t)}toGeometry(e){return qi.toGeometry(this,e)}}const tWe=["rendererContainer"];let nWe=(()=>{class n{constructor(t,i,s,r,o){this.threeService=t,this.houseService=i,this.host=s,this.appService=r,this.cookieService=o,this.resize$=new Un(void 0),this.house$=this.houseService.house$,this.renderer=new TS({antialias:!0,alpha:!0}),this.scene=new DS,this.camera=new Hs(50,1,.1,1e3),this.subscriptions=[],this.modelName="wallDetail",this.animations={},this.subModels={},this.demoDepth=3,this.joistFlangeHeight=.04,this.window=new QGe({}),this.windowRoughOSBClip=this.threeService.createCube({material:lt.concrete,whd:[this.window.roughWidthOSB-(this.window.gap+this.window.thicknessOSB),this.window.roughHeightOSB,2],xyz:[0,this.window.roughBottomOSB,-1]}),this.windowRoughClip=this.threeService.createCube({material:lt.whiteWood,whd:[this.window.roughWidth-this.window.gap,this.window.roughHeight,2],xyz:[0,this.window.roughBottom,-1]}),this.offsetDistanceBend=(a,c)=>{const l=this.construction.getRoofPoint(c);let u=0,h=0;[Ae.bendInside,Ae.bendOutside].includes(c)&&(u=(this.lowerAngle-this.upperAngle)/2,h=this.edgeAngle+90),[Ae.topInside,Ae.topOutside].includes(c)&&(u=0,h=90),[Ae.lowestInside,Ae.lowestOutside].includes(c)&&(u=0,h=this.lowerAngle+180),[Ae.groundFloorInside,Ae.groundFloorOutside,Ae.wallInside,Ae.wallOutside].includes(c)&&(u=0,h=180);const d=a/Math.cos(rn(u));return On(h,d,l)}}handleKeyboardEvent(t){"F4"===t.key&&(console.log("reset camera"),this.camera.position.set(10,10,10),this.camera.lookAt(0,0,0)),"1"===t.key&&this.focusCamera("in"),"2"===t.key&&this.focusCamera("out")}onResize(){const t=this.host.nativeElement.getBoundingClientRect(),i=t.height,s=t.width;this.camera&&(this.camera.aspect=s/i,this.camera.updateProjectionMatrix()),this.renderer.setSize(s,i),this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)}animate(){window.requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}pauseAll(){Object.values(yt).forEach(t=>{this.animations[t].pause()})}focusCamera(t){console.log("camera to",t);var i=j3.timeline();let r=this.center.z;["in"].includes(t)&&(r+=-10),["subGround"].includes(t)&&(r+=1),["out"].includes(t)&&(r+=10),this.pauseAll(),i.to(this.camera.position,{duration:.4,x:this.center.x-10,y:["subGround"].includes(t)?0:1.8,z:r,onUpdate:()=>{this.camera.lookAt(this.center.x,this.center.y,this.center.z)},onComplete:()=>{j3.globalTimeline.play()}})}createSceneAndCamera(){this.orbitControlsCookie=this.cookieService.get("orbitControls");const t=this.cookieService.get("orbitControlsTarget");this.controls=new fY(this.camera,this.renderer.domElement),this.controls.minDistance=.1,this.controls.maxDistance=50,""!==this.orbitControlsCookie&&(this.camera.matrix.fromArray(JSON.parse(this.orbitControlsCookie)),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale)),""!==t&&this.controls.target.fromArray(JSON.parse(t)),setTimeout(()=>{this.orbitControlsCookie=void 0},200),F1(this.controls,"change").pipe($0(1e3)).subscribe(i=>{this.cookieService.set("orbitControls",JSON.stringify(this.camera.matrix.toArray())),this.cookieService.set("orbitControlsTarget",JSON.stringify(this.controls.target.toArray()))}),this.scene.background=null,this.renderer.shadowMap.enabled=!0,this.renderer.localClippingEnabled=!0,this.rendererContainer.nativeElement.appendChild(this.renderer.domElement),this.animate();for(let i of[...Object.keys(Ae).map(s=>this.construction.getRoofPoint(s)),this.offsetDistanceBend(-this.thickness[Le.roofJoists],Ae.bendOutside)]){const s=new uY(1);s.position.set(0,i[1],this.crossDepth[Le.joists]-i[0]),this.scene.add(s)}window.camera=this.camera,window.renderer=this.renderer,window.scene=this.scene}getRoofAndOffsetPoints(t){let i={};return Object.keys(Ae).forEach(s=>{i[s]=this.construction.getRoofPoint(s),i[`${s}Offset`]=this.offsetDistanceBend(t,s)}),i}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.observer.unobserve(this.host.nativeElement)}ngAfterViewInit(){Object.values(yt).forEach(s=>{this.subModels[s]=[],this.animations[s]=j3.timeline()});const t=this.house$.value;this.cross=t.cross,this.construction=t.construction,this.thickness=this.construction.thickness,this.crossDepth=this.construction.crossDepth,this.amountOfStuds=6,this.outerWallHeight=this.cross.outerWallHeight,this.innerWallHeight=this.cross.innerWallHeight,this.solePlateThickness=.03,this.demoWith=this.amountOfStuds*t.studDistance,this.studDistance=t.studDistance,this.ceilingHeight=this.cross.ceilingHeight,this.floorThickness=this.cross.topFloorThickness,this.floorLVLThickness=.07,this.joistFlangeWidth=.06,this.center=new V(this.demoWith/2,this.outerWallHeight/3,this.crossDepth[Le.facade]/2),this.lowerAngle=Oe(Hi(this.construction.getRoofPoint(Ae.lowestOutside),this.construction.getRoofPoint(Ae.bendOutside))-90,3),this.upperAngle=Oe(Hi(this.construction.getRoofPoint(Ae.bendOutside),this.construction.getRoofPoint(Ae.topOutside))-90,3),this.edgeAngle=180-((180-this.lowerAngle+this.upperAngle)/2-this.upperAngle),this.createSceneAndCamera(),this.observer=new ResizeObserver(s=>this.resize$.next(s)),this.observer.observe(this.host.nativeElement),this.subscriptions.push(this.appService.states$.subscribe(s=>{this.setVisibility(s),this.mirror&&(this.mirror.visible=s[tr.mirror])}),this.resize$.subscribe(()=>{this.onResize()}),this.appService.fullscreen$.subscribe(s=>{this.onResize(),this.controls.enableZoom=s}),this.appService.tag$.subscribe(()=>{this.tag=this.appService.tag$.value}),this.appService.scroll$.subscribe(()=>{const s=this.appService.scroll$.value,r=this.section;if(this.section!==s.section){if(this.section=s.section,void 0===r||void 0!==this.orbitControlsCookie)return;console.log("update camera",r),[re.constructionFoundation,re.constructionCrawlerSpace].includes(this.section)?this.focusCamera("subGround"):[re.constructionFloorLVL,re.constructionRoof,re.constructionWallOSB,re.constructionWallTape,re.constructionWallService,re.constructionWallGips,re.constructionFloor].includes(this.section)?this.focusCamera("in"):[re.constructionWallSole,re.constructionWallJoists,re.constructionGroundFloor,re.constructionWallInsulation,re.constructionWallOuterSheet,re.constructionWallSpace,re.constructionWallFacade].includes(this.section)&&this.focusCamera("out")}})),this.threeService.basicGround(this.scene,-3),this.threeService.lights(this.scene),this.buildConstruction(),this.scene.traverse(function(s){s.isMesh&&(s.castShadow=!0)}),this.threeService.importGLTF("Male_Standing.glb",s=>{this.scene.add(s),s.scale.set(.5,.5,.5),s.rotateY(rn(-110)),s.position.set(this.demoWith/2,this.cross.elevations[Jt.topFloor],-2)})}buildConstruction(){this.demoDepth=this.construction.getRoofPoint(Ae.topOutside)[0],this.buildFoundation(),this.buildICF(),this.buildGroundFloor(),this.buildTapes(),this.buildWindowOSB(),this.buildOSB(),this.buildOSBRoof(),this.buildTopFloor(),this.buildFloorLVL(),this.buildTopFloorOSB(),this.buildSole(),this.buildJoist(),this.buildRoofJoists(),this.buildServiceInsulation(),this.buildServiceBeams(),this.buildOuterSheet(),this.buildSpace(),this.buildRoofSpace(),this.buildFacade(),this.buildGips(),this.buildRoofTiles(),this.debugMeasureBlock(),this.createMirror();const t=this.appService.states$.value;Object.values(yt).forEach(i=>{this.subModels[i].forEach(s=>this.scene.add(s)),this.animations[i].progress(!0===t[i]?0:1)})}createMirror(){this.mirror=new KGe(new ru(30,30),{color:new $e(8355711),textureWidth:window.innerWidth*window.devicePixelRatio,textureHeight:window.innerHeight*window.devicePixelRatio}),this.mirror.visible=this.appService.states$.value[tr.mirror],this.mirror.position.set(-2,0,-this.construction.getRoofPoint(Ae.topOutside)[0]),this.scene.add(this.mirror)}createJoist(t,i,s=.04,r=.005){const o=this.joistFlangeWidth,a=[{material:lt.pine,whd:[o,t,s],xyz:[0,0,0]},{material:lt.pine,whd:[o,t,s],xyz:[0,0,i-s]},{material:lt.osb,whd:[r,t,i-2*s],xyz:[o/2-r/2,0,s]}],c=new qs;return a.forEach((l,u)=>{const h=this.threeService.createCube(l);c.add(h),2===u&&(h.material[0].color=new $e(14277081))}),c}createCornerTape(t,i,s,r){const o=new qs,a=this.threeService.createCube({material:lt.tape,whd:[r,t,s]});a.rotateX(rn(0)),this.translate(a,0,-t,0),o.add(a);const c=this.threeService.createCube({material:lt.tape,whd:[r,i,s]});return c.rotateX(rn(90)),this.translate(c,0,-i/2-s/2,-i/2+s/2),o.add(c),o}createIFCblock(t,i,s,r){const o=new qs,a=this.threeService.createCube({material:lt.foam,whd:[i,s,r]}),c=this.threeService.createCube({material:lt.foam,whd:[i,s,r]});return this.translate(a,0,0,0),this.translate(c,0,0,t+r),o.add(a),o.add(c),this.scene.add(o),o}translate(t,i,s,r){t.applyMatrix4((new Dt).makeTranslation(i,s,r))}setVisibility(t,i=1.2){this.pauseAll(),Object.values(yt).forEach(s=>{const r=this.animations[s],o=!0===t[s],a=0===r.progress(),c=1===r.progress();o?c||0===i?r.timeScale(1).reverse():j3.to(r,{progress:0,duration:i}):a||0===i?r.timeScale(2).play():j3.to(r,{progress:1,duration:i})})}buildFoundation(){const t=yt.foundation,c=this.threeService.createCube({material:lt.concrete,whd:[this.demoWith,.3,.4],xyz:[0,this.cross.elevations[Jt.crawlerFloor]-.3,this.crossDepth[Le.groundFloorEdge]-.4*.8]});this.subModels[t].push(c),this.animations[t].to(c.scale,{z:0,y:0,duration:.6,ease:"power3"}),this.animations[t].to(c,{visible:!1,duration:0})}buildRoofJoists(){const t=yt.roofJoists;this.subModels[t]=[],this.buildRoofHigherJoists(),this.buildRoofLowerJoists(),this.subModels[t].flatMap(s=>s.children).sort((s,r)=>s.position.x-r.position.x).forEach((s,r)=>{this.scaleZInOut(t,s,.1)}),this.buildRoofLVL()}buildRoofLowerJoists(){const t=yt.roofJoists,s=(this.construction.getRoofPoint(Ae.wallInside),this.construction.getRoofPoint(Ae.wallInside)),r=this.construction.getRoofPoint(Ae.wallOutside),o=this.construction.getRoofPoint(Ae.bendInside),a=this.construction.getRoofPoint(Ae.bendOutside),c=this.thickness[Le.roofJoists],l=new qs;this.subModels[t].push(l),l.rotateX(rn(this.lowerAngle)),this.translate(l,0,r[1],-r[0]);const u=ns(r,a),h=[],d=-(90-Hi(o,a)),f=new b1(new V(0,0,1),0);h.push(f);let p=(new Dt).makeRotationX(rn(d));f.applyMatrix4(p.setPosition(new V(0,o[1],-o[0])));const m=new b1(new V(0,1,0),0);h.push(m),m.applyMatrix4((new Dt).setPosition(new V(0,s[1],0)));const b=c-2*this.joistFlangeHeight-.1;for(let x of[...Array(this.amountOfStuds+1).keys()]){let w=x*this.studDistance-this.joistFlangeWidth/2;0===x&&(w=0);const L=this.createJoist(u+0,c);L.position.set(0,-0,0);const C=this.threeService.createCube({material:lt.pine,whd:[this.joistFlangeWidth,.5,b],xyz:[0,0,this.joistFlangeHeight+.05]});L.add(C);const D=this.threeService.createCube({material:lt.pine,whd:[this.joistFlangeWidth,.5,b],xyz:[0,u+0-.5,this.joistFlangeHeight+.05]});L.add(D),L.children.flatMap(R=>R.material).forEach(R=>{R.side=2,R.clippingPlanes=h,R.clipIntersection=!1,R.clipShadows=!0}),this.translate(L,w,0,0),l.add(L)}}buildRoofHigherJoists(){const t=yt.roofJoists,i=this.construction.getRoofPoint(Ae.bendInside),s=this.construction.getRoofPoint(Ae.bendOutside),o=(this.construction.getRoofPoint(Ae.topInside),this.construction.getRoofPoint(Ae.topOutside)),a=new qs;this.subModels[t].push(a);const c=Hi(s,o)-90;a.rotateX(rn(c)),this.translate(a,0,s[1],-s[0]);const l=this.thickness[Le.roofJoists],u=ns(s,o),h=[],d=new b1(new V(0,0,1),o[0]-this.cross.roofRidgeWidth/2);h.push(d);const f=Hi(i,s)-90,p=new b1(new V(0,0,-1),0);h.push(p);let m=(new Dt).makeRotationX(rn(f));p.applyMatrix4(m.setPosition(new V(0,i[1],-i[0])));const b=l-2*this.joistFlangeHeight-.1;for(let x of[...Array(this.amountOfStuds+1).keys()]){let w=x*this.studDistance-this.joistFlangeWidth/2;0===x&&(w=0);const L=this.createJoist(u+2,l);L.position.set(0,-1,-l);const C=this.threeService.createCube({material:lt.pine,whd:[this.joistFlangeWidth,1.5,b],xyz:[0,0,this.joistFlangeHeight+.05]});L.add(C);const D=this.threeService.createCube({material:lt.pine,whd:[this.joistFlangeWidth,1.5,b],xyz:[0,u+1-.5,this.joistFlangeHeight+.05]});L.add(D),L.children.flatMap(R=>R.material).forEach(R=>{R.side=2,R.clippingPlanes=h,R.clipIntersection=!1,R.clipShadows=!0}),this.translate(L,w,0,0),a.add(L)}}buildICF(){const t=yt.crawlerSpace,i=.2,c=this.cross.crawlerHeight,l=this.demoWith,d=Math.ceil(c/.3),f=Math.ceil(l/.6),p=this.cross.elevations[Jt.crawlerCeiling],m=p-c,g=this.crossDepth[Le.groundFloorEdge]-i,v=Number(`${d}${f+1}`),_=this.threeService.createCube({material:lt.concrete,whd:[this.demoWith,c,i]});this.translate(_,0,p-c,g),this.scene.add(_),this.animations[t].to(_.scale,{y:0,duration:1,ease:"Back.easeIn"}),this.animations[t].to(_.position,{y:m,ease:"Back.easeIn",duration:1},"<"),this.animations[t].to(_.scale,{z:0}),this.animations[t].to(_,{visible:!1,duration:0});for(let y of[...Array(d).keys()]){y=d-1-y;for(let b of[...Array(f+1).keys()]){b=f-b;const x=Number(`${y}${b}`);let L=.6*b+(y%2?-.3:0),C=m+.3*y,D=.6,R=.3;if(L<0&&(D=.3,L+=.3),L+D>l&&(D=l-L),C+R>p&&(R=p-C),0===D||0===R)continue;const Y=this.createIFCblock(i,D,R,.067);this.translate(Y,L,C,g-.067),this.subModels[t].push(Y);const Q=(v-x)/v,j=Oe(.02+.2*Math.pow(Q,4)+.4*Math.pow(Q,16));this.animations[t].to(Y.position,{y:0,x:0,duration:j,ease:"power3"}),this.animations[t].to(Y.children[0].position,{x:.5,z:i,duration:j,ease:"power3"}),this.animations[t].to(Y.scale,{z:0,x:0,duration:j})}}}buildTapes(){const t=yt.tapes,i=.07,s=.01,r=1.2,a=.05,c=this.crossDepth[Le.serviceBeams]-s,l=Math.ceil(this.cross.innerWallHeight/r),u=Math.ceil(this.demoWith/2.4),h=this.createCornerTape(i,1*i,s,this.window.roughWidth-this.window.gap+i);h.scale.set(1,1,-1),this.translate(h,0,this.window.roughBottom+s,this.crossDepth[Le.serviceBeams]),this.subModels[t].push(h),this.scaleXInOut(t,h,a);const d=this.createCornerTape(i,1*i,s,this.window.roughWidth-this.window.gap+i);d.scale.set(1,-1,-1),this.translate(d,0,this.window.roughTop-s,this.crossDepth[Le.serviceBeams]),this.subModels[t].push(d),this.scaleXInOut(t,d,a);const f=this.createCornerTape(i,1*i,s,this.window.roughTop-this.window.roughBottom+2*i-2*s);f.rotateZ(rn(90)),f.scale.set(1,1,-1),this.translate(f,this.window.roughWidth-this.window.gap-s,this.window.roughBottom-i+s,this.crossDepth[Le.serviceBeams]),this.subModels[t].push(f),this.scaleXInOut(t,f,a);const p=this.createCornerTape(i,1*i,s,this.thickness[Le.joists]+this.thickness[Le.osb]);p.rotateY(rn(-90)),p.scale.set(1,-1,-1),this.translate(p,this.window.roughWidth-this.window.gap-s,this.window.roughBottom,this.crossDepth[Le.serviceBeams]),this.subModels[t].push(p),this.scaleXInOut(t,p,a);const m=this.createCornerTape(i,1*i,s,this.thickness[Le.joists]+this.thickness[Le.osb]);m.rotateY(rn(-90)),m.scale.set(1,1,-1),this.translate(m,this.window.roughWidth-this.window.gap-s,this.window.roughTop,this.crossDepth[Le.serviceBeams]),this.subModels[t].push(m),this.scaleXInOut(t,m,a);for(let g of[...Array(l).keys()]){const v=r*g,_=this.clip(this.threeService.createCube({material:lt.tape,whd:[this.demoWith,i,s],xyz:[0,v,c]}),this.windowRoughOSBClip);this.subModels[t].push(_),this.scaleXInOut(t,_,a);for(let y of[...Array(u).keys()]){const b=g%2?2.4*y:1.2+2.4*y;if(b+i>this.demoWith)continue;let x=r;v+r>this.cross.innerWallHeight&&(x=this.cross.innerWallHeight-v);const w=this.clip(this.threeService.createCube({material:lt.tape,whd:[i,x,s],xyz:[b,v,c]}),this.windowRoughOSBClip);this.subModels[t].push(w),this.scaleYInOut(t,w,a)}}}buildRoofTapes(){}buildInsulation(){const t=yt.insulation,i=[0,2*this.solePlateThickness],s=[0,this.innerWallHeight-2*this.solePlateThickness,0];let r=this.studDistance-this.joistFlangeWidth/2;const a=this.threeService.createCube({material:lt.concrete,whd:[this.window.roughWidth+this.window.thicknessOSB,this.window.roughHeight+2*this.window.thicknessOSB,.5],xyz:[0,this.window.roughBottomOSB,-.1]}),l=(this.threeService.createCube({material:lt.concrete,whd:[this.window.roughWidth+this.window.thicknessOSB,this.window.roughHeight+2*this.window.thicknessOSB,.5],xyz:[0,this.window.roughBottomOSB,-.1]}),(u,h,d,f,p,m)=>{const g=this.threeService.createCube({material:lt.insulation,whd:[this.demoWith,s[1],3],xyz:[0,0,-1.5]});let v=(new Dt).makeRotationX(rn(Hi(d,f)-90));g.applyMatrix4(v.setPosition(new V(h,p[1],-p[0]))),this.subModels[t].push(this.clip(g,m))});for(let u of[...Array(this.amountOfStuds).keys()]){let h=u*this.studDistance-this.joistFlangeWidth/2+this.joistFlangeWidth;0===u&&(h=this.joistFlangeWidth,r-=this.joistFlangeWidth/2),l(0,h,this.construction.getRoofPoint(Ae.bendOutside),this.construction.getRoofPoint(Ae.topOutside),this.construction.getRoofPoint(Ae.bendOutside),a),l(0,h,this.construction.getRoofPoint(Ae.lowestOutside),this.construction.getRoofPoint(Ae.bendOutside),this.construction.getRoofPoint(Ae.lowestOutside),a),l(0,h,i,s,[-this.thickness[Le.joists],2*this.solePlateThickness],a)}this.animations[t].to(this.subModels[t].map(u=>u.position),{z:2,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(u=>u.scale),{x:0,z:0,ease:"power3",stagger:{each:.4},delay:.5},"<"),this.animations[t].to(this.subModels[t].map(u=>u),{visible:!1,duration:0})}scaleZInOut(t,i,s=.3,r="power3"){this.animations[t].to(i.position,{z:0,duration:s,ease:r}),this.animations[t].to(i.scale,{z:0,x:0,duration:s,ease:r},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleYInOut(t,i,s=.3,r="power3"){this.animations[t].to(i.position,{y:0,duration:s,ease:r}),this.animations[t].to(i.scale,{y:0,z:0,duration:s,ease:r},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleXInOut(t,i,s=.3,r="power3"){this.animations[t].to(i.position,{x:0,duration:s,ease:r}),this.animations[t].to(i.scale,{z:0,x:0,duration:s,ease:r},"<"),this.animations[t].to(i,{visible:!1,duration:0})}buildJoist(){const t=yt.joists,s=this.thickness[Le.joists],r=this.cross.elevations[Jt.groundFloor]+this.solePlateThickness,o=this.construction.getRoofPoint(Ae.wallInside)[1],a=new qs;this.translate(a,0,r,this.crossDepth[Le.joists]),this.subModels[t].push(a),this.animations[t].to(a.rotation,{x:rn(-90),duration:.8});const c=this.thickness[Le.osb],l=this.construction.thickness[Le.joists],u=this.amountOfStuds+2;for(let h of[...Array(u).keys()]){let d=o-r-2*this.solePlateThickness,f=this.solePlateThickness,p=h*this.studDistance-this.joistFlangeWidth/2;if(h===u-1&&(p=this.window.roughWidth-this.window.gap+this.window.thicknessOSB),0===h&&(p=0),p<this.window.roughWidth-this.window.gap){f=l+this.window.roughTopOSB-this.solePlateThickness,d=d+this.solePlateThickness-f;const g=this.createJoist(d,this.construction.thickness[Le.joists]);this.translate(g,p,f,0),a.add(g),this.scaleZInOut(t,g,.2),f=this.solePlateThickness,d=this.window.roughBottom-2*this.solePlateThickness-c}const m=this.createJoist(d,l);this.translate(m,p,f,0),a.add(m),this.scaleZInOut(t,m,.2)}for(let h of[...Array(2).keys()]){let f=l+this.window.roughTopOSB-this.solePlateThickness,p=this.joistFlangeWidth;0===h&&(p=l);const m=this.createJoist(this.window.roughWidth-this.window.gap+this.window.thicknessOSB,l);m.rotation.set(rn(90),0,rn(-90)),this.translate(m,0,f,p),a.add(m),this.scaleZInOut(t,m,.2)}for(let h of[0,1]){const d=this.threeService.createCube({material:lt.pine,whd:[this.demoWith,this.solePlateThickness,s]});this.translate(d,0,0===h?0:o-2*this.solePlateThickness,0),a.add(d),this.scaleZInOut(t,d,.2)}}buildTopFloor(){const t=yt.topFloorJoists,i=new qs,s=this.floorThickness,r=this.crossDepth[Le.serviceBeams]-this.floorLVLThickness,o=this.demoDepth+r,a=o+r;for(let c of[...Array(this.amountOfStuds+1).keys()]){let l=c*this.studDistance-this.joistFlangeWidth/2;0===c&&(l=0);const u=this.createJoist(o,s);u.rotateX(rn(-90)),this.translate(u,l,this.ceilingHeight,r),i.add(u),this.animations[t].to(u.position,{z:-a,duration:.2,ease:"power3"},">"),this.animations[t].to(u.scale,{z:0,x:0,duration:.2},"<"),this.animations[t].to(u,{visible:!1,duration:0})}this.subModels[t].push(i)}buildTopFloorOSB(){this.buildRoofTapes();const t=yt.topFloorOSB;this.brickPattern(t,[0,this.cross.elevations[Jt.topFloor],this.crossDepth[Le.serviceBeams]],2.4,1.2,this.thickness[Le.osb],this.demoDepth,this.demoWith,[-90,0,0],lt.osb,(u,h,d,f,p,m)=>{this.scaleZInOut(t,u,.3+(h+d)/m*.2)})}brickPattern(t,i,s,r,o,a,c,l,u,h,d){const f=new qs,p=Math.ceil(c/s),m=Math.ceil(a/r),g=s/2;for(let v of[...Array(m+1).keys()])for(let _ of[...Array(p+1).keys()]){let b=(p-_)*s+(v%2?-g:0),x=(m-v)*r,w=0,L=r,C=s,D=!1;const R=Number(`${v+1}${_+1}`);if(b<0&&(C=g,b=0),x+r>a&&(L=a-x,D=!0),b+s>=c&&(C=c-b,D=!0),x>=a||b>=c)continue;let Y=this.threeService.createCube({material:u,whd:[C,L,o]});this.translate(Y,b,x,w),d&&(Y=this.clip(Y,d)),f.add(Y),h(Y,v,_,C,L,R,D)}f.rotation.set(rn(l[0]),rn(l[1]),rn(l[2])),this.translate(f,i[0],i[1],i[2]),this.subModels[t].push(f)}clip(t,i){return t.updateMatrix(),i.updateMatrix(),qi.subtract(t,i)}buildRoofTiles(){const t=yt.roofTiles,l=this.thickness[Le.outerSheet]+this.thickness[Le.space]+.02,u=this.getRoofAndOffsetPoints(l);this.threeService.importGLTF("rooftile.glb",h=>{h.scale.set(1,1,1),[[Ae.lowestOutside,Ae.bendOutside],[Ae.bendOutside,Ae.topOutside]].map((f,p)=>{const{totalWidth:m,rotation:v,angle:_}=this.getAngledProperties(f[0],f[1],l),y=Math.ceil(m/.308);for(let b of[...Array(y).keys()]){const x=Math.ceil(this.demoWith/.204);for(let w of[...Array(x).keys()]){const L=.204*w,C=.308*b,D=h.clone();D.rotateX(rn(v[0]+90+-4)),this.subModels[t].push(D);const[R,Y]=On(_,C,u[`${f[0]}Offset`]);D.position.set(L,Y+.01,-R)}}}),this.animations[t].to(this.subModels[t].map(f=>f.position),{z:2,ease:"power3",stagger:{amount:1}}),this.animations[t].to(this.subModels[t].map(f=>f.scale),{z:0,x:0,stagger:{amount:1}},"<+=0.3"),this.subModels[t].forEach(f=>this.scene.add(f)),this.animations[t].progress(!0===this.appService.states$.value[t]?0:1)})}buildOSBRoof(){const t=yt.roofOSB,r=this.demoWith,o=this.thickness[Le.osb],a=(_,y,b,x,w,L)=>{this.animations[t].to(_.scale,{x:0,y:0,z:0,duration:.3}),this.animations[t].to(_,{visible:!1,duration:0})},c=this.construction.getRoofPoint(Ae.bendInside),l=this.construction.getRoofPoint(Ae.topInside),u=[0,c[1],-c[0]-this.crossDepth[Le.osb]-o],h=ns(c,l),d=[Hi(c,l)-90,0,0];this.brickPattern(t,u,2.4,1.2,o,h,r,d,lt.osb,a);const f=this.construction.getRoofPoint(Ae.wallInside),p=this.construction.getRoofPoint(Ae.bendInside),m=[0,f[1],-f[0]-this.crossDepth[Le.osb]-o],g=ns(f,p),v=[Hi(f,p)-90,0,0];this.brickPattern(t,m,2.4,1.2,o,g,r,v,lt.osb,a)}buildOSB(){const t=yt.osbWall,r=this.construction.getRoofPoint(Ae.wallInside)[1],a=this.thickness[Le.osb];let h=0,d=0,f=0;this.brickPattern(t,[0,this.cross.elevations[Jt.groundFloor],this.crossDepth[Le.osb]-a],2.4,1.2,a,r,this.demoWith,[0,0,0],lt.osb,(p,m,g,v,_,y)=>{const b=.3+(m+g)/y*.2;this.animations[t].to(p.rotation,{x:rn(90),duration:b});const x=1.05*v<2.4,w=1.05*_<1.2;this.animations[t].to(p.position,{x:(x?2.4:0)+v/2,y:a*h,z:-(.6+(w?1.2:0)+_/2),duration:b},"<"),x?f+=1:w?d+=1:h+=1},this.windowRoughOSBClip),this.animations[t].to(this.subModels[t].flatMap(p=>p.position),{y:-.5}),this.animations[t].to(this.subModels[t],{visible:!1,duration:0})}debugMeasureBlock(){}buildWindowOSB(){const t=yt.osbWall,i=this.thickness[Le.osb],s=this.crossDepth[Le.serviceBeams],r=this.crossDepth[Le.outerSheet]-s,o=this.threeService.createCube({material:lt.osb,whd:[this.window.roughWidth-this.window.gap+i,i,r],xyz:[0,this.window.roughBottomOSB,s]});this.subModels[t].push(o);const a=this.threeService.createCube({material:lt.osb,whd:[this.window.roughWidth-this.window.gap+i,i,r],xyz:[0,this.window.roughTop,s]});this.subModels[t].push(a);const c=this.threeService.createCube({material:lt.osb,whd:[i,this.window.roughHeight,r],xyz:[this.window.roughWidth-this.window.gap,this.window.roughBottom,s]});this.subModels[t].push(c),[o,a,c].forEach(l=>{this.animations[t].to(l.position,{z:-1,duration:.6}),this.animations[t].to(l.scale,{x:0,z:0,duration:.6}),this.animations[t].to(l,{visible:!1,duration:0})})}buildServiceBeams(){const t=yt.serviceBeams,i=this.thickness[Le.serviceBeams];for(let s of[...Array(this.amountOfStuds+1).keys()]){let r=s*this.studDistance-this.joistFlangeWidth/2;0===s&&(r=0);const o=this.threeService.createCube({material:lt.osb,whd:[this.joistFlangeWidth,this.ceilingHeight,i]});this.translate(o,r,0,this.crossDepth[Le.serviceBeams]-i),this.subModels[t].push(o)}this.animations[t].to(this.subModels[t].map(s=>s.position),{z:-1,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(s=>s.scale),{z:0,x:0,stagger:{each:.4}},"<+=0.3")}buildServiceInsulation(){const t=yt.serviceInsulation,i=this.thickness[Le.serviceBeams];for(let s of[...Array(this.amountOfStuds).keys()]){let r=this.studDistance-this.joistFlangeWidth,o=s*this.studDistance-this.joistFlangeWidth/2+this.joistFlangeWidth;0===s&&(o=this.joistFlangeWidth,r-=this.joistFlangeWidth/2);const a=this.threeService.createCube({material:lt.insulation,whd:[r,this.ceilingHeight,i]});this.translate(a,o,0,this.crossDepth[Le.serviceBeams]-i),this.subModels[t].push(a)}this.animations[yt.serviceBeams].to(this.subModels[t].map(s=>s.position),{y:0,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[yt.serviceBeams].to(this.subModels[t].map(s=>s.scale),{z:0,y:0,duration:.7,ease:"power3",stagger:{each:.4}},"<"),this.animations[yt.serviceBeams].to(this.subModels[t].map(s=>s),{visible:!1,duration:0})}buildGroundFloor(){const t=yt.groundFloor,i=this.cross.groundFloorThickness,r=this.cross.elevations[Jt.groundFloor]-i,a=this.demoDepth+this.crossDepth[Le.groundFloorEdge],c=Math.ceil(this.demoWith/1.2);for(let l of[...Array(c).keys()]){l=c-1-l;const u=this.threeService.createCube({material:lt.hollowCoreSlap,whd:[1.2,i,a]});this.translate(u,1.2*l,r,this.crossDepth[Le.groundFloorEdge]-a),this.subModels[t].push(u),this.animations[t].to(u.position,{y:.5,duration:.3}),this.animations[t].to(u.scale,{z:0,duration:.3}),this.animations[t].to(u.position,{z:this.demoDepth,duration:.3},"<"),this.animations[t].to(u.scale,{y:0,duration:.1}),this.animations[t].to(u,{visible:!1,duration:0})}}buildSole(){const t=yt.sole,i=this.cross.elevations[Jt.groundFloor],s=this.threeService.createCube({material:lt.pine,whd:[this.demoWith,this.solePlateThickness,this.thickness[Le.joists]]});this.translate(s,0,i,this.crossDepth[Le.joists]),s.material[0].color=new $e(9083745),this.subModels[t].push(s),this.animations[t].to(this.subModels[t].map(r=>r.position),{y:.5,duration:.6,ease:"power3"}),this.animations[t].to(this.subModels[t].map(r=>r.material),{opacity:0,duration:.4,ease:"power3"},"-=0.6"),this.animations[t].to(this.subModels[t].map(r=>r),{visible:!1,duration:0})}buildRoofLVL(){const t=yt.roofRidge,i=this.cross.roofRidgeHight,s=this.cross.roofRidgeWidth,r=this.construction.getRoofPoint(Ae.topOutside),o=this.threeService.createCube({material:lt.pine,whd:[this.demoWith,i,s],xyz:[0,r[1]-i,-r[0]-s/2]});this.subModels[t].push(o),this.animations[t].to(this.subModels[t].map(a=>a.position),{y:0,duration:.6}),this.animations[t].to(this.subModels[t].map(a=>a.scale),{x:0,y:0,duration:.4}),this.animations[t].to(this.subModels[t].map(a=>a),{visible:!1,duration:0})}buildFloorLVL(){const t=yt.floorLVL,i=this.threeService.createCube({material:lt.pine,whd:[this.demoWith,this.floorThickness,this.floorLVLThickness]});this.translate(i,0,this.ceilingHeight,this.crossDepth[Le.serviceBeams]-this.floorLVLThickness),this.subModels[t].push(i),this.animations[t].to(this.subModels[t].map(s=>s.position),{z:-1,duration:.6}),this.animations[t].to(this.subModels[t].map(s=>s.scale),{x:0,y:0,duration:.4}),this.animations[t].to(this.subModels[t].map(s=>s),{visible:!1,duration:0})}buildGips(){const t=yt.gips,i=this.thickness[Le.gips];for(let s of[...Array(this.amountOfStuds/2).keys()]){const r=this.threeService.createCube({material:lt.gips,whd:[1.2,this.ceilingHeight,i]});this.translate(r,s*this.studDistance*2,0,this.crossDepth[Le.gips]-i),this.subModels[t].push(r)}this.animations[t].to(this.subModels[t].map(s=>s.position),{z:-2,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(s=>s.material),{opacity:0,duration:.4,ease:"power3",stagger:{each:.4}},"-=0.8"),this.animations[t].to(this.subModels[t].map(s=>s),{visible:!1,duration:0})}getAngledProperties(t,i,s){const r=this.getRoofAndOffsetPoints(s),o=ns(r[`${t}Offset`],r[`${i}Offset`]),a=Hi(r[t],r[i]);return{totalWidth:o,angle:a,origin:this.useOppositeCorner(r[`${t}Offset`],s,a),rotation:[a-90,0,0]}}buildOuterSheet(){const t=yt.outerSheet,i=this.demoWith,s=this.thickness[Le.outerSheet];let r=0,o=0,a=0;const d=(f,p,m,g,v,_)=>{const y=.3+(p+m)/_*.2;this.animations[t].to(f.rotation,{x:rn(90),duration:y});const b=1.05*g<2.4,x=1.05*v<1.2;this.animations[t].to(f.position,{x:(b?2.4:0)+g/2,y:s*r,z:.6+(x?1.2:0)+v/2,duration:y},"<"),b?a+=1:x?o+=1:r+=1};[[Ae.groundFloorOutside,Ae.wallOutside],[Ae.lowestOutside,Ae.bendOutside],[Ae.bendOutside,Ae.topOutside]].map((f,p)=>{const{totalWidth:m,origin:g,rotation:v}=this.getAngledProperties(f[0],f[1],s);this.brickPattern(t,g,2.4,1.2,s,m,i,v,lt.outerSheet,0===p?d:(_,y,b,x,w,L)=>{this.scaleZInOut(t,_,.1)},0===p?this.windowRoughOSBClip:void 0)}),this.animations[t].to(this.subModels[t].flatMap(f=>f.position),{y:-.5}),this.animations[t].to(this.subModels[t],{visible:!1,duration:0})}buildSpace(){const t=yt.space,i=this.joistFlangeWidth,s=this.thickness[Le.space]/2;for(let r of[...Array(4).keys()]){const a=this.clip(this.threeService.createCube({material:lt.osb,whd:[this.demoWith,i,s],xyz:[0,r/3*(this.outerWallHeight-i),this.crossDepth[Le.space]+s]}),this.windowRoughOSBClip);this.subModels[t].push(a)}for(let r of[...Array(this.amountOfStuds+1).keys()]){let o=r*this.studDistance-i/2;0===r&&(o=0);const a=this.clip(this.threeService.createCube({material:lt.pine,whd:[i,this.outerWallHeight,s],xyz:[o,0,this.crossDepth[Le.space]]}),this.windowRoughOSBClip);this.subModels[t].push(a)}this.subModels[t].push(this.threeService.createCube({material:lt.osb,whd:[this.window.roughWidth+i,i,s],xyz:[0,this.window.roughBottom-i,this.crossDepth[Le.space]+s]})),this.subModels[t].push(this.threeService.createCube({material:lt.osb,whd:[this.window.roughWidth+i,i,s],xyz:[0,this.window.roughTop+i/2,this.crossDepth[Le.space]+s]})),this.subModels[t].push(this.threeService.createCube({material:lt.osb,whd:[i,this.window.roughHeight+2*i,s],xyz:[this.window.roughWidth,this.window.roughBottom-i,this.crossDepth[Le.space]]})),this.animations[t].to(this.subModels[t].map(r=>r.position),{z:1,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(r=>r.scale),{z:0,x:0,stagger:{each:.4}},"<+=0.3")}useOppositeCorner(t,i,s){const[r,o]=On(s-90,i,t);return[0,o,-r]}buildRoofSpace(){const t=yt.roofSpace,i=this.thickness[Le.space]/2,r=this.getRoofAndOffsetPoints(this.thickness[Le.outerSheet]+i);[[Ae.lowestOutside,Ae.bendOutside],[Ae.bendOutside,Ae.topOutside]].map(([o,a])=>{const c=ns(r[`${o}Offset`],r[`${a}Offset`]),l=Hi(r[o],r[a]),u=this.useOppositeCorner(r[`${o}Offset`],i,l),d=Math.ceil(c/.204);for(let f of[...Array(d).keys()]){const m=this.threeService.createCube({material:lt.osb,whd:[this.demoWith,this.joistFlangeWidth/2,i],xyz:[0,.204*f-this.joistFlangeWidth/2,i]});let g=(new Dt).makeRotationX(rn(l-90));m.applyMatrix4(g.setPosition(new V(...u))),this.subModels[t].push(m)}for(let f of[...Array(this.amountOfStuds+1).keys()]){let p=f*this.studDistance-this.joistFlangeWidth/2;0===f&&(p=0);const m=this.threeService.createCube({material:lt.pine,whd:[this.joistFlangeWidth,c,i],xyz:[p,0,0]});let g=(new Dt).makeRotationX(rn(l-90));m.applyMatrix4(g.setPosition(new V(...u))),this.subModels[t].push(m)}}),this.animations[t].to(this.subModels[t].map(o=>o.position),{z:1,duration:.7,ease:"power3",stagger:{amount:1}}),this.animations[t].to(this.subModels[t].map(o=>o.scale),{z:0,x:0,stagger:{amount:1}},"<+=0.3")}buildFacade(){const t=yt.facade,i=.3,s=.02,o=.15,a=this.threeService.createCube({material:lt.concrete,whd:[this.window.roughWidth-this.window.gap+o,this.window.roughHeight+.3,2],xyz:[0,this.window.roughBottom-o,-1]}),c=this.thickness[Le.facade];let l=Math.ceil(this.demoWith/(i+s));for(let u of[...Array(l).keys()]){if(0===u)continue;const d=this.clip(this.threeService.createCube({material:lt.facade,whd:[.05,this.outerWallHeight,c],xyz:[u*(i+s)-.025-s/2,0,this.crossDepth[Le.facade]+c]}),a);this.subModels[t].push(d)}for(let u of[...Array(l).keys()]){let h=u*i+u*s;0===u&&(h=0);const d=this.clip(this.threeService.createCube({material:lt.facade,whd:[i,this.outerWallHeight,c],xyz:[h,0,this.crossDepth[Le.facade]]}),this.windowRoughClip);this.subModels[t].push(d)}this.subModels[t].push(this.threeService.createCube({material:lt.whiteWood,whd:[this.window.roughWidth-this.window.gap,o,1.1*c],xyz:[0,this.window.roughBottom-o,this.crossDepth[Le.facade]+c]})),this.subModels[t].push(this.threeService.createCube({material:lt.whiteWood,whd:[this.window.roughWidth-this.window.gap+.18,o,1.1*c],xyz:[0,this.window.roughTop,this.crossDepth[Le.facade]+c]})),this.subModels[t].push(this.threeService.createCube({material:lt.whiteWood,whd:[o,this.window.roughHeight+.18,1.1*c],xyz:[this.window.roughWidth-this.window.gap,this.window.roughBottom-.18,this.crossDepth[Le.facade]+c]})),this.animations[t].to(this.subModels[t].map(u=>u.position),{z:this.crossDepth[Le.facade]+i/2,ease:"power3",stagger:{amount:1.2}}),this.animations[t].to(this.subModels[t].map(u=>u.rotation),{y:rn(90),stagger:{amount:1.2}},"<+=0.3"),this.animations[t].to(this.subModels[t].map(u=>u.scale),{z:0,x:0,stagger:{amount:1.2}},"<+=0.3")}}return n.\u0275fac=function(t){return new(t||n)(T(dg),T(Vi),T(je),T(bi),T(m3))},n.\u0275cmp=dt({type:n,selectors:[["app-three-construction"]],viewQuery:function(t,i){if(1&t&&_i(tWe,5),2&t){let s;Ot(s=Nt())&&(i.rendererContainer=s.first)}},hostBindings:function(t,i){1&t&&We("keydown",function(r){return i.handleKeyboardEvent(r)},0,RL)},decls:2,vars:0,consts:[["rendererContainer",""]],template:function(t,i){1&t&&te(0,"div",null,0)},styles:["[_nghost-%COMP%]{height:100%;width:100%}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})();const iWe=["rendererContainer"];let sWe=(()=>{class n{constructor(t,i,s,r,o){this.threeService=t,this.houseService=i,this.host=s,this.appService=r,this.cookieService=o,this.subscriptions=[],this.modelName="base",this.resize$=new Un(void 0),this.renderer=new TS({antialias:!0,alpha:!0}),this.scene=new DS,this.camera=new Hs(50,1,.1,1e3),this.subModels={},this.animations={},this.house$=this.houseService.house$}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.observer.unobserve(this.host.nativeElement)}AfterViewInitCallback(){}ngAfterViewInit(){Object.values(this.keys).forEach(t=>{this.subModels[t]=[],this.animations[t]=j3.timeline()}),this.house=this.house$.value,this.cross=this.house.cross,this.construction=this.house.construction,this.createScene(),this.observer=new ResizeObserver(t=>this.resize$.next(t)),this.observer.observe(this.host.nativeElement),this.subscriptions.push(this.resize$.subscribe(()=>{this.onResize()}),this.appService.fullscreen$.subscribe(t=>{this.onResize(),this.controls.enableZoom=t})),this.AfterViewInitCallback(),Object.values(this.keys).forEach(t=>{this.subModels[t].forEach(i=>this.scene.add(i))})}onResize(){const t=this.host.nativeElement.getBoundingClientRect(),i=t.height,s=t.width;this.camera&&(this.camera.aspect=s/i,this.camera.updateProjectionMatrix()),this.renderer.setSize(s,i),this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)}animate(){window.requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}createScene(){this.cookiesAndCamera(),this.lights(),this.scene.background=null,this.renderer.shadowMap.enabled=!0,this.renderer.localClippingEnabled=!0,this.rendererContainer.nativeElement.appendChild(this.renderer.domElement),this.animate(),window.camera=this.camera,window.renderer=this.renderer,window.scene=this.scene}yoyo(t){setTimeout(()=>{this.animations[t].yoyo(!0).repeat(-1).repeatDelay(.3).play()},1e3)}cookiesAndCamera(){this.orbitControlsCookie=this.cookieService.get(`${this.modelName}_orbitControls`),this.controls=new fY(this.camera,this.renderer.domElement),this.controls.minDistance=.1,this.controls.maxDistance=50;const t=()=>{this.camera.position.set(10,10,10),this.controls.target.set(1,1,1)};try{if(""!==this.orbitControlsCookie){const i=JSON.parse(this.orbitControlsCookie)[0];this.camera.matrix.fromArray(i.camera),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.controls.target.fromArray(i.target)}else t()}catch(i){console.error(i),t()}this.controls.update(),this.subscriptions.push(F1(this.controls,"change").pipe($0(1e3)).subscribe(i=>{const s=JSON.stringify([{camera:this.camera.matrix.toArray(),target:this.controls.target.toArray()}]);this.cookieService.set(`${this.modelName}_orbitControls`,s)}))}add(t,i){this.subModels[t].push(...i)}lights(){const t=new aT(16777215,.8);this.scene.add(t);const i=new ig(16777215,.4);i.position.set(30,30,30),i.target.position.set(0,0,0),i.castShadow=!0,i.shadow.mapSize.width=1024,i.shadow.mapSize.height=1024,i.shadow.camera.near=.5,i.shadow.camera.far=500,this.scene.add(i)}clip(t,i){return t.updateMatrix(),i.updateMatrix(),qi.subtract(t,i)}pauseAll(){Object.values(yt).forEach(t=>{this.animations[t].pause()})}}return n.\u0275fac=function(t){return new(t||n)(T(dg),T(Vi),T(je),T(bi),T(m3))},n.\u0275cmp=dt({type:n,selectors:[["app-three-house-base"]],viewQuery:function(t,i){if(1&t&&_i(iWe,5),2&t){let s;Ot(s=Nt())&&(i.rendererContainer=s.first)}},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();var w4=(()=>(function(n){n.walls="walls"}(w4||(w4={})),w4))();let rWe=(()=>{class n extends sWe{constructor(t,i,s,r,o){super(t,i,s,r,o),this.threeService=t,this.houseService=i,this.host=s,this.appService=r,this.cookieService=o,this.modelName="House3D",this.keys=Object.keys(w4)}AfterViewInitCallback(){this.threeService.basicGround(this.scene,0),this.houseBlock(),this.yoyo(w4.walls);const i=new uY(10);i.position.set(0,0,0),this.scene.add(i)}clipper(t,i){if(!(t instanceof qs))return this.clip(t,i);t.children=t.children.map(s=>this.clip(s,i))}houseBlock(){const t=w4.walls,i=this.house.stramien.out.ns,s=this.house.stramien.out.we,r=this.roofClip();this.add(t,[(([a,c],[l,u])=>{const h=u-l,d=c-a,f=this.cross.elevations[Ae.topOutside],p=[l,a],m=r;return this.scene.add(m),this.clipper(this.threeService.createCube({material:lt.facade,whd:[h,f,d],xyz:[p[0],0,p[1]]}),m)})([i.b,i.c],[s.a,s.b])])}roofClip(){let s;return new qs,[this.cross.roofPoints[Ae.lowestOutside],this.cross.roofPoints[Ae.bendOutside],this.cross.roofPoints[Ae.topOutside],this.cross.roofPoints[Ae.bendOutside],this.cross.roofPoints[Ae.lowestOutside]].map((o,a,c)=>{if(a===c.length-1)return;const l=Hi(c[a],c[a+1]),u=ns(c[a],c[a+1]),h=a>=2,d=h?[this.house.outerBase-c[a+1][0],c[a+1][1]]:c[a+1],f=this.threeService.createCube({material:lt.concrete,whd:[10,u,5]});f.scale.set(1,2,1);let p=(new Dt).makeRotationX(rn(h?l-90-180:90-l-180));return f.applyMatrix4(p.setPosition(new V(-.1,d[1],d[0]))),s=void 0===s?f:qi.union(s,f),f}),s}}return n.\u0275fac=function(t){return new(t||n)(T(dg),T(Vi),T(je),T(bi),T(m3))},n.\u0275cmp=dt({type:n,selectors:[["app-three-house"]],features:[pe],decls:2,vars:0,consts:[["rendererContainer",""]],template:function(t,i){1&t&&te(0,"div",null,0)},styles:["[_nghost-%COMP%]{height:100%;width:100%}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})();const AY={leading:!0,trailing:!1};let X8=(()=>{class n{constructor(t,i,s,r){this.houseService=t,this.appService=i,this.cookieService=s,this.httpClient=r}loadSVG(t,i,s){const r=new cWe(i,s);return r.get(this.httpClient,t),r}}return n.\u0275fac=function(t){return new(t||n)(J(Vi),J(bi),J(m3),J(S3))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class cWe{constructor(e,t){this.selector=e,this.callback=t}get(e,t){e.get(t,{responseType:"text"}).pipe(cr(1)).subscribe(i=>{Ln(this.selector).html(i.replace(/height="\d+px"/gi,'height="0px"').replace(/width="\d+px"/gi,'width="0px"')),this.update()})}update(){this.callback(this.selector)}}let S4=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.distanceSubscriptions=[],this.isDistance=!1,this.distanceMouseFirst="first",this.coords=[]}stop(){this.distanceSubscriptions.forEach(t=>t.unsubscribe()),this.distanceSVG.visible=!1,this.isDistance=!1,this.distanceSubscriptions=[],this.appService.update$.next()}click(t){"first"===this.distanceMouseFirst?this.distanceMouseFirst="second":"second"===this.distanceMouseFirst?this.distanceMouseFirst="fixed":"fixed"===this.distanceMouseFirst&&(this.distanceMouseFirst="first"),this.appService.update$.next()}mousemove(t){const[i,s]=Qc(t);let r=[Oe(i),Oe(s)],o=.2;try{const c=t.composedPath().find(u=>"svg"===u.tagName);o=10*Number(c.getAttribute("meterPerPixel"))}catch{}const a=this.coords.filter(c=>c).map(c=>({coords:c,d:ns(r,c)})).filter(c=>c.d<=o).sort((c,l)=>c.d-l.d).map(c=>c.coords);a.length>0&&(r=a[0]),["first"].includes(this.distanceMouseFirst)&&(this.distanceSVG.point1=r,this.distanceSVG.point2=void 0),["second"].includes(this.distanceMouseFirst)&&(this.distanceSVG.point2=r),this.appService.update$.next()}getParts(t){this.distanceSVG=t.find(i=>i instanceof YC),this.coords=[],t.forEach(i=>{i instanceof ro&&this.coords.push(...i.coords),i instanceof Ii&&this.coords.push(...i.coords)})}start(){if(this.distanceSubscriptions.length>0)return void this.stop();const t=this.appService.scroll$.value.graphic,s=document.querySelector(`svg.${t}`).querySelector("g");t===Xn.cross&&this.getParts(this.houseService.house$.value.cross.parts),t===Xn.plan&&this.getParts(this.houseService.house$.value.parts),t===Xn.stairCross&&this.getParts(this.houseService.house$.value.stair.cross.parts),t===Xn.stairPlan&&this.getParts(this.houseService.house$.value.stair.parts),this.distanceSVG.clear(),this.distanceMouseFirst="first",this.isDistance=!0,this.distanceSVG.visible=!0,this.distanceSubscriptions.push(F1(s,"mousemove").subscribe(r=>{this.mousemove(r)}),F1(s,"click").subscribe(r=>{this.click(r)}),F1(document,"keydown").subscribe(r=>{this.stop()}))}}return n.\u0275fac=function(t){return new(t||n)(J(Vi),J(bi))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lWe=(()=>{class n{constructor(t,i,s){this.appService=t,this.d3Service=i,this.contextMenuService=s}ngOnInit(){}measure(){this.d3Service.start(),this.contextMenuService.closeMenu()}whatIsHere(){this.contextMenuService.closeMenu();const[t,i]=this.xy,s=new MouseEvent("click",{clientX:t,clientY:i,bubbles:!0});document.elementFromPoint(t,i).dispatchEvent(s)}}return n.\u0275fac=function(t){return new(t||n)(T(bi),T(S4),T(bu))},n.\u0275cmp=dt({type:n,selectors:[["context-menu"]],decls:13,vars:0,consts:[["fxLayout","column","fxLayoutAlign","start start","fxFlex","1 1"],["mat-list-item","","color","accent",3,"click"],["fxLayoutAlign","start center","fxLayoutGap","8px"]],template:function(t,i){1&t&&(M(0,"mat-action-list",0)(1,"button",1),We("click",function(){return i.whatIsHere()}),M(2,"span",2)(3,"mat-icon"),E(4,"question_mark"),S(),M(5,"div"),E(6,"What is here?"),S()()(),M(7,"button",1),We("click",function(){return i.measure()}),M(8,"span",2)(9,"mat-icon"),E(10,"square_foot"),S(),M(11,"div"),E(12,"Start measure"),S()()()())},dependencies:[Ld,dB,mB,y3,K0,b3,tp],styles:["[_nghost-%COMP%]{background:var(--color-0);padding:4px;border:1px solid;border-color:var(--color-80);border-radius:4px;box-shadow:2px 2px 0 2px #0006}.mat-list-base[_ngcontent-%COMP%]{padding:0}"]}),n})(),bu=(()=>{class n{constructor(t,i){this.overlay=t,this.d3Service=i,this.isOpen=!1}click(t){this.clientXY=[t.clientX,t.clientY],this.closeMenu(),this.d3Service.isDistance?this.d3Service.stop():this.createMenu()}createMenu(){this.overlayRef=this.overlay.create({positionStrategy:this.positionStrategy()});const t=new $h(lWe);this.overlayRef.addPanelClass("example-overlay"),this.overlayRef.attach(t).instance.xy=this.clientXY,this.isOpen=!0}closeMenu(){!this.overlayRef||(this.overlayRef.detach(),this.isOpen=!1)}positionStrategy(){return this.overlay.position().global().left(this.clientXY[0]+"px").top(this.clientXY[1]+"px")}}return n.\u0275fac=function(t){return new(t||n)(J(r1),J(S4))},n.\u0275prov=_e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uWe=["svg"];let pg=(()=>{class n{constructor(t,i,s,r,o,a,c){this.houseService=t,this.appService=i,this.tooltipService=s,this.host=r,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.stringCache="",this.showingImage=!1,this.isChild=!1,this.marginInMeters=[0,0,0,0],this.marginInPixels=[0,0,0,0],this.house$=this.houseService.house$,this.sections=Object.values(re),this.tags=Object.values(a1),this.resize$=new Un(void 0),this.subscriptions=[],this.drawingSize=[[0,0],[200,100]],this.loaded=!1}onClick(t){if(this.contextMenuService.closeMenu(),this.d3DistanceService.isDistance)return;const i=a=>{if(a&&a!==this.svgEl.nativeElement)return"id"in a&&`${a.id}`.length>0?a.id:i(a.parentNode)},s=i(t.target),r=()=>{this.tooltipService.detachOverlay(),document.body.classList.remove("selection-active"),document.querySelectorAll("svg .selected").forEach((a,c)=>{a.classList.remove("selected")})};if(!s)return r();const o=this.house.partsFlatten.find(a=>a.selector===s);if(!o)return console.log(`Couldnt find [${s}] in `,t.target,"probably its only a part of its full ID"),r();document.body.classList.add("selection-active"),o.select(),this.tooltipService.attachPopup([t.pageX,t.pageY],o)}preventContextMenu(t){return this.contextMenuService.click(t),!1}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.observer&&this.observer.unobserve(this.host.nativeElement),console.log("destroy",this.graphic),this.houseService.destroyParts()}svgUpdateMarginAndSize(){}setUp(){this.svg=Ln(this.svgEl.nativeElement),this.g=this.svg.select("g"),this.observer=new ResizeObserver(t=>this.resize$.next(t)),this.observer.observe(this.host.nativeElement),this.resize$.pipe(Ta(t=>pt(void 0))),this.subscriptions.push(Ja(this.appService.fullscreen$.pipe(Ei(t=>{t?this.svg.call(function TIe(){var u,h,d,n=xIe,e=MIe,t=SIe,i=CIe,s=wIe,r=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=_Ie,l=mG("start","zoom","end"),f=500,m=0,g=10;function v(z){z.property("__zoom",JG).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",R).filter(s).on("touchstart.zoom",Y).on("touchmove.zoom",Q).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(z,G){return(G=Math.max(r[0],Math.min(r[1],G)))===z.k?z:new Ra(G,z.x,z.y)}function y(z,G,k){var O=G[0]-k[0]*z.k,N=G[1]-k[1]*z.k;return O===z.x&&N===z.y?z:new Ra(z.k,O,N)}function b(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function x(z,G,k,O){z.on("start.zoom",function(){w(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(O).end()}).tween("zoom",function(){var N=this,B=arguments,q=w(N,B).event(O),ne=e.apply(N,B),$=null==k?b(ne):"function"==typeof k?k.apply(N,B):k,ye=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),oe=N.__zoom,De="function"==typeof G?G.apply(N,B):G,he=c(oe.invert($).concat(ye/oe.k),De.invert($).concat(ye/De.k));return function(Ie){if(1===Ie)Ie=De;else{var He=he(Ie),Qe=ye/He[2];Ie=new Ra(Qe,$[0]-He[0]*Qe,$[1]-He[1]*Qe)}q.zoom(null,Ie)}})}function w(z,G,k){return!k&&z.__zooming||new L(z,G)}function L(z,G){this.that=z,this.args=G,this.active=0,this.sourceEvent=null,this.extent=e.apply(z,G),this.taps=0}function C(z,...G){if(n.apply(this,arguments)){var k=w(this,G).event(z),O=this.__zoom,N=Math.max(r[0],Math.min(r[1],O.k*Math.pow(2,i.apply(this,arguments)))),B=Qc(z);if(k.wheel)(k.mouse[0][0]!==B[0]||k.mouse[0][1]!==B[1])&&(k.mouse[1]=O.invert(k.mouse[0]=B)),clearTimeout(k.wheel);else{if(O.k===N)return;k.mouse=[B,O.invert(B)],E9(this),k.start()}e8(z),k.wheel=setTimeout(q,150),k.zoom("mouse",t(y(_(O,N),k.mouse[0],k.mouse[1]),k.extent,o))}function q(){k.wheel=null,k.end()}}function D(z,...G){if(!d&&n.apply(this,arguments)){var k=z.currentTarget,O=w(this,G,!0).event(z),N=Ln(z.view).on("mousemove.zoom",$,!0).on("mouseup.zoom",ye,!0),B=Qc(z,k),q=z.clientX,ne=z.clientY;fIe(z.view),qC(z),O.mouse=[B,this.__zoom.invert(B)],E9(this),O.start()}function $(oe){if(e8(oe),!O.moved){var De=oe.clientX-q,he=oe.clientY-ne;O.moved=De*De+he*he>m}O.event(oe).zoom("mouse",t(y(O.that.__zoom,O.mouse[0]=Qc(oe,k),O.mouse[1]),O.extent,o))}function ye(oe){N.on("mousemove.zoom mouseup.zoom",null),pIe(oe.view,O.moved),e8(oe),O.event(oe).end()}}function R(z,...G){if(n.apply(this,arguments)){var k=this.__zoom,O=Qc(z.changedTouches?z.changedTouches[0]:z,this),N=k.invert(O),q=t(y(_(k,k.k*(z.shiftKey?.5:2)),O,N),e.apply(this,G),o);e8(z),a>0?Ln(this).transition().duration(a).call(x,q,O,z):Ln(this).call(v.transform,q,O,z)}}function Y(z,...G){if(n.apply(this,arguments)){var B,q,ne,$,k=z.touches,O=k.length,N=w(this,G,z.changedTouches.length===O).event(z);for(qC(z),q=0;q<O;++q)$=[$=Qc(ne=k[q],this),this.__zoom.invert($),ne.identifier],N.touch0?!N.touch1&&N.touch0[2]!==$[2]&&(N.touch1=$,N.taps=0):(N.touch0=$,B=!0,N.taps=1+!!u);u&&(u=clearTimeout(u)),B&&(N.taps<2&&(h=$[0],u=setTimeout(function(){u=null},f)),E9(this),N.start())}}function Q(z,...G){if(this.__zooming){var B,q,ne,$,k=w(this,G).event(z),O=z.changedTouches,N=O.length;for(e8(z),B=0;B<N;++B)ne=Qc(q=O[B],this),k.touch0&&k.touch0[2]===q.identifier?k.touch0[0]=ne:k.touch1&&k.touch1[2]===q.identifier&&(k.touch1[0]=ne);if(q=k.that.__zoom,k.touch1){var ye=k.touch0[0],oe=k.touch0[1],De=k.touch1[0],he=k.touch1[1],Ie=(Ie=De[0]-ye[0])*Ie+(Ie=De[1]-ye[1])*Ie,He=(He=he[0]-oe[0])*He+(He=he[1]-oe[1])*He;q=_(q,Math.sqrt(Ie/He)),ne=[(ye[0]+De[0])/2,(ye[1]+De[1])/2],$=[(oe[0]+he[0])/2,(oe[1]+he[1])/2]}else{if(!k.touch0)return;ne=k.touch0[0],$=k.touch0[1]}k.zoom("touch",t(y(q,ne,$),k.extent,o))}}function j(z,...G){if(this.__zooming){var B,q,k=w(this,G).event(z),O=z.changedTouches,N=O.length;for(qC(z),d&&clearTimeout(d),d=setTimeout(function(){d=null},f),B=0;B<N;++B)q=O[B],k.touch0&&k.touch0[2]===q.identifier?delete k.touch0:k.touch1&&k.touch1[2]===q.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),2===k.taps&&(q=Qc(q,this),Math.hypot(h[0]-q[0],h[1]-q[1])<g)){var ne=Ln(this).on("dblclick.zoom");ne&&ne.apply(this,arguments)}}}return v.transform=function(z,G,k,O){var N=z.selection?z.selection():z;N.property("__zoom",JG),z!==N?x(z,G,k,O):N.interrupt().each(function(){w(this,arguments).event(O).start().zoom(null,"function"==typeof G?G.apply(this,arguments):G).end()})},v.scaleBy=function(z,G,k,O){v.scaleTo(z,function(){return this.__zoom.k*("function"==typeof G?G.apply(this,arguments):G)},k,O)},v.scaleTo=function(z,G,k,O){v.transform(z,function(){var N=e.apply(this,arguments),B=this.__zoom,q=null==k?b(N):"function"==typeof k?k.apply(this,arguments):k,ne=B.invert(q),$="function"==typeof G?G.apply(this,arguments):G;return t(y(_(B,$),q,ne),N,o)},k,O)},v.translateBy=function(z,G,k,O){v.transform(z,function(){return t(this.__zoom.translate("function"==typeof G?G.apply(this,arguments):G,"function"==typeof k?k.apply(this,arguments):k),e.apply(this,arguments),o)},null,O)},v.translateTo=function(z,G,k,O,N){v.transform(z,function(){var B=e.apply(this,arguments),q=this.__zoom,ne=null==O?b(B):"function"==typeof O?O.apply(this,arguments):O;return t($C.translate(ne[0],ne[1]).scale(q.k).translate("function"==typeof G?-G.apply(this,arguments):-G,"function"==typeof k?-k.apply(this,arguments):-k),B,o)},O,N)},L.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,G){return this.mouse&&"mouse"!==z&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&"touch"!==z&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&"touch"!==z&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var G=Ln(this.that).datum();l.call(z,this.that,new yIe(z,{sourceEvent:this.sourceEvent,target:v,type:z,transform:this.that.__zoom,dispatch:l}),G)}},v.wheelDelta=function(z){return arguments.length?(i="function"==typeof z?z:V9(+z),v):i},v.filter=function(z){return arguments.length?(n="function"==typeof z?z:V9(!!z),v):n},v.touchable=function(z){return arguments.length?(s="function"==typeof z?z:V9(!!z),v):s},v.extent=function(z){return arguments.length?(e="function"==typeof z?z:V9([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),v):e},v.scaleExtent=function(z){return arguments.length?(r[0]=+z[0],r[1]=+z[1],v):[r[0],r[1]]},v.translateExtent=function(z){return arguments.length?(o[0][0]=+z[0][0],o[1][0]=+z[1][0],o[0][1]=+z[0][1],o[1][1]=+z[1][1],v):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},v.constrain=function(z){return arguments.length?(t=z,v):t},v.duration=function(z){return arguments.length?(a=+z,v):a},v.interpolate=function(z){return arguments.length?(c=z,v):c},v.on=function(){var z=l.on.apply(l,arguments);return z===l?v:z},v.clickDistance=function(z){return arguments.length?(m=(z=+z)*z,v):Math.sqrt(m)},v.tapDistance=function(z){return arguments.length?(g=+z,v):g},v}().on("zoom",i=>{this.setTransform(i.transform,0)})):(this.svg.on(".zoom",null),this.setTransform())})),this.appService.scroll$.pipe(Ei(t=>{this.section=this.appService.scroll$.value.section}))).subscribe(t=>{}),Ja(this.appService.update$,this.house$).pipe(Ei(t=>{const i=this.house$.value;this.house=i,this.cross=i.cross,this.stair=i.stair})).subscribe(t=>{this.updateSVG(!0)}),Ja(this.appService.states$,this.appService.svgTransform$.pipe(Ei(t=>{if(!this.loaded&&this.graphic in t){const i=t[this.graphic];this.setTransform(new Ra(i.k,i.x,i.y))}})),this.resize$.pipe(Pn(t=>!this.showingImage),function aWe(n,e=f7,t=AY){const i=zH(n,e);return function oWe(n,e=AY){return Fi((t,i)=>{const{leading:s,trailing:r}=e;let o=!1,a=null,c=null,l=!1;const u=()=>{c?.unsubscribe(),c=null,r&&(f(),l&&i.complete())},h=()=>{c=null,l&&i.complete()},d=p=>c=Rr(n(p)).subscribe(mi(i,u,h)),f=()=>{if(o){o=!1;const p=a;a=null,i.next(p),!l&&d(p)}};t.subscribe(mi(i,p=>{o=!0,a=p,(!c||c.closed)&&(s?f():d(p))},()=>{l=!0,(!(r&&o&&c)||c.closed)&&i.complete()}))})}(()=>i,t)}(10))).pipe(Pn(t=>void 0!==this.house)).subscribe(t=>{this.updateSVG()})),this.loaded=!0}setTransform(t="translate(0,0) scale(1)",i=1e4){this.loaded&&this.appService.setTransformCookie(t,this.graphic),this.g.attr("transform",t)}updateSVG(t=!1){this.tooltipService.updateOverlay(),this.svgUpdateMarginAndSize();const[[i,s],[r,o]]=this.drawingSize,a=-this.marginInMeters[3]+i,c=-this.marginInMeters[0]+s,l=r+this.marginInMeters[3]+this.marginInMeters[1],u=o+this.marginInMeters[0]+this.marginInMeters[2],h=Math.abs(Oe(this.svgEl.nativeElement.clientWidth,0)-this.marginInPixels[1]-this.marginInPixels[3]),d=Math.abs(Oe(this.svgEl.nativeElement.clientHeight,0)-this.marginInPixels[0]-this.marginInPixels[2]),f=Oe(l/h),p=Oe(u/d),m=Math.max(f,p)/this.getScale(),g=this.meterPerPixel!==m;this.meterPerPixel=m,this.svgEl.nativeElement.setAttribute("meterPerPixel",`${m}`);const v=this.marginInPixels.map(b=>Oe(b*this.meterPerPixel));this.isChild||this.svg.transition().duration(1e3).attr("viewBox",`\n        ${-v[3]+a} \n        ${-v[0]+c} \n        ${Math.abs(l+(v[3]+v[1]))} \n        ${Math.abs(u+(v[0]+v[2]))}`);const _=[this.appService.floor$.value,this.appService.scroll$.value.section,Object.entries(this.appService.states$.value).filter(([b,x])=>!0===x).map(([b,x])=>b),this.graphic].join("-"),y=this.stringCache!==_||""===this.stringCache;this.stringCache=_,(!1!==t||y||g)&&(this.svgSpecificUpdate(),this.house.redrawHouse(this.appService.floor$.value,this.graphic,this.meterPerPixel,y||t))}svgSpecificUpdate(){}getScale(){const t=/scale\(\d+\.?\d*/g.exec(this.g.attr("transform"));return t?Number(t[0].replace("scale(","").replace(")","")):1}}return n.\u0275fac=function(t){return new(t||n)(T(Vi),T(bi),T(_6),T(je),T(X8),T(S4),T(bu))},n.\u0275cmp=dt({type:n,selectors:[["app-svg-base"]],viewQuery:function(t,i){if(1&t&&_i(uWe,5),2&t){let s;Ot(s=Nt())&&(i.svgEl=s.first)}},hostVars:2,hostBindings:function(t,i){1&t&&We("click",function(r){return i.onClick(r)})("contextmenu",function(r){return i.preventContextMenu(r)}),2&t&&Et("imaged",i.showingImage)},inputs:{isChild:"isChild"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();const hWe=["render"];function dWe(n,e){1&n&&(wi(),te(0,"g",76)),2&n&&vn("id","icon-",e.$implicit,"")}function fWe(n,e){1&n&&(wi(),te(0,"polyline",77)),2&n&&vn("id","grid-index-",e.index,"")}function pWe(n,e){1&n&&(wi(),te(0,"polyline",78)),2&n&&vn("id","grid-index-",e.index,"")}function mWe(n,e){1&n&&(wi(),te(0,"polygon",76)),2&n&&Z("id",e.$implicit)}function gWe(n,e){1&n&&(wi(),M(0,"g",76),te(1,"polyline",79)(2,"polyline",80)(3,"polygon",81)(4,"circle",82),S()),2&n&&Z("id",e.$implicit)}function vWe(n,e){1&n&&(wi(),M(0,"g",76),te(1,"polygon",83)(2,"path",84),S()),2&n&&Z("id",e.$implicit)}function _We(n,e){1&n&&(wi(),M(0,"g",76),te(1,"polygon",85)(2,"path",86),S()),2&n&&Z("id",e.$implicit)}function yWe(n,e){1&n&&(wi(),te(0,"polyline",87)),2&n&&_a("id",e.$implicit)}function bWe(n,e){if(1&n&&(wi(),M(0,"g",88),te(1,"use",89),S()),2&n){const t=e.$implicit;_a("id",t),H(1),_a("id",t)}}const DY=function(){return[]};let xWe=(()=>{class n extends pg{constructor(t,i,s,r,o,a,c,l){super(t,i,s,r,a,c,l),this.houseService=t,this.appService=i,this.tooltipService=s,this.host=r,this.httpClient=o,this.d3Service=a,this.d3DistanceService=c,this.contextMenuService=l,this.marginInMeters=[0,0,0,0],this.marginInPixels=[72,64,64,8],this.gridSizeX$=new Un(100),this.gridSizeY$=new Un(100),this.roomKeys=this.houseService.roomKeys,this.doorKeys=this.houseService.doorKeys,this.wallKeys=this.houseService.wallKeys,this.windowKeys=this.houseService.windowKeys,this.sensorKeys=this.houseService.sensorKeys,this.SensorTypes=Object.values(X),this.graphic=Xn.plan,this.transformOrigin=[0,0],this.svgLoaders=[]}svgSpecificUpdate(){!0!==this.appService.fullscreen$.value&&(this.appService.scroll$.value.section===re.welcome?(this.g.attr("transform","transform: scale(0.4) translateX(40%)"),this.showingImage=!0):(this.showingImage=!1,this.g.attr("transform","")))}ngAfterViewInit(){this.svgLoaders.push(this.d3Service.loadSVG("assets/models/sun.svg",".g-sun",t=>{const i=this.house$.value,s=40*this.meterPerPixel;Ln(t).selectChild("svg").attr("height",s+"px").attr("width",s+"px").attr("x",i.houseWidth/2+"px").attr("y",i.houseLength+1*i.studDistance+"px")}));for(let t of Object.values(X))this.svgLoaders.push(this.d3Service.loadSVG(`assets/svg/${t}.svg`,`#icon-${t}`,i=>{const r=20*this.meterPerPixel;Ln(i).selectChild("svg").attr("x",-r/2+"px").attr("y",-r/2+"px").attr("height",r+"px").attr("width",r+"px")}));this.setUp(),this.setStairs(),this.renderImg=this.svg.select(".render-img").attr("xlink:href","/assets/img/top_render.jpg"),this.scaleRenderImage(),Ln("svg")}svgUpdateMarginAndSize(){this.gridSizeX$.next(this.house.gridSizeX),this.gridSizeY$.next(this.house.gridSizeY);const t=3*this.house.studDistance;this.marginInMeters=[t,t,t,t],this.drawingSize=[[0,0],[this.house.houseWidth,this.house.houseLength]],this.scaleRenderImage(),this.scaleStairs(),this.svgLoaders.forEach(i=>i.update())}setStairs(){const t=document.querySelector(".svg-plan-stair-plan").firstChild;this.svg.select(".plan-stair-plan").select(".plan-stair-plan").node().replaceWith(t),t.classList.add("plan-stair-plan")}scaleStairs(){this.svg.select(".plan-stair-plan").attr("transform-origin",`${this.stair.stairOrigin[0]+this.stair.totalWidth/2} ${this.house.stair.stairOrigin[1]+this.stair.totalHeight/2}`)}scaleRenderImage(){const t=this.house.stramien.out,i=[582,240],c=Oe(this.house.houseWidth/this.meterPerPixel),l=Oe(this.house.houseLength/this.meterPerPixel),u=[0,0],h=Oe(549/c,5),d=Oe(481/l,5),f=Math.max(d,h);if(!this.renderImg)return;const m=y=>[Oe(y[0]/this.meterPerPixel,4),Oe(y[1]/this.meterPerPixel,4)],v=[On(45,100,[t.we.d,t.ns.c]),[t.we.d,t.ns.c],[t.we.b+(t.we.c-t.we.b)/2,t.ns.b+(t.ns.c-t.ns.b)/2],[t.we.b,t.ns.b],On(200,100,[t.we.b,t.ns.b])],_=(y=>[u[0]-Oe(y[0]*this.meterPerPixel/f),u[1]-Oe(y[1]*this.meterPerPixel/f)])(i);this.renderImg.attr("x",_[0]).attr("y",_[1]).attr("width",1920*this.meterPerPixel/f).attr("height",1080*this.meterPerPixel/f).attr("clip-path",`polygon(\n0% 0%,\n100% 0%,\n100% 100%,\n${v.map(y=>(y=>{const b=m(y);return[(b[0]*f+i[0])/1920*100,(b[1]*f+i[1])/1080*100].map(x=>`${Oe(x,0)}%`).join(" ")})(y)).join(", \n")}\n      )`)}}return n.\u0275fac=function(t){return new(t||n)(T(Vi),T(bi),T(_6),T(je),T(S3),T(X8),T(S4),T(bu))},n.\u0275cmp=dt({type:n,selectors:[["app-svg-plan"]],viewQuery:function(t,i){if(1&t&&_i(hWe,5),2&t){let s;Ot(s=Nt())&&(i.renderEl=s.first)}},features:[pe],decls:82,vars:11,consts:[["preserveAspectRatio","xMidYMid meet",1,"plan"],["svg",""],["type","text/css"],["id","MyGradient","gradientTransform","rotate(90)"],["offset","-10%",1,"alt-stop"],["offset","30%",1,"alt-stop"],["offset","100%",1,"main-stop"],["id","inset-shadow"],["stdDeviation","0.5","result","offset-blur"],["operator","out","in","SourceGraphic","in2","offset-blur","result","inverse"],["flood-color","black","flood-opacity","1","result","color"],["operator","in","in","color","in2","inverse","result","shadow"],["in","shadow","result","shadow"],["type","linear","slope",".175"],["transform","rotate(0)",1,"all"],[1,"icons",2,"display","none"],[3,"id",4,"ngFor","ngForOf"],[1,"house-stramien"],["clas","house-stramien",1,"house-stramien-in"],["clas","house-stramien","id","house-stramien-in-we-a"],["clas","house-stramien","id","house-stramien-in-we-b"],["clas","house-stramien","id","house-stramien-in-we-c"],["clas","house-stramien","id","house-stramien-in-we-d"],["clas","house-stramien","id","house-stramien-in-ns-a"],["clas","house-stramien","id","house-stramien-in-ns-b"],["clas","house-stramien","id","house-stramien-in-ns-c"],["clas","house-stramien","id","house-stramien-in-ns-d"],["clas","house-stramien",1,"house-stramien-out"],["clas","house-stramien","id","house-stramien-out-we-a"],["clas","house-stramien","id","house-stramien-out-we-b"],["clas","house-stramien","id","house-stramien-out-we-c"],["clas","house-stramien","id","house-stramien-out-we-d"],["clas","house-stramien","id","house-stramien-out-ns-a"],["clas","house-stramien","id","house-stramien-out-ns-b"],["clas","house-stramien","id","house-stramien-out-ns-c"],["clas","house-stramien","id","house-stramien-out-ns-d"],[1,"g-grid"],["class","grid-vertical",3,"id",4,"ngFor","ngForOf"],["class","grid-horizontal",3,"id",4,"ngFor","ngForOf"],[1,"house-wind-rose"],[1,"house-wind-rose-1"],[1,"house-wind-rose-2"],[1,"house-wind-rose-text"],[1,"g-room"],[1,"plan-stair-plan","included-stairs-plan"],[1,"plan-stair-plan"],[1,"g-wall"],[1,"g-door"],[1,"g-window"],[1,"extra"],["id","balcony-edge"],["id","hall-edge"],["id","view-lines"],["id","central-void","filter","url(#inset-shadow)"],["id","tower-walls"],["id","roof-line-1"],["id","roof-line-2"],["id","roof-line-3"],["id","roof-line-4"],["id","roof-line-5"],[1,"house-measure"],["id","house-total-height"],["id","house-total-width"],["id","house-width-1"],["id","house-width-2"],["id","house-width-3"],["id","house-height-1"],["id","house-height-2"],["id","house-height-inner"],["id","house-height-3"],[1,"g-sensor"],["class","sensor-cable",3,"id",4,"ngFor","ngForOf"],["class","sensor-g",3,"id",4,"ngFor","ngForOf"],[1,"render-img"],[1,"g-sun"],["id","distance"],[3,"id"],[1,"grid-vertical",3,"id"],[1,"grid-horizontal",3,"id"],[1,"wall-left"],[1,"wall-right"],[1,"wall-fill"],[1,"wall-origin"],[1,"door-wall-opening"],[1,"door-swing"],[1,"window-wall-opening"],[1,"window-pane"],[1,"sensor-cable",3,"id"],[1,"sensor-g",3,"id"],[1,"sensor-icon",3,"id"]],template:function(t,i){1&t&&(wi(),M(0,"svg",0,1)(2,"style",2),E(3," .g-room { fill: url(#MyGradient) } "),S(),M(4,"defs")(5,"linearGradient",3),te(6,"stop",4)(7,"stop",5)(8,"stop",6),S(),M(9,"filter",7),te(10,"feGaussianBlur",8)(11,"feComposite",9)(12,"feFlood",10)(13,"feComposite",11),M(14,"feComponentTransfer",12),te(15,"feFuncA",13),S()()(),M(16,"g",14)(17,"g",15),Ve(18,dWe,1,1,"g",16),S(),M(19,"g",17)(20,"g",18),te(21,"polyline",19)(22,"polyline",20)(23,"polyline",21)(24,"polyline",22)(25,"polyline",23)(26,"polyline",24)(27,"polyline",25)(28,"polyline",26),S(),M(29,"g",27),te(30,"polyline",28)(31,"polyline",29)(32,"polyline",30)(33,"polyline",31)(34,"polyline",32)(35,"polyline",33)(36,"polyline",34)(37,"polyline",35),S()(),M(38,"g",36),Ve(39,fWe,1,1,"polyline",37),Ve(40,pWe,1,1,"polyline",38),S(),M(41,"g",39),te(42,"polygon",40)(43,"polygon",41)(44,"text",42),S(),M(45,"g",43),Ve(46,mWe,1,1,"polygon",16),S(),M(47,"g",44),te(48,"svg",45),S(),M(49,"g",46),Ve(50,gWe,5,1,"g",16),S(),M(51,"g",47),Ve(52,vWe,3,1,"g",16),S(),M(53,"g",48),Ve(54,_We,3,1,"g",16),S(),M(55,"g",49),te(56,"polyline",50)(57,"polyline",51)(58,"polyline",52)(59,"polygon",53)(60,"polygon",54)(61,"polyline",55)(62,"polyline",56)(63,"polyline",57)(64,"polyline",58)(65,"polyline",59),S(),M(66,"g",60),te(67,"g",61)(68,"g",62)(69,"g",63)(70,"g",64)(71,"g",65)(72,"g",66)(73,"g",67)(74,"g",68)(75,"g",69),S(),M(76,"g",70),Ve(77,yWe,1,1,"polyline",71),Ve(78,bWe,2,2,"g",72),S(),te(79,"image",73)(80,"g",74)(81,"g",75),S()()),2&t&&(H(18),Z("ngForOf",i.SensorTypes),H(21),Z("ngForOf",Ac(9,DY).constructor(55)),H(1),Z("ngForOf",Ac(10,DY).constructor(55)),H(6),Z("ngForOf",i.roomKeys),H(4),Z("ngForOf",i.wallKeys),H(2),Z("ngForOf",i.doorKeys),H(2),Z("ngForOf",i.windowKeys),H(23),Z("ngForOf",i.sensorKeys),H(1),Z("ngForOf",i.sensorKeys))},dependencies:[v2],styles:[".floor-top .included-stairs-plan .floor-clip{clip-path:inherit}  .included-stairs-plan{pointer-events:none}  .sensor-water-cold,   .sensor-dimmer,   .sensor-pir,   .sensor-vent-out,   .sensor-ethernet,   .sensor-perilex,   .sensor-light-switch{fill:var(--primary-color)}  .sensor-water-cold.sensor-cable,   .sensor-dimmer.sensor-cable,   .sensor-pir.sensor-cable,   .sensor-vent-out.sensor-cable,   .sensor-ethernet.sensor-cable,   .sensor-perilex.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--primary-color)!important}  .sensor-water-warm,   .sensor-vent-in,   .sensor-camera,   .sensor-poe,   .sensor-socket,   .sensor-light-bulb{fill:var(--accent-color)}  .sensor-water-warm.sensor-cable,   .sensor-vent-in.sensor-cable,   .sensor-camera.sensor-cable,   .sensor-poe.sensor-cable,   .sensor-socket.sensor-cable,   .sensor-light-bulb.sensor-cable{stroke:var(--accent-color)!important}  .sensor-drain,   .sensor-alarm,   .sensor-light-switch{fill:var(--first-color)}  .sensor-drain.sensor-cable,   .sensor-alarm.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--first-color)!important}  .sensor-shower,   .sensor-dlc,   .sensor-wifi,   .sensor-blinds{fill:var(--second-color)}  .sensor-shower.sensor-cable,   .sensor-dlc.sensor-cable,   .sensor-wifi.sensor-cable,   .sensor-blinds.sensor-cable{stroke:var(--second-color)!important}  .sensor-water-rain,   .sensor-temperature{fill:var(--third-color)}  .sensor-water-rain.sensor-cable,   .sensor-temperature.sensor-cable{stroke:var(--third-color)!important}  .sensor-smoke{fill:#a80000}  .sensor-smoke.sensor-cable{stroke:#a80000!important}  .selection-active .g-sensor>*:not(.selected){opacity:0!important}  svg.plan{height:100%;width:100%;position:relative}  svg.plan polyline[id^=roof-line-]{fill:none;stroke:var(--primary-color)}  svg.plan #hall-edge,   svg.plan #balcony-edge{stroke:var(--color-60)}  svg.plan .g-sun{transition:.4s;opacity:0}  svg.plan .g-sun g{transform-origin:center;fill:#fdc865}  svg.plan #view-lines{fill:none;stroke:var(--primary-color);opacity:0}  svg.plan .render-img{pointer-events:none;transition:.4s;opacity:0}  svg.plan .house-wind-rose{fill:none;transition:.4s,stroke-width 1ms;stroke:#000;stroke-linecap:square}  svg.plan #tower-walls{fill:var(--accent-color);stroke:none;pointer-events:none;opacity:.6}  svg.plan .house-stramien{transition:.4s,stroke-width 1ms;stroke:var(--first-color);stroke-linecap:square}  svg.plan .house-stramien .house-stramien-out{stroke:var(--second-color)}  svg.plan .house-wind-rose{opacity:0}  svg.plan .house-wind-rose .house-wind-rose-text{stroke:none;fill:currentColor}  svg.plan .house-wind-rose .house-wind-rose-1{fill:currentColor}  svg.plan .g-grid .grid-main{stroke:var(--color-50)}  svg.plan .g-grid .grid-sub{stroke:var(--color-10)}  svg.plan .g-grid .grid-subsub{stroke:var(--color-30)}  svg.plan .g-sensor polyline{transition:.5s;fill:none;stroke:#00f}  svg.plan .g-sensor polyline.cable-connection{stroke:#079372}  svg.plan .g-room polygon{stroke:none!important;transition:.4s;fill:var(--color-0)}  svg.plan .g-room polygon:hover{fill:var(--primary-lighter-color)}  svg.plan .g-room polygon.room-hole{box-shadow:inset 3px 5px 2px #0006}  svg.plan .g-room polygon.selected{fill:var(--primary-color)}  svg.plan .g-wall{transition:.4s;opacity:1}  svg.plan .g-wall .selected polygon{fill:var(--primary-color)}  svg.plan .g-wall .selected circle{opacity:1}  svg.plan .g-wall polygon{transition:.5s;fill-rule:nonzero}  svg.plan .g-wall polygon:hover{fill:var(--primary-lighter-color)}  svg.plan .g-wall circle{stroke:none;fill:var(--color-50);opacity:0}  svg.plan .g-wall .type-outer{fill:var(--color-30);stroke:var(--color-60)}  svg.plan .g-wall .type-outer .side-out{stroke:var(--color-60)}  svg.plan .g-wall .side-out{transition:.6s}  svg.plan .g-wall .type-inner{fill:var(--color-20);stroke:#565656}  svg.plan .g-wall .type-theoretic{opacity:1;stroke:#0091b6;stroke-width:3px}  svg.plan .g-wall .wall-fill{stroke:none}  svg.plan .g-door g{transition:opacity .4s}  svg.plan .g-door polygon{transition:.5s;fill:var(--color-0);stroke:none}  svg.plan .g-door path{fill:none;stroke:var(--color-70);stroke-linecap:square}  svg.plan .g-window polygon{transition:.5s;fill:var(--color-20);stroke:var(--color-60)}  svg.plan .g-window path{fill:none;stroke:var(--color-60);stroke-linecap:square}  svg.plan .plan-stair-plan #walk-line,   svg.plan .plan-stair-plan .measure-stair{display:none}  .section-welcome:not(.fullscreen) .render-img{opacity:1!important}  .section-welcome:not(.fullscreen) .g-window g{opacity:0!important}  .section-basics .house-wind-rose,   .section-basics .g-grid{transition:2s;opacity:.7!important}  .section-tower .room-f{transition:2s;fill:var(--primary-color)!important}  .tag-base-dimension #L0-outer-WestWall-3 .side-out,   .tag-base-dimension #L0-outer-NorthWall .side-out,   .tag-base-dimension #L0-outer-SouthWall-2 .side-out,   .tag-base-dimension #L0-outer-EastWall-2 .side-out{transition:.4s;stroke-width:1!important;stroke:var(--primary-color)!important;stroke-linecap:round}  .tag-orientation .main-stop{stop-color:#fdc865}  .tag-orientation .alt-stop{stop-color:var(--color-0)}  .tag-orientation .house-wind-rose{opacity:.7!important}  .tag-orientation #L0-Central{fill:#fdc865!important}  .tag-orientation #L0-West,   .tag-orientation #L0-Central,   .tag-orientation #L0-East{shape-rendering:crispEdges;fill:url(#MyGradient)!important}  .tag-orientation .g-sun{opacity:.7!important}  .tag-orientation .g-sun g{animation:spin-animation 12s infinite}  .tag-insulated .g-wall *:not(.type-inner) polygon{fill:var(--primary-color);stroke:none!important}  .tag-viewlines #view-lines{opacity:.7!important}@keyframes spin-animation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}"]}),n})();function MWe(n,e){1&n&&(wi(),te(0,"circle",42)),2&n&&vn("id","roof-point-",e.$implicit,"")}function CWe(n,e){1&n&&(wi(),te(0,"circle",42)),2&n&&vn("id","debug-point-",e.$implicit,"")}const LY=function(n){return{opacity:n}},wWe=function(){return[0,1,2,3,4,5,6,7,8,9,10]},SWe=function(){return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]};let TWe=(()=>{class n extends pg{constructor(t,i,s,r,o,a,c){super(t,i,s,r,o,a,c),this.houseService=t,this.appService=i,this.tooltipService=s,this.host=r,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.marginInMeters=[3,3,3,3],this.graphic=Xn.cross,this.RoofStyle=Wr}ngAfterViewInit(){this.loadFigure(),this.setUp()}loadFigure(){this.figure=this.d3Service.loadSVG("assets/models/dude.svg",".g-figure",t=>{let r,o,a;const c=.3913732394366197;[re.roofBasics].includes(this.section)?(r=this.house$.value.cross.elevations[Jt.groundFloor],o=3*this.house$.value.cross.topFloorThickness,a=!0):(r=this.house$.value.cross.elevations[Jt.topFloor],o=this.house$.value.cross.innerWidth/2-c/2+.5,a=!1),Ln(t).selectChild("svg").attr("height","1.9px").attr("y",-r-1.9+"px").attr("x",o+"px").attr("width",c+"px").selectChild("g").attr("transform",a?"translate(117,0) scale(-1 1)":"")})}svgUpdateMarginAndSize(){this.drawingSize=[[0,-(this.cross.elevations[Jt.crawlerFloor]+3)],[this.house.outerBase,this.cross.elevations[Jt.topFloor]-3]],this.marginInMeters=[3,3,3,3],this.drawBendPoint(),this.drawPoints(),this.figure.update()}drawPoints(){this.house.cross.pointOf70Roof().forEach((t,i)=>{Ln(`#debug-point-${i}`).attr("cx",t[0]).attr("cy",-t[1]).attr("r",.051).style("fill","var(--primary-color)").attr("stroke-width",0)})}drawBendPoint(){const i=this.cross.elevations[Jt.topFloor];Ln("#bend-point__h-line").attr("points",[[0,-i-this.cross.roof70Walls],[this.cross.bendPoint[0],-i-this.cross.roof70Walls],[this.cross.bendPoint[0],-i+this.cross.bendPoint[1]+.1]].join(" ")).attr("stroke-width",2*this.meterPerPixel),Ln("#bend-point__h-point").attr("cx",this.cross.bendPoint[0]).attr("cy",-i+this.cross.bendPoint[1]).attr("r",.1).attr("stroke-width",2*this.meterPerPixel)}roofCheck(t){return this.section===re.roof70?t===Wr.roof70?1:0:this.section===re.roofCircle?t===Wr.roofCircle?1:0:[Wr.roofCircleAnd70,t].includes(this.house$.value.cross.roofStyle)?1:0}}return n.\u0275fac=function(t){return new(t||n)(T(Vi),T(bi),T(_6),T(je),T(X8),T(S4),T(bu))},n.\u0275cmp=dt({type:n,selectors:[["app-svg-cross"]],features:[pe],decls:44,vars:10,consts:[["preserveAspectRatio","xMidYMid meet",1,"cross"],["svg",""],["id","diagonalHatch","patternUnits","userSpaceOnUse","width","4","height","4","patternTransform","scale(0.1)"],["d","M-1,1 l2,-2\n               M0,4 l4,-4\n               M3,5 l2,-2",2,"stroke","black","stroke-width","0.1"],["transform","rotate(0)",1,"all"],[1,"g-figure"],[1,"g-building"],["id","building-walls"],["id","building-room"],["id","building-crawler"],["id","building-ground-line"],["id","building-fill"],["id","building-ground-fill"],["id","building-ground","fill","url(#diagonalHatch)"],[1,"g-roof-circle",3,"ngStyle"],["id","building-roof-circle-wall1"],["id","building-roof-circle-wall2"],["id","roof-circle","clip-path","url(#clip-roof2)"],["id","roof-circle-shadow"],["id","roof-circle-fill"],[1,"g-roof-70",3,"ngStyle"],["id","building-roof-70-wall1"],["id","building-roof-70-wall2"],["id","roof-70","clip-path","url(#clip-roof2)"],["id","roof-70-fill"],["id","roof-70-shadow"],[1,"g-helper"],[3,"id",4,"ngFor","ngForOf"],[1,"g-h-circle-roof"],["id","roof-circle__h-line"],["id","roof-circle__h-circle"],[1,"g-h-bend-point"],["id","bend-point__h-line"],["id","bend-point__h-point"],[1,"cross-measure"],["id","lower-roof"],["id","higher-roof"],["id","minimum"],["id","minimum-h"],["id","minimum-room"],["id","minimum-room-h"],["id","distance"],[3,"id"]],template:function(t,i){1&t&&(wi(),M(0,"svg",0,1)(2,"defs")(3,"pattern",2),te(4,"path",3),S()(),M(5,"g",4),te(6,"g",5),M(7,"g",6),te(8,"polygon",7)(9,"polygon",8)(10,"polygon",9)(11,"polyline",10)(12,"polygon",11)(13,"polygon",12)(14,"polygon",13),S(),M(15,"g",14),te(16,"polygon",15)(17,"polygon",16)(18,"polygon",17)(19,"polygon",18)(20,"polygon",19),S(),M(21,"g",20),te(22,"polygon",21)(23,"polygon",22)(24,"polygon",23)(25,"polygon",24)(26,"polygon",25),S(),M(27,"g",26),Ve(28,MWe,1,1,"circle",27),M(29,"g",28),te(30,"polyline",29)(31,"path",30),S(),M(32,"g",31),te(33,"polyline",32)(34,"circle",33),S()(),M(35,"g",34),te(36,"g",35)(37,"g",36)(38,"g",37)(39,"g",38)(40,"g",39)(41,"g",40),S(),Ve(42,CWe,1,1,"circle",27),te(43,"g",41),S()()),2&t&&(H(15),Z("ngStyle",d2(4,LY,i.roofCheck(i.RoofStyle.roofCircle))),H(6),Z("ngStyle",d2(6,LY,i.roofCheck(i.RoofStyle.roof70))),H(7),Z("ngForOf",Ac(8,wWe)),H(14),Z("ngForOf",Ac(9,SWe)))},dependencies:[v2,s3,Vp],styles:["svg.cross{width:100%;height:100%;position:relative}  svg.cross *[id*=-fill]{stroke:none;opacity:0}  svg.cross *[id*=-fill]#building-ground-fill{opacity:1;fill:var(--color-0)}  svg.cross *{transition:fill .4s}  svg.cross .g-roof-circle,   svg.cross .g-roof-70,   svg.cross .g-building{stroke:var(--color-70);fill:var(--color-30)}  svg.cross .g-roof-circle #building-crawler,   svg.cross .g-roof-circle #building-room,   svg.cross .g-roof-70 #building-crawler,   svg.cross .g-roof-70 #building-room,   svg.cross .g-building #building-crawler,   svg.cross .g-building #building-room{fill:var(--color-0)}  svg.cross .g-helper>*{stroke:var(--primary-color)!important;opacity:0;fill:none}  svg.cross .g-helper>*[id^=roof-point-]{opacity:1!important}  .section-roof-basics #building-ground-fill{fill:transparent!important}  .tag-roof-both #roof-70-shadow,   .section-roof-choice #roof-70-shadow{opacity:.6;fill:var(--primary-color)!important}  .tag-roof-both #roof-circle-shadow,   .section-roof-choice #roof-circle-shadow{opacity:1;fill:var(--accent-color)!important}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}  .state-silhouette #building-roof-circle-wall1,   .state-silhouette #building-roof-circle-wall2,   .state-silhouette #building-roof-70-wall1,   .state-silhouette #building-roof-70-wall2,   .state-silhouette *[id*=-fill]:not(#building-ground-fill){fill:var(--color-90)!important;opacity:1!important;stroke:var(--color-90)!important}  .state-silhouette *[id*=-shadow]{stroke:var(--color-90)!important;fill:var(--color-90)!important}"]}),n})();function EWe(n,e){1&n&&(wi(),M(0,"g",16),te(1,"polygon",17)(2,"polygon",18)(3,"text",19),S()),2&n&&vn("id","step-",e.index,"")}const AWe=function(){return[]};let DWe=(()=>{class n extends pg{constructor(t,i,s,r,o,a,c,l){super(t,i,s,r,a,c,l),this.houseService=t,this.appService=i,this.tooltipService=s,this.host=r,this.httpClient=o,this.d3Service=a,this.d3DistanceService=c,this.contextMenuService=l,this.graphic=Xn.stairCross,this.floor=ie.all,this.steps=new Un(1)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){const t=this.stair.totalRise/Math.tan(Math.PI/180*30);[re.stairCheck,re.stairPlan].includes(this.section)?this.drawingSize=[[5*this.stair.run,9*-this.stair.rise],[4*this.stair.run,4*this.stair.rise]]:(this.drawingSize=[[-this.stair.run,-this.stair.totalRise],[t,this.stair.totalRise+this.stair.floorThickness]],this.marginInPixels=[40,40,0,0]),this.marginInMeters=[0,2*this.stair.run,0,0],[re.stairPlan].includes(this.section)?(this.svg.style("opacity",0),this.svg.style("pointer-events","none")):(this.svg.style("pointer-events",""),this.svg.style("opacity",1))}}return n.\u0275fac=function(t){return new(t||n)(T(Vi),T(bi),T(_6),T(je),T(S3),T(X8),T(S4),T(bu))},n.\u0275cmp=dt({type:n,selectors:[["app-svg-stair-steps"]],features:[pe],decls:17,vars:2,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-step"],["svg",""],[1,"g-building"],["id","floor-groundfloor"],["id","floor-topfloor-shadow"],["id","floor-topfloor"],[1,"g-step"],[3,"id",4,"ngFor","ngForOf"],[1,"g-helper"],["id","nose-line"],["id","back-line"],["id","run-size",1,"measure"],["id","rise-size",1,"measure"],["id","total-run-size",1,"measure"],["id","total-rise-size",1,"measure"],["id","distance"],[3,"id"],[1,"step-run"],[1,"step-rise"],[1,"step-text"]],template:function(t,i){1&t&&(wi(),M(0,"svg",0,1)(2,"g")(3,"g",2),te(4,"polygon",3)(5,"polygon",4)(6,"polygon",5),S(),M(7,"g",6),Ve(8,EWe,4,1,"g",7),S(),M(9,"g",8),te(10,"path",9)(11,"path",10)(12,"g",11)(13,"g",12)(14,"g",13)(15,"g",14),S(),te(16,"g",15),S()()),2&t&&(H(8),Z("ngForOf",Ac(1,AWe).constructor(25)))},dependencies:[v2],styles:["svg.stairs-step{width:100%;height:100%;position:relative;transition:.2s}  svg.stairs-step .g-helper,   svg.stairs-step .g-building,   svg.stairs-step .g-step{fill:var(--color-80);transition:.4s,stroke-width 1ms;stroke:var(--color-100)}  svg.stairs-step .g-step{fill:var(--color-100);stroke:none}  svg.stairs-step .g-step text{transition:.4s;opacity:0}  svg.stairs-step #back-line,   svg.stairs-step #nose-line{stroke:var(--color-30)}  svg.stairs-step .g-building{stroke:none;fill:var(--color-20)}  svg.stairs-step .g-building #floor-topfloor-shadow{fill:var(--color-5)}  svg.stairs-step .measure text{stroke:var(--color-0);paint-order:stroke}  svg.stairs-step .measure#rise-size,   svg.stairs-step .measure#run-size{transition:.4s 0s;opacity:0}  .section-stair-check #rise-size,   .section-stair-check #run-size{transition:.4s .6s!important;opacity:1!important}  .tag-amount-steps text{opacity:1!important}  .tag-amount-steps .measure{opacity:0}"]}),n})();function LWe(n,e){1&n&&(wi(),te(0,"circle",18)),2&n&&vn("id","walk-line-",e.index,"")}function zWe(n,e){if(1&n&&(wi(),M(0,"g",19),te(1,"polygon",20)(2,"polyline",21)(3,"text",22)(4,"circle",23),S()),2&n){const t=e.index;vn("id","step-plan-",t,""),H(4),vn("id","step-stinger-",t,"")}}function kWe(n,e){1&n&&(wi(),M(0,"g",24),te(1,"g",25)(2,"g",26)(3,"g",27)(4,"g",28)(5,"g",29),S())}const zY=function(){return[]};function RWe(n,e){if(1&n&&(wi(),M(0,"g",9)(1,"g",10),te(2,"path",11),Ve(3,LWe,1,1,"circle",12),S(),te(4,"polygon",13),M(5,"g",14),Ve(6,zWe,5,2,"g",15),S(),Ve(7,kWe,6,0,"g",16),te(8,"g",17),S()),2&n){const t=Ge();H(3),Z("ngForOf",Ac(3,zY).constructor(25)),H(3),Z("ngForOf",Ac(4,zY).constructor(25)),H(1),Z("ngIf",!t.isChild)}}let IWe=(()=>{class n extends pg{constructor(t,i,s,r,o,a,c){super(t,i,s,r,o,a,c),this.houseService=t,this.appService=i,this.tooltipService=s,this.host=r,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.graphic=Xn.stairPlan,this.floor=ie.all,this.marginInMeters=[0,0,0,0],this.marginInPixels=[64,64,0,0],this.steps=new Un(25)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){this.drawingSize=[this.stair.stairOrigin,[this.stair.totalWidth,this.stair.totalHeight]],this.marginInMeters=[2*this.stair.run,2*this.stair.run,2*this.stair.run,2*this.stair.run],[re.stairStart,re.stairBasic,re.stairCheck].includes(this.section)?(this.svg.style("opacity",0),this.svg.style("pointer-events","none")):(this.svg.style("pointer-events",""),this.svg.style("opacity",1))}}return n.\u0275fac=function(t){return new(t||n)(T(Vi),T(bi),T(_6),T(je),T(X8),T(S4),T(bu))},n.\u0275cmp=dt({type:n,selectors:[["app-svg-stair-plan"]],features:[pe],decls:11,vars:3,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-plan"],["svg",""],["id","clip-roof-ref"],["id","clip-ground-floor-ref"],["id","clip-roof"],[0,"xlink","href","#clip-roof-ref","overflow","visible"],["id","clip-ground-floor"],[0,"xlink","href","#clip-ground-floor-ref","overflow","visible"],["class","floor-clip","clip-path","url(#clip-ground-floor)",4,"ngIf"],["clip-path","url(#clip-ground-floor)",1,"floor-clip"],[1,"g-walk-line"],["id","walk-line"],["class","walk-line-dot",3,"id",4,"ngFor","ngForOf"],["id","outline",1,"outline"],[1,"g-step-plan"],[3,"id",4,"ngFor","ngForOf"],["class","measure-stair",4,"ngIf"],["id","distance"],[1,"walk-line-dot",3,"id"],[3,"id"],[1,"step-plan-lines"],[1,"step-plan-rise"],[1,"step-plan-text"],[1,"step-stinger",3,"id"],[1,"measure-stair"],["id","plateau-width"],["id","mid-width"],["id","total-width"],["id","total-height"],["id","lesser-height"]],template:function(t,i){1&t&&(wi(),M(0,"svg",0,1)(2,"defs"),te(3,"polygon",2)(4,"polygon",3),S(),M(5,"clipPath",4),te(6,"use",5),S(),M(7,"clipPath",6),te(8,"use",7),S(),Ve(9,RWe,9,5,"g",8),Bs(10,"async"),S()),2&t&&(H(9),Z("ngIf",Us(10,1,i.house$)))},dependencies:[v2,Lo,r3],styles:["[_nghost-%COMP%]     .floor-clip{clip-path:inherit}  svg.stairs-plan{width:100%;height:100%;position:relative;transition:.4s}  svg.stairs-plan .left-corner-line,   svg.stairs-plan .right-corner-line,   svg.stairs-plan .middleLine{stroke:var(--primary-color)}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .outline,   svg.stairs-plan .step-plan-lines{fill:none;stroke:var(--color-50)}  svg.stairs-plan .outline{stroke:var(--color-10)}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .step-stinger,   svg.stairs-plan .walk-line-dot,   svg.stairs-plan .walk-line,   svg.stairs-plan .step-plan-text{display:none}  .section-stair-plan .step-plan-rise,   .section-stair-plan .step-stinger,   .section-stair-plan .walk-line-dot,   .section-stair-plan .walk-line,   .section-stair-plan .step-plan-text{display:initial!important}  .section-stair-plan .walk-line-dot{opacity:0;fill:var(--first-color)}  .section-stair-plan #walk-line{fill:none;transition:0s;opacity:0;stroke:var(--first-color)}  .section-stair-plan .step-stinger{opacity:0;fill:var(--third-color)}  .section-stair-plan .step-plan-text{display:initial}  .section-stair-plan .step-plan-rise{stroke-dasharray:1%}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}  .state-walkLine .walk-line-dot,   .state-walkLine .step-stinger,   .state-walkLine #walk-line{opacity:1}"]}),n})();var EZ={prefix:"fas",iconName:"temperature-high",icon:[512,512,[],"f769","M416 128c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32zm0 64c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96s43 96 96 96zM96 112c0-26.5 21.5-48 48-48s48 21.5 48 48V276.5c0 17.3 7.1 31.9 15.3 42.5C217.8 332.6 224 349.5 224 368c0 44.2-35.8 80-80 80s-80-35.8-80-80c0-18.5 6.2-35.4 16.7-48.9C88.9 308.4 96 293.8 96 276.5V112zM144 0C82.1 0 32 50.2 32 112V276.5c0 .1-.1 .3-.2 .6c-.2 .6-.8 1.6-1.7 2.8C11.2 304.2 0 334.8 0 368c0 79.5 64.5 144 144 144s144-64.5 144-144c0-33.2-11.3-63.8-30.1-88.1c-.9-1.2-1.5-2.2-1.7-2.8c-.1-.3-.2-.5-.2-.6V112C256 50.2 205.9 0 144 0zm0 416c26.5 0 48-21.5 48-48c0-20.9-13.4-38.7-32-45.3V112c0-8.8-7.2-16-16-16s-16 7.2-16 16V322.7c-18.6 6.6-32 24.4-32 45.3c0 26.5 21.5 48 48 48z"]},qJ={prefix:"fas",iconName:"mound",icon:[576,512,[],"e52d","M144.1 179.2C173.8 127.7 228.6 96 288 96s114.2 31.7 143.9 83.2L540.4 368c12.3 21.3-3.1 48-27.7 48H63.3c-24.6 0-40-26.6-27.7-48L144.1 179.2z"]};let rne=(()=>{class n{constructor(t,i){this.httpClient=t,this.sanitizer=i,this.height="32px",this.width="32px"}set color(t){this.fillColor="primary"===t?"var(--primary-color)":"accent"===t?"var(--accent-color)":"first"===t?"var(--first-color)":"second"===t?"var(--second-color)":"third"===t?"var(--third-color)":`${t}`}set size(t){this.width=`${t[0]}px`,this.height=`${t[1]}px`}ngOnInit(){this.httpClient.get(this.url,{responseType:"text"}).subscribe({next:t=>{t=t.replace(/height=\"64px\"/gi,"").replace(/width=\"64px\"/gi,""),this.svgData=this.sanitizer.bypassSecurityTrustHtml(t)},error:t=>{this.background="#aaa"}})}}return n.\u0275fac=function(t){return new(t||n)(T(S3),T(V0))},n.\u0275cmp=dt({type:n,selectors:[["app-svg"]],hostVars:8,hostBindings:function(t,i){2&t&&Qs("background",i.background)("fill",i.fillColor)("height",i.height)("width",i.width)},inputs:{background:"background",fillColor:"fillColor",height:"height",width:"width",url:"url",color:"color",size:"size"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(t,i){1&t&&te(0,"div",0),2&t&&Z("innerHTML",i.svgData,Mc)},styles:["[_nghost-%COMP%]{display:inline-block}  svg>g>g>path:first-child{fill:#747474}"]}),n})();function sdt(n,e){if(1&n){const t=Ss();si(0),M(1,"button",5),We("click",function(){Gt(t);const s=Ge(5);return Wt(s.appService.setState(s.States.doors))}),M(2,"label"),E(3," Doors "),S(),M(4,"mat-icon",6),E(5," door_front"),S()(),M(6,"button",5),We("click",function(){Gt(t);const s=Ge(5);return Wt(s.appService.setState(s.States.theoreticalWalls))}),M(7,"label"),E(8," Theoretic walls "),S(),M(9,"mat-icon",6),E(10,"density_large"),S()(),M(11,"button",5),We("click",function(){Gt(t);const s=Ge(5);return Wt(s.appService.setState(s.States.grid))}),M(12,"label"),E(13," Grid "),S(),M(14,"mat-icon",6),E(15,"grid_on"),S()(),M(16,"button",5),We("click",function(){Gt(t);const s=Ge(5);return Wt(s.appService.setState(s.States.stramien))}),M(17,"label"),E(18," Stramien "),S(),M(19,"mat-icon",6),E(20,"grid_3x3"),S()(),M(21,"button",5),We("click",function(){Gt(t);const s=Ge(5);return Wt(s.appService.setState(s.States.towerFootprint))}),M(22,"label"),E(23," Tower footprint "),S(),M(24,"mat-icon",6),E(25,"hexagon"),S()(),M(26,"button",5),We("click",function(){Gt(t);const s=Ge(5);return Wt(s.appService.setState(s.States.measure))}),M(27,"label"),E(28," Measurements "),S(),M(29,"mat-icon",6),E(30,"square_foot"),S()(),ri()}if(2&n){const t=Ge(5);H(1),Et("active",t.checkState(t.States.doors)),H(5),Et("active",t.checkState(t.States.theoreticalWalls)),H(5),Et("active",t.checkState(t.States.grid)),H(5),Et("active",t.checkState(t.States.stramien)),H(5),Et("active",t.checkState(t.States.towerFootprint)),H(5),Et("active",t.checkState(t.States.measure))}}function rdt(n,e){if(1&n){const t=Ss();si(0),M(1,"button",10),We("click",function(){const r=Gt(t).$implicit;return Wt(Ge(6).appService.setState(r.state))}),M(2,"label",11),E(3),S(),te(4,"app-svg",12),S(),ri()}if(2&n){const t=e.$implicit,i=Ge(6);H(1),Et("active",i.checkState(t.state)),H(2),mt(" ",t.title," "),H(1),vi("sensor-",t.state,""),vn("url","assets/svg/",t.state,".svg")}}function odt(n,e){if(1&n&&(si(0),Ve(1,rdt,5,7,"ng-container",9),ri()),2&n){const t=Ge(5);H(1),Z("ngForOf",t.sensors)}}function adt(n,e){if(1&n&&(M(0,"div",8),Ve(1,sdt,31,12,"ng-container",0),Bs(2,"async"),Bs(3,"async"),Ve(4,odt,2,1,"ng-container",0),Bs(5,"async"),S()),2&n){const t=Ge(4);H(1),Z("ngIf",Us(2,2,t.page$).startsWith("house")||Us(3,4,t.page$).startsWith("?")),H(3),Z("ngIf",Us(5,6,t.page$).startsWith("wired"))}}function cdt(n,e){1&n&&(M(0,"mat-icon"),E(1,"exposure_plus_1"),S())}function ldt(n,e){1&n&&(M(0,"mat-icon"),E(1,"exposure_zero"),S())}function udt(n,e){if(1&n){const t=Ss();M(0,"button",3),We("click",function(){return Gt(t),Wt(Ge(4).setFloor())}),Ve(1,cdt,2,0,"mat-icon",0),Ve(2,ldt,2,0,"mat-icon",0),S()}if(2&n){const t=e.ngIf,i=Ge(4);H(1),Z("ngIf",t===i.Floor.top),H(1),Z("ngIf",t===i.Floor.ground)}}function hdt(n,e){if(1&n){const t=Ss();si(0),Ve(1,adt,6,8,"div",4),M(2,"button",5),We("click",function(){Gt(t);const s=Ge(3);return Wt(s.appService.setState(s.States.theoreticalWalls))}),M(3,"label"),E(4," Theoretic walls "),S(),M(5,"mat-icon",6),E(6,"density_large"),S()(),M(7,"button",3),We("click",function(){Gt(t);const s=Ge(3);return Wt(s.extra=!s.extra)}),M(8,"mat-icon"),E(9,"keyboard_double_arrow_down "),S()(),Ve(10,udt,3,2,"button",7),Bs(11,"async"),ri()}if(2&n){const t=Ge(3);H(1),Z("ngIf",t.extra),H(1),Et("active",t.checkState(t.States.theoreticalWalls)),H(5),Et("active",t.extra),H(1),A0("transform","rotate(",t.extra?20:180,"deg)"),Qs("transition","0.4s"),H(2),Z("ngIf",Us(11,11,t.floor$))}}function ddt(n,e){1&n&&(M(0,"mat-icon"),E(1,"home"),S())}function fdt(n,e){1&n&&(M(0,"mat-icon",6),E(1,"home_outline"),S())}function pdt(n,e){if(1&n){const t=Ss();M(0,"div",14)(1,"button",5),We("click",function(){Gt(t);const s=Ge(4);return Wt(s.appService.setState(s.States.measure))}),M(2,"label"),E(3," Measurements "),S(),M(4,"mat-icon"),E(5,"square_foot"),S()(),M(6,"button",5),We("click",function(){Gt(t);const s=Ge(4);return Wt(s.appService.setState(s.States.silhouette))}),M(7,"label"),E(8," Silhouette "),S(),Ve(9,ddt,2,0,"mat-icon",15),Ve(10,fdt,2,0,"ng-template",null,16,xa),S()()}if(2&n){const t=Si(11),i=Ge(4);H(1),Et("active",i.checkState(i.States.measure)),H(5),Et("active",i.checkState(i.States.silhouette)),H(3),Z("ngIf",!i.checkState(i.States.silhouette))("ngIfElse",t)}}function mdt(n,e){if(1&n){const t=Ss();si(0),Ve(1,pdt,12,6,"div",13),M(2,"button",3),We("click",function(){Gt(t);const s=Ge(3);return Wt(s.extra=!s.extra)}),M(3,"mat-icon"),E(4," keyboard_double_arrow_down "),S()(),ri()}if(2&n){const t=Ge(3);H(1),Z("ngIf",t.extra),H(1),Et("active",t.extra),H(1),A0("transform","rotate(",t.extra?-20:-180,"deg)"),Qs("transition","0.4s")}}function gdt(n,e){if(1&n){const t=Ss();M(0,"div",14)(1,"button",5),We("click",function(){Gt(t);const s=Ge(4);return Wt(s.appService.setState(s.States.walkLine))}),M(2,"label"),E(3," Walk line "),S(),M(4,"mat-icon"),E(5,"directions_walk"),S()(),M(6,"button",5),We("click",function(){Gt(t);const s=Ge(4);return Wt(s.appService.setState(s.States.measure))}),M(7,"label"),E(8," Measurements "),S(),M(9,"mat-icon"),E(10,"square_foot"),S()()()}if(2&n){const t=Ge(4);H(1),Et("active",t.checkState(t.States.walkLine)),H(5),Et("active",t.checkState(t.States.measure))}}function vdt(n,e){if(1&n){const t=Ss();si(0),Ve(1,gdt,11,4,"div",13),M(2,"button",3),We("click",function(){Gt(t);const s=Ge(3);return Wt(s.extra=!s.extra)}),M(3,"mat-icon"),E(4," keyboard_double_arrow_down "),S()(),ri()}if(2&n){const t=Ge(3);H(1),Z("ngIf",t.extra),H(1),Et("active",t.extra),H(1),A0("transform","rotate(",t.extra?-20:-180,"deg)"),Qs("transition","0.4s")}}function _dt(n,e){if(1&n){const t=Ss();si(0),M(1,"button",17),We("click",function(){const r=Gt(t).$implicit;return Wt(Ge(5).appService.setState(r))}),M(2,"label"),E(3),S()(),ri()}if(2&n){const t=e.$implicit,i=Ge(5);H(1),Et("active",i.checkState(t)),H(2),mt(" ",t.replace("construction-","")," ")}}function ydt(n,e){if(1&n){const t=Ss();M(0,"div",8),Ve(1,_dt,4,3,"ng-container",9),M(2,"button",3),We("click",function(){Gt(t);const s=Ge(4);return Wt(s.appService.setState(s.States.mirror))}),M(3,"label"),E(4," Mirror "),S(),M(5,"mat-icon"),E(6,"foundation"),S()()()}if(2&n){const t=Ge(4);H(1),Z("ngForOf",t.constructionParts),H(1),Et("active",t.checkState(t.States.mirror))}}function bdt(n,e){if(1&n){const t=Ss();si(0),Ve(1,ydt,7,3,"div",4),M(2,"button",3),We("click",function(){Gt(t);const s=Ge(3);return Wt(s.extra=!s.extra)}),M(3,"mat-icon"),E(4,"keyboard_double_arrow_down "),S()(),ri()}if(2&n){const t=Ge(3);H(1),Z("ngIf",t.extra),H(1),Et("active",t.extra),H(1),A0("transform","rotate(",t.extra?20:180,"deg)"),Qs("transition","0.4s")}}function xdt(n,e){1&n&&(M(0,"mat-icon"),E(1,"fullscreen"),S())}function Mdt(n,e){1&n&&(M(0,"mat-icon"),E(1,"fullscreen_exit"),S())}const Cdt=function(n,e){return[n,e]};function wdt(n,e){if(1&n){const t=Ss();M(0,"div",2),Ve(1,hdt,12,13,"ng-container",0),Ve(2,mdt,5,8,"ng-container",0),Ve(3,vdt,5,8,"ng-container",0),Ve(4,bdt,5,8,"ng-container",0),M(5,"button",3),We("click",function(){Gt(t);const s=Ge(2);return Wt(s.fullscreen=!s.fullscreen)}),Ve(6,xdt,2,0,"mat-icon",0),Ve(7,Mdt,2,0,"mat-icon",0),S()()}if(2&n){const t=Ge().ngIf,i=Ge();vi("container\nsection-",t.section,""),H(1),Z("ngIf",t.graphic===i.Graphic.plan),H(1),Z("ngIf",t.graphic===i.Graphic.cross),H(1),Z("ngIf",TR(9,Cdt,i.Graphic.stairCross,i.Graphic.stairPlan).includes(t.graphic)),H(1),Z("ngIf",t.graphic===i.Graphic.construction),H(2),Z("ngIf",!i.fullscreen),H(1),Z("ngIf",i.fullscreen)}}function Sdt(n,e){if(1&n&&(si(0),Ve(1,wdt,8,12,"div",1),Bs(2,"async"),ri()),2&n){const t=Ge();H(1),Z("ngIf",Us(2,1,t.states$))}}let Tdt=(()=>{class n{constructor(t,i,s,r,o){this.appService=t,this.elementRef=i,this.houseService=s,this.cookieService=r,this.router=o,this.house$=this.houseService.house$,this.Floor=ie,this.floor$=this.appService.floor$,this.scroll$=this.appService.scroll$,this.states$=this.appService.states$,this.setFloor=()=>this.appService.setFloor(),this.Graphic=Xn,this.States=tr,this.page$=this.appService.page$,this.sensors=Object.values(X).map(a=>({state:a,title:a})),this.constructionParts=Object.values(yt),this.ConstructionParts=yt,this.faTemperatureHigh=EZ,this.faMound=qJ,this.extra=!0}get fullscreen(){return this.appService.fullscreen$.value}set fullscreen(t){this.cookieService.set("fullscreen",`${t}`),this.appService.fullscreen$.next(t)}ngOnInit(){}checkState(t){return!0===this.states$.value[t]}}return n.\u0275fac=function(t){return new(t||n)(T(bi),T(je),T(Vi),T(m3),T(vs))},n.\u0275cmp=dt({type:n,selectors:[["controls"]],decls:2,vars:3,consts:[[4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",3,"class",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px"],["mat-mini-fab","","color","accent",3,"click"],["class","sub-controls","fxLayout","column","fxLayoutAlign","end end","fxLayoutGap","8px",4,"ngIf"],["mat-mini-fab","",3,"click"],[2,"font-family","Material Icons Outlined"],["mat-mini-fab","","color","accent",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end end","fxLayoutGap","8px",1,"sub-controls"],[4,"ngFor","ngForOf"],["mat-mini-fab","",1,"sensor-button",2,"height","12px","width","12px",3,"click"],[1,"sensor-label"],["height","12px","width","12px",3,"url"],["class","sub-controls","fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",1,"sub-controls"],[4,"ngIf","ngIfElse"],["elseGrey",""],["mat-mini-fab","","color","accent",1,"construction",3,"click"]],template:function(t,i){1&t&&(Ve(0,Sdt,3,3,"ng-container",0),Bs(1,"async")),2&t&&Z("ngIf",Us(1,1,i.scroll$))},dependencies:[v2,Lo,Ld,tC,y3,K0,b3,rne,r3],styles:["[_nghost-%COMP%]{display:block;position:fixed;bottom:0;z-index:9999}.controls-left[_nghost-%COMP%]{left:50px}.controls-left[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{left:-24px;bottom:8px;position:relative}.controls-left[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:left;left:50px;color:var(--color-100);cursor:pointer}.controls-right[_nghost-%COMP%]{right:50px}.controls-right[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{right:-24px;bottom:8px;position:relative}.controls-right[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:right;right:50px;color:var(--color-100);opacity:1}[_nghost-%COMP%]     .sensor-button{right:0}[_nghost-%COMP%]     .sensor-button svg{position:absolute;top:0;right:0}[_nghost-%COMP%]     .sensor-label{right:15px!important;top:6px;line-height:0}.active[_ngcontent-%COMP%]{background-color:var(--accent-50)!important;box-shadow:0 0 #0003,0 0 #00000024,0 0 #000!important;color:#1b1b1b!important}.active[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{opacity:.4}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px 8px 16px}.construction[_ngcontent-%COMP%]{height:16px;width:16px}.construction[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{right:18px!important;top:6px;line-height:0}.dev[_ngcontent-%COMP%]{color:#613d1a}"],data:{animation:[aW]}}),n})();function Edt(n,e){1&n&&te(0,"controls",10),2&n&&Z("@slideInOut",void 0)}function Adt(n,e){1&n&&te(0,"controls",11),2&n&&Z("@slideInOut",void 0)}function Ddt(n,e){1&n&&te(0,"app-svg-cross",15)}function Ldt(n,e){1&n&&(si(0),te(1,"app-svg-stair-plan",16)(2,"app-svg-plan",17),ri()),2&n&&(H(1),Z("isChild",!0))}function zdt(n,e){1&n&&(si(0),te(1,"app-three-construction"),ri())}function kdt(n,e){1&n&&(si(0),te(1,"app-three-house"),ri())}function Rdt(n,e){1&n&&(si(0),te(1,"app-svg-stair-plan",18),ri())}function Idt(n,e){1&n&&(si(0),te(1,"app-svg-stair-steps",19),ri())}function Hdt(n,e){if(1&n&&(si(0),M(1,"div",12),Ve(2,Ddt,1,0,"app-svg-cross",13),S(),M(3,"div",14),Ve(4,Ldt,3,1,"ng-container",8),Ve(5,zdt,2,0,"ng-container",8),Ve(6,kdt,2,0,"ng-container",8),Ve(7,Rdt,2,0,"ng-container",8),Ve(8,Idt,2,0,"ng-container",8),S(),ri()),2&n){const t=e.ngIf,i=Ge();H(2),Z("ngIf",t===i.Graphic.cross),H(2),Z("ngIf",t===i.Graphic.plan),H(1),Z("ngIf",t===i.Graphic.construction),H(1),Z("ngIf",t===i.Graphic.House3D),H(1),Z("ngIf",t===i.Graphic.stairPlan),H(1),Z("ngIf",t===i.Graphic.stairCross)}}const Vdt=function(n){return{top:n}};let Pdt=(()=>{class n{constructor(t,i,s,r,o,a){this.appService=t,this.tooltipService=i,this.houseService=s,this.router=r,this.activatedRoute=o,this.stateService=a,this.sections=Object.keys(re),this.Tag=a1,this.GraphicSide=Nc,this.Graphic=Xn,this.sectionScroll={},this.goalLine=.4,this.popupActive$=this.appService.popupActive$,this.fullscreen$=this.appService.fullscreen$,this.scroll$=this.appService.scroll$,this.floor$=this.appService.floor$,this.tag$=this.appService.tag$,this.states$=this.appService.states$,this.page$=this.appService.page$,this.cssStates$=this.states$.pipe(Pt(c=>Object.entries(c).filter(([l,u])=>!0===u).map(([l,u])=>`state-${l}`).join(" "))),this.loaded=!1,F1(window,"scroll").subscribe(c=>{this.calcSection()})}ngAfterViewInit(){this.router.events.pipe(Pn(t=>t instanceof Aa)).subscribe(t=>{setTimeout(()=>{this.setup()},0)}),this.setup()}setup(){this.sectionEls=document.querySelectorAll("section"),this.sectionScroll={},this.sectionEls.forEach(s=>{const r=s.id;this.sectionScroll[r]={id:r,top:s.offsetTop}}),this.calcSection();const i=this.activatedRoute.snapshot.params.tag;i&&this.tag$.next(i),this.loaded=!0}calcSection(){this.section=this.getSection(),void 0===this.section?(this.graphic=Xn.none,this.graphicSide=Nc.none):(this.graphic=this.setGraphic(this.section),this.graphicSide=this.getSide(),document.querySelector(`section#${this.section}`).classList.add("section-active")),this.appService.scroll$.next({scroll:Oe(window.pageYOffset,0),percentage:this.getVerticalScrollPercentage(document.body),section:this.section,graphicSide:this.graphicSide,graphic:this.graphic}),this.stateService.updateStateBasedOnSection(this.section,this.loaded),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{section:this.section},replaceUrl:!0,queryParamsHandling:"merge"})}getVerticalScrollPercentage(t){var i=t.parentNode;return Oe((t.scrollTop||i.scrollTop)/(i.scrollHeight-i.clientHeight))}setGraphic(t){let i=Xn.none;return[re.welcome,re.passiv,re.basics,re.extensions,re.tower,re.wiredWelcome,re.wiredPower,re.wiredEthernet,re.wiredExtra,re.wiredLight,re.wiredSafety,re.wiredVent,re.wiredWater].includes(t)&&(i=Xn.plan),[re.roof70,re.roofBasics,re.roofChoice,re.roofCircle,re.roofEdge,re.roofIntermezzo].includes(t)&&(i=Xn.cross,[re.roof70].includes(t)&&this.houseService.update("cross","viewedRoofStyle",Wr.roof70),[re.roofBasics,re.roofCircle].includes(t)&&this.houseService.update("cross","viewedRoofStyle",Wr.roofCircle)),[re.stairStart,re.stairBasic,re.stairCheck,re.stairPlan].includes(t)&&(i=Xn.stairCross),[re.stairPlan].includes(t)&&(i=Xn.stairPlan),[re.constructionParameters,re.facadeStart,re.facadeWindow,re.facadeDoor].includes(t)&&(i=Xn.none),[re.constructionWelcome,re.constructionFoundation,re.constructionCrawlerSpace,re.constructionFloor,re.constructionRoof,re.constructionWallFinish,re.constructionWallSole,re.constructionWallJoists,re.constructionWallOSB,re.constructionWallTape,re.constructionWallOuterSheet,re.constructionWallSpace,re.constructionWallFacade,re.constructionWallInsulation,re.constructionWallService,re.constructionWallGips,re.constructionFloor,re.constructionFloorLVL,re.constructionGroundFloor,re.constructionRoofRidge,re.constructionRoofJoist,re.constructionRoofInside,re.constructionRoofOuterSheet,re.constructionRoofSpace,re.constructionRoofTiles].includes(t)&&(i=Xn.construction),[re.House3D].includes(t)&&(i=Xn.House3D),[re.installationDrinkWater,re.installationElectricity,re.installationGreyWater,re.installationHeating,re.installationSmartHome,re.installationVentilation].includes(t)&&(i=Xn.none),this.graphic!==i&&(console.log("Swap side!"),this.tooltipService.detachOverlay()),this.graphic=i,i}getSection(){var t=Oe(window.innerHeight*this.goalLine,0),s=Oe(window.pageYOffset,0)+t;this.sectionEls.forEach(o=>{const a=o.id;this.sectionScroll[a].past=this.sectionScroll[a].top<s,o.classList.remove("section-active")});const r=Object.values(this.sectionScroll).filter(o=>o.past).sort((o,a)=>a.top-o.top);return r&&r[0]?r[0].id:void 0}getSide(){let t=Nc.right;return[Xn.cross].includes(this.graphic)&&(t=Nc.left),[Xn.none].includes(this.graphic)&&(t=Nc.none),t}}return n.\u0275fac=function(t){return new(t||n)(T(bi),T(_6),T(Vi),T(vs),T(Oc),T(qIe))},n.\u0275cmp=dt({type:n,selectors:[["app-main-page"]],decls:21,vars:31,consts:[[1,"page"],[1,"left-blinder","bg"],[1,"left-flex"],[1,"center"],[1,"right-flex"],[1,"right-blinder","bg"],["class","controls controls-left",4,"ngIf"],["class","controls controls-right",4,"ngIf"],[4,"ngIf"],[1,"goal-marker",3,"ngStyle"],[1,"controls","controls-left"],[1,"controls","controls-right"],[1,"floating","floating-left"],["class","svg-cross",4,"ngIf"],[1,"floating","floating-right"],[1,"svg-cross"],["fxFlex","0 0 0",1,"svg-plan-stair-plan",3,"isChild"],[1,"svg-plan"],[1,"svg-stair-plan"],[1,"svg-stair-steps"]],template:function(t,i){1&t&&(M(0,"div",0)(1,"div"),Bs(2,"async"),Bs(3,"async"),Bs(4,"async"),Bs(5,"async"),Bs(6,"async"),Bs(7,"async"),Bs(8,"async"),te(9,"div",1),M(10,"main"),te(11,"div",2),M(12,"div",3),te(13,"router-outlet"),S(),te(14,"div",4),S(),te(15,"div",5),Ve(16,Edt,1,1,"controls",6),Ve(17,Adt,1,1,"controls",7),Ve(18,Hdt,9,6,"ng-container",8),Bs(19,"async"),S()(),te(20,"div",9)),2&t&&(H(1),function Ik(n,e,t,i,s,r,o,a,c,l,u,h,d,f,p){V1(wo,ba,S0(Ee(),n,e,t,i,s,r,o,a,c,l,u,h,d,f,p),!0)}("container \n  tag-",Us(2,13,i.tag$)," \n  floor-",Us(3,15,i.floor$)," \n  section-",Us(4,17,i.scroll$).section," \n  show-",Us(5,19,i.scroll$).graphicSide," \n  ",Us(6,21,i.popupActive$)?"popup-active":""," \n  ",Us(7,23,i.fullscreen$)?"fullscreen":"","\n  ",Us(8,25,i.cssStates$)," \n  "),H(15),Z("ngIf",i.graphicSide===i.GraphicSide.left),H(1),Z("ngIf",i.graphicSide===i.GraphicSide.right),H(1),Z("ngIf",Us(19,27,i.scroll$).graphic),H(2),Z("ngStyle",d2(29,Vdt,100*i.goalLine+"vh")))},dependencies:[Lo,s3,tp,Vp,I7,nWe,rWe,xWe,TWe,DWe,IWe,Tdt,r3],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.page[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]{justify-content:center;display:flex;flex-direction:row;flex:1 1 100vw}.container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{max-width:800px;justify-content:center;display:flex;flex-direction:row;flex:10 1 800px}.container[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{transition:.6s}.container.show-left[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:1 1 100vw}.container.show-left[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container.show-right[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:1 1 0vw}.container.show-right[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%]{flex:1 1 100vw}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:1 1 100vw;border-left:0vw solid transparent;border-right:0vw solid transparent;max-width:450px;overflow-x:hidden;z-index:2;margin:0 46px}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{display:block;height:100%;width:0vw;position:absolute;z-index:5;transition:.8s ease-in;opacity:.8}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%]{left:0}.container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{right:0}.container.fullscreen.show-left[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container.fullscreen.show-right[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{transition:.6s ease-out;width:100vw;opacity:1}.container.fullscreen[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]{max-width:100vw!important}.container.fullscreen[_ngcontent-%COMP%]     g.all{transition:none!important}.floating[_ngcontent-%COMP%]{top:0;height:100vh;position:fixed;max-width:100vh;display:flex;flex-direction:column;justify-content:center;z-index:500;transition:1s}.floating.floating-right[_ngcontent-%COMP%]{left:50vw;width:50vw}.floating.floating-left[_ngcontent-%COMP%]{right:50vw;width:50vw}.floating[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{overflow:hidden;flex:1 1 100%;position:relative}.floating[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]{transition:.6s;max-width:70vh;width:100vw;height:100vh;left:0vw}.floating[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]     svg{transition:.6s;left:0vw;top:0vh}.floating[_ngcontent-%COMP%]   .svg-plan.imaged[_ngcontent-%COMP%]{transition:.6s;max-width:100vw;left:-50vw;top:-10vh}.floating[_ngcontent-%COMP%]   .svg-plan.imaged[_ngcontent-%COMP%]     svg{left:25vw}.show-right[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:50vw;right:100vw}.show-left[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:50vw;left:100vw}.fullscreen.show-left[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:100vw;right:0vw;max-width:100vw}.fullscreen.show-right[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:100vw;left:0vw;max-width:100vw}.goal-marker[_ngcontent-%COMP%]{position:fixed;border:1px solid var(--color-30);height:13px;width:13px;transform:rotate(45deg);left:-10px}"],data:{animation:[aW,HIe]}}),n})();const Odt=["*"];let zg=(()=>{class n{constructor(t,i){this.appService=t,this.elementRef=i}mouseover(){this.appService.setTag(this.tag)}mouseout(){this.appService.setTag(void 0)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(T(bi),T(je))},n.\u0275cmp=dt({type:n,selectors:[["tag"]],hostBindings:function(t,i){1&t&&We("mouseover",function(){return i.mouseover()})("mouseout",function(){return i.mouseout()})},inputs:{tag:"tag"},ngContentSelectors:Odt,decls:2,vars:0,consts:[["mat-flat-button","",1,"mat-button-tag"]],template:function(t,i){1&t&&(Ki(),M(0,"button",0),Vn(1),S())},dependencies:[tC],styles:[".mat-button-tag[_ngcontent-%COMP%]{padding:3px 0 5px;border:1px solid var(--color-30);line-height:1em}.mat-button-tag[_ngcontent-%COMP%]     .mat-button-wrapper{padding:8px;font-weight:initial}"]}),n})(),Ndt=(()=>{class n{constructor(t,i,s,r){this.builder=t,this.overlay=i,this.appService=s,this.viewContainerRef=r,this.open=!1,this.animate=!0,this.byClick=!1,this.unsubscribe=new Tt}mouseover(){this.attachOverlay()}mouseout(){this.appService.popupActive$.next(!1),this.detachOverlay()}onResize(t){this.updateOnChange()}getPositionStrategy(){let t;return t=this.overlay.position().flexibleConnectedTo(this.viewContainerRef.element.nativeElement).withPositions([new v7({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,-20),new v7({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,20,"flipped")]).withPush(!0),t}getScrollStrategy(){return this.overlay.scrollStrategies.reposition()}ngOnInit(){this.pageEl=document.querySelector(".center"),this.btn=this.viewContainerRef.element.nativeElement;const t=this.getPositionStrategy(),i=this.getScrollStrategy();this.overlayRef=this.overlay.create({positionStrategy:t,scrollStrategy:i,hasBackdrop:this.byClick}),this.overlayRef.backdropClick().pipe(Bn(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.open&&this.attachOverlay()}ngOnDestroy(){this.detachOverlay(),this.unsubscribe.next(),this.unsubscribe.complete(),this.overlayRef.dispose()}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.arrowEl.remove(),this.overlayRef.detach())}attachOverlay(){const t=new Mb(this.overlayTemplate,this.viewContainerRef);this.overlayRef&&!this.overlayRef.hasAttached()&&(this.componentRef=this.overlayRef.attach(t),this.updateOnChange(),this.createMakeMeAPopup(),this.appService.popupActive$.next(!0))}createMakeMeAPopup(){this.overlayRef.overlayElement.classList.add("popup","base"),this.arrowEl=document.createElement("div"),this.arrowEl.classList.add("popup-arrow","base"),this.setArrow(),this.overlayRef.overlayElement.append(this.arrowEl)}setArrow(){const{left:t,width:i}=this.btn.getBoundingClientRect(),{x:s}=this.pageEl.getBoundingClientRect();this.arrowEl.style.left=t-s-20+i/2+"px"}updateOnChange(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.overlayRef.updatePosition(),this.overlayRef.updateSize({width:this.pageEl.clientWidth}),this.arrowEl&&this.setArrow())}playAnimation(t,i){const r=this.builder.build(t).create(i);return r.play(),r}enterAnimation(t){return t.style.maxWidth="100%",[zt({"max-width":"0%"}),oi("150ms ease-out",zt({"max-width":"100%"}))]}leaveAnimation(){return[oi("200ms ease-in",zt({"max-width":"0%"}))]}}return n.\u0275fac=function(t){return new(t||n)(T(px),T(r1),T(bi),T(er))},n.\u0275dir=le({type:n,selectors:[["","overlayTemplate",""]],hostBindings:function(t,i){1&t&&We("mouseover",function(){return i.mouseover()})("mouseout",function(){return i.mouseout()})("resize",function(r){return i.onResize(r)},!1,kL)},inputs:{overlayTemplate:"overlayTemplate",open:"open"}}),n})();function Fdt(n,e){1&n&&E(0),2&n&&mt(" Insulation keeps you warm. Passiv houses have almost no heatloss so therefore (almost) no heating is needed! The walls are thicker than you are used to: ",.5," meter ")}function Bdt(n,e){1&n&&E(0," In the winter, we need the sun to warmup the house. In the summer the house needs to be shaded on the outside to prevent overheating. ")}function Udt(n,e){1&n&&(E(0," It is even a hashtag "),M(1,"b"),E(2,"#EfficiencyFirst"),S(),E(3,". Why look at green energy if we wast still alot of energy. ( Ofcourse we still need green energy! ). First insulation to the max, before thinking of solarpanels. "))}function Gdt(n,e){1&n&&E(0," It is not really a thing, more a concept. It helps the already complex roof to look good. And also, very helpful with calculations. ")}function Wdt(n,e){1&n&&E(0," This extension is to greaten the three-part south facade, creates a bigger roof on the second floor. ")}function jdt(n,e){1&n&&E(0," Dont make this too long, it does not fit with the compact design, enlarge the base-dimension if you like. ")}function $dt(n,e){1&n&&E(0," A concept, how far is the bend-point of the roof, away from the outside wall. ")}function qdt(n,e){if(1&n){const t=Ss();si(0),M(1,"section",1)(2,"h1"),E(3),S(),M(4,"p",13),E(5," A passiv-haus but in country style, and above all open-source. We love to share our plans as a community. See it as free building plans for your own house or give it to your constructor. Its truly free. "),S()(),M(6,"section",1)(7,"h2"),E(8,"Passiv? "),M(9,"span",14),E(10,"(Its German)"),S()(),M(11,"p"),E(12,"Passive houses are the future. Feel free to "),M(13,"a",15),E(14,"search online for 'Passiv Haus'"),S(),E(15," (not really sexy or anything). Therefor let us try to explain it. Well, really short: "),S(),M(16,"ul")(17,"li")(18,"tag",16),E(19,"Great insulated"),S(),Ve(20,Fdt,1,1,"ng-template",null,17,xa),S(),M(22,"li"),E(23,"Well & compact desinged"),S(),M(24,"li")(25,"tag",16),E(26,"Orientation"),S(),E(27," to the sun "),Ve(28,Bdt,1,0,"ng-template",null,18,xa),S(),M(30,"li"),E(31,"No thermal bridges"),S(),M(32,"li"),E(33,"Can be houses, but also offices etc"),S(),M(34,"li"),E(35,"Sustainable (well in our opinion)"),S()(),M(36,"p"),E(37,"Passiv Haus in one punchline:"),S(),M(38,"div",19)(39,"tag",16),E(40,"Efficiency first"),S(),Ve(41,Udt,4,0,"ng-template",null,20,xa),S(),M(43,"p"),E(44," Sometimes passive houses are often not so pretty. (maybe, if you like form-follow-function). Effiency first, but style second for us! Therefore we try to combine old design styles with this great concept. "),S()(),M(45,"section",1)(46,"h2"),E(47,"The basics"),S(),M(48,"p"),E(49," The house is based on parametric design. So play with all the sliders, its interactive. Lets start at the very basics. And why does it look like a church from above? "),S(),M(50,"h3"),E(51,"Two axis"),S(),M(52,"p"),E(53,"The main house, seen from the south (up here) has two axis with a certain "),M(54,"tag",16),E(55,"base dimension"),S(),E(56,". A design seen often in classical buildings. It comes often with great "),M(57,"tag",21),E(58,"viewlines"),S(),E(59,". The higher the base-dimension is, the lower the extensions can be, the more efficient near-cube shape we get. "),S(),Ve(60,Gdt,1,0,"ng-template",null,22,xa),M(62,"label")(63,"span"),E(64,"Base dimension "),S(),M(65,"mat-slider",23),We("input",function(s){Gt(t);const r=Ge();return Wt(r.update("house","studAmount",s.value,r.tags.baseDimension))}),S()(),M(66,"label",24)(67,"span"),E(68,"Technical "),S(),E(69),M(70,"tag",16),E(71,"base dimension"),S(),E(72),S(),M(73,"label",24)(74,"span"),E(75,"Technical "),S(),M(76,"table")(77,"tr"),te(78,"td")(79,"td"),M(80,"td"),E(81,"total"),S(),M(82,"td"),E(83),S()()()()(),M(84,"section",1)(85,"h2"),E(86,"Extensions"),S(),M(87,"p"),E(88," Break boring lines on the southface and create more interesting view points with a "),M(89,"tag",16),E(90,"south extension"),S(),te(91,"i"),E(92,". The colder, darker side (less windows by design) is located in the convenient "),M(93,"tag",16),E(94,"north wing"),S()(),M(95,"h3"),E(96,"Body parts "),S(),Ve(97,Wdt,1,0,"ng-template",null,25,xa),Ve(99,jdt,1,0,"ng-template",null,26,xa),M(101,"label")(102,"span"),E(103,"South extension "),S(),M(104,"mat-slider",27),We("input",function(s){Gt(t);const r=Ge();return Wt(r.update("house","studAmountSouth",s.value,r.tags.extensionToSouth))}),S()(),M(105,"label")(106,"span"),E(107," North wing "),S(),M(108,"mat-slider",28),We("input",function(s){Gt(t);const r=Ge();return Wt(r.update("house","studAmountNorth",s.value,r.tags.extensionToNorth))}),S()(),M(109,"label")(110,"span"),E(111," West wing "),S(),M(112,"mat-slider",28),We("input",function(s){Gt(t);const r=Ge();return Wt(r.update("house","studAmountWest",s.value,r.tags.extensionToWest))}),S()(),M(113,"label")(114,"span"),E(115," East wing "),S(),M(116,"mat-slider",28),We("input",function(s){Gt(t);const r=Ge();return Wt(r.update("house","studAmountEast",s.value,r.tags.extensionToEast))}),S()(),M(117,"label",24)(118,"span"),E(119,"Technical "),S(),M(120,"table")(121,"tr")(122,"td"),E(123,"Floor"),S(),M(124,"td"),E(125,"area"),S(),M(126,"td"),E(127,"ground"),S(),M(128,"td"),E(129),S()(),M(130,"tr"),te(131,"td")(132,"td"),M(133,"td"),E(134,"top"),S(),M(135,"td"),E(136),S()(),M(137,"tr"),te(138,"td")(139,"td"),M(140,"td"),E(141,"total"),S(),M(142,"td"),E(143),S()(),M(144,"tr")(145,"td"),E(146," Wall"),S(),M(147,"td"),E(148,"inside"),S(),M(149,"td"),E(150,"length"),S(),M(151,"td"),E(152),S()(),M(153,"tr"),te(154,"td")(155,"td"),M(156,"td"),E(157,"area"),S(),M(158,"td"),E(159),S()(),M(160,"tr"),te(161,"td"),M(162,"td"),E(163,"outside"),S(),M(164,"td"),E(165,"length"),S(),M(166,"td"),E(167),S()(),M(168,"tr"),te(169,"td")(170,"td"),M(171,"td"),E(172,"area"),S(),M(173,"td"),E(174),S()()()()(),M(175,"section",29)(176,"h3"),E(177,"Tower"),S(),M(178,"p"),E(179,"This tower is a practical backdoor and allows you to walk from the kitchen to the rest of the house. It creates also a viewpoint from the roof! We like the tower. "),S(),M(180,"mat-slide-toggle",30),We("ngModelChange",function(s){return Gt(t),Wt(Ge().update("house","showTower",s))}),E(181,"With a practical tower "),S()(),M(182,"section",1)(183,"h1"),E(184,"Cross section"),S(),M(185,"h2"),E(186,"Slicing it, the basics"),S(),M(187,"p"),E(188,"High ceilings are nice and makes the house feel larger, they costs more but worth it. Heat problems are less with floorheathing."),S(),M(189,"label")(190,"span"),E(191),S(),M(192,"mat-slider",31),We("input",function(s){return Gt(t),Wt(Ge().update("cross","ceilingHeight",s.value))}),S()(),M(193,"h3"),E(194),S(),M(195,"p"),E(196,"Way too technical in this design fase! However a crawler space can raise the whole building, changing the overall experience. It can protect more against climate change. Floodings or heavy rains. It is also more expensive and takes more time to build."),S(),M(197,"mat-slide-toggle",30),We("ngModelChange",function(s){return Gt(t),Wt(Ge().update("cross","crawlerSpace",s))}),E(198),S(),M(199,"label")(200,"span"),E(201),S(),M(202,"mat-slider",32),We("input",function(s){return Gt(t),Wt(Ge().update("cross","floorAboveGround",s.value))}),S()()(),M(203,"section",1)(204,"h2"),E(205,"Roof style"),S(),M(206,"p")(207,"a",33),E(208,"Mansard or Gambrel roof"),S(),E(209," is gives a nice classic countryside stylefull roof.There are three methods to create them. We check both the \"circle\" and '70\xb0/30\xb0'"),S(),M(210,"h2"),E(211,"Circle-based"),S(),M(212,"p"),E(213,"Draw a "),M(214,"tag",21),E(215,"half circle"),S(),E(216," with 45\xb0 lines to create the breakpoints. If you use the slider to create more overhang, the circle moves with it, to keep proportions. The angles are resp: 67.5\xb0, 22.5\xb0 "),S(),M(217,"label")(218,"span"),E(219,"(Fictive) 'Wider roof'"),S(),M(220,"mat-slider",34),We("input",function(s){Gt(t);const r=Ge();return Wt(r.update("cross","roofCirclePullDown",s.value,r.tags.halfCircle))}),S()(),M(221,"label")(222,"span"),E(223),S(),M(224,"mat-slider",34),We("input",function(s){return Gt(t),Wt(Ge().update("cross","roofCircleWalls",s.value))}),S()()(),M(225,"section",1)(226,"h2"),E(227,"The 70\xb0/30\xb0 roof"),S(),M(228,"p"),E(229,"With this technique, draw a line 70\xb0 until a "),M(230,"tag",16),E(231,"bend point"),S(),E(232,". After than follow 30\xb0. Think about the solar potential! "),S(),E(233," . A common seen classical symmetrical design. "),Ve(234,$dt,1,0,"ng-template",null,35,xa),M(236,"label")(237,"span"),E(238,"Move "),M(239,"tag",16),E(240,"bend point"),S()(),M(241,"mat-slider",34),We("input",function(s){Gt(t);const r=Ge();return Wt(r.update("cross","roof70offset",s.value,r.tags.bendPoint))}),S()(),M(242,"label")(243,"span"),E(244),S(),M(245,"mat-slider",34),We("input",function(s){Gt(t);const r=Ge();return Wt(r.update("cross","roof70Walls",s.value,r.tags.roofWalls))}),S()(),M(246,"label")(247,"span"),E(248),S(),M(249,"mat-slider",34),We("input",function(s){return Gt(t),Wt(Ge().update("cross","roof70Extension",s.value))}),S()()(),M(250,"section",1)(251,"h3"),E(252,"Roof, 70\xb0 or Circle"),S(),M(253,"p"),E(254,"We should choose a roof. There are more possibilities in the end. But for now a mansard roof it is. "),S(),M(255,"mat-button-toggle-group",36),We("ngModelChange",function(s){return Wt(Gt(t).ngIf.cross.roofStyle=s)})("ngModelChange",function(s){return Gt(t),Wt(Ge().choosenRoofstyle(s))}),M(256,"mat-button-toggle",37),E(257,"Circle based"),S(),M(258,"mat-button-toggle",37),E(259,"Both"),S(),M(260,"mat-button-toggle",37),E(261,"70\xb0 based"),S()()(),M(262,"section",1)(263,"h3"),E(264,"The roof edge"),S(),M(265,"p"),E(266,"We can look at the silhouette to image it a bit better. We can also add or remove a gutter, and more decorative "),S()(),ri()}if(2&n){const t=e.ngIf,i=Si(21),s=Si(29),r=Si(42),o=Si(61),a=Si(98),c=Si(100),l=Si(235),u=Ge();H(1),Z("id",u.Section.welcome),H(2),mt("Welcome to ",t.name,""),H(3),Z("id",u.Section.passiv),H(12),Z("tag",u.tags.insulated)("overlayTemplate",i),H(7),Z("tag",u.tags.orientation)("overlayTemplate",s),H(14),Z("tag",u.tags.efficiency)("overlayTemplate",r),H(6),Z("id",u.Section.basics),H(9),Z("tag",u.tags.baseDimension)("overlayTemplate",o),H(3),Z("tag",u.tags.viewlines),H(8),Z("ngModel",t.studAmount),H(4),mt(" We talk in studs, wooden columns in the wall. They are the core that follow a grid of ",100*t.studDistance," cm. The "),H(1),Z("tag",u.tags.baseDimension)("overlayTemplate",o),H(2),mt(" wall has now ",t.studAmount," studs. "),H(11),mt("",null==t.stats.floor.all?null:t.stats.floor.all.area," m2"),H(1),Z("id",u.Section.extensions),H(5),Z("tag",u.tags.extensionToSouth)("overlayTemplate",a),H(4),Z("tag",u.tags.extensionToNorth)("overlayTemplate",c),H(11),Z("ngModel",t.studAmountSouth)("displayWith",u.studLabel),H(4),Z("min",9)("max",18)("ngModel",t.studAmountNorth)("displayWith",u.studLabel),H(4),Z("min",5)("max",15)("ngModel",t.studAmountWest)("displayWith",u.studLabel),H(4),Z("min",5)("max",9)("ngModel",t.studAmountEast)("displayWith",u.studLabel),H(13),mt("",t.stats.floor.ground.area," m2"),H(7),mt("",t.stats.floor.top.area," m2"),H(7),mt("",null==t.stats.floor.all?null:t.stats.floor.all.area," m2"),H(9),mt("",t.stats.wall.innerLength," m"),H(7),mt("",t.stats.wall.innerArea," m2"),H(8),mt("",t.stats.wall.outerLength," m"),H(7),mt("",t.stats.wall.outerArea," m2"),H(1),Z("id",u.Section.tower),H(5),Z("ngModel",t.showTower),H(2),Z("id",u.Section.roofBasics),H(9),mt("Ceiling height: ",t.cross.ceilingHeight," m"),H(1),Z("ngModel",t.cross.ceilingHeight),H(2),mt("Foundation: ",t.cross.crawlerSpace?"crawler space":"flat foundation",""),H(3),Z("ngModel",t.cross.crawlerSpace),H(1),mt("With a ",t.cross.crawlerSpace?"crawler space":"flat foundation"," "),H(3),mt("Ground floor above ground: ",t.cross.floorAboveGround," m"),H(1),Z("max",t.cross.crawlerHeight+t.cross.groundFloorThickness)("ngModel",t.cross.floorAboveGround),H(1),Z("id",u.Section.roofCircle),H(11),Z("tag",u.tags.halfCircle),H(6),Z("ngModel",t.cross.roofCirclePullDown),H(3),mt("Walls under the roof ",t.cross.roofCircleWalls,"m"),H(1),Z("ngModel",t.cross.roofCircleWalls),H(1),Z("id",u.Section.roof70),H(5),Z("tag",u.tags.bendPoint)("overlayTemplate",l),H(9),Z("tag",u.tags.bendPoint)("overlayTemplate",l),H(2),Z("ngModel",t.cross.roof70offset),H(3),mt("Walls under the roof: ",t.cross.roof70Walls,"m"),H(1),Z("ngModel",t.cross.roof70Walls),H(3),mt("Roof extension: ",t.cross.roof70Extension,"m"),H(1),Z("ngModel",t.cross.roof70Extension),H(1),Z("id",u.Section.roofChoice),H(5),Z("ngModel",t.cross.roofStyle),H(1),Z("value",u.RoofStyle.roofCircle),H(2),Z("value",u.RoofStyle.roofCircleAnd70),H(2),Z("value",u.RoofStyle.roof70),H(2),Z("id",u.Section.roofEdge)}}let Ydt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.house$=this.houseService.house$,this.Section=re,this.tags=a1,this.RoofStyle=Wr,this.round=Oe,this.discord=this.appService.discord,this.faDiscord=y7,this.update=this.houseService.update}ngAfterViewInit(){}studLabel(t){return`#${t} `}sizeLabel(t){return`${t} m`}choosenRoofstyle(t){this.houseService.update("cross","roofStyle",t)}}return n.\u0275fac=function(t){return new(t||n)(T(Vi),T(bi))},n.\u0275cmp=dt({type:n,selectors:[["app-page-house"]],decls:45,vars:6,consts:[[4,"ngIf"],[3,"id"],["target","_blank",2,"background","var(--primary-color)","padding","0 6px","color","white",3,"href"],[3,"icon"],["fxLayout","column","fxLayoutGap","3px",2,"max-width","180px"],["mat-flat-button","","color","accent","routerLink","/stairs"],[2,"font-family","Material Icons Outlined"],["fxLayout","column","fxLayoutGap","16px",2,"max-width","180px"],["mat-flat-button","","color","accent","routerLink","/construction"],["mat-flat-button","","color","accent","routerLink","/wired"],["mat-flat-button","","color","accent","routerLink","/costs"],["mat-flat-button","","color","accent","routerLink","/installations"],["identifier","PassiveOpen-House"],[1,"mat-caption"],[2,"font-size","0.7em"],["href","https://passivehouse.com/","target","_blank"],["cdkOverlayOrigin","",3,"tag","overlayTemplate"],["insulated",""],["orientation",""],["fxLayoutAlign","center",2,"margin","8px 0 32px"],["efficiency",""],[3,"tag"],["baseDimension",""],["min","6","max","15","tickInterval","1",3,"ngModel","input"],[1,"technical"],["extensionToSouth",""],["extensionToNorth",""],["min","0","max","4","thumbLabel","","tickInterval","1",3,"ngModel","displayWith","input"],["thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],[2,"padding-bottom","80px",3,"id"],[3,"ngModel","ngModelChange"],["min","1.9","max","3.6","step","0.1","tickInterval","1",3,"ngModel","input"],["min","0","step","0.1","tickInterval","1",3,"max","ngModel","input"],["href","https://en.wikipedia.org/wiki/Mansard_roof","target","_blank"],["min","0","max","2","step","0.1","tickInterval","1",3,"ngModel","input"],["bendPoint",""],["name","roofstyle",3,"ngModel","ngModelChange"],[3,"value"]],template:function(t,i){1&t&&(Ve(0,qdt,267,77,"ng-container",0),Bs(1,"async"),M(2,"section",1)(3,"h3"),E(4,"This was the main design"),S(),M(5,"p"),E(6,"This site has a lot of info, if you are up for more. Feel free to join us at this "),M(7,"a",2),te(8,"fa-icon",3),E(9," discord channel "),S(),E(10,": "),S(),te(11,"br"),M(12,"p"),E(13,"Next step is to get the sizes of the stairs."),S(),M(14,"div",4)(15,"button",5)(16,"mat-icon",6),E(17,"stairs"),S(),M(18,"span"),E(19,"Stairs"),S()()(),M(20,"p"),E(21,"Its also okay to leave them default and check out other chapters!"),S(),te(22,"br"),M(23,"div",7)(24,"button",8)(25,"mat-icon"),E(26,"handyman"),S(),M(27,"span"),E(28,"Construction"),S()(),M(29,"button",9)(30,"mat-icon"),E(31,"bolt"),S(),M(32,"span"),E(33,"Wired"),S()(),M(34,"button",10)(35,"mat-icon",6),E(36,"savings"),S(),M(37,"span"),E(38,"Costs"),S()(),M(39,"button",11)(40,"mat-icon"),E(41,"solar_power"),S(),M(42,"span"),E(43,"Installations"),S()()()(),te(44,"disqus",12)),2&t&&(Z("ngIf",Us(1,4,i.house$)),H(2),Z("id",i.Section.EndOfPageHouse),H(5),_a("href",i.discord,Cc),H(1),Z("icon",i.faDiscord))},dependencies:[Lo,uue,Ld,tC,Jp,bU,Ep,Vd,zU,kU,y3,K0,b3,eM,u6,ad,zg,Ndt,r3]}),n})();function Xdt(n,e){if(1&n){const t=Ss();si(0),M(1,"section",2,3)(3,"h1"),E(4,"Stairs"),S(),M(5,"p",4),E(6," Stairs are its own thing. There are even whole pinterest collections dedicated to stairs. "),S()(),M(7,"section",2)(8,"h2"),E(9,"Stair 101"),S(),M(10,"p"),E(11," There are different approaches to calculate stairs. We already did the following for us. "),S(),M(12,"ol")(13,"li"),E(14,"The "),M(15,"b"),E(16,"vertical"),S(),E(17),S(),M(18,"li"),E(19,"Building code allows the rise of the step to be between: 182mm and 220mm.Therefore we can only have between "),M(20,"b"),E(21),S()()(),M(22,"label")(23,"span"),E(24),S(),M(25,"mat-slider",5),We("input",function(s){Gt(t);const r=Ge();return Wt(r.update("stair","steps",s.value,r.Tag.amountSteps))}),S()(),M(26,"ol",6)(27,"li"),E(28,"The min and max "),M(29,"b"),E(30,"horizontal distance"),S(),E(31," is easy, the stairs should be between 30\xb0 and 35\xb0"),S()(),M(32,"label")(33,"span"),E(34),S(),M(35,"mat-slider",7),We("input",function(s){return Gt(t),Wt(Ge().update("stair","totalRun",s.value))}),S()(),M(36,"ol",8)(37,"li"),E(38),S()()(),M(39,"section",2,9)(41,"h2"),E(42,"The good, bad and perfect stairs"),S(),M(43,"label")(44,"span"),E(45,"Checks"),S(),E(46),M(47,"div"),E(48),S(),M(49,"div"),E(50),S(),M(51,"div"),E(52),S(),M(53,"div"),E(54),S()()(),M(55,"section",2,10)(57,"h2"),E(58,"Stair layout"),S(),M(59,"p"),E(60," Stairs can be straight, but we like to have two bends. This makes the stairs relative more compact. It prevents to falldown the complete stairs in accidents. Sideplus, it comes with a nice open hall effect. "),S(),M(61,"label")(62,"span"),E(63),S(),M(64,"mat-slider",11),We("input",function(s){return Gt(t),Wt(Ge().update("stair","walkWidth",s.value))}),S()(),M(65,"label")(66,"span"),E(67),S(),M(68,"mat-slider",11),We("input",function(s){return Gt(t),Wt(Ge().update("stair","totalWidth",s.value))}),S()(),M(69,"label")(70,"span"),E(71),S(),M(72,"mat-slider",12),We("input",function(s){return Gt(t),Wt(Ge().update("stair","stepsRight",s.value))}),S()(),M(73,"p"),E(74," For now we keep the model as simple as possible. Stairs are quite complex. Steps can change direction slowly to make it a piece of art by it self. "),S(),te(75,"img",13),S(),ri()}if(2&n){const t=e.ngIf,i=Ge();H(1),Z("id",i.Section.stairStart),H(6),Z("id",i.Section.stairBasic),H(10),mt(" distance is already decided by the house: ",t.stair.totalRise,"m"),H(4),Af("",t.stair.minSteps," and ",t.stair.maxSteps," steps"),H(3),mt("Total steps: horizontal ",t.stair.steps,""),H(1),Z("min",t.stair.minSteps)("max",t.stair.maxSteps)("ngModel",t.stair.steps)("displayWith",i.sizeLabel),H(9),mt("Total length stairs: horizontal ",t.stair.totalRun,"m"),H(1),Z("min",i.totalRunMin)("max",i.totalRunMax)("ngModel",t.stair.totalRun)("displayWith",i.sizeLabel),H(3),mt("The angle now is: ",t.stair.angle,"\xb0"),H(1),Z("id",i.Section.stairCheck),H(7),mt(" The angle will be ",t.stair.angle,"\xb0 "),H(2),mt("Steps: ",t.stair.steps,""),H(2),mt("Rise: ",t.stair.rise," m"),H(2),mt("Run: ",t.stair.run," m"),H(2),mt("Rise+Run+Rise: ",10*t.stair.step," cm"),H(1),Z("id",i.Section.stairPlan),H(8),mt("Width ",t.stair.walkWidth,"m"),H(1),Z("min",.7)("max",1.2)("ngModel",t.stair.walkWidth),H(3),mt("Total width of stairs: ",t.stair.totalWidth,"m"),H(1),Z("min",2*t.stair.walkWidth)("max",12)("ngModel",t.stair.totalWidth),H(3),Af("Steps on the rightside: ",t.stair.stepsRight," of ",t.stair.steps,""),H(1),Z("min",0)("max",t.stair.steps/2)("ngModel",t.stair.stepsRight)}}let Zdt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.house$=this.houseService.house$,this.Section=re,this.Tag=a1,this.tagsKeys=Object.keys(a1),this.deltas=4,this.update=this.houseService.update}ngAfterViewInit(){}sizeLabel(t){return`${t}m`}get totalRunMax(){return Oe(this.house$.value.stair.totalRise/Math.tan(nW(30)),1)}get totalRunMin(){return Oe(this.house$.value.stair.totalRise/Math.tan(nW(35)),1)}get rangeRun(){return this.totalRunMax-this.totalRunMin}get rangeSteps(){const t=this.house$.value.stair;return t.maxSteps-t.minSteps+1}currentRun(t){return Oe(t/(this.deltas-1)*this.rangeRun+this.totalRunMin)}currentCell(t,i){const s=this.house$.value.stair,r=this.currentRun(i);return Oe(r/(s.minSteps+t)*1e3,-1)}score(t,i){return t<220?"too-little":t>300?"too-much":void 0}select(t,i){this.update("stair","steps",t),this.update("stair","totalRun",i)}}return n.\u0275fac=function(t){return new(t||n)(T(Vi),T(bi))},n.\u0275cmp=dt({type:n,selectors:[["app-page-stairs"]],decls:3,vars:3,consts:[[4,"ngIf"],["identifier","PassiveOpen-Stairs"],[3,"id"],["Section.stairStart",""],[1,"mat-caption"],["step","1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["start","3"],["step","0.1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["start","4"],["Section.stairCheck",""],["Section.stairPlan",""],["step","0.1","tickInterval","1",3,"min","max","ngModel","input"],["step","1","tickInterval","1",3,"min","max","ngModel","input"],["width","100%","src","https://berkela.home.xs4all.nl/stijgpunten/afbeeldingen/tn_2005extra07_11.jpg"]],template:function(t,i){1&t&&(Ve(0,Xdt,76,36,"ng-container",0),Bs(1,"async"),te(2,"disqus",1)),2&t&&Z("ngIf",Us(1,1,i.house$))},dependencies:[Lo,Jp,Ep,Vd,u6,r3],styles:[".matrix[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-wrap:wrap;flex-direction:row}.matrix[_ngcontent-%COMP%]   .matrix-cell[_ngcontent-%COMP%]{display:block;border:1px solid black;border-radius:0;padding:0;margin:0;min-width:initial;min-height:inherit;line-height:1em;white-space:pre-wrap}.matrix[_ngcontent-%COMP%]   .matrix-cell.too-much[_ngcontent-%COMP%], .matrix[_ngcontent-%COMP%]   .matrix-cell.too-litte[_ngcontent-%COMP%]{border:1px solid rgb(255,255,255);opacity:.6}"]}),n})();function Kdt(n,e){if(1&n&&(M(0,"th",17),E(1),S()),2&n){const t=Ge().$implicit;H(1),mt(" ",t.name," ")}}function Qdt(n,e){if(1&n&&te(0,"span",20),2&n){const t=Ge().$implicit,i=Ge().$implicit;Z("innerHTML",i.def(t[i.id],t.unit),Mc)}}function Jdt(n,e){if(1&n&&(M(0,"td",18),Ve(1,Qdt,1,1,"span",19),S()),2&n){const t=e.$implicit,i=Ge().$implicit;H(1),Z("ngIf",t[i.id])}}function e8t(n,e){1&n&&(si(0,14),Ve(1,Kdt,2,1,"th",15),Ve(2,Jdt,2,1,"td",16),ri()),2&n&&Z("matColumnDef",e.$implicit.id)}function t8t(n,e){1&n&&te(0,"tr",21)}function n8t(n,e){1&n&&te(0,"tr",22)}function i8t(n,e){if(1&n){const t=Ss();si(0),M(1,"table",7),Ve(2,e8t,3,1,"ng-container",8),Ve(3,t8t,1,0,"tr",9),Ve(4,n8t,1,0,"tr",10),S(),M(5,"h3"),E(6,"The numbers that matter:"),S(),M(7,"p",11)(8,"span"),E(9,"r"),M(10,"sub"),E(11,"construction"),S()(),M(12,"span"),E(13),S(),M(14,"span"),E(15,"U "),S(),M(16,"span"),E(17),S(),M(18,"span"),E(19,"Wall thickness "),S(),M(20,"span"),E(21),S()(),M(22,"label")(23,"span"),E(24),S(),M(25,"mat-slider",12),We("input",function(s){return Gt(t),Wt(Ge().updateJoist(s.value))}),S()(),M(26,"label")(27,"span"),E(28),S(),M(29,"mat-slider",13),We("input",function(s){Gt(t);const r=Ge();return Wt(r.updateOuterSheet(r.round(s.value,4)))}),S()(),ri()}if(2&n){const t=e.ngIf,i=Ge();H(1),Z("dataSource",t.construction.heatCalcs),H(1),Z("ngForOf",i.columns),H(1),Z("matHeaderRowDef",i.columnNames),H(1),Z("matRowDefColumns",i.columnNames),H(9),mt(" ",t.construction.rConstruction,""),H(4),mt(" ",t.construction.U,""),H(4),mt(" ",t.construction.outerWallThickness,"m"),H(3),mt("I joist thickness (and main insulation) ",t.construction.thickness[i.Thicknesses.joists]," mm "),H(1),Z("max",i.joists.length-1)("ngModel",i.currentJoist()),H(3),mt("Celit thickness (",t.construction.thickness[i.Thicknesses.outerSheet],"mm ) "),H(1),Z("ngModel",t.construction.thickness[i.Thicknesses.outerSheet])}}let s8t=(()=>{class n{constructor(t){this.houseService=t,this.house$=this.houseService.house$,this.Tag=a1,this.Section=re,this.update=this.houseService.update,this.round=Oe,this.Thicknesses=Le,this.joists=[200,300,350,400],this.columns=[{id:"name",name:"Name",def:i=>`${i}`},{id:"diameter",name:"Diameter",def:i=>`${Oe(i,3)}`},{id:"lambda",name:"Lambda",def:i=>`${Oe(i,3)}`},{id:"r",name:"R",def:i=>`${Oe(i,2)}`},{id:"deltaT",name:"Delta T",def:i=>`${Oe(i,1)}\xb0C`},{id:"temp",name:"Temp",def:i=>`${Oe(i,1)}\xb0C`}],this.columnNames=this.columns.map(i=>i.id),this.currentJoist=()=>this.joists.findIndex(i=>i===this.house$.value.construction.Thicknesses[Le.joists])}ngAfterViewInit(){}updateJoist(t){this.update("construction","thicknessJoist",this.joists[t])}updateOuterSheet(t){this.update("construction","thicknessJoist",this.joists[t])}}return n.\u0275fac=function(t){return new(t||n)(T(Vi))},n.\u0275cmp=dt({type:n,selectors:[["app-page-construction"]],decls:194,vars:29,consts:[[3,"id"],[1,"counter"],["href","https://www.peutz.nl/sites/peutz.nl/files/publicaties/Peutz_publicatie_HBr_TVVLMagazine_03-2007.pdf"],["href","https://en.wikipedia.org/wiki/Panelling"],[3,"tag"],[4,"ngIf"],["identifier","PassiveOpen-Construction"],["mat-table","",1,"mat-elevation-z0",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["gdColumns"," 1fr 1fr","gdGap","8px"],["min","0","step","1","tickInterval","1",3,"max","ngModel","input"],["min","0","max","150","step","10","tickInterval","1",3,"ngModel","input"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(M(0,"section",0)(1,"h1"),E(2," Construction "),S(),M(3,"h3"),E(4," This page is still under construction. "),S()(),M(5,"section",0)(6,"h2",1),E(7,"Foundation"),S(),M(8,"p"),E(9," Depends a lot on the region. In this case we use a 'mono-pour' together with the crawler space walls. "),S()(),M(10,"section",0)(11,"h2",1),E(12,"Crawler space walls"),S(),M(13,"p"),E(14," Here we use "),M(15,"tag"),E(16,"Insulated Concrete Forms (ICFs)"),S(),E(17,". These walls are connected to the floor and should be insulated. ICFs allows you to build these walls yourself. "),S()(),M(18,"section",0)(19,"h2",1),E(20,"Ground floor"),S(),M(21,"p"),E(22," Mass (heavy things) can keep heat. Like a stone wall after sunset would emit heat. It works also the opposite. Like churches are nice cool in the summer. Mass balance out the heat in a nice way. A complete wooden house, would not have that effect. Therefore some mass is a good thing to have. "),te(23,"br")(24,"br"),E(25," Hollow-concrete-plate are relatively light and have the mass we look for. They can come with insulation, altho this would not be damp-open. "),M(26,"a",2),E(27,"https://www.peutz.nl/sites/peutz.nl/files/publicaties/Peutz_publicatie_HBr_TVVLMagazine_03-2007.pdf"),S()()(),M(28,"section",0)(29,"h2",1),E(30,"Sole beams"),S(),M(31,"p"),E(32," Its never a good idea to build wood straight on concrete."),te(33,"br"),E(34," Therefore we use: "),S(),M(35,"ul")(36,"li"),E(37," a weather-resistent filt "),S(),M(38,"li"),E(39," pressured-treated plate (more water resistent), "),S(),M(40,"li"),E(41," the base plate. "),S()()(),M(42,"section",0)(43,"h2",1),E(44,"I-Joists"),S(),M(45,"p"),E(46," This is the actual structure. These i-joist are engineered. So they are straight, and cost less wood to produce. The "),M(47,"tag"),E(48,"on-center"),S(),E(49," distance (EU is often 60cm, US 16inch) is important. Only the first and last stud should not follow this grid, because otherwise the product on the finish end exactly on center of the stud. This is wrong because it the edge of the house, so the material should continue to the end. Wood is the material for construction. It is a storage of CO"),M(50,"sub"),E(51,"2"),S(),E(52,", natural, light and easy to work with. Modern products like, "),M(53,"tag"),E(54,"I Joists"),S(),E(55,", are even stronger than their natual twins. And you don't need to have a 30cm tree to produce a 30cm beam, so trees can be used more effective. (A disadvantage can be the glue used tho). Wood can last forever, think of all the old houses in old cities. "),S()(),M(56,"section",0)(57,"h2",1),E(58,"OSB (on the inside)"),S(),M(59,"p"),E(60," Traditional seen, OSB is used for a airtight outside layer. It also helps the whole building to be more solid, it can deal with sheer stresses. In this build, we will build "),M(61,"tag"),E(62,"damp open"),S(),E(63," and OSB is a perfect airtight product, but will also block moisture. Therefore it is actually great on the inside of the house "),S()(),M(64,"section",0)(65,"h2",1),E(66,"Tape"),S(),M(67,"p"),E(68," OSB and all the other seams are of course not air-tight. Therefore should we tape every seam. This step is harder than it sounds, especially around windows. You might not pass your passiv-haus certification due to this step."),te(69,"br")(70,"br"),E(71," This steps includes also windows/doors and close all openings for a door-blower test. "),S()(),M(72,"section",0)(73,"h2",1),E(74,"Wall-Floor beam"),S(),M(75,"p"),E(76," The top-floor will hang on the inside of the wall. This prevents a "),M(77,"tag"),E(78,"thermal bridge"),S(),E(79,", in other words, this makes it more easy to "),M(80,"tag"),E(81,"air tighten"),S(),E(82," the house and the insulation continues "),S()(),M(83,"section",0)(84,"h2",1),E(85,"Wooden floor"),S(),M(86,"p"),E(87," Joists and osb "),S()(),M(88,"section",0)(89,"h2",1),E(90,"Roof ridge"),S(),te(91,"p"),S(),M(92,"section",0)(93,"h2",1),E(94,"Roof joists"),S(),te(95,"p"),S(),M(96,"section",0)(97,"h2",1),E(98,"Roof Inside"),S(),M(99,"p"),E(100," The roof need sturdiness. So we use OSB here as well as the inner layer. All seams can be taped directly "),S()(),M(101,"section",0)(102,"h2",1),E(103,"Insulation"),S(),M(104,"p"),E(105," Very important step. Keep it all dry. It feels like glass-insulation is best best of both worlds. It's often recycled glass and has a relative small footprint to the more eco-friendly alternatives. Stay away from wool for example. It is also very affordable, so we can focus our money on more expensive windows "),S()(),M(106,"section",0)(107,"h2",1),E(108,"Damp open outer sheets"),S(),M(109,"p"),E(110," Here are multiple options. We don't like to use plastics here. A great option is "),M(111,"tag"),E(112,"fiberboard's"),S(),E(113,", they are damp open, some what water resistant. This is an environment friendly product. It can be out in the rain for 4 weeks, while building. "),S()(),M(114,"section",0)(115,"h2",1),E(116,"Roof Woodwork"),S(),M(117,"p"),E(118," grid of wood "),S()(),M(119,"section",0)(120,"h2",1),E(121,"Roof tiles"),S(),M(122,"p"),E(123," Tiles. "),S()(),M(124,"section",0)(125,"h2",1),E(126,"Cavity (vent space)"),S(),M(127,"p"),E(128," This step depends a lot on the outer finish. In this example we use vertical wooden planks. Therfore we need first vertical strips (the construction is vertical, and water needs to run down). On top of these strips are horizontal strips so we can add vertical facade planks "),S()(),M(129,"section",0)(130,"h2",1),E(131,"Outer wall"),S(),M(132,"p"),E(133," In this example we use wooden planks. Traditionally seen, it was impossible to make big planks. So in the early days the alternate with big planks and smaller strips. "),S()(),M(134,"section",0)(135,"h2",1),E(136,"Service wall"),S(),M(137,"p"),E(138," To prevent puncture in our air-tight OSB layer. There will be a service layer that contains all electric, water and such. It comes with extra insulation. This makes (small) renovations possible in the future. "),S()(),M(139,"section",0)(140,"h2",1),E(141,"Gips / Drywall / wood-finish"),S(),M(142,"p"),E(143," The inside wall will be either covered by gypsum/drywall. We also very like the idea of lower "),M(144,"a",3),E(145,"paneling"),S()()(),M(146,"h2"),E(147,"The water problem"),S(),M(148,"p"),E(149," Warm air can contain more water, so the inside air normally would go through the wall and cools down. To a point that it cannot hold longer that amount of water, so it condense in the middle of the wall. "),te(150,"br")(151,"br"),E(152," Traditional building takes that problem with plastic wraps. One on the outside to keep weather out. And a even more water-closed layer in the inside. Water moves out the construction. It is important during the building fase, to keep everything relatively dry. "),te(153,"br")(154,"br"),E(155," The alternative is: "),M(156,"tag"),E(157,"damp Open"),S(),E(158,". where no wraps are needed. The inner layer of the house has a water-closed natural layer (OSB sheets). The outside layer is 'damp-open' so it would not absorb rainwater, but the moist air from inside can escape. It is more like a Dutch slogan: not fighting the water, but living with (some) water. "),te(159,"br")(160,"br"),E(161," We try to look what is the best insulation out there. We think wood-fiber is the best most sustainable in therms of production/insulation values. Stone/glass fibers are a little bit less on the production level, but a bit more durable over time. "),te(162,"br")(163,"br"),M(164,"tag",4),E(165,"Wood fiber panels"),S(),E(166," are treated with bitumen, there are light, water-resistant and still insulating. They are a perfect layer for the outside layer of the construction (not final outer layer). "),te(167,"br")(168,"br"),E(169," On the inside of the OSB is an extra 2cm layer and finises of with wood or drywall(gips plates). This layer is practical, because all the switches and wall socket cannot interfere with the air-tight-layer. With a "),M(170,"tag",4),E(171," pipeLayer"),S(),E(172," is it:\n"),S(),M(173,"ol")(174,"li"),E(175,"Easier to build keep it "),M(176,"tag",4),E(177,"air tight"),S()(),M(178,"li"),E(179,"Deal with sockets in a later stage"),S(),M(180,"li"),E(181,"Modifications"),S()(),M(182,"section",0)(183,"h2"),E(184," Walls outer finish "),S(),M(185,"p"),E(186," Wooden house, has wood on the outside. Not completely tru. Wood is a sustainable choice (altho we wonder, painting it every 10 years...), but in theory can we have anything on the outside. Keep in mind if you build"),M(187,"tag"),E(188,"damp-open "),S(),E(189," that the finish-layer should also be damp-open. Bricks are for example. The cement is definitely not sustainable, but there is no maintenance in the coming 100-ish years. "),S()(),M(190,"section",0),Ve(191,i8t,30,12,"ng-container",5),Bs(192,"async"),S(),te(193,"disqus",6)),2&t&&(Z("id",i.Section.constructionWelcome),H(5),Z("id",i.Section.constructionFoundation),H(5),Z("id",i.Section.constructionCrawlerSpace),H(8),Z("id",i.Section.constructionGroundFloor),H(10),Z("id",i.Section.constructionWallSole),H(14),Z("id",i.Section.constructionWallJoists),H(14),Z("id",i.Section.constructionWallOSB),H(8),Z("id",i.Section.constructionWallTape),H(8),Z("id",i.Section.constructionFloorLVL),H(11),Z("id",i.Section.constructionFloor),H(5),Z("id",i.Section.constructionRoofRidge),H(4),Z("id",i.Section.constructionRoofJoist),H(4),Z("id",i.Section.constructionRoofInside),H(5),Z("id",i.Section.constructionWallInsulation),H(5),Z("id",i.Section.constructionWallOuterSheet),H(8),Z("id",i.Section.constructionRoofSpace),H(5),Z("id",i.Section.constructionRoofTiles),H(5),Z("id",i.Section.constructionWallSpace),H(5),Z("id",i.Section.constructionWallFacade),H(5),Z("id",i.Section.constructionWallService),H(5),Z("id",i.Section.constructionWallGips),H(25),Z("tag",i.Tag.woodFiberPlate),H(6),Z("tag",i.Tag.pipeLayer),H(6),Z("tag",i.Tag.airTight),H(6),Z("id",i.Section.constructionWallFinish),H(8),Z("id",i.Section.constructionParameters),H(1),Z("ngIf",Us(192,27,i.house$)))},dependencies:[v2,Lo,Jp,_C,f9,yC,p9,d9,bC,m9,g9,xC,MC,Ep,Vd,jU,$U,u6,zg,r3],styles:['[_nghost-%COMP%]{counter-reset:heading}h2.counter[_ngcontent-%COMP%]{position:relative;counter-reset:subheading}h2.counter[_ngcontent-%COMP%]:after{content:"Step";position:absolute;top:-1.2em;left:-.6em;font-size:.8em;opacity:.6}h2.counter[_ngcontent-%COMP%]:before{content:counter(heading) "";counter-increment:heading;width:32px;display:inline-block;opacity:.6}']}),n})(),r8t=(()=>{class n{constructor(t,i,s){this.houseService=t,this.threeService=i,this.appService=s,this.house$=this.houseService.house$,this.Section=re,this.Tag=a1,this.wallDetail="wallDetail",this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}ngAfterViewInit(){this.subscriptions.push()}showPerSection(){}}return n.\u0275fac=function(t){return new(t||n)(T(Vi),T(dg),T(bi))},n.\u0275cmp=dt({type:n,selectors:[["app-page-facade"]],decls:42,vars:3,consts:[[3,"id"],[1,"mat-caption"],[1,"technical",2,"max-width","640px"],["fxLayout","row wrap","fxLayoutGap","8px","fxLayoutAlign","center center",2,"padding","16px 0 24px"],["src","/assets/img/window_1.jpg",2,"max-height","360px"],["src","/assets/img/window_2.jpg",2,"max-height","360px"],["src","https://ars.els-cdn.com/content/image/1-s2.0-S0378778816316383-gr9.jpg"],["src","/assets/img/door_step_1.jpg",2,"max-height","360px"],["identifier","PassiveOpen-Facade"]],template:function(t,i){1&t&&(M(0,"section",0)(1,"h1"),E(2,"Facade"),S(),M(3,"p",1),E(4," We cover here all the basics about the outside of the house. Windows, doors, domers and bricks. "),S()(),M(5,"section",0)(6,"h1"),E(7,"Window"),S(),M(8,"p"),E(9," Windows are a tradeoff between a nice open light house and: heat loss, heat gain, complexer builds and more expensive. In a passiv house, belongs high end windows, triple glass and high-end framing. That makes it one of the most costly investments. "),S(),M(10,"label",2)(11,"span"),E(12,"Design"),S(),M(13,"span"),E(14," Dutch traditional windows have some variations. "),te(15,"br")(16,"br"),E(17," The right one is is nicely detailed. Look how the windowframe ends in a little stone, to keep it dry and prevent rotting. However the windowframe is missing at the bottom, the window rest on the stone. Not our modern standards. "),te(18,"br")(19,"br"),E(20," The major difference between them is that the left one has a frame at the bottom. That is better insulated, and we do need to use less precious stone. "),S(),M(21,"div",3),te(22,"img",4)(23,"img",5),S(),M(24,"span"),E(25," Furthermore both window-bottom-stones go into the brickwork. If you don't do this, you would create a channel for rainwater (wind blows it in the corner). And the dirt will collect on your walls. Now it would drip off. "),S()(),M(26,"p"),E(27," Place the window in the middle of insulation "),te(28,"img",6),S()(),M(29,"section",0)(30,"h1"),E(31,"Doors"),S(),M(32,"p"),E(33," For guests the first warm welcome "),S(),M(34,"label",2)(35,"span"),E(36,"Design"),S(),M(37,"span"),E(38,"They kinda look like windows. Ofcourse the bottomframe is missing here. The bottom frame should be wheelchair friendly, altho its a bit contradictive with a eleveated ground floor (due to crawler space). The door and frame should be extreme insulated. "),S(),M(39,"div",3),te(40,"img",7),S()()(),te(41,"disqus",8)),2&t&&(Z("id",i.Section.facadeStart),H(5),Z("id",i.Section.facadeWindow),H(24),Z("id",i.Section.facadeDoor))},dependencies:[y3,K0,b3,u6],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:48px;align-items:center}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})(),o8t=(()=>{class n{constructor(t,i,s){this.zone=t,this.appService=i,this.houseService=s,this.Tag=a1,this.Section=re}ngAfterViewInit(){this.zone.runOutsideAngular(()=>this.initMap())}initMap(){}}return n.\u0275fac=function(t){return new(t||n)(T(Lt),T(bi),T(Vi))},n.\u0275cmp=dt({type:n,selectors:[["app-page-installation"]],decls:95,vars:10,consts:[[3,"id"],[3,"tag"],["identifier","PassiveOpen-installations"]],template:function(t,i){1&t&&(M(0,"section",0)(1,"h1"),E(2,"Installations"),S()(),M(3,"section",0)(4,"h2"),E(5,"Drink water"),S(),M(6,"p"),E(7," Not anything special here on the cold side. You can have a local source if you live on the countryside. "),te(8,"br")(9,"br"),E(10," Hot/Warm drinkwater is needed in the sinks and showers. This water can be heated up via the central "),M(11,"tag",1),E(12," warm water buffer"),S(),E(13,". A big tank that takes heat from different sources, and allows for hot water and even heating. "),S()(),M(14,"section",0)(15,"h2"),E(16,"Heating"),S(),M(17,"p"),E(18," This is a bit of a contra verse subject. A passive house is passive, it receives energy from the sun, people and machines. The heat loss is minimum. Some passive houses don't need heating at all! In some colder climates some heating in extreme winters can be needed. There is only one real option (except air heating, which is fine for a few days, but less healthy): floor heating. It can use low-heat water from the "),M(19,"tag",1),E(20," warm water buffer"),S(),E(21,"1 "),S()(),M(22,"section",0)(23,"h2"),E(24,"Electricity"),S(),M(25,"p"),E(26," We like the off-grid principles, but still difficult to achieve in the 2020s. However we can take away a huge part of the electricity needed by solar panels and store energy in form of warm water. We can use solar-heat-panels or heating the overflow of electricity during the day to warm up the "),M(27,"tag",1),E(28," warm water buffer "),S(),E(29,". Warm water can be used in the shower, or heating. "),te(30,"br")(31,"br"),E(32," This Mansard roof is a (near) perfect angle for solar panels. However the to make it look nice is harder. We are still looking for the right panel types with old, classical roof tiles. "),te(33,"br")(34,"br"),E(35," There is a balance between the time you need electricity (evening, electricity-car & cooking) and when they produce the most (around noon). If you can return-to-the-net orientation to noon is the best. Otherwise some panels could actually more orientated to the west. "),S()(),M(36,"section",0)(37,"h2"),E(38,"Grey water"),S(),M(39,"p"),E(40," With a fancy word, climate adaption: Save rain water when it rains, like a buffer, an use it when a draught happens, or save on treated drinkwater. Rainwater water is perfect, because there are almost no levels of calcium. Water your plants with it, they love it! Flush the toilets with it and was your cloths with it, you ll see that you need less soap. "),te(41,"br")(42,"br"),E(43," We need a big water tank outside in the ground (10m"),M(44,"sub"),E(45,"3"),S(),E(46,"), a pomp and 3-filter system. All the systems that need to use the rain water need also 'grey'-pipes. If the rainwater tank is empty, you still want the flush the toilets. There is a machine that puts normal drink-water in the 'grey'-pipes as backup. Automatically! "),te(47,"br")(48,"br"),E(49,"In theory showering with rainwater seems perfect, but most law forbids to bend cold-rainwater with warm-drinkwater. If you do, you need less soap and your hair will be smooooth. "),S()(),M(50,"section",0)(51,"h2"),E(52,"Ventilation"),S(),M(53,"p"),E(54," A passive house is air-tight. It saves on heat loss (more than you would think). A modern house has a blow-in and suck-out ventilation system. The system can take the heat out of exit-air and warm the incoming air up. Only 6% of the heat is lost. A normal ventilation is 100% heat loss. Air-tight, than I can't open my windows. "),te(55,"br"),E(56," Bit of a miss conception. If the outside temperature is near the inside temperature it's completely fine. Altho with a good climate system you shouldn't feel the need to open the windows! This closed system filters the air. It is perfect when there is smog or if you have hay fever or other allergies . "),te(57,"br")(58,"br"),E(59," Some rooms get fresh air, living room, sleeping rooms. And some rooms the air is pumped out, the wet rooms and kitchen. This is in balance. In the floor there is some space for this ducts. In the "),M(60,"tag"),E(61,"installation room"),S(),E(62," there is a quite big pomp / filter. "),S()(),M(63,"section",0)(64,"h2"),E(65,"Domotica / Smart home"),S(),M(66,"p"),E(67," With more complex houses, house should become more smart. The air, and maybe the heating, should be automatic. You shouldn't even notice it. On hot summer days, the sunscreens should come down, and with rain up. "),te(68,"br")(69,"br"),E(70," There is a basic level of intelligence needed but we can take it a few steps further with automatic lights and such. 'Smart home' creates some irritations here and there. And often completely understandable. A smart light without a button is annoying, sometimes you used need a button and not a voice command or smartphone. A smart home has them all, but above all knows when you want to turn on the lamp. "),te(71,"br")(72,"br"),E(73,"Think of (all if over rulable) "),S(),M(74,"ul")(75,"li"),E(76,"Lights dim more if its evening"),S(),M(77,"li"),E(78,"Red nightlight in the toilet after 23:00"),S(),M(79,"li"),E(80,"Block the sunlight with screens"),S(),M(81,"li"),E(82,"Random light go on if you are on holiday"),S(),M(83,"li"),E(84,"Remote controllable (local VPN not via cloud)"),S(),M(85,"li"),E(86,"More secure, camera's and alarms"),S()(),te(87,"br")(88,"br"),M(89,"p"),E(90," Wifi is great, but cables are better. If you build a new home, put some more internet cables than needed. A smart home can uses internet cables for sensors, camera and of course computers. Cat 6 cables are easy the work with and fine speeds for most applications (if not longer than 30m or so). Maybe put up a better cat cable for your work- or kids game stations. "),te(91,"br")(92,"br"),E(93," For us this is still a process we need to rethink. For now we think one single local controller per room for a more decentralized system. Light switches to has a twisted-pair wire back to the room-controller. The light is on a hotel-switch so the button would always work as the digital version. "),S()(),te(94,"disqus",2)),2&t&&(Z("id",i.Section.installationWelcome),H(3),Z("id",i.Section.installationDrinkWater),H(8),Z("tag",i.Tag.warmWaterBuffer),H(3),Z("id",i.Section.installationHeating),H(5),Z("tag",i.Tag.warmWaterBuffer),H(3),Z("id",i.Section.installationElectricity),H(5),Z("tag",i.Tag.warmWaterBuffer),H(9),Z("id",i.Section.installationGreyWater),H(14),Z("id",i.Section.installationVentilation),H(13),Z("id",i.Section.installationSmartHome))},dependencies:[u6,zg]}),n})();const rc=class a8t{constructor(e){this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},fE=class c8t{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function T4(n,e){return n>e?1:n<e?-1:0}function pE(n,e,t){const i=n.length;if(n[0]<=e)return 0;if(e<=n[i-1])return i-1;{let s;if(t>0){for(s=1;s<i;++s)if(n[s]<e)return s-1}else if(t<0){for(s=1;s<i;++s)if(n[s]<=e)return s}else for(s=1;s<i;++s){if(n[s]==e)return s;if(n[s]<e)return"function"==typeof t?t(e,n[s-1],n[s])>0?s-1:s:n[s-1]-e<e-n[s]?s-1:s}return i-1}}function l8t(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function one(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let s=0;s<i;s++)n[n.length]=t[s]}function E4(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function t5(){return!0}function kg(){return!1}function A4(){}function n5(n){for(const e in n)delete n[e]}function s5(n){let e;for(e in n)return!1;return!e}const Rg=class d8t extends fE{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),s=i[e]||(i[e]=[]);s.includes(t)||s.push(t)}dispatchEvent(e){const t="string"==typeof e,i=t?e:e.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const r=t?new rc(e):e;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let c;i in o||(o[i]=0,a[i]=0),++o[i];for(let l=0,u=s.length;l<u;++l)if(c="handleEvent"in s[l]?s[l].handleEvent(r):s[l].call(this,r),!1===c||r.propagationStopped){c=!1;break}if(0==--o[i]){let l=a[i];for(delete a[i];l--;)this.removeEventListener(i,A4);delete o[i]}return c}disposeInternal(){this.listeners_&&n5(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,t){const i=this.listeners_&&this.listeners_[e];if(i){const s=i.indexOf(t);-1!==s&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[s]=A4,++this.pendingRemovals_[e]):(i.splice(s,1),0===i.length&&delete this.listeners_[e]))}}};function zn(n,e,t,i,s){if(i&&i!==n&&(t=t.bind(i)),s){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const r={target:n,type:e,listener:t};return n.addEventListener(e,t),r}function Ig(n,e,t,i){return zn(n,e,t,i,!0)}function Oi(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),n5(n))}const ane=class Hg extends Rg{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=zn(this,e[r],t);return s}return zn(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const s=e.length;i=new Array(s);for(let r=0;r<s;++r)i[r]=Ig(this,e[r],t)}else i=Ig(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)!function f8t(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Oi(n[e]);else Oi(n)}(i);else if(Array.isArray(e))for(let s=0,r=e.length;s<r;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}};function kn(){throw new Error("Unimplemented abstract method.")}let p8t=0;function Gn(n){return n.ol_uid||(n.ol_uid=String(++p8t))}class cne extends rc{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}const Wa=class m8t extends ane{constructor(e){super(),Gn(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new cne(i,e,t)),i="propertychange",this.hasListener(i)&&this.dispatchEvent(new cne(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const s=this.values_||(this.values_={});if(i)s[e]=t;else{const r=s[e];s[e]=t,r!==t&&this.notify(e,r)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){!e.values_||Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],s5(this.values_)&&(this.values_=null),t||this.notify(e,i)}}},g8t={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class v8t extends Error{constructor(e){const t=g8t[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}const lne=v8t;function Cn(n,e){if(!n)throw new lne(e)}class mE extends Wa{constructor(e){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?this.setGeometry(e):this.setProperties(e))}clone(){const e=new mE(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Oi(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=zn(e,"change",this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function _8t(n){if("function"==typeof n)return n;{let e;return Array.isArray(n)?e=n:(Cn("function"==typeof n.getZIndex,41),e=[n]),function(){return e}}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const y8t=mE;class Vg extends rc{constructor(e,t,i){super(e),this.element=t,this.index=i}}const ja=class b8t extends Wa{constructor(e,t){if(super(),this.unique_=!!(t=t||{}).unique,this.array_=e||[],this.unique_)for(let i=0,s=this.array_.length;i<s;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,s=t.length;i<s;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get("length")}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Vg("add",t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,s=t.length;i<s;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Vg("remove",t,e)),t}setAt(e,t){if(e>=this.getLength())return void this.insertAt(e,t);if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Vg("remove",s,e)),this.dispatchEvent(new Vg("add",t,e))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(e,t){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===e&&i!==t)throw new lne(58)}},Cl=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",x8t=Cl.includes("firefox"),M8t=(Cl.includes("safari")&&!Cl.includes("chrom")&&(Cl.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Cl)),Cl.includes("webkit")&&!Cl.includes("edge")),C8t=Cl.includes("macintosh"),hne=typeof devicePixelRatio<"u"?devicePixelRatio:1,gE=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,w8t=typeof Image<"u"&&Image.prototype.decode,dne=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function or(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function oc(n,e,t,i,s,r,o,a){const c=Math.sin(r),l=Math.cos(r);return n[0]=i*l,n[1]=s*c,n[2]=-i*c,n[3]=s*l,n[4]=o*i*l-a*i*c+e,n[5]=o*s*c+a*s*l+t,n}function Pg(n,e){const t=function E8t(n){return n[0]*n[3]-n[1]*n[2]}(e);Cn(0!==t,32);const i=e[0],s=e[1],r=e[2],o=e[3],a=e[4],c=e[5];return n[0]=o/t,n[1]=-s/t,n[2]=-r/t,n[3]=i/t,n[4]=(r*c-o*a)/t,n[5]=-(i*c-s*a)/t,n}let fne;function yE(n){const e="matrix("+n.join(", ")+")";if(gE)return e;const t=fne||(fne=document.createElement("div"));return t.style.transform=e,t.style.transform}new Array(6);function pne(n){const e=[1/0,1/0,-1/0,-1/0];for(let t=0,i=n.length;t<i;++t)wu(e,n[t]);return e}function bE(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function mne(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function gne(n,e,t){let i,s;return i=e<n[0]?n[0]-e:n[2]<e?e-n[2]:0,s=t<n[1]?n[1]-t:n[3]<t?t-n[3]:0,i*i+s*s}function Og(n,e){return vne(n,e[0],e[1])}function Mu(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function vne(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function xE(n,e){const o=e[0],a=e[1];let c=0;return o<n[0]?c|=16:o>n[2]&&(c|=4),a<n[1]?c|=8:a>n[3]&&(c|=2),0===c&&(c=1),c}function $a(n,e,t,i,s){return s?(s[0]=n,s[1]=e,s[2]=t,s[3]=i,s):[n,e,t,i]}function Cu(n){return $a(1/0,1/0,-1/0,-1/0,n)}function o5(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function wu(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function yne(n,e,t,i,s){for(;t<i;t+=s)R8t(n,e[t],e[t+1]);return n}function R8t(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function bne(n,e){let t;return t=e(Fg(n)),!!(t||(t=e(Bg(n)),t)||(t=e(Ug(n)),t)||(t=e(D4(n)),t))&&t}function Ng(n){let e=0;return wE(n)||(e=Ci(n)*aa(n)),e}function Fg(n){return[n[0],n[1]]}function Bg(n){return[n[2],n[1]]}function Su(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function I8t(n,e){let t;return"bottom-left"===e?t=Fg(n):"bottom-right"===e?t=Bg(n):"top-left"===e?t=D4(n):"top-right"===e?t=Ug(n):Cn(!1,13),t}function ME(n,e,t,i,s){const[r,o,a,c,l,u,h,d]=CE(n,e,t,i);return $a(Math.min(r,a,l,h),Math.min(o,c,u,d),Math.max(r,a,l,h),Math.max(o,c,u,d),s)}function CE(n,e,t,i){const s=e*i[0]/2,r=e*i[1]/2,o=Math.cos(t),a=Math.sin(t),c=s*o,l=s*a,u=r*o,h=r*a,d=n[0],f=n[1];return[d-c+h,f-l-u,d-c-h,f-l+u,d+c-h,f+l+u,d+c+h,f+l-u,d-c+h,f-l-u]}function aa(n){return n[3]-n[1]}function Tu(n,e,t){const i=t||[1/0,1/0,-1/0,-1/0];return mo(n,e)?(i[0]=n[0]>e[0]?n[0]:e[0],i[1]=n[1]>e[1]?n[1]:e[1],i[2]=n[2]<e[2]?n[2]:e[2],i[3]=n[3]<e[3]?n[3]:e[3]):Cu(i),i}function D4(n){return[n[0],n[3]]}function Ug(n){return[n[2],n[3]]}function Ci(n){return n[2]-n[0]}function mo(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function wE(n){return n[2]<n[0]||n[3]<n[1]}function xne(n,e){const t=e.getExtent(),i=Su(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const s=Ci(t),o=Math.floor((i[0]-t[0])/s)*s;n[0]-=o,n[2]-=o}return n}function Vs(n,e,t){return Math.min(Math.max(n,e),t)}function N8t(n,e,t,i,s,r){const o=s-t,a=r-i;if(0!==o||0!==a){const c=((n-t)*o+(e-i)*a)/(o*o+a*a);c>1?(t=s,i=r):c>0&&(t+=o*c,i+=a*c)}return Eu(n,e,t,i)}function Eu(n,e,t,i){const s=t-n,r=i-e;return s*s+r*r}function Gg(n){return n*Math.PI/180}function Au(n,e){const t=n%e;return t*e<0?t+e:t}function L4(n,e,t){return n+t*(e-n)}function SE(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Wg(n,e){return Math.floor(SE(n,e))}function jg(n,e){return Math.ceil(SE(n,e))}const Mne=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Cne=/^([a-z]*)$|^hsla?\(.*\)$/i;function wne(n){return"string"==typeof n?n:Ene(n)}const B8t=function(){const e={};let t=0;return function(i){let s;if(e.hasOwnProperty(i))s=e[i];else{if(t>=1024){let r=0;for(const o in e)0==(3&r++)&&(delete e[o],--t)}s=function U8t(n){let e,t,i,s,r;if(Cne.exec(n)&&(n=function Sne(n){const e=document.createElement("div");if(e.style.color=n,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}(n)),Mne.exec(n)){const o=n.length-1;let a;a=o<=4?1:2;const c=4===o||8===o;e=parseInt(n.substr(1+0*a,a),16),t=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),s=c?parseInt(n.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,t=(t<<4)+t,i=(i<<4)+i,c&&(s=(s<<4)+s)),r=[e,t,i,s/255]}else n.startsWith("rgba(")?(r=n.slice(5,-1).split(",").map(Number),Tne(r)):n.startsWith("rgb(")?(r=n.slice(4,-1).split(",").map(Number),r.push(1),Tne(r)):Cn(!1,14);return r}(i),e[i]=s,++t}return s}}();function $g(n){return Array.isArray(n)?n:B8t(n)}function Tne(n){return n[0]=Vs(n[0]+.5|0,0,255),n[1]=Vs(n[1]+.5|0,0,255),n[2]=Vs(n[2]+.5|0,0,255),n[3]=Vs(n[3],0,1),n}function Ene(n){let e=n[0];e!=(0|e)&&(e=e+.5|0);let t=n[1];t!=(0|t)&&(t=t+.5|0);let i=n[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+t+","+i+","+(void 0===n[3]?1:Math.round(100*n[3])/100)+")"}function Ane(n,e,t){return e+":"+n+":"+(t?wne(t):"null")}const qg=new class G8t{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];0==(3&e++)&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const s=Ane(e,t,i);return s in this.cache_?this.cache_[s]:null}set(e,t,i,s){const r=Ane(e,t,i);this.cache_[r]=s,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}},Dne=class W8t extends Wa{constructor(e){super(),this.background_=e.background;const t=Object.assign({},e);"object"==typeof e.properties&&(delete t.properties,Object.assign(t,e.properties)),t.opacity=void 0!==e.opacity?e.opacity:1,Cn("number"==typeof t.opacity,64),t.visible=void 0===e.visible||e.visible,t.zIndex=e.zIndex,t.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,t.minResolution=void 0!==e.minResolution?e.minResolution:0,t.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,t.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,this.className_=void 0!==t.className?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:void 0===e||e},i=this.getZIndex();return t.opacity=Vs(Math.round(100*this.getOpacity())/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=void 0!==i||t.managed?i:1/0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return kn()}getLayerStatesArray(e){return kn()}getExtent(){return this.get("extent")}getMaxResolution(){return this.get("maxResolution")}getMinResolution(){return this.get("minResolution")}getMinZoom(){return this.get("minZoom")}getMaxZoom(){return this.get("maxZoom")}getOpacity(){return this.get("opacity")}getSourceState(){return kn()}getVisible(){return this.get("visible")}getZIndex(){return this.get("zIndex")}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set("extent",e)}setMaxResolution(e){this.set("maxResolution",e)}setMinResolution(e){this.set("minResolution",e)}setMaxZoom(e){this.set("maxZoom",e)}setMinZoom(e){this.set("minZoom",e)}setOpacity(e){Cn("number"==typeof e,64),this.set("opacity",e)}setVisible(e){this.set("visible",e)}setZIndex(e){this.set("zIndex",e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}};function TE(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}const Yg=class j8t extends Dne{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener("source",this.handleSourcePropertyChange_),this.setSource(e.source?e.source:null)}getLayersArray(e){return(e=e||[]).push(this),e}getLayerStatesArray(e){return(e=e||[]).push(this.getLayerState()),e}getSource(){return this.get("source")||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Oi(this.sourceChangeKey_),this.sourceChangeKey_=null);const e=this.getSource();e&&(this.sourceChangeKey_=zn(e,"change",this.handleSourceChange_,this)),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise(t=>t([]))}getData(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}render(e,t){const i=this.getRenderer();if(i.prepareFrame(e))return this.rendered=!0,i.renderFrame(e,t)}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set("map",e)}getMapInternal(){return this.get("map")}setMap(e){this.mapPrecomposeKey_&&(Oi(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Oi(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=zn(e,"precompose",function(t){const s=t.frameState.layerStatesArray,r=this.getLayerState(!1);Cn(!s.some(function(o){return o.layer===r.layer}),67),s.push(r)},this),this.mapRenderKey_=zn(this,"change",e.render,e),this.changed())}setSource(e){this.set("source",e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function Xg(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function EE(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[1]*t+n[0]*i;return n[0]=n[0]*t-n[1]*i,n[1]=r,n}function kne(n,e){if(e.canWrapX()){const t=Ci(e.getExtent()),i=function K8t(n,e,t){const i=e.getExtent();let s=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||Ci(i),s=Math.floor((n[0]-i[0])/t)),s}(n,e,t);i&&(n[0]-=i*t)}return n}function J8t(n,e){qg.expire()}const e5t=class Q8t extends fE{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){kn()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;oc(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),Pg(s,i)}forEachFeatureAtCoordinate(e,t,i,s,r,o,a,c){let l;const u=t.viewState;function h(b,x,w,L){return r.call(o,x,b?w:null,L)}const d=u.projection,f=kne(e.slice(),d),p=[[0,0]];if(d.canWrapX()&&s){const x=Ci(d.getExtent());p.push([-x,0],[x,0])}const m=t.layerStatesArray,g=m.length,v=[],_=[];for(let b=0;b<p.length;b++)for(let x=g-1;x>=0;--x){const w=m[x],L=w.layer;if(L.hasRenderer()&&TE(w,u)&&a.call(c,L)){const C=L.getRenderer(),D=L.getSource();if(C&&D){const R=D.getWrapX()?f:e,Y=h.bind(null,w.managed);_[0]=R[0]+p[b][0],_[1]=R[1]+p[b][1],l=C.forEachFeatureAtCoordinate(_,t,i,Y,v)}if(l)return l}}if(0===v.length)return;const y=1/v.length;return v.forEach((b,x)=>b.distanceSq+=x*y),v.sort((b,x)=>b.distanceSq-x.distanceSq),v.some(b=>l=b.callback(b.feature,b.layer,b.geometry)),l}hasFeatureAtCoordinate(e,t,i,s,r,o){return void 0!==this.forEachFeatureAtCoordinate(e,t,i,s,t5,this,r,o)}getMap(){return this.map_}renderFrame(e){kn()}scheduleExpireIconCache(e){qg.canExpireCache()&&e.postRenderFunctions.push(J8t)}},Rne=class t5t extends rc{constructor(e,t,i,s){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=s}},Zg="ol-hidden",Kg="ol-unselectable",AE="ol-control",Ine="ol-collapsed",n5t=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Hne=["style","variant","weight","size","lineHeight","family"],Vne=function(n){const e=n.match(n5t);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,s=Hne.length;i<s;++i){const r=e[i+1];void 0!==r&&(t[Hne[i]]=r)}return t.families=t.family.split(/,\s?/),t};function qo(n,e,t,i){let s;return s=t&&t.length?t.shift():gE?new OffscreenCanvas(n||300,e||300):document.createElement("canvas"),n&&(s.width=n),e&&(s.height=e),s.getContext("2d",i)}function Pne(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function One(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function DE(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}const Nne="10px sans-serif",ac="#000",Qg="round",a5=[],Du="round",u5="#000",h5="center",Jg="middle",z4=[0,0,0,0],cc=new Wa;let LE,Lu=null;const zE={},r5t=function(){const e="32px ",t=["monospace","serif"],i=t.length,s="wmytzilWMYTZIL@#/&?$%10\uf013";let r,o;function a(l,u,h){let d=!0;for(let f=0;f<i;++f){const p=t[f];if(o=ev(l+" "+u+" "+e+p,s),h!=p){const m=ev(l+" "+u+" "+e+h+","+p,s);d=d&&m!=o}}return!!d}function c(){let l=!0;const u=cc.getKeys();for(let h=0,d=u.length;h<d;++h){const f=u[h];cc.get(f)<100&&(a.apply(this,f.split("\n"))?(n5(zE),Lu=null,LE=void 0,cc.set(f,100)):(cc.set(f,cc.get(f)+1,!0),l=!1))}l&&(clearInterval(r),r=void 0)}return function(l){const u=Vne(l);if(!u)return;const h=u.families;for(let d=0,f=h.length;d<f;++d){const p=h[d],m=u.style+"\n"+u.weight+"\n"+p;void 0===cc.get(m)&&(cc.set(m,100,!0),a(u.style,u.weight,p)||(cc.set(m,0,!0),void 0===r&&(r=setInterval(c,32))))}}}(),o5t=function(){let n;return function(e){let t=zE[e];if(null==t){if(gE){const i=Vne(e),s=Fne(e,"\u017dg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);zE[e]=t}return t}}();function Fne(n,e){return Lu||(Lu=qo(1,1)),n!=LE&&(Lu.font=n,LE=Lu.font),Lu.measureText(e)}function ev(n,e){return Fne(n,e).width}function Bne(n,e,t){if(e in t)return t[e];const i=e.split("\n").reduce((s,r)=>Math.max(s,ev(n,r)),0);return t[e]=i,i}const h5t=class u5t extends e5t{constructor(e){super(e),this.fontChangeListenerKey_=zn(cc,"propertychange",e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Kg+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const s=new Rne(e,void 0,t);i.dispatchEvent(s)}}disposeInternal(){Oi(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent("precompose",e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=e.viewState;this.children_.length=0;const s=[];let r=null;for(let o=0,a=t.length;o<a;++o){const c=t[o];e.layerIndex=o;const l=c.layer,u=l.getSourceState();if(!TE(c,i)||"ready"!=u&&"undefined"!=u){l.unrender();continue}const h=l.render(e,r);!h||(h!==r&&(this.children_.push(h),r=h),"getDeclutter"in l&&s.push(l))}for(let o=s.length-1;o>=0;--o)s[o].renderDeclutter(e);(function s5t(n,e){const t=n.childNodes;for(let i=0;;++i){const s=t[i],r=e[i];if(!s&&!r)break;if(s!==r){if(!s){n.appendChild(r);continue}if(!r){n.removeChild(s),--i;continue}n.insertBefore(r,s)}}})(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}};class Sl extends rc{constructor(e,t){super(e),this.layer=t}}class RE extends Dne{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),i?Array.isArray(i)?i=new ja(i.slice(),{unique:!0}):Cn("function"==typeof i.getArray,43):i=new ja(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Oi),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(zn(e,"add",this.handleLayersAdd_,this),zn(e,"remove",this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Oi);n5(this.listenerKeys_);const t=e.getArray();for(let i=0,s=t.length;i<s;i++){const r=t[i];this.registerLayerListeners_(r),this.dispatchEvent(new Sl("addlayer",r))}this.changed()}registerLayerListeners_(e){const t=[zn(e,"propertychange",this.handleLayerChange_,this),zn(e,"change",this.handleLayerChange_,this)];e instanceof RE&&t.push(zn(e,"addlayer",this.handleLayerGroupAdd_,this),zn(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Gn(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Sl("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Sl("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Sl("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Gn(t);this.listenerKeys_[i].forEach(Oi),delete this.listenerKeys_[i],this.dispatchEvent(new Sl("removelayer",t)),this.changed()}getLayers(){return this.get("layers")}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let s=0,r=i.length;s<r;++s)this.dispatchEvent(new Sl("removelayer",i[s]))}this.set("layers",e)}getLayersArray(e){return e=void 0!==e?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=void 0!==e?e:[],i=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const s=this.getLayerState();let r=s.zIndex;!e&&void 0===s.zIndex&&(r=0);for(let o=i,a=t.length;o<a;o++){const c=t[o];c.opacity*=s.opacity,c.visible=c.visible&&s.visible,c.maxResolution=Math.min(c.maxResolution,s.maxResolution),c.minResolution=Math.max(c.minResolution,s.minResolution),c.minZoom=Math.max(c.minZoom,s.minZoom),c.maxZoom=Math.min(c.maxZoom,s.maxZoom),void 0!==s.extent&&(c.extent=void 0!==c.extent?Tu(c.extent,s.extent):s.extent),void 0===c.zIndex&&(c.zIndex=r)}return t}getSourceState(){return"ready"}}const tv=RE,zu=class d5t extends rc{constructor(e,t,i){super(e),this.map=t,this.frameState=void 0!==i?i:null}},Tl=class f5t extends zu{constructor(e,t,i,s,r,o){super(e,t,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==s&&s,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},us={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},m5t=class p5t extends Rg{constructor(e,t){super(e),this.map_=e,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===t?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=zn(i,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=zn(i,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener("touchmove",this.boundHandleTouchMove_,!!dne&&{passive:!1})}emulateClick_(e){let t=new Tl(us.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Tl(us.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const i=new Tl(us.SINGLECLICK,this.map_,e);this.dispatchEvent(i)}.bind(this),250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==us.POINTERUP||t.type==us.POINTERCANCEL){delete this.trackedTouches_[i];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==us.POINTERDOWN||t.type==us.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Tl(us.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(Oi),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return 0===e.button}handlePointerDown_(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);const t=new Tl(us.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.down_={};for(const i in e){const s=e[i];this.down_[i]="function"==typeof s?A4:s}if(0===this.dragListenerKeys_.length){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(zn(i,us.POINTERMOVE,this.handlePointerMove_,this),zn(i,us.POINTERUP,this.handlePointerUp_,this),zn(this.element_,us.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(zn(this.element_.getRootNode(),us.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Tl(us.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new Tl(us.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&("boolean"!=typeof e.cancelable||!0===e.cancelable)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Oi(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Oi(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Oi),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},nv=1/0,ca={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},k4={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},Une=class C5t{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||k4[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}},f5=6378137,ku=Math.PI*f5,w5t=[-ku,-ku,ku,ku],S5t=[-180,-85,180,85],iv=f5*Math.log(Math.tan(Math.PI/2));class Ru extends Une{constructor(e){super({code:e,units:"m",extent:w5t,global:!0,worldExtent:S5t,getPointResolution:function(t,i){return t/Math.cosh(i[1]/f5)}})}}const Gne=[new Ru("EPSG:3857"),new Ru("EPSG:102100"),new Ru("EPSG:102113"),new Ru("EPSG:900913"),new Ru("http://www.opengis.net/def/crs/EPSG/0/3857"),new Ru("http://www.opengis.net/gml/srs/epsg.xml#3857")];function T5t(n,e,t){const i=n.length;t=t>1?t:2,void 0===e&&(e=t>2?n.slice():new Array(i));for(let s=0;s<i;s+=t){e[s]=ku*n[s]/180;let r=f5*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));r>iv?r=iv:r<-iv&&(r=-iv),e[s+1]=r}return e}function E5t(n,e,t){const i=n.length;t=t>1?t:2,void 0===e&&(e=t>2?n.slice():new Array(i));for(let s=0;s<i;s+=t)e[s]=180*n[s]/ku,e[s+1]=360*Math.atan(Math.exp(n[s+1]/f5))/Math.PI-90;return e}const Wne=[-180,-90,180,90],D5t=6378137*Math.PI/180;class R4 extends Une{constructor(e,t){super({code:e,units:"degrees",extent:Wne,axisOrientation:t,global:!0,metersPerUnit:D5t,worldExtent:Wne})}}const jne=[new R4("CRS:84"),new R4("EPSG:4326","neu"),new R4("urn:ogc:def:crs:OGC:1.3:CRS84"),new R4("urn:ogc:def:crs:OGC:2:84"),new R4("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new R4("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new R4("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let sv={},la={};function rv(n,e,t){const i=n.getCode(),s=e.getCode();i in la||(la[i]={}),la[i][s]=t}function VE(n,e,t){t=t||6371008.8;const i=Gg(n[1]),s=Gg(e[1]),r=(s-i)/2,o=Gg(e[0]-n[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}let OE=!0;function NE(n,e,t){if(void 0!==e)for(let i=0,s=n.length;i<s;++i)e[i]=n[i];else e=n.slice();return e}function qne(n,e,t){if(void 0!==e&&n!==e){for(let i=0,s=n.length;i<s;++i)e[i]=n[i];n=e}return n}function H5t(n){(function z5t(n,e){sv[n]=e})(n.getCode(),n),rv(n,n,NE)}function Lr(n){return"string"==typeof n?function L5t(n){return sv[n]||sv[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(n):n||null}function Yne(n,e,t,i){let s;const r=(n=Lr(n)).getPointResolutionFunc();if(r){if(s=r(e,t),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(s=s*o/k4[i])}}else{const o=n.getUnits();if("degrees"==o&&!i||"degrees"==i)s=e;else{const a=p5(n,Lr("EPSG:4326"));if(a===qne&&"degrees"!==o)s=e*n.getMetersPerUnit();else{let l=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];l=a(l,l,2),s=(VE(l.slice(0,2),l.slice(2,4))+VE(l.slice(4,6),l.slice(6,8)))/2}const c=i?k4[i]:n.getMetersPerUnit();void 0!==c&&(s/=c)}}return s}function Xne(n){(function V5t(n){n.forEach(H5t)})(n),n.forEach(function(e){n.forEach(function(t){e!==t&&rv(e,t,NE)})})}function FE(n,e){return n?"string"==typeof n?Lr(n):n:Lr(e)}function Iu(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||p5(n,e)===NE)&&t}function p5(n,e){let s=function k5t(n,e){let t;return n in la&&e in la[n]&&(t=la[n][e]),t}(n.getCode(),e.getCode());return s||(s=qne),s}function m5(n,e){return p5(Lr(n),Lr(e))}function g5(n,e,t){return m5(e,t)(n,void 0,n.length)}let Zr=null;function Qne(){return Zr}function BE(n,e){return n}function lc(n,e){return OE&&!Xg(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(OE=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function UE(n,e){return n}function I4(n,e){return n}function N5t(n,e){return n}function Jne(n,e,t){return function(i,s,r,o,a){if(!i)return;if(!s&&!e)return i;const c=e?0:r[0]*s,l=e?0:r[1]*s,u=a?a[0]:0,h=a?a[1]:0;let d=n[0]+c/2+u,f=n[2]-c/2+u,p=n[1]+l/2+h,m=n[3]-l/2+h;d>f&&(d=(f+d)/2,f=d),p>m&&(p=(m+p)/2,m=p);let g=Vs(i[0],d,f),v=Vs(i[1],p,m);if(o&&t&&s){const _=30*s;g+=-_*Math.log(1+Math.max(0,d-i[0])/_)+_*Math.log(1+Math.max(0,i[0]-f)/_),v+=-_*Math.log(1+Math.max(0,p-i[1])/_)+_*Math.log(1+Math.max(0,i[1]-m)/_)}return[g,v]}}function B5t(n){return n}function GE(n,e,t,i){const s=Ci(e)/t[0],r=aa(e)/t[1];return i?Math.min(n,Math.max(s,r)):Math.min(n,Math.min(s,r))}function WE(n,e,t){let i=Math.min(n,e);return i*=Math.log(1+50*Math.max(0,n/e-1))/50+1,t&&(i=Math.max(i,t),i/=Math.log(1+50*Math.max(0,t/n-1))/50+1),Vs(i,t/2,2*e)}function eie(n,e,t,i,s){return t=void 0===t||t,function(r,o,a,c){if(void 0!==r){const l=i?GE(n,i,a,s):n;return t&&c?WE(r,l,e):Vs(r,e,l)}}}function jE(n){if(void 0!==n)return 0}function tie(n){if(void 0!==n)return n}function nie(n){return Math.pow(n,3)}function Hu(n){return 1-nie(1-n)}function $E(n){return 3*n*n-2*n*n*n}function $5t(n){return n}function H4(n,e,t,i,s,r){r=r||[];let o=0;for(let a=e;a<t;a+=i){const c=n[a],l=n[a+1];r[o++]=s[0]*c+s[2]*l+s[4],r[o++]=s[1]*c+s[3]*l+s[5]}return r&&r.length!=o&&(r.length=o),r}function iie(n,e,t,i,s,r,o){o=o||[];const a=Math.cos(s),c=Math.sin(s),l=r[0],u=r[1];let h=0;for(let d=e;d<t;d+=i){const f=n[d]-l,p=n[d+1]-u;o[h++]=l+f*a-p*c,o[h++]=u+f*c+p*a;for(let m=d+2;m<d+i;++m)o[h++]=n[m]}return o&&o.length!=h&&(o.length=h),o}!function F5t(){Xne(Gne),Xne(jne),function P5t(n,e,t,i){n.forEach(function(s){e.forEach(function(r){rv(s,r,t),rv(r,s,i)})})}(jne,Gne,T5t,E5t)}();const sie=[1,0,0,1,0,0],Z5t=class X5t extends Wa{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function h8t(n){let t,i,s,e=!1;return function(){const r=Array.prototype.slice.call(arguments);return(!e||this!==s||!E4(r,i))&&(e=!0,s=this,i=r,t=n.apply(this,arguments)),t}}(function(e,t,i){if(!i)return this.getSimplifiedGeometry(t);const s=this.clone();return s.applyTransform(i),s.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return kn()}closestPointXY(e,t,i,s){return kn()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return this.closestPointXY(e[0],e[1],t=t||[NaN,NaN],1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return kn()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Cu(t),this.extentRevision_=this.getRevision()}return function H8t(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}(this.extent_,e)}rotate(e,t){kn()}scale(e,t,i){kn()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return kn()}getType(){return kn()}applyTransform(e){kn()}intersectsExtent(e){return kn()}translate(e,t){kn()}transform(e,t){const i=Lr(e),s="tile-pixels"==i.getUnits()?function(r,o,a){const c=i.getExtent(),l=i.getWorldExtent(),u=aa(l)/aa(c);return oc(sie,l[0],l[3],u,-u,0,0,0),H4(r,0,r.length,a,sie,o),m5(i,t)(r,o,a)}:m5(i,t);return this.applyTransform(s),this}};function rie(n){let e;return"XY"==n?e=2:"XYZ"==n||"XYM"==n?e=3:"XYZM"==n&&(e=4),e}const qE=class K5t extends Z5t{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return function L8t(n,e,t,i,s){return yne(Cu(s),n,e,t,i)}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return kn()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=rie(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){kn()}setLayout(e,t,i){let s;if(e)s=rie(e);else{for(let r=0;r<i;++r){if(0===t.length)return this.layout="XY",void(this.stride=2);t=t[0]}s=t.length,e=function Q5t(n){let e;return 2==n?e="XY":3==n?e="XYZ":4==n&&(e="XYZM"),e}(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const s=this.getStride();iie(i,0,i.length,s,e,t,i),this.changed()}}scale(e,t,i){void 0===t&&(t=e),i||(i=Su(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();(function q5t(n,e,t,i,s,r,o,a){a=a||[];const c=o[0],l=o[1];let u=0;for(let h=e;h<t;h+=i){const f=n[h+1]-l;a[u++]=c+s*(n[h]-c),a[u++]=l+r*f;for(let p=h+2;p<h+i;++p)a[u++]=n[p]}a&&a.length!=u&&(a.length=u)})(s,0,s.length,r,e,t,i,s),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const s=this.getStride();(function Y5t(n,e,t,i,s,r,o){o=o||[];let a=0;for(let c=e;c<t;c+=i){o[a++]=n[c]+s,o[a++]=n[c+1]+r;for(let l=c+2;l<c+i;++l)o[a++]=n[l]}o&&o.length!=a&&(o.length=a)})(i,0,i.length,s,e,t,i),this.changed()}}};function oie(n,e,t,i,s,r,o){const a=n[e],c=n[e+1],l=n[t]-a,u=n[t+1]-c;let h;if(0===l&&0===u)h=e;else{const d=((s-a)*l+(r-c)*u)/(l*l+u*u);if(d>1)h=t;else{if(d>0){for(let f=0;f<i;++f)o[f]=L4(n[e+f],n[t+f],d);return void(o.length=i)}h=e}}for(let d=0;d<i;++d)o[d]=n[h+d];o.length=i}function aie(n,e,t,i,s){let r=n[e],o=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],c=n[e+1],l=Eu(r,o,a,c);l>s&&(s=l),r=a,o=c}return s}function lie(n,e,t,i,s,r,o,a,c,l,u){if(e==t)return l;let h,d;if(0===s){if(d=Eu(o,a,n[e],n[e+1]),d<l){for(h=0;h<i;++h)c[h]=n[e+h];return c.length=i,d}return l}u=u||[NaN,NaN];let f=e+i;for(;f<t;)if(oie(n,f-i,f,i,o,a,u),d=Eu(o,a,u[0],u[1]),d<l){for(l=d,h=0;h<i;++h)c[h]=u[h];c.length=i,f+=i}else f+=i*Math.max((Math.sqrt(d)-Math.sqrt(l))/s|0,1);if(r&&(oie(n,t-i,e,i,o,a,u),d=Eu(o,a,u[0],u[1]),d<l)){for(l=d,h=0;h<i;++h)c[h]=u[h];c.length=i}return l}function hie(n,e,t,i){for(let s=0,r=t.length;s<r;++s){const o=t[s];for(let a=0;a<i;++a)n[e++]=o[a]}return e}function V4(n,e){return e*Math.round(n/e)}function ift(n,e,t,i,s,r,o){if(e==t)return o;let l,u,a=V4(n[e],s),c=V4(n[e+1],s);e+=i,r[o++]=a,r[o++]=c;do{if(l=V4(n[e],s),u=V4(n[e+1],s),(e+=i)==t)return r[o++]=l,r[o++]=u,o}while(l==a&&u==c);for(;e<t;){const h=V4(n[e],s),d=V4(n[e+1],s);if(e+=i,h==l&&d==u)continue;const f=l-a,p=u-c,m=h-a,g=d-c;f*g==p*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(p<0&&g<p||p==g||p>0&&g>p)?(l=h,u=d):(r[o++]=l,r[o++]=u,a=l,c=u,l=h,u=d)}return r[o++]=l,r[o++]=u,o}function Vu(n,e,t,i,s){s=void 0!==s?s:[];let r=0;for(let o=e;o<t;o+=i)s[r++]=n.slice(o,o+i);return s.length=r,s}function cv(n,e,t,i,s){s=void 0!==s?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const c=t[o];s[r++]=Vu(n,e,c,i,s[r]),e=c}return s.length=r,s}function pie(n,e,t,i,s){s=void 0!==s?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const c=t[o];s[r++]=1===c.length&&c[0]===e?[]:cv(n,e,c,i,s[r]),e=c[c.length-1]}return s.length=r,s}function mie(n,e,t,i){let s=0,r=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];s+=o*a-r*c,r=a,o=c}return s/2}class lv extends qE{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}clone(){return new lv(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,s){return s<gne(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(aie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),lie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,s))}getArea(){return mie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Vu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=function YE(n,e,t,i,s,r,o){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)r[o++]=n[e],r[o++]=n[e+1];return o}const c=new Array(a);c[0]=1,c[a-1]=1;const l=[e,t-i];let u=0;for(;l.length>0;){const h=l.pop(),d=l.pop();let f=0;const p=n[d],m=n[d+1],g=n[h],v=n[h+1];for(let _=d+i;_<h;_+=i){const x=N8t(n[_],n[_+1],p,m,g,v);x>f&&(u=_,f=x)}f>s&&(c[(u-e)/i]=1,d+i<u&&l.push(d,u),u+i<h&&l.push(u,h))}for(let h=0;h<a;++h)c[h]&&(r[o++]=n[e+h*i],r[o++]=n[e+h*i+1]);return o}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new lv(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=hie(this.flatCoordinates,0,e,this.stride),this.changed()}}const vie=lv;class XE extends qE{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new XE(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,s){const r=this.flatCoordinates,o=Eu(e,t,r[0],r[1]);if(o<s){const a=this.stride;for(let c=0;c<a;++c)i[c]=r[c];return i.length=a,o}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return function D8t(n,e){const t=n[0],i=n[1];return $a(t,i,t,i,e)}(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return vne(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function eft(n,e,t,i){for(let s=0,r=t.length;s<r;++s)n[e++]=t[s];return e}(this.flatCoordinates,0,e),this.changed()}}const _ie=XE;function sft(n,e,t,i,s){return!bne(s,function(o){return!P4(n,e,t,i,o[0],o[1])})}function P4(n,e,t,i,s,r){let o=0,a=n[t-i],c=n[t-i+1];for(;e<t;e+=i){const l=n[e],u=n[e+1];c<=r?u>r&&(l-a)*(r-c)-(s-a)*(u-c)>0&&o++:u<=r&&(l-a)*(r-c)-(s-a)*(u-c)<0&&o--,a=l,c=u}return 0!==o}function ZE(n,e,t,i,s,r){if(0===t.length||!P4(n,e,t[0],i,s,r))return!1;for(let o=1,a=t.length;o<a;++o)if(P4(n,t[o-1],t[o],i,s,r))return!1;return!0}function KE(n,e,t,i,s){const r=yne([1/0,1/0,-1/0,-1/0],n,e,t,i);return!!mo(s,r)&&(!!(Mu(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3])||function rft(n,e,t,i,s){let r;for(e+=i;e<t;e+=i)if(r=s(n.slice(e-i,e),n.slice(e,e+i)),r)return r;return!1}(n,e,t,i,function(o,a){return function V8t(n,e,t){let i=!1;const s=xE(n,e),r=xE(n,t);if(1===s||1===r)i=!0;else{const o=n[0],a=n[1],c=n[2],l=n[3],d=t[0],f=t[1],p=(f-e[1])/(d-e[0]);let m,g;!!(2&r)&&!(2&s)&&(m=d-(f-l)/p,i=m>=o&&m<=c),!i&&!!(4&r)&&!(4&s)&&(g=f-(d-c)*p,i=g>=a&&g<=l),!i&&!!(8&r)&&!(8&s)&&(m=d-(f-a)/p,i=m>=o&&m<=c),!i&&16&r&&!(16&s)&&(g=f-(d-o)*p,i=g>=a&&g<=l)}return i}(s,o,a)}))}function bie(n,e,t,i,s){return!!(KE(n,e,t,i,s)||P4(n,e,t,i,s[0],s[1])||P4(n,e,t,i,s[0],s[3])||P4(n,e,t,i,s[2],s[1])||P4(n,e,t,i,s[2],s[3]))}function oft(n,e,t,i){for(;e<t-i;){for(let s=0;s<i;++s){const r=n[e+s];n[e+s]=n[t-i+s],n[t-i+s]=r}e+=i,t-=i}}function QE(n,e,t,i){let s=0,r=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];s+=(a-r)*(c+o),r=a,o=c}return 0===s?void 0:s>0}function JE(n,e,t,i,s){s=void 0!==s&&s;for(let r=0,o=t.length;r<o;++r){const a=t[r],c=QE(n,e,a,i);(0===r?s&&c||!s&&!c:s&&!c||!s&&c)&&oft(n,e,a,i),e=a}return e}class O4 extends qE{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==t&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?one(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new O4(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,s){return s<gne(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function cie(n,e,t,i,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];s=aie(n,e,a,i,s),e=a}return s}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function uie(n,e,t,i,s,r,o,a,c,l,u){u=u||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];l=lie(n,e,f,i,s,r,o,a,c,l,u),e=f}return l}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,s))}containsXY(e,t){return ZE(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return function gie(n,e,t,i){let s=0;for(let r=0,o=t.length;r<o;++r){const a=t[r];s+=mie(n,e,a,i),e=a}return s}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),JE(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,cv(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Su(this.getExtent());this.flatInteriorPoint_=function yie(n,e,t,i,s,r,o){let a,c,l,u,h,d,f;const p=s[r+1],m=[];for(let _=0,y=t.length;_<y;++_){const b=t[_];for(u=n[b-i],d=n[b-i+1],a=e;a<b;a+=i)h=n[a],f=n[a+1],(p<=d&&f<=p||d<=p&&p<=f)&&(l=(p-d)/(f-d)*(h-u)+u,m.push(l)),u=h,d=f}let g=NaN,v=-1/0;for(m.sort(T4),u=m[0],a=1,c=m.length;a<c;++a){h=m[a];const _=Math.abs(h-u);_>v&&(l=(u+h)/2,ZE(n,e,t,i,l,p)&&(g=l,v=_)),u=h}return isNaN(g)&&(g=s[r]),o?(o.push(g,p,v),o):[g,p,v]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new _ie(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new vie(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const c=i[o],l=new vie(t.slice(r,c),e);s.push(l),r=c}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;!function Mie(n,e,t,i,s){s=void 0!==s&&s;for(let r=0,o=t.length;r<o;++r){const a=t[r],c=QE(n,e,a,i);if(0===r){if(s&&c||!s&&!c)return!1}else if(s&&!c||!s&&c)return!1;e=a}return!0}(e,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=JE(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=e,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=function fie(n,e,t,i,s,r,o,a){for(let c=0,l=t.length;c<l;++c){const u=t[c];o=ift(n,e,u,i,s,r,o),a.push(o),e=u}return o}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new O4(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return function xie(n,e,t,i,s){if(!bie(n,e,t[0],i,s))return!1;if(1===t.length)return!0;for(let r=1,o=t.length;r<o;++r)if(sft(n,t[r-1],t[r],i,s)&&!KE(n,t[r-1],t[r],i,s))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=function die(n,e,t,i,s){s=s||[];let r=0;for(let o=0,a=t.length;o<a;++o){const c=hie(n,e,t[o],i);s[r++]=c,e=c}return s.length=r,s}(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const aft=O4;function Cie(n){const e=n[0],t=n[1],i=n[2],s=n[3],r=[e,t,e,s,i,s,i,t,e,t];return new O4(r,"XY",[r.length])}function uv(n,e){setTimeout(function(){n(e)},0)}function fft(n){return!(n.sourceCenter&&n.targetCenter&&!Xg(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function tA(n,e,t,i,s){const r=Math.cos(-s);let o=Math.sin(-s),a=n[0]*r-n[1]*o,c=n[1]*r+n[0]*o;return a+=(e[0]/2-t[0])*i,c+=(t[1]-e[1]/2)*i,o=-o,[a*r-c*o,c*r+a*o]}const Al=class lft extends Wa{constructor(e){super(),e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.projection_=FE(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,e.projection&&function $ne(n){OE=!(void 0===n||n)}(),e.center&&(e.center=lc(e.center)),e.extent&&(e.extent=I4(e.extent)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in ca)delete t[a];this.setProperties(t,!0);const i=function hft(n){let e,t,i,o=void 0!==n.minZoom?n.minZoom:0,a=void 0!==n.maxZoom?n.maxZoom:28;const c=void 0!==n.zoomFactor?n.zoomFactor:2,l=void 0!==n.multiWorld&&n.multiWorld,u=void 0===n.smoothResolutionConstraint||n.smoothResolutionConstraint,h=void 0!==n.showFullExtent&&n.showFullExtent,d=FE(n.projection,"EPSG:3857"),f=d.getExtent();let p=n.constrainOnlyCenter,m=n.extent;if(!l&&!m&&d.isGlobal()&&(p=!1,m=f),void 0!==n.resolutions){const g=n.resolutions;t=g[o],i=void 0!==g[a]?g[a]:g[g.length-1],e=n.constrainResolution?function U5t(n,e,t,i){return e=void 0===e||e,function(s,r,o,a){if(void 0!==s){const c=n[0],l=n[n.length-1],u=t?GE(c,t,o,i):c;if(a)return e?WE(s,u,l):Vs(s,l,u);const h=Math.min(u,s),d=Math.floor(pE(n,h,r));return n[d]>u&&d<n.length-1?n[d+1]:n[d]}}}(g,u,!p&&m,h):eie(t,i,u,!p&&m,h)}else{const v=(f?Math.max(Ci(f),aa(f)):360*k4.degrees/d.getMetersPerUnit())/256/Math.pow(2,0),_=v/Math.pow(2,28);t=n.maxResolution,void 0!==t?o=0:t=v/Math.pow(c,o),i=n.minResolution,void 0===i&&(i=void 0!==n.maxZoom?void 0!==n.maxResolution?t/Math.pow(c,a):v/Math.pow(c,a):_),a=o+Math.floor(Math.log(t/i)/Math.log(c)),i=t/Math.pow(c,a-o),e=n.constrainResolution?function G5t(n,e,t,i,s,r){return i=void 0===i||i,t=void 0!==t?t:0,function(o,a,c,l){if(void 0!==o){const u=s?GE(e,s,c,r):e;if(l)return i?WE(o,u,t):Vs(o,t,u);const h=1e-9,d=Math.ceil(Math.log(e/u)/Math.log(n)-h),f=-a*(.5-h)+.5,p=Math.min(u,o),m=Math.floor(Math.log(e/p)/Math.log(n)+f),g=Math.max(d,m);return Vs(e/Math.pow(n,g),t,u)}}}(c,t,i,u,!p&&m,h):eie(t,i,u,!p&&m,h)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:c}}(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const s=function uft(n){if(void 0!==n.extent)return Jne(n.extent,n.constrainOnlyCenter,void 0===n.smoothExtentConstraint||n.smoothExtentConstraint);const e=FE(n.projection,"EPSG:3857");if(!0!==n.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Jne(t,!1,!1)}return B5t}(e),r=i.constraint,o=function dft(n){if(void 0===n.enableRotation||n.enableRotation){const t=n.constrainRotation;return void 0===t||!0===t?function j5t(n){return n=n||Gg(5),function(e,t){return t?e:void 0!==e?Math.abs(e)<=n?0:e:void 0}}():!1===t?tie:"number"==typeof t?function W5t(n){const e=2*Math.PI/n;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(t):tie}return jE}(e);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenter();if(i){const s=e||[0,0,0,0];t=t||[0,0,0,0];const r=this.getResolution();this.setCenterInternal([i[0]+r/2*(s[3]-t[3]+t[1]-s[1]),i[1]-r/2*(s[0]-t[0]+t[2]-s[2])])}}getUpdatedOptions_(e){const t=this.getProperties();return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let s=arguments[i];s.center&&(s=Object.assign({},s),s.center=lc(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=lc(s.anchor,this.getProjection())),t[i]=s}this.animateInternal.apply(this,t)}animateInternal(e){let i,t=arguments.length;t>1&&"function"==typeof arguments[t-1]&&(i=arguments[t-1],--t);let s=0;for(;s<t&&!this.isDef();++s){const u=arguments[s];u.center&&this.setCenterInternal(u.center),void 0!==u.zoom?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),void 0!==u.rotation&&this.setRotation(u.rotation)}if(s===t)return void(i&&uv(i,!0));let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,c=this.targetRotation_;const l=[];for(;s<t;++s){const u=arguments[s],h={start:r,complete:!1,anchor:u.anchor,duration:void 0!==u.duration?u.duration:1e3,easing:u.easing||$E,callback:i};if(u.center&&(h.sourceCenter=o,h.targetCenter=u.center.slice(),o=h.targetCenter),void 0!==u.zoom?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(u.zoom),a=h.targetResolution):u.resolution&&(h.sourceResolution=a,h.targetResolution=u.resolution,a=h.targetResolution),void 0!==u.rotation){h.sourceRotation=c;const d=Au(u.rotation-c+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=c+d,c=h.targetRotation}fft(h)?h.complete=!0:r+=h.duration,l.push(h)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let e;this.setHint(0,-this.hints_[0]);for(let t=0,i=this.animations_.length;t<i;++t){const s=this.animations_[t];if(s[0].callback&&uv(s[0].callback,!1),!e)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const s=this.animations_[i];let r=!0;for(let o=0,a=s.length;o<a;++o){const c=s[o];if(c.complete)continue;const l=e-c.start;let u=c.duration>0?l/c.duration:1;u>=1?(c.complete=!0,u=1):r=!1;const h=c.easing(u);if(c.sourceCenter){const d=c.sourceCenter[0],f=c.sourceCenter[1],p=c.targetCenter[0],m=c.targetCenter[1];this.nextCenter_=c.targetCenter,this.targetCenter_=[d+h*(p-d),f+h*(m-f)]}if(c.sourceResolution&&c.targetResolution){const d=1===h?c.targetResolution:c.sourceResolution+h*(c.targetResolution-c.sourceResolution);if(c.anchor){const f=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(p,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(void 0!==c.sourceRotation&&void 0!==c.targetRotation){const d=1===h?Au(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+h*(c.targetRotation-c.sourceRotation);if(c.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(r){this.animations_[i]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&uv(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const s=this.getCenterInternal();return void 0!==s&&(i=[s[0]-t[0],s[1]-t[1]],EE(i,e-this.getRotation()),function $8t(n,e){n[0]+=+e[0],n[1]+=+e[1]}(i,t)),i}calculateCenterZoom(e,t){let i;const s=this.getCenterInternal(),r=this.getResolution();return void 0!==s&&void 0!==r&&(i=[t[0]-e*(t[0]-s[0])/r,t[1]-e*(t[1]-s[1])/r]),i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],s=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(s*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&BE(e,this.getProjection())}getCenterInternal(){return this.get(ca.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){return UE(this.calculateExtentInternal(e),this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Cn(t,1);const i=this.getResolution();Cn(void 0!==i,2);const s=this.getRotation();return Cn(void 0!==s,3),ME(t,i,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ca.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(I4(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=Ci(e)/t[0],s=aa(e)/t[1];return Math.max(i,s)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),s=Math.log(t/this.minResolution_)/Math.log(e);return function(r){return t/Math.pow(e,r*s)}}getRotation(){return this.get(ca.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=Math.log(i/this.minResolution_)/t;return function(o){return Math.log(i/o)/t/r}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=tA(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],t,i)}return{center:s.slice(0),projection:void 0!==e?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getZoom(){let e;const t=this.getResolution();return void 0!==t&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let i,s,t=this.minZoom_||0;if(this.resolutions_){const r=pE(this.resolutions_,e,1);t=r,i=this.resolutions_[r],s=r==this.resolutions_.length-1?2:i/this.resolutions_[r+1]}else i=this.maxResolution_,s=this.zoomFactor_;return t+Math.log(i/e)/Math.log(s)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=Vs(Math.floor(e),0,this.resolutions_.length-2);return this.resolutions_[t]/Math.pow(this.resolutions_[t]/this.resolutions_[t+1],Vs(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Cn(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,24),Array.isArray(e))Cn(!wE(e),25),i=Cie(I4(e,this.getProjection()));else if("Circle"===e.getType()){const s=I4(e.getExtent(),this.getProjection());i=Cie(s),i.rotate(this.getRotation(),Su(s))}else{const s=Qne();i=s?e.clone().transform(s,this.getProjection()):e}this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),s=Math.sin(-t),r=e.getFlatCoordinates(),o=e.getStride();let a=1/0,c=1/0,l=-1/0,u=-1/0;for(let h=0,d=r.length;h<d;h+=o){const f=r[h]*i-r[h+1]*s,p=r[h]*s+r[h+1]*i;a=Math.min(a,f),c=Math.min(c,p),l=Math.max(l,f),u=Math.max(u,p)}return[a,c,l,u]}fitInternal(e,t){let i=(t=t||{}).size;i||(i=this.getViewportSizeMinusPadding_());const s=void 0!==t.padding?t.padding:[0,0,0,0],r=void 0!==t.nearest&&t.nearest;let o;o=void 0!==t.minResolution?t.minResolution:void 0!==t.maxZoom?this.getResolutionForZoom(t.maxZoom):0;const a=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(a,[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);c=isNaN(c)?o:Math.max(c,o),c=this.getConstrainedResolution(c,r?0:1);const l=this.getRotation(),u=Math.sin(l),h=Math.cos(l),d=Su(a);d[0]+=(s[1]-s[3])/2*c,d[1]+=(s[0]-s[2])/2*c;const m=this.getConstrainedCenter([d[0]*h-d[1]*u,d[1]*h+d[0]*u],c),g=t.callback?t.callback:A4;void 0!==t.duration?this.animateInternal({resolution:c,center:m,duration:t.duration,easing:t.easing},g):(this.targetResolution_=c,this.targetCenter_=m,this.applyTargetState_(!1,!0),uv(g,!0))}centerOn(e,t,i){this.centerOnInternal(lc(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(tA(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,s){let r;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),c=tA(e,s,[a[0]/2+o[3],a[1]/2+o[0]],t,i);r=[e[0]-c[0],e[1]-c[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(e){const t=BE(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&lc(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*e,0,s,i);t&&(this.targetCenter_=this.calculateCenterZoom(r,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=lc(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(s,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&lc(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,s=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,o,r,i,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(ca.ROTATION)!==s&&this.set(ca.ROTATION,s),this.get(ca.RESOLUTION)!==o&&(this.set(ca.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(ca.CENTER)||!Xg(this.get(ca.CENTER),a))&&this.set(ca.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=void 0!==e?e:200;const s=t||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),c=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(0===e&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=c,void this.applyTargetState_();i=i||(0===e?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!Xg(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:c,resolution:a,duration:e,easing:Hu,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(e,t,i){i=i&&lc(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.setHint(1,-1),this.resolveConstraints(e,t,i)}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}},nA=class pft extends Wa{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){DE(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&DE(this.element);for(let t=0,i=this.listenerKeys.length;t<i;++t)Oi(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==A4&&this.listenerKeys.push(zn(e,"postrender",this.render,this)),e.render())}render(e){}setTarget(e){this.target_="string"==typeof e?document.getElementById(e):e}},gft=class mft extends nA{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==e.collapsible,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const t=void 0!==e.className?e.className:"ol-attribution",i=void 0!==e.tipLabel?e.tipLabel:"Attributions",s=void 0!==e.expandClassName?e.expandClassName:t+"-expand",r=void 0!==e.collapseLabel?e.collapseLabel:"\u203a",o=void 0!==e.collapseClassName?e.collapseClassName:t+"-collapse";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=void 0!==e.label?e.label:"i";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener("click",this.handleClick_.bind(this),!1);const u=this.element;u.className=t+" "+Kg+" "+AE+(this.collapsed_&&this.collapsible_?" "+Ine:"")+(this.collapsible_?"":" ol-uncollapsible"),u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t={},i=[];let s=!0;const r=e.layerStatesArray;for(let o=0,a=r.length;o<a;++o){const c=r[o];if(!TE(c,e.viewState))continue;const l=c.layer.getSource();if(!l)continue;const u=l.getAttributions();if(!u)continue;const h=u(e);if(h)if(s=s&&!1!==l.getAttributionsCollapsible(),Array.isArray(h))for(let d=0,f=h.length;d<f;++d)h[d]in t||(i.push(h[d]),t[h[d]]=!0);else h in t||(i.push(h),t[h]=!0)}return this.overrideCollapsible_||this.setCollapsible(s),i}updateElement_(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const t=this.collectSourceAttributions_(e),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!E4(t,this.renderedAttributions_)){!function i5t(n){for(;n.lastChild;)n.removeChild(n.lastChild)}(this.ulElement_);for(let s=0,r=t.length;s<r;++s){const o=document.createElement("li");o.innerHTML=t[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Ine),this.collapsed_?One(this.collapseLabel_,this.label_):One(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}},_ft=class vft extends nA{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=void 0!==e.className?e.className:"ol-rotate",i=void 0!==e.label?e.label:"\u21e7",s=void 0!==e.compassClassName?e.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));const r=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener("click",this.handleClick_.bind(this),!1);const c=this.element;c.className=t+" "+Kg+" "+AE,c.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Zg)}handleClick_(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();void 0!==i&&(this.duration_>0&&i%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Hu}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const s="rotate("+i+"rad)";if(this.autoHide_){const r=this.element.classList.contains(Zg);r||0!==i?r&&0!==i&&this.element.classList.remove(Zg):this.element.classList.add(Zg)}this.label_.style.transform=s}this.rotation_=i}},bft=class yft extends nA{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=void 0!==e.className?e.className:"ol-zoom",i=void 0!==e.delta?e.delta:1,s=void 0!==e.zoomInClassName?e.zoomInClassName:t+"-in",r=void 0!==e.zoomOutClassName?e.zoomOutClassName:t+"-out",o=void 0!==e.zoomInLabel?e.zoomInLabel:"+",a=void 0!==e.zoomOutLabel?e.zoomOutLabel:"\u2013",c=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",l=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=c,u.appendChild("string"==typeof o?document.createTextNode(o):o),u.addEventListener("click",this.handleClick_.bind(this,i),!1);const h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=l,h.appendChild("string"==typeof a?document.createTextNode(a):a),h.addEventListener("click",this.handleClick_.bind(this,-i),!1);const f=this.element;f.className=t+" "+Kg+" "+AE,f.appendChild(u),f.appendChild(h),this.duration_=void 0!==e.duration?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const s=i.getZoom();if(void 0!==s){const r=i.getConstrainedZoom(s+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:r,duration:this.duration_,easing:Hu})):i.setZoom(r)}}};function iA(n,e,t,i){const s=n.getZoom();if(void 0===s)return;const r=n.getConstrainedZoom(s+e),o=n.getResolutionForZoom(r);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:void 0!==i?i:250,easing:Hu})}const v5=class Mft extends Wa{constructor(e){super(),e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set("active",e)}setMap(e){this.map_=e}},Sft=class wft extends v5{constructor(e){super(),this.delta_=(e=e||{}).delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}handleEvent(e){let t=!1;if(e.type==us.DBLCLICK){const i=e.originalEvent,r=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_;iA(e.map.getView(),o,r,this.duration_),i.preventDefault(),t=!0}return!t}};function sA(n){const e=n.length;let t=0,i=0;for(let s=0;s<e;s++)t+=n[s].clientX,i+=n[s].clientY;return[t/e,i/e]}const _5=class Tft extends v5{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==us.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==us.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==us.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==us.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};function rA(n){const e=arguments;return function(t){let i=!0;for(let s=0,r=e.length;s<r&&(i=i&&e[s](t),i);++s);return i}}const Eft=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Sie=function(n){return!n.map.getTargetElement().hasAttribute("tabindex")||function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)}(n)},Dft=t5,Tie=function(n){const e=n.originalEvent;return 0==e.button&&!(M8t&&C8t&&e.ctrlKey)},Eie=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Lft=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Aie=function(n){const e=n.originalEvent,t=e.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t&&!e.target.isContentEditable},oA=function(n){const e=n.originalEvent;return Cn(void 0!==e,56),"mouse"==e.pointerType},zft=function(n){const e=n.originalEvent;return Cn(void 0!==e,56),e.isPrimary&&0===e.button},Rft=class kft extends _5{constructor(e){super({stopDown:kg}),this.kinetic_=(e=e||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const t=e.condition?e.condition:rA(Eie,zft);this.condition_=e.onFocusOnly?rA(Sie,t):t,this.noKinetic_=!1}handleDragEvent(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const t=this.targetPointers,i=sA(t);if(t.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();(function X8t(n,e){n[0]*=e,n[1]*=e})(s,o.getResolution()),EE(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=t.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),c=t.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:Hu})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},Hft=class Ift extends _5{constructor(e){e=e||{},super({stopDown:kg}),this.condition_=e.condition?e.condition:Eft,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){if(!oA(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===jE)return;const s=t.getSize(),r=e.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);void 0!==this.lastAngle_&&i.adjustRotationInternal(-(o-this.lastAngle_)),this.lastAngle_=o}handleUpEvent(e){return!oA(e)||(e.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(e){return!!(oA(e)&&Tie(e)&&this.condition_(e))&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},Pft=class Vft extends fE{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+i,s.top=Math.min(e[1],t[1])+i,s.width=Math.abs(t[0]-e[0])+i,s.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new aft([s])}getGeometry(){return this.geometry_}};class aA extends rc{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}const Nft=class Oft extends _5{constructor(e){super(),this.box_=new Pft((e=e||{}).className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Tie,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const s=i[0]-t[0],r=i[1]-t[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new aA("boxdrag",e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new aA(t?"boxend":"boxcancel",e.coordinate,e)),!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new aA("boxstart",e.coordinate,e)),!0)}onBoxEnd(e){}},Bft=class Fft extends Nft{constructor(e){super({condition:(e=e||{}).condition?e.condition:Lft,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out}onBoxEnd(e){const i=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=i.rotatedExtentForGeometry(s),o=i.getResolutionForExtentInternal(r),a=i.getResolution()/o;s=s.clone(),s.scale(a*a)}i.fitInternal(s,{duration:this.duration_,easing:Hu})}},Gft=class Uft extends v5{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Eie(t)&&Aie(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128}handleEvent(e){let t=!1;if("keydown"==e.type){const i=e.originalEvent,s=i.keyCode;if(this.condition_(e)&&(40==s||37==s||39==s||38==s)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let c=0,l=0;40==s?l=-a:37==s?c=-a:39==s?c=a:l=a;const u=[c,l];EE(u,o.getRotation()),function Cft(n,e,t){const i=n.getCenterInternal();i&&n.animateInternal({duration:void 0!==t?t:250,easing:$5t,center:n.getConstrainedCenter([i[0]+e[0],i[1]+e[1]])})}(o,u,this.duration_),i.preventDefault(),t=!0}}return!t}},jft=class Wft extends v5{constructor(e){super(),this.condition_=(e=e||{}).condition?e.condition:Aie,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100}handleEvent(e){let t=!1;if("keydown"==e.type||"keypress"==e.type){const i=e.originalEvent,s=i.charCode;if(this.condition_(e)&&(s=="+".charCodeAt(0)||s=="-".charCodeAt(0))){const r=e.map,o=s=="+".charCodeAt(0)?this.delta_:-this.delta_;iA(r.getView(),o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}},Xft=class Yft extends v5{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==e.maxDelta?e.maxDelta:1,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=void 0!==e.constrainResolution&&e.constrainResolution;const t=e.condition?e.condition:Dft;this.condition_=e.onFocusOnly?rA(Sie,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||"wheel"!==e.type)return!0;const i=e.map,s=e.originalEvent;let r;if(s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),"wheel"==e.type&&(r=s.deltaY,x8t&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=hne),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),0===r)return!1;this.lastDelta_=r;const o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=i.getView();if("trackpad"===this.mode_&&!a.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;const c=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Vs(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),iA(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},Kft=class Zft extends _5{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=kg),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(void 0!==this.lastAngle_){const u=r-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=u}this.lastAngle_=r;const o=e.map,a=o.getView();if(a.getConstraints().rotation===jE)return;const c=o.getViewport().getBoundingClientRect(),l=sA(this.targetPointers);l[0]-=c.left,l[1]-=c.top,this.anchor_=o.getCoordinateFromPixelInternal(l),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_))}handleUpEvent(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}},Jft=class Qft extends _5{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=kg),super(t),this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],s=this.targetPointers[1],r=i.clientX-s.clientX,o=i.clientY-s.clientY,a=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(t=this.lastDistance_/a),this.lastDistance_=a;const c=e.map,l=c.getView();1!=t&&(this.lastScaleDelta_=t);const u=c.getViewport().getBoundingClientRect(),h=sA(this.targetPointers);h[0]-=u.left,h[1]-=u.top,this.anchor_=c.getCoordinateFromPixelInternal(h),c.render(),l.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){return!(this.targetPointers.length<2)||(e.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}};function Die(n){return n[0]>0&&n[1]>0}function Yo(n,e){return Array.isArray(n)?n:(void 0===e?e=[n,n]:(e[0]=n,e[1]=n),e)}function Lie(n){n instanceof Yg?n.setMapInternal(null):n instanceof tv&&n.getLayers().forEach(Lie)}function zie(n,e){if(n instanceof Yg)n.setMapInternal(e);else if(n instanceof tv){const t=n.getLayers().getArray();for(let i=0,s=t.length;i<s;++i)zie(t[i],e)}}const s7t=class n7t extends Wa{constructor(e){super();const t=function i7t(n){let e=null;void 0!==n.keyboardEventTarget&&(e="string"==typeof n.keyboardEventTarget?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&"function"==typeof n.layers.getLayers?n.layers:new tv({layers:n.layers});let s,r,o;return t.layergroup=i,t.target=n.target,t.view=n.view instanceof Al?n.view:new Al,void 0!==n.controls&&(Array.isArray(n.controls)?s=new ja(n.controls.slice()):(Cn("function"==typeof n.controls.getArray,47),s=n.controls)),void 0!==n.interactions&&(Array.isArray(n.interactions)?r=new ja(n.interactions.slice()):(Cn("function"==typeof n.interactions.getArray,48),r=n.interactions)),void 0!==n.overlays?Array.isArray(n.overlays)?o=new ja(n.overlays.slice()):(Cn("function"==typeof n.overlays.getArray,49),o=n.overlays):o=new ja,{controls:s,interactions:r,keyboardEventTarget:e,overlays:o,values:t}}(e=e||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:hne,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=t.controls||function xft(n){n=n||{};const e=new ja;return(void 0===n.zoom||n.zoom)&&e.push(new bft(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&e.push(new _ft(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&e.push(new gft(n.attributionOptions)),e}(),this.interactions=t.interactions||function e7t(n){n=n||{};const e=new ja,t=new class $ft{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const s=this.points_[t+2]-this.points_[i+2];if(s<1e3/60)return!1;const r=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&e.push(new Hft),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&e.push(new Sft({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&e.push(new Rft({onFocusOnly:n.onFocusOnly,kinetic:t})),(void 0===n.pinchRotate||n.pinchRotate)&&e.push(new Kft),(void 0===n.pinchZoom||n.pinchZoom)&&e.push(new Jft({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(e.push(new Gft),e.push(new jft({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&e.push(new Xft({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&e.push(new Bft({duration:n.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new class _5t extends class g5t{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,n5(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(e){Cn(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=nv&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return 0===this.elements_.length}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,s=t.length,r=t[e],o=i[e],a=e;for(;e<s>>1;){const c=this.getLeftChildIndex_(e),l=this.getRightChildIndex_(e),u=l<s&&i[l]<i[c]?l:c;t[e]=t[u],i[e]=i[u],e=u}t[e]=r,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,s=this.priorities_,r=i[t],o=s[t];for(;t>e;){const a=this.getParentIndex_(t);if(!(s[a]>o))break;i[t]=i[a],s[t]=s[a],t=a}i[t]=r,s[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let s=0;const r=t.length;let o,a,c;for(a=0;a<r;++a)o=t[a],c=e(o),c==nv?delete this.queuedElements_[this.keyFunction_(o)]:(i[s]=c,t[s++]=o);t.length=s,i.length=s,this.heapify_()}}{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener("change",this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(2===i||3===i||4===i){3!==i&&t.removeEventListener("change",this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let s,r,o,i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),s=r.getState(),0===s&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}}(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof Al)&&e.view.then(function(s){i.setView(new Al(s))}),this.controls.addEventListener("add",function(s){s.element.setMap(this)}.bind(this)),this.controls.addEventListener("remove",function(s){s.element.setMap(null)}.bind(this)),this.interactions.addEventListener("add",function(s){s.element.setMap(this)}.bind(this)),this.interactions.addEventListener("remove",function(s){s.element.setMap(null)}.bind(this)),this.overlays_.addEventListener("add",function(s){this.addOverlayInternal_(s.element)}.bind(this)),this.overlays_.addEventListener("remove",function(s){const r=s.element.getId();void 0!==r&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}.bind(this)),this.controls.forEach(function(s){s.setMap(this)}.bind(this)),this.interactions.forEach(function(s){s.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){zie(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,!1!==i.checkWrapped,t,null,void 0!==i.layerFilter?i.layerFilter:t5,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(s){i.push(s)},t),i}getAllLayers(){const e=[];return function t(i){i.forEach(function(s){s instanceof tv?t(s.getLayers()):e.push(s)})}(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,void 0!==(t=void 0!==t?t:{}).hitTolerance?t.hitTolerance:0,!1!==t.checkWrapped,void 0!==t.layerFilter?t.layerFilter:t5,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const t=this.viewport_.getBoundingClientRect(),i="changedTouches"in e?e.changedTouches[0]:e;return[i.clientX-t.left,i.clientY-t.top]}getTarget(){return this.get("target")}getTargetElement(){const e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null}getCoordinateFromPixel(e){return BE(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?or(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(e){const t=this.getLayerGroup();if(e instanceof ja)return void t.setLayers(e);const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const s=e[t];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=lc(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?or(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,s){return function b5t(n,e,t,i,s){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return nv;const r=n.viewState.center,o=i[0]-r[0],a=i[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}(this.frameState_,e,t,i,s)}handleBrowserEvent(e,t){const i=new Tl(t=t||e.type,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if("pointerdown"===i||"wheel"===i||"keydown"===i){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e)){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()===this&&o.getActive()&&this.getTargetElement()&&(!o.handleEvent(e)||e.propagationStopped))break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,r=s;if(e){const o=e.viewHints;if(o[0]||o[1]){const a=Date.now()-e.time>8;s=a?0:8,r=a?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,r))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new zu("loadend",this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new zu("loadstart",this,e))));const i=this.postRenderFunctions_;for(let s=0,r=i.length;s<r;++s)i[s](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,i=this.targetChangeHandlerKeys_.length;t<i;++t)Oi(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,DE(this.viewport_)}const e=this.getTargetElement();if(e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new h5t(this)),this.mapBrowserEventHandler_=new m5t(this,this.moveTolerance_);for(const s in us)this.mapBrowserEventHandler_.addEventListener(us[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!dne&&{passive:!1});const t=this.getOwnerDocument().defaultView,i=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[zn(i,"keydown",this.handleBrowserEvent,this),zn(i,"keypress",this.handleBrowserEvent,this),zn(t,"resize",this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Oi(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Oi(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=zn(e,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=zn(e,"change",this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Oi),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Sl("addlayer",e)),this.layerGroupPropertyListenerKeys_=[zn(e,"propertychange",this.render,this),zn(e,"change",this.render,this),zn(e,"addlayer",this.handleLayerAdd_,this),zn(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Lie(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),s=this.frameState_;let r=null;if(void 0!==t&&Die(t)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:ME(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Gn(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const c=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=ME(a.nextCenter,a.nextResolution,c,t)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!wE(this.previousExtent_)&&!o5(r.extent,this.previousExtent_))&&(this.dispatchEvent(new zu("movestart",this,s)),this.previousExtent_=Cu(this.previousExtent_)),this.previousExtent_&&!r.viewHints[0]&&!r.viewHints[1]&&!o5(r.extent,this.previousExtent_)&&(this.dispatchEvent(new zu("moveend",this,r)),mne(r.extent,this.previousExtent_))),this.dispatchEvent(new zu("postrender",this,r)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Sl("removelayer",t)),this.set("layergroup",e)}setSize(e){this.set("size",e)}setTarget(e){this.set("target",e)}setView(e){if(!e||e instanceof Al)return void this.set("view",e);this.set("view",new Al);const t=this;e.then(function(i){t.setView(new Al(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),s=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),r=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(s)&&!isNaN(r)&&(t=[s,r],!Die(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(t),this.updateViewportSize_()}updateViewportSize_(){const e=this.getView();if(e){let t;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(t=[parseInt(i.width,10),parseInt(i.height,10)]),e.setViewportSize(t)}}},kie=class r7t extends Rg{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent("change")}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(2==e.getState())return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(2==e.getState()){e.interimTile=null;break}1==e.getState()?t=e:0==e.getState()?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(3!==this.state&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){kn()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(i){if(-1===i)return 1}else i=t,this.transitionStarts_[e]=i;const s=t-i+1e3/60;return s>=this.transition_?1:nie(s/this.transition_)}inTransition(e){return!!this.transition_&&-1!==this.transitionStarts_[e]}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}};function cA(n,e,t){const i=n;let s=!0,r=!1,o=!1;const a=[Ig(i,"load",function(){o=!0,r||e()})];return i.src&&w8t?(r=!0,i.decode().then(function(){s&&e()}).catch(function(c){s&&(o?e():t())})):a.push(Ig(i,"error",t)),function(){s=!1,a.forEach(Oi)}}const Rie=class o7t extends kie{constructor(e,t,i,s,r,o){super(e,t,o),this.crossOrigin_=s,this.src_=i,this.key=i,this.image_=new Image,null!==s&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(e){this.image_=e,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function a7t(){const n=qo(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}(),this.changed()}handleImageLoad_(){const e=this.image_;this.state=e.naturalWidth&&e.naturalHeight?2:4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=cA(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};let lA;const Hie=[];function Vie(n,e,t,i,s){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,s),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,s)),n.restore()}function uA(n,e){return Math.abs(n[4*e]-210)>2||Math.abs(n[4*e+3]-191.25)>2}function Pie(n,e,t,i){const s=g5(t,e,n);let r=Yne(e,i,t);const o=e.getMetersPerUnit();void 0!==o&&(r*=o);const a=n.getMetersPerUnit();void 0!==a&&(r/=a);const c=n.getExtent();if(!c||Og(c,s)){const l=Yne(n,r,s)/r;isFinite(l)&&l>0&&(r/=l)}return r}const hA=class m7t extends kie{constructor(e,t,i,s,r,o,a,c,l,u,h,d){super(r,0,{interpolate:!!d}),this.renderEdges_=void 0!==h&&h,this.pixelRatio_=a,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const f=s.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const g=p?Tu(f,p):f;if(0===Ng(g))return void(this.state=4);const v=e.getExtent();v&&(m=m?Tu(m,v):v);const _=s.getResolution(this.wrappedTileCoord_[0]),y=function f7t(n,e,t,i){const s=Su(t);let r=Pie(n,e,s,i);return(!isFinite(r)||r<=0)&&bne(t,function(o){return r=Pie(n,e,o,i),isFinite(r)&&r>0}),r}(e,i,g,_);if(!isFinite(y)||y<=0)return void(this.state=4);if(this.triangulation_=new class u7t{constructor(e,t,i,s,r,o){this.sourceProj_=e,this.targetProj_=t;let a={};const c=m5(this.targetProj_,this.sourceProj_);this.transformInv_=function(_){const y=_[0]+"/"+_[1];return a[y]||(a[y]=c(_)),a[y]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Ci(s)==Ci(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ci(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ci(this.targetProj_.getExtent()):null;const l=D4(i),u=Ug(i),h=Bg(i),d=Fg(i),f=this.transformInv_(l),p=this.transformInv_(u),m=this.transformInv_(h),g=this.transformInv_(d),v=10+(o?Math.max(0,Math.ceil(Math.log2(Ng(i)/(o*o*256*256)))):0);if(this.addQuad_(l,u,h,d,f,p,m,g,v),this.wrapsXInSource_){let _=1/0;this.triangles_.forEach(function(y,b,x){_=Math.min(_,y.source[0][0],y.source[1][0],y.source[2][0])}),this.triangles_.forEach(function(y){if(Math.max(y.source[0][0],y.source[1][0],y.source[2][0])-_>this.sourceWorldWidth_/2){const b=[[y.source[0][0],y.source[0][1]],[y.source[1][0],y.source[1][1]],[y.source[2][0],y.source[2][1]]];b[0][0]-_>this.sourceWorldWidth_/2&&(b[0][0]-=this.sourceWorldWidth_),b[1][0]-_>this.sourceWorldWidth_/2&&(b[1][0]-=this.sourceWorldWidth_),b[2][0]-_>this.sourceWorldWidth_/2&&(b[2][0]-=this.sourceWorldWidth_);const x=Math.min(b[0][0],b[1][0],b[2][0]);Math.max(b[0][0],b[1][0],b[2][0])-x<this.sourceWorldWidth_/2&&(y.source=b)}}.bind(this))}a={}}addTriangle_(e,t,i,s,r,o){this.triangles_.push({source:[s,r,o],target:[e,t,i]})}addQuad_(e,t,i,s,r,o,a,c,l){const u=pne([r,o,a,c]),h=this.sourceWorldWidth_?Ci(u)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&h>.5&&h<1;let p=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(p=Ci(pne([e,t,i,s]))/this.targetWorldWidth_>.25||p),!f&&this.sourceProj_.isGlobal()&&h&&(p=h>.25||p)),!p&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!mo(u,this.maxSourceExtent_))return;let m=0;if(!(p||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(c[0])&&isFinite(c[1])))if(l>0)p=!0;else if(m=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(c[0])&&isFinite(c[1])?0:1),1!=m&&2!=m&&4!=m&&8!=m)return;if(l>0){if(!p){const v=this.transformInv_([(e[0]+i[0])/2,(e[1]+i[1])/2]);let _;_=f?(Au(r[0],d)+Au(a[0],d))/2-Au(v[0],d):(r[0]+a[0])/2-v[0];const y=(r[1]+a[1])/2-v[1];p=_*_+y*y>this.errorThresholdSquared_}if(p){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const g=[(t[0]+i[0])/2,(t[1]+i[1])/2],v=this.transformInv_(g),_=[(s[0]+e[0])/2,(s[1]+e[1])/2],y=this.transformInv_(_);this.addQuad_(e,t,g,_,r,o,v,y,l-1),this.addQuad_(_,g,i,s,y,v,a,c,l-1)}else{const g=[(e[0]+t[0])/2,(e[1]+t[1])/2],v=this.transformInv_(g),_=[(i[0]+s[0])/2,(i[1]+s[1])/2],y=this.transformInv_(_);this.addQuad_(e,g,_,s,r,v,y,c,l-1),this.addQuad_(g,t,i,_,v,o,a,y,l-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&m)&&this.addTriangle_(e,i,s,r,a,c),0==(14&m)&&this.addTriangle_(e,i,t,r,a,o),m&&(0==(13&m)&&this.addTriangle_(t,s,e,o,c,r),0==(7&m)&&this.addTriangle_(t,s,i,o,c,a))}calculateSourceExtent(){const e=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(t,i,s){const r=t.source;wu(e,r[0]),wu(e,r[1]),wu(e,r[2])}),e}getTriangles(){return this.triangles_}}(e,i,g,m,y*(void 0!==u?u:.5),_),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=t.getZForResolution(y);let x=this.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(x[1]=Vs(x[1],m[1],m[3]),x[3]=Vs(x[3],m[1],m[3])):x=Tu(x,m)),Ng(x)){const w=t.getTileRangeForExtentAndZ(x,this.sourceZ_);for(let L=w.minX;L<=w.maxX;L++)for(let C=w.minY;C<=w.maxY;C++){const D=l(this.sourceZ_,L,C,a);D&&this.sourceTiles_.push(D)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(function(t,i,s){t&&2==t.getState()&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=3;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),s="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function p7t(n,e,t,i,s,r,o,a,c,l,u,h){const d=qo(Math.round(t*n),Math.round(t*e),Hie);if(h||(d.imageSmoothingEnabled=!1),0===c.length)return d.canvas;function f(b){return Math.round(b*t)/t}d.scale(t,t),d.globalCompositeOperation="lighter";const p=[1/0,1/0,-1/0,-1/0];c.forEach(function(b,x,w){!function z8t(n,e){e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3])}(p,b.extent)});const m=Ci(p),g=aa(p),v=qo(Math.round(t*m/i),Math.round(t*g/i));h||(v.imageSmoothingEnabled=!1);const _=t/i;c.forEach(function(b,x,w){const L=b.extent[0]-p[0],C=-(b.extent[3]-p[3]),D=Ci(b.extent),R=aa(b.extent);b.image.width>0&&b.image.height>0&&v.drawImage(b.image,l,l,b.image.width-2*l,b.image.height-2*l,L*_,C*_,D*_,R*_)});const y=D4(o);return a.getTriangles().forEach(function(b,x,w){const L=b.source,C=b.target;let D=L[0][0],R=L[0][1],Y=L[1][0],Q=L[1][1],j=L[2][0],z=L[2][1];const G=f((C[0][0]-y[0])/r),k=f(-(C[0][1]-y[1])/r),O=f((C[1][0]-y[0])/r),N=f(-(C[1][1]-y[1])/r),B=f((C[2][0]-y[0])/r),q=f(-(C[2][1]-y[1])/r),ne=D,$=R;D=0,R=0,Y-=ne,Q-=$,j-=ne,z-=$;const oe=function F8t(n){const e=n.length;for(let i=0;i<e;i++){let s=i,r=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const c=Math.abs(n[a][i]);c>r&&(r=c,s=a)}if(0===r)return null;const o=n[s];n[s]=n[i],n[i]=o;for(let a=i+1;a<e;a++){const c=-n[a][i]/n[i][i];for(let l=i;l<e+1;l++)i==l?n[a][l]=0:n[a][l]+=c*n[i][l]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let s=i-1;s>=0;s--)n[s][e]-=n[s][i]*t[i]}return t}([[Y,Q,0,0,O-G],[j,z,0,0,B-G],[0,0,Y,Q,N-k],[0,0,j,z,q-k]]);if(oe){if(d.save(),d.beginPath(),function d7t(){if(void 0===lA){const n=document.createElement("canvas").getContext("2d");n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Vie(n,4,5,4,0),Vie(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;lA=uA(e,0)||uA(e,4)||uA(e,8)}return lA}()||!h){d.moveTo(O,N);const De=4,he=G-O,Ie=k-N;for(let He=0;He<De;He++)d.lineTo(O+f((He+1)*he/De),N+f(He*Ie/(De-1))),He!=De-1&&d.lineTo(O+f((He+1)*he/De),N+f((He+1)*Ie/(De-1)));d.lineTo(B,q)}else d.moveTo(O,N),d.lineTo(G,k),d.lineTo(B,q);d.clip(),d.transform(oe[0],oe[2],oe[1],oe[3],G,k),d.translate(p[0]-ne,p[3]-$),d.scale(i/t,-i/t),d.drawImage(v.canvas,0,0),d.restore()}}),u&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach(function(b,x,w){const L=b.target,C=(L[0][0]-y[0])/r,D=-(L[0][1]-y[1])/r,R=(L[1][0]-y[0])/r,Y=-(L[1][1]-y[1])/r,Q=(L[2][0]-y[0])/r,j=-(L[2][1]-y[1])/r;d.beginPath(),d.moveTo(R,Y),d.lineTo(C,D),d.lineTo(Q,j),d.closePath(),d.stroke()}),d.restore()),d.canvas}(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(t,i,s){const r=t.getState();if(0==r||1==r){e++;const o=zn(t,"change",function(a){const c=t.getState();(2==c||3==c||4==c)&&(Oi(o),e--,0===e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,s){0==t.getState()&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Oi),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Pne(this.canvas_.getContext("2d")),Hie.push(this.canvas_),this.canvas_=null),super.release()}};function Oie(n,e,t,i){return void 0!==i?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function y5(n,e,t){return n+"/"+e+"/"+t}function Nie(n){return y5(n[0],n[1],n[2])}const Fie=class x7t extends class g7t{constructor(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Cn(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Cn(void 0!==t,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let i,t=0;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let i,t=0;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Cn(!(e in this.entries_),16);const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const i=function _7t(n){return n.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(s){s.tileCoord[0]!==i&&(this.remove(Nie(s.tileCoord)),s.release())}.bind(this))}};function Bie(n){return n?Array.isArray(n)?function(e){return n}:"function"==typeof n?n:function(e){return[n]}:null}const Uie=class M7t extends Wa{constructor(e){super(),this.projection=Lr(e.projection),this.attributions_=Bie(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:"ready",this.wrapX_=void 0!==e.wrapX&&e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,s){t.viewResolver=i,t.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return kn()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Bie(e),this.changed()}setState(e){this.state_=e,this.changed()}};class Gie{constructor(e,t,i,s){this.minX=e,this.maxX=t,this.minY=i,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Pu(n,e,t,i,s){return void 0!==s?(s.minX=n,s.maxX=e,s.minY=t,s.maxY=i,s):new Gie(n,e,t,i)}const Wie=Gie,C7t=[0,0,0],jie=class w7t{constructor(e){let t;if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,Cn(function u8t(n,e,t){const i=e||T4;return n.every(function(s,r){if(0===r)return!0;const o=i(n[r-1],s);return!(o>0||t&&0===o)})}(this.resolutions_,function(s,r){return r-s},!0),17),!e.origins)for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(t){if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}else t=this.resolutions_[s]/this.resolutions_[s+1];this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,Cn(this.origins_.length==this.resolutions_.length,20));const i=e.extent;void 0!==i&&!this.origin_&&!this.origins_&&(this.origin_=D4(i)),Cn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,Cn(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:256,Cn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map(function(s,r){const o=new Wie(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const s=this.getTileRangeForExtentAndZ(e,t);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,c=s.maxY;a<=c;++a)i([t,r,a])}forEachTileCoordParentTileRange(e,t,i,s){let r,o,a,c=null,l=e[0]-1;for(2===this.zoomFactor_?(o=e[1],a=e[2]):c=this.getTileCoordExtent(e,s);l>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),a=Math.floor(a/2),r=Pu(o,o,a,a,i)):r=this.getTileRangeForExtentAndZ(c,l,i),t(l,r))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){const r=2*e[1],o=2*e[2];return Pu(r,r+1,o,o+1,t)}const s=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],r=e[1],o=e[2];if(t===s)return Pu(r,o,r,o,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-s),l=Math.floor(r*c),u=Math.floor(o*c);return t<s?Pu(l,l,u,u,i):Pu(l,Math.floor(c*(r+1))-1,u,Math.floor(c*(o+1))-1,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeExtent(e,t,i){const s=this.getOrigin(e),r=this.getResolution(e),o=Yo(this.getTileSize(e),this.tmpSize_);return $a(s[0]+t.minX*o[0]*r,s[1]+t.minY*o[1]*r,s[0]+(t.maxX+1)*o[0]*r,s[1]+(t.maxY+1)*o[1]*r,i)}getTileRangeForExtentAndZ(e,t,i){const s=C7t;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,s);const r=s[1],o=s[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,s),Pu(r,s[1],o,s[2],i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=Yo(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*i,t[1]-(e[2]+.5)*s[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),s=this.getResolution(e[0]),r=Yo(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*r[0]*s,a=i[1]-(e[2]+1)*r[1]*s;return $a(o,a,o+r[0]*s,a+r[1]*s,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,s,r){const o=this.getZForResolution(i),a=i/this.getResolution(o),c=this.getOrigin(o),l=Yo(this.getTileSize(o),this.tmpSize_);let u=a*(e-c[0])/i/l[0],h=a*(c[1]-t)/i/l[1];return s?(u=jg(u,5)-1,h=jg(h,5)-1):(u=Wg(u,5),h=Wg(h,5)),Oie(o,u,h,r)}getTileCoordForXYAndZ_(e,t,i,s,r){const o=this.getOrigin(i),a=this.getResolution(i),c=Yo(this.getTileSize(i),this.tmpSize_);let l=(e-o[0])/a/c[0],u=(o[1]-t)/a/c[1];return s?(l=jg(l,5)-1,u=jg(u,5)-1):(l=Wg(l,5),u=Wg(u,5)),Oie(i,l,u,r)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){return Vs(pE(this.resolutions_,e,t||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return bie(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let s=this.minZoom;s<t;++s)i[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=i}};function $ie(n){let e=n.getDefaultTileGrid();return e||(e=function A7t(n,e,t,i){return function T7t(n,e,t,i){i=void 0!==i?i:"top-left";const s=qie(n,e,t);return new jie({extent:n,origin:I8t(n,i),resolutions:s,tileSize:t})}(fA(n),e,t,i)}(n),n.setDefaultTileGrid(e)),e}function qie(n,e,t,i){e=void 0!==e?e:42,t=Yo(void 0!==t?t:256);const s=aa(n),r=Ci(n);i=i>0?i:Math.max(r/t[0],s/t[1]);const o=e+1,a=new Array(o);for(let c=0;c<o;++c)a[c]=i/Math.pow(2,c);return a}function fA(n){let e=(n=Lr(n)).getExtent();if(!e){const t=180*k4.degrees/n.getMetersPerUnit();e=$a(-t,-t,t,t)}return e}class L7t extends rc{constructor(e,t){super(e),this.tile=t}}const z7t=class D7t extends Uie{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileGrid&&Yo(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new Fie(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,s){const r=this.getTileCacheForProjection(e);if(!r)return!1;let a,c,l,o=!0;for(let u=i.minX;u<=i.maxX;++u)for(let h=i.minY;h<=i.maxY;++h)c=y5(t,u,h),l=!1,r.containsKey(c)&&(a=r.get(c),l=2===a.getState(),l&&(l=!1!==s(a))),l||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(e,t,i,s,r){return kn()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:$ie(e)}getTileCacheForProjection(e){const t=this.getProjection();return Cn(null===t||Iu(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const s=this.getTileGridForProjection(i),r=this.getTilePixelRatio(t),o=Yo(s.getTileSize(e),this.tmpSize);return 1==r?o:function t7t(n,e,t){return void 0===t&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=void 0!==t?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=function S7t(n,e,t){const i=e[0],s=n.getTileCoordCenter(e),r=fA(t);if(Og(r,s))return e;{const o=Ci(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,n.getTileCoordForCoordAndZ(s,i)}}(i,e,t)),function b7t(n,e){const t=n[0],i=n[1],s=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const r=e.getFullTileRange(t);return!r||r.containsXY(i,s)}(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,s){}};function k7t(n,e){const t=/\{z\}/g,i=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(o,a,c){if(o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(s,o[2].toString()).replace(r,function(){const u=e.getFullTileRange(o[0]);return Cn(u,55),(u.getHeight()-o[2]-1).toString()})}}class pA extends z7t{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===pA.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Gn(t),s=t.getState();let r;1==s?(this.tileLoadingKeys_[i]=!0,r="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=3==s?"tileloaderror":2==s?"tileloadend":void 0),null!=r&&this.dispatchEvent(new L7t(r,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=function H7t(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let r;for(r=i;r<=s;++r)e.push(n.replace(t[0],String.fromCharCode(r)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=i;s++)e.push(n.replace(t[0],s.toString()));return e}return e.push(n),e}(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function R7t(n,e){const t=n.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=k7t(n[s],e);return function I7t(n){return 1===n.length?n[0]:function(e,t,i){if(e){const s=function y7t(n){return(n[1]<<n[0])+n[2]}(e),r=Au(s,n.length);return n[r](e,t,i)}}}(i)}(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const s=y5(e,t,i);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const V7t=pA;function O7t(n,e){n.getImage().src=e}const N7t=class P7t extends V7t{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:O7t,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:Rie,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!Iu(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return!(this.getProjection()&&e&&!Iu(this.getProjection(),e))&&super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Iu(t,e)))return this.tileGrid;{const i=Gn(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=$ie(e)),this.tileGridForProjection[i]}}getTileCacheForProjection(e){const t=this.getProjection();if(!t||Iu(t,e))return this.tileCache;{const i=Gn(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Fie(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}}createTile_(e,t,i,s,r,o){const a=[e,t,i],c=this.getTileCoordForTileUrlFunction(a,r),l=c?this.tileUrlFunction(c,s,r):void 0,u=new this.tileClass(a,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener("change",this.handleTileChange.bind(this)),u}getTile(e,t,i,s,r){const o=this.getProjection();if(!o||!r||Iu(o,r))return this.getTileInternal(e,t,i,s,o||r);{const a=this.getTileCacheForProjection(r),c=[e,t,i];let l;const u=Nie(c);a.containsKey(u)&&(l=a.get(u));const h=this.getKey();if(l&&l.key==h)return l;{const d=this.getTileGridForProjection(o),f=this.getTileGridForProjection(r),p=this.getTileCoordForTileUrlFunction(c,r),m=new hA(o,d,r,f,c,p,this.getTilePixelRatio(s),this.getGutter(),function(g,v,_,y){return this.getTileInternal(g,v,_,y,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=h,l?(m.interimTile=l,m.refreshInterimChain(),a.replace(u,m)):a.set(u,m),m}}}getTileInternal(e,t,i,s,r){let o=null;const a=y5(e,t,i),c=this.getKey();if(this.tileCache.containsKey(a)){if(o=this.tileCache.get(a),o.key!=c){const l=o;o=this.createTile_(e,t,i,s,r,c),o.interimTile=0==l.getState()?l.interimTile:l,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(e,t,i,s,r,c),this.tileCache.set(a,o);return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=Lr(e);if(i){const s=Gn(i);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}},B7t=class F7t extends N7t{constructor(e){const t=void 0!==(e=e||{}).projection?e.projection:"EPSG:3857",i=void 0!==e.tileGrid?e.tileGrid:function E7t(n){const e=n||{},t=e.extent||Lr("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:qie(t,e.maxZoom,e.tileSize,e.maxResolution)};return new jie(i)}({extent:fA(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=void 0!==e.gutter?e.gutter:0}getGutter(){return this.gutter_}},W7t=class G7t extends B7t{constructor(e){let t;t=void 0!==(e=e||{}).attributions?e.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,opaque:void 0===e.opaque||e.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:void 0!==e.url?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:e.wrapX,zDirection:e.zDirection})}},$7t=class j7t extends Yg{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError)}getPreload(){return this.get("preload")}setPreload(e){this.set("preload",e)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(e){this.set("useInterimTilesOnError",e)}getData(e){return super.getData(e)}},Y7t=class q7t extends ane{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return kn()}getData(e){return null}prepareFrame(e){return kn()}renderFrame(e,t){return kn()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return function(s,r){const o=this.loadedTileCallback.bind(this,i,s);return e.forEachLoadedTile(t,s,r,o)}.bind(this)}forEachFeatureAtCoordinate(e,t,i,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){2===e.target.getState()&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return 2!=t&&3!=t&&e.addEventListener("change",this.boundHandleImageChange_),0==t&&(e.load(),t=e.getState()),2==t}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},Yie=[];let Ou=null;const Xie=class Z7t extends Y7t{constructor(e){super(e),this.container=null,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){let s;Ou||function X7t(){const n=document.createElement("canvas");n.width=1,n.height=1,Ou=n.getContext("2d")}(),Ou.clearRect(0,0,1,1);try{Ou.drawImage(e,t,i,1,1,0,0,1,1),s=Ou.getImageData(0,0,1,1).data}catch{return Ou=null,null}return s}getBackground(e){let i=this.getLayer().getBackground();return"function"==typeof i&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const s=this.getLayer().getClassName();let r,o;if(e&&e.className===s&&(!i||e&&e.style.backgroundColor&&E4($g(e.style.backgroundColor),$g(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=qo();const c=o.canvas;r.appendChild(c),a=c.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const s=D4(i),r=Ug(i),o=Bg(i),a=Fg(i);or(t.coordinateToPixelTransform,s),or(t.coordinateToPixelTransform,r),or(t.coordinateToPixelTransform,o),or(t.coordinateToPixelTransform,a);const c=this.inversePixelTransform;or(c,s),or(c,r),or(c,o),or(c,a),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,i){const s=this.getLayer();if(s.hasListener(e)){const r=new Rne(e,this.inversePixelTransform,i,t);s.dispatchEvent(r)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_("prerender",e,t)}postRender(e,t){this.dispatchRenderEvent_("postrender",e,t)}getRenderTransform(e,t,i,s,r,o,a){const u=s/t;return oc(this.tempTransform,r/2,o/2,u,-u,-i,-e[0]+a,-e[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}},Q7t=class K7t extends Xie{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new Wie(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),s=t.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!s}getTile(e,t,i,s){const r=s.pixelRatio,o=s.viewState.projection,a=this.getLayer();let l=a.getSource().getTile(e,t,i,r,o);return 3==l.getState()&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(l)||(l=l.getInterimTile()),l}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),s=or(t.pixelToCoordinateTransform,e.slice()),r=i.getExtent();if(r&&!Og(r,s))return null;const o=t.pixelRatio,a=t.viewState.projection,c=t.viewState,l=i.getRenderSource(),u=l.getTileGridForProjection(c.projection),h=l.getTilePixelRatio(t.pixelRatio);for(let d=u.getZForResolution(c.resolution);d>=u.getMinZoom();--d){const f=u.getTileCoordForCoordAndZ(s,d),p=l.getTile(d,f[1],f[2],o,a);if(!(p instanceof Rie||p instanceof hA)||p instanceof hA&&4===p.getState())return null;if(2!==p.getState())continue;const m=u.getOrigin(d),g=Yo(u.getTileSize(d)),v=u.getResolution(d),_=Math.floor(h*((s[0]-m[0])/v-f[1]*g[0])),y=Math.floor(h*((m[1]-s[1])/v-f[2]*g[1])),b=Math.round(h*l.getGutterForProjection(c.projection));return this.getImageData(p.getImage(),_+b,y+b)}return null}loadedTileCallback(e,t,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(e,t,i)}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],s=e.viewState,r=s.projection,o=s.resolution,a=s.center,c=s.rotation,l=e.pixelRatio,u=this.getLayer(),h=u.getSource(),d=h.getRevision(),f=h.getTileGridForProjection(r),p=f.getZForResolution(o,h.zDirection),m=f.getResolution(p);let g=e.extent;const v=e.viewState.resolution,_=h.getTilePixelRatio(l),y=Math.round(Ci(g)/v*l),b=Math.round(aa(g)/v*l),x=i.extent&&I4(i.extent);x&&(g=Tu(g,I4(i.extent)));const w=m*y/2/_,L=m*b/2/_,C=[a[0]-w,a[1]-L,a[0]+w,a[1]+L],D=f.getTileRangeForExtentAndZ(g,p),R={};R[p]={};const Y=this.createLoadedTileFinder(h,r,R),Q=this.tmpExtent,j=this.tmpTileRange_;this.newTiles_=!1;const z=c?CE(s.center,v,c,e.size):void 0;for(let ye=D.minX;ye<=D.maxX;++ye)for(let oe=D.minY;oe<=D.maxY;++oe){if(c&&!f.tileCoordIntersectsViewport([p,ye,oe],z))continue;const De=this.getTile(p,ye,oe,e);if(this.isDrawableTile(De)){const He=Gn(this);if(2==De.getState()){R[p][De.tileCoord.toString()]=De;let Qe=De.inTransition(He);Qe&&1!==i.opacity&&(De.endTransition(He),Qe=!1),!this.newTiles_&&(Qe||!this.renderedTiles.includes(De))&&(this.newTiles_=!0)}if(1===De.getAlpha(He,e.time))continue}const he=f.getTileCoordChildTileRange(De.tileCoord,j,Q);let Ie=!1;he&&(Ie=Y(p+1,he)),Ie||f.forEachTileCoordParentTileRange(De.tileCoord,Y,j,Q)}const G=m/o*l/_;oc(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,c,-y/2,-b/2);const k=yE(this.pixelTransform);this.useContainer(t,k,this.getBackground(e));const O=this.context,N=O.canvas;Pg(this.inversePixelTransform,this.pixelTransform),oc(this.tempTransform,y/2,b/2,G,G,0,-y/2,-b/2),N.width!=y||N.height!=b?(N.width=y,N.height=b):this.containerReused||O.clearRect(0,0,y,b),x&&this.clipUnrotated(O,e,x),h.getInterpolate()||(O.imageSmoothingEnabled=!1),this.preRender(O,e),this.renderedTiles.length=0;let q,ne,$,B=Object.keys(R).map(Number);B.sort(T4),1!==i.opacity||this.containerReused&&!h.getOpaque(e.viewState.projection)?(q=[],ne=[]):B=B.reverse();for(let ye=B.length-1;ye>=0;--ye){const oe=B[ye],De=h.getTilePixelSize(oe,l,r),Ie=f.getResolution(oe)/m,He=De[0]*Ie*G,Qe=De[1]*Ie*G,Pe=f.getTileCoordForCoordAndZ(D4(C),oe),Ht=f.getTileCoordExtent(Pe),be=or(this.tempTransform,[_*(Ht[0]-C[0])/m,_*(C[3]-Ht[3])/m]),me=_*h.getGutterForProjection(r),Re=R[oe];for(const at in Re){const Be=Re[at],Ne=Be.tileCoord,nt=Pe[1]-Ne[1],gt=Math.round(be[0]-(nt-1)*He),Qt=Pe[2]-Ne[2],Sn=Math.round(be[1]-(Qt-1)*Qe),W=Math.round(be[0]-nt*He),P=Math.round(be[1]-Qt*Qe),ue=gt-W,ze=Sn-P,Fe=p===oe,Ye=Fe&&1!==Be.getAlpha(Gn(this),e.time);let Mt=!1;if(!Ye)if(q){$=[W,P,W+ue,P,W+ue,P+ze,W,P+ze];for(let F=0,Te=q.length;F<Te;++F)if(p!==oe&&oe<ne[F]){const ke=q[F];mo([W,P,W+ue,P+ze],[ke[0],ke[3],ke[4],ke[7]])&&(Mt||(O.save(),Mt=!0),O.beginPath(),O.moveTo($[0],$[1]),O.lineTo($[2],$[3]),O.lineTo($[4],$[5]),O.lineTo($[6],$[7]),O.moveTo(ke[6],ke[7]),O.lineTo(ke[4],ke[5]),O.lineTo(ke[2],ke[3]),O.lineTo(ke[0],ke[1]),O.clip())}q.push($),ne.push(oe)}else O.clearRect(W,P,ue,ze);this.drawTileImage(Be,e,W,P,ue,ze,me,Fe),q&&!Ye?(Mt&&O.restore(),this.renderedTiles.unshift(Be)):this.renderedTiles.push(Be),this.updateUsedTiles(e.usedTiles,h,Be)}}return this.renderedRevision=d,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!o5(this.renderedExtent_,C),this.renderedExtent_=C,this.renderedPixelRatio=l,this.renderedProjection=r,this.manageTilePyramid(e,h,f,l,r,g,p,u.getPreload()),this.scheduleExpireCache(e,h),this.postRender(O,e),i.extent&&O.restore(),O.imageSmoothingEnabled=!0,k!==N.style.transform&&(N.style.transform=k),this.container}drawTileImage(e,t,i,s,r,o,a,c){const l=this.getTileImage(e);if(!l)return;const u=Gn(this),h=t.layerStatesArray[t.layerIndex],d=h.opacity*(c?e.getAlpha(u,t.time):1),f=d!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,i,s,r,o),f&&this.context.restore(),d!==h.opacity?t.animate=!0:c&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=function(s,r,o){const a=Gn(s);a in o.usedTiles&&s.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const s=Gn(t);s in e||(e[s]={}),e[s][i.getKey()]=!0}manageTilePyramid(e,t,i,s,r,o,a,c,l){const u=Gn(t);u in e.wantedTiles||(e.wantedTiles[u]={});const h=e.wantedTiles[u],d=e.tileQueue,f=i.getMinZoom(),p=e.viewState.rotation,m=p?CE(e.viewState.center,e.viewState.resolution,p,e.size):void 0;let v,_,y,b,x,w,g=0;for(w=f;w<=a;++w)for(_=i.getTileRangeForExtentAndZ(o,w,_),y=i.getResolution(w),b=_.minX;b<=_.maxX;++b)for(x=_.minY;x<=_.maxY;++x)p&&!i.tileCoordIntersectsViewport([w,b,x],m)||(a-w<=c?(++g,v=t.getTile(w,b,x,s,r),0==v.getState()&&(h[v.getKey()]=!0,d.isKeyQueued(v.getKey())||d.enqueue([v,u,i.getTileCoordCenter(v.tileCoord),y])),void 0!==l&&l(v)):t.useTile(w,b,x,r));t.updateCacheSize(g,r)}},ept=class J7t extends $7t{constructor(e){super(e)}createRenderer(){return new Q7t(this)}};var Zie=da(402);class mA{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Yo(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new mA({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return kn()}getImage(e){return kn()}getHitDetectionImage(){return kn()}getPixelRatio(e){return 1}getImageState(){return kn()}getImageSize(){return kn()}getOrigin(){return kn()}getSize(){return kn()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Yo(e)}listenImageChange(e){kn()}load(){kn()}unlistenImageChange(e){kn()}}const Kie=mA;function qa(n){return Array.isArray(n)?Ene(n):n}class gA extends Kie{constructor(e){super({opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new gA({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const i=this.renderOptions_,s=qo(i.size*e,i.size*e);this.draw_(i,s,e),t=s.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return 2}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(0===t||this.points_===1/0||"bevel"!==e&&"miter"!==e)return t;let s=this.radius_,r=void 0===this.radius2_?s:this.radius2_;if(s<r){const w=s;s=r,r=w}const a=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),c=r*Math.sin(a),u=s-Math.sqrt(r*r-c*c),h=Math.sqrt(c*c+u*u),d=h/c;if("miter"===e&&d<=i)return d*t;const f=t/2/d,p=t/2*(u/h),g=Math.sqrt((s+f)*(s+f)+p*p)-s;if(void 0===this.radius2_||"bevel"===e)return 2*g;const v=s*Math.sin(a),y=r-Math.sqrt(s*s-v*v),x=Math.sqrt(v*v+y*y)/v;return x<=i?2*Math.max(g,x*t/2-r-s):2*g}createRenderOptions(){let r,e=Du,t=0,i=null,s=0,o=0;this.stroke_&&(r=this.stroke_.getColor(),null===r&&(r=u5),r=qa(r),o=this.stroke_.getWidth(),void 0===o&&(o=1),i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=Du),t=this.stroke_.getMiterLimit(),void 0===t&&(t=10));const a=this.calculateLineJoinSize_(e,o,t),c=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:r,strokeWidth:o,size:Math.ceil(2*c+a),lineDash:i,lineDashOffset:s,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let s=this.fill_.getColor();null===s&&(s=ac),t.fillStyle=qa(s),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),i=0;if("string"==typeof t&&(t=$g(t)),null===t?i=1:Array.isArray(t)&&(i=4===t.length?t[3]:1),0===i){const s=qo(e.size,e.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(e,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const s=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(t*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const c=r+a*o,l=a%2==0?i:s;e.lineTo(l*Math.cos(c),l*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=ac,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}const Qie=gA;class vA extends Qie{constructor(e){super({points:1/0,fill:(e=e||{radius:5}).fill,radius:e.radius,stroke:e.stroke,scale:void 0!==e.scale?e.scale:1,rotation:void 0!==e.rotation?e.rotation:0,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new vA({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}const Jie=vA;class _A{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null}clone(){const e=this.getColor();return new _A({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}const yA=_A;class bA{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new bA({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const ese=bA;class Ll{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=tse,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new Ll({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=tse,this.geometry_=e}setZIndex(e){this.zIndex_=e}}let xA=null;function npt(n,e){if(!xA){const t=new yA({color:"rgba(255,255,255,0.4)"}),i=new ese({color:"#3399CC",width:1.25});xA=[new Ll({image:new Jie({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return xA}function tse(n){return n.getGeometry()}const MA=Ll;let b5=null;class ipt extends Rg{constructor(e,t,i,s,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=s,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=r,this.size_=i,this.src_=t}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&2===this.imageState_){b5||(b5=qo(1,1)),b5.drawImage(this.image_,0,0);try{b5.getImageData(0,0,1,1),this.tainted_=!1}catch{b5=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent("change")}handleImageError_(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=qo(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=cA(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||2!==this.imageState_)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const s=i.getContext("2d");s.scale(e,e),s.drawImage(t,0,0),s.globalCompositeOperation="multiply",s.fillStyle=wne(this.color_),s.fillRect(0,0,i.width/e,i.height/e),s.globalCompositeOperation="destination-in",s.drawImage(t,0,0),this.canvas_[e]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}class CA extends Kie{constructor(e){super({opacity:void 0!==(e=e||{}).opacity?e.opacity:1,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,declutterMode:e.declutterMode}),this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const o=void 0!==e.img?e.img:null;this.imgSize_=e.imgSize;let a=e.src;Cn(!(void 0!==a&&o),4),Cn(!o||o&&this.imgSize_,5),(void 0===a||0===a.length)&&o&&(a=o.src||Gn(o)),Cn(void 0!==a&&a.length>0,6);const c=void 0!==e.src?0:2;this.color_=void 0!==e.color?$g(e.color):null,this.iconImage_=function spt(n,e,t,i,s,r){let o=qg.get(e,i,r);return o||(o=new ipt(n,e,t,i,s,r),qg.set(e,i,r,o)),o}(o,a,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,c,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==e.size?e.size:null}clone(){const e=this.getScale();return new CA({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(e)?e.slice():e,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!s)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=s[0]),"fraction"==this.anchorYUnits_&&(e[1]*=s[1])}if("top-left"!=this.anchorOrigin_){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+s[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if("top-left"!=this.offsetOrigin_){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=i[0]-t[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(e){this.iconImage_.addEventListener("change",e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener("change",e)}}const nse=CA;class wA{constructor(e){this.font_=(e=e||{}).font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Yo(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new yA({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}clone(){const e=this.getScale();return new wA({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Yo(void 0!==e?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const opt=wA;function ise(n){return new MA({fill:x5(n,""),stroke:M5(n,""),text:apt(n),image:cpt(n)})}function x5(n,e){const t=n[e+"fill-color"];if(t)return new yA({color:t})}function M5(n,e){const t=n[e+"stroke-width"],i=n[e+"stroke-color"];if(t||i)return new ese({width:t,color:i,lineCap:n[e+"stroke-line-cap"],lineJoin:n[e+"stroke-line-join"],lineDash:n[e+"stroke-line-dash"],lineDashOffset:n[e+"stroke-line-dash-offset"],miterLimit:n[e+"stroke-miter-limit"]})}function apt(n){const e=n["text-value"];return e?new opt({text:e,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:x5(n,"text-"),backgroundFill:x5(n,"text-background-"),stroke:M5(n,"text-"),backgroundStroke:M5(n,"text-background-")}):void 0}function cpt(n){const e=n["icon-src"],t=n["icon-img"];if(e||t)return new nse({src:e,img:t,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});const i=n["shape-points"];if(i){const r="shape-";return new Qie({points:i,fill:x5(n,r),stroke:M5(n,r),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}const s=n["circle-radius"];if(s){const r="circle-";return new Jie({radius:s,fill:x5(n,r),stroke:M5(n,r),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}const upt=class lpt extends Yg{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new Zie(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set("renderOrder",e)}setStyle(e){let t;if(void 0===e)t=npt;else if(null===e)t=null;else if("function"==typeof e)t=e;else if(e instanceof MA)t=e;else if(Array.isArray(e)){const i=e.length,s=new Array(i);for(let r=0;r<i;++r){const o=e[r];s[r]=o instanceof MA?o:ise(o)}t=s}else t=ise(e);this.style_=t,this.styleFunction_=null===e?void 0:function tpt(n){let e;if("function"==typeof n)e=n;else{let t;Array.isArray(n)?t=n:(Cn("function"==typeof n.getZIndex,41),t=[n]),e=function(){return t}}return e}(this.style_),this.changed()}},C5={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fv=[C5.FILL],zl=[C5.STROKE],F4=[C5.BEGIN_PATH],rse=[C5.CLOSE_PATH],Bt=C5,ose=class hpt{drawCustom(e,t,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}},w5=class dpt extends ose{constructor(e,t,i,s){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return 1==t?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,c=e.length;a<c;a+=t)s[0]=e[a],s[1]=e[a+1],Og(i,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(e,t,i,s,r,o){const a=this.coordinates;let c=a.length;const l=this.getBufferedMaxExtent();o&&(t+=s);let u=e[t],h=e[t+1];const d=this.tmpCoordinate_;let p,m,g,f=!0;for(p=t+s;p<i;p+=s)d[0]=e[p],d[1]=e[p+1],g=xE(l,d),g!==m?(f&&(a[c++]=u,a[c++]=h,f=!1),a[c++]=d[0],a[c++]=d[1]):1===g?(a[c++]=d[0],a[c++]=d[1],f=!1):f=!0,u=d[0],h=d[1],m=g;return(r&&f||p===t+s)&&(a[c++]=u,a[c++]=h),c}drawCustomCoordinates_(e,t,i,s,r){for(let o=0,a=i.length;o<a;++o){const c=i[o],l=this.appendFlatLineCoordinates(e,t,c,s,!1,!1);r.push(l),t=c}return t}drawCustom(e,t,i,s){this.beginGeometry(e,t);const r=e.getType(),o=e.getStride(),a=this.coordinates.length;let c,l,u,h,d;switch(r){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),h=[];const f=e.getEndss();d=0;for(let p=0,m=f.length;p<m;++p){const g=[];d=this.drawCustomCoordinates_(c,d,f[p],o,g),h.push(g)}this.instructions.push([Bt.CUSTOM,a,h,e,i,pie]),this.hitDetectionInstructions.push([Bt.CUSTOM,a,h,e,s||i,pie]);break;case"Polygon":case"MultiLineString":u=[],c="Polygon"==r?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),d=this.drawCustomCoordinates_(c,0,e.getEnds(),o,u),this.instructions.push([Bt.CUSTOM,a,u,e,i,cv]),this.hitDetectionInstructions.push([Bt.CUSTOM,a,u,e,s||i,cv]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),l=this.appendFlatLineCoordinates(c,0,c.length,o,!1,!1),this.instructions.push([Bt.CUSTOM,a,l,e,i,Vu]),this.hitDetectionInstructions.push([Bt.CUSTOM,a,l,e,s||i,Vu]);break;case"MultiPoint":c=e.getFlatCoordinates(),l=this.appendFlatPointCoordinates(c,o),l>a&&(this.instructions.push([Bt.CUSTOM,a,l,e,i,Vu]),this.hitDetectionInstructions.push([Bt.CUSTOM,a,l,e,s||i,Vu]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),l=this.coordinates.length,this.instructions.push([Bt.CUSTOM,a,l,e,i]),this.hitDetectionInstructions.push([Bt.CUSTOM,a,l,e,s||i])}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[Bt.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Bt.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let t;e.reverse();const i=e.length;let s,r,o=-1;for(t=0;t<i;++t)s=e[t],r=s[0],r==Bt.END_GEOMETRY?o=t:r==Bt.BEGIN_GEOMETRY&&(s[2]=t,l8t(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const s=e.getColor();i.fillStyle=qa(s||ac)}else i.fillStyle=void 0;if(t){const s=t.getColor();i.strokeStyle=qa(s||u5);const r=t.getLineCap();i.lineCap=void 0!==r?r:Qg;const o=t.getLineDash();i.lineDash=o?o.slice():a5;const a=t.getLineDashOffset();i.lineDashOffset=a||0;const c=t.getLineJoin();i.lineJoin=void 0!==c?c:Du;const l=t.getWidth();i.lineWidth=void 0!==l?l:1;const u=t.getMiterLimit();i.miterLimit=void 0!==u?u:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[Bt.SET_FILL_STYLE,t];return"string"!=typeof t&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Bt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;("string"!=typeof i||e.currentFillStyle!=i)&&(void 0!==i&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,s=e.lineCap,r=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,c=e.lineWidth,l=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=s||r!=e.currentLineDash&&!E4(e.currentLineDash,r)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=c||e.currentMiterLimit!=l)&&(void 0!==i&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=s,e.currentLineDash=r,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=c,e.currentMiterLimit=l)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Bt.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=mne(this.maxExtent),this.maxLineWidth>0)&&bE(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}},ase=class vpt extends w5{constructor(e,t,i,s){super(e,t,i,s)}drawFlatCoordinatess_(e,t,i,s){const r=this.state,o=void 0!==r.fillStyle,a=void 0!==r.strokeStyle,c=i.length;this.instructions.push(F4),this.hitDetectionInstructions.push(F4);for(let l=0;l<c;++l){const u=i[l],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,u,s,!0,!a),f=[Bt.MOVE_TO_LINE_TO,h,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(rse),this.hitDetectionInstructions.push(rse)),t=u}return o&&(this.instructions.push(fv),this.hitDetectionInstructions.push(fv)),a&&(this.instructions.push(zl),this.hitDetectionInstructions.push(zl)),t}drawCircle(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Bt.SET_FILL_STYLE,ac]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Bt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getFlatCoordinates(),a=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const l=[Bt.CIRCLE,c];this.instructions.push(F4,l),this.hitDetectionInstructions.push(F4,l),void 0!==i.fillStyle&&(this.instructions.push(fv),this.hitDetectionInstructions.push(fv)),void 0!==i.strokeStyle&&(this.instructions.push(zl),this.hitDetectionInstructions.push(zl)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Bt.SET_FILL_STYLE,ac]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Bt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(a,0,o,c),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Bt.SET_FILL_STYLE,ac]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Bt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),c=e.getStride();let l=0;for(let u=0,h=o.length;u<h;++u)l=this.drawFlatCoordinatess_(a,l,o[u],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(0!==e){const t=this.coordinates;for(let i=0,s=t.length;i<s;++i)t[i]=V4(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)}};function _pt(n,e,t,i,s){let u,h,d,f,p,m,g,v,_,y,r=t,o=t,a=0,c=0,l=t;for(h=t;h<i;h+=s){const b=e[h],x=e[h+1];void 0!==p&&(_=b-p,y=x-m,f=Math.sqrt(_*_+y*y),void 0!==g&&(c+=d,u=Math.acos((g*_+v*y)/(d*f)),u>n&&(c>a&&(a=c,r=l,o=h),c=0,l=h-s)),d=f,g=_,v=y),p=b,m=x}return c+=f,c>a?[l,h]:[r,o]}const S5={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},bpt={Circle:ase,Default:w5,Image:class fpt extends w5{constructor(e,t,i,s){super(e,t,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([Bt.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Bt.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([Bt.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Bt.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),s=e.getSize(),r=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},LineString:class mpt extends w5{constructor(e,t,i,s){super(e,t,i,s)}drawFlatCoordinates_(e,t,i,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,s,!1,!1),a=[Bt.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Bt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,a5,0],F4);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(zl),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Bt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],F4);const o=e.getEnds(),a=e.getFlatCoordinates(),c=e.getStride();let l=0;for(let u=0,h=o.length;u<h;++u)l=this.drawFlatCoordinates_(a,l,o[u],c);this.hitDetectionInstructions.push(zl),this.endGeometry(t)}finish(){const e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(zl),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(zl),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(F4)}},Polygon:ase,Text:class ypt extends w5{constructor(e,t,i,s){super(e,t,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const r=this.textState_;if(""===this.text_||!r||!this.textFillState_&&!this.textStrokeState_)return;const o=this.coordinates;let a=o.length;const c=e.getType();let l=null,u=e.getStride();if("line"!==r.placement||"LineString"!=c&&"MultiLineString"!=c&&"Polygon"!=c&&"MultiPolygon"!=c){let h=r.overflow?null:[];switch(c){case"Point":case"MultiPoint":l=e.getFlatCoordinates();break;case"LineString":l=e.getFlatMidpoint();break;case"Circle":l=e.getCenter();break;case"MultiLineString":l=e.getFlatMidpoints(),u=2;break;case"Polygon":l=e.getFlatInteriorPoint(),r.overflow||h.push(l[2]/this.resolution),u=3;break;case"MultiPolygon":const g=e.getFlatInteriorPoints();l=[];for(let v=0,_=g.length;v<_;v+=3)r.overflow||h.push(g[v+2]/this.resolution),l.push(g[v],g[v+1]);if(0===l.length)return;u=2}const d=this.appendFlatPointCoordinates(l,u);if(d===a)return;if(h&&(d-a)/2!=l.length/u){let g=a/2;h=h.filter((v,_)=>{const y=o[2*(g+_)]===l[_*u]&&o[2*(g+_)+1]===l[_*u+1];return y||--g,y})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let f=r.padding;if(f!=z4&&(r.scale[0]<0||r.scale[1]<0)){let g=r.padding[0],v=r.padding[1],_=r.padding[2],y=r.padding[3];r.scale[0]<0&&(v=-v,y=-y),r.scale[1]<0&&(g=-g,_=-_),f=[g,v,_,y]}const p=this.pixelRatio;this.instructions.push([Bt.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,f==z4?z4:f.map(function(g){return g*p}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);const m=1/p;this.hitDetectionInstructions.push([Bt.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,f,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),this.endGeometry(t)}else{if(!mo(this.getBufferedMaxExtent(),e.getExtent()))return;let h;if(l=e.getFlatCoordinates(),"LineString"==c)h=[l.length];else if("MultiLineString"==c)h=e.getEnds();else if("Polygon"==c)h=e.getEnds().slice(0,1);else if("MultiPolygon"==c){const m=e.getEndss();h=[];for(let g=0,v=m.length;g<v;++g)h.push(m[g][0])}this.beginGeometry(e,t);const d=r.textAlign;let p,f=0;for(let m=0,g=h.length;m<g;++m){if(null==d){const _=_pt(r.maxAngle,l,f,h[m],u);f=_[0],p=_[1]}else p=h[m];for(let _=f;_<p;_+=u)o.push(l[_],l[_+1]);const v=o.length;f=h[m],this.drawChars_(a,v),a=v}this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:t.font,textAlign:t.textAlign||h5,justify:t.justify,textBaseline:t.textBaseline||Jg,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,l=S5[s.textBaseline],u=this.textOffsetY_*c,h=this.text_,d=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([Bt.DRAW_CHARS,e,t,l,s.overflow,a,s.maxAngle,c,u,r,d*c,h,o,1]),this.hitDetectionInstructions.push([Bt.DRAW_CHARS,e,t,l,s.overflow,a,s.maxAngle,1,u,r,d,h,o,1/c])}setTextStyle(e,t){let i,s,r;if(e){const o=e.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=qa(o.getColor()||ac)):(s=null,this.textFillState_=s);const a=e.getStroke();if(a){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const p=a.getLineDash(),m=a.getLineDashOffset(),g=a.getWidth(),v=a.getMiterLimit();r.lineCap=a.getLineCap()||Qg,r.lineDash=p?p.slice():a5,r.lineDashOffset=void 0===m?0:m,r.lineJoin=a.getLineJoin()||Du,r.lineWidth=void 0===g?1:g,r.miterLimit=void 0===v?10:v,r.strokeStyle=qa(a.getColor()||u5)}else r=null,this.textStrokeState_=r;i=this.textState_;const c=e.getFont()||Nne;r5t(c);const l=e.getScaleArray();i.overflow=e.getOverflow(),i.font=c,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||Jg,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||z4,i.scale=void 0===l?[1,1]:l;const u=e.getOffsetX(),h=e.getOffsetY(),d=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===u?0:u,this.textOffsetY_=void 0===h?0:h,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0===f?0:f,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:Gn(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s?"string"==typeof s.fillStyle?s.fillStyle:"|"+Gn(s.fillStyle):""}else this.text_="";this.declutterImageWithText_=t}}},cse=class xpt{constructor(e,t,i,s){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const s in i){const r=i[s].finish();e[t][s]=r}}return e}getBuilder(e,t){const i=void 0!==e?e.toString():"0";let s=this.buildersByZIndex_[i];void 0===s&&(s={},this.buildersByZIndex_[i]=s);let r=s[t];return void 0===r&&(r=new(0,bpt[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[t]=r),r}};function Mpt(n,e,t,i,s,r,o,a,c,l,u,h){let d=n[e],f=n[e+1],p=0,m=0,g=0,v=0;function _(){p=d,m=f,d=n[e+=i],f=n[e+1],v+=g,g=Math.sqrt((d-p)*(d-p)+(f-m)*(f-m))}do{_()}while(e<t-i&&v+g<r);let y=0===g?0:(r-v)/g;const b=L4(p,d,y),x=L4(m,f,y),w=e-i,L=v,C=r+a*c(l,s,u);for(;e<t-i&&v+g<C;)_();y=0===g?0:(C-v)/g;const D=L4(p,d,y),R=L4(m,f,y);let Y;if(h){const k=[b,x,D,R];iie(k,0,4,2,h,k,k),Y=k[0]>k[2]}else Y=b>D;const Q=Math.PI,j=[],z=w+i===e;let G;if(g=0,v=L,d=n[e=w],f=n[e+1],z)return _(),G=Math.atan2(f-m,d-p),Y&&(G+=G>0?-Q:Q),j[0]=[(D+b)/2,(R+x)/2,(C-r)/2,G,s],j;for(let k=0,O=(s=s.replace(/\n/g," ")).length;k<O;){_();let N=Math.atan2(f-m,d-p);if(Y&&(N+=N>0?-Q:Q),void 0!==G){let oe=N-G;if(oe+=oe>Q?-2*Q:oe<-Q?2*Q:0,Math.abs(oe)>o)return null}G=N;const B=k;let q=0;for(;k<O;++k){const De=a*c(l,s[Y?O-k-1:k],u);if(e+i<t&&v+g<r+q+De/2)break;q+=De}if(k===B)continue;const ne=Y?s.substring(O-B,O-k):s.substring(B,k);y=0===g?0:(r+q/2-v)/g;const $=L4(p,d,y),ye=L4(m,f,y);j.push([$,ye,q/2,N,ne]),r+=q}return j}function lse(n,e,t,i){let s=n[e],r=n[e+1],o=0;for(let a=e+i;a<t;a+=i){const c=n[a],l=n[a+1];o+=Math.sqrt((c-s)*(c-s)+(l-r)*(l-r)),s=c,r=l}return o}const Nu=[1/0,1/0,-1/0,-1/0],kl=[],uc=[],hc=[],Rl=[];function use(n){return n[3].declutterBox}const Cpt=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function hse(n,e){return("start"===e||"end"===e)&&!Cpt.test(n)&&(e="start"===e?"left":"right"),S5[e]}function wpt(n,e,t){return t>0&&n.push("\n",""),n.push(e,""),n}const Tpt=class Spt{constructor(e,t,i,s){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,s){const r=e+t+i+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=i?this.fillStates[i]:null,c=this.textStates[t],l=this.pixelRatio,u=[c.scale[0]*l,c.scale[1]*l],h=Array.isArray(e),d=c.justify?S5[c.justify]:hse(Array.isArray(e)?e[0]:e,c.textAlign||h5),f=s&&o.lineWidth?o.lineWidth:0,p=h?e:e.split("\n").reduce(wpt,[]),{width:m,height:g,widths:v,heights:_,lineWidths:y}=function a5t(n,e){const t=[],i=[],s=[];let r=0,o=0,a=0,c=0;for(let l=0,u=e.length;l<=u;l+=2){const h=e[l];if("\n"===h||l===u){r=Math.max(r,o),s.push(o),o=0,a+=c;continue}const d=e[l+1]||n.font,f=ev(d,h);t.push(f),o+=f;const p=o5t(d);i.push(p),c=Math.max(c,p)}return{width:r,height:a,widths:t,heights:i,lineWidths:s}}(c,p),b=m+f,x=[],w=(b+2)*u[0],L=(g+f)*u[1],C={width:w<0?Math.floor(w):Math.ceil(w),height:L<0?Math.floor(L):Math.ceil(L),contextInstructions:x};(1!=u[0]||1!=u[1])&&x.push("scale",u),s&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",f),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)),i&&x.push("fillStyle",a.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");const D=.5-d;let R=d*b+D*f;const Y=[],Q=[];let O,j=0,z=0,G=0,k=0;for(let N=0,B=p.length;N<B;N+=2){const q=p[N];if("\n"===q){z+=j,j=0,R=d*b+D*f,++k;continue}const ne=p[N+1]||c.font;ne!==O&&(s&&Y.push("font",ne),i&&Q.push("font",ne),O=ne),j=Math.max(j,_[G]);const $=[q,R+D*v[G]+d*(v[G]-y[k]),.5*(f+j)+z];R+=v[G],s&&Y.push("strokeText",$),i&&Q.push("fillText",$),++G}return Array.prototype.push.apply(x,Y),Array.prototype.push.apply(x,Q),this.labels_[r]=C,C}replayTextBackground_(e,t,i,s,r,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,r),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,s,r,o,a,c,l,u,h,d,f,p,m,g){let v=i-(a*=d[0]),_=s-(c*=d[1]);const y=r+l>e?e-l:r,b=o+u>t?t-u:o,x=p[3]+y*d[0]+p[1],w=p[0]+b*d[1]+p[2],L=v-p[3],C=_-p[0];let D;return(m||0!==h)&&(kl[0]=L,Rl[0]=L,kl[1]=C,uc[1]=C,uc[0]=L+x,hc[0]=uc[0],hc[1]=C+w,Rl[1]=hc[1]),0!==h?(D=oc([1,0,0,1,0,0],i,s,1,1,h,-i,-s),or(D,kl),or(D,uc),or(D,hc),or(D,Rl),$a(Math.min(kl[0],uc[0],hc[0],Rl[0]),Math.min(kl[1],uc[1],hc[1],Rl[1]),Math.max(kl[0],uc[0],hc[0],Rl[0]),Math.max(kl[1],uc[1],hc[1],Rl[1]),Nu)):$a(Math.min(L,L+x),Math.min(C,C+w),Math.max(L,L+x),Math.max(C,C+w),Nu),f&&(v=Math.round(v),_=Math.round(_)),{drawImageX:v,drawImageY:_,drawImageW:y,drawImageH:b,originX:l,originY:u,declutterBox:{minX:Nu[0],minY:Nu[1],maxX:Nu[2],maxY:Nu[3],value:g},canvasTransform:D,scale:d}}replayImageOrLabel_(e,t,i,s,r,o,a){const l=s.declutterBox,u=e.canvas,h=a?a[2]*s.scale[0]/2:0;return l.minX-h<=u.width/t&&l.maxX+h>=0&&l.minY-h<=u.height/t&&l.maxY+h>=0&&(!(!o&&!a)&&this.replayTextBackground_(e,kl,uc,hc,Rl,o,a),function c5t(n,e,t,i,s,r,o,a,c,l,u){n.save(),1!==t&&(n.globalAlpha*=t),e&&n.setTransform.apply(n,e),i.contextInstructions?(n.translate(c,l),n.scale(u[0],u[1]),function l5t(n,e){const t=n.contextInstructions;for(let i=0,s=t.length;i<s;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}(i,n)):u[0]<0||u[1]<0?(n.translate(c,l),n.scale(u[0],u[1]),n.drawImage(i,s,r,o,a,0,0,o,a)):n.drawImage(i,s,r,o,a,c,l,o*u[0],a*u[1]),n.restore()}(e,s.canvasTransform,r,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){if(this.alignFill_){const t=or(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,s){const r=this.textStates[t],o=this.createLabel(e,t,s,i),a=this.strokeStates[i],c=this.pixelRatio,l=hse(Array.isArray(e)?e[0]:e,r.textAlign||h5),u=S5[r.textBaseline||Jg],h=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:l*(o.width/c-2*r.scale[0])+2*(.5-l)*h,anchorY:u*o.height/c+2*(.5-u)*h}}execute_(e,t,i,s,r,o,a,c){let l;this.pixelCoordinates_&&E4(i,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=H4(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),function S8t(n,e){n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5]}(this.renderedTransform_,i));let u=0;const h=s.length;let f,p,m,g,v,_,y,b,x,w,L,C,d=0,D=0,R=0,Y=null,Q=null;const j=this.coordinateCache_,z=this.viewRotation_,G=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,k={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:z},O=this.instructions!=s||this.overlaps?0:200;let N,B,q,ne;for(;u<h;){const $=s[u];switch($[0]){case Bt.BEGIN_GEOMETRY:N=$[1],ne=$[3],N.getGeometry()?void 0===a||mo(a,ne.getExtent())?++u:u=$[2]+1:u=$[2];break;case Bt.BEGIN_PATH:D>O&&(this.fill_(e),D=0),R>O&&(e.stroke(),R=0),!D&&!R&&(e.beginPath(),g=NaN,v=NaN),++u;break;case Bt.CIRCLE:d=$[1];const oe=l[d],De=l[d+1],He=l[d+2]-oe,Qe=l[d+3]-De,Pe=Math.sqrt(He*He+Qe*Qe);e.moveTo(oe+Pe,De),e.arc(oe,De,Pe,0,2*Math.PI,!0),++u;break;case Bt.CLOSE_PATH:e.closePath(),++u;break;case Bt.CUSTOM:d=$[1],f=$[2];const be=$[4],me=6==$.length?$[5]:void 0;k.geometry=$[3],k.feature=N,u in j||(j[u]=[]);const Re=j[u];me?me(l,d,f,2,Re):(Re[0]=l[d],Re[1]=l[d+1],Re.length=2),be(Re,k),++u;break;case Bt.DRAW_IMAGE:d=$[1],f=$[2],b=$[3],p=$[4],m=$[5];let at=$[6];const Be=$[7],Ne=$[8],nt=$[9],gt=$[10];let Qt=$[11];const Sn=$[12];let W=$[13];const P=$[14],ue=$[15];if(!b&&$.length>=20){x=$[19],w=$[20],L=$[21],C=$[22];const hs=this.drawLabelWithPointPlacement_(x,w,L,C);b=hs.label,$[3]=b,p=(hs.anchorX-$[23])*this.pixelRatio,$[4]=p,m=(hs.anchorY-$[24])*this.pixelRatio,$[5]=m,at=b.height,$[6]=at,W=b.width,$[13]=W}let ze,Fe,Ye,Mt;$.length>25&&(ze=$[25]),$.length>17?(Fe=$[16],Ye=$[17],Mt=$[18]):(Fe=z4,Ye=!1,Mt=!1),gt&&G?Qt+=z:!gt&&!G&&(Qt-=z);let F=0;for(;d<f;d+=2){if(ze&&ze[F++]<W/this.pixelRatio)continue;const hs=this.calculateImageOrLabelDimensions_(b.width,b.height,l[d],l[d+1],W,at,p,m,Ne,nt,Qt,Sn,r,Fe,Ye||Mt,N),Qn=[e,t,b,hs,Be,Ye?Y:null,Mt?Q:null];if(c){if("none"===P)continue;if("obstacle"===P){c.insert(hs.declutterBox);continue}{let ds,fs;if(ue){const Kr=f-d;if(!ue[Kr]){ue[Kr]=Qn;continue}if(ds=ue[Kr],delete ue[Kr],fs=use(ds),c.collides(fs))continue}if(c.collides(hs.declutterBox))continue;ds&&(c.insert(fs),this.replayImageOrLabel_.apply(this,ds)),c.insert(hs.declutterBox)}}this.replayImageOrLabel_.apply(this,Qn)}++u;break;case Bt.DRAW_CHARS:const Te=$[1],ke=$[2],Je=$[3],et=$[4];C=$[5];const jt=$[6],dn=$[7],di=$[8];L=$[9];const ee=$[10];x=$[11],w=$[12];const Xe=[$[13],$[13]],ve=this.textStates[w],st=ve.font,tt=[ve.scale[0]*dn,ve.scale[1]*dn];let fn;st in this.widths_?fn=this.widths_[st]:(fn={},this.widths_[st]=fn);const Ms=lse(l,Te,ke,2),Ni=Math.abs(tt[0])*Bne(st,x,fn);if(et||Ni<=Ms){const ds=Mpt(l,Te,ke,2,x,(Ms-Ni)*S5[this.textStates[w].textAlign],jt,Math.abs(tt[0]),Bne,st,fn,G?0:this.viewRotation_);e:if(ds){const fs=[];let Kr,dc,B4,zr,go;if(L)for(Kr=0,dc=ds.length;Kr<dc;++Kr){go=ds[Kr],B4=go[4],zr=this.createLabel(B4,w,"",L),p=go[2]+(tt[0]<0?-ee:ee),m=Je*zr.height+2*(.5-Je)*ee*tt[1]/tt[0]-di;const ha=this.calculateImageOrLabelDimensions_(zr.width,zr.height,go[0],go[1],zr.width,zr.height,p,m,0,0,go[3],Xe,!1,z4,!1,N);if(c&&c.collides(ha.declutterBox))break e;fs.push([e,t,zr,ha,1,null,null])}if(C)for(Kr=0,dc=ds.length;Kr<dc;++Kr){go=ds[Kr],B4=go[4],zr=this.createLabel(B4,w,C,""),p=go[2],m=Je*zr.height-di;const ha=this.calculateImageOrLabelDimensions_(zr.width,zr.height,go[0],go[1],zr.width,zr.height,p,m,0,0,go[3],Xe,!1,z4,!1,N);if(c&&c.collides(ha.declutterBox))break e;fs.push([e,t,zr,ha,1,null,null])}c&&c.load(fs.map(use));for(let ha=0,U=fs.length;ha<U;++ha)this.replayImageOrLabel_.apply(this,fs[ha])}}++u;break;case Bt.END_GEOMETRY:if(void 0!==o){N=$[1];const hs=o(N,ne);if(hs)return hs}++u;break;case Bt.FILL:O?D++:this.fill_(e),++u;break;case Bt.MOVE_TO_LINE_TO:for(d=$[1],f=$[2],B=l[d],q=l[d+1],_=B+.5|0,y=q+.5|0,(_!==g||y!==v)&&(e.moveTo(B,q),g=_,v=y),d+=2;d<f;d+=2)B=l[d],q=l[d+1],_=B+.5|0,y=q+.5|0,(d==f-2||_!==g||y!==v)&&(e.lineTo(B,q),g=_,v=y);++u;break;case Bt.SET_FILL_STYLE:Y=$,this.alignFill_=$[2],D&&(this.fill_(e),D=0,R&&(e.stroke(),R=0)),e.fillStyle=$[1],++u;break;case Bt.SET_STROKE_STYLE:Q=$,R&&(e.stroke(),R=0),this.setStrokeStyle_(e,$),++u;break;case Bt.STROKE:O?R++:e.stroke(),++u;break;default:++u}}D&&this.fill_(e),R&&e.stroke()}execute(e,t,i,s,r,o){this.viewRotation_=s,this.execute_(e,t,i,this.instructions,r,void 0,void 0,o)}executeHitDetection(e,t,i,s,r){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,s,r)}},SA=["Polygon","Circle","LineString","Image","Text","Default"],TA={},dse=class Ept{constructor(e,t,i,s,r,o){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(r)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];void 0===i&&(i={},this.executorsByZIndex_[t]=i);const s=e[t];for(const r in s)i[r]=new Tpt(this.resolution_,this.pixelRatio_,this.overlaps_,s[r])}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let s=0,r=e.length;s<r;++s)if(e[s]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,s,r,o){const a=2*(s=Math.round(s))+1,c=oc(this.hitDetectionTransform_,s+.5,s+.5,1/t,-1/t,-i,-e[0],-e[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=qo(a,a));const u=this.hitDetectionContext_;let h;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):l||u.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(h=[1/0,1/0,-1/0,-1/0],wu(h,e),bE(h,t*(this.renderBuffer_+s),h));const d=function Apt(n){if(void 0!==TA[n])return TA[n];const e=2*n+1,t=n*n,i=new Array(t+1);for(let r=0;r<=n;++r)for(let o=0;o<=n;++o){const a=r*r+o*o;if(a>t)break;let c=i[a];c||(c=[],i[a]=c),c.push(4*((n+r)*e+(n+o))+3),r>0&&c.push(4*((n-r)*e+(n+o))+3),o>0&&(c.push(4*((n+r)*e+(n-o))+3),r>0&&c.push(4*((n-r)*e+(n-o))+3))}const s=[];for(let r=0,o=i.length;r<o;++r)i[r]&&s.push(...i[r]);return TA[n]=s,s}(s);let f;function p(x,w){const L=u.getImageData(0,0,a,a).data;for(let C=0,D=d.length;C<D;C++)if(L[d[C]]>0){if(!o||"Image"!==f&&"Text"!==f||o.includes(x)){const R=(d[C]-3)/4,Y=s-R%a,Q=s-(R/a|0),j=r(x,w,Y*Y+Q*Q);if(j)return j}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);let g,v,_,y,b;for(m.sort(T4),g=m.length-1;g>=0;--g){const x=m[g].toString();for(_=this.executorsByZIndex_[x],v=SA.length-1;v>=0;--v)if(f=SA[v],y=_[f],void 0!==y&&(b=y.executeHitDetection(u,c,i,p,h),b))return b}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],s=t[1],r=t[2],o=t[3],a=[i,s,i,o,r,o,r,s];return H4(a,0,8,2,e,a),a}isEmpty(){return s5(this.executorsByZIndex_)}execute(e,t,i,s,r,o,a){const c=Object.keys(this.executorsByZIndex_).map(Number);let l,u,h,d,f,p;for(c.sort(T4),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||SA,a&&c.reverse(),l=0,u=c.length;l<u;++l){const m=c[l].toString();for(f=this.executorsByZIndex_[m],h=0,d=o.length;h<d;++h)p=f[o[h]],void 0!==p&&p.execute(e,t,i,s,r,a)}this.maxExtent_&&e.restore()}},Lpt=class Dpt extends ose{constructor(e,t,i,s,r,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=s,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(e,t,i,s){if(!this.image_)return;const r=H4(e,t,i,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,c=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=c*this.imageOpacity_);let l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(let u=0,h=r.length;u<h;u+=2){const d=r[u]-this.imageAnchorX_,f=r[u+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const p=d+this.imageAnchorX_,m=f+this.imageAnchorY_;oc(a,p,m,1,1,l,-p,-m),o.setTransform.apply(o,a),o.translate(p,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=c)}drawText_(e,t,i,s){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=H4(e,t,i,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=s){const c=r[t]+this.textOffsetX_,l=r[t+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.translate(c-this.textOffsetX_,l-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,c,l),this.textFillState_&&o.fillText(this.text_,c,l))}}moveToLineTo_(e,t,i,s,r){const o=this.context_,a=H4(e,t,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let c=a.length;r&&(c-=2);for(let l=2;l<c;l+=2)o.lineTo(a[l],a[l+1]);return r&&o.closePath(),i}drawRings_(e,t,i,s){for(let r=0,o=i.length;r<o;++r)t=this.moveToLineTo_(e,t,i[r],s,!0);return t}drawCircle(e){if(mo(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=function J5t(n,e,t){const i=n.getFlatCoordinates();if(i){const s=n.getStride();return H4(i,0,i.length,s,e,t)}return null}(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],s=t[3]-t[1],r=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(t[0],t[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}drawFeature(e,t){const i=t.getGeometryFunction()(e);!i||!mo(this.extent_,i.getExtent())||(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,s=t.length;i<s;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),mo(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(""!==this.text_){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(mo(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=e.getFlatCoordinates();let r=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let c=0,l=o.length;c<l;++c)r=this.moveToLineTo_(s,r,o[c],a,!1);i.stroke()}if(""!==this.text_){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),mo(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),mo(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let s=0;const r=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,c=r.length;a<c;++a)s=this.drawRings_(i,s,r[a],o);this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),E4(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,s=e.textAlign?e.textAlign:h5;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=s&&(i.textAlign=s,t.textAlign=s),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=s,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(e){const i=e.getColor();this.fillState_={fillStyle:qa(i||ac)}}else this.fillState_=null;if(t){const i=t.getColor(),s=t.getLineCap(),r=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),c=t.getWidth(),l=t.getMiterLimit(),u=r||a5;this.strokeState_={lineCap:void 0!==s?s:Qg,lineDash:1===this.pixelRatio_?u:u.map(h=>h*this.pixelRatio_),lineDashOffset:(o||0)*this.pixelRatio_,lineJoin:void 0!==a?a:Du,lineWidth:(void 0!==c?c:1)*this.pixelRatio_,miterLimit:void 0!==l?l:10,strokeStyle:qa(i||u5)}}else this.strokeState_=null}setImageStyle(e){let t;if(!e||!(t=e.getSize()))return void(this.image_=null);const i=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),r=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(e){const t=e.getFill();if(t){const f=t.getColor();this.textFillState_={fillStyle:qa(f||ac)}}else this.textFillState_=null;const i=e.getStroke();if(i){const f=i.getColor(),p=i.getLineCap(),m=i.getLineDash(),g=i.getLineDashOffset(),v=i.getLineJoin(),_=i.getWidth(),y=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==p?p:Qg,lineDash:m||a5,lineDashOffset:g||0,lineJoin:void 0!==v?v:Du,lineWidth:void 0!==_?_:1,miterLimit:void 0!==y?y:10,strokeStyle:qa(f||u5)}}else this.textStrokeState_=null;const s=e.getFont(),r=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),c=e.getRotation(),l=e.getScaleArray(),u=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:void 0!==s?s:Nne,textAlign:void 0!==h?h:h5,textBaseline:void 0!==d?d:Jg},this.text_=void 0!==u?Array.isArray(u)?u.reduce((f,p,m)=>f+(m%2?" ":p),""):u:"",this.textOffsetX_=void 0!==r?this.pixelRatio_*r:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==a&&a,this.textRotation_=void 0!==c?c:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}},Ya=.5,fse={Point:function Upt(n,e,t,i,s){const r=t.getImage(),o=t.getText();let a;if(r){if(2!=r.getImageState())return;let c=n;if(s){const u=r.getDeclutterMode();if("none"!==u)if(c=s,"obstacle"===u){const h=n.getBuilder(t.getZIndex(),"Image");h.setImageStyle(r,a),h.drawPoint(e,i)}else o&&o.getText()&&(a={})}const l=c.getBuilder(t.getZIndex(),"Image");l.setImageStyle(r,a),l.drawPoint(e,i)}if(o&&o.getText()){let c=n;s&&(c=s);const l=c.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o,a),l.drawText(e,i)}},LineString:function Npt(n,e,t,i,s){const r=t.getStroke();if(r){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(s||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}},Polygon:function Wpt(n,e,t,i,s){const r=t.getFill(),o=t.getStroke();if(r||o){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(r,o),c.drawPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const c=(s||n).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}},MultiPoint:function Gpt(n,e,t,i,s){const r=t.getImage(),o=t.getText();let a;if(r){if(2!=r.getImageState())return;let c=n;if(s){const u=r.getDeclutterMode();if("none"!==u)if(c=s,"obstacle"===u){const h=n.getBuilder(t.getZIndex(),"Image");h.setImageStyle(r,a),h.drawMultiPoint(e,i)}else o&&o.getText()&&(a={})}const l=c.getBuilder(t.getZIndex(),"Image");l.setImageStyle(r,a),l.drawMultiPoint(e,i)}if(o&&o.getText()){let c=n;s&&(c=s);const l=c.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o,a),l.drawText(e,i)}},MultiLineString:function Fpt(n,e,t,i,s){const r=t.getStroke();if(r){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(s||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}},MultiPolygon:function Bpt(n,e,t,i,s){const r=t.getFill(),o=t.getStroke();if(o||r){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(r,o),c.drawMultiPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const c=(s||n).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}},GeometryCollection:function Opt(n,e,t,i,s){const r=e.getGeometriesArray();let o,a;for(o=0,a=r.length;o<a;++o)(0,fse[r[o].getType()])(n,r[o],t,i,s)},Circle:function Vpt(n,e,t,i,s){const r=t.getFill(),o=t.getStroke();if(r||o){const c=n.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(r,o),c.drawCircle(e,i)}const a=t.getText();if(a&&a.getText()){const c=(s||n).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}}};function Ipt(n,e){return parseInt(Gn(n),10)-parseInt(Gn(e),10)}function EA(n,e){return.5*n/e}function pse(n,e,t,i,s,r,o){let a=!1;const c=t.getImage();if(c){const l=c.getImageState();2==l||3==l?c.unlistenImageChange(s):(0==l&&c.load(),c.listenImageChange(s),a=!0)}return function Ppt(n,e,t,i,s,r){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(i,s);t.getRenderer()?mse(n,a,t,e):(0,fse[a.getType()])(n,a,t,e,r)}(n,e,t,i,r,o),a}function mse(n,e,t,i){if("GeometryCollection"!=e.getType())n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer());else{const r=e.getGeometries();for(let o=0,a=r.length;o<a;++o)mse(n,r[o],t,i)}}const $pt=class jpt extends Xie{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const s=t.extent,r=t.viewState,o=r.center,a=r.resolution,c=r.projection,l=r.rotation,u=c.getExtent(),h=this.getLayer().getSource(),d=t.pixelRatio,f=t.viewHints,p=!(f[0]||f[1]),m=this.compositionContext_,g=Math.round(t.size[0]*d),v=Math.round(t.size[1]*d),_=h.getWrapX()&&c.canWrapX(),y=_?Ci(u):null,b=_?Math.ceil((s[2]-u[2])/y)+1:1;let x=_?Math.floor((s[0]-u[0])/y):0;do{const w=this.getRenderTransform(o,a,l,d,g,v,x*y);e.execute(m,1,w,l,p,void 0,i)}while(++x<b)}setupCompositionContext_(){if(1!==this.opacity_){const e=qo(this.context.canvas.width,this.context.canvas.height,Yie);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,Pne(this.compositionContext_),Yie.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,s=e.layerStatesArray[e.layerIndex];(function T8t(n,e,t){(function r5(n,e,t,i,s,r,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=s,n[4]=r,n[5]=o,n})(n,e,0,0,t,0,0)})(this.pixelTransform,1/i,1/i),Pg(this.inversePixelTransform,this.pixelTransform);const r=yE(this.pixelTransform);this.useContainer(t,r,this.getBackground(e));const o=this.context,a=o.canvas,c=this.replayGroup_,l=this.declutterExecutorGroup;if((!c||c.isEmpty())&&(!l||l.isEmpty()))return null;const u=Math.round(e.size[0]*i),h=Math.round(e.size[1]*i);a.width!=u||a.height!=h?(a.width=u,a.height=h,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,u,h),this.preRender(o,e);const d=e.viewState;this.opacity_=s.opacity,this.setupCompositionContext_();let p=!1,m=!0;if(s.extent&&this.clipping){const g=I4(s.extent);m=mo(g,e.extent),p=m&&!Mu(g,e.extent),p&&this.clipUnrotated(this.compositionContext_,e,g)}return m&&this.renderWorlds(c,e),p&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(function(t){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];or(this.pixelTransform,i);const s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,c=this.wrappedRenderedExtent_,l=this.getLayer(),u=[],h=i[0]*Ya,d=i[1]*Ya;u.push(this.getRenderTransform(s,r,o,Ya,h,d,0).slice());const f=l.getSource(),p=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!Mu(p,c)){let m=c[0];const g=Ci(p);let _,v=0;for(;m<p[0];)--v,_=g*v,u.push(this.getRenderTransform(s,r,o,Ya,h,d,_).slice()),m+=g;for(v=0,m=c[2];m>p[2];)++v,_=g*v,u.push(this.getRenderTransform(s,r,o,Ya,h,d,_).slice()),m-=g}this.hitDetectionImageData_=function zpt(n,e,t,i,s,r,o){const l=qo(n[0]*Ya,n[1]*Ya);l.imageSmoothingEnabled=!1;const u=l.canvas,h=new Lpt(l,Ya,s,null,o),d=t.length,f=Math.floor(16777215/d),p={};for(let g=1;g<=d;++g){const v=t[g-1],_=v.getStyleFunction()||i;if(!i)continue;let y=_(v,r);if(!y)continue;Array.isArray(y)||(y=[y]);const x="#"+("000000"+(g*f).toString(16)).slice(-6);for(let w=0,L=y.length;w<L;++w){const C=y[w],D=C.getGeometryFunction()(v);if(!D||!mo(s,D.getExtent()))continue;const R=C.clone(),Y=R.getFill();Y&&Y.setColor(x);const Q=R.getStroke();Q&&(Q.setColor(x),Q.setLineDash(null)),R.setText(void 0);const j=C.getImage();if(j&&0!==j.getOpacity()){const k=j.getImageSize();if(!k)continue;const O=qo(k[0],k[1],void 0,{alpha:!1}),N=O.canvas;O.fillStyle=x,O.fillRect(0,0,N.width,N.height),R.setImage(new nse({img:N,imgSize:k,anchor:j.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:j.getOrigin(),opacity:1,size:j.getSize(),scale:j.getScale(),rotation:j.getRotation(),rotateWithView:j.getRotateWithView()}))}const z=R.getZIndex()||0;let G=p[z];G||(G={},p[z]=G,G.Polygon=[],G.Circle=[],G.LineString=[],G.Point=[]),G[D.getType().replace("Multi","")].push(D,R)}}const m=Object.keys(p).map(Number).sort(T4);for(let g=0,v=m.length;g<v;++g){const _=p[m[g]];for(const y in _){const b=_[y];for(let x=0,w=b.length;x<w;x+=2){h.setStyle(b[x+1]);for(let L=0,C=e.length;L<C;++L)h.setTransform(e[L]),h.drawGeometry(b[x])}}}return l.getImageData(0,0,u.width,u.height)}(i,u,this.renderedFeatures_,l.getStyleFunction(),c,r,o)}t(function kpt(n,e,t){const i=[];if(t){const s=Math.floor(Math.round(n[0])*Ya),r=Math.floor(Math.round(n[1])*Ya),o=4*(Vs(s,0,t.width-1)+Vs(r,0,t.height-1)*t.width),u=t.data[o+2]+256*(t.data[o+1]+256*t.data[o]),h=Math.floor(16777215/e.length);u&&u%h==0&&i.push(e[u/h-1])}return i}(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(e,t,i,s,r){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,c=this.getLayer(),l={},u=function(f,p,m){const g=Gn(f),v=l[g];if(v){if(!0!==v&&m<v.distanceSq){if(0===m)return l[g]=!0,r.splice(r.lastIndexOf(v),1),s(f,c,p);v.geometry=p,v.distanceSq=m}}else{if(0===m)return l[g]=!0,s(f,c,p);r.push(l[g]={feature:f,layer:c,geometry:p,distanceSq:m,callback:s})}};let h;const d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some(f=>h=f.forEachFeatureAtCoordinate(e,o,a,i,u,f===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(p=>p.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const s=e.viewHints[0],r=e.viewHints[1],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,l=e.viewState,u=l.projection,h=l.resolution,d=e.pixelRatio,f=t.getRevision(),p=t.getRenderBuffer();let m=t.getRenderOrder();void 0===m&&(m=Ipt);const g=l.center.slice(),v=bE(c,p*h),_=v.slice(),y=[v.slice()],b=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!Mu(b,e.extent)){const k=Ci(b),O=Math.max(Ci(v)/2,k);v[0]=b[0]-O,v[2]=b[2]+O,kne(g,u);const N=xne(y[0],u);N[0]<b[0]&&N[2]<b[2]?y.push([N[0]+k,N[1],N[2]+k,N[3]]):N[0]>b[0]&&N[2]>b[2]&&y.push([N[0]-k,N[1],N[2]-k,N[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==m&&Mu(this.wrappedRenderedExtent_,v))return E4(this.renderedExtent_,_)||(this.hitDetectionImageData_=null,this.renderedExtent_=_),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new cse(EA(h,d),v,h,d);let w;this.getLayer().getDeclutter()&&(w=new cse(EA(h,d),v,h,d));const L=Qne();let C;if(L){for(let k=0,O=y.length;k<O;++k){const B=UE(y[k]);i.loadFeatures(B,N5t(h),L)}C=p5(L,u)}else for(let k=0,O=y.length;k<O;++k)i.loadFeatures(y[k],h,u);const D=function Hpt(n,e){const t=EA(n,e);return t*t}(h,d);let R=!0;const Y=function(k){let O;const N=k.getStyleFunction()||t.getStyleFunction();if(N&&(O=N(k,h)),O){const B=this.renderFeature(k,D,O,x,C,w);R=R&&!B}}.bind(this),Q=UE(v),j=i.getFeaturesInExtent(Q);m&&j.sort(m);for(let k=0,O=j.length;k<O;++k)Y(j[k]);this.renderedFeatures_=j,this.ready=R;const z=x.finish(),G=new dse(v,h,d,i.getOverlaps(),z,t.getRenderBuffer());return w&&(this.declutterExecutorGroup=new dse(v,h,d,i.getOverlaps(),w.finish(),t.getRenderBuffer())),this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=m,this.renderedExtent_=_,this.wrappedRenderedExtent_=v,this.renderedCenter_=g,this.renderedProjection_=u,this.replayGroup_=G,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,s,r,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let c=0,l=i.length;c<l;++c)a=pse(s,e,i[c],t,this.boundHandleStyleImageChange_,r,o)||a;else a=pse(s,e,i,t,this.boundHandleStyleImageChange_,r,o);return a}},Ypt=class qpt extends upt{constructor(e){super(e)}createRenderer(){return new $pt(this)}},gse=class Xpt{constructor(e){this.rbush_=new Zie(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Gn(t)]=i}load(e,t){const i=new Array(t.length);for(let s=0,r=t.length;s<r;s++){const o=e[s],a=t[s],c={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[s]=c,this.items_[Gn(a)]=c}this.rbush_.load(i)}remove(e){const t=Gn(e),i=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(i)}update(e,t){const i=this.items_[Gn(t)];o5([i.minX,i.minY,i.maxX,i.maxY],e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){return this.rbush_.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let s=0,r=e.length;s<r;s++)if(i=t(e[s]),i)return i;return i}isEmpty(){return s5(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return $a(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}};function Zpt(n,e){return[[-1/0,-1/0,1/0,1/0]]}function _se(n,e){return function(t,i,s,r,o){const a=this;!function Kpt(n,e,t,i,s,r,o){const a=new XMLHttpRequest;a.open("GET","function"==typeof n?n(t,i,s):n,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(c){if(!a.status||a.status>=200&&a.status<300){const l=e.getType();let u;"json"==l||"text"==l?u=a.responseText:"xml"==l?(u=a.responseXML,u||(u=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==l&&(u=a.response),u?r(e.readFeatures(u,{extent:t,featureProjection:s}),e.readProjection(u)):o()}else o()},a.onerror=o,a.send()}(n,e,t,i,s,function(c,l){a.addFeatures(c),void 0!==r&&r(c)},o||A4)}}class Il extends rc{constructor(e,t,i){super(e),this.feature=t,this.features=i}}const Jpt=class Qpt extends Uie{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=A4,this.format_=e.format,this.overlaps_=void 0===e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(Cn(this.format_,7),this.loader_=_se(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:Zpt;const t=void 0===e.useSpatialIndex||e.useSpatialIndex;let i,s;this.featuresRtree_=t?new gse:null,this.loadedExtentsRtree_=new gse,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(e.features)?s=e.features:e.features&&(i=e.features,s=i.getArray()),!t&&void 0===i&&(i=new ja(s)),void 0!==s&&this.addFeaturesInternal(s),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Gn(e);if(!this.addToIndex_(t,e))return void(this.featuresCollection_&&this.featuresCollection_.remove(e));this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const s=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Il("addfeature",e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[zn(t,"change",this.handleFeatureChange_,this),zn(t,"propertychange",this.handleFeatureChange_,this)]}addToIndex_(e,t){let i=!0;const s=t.getId();return void 0!==s&&(s.toString()in this.idIndex_?i=!1:this.idIndex_[s.toString()]=t),i&&(Cn(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],s=[];for(let r=0,o=e.length;r<o;r++){const a=e[r],c=Gn(a);this.addToIndex_(c,a)&&i.push(a)}for(let r=0,o=i.length;r<o;r++){const a=i[r],c=Gn(a);this.setupChangeEvents_(c,a);const l=a.getGeometry();if(l){const u=l.getExtent();t.push(u),s.push(a)}else this.nullGeometryFeatures_[c]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,s),this.hasListener("addfeature"))for(let r=0,o=i.length;r<o;r++)this.dispatchEvent(new Il("addfeature",i[r]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener("addfeature",function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener("removefeature",function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener("add",function(i){t||(t=!0,this.addFeature(i.element),t=!1)}.bind(this)),e.addEventListener("remove",function(i){t||(t=!0,this.removeFeature(i.element),t=!1)}.bind(this)),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Oi);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=function(s){this.removeFeatureInternal(s)}.bind(this);this.featuresRtree_.forEach(i);for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Il("clear");this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){return this.forEachFeatureInExtent([e[0],e[1],e[0],e[1]],function(s){if(s.getGeometry().intersectsCoordinate(e))return t(s)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsExtent(e)){const r=t(i);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),s5(this.nullGeometryFeatures_)||one(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=function O8t(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];xne(n,e);const i=Ci(t);if(Ci(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}(e,t);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],s=e[1];let r=null;const o=[NaN,NaN];let a=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||t5,this.featuresRtree_.forEachInExtent(c,function(l){if(t(l)){const u=l.getGeometry(),h=a;if(a=u.closestPointXY(i,s,o,a),a<h){r=l;const d=Math.sqrt(a);c[0]=i-d,c[1]=s-d,c[2]=i+d,c[3]=s+d}}}),r}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return void 0!==t?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return void 0!==t?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Gn(t),s=t.getGeometry();if(s){const o=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);const r=t.getId();if(void 0!==r){const o=r.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new Il("changefeature",t))}hasFeature(e){const t=e.getId();return void 0!==t?t in this.idIndex_:Gn(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&s5(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(e,t,i){const s=this.loadedExtentsRtree_,r=this.strategy_(e,t,i);for(let o=0,a=r.length;o<a;++o){const c=r[o];s.forEachInExtent(c,function(u){return Mu(u.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Il("featuresloadstart")),this.loader_.call(this,c,t,i,function(u){--this.loadingExtentsCount_,this.dispatchEvent(new Il("featuresloadend",void 0,u))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new Il("featuresloaderror"))}.bind(this)),s.insert(c,{extent:c.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(s){if(o5(s.extent,e))return i=s,!0}),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=Gn(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Gn(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(Oi),delete this.featureChangeKeys_[t];const s=e.getId();return void 0!==s&&delete this.idIndex_[s.toString()],delete this.uidIndex_[t],this.dispatchEvent(new Il("removefeature",e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){Cn(this.format_,7),this.url_=e,this.setLoader(_se(e,this.format_))}},e9t=["map"];let t9t=(()=>{class n{constructor(t,i,s){this.zone=t,this.appService=i,this.houseService=s,this.houseFeature=new y8t({geometry:new _ie([1511855.49950191,7539541.240669869])})}ngAfterViewInit(){this.zone.runOutsideAngular(()=>this.initMap())}initMap(){this.houseLayer=new Ypt({source:new Jpt({features:[this.houseFeature]})}),this.map=new s7t({view:new Al({center:[1511855.49950191,7539541.240669869],zoom:19}),layers:[new ept({source:new W7t}),this.houseLayer],target:this.mapEl.nativeElement}),window.map=this.map}}return n.\u0275fac=function(t){return new(t||n)(T(Lt),T(bi),T(Vi))},n.\u0275cmp=dt({type:n,selectors:[["app-page-map"]],viewQuery:function(t,i){if(1&t&&_i(e9t,5),2&t){let s;Ot(s=Nt())&&(i.mapEl=s.first)}},decls:4,vars:0,consts:[[1,"map"],["map",""]],template:function(t,i){1&t&&(M(0,"h1"),E(1,"Map"),S(),te(2,"div",0,1))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}.map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),n})(),n9t=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.Tag=a1,this.Section=re,this.SensorType=X}ngAfterViewInit(){this.appService.hardSetStates({[tr.theoreticalWalls]:!1})}getGroups(t){return[...new Set(Object.values(this.houseService.house$.value.partsFlatten).filter(s=>s instanceof de).filter(s=>s.sensorType===t).map(s=>s.group))].filter(s=>s).sort((s,r)=>s-r).join(", ")}getOutlets(t){return Object.values(this.houseService.house$.value.partsFlatten).filter(s=>s instanceof de).filter(s=>s.sensorType===t).map(s=>s.amount).reduce((s,r)=>s+r,0)}getCable(t,i=1){return Oe(Object.values(this.houseService.house$.value.partsFlatten).filter(r=>r instanceof de).filter(r=>r.sensorType===t).map(r=>r.cableLength).reduce((r,o)=>r+o,0),i)}}return n.\u0275fac=function(t){return new(t||n)(T(Vi),T(bi))},n.\u0275cmp=dt({type:n,selectors:[["app-page-wired"]],decls:208,vars:112,consts:[[3,"id"],[3,"url"],[1,"technical"],["href","https://community.home-assistant.io/t/circadian-lighting-custom-component/61246"],["identifier","PassiveOpen-Wired"]],template:function(t,i){1&t&&(M(0,"section",0)(1,"h1"),E(2,"Smart home"),S()(),M(3,"section",0)(4,"h2"),E(5," Electricity "),S(),M(6,"h3"),te(7,"app-svg",1),M(8,"span"),E(9,"Normal - 230v"),S()(),M(10,"p"),E(11," The standard in Sweden is 10amps per group (1.5mm2). In Netherlands that would be 16amps and 2.5mm2 "),S(),M(12,"label",2)(13,"span"),E(14,"Technical "),S(),E(15),te(16,"br"),E(17),te(18,"br"),E(19),te(20,"br"),S(),M(21,"h3"),te(22,"app-svg",1),M(23,"span"),E(24,"3Phase - 400v"),S()(),M(25,"p"),E(26," This weird symbol is a "),M(27,"tag"),E(28,"perilex"),S(),E(29," plug. It has 3-phase (or sometimes just two). The main goal is the devide the load over 3 wires instead of one. It requires more wires though. Think induction in the kitchen, or e-car (not this connector). "),S(),M(30,"label",2)(31,"span"),E(32,"Technical "),S(),E(33),te(34,"br"),E(35),te(36,"br"),E(37),te(38,"br"),S()(),M(39,"section",0)(40,"h2"),E(41," lightning "),S(),M(42,"h3"),te(43,"app-svg",1),M(44,"span"),E(45,"Lamps"),S()(),M(46,"p"),E(47," Lamps can come in 230v and 24v. Most lamps should be dimmable and wires run back to the PLC "),S(),M(48,"h3"),te(49,"app-svg",1),M(50,"span"),E(51,"Double switch "),S()(),M(52,"p"),E(53," Double pulse switches. Allows for 6 options. Single, double and long press. They are 24v and wires run back to the PLC. "),S(),M(54,"h3"),te(55,"app-svg",1),M(56,"span"),E(57,"Dimmer"),S()(),M(58,"p"),E(59," All dimmable lights have a dim level that became less bright during the evening. Following the "),M(60,"a",3),E(61,"circadian lightning."),S(),E(62,". This button is only to overrule and switch on or off "),S(),M(63,"h3"),te(64,"app-svg",1),M(65,"span"),E(66,"DLC, or light plugs"),S()(),M(67,"p"),E(68," Completely strange for outstanders. but every fixed light has a seperate miniplug. In Sweden they had a old one, and since 2019 they follow the EU standard of DLC. "),S()(),M(69,"section",0)(70,"h2"),E(71," Network / Ethernet "),S(),M(72,"h3"),te(73,"app-svg",1),M(74,"span"),E(75,"Ethernet (rj45)"),S()(),M(76,"p"),E(77," If you work home, you need reliable internet. A wall outlet for a normal internet cable works the best. Not limited to computers, many devices can have them as well. Like speakers, television etc. "),S(),M(78,"label",2)(79,"span"),E(80,"Technical "),S(),E(81),te(82,"br"),E(83),te(84,"br"),S(),M(85,"h3"),te(86,"app-svg",1),M(87,"span"),E(88,"Power-over-Ethernet "),S()(),M(89,"p"),E(90,"Its a internet cable with (often) 48volts. So you can power up a device with only the internet cable. Perfect for a ring-doorbel, security camera or even wifi-access-points "),S(),M(91,"h3"),te(92,"app-svg",1),M(93,"span"),E(94,"Wifi"),S()(),M(95,"p"),E(96,"Maybe most important for any mobile device, or guests "),S(),M(97,"label",2)(98,"span"),E(99,"Technical "),S(),E(100),te(101,"br"),S()(),M(102,"section",0)(103,"h2"),E(104," Safety "),S(),M(105,"h3"),te(106,"app-svg",1),M(107,"span"),E(108,"Smoke/heat detectors"),S()(),M(109,"p"),E(110,"We have a firefighter in the family. On a serious note, everyone should have multiple of smoke sensors. A heat sensor in the kitchen. "),S(),M(111,"label",2)(112,"span"),E(113,"Technical "),S(),E(114),te(115,"br"),E(116),te(117,"br"),S(),M(118,"h3"),te(119,"app-svg",1),M(120,"span"),E(121,"Camera's"),S()(),M(122,"p"),E(123," The most optional step. Gives a bit of comfort, security wise. It does allow you to monitor your house, when you are away (via your own VPN of course) "),S(),M(124,"label",2)(125,"span"),E(126,"Technical "),S(),E(127),te(128,"br"),S(),M(129,"h3"),te(130,"app-svg",1)(131,"app-svg",1),M(132,"span"),E(133,"Window/Door sensors/Motion detection"),S()(),M(134,"p"),E(135," Extends the alarm functoin "),S()(),M(136,"section",0)(137,"h2"),E(138," Other smarts "),S(),M(139,"h3"),te(140,"app-svg",1),M(141,"span"),E(142,"Sun blinds / screens"),S()(),M(143,"p"),E(144," Essential to a passive house, because the sun radiation is to much during the summer. "),S(),M(145,"h3"),te(146,"app-svg",1),M(147,"span"),E(148,"Motion sensors"),S()(),M(149,"p"),E(150," Fun addon to help to automate the smart-home. Lights can be turned on/off automatically. "),S(),M(151,"h3"),te(152,"app-svg",1),M(153,"span"),E(154,"Temperature"),S()(),M(155,"p"),E(156," Help to regulate the heat/cooling and ventilation in certain area's of the house "),S()(),M(157,"section",0)(158,"h2"),E(159," Ventilation "),S(),M(160,"h3"),te(161,"app-svg",1),M(162,"span"),E(163,"Ventilation in"),S()(),M(164,"p"),E(165," Fresh air is needed in the bedrooms and main living rooms. It flows to the other parts of the house. Mainly because the air-intake in other rooms "),S(),M(166,"h3"),te(167,"app-svg",1),M(168,"span"),E(169,"Ventilation out"),S()(),M(170,"p"),E(171," The air intakes are in the rooms with 'dirty' air. Of course the toilets, but also the bathroom/kitchen due to moisture and smells. "),S(),M(172,"p"),E(173," Read more about ventilation on the installation page! "),S()(),M(174,"section",0)(175,"h2"),E(176," Water "),S(),M(177,"h3"),te(178,"app-svg",1),M(179,"span"),E(180,"Rainwater non-drinkable & cold"),S()(),M(181,"p"),E(182," Best for plants, and garden "),S(),M(183,"h3"),te(184,"app-svg",1),M(185,"span"),E(186,"Water, Drinkable Both warm and cold"),S()(),M(187,"p"),E(188," Used for daily water use. "),S(),M(189,"h3"),te(190,"app-svg",1),M(191,"span"),E(192,"Shower, Drinkable Both warm and cold"),S()(),M(193,"p"),E(194," If your water is coming from a water supply company you are not allowed to mix warm-drink water with cold rain water. Flow back is too high of a risk. Mixing in rain water has pro's like less water, you'll need less soap and you get softer hair. "),S(),M(195,"h3"),te(196,"app-svg",1),M(197,"span"),E(198,"Drainage"),S()(),M(199,"p"),E(200," Every water tap has of course a drain. But sometimes they come in alone, like in the laundry room. "),S(),M(201,"h3"),te(202,"app-svg",1),M(203,"span"),E(204,"Toilets"),S()(),M(205,"p"),E(206," You know what they do. Should be flushed with (filtered, non-stinky) rainwater. "),S()(),te(207,"disqus",4)),2&t&&(Z("id",i.Section.wiredWelcome),H(3),Z("id",i.Section.wiredPower),H(4),vi("sensor-",i.SensorType.socket,""),vn("url","assets/svg/",i.SensorType.socket,".svg"),H(8),mt(" Total cable length: ",i.getCable(i.SensorType.socket),"m"),H(2),mt(" Groups: ",i.getGroups(i.SensorType.socket),""),H(2),mt(" Amount: ",i.getOutlets(i.SensorType.socket),""),H(3),vi("sensor-",i.SensorType.perilex,""),vn("url","assets/svg/",i.SensorType.perilex,".svg"),H(11),mt(" Total cable length: ",i.getCable(i.SensorType.perilex),"m"),H(2),mt(" Groups: ",i.getGroups(i.SensorType.perilex),""),H(2),mt(" Amount: ",i.getOutlets(i.SensorType.perilex),""),H(2),Z("id",i.Section.wiredLight),H(4),vi("sensor-",i.SensorType.lightBulb,""),vn("url","assets/svg/",i.SensorType.lightBulb,".svg"),H(6),vi("sensor-",i.SensorType.lightSwitch,""),vn("url","assets/svg/",i.SensorType.lightSwitch,".svg"),H(6),vi("sensor-",i.SensorType.dimmer,""),vn("url","assets/svg/",i.SensorType.dimmer,".svg"),H(9),vi("sensor-",i.SensorType.dlc,""),vn("url","assets/svg/",i.SensorType.dlc,".svg"),H(5),Z("id",i.Section.wiredEthernet),H(4),vi("sensor-",i.SensorType.ethernet,""),vn("url","assets/svg/",i.SensorType.ethernet,".svg"),H(8),mt(" Amount: ",i.getOutlets(i.SensorType.ethernet),""),H(2),mt(" Total cable length: ",i.getCable(i.SensorType.ethernet,0),"m"),H(3),vi("sensor-",i.SensorType.poe,""),vn("url","assets/svg/",i.SensorType.poe,".svg"),H(6),vi("sensor-",i.SensorType.wifi,""),vn("url","assets/svg/",i.SensorType.wifi,".svg"),H(8),mt(" Amount: ",i.getOutlets(i.SensorType.wifi)," Access points"),H(2),Z("id",i.Section.wiredSafety),H(4),vi("sensor-",i.SensorType.smoke,""),vn("url","assets/svg/",i.SensorType.smoke,".svg"),H(8),mt(" Amount: ",i.getOutlets(i.SensorType.smoke),""),H(2),mt(" Total cable length: ",i.getCable(i.SensorType.smoke,0),"m"),H(3),vi("sensor-",i.SensorType.camera,""),vn("url","assets/svg/",i.SensorType.camera,".svg"),H(8),mt(" Amount: ",i.getOutlets(i.SensorType.camera)," PoE"),H(3),vi("sensor-",i.SensorType.pir,""),vn("url","assets/svg/",i.SensorType.pir,".svg"),H(1),vi("sensor-",i.SensorType.alarm,""),vn("url","assets/svg/",i.SensorType.alarm,".svg"),H(5),Z("id",i.Section.wiredExtra),H(4),vi("sensor-",i.SensorType.blinds,""),vn("url","assets/svg/",i.SensorType.blinds,".svg"),H(6),vi("sensor-",i.SensorType.pir,""),vn("url","assets/svg/",i.SensorType.pir,".svg"),H(6),vi("sensor-",i.SensorType.temperature,""),vn("url","assets/svg/",i.SensorType.temperature,".svg"),H(5),Z("id",i.Section.wiredVent),H(4),vi("sensor-",i.SensorType.ventIn,""),vn("url","assets/svg/",i.SensorType.ventIn,".svg"),H(6),vi("sensor-",i.SensorType.ventOut,""),vn("url","assets/svg/",i.SensorType.ventOut,".svg"),H(7),Z("id",i.Section.wiredWater),H(4),vi("sensor-",i.SensorType.waterRain,""),vn("url","assets/svg/",i.SensorType.waterRain,".svg"),H(6),vi("sensor-",i.SensorType.waterWarm,""),vn("url","assets/svg/",i.SensorType.waterWarm,".svg"),H(6),vi("sensor-",i.SensorType.shower,""),vn("url","assets/svg/",i.SensorType.shower,".svg"),H(6),vi("sensor-",i.SensorType.drain,""),vn("url","assets/svg/",i.SensorType.drain,".svg"),H(6),vi("sensor-",i.SensorType.toilet,""),vn("url","assets/svg/",i.SensorType.toilet,".svg"))},dependencies:[u6,rne,zg],styles:["h3[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%]{margin-right:6px}"]}),n})();const i9t=["tableRows"];function s9t(n,e){if(1&n&&(M(0,"th",7),E(1),S()),2&n){const t=Ge().$implicit;H(1),mt(" ",t.name," ")}}function r9t(n,e){if(1&n&&te(0,"span",9),2&n){const t=Ge().$implicit,i=Ge().$implicit;Z("innerHTML",i.def(t[i.id],t.unit),Mc)}}function o9t(n,e){if(1&n&&(M(0,"td",8),te(1,"span",9),Ve(2,r9t,1,1,"span",10),te(3,"span",9),S()),2&n){const t=e.$implicit,i=Ge().$implicit;H(1),Z("innerHTML",i.prefix,Mc),H(1),Z("ngIf",t[i.id]),H(1),Z("innerHTML",i.postfix,Mc)}}function a9t(n,e){1&n&&(si(0,4),Ve(1,s9t,2,1,"th",5),Ve(2,o9t,4,3,"td",6),ri()),2&n&&Z("matColumnDef",e.$implicit.id)}function c9t(n,e){1&n&&te(0,"tr",11)}function l9t(n,e){if(1&n){const t=Ss();si(0),M(1,"tr",12,13),We("click",function(){const r=Gt(t).$implicit;return Wt(Ge().rowClick(r))}),S(),ri()}if(2&n){const t=e.$implicit;H(1),function Rk(n,e,t,i,s){V1(wo,ba,b0(Ee(),n,e,t,i,s),!0)}("group-",t.uuid," row-",t.type,""),Et("row-folded",t.uuid)}}let u9t=(()=>{class n{constructor(t){this.houseService=t,this.columns=[{id:"folded",name:"",def:i=>`${i}`},{id:v6.name,name:"Name",def:i=>`${i}`},{id:"calcAmount",name:"#",def:(i,s="x")=>`${i}${s}`},{id:"price",name:"Piece price",def:i=>`${this.readableNumbers(Number(i))}`},{id:"calcPrice",name:"Sum price",def:i=>`${this.readableNumbers(Number(i),-2)}`},{id:v6.sizeOrVersion,name:"Size or Version",def:i=>`${i}`},{id:v6.remarks,name:"remarks",def:i=>`${i}`}],this.groupRow={},this.columnNames=this.columns.map(i=>i.id),this.parts=[]}set data(t){this.costTable=t;const i=t.costs.filter(s=>s);this.dataSource=[...i.flatMap(s=>s instanceof N9?[s,...s.costs]:s),new $Ie({name:`Total ${t.alias.toLocaleLowerCase()}`,costs:i})]}readableNumbers(t,i){return void 0!==i?`\u20ac${Oe(t,0).toLocaleString()}`:t>1e3?`\u20ac${Oe(t).toLocaleString()}`:`\u20ac${t}`}rowClick(t){t instanceof N9&&(t.toggleFold(),this.rowContainers.forEach(i=>{const s=i.nativeElement.classList;s.contains(`group-${t.uuid}`)&&s.toggle("row-folded")}))}}return n.\u0275fac=function(t){return new(t||n)(T(Vi))},n.\u0275cmp=dt({type:n,selectors:[["app-table"]],viewQuery:function(t,i){if(1&t&&_i(i9t,5,je),2&t){let s;Ot(s=Nt())&&(i.rowContainers=s)}},inputs:{data:"data"},decls:4,vars:6,consts:[["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z0",3,"dataSource","id"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"innerHTML"],[3,"innerHTML",4,"ngIf"],["mat-header-row",""],["mat-row","",3,"click"],["tableRows",""]],template:function(t,i){1&t&&(M(0,"table",0),Ve(1,a9t,3,1,"ng-container",1),Ve(2,c9t,1,0,"tr",2),Ve(3,l9t,3,6,"ng-container",3),S()),2&t&&(vn("id","table-",i.costTable.section,""),Z("dataSource",i.dataSource),H(1),Z("ngForOf",i.columns),H(1),Z("matHeaderRowDef",i.columnNames)("matHeaderRowDefSticky",!0),H(1),Z("matRowDefColumns",i.columnNames))},dependencies:[v2,Lo,_C,f9,yC,p9,d9,bC,m9,g9,xC,MC],styles:["tr[_ngcontent-%COMP%]{transition:.2s;background-color:var(--color-0)!important}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr.row-total[_ngcontent-%COMP%]{background-color:var(--color-5)!important}tr.row-group[_ngcontent-%COMP%]{background-color:var(--color-10)!important;cursor:pointer}tr[_ngcontent-%COMP%]:hover{background-color:var(--color-20)!important}tr.row-folded[_ngcontent-%COMP%]:not(.row-group){height:0}tr.row-folded[_ngcontent-%COMP%]:not(.row-group)   td[_ngcontent-%COMP%]{border-bottom-width:0px;padding:0;line-height:0px;overflow:hidden}[_nghost-%COMP%], table[_ngcontent-%COMP%]{width:100%}.mat-column-calcAmount[_ngcontent-%COMP%], .mat-column-price[_ngcontent-%COMP%], .mat-column-calcPrice[_ngcontent-%COMP%]{text-align:right;width:60px}.mat-column-calcPrice[_ngcontent-%COMP%]{padding-right:16px}.mat-column-sizeOrVersion[_ngcontent-%COMP%], .mat-column-other[_ngcontent-%COMP%]{min-width:60px}.mat-column-name[_ngcontent-%COMP%]{min-width:200px}"]}),n})();function h9t(n,e){1&n&&I1(0)}const d9t=function(n){return{$implicit:n}};function f9t(n,e){if(1&n&&(si(0),Ve(1,h9t,1,0,"ng-container",4),ri()),2&n){const t=e.$implicit;Ge();const i=Si(8);H(1),Z("ngTemplateOutlet",i)("ngTemplateOutletContext",d2(2,d9t,t))}}function p9t(n,e){1&n&&(M(0,"span"),E(1," Nice to discover a lot of moldings: "),M(2,"a",8),E(3,"Wikipedia Moldings"),S()())}function m9t(n,e){if(1&n){const t=Ss();M(0,"section",5)(1,"h2",6),We("click",function(){const r=Gt(t).$implicit;return Wt(r.sectionFold=!r.sectionFold)}),M(2,"mat-icon"),E(3),S(),E(4),S(),M(5,"div"),Ve(6,p9t,4,0,"span",7),te(7,"app-table",3),S()()}if(2&n){const t=e.$implicit,i=Ge();Z("id",t.section),H(3),mt("",t.sectionFold?"expand_more":"expand_less"," "),H(1),mt(" ",t.alias," "),H(1),Et("folded",t.sectionFold),H(1),Z("ngIf",t.section===i.Section.costsFinishes),H(1),Z("data",t)}}const g9t=[{path:"map",component:t9t},{path:"costs",component:(()=>{class n{constructor(t){this.houseService=t,this.Section=re,this.tables=[this.getPreps(),this.getConstruction(),this.getOpenings(),this.getElectra(),this.getFinish(),this.getWater(),this.getOutsideFinish()],this.hiddenTables=[this.getKitchen(),this.getBathroom()],this.totals=this.getTotals()}getFinish(){const{innerLength:i}=this.houseService.getWallLength(),{innerArea:r}=this.houseService.getWallArea();return new Ia({section:re.costsFinishes,alias:"Finishes",costs:[new zi({amount:i,name:"Crown molding",price:3,unit:"m"}),new zi({amount:i,name:"Baseboard",price:3,unit:"m"}),this.houseService.getT(ci,[],a=>({name:"Door casing",price:60})),this.houseService.getT(ir,[],a=>({name:"Window casing",price:60})),new zi({amount:r,name:"Drywall / Gips boards",price:10,unit:"m2"})]})}getWater(){return this.houseService.getWallLength(),this.houseService.getWallArea(),new Ia({section:re.costsWater,alias:"Water ",costs:[this.houseService.getT(_s,["sensorType"],a=>({name:"Cold water",price:20,unit:"m"}),a=>a.sensorType===X.waterCold,!1),this.houseService.getT(_s,["sensorType"],a=>({name:"Warm water",price:20,unit:"m"}),a=>a.sensorType===X.waterWarm,!1),this.houseService.getT(_s,["sensorType"],a=>({name:"Rain water",price:20,unit:"m"}),a=>a.sensorType===X.waterWarm,!1),this.houseService.getT(_s,["sensorType"],a=>({name:"Drains",price:20,unit:"m"}),a=>[X.drain,X.toilet].includes(a.sensorType),!1)]})}getOutsideFinish(){const{innerLength:i}=this.houseService.getWallLength(),{innerArea:r}=this.houseService.getWallArea();return new Ia({section:re.costsOuterFinishes,alias:"Outer finishes",costs:[new zi({amount:i,name:"Crown molding",price:3,unit:"m"}),new zi({amount:i,name:"Baseboard",price:3,unit:"m"}),this.houseService.getT(ci,[],a=>({name:"Door casing",price:60})),this.houseService.getT(ir,[],a=>({name:"Window casing",price:60})),new zi({amount:r,name:"Drywall / Gips boards",price:10,unit:"m2"})]})}getElectra(){return new Ia({section:re.costsElectra,alias:"Electra",costs:[new zi({amount:this.houseService.getGroups(X.socket).length,name:"Circuit breaker",sizeOrVersion:"10A - 240v",price:10}),new zi({amount:Math.ceil(this.houseService.getGroups(X.socket).length/4),name:"Circuit breaker Earth Group",sizeOrVersion:"240v",price:80}),this.houseService.getT(de,["sensorType"],i=>({name:"Electric power socket",sizeOrVersion:"230v",price:20}),i=>i.sensorType===X.socket),this.houseService.getT(de,["sensorType"],i=>({name:"Electric wires",sizeOrVersion:"2.5mm2 230v",price:2,unit:"m"}),i=>[X.socket].includes(i.sensorType),!1),this.houseService.getT(de,["sensorType"],i=>({name:"Perilex socket",price:60}),i=>i.sensorType===X.perilex),this.houseService.getT(de,["sensorType"],i=>({name:"Perilex wire",sizeOrVersion:"5 sub wires",price:2,unit:"m"}),i=>[X.perilex].includes(i.sensorType),!1),this.houseService.getT(zs,["sensorType"],i=>({name:"Light socket",price:20}),i=>!0),this.houseService.getT(de,["sensorType"],i=>({name:"Switch (light)",sizeOrVersion:"Double pulse",price:20}),i=>i.sensorType===X.lightSwitch),this.houseService.getT(de,["sensorType"],i=>({name:"Dimmer",price:20}),i=>i.sensorType===X.dimmer),this.houseService.getT(de,["sensorType"],i=>({name:"Wifi AP",price:100}),i=>i.sensorType===X.wifi),this.houseService.getT(de,[],i=>({name:"Ethernet cable",sizeOrVersion:"CAT6",price:.6,unit:"m"}),i=>[X.ethernet,X.poe].includes(i.sensorType),!1)]})}getPreps(){return new Ia({section:re.costsPreparations,alias:"Preparations",costs:[new zi({name:"Dirt work",price:1e3}),new zi({name:"Ground prep",price:9e3}),new zi({name:"Constructions calculations",price:3e3}),new zi({name:"PassivHaus Certification",price:3e3}),new zi({name:"Utilities connections /fees",price:15e3}),new zi({name:"Tool rental",price:3e3})]})}getConstruction(){return new Ia({section:re.costsConstruction,alias:"Construction",costs:[new zi({name:"foundation",price:9e3}),new zi({name:"footer",price:9e3}),new zi({name:"Concrete prefab floor",price:32e3}),new zi({name:"Studs",price:1e4}),new zi({name:"OSB",price:1e4})]})}getBathroom(){return new Ia({section:re.costsConstruction,alias:"Bathroom",costs:[new zi({name:"Complete kitchen",price:9e3})]})}getKitchen(){return new Ia({section:re.costsConstruction,alias:"Kitchen",costs:[new zi({name:"Complete kitchen",price:9e3})]})}getOpenings(){return new Ia({section:re.costsOpenings,alias:"Openings",costs:[this.houseService.getT(ci,["outside"],i=>({name:"Door",sizeOrVersion:`230x${i.width}`,price:i.outside?600:200,unit:"#",other:i.outside?"Outer door":"Inner door"})),this.houseService.getT(ir,["width","height","windowForm"],i=>({name:"Window",sizeOrVersion:`${i.height}x${i.width}`,price:800*i.width,other:`${i.windowForm}`}),i=>![N2.windowWall].includes(i.windowForm)),this.houseService.getT(ir,["width","height","windowForm"],i=>({name:"Window wall",sizeOrVersion:`${i.height}x${i.width}`,price:6e4,other:"main window wall"}),i=>[N2.windowWall].includes(i.windowForm))]})}getTotals(){const t=[...this.tables,...this.hiddenTables].flatMap(i=>new zi({price:Vo(i.costs.filter(s=>void 0!==s).map(s=>s.calcPrice)),name:i.alias}));return console.log(),new Ia({section:re.costsTotals,alias:"Total",costs:[...t,new zi({price:Vo(t.map(i=>i.price)),amount:.12,name:"Unexpected costs (12%)"})]})}}return n.\u0275fac=function(t){return new(t||n)(T(Vi))},n.\u0275cmp=dt({type:n,selectors:[["app-page-costs"]],decls:13,vars:3,consts:[[4,"ngFor","ngForOf"],["simple",""],[2,"margin-bottom","40px",3,"id"],[3,"data"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"id"],[3,"click"],[4,"ngIf"],["href","https://en.wikipedia.org/wiki/Molding_(decorative)"]],template:function(t,i){1&t&&(M(0,"h1"),E(1,"What does it costs"),S(),M(2,"p"),E(3," This is a overview of all the prices. Some are fixed but most are dynamic calculated of the other inputs on this website. All these prices are estimations based on on certain area, with a certain deal with a construction store.\n"),S(),M(4,"h3"),E(5," This page is still under construction. Not complete!!! Prices are not accurate\n"),S(),Ve(6,f9t,2,4,"ng-container",0),Ve(7,m9t,8,7,"ng-template",null,1,xa),M(9,"section",2)(10,"h1"),E(11,"Totals"),S(),te(12,"app-table",3),S()),2&t&&(H(6),Z("ngForOf",i.tables),H(3),Z("id",i.Section.costsTotals),H(3),Z("data",i.totals))},dependencies:[v2,Lo,eH,Ld,u9t],styles:["[_nghost-%COMP%]{max-width:900px;display:block;margin:0 auto;padding:0 32px}section[_ngcontent-%COMP%]{margin:0;padding:0 0 0 24px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{cursor:pointer;transition:.2s;display:flex;align-items:center;padding:6px;gap:16px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{background:var(--color-10)}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{max-height:100vh;transition:.4s ease-in;overflow:hidden}section[_ngcontent-%COMP%] > div.folded[_ngcontent-%COMP%]{transition:.4s ease-out;max-height:0px}app-table[_ngcontent-%COMP%]{display:block}  #table-costs-totals .mat-column-sizeOrVersion,   #table-costs-totals .mat-column-other,   #table-costs-totals .mat-column-calcAmount,   #table-costs-totals .mat-column-calcAmount,   #table-costs-totals .mat-column-price{color:transparent}"]}),n})()},{path:"about",component:(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.discord=this.appService.discord,this.github=this.appService.github,this.faDiscord=y7,this.faGithub=Eb}}return n.\u0275fac=function(t){return new(t||n)(T(Vi),T(bi))},n.\u0275cmp=dt({type:n,selectors:[["app-page-about"]],decls:45,vars:4,consts:[["src","/assets/svg/logo.svg"],["target","_blank",1,"larger-link",2,"background","var(--primary-color)",3,"href"],[3,"icon"],["target","_blank",1,"larger-link",3,"href"],["target","_blank","href","https://GeoDev.nl",1,"larger-link"],["target","_blank","href","https://www.joostdevree.nl"],["target","_blank","href","https://gathering.tweakers.net/forum/list_messages/2147286"]],template:function(t,i){1&t&&(M(0,"h1"),E(1,"About PassiveOpen "),te(2,"img",0),S(),E(3," Well we didn't put a lot of effort in this part of the site yet. Maybe you can help! "),M(4,"h2"),E(5," We have an online community.\n"),S(),M(6,"p"),E(7,"Join us on our "),M(8,"a",1),te(9,"fa-icon",2),E(10," Discord "),S(),E(11," channel. We know, its just an other tool... But it allows us to be more swift with it all. Anybody is welcome!\n"),S(),M(12,"h2"),E(13," Open source\n"),S(),M(14,"p"),E(15," The plan is to share the plans. That would include any costs, calculations and plans, drawings and of course thoughts."),te(16,"br")(17,"br"),E(18," We share this, so you can build this optimized but charming house your self or with a contractor. For free (not the contractor nor materials) "),te(19,"br")(20,"br"),E(21," We are still figuring out which 'license model' we should give this project. But don't be afraid, it won't cost you anything. More about credits to the people that helped this project.\n"),S(),M(22,"div"),E(23," Everything is free and open source. See "),M(24,"a",3),te(25,"fa-icon",2),E(26," GitHub "),S()(),M(27,"h2"),E(28," Ungoing credits:\n"),S(),M(29,"div")(30,"ul")(31,"li"),E(32," Build by "),M(33,"a",4),E(34,"GeoDev"),S()(),M(35,"li"),E(36," All the discord users of course "),S()(),E(37," Site and credits in Dutch: "),M(38,"ul")(39,"li")(40,"a",5),E(41,"https://www.joostdevree.nl"),S()(),M(42,"li")(43,"a",6),E(44,"tweakers forum"),S()()()()),2&t&&(H(8),_a("href",i.discord,Cc),H(1),Z("icon",i.faDiscord),H(15),_a("href",i.github,Cc),H(1),Z("icon",i.faGithub))},dependencies:[eM],styles:["[_nghost-%COMP%]{max-width:600px;display:block;margin:0 auto;padding:0 32px}h2[_ngcontent-%COMP%]{margin-top:80px!important}h1[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}"]}),n})()},{path:"",component:Pdt,children:[{path:"",component:Ydt},{path:"stairs",component:Zdt},{path:"facade",component:r8t},{path:"installations",component:o8t},{path:"construction",component:s8t},{path:"wired",component:n9t}]},{path:"**",redirectTo:"",pathMatch:"full"}];let v9t=(()=>{class n{constructor(t){t.addSvgIconSet("material-icons-outlined")}}return n.\u0275fac=function(t){return new(t||n)(J(Dd))},n.\u0275mod=ft({type:n,bootstrap:[cwe]}),n.\u0275inj=ut({providers:[m3],imports:[CH,aTe,dDe,kLe,cMe,Ic,qxe,RLe.forRoot("passiv"),ULe.forRoot("G-W580DX5P7G"),uve.forRoot(g9t,{anchorScrolling:"enabled"})]}),n})();(function O3e(){if(CI)throw new Error("Cannot enable prod mode after platform setup.");MI=!1})(),c6e().bootstrapModule(v9t).catch(n=>console.error(n))},402:function(Gu){Gu.exports=function(){"use strict";function Wu(ce,ge,Ue,_t,bt){!function vt(St,cn,An,mn,pi){for(;mn>An;){if(mn-An>600){var qn=mn-An+1,Yi=cn-An+1,Vl=Math.log(qn),T1=.5*Math.exp(2*Vl/3),kr=.5*Math.sqrt(Vl*T1*(qn-T1)/qn)*(Yi-qn/2<0?-1:1);vt(St,cn,Math.max(An,Math.floor(cn-Yi*T1/qn+kr)),Math.min(mn,Math.floor(cn+(qn-Yi)*T1/qn+kr)),pi)}var Tn=St[cn],vc=An,vo=mn;for(da(St,An,cn),pi(St[mn],Tn)>0&&da(St,An,mn);vc<vo;){for(da(St,vc,vo),vc++,vo--;pi(St[vc],Tn)<0;)vc++;for(;pi(St[vo],Tn)>0;)vo--}0===pi(St[An],Tn)?da(St,An,vo):da(St,++vo,mn),vo<=cn&&(An=vo+1),cn<=vo&&(mn=vo-1)}}(ce,ge,Ue||0,_t||ce.length-1,bt||xn)}function da(ce,ge,Ue){var _t=ce[ge];ce[ge]=ce[Ue],ce[Ue]=_t}function xn(ce,ge){return ce<ge?-1:ce>ge?1:0}var ei=function(ce){void 0===ce&&(ce=9),this._maxEntries=Math.max(4,ce),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function ju(ce,ge,Ue){if(!Ue)return ge.indexOf(ce);for(var _t=0;_t<ge.length;_t++)if(Ue(ce,ge[_t]))return _t;return-1}function w1(ce,ge){fi(ce,0,ce.children.length,ge,ce)}function fi(ce,ge,Ue,_t,bt){bt||(bt=mc(null)),bt.minX=1/0,bt.minY=1/0,bt.maxX=-1/0,bt.maxY=-1/0;for(var vt=ge;vt<Ue;vt++){var St=ce.children[vt];fc(bt,ce.leaf?_t(St):St)}return bt}function fc(ce,ge){return ce.minX=Math.min(ce.minX,ge.minX),ce.minY=Math.min(ce.minY,ge.minY),ce.maxX=Math.max(ce.maxX,ge.maxX),ce.maxY=Math.max(ce.maxY,ge.maxY),ce}function E5(ce,ge){return ce.minX-ge.minX}function A5(ce,ge){return ce.minY-ge.minY}function S1(ce){return(ce.maxX-ce.minX)*(ce.maxY-ce.minY)}function Za(ce){return ce.maxX-ce.minX+(ce.maxY-ce.minY)}function W4(ce,ge){return ce.minX<=ge.minX&&ce.minY<=ge.minY&&ge.maxX<=ce.maxX&&ge.maxY<=ce.maxY}function pc(ce,ge){return ge.minX<=ce.maxX&&ge.minY<=ce.maxY&&ge.maxX>=ce.minX&&ge.maxY>=ce.minY}function mc(ce){return{children:ce,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function D5(ce,ge,Ue,_t,bt){for(var vt=[ge,Ue];vt.length;)if(!((Ue=vt.pop())-(ge=vt.pop())<=_t)){var St=ge+Math.ceil((Ue-ge)/_t/2)*_t;Wu(ce,St,ge,Ue,bt),vt.push(ge,St,St,Ue)}}return ei.prototype.all=function(){return this._all(this.data,[])},ei.prototype.search=function(ce){var ge=this.data,Ue=[];if(!pc(ce,ge))return Ue;for(var _t=this.toBBox,bt=[];ge;){for(var vt=0;vt<ge.children.length;vt++){var St=ge.children[vt],cn=ge.leaf?_t(St):St;pc(ce,cn)&&(ge.leaf?Ue.push(St):W4(ce,cn)?this._all(St,Ue):bt.push(St))}ge=bt.pop()}return Ue},ei.prototype.collides=function(ce){var ge=this.data;if(!pc(ce,ge))return!1;for(var Ue=[];ge;){for(var _t=0;_t<ge.children.length;_t++){var bt=ge.children[_t],vt=ge.leaf?this.toBBox(bt):bt;if(pc(ce,vt)){if(ge.leaf||W4(ce,vt))return!0;Ue.push(bt)}}ge=Ue.pop()}return!1},ei.prototype.load=function(ce){if(!ce||!ce.length)return this;if(ce.length<this._minEntries){for(var ge=0;ge<ce.length;ge++)this.insert(ce[ge]);return this}var Ue=this._build(ce.slice(),0,ce.length-1,0);if(this.data.children.length)if(this.data.height===Ue.height)this._splitRoot(this.data,Ue);else{if(this.data.height<Ue.height){var _t=this.data;this.data=Ue,Ue=_t}this._insert(Ue,this.data.height-Ue.height-1,!0)}else this.data=Ue;return this},ei.prototype.insert=function(ce){return ce&&this._insert(ce,this.data.height-1),this},ei.prototype.clear=function(){return this.data=mc([]),this},ei.prototype.remove=function(ce,ge){if(!ce)return this;for(var Ue,_t,bt,vt=this.data,St=this.toBBox(ce),cn=[],An=[];vt||cn.length;){if(vt||(vt=cn.pop(),_t=cn[cn.length-1],Ue=An.pop(),bt=!0),vt.leaf){var mn=ju(ce,vt.children,ge);if(-1!==mn)return vt.children.splice(mn,1),cn.push(vt),this._condense(cn),this}bt||vt.leaf||!W4(vt,St)?_t?(Ue++,vt=_t.children[Ue],bt=!1):vt=null:(cn.push(vt),An.push(Ue),Ue=0,_t=vt,vt=vt.children[0])}return this},ei.prototype.toBBox=function(ce){return ce},ei.prototype.compareMinX=function(ce,ge){return ce.minX-ge.minX},ei.prototype.compareMinY=function(ce,ge){return ce.minY-ge.minY},ei.prototype.toJSON=function(){return this.data},ei.prototype.fromJSON=function(ce){return this.data=ce,this},ei.prototype._all=function(ce,ge){for(var Ue=[];ce;)ce.leaf?ge.push.apply(ge,ce.children):Ue.push.apply(Ue,ce.children),ce=Ue.pop();return ge},ei.prototype._build=function(ce,ge,Ue,_t){var bt,vt=Ue-ge+1,St=this._maxEntries;if(vt<=St)return w1(bt=mc(ce.slice(ge,Ue+1)),this.toBBox),bt;_t||(_t=Math.ceil(Math.log(vt)/Math.log(St)),St=Math.ceil(vt/Math.pow(St,_t-1))),(bt=mc([])).leaf=!1,bt.height=_t;var cn=Math.ceil(vt/St),An=cn*Math.ceil(Math.sqrt(St));D5(ce,ge,Ue,An,this.compareMinX);for(var mn=ge;mn<=Ue;mn+=An){var pi=Math.min(mn+An-1,Ue);D5(ce,mn,pi,cn,this.compareMinY);for(var qn=mn;qn<=pi;qn+=cn){var Yi=Math.min(qn+cn-1,pi);bt.children.push(this._build(ce,qn,Yi,_t-1))}}return w1(bt,this.toBBox),bt},ei.prototype._chooseSubtree=function(ce,ge,Ue,_t){for(;_t.push(ge),!ge.leaf&&_t.length-1!==Ue;){for(var bt=1/0,vt=1/0,St=void 0,cn=0;cn<ge.children.length;cn++){var An=ge.children[cn],mn=S1(An),pi=(qn=ce,Yi=An,(Math.max(Yi.maxX,qn.maxX)-Math.min(Yi.minX,qn.minX))*(Math.max(Yi.maxY,qn.maxY)-Math.min(Yi.minY,qn.minY))-mn);pi<vt?(vt=pi,bt=mn<bt?mn:bt,St=An):pi===vt&&mn<bt&&(bt=mn,St=An)}ge=St||ge.children[0]}var qn,Yi;return ge},ei.prototype._insert=function(ce,ge,Ue){var _t=Ue?ce:this.toBBox(ce),bt=[],vt=this._chooseSubtree(_t,this.data,ge,bt);for(vt.children.push(ce),fc(vt,_t);ge>=0&&bt[ge].children.length>this._maxEntries;)this._split(bt,ge),ge--;this._adjustParentBBoxes(_t,bt,ge)},ei.prototype._split=function(ce,ge){var Ue=ce[ge],_t=Ue.children.length,bt=this._minEntries;this._chooseSplitAxis(Ue,bt,_t);var vt=this._chooseSplitIndex(Ue,bt,_t),St=mc(Ue.children.splice(vt,Ue.children.length-vt));St.height=Ue.height,St.leaf=Ue.leaf,w1(Ue,this.toBBox),w1(St,this.toBBox),ge?ce[ge-1].children.push(St):this._splitRoot(Ue,St)},ei.prototype._splitRoot=function(ce,ge){this.data=mc([ce,ge]),this.data.height=ce.height+1,this.data.leaf=!1,w1(this.data,this.toBBox)},ei.prototype._chooseSplitIndex=function(ce,ge,Ue){for(var _t,bt,vt,St,cn,An,mn,pi=1/0,qn=1/0,Yi=ge;Yi<=Ue-ge;Yi++){var Vl=fi(ce,0,Yi,this.toBBox),T1=fi(ce,Yi,Ue,this.toBBox),kr=(bt=Vl,vt=T1,void 0,void 0,void 0,void 0,St=Math.max(bt.minX,vt.minX),cn=Math.max(bt.minY,vt.minY),An=Math.min(bt.maxX,vt.maxX),mn=Math.min(bt.maxY,vt.maxY),Math.max(0,An-St)*Math.max(0,mn-cn)),gc=S1(Vl)+S1(T1);kr<pi?(pi=kr,_t=Yi,qn=gc<qn?gc:qn):kr===pi&&gc<qn&&(qn=gc,_t=Yi)}return _t||Ue-ge},ei.prototype._chooseSplitAxis=function(ce,ge,Ue){var _t=ce.leaf?this.compareMinX:E5,bt=ce.leaf?this.compareMinY:A5;this._allDistMargin(ce,ge,Ue,_t)<this._allDistMargin(ce,ge,Ue,bt)&&ce.children.sort(_t)},ei.prototype._allDistMargin=function(ce,ge,Ue,_t){ce.children.sort(_t);for(var bt=this.toBBox,vt=fi(ce,0,ge,bt),St=fi(ce,Ue-ge,Ue,bt),cn=Za(vt)+Za(St),An=ge;An<Ue-ge;An++){var mn=ce.children[An];fc(vt,ce.leaf?bt(mn):mn),cn+=Za(vt)}for(var pi=Ue-ge-1;pi>=ge;pi--){var qn=ce.children[pi];fc(St,ce.leaf?bt(qn):qn),cn+=Za(St)}return cn},ei.prototype._adjustParentBBoxes=function(ce,ge,Ue){for(var _t=Ue;_t>=0;_t--)fc(ge[_t],ce)},ei.prototype._condense=function(ce){for(var ge=ce.length-1,Ue=void 0;ge>=0;ge--)0===ce[ge].children.length?ge>0?(Ue=ce[ge-1].children).splice(Ue.indexOf(ce[ge]),1):this.clear():w1(ce[ge],this.toBBox)},ei}()}},Gu=>{Gu(Gu.s=155)}]);