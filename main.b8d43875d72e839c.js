(self.webpackChunkpassiveopen=self.webpackChunkpassiveopen||[]).push([[179],{920:(fp,pp,qa)=>{"use strict";function mn(n){return"function"==typeof n}function jn(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const mp=jn(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function oa(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class ri{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(mn(i))try{i()}catch(s){e=s instanceof mp?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Yg(s)}catch(o){e=e??[],o instanceof mp?e=[...e,...o.errors]:e.push(o)}}if(e)throw new mp(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Yg(e);else{if(e instanceof ri){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&oa(t,e)}remove(e){const{_finalizers:t}=this;t&&oa(t,e),e instanceof ri&&e._removeParent(this)}}ri.EMPTY=(()=>{const n=new ri;return n.closed=!0,n})();const $c=ri.EMPTY;function qg(n){return n instanceof ri||n&&"closed"in n&&mn(n.remove)&&mn(n.add)&&mn(n.unsubscribe)}function Yg(n){mn(n)?n():n.unsubscribe()}const aa={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Dl={setTimeout(n,e,...t){const{delegate:i}=Dl;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Dl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function y1(n){Dl.setTimeout(()=>{const{onUnhandledError:e}=aa;if(!e)throw n;e(n)})}function qc(){}const Yc=me("C",void 0,void 0);function me(n,e,t){return{kind:n,value:e,error:t}}let ze=null;function ht(n){if(aa.useDeprecatedSynchronousErrorHandling){const e=!ze;if(e&&(ze={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=ze;if(ze=null,t)throw i}}else n()}class ut extends ri{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qg(e)&&e.add(this)):this.destination=hd}static create(e,t,i){return new un(e,t,i)}next(e){this.isStopped?Oi(function ae(n){return me("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Oi(function Xg(n){return me("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Oi(Yc,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const bt=Function.prototype.bind;function tn(n,e){return bt.call(n,e)}class wn{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){si(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){si(i)}else si(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){si(t)}}}class un extends ut{constructor(e,t,i){let r;if(super(),mn(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&aa.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&tn(e.next,s),error:e.error&&tn(e.error,s),complete:e.complete&&tn(e.complete,s)}):r=e}this.destination=new wn(r)}}function si(n){aa.useDeprecatedSynchronousErrorHandling?function ft(n){aa.useDeprecatedSynchronousErrorHandling&&ze&&(ze.errorThrown=!0,ze.error=n)}(n):y1(n)}function Oi(n,e){const{onStoppedNotification:t}=aa;t&&Dl.setTimeout(()=>t(n,e))}const hd={closed:!0,next:qc,error:function zn(n){throw n},complete:qc},la="function"==typeof Symbol&&Symbol.observable||"@@observable";function bs(n){return n}function Zg(n){return 0===n.length?bs:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let bn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function YY(n){return n&&n instanceof ut||function no(n){return n&&mn(n.next)&&mn(n.error)&&mn(n.complete)}(n)&&qg(n)}(t)?t:new un(t,i,r);return ht(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Zc(i))((r,s)=>{const o=new un({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[la](){return this}pipe(...t){return Zg(t)(this)}toPromise(t){return new(t=Zc(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Zc(n){var e;return null!==(e=n??aa.Promise)&&void 0!==e?e:Promise}const XY=jn(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let xt=(()=>{class n extends bn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new NT(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new XY}next(t){ht(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){ht(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){ht(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?$c:(this.currentObservers=null,s.push(t),new ri(()=>{this.currentObservers=null,oa(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new bn;return t.source=this,t}}return n.create=(e,t)=>new NT(e,t),n})();class NT extends xt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:$c}}function zT(n){return mn(n?.lift)}function Ei(n){return e=>{if(zT(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function oi(n,e,t,i,r){return new ZY(n,e,t,i,r)}class ZY extends ut{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function It(n,e){return Ei((t,i)=>{let r=0;t.subscribe(oi(i,s=>{i.next(n.call(e,s,r++))}))})}function fd(n){return this instanceof fd?(this.v=n,this):new fd(n)}function JY(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(f){return new Promise(function(p,m){s.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof fd?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(i[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function eX(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function HT(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const p7=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function UT(n){return mn(n?.then)}function GT(n){return mn(n[la])}function WT(n){return Symbol.asyncIterator&&mn(n?.[Symbol.asyncIterator])}function jT(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const $T=function nX(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function qT(n){return mn(n?.[$T])}function YT(n){return JY(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield fd(t.read());if(r)return yield fd(void 0);yield yield fd(i)}}finally{t.releaseLock()}})}function XT(n){return mn(n?.getReader)}function xs(n){if(n instanceof bn)return n;if(null!=n){if(GT(n))return function iX(n){return new bn(e=>{const t=n[la]();if(mn(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(p7(n))return function rX(n){return new bn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(UT(n))return function sX(n){return new bn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,y1)})}(n);if(WT(n))return ZT(n);if(qT(n))return function oX(n){return new bn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(XT(n))return function aX(n){return ZT(YT(n))}(n)}throw jT(n)}function ZT(n){return new bn(e=>{(function lX(n,e){var t,i,r,s;return function KY(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=eX(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Al(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Pr(n,e,t=1/0){return mn(e)?Pr((i,r)=>It((s,o)=>e(i,s,r,o))(xs(n(i,r))),t):("number"==typeof e&&(t=e),Ei((i,r)=>function cX(n,e,t,i,r,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=m=>c<i?p(m):l.push(m),p=m=>{s&&e.next(m),c++;let g=!1;xs(t(m,u++)).subscribe(oi(e,_=>{r?.(_),s?f(_):e.next(_)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<i;){const _=l.shift();o?Al(e,o,()=>p(_)):p(_)}h()}catch(_){e.error(_)}}))};return n.subscribe(oi(e,f,()=>{d=!0,h()})),()=>{a?.()}}(i,r,n,t)))}function b1(n=1/0){return Pr(bs,n)}const Rl=new bn(n=>n.complete());function KT(n){return n&&mn(n.schedule)}function m7(n){return n[n.length-1]}function QT(n){return mn(m7(n))?n.pop():void 0}function gp(n){return KT(m7(n))?n.pop():void 0}function JT(n,e=0){return Ei((t,i)=>{t.subscribe(oi(i,r=>Al(i,n,()=>i.next(r),e),()=>Al(i,n,()=>i.complete(),e),r=>Al(i,n,()=>i.error(r),e)))})}function eE(n,e=0){return Ei((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function tE(n,e){if(!n)throw new Error("Iterable cannot be null");return new bn(t=>{Al(t,e,()=>{const i=n[Symbol.asyncIterator]();Al(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function er(n,e){return e?function _X(n,e){if(null!=n){if(GT(n))return function hX(n,e){return xs(n).pipe(eE(e),JT(e))}(n,e);if(p7(n))return function pX(n,e){return new bn(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(UT(n))return function fX(n,e){return xs(n).pipe(eE(e),JT(e))}(n,e);if(WT(n))return tE(n,e);if(qT(n))return function mX(n,e){return new bn(t=>{let i;return Al(t,e,()=>{i=n[$T](),Al(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>mn(i?.return)&&i.return()})}(n,e);if(XT(n))return function gX(n,e){return tE(YT(n),e)}(n,e)}throw jT(n)}(n,e):xs(n)}function Il(...n){const e=gp(n),t=function dX(n,e){return"number"==typeof m7(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?xs(i[0]):b1(t)(er(i,e)):Rl}function nE(n={}){const{connector:e=(()=>new xt),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},p=()=>{const m=o;f(),m?.unsubscribe()};return Ei((m,g)=>{c++,!d&&!u&&h();const _=l=l??e();g.add(()=>{c--,0===c&&!d&&!u&&(a=g7(p,r))}),_.subscribe(g),!o&&c>0&&(o=new un({next:v=>_.next(v),error:v=>{d=!0,h(),a=g7(f,t,v),_.error(v)},complete:()=>{u=!0,h(),a=g7(f,i),_.complete()}}),xs(m).subscribe(o))})(s)}}function g7(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new un({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function Yn(n){for(let e in n)if(n[e]===Yn)return e;throw Error("Could not find renamed property on target object.")}function _7(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Xn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Xn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function v7(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const vX=Yn({__forward_ref__:Yn});function dn(n){return n.__forward_ref__=dn,n.toString=function(){return Xn(this())},n}function Ft(n){return y7(n)?n():n}function y7(n){return"function"==typeof n&&n.hasOwnProperty(vX)&&n.__forward_ref__===dn}class Ce extends Error{constructor(e,t){super(function Kg(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Gt(n){return"string"==typeof n?n:null==n?"":String(n)}function Qg(n,e){throw new Ce(-201,!1)}function ro(n,e){null==n&&function On(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function ve(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}const MX=ve;function ot(n){return{providers:n.providers||[],imports:n.imports||[]}}function Jg(n){return iE(n,e3)||iE(n,sE)}function iE(n,e){return n.hasOwnProperty(e)?n[e]:null}function rE(n){return n&&(n.hasOwnProperty(b7)||n.hasOwnProperty(DX))?n[b7]:null}const e3=Yn({\u0275prov:Yn}),b7=Yn({\u0275inj:Yn}),sE=Yn({ngInjectableDef:Yn}),DX=Yn({ngInjectorDef:Yn});var Et=(()=>((Et=Et||{})[Et.Default=0]="Default",Et[Et.Host=1]="Host",Et[Et.Self=2]="Self",Et[Et.SkipSelf=4]="SkipSelf",Et[Et.Optional=8]="Optional",Et))();let x7;function Oo(n){const e=x7;return x7=n,e}function oE(n,e,t){const i=Jg(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Et.Optional?null:void 0!==e?e:void Qg(Xn(n))}function Kc(n){return{toString:n}.toString()}var ca=(()=>((ca=ca||{})[ca.OnPush=0]="OnPush",ca[ca.Default=1]="Default",ca))(),ua=(()=>{return(n=ua||(ua={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ua;var n})();const Zn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),x1={},In=[],t3=Yn({\u0275cmp:Yn}),w7=Yn({\u0275dir:Yn}),C7=Yn({\u0275pipe:Yn}),aE=Yn({\u0275mod:Yn}),Ll=Yn({\u0275fac:Yn}),_p=Yn({__NG_ELEMENT_ID__:Yn});let RX=0;function dt(n){return Kc(()=>{const t=!0===n.standalone,i={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ca.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||In,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||ua.Emulated,id:"c"+RX++,styles:n.styles||In,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.dependencies,o=n.features;return r.inputs=uE(n.inputs,i),r.outputs=uE(n.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(lE).filter(cE):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Cs).filter(cE):null,r})}function lE(n){return Bn(n)||ws(n)}function cE(n){return null!==n}function at(n){return Kc(()=>({type:n.type,bootstrap:n.bootstrap||In,declarations:n.declarations||In,imports:n.imports||In,exports:n.exports||In,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function uE(n,e){if(null==n)return x1;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const le=dt;function zs(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Bn(n){return n[t3]||null}function ws(n){return n[w7]||null}function Cs(n){return n[C7]||null}function so(n,e){const t=n[aE]||null;if(!t&&!0===e)throw new Error(`Type ${Xn(n)} does not have '\u0275mod' property.`);return t}function Bs(n){return Array.isArray(n)&&"object"==typeof n[1]}function ha(n){return Array.isArray(n)&&!0===n[1]}function T7(n){return 0!=(8&n.flags)}function o3(n){return 2==(2&n.flags)}function a3(n){return 1==(1&n.flags)}function fa(n){return null!==n.template}function FX(n){return 0!=(256&n[2])}function vd(n,e){return n.hasOwnProperty(Ll)?n[Ll]:null}class BX{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Di(){return fE}function fE(n){return n.type.prototype.ngOnChanges&&(n.setInput=HX),VX}function VX(){const n=mE(this),e=n?.current;if(e){const t=n.previous;if(t===x1)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function HX(n,e,t,i){const r=mE(n)||function UX(n,e){return n[pE]=e}(n,{previous:x1,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new BX(l&&l.currentValue,e,o===x1),n[i]=e}Di.ngInherit=!0;const pE="__ngSimpleChanges__";function mE(n){return n[pE]||null}function cr(n){for(;Array.isArray(n);)n=n[0];return n}function l3(n,e){return cr(e[n])}function zo(n,e){return cr(e[n.index])}function I7(n,e){return n.data[e]}function T1(n,e){return n[e]}function ao(n,e){const t=e[n];return Bs(t)?t:t[0]}function c3(n){return 64==(64&n[2])}function Qc(n,e){return null==e?null:n[e]}function gE(n){n[18]=0}function k7(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const Ht={lFrame:TE(null),bindingsEnabled:!0};function vE(){return Ht.bindingsEnabled}function Se(){return Ht.lFrame.lView}function xn(){return Ht.lFrame.tView}function Xt(n){return Ht.lFrame.contextLView=n,n[8]}function Zt(n){return Ht.lFrame.contextLView=null,n}function Mr(){let n=yE();for(;null!==n&&64===n.type;)n=n.parent;return n}function yE(){return Ht.lFrame.currentTNode}function Ya(n,e){const t=Ht.lFrame;t.currentTNode=n,t.isParent=e}function L7(){return Ht.lFrame.isParent}function P7(){Ht.lFrame.isParent=!1}function Ms(){const n=Ht.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Pl(){return Ht.lFrame.bindingIndex}function E1(){return Ht.lFrame.bindingIndex++}function Ol(n){const e=Ht.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function iZ(n,e){const t=Ht.lFrame;t.bindingIndex=t.bindingRootIndex=n,O7(e)}function O7(n){Ht.lFrame.currentDirectiveIndex=n}function F7(n){const e=Ht.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function CE(){return Ht.lFrame.currentQueryIndex}function N7(n){Ht.lFrame.currentQueryIndex=n}function sZ(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function ME(n,e,t){if(t&Et.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Et.Host||(r=sZ(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Ht.lFrame=SE();return i.currentTNode=e,i.lView=n,!0}function z7(n){const e=SE(),t=n[1];Ht.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function SE(){const n=Ht.lFrame,e=null===n?null:n.child;return null===e?TE(n):e}function TE(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function EE(){const n=Ht.lFrame;return Ht.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const DE=EE;function B7(){const n=EE();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ss(){return Ht.lFrame.selectedIndex}function Jc(n){Ht.lFrame.selectedIndex=n}function Ni(){const n=Ht.lFrame;return I7(n.tView,n.selectedIndex)}function xi(){Ht.lFrame.currentNamespace="svg"}function u3(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function d3(n,e,t){RE(n,e,3,t)}function h3(n,e,t,i){(3&n[2])===t&&RE(n,e,t,i)}function V7(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function RE(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(hZ(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function hZ(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Cp{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function f3(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];kE(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function IE(n){return 3===n||4===n||6===n}function kE(n){return 64===n.charCodeAt(0)}function p3(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||LE(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function LE(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function PE(n){return-1!==n}function D1(n){return 32767&n}function A1(n,e){let t=function _Z(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let U7=!0;function m3(n){const e=U7;return U7=n,e}let vZ=0;const Xa={};function Sp(n,e){const t=W7(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,G7(i.data,n),G7(e,null),G7(i.blueprint,null));const r=g3(n,e),s=n.injectorIndex;if(PE(r)){const o=D1(r),a=A1(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function G7(n,e){n.push(0,0,0,0,0,0,0,0,e)}function W7(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function g3(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=GE(r),null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function _3(n,e,t){!function yZ(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(_p)&&(i=t[_p]),null==i&&(i=t[_p]=vZ++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function NE(n,e,t){if(t&Et.Optional||void 0!==n)return n;Qg()}function zE(n,e,t,i){if(t&Et.Optional&&void 0===i&&(i=null),0==(t&(Et.Self|Et.Host))){const r=n[9],s=Oo(void 0);try{return r?r.get(e,i,t&Et.Optional):oE(e,i,t&Et.Optional)}finally{Oo(s)}}return NE(i,0,t)}function BE(n,e,t,i=Et.Default,r){if(null!==n){if(1024&e[2]){const o=function MZ(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=VE(s,o,t,i|Et.Self,Xa);if(a!==Xa)return a;let l=s.parent;if(!l){const c=o[21];if(c){const u=c.get(t,Xa,i);if(u!==Xa)return u}l=GE(o),o=o[15]}s=l}return r}(n,e,t,i,Xa);if(o!==Xa)return o}const s=VE(n,e,t,i,Xa);if(s!==Xa)return s}return zE(e,t,i,r)}function VE(n,e,t,i,r){const s=function wZ(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(_p)?n[_p]:void 0;return"number"==typeof e?e>=0?255&e:CZ:e}(t);if("function"==typeof s){if(!ME(e,n,i))return i&Et.Host?NE(r,0,i):zE(e,t,i,r);try{const o=s(i);if(null!=o||i&Et.Optional)return o;Qg()}finally{DE()}}else if("number"==typeof s){let o=null,a=W7(n,e),l=-1,c=i&Et.Host?e[16][6]:null;for((-1===a||i&Et.SkipSelf)&&(l=-1===a?g3(n,e):e[a+8],-1!==l&&UE(i,!1)?(o=e[1],a=D1(l),e=A1(l,e)):a=-1);-1!==a;){const u=e[1];if(HE(s,a,u.data)){const d=xZ(a,e,t,o,i,c);if(d!==Xa)return d}l=e[a+8],-1!==l&&UE(i,e[1].data[a+8]===c)&&HE(s,a,e)?(o=u,a=D1(l),e=A1(l,e)):a=-1}}return r}function xZ(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=v3(a,o,t,null==i?o3(a)&&U7:i!=o&&0!=(3&a.type),r&Et.Host&&s===a);return null!==u?Tp(e,o,u,a):Xa}function v3(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=o[l];if(f&&fa(f)&&f.type===t)return l}return null}function Tp(n,e,t,i){let r=n[t];const s=e.data;if(function fZ(n){return n instanceof Cp}(r)){const o=r;o.resolving&&function yX(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Ce(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Rn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Gt(n)}(s[t]));const a=m3(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Oo(o.injectImpl):null;ME(n,i,Et.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function dZ(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=fE(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&Oo(l),m3(a),o.resolving=!1,DE()}}return r}function HE(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function UE(n,e){return!(n&Et.Self||n&Et.Host&&e)}class R1{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return BE(this._tNode,this._lView,e,i,t)}}function CZ(){return new R1(Mr(),Se())}function je(n){return Kc(()=>{const e=n.prototype.constructor,t=e[Ll]||j7(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Ll]||j7(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function j7(n){return y7(n)?()=>{const e=j7(Ft(n));return e&&e()}:vd(n)}function GE(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function Bo(n){return function bZ(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(IE(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(Mr(),n)}const k1="__parameters__";function P1(n,e,t){return Kc(()=>{const i=function $7(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(k1)?l[k1]:Object.defineProperty(l,k1,{value:[]})[k1];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class pe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ve({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function lo(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),lo(i,e)):e!==n&&e.push(i)}return e}function Fl(n,e){n.forEach(t=>Array.isArray(t)?Fl(t,e):e(t))}function jE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function y3(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Ap(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function co(n,e,t){let i=O1(n,e);return i>=0?n[1|i]=t:(i=~i,function DZ(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Y7(n,e){const t=O1(n,e);if(t>=0)return n[1|t]}function O1(n,e){return function YE(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const Rp={},Z7="__NG_DI_FLAG__",x3="ngTempTokenPath",FZ=/\n/gm,XE="__source";let Ip;function F1(n){const e=Ip;return Ip=n,e}function zZ(n,e=Et.Default){if(void 0===Ip)throw new Ce(-203,!1);return null===Ip?oE(n,void 0,e):Ip.get(n,e&Et.Optional?null:void 0,e)}function K(n,e=Et.Default){return(function AX(){return x7}()||zZ)(Ft(n),e)}function Vn(n,e=Et.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),K(n,e)}function K7(n){const e=[];for(let t=0;t<n.length;t++){const i=Ft(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Ce(900,!1);let r,s=Et.Default;for(let o=0;o<i.length;o++){const a=i[o],l=BZ(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(K(r,s))}else e.push(K(i))}return e}function kp(n,e){return n[Z7]=e,n.prototype[Z7]=e,n}function BZ(n){return n[Z7]}const Nl=kp(P1("Optional"),8),yd=kp(P1("SkipSelf"),4);let J7,M3,S3;function z1(n){return function ev(){if(void 0===M3&&(M3=null,Zn.trustedTypes))try{M3=Zn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return M3}()?.createHTML(n)||n}function sD(n){return function tv(){if(void 0===S3&&(S3=null,Zn.trustedTypes))try{S3=Zn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return S3}()?.createHTML(n)||n}class bd{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class eK extends bd{getTypeName(){return"HTML"}}class tK extends bd{getTypeName(){return"Style"}}class nK extends bd{getTypeName(){return"Script"}}class iK extends bd{getTypeName(){return"URL"}}class rK extends bd{getTypeName(){return"ResourceURL"}}function uo(n){return n instanceof bd?n.changingThisBreaksApplicationSecurity:n}function Za(n,e){const t=function sK(n){return n instanceof bd&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class dK{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(z1(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class hK{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=z1(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=z1(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const pK=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function T3(n){return(n=String(n)).match(pK)?n:"unsafe:"+n}function zl(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Op(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const cD=zl("area,br,col,hr,img,wbr"),uD=zl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),dD=zl("rp,rt"),nv=Op(cD,Op(uD,zl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Op(dD,zl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Op(dD,uD)),iv=zl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hD=Op(iv,zl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),mK=zl("script,style,template");class gK{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!nv.hasOwnProperty(t))return this.sanitizedSomething=!0,!mK.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!hD.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;iv[a]&&(l=T3(l)),this.buf.push(" ",o,'="',fD(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();nv.hasOwnProperty(t)&&!cD.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(fD(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const _K=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vK=/([^\#-~ |!])/g;function fD(n){return n.replace(/&/g,"&amp;").replace(_K,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(vK,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let E3;function pD(n,e){let t=null;try{E3=E3||function lD(n){const e=new hK(n);return function fK(){try{return!!(new window.DOMParser).parseFromString(z1(""),"text/html")}catch{return!1}}()?new dK(e):e}(n);let i=e?String(e):"";t=E3.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=E3.getInertBodyElement(i)}while(i!==s);return z1((new gK).sanitizeChildren(rv(t)||t))}finally{if(t){const i=rv(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function rv(n){return"content"in n&&function yK(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var En=(()=>((En=En||{})[En.NONE=0]="NONE",En[En.HTML=1]="HTML",En[En.STYLE=2]="STYLE",En[En.SCRIPT=3]="SCRIPT",En[En.URL=4]="URL",En[En.RESOURCE_URL=5]="RESOURCE_URL",En))();function xd(n){const e=Fp();return e?sD(e.sanitize(En.HTML,n)||""):Za(n,"HTML")?sD(uo(n)):pD(function rD(){return void 0!==J7?J7:typeof document<"u"?document:void 0}(),Gt(n))}function tu(n){const e=Fp();return e?e.sanitize(En.URL,n)||"":Za(n,"URL")?uo(n):T3(Gt(n))}function Fp(){const n=Se();return n&&n[12]}const sv=new pe("ENVIRONMENT_INITIALIZER"),gD=new pe("INJECTOR",-1),_D=new pe("INJECTOR_DEF_TYPES");class vD{get(e,t=Rp){if(t===Rp){const i=new Error(`NullInjectorError: No provider for ${Xn(e)}!`);throw i.name="NullInjectorError",i}return t}}function TK(...n){return{\u0275providers:yD(0,n)}}function yD(n,...e){const t=[],i=new Set;let r;return Fl(e,s=>{const o=s;ov(o,t,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&bD(r,t),t}function bD(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];Fl(r,s=>{e.push(s)})}}function ov(n,e,t,i){if(!(n=Ft(n)))return!1;let r=null,s=rE(n);const o=!s&&Bn(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=rE(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)ov(c,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{Fl(s.imports,u=>{ov(u,e,t,i)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&bD(c,e)}if(!a){const c=vd(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:In},{provide:_D,useValue:r,multi:!0},{provide:sv,useValue:()=>K(r),multi:!0})}const l=s.providers;null==l||a||Fl(l,u=>{e.push(u)})}}return r!==n&&void 0!==n.providers}const EK=Yn({provide:String,useValue:Yn});function av(n){return null!==n&&"object"==typeof n&&EK in n}function wd(n){return"function"==typeof n}const lv=new pe("Set Injector scope."),D3={},AK={};let cv;function A3(){return void 0===cv&&(cv=new vD),cv}class nu{}class CD extends nu{constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dv(e,o=>this.processProvider(o)),this.records.set(gD,B1(void 0,this)),r.has("environment")&&this.records.set(nu,B1(void 0,this));const s=this.records.get(lv);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(_D.multi,In,Et.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=F1(this),i=Oo(void 0);try{return e()}finally{F1(t),Oo(i)}}get(e,t=Rp,i=Et.Default){this.assertNotDestroyed();const r=F1(this),s=Oo(void 0);try{if(!(i&Et.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function PK(n){return"function"==typeof n||"object"==typeof n&&n instanceof pe}(e)&&Jg(e);a=l&&this.injectableDefInScope(l)?B1(uv(e),D3):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Et.Self?A3():this.parent).get(e,t=i&Et.Optional&&t===Rp?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[x3]=o[x3]||[]).unshift(Xn(e)),r)throw o;return function VZ(n,e,t,i){const r=n[x3];throw e[XE]&&r.unshift(e[XE]),n.message=function HZ(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Xn(e);if(Array.isArray(e))r=e.map(Xn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Xn(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(FZ,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[x3]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Oo(s),F1(r)}}resolveInjectorInitializers(){const e=F1(this),t=Oo(void 0);try{const i=this.get(sv.multi,In,Et.Self);for(const r of i)r()}finally{F1(e),Oo(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Xn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ce(205,!1)}processProvider(e){let t=wd(e=Ft(e))?e:Ft(e&&e.provide);const i=function IK(n){return av(n)?B1(void 0,n.useValue):B1(MD(n),D3)}(e);if(wd(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=B1(void 0,D3,!0),r.factory=()=>K7(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===D3&&(t.value=AK,t.value=t.factory()),"object"==typeof t.value&&t.value&&function LK(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ft(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function uv(n){const e=Jg(n),t=null!==e?e.factory:vd(n);if(null!==t)return t;if(n instanceof pe)throw new Ce(204,!1);if(n instanceof Function)return function RK(n){const e=n.length;if(e>0)throw Ap(e,"?"),new Ce(204,!1);const t=function TX(n){const e=n&&(n[e3]||n[sE]);if(e){const t=function EX(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Ce(204,!1)}function MD(n,e,t){let i;if(wd(n)){const r=Ft(n);return vd(r)||uv(r)}if(av(n))i=()=>Ft(n.useValue);else if(function wD(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...K7(n.deps||[]));else if(function xD(n){return!(!n||!n.useExisting)}(n))i=()=>K(Ft(n.useExisting));else{const r=Ft(n&&(n.useClass||n.provide));if(!function kK(n){return!!n.deps}(n))return vd(r)||uv(r);i=()=>new r(...K7(n.deps))}return i}function B1(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function OK(n){return!!n.\u0275providers}function dv(n,e){for(const t of n)Array.isArray(t)?dv(t,e):OK(t)?dv(t.\u0275providers,e):e(t)}class SD{}class zK{resolveComponentFactory(e){throw function NK(n){const e=Error(`No component factory found for ${Xn(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Cd=(()=>{class n{}return n.NULL=new zK,n})();function BK(){return V1(Mr(),Se())}function V1(n,e){return new Be(zo(n,e))}let Be=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=BK,n})();function VK(n){return n instanceof Be?n.nativeElement:n}class Np{}let ho=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function HK(){const n=Se(),t=ao(Mr().index,n);return(Bs(t)?t:n)[11]}(),n})(),UK=(()=>{class n{}return n.\u0275prov=ve({token:n,providedIn:"root",factory:()=>null}),n})();class iu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const GK=new iu("14.2.2"),hv={};function _v(n){return n.ngOriginalError}class Bl{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&_v(e);for(;t&&_v(t);)t=_v(t);return t||null}}const vv=new Map;let tQ=0;const bv="__ngContext__";function ts(n,e){Bs(e)?(n[bv]=e[20],function iQ(n){vv.set(n[20],n)}(e)):n[bv]=e}function zD(n){return n.ownerDocument.defaultView}function Vl(n){return n instanceof Function?n():n}var Vs=(()=>((Vs=Vs||{})[Vs.Important=1]="Important",Vs[Vs.DashCase=2]="DashCase",Vs))();function wv(n,e){return undefined(n,e)}function Bp(n){const e=n[3];return ha(e)?e[3]:e}function Cv(n){return HD(n[13])}function Mv(n){return HD(n[4])}function HD(n){for(;null!==n&&!ha(n);)n=n[4];return n}function U1(n,e,t,i,r){if(null!=i){let s,o=!1;ha(i)?s=i:Bs(i)&&(o=!0,i=i[0]);const a=cr(i);0===n&&null!==t?null==r?qD(e,t,a):Md(e,t,a,r||null,!0):1===n&&null!==t?Md(e,t,a,r||null,!0):2===n?function eA(n,e,t){const i=R3(n,e);i&&function AQ(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function kQ(n,e,t,i,r){const s=t[7];s!==cr(t)&&U1(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];Vp(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function Tv(n,e,t){return n.createElement(e,t)}function GD(n,e){const t=n[9],i=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,k7(r,-1)),t.splice(i,1)}function Ev(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&GD(r,i),e>0&&(n[t-1][4]=i[4]);const s=y3(n,10+e);!function xQ(n,e){Vp(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function WD(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&Vp(n,e,t,3,null,null),function MQ(n){let e=n[13];if(!e)return Dv(n[1],n);for(;e;){let t=null;if(Bs(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Bs(e)&&Dv(e[1],e),e=e[3];null===e&&(e=n),Bs(e)&&Dv(e[1],e),t=e&&e[4]}e=t}}(e)}}function Dv(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function DQ(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Cp)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function EQ(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):cr(e[o]),l=i[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&ha(e[3])){t!==e[3]&&GD(t,e);const i=e[19];null!==i&&i.detachView(n)}!function rQ(n){vv.delete(n[20])}(e)}}function jD(n,e,t){return function $D(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===ua.None||r===ua.Emulated)return null}return zo(i,t)}(n,e.parent,t)}function Md(n,e,t,i,r){n.insertBefore(e,t,i,r)}function qD(n,e,t){n.appendChild(e,t)}function YD(n,e,t,i,r){null!==i?Md(n,e,t,i,r):qD(n,e,t)}function R3(n,e){return n.parentNode(e)}function XD(n,e,t){return KD(n,e,t)}let KD=function ZD(n,e,t){return 40&n.type?zo(n,t):null};function I3(n,e,t,i){const r=jD(n,i,e),s=e[11],a=XD(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)YD(s,r,t[l],a,!1);else YD(s,r,t,a,!1)}function k3(n,e){if(null!==e){const t=e.type;if(3&t)return zo(e,n);if(4&t)return Rv(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return k3(n,i);{const r=n[e.index];return ha(r)?Rv(-1,r):cr(r)}}if(32&t)return wv(e,n)()||cr(n[e.index]);{const i=JD(n,e);return null!==i?Array.isArray(i)?i[0]:k3(Bp(n[16]),i):k3(n,e.next)}}return null}function JD(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Rv(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return k3(i,r)}return e[7]}function Iv(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&ts(cr(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)Iv(n,e,t.child,i,r,s,!1),U1(e,n,r,a,s);else if(32&l){const c=wv(t,i);let u;for(;u=c();)U1(e,n,r,u,s);U1(e,n,r,a,s)}else 16&l?tA(n,e,i,t,r,s):U1(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Vp(n,e,t,i,r,s){Iv(t,i,n.firstChild,e,r,s,!1)}function tA(n,e,t,i,r,s){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)U1(e,n,r,l[c],s);else Iv(n,e,l,o[3],r,s,!0)}function nA(n,e,t){n.setAttribute(e,"style",t)}function kv(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function iA(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const rA="ng-template";function PQ(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==iA(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function sA(n){return 4===n.type&&n.value!==rA}function OQ(n,e,t){return e===(4!==n.type||t?n.value:rA)}function FQ(n,e,t){let i=4;const r=n.attrs||[],s=function BQ(n){for(let e=0;e<n.length;e++)if(IE(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!OQ(n,l,t)||""===l&&1===e.length){if(pa(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!PQ(n.attrs,c,t)){if(pa(i))return!1;o=!0}continue}const d=NQ(8&i?"class":l,r,sA(n),t);if(-1===d){if(pa(i))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==iA(f,c,0)||2&i&&c!==h){if(pa(i))return!1;o=!0}}}}else{if(!o&&!pa(i)&&!pa(l))return!1;if(o&&pa(l))continue;o=!1,i=l|1&i}}return pa(i)||o}function pa(n){return 0==(1&n)}function NQ(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function VQ(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function oA(n,e,t=!1){for(let i=0;i<e.length;i++)if(FQ(n,e[i],t))return!0;return!1}function HQ(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function aA(n,e){return n?":not("+e.trim()+")":e}function UQ(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!pa(o)&&(e+=aA(s,r),r=""),i=o,s=s||!pa(i);t++}return""!==r&&(e+=aA(s,r)),e}const Wt={};function H(n){lA(xn(),Se(),Ss()+n,!1)}function lA(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&d3(e,s,t)}else{const s=n.preOrderHooks;null!==s&&h3(e,s,0,t)}Jc(t)}function hA(n,e=null,t=null,i){const r=fA(n,e,t,i);return r.resolveInjectorInitializers(),r}function fA(n,e=null,t=null,i,r=new Set){const s=[t||In,TK(n)];return i=i||("object"==typeof n?void 0:Xn(n)),new CD(s,e||A3(),i||null,r)}let ur=(()=>{class n{static create(t,i){if(Array.isArray(t))return hA({name:""},i,t,"");{const r=t.name??"";return hA({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=Rp,n.NULL=new vD,n.\u0275prov=ve({token:n,providedIn:"any",factory:()=>K(gD)}),n.__NG_ELEMENT_ID__=-1,n})();function S(n,e=Et.Default){const t=Se();return null===t?K(n,e):BE(Mr(),t,Ft(n),e)}function Sd(){throw new Error("invalid")}function P3(n,e){return n<<17|e<<2}function ma(n){return n>>17&32767}function Nv(n){return 2|n}function Hl(n){return(131068&n)>>2}function zv(n,e){return-131069&n|e<<2}function Bv(n){return 1|n}function RA(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];N7(r),o.contentQueries(2,e[s],s)}}}function N3(n,e,t,i,r,s,o,a,l,c,u){const d=e.blueprint.slice();return d[0]=r,d[2]=76|i,(null!==u||n&&1024&n[2])&&(d[2]|=1024),gE(d),d[3]=d[15]=n,d[8]=t,d[10]=o||n&&n[10],d[11]=a||n&&n[11],d[12]=l||n&&n[12]||null,d[9]=c||n&&n[9]||null,d[6]=s,d[20]=function nQ(){return tQ++}(),d[21]=u,d[16]=2==e.type?n[16]:d,d}function W1(n,e,t,i,r){let s=n.data[e];if(null===s)s=function qv(n,e,t,i,r){const s=yE(),o=L7(),l=n.data[e]=function MJ(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,i,r),function nZ(){return Ht.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function wp(){const n=Ht.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ya(s,!0),s}function j1(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Yv(n,e,t){z7(e);try{const i=n.viewQuery;null!==i&&ny(1,i,t);const r=n.template;null!==r&&IA(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&RA(n,e),n.staticViewQueries&&ny(2,n.viewQuery,t);const s=n.components;null!==s&&function xJ(n,e){for(let t=0;t<e.length;t++)VJ(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,B7()}}function z3(n,e,t,i){const r=e[2];if(128!=(128&r)){z7(e);try{gE(e),function xE(n){return Ht.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&IA(n,e,t,2,i);const o=3==(3&r);if(o){const c=n.preOrderCheckHooks;null!==c&&d3(e,c,null)}else{const c=n.preOrderHooks;null!==c&&h3(e,c,0,null),V7(e,0)}if(function zJ(n){for(let e=Cv(n);null!==e;e=Mv(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(512&r[2])&&k7(s,1),r[2]|=512}}}(e),function NJ(n){for(let e=Cv(n);null!==e;e=Mv(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];c3(i)&&z3(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&RA(n,e),o){const c=n.contentCheckHooks;null!==c&&d3(e,c)}else{const c=n.contentHooks;null!==c&&h3(e,c,1),V7(e,1)}!function yJ(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)Jc(~r);else{const s=r,o=t[++i],a=t[++i];iZ(o,s),a(2,e[s])}}}finally{Jc(-1)}}(n,e);const a=n.components;null!==a&&function bJ(n,e){for(let t=0;t<e.length;t++)BJ(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&ny(2,l,i),o){const c=n.viewCheckHooks;null!==c&&d3(e,c)}else{const c=n.viewHooks;null!==c&&h3(e,c,2),V7(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,k7(e[3],-1))}finally{B7()}}}function IA(n,e,t,i,r){const s=Ss(),o=2&i;try{Jc(-1),o&&e.length>22&&lA(n,e,22,!1),t(i,r)}finally{Jc(s)}}function kA(n,e,t){if(T7(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function Xv(n,e,t){!vE()||(function AJ(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||Sp(t,e),ts(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=fa(l);c&&PJ(e,t,l);const u=Tp(e,n,a,t);ts(u,e),null!==o&&OJ(0,a-r,u,l,0,o),c&&(ao(t.index,e)[8]=u)}}(n,e,t,zo(t,e)),128==(128&t.flags)&&function RJ(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function rZ(){return Ht.lFrame.currentDirectiveIndex}();try{Jc(s);for(let a=i;a<r;a++){const l=n.data[a],c=e[a];O7(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&BA(l,c)}}finally{Jc(-1),O7(o)}}(n,e,t))}function Zv(n,e,t=zo){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function LA(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Kv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Kv(n,e,t,i,r,s,o,a,l,c){const u=22+i,d=u+r,h=function wJ(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Wt);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function PA(n,e,t,i){const r=WA(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&jA(n).push(i,r.length-1))}function OA(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function FA(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const u=r[c],d=u.inputs,h=null===s||sA(e)?null:FJ(d,s);o.push(h),a=OA(d,c,a),l=OA(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}function fo(n,e,t,i,r,s,o,a){const l=zo(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(iy(n,t,u,i,r),o3(e)&&NA(t,e.index)):3&e.type&&(i=function SJ(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r))}function NA(n,e){const t=ao(e,n);16&t[2]||(t[2]|=32)}function Qv(n,e,t,i){let r=!1;if(vE()){const s=function IJ(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];oA(t,o.selectors,!1)&&(r||(r=[]),_3(Sp(t,e),n,o.type),fa(o)?(VA(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,HA(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=j1(n,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=p3(t.mergedAttrs,d.hostAttrs),UA(n,t,e,c,d),LJ(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}FA(n,t)}o&&function kJ(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new Ce(-301,!1);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=p3(t.mergedAttrs,t.attrs),r}function zA(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function DJ(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function BA(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function VA(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function LJ(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;fa(e)&&(t[""]=n)}}function HA(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function UA(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=vd(r.type)),o=new Cp(s,fa(r),S);n.blueprint[i]=o,t[i]=o,zA(n,e,0,i,j1(n,t,r.hostVars,Wt),r)}function PJ(n,e,t){const i=zo(e,n),r=LA(t),s=n[10],o=B3(n,N3(n,r,null,t.onPush?32:16,i,e,s,s.createRenderer(i,t),null,null,null));n[e.index]=o}function Ka(n,e,t,i,r,s){const o=zo(n,e);!function Jv(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?Gt(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[11],o,s,n.value,t,i,r)}function OJ(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?i.setInput(t,d,c,u):t[u]=d}}}function FJ(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function GA(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function BJ(n,e){const t=ao(e,n);if(c3(t)){const i=t[1];48&t[2]?z3(i,t,i.template,t[8]):t[5]>0&&ey(t)}}function ey(n){for(let i=Cv(n);null!==i;i=Mv(i))for(let r=10;r<i.length;r++){const s=i[r];if(c3(s))if(512&s[2]){const o=s[1];z3(o,s,o.template,s[8])}else s[5]>0&&ey(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=ao(t[i],n);c3(r)&&r[5]>0&&ey(r)}}function VJ(n,e){const t=ao(e,n),i=t[1];(function HJ(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),Yv(i,t,t[8])}function B3(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function ty(n){for(;n;){n[2]|=32;const e=Bp(n);if(FX(n)&&!e)return n;n=e}return null}function V3(n,e,t,i=!0){const r=e[10];r.begin&&r.begin();try{z3(n,e,n.template,t)}catch(o){throw i&&qA(e,o),o}finally{r.end&&r.end()}}function ny(n,e,t){N7(0),e(n,t)}function WA(n){return n[7]||(n[7]=[])}function jA(n){return n.cleanup||(n.cleanup=[])}function $A(n,e,t){return(null===n||fa(n))&&(t=function $X(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function qA(n,e){const t=n[9],i=t?t.get(Bl,null):null;i&&i.handleError(e)}function iy(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Ul(n,e,t){const i=l3(e,n);!function UD(n,e,t){n.setValue(e,t)}(n[11],i,t)}function H3(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=v7(r,a):2==s&&(i=v7(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function U3(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(cr(s)),ha(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&U3(l[1],l,c,i)}const o=t.type;if(8&o)U3(n,e,t.child,i);else if(32&o){const a=wv(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=JD(e,t);if(Array.isArray(a))i.push(...a);else{const l=Bp(e[16]);U3(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class Hp{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return U3(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(ha(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Ev(e,i),y3(t,i))}this._attachedToViewContainer=!1}WD(this._lView[1],this._lView)}onDestroy(e){PA(this._lView[1],this._lView,null,e)}markForCheck(){ty(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){V3(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function CQ(n,e){Vp(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ce(902,!1);this._appRef=e}}class UJ extends Hp{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;V3(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class ry extends Cd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Bn(e);return new Up(t,this.ngModule)}}function YA(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class WJ{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){const r=this.injector.get(e,hv,i);return r!==hv||t===hv?r:this.parentInjector.get(e,t,i)}}class Up extends SD{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function GQ(n){return n.map(UQ).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return YA(this.componentDef.inputs)}get outputs(){return YA(this.componentDef.outputs)}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof nu?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new WJ(e,s):e,a=o.get(Np,null);if(null===a)throw new Ce(407,!1);const l=o.get(UK,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=i?function CJ(n,e,t){return n.selectRootElement(e,t===ua.ShadowDom)}(c,i,this.componentDef.encapsulation):Tv(a.createRenderer(null,this.componentDef),u,function GJ(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,f=Kv(0,null,null,1,0,null,null,null,null,null),p=N3(null,f,null,h,null,null,a,c,l,o,null);let m,g;z7(p);try{const _=function qJ(n,e,t,i,r,s){const o=t[1];t[22]=n;const l=W1(o,22,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(H3(l,c,!0),null!==n&&(f3(r,n,c),null!==l.classes&&kv(r,n,l.classes),null!==l.styles&&nA(r,n,l.styles)));const u=i.createRenderer(n,e),d=N3(t,LA(e),null,e.onPush?32:16,t[22],l,i,u,s||null,null,null);return o.firstCreatePass&&(_3(Sp(l,t),o,e.type),VA(o,l),HA(l,t.length,1)),B3(t,d),t[22]=d}(d,this.componentDef,p,a,c);if(d)if(i)f3(c,d,["ng-version",GK.full]);else{const{attrs:v,classes:y}=function WQ(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!pa(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);v&&f3(c,d,v),y&&y.length>0&&kv(c,d,y.join(" "))}if(g=I7(f,22),void 0!==t){const v=g.projection=[];for(let y=0;y<this.ngContentSelectors.length;y++){const b=t[y];v.push(null!=b?Array.from(b):null)}}m=function YJ(n,e,t,i){const r=t[1],s=function EJ(n,e,t){const i=Mr();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),UA(n,i,e,j1(n,e,1,null),t),FA(n,i));const r=Tp(e,n,i.directiveStart,i);ts(r,e);const s=zo(i,e);return s&&ts(s,e),r}(r,t,e);if(n[8]=t[8]=s,null!==i)for(const a of i)a(s,e);if(e.contentQueries){const a=Mr();e.contentQueries(1,s,a.directiveStart)}const o=Mr();return!r.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Jc(o.index),zA(t[1],o,0,o.directiveStart,o.directiveEnd,e),BA(e,s)),s}(_,this.componentDef,p,[XJ]),Yv(f,p,null)}finally{B7()}return new $J(this.componentType,m,V1(g,p),p,g)}}class $J extends class FK{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new UJ(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;iy(s[1],s,r,e,t),NA(s,this._tNode.index)}}get injector(){return new R1(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function XJ(){const n=Mr();u3(Se()[1],n)}function he(n){let e=function XA(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(fa(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ce(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=sy(n.inputs),o.declaredInputs=sy(n.declaredInputs),o.outputs=sy(n.outputs);const a=r.hostBindings;a&&JJ(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&KJ(n,l),c&&QJ(n,c),_7(n.inputs,r.inputs),_7(n.declaredInputs,r.declaredInputs),_7(n.outputs,r.outputs),fa(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===he&&(t=!1)}}e=Object.getPrototypeOf(e)}!function ZJ(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=p3(r.hostAttrs,t=p3(t,r.hostAttrs))}}(i)}function sy(n){return n===x1?{}:n===In?[]:n}function KJ(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function QJ(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function JJ(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let G3=null;function Td(){if(!G3){const n=Zn.Symbol;if(n&&n.iterator)G3=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(G3=i)}}}return G3}function Gp(n){return!!oy(n)&&(Array.isArray(n)||!(n instanceof Map)&&Td()in n)}function oy(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Qa(n,e,t){return n[e]=t}function ns(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Ed(n,e,t,i){const r=ns(n,e,t);return ns(n,e+1,i)||r}function gn(n,e,t,i){const r=Se();return ns(r,E1(),e)&&(xn(),Ka(Ni(),r,n,e,t,i)),gn}function q1(n,e,t,i){return ns(n,E1(),t)?e+Gt(t)+i:Wt}function Y1(n,e,t,i,r,s){const a=Ed(n,Pl(),t,r);return Ol(2),a?e+Gt(t)+i+Gt(r)+s:Wt}function J1(n,e,t,i,r,s,o,a,l,c,u,d,h,f,p,m){const g=Pl();let _=function Vo(n,e,t,i,r,s){const o=Ed(n,e,t,i);return Ed(n,e+2,r,s)||o}(n,g,t,r,o,l);return _=function W3(n,e,t,i,r){const s=Ed(n,e,t,i);return ns(n,e+2,r)||s}(n,g+4,u,h,p)||_,Ol(7),_?e+Gt(t)+i+Gt(r)+s+Gt(o)+a+Gt(l)+c+Gt(u)+d+Gt(h)+f+Gt(p)+m:Wt}function Ue(n,e,t,i,r,s,o,a){const l=Se(),c=xn(),u=n+22,d=c.firstCreatePass?function aee(n,e,t,i,r,s,o,a,l){const c=e.consts,u=W1(e,n,4,o||null,Qc(c,a));Qv(e,t,u,Qc(c,l)),u3(e,u);const d=u.tViews=Kv(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];Ya(d,!1);const h=l[11].createComment("");I3(c,l,h,d),ts(h,l),B3(l,l[u]=GA(h,l,h,d)),a3(d)&&Xv(c,l,d),null!=o&&Zv(l,d,a)}function hi(n){return T1(function tZ(){return Ht.lFrame.contextLView}(),22+n)}function Z(n,e,t){const i=Se();return ns(i,E1(),e)&&fo(xn(),Ni(),i,n,e,i[11],t,!1),Z}function ay(n,e,t,i,r){const o=r?"class":"style";iy(n,t,e.inputs[o],o,i)}function C(n,e,t,i){const r=Se(),s=xn(),o=22+n,a=r[11],l=r[o]=Tv(a,e,function uZ(){return Ht.lFrame.currentNamespace}()),c=s.firstCreatePass?function cee(n,e,t,i,r,s,o){const a=e.consts,c=W1(e,n,2,r,Qc(a,s));return Qv(e,t,c,Qc(a,o)),null!==c.attrs&&H3(c,c.attrs,!1),null!==c.mergedAttrs&&H3(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,i):s.data[o];Ya(c,!0);const u=c.mergedAttrs;null!==u&&f3(a,l,u);const d=c.classes;null!==d&&kv(a,l,d);const h=c.styles;return null!==h&&nA(a,l,h),64!=(64&c.flags)&&I3(s,r,l,c),0===function ZX(){return Ht.lFrame.elementDepthCount}()&&ts(l,r),function KX(){Ht.lFrame.elementDepthCount++}(),a3(c)&&(Xv(s,r,c),kA(s,c,r)),null!==i&&Zv(r,c),C}function T(){let n=Mr();L7()?P7():(n=n.parent,Ya(n,!1));const e=n;!function QX(){Ht.lFrame.elementDepthCount--}();const t=xn();return t.firstCreatePass&&(u3(t,n),T7(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function mZ(n){return 0!=(16&n.flags)}(e)&&ay(t,e,Se(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function gZ(n){return 0!=(32&n.flags)}(e)&&ay(t,e,Se(),e.stylesWithoutHost,!1),T}function ne(n,e,t,i){return C(n,e,t,i),T(),ne}function zi(n,e,t){const i=Se(),r=xn(),s=n+22,o=r.firstCreatePass?function uee(n,e,t,i,r){const s=e.consts,o=Qc(s,i),a=W1(e,n,8,"ng-container",o);return null!==o&&H3(a,o,!0),Qv(e,t,a,Qc(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];Ya(o,!0);const a=i[s]=i[11].createComment("");return I3(r,i,a,o),ts(a,i),a3(o)&&(Xv(r,i,o),kA(r,o,i)),null!=t&&Zv(i,o),zi}function Bi(){let n=Mr();const e=xn();return L7()?P7():(n=n.parent,Ya(n,!1)),e.firstCreatePass&&(u3(e,n),T7(n)&&e.queries.elementEnd(n)),Bi}function ga(n,e,t){return zi(n,e,t),Bi(),ga}function is(){return Se()}function jp(n){return!!n&&"function"==typeof n.then}function sR(n){return!!n&&"function"==typeof n.subscribe}const ly=sR;function $e(n,e,t,i){const r=Se(),s=xn(),o=Mr();return oR(s,r,r[11],o,n,e,0,i),$e}function j3(n,e){const t=Mr(),i=Se(),r=xn();return oR(r,i,$A(F7(r.data),t,i),t,n,e),j3}function oR(n,e,t,i,r,s,o,a){const l=a3(i),u=n.firstCreatePass&&jA(n),d=e[8],h=WA(e);let f=!0;if(3&i.type||a){const g=zo(i,e),_=a?a(g):g,v=h.length,y=a?x=>a(cr(x[i.index])):i.index;let b=null;if(!a&&l&&(b=function dee(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=s,b.__ngLastListenerFn__=s,f=!1;else{s=lR(i,e,d,s,!1);const x=t.listen(_,r,s);h.push(s,x),u&&u.push(r,y,v,v+1)}}else s=lR(i,e,d,s,!1);const p=i.outputs;let m;if(f&&null!==p&&(m=p[r])){const g=m.length;if(g)for(let _=0;_<g;_+=2){const M=e[m[_]][m[_+1]].subscribe(s),R=h.length;h.push(s,M),u&&u.push(r,i.index,R,-(R+1))}}}function aR(n,e,t,i){try{return!1!==t(i)}catch(r){return qA(n,r),!1}}function lR(n,e,t,i,r){return function s(o){if(o===Function)return i;ty(2&n.flags?ao(n.index,e):e);let l=aR(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=aR(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function et(n=1){return function oZ(n){return(Ht.lFrame.contextLView=function aZ(n,e){for(;n>0;)e=e[15],n--;return e}(n,Ht.lFrame.contextLView))[8]}(n)}function hee(n,e){let t=null;const i=function zQ(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?oA(n,s,!0):HQ(i,s))return r}else t=r}return t}function Vi(n){const e=Se()[16][6];if(!e.projection){const i=e.projection=Ap(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?hee(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Dn(n,e=0,t){const i=Se(),r=xn(),s=W1(r,22+n,16,null,t||null);null===s.projection&&(s.projection=e),P7(),64!=(64&s.flags)&&function IQ(n,e,t){tA(e[11],0,e,t,jD(n,t,e),XD(t.parent||e[6],t,e))}(r,i,s)}function Ja(n,e,t){return kn(n,"",e,"",t),Ja}function kn(n,e,t,i,r){const s=Se(),o=q1(s,e,t,i);return o!==Wt&&fo(xn(),Ni(),s,n,o,s[11],r,!1),kn}function _R(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?ma(s):Hl(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];mee(n[a],e)&&(l=!0,n[a+1]=i?Bv(u):Nv(u)),a=i?ma(u):Hl(u)}l&&(n[t+1]=i?Nv(s):Bv(s))}function mee(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&O1(n,e)>=0}const Tr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function vR(n){return n.substring(Tr.key,Tr.keyEnd)}function yR(n,e){const t=Tr.textEnd;return t===e?-1:(e=Tr.keyEnd=function yee(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Tr.key=e,t),tf(n,e,t))}function tf(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function qr(n,e,t){return _a(n,e,t,!1),qr}function Nt(n,e){return _a(n,e,null,!0),Nt}function tl(n,e){for(let t=function _ee(n){return function xR(n){Tr.key=0,Tr.keyEnd=0,Tr.value=0,Tr.valueEnd=0,Tr.textEnd=n.length}(n),yR(n,tf(n,0,Tr.textEnd))}(e);t>=0;t=yR(e,t))co(n,vR(e),!0)}function _a(n,e,t,i){const r=Se(),s=xn(),o=Ol(2);s.firstUpdatePass&&TR(s,n,o,i),e!==Wt&&ns(r,o,e)&&DR(s,s.data[Ss()],r,r[11],n,r[o+1]=function Aee(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Xn(uo(n)))),n}(e,t),i,o)}function va(n,e,t,i){const r=xn(),s=Ol(2);r.firstUpdatePass&&TR(r,null,s,i);const o=Se();if(t!==Wt&&ns(o,s,t)){const a=r.data[Ss()];if(RR(a,i)&&!SR(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=v7(l,t||"")),ay(r,a,o,t,i)}else!function Dee(n,e,t,i,r,s,o,a){r===Wt&&(r=In);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const h=l<r.length?r[l+1]:void 0,f=c<s.length?s[c+1]:void 0;let m,p=null;u===d?(l+=2,c+=2,h!==f&&(p=d,m=f)):null===d||null!==u&&u<d?(l+=2,p=u):(c+=2,p=d,m=f),null!==p&&DR(n,e,t,i,p,m,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function Eee(n,e,t){if(null==t||""===t)return In;const i=[],r=uo(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}function SR(n,e){return e>=n.expandoStartIndex}function TR(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Ss()],o=SR(n,t);RR(s,i)&&null===e&&!o&&(e=!1),e=function Cee(n,e,t,i){const r=F7(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=$p(t=cy(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=cy(r,n,e,t,i),null===s){let l=function Mee(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Hl(i))return n[ma(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=cy(null,n,e,l[1],i),l=$p(l,e.attrs,i),function See(n,e,t,i){n[ma(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function Tee(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=$p(i,n[s].hostAttrs,t);return $p(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function fee(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=ma(o),l=Hl(o);n[i]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||O1(d,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const h=ma(n[a+1]);n[i+1]=P3(h,a),0!==h&&(n[h+1]=zv(n[h+1],i)),n[a+1]=function cJ(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=P3(a,0),0!==a&&(n[a+1]=zv(n[a+1],i)),a=i;else n[i+1]=P3(l,0),0===a?a=i:n[l+1]=zv(n[l+1],i),l=i;c&&(n[i+1]=Nv(n[i+1])),_R(n,u,i,!0),_R(n,u,i,!1),function pee(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&O1(s,e)>=0&&(t[i+1]=Bv(t[i+1]))}(e,u,n,i,s),o=P3(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function cy(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=$p(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function $p(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),co(n,o,!!t||e[++s]))}return void 0===n?null:n}function DR(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];$3(function wA(n){return 1==(1&n)}(c)?AR(l,e,t,r,Hl(c),o):void 0)||($3(s)||function xA(n){return 2==(2&n)}(c)&&(s=AR(l,null,t,r,a,o)),function LQ(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:Vs.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Vs.Important),n.setStyle(t,i,r,s))}}(i,o,l3(Ss(),t),r,s))}function AR(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===Wt&&(h=d?In:void 0);let f=d?Y7(h,i):u===i?h:void 0;if(c&&!$3(f)&&(f=Y7(l,i)),$3(f)&&(a=f,o))return a;const p=n[r+1];r=o?ma(p):Hl(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Y7(l,i))}return a}function $3(n){return void 0!==n}function RR(n,e){return 0!=(n.flags&(e?16:32))}function D(n,e=""){const t=Se(),i=xn(),r=n+22,s=i.firstCreatePass?W1(i,r,1,e,null):i.data[r],o=t[r]=function Sv(n,e){return n.createText(e)}(t[11],e);I3(i,t,o,s),Ya(s,!1)}function qp(n){return vt("",n,""),qp}function vt(n,e,t){const i=Se(),r=q1(i,n,e,t);return r!==Wt&&Ul(i,Ss(),r),vt}function q3(n,e,t,i,r){const s=Se(),o=Y1(s,n,e,t,i,r);return o!==Wt&&Ul(s,Ss(),o),q3}function tr(n,e,t){va(co,tl,q1(Se(),n,e,t),!0)}function Yp(n,e,t,i,r){return _a(n,q1(Se(),e,t,i),r,!1),Yp}function Dd(n,e,t){const i=Se();return ns(i,E1(),e)&&fo(xn(),Ni(),i,n,e,i[11],t,!0),Dd}function Y3(n,e,t){const i=Se();if(ns(i,E1(),e)){const s=xn(),o=Ni();fo(s,o,i,n,e,$A(F7(s.data),o,i),t,!0)}return Y3}const rf="en-US";let ZR=rf;function hy(n,e,t,i,r){if(n=Ft(n),Array.isArray(n))for(let s=0;s<n.length;s++)hy(n[s],e,t,i,r);else{const s=xn(),o=Se();let a=wd(n)?n:Ft(n.provide),l=MD(n);const c=Mr(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(wd(n)||!n.multi){const f=new Cp(l,r,S),p=py(a,e,r?u:u+h,d);-1===p?(_3(Sp(c,o),s,a),fy(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=py(a,e,u+h,d),p=py(a,e,u,u+h),m=f>=0&&t[f],g=p>=0&&t[p];if(r&&!g||!r&&!m){_3(Sp(c,o),s,a);const _=function Wte(n,e,t,i,r){const s=new Cp(n,t,S);return s.multi=[],s.index=e,s.componentProviders=0,xI(s,r,i&&!t),s}(r?Gte:Ute,t.length,r,i,l);!r&&g&&(t[p].providerFactory=_),fy(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(_),o.push(_)}else fy(s,n,f>-1?f:p,xI(t[r?p:f],l,!r&&i));!r&&i&&g&&t[p].componentProviders++}}}function fy(n,e,t,i){const r=wd(e),s=function DK(n){return!!n.useClass}(e);if(r||s){const l=(s?Ft(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function xI(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function py(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function Ute(n,e,t,i){return my(this.multi,[])}function Gte(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Tp(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),my(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],my(r,s);return s}function my(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function wt(n,e=[]){return t=>{t.providersResolver=(i,r)=>function Hte(n,e,t){const i=xn();if(i.firstCreatePass){const r=fa(n);hy(t,i.data,i.blueprint,r,!0),hy(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class Rd{}class wI{}class CI extends Rd{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ry(this);const i=so(e);this._bootstrapComponents=Vl(i.bootstrap),this._r3Injector=fA(e,t,[{provide:Rd,useValue:this},{provide:Cd,useValue:this.componentFactoryResolver}],Xn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class gy extends wI{constructor(e){super(),this.moduleType=e}create(e){return new CI(this.moduleType,e)}}class $te extends Rd{constructor(e,t,i){super(),this.componentFactoryResolver=new ry(this),this.instance=null;const r=new CD([...e,{provide:Rd,useValue:this},{provide:Cd,useValue:this.componentFactoryResolver}],t||A3(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function J3(n,e,t=null){return new $te(n,e,t).injector}let qte=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=yD(0,t.type),r=i.length>0?J3([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=ve({token:n,providedIn:"environment",factory:()=>new n(K(nu))}),n})();function MI(n){n.getStandaloneInjector=e=>e.get(qte).getOrCreateStandaloneInjector(n)}function Id(n,e,t){const i=Ms()+n,r=Se();return r[i]===Wt?Qa(r,i,t?e.call(t):e()):function Wp(n,e){return n[e]}(r,i)}function Gl(n,e,t,i){return kI(Se(),Ms(),n,e,t,i)}function II(n,e,t,i,r){return function LI(n,e,t,i,r,s,o){const a=e+t;return Ed(n,a,r,s)?Qa(n,a+2,o?i.call(o,r,s):i(r,s)):em(n,a+2)}(Se(),Ms(),n,e,t,i,r)}function em(n,e){const t=n[e];return t===Wt?void 0:t}function kI(n,e,t,i,r,s){const o=e+t;return ns(n,o,r)?Qa(n,o+1,s?i.call(s,r):i(r)):em(n,o+1)}function Fr(n,e){const t=xn();let i;const r=n+22;t.firstCreatePass?(i=function cne(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=vd(i.type)),o=Oo(S);try{const a=m3(!1),l=s();return m3(a),function lee(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Se(),r,l),l}finally{Oo(o)}}function Nr(n,e,t){const i=n+22,r=Se(),s=T1(r,i);return function tm(n,e){return n[1].data[e].pure}(r,i)?kI(r,Ms(),e,s.transform,t,s):s.transform(t)}function vy(n){return e=>{setTimeout(n,void 0,e)}}const Bt=class pne extends xt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=vy(s),r&&(r=vy(r)),o&&(o=vy(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof ri&&e.add(a),a}};function mne(){return this._results[Td()]()}class sf{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Td(),i=sf.prototype;i[t]||(i[t]=mne)}get changes(){return this._changes||(this._changes=new Bt)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=lo(e);(this._changesDetected=!function TZ(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let zr=(()=>{class n{}return n.__NG_ELEMENT_ID__=vne,n})();const gne=zr,_ne=class extends gne{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tViews,r=N3(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(i)),Yv(i,r,e),new Hp(r)}};function vne(){return e4(Mr(),Se())}function e4(n,e){return 4&n.type?new _ne(e,n,V1(n,e)):null}let Br=(()=>{class n{}return n.__NG_ELEMENT_ID__=yne,n})();function yne(){return BI(Mr(),Se())}const bne=Br,NI=class extends bne{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return V1(this._hostTNode,this._hostLView)}get injector(){return new R1(this._hostTNode,this._hostLView)}get parentInjector(){const e=g3(this._hostTNode,this._hostLView);if(PE(e)){const t=A1(e,this._hostLView),i=D1(e);return new R1(t[1].data[i+8],t)}return new R1(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=zI(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,i,r,s){const o=e&&!function Dp(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,i=d.injector,r=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const l=o?e:new Up(Bn(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(nu,null);h&&(s=h)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function XX(n){return ha(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[3],h=new NI(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function SQ(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],jE(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function TQ(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(r,i,o,s);const a=Rv(s,o),l=i[11],c=R3(l,o[7]);return null!==c&&function wQ(n,e,t,i,r,s){i[0]=r,i[6]=e,Vp(n,i,t,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),jE(yy(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=zI(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Ev(this._lContainer,t);i&&(y3(yy(this._lContainer),t),WD(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=Ev(this._lContainer,t);return i&&null!=y3(yy(this._lContainer),t)?new Hp(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function zI(n){return n[8]}function yy(n){return n[8]||(n[8]=[])}function BI(n,e){let t;const i=e[n.index];if(ha(i))t=i;else{let r;if(8&n.type)r=cr(i);else{const s=e[11];r=s.createComment("");const o=zo(n,e);Md(s,R3(s,o),r,function RQ(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=GA(i,e,r,n),B3(e,t)}return new NI(t,n,e)}class by{constructor(e){this.queryList=e,this.matches=null}clone(){return new by(this.queryList)}setDirty(){this.queryList.setDirty()}}class xy{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new xy(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==WI(e,t).matches&&this.queries[t].setDirty()}}class VI{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class wy{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new wy(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Cy{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Cy(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,Cne(t,s)),this.matchTNodeWithReadOption(e,t,v3(t,e,s,!1,!1))}else i===zr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,v3(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Be||r===Br||r===zr&&4&t.type)this.addMatch(t.index,-2);else{const s=v3(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Cne(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function Sne(n,e,t,i){return-1===t?function Mne(n,e){return 11&n.type?V1(n,e):4&n.type?e4(n,e):null}(e,n):-2===t?function Tne(n,e,t){return t===Be?V1(e,n):t===zr?e4(e,n):t===Br?BI(e,n):void 0}(n,e,i):Tp(n,n[1],t,e)}function HI(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:Sne(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function My(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=HI(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&My(h[1],h,c,i)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];My(f[1],f,c,i)}}}}}return i}function kt(n){const e=Se(),t=xn(),i=CE();N7(i+1);const r=WI(t,i);if(n.dirty&&function YX(n){return 4==(4&n[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?My(t,e,i,[]):HI(t,e,r,i);n.reset(s,VK),n.notifyOnChanges()}return!0}return!1}function fi(n,e,t){const i=xn();i.firstCreatePass&&(GI(i,new VI(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),UI(i,Se(),e)}function pi(n,e,t,i){const r=xn();if(r.firstCreatePass){const s=Mr();GI(r,new VI(e,t,i),s.index),function Dne(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}UI(r,Se(),t)}function Lt(){return function Ene(n,e){return n[19].queries[e].queryList}(Se(),CE())}function UI(n,e,t){const i=new sf(4==(4&t));PA(n,e,i,i.destroy),null===e[19]&&(e[19]=new xy),e[19].queries.push(new by(i))}function GI(n,e,t){null===n.queries&&(n.queries=new wy),n.queries.track(new Cy(e,t))}function WI(n,e){return n.queries.getByIndex(e)}function nl(n,e){return e4(n,e)}function n4(...n){}const r4=new pe("Application Initializer");let s4=(()=>{class n{constructor(t){this.appInits=t,this.resolve=n4,this.reject=n4,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(jp(s))t.push(s);else if(ly(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(K(r4,8))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const im=new pe("AppId",{providedIn:"root",factory:function ck(){return`${Ay()}${Ay()}${Ay()}`}});function Ay(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const uk=new pe("Platform Initializer"),po=new pe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ry=new pe("appBootstrapListener"),mo=new pe("AnimationModuleType");let Yne=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const il=new pe("LocaleId",{providedIn:"root",factory:()=>Vn(il,Et.Optional|Et.SkipSelf)||function Xne(){return typeof $localize<"u"&&$localize.locale||rf}()});class Kne{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Iy=(()=>{class n{compileModuleSync(t){return new gy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=Vl(so(t).declarations).reduce((o,a)=>{const l=Bn(a);return l&&o.push(new Up(l)),o},[]);return new Kne(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eie=(()=>Promise.resolve(0))();function ky(n){typeof Zone>"u"?eie.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Ct{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bt(!1),this.onMicrotaskEmpty=new Bt(!1),this.onStable=new Bt(!1),this.onError=new Bt(!1),typeof Zone>"u")throw new Ce(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function tie(){let n=Zn.requestAnimationFrame,e=Zn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function rie(n){const e=()=>{!function iie(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Zn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Py(n),n.isCheckStableRunning=!0,Ly(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Py(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return fk(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),pk(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return fk(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),pk(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Py(n),Ly(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ct.isInAngularZone())throw new Ce(909,!1)}static assertNotInAngularZone(){if(Ct.isInAngularZone())throw new Ce(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,nie,n4,n4);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const nie={};function Ly(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Py(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function fk(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function pk(n){n._nesting--,Ly(n)}class sie{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bt,this.onMicrotaskEmpty=new Bt,this.onStable=new Bt,this.onError=new Bt}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const mk=new pe(""),o4=new pe("");let Ny,Oy=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ny||(function oie(n){Ny=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ct.assertNotInAngularZone(),ky(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ky(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(K(Ct),K(Fy),K(o4))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})(),Fy=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return Ny?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),ou=null;const gk=new pe("AllowMultipleToken"),zy=new pe("PlatformDestroyListeners");class _k{constructor(e,t){this.name=e,this.token=t}}function yk(n,e,t=[]){const i=`Platform: ${e}`,r=new pe(i);return(s=[])=>{let o=By();if(!o||o.injector.get(gk,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function cie(n){if(ou&&!ou.get(gk,!1))throw new Ce(400,!1);ou=n;const e=n.get(xk);(function vk(n){const e=n.get(uk,null);e&&e.forEach(t=>t())})(n)}(function bk(n=[],e){return ur.create({name:e,providers:[{provide:lv,useValue:"platform"},{provide:zy,useValue:new Set([()=>ou=null])},...n]})}(a,i))}return function die(n){const e=By();if(!e)throw new Ce(401,!1);return e}()}}function By(){return ou?.get(xk)??null}let xk=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function Ck(n,e){let t;return t="noop"===n?new sie:("zone.js"===n?void 0:n)||new Ct(e),t}(i?.ngZone,function wk(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:Ct,useValue:r}];return r.run(()=>{const o=ur.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(Bl,null);if(!l)throw new Ce(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{a4(this._modules,a),c.unsubscribe()})}),function Mk(n,e,t){try{const i=t();return jp(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(l,r,()=>{const c=a.injector.get(s4);return c.runInitializers(),c.donePromise.then(()=>(function KR(n){ro(n,"Expected localeId to be defined"),"string"==typeof n&&(ZR=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(il,rf)||rf),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=Sk({},i);return function aie(n,e,t){const i=new gy(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(cf);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Ce(403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ce(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(zy,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(K(ur))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Sk(n,e){return Array.isArray(e)?e.reduce(Sk,n):{...n,...e}}let cf=(()=>{class n{constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new bn(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new bn(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Ct.assertNotInAngularZone(),ky(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{Ct.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=Il(s,o.pipe(nE()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof SD;if(!this._injector.get(s4).done)throw!r&&function w1(n){const e=Bn(n)||ws(n)||Cs(n);return null!==e&&e.standalone}(t),new Ce(405,false);let o;o=r?t:this._injector.get(Cd).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function lie(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Rd),c=o.create(ur.NULL,[],i||o.selector,a),u=c.location.nativeElement,d=c.injector.get(mk,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),a4(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new Ce(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;a4(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ry,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>a4(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Ce(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(K(Ct),K(nu),K(Bl))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function a4(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Ek=!0,dr=(()=>{class n{}return n.__NG_ELEMENT_ID__=pie,n})();function pie(n){return function mie(n,e,t){if(o3(n)&&!t){const i=ao(n.index,e);return new Hp(i,i)}return 47&n.type?new Hp(e[16],e):null}(Mr(),Se(),16==(16&n))}class kk{constructor(){}supports(e){return Gp(e)}create(e){return new xie(e)}}const bie=(n,e)=>e;class xie{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||bie}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<Pk(i,r,s)?t:i,a=Pk(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Gp(e))throw new Ce(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function ree(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Td()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new wie(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Lk),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Lk),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class wie{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Cie{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class Lk{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new Cie,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Pk(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class Ok{constructor(){}supports(e){return e instanceof Map||oy(e)}create(){return new Mie}}class Mie{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||oy(e)))throw new Ce(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new Sie(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class Sie{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Fk(){return new rl([new kk])}let rl=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||Fk()),deps:[[n,new yd,new Nl]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Ce(901,!1)}}return n.\u0275prov=ve({token:n,providedIn:"root",factory:Fk}),n})();function Nk(){return new Ld([new Ok])}let Ld=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||Nk()),deps:[[n,new yd,new Nl]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Ce(901,!1)}}return n.\u0275prov=ve({token:n,providedIn:"root",factory:Nk}),n})();const Die=yk(null,"core",[]);let Aie=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(K(cf))},n.\u0275mod=at({type:n}),n.\u0275inj=ot({}),n})();function jl(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let u4=null;function sl(){return u4}const Mt=new pe("DocumentToken");let Wy=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:function(){return function Lie(){return K(zk)}()},providedIn:"platform"}),n})();const Pie=new pe("Location Initialized");let zk=(()=>{class n extends Wy{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sl().getBaseHref(this._doc)}onPopState(t){const i=sl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=sl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){Bk()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){Bk()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(K(Mt))},n.\u0275prov=ve({token:n,factory:function(){return function Oie(){return new zk(K(Mt))}()},providedIn:"platform"}),n})();function Bk(){return!!window.history.pushState}function jy(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Vk(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function $l(n){return n&&"?"!==n[0]?"?"+n:n}let Pd=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:function(){return Vn(Uk)},providedIn:"root"}),n})();const Hk=new pe("appBaseHref");let Uk=(()=>{class n extends Pd{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Vn(Mt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return jy(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+$l(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+$l(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+$l(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(K(Wy),K(Hk,8))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fie=(()=>{class n extends Pd{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=jy(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+$l(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+$l(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(K(Wy),K(Hk,8))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})(),rm=(()=>{class n{constructor(t){this._subject=new Bt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._baseHref=Vk(Gk(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+$l(i))}normalize(t){return n.stripTrailingSlash(function zie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Gk(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$l(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$l(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=$l,n.joinWithSlash=jy,n.stripTrailingSlash=Vk,n.\u0275fac=function(t){return new(t||n)(K(Pd))},n.\u0275prov=ve({token:n,factory:function(){return function Nie(){return new rm(K(Pd))}()},providedIn:"root"}),n})();function Gk(n){return n.replace(/\/index.html$/,"")}function Qk(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}class wre{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let au=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new wre(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),tL(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{tL(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(S(Br),S(zr),S(rl))},n.\u0275dir=le({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function tL(n,e){n.context.$implicit=e.item}let Go=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Mre,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nL("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nL("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(S(Br),S(zr))},n.\u0275dir=le({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Mre{constructor(){this.$implicit=null,this.ngIf=null}}function nL(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Xn(e)}'.`)}class n9{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let b4=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=le({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),iL=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new n9(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(S(Br),S(zr),S(b4,9))},n.\u0275dir=le({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),Od=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:Vs.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(Ld),S(ho))},n.\u0275dir=le({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),sL=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(S(Br))},n.\u0275dir=le({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Di]}),n})();class Ere{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}}class Dre{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const Are=new Dre,Rre=new Ere;let uf=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(jp(t))return Are;if(sR(t))return Rre;throw function xa(n,e){return new Ce(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(S(dr,16))},n.\u0275pipe=zs({name:"async",type:n,pure:!1,standalone:!0}),n})(),Us=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({}),n})();const aL="browser";function lu(n){return n===aL}function df(n){return"server"===n}let Zre=(()=>{class n{}return n.\u0275prov=ve({token:n,providedIn:"root",factory:()=>new Kre(K(Mt),window)}),n})();class Kre{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Qre(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=lL(this.window.history)||lL(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function lL(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class cL{}class a9 extends class gse extends class kie{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Iie(n){u4||(u4=n)}(new a9)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function _se(){return lm=lm||document.querySelector("base"),lm?lm.getAttribute("href"):null}();return null==t?null:function vse(n){w4=w4||document.createElement("a"),w4.setAttribute("href",n);const e=w4.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){lm=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Qk(document.cookie,e)}}let w4,lm=null;const fL=new pe("TRANSITION_ID"),bse=[{provide:r4,useFactory:function yse(n,e,t){return()=>{t.get(s4).donePromise.then(()=>{const i=sl(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[fL,Mt,ur],multi:!0}];let wse=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})();const C4=new pe("EventManagerPlugins");let M4=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(K(C4),K(Ct))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})();class pL{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=sl().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let mL=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})(),cm=(()=>{class n extends mL{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(gL),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(gL))}}return n.\u0275fac=function(t){return new(t||n)(K(Mt))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})();function gL(n){sl().remove(n)}const l9={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},c9=/%COMP%/g;function S4(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?S4(n,r,t):(r=r.replace(c9,n),t.push(r))}return t}function yL(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let T4=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new u9(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case ua.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Dse(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case ua.ShadowDom:return new Ase(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=S4(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(K(M4),K(cm),K(im))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})();class u9{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(l9[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(xL(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(xL(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=l9[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=l9[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Vs.DashCase|Vs.Important)?e.style.setProperty(t,i,r&Vs.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Vs.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,yL(i)):this.eventManager.addEventListener(e,t,yL(i))}}function xL(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Dse extends u9{constructor(e,t,i,r){super(e),this.component=i;const s=S4(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function Sse(n){return"_ngcontent-%COMP%".replace(c9,n)}(r+"-"+i.id),this.hostAttr=function Tse(n){return"_nghost-%COMP%".replace(c9,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Ase extends u9{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=S4(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Rse=(()=>{class n extends pL{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(K(Mt))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})();const wL=["alt","control","meta","shift"],Ise={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kse={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Lse=(()=>{class n extends pL{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sl().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),wL.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=Ise[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),wL.forEach(o=>{o!==r&&(0,kse[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(K(Mt))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})();const ML=[{provide:po,useValue:aL},{provide:uk,useValue:function Pse(){a9.makeCurrent()},multi:!0},{provide:Mt,useFactory:function Fse(){return function KZ(n){J7=n}(document),document},deps:[]}],Nse=yk(Die,"browser",ML),SL=new pe(""),TL=[{provide:o4,useClass:class xse{addToWindow(e){Zn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},Zn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Zn.getAllAngularRootElements=()=>e.getAllRootElements(),Zn.frameworkStabilizers||(Zn.frameworkStabilizers=[]),Zn.frameworkStabilizers.push(i=>{const r=Zn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?sl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:mk,useClass:Oy,deps:[Ct,Fy,o4]},{provide:Oy,useClass:Oy,deps:[Ct,Fy,o4]}],EL=[{provide:lv,useValue:"root"},{provide:Bl,useFactory:function Ose(){return new Bl},deps:[]},{provide:C4,useClass:Rse,multi:!0,deps:[Mt,Ct,po]},{provide:C4,useClass:Lse,multi:!0,deps:[Mt]},{provide:T4,useClass:T4,deps:[M4,cm,im]},{provide:Np,useExisting:T4},{provide:mL,useExisting:cm},{provide:cm,useClass:cm,deps:[Mt]},{provide:M4,useClass:M4,deps:[C4,Ct]},{provide:cL,useClass:wse,deps:[]},[]];let DL=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:im,useValue:t.appId},{provide:fL,useExisting:im},bse]}}}return n.\u0275fac=function(t){return new(t||n)(K(SL,12))},n.\u0275mod=at({type:n}),n.\u0275inj=ot({providers:[...EL,...TL],imports:[Us,Aie]}),n})(),AL=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(K(Mt))},n.\u0275prov=ve({token:n,factory:function(t){let i=null;return i=t?new t:function Bse(){return new AL(K(Mt))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let hf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:function(t){let i=null;return i=t?new(t||n):K(kL),i},providedIn:"root"}),n})(),kL=(()=>{class n extends hf{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case En.NONE:return i;case En.HTML:return Za(i,"HTML")?uo(i):pD(this._doc,String(i)).toString();case En.STYLE:return Za(i,"Style")?uo(i):i;case En.SCRIPT:if(Za(i,"Script"))return uo(i);throw new Error("unsafe value used in a script context");case En.URL:return Za(i,"URL")?uo(i):T3(String(i));case En.RESOURCE_URL:if(Za(i,"ResourceURL"))return uo(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function oK(n){return new eK(n)}(t)}bypassSecurityTrustStyle(t){return function aK(n){return new tK(n)}(t)}bypassSecurityTrustScript(t){return function lK(n){return new nK(n)}(t)}bypassSecurityTrustUrl(t){return function cK(n){return new iK(n)}(t)}bypassSecurityTrustResourceUrl(t){return function uK(n){return new rK(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(K(Mt))},n.\u0275prov=ve({token:n,factory:function(t){let i=null;return i=t?new t:function $se(n){return new kL(n.get(Mt))}(K(ur)),i},providedIn:"root"}),n})();var E4={prefix:"fab",iconName:"discord",icon:[640,512,[],"f392","M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"]},p9={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};function lt(...n){return er(n,gp(n))}class Fn extends xt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const D4=jn(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:Sfe}=Array,{getPrototypeOf:Tfe,prototype:Efe,keys:Dfe}=Object;function dP(n){if(1===n.length){const e=n[0];if(Sfe(e))return{args:e,keys:null};if(function Afe(n){return n&&"object"==typeof n&&Tfe(n)===Efe}(e)){const t=Dfe(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:Rfe}=Array;function m9(n){return It(e=>function Ife(n,e){return Rfe(e)?n(...e):n(e)}(n,e))}function hP(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function g9(...n){const e=gp(n),t=QT(n),{args:i,keys:r}=dP(n);if(0===i.length)return er([],e);const s=new bn(function kfe(n,e,t=bs){return i=>{fP(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)fP(e,()=>{const c=er(n[l],e);let u=!1;c.subscribe(oi(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>hP(r,o):bs));return t?s.pipe(m9(t)):s}function fP(n,e,t){n?Al(t,n,e):e()}function A4(...n){return function Lfe(){return b1(1)}()(er(n,gp(n)))}function R4(n){return new bn(e=>{xs(n()).subscribe(e)})}function ff(n,e){const t=mn(n)?n:()=>n,i=r=>r.error(t());return new bn(e?r=>e.schedule(i,0,r):i)}function _9(){return Ei((n,e)=>{let t=null;n._refCount++;const i=oi(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class v9 extends bn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,zT(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ri;const t=this.getSubject();e.add(this.source.subscribe(oi(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ri.EMPTY)}return e}refCount(){return _9()(this)}}function ol(n,e){return Ei((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(oi(i,l=>{r?.unsubscribe();let c=0;const u=s++;xs(n(l,u)).subscribe(r=oi(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Yr(n){return n<=0?()=>Rl:Ei((e,t)=>{let i=0;e.subscribe(oi(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Yl(...n){const e=gp(n);return Ei((t,i)=>{(e?A4(n,t,e):A4(n,t)).subscribe(i)})}function $n(n,e){return Ei((t,i)=>{let r=0;t.subscribe(oi(i,s=>n.call(e,s,r++)&&i.next(s)))})}function I4(n){return Ei((e,t)=>{let i=!1;e.subscribe(oi(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function pP(n=Pfe){return Ei((e,t)=>{let i=!1;e.subscribe(oi(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Pfe(){return new D4}function uu(n,e){const t=arguments.length>=2;return i=>i.pipe(n?$n((r,s)=>n(r,s,i)):bs,Yr(1),t?I4(e):pP(()=>new D4))}function du(n,e){return mn(e)?Pr(n,e,1):Pr(n,1)}function mi(n,e,t){const i=mn(n)||e||t?{next:n,error:e,complete:t}:n;return i?Ei((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(oi(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):bs}function al(n){return Ei((e,t)=>{let s,i=null,r=!1;i=e.subscribe(oi(t,void 0,void 0,o=>{s=xs(n(o,al(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Ofe(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(oi(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function mP(n,e){return Ei(Ofe(n,e,arguments.length>=2,!0))}function y9(n){return n<=0?()=>Rl:Ei((e,t)=>{let i=[];e.subscribe(oi(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function gP(n,e){const t=arguments.length>=2;return i=>i.pipe(n?$n((r,s)=>n(r,s,i)):bs,y9(1),t?I4(e):pP(()=>new D4))}function b9(n){return It(()=>n)}function k4(n){return Ei((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const rn="primary",um=Symbol("RouteTitle");class Nfe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function pf(n){return new Nfe(n)}function zfe(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function ll(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!_P(n[r],e[r]))return!1;return!0}function _P(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function vP(n){return Array.prototype.concat.apply([],n)}function yP(n){return n.length>0?n[n.length-1]:null}function Xr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function hu(n){return ly(n)?n:jp(n)?er(Promise.resolve(n)):lt(n)}const Hfe={exact:function wP(n,e,t){if(!Nd(n.segments,e.segments)||!L4(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!wP(n.children[i],e.children[i],t))return!1;return!0},subset:CP},bP={exact:function Ufe(n,e){return ll(n,e)},subset:function Gfe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>_P(n[t],e[t]))},ignored:()=>!0};function xP(n,e,t){return Hfe[t.paths](n.root,e.root,t.matrixParams)&&bP[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function CP(n,e,t){return MP(n,e,e.segments,t)}function MP(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Nd(r,t)||e.hasChildren()||!L4(r,t,i))}if(n.segments.length===t.length){if(!Nd(n.segments,t)||!L4(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!CP(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Nd(n.segments,r)&&L4(n.segments,r,i)&&n.children[rn])&&MP(n.children[rn],e,s,i)}}function L4(n,e,t){return e.every((i,r)=>bP[t](n[r].parameters,i.parameters))}class Fd{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pf(this.queryParams)),this._queryParamMap}toString(){return $fe.serialize(this)}}class sn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xr(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return P4(this)}}class dm{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=pf(this.parameters)),this._parameterMap}toString(){return DP(this)}}function Nd(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let SP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:function(){return new w9},providedIn:"root"}),n})();class w9{parse(e){const t=new t2e(e);return new Fd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${hm(e.root,!0)}`,i=function Xfe(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${O4(t)}=${O4(r)}`).join("&"):`${O4(t)}=${O4(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function qfe(n){return encodeURI(n)}(e.fragment)}`:""}`}}const $fe=new w9;function P4(n){return n.segments.map(e=>DP(e)).join("/")}function hm(n,e){if(!n.hasChildren())return P4(n);if(e){const t=n.children[rn]?hm(n.children[rn],!1):"",i=[];return Xr(n.children,(r,s)=>{s!==rn&&i.push(`${s}:${hm(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function jfe(n,e){let t=[];return Xr(n.children,(i,r)=>{r===rn&&(t=t.concat(e(i,r)))}),Xr(n.children,(i,r)=>{r!==rn&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===rn?[hm(n.children[rn],!1)]:[`${r}:${hm(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[rn]?`${P4(n)}/${t[0]}`:`${P4(n)}/(${t.join("//")})`}}function TP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function O4(n){return TP(n).replace(/%3B/gi,";")}function C9(n){return TP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function F4(n){return decodeURIComponent(n)}function EP(n){return F4(n.replace(/\+/g,"%20"))}function DP(n){return`${C9(n.path)}${function Yfe(n){return Object.keys(n).map(e=>`;${C9(e)}=${C9(n[e])}`).join("")}(n.parameters)}`}const Zfe=/^[^\/()?;=#]+/;function N4(n){const e=n.match(Zfe);return e?e[0]:""}const Kfe=/^[^=?&#]+/,Jfe=/^[^&#]+/;class t2e{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[rn]=new sn(e,t)),i}parseSegment(){const e=N4(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Ce(4009,!1);return this.capture(e),new dm(F4(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=N4(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=N4(this.remaining);r&&(i=r,this.capture(i))}e[F4(t)]=F4(i)}parseQueryParam(e){const t=function Qfe(n){const e=n.match(Kfe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function e2e(n){const e=n.match(Jfe);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=EP(t),s=EP(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=N4(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Ce(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=rn);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[rn]:new sn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Ce(4011,!1)}}function M9(n){return n.segments.length>0?new sn([],{[rn]:n}):n}function z4(n){const e={};for(const i of Object.keys(n.children)){const s=z4(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function n2e(n){if(1===n.numberOfChildren&&n.children[rn]){const e=n.children[rn];return new sn(n.segments.concat(e.segments),e.children)}return n}(new sn(n.segments,e))}function zd(n){return n instanceof Fd}function s2e(n,e,t,i,r){if(0===t.length)return mf(e.root,e.root,e.root,i,r);const s=function IP(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new RP(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Xr(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new RP(t,e,i)}(t);return s.toRoot()?mf(e.root,e.root,new sn([],{}),i,r):function o(l){const c=function a2e(n,e,t,i){if(n.isAbsolute)return new gf(e.root,!0,0);if(-1===i)return new gf(t,t===e.root,0);return function kP(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Ce(4005,!1);r=i.segments.length}return new gf(i,!1,r-s)}(t,i+(fm(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,l),u=c.processChildren?mm(c.segmentGroup,c.index,s.commands):T9(c.segmentGroup,c.index,s.commands);return mf(e.root,c.segmentGroup,u,i,r)}(n.snapshot?._lastPathIndex)}function fm(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function pm(n){return"object"==typeof n&&null!=n&&n.outlets}function mf(n,e,t,i,r){let o,s={};i&&Xr(i,(l,c)=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=n===e?t:AP(n,e,t);const a=M9(z4(o));return new Fd(a,s,r)}function AP(n,e,t){const i={};return Xr(n.children,(r,s)=>{i[s]=r===e?t:AP(r,e,t)}),new sn(n.segments,i)}class RP{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&fm(i[0]))throw new Ce(4003,!1);const r=i.find(pm);if(r&&r!==yP(i))throw new Ce(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gf{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function T9(n,e,t){if(n||(n=new sn([],{})),0===n.segments.length&&n.hasChildren())return mm(n,e,t);const i=function c2e(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(pm(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!PP(l,c,o))return s;i+=2}else{if(!PP(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new sn(n.segments.slice(0,i.pathIndex),{});return s.children[rn]=new sn(n.segments.slice(i.pathIndex),n.children),mm(s,0,r)}return i.match&&0===r.length?new sn(n.segments,{}):i.match&&!n.hasChildren()?E9(n,e,t):i.match?mm(n,0,r):E9(n,e,t)}function mm(n,e,t){if(0===t.length)return new sn(n.segments,{});{const i=function l2e(n){return pm(n[0])?n[0].outlets:{[rn]:n}}(t),r={};return Xr(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=T9(n.children[o],e,s))}),Xr(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new sn(n.segments,r)}}function E9(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(pm(s)){const l=u2e(s.outlets);return new sn(i,l)}if(0===r&&fm(t[0])){i.push(new dm(n.segments[e].path,LP(t[0]))),r++;continue}const o=pm(s)?s.outlets[rn]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&fm(a)?(i.push(new dm(o,LP(a))),r+=2):(i.push(new dm(o,{})),r++)}return new sn(i,{})}function u2e(n){const e={};return Xr(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=E9(new sn([],{}),0,t))}),e}function LP(n){const e={};return Xr(n,(t,i)=>e[i]=`${t}`),e}function PP(n,e,t){return n==t.path&&ll(e,t.parameters)}class Xl{constructor(e,t){this.id=e,this.url=t}}class D9 extends Xl{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zl extends Xl{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class B4 extends Xl{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class OP extends Xl{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class d2e extends Xl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h2e extends Xl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class f2e extends Xl{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class p2e extends Xl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class m2e extends Xl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class g2e{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _2e{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class v2e{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class y2e{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class b2e{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class x2e{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class FP{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class NP{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=A9(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=A9(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=R9(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return R9(e,this._root).map(t=>t.value)}}function A9(n,e){if(n===e.value)return e;for(const t of e.children){const i=A9(n,t);if(i)return i}return null}function R9(n,e){if(n===e.value)return[e];for(const t of e.children){const i=R9(n,t);if(i.length)return i.unshift(e),i}return[]}class Kl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function _f(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class zP extends NP{constructor(e,t){super(e),this.snapshot=t,I9(this,e)}toString(){return this.snapshot.toString()}}function BP(n,e){const t=function C2e(n,e){const o=new V4([],{},{},"",{},rn,e,null,n.root,-1,{});return new HP("",new Kl(o,[]))}(n,e),i=new Fn([new dm("",{})]),r=new Fn({}),s=new Fn({}),o=new Fn({}),a=new Fn(""),l=new fu(i,r,o,a,s,rn,e,t.root);return l.snapshot=t.root,new zP(new Kl(l,[]),t)}class fu{constructor(e,t,i,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(It(c=>c[um]))??lt(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(It(e=>pf(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(It(e=>pf(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function VP(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function M2e(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class V4{constructor(e,t,i,r,s,o,a,l,c,u,d,h){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.[um],this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._correctedLastPathIndex=h??u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=pf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class HP extends NP{constructor(e,t){super(t),this.url=e,I9(this,t)}toString(){return UP(this._root)}}function I9(n,e){e.value._routerState=n,e.children.forEach(t=>I9(n,t))}function UP(n){const e=n.children.length>0?` { ${n.children.map(UP).join(", ")} } `:"";return`${n.value}${e}`}function k9(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ll(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ll(e.params,t.params)||n.params.next(t.params),function Bfe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ll(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ll(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function L9(n,e){const t=ll(n.params,e.params)&&function Wfe(n,e){return Nd(n,e)&&n.every((t,i)=>ll(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||L9(n.parent,e.parent))}function gm(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function T2e(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return gm(n,i,r);return gm(n,i)})}(n,e,t);return new Kl(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>gm(n,a)),o}}const i=function E2e(n){return new fu(new Fn(n.url),new Fn(n.params),new Fn(n.queryParams),new Fn(n.fragment),new Fn(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>gm(n,s));return new Kl(i,r)}}const P9="ngNavigationCancelingError";function GP(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=zd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=WP(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function WP(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[P9]=!0,i.cancellationCode=e,t&&(i.url=t),i}function jP(n){return $P(n)&&zd(n.url)}function $P(n){return n&&n[P9]}class D2e{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new _m,this.attachRef=null}}let _m=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new D2e,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const H4=!1;let U4=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Bt,this.deactivateEvents=new Bt,this.attachEvents=new Bt,this.detachEvents=new Bt,this.name=r||rn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ce(4012,H4);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ce(4012,H4);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ce(4012,H4);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Ce(4013,H4);this._activatedRoute=t;const r=this.location,o=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new A2e(t,a,r.injector);if(i&&function R2e(n){return!!n.resolveComponentFactory}(i)){const c=i.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(S(_m),S(Br),Bo("name"),S(dr),S(nu))},n.\u0275dir=le({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class A2e{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===fu?this.route:e===_m?this.childContexts:this.parent.get(e,t)}}let O9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=dt({type:n,selectors:[["ng-component"]],standalone:!0,features:[MI],decls:1,vars:0,template:function(t,i){1&t&&ne(0,"router-outlet")},dependencies:[U4],encapsulation:2}),n})();function qP(n,e){return n.providers&&!n._injector&&(n._injector=J3(n.providers,e,`Route: ${n.path}`)),n._injector??e}function N9(n){const e=n.children&&n.children.map(N9),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==rn&&(t.component=O9),t}function Wo(n){return n.outlet||rn}function YP(n,e){const t=n.filter(i=>Wo(i)===e);return t.push(...n.filter(i=>Wo(i)!==e)),t}function vm(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class O2e{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),k9(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=_f(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Xr(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=_f(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=_f(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=_f(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new x2e(s.value.snapshot))}),e.children.length&&this.forwardEvent(new y2e(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(k9(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),k9(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=vm(r.snapshot),l=a?.get(Cd)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class XP{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class G4{constructor(e,t){this.component=e,this.route=t}}function F2e(n,e,t){const i=n._root;return ym(i,e?e._root:null,t,[i.value])}function vf(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function SX(n){return null!==Jg(n)}(n)?e.get(n):n:i}function ym(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=_f(e);return n.children.forEach(o=>{(function z2e(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function B2e(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Nd(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Nd(n.url,e.url)||!ll(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!L9(n,e)||!ll(n.queryParams,e.queryParams);default:return!L9(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new XP(i)):(s.data=o.data,s._resolvedData=o._resolvedData),ym(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new G4(a.outlet.component,o))}else o&&bm(e,a,r),r.canActivateChecks.push(new XP(i)),ym(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Xr(s,(o,a)=>bm(o,t.getContext(a),r)),r}function bm(n,e,t){const i=_f(n),r=n.value;Xr(i,(s,o)=>{bm(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new G4(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function xm(n){return"function"==typeof n}function z9(n){return n instanceof D4||"EmptyError"===n?.name}const W4=Symbol("INITIAL_VALUE");function yf(){return ol(n=>g9(n.map(e=>e.pipe(Yr(1),Yl(W4)))).pipe(It(e=>{for(const t of e)if(!0!==t){if(t===W4)return W4;if(!1===t||t instanceof Fd)return t}return!0}),$n(e=>e!==W4),Yr(1)))}function ZP(n){return function Xc(...n){return Zg(n)}(mi(e=>{if(zd(e))throw GP(0,e)}),It(e=>!0===e))}const B9={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KP(n,e,t,i,r){const s=V9(n,e,t);return s.matched?function npe(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?lt(r.map(o=>{const a=vf(o,n);return hu(function j2e(n){return n&&xm(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(yf(),ZP()):lt(!0)}(i=qP(e,i),e,t).pipe(It(o=>!0===o?s:{...B9})):lt(s)}function V9(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...B9}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||zfe)(t,n,e);if(!r)return{...B9};const s={};Xr(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function j4(n,e,t,i,r="corrected"){if(t.length>0&&function spe(n,e,t){return t.some(i=>$4(n,e,i)&&Wo(i)!==rn)}(n,t,i)){const o=new sn(e,function rpe(n,e,t,i){const r={};r[rn]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Wo(s)!==rn){const o=new sn([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[Wo(s)]=o}return r}(n,e,i,new sn(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function ope(n,e,t){return t.some(i=>$4(n,e,i))}(n,t,i)){const o=new sn(n.segments,function ipe(n,e,t,i,r,s){const o={};for(const a of i)if($4(n,t,a)&&!r[Wo(a)]){const l=new sn([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Wo(a)]=l}return{...r,...o}}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new sn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function $4(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function QP(n,e,t,i){return!!(Wo(n)===i||i!==rn&&$4(e,t,n))&&("**"===n.path||V9(e,n,t).matched)}function JP(n,e,t){return 0===e.length&&!n.children[t]}const q4=!1;class Y4{constructor(e){this.segmentGroup=e||null}}class eO{constructor(e){this.urlTree=e}}function wm(n){return ff(new Y4(n))}function tO(n){return ff(new eO(n))}class upe{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=j4(this.urlTree.root,[],[],this.config).segmentGroup,t=new sn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,rn).pipe(It(s=>this.createUrlTree(z4(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(al(s=>{if(s instanceof eO)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Y4?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,rn).pipe(It(r=>this.createUrlTree(z4(r),e.queryParams,e.fragment))).pipe(al(r=>{throw r instanceof Y4?this.noMatchError(r):r}))}noMatchError(e){return new Ce(4002,q4)}createUrlTree(e,t,i){const r=M9(e);return new Fd(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(It(s=>new sn([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return er(r).pipe(du(s=>{const o=i.children[s],a=YP(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(It(l=>({segment:l,outlet:s})))}),mP((s,o)=>(s[o.outlet]=o.segment,s),{}),gP())}expandSegment(e,t,i,r,s,o){return er(i).pipe(du(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(al(c=>{if(c instanceof Y4)return lt(null);throw c}))),uu(a=>!!a),al((a,l)=>{if(z9(a))return JP(t,r,s)?lt(new sn([],{})):wm(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return QP(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):wm(t):wm(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?tO(s):this.lineralizeSegments(i,s).pipe(Pr(o=>{const a=new sn(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=V9(t,r,s);if(!a)return wm(t);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?tO(d):this.lineralizeSegments(r,d).pipe(Pr(h=>this.expandSegment(e,t,i,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=qP(i,e),i.loadChildren?(i._loadedRoutes?lt({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(It(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new sn(r,{})))):lt(new sn(r,{}))):KP(t,i,r,e).pipe(ol(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(Pr(u=>{const d=u.injector??e,h=u.routes,{segmentGroup:f,slicedSegments:p}=j4(t,a,l,h),m=new sn(f.segments,f.children);if(0===p.length&&m.hasChildren())return this.expandChildren(d,h,m).pipe(It(y=>new sn(a,y)));if(0===h.length&&0===p.length)return lt(new sn(a,{}));const g=Wo(i)===s;return this.expandSegment(d,m,h,p,g?rn:s,!0).pipe(It(v=>new sn(a.concat(v.segments),v.children)))})):wm(t)))}getChildConfig(e,t,i){return t.children?lt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?lt({routes:t._loadedRoutes,injector:t._loadedInjector}):function tpe(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?lt(!0):lt(r.map(o=>{const a=vf(o,n);return hu(function H2e(n){return n&&xm(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(yf(),ZP())}(e,t,i).pipe(Pr(r=>r?this.configLoader.loadChildren(e,t).pipe(mi(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function lpe(n){return ff(WP(q4,3))}())):lt({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return lt(i);if(r.numberOfChildren>1||!r.children[rn])return ff(new Ce(4e3,q4));r=r.children[rn]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Fd(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Xr(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Xr(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,r)}),new sn(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Ce(4001,q4);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class hpe{}class mpe{constructor(e,t,i,r,s,o,a,l){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=l}recognize(){const e=j4(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,rn).pipe(It(t=>{if(null===t)return null;const i=new V4([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},rn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Kl(i,t),s=new HP(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=VP(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return er(Object.keys(i.children)).pipe(du(r=>{const s=i.children[r],o=YP(t,r);return this.processSegmentGroup(e,o,s,r)}),mP((r,s)=>r&&s?(r.push(...s),r):null),function Ffe(n,e=!1){return Ei((t,i)=>{let r=0;t.subscribe(oi(i,s=>{const o=n(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(r=>null!==r),I4(null),gP(),It(r=>{if(null===r)return null;const s=nO(r);return function gpe(n){n.sort((e,t)=>e.value.outlet===rn?-1:t.value.outlet===rn?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return er(t).pipe(du(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),uu(o=>!!o),al(o=>{if(z9(o))return JP(i,r,s)?lt([]):lt(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!QP(t,i,r,s))return lt(null);let o;if("**"===t.path){const a=r.length>0?yP(r).parameters:{},l=rO(i)+r.length;o=lt({snapshot:new V4(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,oO(t),Wo(t),t.component??t._loadedComponent??null,t,iO(i),l,aO(t),l),consumedSegments:[],remainingSegments:[]})}else o=KP(i,t,r,e).pipe(It(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=rO(i)+l.length;return{snapshot:new V4(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,oO(t),Wo(t),t.component??t._loadedComponent??null,t,iO(i),d,aO(t),d),consumedSegments:l,remainingSegments:c}}));return o.pipe(ol(a=>{if(null===a)return lt(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function _pe(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:p}=j4(i,c,u,h.filter(g=>void 0===g.redirectTo),this.relativeLinkResolution);if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(It(g=>null===g?null:[new Kl(l,g)]));if(0===h.length&&0===p.length)return lt([new Kl(l,[])]);const m=Wo(t)===s;return this.processSegment(d,h,f,p,m?rn:s).pipe(It(g=>null===g?null:[new Kl(l,g)]))}))}}function vpe(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function nO(n){const e=[],t=new Set;for(const i of n){if(!vpe(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=nO(i.children);e.push(new Kl(i.value,r))}return e.filter(i=>!t.has(i))}function iO(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function rO(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function oO(n){return n.data||{}}function aO(n){return n.resolve||{}}function lO(n){return"string"==typeof n.title||null===n.title}function H9(n){return ol(e=>{const t=n(e);return t?er(t).pipe(It(()=>e)):lt(e)})}let cO=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===rn);return i}getResolvedTitleForRoute(t){return t.data[um]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:function(){return Vn(uO)},providedIn:"root"}),n})(),uO=(()=>{class n extends cO{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(K(AL))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Tpe{}class Dpe extends class Epe{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Z4=new pe("",{providedIn:"root",factory:()=>({})}),U9=new pe("ROUTES");let G9=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return lt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=hu(t.loadComponent()).pipe(mi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),k4(()=>{this.componentLoaders.delete(t)})),r=new v9(i,()=>new xt).pipe(_9());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return lt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(It(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=vP(l.get(U9,[],Et.Self|Et.Optional)));return{routes:c.map(N9),injector:l}}),k4(()=>{this.childrenLoaders.delete(i)})),o=new v9(s,()=>new xt).pipe(_9());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return hu(t()).pipe(Pr(i=>i instanceof wI||Array.isArray(i)?lt(i):er(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(K(ur),K(Iy))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Rpe{}class Ipe{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function kpe(n){throw n}function Lpe(n,e,t){return e.parse("/")}const Ppe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ope={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function hO(){const n=Vn(SP),e=Vn(_m),t=Vn(rm),i=Vn(ur),r=Vn(Iy),s=Vn(U9,{optional:!0})??[],o=Vn(Z4,{optional:!0})??{},a=Vn(uO),l=Vn(cO,{optional:!0}),c=Vn(Rpe,{optional:!0}),u=Vn(Tpe,{optional:!0}),d=new pr(null,n,e,t,i,r,vP(s));return c&&(d.urlHandlingStrategy=c),u&&(d.routeReuseStrategy=u),d.titleStrategy=l??a,function Fpe(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,d),d}let pr=(()=>{class n{constructor(t,i,r,s,o,a,l){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new xt,this.errorHandler=kpe,this.malformedUriErrorHandler=Lpe,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>lt(void 0),this.urlHandlingStrategy=new Ipe,this.routeReuseStrategy=new Dpe,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(G9),this.configLoader.onLoadEndListener=h=>this.triggerEvent(new _2e(h)),this.configLoader.onLoadStartListener=h=>this.triggerEvent(new g2e(h)),this.ngModule=o.get(Rd),this.console=o.get(Yne);const d=o.get(Ct);this.isNgZoneEnabled=d instanceof Ct&&Ct.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function Vfe(){return new Fd(new sn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=BP(this.currentUrlTree,this.rootComponentType),this.transitions=new Fn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe($n(r=>0!==r.id),It(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),ol(r=>{let s=!1,o=!1;return lt(r).pipe(mi(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ol(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return fO(a.source)&&(this.browserUrlTree=a.extractedUrl),lt(a).pipe(ol(d=>{const h=this.transitions.getValue();return i.next(new D9(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?Rl:Promise.resolve(d)}),function dpe(n,e,t,i){return ol(r=>function cpe(n,e,t,i,r){return new upe(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(It(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),mi(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},r.urlAfterRedirects=d.urlAfterRedirects}),function bpe(n,e,t,i,r,s){return Pr(o=>function ppe(n,e,t,i,r,s,o="emptyOnly",a="legacy"){return new mpe(n,e,t,i,r,o,a,s).recognize().pipe(ol(l=>null===l?function fpe(n){return new bn(e=>e.error(n))}(new hpe):lt(l)))}(n,e,t,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,r,s).pipe(It(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),mi(d=>{if(r.targetSnapshot=d.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new d2e(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:m,extras:g}=a,_=new D9(h,this.serializeUrl(f),p,m);i.next(_);const v=BP(f,this.rootComponentType).snapshot;return lt(r={...a,targetSnapshot:v,urlAfterRedirects:f,extras:{...g,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Rl}),mi(a=>{const l=new h2e(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),It(a=>r={...a,guards:F2e(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function q2e(n,e){return Pr(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?lt({...t,guardsResult:!0}):function Y2e(n,e,t,i){return er(n).pipe(Pr(r=>function epe(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?lt(s.map(a=>{const l=vm(e)??r,c=vf(a,l);return hu(function W2e(n){return n&&xm(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,i):l.runInContext(()=>c(n,e,t,i))).pipe(uu())})).pipe(yf()):lt(!0)}(r.component,r.route,t,e,i)),uu(r=>!0!==r,!0))}(o,i,r,n).pipe(Pr(a=>a&&function V2e(n){return"boolean"==typeof n}(a)?function X2e(n,e,t,i){return er(e).pipe(du(r=>A4(function K2e(n,e){return null!==n&&e&&e(new v2e(n)),lt(!0)}(r.route.parent,i),function Z2e(n,e){return null!==n&&e&&e(new b2e(n)),lt(!0)}(r.route,i),function J2e(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function N2e(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>R4(()=>lt(o.guards.map(l=>{const c=vm(o.node)??t,u=vf(l,c);return hu(function G2e(n){return n&&xm(n.canActivateChild)}(u)?u.canActivateChild(i,n):c.runInContext(()=>u(i,n))).pipe(uu())})).pipe(yf())));return lt(s).pipe(yf())}(n,r.path,t),function Q2e(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return lt(!0);const r=i.map(s=>R4(()=>{const o=vm(e)??t,a=vf(s,o);return hu(function U2e(n){return n&&xm(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(uu())}));return lt(r).pipe(yf())}(n,r.route,t))),uu(r=>!0!==r,!0))}(i,s,n,e):lt(a)),It(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),mi(a=>{if(r.guardsResult=a.guardsResult,zd(a.guardsResult))throw GP(0,a.guardsResult);const l=new f2e(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),$n(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),H9(a=>{if(a.guards.canActivateChecks.length)return lt(a).pipe(mi(l=>{const c=new p2e(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),ol(l=>{let c=!1;return lt(l).pipe(function xpe(n,e){return Pr(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return lt(t);let s=0;return er(r).pipe(du(o=>function wpe(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!lO(r)&&(s[um]=r.title),function Cpe(n,e,t,i){const r=function Mpe(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return lt({});const s={};return er(r).pipe(Pr(o=>function Spe(n,e,t,i){const r=vm(e)??i,s=vf(n,r);return hu(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(uu(),mi(a=>{s[o]=a}))),y9(1),b9(s),al(o=>z9(o)?Rl:ff(o)))}(s,n,e,i).pipe(It(o=>(n._resolvedData=o,n.data=VP(n,t).resolve,r&&lO(r)&&(n.data[um]=r.title),null)))}(o.route,i,n,e)),mi(()=>s++),y9(1),Pr(o=>s===r.length?lt(t):Rl))})}(this.paramsInheritanceStrategy,this.ngModule.injector),mi({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),mi(l=>{const c=new m2e(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),H9(a=>{const l=c=>{const u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(mi(d=>{c.component=d}),It(()=>{})));for(const d of c.children)u.push(...l(d));return u};return g9(l(a.targetSnapshot.root)).pipe(I4(),Yr(1))}),H9(()=>this.afterPreactivation()),It(a=>{const l=function S2e(n,e,t){const i=gm(n,e._root,t?t._root:void 0);return new zP(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:l}}),mi(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>It(i=>(new O2e(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),mi({next(){s=!0},complete(){s=!0}}),k4(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),al(a=>{if(o=!0,$P(a)){jP(a)||(this.navigated=!0,this.restoreHistory(r,!0));const l=new B4(r.id,this.serializeUrl(r.extractedUrl),a.message,a.cancellationCode);if(i.next(l),jP(a)){const c=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fO(r.source)};this.scheduleNavigation(c,"imperative",null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new OP(r.id,this.serializeUrl(r.extractedUrl),a,r.targetSnapshot??void 0);i.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return Rl}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(N9),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),s2e(c,this.currentUrlTree,t,d,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=zd(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function Npe(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new Ce(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...Ppe}:!1===i?{...Ope}:i,zd(t))return xP(this.currentUrlTree,t,r);const s=this.parseUrl(t);return xP(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Zl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((h,f)=>{a=h,l=f});const u=++this.navigationId;let d;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),d=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):d=0,this.setTransition({id:u,targetPageId:d,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i,r){const s=new B4(t.id,this.serializeUrl(t.extractedUrl),i,r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){Sd()},n.\u0275prov=ve({token:n,factory:function(){return hO()},providedIn:"root"}),n})();function fO(n){return"imperative"!==n}let Cm=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new xt,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=jl(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=jl(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=jl(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==t?i.setAttribute(r,"tabindex",t):i.removeAttribute(r,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(S(pr),S(fu),Bo("tabindex"),S(ho),S(Be))},n.\u0275dir=le({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&$e("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Di]}),n})(),W9=(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.locationStrategy=r,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new xt,this.subscription=t.events.subscribe(s=>{s instanceof Zl&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=jl(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=jl(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=jl(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,i,r,s,o){return!!(0!==t||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(S(pr),S(fu),S(Pd))},n.\u0275dir=le({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,i){1&t&&$e("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&gn("target",i.target)("href",i.href,tu)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Di]}),n})(),pO=(()=>{class n{constructor(t,i,r,s,o,a){this.router=t,this.element=i,this.renderer=r,this.cdr=s,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Bt,this.routerEventsSubscription=t.events.subscribe(l=>{l instanceof Zl&&this.update()})}ngAfterContentInit(){lt(this.links.changes,this.linksWithHrefs.changes,lt(null)).pipe(b1()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=er(t).pipe(b1()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function zpe(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&t.isActive(r.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(S(pr),S(Be),S(ho),S(dr),S(Cm,8),S(W9,8))},n.\u0275dir=le({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,i,r){if(1&t&&(pi(r,Cm,5),pi(r,W9,5)),2&t){let s;kt(s=Lt())&&(i.links=s),kt(s=Lt())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Di]}),n})();class mO{}let Bpe=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe($n(t=>t instanceof Zl),du(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=J3(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return er(r).pipe(b1())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):lt(null);const s=r.pipe(Pr(o=>null===o?lt(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?er([s,this.loader.loadComponent(i)]).pipe(b1()):s})}}return n.\u0275fac=function(t){return new(t||n)(K(pr),K(Iy),K(nu),K(mO),K(G9))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const j9=new pe("");let gO=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof D9?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof FP&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new FP(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Sd()},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})();function bf(n,e){return{\u0275kind:n,\u0275providers:e}}function $9(n){return[{provide:U9,multi:!0,useValue:n}]}function vO(){const n=Vn(ur);return e=>{const t=n.get(cf);if(e!==t.components[0])return;const i=n.get(pr),r=n.get(yO);1===n.get(q9)&&i.initialNavigation(),n.get(bO,null,Et.Optional)?.setUpPreloading(),n.get(j9,null,Et.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.next(),r.complete()}}const yO=new pe("",{factory:()=>new xt}),q9=new pe("",{providedIn:"root",factory:()=>1});const bO=new pe("");function Gpe(n){return bf(0,[{provide:bO,useExisting:Bpe},{provide:mO,useExisting:n}])}const xO=new pe("ROUTER_FORROOT_GUARD"),Wpe=[rm,{provide:SP,useClass:w9},{provide:pr,useFactory:hO},_m,{provide:fu,useFactory:function _O(n){return n.routerState.root},deps:[pr]},G9];function jpe(){return new _k("Router",pr)}let $pe=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[Wpe,[],$9(t),{provide:xO,useFactory:Zpe,deps:[[pr,new Nl,new yd]]},{provide:Z4,useValue:i||{}},i?.useHash?{provide:Pd,useClass:Fie}:{provide:Pd,useClass:Uk},{provide:j9,useFactory:()=>{const n=Vn(pr),e=Vn(Zre),t=Vn(Z4);return t.scrollOffset&&e.setOffset(t.scrollOffset),new gO(n,e,t)}},i?.preloadingStrategy?Gpe(i.preloadingStrategy).\u0275providers:[],{provide:_k,multi:!0,useFactory:jpe},i?.initialNavigation?Kpe(i):[],[{provide:wO,useFactory:vO},{provide:Ry,multi:!0,useExisting:wO}]]}}static forChild(t){return{ngModule:n,providers:[$9(t)]}}}return n.\u0275fac=function(t){return new(t||n)(K(xO,8))},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[O9]}),n})();function Zpe(n){return"guarded"}function Kpe(n){return["disabled"===n.initialNavigation?bf(3,[{provide:r4,multi:!0,useFactory:()=>{const e=Vn(pr);return()=>{e.setUpLocationChangeListener()}}},{provide:q9,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?bf(2,[{provide:q9,useValue:0},{provide:r4,multi:!0,deps:[ur],useFactory:e=>{const t=e.get(Pie,Promise.resolve());let i=!1;return()=>t.then(()=>new Promise(s=>{const o=e.get(pr),a=e.get(yO);(function r(s){e.get(pr).events.pipe($n(a=>a instanceof Zl||a instanceof B4||a instanceof OP),It(a=>a instanceof Zl||a instanceof B4&&(0===a.code||1===a.code)&&null),$n(a=>null!==a),Yr(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),o.afterPreactivation=()=>(s(!0),i||a.closed?lt(void 0):a),o.initialNavigation()}))}}]).\u0275providers:[]]}const wO=new pe("");var jo=(()=>{return(n=jo||(jo={})).insulated="insulated",n.orientation="orientation",n.baseDimension="base-dimension",n.extensionToNorth="extension-north",n.extensionToSouth="extension-south",n.extensionToWest="extension-west",n.extensionToEast="extension-east",n.halfCircle="half-circle",n.bendPoint="bend-point",n.roofBoth="roof-both",n.roofCircle="roof-circle",n.roof70="roof-70",n.roofWalls="roof-walls",n.efficiency="efficiency",n.greyOut="greyOut",n.amountSteps="amount-steps",n.viewlines="viewlines",n.warmWaterBuffer="warm-water-buffer",n.iJoists="i-joits",n.dampOpen="damp-open",n.airTight="air-tight",n.pipeLayer="pipe-layer",n.woodFiberPlate="wood-fiber-plate",jo;var n})(),ke=(()=>{return(n=ke||(ke={})).welcome="welcome",n.passiv="passiv",n.basics="basics",n.extensions="extensions",n.tower="tower",n.end="end",n.EndOfPageHouse="EndOfPageHouse",n.roofBasics="roof-basics",n.roofCircle="roof-circle",n.roofIntermezzo="roof-intermezzo",n.roof70="roof70",n.roofChoice="roof-choice",n.roofEdge="roof-edge",n.stairStart="stair-start",n.stairBasic="stair-basic",n.stairCheck="stair-check",n.stairPlan="stair-plan",n.facadeStart="facade-start",n.facadeWindow="facade-window",n.facadeBrick="facade-Brick",n.facadeDoor="facade-Door",n.constructionWelcome="construction-welcome",n.constructionFoundation="construction-foundation",n.constructionCrawlerSpace="construction-crawler-space",n.constructionRoof="construction-roof",n.constructionFloor="construction-floor",n.constructionWall="construction-wall",n.constructionWallFinish="construction-wall-finish",n.installationWelcome="installations-welcome",n.installationDrinkWater="installations-drink-water",n.installationGreyWater="installations-grey-water",n.installationHeating="installations-heating",n.installationElectricity="installations-electricity",n.installationVentilation="installations-ventilation",n.installationSmartHome="installations-smartHome",n.wiredWelcome="wired-welcome",n.wiredPower="wired-power",n.wiredEthernet="wired-ethernet",n.wiredSafety="wired-safety",n.wiredExtra="wired-extra",n.wiredLight="wired-light",n.wiredVent="wired-vent",n.costsWelcome="costs-welcome",n.costsConstruction="costs-construction",n.costsPreparations="costs-preparations",n.costsOpenings="costs-openings",n.costsElectra="costs-electra",n.costsFinishes="costs-finishes",n.costsOuterFinishes="costs-outer-finishes",n.costsTotals="costs-totals",ke;var n})(),ie=(()=>{return(n=ie||(ie={})).top="top",n.ground="ground",n.ceiling="ceiling",n.all="all",n.none="none",ie;var n})(),Bd=(()=>{return(n=Bd||(Bd={})).left="left",n.right="right",n.none="none",Bd;var n})(),Ri=(()=>{return(n=Ri||(Ri={})).plan="plan",n.cross="cross",n.stairPlan="stairPlan",n.stairCross="stairCross",n.window="window",n.none="none",Ri;var n})(),X=(()=>{return(n=X||(X={})).perilex="perilex",n.socket="socket",n.lightBulb="light-bulb",n.lightSwitch="light-switch",n.dlc="dlc",n.dimmer="dimmer",n.poe="poe",n.ethernet="ethernet",n.wifi="wifi",n.camera="camera",n.alarm="alarm",n.smoke="smoke",n.pir="pir",n.blinds="blinds",n.temperature="temperature",n.ventIn="vent-in",n.ventOut="vent-out",X;var n})(),ss=(()=>{return(n=ss||(ss={})).doors="doors",n.stats="stats",n.theoreticalWalls="theoreticalWalls",n.silhouette="silhouette",n.measure="measure",n.decoration="decoration",n.stramien="stramien",n.towerFootprint="towerFootprint",n.grid="grid",n.walkLine="walkLine",n.minimumHeight="minimumHeight",ss;var n})(),wa=(()=>{return(n=wa||(wa={})).OutsidePOE="OutsidePOE",n.SharedEthernet="SharedEthernet",wa;var n})();let Y9,e5=(()=>{class n{constructor(t,i){this.document=t,this.platformId=i,this.documentIsAccessible=lu(this.platformId)}static getCookieRegExp(t){const i=t.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(t){return!!this.documentIsAccessible&&(t=encodeURIComponent(t),n.getCookieRegExp(t).test(this.document.cookie))}get(t){if(this.documentIsAccessible&&this.check(t)){t=encodeURIComponent(t);const r=n.getCookieRegExp(t).exec(this.document.cookie);return r[1]?n.safeDecodeURIComponent(r[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const t={},i=this.document;return i.cookie&&""!==i.cookie&&i.cookie.split(";").forEach(r=>{const[s,o]=r.split("=");t[n.safeDecodeURIComponent(s.replace(/^ /,""))]=n.safeDecodeURIComponent(o)}),t}set(t,i,r,s,o,a,l){if(!this.documentIsAccessible)return;if("number"==typeof r||r instanceof Date||s||o||a||l)return void this.set(t,i,{expires:r,path:s,domain:o,secure:a,sameSite:l||"Lax"});let c=encodeURIComponent(t)+"="+encodeURIComponent(i)+";";const u=r||{};u.expires&&(c+="number"==typeof u.expires?"expires="+new Date((new Date).getTime()+1e3*u.expires*60*60*24).toUTCString()+";":"expires="+u.expires.toUTCString()+";"),u.path&&(c+="path="+u.path+";"),u.domain&&(c+="domain="+u.domain+";"),!1===u.secure&&"None"===u.sameSite&&(u.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),u.secure&&(c+="secure;"),u.sameSite||(u.sameSite="Lax"),c+="sameSite="+u.sameSite+";",this.document.cookie=c}delete(t,i,r,s,o="Lax"){if(!this.documentIsAccessible)return;const a=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:a,path:i,domain:r,secure:s,sameSite:o})}deleteAll(t,i,r,s="Lax"){if(!this.documentIsAccessible)return;const o=this.getAll();for(const a in o)o.hasOwnProperty(a)&&this.delete(a,t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(K(Mt),K(po))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ii=(()=>{class n{constructor(t,i){this.cookieService=t,this.router=i,this.darkMode=!1,this.title="Lindelund",this.update$=new xt,this.tag$=new Fn(void 0),this.graphic$=new Fn(void 0),this.states$=new Fn({}),this.popupActive$=new Fn(!1),this.fullscreen$=new Fn(!0),this.svgTransform$=new Fn(void 0),this.page$=this.router.events.pipe($n(r=>r instanceof Zl),Yl(this.router),It(r=>r.url.toLowerCase().split("/")[1])),this.floor$=new Fn(ie.ground),this.discord="https://discord.gg/HUKhWMvC",this.github="https://github.com/PassiveOpen/PassiveOpen.github.io",this.scroll$=new Fn({scroll:0,percentage:0,section:void 0,graphicSide:void 0,graphic:void 0}),this.getCookies()}setStatesSilent(t,i,r){t.flatMap(s=>this.setState(s,i,r,!1))}hardSetStates(t){const i=this.states$.value;Object.entries(t).forEach(([r,s])=>{i[r]=s}),this.commitState(i)}setState(t,i,r,s=!0){const o=this.states$.value;r&&(o[t]=Boolean(this.cookieService.get("states"))),o[t]=i||void 0===o[t]||!o[t],s?this.commitState(o):this.silentStates=o}commitState(t){this.states$.next(t),this.cookieService.set("states",JSON.stringify(t))}setTransformCookie(t,i){this.svgTransform$.next({[i]:t}),this.cookieService.set("svgTransform",JSON.stringify(this.svgTransform$.value))}getCookies(){let t=this.cookieService.get("floor");""===t&&(t=ie.ground),this.floor$.next(t);let i=this.cookieService.get("fullscreen");i=""!==i&&"true"===i,this.fullscreen$.next(i);let r=this.cookieService.get("svgTransform");(""===r||!1===i)&&(r="{}"),this.svgTransform$.next(JSON.parse(r));let s=this.cookieService.get("darkMode");this.setDarkMode(""===s?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches:"true"===s);let o=this.cookieService.get("states");""===o&&(o="{}"),this.states$.next(JSON.parse(o))}setFloor(t){let i;void 0!==t?i=t:(this.floor$.value===ie.ground&&(i=ie.top),this.floor$.value===ie.top&&(i=ie.ground)),this.floor$.next(i),this.cookieService.set("floor",i),this.update$.next()}setTag(t){this.tag$.next(t),this.update$.next()}setDarkMode(t,i=!1){document.body.classList.remove("light"),document.body.classList.remove("dark"),this.darkMode=void 0!==t?t:!this.darkMode,this.darkMode?document.body.classList.add("dark"):document.body.classList.add("light"),i&&this.cookieService.set("darkMode",`${this.darkMode}`,.1)}}return n.\u0275fac=function(t){return new(t||n)(K(e5),K(pr))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{Y9=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Y9=!1}let Mm,t5,Vd,X9,As=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?lu(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Y9)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(K(po))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pu(n){return function Jpe(){if(null==Mm&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Mm=!0}))}finally{Mm=Mm||!1}return Mm}()?n:!!n.capture}function MO(){if(null==Vd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Vd=!1,Vd;if("scrollBehavior"in document.documentElement.style)Vd=!0;else{const n=Element.prototype.scrollTo;Vd=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Vd}function Sm(){if("object"!=typeof document||!document)return 0;if(null==t5){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),t5=0,0===n.scrollLeft&&(n.scrollLeft=1,t5=0===n.scrollLeft?1:2),n.remove()}return t5}function SO(n){if(function eme(){if(null==X9){const n=typeof document<"u"?document.head:null;X9=!(!n||!n.createShadowRoot&&!n.attachShadow)}return X9}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Z9(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Hd(n){return n.composedPath?n.composedPath()[0]:n.target}function K9(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Ud(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class pme extends ri{constructor(e,t){super()}schedule(e,t=0){return this}}const n5={setInterval(n,e,...t){const{delegate:i}=n5;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=n5;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class tb extends pme{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return n5.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;n5.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,oa(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const IO={now:()=>(IO.delegate||Date).now(),delegate:void 0};class Tm{constructor(e,t=Tm.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Tm.now=IO.now;class nb extends Tm{constructor(e,t=Tm.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const r5=new nb(tb),mme=r5;function s5(n,e=r5){return Ei((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}t.subscribe(oi(i,c=>{s=c,o=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function kO(n){return $n((e,t)=>n<=t)}function LO(n,e=bs){return n=n??gme,Ei((t,i)=>{let r,s=!0;t.subscribe(oi(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function gme(n,e){return n===e}function Ln(n){return Ei((e,t)=>{xs(n).subscribe(oi(t,()=>t.complete(),qc)),!t.closed&&e.subscribe(t)})}function Vt(n){return null!=n&&"false"!=`${n}`}function go(n,e=0){return function _me(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function o5(n){return Array.isArray(n)?n:[n]}function mr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Gd(n){return n instanceof Be?n.nativeElement:n}let PO=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vme=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=Gd(t);return new bn(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new xt,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(K(PO))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OO=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new Bt,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Vt(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=go(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(s5(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(S(vme),S(Be),S(Ct))},n.\u0275dir=le({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Em=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({providers:[PO]}),n})();const FO=new Set;let wf,yme=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):xme}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function bme(n){if(!FO.has(n))try{wf||(wf=document.createElement("style"),wf.setAttribute("type","text/css"),document.head.appendChild(wf)),wf.sheet&&(wf.sheet.insertRule(`@media ${n} {body{ }}`,0),FO.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(K(As))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xme(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let wme=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new xt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return NO(o5(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=g9(NO(o5(t)).map(o=>this._registerQuery(o).observable));return s=A4(s.pipe(Yr(1)),s.pipe(kO(1),s5(0))),s.pipe(It(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new bn(o=>{const a=l=>this._zone.run(()=>o.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Yl(i),It(({matches:o})=>({query:t,matches:o})),Ln(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(K(yme),K(Ct))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function NO(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let Dm=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Dme(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function Eme(n){try{return n.frameElement}catch{return null}}(function Fme(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===HO(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=HO(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function Pme(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function Ome(n){return!function Rme(n){return function kme(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Ame(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Ime(n){return function Lme(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||VO(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(K(As))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function VO(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function HO(n){if(!VO(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Nme{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Yr(1)).subscribe(e)}}let a5=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new Nme(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(K(Dm),K(Ct),K(Mt))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function UO(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function GO(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const zme=new pe("cdk-input-modality-detector-options"),Bme={ignoreKeys:[18,17,224,91,16]},Cf=pu({passive:!0,capture:!0});let Vme=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Fn(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Hd(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(UO(o)?"keyboard":"mouse"),this._mostRecentTarget=Hd(o))},this._onTouchstart=o=>{GO(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Hd(o))},this._options={...Bme,...s},this.modalityDetected=this._modality.pipe(kO(1)),this.modalityChanged=this.modalityDetected.pipe(LO()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Cf),r.addEventListener("mousedown",this._onMousedown,Cf),r.addEventListener("touchstart",this._onTouchstart,Cf)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Cf),document.removeEventListener("mousedown",this._onMousedown,Cf),document.removeEventListener("touchstart",this._onTouchstart,Cf))}}return n.\u0275fac=function(t){return new(t||n)(K(As),K(Ct),K(Mt),K(zme,8))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ume=new pe("cdk-focus-monitor-default-options"),l5=pu({passive:!0,capture:!0});let Ca=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new xt,this._rootNodeFocusAndBlurListener=a=>{for(let c=Hd(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,i=!1){const r=Gd(t);if(!this._platform.isBrowser||1!==r.nodeType)return lt(null);const s=SO(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new xt,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=Gd(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=Gd(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Hd(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,l5),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,l5)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ln(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,l5),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,l5),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(K(Ct),K(As),K(Vme),K(Mt,8),K(Ume,8))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jO="cdk-high-contrast-black-on-white",$O="cdk-high-contrast-white-on-black",ib="cdk-high-contrast-active";let qO=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=Vn(wme).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(ib,jO,$O),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(ib,jO):2===i&&t.add(ib,$O)}}}return n.\u0275fac=function(t){return new(t||n)(K(As),K(Mt))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rb=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(K(qO))},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[Em]}),n})();const Gme=new pe("cdk-dir-doc",{providedIn:"root",factory:function Wme(){return Vn(Mt)}}),jme=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ql=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new Bt,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function $me(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?jme.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(K(Gme,8))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({}),n})();const Yme=new pe("mat-sanity-checks",{providedIn:"root",factory:function qme(){return!0}});let yt=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!K9()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(K(qO),K(Yme,8),K(Mt))},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[Wd,Wd]}),n})();function Am(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Vt(e)}}}function jd(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Jl(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Vt(e)}}}function c5(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?go(t):this.defaultTabIndex}}}let ZO=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=le({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function Rm(n,e,t){n.nativeElement.classList.toggle(e,t)}let u5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[yt,yt]}),n})();class Zme{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const JO={enterDuration:225,exitDuration:150},sb=pu({passive:!0}),eF=["mousedown","touchstart"],tF=["mouseup","mouseleave","touchend","touchcancel"];class Qme{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Gd(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...JO,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function Jme(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),f=d.transitionDuration,p="none"===d.transitionProperty||"0s"===f||"0s, 0s"===f,m=new Zme(this,u,i,p);u.style.transform="scale3d(1, 1, 1)",m.state=0,i.persistent||(this._mostRecentTransientRipple=m);let g=null;return!p&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const _=()=>this._finishRippleTransition(m),v=()=>this._destroyRipple(m);u.addEventListener("transitionend",_),u.addEventListener("transitioncancel",v),g={onTransitionEnd:_,onTransitionCancel:v}}),this._activeRipples.set(m,g),(p||!c)&&this._finishRippleTransition(m),m}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...JO,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Gd(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(eF))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(tF),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=UO(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!GO(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,sb)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(eF.forEach(e=>{this._triggerElement.removeEventListener(e,this,sb)}),this._pointerUpEventsRegistered&&tF.forEach(e=>{this._triggerElement.removeEventListener(e,this,sb)}))}}const e0e=new pe("mat-ripple-global-options");let ec=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Qme(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(Ct),S(As),S(e0e,8),S(mo,8))},n.\u0275dir=le({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&Nt("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Ma=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[yt,yt]}),n})(),ob=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[yt]}),n})(),nF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[Ma,Us,yt,ob]}),n})();const n0e=["*",[["mat-toolbar-row"]]],i0e=["*","mat-toolbar-row"],r0e=jd(class{constructor(n){this._elementRef=n}});let s0e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=le({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),o0e=(()=>{class n extends r0e{constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(As),S(Mt))},n.\u0275cmp=dt({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,i,r){if(1&t&&pi(r,s0e,5),2&t){let s;kt(s=Lt())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,i){2&t&&Nt("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[he],ngContentSelectors:i0e,decls:2,vars:0,template:function(t,i){1&t&&(Vi(n0e),Dn(0),Dn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),a0e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[yt,yt]}),n})();const l0e=["addListener","removeListener"],c0e=["addEventListener","removeEventListener"],u0e=["on","off"];function Mf(n,e,t,i){if(mn(t)&&(i=t,t=void 0),i)return Mf(n,e,t).pipe(m9(i));const[r,s]=function f0e(n){return mn(n.addEventListener)&&mn(n.removeEventListener)}(n)?c0e.map(o=>a=>n[o](e,a,t)):function d0e(n){return mn(n.addListener)&&mn(n.removeListener)}(n)?l0e.map(iF(n,e)):function h0e(n){return mn(n.on)&&mn(n.off)}(n)?u0e.map(iF(n,e)):[];if(!r&&p7(n))return Pr(o=>Mf(o,e,t))(xs(n));if(!r)throw new TypeError("Invalid event target");return new bn(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function iF(n,e){return t=>i=>n[t](e,i)}const Im={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Im;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new ri(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=Im;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Im;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class m0e extends nb{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class p0e extends tb{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Im.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(Im.cancelAnimationFrame(t),e._scheduled=void 0)}});let ab,_0e=1;const d5={};function rF(n){return n in d5&&(delete d5[n],!0)}const v0e={setImmediate(n){const e=_0e++;return d5[e]=!0,ab||(ab=Promise.resolve()),ab.then(()=>rF(e)&&n()),e},clearImmediate(n){rF(n)}},{setImmediate:y0e,clearImmediate:b0e}=v0e,h5={setImmediate(...n){const{delegate:e}=h5;return(e?.setImmediate||y0e)(...n)},clearImmediate(n){const{delegate:e}=h5;return(e?.clearImmediate||b0e)(n)},delegate:void 0};new class w0e extends nb{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class x0e extends tb{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=h5.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(h5.clearImmediate(t),e._scheduled=void 0)}});function sF(n=0,e,t=mme){let i=-1;return null!=e&&(KT(e)?t=e:i=e),new bn(r=>{let s=function S0e(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function oF(n,e=r5){return function M0e(n){return Ei((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const c=r;r=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(oi(t,c=>{i=!0,r=c,s||xs(n(c)).subscribe(s=oi(t,a,l))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>sF(n,e))}let f5=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new xt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new bn(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(oF(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):lt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe($n(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Gd(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Mf(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(K(Ct),K(As),K(Mt,8))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),km=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new xt,this._elementScrolled=new bn(o=>this.ngZone.runOutsideAngular(()=>Mf(this.elementRef.nativeElement,"scroll").pipe(Ln(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=Sm()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==Sm()?t.left=t.right:1==Sm()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;MO()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?r:i:"end"==t&&(t=o?i:r),o&&2==Sm()?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==Sm()?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(f5),S(Ct),S(Ql,8))},n.\u0275dir=le({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),Lm=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new xt,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(oF(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(K(As),K(Ct),K(Mt,8))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$d=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({}),n})(),p5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[Wd,$d,Wd,$d]}),n})();class lb{}const tc="*";function os(n,e){return{type:7,name:n,definitions:e,options:{}}}function Kn(n,e=null){return{type:4,styles:e,timings:n}}function aF(n,e=null){return{type:3,steps:n,options:e}}function lF(n,e=null){return{type:2,steps:n,options:e}}function St(n){return{type:6,styles:n,offset:null}}function Qn(n,e,t){return{type:0,name:n,styles:e,options:t}}function ci(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function cb(n=null){return{type:9,options:n}}function ub(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function cF(n){Promise.resolve().then(n)}class Pm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){cF(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class uF{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?cF(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const m5=["*"],R0e=["content"];function I0e(n,e){if(1&n){const t=is();C(0,"div",2),$e("click",function(){return Xt(t),Zt(et()._onBackdropClicked())}),T()}2&n&&Nt("mat-drawer-shown",et()._isShowingBackdrop())}function k0e(n,e){1&n&&(C(0,"mat-drawer-content"),Dn(1,2),T())}const L0e=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],P0e=["mat-drawer","mat-drawer-content","*"];function O0e(n,e){if(1&n){const t=is();C(0,"div",2),$e("click",function(){return Xt(t),Zt(et()._onBackdropClicked())}),T()}2&n&&Nt("mat-drawer-shown",et()._isShowingBackdrop())}function F0e(n,e){1&n&&(C(0,"mat-sidenav-content"),Dn(1,2),T())}const N0e=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],z0e=["mat-sidenav","mat-sidenav-content","*"],dF={transformDrawer:os("transform",[Qn("open, open-instant",St({transform:"none",visibility:"visible"})),Qn("void",St({"box-shadow":"none",visibility:"hidden"})),ci("void => open-instant",Kn("0ms")),ci("void <=> open, open-instant => void",Kn("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},V0e=new pe("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function H0e(){return!1}}),hb=new pe("MAT_DRAWER_CONTAINER");let g5=(()=>{class n extends km{constructor(t,i,r,s,o){super(r,s,o),this._changeDetectorRef=t,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(S(dr),S(dn(()=>fF)),S(Be),S(f5),S(Ct))},n.\u0275cmp=dt({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,i){2&t&&qr("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[wt([{provide:km,useExisting:n}]),he],ngContentSelectors:m5,decls:1,vars:0,template:function(t,i){1&t&&(Vi(),Dn(0))},encapsulation:2,changeDetection:0}),n})(),hF=(()=>{class n{constructor(t,i,r,s,o,a,l,c){this._elementRef=t,this._focusTrapFactory=i,this._focusMonitor=r,this._platform=s,this._ngZone=o,this._interactivityChecker=a,this._doc=l,this._container=c,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new xt,this._animationEnd=new xt,this._animationState="void",this.openedChange=new Bt(!0),this._openedStream=this.openedChange.pipe($n(u=>u),It(()=>{})),this.openedStart=this._animationStarted.pipe($n(u=>u.fromState!==u.toState&&0===u.toState.indexOf("open")),b9(void 0)),this._closedStream=this.openedChange.pipe($n(u=>!u),It(()=>{})),this.closedStart=this._animationStarted.pipe($n(u=>u.fromState!==u.toState&&"void"===u.toState),b9(void 0)),this._destroyed=new xt,this.onPositionChanged=new Bt,this._modeChanged=new xt,this.openedChange.subscribe(u=>{u?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Mf(this._elementRef.nativeElement,"keydown").pipe($n(u=>27===u.keyCode&&!this.disableClose&&!Ud(u)),Ln(this._destroyed)).subscribe(u=>this._ngZone.run(()=>{this.close(),u.stopPropagation(),u.preventDefault()}))}),this._animationEnd.pipe(LO((u,d)=>u.fromState===d.fromState&&u.toState===d.toState)).subscribe(u=>{const{fromState:d,toState:h}=u;(0===h.indexOf("open")&&"void"===d||"void"===h&&0===d.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Vt(t)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=Vt(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(Vt(t))}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{!i&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,i){t&&i&&(this._openedVia=i);const r=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),r}_setOpen(t,i,r){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(r)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(Yr(1)).subscribe(o=>s(o?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const i=this._elementRef.nativeElement,r=i.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,i)),r.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(a5),S(Ca),S(As),S(Ct),S(Dm),S(Mt,8),S(hb,8))},n.\u0275cmp=dt({type:n,selectors:[["mat-drawer"]],viewQuery:function(t,i){if(1&t&&fi(R0e,5),2&t){let r;kt(r=Lt())&&(i._content=r.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,i){1&t&&j3("@transform.start",function(s){return i._animationStarted.next(s)})("@transform.done",function(s){return i._animationEnd.next(s)}),2&t&&(gn("align",null),Y3("@transform",i._animationState),Nt("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:m5,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,i){1&t&&(Vi(),C(0,"div",0,1),Dn(2),T())},dependencies:[km],encapsulation:2,data:{animation:[dF.transformDrawer]},changeDetection:0}),n})(),fF=(()=>{class n{constructor(t,i,r,s,o,a=!1,l){this._dir=t,this._element=i,this._ngZone=r,this._changeDetectorRef=s,this._animationMode=l,this._drawers=new sf,this.backdropClick=new Bt,this._destroyed=new xt,this._doCheckSubject=new xt,this._contentMargins={left:null,right:null},this._contentMarginChanges=new xt,t&&t.change.pipe(Ln(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(Ln(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=a}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Vt(t)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(t){this._backdropOverride=null==t?null:Vt(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Yl(this._allDrawers),Ln(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Yl(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(s5(10),Ln(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,i=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();t+=r,i-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)i+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();i+=r,t-=r}t=t||null,i=i||null,(t!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:t,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe($n(i=>i.fromState!==i.toState),Ln(this._drawers.changes)).subscribe(i=>{"open-instant"!==i.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Ln(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(Ln(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Yr(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Ln(Il(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const i=this._element.nativeElement.classList,r="mat-drawer-container-has-open";t?i.add(r):i.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return n.\u0275fac=function(t){return new(t||n)(S(Ql,8),S(Be),S(Ct),S(dr),S(Lm),S(V0e),S(mo,8))},n.\u0275cmp=dt({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(t,i,r){if(1&t&&(pi(r,g5,5),pi(r,hF,5)),2&t){let s;kt(s=Lt())&&(i._content=s.first),kt(s=Lt())&&(i._allDrawers=s)}},viewQuery:function(t,i){if(1&t&&fi(g5,5),2&t){let r;kt(r=Lt())&&(i._userContent=r.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,i){2&t&&Nt("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[wt([{provide:hb,useExisting:n}])],ngContentSelectors:P0e,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,i){1&t&&(Vi(L0e),Ue(0,I0e,1,2,"div",0),Dn(1),Dn(2,1),Ue(3,k0e,2,0,"mat-drawer-content",1)),2&t&&(Z("ngIf",i.hasBackdrop),H(3),Z("ngIf",!i._content))},dependencies:[Go,g5],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),n})(),fb=(()=>{class n extends g5{constructor(t,i,r,s,o){super(t,i,r,s,o)}}return n.\u0275fac=function(t){return new(t||n)(S(dr),S(dn(()=>mF)),S(Be),S(f5),S(Ct))},n.\u0275cmp=dt({type:n,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,i){2&t&&qr("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[wt([{provide:km,useExisting:n}]),he],ngContentSelectors:m5,decls:1,vars:0,template:function(t,i){1&t&&(Vi(),Dn(0))},encapsulation:2,changeDetection:0}),n})(),pF=(()=>{class n extends hF{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=Vt(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=go(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=go(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275cmp=dt({type:n,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,i){2&t&&(gn("align",null),qr("top",i.fixedInViewport?i.fixedTopGap:null,"px")("bottom",i.fixedInViewport?i.fixedBottomGap:null,"px"),Nt("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened)("mat-sidenav-fixed",i.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[he],ngContentSelectors:m5,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,i){1&t&&(Vi(),C(0,"div",0,1),Dn(2),T())},dependencies:[km],encapsulation:2,data:{animation:[dF.transformDrawer]},changeDetection:0}),n})(),mF=(()=>{class n extends fF{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275cmp=dt({type:n,selectors:[["mat-sidenav-container"]],contentQueries:function(t,i,r){if(1&t&&(pi(r,fb,5),pi(r,pF,5)),2&t){let s;kt(s=Lt())&&(i._content=s.first),kt(s=Lt())&&(i._allDrawers=s)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,i){2&t&&Nt("mat-drawer-container-explicit-backdrop",i._backdropOverride)},exportAs:["matSidenavContainer"],features:[wt([{provide:hb,useExisting:n}]),he],ngContentSelectors:z0e,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,i){1&t&&(Vi(N0e),Ue(0,O0e,1,2,"div",0),Dn(1),Dn(2,1),Ue(3,F0e,2,0,"mat-sidenav-content",1)),2&t&&(Z("ngIf",i.hasBackdrop),H(3),Z("ngIf",!i._content))},dependencies:[Go,fb],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),n})(),U0e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[Us,yt,$d,$d,yt]}),n})();function gF(n){for(let e in n){let t=n[e]??"";switch(e){case"display":n.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":n["-webkit-"+e]=t;break;case"flex-direction":n["-webkit-flex-direction"]=t,n["flex-direction"]=t;break;case"order":n.order=n["-webkit-"+e]=isNaN(+t)?"0":t}}return n}const pb="inline",_5=["row","column","row-reverse","column-reverse"];function _F(n){let[e,t,i]=vF(n);return function W0e(n,e=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":n,"flex-wrap":e||null}}(e,t,i)}function vF(n){n=n?.toLowerCase()??"";let[e,t,i]=n.split(" ");return _5.find(r=>r===e)||(e=_5[0]),t===pb&&(t=i!==pb?i:"",i=pb),[e,G0e(t),!!i]}function Om(n){let[e]=vF(n);return e.indexOf("row")>-1}function G0e(n){if(n)switch(n.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":n="wrap-reverse";break;case"no":case"none":case"nowrap":n="nowrap";break;default:n="wrap"}return n}function nc(n,...e){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(let t of e)if(null!=t)for(let i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}const $0e={provide:Ry,useFactory:function j0e(n,e){return()=>{if(lu(e)){const t=Array.from(n.querySelectorAll(`[class*=${yF}]`)),i=/\bflex-layout-.+?\b/g;t.forEach(r=>{r.classList.contains(`${yF}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(i,"")})}}},deps:[Mt,po],multi:!0},yF="flex-layout-";let mb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({providers:[$0e]}),n})();class qd{constructor(e=!1,t="all",i="",r="",s=0){this.matches=e,this.mediaQuery=t,this.mqAlias=i,this.suffix=r,this.priority=s,this.property=""}clone(){return new qd(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let q0e=(()=>{class n{constructor(){this.stylesheet=new Map}addStyleToElement(t,i,r){const s=this.stylesheet.get(t);s?s.set(i,r):this.stylesheet.set(t,new Map([[i,r]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,i){const r=this.stylesheet.get(t);let s="";if(r){const o=r.get(i);("number"==typeof o||"string"==typeof o)&&(s=o+"")}return s}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gb={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},Sa=new pe("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>gb}),Sf=new pe("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),_b=new pe("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function bF(n,e){return n=n?.clone()??new qd,e&&(n.mqAlias=e.alias,n.mediaQuery=e.mediaQuery,n.suffix=e.suffix,n.priority=e.priority),n}class Ui{constructor(){this.shouldCache=!0}sideEffect(e,t,i){}}let gi=(()=>{class n{constructor(t,i,r,s){this._serverStylesheet=t,this._serverModuleLoaded=i,this._platformId=r,this.layoutConfig=s}applyStyleToElement(t,i,r=null){let s={};"string"==typeof i&&(s[i]=r,i=s),s=this.layoutConfig.disableVendorPrefixes?i:gF(i),this._applyMultiValueStyleToElement(s,t)}applyStyleToElements(t,i=[]){const r=this.layoutConfig.disableVendorPrefixes?t:gF(t);i.forEach(s=>{this._applyMultiValueStyleToElement(r,s)})}getFlowDirection(t){const i="flex-direction";let r=this.lookupStyle(t,i);return[r||"row",this.lookupInlineStyle(t,i)||df(this._platformId)&&this._serverModuleLoaded?r:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,i){return t.getAttribute(i)??""}lookupInlineStyle(t,i){return lu(this._platformId)?t.style.getPropertyValue(i):function Y0e(n,e){return xF(n)[e]??""}(t,i)}lookupStyle(t,i,r=!1){let s="";return t&&((s=this.lookupInlineStyle(t,i))||(lu(this._platformId)?r||(s=getComputedStyle(t).getPropertyValue(i)):this._serverModuleLoaded&&(s=this._serverStylesheet.getStyleForElement(t,i)))),s?s.trim():""}_applyMultiValueStyleToElement(t,i){Object.keys(t).sort().forEach(r=>{const s=t[r],o=Array.isArray(s)?s:[s];o.sort();for(let a of o)a=a?a+"":"",lu(this._platformId)||!this._serverModuleLoaded?lu(this._platformId)?i.style.setProperty(r,a):X0e(i,r,a):this._serverStylesheet.addStyleToElement(i,r,a)})}}return n.\u0275fac=function(t){return new(t||n)(K(q0e),K(Sf),K(po),K(Sa))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function X0e(n,e,t){e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const i=xF(n);i[e]=t??"",function Z0e(n,e){let t="";for(const i in e)e[i]&&(t+=`${i}:${e[i]};`);n.setAttribute("style",t)}(n,i)}function xF(n){const e={},t=n.getAttribute("style");if(t){const i=t.split(/;+/g);for(let r=0;r<i.length;r++){const s=i[r].trim();if(s.length>0){const o=s.indexOf(":");if(-1===o)throw new Error(`Invalid CSS style: ${s}`);e[s.substr(0,o).trim()]=s.substr(o+1).trim()}}}return e}function Fm(n,e){return(e&&e.priority||0)-(n&&n.priority||0)}function K0e(n,e){return(n.priority||0)-(e.priority||0)}let vb=(()=>{class n{constructor(t,i,r){this._zone=t,this._platformId=i,this._document=r,this.source=new Fn(new qd(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((i,r)=>{i.matches&&t.push(r)}),t}isActive(t){return this.registry.get(t)?.matches??this.registerQuery(t).some(r=>r.matches)}observe(t,i=!1){if(t&&t.length){const r=this._observable$.pipe($n(o=>!i||t.indexOf(o.mediaQuery)>-1));return Il(new bn(o=>{const a=this.registerQuery(t);if(a.length){const l=a.pop();a.forEach(c=>{o.next(c)}),this.source.next(l)}o.complete()}),r)}return this._observable$}registerQuery(t){const i=Array.isArray(t)?t:[t],r=[];return function Q0e(n,e){const t=n.filter(i=>!wF[i]);if(t.length>0){const i=t.join(", ");try{const r=e.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(e.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${i} {.fx-query-test{ }}\n`)),e.head.appendChild(r),t.forEach(s=>wF[s]=r)}catch(r){console.error(r)}}}(i,this._document),i.forEach(s=>{const o=l=>{this._zone.run(()=>this.source.next(new qd(l.matches,s)))};let a=this.registry.get(s);a||(a=this.buildMQL(s),a.addListener(o),this.pendingRemoveListenerFns.push(()=>a.removeListener(o)),this.registry.set(s,a)),a.matches&&r.push(new qd(!0,s))}),r}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function J0e(n,e){return e&&window.matchMedia("all").addListener?window.matchMedia(n):{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,lu(this._platformId))}}return n.\u0275fac=function(t){return new(t||n)(K(Ct),K(po),K(Mt))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wF={},ege=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],CF="(orientation: portrait) and (max-width: 599.98px)",MF="(orientation: landscape) and (max-width: 959.98px)",SF="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",TF="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",EF="(orientation: portrait) and (min-width: 840px)",DF="(orientation: landscape) and (min-width: 1280px)",ic={HANDSET:`${CF}, ${MF}`,TABLET:`${SF} , ${TF}`,WEB:`${EF}, ${DF} `,HANDSET_PORTRAIT:`${CF}`,TABLET_PORTRAIT:`${SF} `,WEB_PORTRAIT:`${EF}`,HANDSET_LANDSCAPE:`${MF}`,TABLET_LANDSCAPE:`${TF}`,WEB_LANDSCAPE:`${DF}`},tge=[{alias:"handset",priority:2e3,mediaQuery:ic.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:ic.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:ic.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:ic.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:ic.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:ic.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:ic.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:ic.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:ic.WEB_PORTRAIT,overlapping:!0}],nge=/(\.|-|_)/g;function ige(n){let e=n.length>0?n.charAt(0):"",t=n.length>1?n.slice(1):"";return e.toUpperCase()+t}const age=new pe("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const n=Vn(_b),e=Vn(Sa),t=[].concat.apply([],(n||[]).map(r=>Array.isArray(r)?r:[r]));return function oge(n,e=[]){const t={};return n.forEach(i=>{t[i.alias]=i}),e.forEach(i=>{t[i.alias]?nc(t[i.alias],i):t[i.alias]=i}),function sge(n){return n.forEach(e=>{e.suffix||(e.suffix=function rge(n){return n.replace(nge,"|").split("|").map(ige).join("")}(e.alias),e.overlapping=!!e.overlapping)}),n}(Object.keys(t).map(i=>t[i]))}((e.disableDefaultBps?[]:ege).concat(e.addOrientationBps?tge:[]),t)}});let yb=(()=>{class n{constructor(t){this.findByMap=new Map,this.items=[...t].sort(K0e)}findByAlias(t){return t?this.findWithPredicate(t,i=>i.alias===t):null}findByQuery(t){return this.findWithPredicate(t,i=>i.mediaQuery===t)}get overlappings(){return this.items.filter(t=>t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t?.suffix??"")}findWithPredicate(t,i){let r=this.findByMap.get(t);return r||(r=this.items.find(i)??null,this.findByMap.set(t,r)),r??null}}return n.\u0275fac=function(t){return new(t||n)(K(age))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Tf="print",lge={alias:Tf,mediaQuery:Tf,priority:1e3};let cge=(()=>{class n{constructor(t,i,r){this.breakpoints=t,this.layoutConfig=i,this._document=r,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new uge,this.deactivations=[]}withPrintQuery(t){return[...t,Tf]}isPrintEvent(t){return t.mediaQuery.startsWith(Tf)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const i=this.breakpoints.findByQuery(t);return(i?[...this.printBreakPoints,i]:this.printBreakPoints).sort(Fm)}updateEvent(t){let i=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(i=this.getEventBreakpoints(t)[0],t.mediaQuery=i?.mediaQuery??""),bF(t,i)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const i=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new qd(!0,Tf))),t.updateStyles())},r=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",i),this._document.defaultView.addEventListener("afterprint",r),this.beforePrintEventListeners.push(i),this.afterPrintEventListeners.push(r)}interceptEvents(t){return i=>{this.isPrintEvent(i)?i.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(i)),t.updateStyles()):!i.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(t,i)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,i){this.isPrinting=!0,this.formerActivations=t.activatedBreakpoints,t.activatedBreakpoints=this.queue.addPrintBreakpoints(i)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(t,i){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!i.matches){const r=this.breakpoints.findByQuery(i.mediaQuery);if(r){const s=this.formerActivations&&this.formerActivations.includes(r),o=!this.formerActivations&&t.activatedBreakpoints.includes(r);(s||o)&&(this.deactivations.push(r),this.deactivations.sort(Fm))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return n.\u0275fac=function(t){return new(t||n)(K(yb),K(Sa),K(Mt))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uge{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(e){return e.push(lge),e.sort(Fm),e.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(e){e&&void 0===this.printBreakpoints.find(i=>i.mediaQuery===e.mediaQuery)&&(this.printBreakpoints=function dge(n){return n?.mediaQuery.startsWith(Tf)??!1}(e)?[e,...this.printBreakpoints]:[...this.printBreakpoints,e])}clear(){this.printBreakpoints=[]}}let wi=(()=>{class n{constructor(t,i,r){this.matchMedia=t,this.breakpoints=i,this.hook=r,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new xt,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(t){this._activatedBreakpoints=[...t]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(t){this._useFallbacks=t}onMediaChange(t){const i=this.findByQuery(t.mediaQuery);if(i){t=bF(t,i);const r=this.activatedBreakpoints.indexOf(i);t.matches&&-1===r?(this._activatedBreakpoints.push(i),this._activatedBreakpoints.sort(Fm),this.updateStyles()):!t.matches&&-1!==r&&(this._activatedBreakpoints.splice(r,1),this._activatedBreakpoints.sort(Fm),this.updateStyles())}}init(t,i,r,s,o=[]){AF(this.updateMap,t,i,r),AF(this.clearMap,t,i,s),this.buildElementKeyMap(t,i),this.watchExtraTriggers(t,i,o)}getValue(t,i,r){const s=this.elementMap.get(t);if(s){const o=void 0!==r?s.get(r):this.getActivatedValues(s,i);if(o)return o.get(i)}}hasValue(t,i){const r=this.elementMap.get(t);if(r){const s=this.getActivatedValues(r,i);if(s)return void 0!==s.get(i)||!1}return!1}setValue(t,i,r,s){let o=this.elementMap.get(t);if(o){const l=(o.get(s)??new Map).set(i,r);o.set(s,l),this.elementMap.set(t,o)}else o=(new Map).set(s,(new Map).set(i,r)),this.elementMap.set(t,o);const a=this.getValue(t,i);void 0!==a&&this.updateElement(t,i,a)}trackValue(t,i){return this.subject.asObservable().pipe($n(r=>r.element===t&&r.key===i))}updateStyles(){this.elementMap.forEach((t,i)=>{const r=new Set(this.elementKeyMap.get(i));let s=this.getActivatedValues(t);s&&s.forEach((o,a)=>{this.updateElement(i,a,o),r.delete(a)}),r.forEach(o=>{if(s=this.getActivatedValues(t,o),s){const a=s.get(o);this.updateElement(i,o,a)}else this.clearElement(i,o)})})}clearElement(t,i){const r=this.clearMap.get(t);if(r){const s=r.get(i);s&&(s(),this.subject.next({element:t,key:i,value:""}))}}updateElement(t,i,r){const s=this.updateMap.get(t);if(s){const o=s.get(i);o&&(o(r),this.subject.next({element:t,key:i,value:r}))}}releaseElement(t){const i=this.watcherMap.get(t);i&&(i.forEach(s=>s.unsubscribe()),this.watcherMap.delete(t));const r=this.elementMap.get(t);r&&(r.forEach((s,o)=>r.delete(o)),this.elementMap.delete(t))}triggerUpdate(t,i){const r=this.elementMap.get(t);if(r){const s=this.getActivatedValues(r,i);s&&(i?this.updateElement(t,i,s.get(i)):s.forEach((o,a)=>this.updateElement(t,a,o)))}}buildElementKeyMap(t,i){let r=this.elementKeyMap.get(t);r||(r=new Set,this.elementKeyMap.set(t,r)),r.add(i)}watchExtraTriggers(t,i,r){if(r&&r.length){let s=this.watcherMap.get(t);if(s||(s=new Map,this.watcherMap.set(t,s)),!s.get(i)){const a=Il(...r).subscribe(()=>{const l=this.getValue(t,i);this.updateElement(t,i,l)});s.set(i,a)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,i){for(let s=0;s<this.activatedBreakpoints.length;s++){const a=t.get(this.activatedBreakpoints[s].alias);if(a&&(void 0===i||a.has(i)&&null!=a.get(i)))return a}if(!this._useFallbacks)return;const r=t.get("");return void 0===i||r&&r.has(i)?r:void 0}observeActivations(){const t=this.breakpoints.items.map(i=>i.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe(mi(this.hook.interceptEvents(this)),$n(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return n.\u0275fac=function(t){return new(t||n)(K(vb),K(yb),K(cge))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function AF(n,e,t,i){if(void 0!==i){const r=n.get(e)??new Map;r.set(t,i),n.set(e,r)}}let ki=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.styleBuilder=i,this.styler=r,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new xt,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const r=i.split(".").slice(1).join(".");this.setValue(t[i].currentValue,r)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,i){const r=this.styleBuilder,s=r.shouldCache;let o=this.styleCache.get(t);(!o||!s)&&(o=r.buildStyles(t,i),s&&this.styleCache.set(t,o)),this.mru={...o},this.applyStyleToElement(o),r.sideEffect(t,o,i)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,i=!1){if(t){const[r,s]=this.styler.getFlowDirection(t);if(!s&&i){const o=_F(r);this.styler.applyStyleToElements(o,[t])}return r.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,i,r=this.nativeElement){this.styler.applyStyleToElement(r,t,i)}setValue(t,i){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,i)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(Ui),S(gi),S(wi))},n.\u0275dir=le({type:n,features:[Di]}),n})();function RF(n,e="1",t="1"){let i=[e,t,n],r=n.indexOf("calc");if(r>0){i[2]=IF(n.substring(r).trim());let s=n.substr(0,r).trim().split(" ");2==s.length&&(i[0]=s[0],i[1]=s[1])}else if(0==r)i[2]=IF(n.trim());else{let s=n.split(" ");i=3===s.length?s:[e,t,n]}return i}function IF(n){return n.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}function v5(n,e){if(void 0===e)return n;const t=i=>{const r=+i.slice(0,-"x".length);return n.endsWith("x")&&!isNaN(r)?`${r*e.value}${e.unit}`:n};return n.includes(" ")?n.split(" ").map(t).join(" "):t(n)}let pge=(()=>{class n extends Ui{buildStyles(t,{display:i}){const r=_F(t);return{...r,display:"none"===i?i:r.display}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mge=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let gge=(()=>{class n extends ki{constructor(t,i,r,s,o){super(t,r,i,s),this._config=o,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(t){const r=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=LF.get(r)??new Map,LF.set(r,this.styleCache),this.currentValue!==t&&(this.addStyles(t,{display:r}),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(gi),S(pge),S(wi),S(Sa))},n.\u0275dir=le({type:n,features:[he]}),n})(),Ef=(()=>{class n extends gge{constructor(){super(...arguments),this.inputs=mge}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[he]}),n})();const LF=new Map,PF={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};let _ge=(()=>{class n extends Ui{constructor(t,i){super(),this._styler=t,this._config=i}buildStyles(t,i){return t.endsWith(y5)?function Sge(n,e){const[t,i]=n.split(" "),s=c=>`-${c}`;let o="0px",a=s(i??t),l="0px";return"rtl"===e?l=s(t):o=s(t),{margin:`0px ${o} ${a} ${l}`}}(t=v5(t=t.slice(0,t.indexOf(y5)),this._config.multiplier),i.directionality):{}}sideEffect(t,i,r){const s=r.items;if(t.endsWith(y5)){const o=function Mge(n,e){const[t,i]=n.split(" ");let s="0px",a="0px";return"rtl"===e?a=t:s=t,{padding:`0px ${s} ${i??t} ${a}`}}(t=v5(t=t.slice(0,t.indexOf(y5)),this._config.multiplier),r.directionality);this._styler.applyStyleToElements(o,r.items)}else{t=v5(t,this._config.multiplier),t=this.addFallbackUnit(t);const o=s.pop(),a=function Tge(n,e){const t=OF(e.directionality,e.layout),i={...PF};return i[t]=n,i}(t,r);this._styler.applyStyleToElements(a,s),this._styler.applyStyleToElements(PF,[o])}}addFallbackUnit(t){return isNaN(+t)?t:`${t}${this._config.defaultUnit}`}}return n.\u0275fac=function(t){return new(t||n)(K(gi),K(Sa))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vge=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"];let yge=(()=>{class n extends ki{constructor(t,i,r,s,o,a){super(t,o,s,a),this.zone=i,this.directionality=r,this.styleUtils=s,this.layout="row",this.DIRECTIVE_KEY="layout-gap",this.observerSubject=new xt;const l=[this.directionality.change,this.observerSubject.asObservable()];this.init(l),this.marshal.trackValue(this.nativeElement,"layout").pipe(Ln(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}get childrenNodes(){const t=this.nativeElement.children,i=[];for(let r=t.length;r--;)i[r]=t[r];return i}ngAfterContentInit(){this.buildChildObservable(),this.triggerUpdate()}ngOnDestroy(){super.ngOnDestroy(),this.observer&&this.observer.disconnect()}onLayoutChange(t){const r=t.value.split(" ");this.layout=r[0],_5.find(s=>s===this.layout)||(this.layout="row"),this.triggerUpdate()}updateWithValue(t){const i=this.childrenNodes.filter(r=>1===r.nodeType&&this.willDisplay(r)).sort((r,s)=>{const o=+this.styler.lookupStyle(r,"order"),a=+this.styler.lookupStyle(s,"order");return isNaN(o)||isNaN(a)||o===a?0:o>a?1:-1});if(i.length>0){const r=this.directionality.value,s=this.layout;"row"===s&&"rtl"===r?this.styleCache=bge:"row"===s&&"rtl"!==r?this.styleCache=wge:"column"===s&&"rtl"===r?this.styleCache=xge:"column"===s&&"rtl"!==r&&(this.styleCache=Cge),this.addStyles(t,{directionality:r,items:i,layout:s})}}clearStyles(){const t=Object.keys(this.mru).length>0,i=t?"padding":OF(this.directionality.value,this.layout);t&&super.clearStyles(),this.styleUtils.applyStyleToElements({[i]:""},this.childrenNodes)}willDisplay(t){const i=this.marshal.getValue(t,"show-hide");return!0===i||void 0===i&&"none"!==this.styleUtils.lookupStyle(t,"display")}buildChildObservable(){this.zone.runOutsideAngular(()=>{typeof MutationObserver<"u"&&(this.observer=new MutationObserver(t=>{t.some(r=>r.addedNodes&&r.addedNodes.length>0||r.removedNodes&&r.removedNodes.length>0)&&this.observerSubject.next()}),this.observer.observe(this.nativeElement,{childList:!0}))})}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(Ct),S(Ql),S(gi),S(_ge),S(wi))},n.\u0275dir=le({type:n,features:[he]}),n})(),Nm=(()=>{class n extends yge{constructor(){super(...arguments),this.inputs=vge}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[he]}),n})();const bge=new Map,xge=new Map,wge=new Map,Cge=new Map,y5=" grid";function OF(n,e){switch(e){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":default:return"rtl"===n?"margin-left":"margin-right";case"row-reverse":return"rtl"===n?"margin-right":"margin-left"}}let Ege=(()=>{class n extends Ui{constructor(t){super(),this.layoutConfig=t}buildStyles(t,i){let[r,s,...o]=t.split(" "),a=o.join(" ");const l=i.direction.indexOf("column")>-1?"column":"row",c=Om(l)?"max-width":"max-height",u=Om(l)?"min-width":"min-height",d=String(a).indexOf("calc")>-1,h=d||"auto"===a,f=String(a).indexOf("%")>-1&&!d,p=String(a).indexOf("px")>-1||String(a).indexOf("rem")>-1||String(a).indexOf("em")>-1||String(a).indexOf("vw")>-1||String(a).indexOf("vh")>-1;let m=d||p;r="0"==r?0:r,s="0"==s?0:s;const g=!r&&!s;let _={};const v={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(a||""){case"":const y=!1!==this.layoutConfig.useColumnBasisZero;a="row"===l?"0%":y?"0.000000001px":"auto";break;case"initial":case"nogrow":r=0,a="auto";break;case"grow":a="100%";break;case"noshrink":s=0,a="auto";break;case"auto":break;case"none":r=0,s=0,a="auto";break;default:!m&&!f&&!isNaN(a)&&(a+="%"),"0%"===a&&(m=!0),"0px"===a&&(a="0%"),_=nc(v,d?{"flex-grow":r,"flex-shrink":s,"flex-basis":m?a:"100%"}:{flex:`${r} ${s} ${m?a:"100%"}`})}return _.flex||_["flex-grow"]||(_=nc(v,d?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`})),"0%"!==a&&"0px"!==a&&"0.000000001px"!==a&&"auto"!==a&&(_[u]=g||m&&r?a:null,_[c]=g||!h&&s?a:null),_[u]||_[c]?i.hasWrap&&(_[d?"flex-basis":"flex"]=_[c]?d?_[c]:`${r} ${s} ${_[c]}`:d?_[u]:`${r} ${s} ${_[u]}`):_=nc(v,d?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`}),nc(_,{"box-sizing":"border-box"})}}return n.\u0275fac=function(t){return new(t||n)(K(Sa))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Dge=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let Age=(()=>{class n extends ki{constructor(t,i,r,s,o){super(t,s,i,o),this.layoutConfig=r,this.marshal=o,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(t){this.flexShrink=t||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(t){this.flexGrow=t||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(Ln(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(Ln(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(t){const r=t.value.split(" ");this.direction=r[0],this.wrap=void 0!==r[1]&&"wrap"===r[1],this.triggerUpdate()}updateWithValue(t){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const r=this.direction,s=r.startsWith("row"),o=this.wrap;s&&o?this.styleCache=kge:s&&!o?this.styleCache=Rge:!s&&o?this.styleCache=Lge:!s&&!o&&(this.styleCache=Ige);const l=RF(String(t).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(l.join(" "),{direction:r,hasWrap:o})}triggerReflow(){const t=this.activatedValue;if(void 0!==t){const i=RF(t+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,i.join(" "))}}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(gi),S(Sa),S(Ege),S(wi))},n.\u0275dir=le({type:n,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[he]}),n})(),bb=(()=>{class n extends Age{constructor(){super(...arguments),this.inputs=Dge}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[he]}),n})();const Rge=new Map,Ige=new Map,kge=new Map,Lge=new Map;let n3e=(()=>{class n extends Ui{buildStyles(t,i){const r={},[s,o]=t.split(" ");switch(s){case"center":r["justify-content"]="center";break;case"space-around":r["justify-content"]="space-around";break;case"space-between":r["justify-content"]="space-between";break;case"space-evenly":r["justify-content"]="space-evenly";break;case"end":case"flex-end":r["justify-content"]="flex-end";break;default:r["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":r["align-items"]=r["align-content"]="flex-start";break;case"center":r["align-items"]=r["align-content"]="center";break;case"end":case"flex-end":r["align-items"]=r["align-content"]="flex-end";break;case"space-between":r["align-content"]="space-between",r["align-items"]="stretch";break;case"space-around":r["align-content"]="space-around",r["align-items"]="stretch";break;case"baseline":r["align-content"]="stretch",r["align-items"]="baseline";break;default:r["align-items"]=r["align-content"]="stretch"}return nc(r,{display:i.inline?"inline-flex":"flex","flex-direction":i.layout,"box-sizing":"border-box","max-width":"stretch"===o?Om(i.layout)?null:"100%":null,"max-height":"stretch"===o&&Om(i.layout)?"100%":null})}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const i3e=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let r3e=(()=>{class n extends ki{constructor(t,i,r,s){super(t,r,i,s),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(Ln(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const i=this.layout||"row",r=this.inline;"row"===i&&r?this.styleCache=c3e:"row"!==i||r?"row-reverse"===i&&r?this.styleCache=d3e:"row-reverse"!==i||r?"column"===i&&r?this.styleCache=u3e:"column"!==i||r?"column-reverse"===i&&r?this.styleCache=h3e:"column-reverse"===i&&!r&&(this.styleCache=l3e):this.styleCache=o3e:this.styleCache=a3e:this.styleCache=s3e,this.addStyles(t,{layout:i,inline:r})}onLayoutChange(t){const i=t.value.split(" ");this.layout=i[0],this.inline=t.value.includes("inline"),_5.find(r=>r===this.layout)||(this.layout="row"),this.triggerUpdate()}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(gi),S(n3e),S(wi))},n.\u0275dir=le({type:n,features:[he]}),n})(),Df=(()=>{class n extends r3e{constructor(){super(...arguments),this.inputs=i3e}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[he]}),n})();const s3e=new Map,o3e=new Map,a3e=new Map,l3e=new Map,c3e=new Map,u3e=new Map,d3e=new Map,h3e=new Map;let FF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[mb,Wd]}),n})();function NF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function st(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?NF(Object(t),!0).forEach(function(i){Dr(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):NF(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function b5(n){return(b5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function zF(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Dr(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xb(n,e){return function _3e(n){if(Array.isArray(n))return n}(n)||function y3e(n,e){var t=null==n?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,a,i=[],r=!0,s=!1;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(l){s=!0,a=l}finally{try{!r&&null!=t.return&&t.return()}finally{if(s)throw a}}return i}}(n,e)||BF(n,e)||function x3e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bm(n){return function g3e(n){if(Array.isArray(n))return wb(n)}(n)||function v3e(n){if(typeof Symbol<"u"&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||BF(n)||function b3e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BF(n,e){if(n){if("string"==typeof n)return wb(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wb(n,e)}}function wb(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var VF=function(){},Cb={},HF={},UF=null,GF={mark:VF,measure:VF};try{typeof window<"u"&&(Cb=window),typeof document<"u"&&(HF=document),typeof MutationObserver<"u"&&(UF=MutationObserver),typeof performance<"u"&&(GF=performance)}catch{}var C5,M5,S5,T5,E5,WF=(Cb.navigator||{}).userAgent,jF=void 0===WF?"":WF,mu=Cb,_i=HF,$F=UF,w5=GF,rc=!!_i.documentElement&&!!_i.head&&"function"==typeof _i.addEventListener&&"function"==typeof _i.createElement,qF=~jF.indexOf("MSIE")||~jF.indexOf("Trident/"),sc="___FONT_AWESOME___",XF="svg-inline--fa",Yd="data-fa-i2svg",Sb="data-fa-pseudo-element",Tb="data-prefix",Eb="data-icon",ZF="fontawesome-i2svg",S3e=["HTML","HEAD","STYLE","SCRIPT"],KF=function(){try{return!0}catch{return!1}}(),vi="classic",Gi="sharp",Db=[vi,Gi];function Vm(n){return new Proxy(n,{get:function(t,i){return i in t?t[i]:t[vi]}})}var Hm=Vm((Dr(C5={},vi,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),Dr(C5,Gi,{fa:"solid",fass:"solid","fa-solid":"solid"}),C5)),Um=Vm((Dr(M5={},vi,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Dr(M5,Gi,{solid:"fass"}),M5)),Gm=Vm((Dr(S5={},vi,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Dr(S5,Gi,{fass:"fa-solid"}),S5)),T3e=Vm((Dr(T5={},vi,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Dr(T5,Gi,{"fa-solid":"fass"}),T5)),E3e=/fa(s|r|l|t|d|b|k|ss)?[\-\ ]/,QF="fa-layers-text",D3e=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,A3e=Vm((Dr(E5={},vi,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Dr(E5,Gi,{900:"fass"}),E5)),JF=[1,2,3,4,5,6,7,8,9,10],R3e=JF.concat([11,12,13,14,15,16,17,18,19,20]),I3e=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Wm=new Set;Object.keys(Um[vi]).map(Wm.add.bind(Wm)),Object.keys(Um[Gi]).map(Wm.add.bind(Wm));var k3e=[].concat(Db,Bm(Wm),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","duotone-group","swap-opacity","primary","secondary"]).concat(JF.map(function(n){return"".concat(n,"x")})).concat(R3e.map(function(n){return"w-".concat(n)})),jm=mu.FontAwesomeConfig||{};_i&&"function"==typeof _i.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=xb(n,2),i=e[1],r=function P3e(n){return""===n||"false"!==n&&("true"===n||n)}(function L3e(n){var e=_i.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=r&&(jm[i]=r)});var eN={styleDefault:"solid",familyDefault:"classic",cssPrefix:"fa",replacementClass:XF,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};jm.familyPrefix&&(jm.cssPrefix=jm.familyPrefix);var Af=st(st({},eN),jm);Af.autoReplaceSvg||(Af.observeMutations=!1);var pt={};Object.keys(eN).forEach(function(n){Object.defineProperty(pt,n,{enumerable:!0,set:function(t){Af[n]=t,$m.forEach(function(i){return i(pt)})},get:function(){return Af[n]}})}),Object.defineProperty(pt,"familyPrefix",{enumerable:!0,set:function(e){Af.cssPrefix=e,$m.forEach(function(t){return t(pt)})},get:function(){return Af.cssPrefix}}),mu.FontAwesomeConfig=pt;var $m=[],cl={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function qm(){for(var n=12,e="";n-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function Rf(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function Ab(n){return n.classList?Rf(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function tN(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function D5(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function Rb(n){return n.size!==cl.size||n.x!==cl.x||n.y!==cl.y||n.rotate!==cl.rotate||n.flipX||n.flipY}function nN(){var n="fa",e=XF,t=pt.cssPrefix,i=pt.replacementClass,r=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(t!==n||i!==e){var s=new RegExp("\\.".concat(n,"\\-"),"g"),o=new RegExp("\\--".concat(n,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(i))}return r}var iN=!1;function Ib(){pt.autoAddCss&&!iN&&(function N3e(n){if(n&&rc){var e=_i.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=_i.head.childNodes,i=null,r=t.length-1;r>-1;r--){var s=t[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}_i.head.insertBefore(e,i)}}(nN()),iN=!0)}var G3e={mixout:function(){return{dom:{css:nN,insertCss:Ib}}},hooks:function(){return{beforeDOMElementCreation:function(){Ib()},beforeI2svg:function(){Ib()}}}},oc=mu||{};oc[sc]||(oc[sc]={}),oc[sc].styles||(oc[sc].styles={}),oc[sc].hooks||(oc[sc].hooks={}),oc[sc].shims||(oc[sc].shims=[]);var Ta=oc[sc],rN=[],A5=!1;function j3e(n){!rc||(A5?setTimeout(n,0):rN.push(n))}function Ym(n){var e=n.tag,t=n.attributes,i=void 0===t?{}:t,r=n.children,s=void 0===r?[]:r;return"string"==typeof n?tN(n):"<".concat(e," ").concat(function B3e(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(tN(n[t]),'" ')},"").trim()}(i),">").concat(s.map(Ym).join(""),"</").concat(e,">")}function sN(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}rc&&((A5=(_i.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(_i.readyState))||_i.addEventListener("DOMContentLoaded",function n(){_i.removeEventListener("DOMContentLoaded",n),A5=1,rN.map(function(e){return e()})}));var kb=function(e,t,i,r){var l,c,u,s=Object.keys(e),o=s.length,a=void 0!==r?function(e,t){return function(i,r,s,o){return e.call(t,i,r,s,o)}}(t,r):t;for(void 0===i?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)u=a(u,e[c=s[l]],c,e);return u};function Lb(n){var e=function q3e(n){for(var e=[],t=0,i=n.length;t<i;){var r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<i){var s=n.charCodeAt(t++);56320==(64512&s)?e.push(((1023&r)<<10)+(1023&s)+65536):(e.push(r),t--)}else e.push(r)}return e}(n);return 1===e.length?e[0].toString(16):null}function oN(n){return Object.keys(n).reduce(function(e,t){var i=n[t];return i.icon?e[i.iconName]=i.icon:e[t]=i,e},{})}function Pb(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.skipHooks,r=void 0!==i&&i,s=oN(e);"function"!=typeof Ta.hooks.addPack||r?Ta.styles[n]=st(st({},Ta.styles[n]||{}),s):Ta.hooks.addPack(n,oN(e)),"fas"===n&&Pb("fa",e)}var R5,I5,k5,If=Ta.styles,X3e=Ta.shims,Z3e=(Dr(R5={},vi,Object.values(Gm[vi])),Dr(R5,Gi,Object.values(Gm[Gi])),R5),Ob=null,aN={},lN={},cN={},uN={},dN={},K3e=(Dr(I5={},vi,Object.keys(Hm[vi])),Dr(I5,Gi,Object.keys(Hm[Gi])),I5);function J3e(n,e){var t=e.split("-"),i=t[0],r=t.slice(1).join("-");return i!==n||""===r||function Q3e(n){return~k3e.indexOf(n)}(r)?null:r}var hN=function(){var e=function(s){return kb(If,function(o,a,l){return o[l]=kb(a,s,{}),o},{})};aN=e(function(r,s,o){return s[3]&&(r[s[3]]=o),s[2]&&s[2].filter(function(l){return"number"==typeof l}).forEach(function(l){r[l.toString(16)]=o}),r}),lN=e(function(r,s,o){return r[o]=o,s[2]&&s[2].filter(function(l){return"string"==typeof l}).forEach(function(l){r[l]=o}),r}),dN=e(function(r,s,o){var a=s[2];return r[o]=o,a.forEach(function(l){r[l]=o}),r});var t="far"in If||pt.autoFetchSvg,i=kb(X3e,function(r,s){var o=s[0],a=s[1],l=s[2];return"far"===a&&!t&&(a="fas"),"string"==typeof o&&(r.names[o]={prefix:a,iconName:l}),"number"==typeof o&&(r.unicodes[o.toString(16)]={prefix:a,iconName:l}),r},{names:{},unicodes:{}});cN=i.names,uN=i.unicodes,Ob=L5(pt.styleDefault,{family:pt.familyDefault})};function Fb(n,e){return(aN[n]||{})[e]}function Zd(n,e){return(dN[n]||{})[e]}function fN(n){return cN[n]||{prefix:null,iconName:null}}function _u(){return Ob}function L5(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.family,i=void 0===t?vi:t,r=Hm[i][n],s=Um[i][n]||Um[i][r],o=n in Ta.styles?n:null;return s||o||null}(function F3e(n){$m.push(n)})(function(n){Ob=L5(n.styleDefault,{family:pt.familyDefault})}),hN();var pN=(Dr(k5={},vi,Object.keys(Gm[vi])),Dr(k5,Gi,Object.keys(Gm[Gi])),k5);function P5(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.skipLookups,r=void 0!==i&&i,s=(Dr(e={},vi,"".concat(pt.cssPrefix,"-").concat(vi)),Dr(e,Gi,"".concat(pt.cssPrefix,"-").concat(Gi)),e),o=null,a=vi;(n.includes(s[vi])||n.some(function(c){return pN[vi].includes(c)}))&&(a=vi),(n.includes(s[Gi])||n.some(function(c){return pN[Gi].includes(c)}))&&(a=Gi);var l=n.reduce(function(c,u){var d=J3e(pt.cssPrefix,u);if(If[u]?(u=Z3e[a].includes(u)?T3e[a][u]:u,o=u,c.prefix=u):K3e[a].indexOf(u)>-1?(o=u,c.prefix=L5(u,{family:a})):d?c.iconName=d:u!==pt.replacementClass&&u!==s[vi]&&u!==s[Gi]&&c.rest.push(u),!r&&c.prefix&&c.iconName){var h="fa"===o?fN(c.iconName):{},f=Zd(c.prefix,c.iconName);h.prefix&&(o=null),c.iconName=h.iconName||f||c.iconName,c.prefix=h.prefix||c.prefix,"far"===c.prefix&&!If.far&&If.fas&&!pt.autoFetchSvg&&(c.prefix="fas")}return c},{prefix:null,iconName:null,rest:[]});return(n.includes("fa-brands")||n.includes("fab"))&&(l.prefix="fab"),(n.includes("fa-duotone")||n.includes("fad"))&&(l.prefix="fad"),!l.prefix&&a===Gi&&(If.fass||pt.autoFetchSvg)&&(l.prefix="fass",l.iconName=Zd(l.prefix,l.iconName)||l.iconName),("fa"===l.prefix||"fa"===o)&&(l.prefix=_u()||"fas"),l}var n4e=function(){function n(){(function f3e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function p3e(n,e,t){e&&zF(n.prototype,e),t&&zF(n,t),Object.defineProperty(n,"prototype",{writable:!1})}(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var o=r.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=st(st({},t.definitions[a]||{}),o[a]),Pb(a,o[a]);var l=Gm[vi][a];l&&Pb(l,o[a]),hN()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var o=r[s],a=o.prefix,l=o.iconName,c=o.icon,u=c[2];t[a]||(t[a]={}),u.length>0&&u.forEach(function(d){"string"==typeof d&&(t[a][d]=c)}),t[a][l]=c}),t}}]),n}(),mN=[],kf={},Lf={},i4e=Object.keys(Lf);function zb(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];var s=kf[n]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(i))}),e}function Kd(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=kf[n]||[];r.forEach(function(s){s.apply(null,t)})}function ac(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return Lf[n]?Lf[n].apply(null,e):void 0}function Bb(n){"fa"===n.prefix&&(n.prefix="fas");var e=n.iconName,t=n.prefix||_u();if(e)return e=Zd(t,e)||e,sN(gN.definitions,t,e)||sN(Ta.styles,t,e)}var gN=new n4e,o4e={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return rc?(Kd("beforeI2svg",e),ac("pseudoElements2svg",e),ac("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===pt.autoReplaceSvg&&(pt.autoReplaceSvg=!0),pt.observeMutations=!0,j3e(function(){l4e({autoReplaceSvgRoot:t}),Kd("watch",e)})}},a4e={icon:function(e){if(null===e)return null;if("object"===b5(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Zd(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],i=L5(e[0]);return{prefix:i,iconName:Zd(i,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(pt.cssPrefix,"-"))>-1||e.match(E3e))){var r=P5(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||_u(),iconName:Zd(r.prefix,r.iconName)||r.iconName}}if("string"==typeof e){var s=_u();return{prefix:s,iconName:Zd(s,e)||e}}}},_o={noAuto:function(){pt.autoReplaceSvg=!1,pt.observeMutations=!1,Kd("noAuto")},config:pt,dom:o4e,parse:a4e,library:gN,findIconDefinition:Bb,toHtml:Ym},l4e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,i=void 0===t?_i:t;(Object.keys(Ta.styles).length>0||pt.autoFetchSvg)&&rc&&pt.autoReplaceSvg&&_o.dom.i2svg({node:i})};function O5(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return Ym(i)})}}),Object.defineProperty(n,"node",{get:function(){if(rc){var i=_i.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function Vb(n){var e=n.icons,t=e.main,i=e.mask,r=n.prefix,s=n.iconName,o=n.transform,a=n.symbol,l=n.title,c=n.maskId,u=n.titleId,d=n.extra,h=n.watchable,f=void 0!==h&&h,p=i.found?i:t,m=p.width,g=p.height,_="fak"===r,v=[pt.replacementClass,s?"".concat(pt.cssPrefix,"-").concat(s):""].filter(function(E){return-1===d.classes.indexOf(E)}).filter(function(E){return""!==E||!!E}).concat(d.classes).join(" "),y={children:[],attributes:st(st({},d.attributes),{},{"data-prefix":r,"data-icon":s,class:v,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},b=_&&!~d.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};f&&(y.attributes[Yd]=""),l&&(y.children.push({tag:"title",attributes:{id:y.attributes["aria-labelledby"]||"title-".concat(u||qm())},children:[l]}),delete y.attributes.title);var x=st(st({},y),{},{prefix:r,iconName:s,main:t,mask:i,maskId:c,transform:o,symbol:a,styles:st(st({},b),d.styles)}),M=i.found&&t.found?ac("generateAbstractMask",x)||{children:[],attributes:{}}:ac("generateAbstractIcon",x)||{children:[],attributes:{}},w=M.attributes;return x.children=M.children,x.attributes=w,a?function u4e(n){var t=n.iconName,i=n.children,r=n.attributes,s=n.symbol,o=!0===s?"".concat(n.prefix,"-").concat(pt.cssPrefix,"-").concat(t):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:st(st({},r),{},{id:o}),children:i}]}]}(x):function c4e(n){var e=n.children,t=n.main,i=n.mask,r=n.attributes,s=n.styles,o=n.transform;if(Rb(o)&&t.found&&!i.found){var c={x:t.width/t.height/2,y:.5};r.style=D5(st(st({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}(x)}function _N(n){var e=n.content,t=n.width,i=n.height,r=n.transform,s=n.title,o=n.extra,a=n.watchable,l=void 0!==a&&a,c=st(st(st({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(c[Yd]="");var u=st({},o.styles);Rb(r)&&(u.transform=function H3e(n){var e=n.transform,t=n.width,r=n.height,s=void 0===r?16:r,o=n.startCentered,a=void 0!==o&&o,l="";return l+=a&&qF?"translate(".concat(e.x/16-(void 0===t?16:t)/2,"em, ").concat(e.y/16-s/2,"em) "):a?"translate(calc(-50% + ".concat(e.x/16,"em), calc(-50% + ").concat(e.y/16,"em)) "):"translate(".concat(e.x/16,"em, ").concat(e.y/16,"em) "),(l+="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "))+"rotate(".concat(e.rotate,"deg) ")}({transform:r,startCentered:!0,width:t,height:i}),u["-webkit-transform"]=u.transform);var d=D5(u);d.length>0&&(c.style=d);var h=[];return h.push({tag:"span",attributes:c,children:[e]}),s&&h.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),h}function d4e(n){var e=n.content,t=n.title,i=n.extra,r=st(st(st({},i.attributes),t?{title:t}:{}),{},{class:i.classes.join(" ")}),s=D5(i.styles);s.length>0&&(r.style=s);var o=[];return o.push({tag:"span",attributes:r,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}var Hb=Ta.styles;function Ub(n){var e=n[0],t=n[1],s=xb(n.slice(4),1)[0];return{found:!0,width:e,height:t,icon:Array.isArray(s)?{tag:"g",attributes:{class:"".concat(pt.cssPrefix,"-").concat("duotone-group")},children:[{tag:"path",attributes:{class:"".concat(pt.cssPrefix,"-").concat("secondary"),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(pt.cssPrefix,"-").concat("primary"),fill:"currentColor",d:s[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:s}}}}var h4e={found:!1,width:512,height:512};function Gb(n,e){var t=e;return"fa"===e&&null!==pt.styleDefault&&(e=_u()),new Promise(function(i,r){if(ac("missingIconAbstract"),"fa"===t){var o=fN(n)||{};n=o.iconName||n,e=o.prefix||e}if(n&&e&&Hb[e]&&Hb[e][n])return i(Ub(Hb[e][n]));(function f4e(n,e){!KF&&!pt.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))})(n,e),i(st(st({},h4e),{},{icon:pt.showMissingIcons&&n&&ac("missingIconAbstract")||{}}))})}var vN=function(){},Wb=pt.measurePerformance&&w5&&w5.mark&&w5.measure?w5:{mark:vN,measure:vN},Xm='FA "6.2.0"',jb_begin=function(e){return Wb.mark("".concat(Xm," ").concat(e," begins")),function(){return function(e){Wb.mark("".concat(Xm," ").concat(e," ends")),Wb.measure("".concat(Xm," ").concat(e),"".concat(Xm," ").concat(e," begins"),"".concat(Xm," ").concat(e," ends"))}(e)}},F5=function(){};function bN(n){return"string"==typeof(n.getAttribute?n.getAttribute(Yd):null)}function v4e(n){return _i.createElementNS("http://www.w3.org/2000/svg",n)}function y4e(n){return _i.createElement(n)}function xN(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.ceFn,i=void 0===t?"svg"===n.tag?v4e:y4e:t;if("string"==typeof n)return _i.createTextNode(n);var r=i(n.tag);Object.keys(n.attributes||[]).forEach(function(o){r.setAttribute(o,n.attributes[o])});var s=n.children||[];return s.forEach(function(o){r.appendChild(xN(o,{ceFn:i}))}),r}var N5={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(r){t.parentNode.insertBefore(xN(r),t)}),null===t.getAttribute(Yd)&&pt.keepOriginalSource){var i=_i.createComment(function b4e(n){var e=" ".concat(n.outerHTML," ");return"".concat(e,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~Ab(t).indexOf(pt.replacementClass))return N5.replace(e);var r=new RegExp("".concat(pt.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var s=i[0].attributes.class.split(" ").reduce(function(a,l){return l===pt.replacementClass||l.match(r)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});i[0].attributes.class=s.toSvg.join(" "),0===s.toNode.length?t.removeAttribute("class"):t.setAttribute("class",s.toNode.join(" "))}var o=i.map(function(a){return Ym(a)}).join("\n");t.setAttribute(Yd,""),t.innerHTML=o}};function wN(n){n()}function CN(n,e){var t="function"==typeof e?e:F5;if(0===n.length)t();else{var i=wN;"async"===pt.mutateApproach&&(i=mu.requestAnimationFrame||wN),i(function(){var r=function _4e(){return!0===pt.autoReplaceSvg?N5.replace:N5[pt.autoReplaceSvg]||N5.replace}(),s=jb_begin("mutate");n.map(r),s(),t()})}}var $b=!1;function MN(){$b=!0}function qb(){$b=!1}var z5=null;function SN(n){if($F&&pt.observeMutations){var e=n.treeCallback,t=void 0===e?F5:e,i=n.nodeCallback,r=void 0===i?F5:i,s=n.pseudoElementsCallback,o=void 0===s?F5:s,a=n.observeMutationsRoot,l=void 0===a?_i:a;z5=new $F(function(c){if(!$b){var u=_u();Rf(c).forEach(function(d){if("childList"===d.type&&d.addedNodes.length>0&&!bN(d.addedNodes[0])&&(pt.searchPseudoElements&&o(d.target),t(d.target)),"attributes"===d.type&&d.target.parentNode&&pt.searchPseudoElements&&o(d.target.parentNode),"attributes"===d.type&&bN(d.target)&&~I3e.indexOf(d.attributeName))if("class"===d.attributeName&&function m4e(n){var e=n.getAttribute?n.getAttribute(Tb):null,t=n.getAttribute?n.getAttribute(Eb):null;return e&&t}(d.target)){var h=P5(Ab(d.target)),p=h.iconName;d.target.setAttribute(Tb,h.prefix||u),p&&d.target.setAttribute(Eb,p)}else(function g4e(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(pt.replacementClass)})(d.target)&&r(d.target)})}}),rc&&z5.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function w4e(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,r){var s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),t}function C4e(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=void 0!==n.innerText?n.innerText.trim():"",r=P5(Ab(n));return r.prefix||(r.prefix=_u()),e&&t&&(r.prefix=e,r.iconName=t),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=function e4e(n,e){return(lN[n]||{})[e]}(r.prefix,n.innerText)||Fb(r.prefix,Lb(n.innerText))),!r.iconName&&pt.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=n.firstChild.data)),r}function M4e(n){var e=Rf(n.attributes).reduce(function(r,s){return"class"!==r.name&&"style"!==r.name&&(r[s.name]=s.value),r},{}),t=n.getAttribute("title"),i=n.getAttribute("data-fa-title-id");return pt.autoA11y&&(t?e["aria-labelledby"]="".concat(pt.replacementClass,"-title-").concat(i||qm()):(e["aria-hidden"]="true",e.focusable="false")),e}function TN(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},t=C4e(n),i=t.iconName,r=t.prefix,s=t.rest,o=M4e(n),a=zb("parseNodeAttributes",{},n),l=e.styleParser?w4e(n):[];return st({iconName:i,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:cl,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var T4e=Ta.styles;function EN(n){var e="nest"===pt.autoReplaceSvg?TN(n,{styleParser:!1}):TN(n);return~e.extra.classes.indexOf(QF)?ac("generateLayersText",n,e):ac("generateSvgReplacementMutation",n,e)}var vu=new Set;function DN(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!rc)return Promise.resolve();var t=_i.documentElement.classList,i=function(d){return t.add("".concat(ZF,"-").concat(d))},r=function(d){return t.remove("".concat(ZF,"-").concat(d))},s=pt.autoFetchSvg?vu:Db.map(function(u){return"fa-".concat(u)}).concat(Object.keys(T4e));s.includes("fa")||s.push("fa");var o=[".".concat(QF,":not([").concat(Yd,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(Yd,"])")})).join(", ");if(0===o.length)return Promise.resolve();var a=[];try{a=Rf(n.querySelectorAll(o))}catch{}if(!(a.length>0))return Promise.resolve();i("pending"),r("complete");var l=jb_begin("onTree"),c=a.reduce(function(u,d){try{var h=EN(d);h&&u.push(h)}catch(f){KF||"MissingIcon"===f.name&&console.error(f)}return u},[]);return new Promise(function(u,d){Promise.all(c).then(function(h){CN(h,function(){i("active"),i("complete"),r("pending"),"function"==typeof e&&e(),l(),u()})}).catch(function(h){l(),d(h)})})}function E4e(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;EN(n).then(function(t){t&&CN([t],e)})}Db.map(function(n){vu.add("fa-".concat(n))}),Object.keys(Hm[vi]).map(vu.add.bind(vu)),Object.keys(Hm[Gi]).map(vu.add.bind(vu)),vu=Bm(vu);var A4e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.transform,r=void 0===i?cl:i,s=t.symbol,o=void 0!==s&&s,a=t.mask,l=void 0===a?null:a,c=t.maskId,u=void 0===c?null:c,d=t.title,h=void 0===d?null:d,f=t.titleId,p=void 0===f?null:f,m=t.classes,g=void 0===m?[]:m,_=t.attributes,v=void 0===_?{}:_,y=t.styles,b=void 0===y?{}:y;if(e){var x=e.prefix,M=e.iconName,R=e.icon;return O5(st({type:"icon"},e),function(){return Kd("beforeDOMElementCreation",{iconDefinition:e,params:t}),pt.autoA11y&&(h?v["aria-labelledby"]="".concat(pt.replacementClass,"-title-").concat(p||qm()):(v["aria-hidden"]="true",v.focusable="false")),Vb({icons:{main:Ub(R),mask:l?Ub(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:x,iconName:M,transform:st(st({},cl),r),symbol:o,title:h,maskId:u,titleId:p,extra:{attributes:v,styles:b,classes:g}})})}},R4e={mixout:function(){return{icon:(n=A4e,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(e||{}).icon?e:Bb(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:Bb(r||{})),n(i,st(st({},t),{},{mask:r}))})};var n},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=DN,t.nodeCallback=E4e,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,s=t.callback;return DN(void 0===i?_i:i,void 0===s?function(){}:s)},e.generateSvgReplacementMutation=function(t,i){var r=i.iconName,s=i.title,o=i.titleId,a=i.prefix,l=i.transform,c=i.symbol,u=i.mask,d=i.maskId,h=i.extra;return new Promise(function(f,p){Promise.all([Gb(r,a),u.iconName?Gb(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=xb(m,2);f([t,Vb({icons:{main:g[0],mask:g[1]},prefix:a,iconName:r,transform:l,symbol:c,maskId:d,title:s,titleId:o,extra:h,watchable:!0})])}).catch(p)})},e.generateAbstractIcon=function(t){var c,i=t.children,r=t.attributes,s=t.main,o=t.transform,l=D5(t.styles);return l.length>0&&(r.style=l),Rb(o)&&(c=ac("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),i.push(c||s.icon),{children:i,attributes:r}}}},I4e={mixout:function(){return{layer:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.classes,s=void 0===r?[]:r;return O5({type:"layer"},function(){Kd("beforeDOMElementCreation",{assembler:t,params:i});var o=[];return t(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(pt.cssPrefix,"-layers")].concat(Bm(s)).join(" ")},children:o}]})}}}},k4e={mixout:function(){return{counter:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.title,s=void 0===r?null:r,o=i.classes,a=void 0===o?[]:o,l=i.attributes,c=void 0===l?{}:l,u=i.styles,d=void 0===u?{}:u;return O5({type:"counter",content:t},function(){return Kd("beforeDOMElementCreation",{content:t,params:i}),d4e({content:t.toString(),title:s,extra:{attributes:c,styles:d,classes:["".concat(pt.cssPrefix,"-layers-counter")].concat(Bm(a))}})})}}}},L4e={mixout:function(){return{text:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.transform,s=void 0===r?cl:r,o=i.title,a=void 0===o?null:o,l=i.classes,c=void 0===l?[]:l,u=i.attributes,d=void 0===u?{}:u,h=i.styles,f=void 0===h?{}:h;return O5({type:"text",content:t},function(){return Kd("beforeDOMElementCreation",{content:t,params:i}),_N({content:t,transform:st(st({},cl),s),title:a,extra:{attributes:d,styles:f,classes:["".concat(pt.cssPrefix,"-layers-text")].concat(Bm(c))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var r=i.title,s=i.transform,o=i.extra,a=null,l=null;if(qF){var c=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();a=u.width/c,l=u.height/c}return pt.autoA11y&&!r&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,_N({content:t.innerHTML,width:a,height:l,transform:s,title:r,extra:o,watchable:!0})])}}},P4e=new RegExp('"',"ug"),AN=[1105920,1112319];function RN(n,e){var t="".concat("data-fa-pseudo-element-pending").concat(e.replace(":","-"));return new Promise(function(i,r){if(null!==n.getAttribute(t))return i();var o=Rf(n.children).filter(function(R){return R.getAttribute(Sb)===e})[0],a=mu.getComputedStyle(n,e),l=a.getPropertyValue("font-family").match(D3e),c=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!l)return n.removeChild(o),i();if(l&&"none"!==u&&""!==u){var d=a.getPropertyValue("content"),h=~["Sharp"].indexOf(l[2])?Gi:vi,f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?Um[h][l[2].toLowerCase()]:A3e[h][c],p=function O4e(n){var e=n.replace(P4e,""),t=function Y3e(n,e){var r,t=n.length,i=n.charCodeAt(e);return i>=55296&&i<=56319&&t>e+1&&(r=n.charCodeAt(e+1))>=56320&&r<=57343?1024*(i-55296)+r-56320+65536:i}(e,0),i=t>=AN[0]&&t<=AN[1],r=2===e.length&&e[0]===e[1];return{value:Lb(r?e[0]:e),isSecondary:i||r}}(d),m=p.value,g=p.isSecondary,_=l[0].startsWith("FontAwesome"),v=Fb(f,m),y=v;if(_){var b=function t4e(n){var e=uN[n],t=Fb("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}(m);b.iconName&&b.prefix&&(v=b.iconName,f=b.prefix)}if(!v||g||o&&o.getAttribute(Tb)===f&&o.getAttribute(Eb)===y)i();else{n.setAttribute(t,y),o&&n.removeChild(o);var x=function S4e(){return{iconName:null,title:null,titleId:null,prefix:null,transform:cl,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),M=x.extra;M.attributes[Sb]=e,Gb(v,f).then(function(R){var w=Vb(st(st({},x),{},{icons:{main:R,mask:{prefix:null,iconName:null,rest:[]}},prefix:f,iconName:y,extra:M,watchable:!0})),E=_i.createElement("svg");"::before"===e?n.insertBefore(E,n.firstChild):n.appendChild(E),E.outerHTML=w.map(function(P){return Ym(P)}).join("\n"),n.removeAttribute(t),i()}).catch(r)}}else i()})}function F4e(n){return Promise.all([RN(n,"::before"),RN(n,"::after")])}function N4e(n){return!(n.parentNode===document.head||~S3e.indexOf(n.tagName.toUpperCase())||n.getAttribute(Sb)||n.parentNode&&"svg"===n.parentNode.tagName)}function IN(n){if(rc)return new Promise(function(e,t){var i=Rf(n.querySelectorAll("*")).filter(N4e).map(F4e),r=jb_begin("searchPseudoElements");MN(),Promise.all(i).then(function(){r(),qb(),e()}).catch(function(){r(),qb(),t()})})}var z4e={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=IN,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node;pt.searchPseudoElements&&IN(void 0===i?_i:i)}}},kN=!1,B4e={mixout:function(){return{dom:{unwatch:function(){MN(),kN=!0}}}},hooks:function(){return{bootstrap:function(){SN(zb("mutationObserverCallbacks",{}))},noAuto:function(){!function x4e(){!z5||z5.disconnect()}()},watch:function(t){var i=t.observeMutationsRoot;kN?qb():SN(zb("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},LN=function(e){return e.toLowerCase().split(" ").reduce(function(i,r){var s=r.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&"h"===a)return i.flipX=!0,i;if(o&&"v"===a)return i.flipY=!0,i;if(a=parseFloat(a),isNaN(a))return i;switch(o){case"grow":i.size=i.size+a;break;case"shrink":i.size=i.size-a;break;case"left":i.x=i.x-a;break;case"right":i.x=i.x+a;break;case"up":i.y=i.y-a;break;case"down":i.y=i.y+a;break;case"rotate":i.rotate=i.rotate+a}return i},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},V4e={mixout:function(){return{parse:{transform:function(t){return LN(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-transform");return r&&(t.transform=LN(r)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,r=t.transform,o=t.iconWidth,a={transform:"translate(".concat(t.containerWidth/2," 256)")},l="translate(".concat(32*r.x,", ").concat(32*r.y,") "),c="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),u="rotate(".concat(r.rotate," 0 0)"),f={outer:a,inner:{transform:"".concat(l," ").concat(c," ").concat(u)},path:{transform:"translate(".concat(o/2*-1," -256)")}};return{tag:"g",attributes:st({},f.outer),children:[{tag:"g",attributes:st({},f.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:st(st({},i.icon.attributes),f.path)}]}]}}}},Yb={x:0,y:0,width:"100%",height:"100%"};function PN(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}var U4e={hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-mask"),s=r?P5(r.split(" ").map(function(o){return o.trim()})):{prefix:null,iconName:null,rest:[]};return s.prefix||(s.prefix=_u()),t.mask=s,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var n,i=t.children,r=t.attributes,s=t.main,o=t.mask,a=t.maskId,u=s.icon,h=o.icon,f=function V3e(n){var e=n.transform,i=n.iconWidth,r={transform:"translate(".concat(n.containerWidth/2," 256)")},s="translate(".concat(32*e.x,", ").concat(32*e.y,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(s," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:t.transform,containerWidth:o.width,iconWidth:s.width}),p={tag:"rect",attributes:st(st({},Yb),{},{fill:"white"})},m=u.children?{children:u.children.map(PN)}:{},g={tag:"g",attributes:st({},f.inner),children:[PN(st({tag:u.tag,attributes:st(st({},u.attributes),f.path)},m))]},_={tag:"g",attributes:st({},f.outer),children:[g]},v="mask-".concat(a||qm()),y="clip-".concat(a||qm()),b={tag:"mask",attributes:st(st({},Yb),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,_]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(n=h,"g"===n.tag?n.children:[n])},b]};return i.push(x,{tag:"rect",attributes:st({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(v,")")},Yb)}),{children:i,attributes:r}}}},G4e={provides:function(e){var t=!1;mu.matchMedia&&(t=mu.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:st(st({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=st(st({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:st(st({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:st(st({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:st(st({},o),{},{values:"1;0;1;1;0;1;"})}),i.push(a),i.push({tag:"path",attributes:st(st({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:st(st({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:st(st({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:st(st({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},j4e=[G3e,R4e,I4e,k4e,L4e,z4e,B4e,V4e,U4e,G4e,{hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-symbol");return t.symbol=null!==r&&(""===r||r),t}}}}];!function r4e(n,e){var t=e.mixoutsTo;mN=n,kf={},Object.keys(Lf).forEach(function(i){-1===i4e.indexOf(i)&&delete Lf[i]}),mN.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(o){"function"==typeof r[o]&&(t[o]=r[o]),"object"===b5(r[o])&&Object.keys(r[o]).forEach(function(a){t[o]||(t[o]={}),t[o][a]=r[o][a]})}),i.hooks){var s=i.hooks();Object.keys(s).forEach(function(o){kf[o]||(kf[o]=[]),kf[o].push(s[o])})}i.provides&&i.provides(Lf)})}(j4e,{mixoutsTo:_o});var $4e=_o.parse,q4e=_o.icon;const Y4e=["*"],K4e=n=>{const e={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-inverse":n.inverse,"fa-layers-counter":n.counter,"fa-flip-horizontal":"horizontal"===n.flip||"both"===n.flip,"fa-flip-vertical":"vertical"===n.flip||"both"===n.flip,[`fa-${n.size}`]:null!==n.size,[`fa-rotate-${n.rotate}`]:null!==n.rotate,[`fa-pull-${n.pull}`]:null!==n.pull,[`fa-stack-${n.stackItemSize}`]:null!=n.stackItemSize};return Object.keys(e).map(t=>e[t]?t:null).filter(t=>t)};let e5e=(()=>{class n{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),t5e=(()=>{class n{constructor(){this.definitions={}}addIcons(...t){for(const i of t){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(const r of i.icon[2])"string"==typeof r&&(this.definitions[i.prefix][r]=i)}}addIconPacks(...t){for(const i of t){const r=Object.keys(i).map(s=>i[s]);this.addIcons(...r)}}getIconDefinition(t,i){return t in this.definitions&&i in this.definitions[t]?this.definitions[t][i]:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),n5e=(()=>{class n{constructor(){this.stackItemSize="1x"}ngOnChanges(t){if("size"in t)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=le({type:n,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[Di]}),n})(),i5e=(()=>{class n{constructor(t,i){this.renderer=t,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(t){"size"in t&&(null!=t.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${t.size.currentValue}`),null!=t.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${t.size.previousValue}`))}}return n.\u0275fac=function(t){return new(t||n)(S(ho),S(Be))},n.\u0275cmp=dt({type:n,selectors:[["fa-stack"]],inputs:{size:"size"},features:[Di],ngContentSelectors:Y4e,decls:1,vars:0,template:function(t,i){1&t&&(Vi(),Dn(0))},encapsulation:2}),n})(),Xb=(()=>{class n{constructor(t,i,r,s,o){this.sanitizer=t,this.config=i,this.iconLibrary=r,this.stackItem=s,this.classes=[],null!=o&&null==s&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(t){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let i=null;if(i=this.icon??this.config.fallbackIcon,t){const r=this.findIconDefinition(i);if(null!=r){const s=this.buildParams();this.renderIcon(r,s)}}}render(){this.ngOnChanges({})}findIconDefinition(t){const i=((n,e)=>(n=>void 0!==n.prefix&&void 0!==n.iconName)(n)?n:Array.isArray(n)&&2===n.length?{prefix:n[0],iconName:n[1]}:"string"==typeof n?{prefix:e,iconName:n}:void 0)(t,this.config.defaultPrefix);return"icon"in i?i:this.iconLibrary.getIconDefinition(i.prefix,i.iconName)??((n=>{throw new Error(`Could not find icon with iconName=${n.iconName} and prefix=${n.prefix} in the icon library.`)})(i),null)}buildParams(){const t={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},i="string"==typeof this.transform?$4e.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...K4e(t),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(t,i){const r=q4e(t,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(r.html.join("\n"))}}return n.\u0275fac=function(t){return new(t||n)(S(hf),S(e5e),S(t5e),S(n5e,8),S(i5e,8))},n.\u0275cmp=dt({type:n,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(t,i){2&t&&(Dd("innerHTML",i.renderedIconHTML,xd),gn("title",i.title))},inputs:{icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[Di],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),r5e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({}),n})();function ON(...n){const e=QT(n),{args:t,keys:i}=dP(n),r=new bn(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;xs(t[u]).subscribe(oi(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?hP(i,a):a),s.complete())}))}});return e?r.pipe(m9(e)):r}class FN{}class NN{}class lc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof lc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new lc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof lc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class o5e{encodeKey(e){return zN(e)}encodeValue(e){return zN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const l5e=/%(\d[a-f0-9])/gi,c5e={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function zN(n){return encodeURIComponent(n).replace(l5e,(e,t)=>c5e[t]??e)}function B5(n){return`${n}`}class yu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new o5e,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function a5e(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(B5):[B5(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new yu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(B5(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(B5(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class u5e{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function BN(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function VN(n){return typeof Blob<"u"&&n instanceof Blob}function HN(n){return typeof FormData<"u"&&n instanceof FormData}class Zm{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function d5e(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new lc),this.context||(this.context=new u5e),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new yu,this.urlWithParams=t}serializeBody(){return null===this.body?null:BN(this.body)||VN(this.body)||HN(this.body)||function h5e(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof yu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||HN(this.body)?null:VN(this.body)?this.body.type||null:BN(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof yu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new Zm(t,i,s,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var gr=(()=>((gr=gr||{})[gr.Sent=0]="Sent",gr[gr.UploadProgress=1]="UploadProgress",gr[gr.ResponseHeader=2]="ResponseHeader",gr[gr.DownloadProgress=3]="DownloadProgress",gr[gr.Response=4]="Response",gr[gr.User=5]="User",gr))();class Zb{constructor(e,t=200,i="OK"){this.headers=e.headers||new lc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Kb extends Zb{constructor(e={}){super(e),this.type=gr.ResponseHeader}clone(e={}){return new Kb({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class V5 extends Zb{constructor(e={}){super(e),this.type=gr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new V5({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class UN extends Zb{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Qb(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Qd=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Zm)s=t;else{let l,c;l=r.headers instanceof lc?r.headers:new lc(r.headers),r.params&&(c=r.params instanceof yu?r.params:new yu({fromObject:r.params})),s=new Zm(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=lt(s).pipe(du(l=>this.handler.handle(l)));if(t instanceof Zm||"events"===r.observe)return o;const a=o.pipe($n(l=>l instanceof V5));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(It(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(It(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(It(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(It(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new yu).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,Qb(r,i))}post(t,i,r={}){return this.request("POST",t,Qb(r,i))}put(t,i,r={}){return this.request("PUT",t,Qb(r,i))}}return n.\u0275fac=function(t){return new(t||n)(K(FN))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})();class GN{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const WN=new pe("HTTP_INTERCEPTORS");let f5e=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})();const p5e=/^\)\]\}',?\n/;let jN=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new bn(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((f,p)=>r.setRequestHeader(f,p.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&r.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();r.responseType="json"!==f?f:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const f=r.statusText||"OK",p=new lc(r.getAllResponseHeaders()),m=function m5e(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new Kb({headers:p,status:r.status,statusText:f,url:m}),o},l=()=>{let{headers:f,status:p,statusText:m,url:g}=a(),_=null;204!==p&&(_=typeof r.response>"u"?r.responseText:r.response),0===p&&(p=_?200:0);let v=p>=200&&p<300;if("json"===t.responseType&&"string"==typeof _){const y=_;_=_.replace(p5e,"");try{_=""!==_?JSON.parse(_):null}catch(b){_=y,v&&(v=!1,_={error:b,text:_})}}v?(i.next(new V5({body:_,headers:f,status:p,statusText:m,url:g||void 0})),i.complete()):i.error(new UN({error:_,headers:f,status:p,statusText:m,url:g||void 0}))},c=f=>{const{url:p}=a(),m=new UN({error:f,status:r.status||0,statusText:r.statusText||"Unknown Error",url:p||void 0});i.error(m)};let u=!1;const d=f=>{u||(i.next(a()),u=!0);let p={type:gr.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===t.responseType&&!!r.responseText&&(p.partialText=r.responseText),i.next(p)},h=f=>{let p={type:gr.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),i.next(p)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),t.reportProgress&&(r.addEventListener("progress",d),null!==s&&r.upload&&r.upload.addEventListener("progress",h)),r.send(s),i.next({type:gr.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),t.reportProgress&&(r.removeEventListener("progress",d),null!==s&&r.upload&&r.upload.removeEventListener("progress",h)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(K(cL))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})();const Jb=new pe("XSRF_COOKIE_NAME"),ex=new pe("XSRF_HEADER_NAME");class $N{}let g5e=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Qk(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(K(Mt),K(po),K(Jb))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})(),tx=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(K($N),K(ex))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})(),_5e=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(WN,[]);this.chain=i.reduceRight((r,s)=>new GN(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(K(NN),K(ur))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})(),v5e=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:tx,useClass:f5e}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Jb,useValue:t.cookieName}:[],t.headerName?{provide:ex,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({providers:[tx,{provide:WN,useExisting:tx,multi:!0},{provide:$N,useClass:g5e},{provide:Jb,useValue:"XSRF-TOKEN"},{provide:ex,useValue:"X-XSRF-TOKEN"}]}),n})(),y5e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({providers:[Qd,{provide:FN,useClass:_5e},jN,{provide:NN,useExisting:jN}],imports:[v5e.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const b5e=["*"];let H5;function Km(n){return function x5e(){if(void 0===H5&&(H5=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(H5=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return H5}()?.createHTML(n)||n}function qN(n){return Error(`Unable to find icon with the name "${n}"`)}function YN(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function XN(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Jd{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let Qm=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new Jd(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(En.HTML,r);if(!o)throw XN(r);const a=Km(o);return this._addSvgIconConfig(t,i,new Jd("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Jd(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(En.HTML,i);if(!s)throw XN(i);const o=Km(s);return this._addSvgIconSetConfig(t,new Jd("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(En.RESOURCE_URL,t);if(!i)throw YN(t);const r=this._cachedIconsByUrl.get(i);return r?lt(U5(r)):this._loadSvgIconFromConfig(new Jd(t,null)).pipe(mi(s=>this._cachedIconsByUrl.set(i,s)),It(s=>U5(s)))}getNamedSvgIcon(t,i=""){const r=ZN(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):ff(qN(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?lt(U5(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(It(i=>U5(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?lt(r):ON(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(al(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(En.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),lt(null)})))).pipe(It(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw qN(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(mi(i=>t.svgText=i),It(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?lt(null):this._fetchIcon(t).pipe(mi(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(Km("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(Km("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function w5e(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(En.RESOURCE_URL,i);if(!o)throw YN(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(It(c=>Km(c)),k4(()=>this._inProgressUrlFetches.delete(o)),nE());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(ZN(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return M5e(s)?new Jd(s.url,null,s.options):new Jd(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(K(Qd,8),K(hf),K(Mt,8),K(Bl))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function U5(n){return n.cloneNode(!0)}function ZN(n,e){return n+":"+e}function M5e(n){return!(!n.url||!n.options)}const S5e=jd(class{constructor(n){this._elementRef=n}}),T5e=new pe("MAT_ICON_DEFAULT_OPTIONS"),E5e=new pe("mat-icon-location",{providedIn:"root",factory:function D5e(){const n=Vn(Mt),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),KN=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],A5e=KN.map(n=>`[${n}]`).join(", "),R5e=/^url\(['"]?#(.*?)['"]?\)$/;let G5=(()=>{class n extends S5e{constructor(t,i,r,s,o,a){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ri.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Vt(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(A5e),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)KN.forEach(o=>{const a=i[s],l=a.getAttribute(o),c=l?l.match(R5e):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Yr(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(Qm),Bo("aria-hidden"),S(E5e),S(Bl),S(T5e,8))},n.\u0275cmp=dt({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(gn("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),Nt("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[he],ngContentSelectors:b5e,decls:1,vars:0,template:function(t,i){1&t&&(Vi(),Dn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),QN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[yt,yt]}),n})();function nx(n){return n&&"function"==typeof n.connect&&!(n instanceof v9)}class JN{applyChanges(e,t,i,r,s){e.forEachOperation((o,a,l)=>{let c,u;if(null==o.previousIndex){const d=i(o,a,l);c=t.createEmbeddedView(d.templateRef,d.context,d.index),u=1}else null==l?(t.remove(a),u=3):(c=t.get(a),t.move(c,l),u=2);s&&s({context:c?.context,operation:u,record:o})})}detach(){}}class ix{constructor(e=!1,t,i=!0,r){this._multiple=e,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new xt,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(i=>this._markSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(i=>this._unmarkSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,i=new Set(e);e.forEach(s=>this._markSelected(s)),t.filter(s=>!i.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,e))return!0;return!1}return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}const Jm=new pe("_ViewRepeater");let tz=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(S(ho),S(Be))},n.\u0275dir=le({type:n}),n})(),eh=(()=>{class n extends tz{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275dir=le({type:n,features:[he]}),n})();const as=new pe("NgValueAccessor"),L5e={provide:as,useExisting:dn(()=>rx),multi:!0},O5e=new pe("CompositionEventMode");let rx=(()=>{class n extends tz{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function P5e(){const n=sl()?sl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(S(ho),S(Be),S(O5e,8))},n.\u0275dir=le({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&$e("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[wt([L5e]),he]}),n})();const Vr=new pe("NgValidators"),xu=new pe("NgAsyncValidators");function hz(n){return null!=n}function fz(n){return jp(n)?er(n):n}function pz(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function mz(n,e){return e.map(t=>t(n))}function gz(n){return n.map(e=>function z5e(n){return!n.validate}(e)?e:t=>e.validate(t))}function sx(n){return null!=n?function _z(n){if(!n)return null;const e=n.filter(hz);return 0==e.length?null:function(t){return pz(mz(t,e))}}(gz(n)):null}function ox(n){return null!=n?function vz(n){if(!n)return null;const e=n.filter(hz);return 0==e.length?null:function(t){return ON(mz(t,e).map(fz)).pipe(It(pz))}}(gz(n)):null}function yz(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function ax(n){return n?Array.isArray(n)?n:[n]:[]}function j5(n,e){return Array.isArray(n)?n.includes(e):n===e}function wz(n,e){const t=ax(e);return ax(n).forEach(r=>{j5(t,r)||t.push(r)}),t}function Cz(n,e){return ax(e).filter(t=>!j5(n,t))}class Mz{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=sx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ox(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Rs extends Mz{get formDirective(){return null}get path(){return null}}class wu extends Mz{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let lx=(()=>{class n extends class Sz{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(S(wu,2))},n.\u0275dir=le({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Nt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[he]}),n})();const e0="VALID",q5="INVALID",Pf="PENDING",t0="DISABLED";function Ez(n){return Array.isArray(n)?sx(n):n||null}function Dz(n){return Array.isArray(n)?ox(n):n||null}function Y5(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function n0(n,e){(function mx(n,e){const t=function bz(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(yz(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function xz(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(yz(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();K5(e._rawValidators,r),K5(e._rawAsyncValidators,r)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Y5e(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&kz(n,e)})}(n,e),function Z5e(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function X5e(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&kz(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function q5e(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function K5(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function kz(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Fz(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Nz(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const r_e={provide:wu,useExisting:dn(()=>J5)},Hz=(()=>Promise.resolve())();let J5=(()=>{class n extends wu{constructor(t,i,r,s,o){super(),this._changeDetectorRef=o,this.control=new class extends class Iz{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Ez(this._rawValidators),this._composedAsyncValidatorFn=Dz(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===e0}get invalid(){return this.status===q5}get pending(){return this.status==Pf}get disabled(){return this.status===t0}get enabled(){return this.status!==t0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Ez(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Dz(e)}addValidators(e){this.setValidators(wz(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wz(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Cz(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Cz(e,this._rawAsyncValidators))}hasValidator(e){return j5(this._rawValidators,e)}hasAsyncValidator(e){return j5(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Pf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=t0,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=e0,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===e0||this.status===Pf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?t0:e0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Pf,this._hasOwnPendingAsyncValidator=!0;const t=fz(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Bt,this.statusChanges=new Bt}_calculateStatus(){return this._allControlsDisabled()?t0:this.errors?q5:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pf)?Pf:this._anyControlsHaveStatus(q5)?q5:e0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Y5(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,i){super(function hx(n){return(Y5(n)?n.validators:n)||null}(t),function fx(n,e){return(Y5(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Y5(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Nz(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Fz(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Fz(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Nz(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new Bt,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function _x(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===rx?t=s:function J5e(n){return Object.getPrototypeOf(n.constructor)===eh}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function gx(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){n0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Hz.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&jl(i);Hz.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function X5(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(S(Rs,9),S(Vr,10),S(xu,10),S(as,10),S(dr,8))},n.\u0275dir=le({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[wt([r_e]),he,Di]}),n})(),Gz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({}),n})(),A_e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[Gz]}),n})(),R_e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[A_e]}),n})(),k_e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[yt,yt]}),n})();const oB=["*"],L_e=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],P_e=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],B_e=Am(Jl(class{})),V_e=Jl(class{}),lB=new pe("MatList"),H_e=new pe("MatNavList");let U_e=(()=>{class n extends B_e{constructor(t){super(),this._elementRef=t,this._stateChanges=new xt,"action-list"===this._getListType()&&(t.nativeElement.classList.add("mat-action-list"),t.nativeElement.setAttribute("role","group"))}_getListType(){const t=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===t?"list":"mat-action-list"===t?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(t){return new(t||n)(S(Be))},n.\u0275cmp=dt({type:n,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[wt([{provide:lB,useExisting:n}]),he,Di],ngContentSelectors:oB,decls:1,vars:0,template:function(t,i){1&t&&(Vi(),Dn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),n})(),cB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=le({type:n,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),n})(),uB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=le({type:n,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),n})(),G_e=(()=>{class n extends V_e{constructor(t,i,r,s){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new xt,this._disabled=!1,this._isInteractiveList=!!(r||s&&"action-list"===s._getListType()),this._list=r||s;const o=this._getHostElement();"button"===o.nodeName.toLowerCase()&&!o.hasAttribute("type")&&o.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(Ln(this._destroyed)).subscribe(()=>{i.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=Vt(t)}ngAfterContentInit(){!function QO(n,e,t="mat"){n.changes.pipe(Yl(n)).subscribe(({length:i})=>{Rm(e,`${t}-2-line`,!1),Rm(e,`${t}-3-line`,!1),Rm(e,`${t}-multi-line`,!1),2===i||3===i?Rm(e,`${t}-${i}-line`,!0):i>3&&Rm(e,`${t}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(dr),S(H_e,8),S(lB,8))},n.\u0275cmp=dt({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,i,r){if(1&t&&(pi(r,cB,5),pi(r,uB,5),pi(r,KO,5)),2&t){let s;kt(s=Lt())&&(i._avatar=s.first),kt(s=Lt())&&(i._icon=s.first),kt(s=Lt())&&(i._lines=s)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:4,hostBindings:function(t,i){2&t&&Nt("mat-list-item-disabled",i.disabled)("mat-list-item-with-avatar",i._avatar||i._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[he],ngContentSelectors:P_e,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,i){1&t&&(Vi(L_e),C(0,"span",0),ne(1,"span",1),Dn(2),C(3,"span",2),Dn(4,1),T(),Dn(5,2),T()),2&t&&(H(1),Z("matRippleTrigger",i._getHostElement())("matRippleDisabled",i._isRippleDisabled()))},dependencies:[ec],encapsulation:2,changeDetection:0}),n})(),X_e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[u5,Ma,yt,ob,Us,u5,yt,ob,k_e]}),n})();class l6e{constructor(e,t,i=!0){this.key=e,this.value=t,this.key=i?e.replace(/['"]/g,"").trim():e.trim(),this.value=i?t.replace(/['"]/g,"").trim():t.trim(),this.value=this.value.replace(/;/,"")}}function hB(n){let e=typeof n;return"object"===e?n.constructor===Array?"array":n.constructor===Set?"set":"object":e}function pB(n){const[e,...t]=n.split(":");return new l6e(e,t.join(":"))}function mB(n,e){return e.key&&(n[e.key]=e.value),n}let d6e=(()=>{class n extends ki{constructor(t,i,r,s,o,a,l,c,u){super(t,null,i,r),this.sanitizer=s,this.ngStyleInstance=l,this.DIRECTIVE_KEY="ngStyle",this.ngStyleInstance||(this.ngStyleInstance=new Od(t,o,a)),this.init();const d=this.nativeElement.getAttribute("style")??"";this.fallbackStyles=this.buildStyleMap(d),this.isServer=c&&df(u)}updateWithValue(t){const i=this.buildStyleMap(t);this.ngStyleInstance.ngStyle={...this.fallbackStyles,...i},this.isServer&&this.applyStyleToElement(i),this.ngStyleInstance.ngDoCheck()}clearStyles(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}buildStyleMap(t){const i=r=>this.sanitizer.sanitize(En.STYLE,r)??"";if(t)switch(hB(t)){case"string":return gB(function c6e(n,e=";"){return String(n).trim().split(e).map(t=>t.trim()).filter(t=>""!==t)}(t),i);case"array":return gB(t,i);default:return function fB(n,e){let t=[];return"set"===hB(n)?n.forEach(i=>t.push(i)):Object.keys(n).forEach(i=>{t.push(`${i}:${n[i]}`)}),function u6e(n,e){return n.map(pB).filter(i=>!!i).map(i=>(e&&(i.value=e(i.value)),i)).reduce(mB,{})}(t,e)}(t,i)}return{}}ngDoCheck(){this.ngStyleInstance.ngDoCheck()}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(gi),S(wi),S(hf),S(Ld),S(ho),S(Od,10),S(Sf),S(po))},n.\u0275dir=le({type:n,features:[he]}),n})();const h6e=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"];let t_=(()=>{class n extends d6e{constructor(){super(...arguments),this.inputs=h6e}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[he]}),n})();function gB(n,e){return n.map(pB).filter(i=>!!i).map(i=>(e&&(i.value=e(i.value)),i)).reduce(mB,{})}let _B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[mb]}),n})();function f6e(n,e){1&n&&(C(0,"mat-icon"),D(1,"close"),T())}function p6e(n,e){1&n&&(C(0,"mat-icon"),D(1,"menu"),T())}function m6e(n,e){1&n&&(C(0,"span"),D(1,"Close"),T())}function g6e(n,e){if(1&n&&(C(0,"span"),D(1),T()),2&n){const t=et();H(1),qp(t.title)}}function _6e(n,e){1&n&&(C(0,"mat-icon"),D(1,"light_mode"),T())}function v6e(n,e){1&n&&(C(0,"mat-icon"),D(1,"dark_mode"),T())}const y6e=function(n){return{transform:n}};let b6e=(()=>{class n{constructor(t){this.appService=t,this.mini=!1,this.collapsed=!0,this.version="2022.1.0",this.title=this.appService.title}open(){this.mini&&(this.collapsed=!1),this.mini=!this.mini}click(){this.collapsed=!0}ngOnInit(){}get darkMode(){return this.appService.darkMode}set darkMode(t){this.appService.setDarkMode(t,!0)}}return n.\u0275fac=function(t){return new(t||n)(S(Ii))},n.\u0275cmp=dt({type:n,selectors:[["app-sidemenu"]],hostVars:4,hostBindings:function(t,i){2&t&&Nt("mini",i.mini)("collapsed",i.collapsed)},decls:72,vars:19,consts:[[1,"side"],["fxLayout","column","fxLayoutAlign","start start","fxFlex","1 1",1,"menu"],["mat-list-item","",3,"click"],[4,"ngIf"],["mat-list-item","",1,"title"],[2,"opacity","0","transition","0"],["mat-list-item","","routerLink","/house","routerLinkActive","active",3,"disabled","click"],["house","routerLinkActive"],[2,"font-family","Material Icons Outlined"],["mat-list-item","","routerLink","/stairs","routerLinkActive","active",3,"disabled","click"],["stairs","routerLinkActive"],["mat-list-item","","routerLink","/construction","routerLinkActive","active",3,"disabled","click"],["construction","routerLinkActive"],["mat-list-item","","routerLink","/wired","routerLinkActive","active",3,"disabled","click"],["wired","routerLinkActive"],["mat-list-item","","routerLink","/costs","routerLinkActive","active",3,"disabled","click"],["costs","routerLinkActive"],["mat-list-item","","routerLink","/installations","routerLinkActive","active",3,"disabled","click"],["installations","routerLinkActive"],["mat-list-item","","routerLink","/about","routerLinkActive","active",3,"disabled","click"],["about","routerLinkActive"],["fxFlex","1 1"],["mat-list-item","","color","accent",3,"click"],["fxLayoutAlign","start center","fxLayoutGap","16px"],[1,"version"],["mat-list-item","",2,"opacity","0.7",3,"click"],[3,"ngStyle"]],template:function(t,i){if(1&t&&(C(0,"div",0)(1,"mat-action-list",1)(2,"button",2),$e("click",function(){return i.open()}),Ue(3,f6e,2,0,"mat-icon",3),Ue(4,p6e,2,0,"mat-icon",3),Ue(5,m6e,2,0,"span",3),Ue(6,g6e,2,1,"span",3),T(),C(7,"button",4)(8,"mat-icon",5),D(9,"gite"),T(),C(10,"span"),D(11),T()(),C(12,"button",6,7),$e("click",function(){return i.click()}),C(14,"mat-icon",8),D(15,"home"),T(),C(16,"span"),D(17,"The house"),T()(),C(18,"button",9,10),$e("click",function(){return i.click()}),C(20,"mat-icon",8),D(21,"stairs"),T(),C(22,"span"),D(23,"Stairs"),T()(),C(24,"button",11,12),$e("click",function(){return i.click()}),C(26,"mat-icon"),D(27,"handyman"),T(),C(28,"span"),D(29,"Construction"),T()(),C(30,"button",13,14),$e("click",function(){return i.click()}),C(32,"mat-icon"),D(33,"bolt"),T(),C(34,"span"),D(35,"Wired"),T()(),C(36,"button",15,16),$e("click",function(){return i.click()}),C(38,"mat-icon",8),D(39,"savings"),T(),C(40,"span"),D(41,"Costs"),T()(),C(42,"button",17,18),$e("click",function(){return i.click()}),C(44,"mat-icon"),D(45,"solar_power"),T(),C(46,"span"),D(47,"Installations"),T()(),C(48,"button",19,20),$e("click",function(){return i.click()}),C(50,"mat-icon"),D(51,"people_outline"),T(),C(52,"span"),D(53,"About us"),T()(),ne(54,"div",21),C(55,"button",22),$e("click",function(){return i.darkMode=!i.darkMode}),C(56,"mat-icon",5),D(57,"dark_mode"),T(),C(58,"span",23),Ue(59,_6e,2,0,"mat-icon",3),Ue(60,v6e,2,0,"mat-icon",3),C(61,"div"),D(62),T()()(),C(63,"div",24),D(64),ne(65,"span"),D(66," Version"),T(),C(67,"button",25),$e("click",function(){return i.collapsed=!i.collapsed}),C(68,"mat-icon",26),D(69,"double_arrow"),T(),C(70,"span"),D(71,"Collapse"),T()()()()),2&t){const r=hi(13),s=hi(19),o=hi(25),a=hi(31),l=hi(37),c=hi(43),u=hi(49);H(3),Z("ngIf",!i.mini),H(1),Z("ngIf",i.mini),H(1),Z("ngIf",!i.mini),H(1),Z("ngIf",i.mini),H(5),qp(i.title),H(1),Z("disabled",r.isActive),H(6),Z("disabled",s.isActive),H(6),Z("disabled",o.isActive),H(6),Z("disabled",a.isActive),H(6),Z("disabled",l.isActive),H(6),Z("disabled",c.isActive),H(6),Z("disabled",u.isActive),H(11),Z("ngIf",i.darkMode),H(1),Z("ngIf",!i.darkMode),H(2),vt("",i.darkMode?"Light":"Dark"," mode"),H(2),vt("",i.version," "),H(4),Z("ngStyle",Gl(17,y6e,"rotate("+(i.collapsed?0:-180)+"deg) scale(0.7)"))}},dependencies:[Go,Od,G5,U_e,G_e,Ef,Nm,Df,bb,t_,Cm,pO],styles:[".side[_ngcontent-%COMP%]{top:0;position:fixed;display:flex;flex-direction:column;max-width:200px;overflow:hidden;transition:.6s;height:100vh;max-height:100vh;border-right:1px solid var(--color-30);border-bottom:1px solid var(--color-30)}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{height:100vh;padding:0}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{min-height:56px;white-space:nowrap;opacity:1;transition:.4s}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:24px;padding-right:24px}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transition:.4s;overflow:initial}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:initial;pointer-events:none;opacity:.7}[_nghost-%COMP%]{display:flex;flex-direction:row}.collapsed[_nghost-%COMP%] > .side[_ngcontent-%COMP%]{max-width:50px}.collapsed[_nghost-%COMP%] > .side[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{opacity:.5}.collapsed[_nghost-%COMP%] > .side[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:hover{opacity:1}.mini[_nghost-%COMP%] > .side[_ngcontent-%COMP%]{max-height:50px}.version[_ngcontent-%COMP%]{padding:0 8px 8px;color:var(--color-30);white-space:nowrap}.version[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:20px;display:inline-block}"]}),n})(),x6e=(()=>{class n{constructor(t){this.appService=t,this.year=(new Date).getFullYear(),this.discord=this.appService.discord,this.github=this.appService.github,this.faDiscord=E4,this.faGithub=p9}ngOnInit(){}ngAfterViewInit(){}}return n.\u0275fac=function(t){return new(t||n)(S(Ii))},n.\u0275cmp=dt({type:n,selectors:[["app-root"]],decls:26,vars:5,consts:[[1,"example-container"],["mode","side","opened",""],["fxLayout","column","fxLayoutAlign","center center"],[2,"font-size","1.3em"],["target","_blank",1,"larger-link",2,"background","var(--primary-color)",3,"href"],[3,"icon"],["target","_blank",1,"larger-link",3,"href"],["target","_blank","href","GeoDev.nl",1,"larger-link"]],template:function(t,i){1&t&&(C(0,"mat-sidenav-container",0)(1,"mat-sidenav",1),ne(2,"app-sidemenu"),T(),C(3,"mat-sidenav-content")(4,"main"),ne(5,"router-outlet"),T(),C(6,"footer")(7,"mat-toolbar",2)(8,"div",3),D(9,"Join us on our "),C(10,"a",4),ne(11,"fa-icon",5),D(12," Discord "),T(),D(13," channel "),T(),C(14,"div"),D(15," Everything is free and open source. See "),C(16,"a",6),ne(17,"fa-icon",5),D(18," GitHub "),T()(),C(19,"div"),D(20),ne(21,"br"),T(),C(22,"div"),D(23," Build by "),C(24,"a",7),D(25,"GeoDev"),T()()()()()()),2&t&&(H(10),Ja("href",i.discord,tu),H(1),Z("icon",i.faDiscord),H(5),Ja("href",i.github,tu),H(1),Z("icon",i.faGithub),H(3),vt(" PassiveOpen.com 2019 - ",i.year,""))},dependencies:[o0e,pF,mF,fb,Ef,Df,Xb,U4,b6e],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}main[_ngcontent-%COMP%]{min-height:calc(100vh - 56px)}footer[_ngcontent-%COMP%]{z-index:1000;position:relative}footer[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{padding:26px 0 80px;font-size:.8rem;opacity:.8;font-weight:400;height:initial}.mat-drawer-content[_ngcontent-%COMP%]{overflow-y:hidden}"]}),n})();function vB(n){return new Ce(3e3,!1)}function n8e(){return typeof window<"u"&&typeof window.document<"u"}function Tx(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Cu(n){switch(n.length){case 0:return new Pm;case 1:return n[0];default:return new uF(n)}}function yB(n,e,t,i,r=new Map,s=new Map){const o=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const d=u.get("offset"),h=d==l,f=h&&c||new Map;u.forEach((p,m)=>{let g=m,_=p;if("offset"!==m)switch(g=e.normalizePropertyName(g,o),_){case"!":_=r.get(m);break;case tc:_=s.get(m);break;default:_=e.normalizeStyleValue(m,g,_,o)}f.set(g,_)}),h||a.push(f),c=f,l=d}),o.length)throw function W6e(n){return new Ce(3502,!1)}();return a}function Ex(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&Dx(t,"start",n)));break;case"done":n.onDone(()=>i(t&&Dx(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&Dx(t,"destroy",n)))}}function Dx(n,e,t){const s=Ax(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function Ax(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function vo(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function bB(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let Rx=(n,e)=>!1,xB=(n,e,t)=>[],wB=null;function Ix(n){const e=n.parentNode||n.host;return e===wB?null:e}(Tx()||typeof Element<"u")&&(n8e()?(wB=(()=>document.documentElement)(),Rx=(n,e)=>{for(;e;){if(e===n)return!0;e=Ix(e)}return!1}):Rx=(n,e)=>n.contains(e),xB=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let nh=null,CB=!1;const MB=Rx,SB=xB;let TB=(()=>{class n{validateStyleProperty(t){return function r8e(n){nh||(nh=function s8e(){return typeof document<"u"?document.body:null}()||{},CB=!!nh.style&&"WebkitAppearance"in nh.style);let e=!0;return nh.style&&!function i8e(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in nh.style,!e&&CB&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in nh.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return MB(t,i)}getParentElement(t){return Ix(t)}query(t,i,r){return SB(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new Pm(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})(),kx=(()=>{class n{}return n.NOOP=new TB,n})();const Lx="ng-enter",n_="ng-leave",i_="ng-trigger",r_=".ng-trigger",DB="ng-animating",Px=".ng-animating";function cc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ox(parseFloat(e[1]),e[2])}function Ox(n,e){return"s"===e?1e3*n:n}function s_(n,e,t){return n.hasOwnProperty("duration")?n:function l8e(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(vB()),{duration:0,delay:0,easing:""};r=Ox(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=Ox(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function w6e(){return new Ce(3100,!1)}()),a=!0),s<0&&(e.push(function C6e(){return new Ce(3101,!1)}()),a=!0),a&&e.splice(l,0,vB())}return{duration:r,delay:s,easing:o}}(n,e,t)}function s0(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function AB(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Mu(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function IB(n,e,t){return t?e+":"+t+";":""}function kB(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=IB(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=IB(0,h8e(t),n.style[t]));n.setAttribute("style",e)}function ul(n,e,t){n.style&&(e.forEach((i,r)=>{const s=Nx(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),Tx()&&kB(n))}function ih(n,e){n.style&&(e.forEach((t,i)=>{const r=Nx(i);n.style[r]=""}),Tx()&&kB(n))}function o0(n){return Array.isArray(n)?1==n.length?n[0]:lF(n):n}const Fx=new RegExp("{{\\s*(.+?)\\s*}}","g");function LB(n){let e=[];if("string"==typeof n){let t;for(;t=Fx.exec(n);)e.push(t[1]);Fx.lastIndex=0}return e}function a0(n,e,t){const i=n.toString(),r=i.replace(Fx,(s,o)=>{let a=e[o];return null==a&&(t.push(function S6e(n){return new Ce(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function o_(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const d8e=/-+([a-z0-9])/g;function Nx(n){return n.replace(d8e,(...e)=>e[1].toUpperCase())}function h8e(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function yo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function T6e(n){return new Ce(3004,!1)}()}}function PB(n,e){return window.getComputedStyle(n)[e]}function v8e(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function y8e(n,e,t){if(":"==n[0]){const l=function b8e(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function V6e(n){return new Ce(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function B6e(n){return new Ce(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(OB(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(OB(o,r))}(i,t,e)):t.push(n),t}const u_=new Set(["true","1"]),d_=new Set(["false","0"]);function OB(n,e){const t=u_.has(n)||d_.has(n),i=u_.has(e)||d_.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?u_.has(n):d_.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?u_.has(e):d_.has(e)),o&&a}}const x8e=new RegExp("s*:selfs*,?","g");function zx(n,e,t,i){return new w8e(n).build(e,t,i)}class w8e{constructor(e){this._driver=e}build(e,t,i){const r=new S8e(t);return this._resetContextStyleTimingState(r),yo(this,o0(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function D6e(){return new Ce(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function A6e(){return new Ce(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{LB(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(o_(s.values()),t.errors.push(function R6e(n,e){return new Ce(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=yo(this,o0(e.animation),t);return{type:1,matchers:v8e(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:rh(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>yo(this,i,t)),options:rh(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=yo(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:rh(e.options)}}visitAnimate(e,t){const i=function E8e(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Bx(s_(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Bx(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=s_(t,e);return Bx(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:St({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=St(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===tc?i.push(a):t.errors.push(new Ce(3002,!1)):i.push(AB(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(function k6e(n,e,t,i,r){return new Ce(3010,!1)}()),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:r}),t.options&&function u8e(n,e,t){const i=e.params||{},r=LB(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function M6e(n){return new Ce(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function L6e(){return new Ce(3011,!1)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(_=>{const v=this._makeStyleAst(_,t);let y=null!=v.offset?v.offset:function T8e(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(v.styles),b=0;return null!=y&&(s++,b=v.offset=y),l=l||b<0||b>1,a=a||b<c,c=b,o.push(b),v});l&&t.errors.push(function P6e(){return new Ce(3012,!1)}()),a&&t.errors.push(function O6e(){return new Ce(3200,!1)}());const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push(function F6e(){return new Ce(3202,!1)}()):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,m=t.currentAnimateTimings,g=m.duration;return u.forEach((_,v)=>{const y=h>0?v==f?1:h*v:o[v],b=y*g;t.currentTime=p+m.delay+b,m.duration=b,this._validateStyleAst(_,t),_.offset=y,i.styles.push(_)}),i}visitReference(e,t){return{type:8,animation:yo(this,o0(e.animation),t),options:rh(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:rh(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:rh(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function C8e(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(x8e,"")),n=n.replace(/@\*/g,r_).replace(/@\w+/g,t=>r_+"-"+t.slice(1)).replace(/:animating/g,Px),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,vo(t.collectedStyles,t.currentQuerySelector,new Map);const a=yo(this,o0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:rh(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function N6e(){return new Ce(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:s_(e.timings,t.errors,!0);return{type:12,animation:yo(this,o0(e.animation),t),timings:i,options:null}}}class S8e{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function rh(n){return n?(n=s0(n)).params&&(n.params=function M8e(n){return n?s0(n):null}(n.params)):n={},n}function Bx(n,e,t){return{duration:n,delay:e,easing:t}}function Vx(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class h_{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const R8e=new RegExp(":enter","g"),k8e=new RegExp(":leave","g");function Hx(n,e,t,i,r,s=new Map,o=new Map,a,l,c=[]){return(new L8e).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class L8e{buildKeyframes(e,t,i,r,s,o,a,l,c,u=[]){c=c||new h_;const d=new Ux(e,t,c,r,s,u,[]);d.options=l;const h=l.delay?cc(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,l),yo(this,i,d);const f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let m=f.length-1;m>=0;m--){const g=f[m];if(g.element===t){p=g;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return f.length?f.map(p=>p.buildKeyframes()):[Vx(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimateRefDelay(e.animation,t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimateRefDelay(e,t,i){const r=e.options?.delay;if(!r)return;let s;s="string"==typeof r?cc(a0(r,e.options?.params??{},t.errors)):r,i.delayNextStep(s)}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?cc(i.duration):null,a=null!=i.delay?cc(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),yo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=f_);const o=cc(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>yo(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?cc(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),yo(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return s_(t.params?a0(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?cc(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=f_);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),yo(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;yo(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const f_={};class Ux{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=f_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new p_(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=cc(i.duration)),null!=i.delay&&(r.delay=cc(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=a0(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new Ux(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=f_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new P8e(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(R8e,"."+this._enterClassName)).replace(k8e,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function z6e(n){return new Ce(3014,!1)}()),a}}class p_{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new p_(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||tc),this._currentKeyframe.set(t,tc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function O8e(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,tc)}else Mu(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=a0(l,s,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??tc),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Mu(a,new Map,this._backFill);c.forEach((u,d)=>{"!"===u?e.add(d):u===tc&&t.add(d)}),i||c.set("offset",l/this.duration),r.push(c)});const s=e.size?o_(e.values()):[],o=t.size?o_(t.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return Vx(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class P8e extends p_{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=Mu(e[0]);l.set("offset",0),s.push(l);const c=Mu(e[0]);c.set("offset",zB(a)),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=Mu(e[d]);const f=h.get("offset");h.set("offset",zB((t+f*i)/o)),s.push(h)}i=o,t=0,r="",e=s}return Vx(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function zB(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Gx{}const F8e=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class N8e extends Gx{normalizePropertyName(e,t){return Nx(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(F8e.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function E6e(n,e){return new Ce(3005,!1)}())}return o+s}}function BB(n,e,t,i,r,s,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const Wx={};class VB{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function z8e(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||Wx,p=this.buildStyles(i,a&&a.params||Wx,d),m=l&&l.params||Wx,g=this.buildStyles(r,m,d),_=new Set,v=new Map,y=new Map,b="void"===r,x={params:B8e(m,h),delay:this.ast.options?.delay},M=u?[]:Hx(e,t,this.ast.animation,s,o,p,g,x,c,d);let R=0;if(M.forEach(E=>{R=Math.max(E.duration+E.delay,R)}),d.length)return BB(t,this._triggerName,i,r,b,p,g,[],[],v,y,R,d);M.forEach(E=>{const P=E.element,Y=vo(v,P,new Set);E.preStyleProps.forEach(q=>Y.add(q));const J=vo(y,P,new Set);E.postStyleProps.forEach(q=>J.add(q)),P!==t&&_.add(P)});const w=o_(_.values());return BB(t,this._triggerName,i,r,b,p,g,M,w,v,y,R)}}function B8e(n,e){const t=s0(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class V8e{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=s0(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=a0(o,r,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),i.set(l,o)})}),i}}class U8e{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new V8e(r.style,r.options&&r.options.params||{},i))}),HB(this.states,"true","1"),HB(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new VB(e,r,this.states))}),this.fallbackTransition=function G8e(n,e,t){return new VB(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function HB(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const W8e=new h_;class j8e{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=zx(this._driver,t,i,[]);if(i.length)throw function j6e(n){return new Ce(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=yB(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=Hx(this._driver,t,s,Lx,n_,new Map,new Map,i,W8e,r),o.forEach(u=>{const d=vo(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(function $6e(){return new Ce(3300,!1)}()),o=[]),r.length)throw function q6e(n){return new Ce(3504,!1)}();a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,tc))})});const c=Cu(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Y6e(n){return new Ce(3301,!1)}();return t}listen(e,t,i,r){const s=Ax(t,"","","");return Ex(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const UB="ng-animate-queued",jx="ng-animate-disabled",Z8e=[],GB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},K8e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},$o="__ng_removed";class $x{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function t7e(n){return n??null}(i?e.value:e),i){const s=s0(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const l0="void",qx=new $x(l0);class Q8e{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,qo(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function X6e(n,e){return new Ce(3302,!1)}();if(null==i||0==i.length)throw function Z6e(n){return new Ce(3303,!1)}();if(!function n7e(n){return"start"==n||"done"==n}(i))throw function K6e(n,e){return new Ce(3400,!1)}();const s=vo(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=vo(this._engine.statesByElement,e,new Map);return a.has(t)||(qo(e,i_),qo(e,i_+"-"+t),a.set(t,qx)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Q6e(n){return new Ce(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new Yx(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(qo(e,i_),qo(e,i_+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new $x(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=qx),c.value!==l0&&l.value===c.value){if(!function s7e(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const m=[],g=s.matchStyles(l.value,l.params,m),_=s.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{ih(e,g),ul(e,_)})}return}const h=vo(this._engine.playersByElement,e,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==t&&m.queued&&m.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(qo(e,UB),o.onStart(()=>{Of(e,UB)})),o.onDone(()=>{let m=this.players.indexOf(o);m>=0&&this.players.splice(m,1);const g=this._engine.playersByElement.get(e);if(g){let _=g.indexOf(o);_>=0&&g.splice(_,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,r_,!0);i.forEach(r=>{if(r[$o])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,l0,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Cu(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=i.get(o)||qx,u=new $x(l0),d=new Yx(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[$o];(!s||s===GB)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){qo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=Ax(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,Ex(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class J8e{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Q8e(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(m_(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!m_(t))return;const s=t[$o];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),qo(e,jx)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Of(e,jx))}removeNode(e,t,i,r){if(m_(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[$o]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return m_(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,r_,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Px,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Cu(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[$o];if(t&&t.setForRemoval){if(e[$o]=GB,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(jx)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)qo(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Cu(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function J6e(n){return new Ce(3402,!1)}()}_flushAnimations(e,t){const i=new h_,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(k=>{u.add(k);const F=this.driver.query(k,".ng-animate-queued",!0);for(let N=0;N<F.length;N++)u.add(F[N])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=$B(h,this.collectedEnterElements),p=new Map;let m=0;f.forEach((k,F)=>{const N=Lx+m++;p.set(F,N),k.forEach(V=>qo(V,N))});const g=[],_=new Set,v=new Set;for(let k=0;k<this.collectedLeaveElements.length;k++){const F=this.collectedLeaveElements[k],N=F[$o];N&&N.setForRemoval&&(g.push(F),_.add(F),N.hasAnimation?this.driver.query(F,".ng-star-inserted",!0).forEach(V=>_.add(V)):v.add(F))}const y=new Map,b=$B(h,Array.from(_));b.forEach((k,F)=>{const N=n_+m++;y.set(F,N),k.forEach(V=>qo(V,N))}),e.push(()=>{f.forEach((k,F)=>{const N=p.get(F);k.forEach(V=>Of(V,N))}),b.forEach((k,F)=>{const N=y.get(F);k.forEach(V=>Of(V,N))}),g.forEach(k=>{this.processLeaveNode(k)})});const x=[],M=[];for(let k=this._namespaceList.length-1;k>=0;k--)this._namespaceList[k].drainQueuedTransitions(t).forEach(N=>{const V=N.player,$=N.element;if(x.push(V),this.collectedEnterElements.length){const Ie=$[$o];if(Ie&&Ie.setForMove){if(Ie.previousTriggersValues&&Ie.previousTriggersValues.has(N.triggerName)){const Le=Ie.previousTriggersValues.get(N.triggerName),qe=this.statesByElement.get(N.element);if(qe&&qe.has(N.triggerName)){const Pe=qe.get(N.triggerName);Pe.value=Le,qe.set(N.triggerName,Pe)}}return void V.destroy()}}const te=!d||!this.driver.containsElement(d,$),j=y.get($),_e=p.get($),se=this._buildInstruction(N,i,_e,j,te);if(se.errors&&se.errors.length)return void M.push(se);if(te)return V.onStart(()=>ih($,se.fromStyles)),V.onDestroy(()=>ul($,se.toStyles)),void r.push(V);if(N.isFallbackTransition)return V.onStart(()=>ih($,se.fromStyles)),V.onDestroy(()=>ul($,se.toStyles)),void r.push(V);const Ee=[];se.timelines.forEach(Ie=>{Ie.stretchStartingKeyframe=!0,this.disabledNodes.has(Ie.element)||Ee.push(Ie)}),se.timelines=Ee,i.append($,se.timelines),o.push({instruction:se,player:V,element:$}),se.queriedElements.forEach(Ie=>vo(a,Ie,[]).push(V)),se.preStyleProps.forEach((Ie,Le)=>{if(Ie.size){let qe=l.get(Le);qe||l.set(Le,qe=new Set),Ie.forEach((Pe,At)=>qe.add(At))}}),se.postStyleProps.forEach((Ie,Le)=>{let qe=c.get(Le);qe||c.set(Le,qe=new Set),Ie.forEach((Pe,At)=>qe.add(At))})});if(M.length){const k=[];M.forEach(F=>{k.push(function e8e(n,e){return new Ce(3505,!1)}())}),x.forEach(F=>F.destroy()),this.reportError(k)}const R=new Map,w=new Map;o.forEach(k=>{const F=k.element;i.has(F)&&(w.set(F,F),this._beforeAnimationBuild(k.player.namespaceId,k.instruction,R))}),r.forEach(k=>{const F=k.element;this._getPreviousPlayers(F,!1,k.namespaceId,k.triggerName,null).forEach(V=>{vo(R,F,[]).push(V),V.destroy()})});const E=g.filter(k=>YB(k,l,c)),P=new Map;jB(P,this.driver,v,c,tc).forEach(k=>{YB(k,l,c)&&E.push(k)});const J=new Map;f.forEach((k,F)=>{jB(J,this.driver,new Set(k),l,"!")}),E.forEach(k=>{const F=P.get(k),N=J.get(k);P.set(k,new Map([...Array.from(F?.entries()??[]),...Array.from(N?.entries()??[])]))});const q=[],I=[],G={};o.forEach(k=>{const{element:F,player:N,instruction:V}=k;if(i.has(F)){if(u.has(F))return N.onDestroy(()=>ul(F,V.toStyles)),N.disabled=!0,N.overrideTotalTime(V.totalTime),void r.push(N);let $=G;if(w.size>1){let j=F;const _e=[];for(;j=j.parentNode;){const se=w.get(j);if(se){$=se;break}_e.push(j)}_e.forEach(se=>w.set(se,$))}const te=this._buildAnimation(N.namespaceId,V,R,s,J,P);if(N.setRealPlayer(te),$===G)q.push(N);else{const j=this.playersByElement.get($);j&&j.length&&(N.parentPlayer=Cu(j)),r.push(N)}}else ih(F,V.fromStyles),N.onDestroy(()=>ul(F,V.toStyles)),I.push(N),u.has(F)&&r.push(N)}),I.forEach(k=>{const F=s.get(k.element);if(F&&F.length){const N=Cu(F);k.setRealPlayer(N)}}),r.forEach(k=>{k.parentPlayer?k.syncPlayerEvents(k.parentPlayer):k.destroy()});for(let k=0;k<g.length;k++){const F=g[k],N=F[$o];if(Of(F,n_),N&&N.hasAnimation)continue;let V=[];if(a.size){let te=a.get(F);te&&te.length&&V.push(...te);let j=this.driver.query(F,Px,!0);for(let _e=0;_e<j.length;_e++){let se=a.get(j[_e]);se&&se.length&&V.push(...se)}}const $=V.filter(te=>!te.destroyed);$.length?i7e(this,F,$):this.processLeaveNode(F)}return g.length=0,q.forEach(k=>{this.players.push(k),k.onDone(()=>{k.destroy();const F=this.players.indexOf(k);this.players.splice(F,1)}),k.play()}),q}elementContainsData(e,t){let i=!1;const r=t[$o];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==l0;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=vo(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}ih(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const m=p.element;u.add(m);const g=m[$o];if(g&&g.removedBeforeQueried)return new Pm(p.duration,p.delay);const _=m!==l,v=function r7e(n){const e=[];return qB(n,e),e}((i.get(m)||Z8e).map(R=>R.getRealPlayer())).filter(R=>!!R.element&&R.element===m),y=s.get(m),b=o.get(m),x=yB(0,this._normalizer,0,p.keyframes,y,b),M=this._buildPlayer(p,x,v);if(p.subTimeline&&r&&d.add(m),_){const R=new Yx(e,a,m);R.setRealPlayer(M),c.push(R)}return M});c.forEach(p=>{vo(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function e7e(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>qo(p,DB));const f=Cu(h);return f.onDestroy(()=>{u.forEach(p=>Of(p,DB)),ul(l,t.toStyles)}),d.forEach(p=>{vo(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Pm(e.duration,e.delay)}}class Yx{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Pm,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>Ex(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){vo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function m_(n){return n&&1===n.nodeType}function WB(n,e){const t=n.style.display;return n.style.display=e??"none",t}function jB(n,e,t,i,r){const s=[];t.forEach(l=>s.push(WB(l)));const o=[];i.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const h=e.computeStyle(c,d,r);u.set(d,h),(!h||0==h.length)&&(c[$o]=K8e,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>WB(l,s[a++])),o}function $B(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function qo(n,e){n.classList?.add(e)}function Of(n,e){n.classList?.remove(e)}function i7e(n,e,t){Cu(t).onDone(()=>n.processLeaveNode(e))}function qB(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof uF?qB(i.players,e):e.push(i)}}function YB(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class g_{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new J8e(e,t,i),this._timelineEngine=new j8e(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=zx(this._driver,s,l,[]);if(l.length)throw function G6e(n,e){return new Ce(3404,!1)}();a=function H8e(n,e,t){return new U8e(n,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=bB(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=bB(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let a7e=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ul(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ul(this._element,this._initialStyles),this._endStyles&&(ul(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ih(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ih(this._element,this._endStyles),this._endStyles=null),ul(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Xx(n){let e=null;return n.forEach((t,i)=>{(function l7e(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class XB{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:PB(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class c7e{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return MB(e,t)}getParentElement(e){return Ix(e)}query(e,t,i){return SB(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(f=>f instanceof XB);(function f8e(n,e){return 0===n||0===e})(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((p,m)=>c.set(m,p))});let d=function c8e(n){return n.length?n[0]instanceof Map?n:n.map(e=>AB(e)):[]}(t).map(f=>Mu(f));d=function p8e(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,PB(n,a)))}}return e}(e,d,c);const h=function o7e(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=Xx(e[0]),e.length>1&&(i=Xx(e[e.length-1]))):e instanceof Map&&(t=Xx(e)),t||i?new a7e(n,t,i):null}(e,d);return new XB(e,d,l,h)}}let u7e=(()=>{class n extends lb{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:ua.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?lF(t):t;return ZB(this._renderer,null,i,"register",[r]),new d7e(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(K(Np),K(Mt))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})();class d7e extends class D0e{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new h7e(this._id,e,t||{},this._renderer)}}class h7e{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return ZB(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function ZB(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const KB="@.disabled";let f7e=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new QB("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(l),new p7e(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(K(Np),K(g_),K(Ct))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})();class QB{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==KB?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class p7e extends QB{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==KB?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function m7e(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function g7e(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let _7e=(()=>{class n extends g_{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(K(Mt),K(kx),K(Gx),K(cf))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})();const JB=[{provide:lb,useClass:u7e},{provide:Gx,useFactory:function v7e(){return new N8e}},{provide:g_,useClass:_7e},{provide:Np,useFactory:function y7e(n,e,t){return new f7e(n,e,t)},deps:[T4,g_,Ct]}],Zx=[{provide:kx,useFactory:()=>new c7e},{provide:mo,useValue:"BrowserAnimations"},...JB],eV=[{provide:kx,useClass:TB},{provide:mo,useValue:"NoopAnimations"},...JB];let b7e=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?eV:Zx}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({providers:Zx,imports:[DL]}),n})();const x7e=["mat-button",""],w7e=["*"],M7e=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],S7e=jd(Am(Jl(class{constructor(n){this._elementRef=n}})));let Kx=(()=>{class n extends S7e{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of M7e)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(Ca),S(mo,8))},n.\u0275cmp=dt({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&fi(ec,5),2&t){let r;kt(r=Lt())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(gn("disabled",i.disabled||null),Nt("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[he],attrs:x7e,ngContentSelectors:w7e,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(Vi(),C(0,"span",0),Dn(1),T(),ne(2,"span",1)(3,"span",2)),2&t&&(H(2),Nt("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Z("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[ec],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),Qx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[Ma,yt,yt]}),n})(),T7e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({}),n})();class Jx{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class v_ extends Jx{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class ew extends Jx{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class E7e extends Jx{constructor(e){super(),this.element=e instanceof Be?e.nativeElement:e}}class tw{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof v_?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof ew?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof E7e?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class D7e extends tw{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||ur.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let nw=(()=>{class n extends tw{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Bt,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(S(Cd),S(Br),S(Mt))},n.\u0275dir=le({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[he]}),n})(),Su=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({}),n})(),A7e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[Us,yt,T7e,Su]}),n})();const R7e=["sliderWrapper"],Yo=pu({passive:!1}),O7e={provide:as,useExisting:dn(()=>iw),multi:!0};class F7e{}const N7e=c5(jd(Am(class{constructor(n){this._elementRef=n}}),"accent"));let iw=(()=>{class n extends N7e{constructor(t,i,r,s,o,a,l,c){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this._dir=s,this._ngZone=a,this._animationMode=c,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new Bt,this.input=new Bt,this.valueChange=new Bt,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=ri.EMPTY,this._pointerDown=u=>{this.disabled||this._isSliding||!c0(u)&&0!==u.button||this._ngZone.run(()=>{this._touchId=c0(u)?function z7e(n,e){for(let t=0;t<n.touches.length;t++){const i=n.touches[t].target;if(e===i||e.contains(i))return n.touches[t].identifier}}(u,this._elementRef.nativeElement):void 0;const d=iV(u,this._touchId);if(d){const h=this.value;this._isSliding="pointer",this._lastPointerEvent=u,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(u),this._focusHostElement(),this._updateValueFromPosition(d),this._valueOnSlideStart=h,u.cancelable&&u.preventDefault(),h!=this.value&&this._emitInputEvent()}})},this._pointerMove=u=>{if("pointer"===this._isSliding){const d=iV(u,this._touchId);if(d){u.cancelable&&u.preventDefault();const h=this.value;this._lastPointerEvent=u,this._updateValueFromPosition(d),h!=this.value&&this._emitInputEvent()}}},this._pointerUp=u=>{"pointer"===this._isSliding&&(!c0(u)||"number"!=typeof this._touchId||rw(u.changedTouches,this._touchId))&&(u.cancelable&&u.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=l,this.tabIndex=parseInt(o)||0,a.runOutsideAngular(()=>{const u=t.nativeElement;u.addEventListener("mousedown",this._pointerDown,Yo),u.addEventListener("touchstart",this._pointerDown,Yo)})}get invert(){return this._invert}set invert(t){this._invert=Vt(t)}get max(){return this._max}set max(t){this._max=go(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=go(t,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=go(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=Vt(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?go(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let i=go(t,0);this._roundToDecimal&&i!==this.min&&i!==this.max&&(i=parseFloat(i.toFixed(this._roundToDecimal))),this._value=i,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=Vt(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const i=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${i})`}}_getTrackFillStyles(){const t=this.percent,r=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${r})`,display:0===t?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,a={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const l=this._shouldInvertAxis();let c;c=this.vertical?l?"Bottom":"Top":l?"Right":"Left",a[`padding${c}`]=`${this._getThumbGap()}px`}return a}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mousedown",this._pointerDown,Yo),t.removeEventListener("touchstart",this._pointerDown,Yo),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||Ud(t)||this._isSliding&&"keyboard"!==this._isSliding)return;const i=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}i!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",t.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const i=this._document,r=c0(t),o=r?"touchend":"mouseup";i.addEventListener(r?"touchmove":"mousemove",this._pointerMove,Yo),i.addEventListener(o,this._pointerUp,Yo),r&&i.addEventListener("touchcancel",this._pointerUp,Yo);const a=this._getWindow();typeof a<"u"&&a&&a.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener("mousemove",this._pointerMove,Yo),t.removeEventListener("mouseup",this._pointerUp,Yo),t.removeEventListener("touchmove",this._pointerMove,Yo),t.removeEventListener("touchend",this._pointerUp,Yo),t.removeEventListener("touchcancel",this._pointerUp,Yo);const i=this._getWindow();typeof i<"u"&&i&&i.removeEventListener("blur",this._windowBlur)}_increment(t){const i=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(i+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let o=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(o=1-o),0===o)this.value=this.min;else if(1===o)this.value=this.max;else{const a=this._calculateValue(o),l=Math.round((a-this.min)/this.step)*this.step+this.min;this.value=this._clamp(l,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let t;if("auto"==this.tickInterval){let i=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;t=Math.ceil(30/(i*this.step/(this.max-this.min)))*this.step/i}else t=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=nV(t)?t:0}_createChangeEvent(t=this.value){let i=new F7e;return i.source=this,i.value=t,i}_calculatePercentage(t){const i=((t||0)-this.min)/(this.max-this.min);return nV(i)?i:0}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,i=0,r=1){return Math.max(i,Math.min(t,r))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(Ca),S(dr),S(Ql,8),Bo("tabindex"),S(Ct),S(Mt),S(mo,8))},n.\u0275cmp=dt({type:n,selectors:[["mat-slider"]],viewQuery:function(t,i){if(1&t&&fi(R7e,5),2&t){let r;kt(r=Lt())&&(i._sliderWrapper=r.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(t,i){1&t&&$e("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()})("keydown",function(s){return i._onKeydown(s)})("keyup",function(){return i._onKeyup()})("mouseenter",function(){return i._onMouseenter()})("selectstart",function(s){return s.preventDefault()}),2&t&&(Dd("tabIndex",i.tabIndex),gn("aria-disabled",i.disabled)("aria-valuemax",i.max)("aria-valuemin",i.min)("aria-valuenow",i.value)("aria-valuetext",i.valueText??i.displayValue)("aria-orientation",i.vertical?"vertical":"horizontal"),Nt("mat-slider-disabled",i.disabled)("mat-slider-has-ticks",i.tickInterval)("mat-slider-horizontal",!i.vertical)("mat-slider-axis-inverted",i._shouldInvertAxis())("mat-slider-invert-mouse-coords",i._shouldInvertMouseCoords())("mat-slider-sliding",i._isSliding)("mat-slider-thumb-label-showing",i.thumbLabel)("mat-slider-vertical",i.vertical)("mat-slider-min-value",i._isMinValue())("mat-slider-hide-last-tick",i.disabled||i._isMinValue()&&i._getThumbGap()&&i._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[wt([O7e]),he],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,i){1&t&&(C(0,"div",0,1)(2,"div",2),ne(3,"div",3)(4,"div",4),T(),C(5,"div",5),ne(6,"div",6),T(),C(7,"div",7),ne(8,"div",8)(9,"div",9),C(10,"div",10)(11,"span",11),D(12),T()()()()),2&t&&(H(3),Z("ngStyle",i._getTrackBackgroundStyles()),H(1),Z("ngStyle",i._getTrackFillStyles()),H(1),Z("ngStyle",i._getTicksContainerStyles()),H(1),Z("ngStyle",i._getTicksStyles()),H(1),Z("ngStyle",i._getThumbContainerStyles()),H(5),qp(i.displayValue))},dependencies:[Od],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid rgba(0,0,0,0);border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}'],encapsulation:2,changeDetection:0}),n})();function nV(n){return!isNaN(n)&&isFinite(n)}function c0(n){return"t"===n.type[0]}function iV(n,e){let t;return t=c0(n)?"number"==typeof e?rw(n.touches,e)||rw(n.changedTouches,e):n.touches[0]||n.changedTouches[0]:n,t?{x:t.clientX,y:t.clientY}:void 0}function rw(n,e){for(let t=0;t<n.length;t++)if(n[t].identifier===e)return n[t]}let B7e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[Us,yt,yt]}),n})(),oV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({}),n})(),J7e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[Ma,yt,Em,oV,yt,oV]}),n})();const aV=MO();class eve{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=mr(-this._previousScrollPosition.left),e.style.top=mr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),aV&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),aV&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class tve{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class lV{enable(){}disable(){}attach(){}}function sw(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function cV(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class nve{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();sw(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let ive=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new lV,this.close=o=>new tve(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new eve(this._viewportRuler,this._document),this.reposition=o=>new nve(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(K(f5),K(Lm),K(Ct),K(Mt))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uV{constructor(e){if(this.scrollStrategy=new lV,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class y_{constructor(e,t,i,r,s){this.offsetX=i,this.offsetY=r,this.panelClass=s,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class rve{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let dV=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(K(Mt))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sve=(()=>{class n extends dV{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(K(Mt),K(Ct,8))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ove=(()=>{class n extends dV{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Hd(s)},this._clickListener=s=>{const o=Hd(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(s)):d.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(K(Mt),K(As),K(Ct,8))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),b_=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||K9()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),K9()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(K(Mt),K(As))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class u0{constructor(e,t,i,r,s,o,a,l,c,u=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new xt,this._attachments=new xt,this._detachments=new xt,this._locationChanges=ri.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new xt,this._outsidePointerEvents=new xt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Yr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=mr(this._config.width),e.height=mr(this._config.height),e.minWidth=mr(this._config.minWidth),e.minHeight=mr(this._config.minHeight),e.maxWidth=mr(this._config.maxWidth),e.maxHeight=mr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=o5(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Ln(Il(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const hV="cdk-overlay-connected-position-bounding-box",ave=/([A-Za-z%]+)$/;class lve{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new xt,this._resizeSubscription=ri.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(hV),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&sh(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(hV),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=pV(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-i.height,p=this._subtractOverflows(s.width,0-o,o+s.width-i.width),m=this._subtractOverflows(s.height,h,f),g=p*m;return{visibleArea:g,isCompletelyWithinViewport:s.width*s.height===g,fitsInViewportVertically:m===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=fV(this._overlayRef.getConfig().minHeight),a=fV(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=pV(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),c=Math.max(s.left-i.left-e.x,0);let u=0,d=0;return u=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,d=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new rve(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,d,h;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;s=2*f,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)h=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)d=e.x,u=i.right-e.x;else{const f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=mr(i.height),r.top=mr(i.top),r.bottom=mr(i.bottom),r.width=mr(i.width),r.left=mr(i.left),r.right=mr(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=mr(s)),o&&(r.maxWidth=mr(o))}this._lastBoundingBoxSize=i,sh(this._boundingBox.style,r)}_resetBoundingBoxStyles(){sh(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){sh(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();sh(i,this._getExactOverlayY(t,e,u)),sh(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=mr(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=mr(o.maxWidth):s&&(i.maxWidth="")),sh(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=mr(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=mr(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:cV(e,i),isOriginOutsideView:sw(e,i),isOverlayClipped:cV(t,i),isOverlayOutsideView:sw(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&o5(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Be)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function sh(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function fV(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(ave);return t&&"px"!==t?null:parseFloat(e)}return n||null}function pV(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const mV="cdk-global-overlay-wrapper";class cve{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(mV),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let f="",p="",m="";l?m="flex-start":"center"===u?(m="center",h?p=d:f=d):h?"left"===u||"end"===u?(m="flex-end",f=d):("right"===u||"start"===u)&&(m="flex-start",p=d):"left"===u||"start"===u?(m="flex-start",f=d):("right"===u||"end"===u)&&(m="flex-end",p=d),e.position=this._cssPosition,e.marginLeft=l?"0":f,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":p,t.justifyContent=m,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(mV),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let uve=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new cve}flexibleConnectedTo(t){return new lve(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(K(Lm),K(Mt),K(As),K(b_))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dve=0,Ea=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d,h,f){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h,this._animationsModuleType=f}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new uV(t);return o.direction=o.direction||this._directionality.value,new u0(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+dve++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(cf)),new D7e(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(K(ive),K(b_),K(Cd),K(uve),K(sve),K(ur),K(Ct),K(Mt),K(Ql),K(rm),K(ove),K(mo,8))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})();const hve=new pe("cdk-connected-overlay-scroll-strategy");let fve=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(S(Be))},n.\u0275dir=le({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})();const mve={provide:hve,deps:[Ea],useFactory:function pve(n){return()=>n.scrollStrategies.reposition()}};let oh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({providers:[Ea,mve],imports:[Wd,Su,p5,p5]}),n})();const yve={provide:new pe("mat-menu-scroll-strategy"),deps:[Ea],useFactory:function vve(n){return()=>n.scrollStrategies.reposition()}};let bve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({providers:[yve],imports:[Us,yt,Ma,oh,$d,yt]}),n})();function xve(n,e){}class x_{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let _V=(()=>{class n extends tw{constructor(t,i,r,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const d=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),d},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=Z9(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=Z9();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Z9())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(a5),S(Mt,8),S(x_),S(Dm),S(Ct),S(u0),S(Ca))},n.\u0275cmp=dt({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(1&t&&fi(nw,7),2&t){let r;kt(r=Lt())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){2&t&&gn("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[he],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Ue(0,xve,0,0,"ng-template",0)},dependencies:[nw],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class ow{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new xt,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Ud(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const vV=new pe("DialogScrollStrategy"),wve=new pe("DialogData"),Cve=new pe("DefaultDialogConfig"),Sve={provide:vV,deps:[Ea],useFactory:function Mve(n){return()=>n.scrollStrategies.block()}};let Tve=0,yV=(()=>{class n{constructor(t,i,r,s,o,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new xt,this._afterOpenedAtThisLevel=new xt,this._ariaHiddenElements=new Map,this.afterAllClosed=R4(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Yl(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,i){(i={...this._defaultOptions||new x_,...i}).id=i.id||"cdk-dialog-"+Tve++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new ow(o,i),l=this._attachContainer(o,a,i);return a.containerInstance=l,this._attachDialogContent(t,a,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){aw(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){aw(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),aw(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new uV({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:x_,useValue:r},{provide:ow,useValue:i},{provide:u0,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=_V;const l=new v_(a,r.viewContainerRef,ur.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,i,r,s){if(t instanceof zr){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new ew(t,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new v_(t,s.viewContainerRef,o,s.componentFactoryResolver));i.componentInstance=a.instance}}_createInjector(t,i,r,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:wve,useValue:t.data},{provide:ow,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!o||!o.get(Ql,null,Et.Optional))&&a.push({provide:Ql,useValue:{value:t.direction,change:lt()}}),ur.create({parent:o||s,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(K(Ea),K(ur),K(Cve,8),K(n,12),K(b_),K(vV))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})();function aw(n,e){let t=n.length;for(;t--;)e(n[t])}let Eve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({providers:[yV,Sve],imports:[oh,Su,rb,Su]}),n})();function Dve(n,e){}const Ff={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},Ave={dialogContainer:os("dialogContainer",[Qn("void, exit",St({opacity:0,transform:"scale(0.7)"})),Qn("enter",St({transform:"none"})),ci("* => enter",aF([Kn("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",St({transform:"none",opacity:1})),ub("@*",cb(),{optional:!0})]),Ff),ci("* => void, * => exit",aF([Kn("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",St({opacity:0})),ub("@*",cb(),{optional:!0})]),Ff)])};class w_{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=Ff.params.enterAnimationDuration,this.exitAnimationDuration=Ff.params.exitAnimationDuration}}let Rve=(()=>{class n extends _V{constructor(t,i,r,s,o,a,l,c){super(t,i,r,s,o,a,l,c),this._animationStateChanged=new Bt}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(a5),S(Mt,8),S(w_),S(Dm),S(Ct),S(u0),S(Ca))},n.\u0275cmp=dt({type:n,selectors:[["ng-component"]],features:[he],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),Ive=(()=>{class n extends Rve{constructor(t,i,r,s,o,a,l,c,u){super(t,i,r,s,o,a,l,u),this._changeDetectorRef=c,this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?this._openAnimationDone(i):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:i})}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||Ff.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||Ff.params.exitAnimationDuration}}}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(a5),S(Mt,8),S(w_),S(Dm),S(Ct),S(u0),S(dr),S(Ca))},n.\u0275cmp=dt({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,i){1&t&&j3("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(Dd("id",i._config.id),gn("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Y3("@dialogContainer",i._getAnimationState()))},features:[he],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Ue(0,Dve,0,0,"ng-template",0)},dependencies:[nw],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[Ave.dialogContainer]}}),n})();class kve{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new xt,this._beforeClosed=new xt,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe($n(r=>"opened"===r.state),Yr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe($n(r=>"closed"===r.state),Yr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Il(this.backdropClick(),this.keydownEvents().pipe($n(r=>27===r.keyCode&&!this.disableClose&&!Ud(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function Lve(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe($n(t=>"closing"===t.state),Yr(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const Pve=new pe("MatDialogData"),Ove=new pe("mat-dialog-default-options"),bV=new pe("mat-dialog-scroll-strategy"),Nve={provide:bV,deps:[Ea],useFactory:function Fve(n){return()=>n.scrollStrategies.block()}};let zve=0,Bve=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new xt,this._afterOpenedAtThisLevel=new xt,this._idPrefix="mat-dialog-",this.afterAllClosed=R4(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Yl(void 0))),this._scrollStrategy=a,this._dialog=i.get(yV)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){let r;(i={...this._defaultOptions||new w_,...i}).id=i.id||`${this._idPrefix}${zve++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:w_,useValue:i},{provide:x_,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,l)=>(r=new this._dialogRefConstructor(o,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){Sd()},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})(),Vve=(()=>{class n extends Bve{constructor(t,i,r,s,o,a,l,c){super(t,i,s,a,l,o,kve,Ive,Pve,c)}}return n.\u0275fac=function(t){return new(t||n)(K(Ea),K(ur),K(rm,8),K(Ove,8),K(bV),K(n,12),K(b_),K(mo,8))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})(),Hve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({providers:[Vve,Nve],imports:[Eve,oh,Su,yt,yt]}),n})(),eye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[Ma,yt,yt]}),n})(),tye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[yt,yt]}),n})();const nye=["input"],iye=function(n){return{enterDuration:n}},rye=["*"],sye=new pe("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let oye=0;const aye={provide:as,useExisting:dn(()=>MV),multi:!0};class lye{constructor(e,t){this.source=e,this.checked=t}}const cye=c5(jd(Jl(Am(class{constructor(n){this._elementRef=n}}))));let uye=(()=>{class n extends cye{constructor(t,i,r,s,o,a,l){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=o,this._onChange=c=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Bt,this.toggleChange=new Bt,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=o.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId=`${l}${++oye}`}get required(){return this._required}set required(t){this._required=Vt(t)}get checked(){return this._checked}set checked(t){this._checked=Vt(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._focused=!0:t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return n.\u0275fac=function(t){Sd()},n.\u0275dir=le({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[he]}),n})(),MV=(()=>{class n extends uye{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a,"mat-slide-toggle-")}_createChangeEvent(t){return new lye(this,t)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}focus(t,i){i?this._focusMonitor.focusVia(this._inputElement,i,t):this._inputElement.nativeElement.focus(t)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(S(Be),S(Ca),S(dr),Bo("tabindex"),S(sye),S(mo,8))},n.\u0275cmp=dt({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(t,i){if(1&t&&fi(nye,5),2&t){let r;kt(r=Lt())&&(i._inputElement=r.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(t,i){2&t&&(Dd("id",i.id),gn("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),Nt("mat-checked",i.checked)("mat-disabled",i.disabled)("mat-slide-toggle-label-before","before"==i.labelPosition)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[wt([aye]),he],ngContentSelectors:rye,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,i){if(1&t&&(Vi(),C(0,"label",0,1)(2,"span",2)(3,"input",3,4),$e("change",function(s){return i._onChangeEvent(s)})("click",function(s){return i._onInputClick(s)}),T(),C(5,"span",5),ne(6,"span",6),C(7,"span",7),ne(8,"span",8),T()()(),C(9,"span",9,10),$e("cdkObserveContent",function(){return i._onLabelTextChange()}),C(11,"span",11),D(12,"\xa0"),T(),Dn(13),T()()),2&t){const r=hi(1),s=hi(10);gn("for",i.inputId),H(2),Nt("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),H(1),Z("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex)("checked",i.checked)("disabled",i.disabled),gn("name",i.name)("aria-checked",i.checked)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),H(4),Z("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",Gl(18,iye,i._noopAnimations?0:150))}},dependencies:[ec,OO],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),n})(),SV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({}),n})(),fye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[SV,Ma,yt,Em,SV,yt]}),n})(),C_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[Us,yt,Em,yt]}),n})(),vye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[Wd]}),n})(),lw=(()=>{class n{constructor(){this.changes=new xt,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Aye={provide:lw,deps:[[new Nl,new yd,lw]],useFactory:function Dye(n){return n||new lw}};let Rye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({providers:[Aye,ZO],imports:[yt,Us,Su,Qx,vye,QN,Ma,yt]}),n})(),AV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({}),n})(),Iye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({providers:[ZO],imports:[AV,C_,yt,AV,C_]}),n})(),Fye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[Us,yt,Su,Ma,Em,rb,yt]}),n})(),Bye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[u5,yt,u5,yt]}),n})();const Vye=["button"],Hye=["*"],IV=new pe("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),kV=new pe("MatButtonToggleGroup"),Uye={provide:as,useExisting:dn(()=>OV),multi:!0};let LV=0;class PV{constructor(e,t){this.source=e,this.value=t}}let OV=(()=>{class n{constructor(t,i){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+LV++,this.valueChange=new Bt,this.change=new Bt,this.appearance=i&&i.appearance?i.appearance:"standard"}get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=Vt(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(i=>i.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=Vt(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=Vt(t),this._markButtonsForCheck()}ngOnInit(){this._selectionModel=new ix(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const i=new PV(t,this.value);this._controlValueAccessorChangeFn(i.value),this.change.emit(i)}_syncButtonToggle(t,i,r=!1,s=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?i?this._selectionModel.select(t):this._selectionModel.deselect(t):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(t,r)):this._updateModelValue(t,r)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(i=>null!=t.value&&i===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(i=>this._selectValue(i))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const i=this._buttonToggles.find(r=>null!=r.value&&r.value===t);i&&(i.checked=!0,this._selectionModel.select(i))}_updateModelValue(t,i){i&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(S(dr),S(IV,8))},n.\u0275dir=le({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,i,r){if(1&t&&pi(r,FV,5),2&t){let s;kt(s=Lt())&&(i._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,i){2&t&&(gn("aria-disabled",i.disabled),Nt("mat-button-toggle-vertical",i.vertical)("mat-button-toggle-group-appearance-standard","standard"===i.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[wt([Uye,{provide:kV,useExisting:n}])]}),n})();const Gye=Jl(class{});let FV=(()=>{class n extends Gye{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=i,this._elementRef=r,this._focusMonitor=s,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new Bt;const l=Number(o);this.tabIndex=l||0===l?l:null,this.buttonToggleGroup=t,this.appearance=a&&a.appearance?a.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const i=Vt(t);i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=Vt(t)}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+LV++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new PV(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return n.\u0275fac=function(t){return new(t||n)(S(kV,8),S(dr),S(Be),S(Ca),Bo("tabindex"),S(IV,8))},n.\u0275cmp=dt({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(t,i){if(1&t&&fi(Vye,5),2&t){let r;kt(r=Lt())&&(i._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,i){1&t&&$e("focus",function(){return i.focus()}),2&t&&(gn("aria-label",null)("aria-labelledby",null)("id",i.id)("name",null),Nt("mat-button-toggle-standalone",!i.buttonToggleGroup)("mat-button-toggle-checked",i.checked)("mat-button-toggle-disabled",i.disabled)("mat-button-toggle-appearance-standard","standard"===i.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[he],ngContentSelectors:Hye,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,i){if(1&t&&(Vi(),C(0,"button",0,1),$e("click",function(){return i._onButtonClick()}),C(2,"span",2),Dn(3),T()(),ne(4,"span",3)(5,"span",4)),2&t){const r=hi(1);Z("id",i.buttonId)("disabled",i.disabled||null),gn("tabindex",i.disabled?-1:i.tabIndex)("aria-pressed",i.checked)("name",i._getButtonName())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby),H(5),Z("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)}},dependencies:[ec],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),n})(),Wye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[yt,Ma,yt]}),n})(),qye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[oh,Su,Us,Qx,yt,yt]}),n})();const Qye={provide:new pe("mat-tooltip-scroll-strategy"),deps:[Ea],useFactory:function Kye(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let e9e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({providers:[Qye],imports:[rb,Us,oh,yt,yt,$d]}),n})();const s9e={provide:new pe("mat-select-scroll-strategy"),deps:[Ea],useFactory:function r9e(n){return()=>n.scrollStrategies.reposition()}};let o9e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({providers:[s9e],imports:[Us,oh,nF,yt,$d,C_,nF,yt]}),n})();function a9e(n,e){if(1&n&&(xi(),ne(0,"circle",4)),2&n){const t=et(),i=hi(1);qr("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),gn("r",t._getCircleRadius())}}function l9e(n,e){if(1&n&&(xi(),ne(0,"circle",4)),2&n){const t=et(),i=hi(1);qr("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),gn("r",t._getCircleRadius())}}const u9e=jd(class{constructor(n){this._elementRef=n}},"primary"),d9e=new pe("mat-progress-spinner-default-options",{providedIn:"root",factory:function h9e(){return{diameter:100}}});class Tu extends u9e{constructor(e,t,i,r,s,o,a,l){super(e),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=ri.EMPTY,this.mode="determinate";const c=Tu._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),c.has(i.head)||c.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&a&&o&&l&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&l.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=go(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=go(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,go(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=SO(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){const t=50*(e.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,i=Tu._diameters;let r=i.get(e);if(!r||!r.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),r||(r=new Set,i.set(e,r)),r.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Tu._diameters=new WeakMap,Tu.\u0275fac=function(e){return new(e||Tu)(S(Be),S(As),S(Mt,8),S(mo,8),S(d9e),S(dr),S(Lm),S(Ct))},Tu.\u0275cmp=dt({type:Tu,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(gn("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),qr("width",t.diameter,"px")("height",t.diameter,"px"),Nt("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[he],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(xi(),C(0,"svg",0,1),Ue(2,a9e,1,11,"circle",2),Ue(3,l9e,1,9,"circle",3),T()),2&e&&(qr("width",t.diameter,"px")("height",t.diameter,"px"),Z("ngSwitch","indeterminate"===t.mode),gn("viewBox",t._getViewBox()),H(2),Z("ngSwitchCase",!0),H(1),Z("ngSwitchCase",!1))},dependencies:[b4,iL],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let p9e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[yt,Us,yt]}),n})();const g9e=[[["caption"]],[["colgroup"],["col"]]],_9e=["caption","colgroup, col"];function uw(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=Vt(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const Nf=new pe("CDK_TABLE");let zf=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(S(zr))},n.\u0275dir=le({type:n,selectors:[["","cdkCellDef",""]]}),n})(),Bf=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(S(zr))},n.\u0275dir=le({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),M_=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(S(zr))},n.\u0275dir=le({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class x9e{}const w9e=uw(x9e);let uc=(()=>{class n extends w9e{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const i=this._stickyEnd;this._stickyEnd=Vt(t),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(S(Nf,8))},n.\u0275dir=le({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,i,r){if(1&t&&(pi(r,zf,5),pi(r,Bf,5),pi(r,M_,5)),2&t){let s;kt(s=Lt())&&(i.cell=s.first),kt(s=Lt())&&(i.headerCell=s.first),kt(s=Lt())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[wt([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),he]}),n})();class dw{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let hw=(()=>{class n extends dw{constructor(t,i){super(t,i)}}return n.\u0275fac=function(t){return new(t||n)(S(uc),S(Be))},n.\u0275dir=le({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[he]}),n})(),fw=(()=>{class n extends dw{constructor(t,i){if(super(t,i),1===t._table?._elementRef.nativeElement.nodeType){const r=t._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===r||"treegrid"===r?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(S(uc),S(Be))},n.\u0275dir=le({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[he]}),n})();class BV{constructor(){this.tasks=[],this.endTasks=[]}}const pw=new pe("_COALESCED_STYLE_SCHEDULER");let VV=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new xt}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new BV,this._getScheduleObservable().pipe(Ln(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new BV;for(const i of t.tasks)i();for(const i of t.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?er(Promise.resolve(void 0)):this._ngZone.onStable.pipe(Yr(1))}}return n.\u0275fac=function(t){return new(t||n)(K(Ct))},n.\u0275prov=ve({token:n,factory:n.\u0275fac}),n})(),mw=(()=>{class n{constructor(t,i){this.template=t,this._differs=i}ngOnChanges(t){if(!this._columnsDiffer){const i=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof d0?t.headerCell.template:this instanceof h0?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(S(zr),S(rl))},n.\u0275dir=le({type:n,features:[Di]}),n})();class C9e extends mw{}const M9e=uw(C9e);let d0=(()=>{class n extends M9e{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(S(zr),S(rl),S(Nf,8))},n.\u0275dir=le({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[he,Di]}),n})();class S9e extends mw{}const T9e=uw(S9e);let h0=(()=>{class n extends T9e{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(S(zr),S(rl),S(Nf,8))},n.\u0275dir=le({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[he,Di]}),n})(),S_=(()=>{class n extends mw{constructor(t,i,r){super(t,i),this._table=r}}return n.\u0275fac=function(t){return new(t||n)(S(zr),S(rl),S(Nf,8))},n.\u0275dir=le({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[he]}),n})(),dc=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(t){return new(t||n)(S(Br))},n.\u0275dir=le({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),gw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=dt({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&ga(0,0)},dependencies:[dc],encapsulation:2}),n})(),vw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=dt({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&ga(0,0)},dependencies:[dc],encapsulation:2}),n})(),T_=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(t){return new(t||n)(S(zr))},n.\u0275dir=le({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const HV=["top","bottom","left","right"];class E9e{constructor(e,t,i,r,s=!0,o=!0,a){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=o,this._positionListener=a,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const i=[];for(const r of e)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,t)})}updateStickyColumns(e,t,i,r=!0){if(!e.length||!this._isBrowser||!t.some(h=>h)&&!i.some(h=>h))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=e[0],o=s.children.length,a=this._getCellWidths(s,r),l=this._getStickyStartColumnPositions(a,t),c=this._getStickyEndColumnPositions(a,i),u=t.lastIndexOf(!0),d=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const h="rtl"===this.direction,f=h?"right":"left",p=h?"left":"right";for(const m of e)for(let g=0;g<o;g++){const _=m.children[g];t[g]&&this._addStickyStyle(_,f,l[g],g===u),i[g]&&this._addStickyStyle(_,p,c[g],g===d)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===u?[]:a.slice(0,u+1).map((m,g)=>t[g]?m:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===d?[]:a.slice(d).map((m,g)=>i[g+d]?m:null).reverse()}))})}stickRows(e,t,i){if(!this._isBrowser)return;const r="bottom"===i?e.slice().reverse():e,s="bottom"===i?t.slice().reverse():t,o=[],a=[],l=[];for(let u=0,d=0;u<r.length;u++){if(!s[u])continue;o[u]=d;const h=r[u];l[u]=this._isNativeHtmlTable?Array.from(h.children):[h];const f=h.getBoundingClientRect().height;d+=f,a[u]=f}const c=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let u=0;u<r.length;u++){if(!s[u])continue;const d=o[u],h=u===c;for(const f of l[u])this._addStickyStyle(f,i,d,h)}"top"===i?this._positionListener?.stickyHeaderRowsUpdated({sizes:a,offsets:o,elements:l}):this._positionListener?.stickyFooterRowsUpdated({sizes:a,offsets:o,elements:l})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const i=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const r of t)e.style[r]="",e.classList.remove(this._borderCellCss[r]);HV.some(r=>-1===t.indexOf(r)&&e.style[r])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,i,r){e.classList.add(this._stickCellCss),r&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${i}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let i=0;for(const r of HV)e.style[r]&&(i+=t[r]);return i?`${i}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=e.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(e,t){const i=[];let r=0;for(let s=0;s<e.length;s++)t[s]&&(i[s]=r,r+=e[s]);return i}_getStickyEndColumnPositions(e,t){const i=[];let r=0;for(let s=e.length;s>0;s--)t[s]&&(i[s]=r,r+=e[s]);return i}}const yw=new pe("CDK_SPL");let E_=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(S(Br),S(Be))},n.\u0275dir=le({type:n,selectors:[["","rowOutlet",""]]}),n})(),D_=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(S(Br),S(Be))},n.\u0275dir=le({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),A_=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(S(Br),S(Be))},n.\u0275dir=le({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),R_=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(S(Br),S(Be))},n.\u0275dir=le({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),I_=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d,h,f){this._differs=t,this._changeDetectorRef=i,this._elementRef=r,this._dir=o,this._platform=l,this._viewRepeater=c,this._coalescedStyleScheduler=u,this._viewportRuler=d,this._stickyPositioningListener=h,this._ngZone=f,this._onDestroy=new xt,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new Bt,this.viewChange=new Fn({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=a,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=Vt(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=Vt(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(Ln(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),nx(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,i,(r,s,o)=>this._getEmbeddedViewArgs(r.item,o),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&Ct.isInAngularZone()?this._ngZone.onStable.pipe(Yr(1),Ln(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=t.length?"":"none");const s=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,s,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=t.length?"":"none");const s=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((s,o)=>{this._addStickyColumnStyles([s],this._headerRowDefs[o])}),this._rowDefs.forEach(s=>{const o=[];for(let a=0;a<i.length;a++)this._renderRows[a].rowDef===s&&o.push(i[a]);this._addStickyColumnStyles(o,s)}),r.forEach((s,o)=>{this._addStickyColumnStyles([s],this._footerRowDefs[o])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const t=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const o=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let a=0;a<o.length;a++){let l=o[a];const c=this._cachedRenderRowsMap.get(l.data);c.has(l.rowDef)?c.get(l.rowDef).push(l):c.set(l.rowDef,[l]),t.push(l)}}return t}_getRenderRowsForData(t,i,r){return this._getRowDefs(t,i).map(o=>{const a=r&&r.has(o)?r.get(o):[];if(a.length){const l=a.shift();return l.dataIndex=i,l}return{data:t,rowDef:o,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),k_(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=k_(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=k_(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=k_(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(o,a)=>o||!!a.getColumnsDiff(),i=this._rowDefs.reduce(t,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(t,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(t,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(t){this._data=[],nx(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;nx(this.dataSource)?t=this.dataSource.connect(this):function m9e(n){return!!n&&(n instanceof bn||mn(n.lift)&&mn(n.subscribe))}(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=lt(this.dataSource)),this._renderChangeSubscription=t.pipe(Ln(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,i)=>this._renderRow(this._headerRowOutlet,t,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,i)=>this._renderRow(this._footerRowOutlet,t,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,i){const r=Array.from(i.columns||[]).map(a=>this._columnDefsByName.get(a)),s=r.map(a=>a.sticky),o=r.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(t,s,o,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const i=[];for(let r=0;r<t.viewContainer.length;r++){const s=t.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(t,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,t));else{let s=this._rowDefs.find(o=>o.when&&o.when(i,t))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(t,i){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:i}}_renderRow(t,i,r,s={}){const o=t.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),o}_renderCellTemplateForItem(t,i){for(let r of this._getCellTemplates(t))dc.mostRecentCellOutlet&&dc.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let i=0,r=t.length;i<r;i++){const o=t.get(i).context;o.count=r,o.first=0===i,o.last=i===r-1,o.even=i%2==0,o.odd=!o.even,this.multiTemplateDataRows?(o.dataIndex=this._renderRows[i].dataIndex,o.renderIndex=i):o.index=this._renderRows[i].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,i=>{const r=this._columnDefsByName.get(i);return t.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const o of r.outlets)s.appendChild(o.elementRef.nativeElement);t.appendChild(s)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new E9e(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:lt()).pipe(Ln(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(t.templateRef),o=s.rootNodes[0];1===s.rootNodes.length&&o?.nodeType===this._document.ELEMENT_NODE&&(o.setAttribute("role","row"),o.classList.add(t._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(t){return new(t||n)(S(rl),S(dr),S(Be),Bo("role"),S(Ql,8),S(Mt),S(As),S(Jm),S(pw),S(Lm),S(yw,12),S(Ct,8))},n.\u0275cmp=dt({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,i,r){if(1&t&&(pi(r,T_,5),pi(r,uc,5),pi(r,S_,5),pi(r,d0,5),pi(r,h0,5)),2&t){let s;kt(s=Lt())&&(i._noDataRow=s.first),kt(s=Lt())&&(i._contentColumnDefs=s),kt(s=Lt())&&(i._contentRowDefs=s),kt(s=Lt())&&(i._contentHeaderRowDefs=s),kt(s=Lt())&&(i._contentFooterRowDefs=s)}},viewQuery:function(t,i){if(1&t&&(fi(E_,7),fi(D_,7),fi(A_,7),fi(R_,7)),2&t){let r;kt(r=Lt())&&(i._rowOutlet=r.first),kt(r=Lt())&&(i._headerRowOutlet=r.first),kt(r=Lt())&&(i._footerRowOutlet=r.first),kt(r=Lt())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,i){2&t&&Nt("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[wt([{provide:Nf,useExisting:n},{provide:Jm,useClass:JN},{provide:pw,useClass:VV},{provide:yw,useValue:null}])],ngContentSelectors:_9e,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(Vi(g9e),Dn(0),Dn(1,1),ga(2,0)(3,1)(4,2)(5,3))},dependencies:[E_,D_,A_,R_],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})();function k_(n,e){return n.concat(Array.from(e))}let A9e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[p5]}),n})();const R9e=[[["caption"]],[["colgroup"],["col"]]],I9e=["caption","colgroup, col"];let GV=(()=>{class n extends I_{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275cmp=dt({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(t,i){2&t&&Nt("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[wt([{provide:Jm,useClass:JN},{provide:I_,useExisting:n},{provide:Nf,useExisting:n},{provide:pw,useClass:VV},{provide:yw,useValue:null}]),he],ngContentSelectors:I9e,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(Vi(R9e),Dn(0),Dn(1,1),ga(2,0)(3,1)(4,2)(5,3))},dependencies:[E_,D_,A_,R_],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})(),bw=(()=>{class n extends zf{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","matCellDef",""]],features:[wt([{provide:zf,useExisting:n}]),he]}),n})(),xw=(()=>{class n extends Bf{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","matHeaderCellDef",""]],features:[wt([{provide:Bf,useExisting:n}]),he]}),n})(),ww=(()=>{class n extends uc{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[wt([{provide:uc,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),he]}),n})(),Cw=(()=>{class n extends hw{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[he]}),n})(),Mw=(()=>{class n extends fw{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[he]}),n})(),WV=(()=>{class n extends d0{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[wt([{provide:d0,useExisting:n}]),he]}),n})(),jV=(()=>{class n extends S_{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275dir=le({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[wt([{provide:S_,useExisting:n}]),he]}),n})(),$V=(()=>{class n extends gw{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275cmp=dt({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[wt([{provide:gw,useExisting:n}]),he],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&ga(0,0)},dependencies:[dc],encapsulation:2}),n})(),qV=(()=>{class n extends vw{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=je(n)))(i||n)}}(),n.\u0275cmp=dt({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[wt([{provide:vw,useExisting:n}]),he],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&ga(0,0)},dependencies:[dc],encapsulation:2}),n})(),H9e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[A9e,yt,yt]}),n})(),G9e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[oh,Iye,a0e,QN,Qx,U0e,X_e,A7e,B7e,J7e,bve,Hve,eye,Rye,tye,fye,C_,H9e,R_e,Fye,Bye,Ma,Wye,qye,e9e,o9e,p9e,p5]}),n})(),tH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[mb]}),n})(),dxe=(()=>{class n{constructor(t,i){df(i)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,i=[]){return{ngModule:n,providers:t.serverLoaded?[{provide:Sa,useValue:{...gb,...t}},{provide:_b,useValue:i,multi:!0},{provide:Sf,useValue:!0}]:[{provide:Sa,useValue:{...gb,...t}},{provide:_b,useValue:i,multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)(K(Sf),K(po))},n.\u0275mod=at({type:n}),n.\u0275inj=ot({imports:[FF,_B,tH,FF,_B,tH]}),n})();const Sw=new pe("DISQUS_SHORTNAME");class hc{constructor(e,t){this.shortname=e,this._document=t}get DISQUS(){return this._document.defaultView.DISQUS}get disqus_config(){return this._document.defaultView.disqus_config}set disqus_config(e){this._document.defaultView.disqus_config=e}}hc.\u0275fac=function(e){return new(e||hc)(K(Sw),K(Mt))},hc.\u0275prov=ve({token:hc,factory:hc.\u0275fac,providedIn:"root"}),hc.ngInjectableDef=MX({factory:function(){return new hc(Vn(Sw),Vn(Mt))},token:hc,providedIn:"root"});let Vf=(()=>{class n{constructor(t,i,r){this.renderer=t,this.el=i,this.dService=r,this.newComment=new Bt(!0),this.ready=new Bt(!0),this.paginate=new Bt(!0)}ngOnChanges(){this.dService.DISQUS?this.reset():this.addDisqusScript()}addDisqusScript(){this.dService.disqus_config=this.getConfig();const t=this.renderer.createElement("script");t.src=`//${this.dService.shortname}.disqus.com/embed.js`,t.async=!0,t.type="text/javascript",this.renderer.setAttribute(t,"data-timestamp",(new Date).getTime().toString()),this.renderer.appendChild(this.el.nativeElement,t)}reset(){this.dService.DISQUS.reset({reload:!0,config:this.getConfig()})}getConfig(){const t=this;return function(){this.page.identifier=t.identifier,this.page.url=t.validateUrl(t.url),this.page.title=t.title,this.category_id=t.category,this.language=t.language,this.callbacks.onNewComment=[i=>{t.newComment.emit(i)}],this.callbacks.onReady=[i=>{t.ready.emit(i)}],this.callbacks.onPaginate=[i=>{t.paginate.emit(i)}]}}validateUrl(t){if(t){if(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t))return t;console.warn("[Disqus]: Invalid URL")}}}return n.\u0275fac=function(t){return new(t||n)(S(ho),S(Be),S(hc))},n.\u0275cmp=dt({type:n,selectors:[["disqus"]],inputs:{url:"url",identifier:"identifier",title:"title",category:"category",language:"language"},outputs:{newComment:"newComment",ready:"ready",paginate:"paginate"},features:[Di],decls:1,vars:0,consts:[["id","disqus_thread"]],template:function(t,i){1&t&&ne(0,"div",0)},encapsulation:2,changeDetection:0}),n})(),hxe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:Sw,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=at({type:n}),n.\u0275inj=ot({}),n})();function nH(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function Ar(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){nH(s,i,r,o,a,"next",l)}function a(l){nH(s,i,r,o,a,"throw",l)}o(void 0)})}}function Tw(n,e){let t=0;if(void 0===e)for(let i of n)(i=+i)&&(t+=i);else{let i=-1;for(let r of n)(r=+e(r,++i,n))&&(t+=r)}return t}function fxe(){}function Ew(n){return null==n?fxe:function(){return this.querySelector(n)}}function mxe(n){return null==n?[]:Array.isArray(n)?n:Array.from(n)}function gxe(){return[]}function iH(n){return null==n?gxe:function(){return this.querySelectorAll(n)}}function rH(n){return function(){return this.matches(n)}}function sH(n){return function(e){return e.matches(n)}}var yxe=Array.prototype.find;function xxe(){return this.firstElementChild}var Cxe=Array.prototype.filter;function Mxe(){return Array.from(this.children)}function oH(n){return new Array(n.length)}function L_(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}function Axe(n){return function(){return n}}function Rxe(n,e,t,i,r,s){for(var a,o=0,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):t[o]=new L_(n,s[o]);for(;o<l;++o)(a=e[o])&&(r[o]=a)}function Ixe(n,e,t,i,r,s,o){var a,l,f,c=new Map,u=e.length,d=s.length,h=new Array(u);for(a=0;a<u;++a)(l=e[a])&&(h[a]=f=o.call(l,l.__data__,a,e)+"",c.has(f)?r[a]=l:c.set(f,l));for(a=0;a<d;++a)f=o.call(n,s[a],a,s)+"",(l=c.get(f))?(i[a]=l,l.__data__=s[a],c.delete(f)):t[a]=new L_(n,s[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(h[a])===l&&(r[a]=l)}function kxe(n){return n.__data__}function Pxe(n){return"object"==typeof n&&"length"in n?n:Array.from(n)}function Vxe(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}L_.prototype={constructor:L_,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var Dw="http://www.w3.org/1999/xhtml";const aH={svg:"http://www.w3.org/2000/svg",xhtml:Dw,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function P_(n){var e=n+="",t=e.indexOf(":");return t>=0&&"xmlns"!==(e=n.slice(0,t))&&(n=n.slice(t+1)),aH.hasOwnProperty(e)?{space:aH[e],local:n}:n}function qxe(n){return function(){this.removeAttribute(n)}}function Yxe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Xxe(n,e){return function(){this.setAttribute(n,e)}}function Zxe(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function Kxe(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}function Qxe(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function lH(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function ewe(n){return function(){this.style.removeProperty(n)}}function twe(n,e,t){return function(){this.style.setProperty(n,e,t)}}function nwe(n,e,t){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function Hf(n,e){return n.style.getPropertyValue(e)||lH(n).getComputedStyle(n,null).getPropertyValue(e)}function rwe(n){return function(){delete this[n]}}function swe(n,e){return function(){this[n]=e}}function owe(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}function cH(n){return n.trim().split(/^|\s+/)}function Aw(n){return n.classList||new uH(n)}function uH(n){this._node=n,this._names=cH(n.getAttribute("class")||"")}function dH(n,e){for(var t=Aw(n),i=-1,r=e.length;++i<r;)t.add(e[i])}function hH(n,e){for(var t=Aw(n),i=-1,r=e.length;++i<r;)t.remove(e[i])}function lwe(n){return function(){dH(this,n)}}function cwe(n){return function(){hH(this,n)}}function uwe(n,e){return function(){(e.apply(this,arguments)?dH:hH)(this,n)}}function hwe(){this.textContent=""}function fwe(n){return function(){this.textContent=n}}function pwe(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function gwe(){this.innerHTML=""}function _we(n){return function(){this.innerHTML=n}}function vwe(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function bwe(){this.nextSibling&&this.parentNode.appendChild(this)}function wwe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Mwe(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Dw&&e.documentElement.namespaceURI===Dw?e.createElement(n):e.createElementNS(t,n)}}function Swe(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function fH(n){var e=P_(n);return(e.local?Swe:Mwe)(e)}function Ewe(){return null}function Awe(){var n=this.parentNode;n&&n.removeChild(this)}function Iwe(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function kwe(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function Fwe(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function Nwe(n){return function(){var e=this.__on;if(e){for(var s,t=0,i=-1,r=e.length;t<r;++t)s=e[t],n.type&&s.type!==n.type||s.name!==n.name?e[++i]=s:this.removeEventListener(s.type,s.listener,s.options);++i?e.length=i:delete this.__on}}}function zwe(n,e,t){return function(){var r,i=this.__on,s=function Owe(n){return function(e){n.call(this,e,this.__data__)}}(e);if(i)for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===n.type&&r.name===n.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),void(r.value=e);this.addEventListener(n.type,s,t),r={type:n.type,name:n.name,value:e,listener:s,options:t},i?i.push(r):this.__on=[r]}}function pH(n,e,t){var i=lH(n),r=i.CustomEvent;"function"==typeof r?r=new r(e,t):(r=i.document.createEvent("Event"),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),n.dispatchEvent(r)}function Vwe(n,e){return function(){return pH(this,n,e)}}function Hwe(n,e){return function(){return pH(this,n,e.apply(this,arguments))}}uH.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var mH=[null];function bo(n,e){this._groups=n,this._parents=e}function gH(){return new bo([[document.documentElement]],mH)}bo.prototype=gH.prototype={constructor:bo,select:function pxe(n){"function"!=typeof n&&(n=Ew(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var l,c,s=e[r],o=s.length,a=i[r]=new Array(o),u=0;u<o;++u)(l=s[u])&&(c=n.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new bo(i,this._parents)},selectAll:function vxe(n){n="function"==typeof n?function _xe(n){return function(){return mxe(n.apply(this,arguments))}}(n):iH(n);for(var e=this._groups,t=e.length,i=[],r=[],s=0;s<t;++s)for(var l,o=e[s],a=o.length,c=0;c<a;++c)(l=o[c])&&(i.push(n.call(l,l.__data__,c,o)),r.push(l));return new bo(i,r)},selectChild:function wxe(n){return this.select(null==n?xxe:function bxe(n){return function(){return yxe.call(this.children,n)}}("function"==typeof n?n:sH(n)))},selectChildren:function Txe(n){return this.selectAll(null==n?Mxe:function Sxe(n){return function(){return Cxe.call(this.children,n)}}("function"==typeof n?n:sH(n)))},filter:function Exe(n){"function"!=typeof n&&(n=rH(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var l,s=e[r],o=s.length,a=i[r]=[],c=0;c<o;++c)(l=s[c])&&n.call(l,l.__data__,c,s)&&a.push(l);return new bo(i,this._parents)},data:function Lxe(n,e){if(!arguments.length)return Array.from(this,kxe);var t=e?Ixe:Rxe,i=this._parents,r=this._groups;"function"!=typeof n&&(n=Axe(n));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=i[c],d=r[c],h=d.length,f=Pxe(n.call(u,u&&u.__data__,c,i)),p=f.length,m=a[c]=new Array(p),g=o[c]=new Array(p),_=l[c]=new Array(h);t(u,d,m,g,_,f,e);for(var b,x,v=0,y=0;v<p;++v)if(b=m[v]){for(v>=y&&(y=v+1);!(x=g[y])&&++y<p;);b._next=x||null}}return(o=new bo(o,i))._enter=a,o._exit=l,o},enter:function Dxe(){return new bo(this._enter||this._groups.map(oH),this._parents)},exit:function Oxe(){return new bo(this._exit||this._groups.map(oH),this._parents)},join:function Fxe(n,e,t){var i=this.enter(),r=this,s=this.exit();return"function"==typeof n?(i=n(i))&&(i=i.selection()):i=i.append(n+""),null!=e&&(r=e(r))&&(r=r.selection()),null==t?s.remove():t(s),i&&r?i.merge(r).order():r},merge:function Nxe(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,r=t.length,o=Math.min(r,i.length),a=new Array(r),l=0;l<o;++l)for(var f,c=t[l],u=i[l],d=c.length,h=a[l]=new Array(d),p=0;p<d;++p)(f=c[p]||u[p])&&(h[p]=f);for(;l<r;++l)a[l]=t[l];return new bo(a,this._parents)},selection:function Wwe(){return this},order:function zxe(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var o,i=n[e],r=i.length-1,s=i[r];--r>=0;)(o=i[r])&&(s&&4^o.compareDocumentPosition(s)&&s.parentNode.insertBefore(o,s),s=o);return this},sort:function Bxe(n){function e(d,h){return d&&h?n(d.__data__,h.__data__):!d-!h}n||(n=Vxe);for(var t=this._groups,i=t.length,r=new Array(i),s=0;s<i;++s){for(var c,o=t[s],a=o.length,l=r[s]=new Array(a),u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new bo(r,this._parents).order()},call:function Hxe(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function Uxe(){return Array.from(this)},node:function Gxe(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null},size:function Wxe(){let n=0;for(const e of this)++n;return n},empty:function jxe(){return!this.node()},each:function $xe(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var a,r=e[t],s=0,o=r.length;s<o;++s)(a=r[s])&&n.call(a,a.__data__,s,r);return this},attr:function Jxe(n,e){var t=P_(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((null==e?t.local?Yxe:qxe:"function"==typeof e?t.local?Qxe:Kxe:t.local?Zxe:Xxe)(t,e))},style:function iwe(n,e,t){return arguments.length>1?this.each((null==e?ewe:"function"==typeof e?nwe:twe)(n,e,t??"")):Hf(this.node(),n)},property:function awe(n,e){return arguments.length>1?this.each((null==e?rwe:"function"==typeof e?owe:swe)(n,e)):this.node()[n]},classed:function dwe(n,e){var t=cH(n+"");if(arguments.length<2){for(var i=Aw(this.node()),r=-1,s=t.length;++r<s;)if(!i.contains(t[r]))return!1;return!0}return this.each(("function"==typeof e?uwe:e?lwe:cwe)(t,e))},text:function mwe(n){return arguments.length?this.each(null==n?hwe:("function"==typeof n?pwe:fwe)(n)):this.node().textContent},html:function ywe(n){return arguments.length?this.each(null==n?gwe:("function"==typeof n?vwe:_we)(n)):this.node().innerHTML},raise:function xwe(){return this.each(bwe)},lower:function Cwe(){return this.each(wwe)},append:function Twe(n){var e="function"==typeof n?n:fH(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function Dwe(n,e){var t="function"==typeof n?n:fH(n),i=null==e?Ewe:"function"==typeof e?e:Ew(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function Rwe(){return this.each(Awe)},clone:function Lwe(n){return this.select(n?kwe:Iwe)},datum:function Pwe(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function Bwe(n,e,t){var r,o,i=Fwe(n+""),s=i.length;if(!(arguments.length<2)){for(a=e?zwe:Nwe,r=0;r<s;++r)this.each(a(i[r],e,t));return this}var a=this.node().__on;if(a)for(var u,l=0,c=a.length;l<c;++l)for(r=0,u=a[l];r<s;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value},dispatch:function Uwe(n,e){return this.each(("function"==typeof e?Hwe:Vwe)(n,e))},[Symbol.iterator]:function*Gwe(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var o,i=n[e],r=0,s=i.length;r<s;++r)(o=i[r])&&(yield o)}};const f0=gH;var jwe={value:()=>{}};function _H(){for(var i,n=0,e=arguments.length,t={};n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new O_(t)}function O_(n){this._=n}function $we(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}function qwe(n,e){for(var r,t=0,i=n.length;t<i;++t)if((r=n[t]).name===e)return r.value}function vH(n,e,t){for(var i=0,r=n.length;i<r;++i)if(n[i].name===e){n[i]=jwe,n=n.slice(0,i).concat(n.slice(i+1));break}return null!=t&&n.push({name:e,value:t}),n}O_.prototype=_H.prototype={constructor:O_,on:function(n,e){var r,t=this._,i=$we(n+"",t),s=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(n=i[s]).type)t[r]=vH(t[r],n.name,e);else if(null==e)for(r in t)t[r]=vH(t[r],n.name,null);return this}for(;++s<o;)if((r=(n=i[s]).type)&&(r=qwe(t[r],n.name)))return r},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new O_(n)},call:function(n,e){if((r=arguments.length-2)>0)for(var r,s,t=new Array(r),i=0;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(i=0,r=(s=this._[n]).length;i<r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(e,t)}};const yH=_H;var F_,g0,Uf=0,p0=0,m0=0,N_=0,lh=0,z_=0,_0="object"==typeof performance&&performance.now?performance:Date,xH="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Rw(){return lh||(xH(Ywe),lh=_0.now()+z_)}function Ywe(){lh=0}function B_(){this._call=this._time=this._next=null}function wH(n,e,t){var i=new B_;return i.restart(n,e,t),i}function CH(){lh=(N_=_0.now())+z_,Uf=p0=0;try{!function Xwe(){Rw(),++Uf;for(var e,n=F_;n;)(e=lh-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Uf}()}finally{Uf=0,function Kwe(){for(var n,t,e=F_,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:F_=t);g0=n,Iw(i)}(),lh=0}}function Zwe(){var n=_0.now(),e=n-N_;e>1e3&&(z_-=e,N_=n)}function Iw(n){Uf||(p0&&(p0=clearTimeout(p0)),n-lh>24?(n<1/0&&(p0=setTimeout(CH,n-_0.now()-z_)),m0&&(m0=clearInterval(m0))):(m0||(N_=_0.now(),m0=setInterval(Zwe,1e3)),Uf=1,xH(CH)))}function MH(n,e,t){var i=new B_;return i.restart(r=>{i.stop(),n(r+e)},e=null==e?0:+e,t),i}B_.prototype=wH.prototype={constructor:B_,restart:function(n,e,t){if("function"!=typeof n)throw new TypeError("callback is not a function");t=(null==t?Rw():+t)+(null==e?0:+e),!this._next&&g0!==this&&(g0?g0._next=this:F_=this,g0=this),this._call=n,this._time=t,Iw()},stop:function(){this._call&&(this._call=null,this._time=1/0,Iw())}};var Qwe=yH("start","end","cancel","interrupt"),Jwe=[];function U_(n,e,t,i,r,s){var o=n.__transition;if(o){if(t in o)return}else n.__transition={};!function eCe(n,e,t){var r,i=n.__transition;function o(c){var u,d,h,f;if(1!==t.state)return l();for(u in i)if((f=i[u]).name===t.name){if(3===f.state)return MH(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",n,n.__data__,f.index,f.group),delete i[u]):+u<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",n,n.__data__,f.index,f.group),delete i[u])}if(MH(function(){3===t.state&&(t.state=4,t.timer.restart(a,t.delay,t.time),a(c))}),t.state=2,t.on.call("start",n,n.__data__,t.index,t.group),2===t.state){for(t.state=3,r=new Array(h=t.tween.length),u=0,d=-1;u<h;++u)(f=t.tween[u].value.call(n,n.__data__,t.index,t.group))&&(r[++d]=f);r.length=d+1}}function a(c){for(var u=c<t.duration?t.ease.call(null,c/t.duration):(t.timer.restart(l),t.state=5,1),d=-1,h=r.length;++d<h;)r[d].call(n,u);5===t.state&&(t.on.call("end",n,n.__data__,t.index,t.group),l())}function l(){for(var c in t.state=6,t.timer.stop(),delete i[e],i)return;delete n.__transition}i[e]=t,t.timer=wH(function s(c){t.state=1,t.timer.restart(o,t.delay,t.time),t.delay<=c&&o(c-t.delay)},0,t.time)}(n,t,{name:e,index:i,group:r,on:Qwe,tween:Jwe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function Pw(n,e){var t=Da(n,e);if(t.state>0)throw new Error("too late; already scheduled");return t}function dl(n,e){var t=Da(n,e);if(t.state>3)throw new Error("too late; already running");return t}function Da(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function G_(n,e){var i,r,o,t=n.__transition,s=!0;if(t){for(o in e=null==e?null:e+"",t)(i=t[o]).name===e?(r=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(r?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[o]):s=!1;s&&delete n.__transition}}function Eu(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var W_,DH=180/Math.PI,Ow={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function AH(n,e,t,i,r,s){var o,a,l;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(l=n*t+e*i)&&(t-=n*l,i-=e*l),(a=Math.sqrt(t*t+i*i))&&(t/=a,i/=a,l/=a),n*i<e*t&&(n=-n,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,n)*DH,skewX:Math.atan(l)*DH,scaleX:o,scaleY:a}}function RH(n,e,t,i){function r(c){return c.length?c.pop()+" ":""}return function(c,u){var d=[],h=[];return c=n(c),u=n(u),function s(c,u,d,h,f,p){if(c!==d||u!==h){var m=f.push("translate(",null,e,null,t);p.push({i:m-4,x:Eu(c,d)},{i:m-2,x:Eu(u,h)})}else(d||h)&&f.push("translate("+d+e+h+t)}(c.translateX,c.translateY,u.translateX,u.translateY,d,h),function o(c,u,d,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:d.push(r(d)+"rotate(",null,i)-2,x:Eu(c,u)})):u&&d.push(r(d)+"rotate("+u+i)}(c.rotate,u.rotate,d,h),function a(c,u,d,h){c!==u?h.push({i:d.push(r(d)+"skewX(",null,i)-2,x:Eu(c,u)}):u&&d.push(r(d)+"skewX("+u+i)}(c.skewX,u.skewX,d,h),function l(c,u,d,h,f,p){if(c!==d||u!==h){var m=f.push(r(f)+"scale(",null,",",null,")");p.push({i:m-4,x:Eu(c,d)},{i:m-2,x:Eu(u,h)})}else(1!==d||1!==h)&&f.push(r(f)+"scale("+d+","+h+")")}(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,h),c=u=null,function(f){for(var g,p=-1,m=h.length;++p<m;)d[(g=h[p]).i]=g.x(f);return d.join("")}}}var rCe=RH(function nCe(n){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Ow:AH(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),sCe=RH(function iCe(n){return null!=n&&(W_||(W_=document.createElementNS("http://www.w3.org/2000/svg","g")),W_.setAttribute("transform",n),n=W_.transform.baseVal.consolidate())?AH((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):Ow},", ",")",")");function oCe(n,e){var t,i;return function(){var r=dl(this,n),s=r.tween;if(s!==t)for(var o=0,a=(i=t=s).length;o<a;++o)if(i[o].name===e){(i=i.slice()).splice(o,1);break}r.tween=i}}function aCe(n,e,t){var i,r;if("function"!=typeof t)throw new Error;return function(){var s=dl(this,n),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:e,value:t},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=a;break}l===c&&r.push(a)}s.tween=r}}function Fw(n,e,t){var i=n._id;return n.each(function(){var r=dl(this,i);(r.value||(r.value={}))[e]=t.apply(this,arguments)}),function(r){return Da(r,i).value[e]}}function Nw(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function IH(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function v0(){}var j_=1/.7,Gf="\\s*([+-]?\\d+)\\s*",b0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cCe=/^#([0-9a-f]{3,8})$/,uCe=new RegExp(`^rgb\\(${Gf},${Gf},${Gf}\\)$`),dCe=new RegExp(`^rgb\\(${hl},${hl},${hl}\\)$`),hCe=new RegExp(`^rgba\\(${Gf},${Gf},${Gf},${b0}\\)$`),fCe=new RegExp(`^rgba\\(${hl},${hl},${hl},${b0}\\)$`),pCe=new RegExp(`^hsl\\(${b0},${hl},${hl}\\)$`),mCe=new RegExp(`^hsla\\(${b0},${hl},${hl},${b0}\\)$`),kH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function LH(){return this.rgb().formatHex()}function PH(){return this.rgb().formatRgb()}function x0(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=cCe.exec(n))?(t=e[1].length,e=parseInt(e[1],16),6===t?OH(e):3===t?new Gs(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===t?$_(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===t?$_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=uCe.exec(n))?new Gs(e[1],e[2],e[3],1):(e=dCe.exec(n))?new Gs(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=hCe.exec(n))?$_(e[1],e[2],e[3],e[4]):(e=fCe.exec(n))?$_(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=pCe.exec(n))?zH(e[1],e[2]/100,e[3]/100,1):(e=mCe.exec(n))?zH(e[1],e[2]/100,e[3]/100,e[4]):kH.hasOwnProperty(n)?OH(kH[n]):"transparent"===n?new Gs(NaN,NaN,NaN,0):null}function OH(n){return new Gs(n>>16&255,n>>8&255,255&n,1)}function $_(n,e,t,i){return i<=0&&(n=e=t=NaN),new Gs(n,e,t,i)}function vCe(n){return n instanceof v0||(n=x0(n)),n?new Gs((n=n.rgb()).r,n.g,n.b,n.opacity):new Gs}function q_(n,e,t,i){return 1===arguments.length?vCe(n):new Gs(n,e,t,i??1)}function Gs(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}function FH(){return`#${uh(this.r)}${uh(this.g)}${uh(this.b)}`}function NH(){const n=Y_(this.opacity);return`${1===n?"rgb(":"rgba("}${ch(this.r)}, ${ch(this.g)}, ${ch(this.b)}${1===n?")":`, ${n})`}`}function Y_(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ch(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function uh(n){return((n=ch(n))<16?"0":"")+n.toString(16)}function zH(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Aa(n,e,t,i)}function BH(n){if(n instanceof Aa)return new Aa(n.h,n.s,n.l,n.opacity);if(n instanceof v0||(n=x0(n)),!n)return new Aa;if(n instanceof Aa)return n;var e=(n=n.rgb()).r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,a=s-r,l=(s+r)/2;return a?(o=e===s?(t-i)/a+6*(t<i):t===s?(i-e)/a+2:(e-t)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new Aa(o,a,l,n.opacity)}function Aa(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}function VH(n){return(n=(n||0)%360)<0?n+360:n}function X_(n){return Math.max(0,Math.min(1,n||0))}function zw(n,e,t){return 255*(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)}function HH(n,e,t,i,r){var s=n*n,o=s*n;return((1-3*n+3*s-o)*e+(4-6*s+3*o)*t+(1+3*n+3*s-3*o)*i+o*r)/6}Nw(v0,x0,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:LH,formatHex:LH,formatHex8:function gCe(){return this.rgb().formatHex8()},formatHsl:function _Ce(){return BH(this).formatHsl()},formatRgb:PH,toString:PH}),Nw(Gs,q_,IH(v0,{brighter(n){return n=null==n?j_:Math.pow(j_,n),new Gs(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new Gs(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Gs(ch(this.r),ch(this.g),ch(this.b),Y_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:FH,formatHex:FH,formatHex8:function yCe(){return`#${uh(this.r)}${uh(this.g)}${uh(this.b)}${uh(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:NH,toString:NH})),Nw(Aa,function bCe(n,e,t,i){return 1===arguments.length?BH(n):new Aa(n,e,t,i??1)},IH(v0,{brighter(n){return n=null==n?j_:Math.pow(j_,n),new Aa(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new Aa(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+360*(this.h<0),e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new Gs(zw(n>=240?n-240:n+120,r,i),zw(n,r,i),zw(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new Aa(VH(this.h),X_(this.s),X_(this.l),Y_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Y_(this.opacity);return`${1===n?"hsl(":"hsla("}${VH(this.h)}, ${100*X_(this.s)}%, ${100*X_(this.l)}%${1===n?")":`, ${n})`}`}}));const UH=n=>()=>n;function WH(n,e){var t=e-n;return t?function GH(n,e){return function(t){return n+t*e}}(n,t):UH(isNaN(n)?e:n)}const jH=function n(e){var t=function MCe(n){return 1==(n=+n)?WH:function(e,t){return t-e?function CCe(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}(e,t,n):UH(isNaN(e)?t:e)}}(e);function i(r,s){var o=t((r=q_(r)).r,(s=q_(s)).r),a=t(r.g,s.g),l=t(r.b,s.b),c=WH(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=n,i}(1);function $H(n){return function(e){var o,a,t=e.length,i=new Array(t),r=new Array(t),s=new Array(t);for(o=0;o<t;++o)a=q_(e[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=n(i),r=n(r),s=n(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}$H(function xCe(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),r=n[i],s=n[i+1];return HH((t-i/e)*e,i>0?n[i-1]:2*r-s,r,s,i<e-1?n[i+2]:2*s-r)}}),$H(function wCe(n){var e=n.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*e);return HH((t-i/e)*e,n[(i+e-1)%e],n[i%e],n[(i+1)%e],n[(i+2)%e])}});var Bw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vw=new RegExp(Bw.source,"g");function ECe(n,e){var i,r,s,t=Bw.lastIndex=Vw.lastIndex=0,o=-1,a=[],l=[];for(n+="",e+="";(i=Bw.exec(n))&&(r=Vw.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Eu(i,r)})),t=Vw.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?function TCe(n){return function(e){return n(e)+""}}(l[0].x):function SCe(n){return function(){return n}}(e):(e=l.length,function(c){for(var d,u=0;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function qH(n,e){var t;return("number"==typeof e?Eu:e instanceof x0?jH:(t=x0(e))?(e=t,jH):ECe)(n,e)}function DCe(n){return function(){this.removeAttribute(n)}}function ACe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function RCe(n,e,t){var i,s,r=t+"";return function(){var o=this.getAttribute(n);return o===r?null:o===i?s:s=e(i=o,t)}}function ICe(n,e,t){var i,s,r=t+"";return function(){var o=this.getAttributeNS(n.space,n.local);return o===r?null:o===i?s:s=e(i=o,t)}}function kCe(n,e,t){var i,r,s;return function(){var o,l,a=t(this);return null==a?void this.removeAttribute(n):(o=this.getAttribute(n))===(l=a+"")?null:o===i&&l===r?s:(r=l,s=e(i=o,a))}}function LCe(n,e,t){var i,r,s;return function(){var o,l,a=t(this);return null==a?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local))===(l=a+"")?null:o===i&&l===r?s:(r=l,s=e(i=o,a))}}function OCe(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function FCe(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function NCe(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&FCe(n,s)),t}return r._value=e,r}function zCe(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&OCe(n,s)),t}return r._value=e,r}function VCe(n,e){return function(){Pw(this,n).delay=+e.apply(this,arguments)}}function HCe(n,e){return e=+e,function(){Pw(this,n).delay=e}}function GCe(n,e){return function(){dl(this,n).duration=+e.apply(this,arguments)}}function WCe(n,e){return e=+e,function(){dl(this,n).duration=e}}function $Ce(n,e){if("function"!=typeof e)throw new Error;return function(){dl(this,n).ease=e}}function JCe(n,e,t){var i,r,s=function QCe(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(e)?Pw:dl;return function(){var o=s(this,n),a=o.on;a!==i&&(r=(i=a).copy()).on(e,t),o.on=r}}var sMe=f0.prototype.constructor;function YH(n){return function(){this.style.removeProperty(n)}}function hMe(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function fMe(n,e,t){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&hMe(n,o,t)),i}return s._value=e,s}function vMe(n){return function(e){this.textContent=n.call(this,e)}}function yMe(n){var e,t;function i(){var r=n.apply(this,arguments);return r!==t&&(e=(t=r)&&vMe(r)),e}return i._value=n,i}var CMe=0;function fc(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function XH(){return++CMe}var pc=f0.prototype;fc.prototype=function MMe(n){return f0().transition(n)}.prototype={constructor:fc,select:function iMe(n){var e=this._name,t=this._id;"function"!=typeof n&&(n=Ew(n));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var u,d,a=i[o],l=a.length,c=s[o]=new Array(l),h=0;h<l;++h)(u=a[h])&&(d=n.call(u,u.__data__,h,a))&&("__data__"in u&&(d.__data__=u.__data__),c[h]=d,U_(c[h],e,t,h,c,Da(u,t)));return new fc(s,this._parents,e,t)},selectAll:function rMe(n){var e=this._name,t=this._id;"function"!=typeof n&&(n=iH(n));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var u,l=i[a],c=l.length,d=0;d<c;++d)if(u=l[d]){for(var f,h=n.call(u,u.__data__,d,l),p=Da(u,t),m=0,g=h.length;m<g;++m)(f=h[m])&&U_(f,e,t,m,h,p);s.push(h),o.push(u)}return new fc(s,o,e,t)},selectChild:pc.selectChild,selectChildren:pc.selectChildren,filter:function ZCe(n){"function"!=typeof n&&(n=rH(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var l,s=e[r],o=s.length,a=i[r]=[],c=0;c<o;++c)(l=s[c])&&n.call(l,l.__data__,c,s)&&a.push(l);return new fc(i,this._parents,this._name,this._id)},merge:function KCe(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,s=Math.min(i,t.length),o=new Array(i),a=0;a<s;++a)for(var h,l=e[a],c=t[a],u=l.length,d=o[a]=new Array(u),f=0;f<u;++f)(h=l[f]||c[f])&&(d[f]=h);for(;a<i;++a)o[a]=e[a];return new fc(o,this._parents,this._name,this._id)},selection:function oMe(){return new sMe(this._groups,this._parents)},transition:function xMe(){for(var n=this._name,e=this._id,t=XH(),i=this._groups,r=i.length,s=0;s<r;++s)for(var l,o=i[s],a=o.length,c=0;c<a;++c)if(l=o[c]){var u=Da(l,e);U_(l,n,t,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new fc(i,this._parents,n,t)},call:pc.call,nodes:pc.nodes,node:pc.node,size:pc.size,empty:pc.empty,each:pc.each,on:function eMe(n,e){var t=this._id;return arguments.length<2?Da(this.node(),t).on.on(n):this.each(JCe(t,n,e))},attr:function PCe(n,e){var t=P_(n),i="transform"===t?sCe:qH;return this.attrTween(n,"function"==typeof e?(t.local?LCe:kCe)(t,i,Fw(this,"attr."+n,e)):null==e?(t.local?ACe:DCe)(t):(t.local?ICe:RCe)(t,i,e))},attrTween:function BCe(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;var i=P_(n);return this.tween(t,(i.local?NCe:zCe)(i,e))},style:function dMe(n,e,t){var i="transform"==(n+="")?rCe:qH;return null==e?this.styleTween(n,function aMe(n,e){var t,i,r;return function(){var s=Hf(this,n),o=(this.style.removeProperty(n),Hf(this,n));return s===o?null:s===t&&o===i?r:r=e(t=s,i=o)}}(n,i)).on("end.style."+n,YH(n)):"function"==typeof e?this.styleTween(n,function cMe(n,e,t){var i,r,s;return function(){var o=Hf(this,n),a=t(this),l=a+"";return null==a&&(this.style.removeProperty(n),l=a=Hf(this,n)),o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a))}}(n,i,Fw(this,"style."+n,e))).each(function uMe(n,e){var t,i,r,a,s="style."+e,o="end."+s;return function(){var l=dl(this,n),c=l.on,u=null==l.value[s]?a||(a=YH(e)):void 0;(c!==t||r!==u)&&(i=(t=c).copy()).on(o,r=u),l.on=i}}(this._id,n)):this.styleTween(n,function lMe(n,e,t){var i,s,r=t+"";return function(){var o=Hf(this,n);return o===r?null:o===i?s:s=e(i=o,t)}}(n,i,e),t).on("end.style."+n,null)},styleTween:function pMe(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,fMe(n,e,t??""))},text:function _Me(n){return this.tween("text","function"==typeof n?function gMe(n){return function(){var e=n(this);this.textContent=e??""}}(Fw(this,"text",n)):function mMe(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function bMe(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;return this.tween(e,yMe(n))},remove:function nMe(){return this.on("end.remove",function tMe(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}(this._id))},tween:function lCe(n,e){var t=this._id;if(n+="",arguments.length<2){for(var o,i=Da(this.node(),t).tween,r=0,s=i.length;r<s;++r)if((o=i[r]).name===n)return o.value;return null}return this.each((null==e?oCe:aCe)(t,n,e))},delay:function UCe(n){var e=this._id;return arguments.length?this.each(("function"==typeof n?VCe:HCe)(e,n)):Da(this.node(),e).delay},duration:function jCe(n){var e=this._id;return arguments.length?this.each(("function"==typeof n?GCe:WCe)(e,n)):Da(this.node(),e).duration},ease:function qCe(n){var e=this._id;return arguments.length?this.each($Ce(e,n)):Da(this.node(),e).ease},easeVarying:function XCe(n){if("function"!=typeof n)throw new Error;return this.each(function YCe(n,e){return function(){var t=e.apply(this,arguments);if("function"!=typeof t)throw new Error;dl(this,n).ease=t}}(this._id,n))},end:function wMe(){var n,e,t=this,i=t._id,r=t.size();return new Promise(function(s,o){var a={value:o},l={value:function(){0==--r&&s()}};t.each(function(){var c=dl(this,i),u=c.on;u!==n&&((e=(n=u).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),0===r&&s()})},[Symbol.iterator]:pc[Symbol.iterator]};var TMe={time:null,delay:0,duration:250,ease:function SMe(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}};function EMe(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}f0.prototype.interrupt=function tCe(n){return this.each(function(){G_(this,n)})},f0.prototype.transition=function DMe(n){var e,t;n instanceof fc?(e=n._id,n=n._name):(e=XH(),(t=TMe).time=Rw(),n=null==n?null:n+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var l,o=i[s],a=o.length,c=0;c<a;++c)(l=o[c])&&U_(l,n,e,c,o,t||EMe(l,e));return new fc(i,this._parents,n,e)};Math;function w0(n){return{type:n}}function tU(n){for(var i,e=-1,t=n.length,r=n[t-1],s=0;++e<t;)s+=(i=r)[1]*(r=n[e])[0]-i[0]*r[1];return s/2}function An(n){return"string"==typeof n?new bo([[document.querySelector(n)]],[document.documentElement]):new bo([[n]],mH)}["w","e"].map(w0),["n","s"].map(w0),["n","w","e","s","nw","ne","sw","se"].map(w0);const jw={capture:!0,passive:!1};function $w(n){n.preventDefault(),n.stopImmediatePropagation()}function FMe(n){var e=n.document.documentElement,t=An(n).on("dragstart.drag",$w,jw);"onselectstart"in e?t.on("selectstart.drag",$w,jw):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function NMe(n,e){var t=n.document.documentElement,i=An(n).on("dragstart.drag",null);e&&(i.on("click.drag",$w,jw),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function nU(n){return((n=Math.exp(n))+1/n)/2}const HMe=function n(e,t,i){function r(s,o){var g,_,a=s[0],l=s[1],c=s[2],h=o[2],f=o[0]-a,p=o[1]-l,m=f*f+p*p;if(m<1e-12)_=Math.log(h/c)/e,g=function(R){return[a+R*f,l+R*p,c*Math.exp(e*R*_)]};else{var v=Math.sqrt(m),y=(h*h-c*c+i*m)/(2*c*t*v),b=(h*h-c*c-i*m)/(2*h*t*v),x=Math.log(Math.sqrt(y*y+1)-y),M=Math.log(Math.sqrt(b*b+1)-b);_=(M-x)/e,g=function(R){var w=R*_,E=nU(x),P=c/(t*v)*(E*function VMe(n){return((n=Math.exp(2*n))-1)/(n+1)}(e*w+x)-function BMe(n){return((n=Math.exp(n))-1/n)/2}(x));return[a+P*f,l+P*p,c*E/nU(e*w+x)]}}return g.duration=1e3*_*e/Math.SQRT2,g}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o;return n(o,a,a*a)},r}(Math.SQRT2,2,4);function dh(n,e){if(n=function UMe(n){let e;for(;e=n.sourceEvent;)n=e;return n}(n),void 0===e&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop]}}return[n.pageX,n.pageY]}const Q_=n=>()=>n;function GMe(n,{sourceEvent:e,target:t,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function fl(n,e,t){this.k=n,this.x=e,this.y=t}fl.prototype={constructor:fl,scale:function(n){return 1===n?this:new fl(this.k*n,this.x,this.y)},translate:function(n,e){return 0===n&0===e?this:new fl(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qw=new fl(1,0,0);function Yw(n){n.stopImmediatePropagation()}function C0(n){n.preventDefault(),n.stopImmediatePropagation()}function jMe(n){return!(n.ctrlKey&&"wheel"!==n.type||n.button)}function $Me(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n).hasAttribute("viewBox")?[[(n=n.viewBox.baseVal).x,n.y],[n.x+n.width,n.y+n.height]]:[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]:[[0,0],[n.clientWidth,n.clientHeight]]}function iU(){return this.__zoom||qw}function qMe(n){return-n.deltaY*(1===n.deltaMode?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function YMe(){return navigator.maxTouchPoints||"ontouchstart"in this}function XMe(n,e,t){var i=n.invertX(e[0][0])-t[0][0],r=n.invertX(e[1][0])-t[1][0],s=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}let J_={};class Ws{constructor(){this.classes=[],this.transform="",this.selector="",this.index=0,this.visible=!0,this.outOfDesign=!1,this.theoretic=!1,this.loaded=!1,this._lineThickness=1,this.tooltip=e=>`<b>${this.name?this.name:this.selector}</b>`}get lineThickness(){return this._lineThickness}set lineThickness(e){this._lineThickness=e}draw(e){return Ar(function*(){})()}redraw(e){}show(e){return(this.floor===e||this.floor===ie.all)&&!this.theoretic&&this.visible&&!this.outOfDesign}update(e,t,i,r=!0){var s=this;return Ar(function*(){s.onUpdate(e),void 0!==e.showTower?void 0===s.floor&&s.parent&&s.parent.floor&&(s.floor=s.parent.floor):s.floor=ie.all,s.meterPerPixel=i,r&&(yield s.draw(t)),s.show(t)&&(yield s.redraw(t))})()}createSelector(){if(!this.selector)if(this.parent&&(this.parent.selector?this.selector=this.parent.selector:(this.floor===ie.ground&&(this.selector="L0"),this.floor===ie.top&&(this.selector="L1"))),void 0!==this.name)this.selector+=`-${this.name.replace(/\s/g,"")}`;else{let e=this.constructor.name;"sensorType"in this&&(e=this.sensorType),e in J_||(J_[e]=0),J_[e]++,this.selector+=`-${e}-${J_[e]}`}}select(){document.querySelectorAll("svg .selected").forEach((e,t)=>{e.classList.remove("selected")}),this.svg.node().classList.add("selected")}setClass(e){!e.node()||!this.classes||this.classes.forEach(t=>{e.node().classList.add(t)})}}class Ci extends Ws{constructor(e){super(),this.name="",this.coords=[],Object.assign(this,e)}draw(e){var t=this;return Ar(function*(){void 0===t.svg&&(t.svg=An(`#${t.selector}`)),t.show(e)?(t.svg.attr("points",t.coords.join(" ")).attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("transform",t.transform),t.setClass(t.svg)):t.svg.attr("points","")})()}}class Ra extends Ws{constructor(e){super(),this.points=[],this.dash=[],Object.assign(this,e)}draw(e){var t=this;return Ar(function*(){void 0===t.svg&&(t.svg=An(`#${t.selector}`)),t.show(e)?(t.svg.attr("points",t.points.join(" ")).attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("transform",t.transform),t.svg.attr("stroke-dasharray",t.dash.map(i=>i*t.meterPerPixel*t.lineThickness).join(" ")),t.setClass(t.svg)):t.svg.attr("points","")})()}}class e6 extends Ws{constructor(e){super(),this.d="",Object.assign(this,e)}draw(e){var t=this;return Ar(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=An(`#${t.selector}`)}t.svg.attr("d",t.d).attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("transform",t.transform),t.setClass(t.svg)})()}setClass(e){!e.node()||0===this.classes.length||e.node().classList.add(this.classes)}}const gt=(n,e=4)=>Math.round(n*10**e)/10**e,pl=(n,e=4)=>gt(n.reduce((t,i)=>t+i,0),e),yi=(n,e,t=[0,0],i=4)=>{const r=n*Math.PI/180,s=e*Math.cos(r),o=e*Math.sin(r);return[gt(s+t[0],i),gt(o+t[1],i)]},Du=(n,e)=>180*Math.atan2(e[1]-n[1],e[0]-n[0])/Math.PI,rU=(n,e,t,i=0,r=0)=>{const s=f=>f*f,o=f=>Math.sqrt(f);var a=1+s(e),l=2*-i+e*(t-r)*2,c=s(i)+s(t-r)-s(n);s(l);const h=(o(s(l)-4*a*c),(-l-o(s(l)-4*a*c))/(2*a));return[h,e*h+t]},M0=(n,e)=>{const[[t,i],[r,s]]=n,[[o,a],[l,c]]=e;var u,h=(c-a)*(r-t)-(l-o)*(s-i);return 0==h?null:[t+(u=((l-o)*(i-a)-(c-a)*(t-o))/h)*(r-t),i+u*(s-i)]},sU=(n,e)=>{const t=[],i=n.length;for(let r=0;r<i-1;r++){const s=[n[r],n[r+1]];M0(s,e)&&t.push(M0(s,e))}return t},xo=(n,e,t=4)=>n&&e?gt(Math.hypot(e[0]-n[0],e[1]-n[1]),t):0,L=(n,e)=>[n[0]+e[0],n[1]+e[1]],Te=(n,e,t=!0)=>t?[n[0],e[1]]:[e[0],n[1]];function oU(n){return n*(Math.PI/180)}String.prototype.toTitleCase=function(){return this.replace(/\b\w/g,n=>n.toLocaleUpperCase())};class ir extends Ws{constructor(e){super(),this.textRotate=0,this.fontSize=14,this.a=[0,0],this.b=[4,4],this.offsetPixels=0,this.offsetMeters=0,this.direction=90,this._lineThickness=.6,this.decimals=1,this.classes=["measure"],Object.assign(this,e)}between(e,t){return[e[0]+(t[0]-e[0])/2,e[1]+(t[1]-e[1])/2]}draw(e){var t=this;return Ar(function*(){if(void 0===t.svg&&(t.svg=An(`#${t.selector}`),t.setClass(t.svg),t.svgLine=t.svg.append("polyline"),t.svgArrow1=t.svg.append("text"),t.svgArrow2=t.svg.append("text"),t.svgText=t.svg.append("text")),!t.show(e))return t.svgLine.attr("points",""),t.svgText.text(""),t.svgArrow1.text(""),void t.svgArrow2.text("");let i=[...t.a],r=[...t.b],s=[0,0];90===t.direction&&(i=[i[0],Math.max(i[1],r[1])],r=[r[0],Math.max(i[1],r[1])]),-90===t.direction&&(i=[i[0],Math.min(i[1],r[1])],r=[r[0],Math.min(i[1],r[1])]),0===t.direction&&(i=[Math.max(i[0],r[0]),i[1]],r=[Math.max(i[0],r[0]),r[1]]),180===t.direction&&(i=[Math.min(i[0],r[0]),i[1]],r=[Math.min(i[0],r[0]),r[1]]);const o=t.offsetPixels*t.meterPerPixel,a=yi(t.direction,o+t.offsetMeters,i),l=yi(t.direction,o+t.offsetMeters,r),u=t.between(a,l);var d=l[0]-a[0],h=l[1]-a[1],f=gt(Math.sqrt(d*d+h*h),t.decimals);t.svg.style("visibility",0===f?"hidden":""),t.svgLine.attr("points",[t.a,i,a,l,r,t.b].join(" ")),t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`\n        translate(${u[0]+s[0]} ${u[1]+s[1]}) \n        rotate(${t.textRotate})\n        `).text(f);let p=90;[90,0].includes(t.direction)&&(p=-90),t.svgArrow1.attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n        translate(${a[0]} ${a[1]}) \n        rotate(${t.direction+p})\n        `).text("<"),t.svgArrow2.attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n          translate(${l[0]} ${l[1]}) \n          rotate(${t.direction+p+180})\n          `).text("<")})()}redraw(e){this.svgArrow2&&(this.svgArrow2.attr("font-size",16*this.meterPerPixel),this.svgArrow1.attr("font-size",16*this.meterPerPixel)),this.svgText&&this.svgText.attr("font-size",this.meterPerPixel*this.fontSize).attr("stroke-width",6*this.meterPerPixel),this.svgLine&&this.svgLine.attr("stroke-width",this.meterPerPixel*this.lineThickness)}}var Rr=(()=>{return(n=Rr||(Rr={})).outer="outer",n.inner="inner",n.sketch="sketch",n.shadow="shadow",Rr;var n})(),js=(()=>{return(n=js||(js={})).roof70="roof70",n.roofCircle="roofCircle",n.roofCircleAnd70="roofCircleAnd70",js;var n})();class KMe{constructor(){this.innerWidth=-1,this.wallOuterThickness=-1,this.roofThickness=.5,this.ceilingHeight=3.3,this.floorAboveGround=.7,this.crawlerSpace=!0,this.floorThickness=.5,this.center=[],this.roofCirclePullDown=1,this.roofCircleExtra=-1,this.roofCircleWalls=1,this.roof70offset=.6,this.roof70Extension=1.2,this.roof70Walls=1.4,this.bendPoint=[-1,-1],this.bendPointInner=[-1,-1],this.roofTop=-1,this.crawlerHeight=-1,this.groundFloorTop=-1,this.groundFloorBottom=-1,this.topFloorTop=-1,this.topFloorBottom=-1,this.groundElevation=-1,this.houseHeight=-1,this.outerWallHeight=-1,this.gableWallArea=-1,this.minimumHeight=1.5,this.minimumHeightWidth=-1,this.minimumHeightRoom=2.3,this.minimumHeightRoomWidth=-1,this.roofStyle=js.roof70,this.viewedRoofStyle=js.roof70,this.parts=[],this.create()}create(){this.createCircleRoof(),this.createBuilding(),this.create70Roof(),this.createHelpers(),this.parts.push(new Ci({selector:"clip-roof",name:"#clip-roof",onUpdate:function(e){this.coords=[[0,-e.roof70Walls],[0,-e.innerWidth],[e.innerWidth,-e.innerWidth],[e.innerWidth,-e.roof70Walls],[e.innerWidth-e.wallOuterThickness,-e.roof70Walls],[e.innerWidth-e.wallOuterThickness,0],[e.wallOuterThickness,0],[e.wallOuterThickness,-e.roof70Walls],,]}}))}calculate(e){this.house=e,this.innerWidth=this.house.outerBase,this.wallOuterThickness=this.house.wallOuterThickness,this.center=[this.house.outerBase/2,0],this.roofCircleExtra=gt(Math.cos(65*Math.PI/180)*this.roofCirclePullDown,3),this.bendPoint=[this.roof70offset,-this.getAngle(70,this.roof70offset)-this.roof70Walls],this.bendPointInner=[this.roof70offset,-this.getAngle(70,this.roof70offset)],this.topFloorTop=0,this.topFloorBottom=this.topFloorTop+-this.floorThickness,this.groundFloorTop=this.topFloorBottom-this.ceilingHeight,this.groundFloorBottom=this.groundFloorTop-this.floorThickness,this.groundElevation=this.groundFloorTop-(this.crawlerSpace?this.floorAboveGround:0),this.crawlerHeight=this.crawlerSpace?.9:0,this.roofTop=this.topFloorTop+(this.roof70Walls+2),this.houseHeight=gt(this.roofTop-this.groundElevation),this.roofInnerContourLine(),this.gableWallArea=10,this.outerWallHeight=Math.abs(this.groundElevation),this.minimumHeightWidth=gt(this.getIntersectionWithRoof(this.minimumHeight)[0]),this.minimumHeightRoomWidth=gt(this.getIntersectionWithRoof(this.minimumHeightRoom)[0])}createBuilding(){this.parts.push(new Ci({selector:"building-ground-fill",onUpdate:function(e){this.coords=[[-2,-e.groundElevation],[e.innerWidth+2,-e.groundElevation],[e.innerWidth+2,2-e.groundElevation],[-2,2-e.groundElevation]]}})),this.parts.push(new Ci({selector:"building-ground",onUpdate:function(e){this.coords=[[-2,-e.groundElevation],[e.innerWidth+2,-e.groundElevation],[e.innerWidth+2,2-e.groundElevation],[-2,2-e.groundElevation]]}})),this.parts.push(new Ra({selector:"building-ground-line",onUpdate:function(e){this.points=[[-2,-e.groundElevation],[e.innerWidth+2,-e.groundElevation]]}})),this.parts.push(new Ci({selector:"building-crawler",onUpdate:function(e){const[t,i]=[e.innerWidth-2*e.wallOuterThickness,e.crawlerHeight],r=[e.wallOuterThickness,-e.groundFloorBottom];this.coords=[[r[0],r[1]],[r[0]+t,r[1]],[r[0]+t,r[1]+i],[r[0],r[1]+i]]}})),this.parts.push(new Ci({selector:"building-walls",onUpdate:function(e){const[t,i]=[e.innerWidth,-(e.groundFloorBottom-e.crawlerHeight)],r=[0,-e.topFloorTop];this.coords=[[r[0],r[1]],[r[0]+t,r[1]],[r[0]+t,r[1]+i],[r[0],r[1]+i]]}})),this.parts.push(new Ci({selector:"building-room",onUpdate:function(e){this.coords=[[e.wallOuterThickness,-e.topFloorBottom],[e.innerWidth-e.wallOuterThickness,-e.topFloorBottom],[e.innerWidth-e.wallOuterThickness,-e.groundFloorTop],[e.wallOuterThickness,-e.groundFloorTop]]}})),this.parts.push(new Ci({selector:"building-fill",onUpdate:function(e){const t=e.viewedRoofStyle===js.roof70?e.roof70Walls:e.roofCircleWalls,[i,r]=[e.innerWidth,-(e.groundElevation-t)],s=[0,-t];this.coords=[[s[0],s[1]],[s[0]+i,s[1]],[s[0]+i,s[1]+r],[s[0],s[1]+r]]}})),this.parts.push(new Ci({selector:"building-roof-70-wall1",onUpdate:function(e){this.coords=[[0,-e.roof70Walls],[e.wallOuterThickness,-e.roof70Walls],[e.wallOuterThickness,0],[0,0]]}})),this.parts.push(new Ci({selector:"building-roof-70-wall2",onUpdate:function(e){this.coords=[[e.innerWidth,-e.roof70Walls],[e.innerWidth-e.wallOuterThickness,-e.roof70Walls],[e.innerWidth-e.wallOuterThickness,0],[e.innerWidth,0]]}})),this.parts.push(new Ci({selector:"building-roof-circle-wall1",onUpdate:function(e){this.coords=[[0,-e.roofCircleWalls],[e.wallOuterThickness,-e.roofCircleWalls],[e.wallOuterThickness,0],[0,0]]}})),this.parts.push(new Ci({selector:"building-roof-circle-wall2",onUpdate:function(e){this.coords=[[e.innerWidth,-e.roofCircleWalls],[e.innerWidth-e.wallOuterThickness,-e.roofCircleWalls],[e.innerWidth-e.wallOuterThickness,0],[e.innerWidth,0]]}}))}createHelpers(){this.parts.push(new ir({selector:"minimum",floor:ie.all,direction:0,textRotate:0,onUpdate:function(e){this.offsetPixels=-60;const t=e.getIntersectionWithRoof(e.minimumHeight);this.offsetMeters=-t[0],this.a=[t[0]+e.wallOuterThickness,0],this.b=[t[0]+e.wallOuterThickness,-t[1]]}})),this.parts.push(new ir({selector:"minimum-h",floor:ie.all,direction:-90,textRotate:0,onUpdate:function(e){this.offsetPixels=0;const t=e.getIntersectionWithRoof(e.minimumHeight);this.offsetMeters=1.5,this.a=[+e.wallOuterThickness,0],this.b=[t[0]+e.wallOuterThickness,-t[1]]}})),this.parts.push(new ir({selector:"minimum-room",floor:ie.all,direction:0,textRotate:0,onUpdate:function(e){this.offsetPixels=60;const t=e.getIntersectionWithRoof(e.minimumHeightRoom);this.offsetMeters=t[0];const i=e.innerWidth-t[0]-e.wallOuterThickness;this.a=[i,0],this.b=[i,-t[1]]}})),this.parts.push(new ir({selector:"minimum-room-h",floor:ie.all,direction:-90,textRotate:0,onUpdate:function(e){this.offsetPixels=0;const t=e.getIntersectionWithRoof(e.minimumHeightRoom);this.offsetMeters=1.5;const i=e.innerWidth-t[0]-e.wallOuterThickness;this.a=[i,-t[1]],this.b=[i+t[0],0]}}))}getIntersectionWithRoof(e){const t=[];this.innerRoofContourLine.forEach((r,s,o)=>{if(s+1===o.length)return;const l=M0([r,o[s+1]],[[-100,e],[100,e]]);t.push(l)});let i=t.sort((r,s)=>s[0]-r[0])[0];return i[0]>=(this.innerWidth-this.wallOuterThickness)/2?this.innerRoofContourLine[3]:i}createCircleRoof(){this.parts.push(new Ci({selector:"roof-circle-fill",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),Rr.outer))].map(t=>[t[0],t[1]-e.roofCircleWalls])}})),this.parts.push(new Ci({selector:"roof-circle-shadow",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),Rr.outer)),...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),Rr.inner)).reverse()].map(t=>[t[0],t[1]-e.roofCircleWalls])}})),this.parts.push(new Ci({selector:"roof-circle",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),Rr.outer)),...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),Rr.inner)).reverse()].map(t=>[t[0],t[1]-e.roofCircleWalls])}})),this.parts.push(new e6({selector:"roof-circle__h-circle",lineThickness:2,onUpdate:function(e){const[t,i]=e.pointOnCircleRoof(0,Rr.outer),r=t-e.innerWidth,s=2*r+e.innerWidth;this.d=`M${s},0 a1,1 0 0,0 ${-s},0`,this.transform=`translate(${-r} ${i-e.roofCircleWalls})`}})),this.parts.push(new Ci({selector:"roof-circle__h-line",lineThickness:2,onUpdate:function(e){this.coords=[e.pointOnCircleRoof(Math.PI*(-3/4),Rr.sketch),[e.center[0],e.center[1]+e.roofCirclePullDown],e.pointOnCircleRoof(Math.PI,Rr.outer),e.pointOnCircleRoof(0,Rr.outer),[e.center[0],e.center[1]+e.roofCirclePullDown],e.pointOnCircleRoof(Math.PI*(-1/4),Rr.sketch)].map(function(t){return[t[0],t[1]-e.roofCircleWalls]})}}))}create70Roof(){this.parts.push(new Ci({selector:"roof-70-fill",onUpdate:function(e){this.coords=e.pointOfRoof().slice(0,7)}})),this.parts.push(new Ci({selector:"roof-70-shadow",onUpdate:function(e){this.coords=e.pointOfRoof(!0)}})),this.parts.push(new Ci({selector:"roof-70",onUpdate:function(e){this.coords=e.pointOfRoof()}}))}roofInnerContourLine(){const e=this.pointOfRoof(),t=this.viewedRoofStyle===js.roof70,i=[this.wallOuterThickness,this.topFloorTop-3],r=[this.wallOuterThickness,this.topFloorTop],s=t?-this.roof70Walls:-this.roofCircleWalls,o=t?e[13]:L(this.pointOnCircleRoof(-1*Math.PI,Rr.inner),[0,s]),a=t?e[11]:L(this.pointOnCircleRoof(Math.PI*(-3/4),Rr.inner),[0,s]),l=t?e[10]:L(this.pointOnCircleRoof(-.5*Math.PI,Rr.inner),[0,s]),c=M0([r,i],[o,a]);this.innerRoofContourLine=[r,c,a,l].map(u=>L(u,[-this.wallOuterThickness,0]).map(h=>Math.abs(gt(h))))}pointOfRoof(e=!1){const t=this.roofThickness/Math.sin(70*Math.PI/180),i=.5/Math.tan(70*Math.PI/180),r=Math.sqrt(i**2+t**2),s=this.roofThickness*Math.sin(30*Math.PI/180),o=this.innerWidth/2,a=this.roof70offset,l=this.getAngle(70,a)+this.roof70Walls,c=this.angle(-40,r),u=a-c[0],d=l+c[1],h=o-a,f=h-s,g=this.getAngle(30,h)+l,_=this.getAngle(30,f)+d;return[this.angle(110*Math.PI/180,this.roof70Extension,[0,-this.roof70Walls]),[0,-this.roof70Walls],[a,-l],[o,-g],[this.innerWidth-a,-l],[this.innerWidth,-this.roof70Walls],this.angle(70*Math.PI/180,this.roof70Extension,[this.innerWidth,-this.roof70Walls]),this.angle(70*Math.PI/180,this.roof70Extension,[this.innerWidth-t,-this.roof70Walls]),[this.innerWidth-t,-this.roof70Walls],[this.innerWidth-u,-d],[o,-_],[u,-d],[t,-this.roof70Walls],this.angle(110*Math.PI/180,this.roof70Extension,[t,-this.roof70Walls])]}getAngle(e,t){return t*Math.tan(e*Math.PI/180)}pointOnCircleRoof(e,t){let i;t===Rr.outer&&(i=this.innerWidth/2+this.roofCircleExtra),t===Rr.inner&&(i=this.innerWidth/2-this.roofThickness+this.roofCircleExtra),t===Rr.sketch&&(i=this.innerWidth/2+1.5*this.roofThickness+this.roofCircleExtra);const r=this.angle(e,i);return[r[0]+this.center[0],r[1]+this.center[1]+this.roofCirclePullDown]}angle(e,t,i=[0,0]){const r=t*Math.cos(e),s=t*Math.sin(e);return[r+i[0],s+i[1]]}}const uU=os("slideInOut",[ci(":enter",[St({transform:"translateY(100%)"}),Kn("600ms 0ms ease-out",St({transform:"translateY(0%)"}))]),ci(":leave",[Kn("300ms  ease-in",St({transform:"translateY(100%)"}))])]),QMe=os("fallInOut",[ci(":enter",[St({transform:"translateY(-100%)"}),Kn("600ms 0ms ease-out",St({transform:"translateY(0%)"}))]),ci(":leave",[Kn("300ms ease-in",St({transform:"translateY(-100%)"}))])]);class dU extends Ws{constructor(e){super(),this.coords=[],this.floor=ie.ground,this.theoretic=!1,this.tooltip=()=>(console.log(this.selector),`Footprint\n    <br>${this.floor}-level\n    <br>${this.area()}m2`),this.area=()=>Math.abs(gt(tU(this.coords),1)),Object.assign(this,e)}setup(){}draw(e){var t=this;return Ar(function*(){void 0===t.svg&&(t.svg=An(`#${t.selector}`),t.name||(t.name=t.selector),t.classes=[`floor-${t.floor}`],t.classes.push("bg-fill")),t.show(e)?(t.svg.attr("points",t.coords.join(" ")),t.setClass(t.svg)):t.svg.attr("points","")})()}}let S0={};var He=(()=>{return(n=He||(He={})).outer="outer",n.inner="inner",n.theoretic="theoretic",He;var n})(),Q=(()=>{return(n=Q||(Q={})).in="in",n.out="out",n.left="left",n.right="right",Q;var n})(),Ut=(()=>{return(n=Ut||(Ut={})).inside="inside",n.outside="outside",n.tower="tower",n.straight="straight",Ut;var n})();class it extends Ws{constructor(e){super(),this.origin=[0,0],this.orientation="",this.ceiling=-1,this.gable=!1,this.tooltip=()=>`Wall <b>${this.orientation}</b> (${this.parent instanceof dU?"outer wall":"of "+this.parent+" room"} ) \n    <br>Inside ${this.getLength(Q.in,2)} m2\n    <br>Outside ${this.outerWallLength=this.getLength(Q.out,2)} m2`,Object.assign(this,e)}createSelector(){this.selector=this.parent.selector.replace("Footprint-1","outer");const e=Du(this.sides[Q.in][0],this.sides[Q.in][1]);this.orientation=0===e?"North":45===e?"NortEast":-45===e||315===e?"NorthWest":90===e?"East":180===e?"South":270===e||-90===e?"West":`${e}`.split(".")[0],this.selector+=`-${this.orientation}Wall`,this.selector in S0||(S0[this.selector]=0),S0[this.selector]++,S0[this.selector]>1&&(this.selector+=`-${S0[this.selector]}`)}draw(e){var t=this;return Ar(function*(){if(void 0===t.svg&&(t.svg=An(`#${t.selector}`),t.svgOrigin=t.svg.select(".wall-origin"),t.svgLeft=t.svg.select(".wall-left"),t.svgRight=t.svg.select(".wall-right"),t.svgFill=t.svg.select(".wall-fill"),t.type===He.outer&&(t.thickness=t.parent.parent.wallOuterThickness),t.type===He.inner&&(t.thickness=t.parent.parent.wallInnerThickness),t.svg.node()&&t.svg.node().classList.add(`type-${t.type}`)),!t.show(e))return t.svgFill.attr("points",""),t.svgLeft.attr("points",""),t.svgRight.attr("points",""),void t.svgOrigin.attr("r","0");t.svgOrigin.attr("cx",t.origin[0]).attr("cy",t.origin[1]),t.sides.in&&t.sides.out&&t.svgFill.attr("points",[...t.sides.in,...[...t.sides.out].reverse()].join(" "));for(let i of Object.keys(Q)){const r=i;if(!(r in t.sides))return;let s;s=r===Q.in?t.svgLeft:t.svgRight,s.attr("points",t.sides[r].join(" ")),s.node()&&s.node().classList.add(`side-${r}`)}t.innerWallLength=t.getLength(Q.in),t.outerWallLength=t.getLength(Q.out)})()}redraw(e){this.svgOrigin&&this.svgOrigin.attr("r",this.meterPerPixel*this.lineThickness*3),this.svgLeft&&this.svgLeft.attr("stroke-width",this.meterPerPixel*this.lineThickness*(this.type===He.theoretic?4:1)),this.svgRight&&this.svgRight.attr("stroke-width",this.meterPerPixel*this.lineThickness*(this.type===He.theoretic?4:1))}getLength(e,t=2){const i=this.sides[e];return i&&i[0]&&i[1]?gt(xo(...i),t):0}getArea(e,t=2){const i=this.getLength(e);return 0===i?0:gt(i*this.ceiling,t)}getPosition(e,t,i=0){const r=this.sides[e],s=this.getLength(e)*t,o=Du(r[0],r[1]);return yi(o,s+i,r[0])}drawTheoretic(e,t,i){this.thickness=i,"n"===e&&this.drawByRoom(0,1,t,Ut.straight,Ut.straight),"e"===e&&this.drawByRoom(1,2,t,Ut.straight,Ut.straight),"s"===e&&this.drawByRoom(2,3,t,Ut.straight,Ut.straight),"w"===e&&this.drawByRoom(3,0,t,Ut.straight,Ut.straight)}drawByRoom(e,t,i,r,s){if(!1===this.visible)return void(this.sides={[Q.in]:[[0,0],[0,0]],[Q.out]:[[0,0],[0,0]]});this.type===He.inner?(this.thickness=i.wallInnerThickness,this.ceiling=i.cross.ceilingHeight):this.type===He.outer?(this.thickness=i.wallOuterThickness,this.ceiling=i.cross.outerWallHeight):this.type===He.theoretic?this.ceiling=i.cross.ceilingHeight:console.error(this);const o=(d,h,f)=>h===Ut.inside&&0===d?f+45:h===Ut.inside&&1===d||h===Ut.outside&&0===d?f-45:h===Ut.outside&&1===d?f+45:h===Ut.tower&&0===d?f+67.5:h===Ut.tower&&1===d?f-67.5:h===Ut.straight?f:void 0,a=d=>{const h=Math.sqrt(this.thickness**2*2),f=i.tower;return d===Ut.inside||d===Ut.outside?h:d===Ut.tower?xo(f.innerCoords[0],f.outerCoords[7]):d===Ut.straight?this.thickness:void 0};let l=this.parent.coords[e],c=this.parent.coords[t];this.origin=l,this.innerWallLength=xo(l,c);let u=Du(l,c)-90;this.sides={[Q.in]:[l,c]},this.type!==He.theoretic&&(this.sides[Q.out]=[yi(o(0,r,u),a(r),l),yi(o(1,s,u),a(s),c)])}}class de extends Ws{constructor(e){super(),this.points=[],this.offset=[0,0],this.offsetWall=.3,this.elevation=.3,this.verticalCableLength=0,this.cableOnly=!1,this.sensorOnly=!1,this.wallSide=Q.in,this.cableLength=0,this.amount=1,this.fontSize=14,this.visible=!1,this.showBadge=!1,this.getSensorType=t=>Object.values(X).find(r=>t.includes(r)),this.tooltip=()=>{let t=`<b>${this.sensorType.toTitleCase()} `;return this.cableLength>0&&(t+=`<br>Cable length ${gt(this.cableLength,1)}m2`),this.group&&(t+=`<br>Group ${this.group}`),t},Object.assign(this,e)}draw(e){var t=this;return Ar(function*(){if(void 0===t.svg){if(!t.show(e))return;(void 0===t.floor||e in t.parent)&&(t.floor=t.parent.floor),t.svg=An(`#${t.selector}.sensor-cable`),t.sensorType===X.temperature&&(t.sensorOnly=!0),t.cableOnly?(t.lineThickness=2,t.classes.push("sensor-room-cable")):(t.svgG=An(`#${t.selector}.sensor-g`),t.showBadge=t.amount>=2&&void 0!==t.svgG,t.svgIcon=An(`#${t.selector}.sensor-icon`),t.showBadge&&(t.svgBadge=t.svgG.append("g"),t.svgBadgeCircle=t.svgBadge.append("circle"),t.svgBadgeText=t.svgBadge.append("text"))),t.group&&t.classes.push(`el-group-${t.group}`),t.cableType&&t.classes.push(`cable-${t.cableType}`),t.classes.push(`sensor-${t.sensorType}`)}if(!t.show(e))return t.svgIcon&&t.svgIcon.attr("xlink:href",""),t.svg&&t.svg.attr("points",""),t.svgBadgeCircle&&t.svgBadgeCircle.attr("r",0),t.svgBadgeText&&t.svgBadgeText.attr("font-size",0),void(t.showBadge=!1);t.svgIcon&&t.svgIcon.attr("xlink:href",`#icon-${t.getSensorType(t.selector)}`);const i=t.calcOffsetWall();t.cableOnly||(t.svgIcon.attr("x",`${i[0]}px`).attr("y",`${i[1]}px`),t.setClass(t.svgG),t.setClass(t.svg)),t.showBadge?t.badge(i):(t.svgBadgeCircle&&t.svgBadgeCircle.attr("r",0),t.svgBadgeText&&t.svgBadgeText.text("")),t.sensorOnly||(t.svg.attr("points",t.cablePoints(i,e).join(" ")).attr("transform",t.transform),t.setClass(t.svg),t.cableLength=t.getLength())})()}redraw(e){!this.show(e)||(this.svgBadge&&(this.svgBadge.attr("stroke-width",this.meterPerPixel*this.lineThickness*1).attr("transform",`translate(${10*this.meterPerPixel} ${-10*this.meterPerPixel})`),this.svgBadgeCircle.attr("r",8*this.meterPerPixel),this.svgBadgeText.attr("font-size",this.meterPerPixel*this.fontSize).text(`${this.amount}`)),this.svg&&(this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness*1),this.cableType===wa.OutsidePOE&&this.svg.attr("stroke-dasharray",`${this.meterPerPixel*this.lineThickness*10*.5} ${this.meterPerPixel*this.lineThickness*10}`)))}cablePoints(e,t){return this.show(t)?[e,...this.points]:[]}getLength(){let t=0;return this.points.forEach((i,r,s)=>{r+1!==this.points.length&&(t+=((i,r)=>Math.hypot(r[0]-i[0],r[1]-i[1]))(i,s[r+1]))}),gt(t+this.verticalCableLength+.3*this.amount)}badge(e){this.svgBadge.attr("class","sensor-badge"),this.svgBadgeCircle.attr("fill",2===this.amount?"white":"#333").attr("cx",e[0]).attr("cy",e[1]).attr("stroke","black"),this.svgBadgeText.attr("fill",2===this.amount?"black":"white").attr("x",e[0]).attr("y",e[1]).attr("text-anchor","middle").attr("class","sensor-badge-text").attr("stroke","none").attr("dominant-baseline","middle").text(`${this.amount}`)}calcOffsetWall(){if(this.parent instanceof it){const t=this.parent.sides[this.wallSide],i=Du(t[0],t[1]);return yi(i+90,this.offsetWall,this.points[0])}return[this.points[0][0]+this.offset[0],this.points[0][1]+this.offset[1]]}select(){document.querySelectorAll("svg .selected").forEach((e,t)=>{e.classList.remove("selected")}),[X.socket,X.perilex].includes(this.sensorType)?document.querySelectorAll(`.el-group-${this.group}`).forEach((e,t)=>{e.classList.add("selected")}):(this.svg.node().classList.add("selected"),this.svgIcon.node().classList.add("selected"))}}let JMe=(()=>{class n{constructor(){this.class="base",this.html="dummy"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=dt({type:n,selectors:[["tooltip"]],hostAttrs:[1,"popup"],hostVars:2,hostBindings:function(t,i){2&t&&function MR(n){va(co,tl,n,!0)}(i.class)},decls:2,vars:1,consts:[[3,"innerHtml"],[1,"popup-arrow","popup-arrow-mid"]],template:function(t,i){1&t&&ne(0,"div",0)(1,"div",1),2&t&&Z("innerHtml",i.html,xd)},styles:[".popup-arrow-mid{left:calc(50% - 10px)!important;background:inherit}[_nghost-%COMP%]{position:relative!important}"]}),n})();class Wi extends Ws{constructor(e){super(),this.coords=[],this.floor=ie.ground,this.hole=!1,this.centralElectricity=[0,0],this.theoretic=!1,this.width=0,this.height=0,this.tooltip=()=>{console.log(this.selector);let t=`Room <b>${this.name}</b> \n    <br>${this.floor}-level\n    <br>${this.area()}m2`;return this.width&&(t+=`<br>width: ${this.width}m`),this.height&&(t+=`<br>height: ${this.height}m`),t},this.area=()=>0===this.coords.length||this.hole?0:Math.abs(gt(tU(this.coords),1)),this.volume=()=>this.floor===ie.top||this.hole||this.floor===ie.ground||this.hole?this.area()*this.parent.cross.ceilingHeight:void 0,this.squaredRoom=(t,i)=>{this.width=gt(t),this.height=gt(i),this.coords=[this.northWestCorner,L(this.northWestCorner,[t,0]),L(this.northWestCorner,[t,i]),L(this.northWestCorner,[0,i])],this.center=L(this.northWestCorner,[t/2,i/2]),this.centralElectricity=this.center},Object.assign(this,e)}setup(){}draw(e){var t=this;return Ar(function*(){void 0===t.svg&&(t.svg=An(`#${t.selector}`),t.name||(t.name=t.selector),t.classes=[`floor-${t.floor}`],t.hole&&(t.classes.push("room-hole"),t.svg.attr("filter","url(#inset-shadow)")),t.classes.push("bg-fill")),t.show(e)?(t.svg.attr("points",t.coords.join(" ")),t.setClass(t.svg)):t.svg.attr("points","")})()}}class eSe extends Ws{constructor(e){super(),this.last=!1,this.visible=!0,this.fontSize=14,Object.assign(this,e)}draw(e){var t=this;return Ar(function*(){void 0===t.svg&&(t.svg=An(`#${t.selector}`),t.svgRun=t.svg.select(".step-run"),t.svgRise=t.svg.select(".step-rise"),t.svgText=t.svg.select(".step-text"),t.last&&t.classes.push("last")),t.show(e)?(t.svg.style("display",""),t.svg.attr("transform",`translate(${t.index*t.parent.run}, ${-t.index*t.parent.rise})`),t.setClass(t.svg),t.svgRun.attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("points",[[0,0],[0,t.parent.runThickness],[t.last?t.parent.nose:t.parent.run+t.parent.riseThickness+t.parent.nose,t.parent.runThickness],[t.last?t.parent.nose:t.parent.run+t.parent.riseThickness+t.parent.nose,0]].join(" ")),t.svgRise.attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("points",[[t.parent.nose,t.parent.runThickness],[t.parent.nose,t.parent.rise],[t.parent.nose+t.parent.riseThickness,t.parent.rise],[t.parent.nose+t.parent.riseThickness,t.parent.runThickness]].join(" ")),t.svgText.attr("font-size",t.fontSize*t.meterPerPixel).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6*t.meterPerPixel).attr("transform",`\n        translate(${t.parent.run/2} ${16*-t.meterPerPixel}) \n        `).text(t.index)):t.svg.style("display","none")})()}}class hU extends Ws{constructor(e){super(),this.name="",this.cx=0,this.cy=0,this.r=1,this._lineThickness=.2,Object.assign(this,e)}draw(e){var t=this;return Ar(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=An(`#${t.selector}`)}t.svg.attr("cx",t.cx).attr("cy",t.cy).attr("r",t.r).attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("transform",t.transform),t.setClass(t.svg)})()}}class tSe extends Ws{constructor(e){super(),this.floor=ie.all,this.name="step",this.last=!1,this.visible=!0,this.fontSize=10,this.walkLineXY=[0,0],this.nextWalkLineXY=[0,0],this.stringerXY=[0,0],this.nextStingerXY=[0,0],Object.assign(this,e)}draw(e){var t=this;return Ar(function*(){if(void 0===t.svg&&(t.svg=An(`#${t.selector}`),t.svgText=t.svg.select(".step-plan-text"),t.svgRise=t.svg.select(".step-plan-rise"),t.svgStep=t.svg.select(".step-plan-lines"),t.last&&t.classes.push("last")),!t.show(e))return t.svgStep.attr("points",""),t.svgRise.attr("points",""),void t.svgText.text("");const i=Du(t.walkLineXY,t.nextWalkLineXY),r=yi(i-45,.8*t.parent.run,t.walkLineXY),s=Du(t.stringerXY,t.walkLineXY),o=Du(t.nextStingerXY,t.nextWalkLineXY),a=yi(s,10,t.walkLineXY),l=yi(o,10,t.nextWalkLineXY),c=sU(t.stringers.out.coords,[t.stringerXY,a]).map(m=>({xy:m,d:xo(m,t.stringerXY)})).sort((m,g)=>m.d-g.d).map(m=>m.xy)[0],u=sU(t.stringers.out.coords,[t.nextStingerXY,l]).map(m=>({xy:m,d:xo(m,t.nextStingerXY)})).sort((m,g)=>m.d-g.d).map(m=>m.xy)[0],d=t.stringers.out.coords[1],h=t.stringers.out.coords[2];let f=null,p=null;d[1]!==c[1]&&d[1]===u[1]&&(p=t.stringers.in.coords[1],f=t.stringers.out.coords[1]),h[0]!==c[0]&&h[0]===u[0]&&(p=t.stringers.in.coords[2],f=t.stringers.out.coords[2]),t.svgStep.attr("points",[t.walkLineXY,t.stringerXY,p,t.nextStingerXY,t.nextWalkLineXY,u,f,c].join(" ")),t.svgRise.attr("points",[yi(s+90,t.parent.nose,c),yi(s+90,t.parent.nose,t.stringerXY)].join(" ")),t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`translate(${r[0]}, ${r[1]})`).text(t.index),t.setClass(t.svg)})()}redraw(e){this.svgText&&this.svgText.attr("font-size",this.meterPerPixel*this.fontSize),this.svgRise&&this.svgRise.attr("stroke-width",this.meterPerPixel*this.lineThickness*1),this.svgStep&&this.svgStep.attr("stroke-width",this.meterPerPixel*this.lineThickness*1)}}class nSe{constructor(){this.ceilingHeight=3.3,this.floorThickness=.5,this.groundFloorTop=-1,this.topFloorTop=-1,this.topFloorBottom=-1,this.groundElevation=-1,this.totalRise=-1,this.totalRun=6,this.run=.3,this.runThickness=.02,this.rise=.2,this.riseThickness=.02,this.nose=.02,this.steps=20,this.walkWidth=.8,this.stairOrigin=[0,0],this.stepsRight=12,this.leftFlightSteps=5,this.midFlightSteps=4,this.totalWidth=2.7,this.totalHeight=-1,this.lesserHeight=-1,this.intersections={},this.walkLineOffset=.3,this.parts=[],this.create()}create(){this.createBuilding(),this.createStep(),this.createMeasures(),this.createPlan()}calculate(e){this.house=e,this.groundFloorTop=0,this.topFloorTop=-this.house.cross.groundFloorTop,this.totalRise=this.topFloorTop-this.groundFloorTop,this.stairOrigin=[this.house.stramien.in.we.b,this.house.stramien.in.ns.b-5],this.angle=gt(Math.atan(this.totalRise/this.totalRun)*(180/Math.PI),1),this.run=gt(this.totalRun/this.steps),this.rise=gt(this.totalRise/this.steps),this.step=gt(2*this.run+this.run),this.maxSteps=Math.ceil(this.totalRise/.182),this.minSteps=Math.ceil(this.totalRise/.22);const[t,i]=[this.alongWalkLine(1)[1]-this.stairOrigin[1],this.alongWalkLine(this.steps)[1]-this.stairOrigin[1]];this.totalHeight=Math.max(t,i),this.lesserHeight=Math.min(t,i),this.calculateCorrectionArray();const r={coords:[L(this.stairOrigin,[0*this.totalWidth,t]),L(this.stairOrigin,[0*this.totalWidth,0]),L(this.stairOrigin,[1*this.totalWidth,0]),L(this.stairOrigin,[1*this.totalWidth,i])]};this.stringers={in:{coords:[L(r.coords[0],[1*this.walkWidth,0*this.walkWidth]),L(r.coords[1],[1*this.walkWidth,1*this.walkWidth]),L(r.coords[2],[-1*this.walkWidth,1*this.walkWidth]),L(r.coords[3],[-1*this.walkWidth,0*this.walkWidth])]},out:r}}createBuilding(){this.parts.push(new Ci({selector:"floor-groundfloor",floor:ie.all,parent:this,onUpdate:function(e){this.coords=[[-e.run,e.groundFloorTop],[10,e.groundFloorTop],[10,e.groundFloorTop+e.floorThickness],[-e.run,e.groundFloorTop+e.floorThickness]]}})),this.parts.push(new Ci({selector:"floor-topfloor-shadow",floor:ie.all,parent:this,onUpdate:function(e){this.coords=[[e.totalRun,-e.topFloorTop],[-e.run,-e.topFloorTop],[-e.run,-(e.topFloorTop-e.floorThickness)],[e.totalRun,-(e.topFloorTop-e.floorThickness)]]}})),this.parts.push(new Ci({selector:"floor-topfloor",floor:ie.all,parent:this,onUpdate:function(e){this.coords=[[e.totalRun,-e.topFloorTop],[10,-e.topFloorTop],[10,-(e.topFloorTop-e.floorThickness)],[e.totalRun,-(e.topFloorTop-e.floorThickness)]]}})),this.parts.push(new e6({selector:"nose-line",floor:ie.all,parent:this,onUpdate:function(e){this.d=`M0 0 L${e.totalRun} ${-e.totalRise} `}})),this.parts.push(new e6({selector:"back-line",floor:ie.all,parent:this,onUpdate:function(e){const t=1*e.run+.2;this.d=`M${t} 0 L${yi(-e.angle,-e.run/Math.tan(e.angle*Math.PI/180),[e.totalRun+t,-e.totalRise])}`}}))}createStep(){for(let e=1;e<25;e++)this.parts.push(new eSe({selector:`step-${e}`,floor:ie.all,parent:this,index:e,onUpdate:function(t){this.outOfDesign=!(e<t.steps+1),this.last=e===t.steps}}))}createMeasures(){this.parts.push(new ir({selector:"run-size",floor:ie.all,direction:-90,decimals:3,onUpdate:function(e){this.offsetPixels=0,this.offsetMeters=1*e.rise,this.distance=0,this.a=[7*e.run,7*-e.rise],this.b=[8*e.run,8*-e.rise]}})),this.parts.push(new ir({selector:"rise-size",floor:ie.all,direction:180,offsetPixels:.5,decimals:3,onUpdate:function(e){this.offsetPixels=0,this.offsetMeters=1*e.run,this.distance=0,this.a=[7*e.run,7*-e.rise],this.b=[8*e.run,8*-e.rise]}})),this.parts.push(new ir({selector:"total-rise-size",floor:ie.all,direction:0,offsetPixels:0,onUpdate:function(e){const t=e.totalRun+2*e.run;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[t,0],this.b=[t,-e.totalRise]}})),this.parts.push(new ir({selector:"total-run-size",floor:ie.all,direction:90,onUpdate:function(e){this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[0,0],this.b=[e.totalRun,0]}})),this.parts.push(new ir({selector:"plateau-width",floor:ie.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0]+0,t],this.b=[e.stairOrigin[0]+e.walkWidth,t]}})),this.parts.push(new ir({selector:"mid-width",floor:ie.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0]+e.walkWidth,t],this.b=[e.stairOrigin[0]+e.totalWidth-e.walkWidth,t]}})),this.parts.push(new ir({selector:"total-width",floor:ie.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0],t],this.b=[e.stairOrigin[0]+e.totalWidth,t]}})),this.parts.push(new ir({selector:"total-height",floor:ie.all,direction:0,onUpdate:function(e){const t=e.stairOrigin[0]+e.totalWidth+.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.b=[t,e.stairOrigin[1]],this.a=[t,e.stairOrigin[1]+e.totalHeight]}})),this.parts.push(new ir({selector:"lesser-height",floor:ie.all,direction:0,onUpdate:function(e){const t=e.stairOrigin[0]+e.totalWidth+.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.b=[t,e.stairOrigin[1]],this.a=[t,e.stairOrigin[1]+e.lesserHeight]}}))}createPlan(){for(let e=1;e<this.steps+1;e++)this.parts.push(new tSe({selector:`step-plan-${e}`,floor:ie.all,parent:this,index:e,onUpdate:function(t){this.stringers=t.stringers,this.walkLineXY=t.alongWalkLine(e),this.nextWalkLineXY=t.alongWalkLine(e+1),this.stringerXY=t.alongStinger(e),this.nextStingerXY=t.alongStinger(e+1)}})),this.parts.push(new hU({selector:"walk-line-"+e,floor:ie.all,parent:this,onUpdate:function(t){this.r=.2*this.lineThickness,[this.cx,this.cy]=t.alongWalkLine(e)}})),this.parts.push(new hU({selector:"step-stinger-"+e,floor:ie.all,parent:this,onUpdate:function(t){this.r=.2*this.lineThickness,[this.cx,this.cy]=t.alongStinger(e)}}));this.parts.push(new Ci({selector:"clip-ground-floor-ref",floor:ie.ground,onUpdate:function(e){const[t,i]=e.stairOrigin,r=t+e.walkWidth,s=t+e.totalWidth-e.walkWidth,o=Math.max(e.alongWalkLine(1)[1],i+e.walkWidth);Math.max(e.alongWalkLine(e.steps)[1],i+e.walkWidth),this.coords=[[t,i],[s,i],[s,i+e.walkWidth],[r,i+e.walkWidth],[r,o],[t,o]]}})),this.parts.push(new Ci({selector:"outline",floor:ie.all,parent:this,onUpdate:function(e){this.coords=[e.stringers.out.coords[0],e.stringers.out.coords[1],e.stringers.out.coords[2],e.stringers.out.coords[3],e.stringers.in.coords[3],e.stringers.in.coords[2],e.stringers.in.coords[1],e.stringers.in.coords[0]]}})),this.parts.push(new e6({selector:"walk-line",floor:ie.all,parent:this,onUpdate:function(e){const t=e.walkWidth-e.walkLineOffset,i=e.alongWalkLine(e.steps),r=e.alongWalkLine(1);this.d=`\n        M${r[0]} ${r[1]}\n        L${r[0]} ${e.stairOrigin[1]+e.walkWidth}\n        a${e.walkLineOffset},${e.walkLineOffset} 0 0 1 ${e.walkLineOffset},${-e.walkLineOffset}\n        L${e.stairOrigin[0]+e.walkWidth} ${e.stairOrigin[1]+t}\n        L${e.stairOrigin[0]+e.totalWidth-e.walkWidth} ${e.stairOrigin[1]+t}\n        a${e.walkLineOffset},${e.walkLineOffset} 0 0 1 ${e.walkLineOffset},${e.walkLineOffset}\n        L${i[0]} ${i[1]}\n        `}}))}calculateCorrectionArray(){const e=this.walkLineOffset*Math.PI/2,t=(this.totalWidth-2*this.walkWidth)/2,i=(this.stepsRight+1)*this.run,s=this.totalRun-i-e-t,o=i-e-t;this.intersections={};const c=this.getEGMethod(s+e/2,this.alongWalkLine(1)[1]-(this.stairOrigin[1]+this.walkWidth),0,0*this.run,!1),u=this.getEGMethod(t+e/2,this.totalWidth/2-this.walkWidth,c+0,0,!0),d=this.getEGMethod(t+e/2,this.totalWidth/2-this.walkWidth,c+0+u,this.run,!1);this.getEGMethod(o+e/2,this.alongWalkLine(this.steps)[1]-(this.stairOrigin[1]+this.walkWidth),c+0+u+d,0*this.run,!0)}getEGMethod(e,t,i,r,s=!1){let o,a,l,c,u;const d=e-r,h=Math.ceil(d/this.run),f=t-r;s?(o=[0,0],a=[0,d],l=[-f,0],c=rU(f,-a[1]/f,a[1]),c=[-c[0],c[1]]):(o=[0,0],a=[0,d],l=[f,0],c=rU(f,-a[1]/f,a[1]));const p=[];for(let m=0;m<h+1;m++)u=s?[0,Math.min(this.run*(h-m),d)]:[0,Math.min(this.run*m,d)],p.push(M0([o,c],[u,l]));for(let m=0;m<h+1;m++)if(0!==m)try{let g;g=s?p[m+1]:p[m-1],this.intersections[i+m]=this.run-xo(g,p[m])}catch{}return h}alongStinger(e){let t=gt((e-1)*this.run);const i=this.walkLineOffset*Math.PI/2,r=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsRight+1)*this.run,l=this.alongWalkLine(e),c=this.alongWalkLine(e+1),d=(Du(l,c),isNaN(this.intersections[e])?0:this.intersections[e]);return t<o-r-i/2?[this.stairOrigin[0]+this.walkWidth,l[1]+d]:t===o?[l[0],l[1]+d]:t<o?[l[0]+d,this.stairOrigin[1]+this.walkWidth]:t-o<r+i/2?[l[0]-d,this.stairOrigin[1]+this.walkWidth]:t===this.totalRun?[l[0]-d,l[1]]:[this.stairOrigin[0]+this.totalWidth-this.walkWidth,l[1]+d]}alongWalkLine(e){let t=(e-1)*this.run;const i=this.walkLineOffset*Math.PI/2,r=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsRight+1)*this.run,a=o-i-r;if(t<a){const[l,c]=[this.stairOrigin[0]+this.walkWidth-this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[l,c+a-t]}if(t<a+i)return t-=a,yi(180+t/i*90,this.walkLineOffset,[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth]);if(t<o){t-=a+i;const[l,c]=[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[l+t,c]}if(t<o+r){t-=o;const[l,c]=[this.stairOrigin[0]+this.totalWidth/2,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[l+t,c]}if(t<o+r+i)return t-=o+r,yi(t/i*90-90,this.walkLineOffset,[this.stairOrigin[0]+this.totalWidth-this.walkWidth,this.stairOrigin[1]+this.walkWidth]);{t-=o+r+i;const[l,c]=[this.stairOrigin[0]+this.totalWidth-this.walkWidth+this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[l,c+t]}}}class iSe extends Ws{constructor(e){super(),this.origin=[0,0],this.scale=[1,1],this.rotate=0,Object.assign(this,e)}draw(e){var t=this;return Ar(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=An(`#${t.selector}`),t.svg1=t.svg.select(".house-wind-rose-1"),t.svg2=t.svg.select(".house-wind-rose-2"),t.svgText=t.svg.select(".house-wind-rose-text")}t.svg.style("transform",` \n      translate(${t.origin[0]}px, ${t.origin[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svg1.attr("points",[[0,0],[10,30],[0,20]].map(([r,s])=>[r*t.meterPerPixel,s*t.meterPerPixel]).join(" ")).attr("stroke-width",1),t.svg2.attr("points",[[0,0],[-10,30],[0,20]].map(([r,s])=>[r*t.meterPerPixel,s*t.meterPerPixel]).join(" ")).attr("stroke-width",1),t.svgText.attr("font-size",12).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6).attr("transform",`\n          translate(0 ${-8*t.meterPerPixel}) \n          rotate(${t.rotate})\n          `).text("North")})()}}class sSe extends class rSe{}{constructor(e){super(),this.outerBase=void 0,this.extensionToNorth=void 0,this.extensionToSouth=void 0,this.extensionToWest=void 0,this.extensionToEast=void 0,this.houseWidth=void 0,this.houseLength=void 0,this.gridSizeY=void 0,this.gridSizeX=void 0,this.balconyWidth=void 0,this.balconyEdge=.3,this.serverRoom=[void 0,void 0],this.cross=new KMe,this.stair=new nSe,this.stats={wall:{},floor:{}},this.tower={show:void 0,innerCoords:void 0,outerCoords:void 0,outerWallOffset:void 0,width:void 0,houseIncrement:void 0,innerIncrement:void 0,outerIncrement:void 0,innerWallLength:void 0,outerWallLength:void 0,intersectionEast:void 0,intersectionWest:void 0,wallOuterThickness:void 0,footprintVisible:!1},Object.assign(this,e),window.house=this,this.calculateHouse(),this.linkParts(),this.calculateStats(),this.createStramien(),this.createGrid(),this.createMeasures(),this.createExtra()}createExtra(){const e=new Ra({selector:"view-lines",floor:ie.ground,lineThickness:3,onUpdate:function(i){const r=i.stramien.in,s=3*i.studDistance,o=r.we.b+1,a=r.ns.b+(r.ns.c-r.ns.b)/2;this.points=[[o,i.stair.stairOrigin[1]],[o,r.ns.d+s],[o,a],[r.we.a-s,a],[r.we.d+s,a]]}});this.parts.push(e);const t=new Ci({selector:"tower-walls",floor:ie.all,onUpdate:function(i){this.visible=i.tower.footprintVisible,this.coords=[...i.tower.innerCoords,i.tower.innerCoords[0],...[...i.tower.outerCoords].reverse(),i.tower.outerCoords[7]]}});this.parts.push(t),this.parts.push(new Ra({selector:"roof-line-1",floor:ie.top,lineThickness:1,dash:[10,10],onUpdate:function(i){const r=i.stramien.in,o=[r.we.b,r.ns.b],a=[r.we.b,r.ns.a];this.points=[L([r.we.a,r.ns.b],[0,i.cross.minimumHeightWidth]),L(o,[i.cross.minimumHeightWidth,i.cross.minimumHeightWidth]),L(a,[i.cross.minimumHeightWidth,0])]}})),this.parts.push(new Ra({selector:"roof-line-2",floor:ie.top,lineThickness:1,dash:[10,10],onUpdate:function(i){const r=i.stramien.in,o=i.tower.show?[r.we.c,r.ns.b-i.tower.houseIncrement-i.cross.minimumHeightWidth]:[r.we.c,r.ns.b];this.points=[L([r.we.c,r.ns.a],[-i.cross.minimumHeightWidth,0]),L(o,[-i.cross.minimumHeightWidth,i.cross.minimumHeightWidth])]}})),this.parts.push(new Ra({selector:"roof-line-3",floor:ie.top,lineThickness:1,dash:[10,10],onUpdate:function(i){const r=i.stramien.in,o=[r.we.d,r.ns.b];this.points=[L(i.tower.show?[r.we.c+i.tower.houseIncrement+i.cross.minimumHeightWidth,r.ns.b]:[r.we.c,r.ns.b],[-i.cross.minimumHeightWidth,i.cross.minimumHeightWidth]),L(o,[0,i.cross.minimumHeightWidth])]}})),this.parts.push(new Ra({selector:"roof-line-4",floor:ie.top,lineThickness:1,dash:[10,10],onUpdate:function(i){const r=i.stramien.in,o=[r.we.c,r.ns.c];this.points=[L([r.we.d,r.ns.c],[0,-i.cross.minimumHeightWidth]),L(o,[0,-i.cross.minimumHeightWidth])]}})),this.parts.push(new Ra({selector:"roof-line-5",floor:ie.top,lineThickness:1,dash:[10,10],onUpdate:function(i){const r=i.stramien.in,o=[r.we.a,r.ns.c];this.points=[L([r.we.b,r.ns.c],[0,-i.cross.minimumHeightWidth]),L(o,[0,-i.cross.minimumHeightWidth])]}}))}createMeasures(){this.parts.push(new ir({selector:"house-total-width",floor:ie.all,direction:90,textRotate:0,onUpdate:function(e){const t=e.houseLength+2*e.studDistance;this.offsetPixels=16,this.a=[e.stramien.out.we.a,t],this.b=[e.stramien.out.we.d,t]}}));for(let e=0;e<3;e++){const t=["a","b","c","d"];this.parts.push(new ir({selector:"house-width-"+(e+1),floor:ie.all,direction:90,textRotate:0,onUpdate:function(r){const s=r.houseLength+2*r.studDistance;this.offsetPixels=0,this.a=[r.stramien.out.we[t[e+0]],s],this.b=[r.stramien.out.we[t[e+1]],s]}}))}this.parts.push(new ir({selector:"house-height-1",floor:ie.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.a],this.a=[t,e.stramien.out.ns.b]}})),this.parts.push(new ir({selector:"house-height-inner",floor:ie.all,direction:180,textRotate:0,onUpdate:function(e){const t=1*-e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.in.ns.b],this.a=[t,e.stramien.in.ns.c]}})),this.parts.push(new ir({selector:"house-height-2",floor:ie.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.b],this.a=[t,e.stramien.out.ns.c]}})),this.parts.push(new ir({selector:"house-height-3",floor:ie.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.c],this.a=[t,e.stramien.out.ns.d]}})),this.parts.push(new ir({selector:"house-total-height",floor:ie.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=32,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.a],this.a=[t,e.stramien.out.ns.d]}}))}createStramien(){const e=3*this.studDistance;for(let t of["in","out"])for(let i of["we","ns"])for(let r of["a","b","c","d"]){const s=`house-stramien-${t}-${i}-${r}`;this.parts.push(new Ra("ns"===i?{floor:ie.all,selector:s,lineThickness:1.5,onUpdate:function(o){this.points=[[-e,o.stramien[t][i][r]],[o.houseWidth+e,o.stramien[t][i][r]]]}}:{floor:ie.all,selector:s,lineThickness:1.5,onUpdate:function(o){this.points=[[o.stramien[t][i][r],-e],[o.stramien[t][i][r],o.houseLength+e]]}}))}}createGrid(){const e=3*this.studDistance;this.gridSizeY=Math.round(this.houseWidth/this.studDistance+2+1);for(let i=0;i<55;i++){const r=[0,this.studAmountWest,this.studAmountWest+this.studAmount,this.studAmountWest+this.studAmount+this.studAmountEast].includes(i-1),o=new Ra({selector:`grid-index-${i}.grid-vertical`,lineThickness:r?.8:.6,index:i,floor:ie.all,onUpdate:function(a){const l=(i-1)*a.studDistance;this.points=this.index<a.gridSizeY?[[l,-e],[l,a.houseLength+e]]:[],this.classes=[r?"grid-main":(i-1)%5?"grid-sub":"grid-subsub"]}});o.createSelector(),this.parts.push(o)}this.gridSizeX=Math.round(this.houseLength/this.studDistance+2+1);for(let i=0;i<55;i++){const r=[0,this.studAmountNorth,this.studAmountNorth+this.studAmount,this.studAmountNorth+this.studAmount+this.studAmountSouth].includes(i-1);this.parts.push(new Ra({lineThickness:r?.8:.6,selector:`grid-index-${i}.grid-horizontal`,index:i,floor:ie.all,onUpdate:function(o){const a=(i-1)*o.studDistance;this.points=this.index<o.gridSizeX?[[-e,a],[o.houseWidth+e,a]]:[],this.classes=[r?"grid-main":(i-1)%5?"grid-sub":"grid-subsub"]}}))}this.parts[".house-wind-rose"]=new iSe({rotate:0,floor:ie.all,parent:this,onUpdate:function(i){this.origin=[2,0]}})}linkParts(){const e=(t,i)=>{void 0!==t&&(t.parent=i,t.onUpdate(this),t.createSelector(),t.parts&&t.parts.forEach(r=>e(r,t)),this.partsFlatten.push(t))};this.partsFlatten=[],this.parts.forEach(t=>e(t,this))}calculateTower(){this.tower.wallOuterThickness=this.wallOuterThickness,this.tower.outerWallOffset=gt(this.tower.wallOuterThickness*Math.tan(22.5*Math.PI/180)),this.tower.innerWallLength=this.towerWidth,this.tower.outerWallLength=2*this.tower.outerWallOffset+this.tower.innerWallLength,this.tower.show=this.showTower,this.tower.width=this.towerWidth,this.tower.houseIncrement=gt(this.tower.outerWallLength/Math.sqrt(2)+this.tower.outerWallLength)}calculateHouse(){this.outerBase=this.studAmount*this.studDistance,this.extensionToSouth=this.studAmountSouth*this.studDistance,this.extensionToNorth=this.studAmountNorth*this.studDistance,this.extensionToEast=this.studAmountEast*this.studDistance,this.extensionToWest=this.studAmountWest*this.studDistance,this.calculateTower(),this.tower.show?this.extensionToNorth=Math.max(this.extensionToNorth,Math.ceil(this.tower.houseIncrement)):this.tower.houseIncrement=0;const e={we:{a:this.wallOuterThickness,b:this.extensionToWest+1*this.wallOuterThickness,c:this.extensionToWest+1*this.outerBase+-1*this.wallOuterThickness,d:this.extensionToEast+this.outerBase+this.extensionToWest+-1*this.wallOuterThickness},ns:{a:this.wallOuterThickness,b:this.extensionToNorth+1*this.wallOuterThickness,c:this.extensionToNorth+this.outerBase+-1*this.wallOuterThickness,d:this.extensionToNorth+this.outerBase+this.extensionToSouth+-1*this.wallOuterThickness}};this.stramien={in:e,out:{we:{a:e.we.a-this.wallOuterThickness,b:e.we.b-this.wallOuterThickness,c:e.we.c+this.wallOuterThickness,d:e.we.d+this.wallOuterThickness},ns:{a:e.ns.a-this.wallOuterThickness,b:e.ns.b-this.wallOuterThickness,c:e.ns.c+this.wallOuterThickness,d:e.ns.d+this.wallOuterThickness}}},this.serverRoom=[this.stramien.in.we.c-1,this.stramien.in.ns.b-this.wallInnerThickness],this.houseWidth=gt(this.stramien.out.we.d-this.stramien.out.we.a),this.houseLength=gt(this.stramien.out.ns.d-this.stramien.out.ns.a),this.calculateTowerCoords(),this.cross.calculate(this),this.stair.calculate(this)}calculateStats(){this.getWallLength(),this.getWallArea(),this.getFloorArea()}getWallLength(){this.stats.wall.innerLength=Math.ceil(pl(Object.values(this.partsFlatten).filter(e=>e instanceof it).map(e=>e.type===He.outer?e.getLength(Q.in):e.type===He.inner?e.getLength(Q.out)+e.getLength(Q.in):0))),this.stats.wall.outerLength=Math.ceil(pl(Object.values(this.partsFlatten).filter(e=>e instanceof it).filter(e=>e.type===He.outer).map(e=>e.getLength(Q.out)),1))}getWallArea(){this.stats.wall.innerArea=Math.ceil(pl(Object.values(this.partsFlatten).filter(e=>e instanceof it).map(e=>{let t=0;return e.type===He.inner&&(t+=e.getArea(Q.out)),t+=e.getArea(Q.in),t}))),this.stats.wall.outerArea=Math.ceil(pl(Object.values(this.partsFlatten).filter(e=>e instanceof it).filter(e=>e.type===He.outer).map(e=>e.getArea(Q.out)),1))}getFloorArea(){let e={};Object.keys(ie).map(t=>{e[t]={area:0,volume:0}}),this.partsFlatten.filter(t=>t instanceof Wi).filter(t=>"innerFootprint"!==t.name).filter(t=>!t.hole).forEach(t=>{e[t.floor].area+=t.area(),e[t.floor].volume+=t.volume(),e[ie.all].area+=t.area(),e[ie.all].volume+=t.volume()}),Object.keys(ie).map(t=>{e[t]={area:gt(e[t].area,0),volume:gt(e[t].volume,0)}}),this.stats.floor=e}calculateTowerCoords(){!1===this.tower.show&&(this.tower.width=0,this.tower.outerWallOffset=0,this.tower.innerWallLength=0,this.tower.outerWallLength=0,this.tower.houseIncrement=0,this.tower.wallOuterThickness=0);let e=this.tower.wallOuterThickness/Math.cos(22.5*Math.PI/180);this.tower.innerIncrement=Math.sqrt(this.tower.innerWallLength**2/2),this.tower.outerIncrement=Math.sqrt(this.tower.outerWallLength**2/2);const t=[this.stramien.out.we.c+this.tower.outerWallOffset,this.stramien.out.ns.b-this.tower.innerIncrement-this.tower.innerWallLength-this.tower.outerWallOffset],i=t,r=L(t,[this.tower.width,0]),s=yi(45,this.tower.width,r),o=L(s,[0,this.tower.width]),a=yi(135,this.tower.width,o),l=L(a,[-this.tower.width,0]),c=yi(225,this.tower.width,l),u=L(c,[0,-this.tower.width]);this.tower.innerCoords=[i,r,s,o,a,l,c,u],this.tower.outerCoords=[yi(-112.5,e,i),yi(-67.5,e,r),yi(-22.5,e,s),yi(22.5,e,o),yi(67.5,e,a),yi(112.5,e,l),yi(157.5,e,c),yi(202.5,e,u)],this.tower.intersectionWest=L(this.tower.outerCoords[0],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),this.tower.intersectionEast=L(this.tower.outerCoords[3],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),!1===this.tower.show&&(this.tower.intersectionWest=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.intersectionEast=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.innerCoords=[...Array(8).keys()].map(d=>[this.stramien.in.we.c,this.stramien.in.ns.b]),this.tower.outerCoords=[...Array(8).keys()].map(d=>[this.stramien.out.we.c,this.stramien.out.ns.b]))}redrawHouse(e,t,i,r){const s=(o,a)=>{a.parts.forEach(function(){var l=Ar(function*(c){void 0!==c&&(yield c.update(o,e,i,r),void 0!==c.parts&&s(o,c))});return function(c){return l.apply(this,arguments)}}())};t===Ri.plan&&(s(this,this),s(this.stair,this.stair)),t===Ri.cross&&s(this.cross,this.cross),[Ri.stairCross,Ri.stairPlan].includes(t)&&s(this.stair,this.stair)}}class Jn extends Ws{constructor(e){super(),this.width=.8,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.outside=!1,Object.assign(this,e)}draw(e){var t=this;return Ar(function*(){if(void 0===t.svg&&(t.svg=An(`#${t.selector}`),t.svgOpening=t.svg.select(".door-wall-opening"),t.svgSwing=t.svg.select(".door-swing")),!t.show(e))return t.svgOpening.attr("points",""),void t.svgSwing.attr("d","");let i;i=1===t.scale[0]?[0,0]:[t.parent.thickness,0],t.svg.style("transform",` \n      translate(${t.origin[0]+i[0]}px, ${t.origin[1]+i[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svgOpening.attr("points",[[0,-t.width],[t.parent.thickness,-t.width],[t.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill"),t.svgSwing.attr("d",`M${t.parent.thickness},0 \n        L0,0  \n        L${-t.width},0  \n        A${t.width},${t.width} 0 0,1  \n        0,${-t.width}\n        L${t.parent.thickness},${-t.width}`)})()}redraw(e){this.svgOpening&&this.svgOpening.attr("stroke-width",this.meterPerPixel*this.lineThickness),this.svgSwing&&this.svgSwing.attr("stroke-width",1*this.meterPerPixel)}}var gc=(()=>{return(n=gc||(gc={})).windowWall="windowWall",n.standard="standard",n.hexagon="hexagon",gc;var n})();class Hr extends Ws{constructor(e){super(),this.floor=ie.ground,this.windowForm=gc.standard,this.width=2,this.height=2,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.frameThickness=.1,this.frameDepth=.1,this.innerDepthFrame=.1,this.openable=!0,Object.assign(this,e)}get outerDepthFrame(){return this.innerDepthFrame+this.frameDepth}draw(e){var t=this;return Ar(function*(){if(void 0===t.svg&&(t.svg=An(`#${t.selector}`),t.svgOpening=t.svg.select(".window-wall-opening"),t.svgPane=t.svg.select(".window-pane")),!t.show(e))return t.svgOpening.attr("points",""),void t.svgPane.attr("d","");let i;i=1===t.scale[0]?[0,0]:[t.parent.thickness,0],t.svg.style("transform",` \n      translate(${t.origin[0]+i[0]}px, ${t.origin[1]+i[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svgOpening.attr("points",[[0,t.width],[t.parent.thickness,t.width],[t.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill"),t.svgPane.attr("d",`M${t.innerDepthFrame},0  \n          L${t.innerDepthFrame},${t.frameThickness} \n          L${t.outerDepthFrame},${t.frameThickness}  \n          L${t.outerDepthFrame},0  \n          \n          L${t.outerDepthFrame},${t.width}  \n          L${t.outerDepthFrame},${t.width-t.frameThickness}  \n          L${t.innerDepthFrame},${t.width-t.frameThickness} \n          L${t.innerDepthFrame},${t.width}  \n\n          L${t.innerDepthFrame},0  \n          L${t.innerDepthFrame},${t.frameThickness} \n          L${t.innerDepthFrame+t.frameDepth/2},${t.frameThickness}  \n          L${t.innerDepthFrame+t.frameDepth/2},${t.width-t.frameThickness}  \n          `)})()}redraw(e){this.svgOpening&&this.svgOpening.attr("stroke-width",this.meterPerPixel*this.lineThickness),this.svgPane&&this.svgPane.attr("stroke-width",1*this.meterPerPixel)}}class _r extends de{constructor(e){super(e),this.sensorType=X.lightBulb,Object.assign(this,e)}}class $s extends de{constructor(e){super(e),this.sensorType=X.ventOut,this.offsetWall=0,this.size=200,Object.assign(this,e)}get lineThickness(){return this.size/1e3/this.meterPerPixel}}const oSe=[new Wi({name:"Toilet-upstairs",floor:ie.top,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b-1-n.wallInnerThickness],this.squaredRoom(1.7,1)},parts:[new it({floor:ie.top,type:He.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=L(this.parent.northWestCorner,[0,0]),this.sides={[Q.out]:[L(this.origin,[0,-n.wallInnerThickness]),L(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[Q.in]:[L(this.origin,[0,0]),L(this.origin,[this.parent.width,0])]}}}),new it({type:He.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=L(e.northWestCorner,[e.width,0]),this.sides={[Q.out]:[L(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),L(this.origin,[+n.wallInnerThickness,e.height+n.wallInnerThickness])],[Q.in]:[L(this.origin,[0,0]),L(this.origin,[0,e.height])]}}}),new it({floor:ie.top,type:He.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=L(e.northWestCorner,[e.width,e.height]),this.sides={[Q.out]:[L(this.origin,[+n.wallInnerThickness,n.wallInnerThickness]),L(this.origin,[-e.width,n.wallInnerThickness])],[Q.in]:[L(this.origin,[0,0]),L(this.origin,[-e.width,0])]}},parts:[new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(Q.in,0,1);this.points=[e,Te(n.serverRoom,e,!0),n.serverRoom]}}),new de({offsetWall:-.3,sensorType:X.lightSwitch,onUpdate:function(n){const e=L(this.parent.getPosition(Q.in,0,1),[0,n.wallInnerThickness]);this.points=[e,Te(n.serverRoom,e,!0),n.serverRoom]}}),new Jn({scale:[-1,1],rotate:-90,onUpdate:function(n){this.origin=L(this.parent.getPosition(Q.in,0,0),[-n.wallInnerThickness,0])}})]}),new it({type:He.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const e=this.parent;this.origin=L(e.northWestCorner,[0*e.width,1*e.height]),this.innerWallLength=e.height,this.sides={[Q.in]:[L(this.origin,[0,0]),L(this.origin,[0,-this.innerWallLength])]}}}),new _r({onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}}),new $s({sensorType:X.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]}),new Wi({name:"storage-upstairs",floor:ie.top,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b-1-2*n.wallInnerThickness-1],this.squaredRoom(1.7,1)},parts:[new it({floor:ie.top,type:He.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=L(this.parent.northWestCorner,[0,0]),this.sides={[Q.out]:[L(this.origin,[0,-n.wallInnerThickness]),L(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[Q.in]:[L(this.origin,[0,0]),L(this.origin,[this.parent.width,0])]}}}),new it({type:He.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=L(e.northWestCorner,[e.width,0]),this.sides={[Q.out]:[L(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),L(this.origin,[+n.wallInnerThickness,e.height])],[Q.in]:[L(this.origin,[0,0]),L(this.origin,[0,e.height])]}},parts:[new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(Q.in,0,.8);this.points=[e,Te(n.serverRoom,e,!1),n.serverRoom]}}),new Jn({scale:[-1,1],rotate:180,onUpdate:function(n){this.origin=L(this.parent.getPosition(Q.in,0,0),[-n.wallInnerThickness,0])}})]}),new _r({onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]}),new Wi({name:"main-bedroom",floor:ie.top,onUpdate:function(n){this.width=gt(n.stramien.in.we.c-n.stramien.in.we.b),this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.a],this.height=gt(n.stramien.in.ns.b-this.northWestCorner[1]-n.tower.houseIncrement-n.wallInnerThickness-1),this.center=L(this.northWestCorner,[this.width/2,this.height/2]),this.centralElectricity=this.center;const t=n.stair.totalWidth+n.wallInnerThickness,i=n.stair.stairOrigin[1]-this.northWestCorner[1]-n.wallInnerThickness;this.coords=[this.northWestCorner,L(this.northWestCorner,[this.width,0]),L(this.northWestCorner,[this.width,this.height]),L(this.northWestCorner,[t,this.height]),L(this.northWestCorner,[t,i]),L(this.northWestCorner,[0,i])]},parts:[new it({floor:ie.top,type:He.theoretic,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallOuterThickness,this.origin=L(this.parent.northWestCorner,[0,0]),this.sides={[Q.in]:[L(this.origin,[0,0]),L(this.origin,[this.parent.width,0])]}},parts:[new de({offset:[0,.3],amount:2,sensorType:X.socket,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(Q.in,.5,-.4);this.points=[t,Te(e,t,!0),e]}})]}),new it({floor:ie.top,type:He.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[2],this.innerWallLength=xo(e.coords[3],e.coords[2]),this.sides={[Q.out]:[L(this.origin,[0,n.wallInnerThickness]),L(this.origin,[-(this.innerWallLength+n.wallInnerThickness),n.wallInnerThickness])],[Q.in]:[L(this.origin,[0,0]),L(this.origin,[-this.innerWallLength,0])]}},parts:[new Jn({scale:[1,1],rotate:90,onUpdate:function(n){this.origin=L(this.parent.getPosition(Q.in,1,0),[0,0])}}),...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(Q.in,1,-1);this.points=[t,Te(e.serverRoom,t,!1),e.serverRoom]}}))]}),new it({type:He.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const e=this.parent;this.origin=e.coords[3],this.innerWallLength=xo(e.coords[4],e.coords[3]),this.sides={[Q.out]:[L(this.origin,[-n.wallInnerThickness,n.wallInnerThickness]),L(this.origin,[-n.wallInnerThickness,-this.innerWallLength+n.wallInnerThickness])],[Q.in]:[L(this.origin,[0,0]),L(this.origin,[0,-this.innerWallLength])]}}}),new it({name:"SouthLeft",floor:ie.top,type:He.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[4],this.innerWallLength=xo(e.coords[5],e.coords[4]),this.sides={[Q.out]:[L(this.origin,[-n.wallInnerThickness,n.wallInnerThickness]),L(this.origin,[-this.innerWallLength,n.wallInnerThickness])],[Q.in]:[L(this.origin,[0,0]),L(this.origin,[-this.innerWallLength,0])]}},parts:[new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(Q.in,0,.3);this.points=[t,Te(e,t,!0),e]}}),new de({offset:[0,.3],amount:2,sensorType:X.socket,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(Q.in,0,0);this.points=[t,Te(e,t,!0),e]}})]}),new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.centralElectricity;this.points=[e,Te(n.serverRoom,e,!1),n.serverRoom]}}),new _r({onUpdate:function(n){const t=L(this.parent.center,[1,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}}),new $s({onUpdate:function(n){const e=this.parent,t=L(e.northWestCorner,[e.width/2,2]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]}),new Wi({name:"bathroom",floor:ie.top,onUpdate:function(n){const r=n.stramien.in.ns.b-n.stramien.in.ns.a-n.tower.houseIncrement+n.wallInnerThickness+n.wallInnerThickness-1,o=n.stramien.in.ns.b-.5,a=n.tower.innerCoords[3][0]-2;this.northWestCorner=[n.stair.stairOrigin[0]+n.stair.totalWidth+1.0001+n.wallInnerThickness,r],this.center=L(this.northWestCorner,[2,2]),this.coords=[this.northWestCorner,[n.stramien.in.we.c,r],[n.stramien.in.we.c,n.tower.innerCoords[0][1]],n.tower.innerCoords[1],n.tower.innerCoords[2],[n.tower.innerCoords[3][0],o],[a,o],[a,n.stramien.in.ns.b-n.wallInnerThickness],[this.northWestCorner[0],n.stramien.in.ns.b-n.wallInnerThickness]]},parts:[new it({floor:ie.top,type:He.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[5],this.innerWallLength=xo(e.coords[5],e.coords[6]),this.sides={[Q.out]:[L(e.coords[5],[0,n.wallInnerThickness]),L(e.coords[6],[n.wallInnerThickness,n.wallInnerThickness])],[Q.in]:[L(e.coords[5],[0,0]),L(e.coords[6],[0,0])]}}}),new it({type:He.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[6],this.innerWallLength=xo(e.coords[6],e.coords[7]),this.sides={[Q.out]:[L(e.coords[6],[n.wallInnerThickness,n.wallInnerThickness]),L(e.coords[7],[n.wallInnerThickness,n.wallInnerThickness])],[Q.in]:[L(e.coords[6],[0,0]),L(e.coords[7],[0,0])]}}}),new it({name:"SouthLeft",floor:ie.top,type:He.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[5],this.innerWallLength=xo(e.coords[7],e.coords[8]),this.sides={[Q.out]:[L(e.coords[7],[n.wallInnerThickness,n.wallInnerThickness]),L(e.coords[8],[-n.wallInnerThickness,n.wallInnerThickness])],[Q.in]:[L(e.coords[7],[0,0]),L(e.coords[8],[0,0])]}},parts:[new Jn({scale:[1,1],rotate:90,onUpdate:function(n){this.origin=L(this.parent.getPosition(Q.in,1,0),[0,0])}}),...[X.lightSwitch,X.temperature].map(n=>new de({amount:n===X.lightSwitch?2:1,sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(Q.in,1,-1);this.points=[t,Te(e.serverRoom,t,!0),e.serverRoom]}})),...[X.lightSwitch,X.temperature].map(n=>new de({offsetWall:-.3,sensorType:n,onUpdate:function(e){const t=L(this.parent.getPosition(Q.in,1,-1),[0,e.wallInnerThickness]);this.points=[t,Te(e.serverRoom,t,!0),e.serverRoom]}}))]}),new it({type:He.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[8],this.innerWallLength=xo(e.coords[8],e.coords[0]),this.sides={[Q.out]:[L(e.coords[8],[-n.wallInnerThickness,n.wallInnerThickness]),L(e.coords[0],[-n.wallInnerThickness,0])],[Q.in]:[L(e.coords[8],[0,0]),L(e.coords[0],[0,0])]}},parts:[new de({offsetWall:-.3,sensorType:X.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(Q.in,1,-.5);this.points=[L(t,[-n.wallInnerThickness,0]),Te(e,t,!0),e]}}),...[0,1,2].map(n=>new de({amount:1===n?2:1,offsetWall:1===n?-.3:.3,sensorType:X.socket,onUpdate:function(e){const t=e.serverRoom,i=this.parent.getPosition(Q.in,(n+1)/4,0);this.points=[L(i,[1===n?-e.wallInnerThickness:0,0]),L(i,[0,0]),Te(t,i,!1),t]}})),...[X.lightSwitch,X.temperature].map(n=>new de({offsetWall:-.3,sensorType:n,onUpdate:function(e){const t=L(this.parent.getPosition(Q.in,1,-1),[-e.wallInnerThickness,0]);this.points=[t,Te(e.serverRoom,t,!1),e.serverRoom]}}))]}),new _r({onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}}),new $s({sensorType:X.ventIn,size:400,onUpdate:function(n){const t=L(n.serverRoom,[0,-1]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]}),new Wi({name:"Upper-east",floor:ie.top,onUpdate:function(n){const t=n.stramien;this.northWestCorner=[t.in.we.c+n.wallInnerThickness,t.in.ns.b+n.balconyWidth+n.wallInnerThickness],this.squaredRoom(t.in.we.d-t.in.we.c-n.wallInnerThickness,t.in.ns.c-t.in.ns.b-n.balconyWidth-n.wallInnerThickness)},parts:[new it({type:He.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=L(e.northWestCorner,[0*e.width,0*e.height]),this.sides={[Q.out]:[L(e.northWestCorner,[-n.wallInnerThickness,-n.wallInnerThickness]),L(e.northWestCorner,[1*e.width,0*e.height-n.wallInnerThickness])],[Q.in]:[L(e.northWestCorner,[0*e.width,0*e.height]),L(e.northWestCorner,[1*e.width,0*e.height])]}},parts:[...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(Q.in,0,1);this.points=[t,Te(e.serverRoom,t,!1),e.serverRoom]}})),new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(Q.in,0,1);this.points=[t,Te(e,t,!1),e]}}),new Jn({scale:[1,-1],rotate:-90,onUpdate:function(n){this.origin=L(this.parent.getPosition(Q.in,0,0),[0,0])}})]}),new it({type:He.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=L(e.northWestCorner,[1*e.width,0*e.height]),this.sides={[Q.in]:[L(e.northWestCorner,[1*e.width,0*e.height]),L(e.northWestCorner,[1*e.width,1*e.height])]}}}),new it({type:He.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=L(e.northWestCorner,[1*e.width,1*e.height]),this.sides={[Q.in]:[L(e.northWestCorner,[1*e.width,1*e.height]),L(e.northWestCorner,[0*e.width,1*e.height])]}}}),new it({type:He.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[1],this.sides={[Q.out]:[L(e.northWestCorner,[0*e.width-n.wallInnerThickness,1*e.height]),L(e.northWestCorner,[0*e.width-n.wallInnerThickness,0*e.height-n.wallInnerThickness])],[Q.in]:[L(e.northWestCorner,[0*e.width,1*e.height]),L(e.northWestCorner,[0*e.width,0*e.height])]}}}),...[0,1,2,3].map(n=>new de({offset:[[0,3].includes(n)?.3:-.3,0],group:11,sensorType:X.socket,onUpdate:function(e){this.points=[L(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new de({group:11,sensorType:X.socket,cableOnly:!0,onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=L(t.coords[0],[1,0]);this.points=[i,t.coords[1],t.coords[2],t.coords[3],t.coords[0],Te(e,t.coords[0],!1),e]}}),new _r({onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}}),new $s({onUpdate:function(n){const e=this.parent,t=L(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,Te(n.serverRoom,i,!0),n.serverRoom]}})]}),new Wi({name:"upper-west-one",floor:ie.top,onUpdate:function(n){const e=n.stramien,t=e.in.ns.c-e.in.ns.b-n.balconyWidth-n.wallInnerThickness,i=(e.in.we.b-e.in.we.a)/3-n.wallInnerThickness;this.northWestCorner=[e.in.we.b-1/3*(e.in.we.b-e.in.we.a),e.in.ns.b+n.balconyWidth+n.wallInnerThickness],this.squaredRoom(i,t)},parts:[new it({floor:ie.top,type:He.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=L(this.parent.northWestCorner,[0,0]),this.sides={[Q.out]:[L(this.origin,[0,-n.wallInnerThickness]),L(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[Q.in]:[L(this.origin,[0,0]),L(this.origin,[this.parent.width,0])]}},parts:[...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(Q.in,1,-1);this.points=[t,Te(e.serverRoom,t,!1),e.serverRoom]}})),new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(Q.in,1,-1);this.points=[t,Te(e,t,!1),e]}}),new Jn({scale:[1,1],rotate:-90,onUpdate:function(n){this.origin=L(this.parent.getPosition(Q.in,1,0),[0,0])}})]}),new it({type:He.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=L(e.northWestCorner,[e.width,0]),this.sides={[Q.out]:[L(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),L(this.origin,[+n.wallInnerThickness,e.height])],[Q.in]:[L(this.origin,[0,0]),L(this.origin,[0,e.height])]}},parts:[]}),new it({type:He.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=L(e.northWestCorner,[e.width,e.height]),this.sides={[Q.in]:[L(this.origin,[0,0]),L(this.origin,[-1*e.width,0*e.height])]}},parts:[]}),new it({type:He.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=L(e.northWestCorner,[0*e.width,1*e.height]),this.sides={[Q.in]:[L(this.origin,[0,0]),L(this.origin,[0*e.width,-1*e.height])]}},parts:[]}),...[0,1,2,3].map(n=>new de({offset:[[0,3].includes(n)?.3:-.3,0],group:10,sensorType:X.socket,onUpdate:function(e){this.points=[L(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new de({group:10,sensorType:X.socket,cableOnly:!0,onUpdate:function(n){const t=this.parent,i=L(t.coords[1],[-1,0]);this.points=[t.coords[1],t.coords[2],t.coords[3],t.coords[0],i]}}),new _r({onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}}),new $s({onUpdate:function(n){const e=this.parent,t=L(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,Te(n.serverRoom,i,!0),n.serverRoom]}})]}),new Wi({name:"upper-west-two",floor:ie.top,onUpdate:function(n){const e=n.stramien,t=e.in.ns.c-e.in.ns.b-n.balconyWidth-n.wallInnerThickness,i=(e.in.we.b-e.in.we.a)/3-n.wallInnerThickness;this.northWestCorner=[e.in.we.b-2/3*(e.in.we.b-e.in.we.a),e.in.ns.b+n.balconyWidth+n.wallInnerThickness],this.squaredRoom(i,t)},parts:[new it({floor:ie.top,type:He.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=L(this.parent.northWestCorner,[0,0]),this.sides={[Q.out]:[L(this.origin,[0,-n.wallInnerThickness]),L(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[Q.in]:[L(this.origin,[0,0]),L(this.origin,[this.parent.width,0])]}},parts:[...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(Q.in,1,-1);this.points=[t,Te(e.serverRoom,t,!1),e.serverRoom]}})),new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(Q.in,1,-1);this.points=[t,Te(e,t,!1),e]}}),new Jn({scale:[1,1],rotate:-90,onUpdate:function(n){this.origin=L(this.parent.getPosition(Q.in,1,0),[0,0])}})]}),new it({type:He.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=L(e.northWestCorner,[e.width,0]),this.sides={[Q.out]:[L(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),L(this.origin,[+n.wallInnerThickness,e.height])],[Q.in]:[L(this.origin,[0,0]),L(this.origin,[0,e.height])]}},parts:[]}),new it({type:He.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=L(e.northWestCorner,[e.width,e.height]),this.sides={[Q.in]:[L(this.origin,[0,0]),L(this.origin,[-1*e.width,0*e.height])]}},parts:[]}),new it({type:He.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=L(e.northWestCorner,[0*e.width,1*e.height]),this.sides={[Q.in]:[L(this.origin,[0,0]),L(this.origin,[0*e.width,-1*e.height])]}},parts:[]}),...[0,1,2,3].map(n=>new de({offset:[[0,3].includes(n)?.3:-.3,0],group:10,sensorType:X.socket,onUpdate:function(e){this.points=[L(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new de({group:10,sensorType:X.socket,cableOnly:!0,onUpdate:function(n){const t=this.parent,i=L(t.coords[1],[-1,0]);this.points=[t.coords[1],t.coords[2],t.coords[3],t.coords[0],i]}}),new _r({onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}}),new $s({onUpdate:function(n){const e=this.parent,t=L(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,Te(n.serverRoom,i,!0),n.serverRoom]}})]}),new Wi({name:"upper-west-three",floor:ie.top,onUpdate:function(n){const e=n.stramien,t=e.in.ns.c-e.in.ns.b,i=(e.in.we.b-e.in.we.a)/3-n.wallInnerThickness;this.northWestCorner=[e.in.we.b-1*(e.in.we.b-e.in.we.a),e.in.ns.b],this.squaredRoom(i,t)},parts:[new it({floor:ie.top,type:He.theoretic,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=L(this.parent.northWestCorner,[0,0]),this.sides={[Q.in]:[L(this.origin,[0,0]),L(this.origin,[this.parent.width,0])]}},parts:[new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(Q.in,1,-1);this.points=[t,Te(e,t,!1),e]}})]}),new it({type:He.inner,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=L(e.northWestCorner,[e.width,0]),this.sides={[Q.out]:[L(this.origin,[+n.wallInnerThickness,0]),L(this.origin,[+n.wallInnerThickness,e.height])],[Q.in]:[L(this.origin,[0,0]),L(this.origin,[0,e.height])]}},parts:[...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(Q.in,0,1);this.points=[t,Te(e.serverRoom,t,!1),e.serverRoom]}})),new Jn({scale:[1,-1],rotate:0,onUpdate:function(n){this.origin=L(this.parent.getPosition(Q.in,0,0),[0,0])}})]}),new it({type:He.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=L(e.northWestCorner,[e.width,e.height]),this.sides={[Q.in]:[L(this.origin,[0,0]),L(this.origin,[-1*e.width,0*e.height])]}},parts:[]}),new it({type:He.theoretic,floor:ie.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=L(e.northWestCorner,[0*e.width,1*e.height]),this.sides={[Q.in]:[L(this.origin,[0,0]),L(this.origin,[0*e.width,-1*e.height])]}},parts:[]}),...[0,1,2,3].map(n=>new de({offset:[[0,3].includes(n)?.3:-.3,0],group:10,sensorType:X.socket,onUpdate:function(e){this.points=[L(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new de({group:10,sensorType:X.socket,cableOnly:!0,onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=L(t.coords[1],[0,1]);this.points=[i,t.coords[2],t.coords[3],t.coords[0],t.coords[1],Te(e,t.coords[1],!0),e]}}),new _r({onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}}),new $s({onUpdate:function(n){const e=this.parent,t=L(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,Te(n.serverRoom,i,!0),n.serverRoom]}})]}),new Wi({name:"balcony",floor:ie.top,onUpdate:function(n){const r=n.stramien,s=n.stair,o=n.stramien.in.ns.b-n.stramien.in.ns.a-n.tower.houseIncrement+n.wallInnerThickness+n.wallInnerThickness-1,a=n.stair.stairOrigin[0]+n.stair.totalWidth+1.0001,l=n.stramien.in.ns.b-.5+n.wallInnerThickness,c=n.tower.innerCoords[3][0]-2+n.wallInnerThickness,u=L(s.stairOrigin,[s.totalWidth,s.totalHeight]),d=r.in.ns.b+n.balconyWidth,h=r.in.we.a+1/3*(r.in.we.b-r.in.we.a);this.coords=[L(u,[-s.walkWidth,0]),u,[u[0],o],[a,o],[a,r.in.ns.b],[c,r.in.ns.b],[c,l],[r.in.we.c,l],[n.tower.innerCoords[3][0],l],[n.tower.innerCoords[3][0],r.in.ns.b],[r.in.we.d,r.in.ns.b],[r.in.we.d,d],[n.tower.innerCoords[3][0],d],L([r.in.we.c,d],[0,0]),L([r.in.we.c,d],[0,n.balconyEdge]),L([r.in.we.b,d],[0,n.balconyEdge]),L([r.in.we.b,d],[0,0]),[h,d],[h,r.in.ns.b],[u[0]-s.walkWidth,r.in.ns.b]]},parts:[new de({offset:[0,.3],sensorType:X.pir,onUpdate:function(n){const e=n.serverRoom,t=[n.stramien.in.we.b+(n.stramien.in.we.c-n.stramien.in.we.b)/2,n.stramien.in.ns.b];this.points=[L(t,[-n.wallInnerThickness,0]),Te(e,t,!0),e]}}),...[X.smoke,X.poe,X.wifi].map((n,e)=>new de({offset:[0,n===X.smoke?-1:.3],sensorType:n,onUpdate:function(t){const i=t.serverRoom,r=[t.stramien.in.we.b+(t.stramien.in.we.c-t.stramien.in.we.b)/2,t.stramien.in.ns.b];this.points=[L(r,[-t.wallInnerThickness,0]),Te(i,r,!0),i]}})),new de({offset:[0,.3],group:10,sensorType:X.socket,onUpdate:function(n){this.points=[L([n.stramien.in.we.b,n.stramien.in.ns.b],[-1,0])]}}),new de({offset:[0,.3],group:10,sensorType:X.socket,onUpdate:function(n){this.points=[L([n.stramien.in.we.c,n.stramien.in.ns.b],[0,0])]}}),new _r({onUpdate:function(n){const t=L(this.parent.coords[0],[1,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]}),new Wi({name:"void",floor:ie.top,hole:!0,onUpdate:function(n){const e=[n.stramien.in.we.b,n.stramien.in.ns.b+n.balconyWidth+n.balconyEdge],t=n.stramien.in.ns.d-e[1],i=n.stramien.in.we.c-n.stramien.in.we.b;this.coords=[e,L(e,[1*i,0*t]),L(e,[1*i,1*t]),L(e,[0*i,1*t])]}}),new Wi({name:"voidStairs",floor:ie.top,hole:!0,onUpdate:function(n){const e=n.stair;this.northWestCorner=e.stairOrigin;const t=n.stramien.in.ns.b-e.stairOrigin[1]-2-3*n.wallInnerThickness,i=e.totalWidth;this.coords=[this.northWestCorner,L(this.northWestCorner,[i-e.walkWidth,0]),L(this.northWestCorner,[i-e.walkWidth,t]),L(this.northWestCorner,[0,t])]},parts:[new _r({onUpdate:function(n){const t=L(this.parent.northWestCorner,[n.stair.totalWidth/2,1]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]})],aSe={studAmount:12,studDistance:.61,towerWidth:1,wallInnerThickness:.2,wallOuterThickness:.4,roof70DegOffset:1,studAmountNorth:14,studAmountSouth:3,studAmountWest:13,studAmountEast:8,showTower:!0,balconyWidth:1.2,name:"Lindelund",orientation:{lat:52,log:5.2,rotation:180},parts:[new dU({floor:ie.ground,onUpdate:function(n){const e=n.stramien,t=n.tower;this.coords=[[e.in.we.b,e.in.ns.b],[e.in.we.b,e.in.ns.a],[e.in.we.c,e.in.ns.a],[e.in.we.c,t.innerCoords[0][1]],t.innerCoords[0],t.innerCoords[1],t.innerCoords[2],t.innerCoords[3],[t.innerCoords[3][0],e.in.ns.b],[e.in.we.d,e.in.ns.b],[e.in.we.d,e.in.ns.c],[e.in.we.c,e.in.ns.c],[e.in.we.c,e.in.ns.d],[e.in.we.b,e.in.ns.d],[e.in.we.b,e.in.ns.c],[e.in.we.a,e.in.ns.c],[e.in.we.a,e.in.ns.b]]},parts:[...[...Array(17).keys()].map((n,e,t)=>{const i=[3,4,5,6,7];if([3,4,5,6,7].includes(n))return;const s=[0,11,14,17],o=t.length;return new it({type:He.outer,floor:ie.all,onUpdate:function(a){const l=c=>c===i[0]||c===i[4]+1||s.includes(c)?Ut.inside:s.includes(c)?void 0:Ut.outside;this.drawByRoom(n,n+1!==o?n+1:0,a,l(n),l(n+1))},parts:[...16===n?[1,2].map(a=>new Hr({rotate:90,width:.6,onUpdate:function(l){this.origin=this.parent.getPosition(Q.out,a/3,this.width/2)}})):[],...15===n?[new Hr({windowForm:gc.hexagon,floor:ie.top,rotate:0,width:1,onUpdate:function(a){this.origin=this.parent.getPosition(Q.out,.5,this.width/2)}}),...[1,2].map(a=>new Hr({rotate:0,width:.9,onUpdate:function(l){this.origin=this.parent.getPosition(Q.out,a/3,this.width/2)}}))]:[],...14===n?[1,2].map(a=>new Hr({rotate:-90,onUpdate:function(l){const c=this.parent;this.width=c.innerWallLength<5?c.innerWallLength/3-.2:1.4,this.origin=c.getPosition(Q.out,a/3,this.width/2)}})):[],...12===n?[1].map(a=>new Hr({rotate:-90,floor:ie.all,onUpdate:function(l){const c=this.parent;this.width=c.innerWallLength,this.origin=c.getPosition(Q.out,a/2,this.width/2)}})):[],...10===n?[1].map(a=>new Hr({rotate:-90,width:1.4,onUpdate:function(l){this.origin=this.parent.getPosition(Q.out,a/2,this.width/2)}})):[],...9===n?[new Hr({windowForm:gc.hexagon,floor:ie.top,rotate:180,width:1,onUpdate:function(a){this.origin=this.parent.getPosition(Q.out,.5,this.width/2)}}),...[0,1].map(a=>new Hr({rotate:180,width:.8,onUpdate:function(l){this.origin=this.parent.getPosition(Q.out,a,this.width/2+(this.width+.8)*(0===a?1:-1))}}))]:[],...8===n?[1].map(a=>new Hr({rotate:90,width:.6,onUpdate:function(l){this.origin=this.parent.getPosition(Q.out,.5,this.width/2-l.wallOuterThickness/2)}})):[],...2===n?[1,2.5].map(a=>new Hr({rotate:180,width:.9,onUpdate:function(l){this.origin=this.parent.getPosition(Q.out,a/3,this.width/2)}})):[],...1===n?[new Hr({windowForm:gc.hexagon,floor:ie.top,rotate:90,width:1,onUpdate:function(a){this.origin=this.parent.getPosition(Q.out,.5,this.width/2)}}),...[1,2].map(a=>new Hr({rotate:90,width:.9,onUpdate:function(l){this.origin=this.parent.getPosition(Q.out,a/3,this.width/2)}}))]:[],...0===n?[new Jn({outside:!0,floor:ie.ground,rotate:0,scale:[1,1],onUpdate:function(a){this.origin=L(this.parent.getPosition(Q.in,0,1.2+a.wallInnerThickness),[-a.wallOuterThickness,0])}}),...[2,5].map(a=>new Hr({rotate:0,width:.9,onUpdate:function(l){this.origin=this.parent.getPosition(Q.out,(a+1)/8,this.width/2)}}))]:[]]})}).filter(n=>n),new it({type:He.outer,floor:ie.all,onUpdate:function(n){if(this.ceiling=n.cross.ceilingHeight,this.outOfDesign=!n.showTower,this.outOfDesign)return;const e=n.wallOuterThickness-n.wallInnerThickness;this.origin=[n.stramien.in.we.c,n.tower.innerCoords[0][1]],this.innerWallLength=n.towerWidth-e,this.sides={[Q.out]:[n.tower.outerCoords[0],n.tower.outerCoords[1]],[Q.in]:[[n.stramien.in.we.c,n.tower.innerCoords[0][1]],n.tower.innerCoords[1]]}},parts:[new de({sensorType:X.socket,amount:2,group:4,onUpdate:function(n){const e=this.parent,t=e.getPosition(Q.in,0,0);this.points=[e.getPosition(Q.in,1,-.2),t,Te(t,n.serverRoom,!0),n.serverRoom]}})]}),new it({type:He.outer,floor:ie.all,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.outOfDesign=!n.showTower,this.outOfDesign||(this.origin=n.tower.innerCoords[1],this.sides={[Q.out]:[n.tower.outerCoords[1],n.tower.outerCoords[2]],[Q.in]:[n.tower.innerCoords[1],n.tower.innerCoords[2]]})},parts:[new Jn({outside:!0,rotate:135,scale:[1,1],floor:ie.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,this.outOfDesign||(this.origin=this.parent.getPosition(Q.out,.5,-this.width/2))}})]}),new it({type:He.outer,floor:ie.all,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.outOfDesign=!n.showTower,this.outOfDesign||(this.origin=n.tower.innerCoords[2],this.sides={[Q.out]:[n.tower.outerCoords[2],n.tower.outerCoords[3]],[Q.in]:[n.tower.innerCoords[2],[n.tower.innerCoords[3][0],n.stramien.in.ns.b]]})},parts:[new de({sensorType:X.socket,amount:2,group:4,onUpdate:function(n){const t=this.parent.getPosition(Q.in,0,.2);this.points=[t,Te(t,n.serverRoom,!0),n.serverRoom]}})]})]}),new Wi({name:"West",floor:ie.ground,onUpdate:function(n){const e=n.stramien;this.northWestCorner=[e.in.we.a,e.in.ns.b],this.squaredRoom(e.in.we.b-e.in.we.a-n.wallInnerThickness,e.in.ns.c-e.in.ns.b)},parts:[new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(Q.in,3/4,0);this.points=[e,Te(n,e,!1),n]}}),new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(Q.in,1/4,0);this.points=[e,Te(n,e,!1),n]}}),new de({group:1,sensorType:X.socket,amount:2,offset:[0,.3],onUpdate:function(){const e=L(this.parent.sides[Q.in][1],[-1,0]);this.points=[e]}}),new de({group:1,sensorType:X.socket,amount:2,offset:[0,.3],onUpdate:function(){const t=L(this.parent.sides[Q.in][1],[-this.parent.parent.width/2,0]);this.points=[t]}}),new de({group:1,sensorType:X.socket,amount:2,offset:[0,.3],onUpdate:function(){const e=L(this.parent.sides[Q.in][0],[1,0]);this.points=[e]}})]}),new it({type:He.inner,floor:ie.ground,onUpdate:function(n){this.drawByRoom(1,2,n,Ut.straight,Ut.straight)},parts:[new de({group:2,sensorType:X.socket,amount:2,offset:[-.3,0],onUpdate:function(){const e=L(this.parent.sides[Q.in][1],[0,-1]);this.points=[e]}}),new de({group:1,sensorType:X.socket,amount:2,offset:[-.3,0],onUpdate:function(){const e=L(this.parent.sides[Q.in][0],[0,1]);this.points=[e]}}),new Jn({scale:[1,-1],onUpdate:function(n){this.origin=L(this.parent.sides[Q.in][0],[0,this.parent.parent.height/2-this.width])}}),new Jn({scale:[1,1],onUpdate:function(n){this.origin=L(this.parent.sides[Q.in][0],[0,this.parent.parent.height/2+this.width])}}),...[X.dimmer,X.lightSwitch,X.temperature].map((n,e)=>new de({sensorType:n,offsetWall:X.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(Q.in,.3333333333333333,0);this.points=[i,Te(t.serverRoom,i,!1),t.serverRoom]}}))]}),new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new de({group:2,sensorType:X.socket,amount:2,offset:[0,-.3],onUpdate:function(n){const t=L(this.parent.sides[Q.in][0],[-1,0]);this.points=[t]}}),new de({group:2,sensorType:X.socket,amount:2,offset:[0,-.3],onUpdate:function(){const e=L(this.parent.sides[Q.in][0],[-this.parent.parent.width/2,0]);this.points=[e]}}),new de({group:2,sensorType:X.socket,amount:2,offset:[0,-.3],onUpdate:function(){const e=L(this.parent.sides[Q.in][1],[1,0]);this.points=[e]}})]}),new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[new de({group:1,sensorType:X.socket,amount:2,offset:[.3,0],onUpdate:function(){const e=L(this.parent.sides[Q.in][1],[0,1]);this.points=[e]}}),new de({group:2,sensorType:X.socket,amount:2,offset:[.3,0],onUpdate:function(){const e=L(this.parent.sides[Q.in][0],[0,-1]);this.points=[e]}})]}),new de({sensorType:X.smoke,onUpdate:function(n){const e=L(this.parent.northWestCorner,[.8*this.parent.width,.5*this.parent.height]),t=L(e,[0,.5*-this.parent.height]);this.points=[e,t,Te(t,n.serverRoom,!1),n.serverRoom]}}),new de({sensorType:X.socket,amount:2,cableOnly:!0,group:1,onUpdate:function(n){const e=this.parent;this.points=[L(e.northWestCorner,[e.width,e.height/2-1]),L(e.northWestCorner,[e.width,0]),L(e.northWestCorner,[0,0]),L(e.northWestCorner,[0,e.height/2-1])]}}),new de({sensorType:X.socket,amount:2,cableOnly:!0,group:2,onUpdate:function(n){const e=this.parent;this.points=[L(e.northWestCorner,[0,e.height/2+1]),L(e.northWestCorner,[0,e.height]),L(e.northWestCorner,[e.width,e.height]),L(e.northWestCorner,[e.width,e.height/2+1])]}}),new de({group:1,sensorType:X.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=L(e.northWestCorner,[e.width-n.wallInnerThickness,0]);this.points=[t,Te(n.serverRoom,t,!0),n.serverRoom]}}),new de({group:2,sensorType:X.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=L(e.northWestCorner,[e.width,e.height/2+1]);this.points=[L(e.northWestCorner,[e.width-n.wallInnerThickness,e.height/2+1]),t,Te(n.serverRoom,t,!1),n.serverRoom]}}),...[X.camera,X.poe].map(n=>new de({sensorType:n,cableType:wa.OutsidePOE,offset:[0,-1],onUpdate:function(e){const t=this.parent,i=L(t.northWestCorner,[t.width/2,-e.wallOuterThickness]);this.points=[i,L(i,[0,1]),e.serverRoom]}})),...[X.camera,X.poe].map(n=>new de({sensorType:n,cableType:wa.OutsidePOE,offset:[0,1],onUpdate:function(e){const t=this.parent,i=L(t.northWestCorner,[1,t.height+e.wallOuterThickness]);this.points=[i,L(i,[0,-1]),e.serverRoom]}})),new _r({onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}}),new $s({sensorType:X.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]}),new Wi({name:"East",floor:ie.ground,onUpdate:function(n){const e=n.stramien;this.northWestCorner=[e.in.we.c+n.wallInnerThickness,e.in.ns.b],this.squaredRoom(e.in.we.d-e.in.we.c-n.wallInnerThickness,e.in.ns.c-e.in.ns.b)},parts:[new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(Q.in,.3333333333333333,0);this.points=[e,Te(n.serverRoom,e,!1),n.serverRoom]}}),new de({group:3,sensorType:X.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(Q.in,1/3,0)]}}),new de({group:3,sensorType:X.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(Q.in,2/3,0)]}}),new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(Q.in,3/4,0);this.points=[e,Te(n,e,!0),n]}})]}),new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[...[X.camera,X.poe].map(n=>new de({sensorType:n,cableType:wa.OutsidePOE,offsetWall:-.3,onUpdate:function(e){const t=this.parent.getPosition(Q.in,0,0);this.points=[L(t,[e.wallOuterThickness,0]),L(t,[-1,1]),e.serverRoom]}})),new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(Q.in,0,1.5);this.points=[e,Te(n.serverRoom,e,!1),n.serverRoom]}}),new Jn({scale:[-1,-1],onUpdate:function(n){const t=this.parent;this.origin=L(t.origin,[0,t.innerWallLength/2-this.width])}}),new Jn({scale:[-1,1],outside:!0,onUpdate:function(n){const t=this.parent;this.origin=L(t.origin,[0,t.innerWallLength/2+this.width])}})]}),new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new de({group:3,amount:2,sensorType:X.socket,onUpdate:function(){this.points=[this.parent.getPosition(Q.in,1/3,0)]}}),new de({group:3,sensorType:X.socket,amount:2,offset:[0,.3],onUpdate:function(){this.points=[this.parent.getPosition(Q.in,2/3,0)]}}),new de({sensorType:X.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(Q.in,1/4,0),t=this.parent.parent.northWestCorner;this.points=[e,Te(e,t,!0),t,Te(n,t,!0),n]}})]}),new it({type:He.inner,floor:ie.ground,onUpdate:function(n){this.drawByRoom(3,0,n,Ut.straight,Ut.straight)},parts:[...[X.dimmer,X.lightSwitch,X.temperature].map((n,e)=>new de({sensorType:n,offsetWall:X.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(Q.in,1,-1.5);this.points=[i,Te(t.serverRoom,i,!1),t.serverRoom]}})),new Jn({scale:[1,1],rotate:180,onUpdate:function(n){this.origin=L(this.parent.sides[Q.in][1],[0,this.parent.parent.height/2-this.width])}}),new Jn({scale:[1,-1],rotate:180,onUpdate:function(n){this.origin=L(this.parent.sides[Q.in][1],[0,this.parent.parent.height/2+this.width])}})]}),new de({sensorType:X.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(n){const e=this.parent;this.points=[L(e.northWestCorner,[e.width,e.height/2-1]),L(e.northWestCorner,[e.width,0]),L(e.northWestCorner,[0,0]),L(e.northWestCorner,[0,e.height/2-1])]}}),new de({sensorType:X.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(n){const e=this.parent;this.points=[L(e.northWestCorner,[0,e.height/2+1]),L(e.northWestCorner,[0,e.height]),L(e.northWestCorner,[e.width,e.height]),L(e.northWestCorner,[e.width,e.height/2+1])]}}),new de({group:3,sensorType:X.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const t=L(this.parent.northWestCorner,[0,0]);this.points=[t,Te(n.serverRoom,t,!0),n.serverRoom]}}),new de({group:3,sensorType:X.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=L(e.northWestCorner,[-n.wallInnerThickness,e.height/2+1]);this.points=[L(e.northWestCorner,[0,e.height/2+1]),t,Te(n.serverRoom,t,!1),n.serverRoom]}}),new _r({sensorType:X.lightBulb,onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}}),new $s({sensorType:X.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]}),new Wi({name:"Central",floor:ie.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b],this.squaredRoom(n.stramien.in.we.c-n.stramien.in.we.b,n.stramien.in.ns.d-n.stramien.in.ns.b)},parts:[new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.innerWallLength=n.stramien.in.ns.d-n.stramien.in.ns.c,this.origin=L(this.parent.northWestCorner,[this.parent.width,n.stramien.in.ns.c-n.stramien.in.ns.b]),this.sides={[Q.in]:[L(this.origin,[n.wallOuterThickness,+n.wallOuterThickness]),L(this.origin,[n.wallOuterThickness,this.innerWallLength+n.wallOuterThickness])],[Q.in]:[L(this.origin,[0,0]),L(this.origin,[0,this.innerWallLength])]}},parts:[new de({group:4,amount:3,sensorType:X.socket,onUpdate:function(){this.points=[this.parent.getPosition(Q.in,.5,0)]}}),new de({group:4,amount:2,sensorType:X.socket,onUpdate:function(){this.points=[this.parent.getPosition(Q.in,0,-1)]}})]}),new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(Q.in,0,1.5);this.points=[e,Te(n.serverRoom,e,!1),n.serverRoom]}})]}),new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[]}),new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.innerWallLength=n.stramien.in.ns.d-n.stramien.in.ns.c,this.origin=L(this.parent.northWestCorner,[0,n.stramien.in.ns.d-n.stramien.in.ns.b]),this.sides={[Q.in]:[L(this.origin,[-n.wallOuterThickness,+n.wallOuterThickness]),L(this.origin,[-n.wallOuterThickness,-this.innerWallLength+n.wallOuterThickness])],[Q.in]:[L(this.origin,[0,0]),L(this.origin,[0,-this.innerWallLength])]}},parts:[new de({group:5,amount:6,sensorType:X.socket,onUpdate:function(){this.points=[this.parent.getPosition(Q.in,.5,0)]}}),new de({group:5,amount:6,sensorType:X.socket,onUpdate:function(){this.points=[this.parent.getPosition(Q.in,1,1)]}})]}),new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[...[X.dimmer,X.lightSwitch,X.temperature].map((n,e)=>new de({sensorType:n,offsetWall:X.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(Q.in,1,-1.5);this.points=[i,Te(t.serverRoom,i,!1),t.serverRoom]}})),...[X.lightSwitch,X.temperature].map((n,e)=>new de({sensorType:n,onUpdate:function(t){const i=this.parent.getPosition(Q.in,0,1.5);this.points=[i,Te(t.serverRoom,i,!1),t.serverRoom]}}))]}),new it({type:He.inner,floor:ie.ground,onUpdate:function(n){this.drawByRoom(0,1,n,Ut.straight,Ut.straight)},parts:[new Jn({rotate:90,scale:[-1,1],onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,0,0)}})]}),new de({group:7,offset:[.6,0],sensorType:X.perilex,verticalCableLength:4,onUpdate:function(n){const e=L(this.parent.northWestCorner,[0,this.parent.height-2]);this.points=[e,Te(e,n.serverRoom,!0),n.serverRoom]}}),new de({group:4,cableOnly:!0,sensorType:X.socket,amount:2,onUpdate:function(n){const e=L(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[L(this.parent.northWestCorner,[this.parent.width,this.parent.height]),L(this.parent.northWestCorner,[this.parent.width,0]),e,Te(e,n.serverRoom,!0),n.serverRoom]}}),new de({group:5,cableOnly:!0,sensorType:X.socket,amount:2,onUpdate:function(n){const e=L(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[L(this.parent.northWestCorner,[0,this.parent.height]),L(this.parent.northWestCorner,[0,0]),e,Te(e,n.serverRoom,!0),n.serverRoom]}}),new de({group:5,amount:6,sensorType:X.socket,onUpdate:function(n){const e=L(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),t=L(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[e,Te(e,t,!0),t]}}),new de({group:5,amount:2,offset:[.3,0],sensorType:X.socket,onUpdate:function(n){const e=L(this.parent.northWestCorner,[0*this.parent.width,.15*this.parent.height]),t=L(this.parent.northWestCorner,[0,.15*this.parent.height]);this.points=[e,Te(e,t,!0),t]}}),new de({group:4,amount:2,offset:[-.3,0],sensorType:X.socket,onUpdate:function(n){const e=L(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]),t=L(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]);this.points=[e,Te(e,t,!0),t]}}),new de({sensorType:X.smoke,verticalCableLength:6,onUpdate:function(n){const e=L(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),t=L(this.parent.northWestCorner,[0*this.parent.width,.8*this.parent.height]),i=this.parent.northWestCorner;this.points=[e,t,i,Te(i,n.serverRoom,!0),n.serverRoom]}}),new de({sensorType:X.ethernet,offset:[.3,0],onUpdate:function(){const n=this.parent.parent.serverRoom,e=L(this.parent.northWestCorner,[0,.5*this.parent.height-2]);this.points=[e,Te(n,e,!1),n]}}),new de({sensorType:X.ethernet,offset:[.3,0],onUpdate:function(){const n=this.parent.parent.serverRoom,e=L(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[e,Te(n,e,!1),n]}}),new de({offset:[-.3,0],sensorType:X.ethernet,onUpdate:function(){const n=this.parent.parent.serverRoom,e=L(this.parent.northWestCorner,[this.parent.width,.5*this.parent.height-2]);this.points=[e,Te(n,e,!1),n]}}),new de({sensorType:X.pir,cableType:wa.SharedEthernet,offset:[0,.3],onUpdate:function(n){const e=this.parent,t=L(e.northWestCorner,[e.width/2,0]),i=Te(t,n.serverRoom,!0);this.points=[t,i,n.serverRoom]}}),new _r({onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}}),new $s({sensorType:X.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]}),new Wi({name:"Hall",floor:ie.ground,onUpdate:function(n){this.northWestCorner=n.stair.stairOrigin,this.squaredRoom(n.stair.totalWidth-n.stair.walkWidth,n.stramien.in.ns.b-n.stair.stairOrigin[1]-n.wallInnerThickness)},parts:[new de({sensorType:X.pir,cableType:wa.SharedEthernet,offset:[-.3,0],onUpdate:function(n){const e=this.parent,t=L(e.northWestCorner,[e.width,e.height-1]),i=L(e.northWestCorner,[e.width,e.height]);this.points=[t,i,n.serverRoom]}}),new it({type:He.inner,floor:ie.ground,onUpdate:function(n){this.drawByRoom(1,2,n,Ut.straight,Ut.straight)},parts:[new Jn({rotate:0,scale:[-1,1],onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,1,-(1.2+n.wallInnerThickness))}}),...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,offsetWall:.3,onUpdate:function(e){const t=this.parent.getPosition(Q.in,1,-2.5);this.points=[t,Te(e.serverRoom,t,!1),e.serverRoom]}})),...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,offsetWall:-.3,onUpdate:function(e){const t=L(this.parent.getPosition(Q.in,1,-2.5),[e.wallInnerThickness,0]);this.points=[t,Te(e.serverRoom,t,!1),e.serverRoom]}}))]}),new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(Q.in,0,2.5);this.points=[e,Te(n.serverRoom,e,!1),n.serverRoom]}})]}),new _r({onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]}),new Wi({name:"Office",floor:ie.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.a],this.squaredRoom(n.stramien.in.we.c-n.stramien.in.we.b,n.stramien.in.ns.b-n.stramien.in.ns.a-(n.stramien.in.ns.b-n.stair.stairOrigin[1])-n.wallInnerThickness)},parts:[new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[...[2/6,4/6].map(n=>new de({offsetWall:.3,sensorType:X.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(Q.in,n,0);this.points=[t,Te(e,t,!1),e]}}))]}),new it({type:He.inner,onUpdate:function(n){this.drawByRoom(2,3,n,Ut.straight,Ut.straight)},parts:[new Jn({rotate:90,scale:[1,1],onUpdate:function(n){this.origin=this.parent.getPosition(Q.in,1,-(n.stair.totalWidth+n.wallInnerThickness-this.width))}}),...[0,1,2].map(n=>new de({amount:2,offsetWall:-.3,sensorType:X.socket,onUpdate:function(e){const i=this.parent.getPosition(Q.in,(n+1)/6,0);this.points=[i]}})),...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,offsetWall:.3,onUpdate:function(e){const i=this.parent.getPosition(Q.in,.5,0);this.points=[i,Te(e.serverRoom,i,!1),e.serverRoom]}})),new de({sensorType:X.lightSwitch,offsetWall:-.3,onUpdate:function(n){const t=L(this.parent.getPosition(Q.in,.5,0),[0,n.wallInnerThickness]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]}),new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[...[X.camera,X.poe].map(n=>new de({sensorType:n,cableType:wa.OutsidePOE,offsetWall:-.3,onUpdate:function(e){const t=this.parent.getPosition(Q.in,0,0);this.points=[L(t,[e.wallOuterThickness,0]),L(t,[-1,1]),e.serverRoom]}})),...[2/6,4/6].map(n=>new de({offsetWall:-.3,sensorType:X.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(Q.in,n,0);this.points=[t,Te(e,t,!1),e]}}))]}),new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[...[1/6,5/6].map(n=>new de({offset:[0,.3],sensorType:X.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(Q.in,n,0);this.points=[t,Te(e,t,!1),e]}}))]}),new de({sensorType:X.smoke,onUpdate:function(n){const e=L(this.parent.northWestCorner,[.5*this.parent.width,.5*this.parent.height]);this.points=[e,Te(e,n.serverRoom,!0),n.serverRoom]}}),new de({sensorType:X.socket,amount:2,via:ie.ceiling,group:6,offset:[0,.3],onUpdate:function(n){const i=L(this.parent.northWestCorner,[1,0]);this.points=[i]}}),new de({sensorType:X.socket,amount:2,group:6,offset:[0,.3],onUpdate:function(n){const e=this.parent,i=L(e.northWestCorner,[e.width-1,0]);this.points=[i]}}),new de({sensorType:X.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(n){const e=this.parent,i=L(e.northWestCorner,[0,e.height-1]);this.points=[i]}}),new de({sensorType:X.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(n){const i=L(this.parent.northWestCorner,[0,1]);this.points=[i]}}),new de({sensorType:X.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(n){const e=this.parent,i=L(e.northWestCorner,[e.width,1]);this.points=[i]}}),new de({sensorType:X.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(n){const e=this.parent,i=L(e.northWestCorner,[e.width,e.height-1]);this.points=[i]}}),new de({sensorType:X.socket,amount:2,cableOnly:!0,group:6,onUpdate:function(n){const e=this.parent;this.points=[L(e.northWestCorner,[0,e.height-1]),L(e.northWestCorner,[0,0]),L(e.northWestCorner,[e.width,0]),L(e.northWestCorner,[e.width,e.height]),L(e.northWestCorner,[.5*e.width,e.height]),Te(n.serverRoom,L(e.northWestCorner,[.5*e.width,e.height]),!1),n.serverRoom]}}),new _r({onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}}),new $s({sensorType:X.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]}),new Wi({name:"Toilet",floor:ie.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b+n.stair.totalWidth-n.stair.walkWidth+n.wallInnerThickness,n.stramien.in.ns.b-1.2-n.wallInnerThickness],this.squaredRoom(.8,1.2)},parts:[new it({type:He.inner,onUpdate:function(n){this.drawByRoom(0,1,n,Ut.straight,Ut.outside)}}),new it({type:He.inner,onUpdate:function(n){this.drawByRoom(1,2,n,Ut.outside,Ut.straight)}}),new it({type:He.theoretic,floor:ie.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const e=this.parent;this.origin=L(e.northWestCorner,[0*e.width,1*e.height]),this.innerWallLength=e.height,this.sides={[Q.in]:[L(this.origin,[0,0]),L(this.origin,[0,-this.innerWallLength])]}},parts:[new de({sensorType:X.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(Q.in,0,.8);this.points=[e,Te(n.serverRoom,e,!1),n.serverRoom]}}),new Jn({scale:[1,1],rotate:0,floor:ie.ground,onUpdate:function(n){this.origin=L(this.parent.getPosition(Q.in,0,0),[-n.wallInnerThickness,0])}})]}),new _r({onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}}),new $s({sensorType:X.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]}),new Wi({name:"Server",floor:ie.ground,onUpdate:function(n){const t=n.stramien.in.we.b+n.stair.totalWidth-n.stair.walkWidth+1.2;this.northWestCorner=[t,n.stramien.in.ns.b-1-n.wallInnerThickness],this.squaredRoom(n.stramien.in.we.c-t,1)},parts:[new it({type:He.inner,onUpdate:function(n){this.drawByRoom(0,1,n,Ut.straight,Ut.straight)},parts:[...[0,1,2].map(n=>new de({amount:1===n?2:1,offsetWall:1===n?-.3:.3,sensorType:X.socket,onUpdate:function(e){const t=e.serverRoom,i=this.parent.getPosition(Q.in,(n+1)/4,0);this.points=[L(i,[0,1===n?-e.wallInnerThickness:0]),L(i,[0,0]),Te(t,i,!1),t]}}))]}),new de({sensorType:X.smoke,onUpdate:function(n){const e=this.parent.center;this.points=[e,Te(e,n.serverRoom,!0),n.serverRoom]}}),...[X.poe,X.wifi].map(n=>new de({offset:[0,.3],sensorType:n,onUpdate:function(e){const t=this.parent.center;this.points=[t,Te(t,e.serverRoom,!0),e.serverRoom]}})),...[X.lightSwitch,X.temperature].map(n=>new de({sensorType:n,offset:[0,.3],onUpdate:function(e){const t=this.parent,i=L(t.northWestCorner,[.2*t.width,0*t.height]),r=L(t.northWestCorner,[0*t.width,0*t.height]);this.points=[i,r,Te(e.serverRoom,r,!1),e.serverRoom]}})),new _r({onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}}),new $s({sensorType:X.ventIn,size:100,onUpdate:function(n){const t=this.parent.center;this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]}),new Wi({name:"Tower",floor:ie.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,this.outOfDesign||(this.northWestCorner=[n.stramien.out.we.c-(n.wallOuterThickness-n.wallInnerThickness),n.tower.innerCoords[0][1]],this.center=L(this.northWestCorner,[1,1]),this.centralElectricity=this.center,this.coords=[this.northWestCorner,n.tower.innerCoords[0],n.tower.innerCoords[1],n.tower.innerCoords[2],n.tower.innerCoords[3],[n.tower.innerCoords[3][0],n.stramien.in.ns.b-n.wallInnerThickness],[this.northWestCorner[0],n.stramien.in.ns.b-n.wallInnerThickness]])},parts:[new it({type:He.inner,floor:ie.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&this.drawByRoom(6,0,n,Ut.outside,Ut.straight)},parts:[new Jn({scale:[1,1],rotate:180,floor:ie.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&(this.floor=ie.ground,this.origin=this.parent.getPosition(Q.in,1,0))}})]}),new it({type:He.inner,floor:ie.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&this.drawByRoom(5,6,n,Ut.straight,Ut.outside)},parts:[new Jn({scale:[-1,1],rotate:-90,floor:ie.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&(this.floor=ie.ground,this.origin=this.parent.getPosition(Q.in,0,n.wallInnerThickness))}})]}),new de({sensorType:X.pir,cableType:wa.SharedEthernet,offset:[.3,0],onUpdate:function(n){const e=this.parent,t=L(e.northWestCorner,[0,e.height-1]),i=Te(t,n.serverRoom,!0);this.points=[t,i,n.serverRoom]}}),new _r({onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]}),new Wi({name:"Laundry",floor:ie.ground,onUpdate:function(n){const e=n.stramien.in.ns.b-n.stair.stairOrigin[1]-1.2-2*n.wallInnerThickness,t=n.stramien.in.we.b+n.stair.totalWidth-n.stair.walkWidth+n.wallInnerThickness;this.northWestCorner=[t,n.stair.stairOrigin[1]];const i=[t+1.2-n.wallInnerThickness,n.stramien.in.ns.b-1-2*n.wallInnerThickness];this.width=gt(n.stramien.in.we.c-t);const r=this.width;this.height=gt(e),this.coords=[this.northWestCorner,L(this.northWestCorner,[r,0]),L(this.northWestCorner,[r,e]),[this.northWestCorner[0]+r,i[1]],i,[i[0],this.northWestCorner[1]+e],L(this.northWestCorner,[0,e])],this.center=L(this.northWestCorner,[r/2,e/2]),this.centralElectricity=this.center},parts:[new de({sensorType:X.smoke,onUpdate:function(n){const e=this.parent.center;this.points=[e,Te(e,n.serverRoom,!0),n.serverRoom]}}),new de({sensorType:X.ethernet,offset:[.3,0],onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=L(t.northWestCorner,[0*t.width,.5*t.height]);this.points=[i,Te(e,i,!1),e]}}),new _r({onUpdate:function(n){const t=L(this.parent.center,[0,0]);this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}}),new $s({sensorType:X.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,Te(n.serverRoom,t,!1),n.serverRoom]}})]}),...oSe]},us=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];Math,Math;var $f=(()=>{return(n=$f||($f={})).amount="amount",n.name="name",n.sizeOrVersion="sizeOrVersion",n.price="price",n.priceAvg="priceAvg",n.priceMax="priceMax",n.priceTotal="priceTotal",n.remarks="other",n.unit="unit",$f;var n})();class _c{constructor(e){this.sectionFold=!1,Object.assign(this,e)}}class Mi{constructor(e){this.amount=1,this.type="single",Object.assign(this,e)}get calcPrice(){return gt(this.amount*this.price,2)}get calcAmount(){return this.amount}}class t6 extends Mi{constructor(e){super(e),this.costs=[],this.type="group",this.collapsed=!1,Object.assign(this,e)}get folded(){return`<span class="material-icons">expand_${this.collapsed?"less":"more"}</span>`}toggleFold(){this.collapsed=!this.collapsed}get calcPrice(){return Tw(this.costs.map(e=>e.calcPrice))}get calcAmount(){return Tw(this.costs.map(e=>e.amount))}}class fSe extends t6{constructor(e){super(e),this.costs=[],this.type="total",Object.assign(this,e)}get calcPrice(){return Tw(this.costs.map(e=>e.calcPrice))}get calcAmount(){return 0}get folded(){return'<span class="material-icons">remove</span>'}}let rr=(()=>{class n{constructor(t){this.appService=t,this.house$=new Fn(new sSe(aSe)),this.roomKeys=this.house$.value.partsFlatten.filter(i=>i instanceof Wi).map(i=>i.selector),this.wallKeys=this.house$.value.partsFlatten.filter(i=>i instanceof it).map(i=>i.selector),this.doorKeys=this.house$.value.partsFlatten.filter(i=>i instanceof Jn).map(i=>i.selector),this.windowKeys=this.house$.value.partsFlatten.filter(i=>i instanceof Hr).map(i=>i.selector),this.sensorKeys=this.house$.value.partsFlatten.filter(i=>i instanceof de).map(i=>i.selector).sort((i,r)=>i.localeCompare(r))}update(t="house",i,r,s){const o=this.house$.value;"house"===t&&(o[i]=r),"stair"===t&&(o.stair[i]=r),"cross"===t&&(o.cross[i]=r),o.calculateHouse(),o.calculateStats(),this.house$.next(o),void 0!==s&&(this.appService.tag$.next(s),clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.appService.tag$.next(void 0)},600))}destroyParts(){const t=r=>{r.parts.forEach(function(){var s=Ar(function*(o){o.svg=void 0,void 0!==o.parts&&t(o)});return function(o){return s.apply(this,arguments)}}())},i=this.house$.value;t(i),t(i.cross),t(i.stair)}getGroups(t){return[...new Set(Object.values(this.house$.value.partsFlatten).filter(r=>r instanceof de).filter(r=>r.sensorType===t).map(r=>r.group))].filter(r=>r).sort((r,s)=>r-s)}getOutlets(t){return Object.values(this.house$.value.partsFlatten).filter(r=>r instanceof de).filter(r=>r.sensorType===t).map(r=>r.amount).reduce((r,s)=>r+s,0)}getCable(t,i=1){return gt(Object.values(this.house$.value.partsFlatten).filter(s=>s instanceof de).filter(s=>s.sensorType===t).map(s=>s.cableLength).reduce((s,o)=>s+o,0),i)}getWallLength(){const t=this.house$.value;return{innerLength:Math.ceil(pl(Object.values(t.partsFlatten).filter(s=>s instanceof it).map(s=>{let o=0;return s.type===He.inner&&(o+=s.getLength(Q.out)),o+=s.getLength(Q.in),o}))),outerLength:Math.ceil(pl(Object.values(t.partsFlatten).filter(s=>s instanceof it).filter(s=>s.type===He.outer).map(s=>s.getLength(Q.out)),1))}}getWallArea(){const t=this.house$.value;return{innerArea:Math.ceil(pl(Object.values(t.partsFlatten).filter(s=>s instanceof it).map(s=>{let o=0;return s.type===He.inner&&(o+=s.getArea(Q.out)),o+=s.getArea(Q.in),o}))),outerArea:Math.ceil(pl(Object.values(t.partsFlatten).filter(s=>s instanceof it).filter(s=>s.type===He.outer).map(s=>s.getArea(Q.out)),1))}}getT(t,i,r,s=(()=>!0),o=!0){const a=function uSe(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(us[255&n]+us[n>>8&255]+us[n>>16&255]+us[n>>24&255]+"-"+us[255&e]+us[e>>8&255]+"-"+us[e>>16&15|64]+us[e>>24&255]+"-"+us[63&t|128]+us[t>>8&255]+"-"+us[t>>16&255]+us[t>>24&255]+us[255&i]+us[i>>8&255]+us[i>>16&255]+us[i>>24&255]).toLowerCase()}(),l=Object.values(this.house$.value.partsFlatten.filter(c=>c instanceof t).filter(c=>s(c)).reduce((c,u)=>{const d=i.map(h=>`${u[h]}`).join(",");return d in c||(c[d]={count:0,part:u}),c[d].count+=t!==de||o?1:u.getLength(),c},{})).map(c=>{const u=new Mi(r(c.part));return u.amount=gt(c.count,1),u.uuid=a,u});if(l.length>1){const c=new t6({uuid:a,name:`${l[0].name}`,costs:l});return c[l[0].name]=!1,c}{if(!l[0])return;const c=l[0];return c.uuid=void 0,c}}}return n.\u0275fac=function(t){return new(t||n)(K(Ii))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qf=(()=>{class n{constructor(t,i){this.overlay=t,this.houseService=i,this.tooltipHTML$=new Fn(void 0),this.unsubscribe=new xt}attachPopup([t,i],r){this.detachOverlay(),this.origin=r instanceof de?r.svgIcon.node():r.svg.node(),this.overlayRef=this.overlay.create({positionStrategy:this.getPositionStrategy([t,i]),scrollStrategy:this.overlay.scrollStrategies.reposition(),hasBackdrop:!1}),this.overlayRef.backdropClick().pipe(Ln(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.attachOverlay(r)}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&this.overlayRef.detach()}updateOverlay(){}attachOverlay(t){if(this.overlayRef&&!this.overlayRef.hasAttached()){const i=new v_(JMe);this.componentRef=this.overlayRef.attach(i),this.componentRef.instance.html=t.tooltip(this.houseService.house$.value)}}getPositionStrategy([t,i]){return this.overlay.position().flexibleConnectedTo(this.origin).withPositions([new y_({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"},0,-20),new y_({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"},0,20,"flipped")]).withPush(!0)}}return n.\u0275fac=function(t){return new(t||n)(K(Ea),K(rr))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pSe=(()=>{class n{constructor(t,i){this.appService=t,this.houseService=i,this.appService.states$.subscribe(r=>{this.states=r,this.house=this.houseService.house$.value,this.cross=this.house.cross,this.filterOut(),this.appService.update$.next()})}updateStateBasedOnSection(t,i){if(this.section===t)return;this.section=t;const r=this.appService.states$.value;this.buildState(r,[ss.grid],[ke.basics].includes(t)),this.buildState(r,[ss.silhouette],[ke.roofEdge].includes(t)),this.buildState(r,[ss.measure,ss.minimumHeight],[ke.stairBasic,ke.stairCheck,ke.stairPlan,ke.basics,ke.roof70,ke.roofCircle].includes(t)),this.buildState(r,[ss.doors],![ke.passiv,ke.welcome].includes(t)),this.buildState(r,[X.socket,X.perilex],[ke.wiredPower].includes(t)),this.buildState(r,[X.poe,X.ethernet,X.wifi],[ke.wiredEthernet].includes(t)),this.buildState(r,[X.ventIn,X.ventOut],[ke.wiredVent].includes(t)),this.buildState(r,[X.dimmer,X.dlc,X.lightBulb,X.lightSwitch],[ke.wiredLight].includes(t)),this.buildState(r,[X.camera,X.alarm,X.smoke],[ke.wiredSafety].includes(t)),this.buildState(r,[X.pir],[ke.wiredExtra,ke.wiredSafety].includes(t)),this.buildState(r,[X.blinds,X.temperature],[ke.wiredExtra].includes(t)),this.appService.commitState(r)}filterOut(){this.house.tower.footprintVisible=this.states[ss.towerFootprint],this.house.partsFlatten.filter(t=>t instanceof Jn).forEach(t=>t.visible=this.states[ss.doors]),this.house.partsFlatten.filter(t=>t instanceof it).filter(t=>t.type===He.theoretic).forEach(t=>t.outOfDesign=!this.states[ss.theoreticalWalls]),[...this.house.parts,...this.cross.parts,...this.house.stair.parts].filter(t=>t instanceof ir).forEach(t=>t.visible=this.states[ss.measure]),this.house.parts.filter(t=>t.selector.includes("house-stramien-")).forEach(t=>{t.visible=this.states[ss.stramien]}),this.house.parts.filter(t=>t.selector.includes("grid-index")).forEach(t=>{t.visible=this.states[ss.grid]}),this.house.partsFlatten.filter(t=>t instanceof de).forEach(t=>{t.visible=this.states[t.sensorType]})}buildState(t,i,r){i.forEach(s=>{t[s]=r})}}return n.\u0275fac=function(t){return new(t||n)(K(Ii),K(rr))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vc(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pU(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Xw,Xo,vr,Li,Ko,eC,tC,xU,MU,Jf,P0,l,c,u,d,h,f,n,e,t,i,r,s,o,a,p,wo={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Yf={duration:.5,overwrite:!1,delay:0},Zo=1e8,ei=1e-8,Zw=2*Math.PI,mSe=Zw/4,gSe=0,mU=Math.sqrt,_Se=Math.cos,vSe=Math.sin,Ur=function(e){return"string"==typeof e},ji=function(e){return"function"==typeof e},yc=function(e){return"number"==typeof e},Kw=function(e){return typeof e>"u"},ml=function(e){return"object"==typeof e},qs=function(e){return!1!==e},gU=function(){return typeof window<"u"},n6=function(e){return ji(e)||Ur(e)},_U="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},ds=Array.isArray,Qw=/(?:-?\.?\d|\.)+/gi,vU=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Xf=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Jw=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,yU=/[+-]=-?[.\d]+/,bU=/[^,'"\[\]\s]+/gi,ySe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Co={},r6={},wU=function(e){return(r6=fh(e,Co))&&To},nC=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},s6=function(e,t){return!t&&console.warn(e)},CU=function(e,t){return e&&(Co[e]=t)&&r6&&(r6[e]=t)||Co},T0=function(){return 0},bSe={suppressEvents:!0,isStart:!0},E0={suppressEvents:!0},iC={},Au=[],rC={},Mo={},sC={},SU=30,o6=[],oC="",aC=function(e){var i,r,t=e[0];if(ml(t)||ji(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=o6.length;r--&&!o6[r].targetTest(t););i=o6[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new QU(e[r],i)))||e.splice(r,1);return e},hh=function(e){return e._gsap||aC(ea(e))[0]._gsap},TU=function(e,t,i){return(i=e[t])&&ji(i)?e[t]():Kw(i)&&e.getAttribute&&e.getAttribute(t)||i},Ys=function(e,t){return(e=e.split(",")).forEach(t)||e},sr=function(e){return Math.round(1e5*e)/1e5||0},Zr=function(e){return Math.round(1e7*e)/1e7||0},Zf=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===i?e+r:"-"===i?e-r:"*"===i?e*r:e/r},xSe=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},a6=function(){var i,r,e=Au.length,t=Au.slice(0);for(rC={},Au.length=0,i=0;i<e;i++)(r=t[i])&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},EU=function(e,t,i,r){Au.length&&a6(),e.render(t,i,r||Xo),Au.length&&a6()},DU=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(bU).length<2?t:Ur(e)?e.trim():e},AU=function(e){return e},Qo=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},fh=function(e,t){for(var i in t)e[i]=t[i];return e},RU=function n(e,t){for(var i in t)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=ml(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},l6=function(e,t){var r,i={};for(r in e)r in t||(i[r]=e[r]);return i},D0=function(e){var t=e.parent||Li,i=e.keyframes?function(e){return function(t,i){for(var r in i)r in t||"duration"===r&&e||"ease"===r||(t[r]=i[r])}}(ds(e.keyframes)):Qo;if(qs(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},IU=function(e,t,i,r,s){void 0===i&&(i="_first"),void 0===r&&(r="_last");var a,o=e[r];if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},c6=function(e,t,i,r){void 0===i&&(i="_first"),void 0===r&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},bc=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},ph=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},MSe=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},lC=function(e,t,i,r){return e._startAt&&(Xo?e._startAt.revert(E0):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},SSe=function n(e){return!e||e._ts&&n(e.parent)},kU=function(e){return e._repeat?Kf(e._tTime,e=e.duration()+e._rDelay)*e:0},Kf=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},u6=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},d6=function(e){return e._end=Zr(e._start+(e._tDur/Math.abs(e._ts||e._rts||ei)||0))},h6=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=Zr(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),d6(e),i._dirty||ph(i,e)),e},LU=function(e,t){var i;if((t._time||t._initted&&!t._dur)&&(i=u6(e.rawTime(),t),(!t._dur||R0(0,t.totalDuration(),i)-t._tTime>ei)&&t.render(i,!0)),ph(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-ei}},gl=function(e,t,i,r){return t.parent&&bc(t),t._start=Zr((yc(i)?i:i||e!==Li?Jo(e,i,t):e._time)+t._delay),t._end=Zr(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),IU(e,t,"_first","_last",e._sort?"_start":0),cC(t)||(e._recent=t),r||LU(e,t),e._ts<0&&h6(e,e._tTime),e},PU=function(e,t){return(Co.ScrollTrigger||nC("scrollTrigger",t))&&Co.ScrollTrigger.create(t,e)},OU=function(e,t,i,r){return vC(e,t),e._initted?!i&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&MU!==So.frame?(Au.push(e),e._lazy=[t,r],1):void 0:1},TSe=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},cC=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Qf=function(e,t,i,r){var s=e._repeat,o=Zr(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Zr(o*(s+1)+e._rDelay*s):o,a>0&&!r?h6(e,e._tTime=e._tDur*a):e.parent&&d6(e),i||ph(e.parent,e),e},FU=function(e){return e instanceof Xs?ph(e):Qf(e,e._dur)},ASe={_start:0,endTime:T0,totalDuration:T0},Jo=function n(e,t,i){var a,l,c,r=e.labels,s=e._recent||ASe,o=e.duration()>=Zo?s.endTime(!1):e._dur;return Ur(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c="%"===t.substr(-1),a=t.indexOf("="),"<"===l||">"===l?(a>=0&&(t=t.replace(/=/,"")),("<"===l?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&i&&(l=l/100*(ds(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):null==t?o:+t},A0=function(e,t,i){var a,l,r=yc(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s];if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=qs(l.vars.inherit)&&l.parent;o.immediateRender=qs(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Ir(t[0],o,t[s+1])},Ru=function(e,t){return e||0===e?t(e):t},R0=function(e,t,i){return i<e?e:i>t?t:i},hs=function(e,t){return Ur(e)&&(t=ySe.exec(e))?t[1]:""},uC=[].slice,NU=function(e,t){return e&&ml(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&ml(e[0]))&&!e.nodeType&&e!==Ko},ea=function(e,t,i){return vr&&!t&&vr.selector?vr.selector(e):!Ur(e)||i||!eC&&e2()?ds(e)?function(e,t,i){return void 0===i&&(i=[]),e.forEach(function(r){var s;return Ur(r)&&!t||NU(r,1)?(s=i).push.apply(s,ea(r)):i.push(r)})||i}(e,i):NU(e)?uC.call(e,0):e?[e]:[]:uC.call((t||tC).querySelectorAll(e),0)},dC=function(e){return e=ea(e)[0]||s6("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return ea(t,i.querySelectorAll?i:i===e?s6("Invalid scope")||tC.createElement("div"):e)}},zU=function(e){return e.sort(function(){return.5-Math.random()})},BU=function(e){if(ji(e))return e;var t=ml(e)?e:{each:e},i=mh(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=t.axis,u=r,d=r;return Ur(r)?u=d={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(u=r[0],d=r[1]),function(h,f,p){var _,v,y,b,x,M,R,w,E,m=(p||t).length,g=o[m];if(!g){if(!(E="auto"===t.grid?0:(t.grid||[1,Zo])[1])){for(R=-Zo;R<(R=p[E++].getBoundingClientRect().left)&&E<m;);E--}for(g=o[m]=[],_=l?Math.min(E,m)*u-.5:r%E,v=E===Zo?0:l?m*d/E-.5:r/E|0,R=0,w=Zo,M=0;M<m;M++)y=M%E-_,b=v-(M/E|0),g[M]=x=c?Math.abs("y"===c?b:y):mU(y*y+b*b),x>R&&(R=x),x<w&&(w=x);"random"===r&&zU(g),g.max=R-w,g.min=w,g.v=m=(parseFloat(t.amount)||parseFloat(t.each)*(E>m?m-1:c?"y"===c?m/E:E:Math.max(E,m/E))||0)*("edges"===r?-1:1),g.b=m<0?s-m:s,g.u=hs(t.amount||t.each)||0,i=i&&m<0?XU(i):i}return m=(g[h]-g.min)/g.max||0,Zr(g.b+(i?i(m):m)*g.v)+g.u}},hC=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=Zr(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(yc(i)?0:hs(i))}},VU=function(e,t){var r,s,i=ds(e);return!i&&ml(e)&&(r=i=e.radius||Zo,e.values?(e=ea(e.values),(s=!yc(e[0]))&&(r*=r)):e=hC(e.increment)),Ru(t,i?ji(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var h,f,a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=Zo,u=0,d=e.length;d--;)(h=s?(h=e[d].x-a)*h+(f=e[d].y-l)*f:Math.abs(e[d]-a))<c&&(c=h,u=d);return u=!r||c<=r?e[u]:o,s||u===o||yc(o)?u:u+hs(o)}:hC(e))},HU=function(e,t,i,r){return Ru(ds(e)?!t:!0===i?!!(i=0):!r,function(){return ds(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+.99*i))/i)*i*r)/r})},UU=function(e,t,i){return Ru(i,function(r){return e[~~t(r)]})},I0=function(e){for(var r,s,o,a,t=0,i="";~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a="["===e.charAt(r+7),s=e.substr(r+7,o-r-7).match(a?bU:Qw),i+=e.substr(t,r-t)+HU(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},GU=function(e,t,i,r,s){var o=t-e,a=r-i;return Ru(s,function(l){return i+((l-e)/o*a||0)})},WU=function(e,t,i){var o,a,l,r=e.labels,s=Zo;for(o in r)(a=r[o]-t)<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},ta=function(e,t,i){var l,c,u,r=e.vars,s=r[t],o=vr,a=e._ctx;if(s)return l=r[t+"Params"],c=r.callbackScope||e,i&&Au.length&&a6(),a&&(vr=a),u=l?s.apply(c,l):s.call(c),vr=o,u},k0=function(e){return bc(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&ta(e,"onInterrupt"),e},zSe=function(e){var t=(e=!e.name&&e.default||e).name,i=ji(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:T0,render:xC,add:gC,kill:eTe,modifier:JSe,rawVars:0},o={targetTest:0,get:0,getSetter:bC,aliases:{},register:0};if(e2(),e!==r){if(Mo[t])return;Qo(r,Qo(l6(e,s),o)),fh(r.prototype,fh(s,l6(e,o))),Mo[r.prop=t]=r,e.targetTest&&(o6.push(r),iC[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}CU(t,r),e.register&&e.register(To,r,Zs)},ti=255,L0={aqua:[0,ti,ti],lime:[0,ti,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ti],navy:[0,0,128],white:[ti,ti,ti],olive:[128,128,0],yellow:[ti,ti,0],orange:[ti,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ti,0,0],pink:[ti,192,203],cyan:[0,ti,ti],transparent:[ti,ti,ti,0]},fC=function(e,t,i){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)*ti+.5|0},jU=function(e,t,i){var s,o,a,l,c,u,d,h,f,p,r=e?yc(e)?[e>>16,e>>8&ti,e&ti]:0:L0.black;if(!r){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),L0[e])r=L0[e];else if("#"===e.charAt(0)){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(r=parseInt(e.substr(1,6),16))>>16,r>>8&ti,r&ti,parseInt(e.substr(7),16)/255];r=[(e=parseInt(e.substr(1),16))>>16,e>>8&ti,e&ti]}else if("hsl"===e.substr(0,3))if(r=p=e.match(Qw),t){if(~e.indexOf("="))return r=e.match(vU),i&&r.length<4&&(r[3]=1),r}else l=+r[0]%360/360,c=+r[1]/100,s=2*(u=+r[2]/100)-(o=u<=.5?u*(c+1):u+c-u*c),r.length>3&&(r[3]*=1),r[0]=fC(l+1/3,s,o),r[1]=fC(l,s,o),r[2]=fC(l-1/3,s,o);else r=e.match(Qw)||L0.transparent;r=r.map(Number)}return t&&!p&&(s=r[0]/ti,o=r[1]/ti,a=r[2]/ti,u=((d=Math.max(s,o,a))+(h=Math.min(s,o,a)))/2,d===h?l=c=0:(f=d-h,c=u>.5?f/(2-d-h):f/(d+h),l=d===s?(o-a)/f+(o<a?6:0):d===o?(a-s)/f+2:(s-o)/f+4,l*=60),r[0]=~~(l+.5),r[1]=~~(100*c+.5),r[2]=~~(100*u+.5)),i&&r.length<4&&(r[3]=1),r},$U=function(e){var t=[],i=[],r=-1;return e.split(Iu).forEach(function(s){var o=s.match(Xf)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},qU=function(e,t,i){var l,c,u,d,r="",s=(e+r).match(Iu),o=t?"hsla(":"rgba(",a=0;if(!s)return e;if(s=s.map(function(h){return(h=jU(h,t,1))&&o+(t?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),i&&(u=$U(e),(l=i.c).join(r)!==u.c.join(r)))for(d=(c=e.replace(Iu,"1").split(Xf)).length-1;a<d;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!c)for(d=(c=e.split(Iu)).length-1;a<d;a++)r+=c[a]+s[a];return r+c[d]},Iu=function(){var e,n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in L0)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),BSe=/hsl[a]?\(/,YU=function(e){var i,t=e.join(" ");if(Iu.lastIndex=0,Iu.test(t))return i=BSe.test(t),e[1]=qU(e[1],i),e[0]=qU(e[0],i,$U(e[1])),!0},So=(n=Date.now,e=500,t=33,i=n(),r=i,o=s=1e3/240,p=function m(g){var y,b,x,M,_=n()-r,v=!0===g;if(_>e&&(i+=_-t),((y=(x=(r+=_)-i)-o)>0||v)&&(M=++d.frame,h=x-1e3*d.time,d.time=x/=1e3,o+=y+(y>=s?4:s-y),b=1),v||(l=c(m)),b)for(f=0;f<a.length;f++)a[f](x,h,M,g)},d={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(g){return h/(1e3/(g||60))},wake:function(){xU&&(!eC&&gU()&&(Ko=eC=window,tC=Ko.document||{},Co.gsap=To,(Ko.gsapVersions||(Ko.gsapVersions=[])).push(To.version),wU(r6||Ko.GreenSockGlobals||!Ko.gsap&&Ko||{}),u=Ko.requestAnimationFrame),l&&d.sleep(),c=u||function(g){return setTimeout(g,o-1e3*d.time+1|0)},P0=1,p(2))},sleep:function(){(u?Ko.cancelAnimationFrame:clearTimeout)(l),P0=0,c=T0},lagSmoothing:function(g,_){e=g||1/ei,t=Math.min(_,e,0)},fps:function(g){o=1e3*d.time+(s=1e3/(g||240))},add:function(g,_,v){var y=_?function(b,x,M,R){g(b,x,M,R),d.remove(y)}:g;return d.remove(g),a[v?"unshift":"push"](y),e2(),y},remove:function(g,_){~(_=a.indexOf(g))&&a.splice(_,1)&&f>=_&&f--},_listeners:a=[]}),e2=function(){return!P0&&So.wake()},vn={},VSe=/^[\d.\-M][\d.\-,\s]/,HSe=/["']/g,USe=function(e){for(var a,l,c,t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[r]=isNaN(c)?c.replace(HSe,"").trim():+c,r=l.substr(a+1).trim();return t},XU=function(e){return function(t){return 1-e(1-t)}},ZU=function n(e,t){for(var r,i=e._first;i;)i instanceof Xs?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},mh=function(e,t){return e&&(ji(e)?e:vn[e]||function(e){var t=(e+"").split("("),i=vn[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[USe(t[1])]:function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)}(e).split(",").map(DU)):vn._CE&&VSe.test(e)?vn._CE("",e):i}(e))||t},gh=function(e,t,i,r){void 0===i&&(i=function(l){return 1-t(1-l)}),void 0===r&&(r=function(l){return l<.5?t(2*l)/2:1-t(2*(1-l))/2});var o,s={easeIn:t,easeOut:i,easeInOut:r};return Ys(e,function(a){for(var l in vn[a]=Co[a]=s,vn[o=a.toLowerCase()]=i,s)vn[o+("easeIn"===l?".in":"easeOut"===l?".out":".inOut")]=vn[a+"."+l]=s[l]}),s},KU=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},pC=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/Zw*(Math.asin(1/r)||0),a=function(u){return 1===u?1:r*Math.pow(2,-10*u)*vSe((u-o)*s)+1},l="out"===e?a:"in"===e?function(c){return 1-a(1-c)}:KU(a);return s=Zw/s,l.config=function(c,u){return n(e,c,u)},l},mC=function n(e,t){void 0===t&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r="out"===e?i:"in"===e?function(s){return 1-i(1-s)}:KU(i);return r.config=function(s){return n(e,s)},r};Ys("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;gh(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(2*i,t)/2:1-Math.pow(2*(1-i),t)/2})}),vn.Linear.easeNone=vn.none=vn.Linear.easeIn,gh("Elastic",pC("in"),pC("out"),pC()),function(n,e){var s=function(a){return a<.36363636363636365?n*a*a:a<.7272727272727273?n*Math.pow(a-1.5/e,2)+.75:a<.9090909090909092?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};gh("Bounce",function(o){return 1-s(1-o)},s)}(7.5625,2.75),gh("Expo",function(n){return n?Math.pow(2,10*(n-1)):0}),gh("Circ",function(n){return-(mU(1-n*n)-1)}),gh("Sine",function(n){return 1===n?1:1-_Se(n*mSe)}),gh("Back",mC("in"),mC("out"),mC()),vn.SteppedEase=vn.steps=Co.SteppedEase={config:function(e,t){void 0===e&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0;return function(a){return((r*R0(0,.99999999,a)|0)+s)*i}}},Yf.ease=vn["quad.out"],Ys("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return oC+=n+","+n+"Params,"});var QU=function(e,t){this.id=gSe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:TU,this.set=t?t.getSetter:bC},t2=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Qf(this,+t.duration,1,1),this.data=t.data,vr&&(this._ctx=vr,vr.data.push(this)),P0||So.wake()}var e=n.prototype;return e.delay=function(i){return i||0===i?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Qf(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(e2(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(h6(this,i),!s._dp||s.parent||LU(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&gl(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===ei||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),EU(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+kU(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?i:1-i)+kU(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?Kf(this._tTime,s)+1:1},e.timeScale=function(i){if(!arguments.length)return this._rts===-ei?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?u6(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-ei?0:this._rts,this.totalTime(R0(-this._delay,this._tDur,r),!0),d6(this),MSe(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(e2(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==ei&&(this._tTime-=ei)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&gl(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(qs(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?u6(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){void 0===i&&(i=E0);var r=Xo;return Xo=i,this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents),"nested"!==this.data&&bc(this),Xo=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(r._ts||1),r=r._dp;return!this.parent&&this.vars.immediateRender?-1:s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,FU(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,FU(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(Jo(this,i),qs(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,qs(r))},e.play=function(i,r){return null!=i&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return null!=i&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return null!=i&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-ei:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-ei,this},e.isActive=function(){var s,i=this.parent||this._dp,r=this._start;return!(i&&!(this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-ei))},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),"onUpdate"===i&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=ji(i)?i:AU,a=function(){var c=r.then;r.then=null,ji(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&1===r.totalProgress()&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){k0(this)},n}();Qo(t2.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ei,_prom:0,_ps:!1,_rts:1});var Xs=function(n){function e(i,r){var s;return void 0===i&&(i={}),(s=n.call(this,i)||this).labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=qs(i.sortChildren),Li&&gl(i.parent||Li,vc(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&PU(vc(s),i.scrollTrigger),s}pU(e,n);var t=e.prototype;return t.to=function(r,s,o){return A0(0,arguments,this),this},t.from=function(r,s,o){return A0(1,arguments,this),this},t.fromTo=function(r,s,o,a){return A0(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,D0(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Ir(r,s,Jo(this,o),1),this},t.call=function(r,s,o){return gl(this,Ir.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new Ir(r,o,Jo(this,l)),this},t.staggerFrom=function(r,s,o,a,l,c,u){return o.runBackwards=1,D0(o).immediateRender=qs(o.immediateRender),this.staggerTo(r,s,o,a,l,c,u)},t.staggerFromTo=function(r,s,o,a,l,c,u,d){return a.startAt=o,D0(a).immediateRender=qs(a.immediateRender),this.staggerTo(r,s,a,l,c,u,d)},t.render=function(r,s,o){var h,f,p,m,g,_,v,y,b,x,M,R,a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:Zr(r),d=this._zTime<0!=r<0&&(this._initted||!c);if(this!==Li&&u>l&&r>=0&&(u=l),u!==this._tTime||o||d){if(a!==this._time&&c&&(u+=this._time-a,r+=this._time-a),h=u,b=this._start,_=!(y=this._ts),d&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(M=this._yoyo,g=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(100*g+r,s,o);if(h=Zr(u%g),u===l?(m=this._repeat,h=c):((m=~~(u/g))&&m===u/g&&(h=c,m--),h>c&&(h=c)),x=Kf(this._tTime,g),!a&&this._tTime&&x!==m&&(x=m),M&&1&m&&(h=c-h,R=1),m!==x&&!this._lock){var w=M&&1&x,E=w===(M&&1&m);if(m<x&&(w=!w),a=w?0:c,this._lock=1,this.render(a||(R?0:Zr(m*g)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&ta(this,"onRepeat"),this.vars.repeatRefresh&&!R&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,E&&(this._lock=2,this.render(a=w?c:-1e-4,!0),this.vars.repeatRefresh&&!R&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;ZU(this,R)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(v=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,Zr(a),Zr(h)),v&&(u-=h-(h=v._start))),this._tTime=u,this._time=h,this._act=!y,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&h&&!s&&(ta(this,"onStart"),this._tTime!==u))return this;if(h>=a&&r>=0)for(f=this._first;f;){if(p=f._next,(f._act||h>=f._start)&&f._ts&&v!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(h-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(h-f._start)*f._ts,s,o),h!==this._time||!this._ts&&!_){v=0,p&&(u+=this._zTime=-ei);break}}f=p}else{o=o||Xo,f=this._last;for(var P=r<0?r:h;f;){if(p=f._prev,(f._act||P<=f._end)&&f._ts&&v!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(P-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(P-f._start)*f._ts,s,o),h!==this._time||!this._ts&&!_){v=0,p&&(u+=this._zTime=P?-ei:ei);break}}f=p}}if(v&&!s&&(this.pause(),v.render(h>=a?0:-ei)._zTime=h>=a?1:-1,this._ts))return this._start=b,d6(this),this.render(r,s,o);this._onUpdate&&!s&&ta(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(b===this._start||Math.abs(y)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&bc(this,1),!s&&(!(r<0)||a)&&(u||a||!l)&&(ta(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(yc(s)||(s=Jo(this,s,r)),!(r instanceof t2)){if(ds(r))return r.forEach(function(a){return o.add(a,s)}),this;if(Ur(r))return this.addLabel(r,s);if(!ji(r))return this;r=Ir.delayedCall(0,r)}return this!==r?gl(this,r,s):this},t.getChildren=function(r,s,o,a){void 0===r&&(r=!0),void 0===s&&(s=!0),void 0===o&&(o=!0),void 0===a&&(a=-Zo);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Ir?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return Ur(r)?this.removeLabel(r):ji(r)?this.killTweensOf(r):(c6(this,r),r===this._recent&&(this._recent=this._last),ph(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Zr(So.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=Jo(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=Ir.delayedCall(0,s||T0,o);return a.data="isPause",this._hasPause=1,gl(this,a,Jo(this,r))},t.removePause=function(r){var s=this._first;for(r=Jo(this,r);s;)s._start===r&&"isPause"===s.data&&bc(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)ku!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var u,o=[],a=ea(r),l=this._first,c=yc(s);l;)l instanceof Ir?xSe(l._targets,a)&&(c?(!ku||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var f,o=this,a=Jo(o,r),c=s.startAt,u=s.onStart,d=s.onStartParams,h=s.immediateRender,p=Ir.to(o,Qo({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||ei,onStart:function(){if(o.pause(),!f){var g=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());p._dur!==g&&Qf(p,g,0,1).render(p._time,!0,!0),f=1}u&&u.apply(p,d||[])}},s));return h?p.render(0):p},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,Qo({startAt:{time:Jo(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return void 0===r&&(r=this._time),WU(this,Jo(this,r))},t.previousLabel=function(r){return void 0===r&&(r=this._time),WU(this,Jo(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+ei)},t.shiftChildren=function(r,s,o){void 0===o&&(o=0);for(var c,a=this._first,l=this.labels;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return ph(this)},t.invalidate=function(){var r=this._first;for(this._lock=0;r;)r.invalidate(),r=r._next;return n.prototype.invalidate.call(this)},t.clear=function(r){void 0===r&&(r=!0);for(var o,s=this._first;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),ph(this)},t.totalDuration=function(r){var c,u,d,s=0,o=this,a=o._last,l=Zo;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(d=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),(u=a._start)>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,gl(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;Qf(o,o===Li&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(Li._ts&&(EU(Li,u6(r,Li)),MU=So.frame),So.frame>=SU){SU+=wo.autoSleep||120;var s=Li._first;if((!s||!s._ts)&&wo.autoSleep&&So._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||So.sleep()}}},e}(t2);Qo(Xs.prototype,{_lock:0,_hasPause:0,_forcing:0});var ku,_C,jSe=function(e,t,i,r,s,o,a){var d,h,f,p,m,g,_,v,l=new Zs(this._pt,e,t,0,1,rG,null,s),c=0,u=0;for(l.b=i,l.e=r,i+="",(_=~(r+="").indexOf("random("))&&(r=I0(r)),o&&(o(v=[i,r],e,t),i=v[0],r=v[1]),h=i.match(Jw)||[];d=Jw.exec(r);)p=d[0],m=r.substring(c,d.index),f?f=(f+1)%5:"rgba("===m.substr(-5)&&(f=1),p!==h[u++]&&(g=parseFloat(h[u-1])||0,l._pt={_next:l._pt,p:m||1===u?m:",",s:g,c:"="===p.charAt(1)?Zf(g,p)-g:parseFloat(p)-g,m:f&&f<4?Math.round:0},c=Jw.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(yU.test(r)||_)&&(l.e=0),this._pt=l,l},gC=function(e,t,i,r,s,o,a,l,c,u){ji(r)&&(r=r(s||0,e,o));var p,d=e[t],h="get"!==i?i:ji(d)?c?e[t.indexOf("set")||!ji(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():d,f=ji(d)?c?ZSe:nG:yC;if(Ur(r)&&(~r.indexOf("random(")&&(r=I0(r)),"="===r.charAt(1)&&((p=Zf(h,r)+(hs(h)||0))||0===p)&&(r=p)),!u||h!==r||_C)return isNaN(h*r)||""===r?(!d&&!(t in e)&&nC(t,r),jSe.call(this,e,t,h,r,f,l||wo.stringFilter,c)):(p=new Zs(this._pt,e,t,+h||0,r-(h||0),"boolean"==typeof d?QSe:iG,0,f),c&&(p.fp=c),a&&p.modifier(a,this,e),this._pt=p)},JU=function(e,t,i,r,s,o){var a,l,c,u;if(Mo[e]&&!1!==(a=new Mo[e]).init(s,a.rawVars?t[e]:function(e,t,i,r,s){if(ji(e)&&(e=O0(e,s,t,i,r)),!ml(e)||e.style&&e.nodeType||ds(e)||_U(e))return Ur(e)?O0(e,s,t,i,r):e;var a,o={};for(a in e)o[a]=O0(e[a],s,t,i,r);return o}(t[e],r,s,o,i),i,r,o)&&(i._pt=l=new Zs(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==Jf))for(c=i._ptLookup[i._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},vC=function n(e,t){var M,R,w,E,P,Y,J,q,I,G,k,F,N,i=e.vars,r=i.ease,s=i.startAt,o=i.immediateRender,a=i.lazy,l=i.onUpdate,c=i.onUpdateParams,u=i.callbackScope,d=i.runBackwards,h=i.yoyoEase,f=i.keyframes,p=i.autoRevert,m=e._dur,g=e._startAt,_=e._targets,v=e.parent,y=v&&"nested"===v.data?v.vars.targets:_,b="auto"===e._overwrite&&!Xw,x=e.timeline;if(x&&(!f||!r)&&(r="none"),e._ease=mh(r,Yf.ease),e._yEase=h?XU(mh(!0===h?r:h,Yf.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!x&&!!i.runBackwards,!x||f&&!i.stagger){if(F=(q=_[0]?hh(_[0]).harness:0)&&i[q.prop],M=l6(i,iC),g&&(t<0&&d&&o&&!p?g.render(-1,!0):g.revert(d&&m?E0:bSe),g._lazy=0),s){if(bc(e._startAt=Ir.set(_,Qo({data:"isStart",overwrite:!1,parent:v,immediateRender:!0,lazy:qs(a),startAt:null,delay:0,onUpdate:l,onUpdateParams:c,callbackScope:u,stagger:0},s))),t<0&&(Xo||!o&&!p)&&e._startAt.revert(E0),o&&m&&t<=0)return void(t&&(e._zTime=t))}else if(d&&m&&!g)if(t&&(o=!1),w=Qo({overwrite:!1,data:"isFromStart",lazy:o&&qs(a),immediateRender:o,stagger:0,parent:v},M),F&&(w[q.prop]=F),bc(e._startAt=Ir.set(_,w)),t<0&&(Xo?e._startAt.revert(E0):e._startAt.render(-1,!0)),e._zTime=t,o){if(!t)return}else n(e._startAt,ei);for(e._pt=e._ptCache=0,a=m&&qs(a)||a&&!m,R=0;R<_.length;R++){if(J=(P=_[R])._gsap||aC(_)[R]._gsap,e._ptLookup[R]=G={},rC[J.id]&&Au.length&&a6(),k=y===_?R:y.indexOf(P),q&&!1!==(I=new q).init(P,F||M,e,k,y)&&(e._pt=E=new Zs(e._pt,P,I.name,0,1,I.render,I,0,I.priority),I._props.forEach(function(V){G[V]=E}),I.priority&&(Y=1)),!q||F)for(w in M)Mo[w]&&(I=JU(w,M,e,k,P,y))?I.priority&&(Y=1):G[w]=E=gC.call(e,P,w,"get",M[w],k,y,0,i.stringFilter);e._op&&e._op[R]&&e.kill(P,e._op[R]),b&&e._pt&&(ku=e,Li.killTweensOf(P,G,e.globalTime(t)),N=!e.parent,ku=0),e._pt&&a&&(rC[J.id]=1)}Y&&sG(e),e._onInit&&e._onInit(e)}e._onUpdate=l,e._initted=(!e._op||e._pt)&&!N,f&&t<=0&&x.render(Zo,!0,!0)},XSe=function(e,t,i,r){var o,a,s=t.ease||r||"power1.inOut";if(ds(t))a=i[e]||(i[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=i[o]||(i[o]=[]),"ease"===o||a.push({t:parseFloat(e),v:t[o],e:s})},O0=function(e,t,i,r,s){return ji(e)?e.call(t,i,r,s):Ur(e)&&~e.indexOf("random(")?I0(e):e},eG=oC+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",tG={};Ys(eG+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return tG[n]=1});var Ir=function(n){function e(i,r,s,o){var a;"number"==typeof r&&(s.duration=r,r=s,s=null);var b,x,M,R,w,E,P,Y,l=(a=n.call(this,o?r:D0(r))||this).vars,c=l.duration,u=l.delay,d=l.immediateRender,h=l.stagger,f=l.overwrite,p=l.keyframes,m=l.defaults,g=l.scrollTrigger,_=l.yoyoEase,v=r.parent||Li,y=(ds(i)||_U(i)?yc(i[0]):"length"in r)?[i]:ea(i);if(a._targets=y.length?aC(y):s6("GSAP target "+i+" not found. https://greensock.com",!wo.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,p||h||n6(c)||n6(u)){if(r=a.vars,(b=a.timeline=new Xs({data:"nested",defaults:m||{},targets:v&&"nested"===v.data?v.vars.targets:y})).kill(),b.parent=b._dp=vc(a),b._start=0,h||n6(c)||n6(u)){if(R=y.length,P=h&&BU(h),ml(h))for(w in h)~eG.indexOf(w)&&(Y||(Y={}),Y[w]=h[w]);for(x=0;x<R;x++)(M=l6(r,tG)).stagger=0,_&&(M.yoyoEase=_),Y&&fh(M,Y),E=y[x],M.duration=+O0(c,vc(a),x,E,y),M.delay=(+O0(u,vc(a),x,E,y)||0)-a._delay,!h&&1===R&&M.delay&&(a._delay=u=M.delay,a._start+=u,M.delay=0),b.to(E,M,P?P(x,E,y):0),b._ease=vn.none;b.duration()?c=u=0:a.timeline=0}else if(p){D0(Qo(b.vars.defaults,{ease:"none"})),b._ease=mh(p.ease||r.ease||"none");var q,I,G,J=0;if(ds(p))p.forEach(function(k){return b.to(y,k,">")}),b.duration();else{for(w in M={},p)"ease"===w||"easeEach"===w||XSe(w,p[w],M,p.easeEach);for(w in M)for(q=M[w].sort(function(k,F){return k.t-F.t}),J=0,x=0;x<q.length;x++)(G={ease:(I=q[x]).e,duration:(I.t-(x?q[x-1].t:0))/100*c})[w]=I.v,b.to(y,G,J),J+=G.duration;b.duration()<c&&b.to({},{duration:c-b.duration()})}}c||a.duration(c=b.duration())}else a.timeline=0;return!0===f&&!Xw&&(ku=vc(a),Li.killTweensOf(y),ku=0),gl(v,vc(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(d||!c&&!p&&a._start===Zr(v._time)&&qs(d)&&SSe(vc(a))&&"nested"!==v.data)&&(a._tTime=-ei,a.render(Math.max(0,-u))),g&&PU(vc(a),g),a}pU(e,n);var t=e.prototype;return t.render=function(r,s,o){var h,f,p,m,g,_,v,y,b,a=this._time,l=this._tDur,c=this._dur,u=r<0,d=r>l-ei&&!u?l:r<ei?0:r;if(c){if(d!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(h=d,y=this.timeline,this._repeat){if(m=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(100*m+r,s,o);if(h=Zr(d%m),d===l?(p=this._repeat,h=c):((p=~~(d/m))&&p===d/m&&(h=c,p--),h>c&&(h=c)),(_=this._yoyo&&1&p)&&(b=this._yEase,h=c-h),g=Kf(this._tTime,m),h===a&&!o&&this._initted)return this._tTime=d,this;p!==g&&(y&&this._yEase&&ZU(y,_),this.vars.repeatRefresh&&!_&&!this._lock&&(this._lock=o=1,this.render(Zr(m*p),!0).invalidate()._lock=0))}if(!this._initted){if(OU(this,u?r:h,o,s))return this._tTime=0,this;if(a!==this._time)return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=d,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=v=(b||this._ease)(h/c),this._from&&(this.ratio=v=1-v),h&&!a&&!s&&(ta(this,"onStart"),this._tTime!==d))return this;for(f=this._pt;f;)f.r(v,f.d),f=f._next;y&&y.render(r<0?r:!h&&_?-ei:y._dur*y._ease(h/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&lC(this,r,0,o),ta(this,"onUpdate")),this._repeat&&p!==g&&this.vars.onRepeat&&!s&&this.parent&&ta(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(u&&!this._onUpdate&&lC(this,r,0,!0),(r||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&bc(this,1),!s&&(!u||a)&&(d||a)&&(ta(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,i,r){var c,u,d,s=e.ratio,o=t<0||!t&&(!e._start&&TSe(e)&&(e._initted||!cC(e))||(e._ts<0||e._dp._ts<0)&&!cC(e))?0:1,a=e._rDelay,l=0;if(a&&e._repeat&&(l=R0(0,e._tDur,t),u=Kf(l,a),e._yoyo&&1&u&&(o=1-o),u!==Kf(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Xo||r||e._zTime===ei||!t&&e._zTime){if(!e._initted&&OU(e,t,r,i))return;for(d=e._zTime,e._zTime=t||(i?ei:0),i||(i=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&lC(e,t,0,!0),e._onUpdate&&!i&&ta(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&ta(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&bc(e,1),!i&&!Xo&&(ta(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,r,s,o);return this},t.targets=function(){return this._targets},t.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),n.prototype.invalidate.call(this)},t.resetTo=function(r,s,o,a){P0||So.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||vC(this,l),function(e,t,i,r,s,o,a){var c,u,d,h,l=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!l)for(l=e._ptCache[t]=[],d=e._ptLookup,h=e._targets.length;h--;){if((c=d[h][t])&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==t&&c.fp!==t;)c=c._next;if(!c)return _C=1,e.vars[t]="+=0",vC(e,a),_C=0,1;l.push(c)}for(h=l.length;h--;)(c=(u=l[h])._pt||u).s=!r&&0!==r||s?c.s+(r||0)+o*c.c:r,c.c=i-c.s,u.e&&(u.e=sr(i)+hs(u.e)),u.b&&(u.b=c.s+hs(u.b))}(this,r,s,o,a,this._ease(l/this._dur),l)?this.resetTo(r,s,o,a):(h6(this,0),this.parent||IU(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(void 0===s&&(s="all"),!(r||s&&"all"!==s))return this._lazy=this._pt=0,this.parent?k0(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,ku&&!0!==ku.vars.overwrite)._first||k0(this),this.parent&&o!==this.timeline.totalDuration()&&Qf(this,this._dur*this.timeline._tDur/o,0,1),this}var d,h,f,p,m,g,_,a=this._targets,l=r?ea(r):a,c=this._ptLookup,u=this._pt;if((!s||"all"===s)&&function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0}(a,l))return"all"===s&&(this._pt=0),k0(this);for(d=this._op=this._op||[],"all"!==s&&(Ur(s)&&(m={},Ys(s,function(v){return m[v]=1}),s=m),s=function(e,t){var s,o,a,l,i=e[0]?hh(e[0]).harness:0,r=i&&i.aliases;if(!r)return t;for(o in s=fh({},t),r)if(o in s)for(a=(l=r[o].split(",")).length;a--;)s[l[a]]=s[o];return s}(a,s)),_=a.length;_--;)if(~l.indexOf(a[_]))for(m in h=c[_],"all"===s?(d[_]=s,p=h,f={}):(f=d[_]=d[_]||{},p=s),p)(g=h&&h[m])&&((!("kill"in g.d)||!0===g.d.kill(m))&&c6(this,g,"_pt"),delete h[m]),"all"!==f&&(f[m]=1);return this._initted&&!this._pt&&u&&k0(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return A0(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return A0(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return Li.killTweensOf(r,s,o)},e}(t2);Qo(Ir.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Ys("staggerTo,staggerFrom,staggerFromTo",function(n){Ir[n]=function(){var e=new Xs,t=uC.call(arguments,0);return t.splice("staggerFromTo"===n?5:4,0,0),e[n].apply(e,t)}});var yC=function(e,t,i){return e[t]=i},nG=function(e,t,i){return e[t](i)},ZSe=function(e,t,i,r){return e[t](r.fp,i)},KSe=function(e,t,i){return e.setAttribute(t,i)},bC=function(e,t){return ji(e[t])?nG:Kw(e[t])&&e.setAttribute?KSe:yC},iG=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},QSe=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},rG=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round(1e4*(i.s+i.c*e))/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},xC=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},JSe=function(e,t,i,r){for(var o,s=this._pt;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},eTe=function(e){for(var i,r,t=this._pt;t;)r=t._next,t.p===e&&!t.op||t.op===e?c6(this,t,"_pt"):t.dep||(i=1),t=r;return!i},tTe=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},sG=function(e){for(var i,r,s,o,t=e._pt;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},Zs=function(){function n(t,i,r,s,o,a,l,c,u){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||iG,this.d=l||this,this.set=c||yC,this.pr=u||0,this._next=t,t&&(t._prev=this)}return n.prototype.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=tTe,this.m=i,this.mt=s,this.tween=r},n}();Ys(oC+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return iC[n]=1}),Co.TweenMax=Co.TweenLite=Ir,Co.TimelineLite=Co.TimelineMax=Xs,Li=new Xs({sortChildren:!1,defaults:Yf,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),wo.stringFilter=YU;var n2=[],f6={},nTe=[],oG=0,wC=function(e){return(f6[e]||nTe).map(function(t){return t()})},CC=function(){var e=Date.now(),t=[];e-oG>2&&(wC("matchMediaInit"),n2.forEach(function(i){var o,a,l,c,r=i.queries,s=i.conditions;for(a in r)(o=Ko.matchMedia(r[a]).matches)&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(i.revert(),l&&t.push(i))}),wC("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i)}),oG=e,wC("matchMedia"))},aG=function(){function n(t,i){this.selector=i&&dC(i),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){ji(i)&&(s=r,r=i,i=ji);var o=this,a=function(){var d,c=vr,u=o.selector;return c&&c!==o&&c.data.push(o),s&&(o.selector=dC(s)),vr=o,d=r.apply(o,arguments),ji(d)&&o._r.push(d),vr=c,o.selector=u,o.isReverted=!1,d};return o.last=a,i===ji?a(o):i?o[i]=a:a},e.ignore=function(i){var r=vr;vr=null,i(this),vr=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof Ir&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?(this.getTweens().map(function(a){return{g:a.globalTime(0),t:a}}).sort(function(a,l){return l.g-a.g||-1}).forEach(function(a){return a.t.revert(i)}),this.data.forEach(function(a){return!(a instanceof t2)&&a.revert&&a.revert(i)}),this._r.forEach(function(a){return a(i,s)}),this.isReverted=!0):this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r){var o=n2.indexOf(this);~o&&n2.splice(o,1)}},e.revert=function(i){this.kill(i||{})},n}(),iTe=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(i,r,s){ml(i)||(i={matches:i});var l,c,u,o=new aG(0,s||this.scope),a=o.conditions={};for(c in this.contexts.push(o),r=o.add("onMatch",r),o.queries=i,i)"all"===c?u=1:(l=Ko.matchMedia(i[c]))&&(n2.indexOf(o)<0&&n2.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(CC):l.addEventListener("change",CC));return u&&r(o),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),p6={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return zSe(r)})},timeline:function(e){return new Xs(e)},getTweensOf:function(e,t){return Li.getTweensOf(e,t)},getProperty:function(e,t,i,r){Ur(e)&&(e=ea(e)[0]);var s=hh(e||{}).get,o=i?AU:DU;return"native"===i&&(i=""),e&&(t?o((Mo[t]&&Mo[t].get||s)(e,t,i,r)):function(a,l,c){return o((Mo[a]&&Mo[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,i){if((e=ea(e)).length>1){var r=e.map(function(u){return To.quickSetter(u,t,i)}),s=r.length;return function(u){for(var d=s;d--;)r[d](u)}}var o=Mo[t],a=hh(e=e[0]||{}),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var d=new o;Jf._pt=0,d.init(e,i?u+i:u,Jf,0,[e]),d.render(1,d),Jf._pt&&xC(1,Jf)}:a.set(e,l);return o?c:function(u){return c(e,l,i?u+i:u,a,1)}},quickTo:function(e,t,i){var r,s=To.to(e,fh(((r={})[t]="+=0.1",r.paused=!0,r),i||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return Li.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=mh(e.ease,Yf.ease)),RU(Yf,e||{})},config:function(e){return RU(wo,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,s=e.defaults,o=e.extendTimeline;(e.plugins||"").split(",").forEach(function(a){return a&&!Mo[a]&&!Co[a]&&s6(t+" effect requires "+a+" plugin.")}),sC[t]=function(a,l,c){return i(ea(a),Qo(l||{},s),c)},o&&(Xs.prototype[t]=function(a,l,c){return this.add(sC[t](a,ml(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){vn[e]=mh(t)},parseEase:function(e,t){return arguments.length?mh(e,t):vn},getById:function(e){return Li.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var r,s,i=new Xs(e);for(i.smoothChildTiming=qs(e.smoothChildTiming),Li.remove(i),i._dp=0,i._time=i._tTime=Li._time,r=Li._first;r;)s=r._next,(t||!(!r._dur&&r instanceof Ir&&r.vars.onComplete===r._targets[0]))&&gl(i,r,r._start-r._delay),r=s;return gl(Li,i,0),i},context:function(e,t){return e?new aG(e,t):vr},matchMedia:function(e){return new iTe(e)},matchMediaRefresh:function(){return n2.forEach(function(e){var i,r,t=e.conditions;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||CC()},addEventListener:function(e,t){var i=f6[e]||(f6[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=f6[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:function n(e,t,i){var r=t-e;return ds(e)?UU(e,n(0,e.length),t):Ru(i,function(s){return(r+(s-e)%r)%r+e})},wrapYoyo:function n(e,t,i){var r=t-e,s=2*r;return ds(e)?UU(e,n(0,e.length-1),t):Ru(i,function(o){return e+((o=(s+(o-e)%s)%s||0)>r?s-o:o)})},distribute:BU,random:HU,snap:VU,normalize:function(e,t,i){return GU(e,t,0,1,i)},getUnit:hs,clamp:function(e,t,i){return Ru(i,function(r){return R0(e,t,r)})},splitColor:jU,toArray:ea,selector:dC,mapRange:GU,pipe:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},unitize:function(e,t){return function(i){return e(parseFloat(i))+(t||hs(i))}},interpolate:function n(e,t,i,r){var s=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!s){var l,c,u,d,h,o=Ur(e),a={};if(!0===i&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(ds(e)&&!ds(t)){for(u=[],h=(d=e.length)-2,c=1;c<d;c++)u.push(n(e[c-1],e[c]));d--,s=function(p){p*=d;var m=Math.min(h,~~p);return u[m](p-m)},i=t}else r||(e=fh(ds(e)?[]:{},e));if(!u){for(l in t)gC.call(a,e,l,"get",t[l]);s=function(p){return xC(p,a)||(o?e.p:e)}}}return Ru(i,s)},shuffle:zU},install:wU,effects:sC,ticker:So,updateRoot:Xs.updateRoot,plugins:Mo,globalTimeline:Li,core:{PropTween:Zs,globals:CU,Tween:Ir,Timeline:Xs,Animation:t2,getCache:hh,_removeLinkedListItem:c6,reverting:function(){return Xo},context:function(e){return e&&vr&&(vr.data.push(e),e._ctx=vr),vr},suppressOverwrites:function(e){return Xw=e}}};Ys("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return p6[n]=Ir[n]}),So.add(Xs.updateRoot),Jf=p6.to({},{duration:0});var rTe=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},MC=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(Ur(s)&&(l={},Ys(s,function(u){return l[u]=1}),s=l),t){for(c in l={},s)l[c]=t(s[c]);s=l}!function(e,t){var r,s,o,i=e._targets;for(r in t)for(s=i.length;s--;)(o=e._ptLookup[s][r])&&(o=o.d)&&(o._pt&&(o=rTe(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))}(a,s)}}}},To=p6.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,l;for(o in this.tween=i,t)l=e.getAttribute(o)||"",(a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o)).op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)Xo?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},MC("roundProps",hC),MC("modifiers"),MC("snap",VU))||p6;Ir.version=Xs.version=To.version="3.11.1",xU=1,gU()&&e2();var lG,Lu,r2,SC,_h,cG,TC,mG,xc={},vh=180/Math.PI,s2=Math.PI/180,o2=Math.atan2,uG=1e8,EC=/([A-Z])/g,lTe=/(left|right|width|margin|padding|x)/i,cTe=/[\s,\(]\S/,wc={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},DC=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},uTe=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},dTe=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},hTe=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},dG=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},hG=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},fTe=function(e,t,i){return e.style[t]=i},pTe=function(e,t,i){return e.style.setProperty(t,i)},mTe=function(e,t,i){return e._gsap[t]=i},gTe=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},_Te=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},vTe=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},$i="transform",Ia=$i+"Origin",yTe=function(e){var t=this,i=this.target,r=i.style;if(e in xc){if(this.tfm=this.tfm||{},"transform"!==e&&(~(e=wc[e]||e).indexOf(",")?e.split(",").forEach(function(s){return t.tfm[s]=Cc(i,s)}):this.tfm[e]=i._gsap.x?i._gsap[e]:Cc(i,e)),this.props.indexOf($i)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Ia,"")),e=$i}r&&this.props.push(e,r[e])},fG=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},bTe=function(){var s,o,e=this.props,t=this.target,i=t.style,r=t._gsap;for(s=0;s<e.length;s+=2)e[s+1]?i[e[s]]=e[s+1]:i.removeProperty(e[s].replace(EC,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),(s=TC())&&!s.isStart&&!i[$i]&&(fG(i),r.uncache=1)}},pG=function(e,t){var i={target:e,props:[],revert:bTe,save:yTe};return t&&t.split(",").forEach(function(r){return i.save(r)}),i},AC=function(e,t){var i=Lu.createElementNS?Lu.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Lu.createElement(e);return i.style?i:Lu.createElement(e)},_l=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(EC,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,a2(t)||t,1)||""},gG="O,Moz,ms,Ms,Webkit".split(","),a2=function(e,t,i){var s=(t||_h).style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(gG[o]+e in s););return o<0?null:(3===o?"ms":o>=0?gG[o]:"")+e},RC=function(){typeof window<"u"&&window.document&&(lG=window,r2=(Lu=lG.document).documentElement,_h=AC("div")||{style:{}},AC("div"),$i=a2($i),Ia=$i+"Origin",_h.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",mG=!!a2("perspective"),TC=To.core.reverting,SC=1)},IC=function n(e){var o,t=AC("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText;if(r2.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),r2.removeChild(t),this.style.cssText=s,o},_G=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},vG=function(e){var t;try{t=e.getBBox()}catch{t=IC.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===IC||(t=IC.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+_G(e,["x","cx","x1"])||0,y:+_G(e,["y","cy","y1"])||0,width:0,height:0}},yG=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!vG(e))},F0=function(e,t){if(t){var i=e.style;t in xc&&t!==Ia&&(t=$i),i.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),i.removeProperty(t.replace(EC,"-$1").toLowerCase())):i.removeAttribute(t)}},Pu=function(e,t,i,r,s,o){var a=new Zs(e._pt,t,i,0,1,o?hG:dG);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},bG={deg:1,rad:1,turn:1},xTe={grid:1,flex:1},Ou=function n(e,t,i,r){var p,m,g,_,s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=_h.style,l=lTe.test(t),c="svg"===e.tagName.toLowerCase(),u=(c?"client":"offset")+(l?"Width":"Height"),d=100,h="px"===r,f="%"===r;return r===o||!s||bG[r]||bG[o]?s:("px"!==o&&!h&&(s=n(e,t,i,"px")),_=e.getCTM&&yG(e),!f&&"%"!==o||!xc[t]&&!~t.indexOf("adius")?(a[l?"width":"height"]=d+(h?o:r),m=~t.indexOf("adius")||"em"===r&&e.appendChild&&!c?e:e.parentNode,_&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===Lu||!m.appendChild)&&(m=Lu.body),(g=m._gsap)&&f&&g.width&&l&&g.time===So.time&&!g.uncache?sr(s/g.width*d):((f||"%"===o)&&!xTe[_l(m,"display")]&&(a.position=_l(e,"position")),m===e&&(a.position="static"),m.appendChild(_h),p=_h[u],m.removeChild(_h),a.position="absolute",l&&f&&((g=hh(m)).time=So.time,g.width=m[u]),sr(h?p*s/d:p&&s?d/p*s:0))):(p=_?e.getBBox()[l?"width":"height"]:e[u],sr(f?s/p*d:s/100*p)))},Cc=function(e,t,i,r){var s;return SC||RC(),t in wc&&"transform"!==t&&~(t=wc[t]).indexOf(",")&&(t=t.split(",")[0]),xc[t]&&"transform"!==t?(s=z0(e,r),s="transformOrigin"!==t?s[t]:s.svg?s.origin:g6(_l(e,Ia))+" "+s.zOrigin+"px"):(!(s=e.style[t])||"auto"===s||r||~(s+"").indexOf("calc("))&&(s=m6[t]&&m6[t](e,t,i)||_l(e,t)||TU(e,t)||("opacity"===t?1:0)),i&&!~(s+"").trim().indexOf(" ")?Ou(e,t,s,i)+i:s},wTe=function(e,t,i,r){if(!i||"none"===i){var s=a2(t,e,1),o=s&&_l(e,s,1);o&&o!==i?(t=s,i=o):"borderColor"===t&&(i=_l(e,"borderTopColor"))}var u,d,h,f,p,m,g,_,v,y,b,a=new Zs(this._pt,e.style,t,0,1,rG),l=0,c=0;if(a.b=i,a.e=r,i+="","auto"==(r+="")&&(e.style[t]=r,r=_l(e,t)||r,e.style[t]=i),YU(u=[i,r]),r=u[1],h=(i=u[0]).match(Xf)||[],(r.match(Xf)||[]).length){for(;d=Xf.exec(r);)g=d[0],v=r.substring(l,d.index),p?p=(p+1)%5:("rgba("===v.substr(-5)||"hsla("===v.substr(-5))&&(p=1),g!==(m=h[c++]||"")&&(f=parseFloat(m)||0,b=m.substr((f+"").length),"="===g.charAt(1)&&(g=Zf(f,g)+b),_=parseFloat(g),y=g.substr((_+"").length),l=Xf.lastIndex-y.length,y||(y=y||wo.units[t]||b,l===r.length&&(r+=y,a.e+=y)),b!==y&&(f=Ou(e,t,m,y)||0),a._pt={_next:a._pt,p:v||1===c?v:",",s:f,c:_-f,m:p&&p<4||"zIndex"===t?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r="display"===t&&"none"===r?hG:dG;return yU.test(r)&&(a.e=0),this._pt=a,a},xG={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},CTe=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return("top"===i||"bottom"===i||"left"===r||"right"===r)&&(e=i,i=r,r=e),t[0]=xG[i]||i,t[1]=xG[r]||r,t.join(" ")},MTe=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var a,l,c,i=t.t,r=i.style,s=t.u,o=i._gsap;if("all"===s||!0===s)r.cssText="",l=1;else for(c=(s=s.split(",")).length;--c>-1;)xc[a=s[c]]&&(l=1,a="transformOrigin"===a?Ia:$i),F0(i,a);l&&(F0(i,$i),o&&(o.svg&&i.removeAttribute("transform"),z0(i,1),o.uncache=1,fG(r)))}},m6={clearProps:function(e,t,i,r,s){if("isFromStart"!==s.data){var o=e._pt=new Zs(e._pt,t,i,0,0,MTe);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},N0=[1,0,0,1,0,0],wG={},CG=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},MG=function(e){var t=_l(e,$i);return CG(t)?N0:t.substr(7).match(vU).map(sr)},kC=function(e,t){var o,a,l,c,i=e._gsap||hh(e),r=e.style,s=MG(e);return i.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(l=e.transform.baseVal.consolidate().matrix).a,l.b,l.c,l.d,l.e,l.f]).join(",")?N0:s:(s===N0&&!e.offsetParent&&e!==r2&&!i.svg&&(l=r.display,r.display="block",(!(o=e.parentNode)||!e.offsetParent)&&(c=1,a=e.nextElementSibling,r2.appendChild(e)),s=MG(e),l?r.display=l:F0(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):r2.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},LC=function(e,t,i,r,s,o){var M,R,E,a=e._gsap,l=s||kC(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,d=a.xOffset||0,h=a.yOffset||0,f=l[0],p=l[1],m=l[2],g=l[3],_=l[4],v=l[5],y=t.split(" "),b=parseFloat(y[0])||0,x=parseFloat(y[1])||0;i?l!==N0&&(R=f*g-p*m)&&(E=b*(-p/R)+x*(f/R)-(f*v-p*_)/R,b=b*(g/R)+x*(-m/R)+(m*v-g*_)/R,x=E):(b=(M=vG(e)).x+(~y[0].indexOf("%")?b/100*M.width:b),x=M.y+(~(y[1]||y[0]).indexOf("%")?x/100*M.height:x)),r||!1!==r&&a.smooth?(a.xOffset=d+((_=b-c)*f+(v=x-u)*m)-_,a.yOffset=h+(_*p+v*g)-v):a.xOffset=a.yOffset=0,a.xOrigin=b,a.yOrigin=x,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[Ia]="0px 0px",o&&(Pu(o,a,"xOrigin",c,b),Pu(o,a,"yOrigin",u,x),Pu(o,a,"xOffset",d,a.xOffset),Pu(o,a,"yOffset",h,a.yOffset)),e.setAttribute("data-svg-origin",b+" "+x)},z0=function(e,t){var i=e._gsap||new QU(e);if("x"in i&&!t&&!i.uncache)return i;var u,d,h,f,p,m,g,_,v,y,b,x,M,R,w,E,P,Y,J,q,I,G,k,F,N,V,$,te,j,_e,se,Ee,r=e.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=_l(e,Ia)||"0";return u=d=h=m=g=_=v=y=b=0,f=p=1,i.svg=!(!e.getCTM||!yG(e)),l.translate&&(("none"!==l.translate||"none"!==l.scale||"none"!==l.rotate)&&(r[$i]=("none"!==l.translate?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==l.rotate?"rotate("+l.rotate+") ":"")+("none"!==l.scale?"scale("+l.scale.split(" ").join(",")+") ":"")+l[$i]),r.scale=r.rotate=r.translate="none"),R=kC(e,i.svg),i.svg&&(i.uncache?(N=e.getBBox(),c=i.xOrigin-N.x+"px "+(i.yOrigin-N.y)+"px",F=""):F=!t&&e.getAttribute("data-svg-origin"),LC(e,F||c,!!F||i.originIsAbsolute,!1!==i.smooth,R)),x=i.xOrigin||0,M=i.yOrigin||0,R!==N0&&(Y=R[0],J=R[1],q=R[2],I=R[3],u=G=R[4],d=k=R[5],6===R.length?(f=Math.sqrt(Y*Y+J*J),p=Math.sqrt(I*I+q*q),m=Y||J?o2(J,Y)*vh:0,(v=q||I?o2(q,I)*vh+m:0)&&(p*=Math.abs(Math.cos(v*s2))),i.svg&&(u-=x-(x*Y+M*q),d-=M-(x*J+M*I))):(_e=R[7],$=R[8],te=R[9],se=R[11],u=R[12],d=R[13],h=R[14],g=(w=o2(Ee=R[6],j=R[10]))*vh,w&&(F=G*(E=Math.cos(-w))+$*(P=Math.sin(-w)),N=k*E+te*P,V=Ee*E+j*P,$=G*-P+$*E,te=k*-P+te*E,j=Ee*-P+j*E,se=_e*-P+se*E,G=F,k=N,Ee=V),_=(w=o2(-q,j))*vh,w&&(E=Math.cos(-w),se=I*(P=Math.sin(-w))+se*E,Y=F=Y*E-$*P,J=N=J*E-te*P,q=V=q*E-j*P),m=(w=o2(J,Y))*vh,w&&(F=Y*(E=Math.cos(w))+J*(P=Math.sin(w)),N=G*E+k*P,J=J*E-Y*P,k=k*E-G*P,Y=F,G=N),g&&Math.abs(g)+Math.abs(m)>359.9&&(g=m=0,_=180-_),f=sr(Math.sqrt(Y*Y+J*J+q*q)),p=sr(Math.sqrt(k*k+Ee*Ee)),w=o2(G,k),v=Math.abs(w)>2e-4?w*vh:0,b=se?1/(se<0?-se:se):0),i.svg&&(F=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!CG(_l(e,$i)),F&&e.setAttribute("transform",F))),Math.abs(v)>90&&Math.abs(v)<270&&(s?(f*=-1,v+=m<=0?180:-180,m+=m<=0?180:-180):(p*=-1,v+=v<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=d-((i.yPercent=d&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=h+o,i.scaleX=sr(f),i.scaleY=sr(p),i.rotation=sr(m)+a,i.rotationX=sr(g)+a,i.rotationY=sr(_)+a,i.skewX=v+a,i.skewY=y+a,i.transformPerspective=b+o,(i.zOrigin=parseFloat(c.split(" ")[2])||0)&&(r[Ia]=g6(c)),i.xOffset=i.yOffset=0,i.force3D=wo.force3D,i.renderTransform=i.svg?TTe:mG?SG:STe,i.uncache=0,i},g6=function(e){return(e=e.split(" "))[0]+" "+e[1]},PC=function(e,t,i){var r=hs(t);return sr(parseFloat(t)+parseFloat(Ou(e,"x",i+"px",r)))+r},STe=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,SG(e,t)},yh="0deg",B0="0px",bh=") ",SG=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,u=i.rotationY,d=i.rotationX,h=i.skewX,f=i.skewY,p=i.scaleX,m=i.scaleY,g=i.transformPerspective,_=i.force3D,v=i.target,y=i.zOrigin,b="",x="auto"===_&&e&&1!==e||!0===_;if(y&&(d!==yh||u!==yh)){var E,M=parseFloat(u)*s2,R=Math.sin(M),w=Math.cos(M);M=parseFloat(d)*s2,E=Math.cos(M),o=PC(v,o,R*E*-y),a=PC(v,a,-Math.sin(M)*-y),l=PC(v,l,w*E*-y+y)}g!==B0&&(b+="perspective("+g+bh),(r||s)&&(b+="translate("+r+"%, "+s+"%) "),(x||o!==B0||a!==B0||l!==B0)&&(b+=l!==B0||x?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+bh),c!==yh&&(b+="rotate("+c+bh),u!==yh&&(b+="rotateY("+u+bh),d!==yh&&(b+="rotateX("+d+bh),(h!==yh||f!==yh)&&(b+="skew("+h+", "+f+bh),(1!==p||1!==m)&&(b+="scale("+p+", "+m+bh),v.style[$i]=b||"translate(0, 0)"},TTe=function(e,t){var x,M,R,w,E,i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,u=i.skewY,d=i.scaleX,h=i.scaleY,f=i.target,p=i.xOrigin,m=i.yOrigin,g=i.xOffset,_=i.yOffset,v=i.forceCSS,y=parseFloat(o),b=parseFloat(a);l=parseFloat(l),c=parseFloat(c),(u=parseFloat(u))&&(c+=u=parseFloat(u),l+=u),l||c?(l*=s2,c*=s2,x=Math.cos(l)*d,M=Math.sin(l)*d,R=Math.sin(l-c)*-h,w=Math.cos(l-c)*h,c&&(u*=s2,E=Math.tan(c-u),R*=E=Math.sqrt(1+E*E),w*=E,u&&(E=Math.tan(u),x*=E=Math.sqrt(1+E*E),M*=E)),x=sr(x),M=sr(M),R=sr(R),w=sr(w)):(x=d,w=h,M=R=0),(y&&!~(o+"").indexOf("px")||b&&!~(a+"").indexOf("px"))&&(y=Ou(f,"x",o,"px"),b=Ou(f,"y",a,"px")),(p||m||g||_)&&(y=sr(y+p-(p*x+m*R)+g),b=sr(b+m-(p*M+m*w)+_)),(r||s)&&(E=f.getBBox(),y=sr(y+r/100*E.width),b=sr(b+s/100*E.height)),f.setAttribute("transform",E="matrix("+x+","+M+","+R+","+w+","+y+","+b+")"),v&&(f.style[$i]=E)},ETe=function(e,t,i,r,s){var d,h,o=360,a=Ur(s),c=parseFloat(s)*(a&&~s.indexOf("rad")?vh:1)-r,u=r+c+"deg";return a&&("short"===(d=s.split("_")[1])&&(c%=o)!=c%180&&(c+=c<0?o:-o),"cw"===d&&c<0?c=(c+o*uG)%o-~~(c/o)*o:"ccw"===d&&c>0&&(c=(c-o*uG)%o-~~(c/o)*o)),e._pt=h=new Zs(e._pt,t,i,r,c,uTe),h.e=u,h.u="deg",e._props.push(i),h},TG=function(e,t){for(var i in t)e[i]=t[i];return e},DTe=function(e,t,i){var a,l,c,u,d,h,p,r=TG({},i._gsap),o=i.style;for(l in r.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[$i]=t,a=z0(i,1),F0(i,$i),i.setAttribute("transform",c)):(c=getComputedStyle(i)[$i],o[$i]=t,a=z0(i,1),o[$i]=c),xc)(c=r[l])!==(u=a[l])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(l)<0&&(d=hs(c)!==(p=hs(u))?Ou(i,l,c,p):parseFloat(c),h=parseFloat(u),e._pt=new Zs(e._pt,a,l,d,h-d,DC),e._pt.u=p||0,e._props.push(l));TG(a,r)};Ys("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});m6[e>1?"border"+n:n]=function(a,l,c,u,d){var h,f;if(arguments.length<4)return h=o.map(function(p){return Cc(a,p,c)}),5===(f=h.join(" ")).split(h[0]).length?h[0]:f;h=(u+"").split(" "),f={},o.forEach(function(p,m){return f[p]=h[m]=h[m]||h[(m-1)/2|0]}),a.init(l,f,d)}});var EG={name:"css",register:RC,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var c,u,d,h,f,p,m,g,_,v,y,b,x,M,R,w,o=this._props,a=e.style,l=i.vars.startAt;for(m in SC||RC(),this.styles=this.styles||pG(e),w=this.styles.props,this.tween=i,t)if("autoRound"!==m&&(u=t[m],!Mo[m]||!JU(m,t,i,r,e,s)))if(p=m6[m],"function"==(f=typeof u)&&(f=typeof(u=u.call(i,r,e,s))),"string"===f&&~u.indexOf("random(")&&(u=I0(u)),p)p(this,e,m,u,i)&&(R=1);else if("--"===m.substr(0,2))c=(getComputedStyle(e).getPropertyValue(m)+"").trim(),u+="",Iu.lastIndex=0,Iu.test(c)||(g=hs(c),_=hs(u)),_?g!==_&&(c=Ou(e,m,c,_)+_):g&&(u+=g),this.add(a,"setProperty",c,u,r,s,0,0,m),o.push(m),w.push(m,a[m]);else if("undefined"!==f){if(l&&m in l?(c="function"==typeof l[m]?l[m].call(i,r,e,s):l[m],Ur(c)&&~c.indexOf("random(")&&(c=I0(c)),hs(c+"")||(c+=wo.units[m]||hs(Cc(e,m))||""),"="===(c+"").charAt(1)&&(c=Cc(e,m))):c=Cc(e,m),h=parseFloat(c),(v="string"===f&&"="===u.charAt(1)&&u.substr(0,2))&&(u=u.substr(2)),d=parseFloat(u),m in wc&&("autoAlpha"===m&&(1===h&&"hidden"===Cc(e,"visibility")&&d&&(h=0),w.push("visibility",a.visibility),Pu(this,a,"visibility",h?"inherit":"hidden",d?"inherit":"hidden",!d)),"scale"!==m&&"transform"!==m&&~(m=wc[m]).indexOf(",")&&(m=m.split(",")[0])),y=m in xc)if(this.styles.save(m),b||((x=e._gsap).renderTransform&&!t.parseTransform||z0(e,t.parseTransform),M=!1!==t.smoothOrigin&&x.smooth,(b=this._pt=new Zs(this._pt,a,$i,0,1,x.renderTransform,x,0,-1)).dep=1),"scale"===m)this._pt=new Zs(this._pt,x,"scaleY",x.scaleY,(v?Zf(x.scaleY,v+d):d)-x.scaleY||0,DC),this._pt.u=0,o.push("scaleY",m),m+="X";else{if("transformOrigin"===m){w.push(Ia,a[Ia]),u=CTe(u),x.svg?LC(e,u,0,M,0,this):((_=parseFloat(u.split(" ")[2])||0)!==x.zOrigin&&Pu(this,x,"zOrigin",x.zOrigin,_),Pu(this,a,m,g6(c),g6(u)));continue}if("svgOrigin"===m){LC(e,u,1,M,0,this);continue}if(m in wG){ETe(this,x,m,h,v?Zf(h,v+u):u);continue}if("smoothOrigin"===m){Pu(this,x,"smooth",x.smooth,u);continue}if("force3D"===m){x[m]=u;continue}if("transform"===m){DTe(this,u,e);continue}}else m in a||(m=a2(m)||m);if(y||(d||0===d)&&(h||0===h)&&!cTe.test(u)&&m in a)d||(d=0),(g=(c+"").substr((h+"").length))!==(_=hs(u)||(m in wo.units?wo.units[m]:g))&&(h=Ou(e,m,c,_)),this._pt=new Zs(this._pt,y?x:a,m,h,(v?Zf(h,v+d):d)-h,y||"px"!==_&&"zIndex"!==m||!1===t.autoRound?DC:hTe),this._pt.u=_||0,g!==_&&"%"!==_&&(this._pt.b=c,this._pt.r=dTe);else if(m in a)wTe.call(this,e,m,c,v?v+u:u);else{if(!(m in e)){nC(m,u);continue}this.add(e,m,c||e[m],v?v+u:u,r,s)}y||w.push(m,a[m]),o.push(m)}R&&sG(this)},render:function(e,t){if(t.tween._time||!TC())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Cc,aliases:wc,getSetter:function(e,t,i){var r=wc[t];return r&&r.indexOf(",")<0&&(t=r),t in xc&&t!==Ia&&(e._gsap.x||Cc(e,"x"))?i&&cG===i?"scale"===t?gTe:mTe:(cG=i||{})&&("scale"===t?_Te:vTe):e.style&&!Kw(e.style[t])?fTe:~t.indexOf("-")?pTe:bC(e,t)},core:{_removeProperty:F0,_getMatrix:kC}};To.utils.checkPrefix=a2,To.core.getStyleSaver=pG,function(n,e,t,i){var r=Ys(n+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(s){xc[s]=1});Ys(e,function(s){wo.units[s]="deg",wG[s]=1}),wc[r[13]]=n+","+e,Ys("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(s){var o=s.split(":");wc[o[1]]=r[o[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),Ys("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){wo.units[n]="px"}),To.registerPlugin(EG);var Eo=To.registerPlugin(EG)||To;const Mh=1e3,Is=1001,yr=1003,qi=1006,Nu=1008,Sh=1009,Th=1014,zu=1015,G0=1016,h2=1020,ka=1023,Eh=1026,f2=1027,W0=2300,p2=2301,Dh=3e3,Hn=3001,Tc="srgb",Ah="srgb-linear";class Rh{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const fs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let lW=1234567;const Ih=Math.PI/180,j0=180/Math.PI;function Do(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(fs[255&n]+fs[n>>8&255]+fs[n>>16&255]+fs[n>>24&255]+"-"+fs[255&e]+fs[e>>8&255]+"-"+fs[e>>16&15|64]+fs[e>>24&255]+"-"+fs[63&t|128]+fs[t>>8&255]+"-"+fs[t>>16&255]+fs[t>>24&255]+fs[255&i]+fs[i>>8&255]+fs[i>>16&255]+fs[i>>24&255]).toLowerCase()}function or(n,e,t){return Math.max(e,Math.min(t,n))}function qC(n,e){return(n%e+e)%e}function $0(n,e,t){return(1-t)*n+t*e}function YC(n){return 0==(n&n-1)&&0!==n}function cW(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function M6(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Ec(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ni(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}var VEe=Object.freeze({__proto__:null,DEG2RAD:Ih,RAD2DEG:j0,generateUUID:Do,clamp:or,euclideanModulo:qC,mapLinear:function EEe(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)},inverseLerp:function DEe(n,e,t){return n!==e?(t-n)/(e-n):0},lerp:$0,damp:function AEe(n,e,t,i){return $0(n,e,1-Math.exp(-t*i))},pingpong:function REe(n,e=1){return e-Math.abs(qC(n,2*e)-e)},smoothstep:function IEe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*(3-2*n)},smootherstep:function kEe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*n*(n*(6*n-15)+10)},randInt:function LEe(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function PEe(n,e){return n+Math.random()*(e-n)},randFloatSpread:function OEe(n){return n*(.5-Math.random())},seededRandom:function FEe(n){void 0!==n&&(lW=n);let e=lW+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function NEe(n){return n*Ih},radToDeg:function zEe(n){return n*j0},isPowerOfTwo:YC,ceilPowerOfTwo:cW,floorPowerOfTwo:M6,setQuaternionFromProperEuler:function BEe(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),d=s((e-i)/2),h=o((e-i)/2),f=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*d,l*h,a*c);break;case"YZY":n.set(l*h,a*u,l*d,a*c);break;case"ZXZ":n.set(l*d,l*h,a*u,a*c);break;case"XZX":n.set(a*u,l*p,l*f,a*c);break;case"YXY":n.set(l*f,a*u,l*p,a*c);break;case"ZYZ":n.set(l*p,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:ni,denormalize:Ec});class xe{constructor(e=0,t=0){xe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ao{constructor(){Ao.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],f=i[5],p=i[8],m=r[0],g=r[3],_=r[6],v=r[1],y=r[4],b=r[7],x=r[2],M=r[5],R=r[8];return s[0]=o*m+a*v+l*x,s[3]=o*g+a*y+l*M,s[6]=o*_+a*b+l*R,s[1]=c*m+u*v+d*x,s[4]=c*g+u*y+d*M,s[7]=c*_+u*b+d*R,s[2]=h*m+f*v+p*x,s[5]=h*g+f*y+p*M,s[8]=h*_+f*b+p*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,f=c*s-o*l,p=t*d+i*h+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(r*c-u*i)*m,e[2]=(a*i-r*o)*m,e[3]=h*m,e[4]=(u*t-r*l)*m,e[5]=(r*s-a*t)*m,e[6]=f*m,e[7]=(i*l-c*t)*m,e[8]=(o*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],u=r[7];return r[0]=t*s+i*l,r[3]=t*o+i*c,r[6]=t*a+i*u,r[1]=-i*s+t*l,r[4]=-i*o+t*c,r[7]=-i*a+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function uW(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function q0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function kh(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function S6(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const XC={[Tc]:{[Ah]:kh},[Ah]:{[Tc]:S6}},La={legacyMode:!0,get workingColorSpace(){return Ah},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(XC[e]&&void 0!==XC[e][t]){const i=XC[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},dW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},kr={r:0,g:0,b:0},Pa={h:0,s:0,l:0},T6={h:0,s:0,l:0};function ZC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function E6(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let v2,Ye=(()=>{class n{constructor(t,i,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===i&&void 0===r?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=Tc){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,La.toWorkingColorSpace(this,i),this}setRGB(t,i,r,s=Ah){return this.r=t,this.g=i,this.b=r,La.toWorkingColorSpace(this,s),this}setHSL(t,i,r,s=Ah){if(t=qC(t,1),i=or(i,0,1),r=or(r,0,1),0===i)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+i):r+i-r*i,a=2*r-o;this.r=ZC(a,o,t+1/3),this.g=ZC(a,o,t),this.b=ZC(a,o,t-1/3)}return La.toWorkingColorSpace(this,s),this}setStyle(t,i=Tc){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const l=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,La.toWorkingColorSpace(this,i),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,La.toWorkingColorSpace(this,i),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const c=parseFloat(o[1])/360,u=parseFloat(o[2])/100,d=parseFloat(o[3])/100;return r(o[4]),this.setHSL(c,u,d,i)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,La.toWorkingColorSpace(this,i),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,La.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=Tc){const r=dW[t.toLowerCase()];return void 0!==r?this.setHex(r,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=kh(t.r),this.g=kh(t.g),this.b=kh(t.b),this}copyLinearToSRGB(t){return this.r=S6(t.r),this.g=S6(t.g),this.b=S6(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Tc){return La.fromWorkingColorSpace(E6(this,kr),t),or(255*kr.r,0,255)<<16^or(255*kr.g,0,255)<<8^or(255*kr.b,0,255)<<0}getHexString(t=Tc){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=Ah){La.fromWorkingColorSpace(E6(this,kr),i);const r=kr.r,s=kr.g,o=kr.b,a=Math.max(r,s,o),l=Math.min(r,s,o);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const h=a-l;switch(u=d<=.5?h/(a+l):h/(2-a-l),a){case r:c=(s-o)/h+(s<o?6:0);break;case s:c=(o-r)/h+2;break;case o:c=(r-s)/h+4}c/=6}return t.h=c,t.s=u,t.l=d,t}getRGB(t,i=Ah){return La.fromWorkingColorSpace(E6(this,kr),i),t.r=kr.r,t.g=kr.g,t.b=kr.b,t}getStyle(t=Tc){return La.fromWorkingColorSpace(E6(this,kr),t),t!==Tc?`color(${t} ${kr.r} ${kr.g} ${kr.b})`:`rgb(${255*kr.r|0},${255*kr.g|0},${255*kr.b|0})`}offsetHSL(t,i,r){return this.getHSL(Pa),Pa.h+=t,Pa.s+=i,Pa.l+=r,this.setHSL(Pa.h,Pa.s,Pa.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(Pa),t.getHSL(T6);const r=$0(Pa.h,T6.h,i),s=$0(Pa.s,T6.s,i),o=$0(Pa.l,T6.l,i);return this.setHSL(r,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return n.NAMES=dW,n})();class hW{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===v2&&(v2=q0("canvas")),v2.width=e.width,v2.height=e.height;const i=v2.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=v2}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=q0("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*kh(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*kh(t[i]/255)):kh(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class y2{constructor(e=null){this.isSource=!0,this.uuid=Do(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(KC(r[o].isDataTexture?r[o].image:r[o]))}else s=KC(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function KC(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?hW.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let UEe=0,Oa=(()=>{class n extends Rh{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Is,s=Is,o=qi,a=Nu,l=ka,c=Sh,u=1,d=Dh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:UEe++}),this.uuid=Do(),this.name="",this.source=new y2(t),this.mipmaps=[],this.mapping=i,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new xe(0,0),this.repeat=new xe(1,1),this.center=new xe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ao,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Mh:t.x=t.x-Math.floor(t.x);break;case Is:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Mh:t.y=t.y-Math.floor(t.y);break;case Is:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();class qn{constructor(e=0,t=0,i=0,r=1){qn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],p=l[9],m=l[2],g=l[6],_=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+m)<.1&&Math.abs(p+g)<.1&&Math.abs(c+f+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(c+1)/2,b=(f+1)/2,x=(_+1)/2,M=(u+h)/4,R=(d+m)/4,w=(p+g)/4;return y>b&&y>x?y<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(y),r=M/i,s=R/i):b>x?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=M/r,s=w/r):x<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(x),i=R/s,r=w/s),this.set(i,r,s,t),this}let v=Math.sqrt((g-p)*(g-p)+(d-m)*(d-m)+(h-u)*(h-u));return Math.abs(v)<.001&&(v=1),this.x=(g-p)/v,this.y=(d-m)/v,this.z=(h-u)/v,this.w=Math.acos((c+f+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Lh extends Rh{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new qn(0,0,e,t),this.scissorTest=!1,this.viewport=new qn(0,0,e,t),this.texture=new Oa({width:e,height:t,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:qi,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new y2(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class QC extends Oa{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=yr,this.minFilter=yr,this.wrapR=Is,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fW extends Oa{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=yr,this.minFilter=yr,this.wrapR=Is,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ps{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const h=s[o+0],f=s[o+1],p=s[o+2],m=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=p,void(e[t+3]=m);if(d!==m||l!==h||c!==f||u!==p){let g=1-a;const _=l*h+c*f+u*p+d*m,v=_>=0?1:-1,y=1-_*_;if(y>Number.EPSILON){const x=Math.sqrt(y),M=Math.atan2(x,_*v);g=Math.sin(g*M)/x,a=Math.sin(a*M)/x}const b=a*v;if(l=l*g+h*b,c=c*g+f*b,u=u*g+p*b,d=d*g+m*b,g===1-a){const x=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=x,c*=x,u*=x,d*=x}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*d+l*f-c*h,e[t+1]=l*p+u*h+c*d-a*f,e[t+2]=c*p+u*f+a*h-l*d,e[t+3]=u*p-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(s/2),h=l(i/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"YZX":this._x=h*u*d+c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d-h*f*p;break;case"XZY":this._x=h*u*d-c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>d){const f=2*Math.sqrt(1+i-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-i-d);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(or(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class z{constructor(e=0,t=0,i=0){z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(pW.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(pW.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,u=l*i+a*t-s*r,d=l*r+s*i-o*t,h=-s*t-o*i-a*r;return this.x=c*l+h*-s+u*-a-d*-o,this.y=u*l+h*-o+d*-s-c*-a,this.z=d*l+h*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return JC.copy(this).projectOnVector(e),this.sub(JC)}reflect(e){return this.sub(JC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(or(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const JC=new z,pW=new ps;class Ph{constructor(e=new z(1/0,1/0,1/0),t=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],h=e[l+2];u<t&&(t=u),d<i&&(i=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),h=e.getZ(l);u<t&&(t=u),d<i&&(i=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Oh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Oh.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Oh)}else null===i.boundingBox&&i.computeBoundingBox(),eM.copy(i.boundingBox),eM.applyMatrix4(e.matrixWorld),this.union(eM);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Oh),Oh.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Y0),D6.subVectors(this.max,Y0),b2.subVectors(e.a,Y0),x2.subVectors(e.b,Y0),w2.subVectors(e.c,Y0),Vu.subVectors(x2,b2),Hu.subVectors(w2,x2),Fh.subVectors(b2,w2);let t=[0,-Vu.z,Vu.y,0,-Hu.z,Hu.y,0,-Fh.z,Fh.y,Vu.z,0,-Vu.x,Hu.z,0,-Hu.x,Fh.z,0,-Fh.x,-Vu.y,Vu.x,0,-Hu.y,Hu.x,0,-Fh.y,Fh.x,0];return!(!tM(t,b2,x2,w2,D6)||(t=[1,0,0,0,1,0,0,0,1],!tM(t,b2,x2,w2,D6)))&&(A6.crossVectors(Vu,Hu),t=[A6.x,A6.y,A6.z],tM(t,b2,x2,w2,D6))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Oh.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Oh).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Dc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Dc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Dc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Dc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Dc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Dc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Dc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Dc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Dc)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Dc=[new z,new z,new z,new z,new z,new z,new z,new z],Oh=new z,eM=new Ph,b2=new z,x2=new z,w2=new z,Vu=new z,Hu=new z,Fh=new z,Y0=new z,D6=new z,A6=new z,Nh=new z;function tM(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Nh.fromArray(n,s);const a=r.x*Math.abs(Nh.x)+r.y*Math.abs(Nh.y)+r.z*Math.abs(Nh.z),l=e.dot(Nh),c=t.dot(Nh),u=i.dot(Nh);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const GEe=new Ph,mW=new z,R6=new z,nM=new z;class zh{constructor(e=new z,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):GEe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){nM.subVectors(e,this.center);const t=nM.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.add(nM.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return!0===this.center.equals(e.center)?R6.set(0,0,1).multiplyScalar(e.radius):R6.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(mW.copy(e.center).add(R6)),this.expandByPoint(mW.copy(e.center).sub(R6)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ac=new z,iM=new z,I6=new z,Uu=new z,rM=new z,k6=new z,sM=new z;class L6{constructor(e=new z,t=new z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ac)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ac.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ac.copy(this.direction).multiplyScalar(t).add(this.origin),Ac.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){iM.copy(e).add(t).multiplyScalar(.5),I6.copy(t).sub(e).normalize(),Uu.copy(this.origin).sub(iM);const s=.5*e.distanceTo(t),o=-this.direction.dot(I6),a=Uu.dot(this.direction),l=-Uu.dot(I6),c=Uu.lengthSq(),u=Math.abs(1-o*o);let d,h,f,p;if(u>0)if(d=o*l-a,h=o*a-l,p=s*u,d>=0)if(h>=-p)if(h<=p){const m=1/u;d*=m,h*=m,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=p?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(I6).multiplyScalar(h).add(iM),f}intersectSphere(e,t){Ac.subVectors(e.center,this.origin);const i=Ac.dot(this.direction),r=Ac.dot(Ac)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||i!=i)&&(i=s),(o<r||r!=r)&&(r=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Ac)}intersectTriangle(e,t,i,r,s){rM.subVectors(t,e),k6.subVectors(i,e),sM.crossVectors(rM,k6);let a,o=this.direction.dot(sM);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Uu.subVectors(this.origin,e);const l=a*this.direction.dot(k6.crossVectors(Uu,k6));if(l<0)return null;const c=a*this.direction.dot(rM.cross(Uu));if(c<0||l+c>o)return null;const u=-a*Uu.dot(sM);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Kt{constructor(){Kt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,o,a,l,c,u,d,h,f,p,m,g){const _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=u,_[10]=d,_[14]=h,_[3]=f,_[7]=p,_[11]=m,_[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Kt).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/C2.setFromMatrixColumn(e,0).length(),s=1/C2.setFromMatrixColumn(e,1).length(),o=1/C2.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const h=o*u,f=o*d,p=a*u,m=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+p*c,t[5]=h-m*c,t[9]=-a*l,t[2]=m-h*c,t[6]=p+f*c,t[10]=o*l}else if("YXZ"===e.order){const h=l*u,f=l*d,p=c*u,m=c*d;t[0]=h+m*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=m+h*a,t[10]=o*l}else if("ZXY"===e.order){const h=l*u,f=l*d,p=c*u,m=c*d;t[0]=h-m*a,t[4]=-o*d,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=m-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const h=o*u,f=o*d,p=a*u,m=a*d;t[0]=l*u,t[4]=p*c-f,t[8]=h*c+m,t[1]=l*d,t[5]=m*c+h,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const h=o*l,f=o*c,p=a*l,m=a*c;t[0]=l*u,t[4]=m-h*d,t[8]=p*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+p,t[10]=h-m*d}else if("XZY"===e.order){const h=o*l,f=o*c,p=a*l,m=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+m,t[5]=o*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=a*u,t[10]=m*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(WEe,e,jEe)}lookAt(e,t,i){const r=this.elements;return Ro.subVectors(e,t),0===Ro.lengthSq()&&(Ro.z=1),Ro.normalize(),Gu.crossVectors(i,Ro),0===Gu.lengthSq()&&(1===Math.abs(i.z)?Ro.x+=1e-4:Ro.z+=1e-4,Ro.normalize(),Gu.crossVectors(i,Ro)),Gu.normalize(),P6.crossVectors(Ro,Gu),r[0]=Gu.x,r[4]=P6.x,r[8]=Ro.x,r[1]=Gu.y,r[5]=P6.y,r[9]=Ro.y,r[2]=Gu.z,r[6]=P6.z,r[10]=Ro.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],f=i[13],p=i[2],m=i[6],g=i[10],_=i[14],v=i[3],y=i[7],b=i[11],x=i[15],M=r[0],R=r[4],w=r[8],E=r[12],P=r[1],Y=r[5],J=r[9],q=r[13],I=r[2],G=r[6],k=r[10],F=r[14],N=r[3],V=r[7],$=r[11],te=r[15];return s[0]=o*M+a*P+l*I+c*N,s[4]=o*R+a*Y+l*G+c*V,s[8]=o*w+a*J+l*k+c*$,s[12]=o*E+a*q+l*F+c*te,s[1]=u*M+d*P+h*I+f*N,s[5]=u*R+d*Y+h*G+f*V,s[9]=u*w+d*J+h*k+f*$,s[13]=u*E+d*q+h*F+f*te,s[2]=p*M+m*P+g*I+_*N,s[6]=p*R+m*Y+g*G+_*V,s[10]=p*w+m*J+g*k+_*$,s[14]=p*E+m*q+g*F+_*te,s[3]=v*M+y*P+b*I+x*N,s[7]=v*R+y*Y+b*G+x*V,s[11]=v*w+y*J+b*k+x*$,s[15]=v*E+y*q+b*F+x*te,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+s*l*d-r*c*d-s*a*h+i*c*h+r*a*f-i*l*f)+e[7]*(+t*l*f-t*c*h+s*o*h-r*o*f+r*c*u-s*l*u)+e[11]*(+t*c*d-t*a*f-s*o*d+i*o*f+s*a*u-i*c*u)+e[15]*(-r*a*u-t*l*d+t*a*h+r*o*d-i*o*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],g=e[14],_=e[15],v=d*g*c-m*h*c+m*l*f-a*g*f-d*l*_+a*h*_,y=p*h*c-u*g*c-p*l*f+o*g*f+u*l*_-o*h*_,b=u*m*c-p*d*c+p*a*f-o*m*f-u*a*_+o*d*_,x=p*d*l-u*m*l-p*a*h+o*m*h+u*a*g-o*d*g,M=t*v+i*y+r*b+s*x;if(0===M)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/M;return e[0]=v*R,e[1]=(m*h*s-d*g*s-m*r*f+i*g*f+d*r*_-i*h*_)*R,e[2]=(a*g*s-m*l*s+m*r*c-i*g*c-a*r*_+i*l*_)*R,e[3]=(d*l*s-a*h*s-d*r*c+i*h*c+a*r*f-i*l*f)*R,e[4]=y*R,e[5]=(u*g*s-p*h*s+p*r*f-t*g*f-u*r*_+t*h*_)*R,e[6]=(p*l*s-o*g*s-p*r*c+t*g*c+o*r*_-t*l*_)*R,e[7]=(o*h*s-u*l*s+u*r*c-t*h*c-o*r*f+t*l*f)*R,e[8]=b*R,e[9]=(p*d*s-u*m*s-p*i*f+t*m*f+u*i*_-t*d*_)*R,e[10]=(o*m*s-p*a*s+p*i*c-t*m*c-o*i*_+t*a*_)*R,e[11]=(u*a*s-o*d*s-u*i*c+t*d*c+o*i*f-t*a*f)*R,e[12]=x*R,e[13]=(u*m*r-p*d*r+p*i*h-t*m*h-u*i*g+t*d*g)*R,e[14]=(p*a*r-o*m*r-p*i*l+t*m*l+o*i*g-t*a*g)*R,e[15]=(o*d*r-u*a*r+u*i*l-t*d*l-o*i*h+t*a*h)*R,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,p=s*d,m=o*u,g=o*d,_=a*d,v=l*c,y=l*u,b=l*d,x=i.x,M=i.y,R=i.z;return r[0]=(1-(m+_))*x,r[1]=(f+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(f-b)*M,r[5]=(1-(h+_))*M,r[6]=(g+v)*M,r[7]=0,r[8]=(p+y)*R,r[9]=(g-v)*R,r[10]=(1-(h+m))*R,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=C2.set(r[0],r[1],r[2]).length();const o=C2.set(r[4],r[5],r[6]).length(),a=C2.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Fa.copy(this);const c=1/s,u=1/o,d=1/a;return Fa.elements[0]*=c,Fa.elements[1]*=c,Fa.elements[2]*=c,Fa.elements[4]*=u,Fa.elements[5]*=u,Fa.elements[6]*=u,Fa.elements[8]*=d,Fa.elements[9]*=d,Fa.elements[10]*=d,t.setFromRotationMatrix(Fa),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){const a=this.elements,c=2*s/(i-r),u=(t+e)/(t-e),d=(i+r)/(i-r),h=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,l=1/(t-e),c=1/(i-r),u=1/(o-s),d=(t+e)*l,h=(i+r)*c,f=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const C2=new z,Fa=new Kt,WEe=new z(0,0,0),jEe=new z(1,1,1),Gu=new z,P6=new z,Ro=new z,gW=new Kt,_W=new ps;let $Ee=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DefaultOrder){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],d=s[9],h=s[2],f=s[6],p=s[10];switch(i){case"XYZ":this._y=Math.asin(or(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-or(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(or(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-or(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(or(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-or(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return gW.makeRotationFromQuaternion(t),this.setFromRotationMatrix(gW,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return _W.setFromEuler(this),this.setFromQuaternion(_W,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n})();class oM{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let qEe=0;const vW=new z,M2=new ps,Rc=new Kt,O6=new z,X0=new z,YEe=new z,XEe=new ps,yW=new z(1,0,0),bW=new z(0,1,0),xW=new z(0,0,1),ZEe={type:"added"},wW={type:"removed"};let Kr=(()=>{class n extends Rh{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:qEe++}),this.uuid=Do(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DefaultUp.clone();const t=new z,i=new $Ee,r=new ps,s=new z(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Kt},normalMatrix:{value:new Ao}}),this.matrix=new Kt,this.matrixWorld=new Kt,this.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,this.layers=new oM,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return M2.setFromAxisAngle(t,i),this.quaternion.multiply(M2),this}rotateOnWorldAxis(t,i){return M2.setFromAxisAngle(t,i),this.quaternion.premultiply(M2),this}rotateX(t){return this.rotateOnAxis(yW,t)}rotateY(t){return this.rotateOnAxis(bW,t)}rotateZ(t){return this.rotateOnAxis(xW,t)}translateOnAxis(t,i){return vW.copy(t).applyQuaternion(this.quaternion),this.position.add(vW.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(yW,t)}translateY(t){return this.translateOnAxis(bW,t)}translateZ(t){return this.translateOnAxis(xW,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Rc.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?O6.copy(t):O6.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),X0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Rc.lookAt(X0,O6,this.up):Rc.lookAt(O6,X0,this.up),this.quaternion.setFromRotationMatrix(Rc),s&&(Rc.extractRotation(s.matrixWorld),M2.setFromRotationMatrix(Rc),this.quaternion.premultiply(M2.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(ZEe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(wW)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(wW)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Rc.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Rc.multiply(t.parent.matrixWorld)),t.applyMatrix4(Rc),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(X0,t,YEe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(X0,XEe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++){const o=i[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++){const l=s[o];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++)o(t.shapes,c[u]);else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(t.animations,this.animations[l]))}if(i){const l=a(t.geometries),c=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),f=a(t.skeletons),p=a(t.animations),m=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),m.length>0&&(r.nodes=m)}return r.object=s,r;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DefaultUp=new z(0,1,0),n.DefaultMatrixAutoUpdate=!0,n.DefaultMatrixWorldAutoUpdate=!0,n})();const Na=new z,Ic=new z,aM=new z,kc=new z,S2=new z,T2=new z,CW=new z,lM=new z,cM=new z,uM=new z;class za{constructor(e=new z,t=new z,i=new z){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Na.subVectors(e,t),r.cross(Na);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Na.subVectors(r,t),Ic.subVectors(i,t),aM.subVectors(e,t);const o=Na.dot(Na),a=Na.dot(Ic),l=Na.dot(aM),c=Ic.dot(Ic),u=Ic.dot(aM),d=o*c-a*a;if(0===d)return s.set(-2,-1,-1);const h=1/d,f=(c*l-a*u)*h,p=(o*u-a*l)*h;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,kc),kc.x>=0&&kc.y>=0&&kc.x+kc.y<=1}static getUV(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,kc),l.set(0,0),l.addScaledVector(s,kc.x),l.addScaledVector(o,kc.y),l.addScaledVector(a,kc.z),l}static isFrontFacing(e,t,i,r){return Na.subVectors(i,t),Ic.subVectors(e,t),Na.cross(Ic).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Na.subVectors(this.c,this.b),Ic.subVectors(this.a,this.b),.5*Na.cross(Ic).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return za.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return za.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return za.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return za.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return za.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;S2.subVectors(r,i),T2.subVectors(s,i),lM.subVectors(e,i);const l=S2.dot(lM),c=T2.dot(lM);if(l<=0&&c<=0)return t.copy(i);cM.subVectors(e,r);const u=S2.dot(cM),d=T2.dot(cM);if(u>=0&&d<=u)return t.copy(r);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(S2,o);uM.subVectors(e,s);const f=S2.dot(uM),p=T2.dot(uM);if(p>=0&&f<=p)return t.copy(s);const m=f*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(i).addScaledVector(T2,a);const g=u*p-f*d;if(g<=0&&d-u>=0&&f-p>=0)return CW.subVectors(s,r),a=(d-u)/(d-u+(f-p)),t.copy(r).addScaledVector(CW,a);const _=1/(g+m+h);return o=m*_,a=h*_,t.copy(i).addScaledVector(S2,o).addScaledVector(T2,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let KEe=0;class Ba extends Rh{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:KEe++}),this.uuid=Do(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Ks extends Ba{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ye(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const br=new z,F6=new xe;class xr{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)F6.fromBufferAttribute(this,t),F6.applyMatrix3(e),this.setXY(t,F6.x,F6.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)br.fromBufferAttribute(this,t),br.applyMatrix3(e),this.setXYZ(t,br.x,br.y,br.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)br.fromBufferAttribute(this,t),br.applyMatrix4(e),this.setXYZ(t,br.x,br.y,br.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)br.fromBufferAttribute(this,t),br.applyNormalMatrix(e),this.setXYZ(t,br.x,br.y,br.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)br.fromBufferAttribute(this,t),br.transformDirection(e),this.setXYZ(t,br.x,br.y,br.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ec(t,this.array)),t}setX(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ec(t,this.array)),t}setY(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ec(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ec(t,this.array)),t}setW(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=ni(t,this.array),i=ni(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=ni(t,this.array),i=ni(i,this.array),r=ni(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=ni(t,this.array),i=ni(i,this.array),r=ni(r,this.array),s=ni(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class MW extends xr{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class SW extends xr{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class mt extends xr{constructor(e,t,i){super(new Float32Array(e),t,i)}}let QEe=0;const ia=new Kt,dM=new Kr,E2=new z,Io=new Ph,Z0=new Ph,Gr=new z;class on extends Rh{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:QEe++}),this.uuid=Do(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(uW(e)?SW:MW)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new Ao).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return ia.makeRotationFromQuaternion(e),this.applyMatrix4(ia),this}rotateX(e){return ia.makeRotationX(e),this.applyMatrix4(ia),this}rotateY(e){return ia.makeRotationY(e),this.applyMatrix4(ia),this}rotateZ(e){return ia.makeRotationZ(e),this.applyMatrix4(ia),this}translate(e,t,i){return ia.makeTranslation(e,t,i),this.applyMatrix4(ia),this}scale(e,t,i){return ia.makeScale(e,t,i),this.applyMatrix4(ia),this}lookAt(e){return dM.lookAt(e),dM.updateMatrix(),this.applyMatrix4(dM.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(E2).negate(),this.translate(E2.x,E2.y,E2.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new mt(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ph);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Io.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(Gr.addVectors(this.boundingBox.min,Io.min),this.boundingBox.expandByPoint(Gr),Gr.addVectors(this.boundingBox.max,Io.max),this.boundingBox.expandByPoint(Gr)):(this.boundingBox.expandByPoint(Io.min),this.boundingBox.expandByPoint(Io.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new zh);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new z,1/0);if(e){const i=this.boundingSphere.center;if(Io.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)Z0.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Gr.addVectors(Io.min,Z0.min),Io.expandByPoint(Gr),Gr.addVectors(Io.max,Z0.max),Io.expandByPoint(Gr)):(Io.expandByPoint(Z0.min),Io.expandByPoint(Z0.max));Io.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Gr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Gr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Gr.fromBufferAttribute(a,c),l&&(E2.fromBufferAttribute(e,c),Gr.add(E2)),r=Math.max(r,i.distanceToSquared(Gr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new xr(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let P=0;P<a;P++)c[P]=new z,u[P]=new z;const d=new z,h=new z,f=new z,p=new xe,m=new xe,g=new xe,_=new z,v=new z;function y(P,Y,J){d.fromArray(r,3*P),h.fromArray(r,3*Y),f.fromArray(r,3*J),p.fromArray(o,2*P),m.fromArray(o,2*Y),g.fromArray(o,2*J),h.sub(d),f.sub(d),m.sub(p),g.sub(p);const q=1/(m.x*g.y-g.x*m.y);!isFinite(q)||(_.copy(h).multiplyScalar(g.y).addScaledVector(f,-m.y).multiplyScalar(q),v.copy(f).multiplyScalar(m.x).addScaledVector(h,-g.x).multiplyScalar(q),c[P].add(_),c[Y].add(_),c[J].add(_),u[P].add(v),u[Y].add(v),u[J].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:i.length}]);for(let P=0,Y=b.length;P<Y;++P){const J=b[P],q=J.start;for(let G=q,k=q+J.count;G<k;G+=3)y(i[G+0],i[G+1],i[G+2])}const x=new z,M=new z,R=new z,w=new z;function E(P){R.fromArray(s,3*P),w.copy(R);const Y=c[P];x.copy(Y),x.sub(R.multiplyScalar(R.dot(Y))).normalize(),M.crossVectors(w,Y);const q=M.dot(u[P])<0?-1:1;l[4*P]=x.x,l[4*P+1]=x.y,l[4*P+2]=x.z,l[4*P+3]=q}for(let P=0,Y=b.length;P<Y;++P){const J=b[P],q=J.start;for(let G=q,k=q+J.count;G<k;G+=3)E(i[G+0]),E(i[G+1]),E(i[G+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new xr(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new z,s=new z,o=new z,a=new z,l=new z,c=new z,u=new z,d=new z;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),m=e.getX(h+1),g=e.getX(h+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),o.fromBufferAttribute(t,g),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,g),a.add(u),l.add(u),c.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Gr.fromBufferAttribute(e,t),Gr.normalize(),e.setXYZ(t,Gr.x,Gr.y,Gr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,p=0;for(let m=0,g=l.length;m<g;m++){f=a.isInterleavedBufferAttribute?l[m]*a.data.stride+a.offset:l[m]*u;for(let _=0;_<u;_++)h[p++]=c[f++]}return new xr(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new on,i=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=e(c[u],i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i)e.data.attributes[l]=i[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(e.data));u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const TW=new Kt,D2=new L6,hM=new zh,Wu=new z,ju=new z,$u=new z,fM=new z,pM=new z,mM=new z,N6=new z,z6=new z,B6=new z,V6=new xe,H6=new xe,U6=new xe,gM=new z,G6=new z;class Qr extends Kr{constructor(e=new on,t=new Ks){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),hM.copy(i.boundingSphere),hM.applyMatrix4(s),!1===e.ray.intersectsSphere(hM))||(TW.copy(s).invert(),D2.copy(e.ray).applyMatrix4(TW),null!==i.boundingBox&&!1===D2.intersectsBox(i.boundingBox)))return;let o;const a=i.index,l=i.attributes.position,c=i.morphAttributes.position,u=i.morphTargetsRelative,d=i.attributes.uv,h=i.attributes.uv2,f=i.groups,p=i.drawRange;if(null!==a)if(Array.isArray(r))for(let m=0,g=f.length;m<g;m++){const _=f[m],v=r[_.materialIndex];for(let x=Math.max(_.start,p.start),M=Math.min(a.count,Math.min(_.start+_.count,p.start+p.count));x<M;x+=3){const R=a.getX(x),w=a.getX(x+1),E=a.getX(x+2);o=W6(this,v,e,D2,l,c,u,d,h,R,w,E),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=_.materialIndex,t.push(o))}}else for(let _=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);_<v;_+=3){const y=a.getX(_),b=a.getX(_+1),x=a.getX(_+2);o=W6(this,r,e,D2,l,c,u,d,h,y,b,x),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let m=0,g=f.length;m<g;m++){const _=f[m],v=r[_.materialIndex];for(let x=Math.max(_.start,p.start),M=Math.min(l.count,Math.min(_.start+_.count,p.start+p.count));x<M;x+=3)o=W6(this,v,e,D2,l,c,u,d,h,x,x+1,x+2),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=_.materialIndex,t.push(o))}else for(let _=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);_<v;_+=3)o=W6(this,r,e,D2,l,c,u,d,h,_,_+1,_+2),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}}function W6(n,e,t,i,r,s,o,a,l,c,u,d){Wu.fromBufferAttribute(r,c),ju.fromBufferAttribute(r,u),$u.fromBufferAttribute(r,d);const h=n.morphTargetInfluences;if(s&&h){N6.set(0,0,0),z6.set(0,0,0),B6.set(0,0,0);for(let p=0,m=s.length;p<m;p++){const g=h[p],_=s[p];0!==g&&(fM.fromBufferAttribute(_,c),pM.fromBufferAttribute(_,u),mM.fromBufferAttribute(_,d),o?(N6.addScaledVector(fM,g),z6.addScaledVector(pM,g),B6.addScaledVector(mM,g)):(N6.addScaledVector(fM.sub(Wu),g),z6.addScaledVector(pM.sub(ju),g),B6.addScaledVector(mM.sub($u),g)))}Wu.add(N6),ju.add(z6),$u.add(B6)}n.isSkinnedMesh&&(n.boneTransform(c,Wu),n.boneTransform(u,ju),n.boneTransform(d,$u));const f=function JEe(n,e,t,i,r,s,o,a){let l;if(l=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,2!==e.side,a),null===l)return null;G6.copy(a),G6.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(G6);return c<t.near||c>t.far?null:{distance:c,point:G6.clone(),object:n}}(n,e,t,i,Wu,ju,$u,gM);if(f){a&&(V6.fromBufferAttribute(a,c),H6.fromBufferAttribute(a,u),U6.fromBufferAttribute(a,d),f.uv=za.getUV(gM,Wu,ju,$u,V6,H6,U6,new xe)),l&&(V6.fromBufferAttribute(l,c),H6.fromBufferAttribute(l,u),U6.fromBufferAttribute(l,d),f.uv2=za.getUV(gM,Wu,ju,$u,V6,H6,U6,new xe));const p={a:c,b:u,c:d,normal:new z,materialIndex:0};za.getNormal(Wu,ju,$u,p.normal),f.face=p}return f}class A2 extends on{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;function p(m,g,_,v,y,b,x,M,R,w,E){const P=b/R,Y=x/w,J=b/2,q=x/2,I=M/2,G=R+1,k=w+1;let F=0,N=0;const V=new z;for(let $=0;$<k;$++){const te=$*Y-q;for(let j=0;j<G;j++)V[m]=(j*P-J)*v,V[g]=te*y,V[_]=I,c.push(V.x,V.y,V.z),V[m]=0,V[g]=0,V[_]=M>0?1:-1,u.push(V.x,V.y,V.z),d.push(j/R),d.push(1-$/w),F+=1}for(let $=0;$<w;$++)for(let te=0;te<R;te++){const _e=h+te+G*($+1),se=h+(te+1)+G*($+1),Ee=h+(te+1)+G*$;l.push(h+te+G*$,_e,Ee),l.push(_e,se,Ee),N+=6}a.addGroup(f,N,E),f+=N,h+=F}p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new mt(c,3)),this.setAttribute("normal",new mt(u,3)),this.setAttribute("uv",new mt(d,2))}static fromJSON(e){return new A2(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function R2(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];e[t][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function ms(n){const e={};for(let t=0;t<n.length;t++){const i=R2(n[t]);for(const r in i)e[r]=i[r]}return e}const tDe={clone:R2,merge:ms};class qu extends Ba{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=R2(e.uniforms),this.uniformsGroups=function eDe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class _M extends Kr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Kt,this.projectionMatrix=new Kt,this.projectionMatrixInverse=new Kt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Wr extends _M{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*j0*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ih*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*j0*Math.atan(Math.tan(.5*Ih*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ih*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class rDe extends Kr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new Wr(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new z(1,0,0)),this.add(r);const s=new Wr(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new z(-1,0,0)),this.add(s);const o=new Wr(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new z(0,1,0)),this.add(o);const a=new Wr(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new z(0,-1,0)),this.add(a);const l=new Wr(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new z(0,0,1)),this.add(l);const c=new Wr(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new z(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,u=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=h,i.texture.needsPMREMUpdate=!0}}class j6 extends Oa{constructor(e,t,i,r,s,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class sDe extends Lh{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new j6([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:qi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new A2(5,5,5),s=new qu({name:"CubemapFromEquirect",uniforms:R2(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Qr(r,s),a=t.minFilter;return t.minFilter===Nu&&(t.minFilter=qi),new rDe(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const vM=new z,oDe=new z,aDe=new Ao;class Bh{constructor(e=new z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=vM.subVectors(i,t).cross(oDe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(vM),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||aDe.getNormalMatrix(e),r=this.coplanarPoint(vM).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const L2=new zh,$6=new z;class yM{constructor(e=new Bh,t=new Bh,i=new Bh,r=new Bh,s=new Bh,o=new Bh){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],f=i[9],p=i[10],m=i[11],g=i[12],_=i[13],v=i[14],y=i[15];return t[0].setComponents(a-r,d-l,m-h,y-g).normalize(),t[1].setComponents(a+r,d+l,m+h,y+g).normalize(),t[2].setComponents(a+s,d+c,m+f,y+_).normalize(),t[3].setComponents(a-s,d-c,m-f,y-_).normalize(),t[4].setComponents(a-o,d-u,m-p,y-v).normalize(),t[5].setComponents(a+o,d+u,m+p,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),L2.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(L2)}intersectsSprite(e){return L2.center.set(0,0,0),L2.radius=.7071067811865476,L2.applyMatrix4(e.matrixWorld),this.intersectsSphere(L2)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if($6.x=r.normal.x>0?e.max.x:e.min.x,$6.y=r.normal.y>0?e.max.y:e.min.y,$6.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint($6)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function EW(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function lDe(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const h=i.get(c);return void((!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);void 0===d?i.set(c,function r(c,u){const d=c.array,h=c.usage,f=n.createBuffer();let p;if(n.bindBuffer(u,f),n.bufferData(u,d,h),c.onUploadCallback(),d instanceof Float32Array)p=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=5131}else p=5123;else if(d instanceof Int16Array)p=5122;else if(d instanceof Uint32Array)p=5125;else if(d instanceof Int32Array)p=5124;else if(d instanceof Int8Array)p=5120;else if(d instanceof Uint8Array)p=5121;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);p=5121}return{buffer:f,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function s(c,u,d){const h=u.array,f=u.updateRange;n.bindBuffer(d,c),-1===f.count?n.bufferSubData(d,0,h):(t?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}(d.buffer,c,u),d.version=c.version)}}}class K0 extends on{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=e/a,h=t/l,f=[],p=[],m=[],g=[];for(let _=0;_<u;_++){const v=_*h-o;for(let y=0;y<c;y++)p.push(y*d-s,-v,0),m.push(0,0,1),g.push(y/a),g.push(1-_/l)}for(let _=0;_<l;_++)for(let v=0;v<a;v++){const b=v+c*(_+1),x=v+1+c*(_+1),M=v+1+c*_;f.push(v+c*_,b,M),f.push(b,x,M)}this.setIndex(f),this.setAttribute("position",new mt(p,3)),this.setAttribute("normal",new mt(m,3)),this.setAttribute("uv",new mt(g,2))}static fromJSON(e){return new K0(e.width,e.height,e.widthSegments,e.heightSegments)}}const fn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},We={common:{diffuse:{value:new Ye(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ao},uv2Transform:{value:new Ao},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ye(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ye(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ao}},sprite:{diffuse:{value:new Ye(16777215)},opacity:{value:1},center:{value:new xe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ao}}},vl={basic:{uniforms:ms([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.fog]),vertexShader:fn.meshbasic_vert,fragmentShader:fn.meshbasic_frag},lambert:{uniforms:ms([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.fog,We.lights,{emissive:{value:new Ye(0)}}]),vertexShader:fn.meshlambert_vert,fragmentShader:fn.meshlambert_frag},phong:{uniforms:ms([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.fog,We.lights,{emissive:{value:new Ye(0)},specular:{value:new Ye(1118481)},shininess:{value:30}}]),vertexShader:fn.meshphong_vert,fragmentShader:fn.meshphong_frag},standard:{uniforms:ms([We.common,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.roughnessmap,We.metalnessmap,We.fog,We.lights,{emissive:{value:new Ye(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag},toon:{uniforms:ms([We.common,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.gradientmap,We.fog,We.lights,{emissive:{value:new Ye(0)}}]),vertexShader:fn.meshtoon_vert,fragmentShader:fn.meshtoon_frag},matcap:{uniforms:ms([We.common,We.bumpmap,We.normalmap,We.displacementmap,We.fog,{matcap:{value:null}}]),vertexShader:fn.meshmatcap_vert,fragmentShader:fn.meshmatcap_frag},points:{uniforms:ms([We.points,We.fog]),vertexShader:fn.points_vert,fragmentShader:fn.points_frag},dashed:{uniforms:ms([We.common,We.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fn.linedashed_vert,fragmentShader:fn.linedashed_frag},depth:{uniforms:ms([We.common,We.displacementmap]),vertexShader:fn.depth_vert,fragmentShader:fn.depth_frag},normal:{uniforms:ms([We.common,We.bumpmap,We.normalmap,We.displacementmap,{opacity:{value:1}}]),vertexShader:fn.meshnormal_vert,fragmentShader:fn.meshnormal_frag},sprite:{uniforms:ms([We.sprite,We.fog]),vertexShader:fn.sprite_vert,fragmentShader:fn.sprite_frag},background:{uniforms:{uvTransform:{value:new Ao},t2D:{value:null}},vertexShader:fn.background_vert,fragmentShader:fn.background_frag},cube:{uniforms:ms([We.envmap,{opacity:{value:1}}]),vertexShader:fn.cube_vert,fragmentShader:fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fn.equirect_vert,fragmentShader:fn.equirect_frag},distanceRGBA:{uniforms:ms([We.common,We.displacementmap,{referencePosition:{value:new z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fn.distanceRGBA_vert,fragmentShader:fn.distanceRGBA_frag},shadow:{uniforms:ms([We.lights,We.fog,{color:{value:new Ye(0)},opacity:{value:1}}]),vertexShader:fn.shadow_vert,fragmentShader:fn.shadow_frag}};function aRe(n,e,t,i,r,s){const o=new Ye(0);let l,c,a=!0===r?0:1,u=null,d=0,h=null;function p(m,g){t.buffers.color.setClear(m.r,m.g,m.b,g,s)}return{getClearColor:function(){return o},setClearColor:function(m,g=1){o.set(m),a=g,p(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(m){a=m,p(o,a)},render:function f(m,g){let _=!1,v=!0===g.isScene?g.background:null;v&&v.isTexture&&(v=e.get(v));const y=n.xr,b=y.getSession&&y.getSession();b&&"additive"===b.environmentBlendMode&&(v=null),null===v?p(o,a):v&&v.isColor&&(p(v,1),_=!0),(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),v&&(v.isCubeTexture||306===v.mapping)?(void 0===c&&(c=new Qr(new A2(1,1,1),new qu({name:"BackgroundCubeMaterial",uniforms:R2(vl.cube.uniforms),vertexShader:vl.cube.vertexShader,fragmentShader:vl.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(x,M,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,(u!==v||d!==v.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,u=v,d=v.version,h=n.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new Qr(new K0(2,2),new qu({name:"BackgroundMaterial",uniforms:R2(vl.background.uniforms),vertexShader:vl.background.vertexShader,fragmentShader:vl.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),(u!==v||d!==v.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,u=v,d=v.version,h=n.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}}}function lRe(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=g(null);let c=l,u=!1;function f(I){return i.isWebGL2?n.bindVertexArray(I):s.bindVertexArrayOES(I)}function p(I){return i.isWebGL2?n.deleteVertexArray(I):s.deleteVertexArrayOES(I)}function g(I){const G=[],k=[],F=[];for(let N=0;N<r;N++)G[N]=0,k[N]=0,F[N]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:G,enabledAttributes:k,attributeDivisors:F,object:I,attributes:{},index:null}}function y(){const I=c.newAttributes;for(let G=0,k=I.length;G<k;G++)I[G]=0}function b(I){x(I,0)}function x(I,G){const F=c.enabledAttributes,N=c.attributeDivisors;c.newAttributes[I]=1,0===F[I]&&(n.enableVertexAttribArray(I),F[I]=1),N[I]!==G&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](I,G),N[I]=G)}function M(){const I=c.newAttributes,G=c.enabledAttributes;for(let k=0,F=G.length;k<F;k++)G[k]!==I[k]&&(n.disableVertexAttribArray(k),G[k]=0)}function R(I,G,k,F,N,V){!0!==i.isWebGL2||5124!==k&&5125!==k?n.vertexAttribPointer(I,G,k,F,N,V):n.vertexAttribIPointer(I,G,k,N,V)}function J(){q(),u=!0,c!==l&&(c=l,f(c.object))}function q(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function d(I,G,k,F,N){let V=!1;if(o){const $=function m(I,G,k){const F=!0===k.wireframe;let N=a[I.id];void 0===N&&(N={},a[I.id]=N);let V=N[G.id];void 0===V&&(V={},N[G.id]=V);let $=V[F];return void 0===$&&($=g(function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),V[F]=$),$}(F,k,G);c!==$&&(c=$,f(c.object)),V=function _(I,G,k,F){const N=c.attributes,V=G.attributes;let $=0;const te=k.getAttributes();for(const j in te)if(te[j].location>=0){const se=N[j];let Ee=V[j];if(void 0===Ee&&("instanceMatrix"===j&&I.instanceMatrix&&(Ee=I.instanceMatrix),"instanceColor"===j&&I.instanceColor&&(Ee=I.instanceColor)),void 0===se||se.attribute!==Ee||Ee&&se.data!==Ee.data)return!0;$++}return c.attributesNum!==$||c.index!==F}(I,F,k,N),V&&function v(I,G,k,F){const N={},V=G.attributes;let $=0;const te=k.getAttributes();for(const j in te)if(te[j].location>=0){let se=V[j];void 0===se&&("instanceMatrix"===j&&I.instanceMatrix&&(se=I.instanceMatrix),"instanceColor"===j&&I.instanceColor&&(se=I.instanceColor));const Ee={};Ee.attribute=se,se&&se.data&&(Ee.data=se.data),N[j]=Ee,$++}c.attributes=N,c.attributesNum=$,c.index=F}(I,F,k,N)}else{const $=!0===G.wireframe;(c.geometry!==F.id||c.program!==k.id||c.wireframe!==$)&&(c.geometry=F.id,c.program=k.id,c.wireframe=$,V=!0)}null!==N&&t.update(N,34963),(V||u)&&(u=!1,function w(I,G,k,F){if(!1===i.isWebGL2&&(I.isInstancedMesh||F.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;y();const N=F.attributes,V=k.getAttributes(),$=G.defaultAttributeValues;for(const te in V){const j=V[te];if(j.location>=0){let _e=N[te];if(void 0===_e&&("instanceMatrix"===te&&I.instanceMatrix&&(_e=I.instanceMatrix),"instanceColor"===te&&I.instanceColor&&(_e=I.instanceColor)),void 0!==_e){const se=_e.normalized,Ee=_e.itemSize,ue=t.get(_e);if(void 0===ue)continue;const Ie=ue.buffer,Le=ue.type,qe=ue.bytesPerElement;if(_e.isInterleavedBufferAttribute){const Pe=_e.data,At=Pe.stride,ye=_e.offset;if(Pe.isInstancedInterleavedBuffer){for(let fe=0;fe<j.locationSize;fe++)x(j.location+fe,Pe.meshPerAttribute);!0!==I.isInstancedMesh&&void 0===F._maxInstanceCount&&(F._maxInstanceCount=Pe.meshPerAttribute*Pe.count)}else for(let fe=0;fe<j.locationSize;fe++)b(j.location+fe);n.bindBuffer(34962,Ie);for(let fe=0;fe<j.locationSize;fe++)R(j.location+fe,Ee/j.locationSize,Le,se,At*qe,(ye+Ee/j.locationSize*fe)*qe)}else{if(_e.isInstancedBufferAttribute){for(let Pe=0;Pe<j.locationSize;Pe++)x(j.location+Pe,_e.meshPerAttribute);!0!==I.isInstancedMesh&&void 0===F._maxInstanceCount&&(F._maxInstanceCount=_e.meshPerAttribute*_e.count)}else for(let Pe=0;Pe<j.locationSize;Pe++)b(j.location+Pe);n.bindBuffer(34962,Ie);for(let Pe=0;Pe<j.locationSize;Pe++)R(j.location+Pe,Ee/j.locationSize,Le,se,Ee*qe,Ee/j.locationSize*Pe*qe)}}else if(void 0!==$){const se=$[te];if(void 0!==se)switch(se.length){case 2:n.vertexAttrib2fv(j.location,se);break;case 3:n.vertexAttrib3fv(j.location,se);break;case 4:n.vertexAttrib4fv(j.location,se);break;default:n.vertexAttrib1fv(j.location,se)}}}}M()}(I,G,k,F),null!==N&&n.bindBuffer(34963,t.get(N).buffer))},reset:J,resetDefaultState:q,dispose:function E(){J();for(const I in a){const G=a[I];for(const k in G){const F=G[k];for(const N in F)p(F[N].object),delete F[N];delete G[k]}delete a[I]}},releaseStatesOfGeometry:function P(I){if(void 0===a[I.id])return;const G=a[I.id];for(const k in G){const F=G[k];for(const N in F)p(F[N].object),delete F[N];delete G[k]}delete a[I.id]},releaseStatesOfProgram:function Y(I){for(const G in a){const k=a[G];if(void 0===k[I.id])continue;const F=k[I.id];for(const N in F)p(F[N].object),delete F[N];delete k[I.id]}},initAttributes:y,enableAttribute:b,disableUnusedAttributes:M}}function cRe(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)},this.renderInstances=function l(c,u,d){if(0===d)return;let h,f;if(r)h=n,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](s,c,u,d),t.update(u,s,d)}}function uRe(n,e,t){let i;function s(R){if("highp"===R){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";R="mediump"}return"mediump"===R&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),p=n.getParameter(34076),m=n.getParameter(34921),g=n.getParameter(36347),_=n.getParameter(36348),v=n.getParameter(36349),y=h>0,b=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const R=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:_,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?n.getParameter(36183):0}}function dRe(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Bh,a=new Ao,l={value:null,needsUpdate:!1};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,f,p){const m=null!==d?d.length:0;let g=null;if(0!==m){if(g=l.value,!0!==p||null===g){const _=f+4*m,v=h.matrixWorldInverse;a.getNormalMatrix(v),(null===g||g.length<_)&&(g=new Float32Array(_));for(let y=0,b=f;y!==m;++y,b+=4)o.copy(d[y]).applyMatrix4(v,a),o.normal.toArray(g,b),g[b+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const p=0!==d.length||h||0!==i||r;return r=h,t=u(d,f,0),i=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,h,f){const p=d.clippingPlanes,m=d.clipIntersection,g=d.clipShadows,_=n.get(d);if(!r||null===p||0===p.length||s&&!g)s?u(null):c();else{const v=s?0:i,y=4*v;let b=_.clippingState||null;l.value=b,b=u(p,h,y,f);for(let x=0;x!==y;++x)b[x]=t[x];_.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=v}}}function hRe(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new sDe(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}vl.physical={uniforms:ms([vl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new xe(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Ye(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new xe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ye(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ye(1,1,1)},specularColorMap:{value:null}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag};class q6 extends _M{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const DW=[.125,.215,.35,.446,.526,.582],bM=new q6,AW=new Ye;let xM=null;const Hh=(1+Math.sqrt(5))/2,O2=1/Hh,RW=[new z(1,1,1),new z(-1,1,1),new z(1,1,-1),new z(-1,1,-1),new z(0,Hh,O2),new z(0,Hh,-O2),new z(O2,0,Hh),new z(-O2,0,Hh),new z(Hh,O2,0),new z(-Hh,O2,0)];class IW{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){xM=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=PW(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=LW(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(xM),e.scissorTest=!1,Y6(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),xM=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:qi,minFilter:qi,generateMipmaps:!1,type:G0,format:ka,encoding:Dh,depthBuffer:!1},r=kW(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=kW(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function fRe(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+DW.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-4?l=DW[o-n+4-1]:0===o&&(l=0),i.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,m=3,g=2,_=1,v=new Float32Array(m*p*f),y=new Float32Array(g*p*f),b=new Float32Array(_*p*f);for(let M=0;M<f;M++){const R=M%3*2/3-1,w=M>2?0:-1;v.set([R,w,0,R+2/3,w,0,R+2/3,w+1,0,R,w,0,R+2/3,w+1,0,R,w+1,0],m*p*M),y.set(h,g*p*M),b.set([M,M,M,M,M,M],_*p*M)}const x=new on;x.setAttribute("position",new xr(v,m)),x.setAttribute("uv",new xr(y,g)),x.setAttribute("faceIndex",new xr(b,_)),e.push(x),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function pRe(n,e,t){const i=new Float32Array(20),r=new z(0,1,0);return new qu({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new Qr(this._lodPlanes[0],e);this._renderer.compile(t,bM)}_sceneToCubeUV(e,t,i,r){const a=new Wr(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(AW),u.toneMapping=0,u.autoClear=!1;const f=new Ks({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new Qr(new A2,f);let m=!1;const g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,m=!0):(f.color.copy(AW),m=!0);for(let _=0;_<6;_++){const v=_%3;0===v?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):1===v?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const y=this._cubeSize;Y6(r,v*y,_>2?y:0,y,y),u.setRenderTarget(r),m&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=g}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=PW()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=LW());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Qr(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;Y6(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,bM)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,RW[(r-1)%RW.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new Qr(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,m=s/p,g=isFinite(s)?1+Math.floor(3*m):20;g>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const _=[];let v=0;for(let R=0;R<20;++R){const w=R/m,E=Math.exp(-w*w/2);_.push(E),0===R?v+=E:R<g&&(v+=2*E)}for(let R=0;R<_.length;R++)_[R]=_[R]/v;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=_,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:y}=this;h.dTheta.value=p,h.mipInt.value=y-i;const b=this._sizeLods[r];Y6(t,3*b*(r>y-4?r-y+4:0),4*(this._cubeSize-b),3*b,2*b),l.setRenderTarget(t),l.render(d,bM)}}function kW(n,e,t){const i=new Lh(n,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Y6(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function LW(){return new qu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function PW(){return new qu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function mRe(n){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=e.get(a);return null===t&&(t=new IW(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){null===t&&(t=new IW(n));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function gRe(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function _Re(n,e,t,i){const r={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(d){const h=[],f=d.index,p=d.attributes.position;let m=0;if(null!==f){const v=f.array;m=f.version;for(let y=0,b=v.length;y<b;y+=3){const x=v[y+0],M=v[y+1],R=v[y+2];h.push(x,M,M,R,R,x)}}else{m=p.version;for(let y=0,b=p.array.length/3-1;y<b;y+=3){const x=y+0,M=y+1,R=y+2;h.push(x,M,M,R,R,x)}}const g=new(uW(h)?SW:MW)(h,1);g.version=m;const _=s.get(d);_&&e.remove(_),s.set(d,g)}return{get:function a(d,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h},update:function l(d){const h=d.attributes;for(const p in h)e.update(h[p],34962);const f=d.morphAttributes;for(const p in f){const m=f[p];for(let g=0,_=m.length;g<_;g++)e.update(m[g],34962)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return s.get(d)}}}function vRe(n,e,t,i){const r=i.isWebGL2;let s,a,l;this.setMode=function o(h){s=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function u(h,f){n.drawElements(s,f,a,h*l),t.update(f,s,1)},this.renderInstances=function d(h,f,p){if(0===p)return;let m,g;if(r)m=n,g="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",null===m)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[g](s,f,a,h*l,p),t.update(f,s,p)}}function yRe(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function bRe(n,e){return n[0]-e[0]}function xRe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function wRe(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new qn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,d,h){const f=c.morphTargetInfluences;if(!0===e.isWebGL2){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=void 0!==p?p.length:0;let g=s.get(u);if(void 0===g||g.count!==m){let G=function(){q.dispose(),s.delete(u),u.removeEventListener("dispose",G)};void 0!==g&&g.texture.dispose();const y=void 0!==u.morphAttributes.position,b=void 0!==u.morphAttributes.normal,x=void 0!==u.morphAttributes.color,M=u.morphAttributes.position||[],R=u.morphAttributes.normal||[],w=u.morphAttributes.color||[];let E=0;!0===y&&(E=1),!0===b&&(E=2),!0===x&&(E=3);let P=u.attributes.position.count*E,Y=1;P>e.maxTextureSize&&(Y=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const J=new Float32Array(P*Y*4*m),q=new QC(J,P,Y,m);q.type=zu,q.needsUpdate=!0;const I=4*E;for(let k=0;k<m;k++){const F=M[k],N=R[k],V=w[k],$=P*Y*4*k;for(let te=0;te<F.count;te++){const j=te*I;!0===y&&(o.fromBufferAttribute(F,te),J[$+j+0]=o.x,J[$+j+1]=o.y,J[$+j+2]=o.z,J[$+j+3]=0),!0===b&&(o.fromBufferAttribute(N,te),J[$+j+4]=o.x,J[$+j+5]=o.y,J[$+j+6]=o.z,J[$+j+7]=0),!0===x&&(o.fromBufferAttribute(V,te),J[$+j+8]=o.x,J[$+j+9]=o.y,J[$+j+10]=o.z,J[$+j+11]=4===V.itemSize?o.w:1)}}g={count:m,texture:q,size:new xe(P,Y)},s.set(u,g),u.addEventListener("dispose",G)}let _=0;for(let y=0;y<f.length;y++)_+=f[y];const v=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(n,"morphTargetBaseInfluence",v),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const p=void 0===f?0:f.length;let m=i[u.id];if(void 0===m||m.length!==p){m=[];for(let b=0;b<p;b++)m[b]=[b,0];i[u.id]=m}for(let b=0;b<p;b++){const x=m[b];x[0]=b,x[1]=f[b]}m.sort(xRe);for(let b=0;b<8;b++)b<p&&m[b][1]?(a[b][0]=m[b][0],a[b][1]=m[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(bRe);const g=u.morphAttributes.position,_=u.morphAttributes.normal;let v=0;for(let b=0;b<8;b++){const x=a[b],M=x[0],R=x[1];M!==Number.MAX_SAFE_INTEGER&&R?(g&&u.getAttribute("morphTarget"+b)!==g[M]&&u.setAttribute("morphTarget"+b,g[M]),_&&u.getAttribute("morphNormal"+b)!==_[M]&&u.setAttribute("morphNormal"+b,_[M]),r[b]=R,v+=R):(g&&!0===u.hasAttribute("morphTarget"+b)&&u.deleteAttribute("morphTarget"+b),_&&!0===u.hasAttribute("morphNormal"+b)&&u.deleteAttribute("morphNormal"+b),r[b]=0)}const y=u.morphTargetsRelative?1:1-v;h.getUniforms().setValue(n,"morphTargetBaseInfluence",y),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function CRe(n,e,t,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=i.render.frame,d=e.get(l,l.geometry);return r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),d},dispose:function o(){r=new WeakMap}}}const OW=new Oa,FW=new QC,NW=new fW,zW=new j6,BW=[],VW=[],HW=new Float32Array(16),UW=new Float32Array(9),GW=new Float32Array(4);function F2(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=BW[r];if(void 0===s&&(s=new Float32Array(r),BW[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function ks(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ls(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function X6(n,e){let t=VW[e];void 0===t&&(t=new Int32Array(e),VW[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function MRe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function SRe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ks(t,e))return;n.uniform2fv(this.addr,e),Ls(t,e)}}function TRe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ks(t,e))return;n.uniform3fv(this.addr,e),Ls(t,e)}}function ERe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ks(t,e))return;n.uniform4fv(this.addr,e),Ls(t,e)}}function DRe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(ks(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ls(t,e)}else{if(ks(t,i))return;GW.set(i),n.uniformMatrix2fv(this.addr,!1,GW),Ls(t,i)}}function ARe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(ks(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ls(t,e)}else{if(ks(t,i))return;UW.set(i),n.uniformMatrix3fv(this.addr,!1,UW),Ls(t,i)}}function RRe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(ks(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ls(t,e)}else{if(ks(t,i))return;HW.set(i),n.uniformMatrix4fv(this.addr,!1,HW),Ls(t,i)}}function IRe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function kRe(n,e){const t=this.cache;ks(t,e)||(n.uniform2iv(this.addr,e),Ls(t,e))}function LRe(n,e){const t=this.cache;ks(t,e)||(n.uniform3iv(this.addr,e),Ls(t,e))}function PRe(n,e){const t=this.cache;ks(t,e)||(n.uniform4iv(this.addr,e),Ls(t,e))}function ORe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function FRe(n,e){const t=this.cache;ks(t,e)||(n.uniform2uiv(this.addr,e),Ls(t,e))}function NRe(n,e){const t=this.cache;ks(t,e)||(n.uniform3uiv(this.addr,e),Ls(t,e))}function zRe(n,e){const t=this.cache;ks(t,e)||(n.uniform4uiv(this.addr,e),Ls(t,e))}function BRe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||OW,r)}function VRe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||NW,r)}function HRe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||zW,r)}function URe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||FW,r)}function WRe(n,e){n.uniform1fv(this.addr,e)}function jRe(n,e){const t=F2(e,this.size,2);n.uniform2fv(this.addr,t)}function $Re(n,e){const t=F2(e,this.size,3);n.uniform3fv(this.addr,t)}function qRe(n,e){const t=F2(e,this.size,4);n.uniform4fv(this.addr,t)}function YRe(n,e){const t=F2(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function XRe(n,e){const t=F2(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function ZRe(n,e){const t=F2(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function KRe(n,e){n.uniform1iv(this.addr,e)}function QRe(n,e){n.uniform2iv(this.addr,e)}function JRe(n,e){n.uniform3iv(this.addr,e)}function eIe(n,e){n.uniform4iv(this.addr,e)}function tIe(n,e){n.uniform1uiv(this.addr,e)}function nIe(n,e){n.uniform2uiv(this.addr,e)}function iIe(n,e){n.uniform3uiv(this.addr,e)}function rIe(n,e){n.uniform4uiv(this.addr,e)}function sIe(n,e,t){const i=e.length,r=X6(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2D(e[s]||OW,r[s])}function oIe(n,e,t){const i=e.length,r=X6(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||NW,r[s])}function aIe(n,e,t){const i=e.length,r=X6(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTextureCube(e[s]||zW,r[s])}function lIe(n,e,t){const i=e.length,r=X6(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||FW,r[s])}class uIe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function GRe(n){switch(n){case 5126:return MRe;case 35664:return SRe;case 35665:return TRe;case 35666:return ERe;case 35674:return DRe;case 35675:return ARe;case 35676:return RRe;case 5124:case 35670:return IRe;case 35667:case 35671:return kRe;case 35668:case 35672:return LRe;case 35669:case 35673:return PRe;case 5125:return ORe;case 36294:return FRe;case 36295:return NRe;case 36296:return zRe;case 35678:case 36198:case 36298:case 36306:case 35682:return BRe;case 35679:case 36299:case 36307:return VRe;case 35680:case 36300:case 36308:case 36293:return HRe;case 36289:case 36303:case 36311:case 36292:return URe}}(t.type)}}class dIe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function cIe(n){switch(n){case 5126:return WRe;case 35664:return jRe;case 35665:return $Re;case 35666:return qRe;case 35674:return YRe;case 35675:return XRe;case 35676:return ZRe;case 5124:case 35670:return KRe;case 35667:case 35671:return QRe;case 35668:case 35672:return JRe;case 35669:case 35673:return eIe;case 5125:return tIe;case 36294:return nIe;case 36295:return iIe;case 36296:return rIe;case 35678:case 36198:case 36298:case 36306:case 35682:return sIe;case 35679:case 36299:case 36307:return oIe;case 35680:case 36300:case 36308:case 36293:return aIe;case 36289:case 36303:case 36311:case 36292:return lIe}}(t.type)}}class hIe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const CM=/(\w+)(\])?(\[|\.)?/g;function WW(n,e){n.seq.push(e),n.map[e.id]=e}function fIe(n,e,t){const i=n.name,r=i.length;for(CM.lastIndex=0;;){const s=CM.exec(i),o=CM.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===r){WW(t,void 0===c?new uIe(a,n,e):new dIe(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new hIe(a),WW(t,d)),t=d}}}class Z6{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);fIe(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function jW(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let pIe=0;function $W(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function mIe(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function _Ie(n,e){const t=function gIe(n){switch(n){case Dh:return["Linear","( value )"];case Hn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function vIe(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Q0(n){return""!==n}function qW(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function YW(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const wIe=/^[ \t]*#include +<([\w\d./]+)>/gm;function MM(n){return n.replace(wIe,CIe)}function CIe(n,e){const t=fn[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return MM(t)}const MIe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function XW(n){return n.replace(MIe,SIe)}function SIe(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function ZW(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function IIe(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function TIe(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function EIe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function DIe(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function AIe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function RIe(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),f=t.isWebGL2?"":function yIe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Q0).join("\n")}(t),p=function bIe(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),m=r.createProgram();let g,_,v=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(g=[p].filter(Q0).join("\n"),g.length>0&&(g+="\n"),_=[f,p].filter(Q0).join("\n"),_.length>0&&(_+="\n")):(g=[ZW(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Q0).join("\n"),_=[f,ZW(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?fn.tonemapping_pars_fragment:"",0!==t.toneMapping?vIe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",fn.encodings_pars_fragment,_Ie("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Q0).join("\n")),o=MM(o),o=qW(o,t),o=YW(o,t),a=MM(a),a=qW(a,t),a=YW(a,t),o=XW(o),a=XW(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(v="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,_=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const b=v+_+a,x=jW(r,35633,v+g+o),M=jW(r,35632,b);if(r.attachShader(m,x),r.attachShader(m,M),void 0!==t.index0AttributeName?r.bindAttribLocation(m,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),n.debug.checkShaderErrors){const E=r.getProgramInfoLog(m).trim(),P=r.getShaderInfoLog(x).trim(),Y=r.getShaderInfoLog(M).trim();let J=!0,q=!0;if(!1===r.getProgramParameter(m,35714)){J=!1;const I=$W(r,x,"vertex"),G=$W(r,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+E+"\n"+I+"\n"+G)}else""!==E?console.warn("THREE.WebGLProgram: Program Info Log:",E):(""===P||""===Y)&&(q=!1);q&&(this.diagnostics={runnable:J,programLog:E,vertexShader:{log:P,prefix:g},fragmentShader:{log:Y,prefix:_}})}let R,w;return r.deleteShader(x),r.deleteShader(M),this.getUniforms=function(){return void 0===R&&(R=new Z6(r,m)),R},this.getAttributes=function(){return void 0===w&&(w=function xIe(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,m)),w},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=t.shaderName,this.id=pIe++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=M,this}let kIe=0;class LIe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new PIe(e),t.set(e,i)),i}}class PIe{constructor(e){this.id=kIe++,this.code=e,this.usedTimes=0}}function OIe(n,e,t,i,r,s,o){const a=new oM,l=new LIe,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function m(w,E,P,Y,J){const q=Y.fog,I=J.geometry,k=(w.isMeshStandardMaterial?t:e).get(w.envMap||(w.isMeshStandardMaterial?Y.environment:null)),F=k&&306===k.mapping?k.image.height:null,N=p[w.type];null!==w.precision&&(f=r.getMaxPrecision(w.precision),f!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",f,"instead."));const V=I.morphAttributes.position||I.morphAttributes.normal||I.morphAttributes.color,$=void 0!==V?V.length:0;let j,_e,se,Ee,te=0;if(void 0!==I.morphAttributes.position&&(te=1),void 0!==I.morphAttributes.normal&&(te=2),void 0!==I.morphAttributes.color&&(te=3),N){const At=vl[N];j=At.vertexShader,_e=At.fragmentShader}else j=w.vertexShader,_e=w.fragmentShader,l.update(w),se=l.getVertexShaderID(w),Ee=l.getFragmentShaderID(w);const ue=n.getRenderTarget(),Le=w.clearcoat>0,qe=w.iridescence>0;return{isWebGL2:u,shaderID:N,shaderName:w.type,vertexShader:j,fragmentShader:_e,defines:w.defines,customVertexShaderID:se,customFragmentShaderID:Ee,isRawShaderMaterial:!0===w.isRawShaderMaterial,glslVersion:w.glslVersion,precision:f,instancing:!0===J.isInstancedMesh,instancingColor:!0===J.isInstancedMesh&&null!==J.instanceColor,supportsVertexTextures:h,outputEncoding:null===ue?n.outputEncoding:!0===ue.isXRRenderTarget?ue.texture.encoding:Dh,map:!!w.map,matcap:!!w.matcap,envMap:!!k,envMapMode:k&&k.mapping,envMapCubeUVHeight:F,lightMap:!!w.lightMap,aoMap:!!w.aoMap,emissiveMap:!!w.emissiveMap,bumpMap:!!w.bumpMap,normalMap:!!w.normalMap,objectSpaceNormalMap:1===w.normalMapType,tangentSpaceNormalMap:0===w.normalMapType,decodeVideoTexture:!!w.map&&!0===w.map.isVideoTexture&&w.map.encoding===Hn,clearcoat:Le,clearcoatMap:Le&&!!w.clearcoatMap,clearcoatRoughnessMap:Le&&!!w.clearcoatRoughnessMap,clearcoatNormalMap:Le&&!!w.clearcoatNormalMap,iridescence:qe,iridescenceMap:qe&&!!w.iridescenceMap,iridescenceThicknessMap:qe&&!!w.iridescenceThicknessMap,displacementMap:!!w.displacementMap,roughnessMap:!!w.roughnessMap,metalnessMap:!!w.metalnessMap,specularMap:!!w.specularMap,specularIntensityMap:!!w.specularIntensityMap,specularColorMap:!!w.specularColorMap,opaque:!1===w.transparent&&1===w.blending,alphaMap:!!w.alphaMap,alphaTest:w.alphaTest>0,gradientMap:!!w.gradientMap,sheen:w.sheen>0,sheenColorMap:!!w.sheenColorMap,sheenRoughnessMap:!!w.sheenRoughnessMap,transmission:w.transmission>0,transmissionMap:!!w.transmissionMap,thicknessMap:!!w.thicknessMap,combine:w.combine,vertexTangents:!!w.normalMap&&!!I.attributes.tangent,vertexColors:w.vertexColors,vertexAlphas:!0===w.vertexColors&&!!I.attributes.color&&4===I.attributes.color.itemSize,vertexUvs:!!(w.map||w.bumpMap||w.normalMap||w.specularMap||w.alphaMap||w.emissiveMap||w.roughnessMap||w.metalnessMap||w.clearcoatMap||w.clearcoatRoughnessMap||w.clearcoatNormalMap||w.iridescenceMap||w.iridescenceThicknessMap||w.displacementMap||w.transmissionMap||w.thicknessMap||w.specularIntensityMap||w.specularColorMap||w.sheenColorMap||w.sheenRoughnessMap),uvsVertexOnly:!(w.map||w.bumpMap||w.normalMap||w.specularMap||w.alphaMap||w.emissiveMap||w.roughnessMap||w.metalnessMap||w.clearcoatNormalMap||w.iridescenceMap||w.iridescenceThicknessMap||w.transmission>0||w.transmissionMap||w.thicknessMap||w.specularIntensityMap||w.specularColorMap||w.sheen>0||w.sheenColorMap||w.sheenRoughnessMap||!w.displacementMap),fog:!!q,useFog:!0===w.fog,fogExp2:q&&q.isFogExp2,flatShading:!!w.flatShading,sizeAttenuation:w.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===J.isSkinnedMesh,morphTargets:void 0!==I.morphAttributes.position,morphNormals:void 0!==I.morphAttributes.normal,morphColors:void 0!==I.morphAttributes.color,morphTargetsCount:$,morphTextureStride:te,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:w.dithering,shadowMapEnabled:n.shadowMap.enabled&&P.length>0,shadowMapType:n.shadowMap.type,toneMapping:w.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:w.premultipliedAlpha,doubleSided:2===w.side,flipSided:1===w.side,useDepthPacking:!!w.depthPacking,depthPacking:w.depthPacking||0,index0AttributeName:w.index0AttributeName,extensionDerivatives:w.extensions&&w.extensions.derivatives,extensionFragDepth:w.extensions&&w.extensions.fragDepth,extensionDrawBuffers:w.extensions&&w.extensions.drawBuffers,extensionShaderTextureLOD:w.extensions&&w.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:w.customProgramCacheKey()}},getProgramCacheKey:function g(w){const E=[];if(w.shaderID?E.push(w.shaderID):(E.push(w.customVertexShaderID),E.push(w.customFragmentShaderID)),void 0!==w.defines)for(const P in w.defines)E.push(P),E.push(w.defines[P]);return!1===w.isRawShaderMaterial&&(function _(w,E){w.push(E.precision),w.push(E.outputEncoding),w.push(E.envMapMode),w.push(E.envMapCubeUVHeight),w.push(E.combine),w.push(E.vertexUvs),w.push(E.fogExp2),w.push(E.sizeAttenuation),w.push(E.morphTargetsCount),w.push(E.morphAttributeCount),w.push(E.numDirLights),w.push(E.numPointLights),w.push(E.numSpotLights),w.push(E.numSpotLightMaps),w.push(E.numHemiLights),w.push(E.numRectAreaLights),w.push(E.numDirLightShadows),w.push(E.numPointLightShadows),w.push(E.numSpotLightShadows),w.push(E.numSpotLightShadowsWithMaps),w.push(E.shadowMapType),w.push(E.toneMapping),w.push(E.numClippingPlanes),w.push(E.numClipIntersection),w.push(E.depthPacking)}(E,w),function v(w,E){a.disableAll(),E.isWebGL2&&a.enable(0),E.supportsVertexTextures&&a.enable(1),E.instancing&&a.enable(2),E.instancingColor&&a.enable(3),E.map&&a.enable(4),E.matcap&&a.enable(5),E.envMap&&a.enable(6),E.lightMap&&a.enable(7),E.aoMap&&a.enable(8),E.emissiveMap&&a.enable(9),E.bumpMap&&a.enable(10),E.normalMap&&a.enable(11),E.objectSpaceNormalMap&&a.enable(12),E.tangentSpaceNormalMap&&a.enable(13),E.clearcoat&&a.enable(14),E.clearcoatMap&&a.enable(15),E.clearcoatRoughnessMap&&a.enable(16),E.clearcoatNormalMap&&a.enable(17),E.iridescence&&a.enable(18),E.iridescenceMap&&a.enable(19),E.iridescenceThicknessMap&&a.enable(20),E.displacementMap&&a.enable(21),E.specularMap&&a.enable(22),E.roughnessMap&&a.enable(23),E.metalnessMap&&a.enable(24),E.gradientMap&&a.enable(25),E.alphaMap&&a.enable(26),E.alphaTest&&a.enable(27),E.vertexColors&&a.enable(28),E.vertexAlphas&&a.enable(29),E.vertexUvs&&a.enable(30),E.vertexTangents&&a.enable(31),E.uvsVertexOnly&&a.enable(32),w.push(a.mask),a.disableAll(),E.fog&&a.enable(0),E.useFog&&a.enable(1),E.flatShading&&a.enable(2),E.logarithmicDepthBuffer&&a.enable(3),E.skinning&&a.enable(4),E.morphTargets&&a.enable(5),E.morphNormals&&a.enable(6),E.morphColors&&a.enable(7),E.premultipliedAlpha&&a.enable(8),E.shadowMapEnabled&&a.enable(9),E.physicallyCorrectLights&&a.enable(10),E.doubleSided&&a.enable(11),E.flipSided&&a.enable(12),E.useDepthPacking&&a.enable(13),E.dithering&&a.enable(14),E.specularIntensityMap&&a.enable(15),E.specularColorMap&&a.enable(16),E.transmission&&a.enable(17),E.transmissionMap&&a.enable(18),E.thicknessMap&&a.enable(19),E.sheen&&a.enable(20),E.sheenColorMap&&a.enable(21),E.sheenRoughnessMap&&a.enable(22),E.decodeVideoTexture&&a.enable(23),E.opaque&&a.enable(24),w.push(a.mask)}(E,w),E.push(n.outputEncoding)),E.push(w.customProgramCacheKey),E.join()},getUniforms:function y(w){const E=p[w.type];let P;return P=E?tDe.clone(vl[E].uniforms):w.uniforms,P},acquireProgram:function b(w,E){let P;for(let Y=0,J=c.length;Y<J;Y++){const q=c[Y];if(q.cacheKey===E){P=q,++P.usedTimes;break}}return void 0===P&&(P=new IIe(n,E,w,s),c.push(P)),P},releaseProgram:function x(w){if(0==--w.usedTimes){const E=c.indexOf(w);c[E]=c[c.length-1],c.pop(),w.destroy()}},releaseShaderCache:function M(w){l.remove(w)},programs:c,dispose:function R(){l.dispose()}}}function FIe(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function NIe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function KW(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function QW(){const n=[];let e=0;const t=[],i=[],r=[];function o(d,h,f,p,m,g){let _=n[e];return void 0===_?(_={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:m,group:g},n[e]=_):(_.id=d.id,_.object=d,_.geometry=h,_.material=f,_.groupOrder=p,_.renderOrder=d.renderOrder,_.z=m,_.group=g),e++,_}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(d,h,f,p,m,g){const _=o(d,h,f,p,m,g);f.transmission>0?i.push(_):!0===f.transparent?r.push(_):t.push(_)},unshift:function l(d,h,f,p,m,g){const _=o(d,h,f,p,m,g);f.transmission>0?i.unshift(_):!0===f.transparent?r.unshift(_):t.unshift(_)},finish:function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(d,h){t.length>1&&t.sort(d||NIe),i.length>1&&i.sort(h||KW),r.length>1&&r.sort(h||KW)}}}function zIe(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new QW,n.set(i,[o])):r>=s.length?(o=new QW,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function BIe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new z,color:new Ye};break;case"SpotLight":t={position:new z,direction:new z,color:new Ye,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new z,color:new Ye,distance:0,decay:0};break;case"HemisphereLight":t={direction:new z,skyColor:new Ye,groundColor:new Ye};break;case"RectAreaLight":t={color:new Ye,position:new z,halfWidth:new z,halfHeight:new z}}return n[e.id]=t,t}}}let HIe=0;function UIe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function GIe(n,e){const t=new BIe,i=function VIe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new z);const s=new z,o=new Kt,a=new Kt;return{setup:function l(u,d){let h=0,f=0,p=0;for(let Y=0;Y<9;Y++)r.probe[Y].set(0,0,0);let m=0,g=0,_=0,v=0,y=0,b=0,x=0,M=0,R=0,w=0;u.sort(UIe);const E=!0!==d?Math.PI:1;for(let Y=0,J=u.length;Y<J;Y++){const q=u[Y],I=q.color,G=q.intensity,k=q.distance,F=q.shadow&&q.shadow.map?q.shadow.map.texture:null;if(q.isAmbientLight)h+=I.r*G*E,f+=I.g*G*E,p+=I.b*G*E;else if(q.isLightProbe)for(let N=0;N<9;N++)r.probe[N].addScaledVector(q.sh.coefficients[N],G);else if(q.isDirectionalLight){const N=t.get(q);if(N.color.copy(q.color).multiplyScalar(q.intensity*E),q.castShadow){const V=q.shadow,$=i.get(q);$.shadowBias=V.bias,$.shadowNormalBias=V.normalBias,$.shadowRadius=V.radius,$.shadowMapSize=V.mapSize,r.directionalShadow[m]=$,r.directionalShadowMap[m]=F,r.directionalShadowMatrix[m]=q.shadow.matrix,b++}r.directional[m]=N,m++}else if(q.isSpotLight){const N=t.get(q);N.position.setFromMatrixPosition(q.matrixWorld),N.color.copy(I).multiplyScalar(G*E),N.distance=k,N.coneCos=Math.cos(q.angle),N.penumbraCos=Math.cos(q.angle*(1-q.penumbra)),N.decay=q.decay,r.spot[_]=N;const V=q.shadow;if(q.map&&(r.spotLightMap[R]=q.map,R++,V.updateMatrices(q),q.castShadow&&w++),r.spotLightMatrix[_]=V.matrix,q.castShadow){const $=i.get(q);$.shadowBias=V.bias,$.shadowNormalBias=V.normalBias,$.shadowRadius=V.radius,$.shadowMapSize=V.mapSize,r.spotShadow[_]=$,r.spotShadowMap[_]=F,M++}_++}else if(q.isRectAreaLight){const N=t.get(q);N.color.copy(I).multiplyScalar(G),N.halfWidth.set(.5*q.width,0,0),N.halfHeight.set(0,.5*q.height,0),r.rectArea[v]=N,v++}else if(q.isPointLight){const N=t.get(q);if(N.color.copy(q.color).multiplyScalar(q.intensity*E),N.distance=q.distance,N.decay=q.decay,q.castShadow){const V=q.shadow,$=i.get(q);$.shadowBias=V.bias,$.shadowNormalBias=V.normalBias,$.shadowRadius=V.radius,$.shadowMapSize=V.mapSize,$.shadowCameraNear=V.camera.near,$.shadowCameraFar=V.camera.far,r.pointShadow[g]=$,r.pointShadowMap[g]=F,r.pointShadowMatrix[g]=q.shadow.matrix,x++}r.point[g]=N,g++}else if(q.isHemisphereLight){const N=t.get(q);N.skyColor.copy(q.color).multiplyScalar(G*E),N.groundColor.copy(q.groundColor).multiplyScalar(G*E),r.hemi[y]=N,y++}}v>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=We.LTC_FLOAT_1,r.rectAreaLTC2=We.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=We.LTC_HALF_1,r.rectAreaLTC2=We.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=p;const P=r.hash;(P.directionalLength!==m||P.pointLength!==g||P.spotLength!==_||P.rectAreaLength!==v||P.hemiLength!==y||P.numDirectionalShadows!==b||P.numPointShadows!==x||P.numSpotShadows!==M||P.numSpotMaps!==R)&&(r.directional.length=m,r.spot.length=_,r.rectArea.length=v,r.point.length=g,r.hemi.length=y,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=x,r.pointShadowMap.length=x,r.spotShadow.length=M,r.spotShadowMap.length=M,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=x,r.spotLightMatrix.length=M+R-w,r.spotLightMap.length=R,r.numSpotLightShadowsWithMaps=w,P.directionalLength=m,P.pointLength=g,P.spotLength=_,P.rectAreaLength=v,P.hemiLength=y,P.numDirectionalShadows=b,P.numPointShadows=x,P.numSpotShadows=M,P.numSpotMaps=R,r.version=HIe++)},setupView:function c(u,d){let h=0,f=0,p=0,m=0,g=0;const _=d.matrixWorldInverse;for(let v=0,y=u.length;v<y;v++){const b=u[v];if(b.isDirectionalLight){const x=r.directional[h];x.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(_),h++}else if(b.isSpotLight){const x=r.spot[p];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(_),x.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(_),p++}else if(b.isRectAreaLight){const x=r.rectArea[m];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(_),a.identity(),o.copy(b.matrixWorld),o.premultiply(_),a.extractRotation(o),x.halfWidth.set(.5*b.width,0,0),x.halfHeight.set(0,.5*b.height,0),x.halfWidth.applyMatrix4(a),x.halfHeight.applyMatrix4(a),m++}else if(b.isPointLight){const x=r.point[f];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(_),f++}else if(b.isHemisphereLight){const x=r.hemi[g];x.direction.setFromMatrixPosition(b.matrixWorld),x.direction.transformDirection(_),g++}}},state:r}}function JW(n,e){const t=new GIe(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function l(d){t.setup(i,d)},setupLightsView:function c(d){t.setupView(i,d)},pushLight:function o(d){i.push(d)},pushShadow:function a(d){r.push(d)}}}function WIe(n,e){let t=new WeakMap;return{get:function i(s,o=0){const a=t.get(s);let l;return void 0===a?(l=new JW(n,e),t.set(s,[l])):o>=a.length?(l=new JW(n,e),a.push(l)):l=a[o],l},dispose:function r(){t=new WeakMap}}}class ej extends Ba{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class tj extends Ba{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new z,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function qIe(n,e,t){let i=new yM;const r=new xe,s=new xe,o=new qn,a=new ej({depthPacking:3201}),l=new tj,c={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new qu({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new xe},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new on;p.setAttribute("position",new xr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Qr(p,h),g=this;function _(b,x){const M=e.update(m);h.defines.VSM_SAMPLES!==b.blurSamples&&(h.defines.VSM_SAMPLES=b.blurSamples,f.defines.VSM_SAMPLES=b.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===b.mapPass&&(b.mapPass=new Lh(r.x,r.y)),h.uniforms.shadow_pass.value=b.map.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(x,null,M,h,m,null),f.uniforms.shadow_pass.value=b.mapPass.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(x,null,M,f,m,null)}function v(b,x,M,R,w,E){let P=null;const Y=!0===M.isPointLight?b.customDistanceMaterial:b.customDepthMaterial;if(P=void 0!==Y?Y:!0===M.isPointLight?l:a,n.localClippingEnabled&&!0===x.clipShadows&&Array.isArray(x.clippingPlanes)&&0!==x.clippingPlanes.length||x.displacementMap&&0!==x.displacementScale||x.alphaMap&&x.alphaTest>0){const J=P.uuid,q=x.uuid;let I=c[J];void 0===I&&(I={},c[J]=I);let G=I[q];void 0===G&&(G=P.clone(),I[q]=G),P=G}return P.visible=x.visible,P.wireframe=x.wireframe,P.side=3===E?null!==x.shadowSide?x.shadowSide:x.side:null!==x.shadowSide?x.shadowSide:d[x.side],P.alphaMap=x.alphaMap,P.alphaTest=x.alphaTest,P.clipShadows=x.clipShadows,P.clippingPlanes=x.clippingPlanes,P.clipIntersection=x.clipIntersection,P.displacementMap=x.displacementMap,P.displacementScale=x.displacementScale,P.displacementBias=x.displacementBias,P.wireframeLinewidth=x.wireframeLinewidth,P.linewidth=x.linewidth,!0===M.isPointLight&&!0===P.isMeshDistanceMaterial&&(P.referencePosition.setFromMatrixPosition(M.matrixWorld),P.nearDistance=R,P.farDistance=w),P}function y(b,x,M,R,w){if(!1===b.visible)return;if(b.layers.test(x.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&3===w)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,b.matrixWorld);const Y=e.update(b),J=b.material;if(Array.isArray(J)){const q=Y.groups;for(let I=0,G=q.length;I<G;I++){const k=q[I],F=J[k.materialIndex];if(F&&F.visible){const N=v(b,F,R,M.near,M.far,w);n.renderBufferDirect(M,null,Y,N,b,k)}}}else if(J.visible){const q=v(b,J,R,M.near,M.far,w);n.renderBufferDirect(M,null,Y,q,b,null)}}const P=b.children;for(let Y=0,J=P.length;Y<J;Y++)y(P[Y],x,M,R,w)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(b,x,M){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===b.length)return;const R=n.getRenderTarget(),w=n.getActiveCubeFace(),E=n.getActiveMipmapLevel(),P=n.state;P.setBlending(0),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);for(let Y=0,J=b.length;Y<J;Y++){const q=b[Y],I=q.shadow;if(void 0===I){console.warn("THREE.WebGLShadowMap:",q,"has no shadow.");continue}if(!1===I.autoUpdate&&!1===I.needsUpdate)continue;r.copy(I.mapSize);const G=I.getFrameExtents();r.multiply(G),s.copy(I.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/G.x),r.x=s.x*G.x,I.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/G.y),r.y=s.y*G.y,I.mapSize.y=s.y)),null===I.map&&(I.map=new Lh(r.x,r.y,3!==this.type?{minFilter:yr,magFilter:yr}:{}),I.map.texture.name=q.name+".shadowMap",I.camera.updateProjectionMatrix()),n.setRenderTarget(I.map),n.clear();const k=I.getViewportCount();for(let F=0;F<k;F++){const N=I.getViewport(F);o.set(s.x*N.x,s.y*N.y,s.x*N.z,s.y*N.w),P.viewport(o),I.updateMatrices(q,F),i=I.getFrustum(),y(x,M,I.camera,q,this.type)}!0!==I.isPointLightShadow&&3===this.type&&_(I,M),I.needsUpdate=!1}g.needsUpdate=!1,n.setRenderTarget(R,w,E)}}function YIe(n,e,t){const i=t.isWebGL2,a=new function r(){let ee=!1;const Ge=new qn;let ge=null;const tt=new qn(0,0,0,0);return{setMask:function(Ke){ge!==Ke&&!ee&&(n.colorMask(Ke,Ke,Ke,Ke),ge=Ke)},setLocked:function(Ke){ee=Ke},setClear:function(Ke,ln,lr,Ti,Zi){!0===Zi&&(Ke*=Ti,ln*=Ti,lr*=Ti),Ge.set(Ke,ln,lr,Ti),!1===tt.equals(Ge)&&(n.clearColor(Ke,ln,lr,Ti),tt.copy(Ge))},reset:function(){ee=!1,ge=null,tt.set(-1,0,0,0)}}},l=new function s(){let ee=!1,Ge=null,ge=null,tt=null;return{setTest:function(Ke){Ke?Ie(2929):Le(2929)},setMask:function(Ke){Ge!==Ke&&!ee&&(n.depthMask(Ke),Ge=Ke)},setFunc:function(Ke){if(ge!==Ke){if(Ke)switch(Ke){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);ge=Ke}},setLocked:function(Ke){ee=Ke},setClear:function(Ke){tt!==Ke&&(n.clearDepth(Ke),tt=Ke)},reset:function(){ee=!1,Ge=null,ge=null,tt=null}}},c=new function o(){let ee=!1,Ge=null,ge=null,tt=null,Ke=null,ln=null,lr=null,Ti=null,Zi=null;return{setTest:function(Gn){ee||(Gn?Ie(2960):Le(2960))},setMask:function(Gn){Ge!==Gn&&!ee&&(n.stencilMask(Gn),Ge=Gn)},setFunc:function(Gn,Ki,Qi){(ge!==Gn||tt!==Ki||Ke!==Qi)&&(n.stencilFunc(Gn,Ki,Qi),ge=Gn,tt=Ki,Ke=Qi)},setOp:function(Gn,Ki,Qi){(ln!==Gn||lr!==Ki||Ti!==Qi)&&(n.stencilOp(Gn,Ki,Qi),ln=Gn,lr=Ki,Ti=Qi)},setLocked:function(Gn){ee=Gn},setClear:function(Gn){Zi!==Gn&&(n.clearStencil(Gn),Zi=Gn)},reset:function(){ee=!1,Ge=null,ge=null,tt=null,Ke=null,ln=null,lr=null,Ti=null,Zi=null}}},u=new WeakMap,d=new WeakMap;let h={},f={},p=new WeakMap,m=[],g=null,_=!1,v=null,y=null,b=null,x=null,M=null,R=null,w=null,E=!1,P=null,Y=null,J=null,q=null,I=null;const G=n.getParameter(35661);let k=!1,F=0;const N=n.getParameter(7938);-1!==N.indexOf("WebGL")?(F=parseFloat(/^WebGL (\d)/.exec(N)[1]),k=F>=1):-1!==N.indexOf("OpenGL ES")&&(F=parseFloat(/^OpenGL ES (\d)/.exec(N)[1]),k=F>=2);let V=null,$={};const te=n.getParameter(3088),j=n.getParameter(2978),_e=(new qn).fromArray(te),se=(new qn).fromArray(j);function Ee(ee,Ge,ge){const tt=new Uint8Array(4),Ke=n.createTexture();n.bindTexture(ee,Ke),n.texParameteri(ee,10241,9728),n.texParameteri(ee,10240,9728);for(let ln=0;ln<ge;ln++)n.texImage2D(Ge+ln,0,6408,1,1,0,6408,5121,tt);return Ke}const ue={};function Ie(ee){!0!==h[ee]&&(n.enable(ee),h[ee]=!0)}function Le(ee){!1!==h[ee]&&(n.disable(ee),h[ee]=!1)}ue[3553]=Ee(3553,3553,1),ue[34067]=Ee(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ie(2929),l.setFunc(3),Ne(!1),Oe(1),Ie(2884),Re(0);const ye={100:32774,101:32778,102:32779};if(i)ye[103]=32775,ye[104]=32776;else{const ee=e.get("EXT_blend_minmax");null!==ee&&(ye[103]=ee.MIN_EXT,ye[104]=ee.MAX_EXT)}const fe={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Re(ee,Ge,ge,tt,Ke,ln,lr,Ti){if(0!==ee){if(!1===_&&(Ie(3042),_=!0),5===ee)Ke=Ke||Ge,ln=ln||ge,lr=lr||tt,(Ge!==y||Ke!==M)&&(n.blendEquationSeparate(ye[Ge],ye[Ke]),y=Ge,M=Ke),(ge!==b||tt!==x||ln!==R||lr!==w)&&(n.blendFuncSeparate(fe[ge],fe[tt],fe[ln],fe[lr]),b=ge,x=tt,R=ln,w=lr),v=ee,E=null;else if(ee!==v||Ti!==E){if((100!==y||100!==M)&&(n.blendEquation(32774),y=100,M=100),Ti)switch(ee){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee)}else switch(ee){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee)}b=null,x=null,R=null,w=null,v=ee,E=Ti}}else!0===_&&(Le(3042),_=!1)}function Ne(ee){P!==ee&&(n.frontFace(ee?2304:2305),P=ee)}function Oe(ee){0!==ee?(Ie(2884),ee!==Y&&n.cullFace(1===ee?1029:2===ee?1028:1032)):Le(2884),Y=ee}function ct(ee,Ge,ge){ee?(Ie(32823),(q!==Ge||I!==ge)&&(n.polygonOffset(Ge,ge),q=Ge,I=ge)):Le(32823)}function yn(ee){void 0===ee&&(ee=33984+G-1),V!==ee&&(n.activeTexture(ee),V=ee)}return{buffers:{color:a,depth:l,stencil:c},enable:Ie,disable:Le,bindFramebuffer:function qe(ee,Ge){return f[ee]!==Ge&&(n.bindFramebuffer(ee,Ge),f[ee]=Ge,i&&(36009===ee&&(f[36160]=Ge),36160===ee&&(f[36009]=Ge)),!0)},drawBuffers:function Pe(ee,Ge){let ge=m,tt=!1;if(ee)if(ge=p.get(Ge),void 0===ge&&(ge=[],p.set(Ge,ge)),ee.isWebGLMultipleRenderTargets){const Ke=ee.texture;if(ge.length!==Ke.length||36064!==ge[0]){for(let ln=0,lr=Ke.length;ln<lr;ln++)ge[ln]=36064+ln;ge.length=Ke.length,tt=!0}}else 36064!==ge[0]&&(ge[0]=36064,tt=!0);else 1029!==ge[0]&&(ge[0]=1029,tt=!0);tt&&(t.isWebGL2?n.drawBuffers(ge):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ge))},useProgram:function At(ee){return g!==ee&&(n.useProgram(ee),g=ee,!0)},setBlending:Re,setMaterial:function rt(ee,Ge){2===ee.side?Le(2884):Ie(2884);let ge=1===ee.side;Ge&&(ge=!ge),Ne(ge),1===ee.blending&&!1===ee.transparent?Re(0):Re(ee.blending,ee.blendEquation,ee.blendSrc,ee.blendDst,ee.blendEquationAlpha,ee.blendSrcAlpha,ee.blendDstAlpha,ee.premultipliedAlpha),l.setFunc(ee.depthFunc),l.setTest(ee.depthTest),l.setMask(ee.depthWrite),a.setMask(ee.colorWrite);const tt=ee.stencilWrite;c.setTest(tt),tt&&(c.setMask(ee.stencilWriteMask),c.setFunc(ee.stencilFunc,ee.stencilRef,ee.stencilFuncMask),c.setOp(ee.stencilFail,ee.stencilZFail,ee.stencilZPass)),ct(ee.polygonOffset,ee.polygonOffsetFactor,ee.polygonOffsetUnits),!0===ee.alphaToCoverage?Ie(32926):Le(32926)},setFlipSided:Ne,setCullFace:Oe,setLineWidth:function Qe(ee){ee!==J&&(k&&n.lineWidth(ee),J=ee)},setPolygonOffset:ct,setScissorTest:function $t(ee){ee?Ie(3089):Le(3089)},activeTexture:yn,bindTexture:function W(ee,Ge){null===V&&yn();let ge=$[V];void 0===ge&&(ge={type:void 0,texture:void 0},$[V]=ge),(ge.type!==ee||ge.texture!==Ge)&&(n.bindTexture(ee,Ge||ue[ee]),ge.type=ee,ge.texture=Ge)},unbindTexture:function O(){const ee=$[V];void 0!==ee&&void 0!==ee.type&&(n.bindTexture(ee.type,null),ee.type=void 0,ee.texture=void 0)},compressedTexImage2D:function ce(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},texImage2D:function Me(){try{n.texImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},texImage3D:function Ae(){try{n.texImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},updateUBOMapping:function zt(ee,Ge){let ge=d.get(Ge);void 0===ge&&(ge=new WeakMap,d.set(Ge,ge));let tt=ge.get(ee);void 0===tt&&(tt=n.getUniformBlockIndex(Ge,ee.name),ge.set(ee,tt))},uniformBlockBinding:function an(ee,Ge){const tt=d.get(Ge).get(ee);u.get(ee)!==tt&&(n.uniformBlockBinding(Ge,tt,ee.__bindingPointIndex),u.set(ee,tt))},texStorage2D:function _t(){try{n.texStorage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},texStorage3D:function B(){try{n.texStorage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},texSubImage2D:function De(){try{n.texSubImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},texSubImage3D:function Fe(){try{n.texSubImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},compressedTexSubImage2D:function Ve(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}},scissor:function Xe(ee){!1===_e.equals(ee)&&(n.scissor(ee.x,ee.y,ee.z,ee.w),_e.copy(ee))},viewport:function Ze(ee){!1===se.equals(ee)&&(n.viewport(ee.x,ee.y,ee.z,ee.w),se.copy(ee))},reset:function ii(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},V=null,$={},f={},p=new WeakMap,m=[],g=null,_=!1,v=null,y=null,b=null,x=null,M=null,R=null,w=null,E=!1,P=null,Y=null,J=null,q=null,I=null,_e.set(0,0,n.canvas.width,n.canvas.height),se.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function XIe(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function v(W,O){return _?new OffscreenCanvas(W,O):q0("canvas")}function y(W,O,ce,De){let Fe=1;if((W.width>De||W.height>De)&&(Fe=De/Math.max(W.width,W.height)),Fe<1||!0===O){if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap){const Ve=O?M6:Math.floor,_t=Ve(Fe*W.width),B=Ve(Fe*W.height);void 0===m&&(m=v(_t,B));const Me=ce?v(_t,B):m;return Me.width=_t,Me.height=B,Me.getContext("2d").drawImage(W,0,0,_t,B),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+W.width+"x"+W.height+") to ("+_t+"x"+B+")."),Me}return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+W.width+"x"+W.height+")."),W}return W}function b(W){return YC(W.width)&&YC(W.height)}function M(W,O){return W.generateMipmaps&&O&&W.minFilter!==yr&&W.minFilter!==qi}function R(W){n.generateMipmap(W)}function w(W,O,ce,De,Fe=!1){if(!1===a)return O;if(null!==W){if(void 0!==n[W])return n[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let Ve=O;return 6403===O&&(5126===ce&&(Ve=33326),5131===ce&&(Ve=33325),5121===ce&&(Ve=33321)),33319===O&&(5126===ce&&(Ve=33328),5131===ce&&(Ve=33327),5121===ce&&(Ve=33323)),6408===O&&(5126===ce&&(Ve=34836),5131===ce&&(Ve=34842),5121===ce&&(Ve=De===Hn&&!1===Fe?35907:32856),32819===ce&&(Ve=32854),32820===ce&&(Ve=32855)),(33325===Ve||33326===Ve||33327===Ve||33328===Ve||34842===Ve||34836===Ve)&&e.get("EXT_color_buffer_float"),Ve}function E(W,O,ce){return!0===M(W,ce)||W.isFramebufferTexture&&W.minFilter!==yr&&W.minFilter!==qi?Math.log2(Math.max(O.width,O.height))+1:void 0!==W.mipmaps&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?O.mipmaps.length:1}function P(W){return W===yr||1004===W||1005===W?9728:9729}function Y(W){const O=W.target;O.removeEventListener("dispose",Y),function q(W){const O=i.get(W);if(void 0===O.__webglInit)return;const ce=W.source,De=g.get(ce);if(De){const Fe=De[O.__cacheKey];Fe.usedTimes--,0===Fe.usedTimes&&I(W),0===Object.keys(De).length&&g.delete(ce)}i.remove(W)}(O),O.isVideoTexture&&p.delete(O)}function J(W){const O=W.target;O.removeEventListener("dispose",J),function G(W){const O=W.texture,ce=i.get(W),De=i.get(O);if(void 0!==De.__webglTexture&&(n.deleteTexture(De.__webglTexture),o.memory.textures--),W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let Fe=0;Fe<6;Fe++)n.deleteFramebuffer(ce.__webglFramebuffer[Fe]),ce.__webglDepthbuffer&&n.deleteRenderbuffer(ce.__webglDepthbuffer[Fe]);else{if(n.deleteFramebuffer(ce.__webglFramebuffer),ce.__webglDepthbuffer&&n.deleteRenderbuffer(ce.__webglDepthbuffer),ce.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ce.__webglMultisampledFramebuffer),ce.__webglColorRenderbuffer)for(let Fe=0;Fe<ce.__webglColorRenderbuffer.length;Fe++)ce.__webglColorRenderbuffer[Fe]&&n.deleteRenderbuffer(ce.__webglColorRenderbuffer[Fe]);ce.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ce.__webglDepthRenderbuffer)}if(W.isWebGLMultipleRenderTargets)for(let Fe=0,Ve=O.length;Fe<Ve;Fe++){const _t=i.get(O[Fe]);_t.__webglTexture&&(n.deleteTexture(_t.__webglTexture),o.memory.textures--),i.remove(O[Fe])}i.remove(O),i.remove(W)}(O)}function I(W){const O=i.get(W);n.deleteTexture(O.__webglTexture),delete g.get(W.source)[O.__cacheKey],o.memory.textures--}let k=0;function $(W,O){const ce=i.get(W);if(W.isVideoTexture&&function $t(W){const O=o.render.frame;p.get(W)!==O&&(p.set(W,O),W.update())}(W),!1===W.isRenderTargetTexture&&W.version>0&&ce.__version!==W.version){const De=W.image;if(null===De)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==De.complete)return void Le(ce,W,O);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+O),t.bindTexture(3553,ce.__webglTexture)}const se={[Mh]:10497,[Is]:33071,1002:33648},Ee={[yr]:9728,1004:9984,1005:9986,[qi]:9729,1007:9985,[Nu]:9987};function ue(W,O,ce){if(ce?(n.texParameteri(W,10242,se[O.wrapS]),n.texParameteri(W,10243,se[O.wrapT]),(32879===W||35866===W)&&n.texParameteri(W,32882,se[O.wrapR]),n.texParameteri(W,10240,Ee[O.magFilter]),n.texParameteri(W,10241,Ee[O.minFilter])):(n.texParameteri(W,10242,33071),n.texParameteri(W,10243,33071),(32879===W||35866===W)&&n.texParameteri(W,32882,33071),(O.wrapS!==Is||O.wrapT!==Is)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(W,10240,P(O.magFilter)),n.texParameteri(W,10241,P(O.minFilter)),O.minFilter!==yr&&O.minFilter!==qi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const De=e.get("EXT_texture_filter_anisotropic");if(O.type===zu&&!1===e.has("OES_texture_float_linear")||!1===a&&O.type===G0&&!1===e.has("OES_texture_half_float_linear"))return;(O.anisotropy>1||i.get(O).__currentAnisotropy)&&(n.texParameterf(W,De.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,r.getMaxAnisotropy())),i.get(O).__currentAnisotropy=O.anisotropy)}}function Ie(W,O){let ce=!1;void 0===W.__webglInit&&(W.__webglInit=!0,O.addEventListener("dispose",Y));const De=O.source;let Fe=g.get(De);void 0===Fe&&(Fe={},g.set(De,Fe));const Ve=function V(W){const O=[];return O.push(W.wrapS),O.push(W.wrapT),O.push(W.magFilter),O.push(W.minFilter),O.push(W.anisotropy),O.push(W.internalFormat),O.push(W.format),O.push(W.type),O.push(W.generateMipmaps),O.push(W.premultiplyAlpha),O.push(W.flipY),O.push(W.unpackAlignment),O.push(W.encoding),O.join()}(O);if(Ve!==W.__cacheKey){void 0===Fe[Ve]&&(Fe[Ve]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ce=!0),Fe[Ve].usedTimes++;const _t=Fe[W.__cacheKey];void 0!==_t&&(Fe[W.__cacheKey].usedTimes--,0===_t.usedTimes&&I(O)),W.__cacheKey=Ve,W.__webglTexture=Fe[Ve].texture}return ce}function Le(W,O,ce){let De=3553;O.isDataArrayTexture&&(De=35866),O.isData3DTexture&&(De=32879);const Fe=Ie(W,O),Ve=O.source;if(t.activeTexture(33984+ce),t.bindTexture(De,W.__webglTexture),Ve.version!==Ve.__currentVersion||!0===Fe){n.pixelStorei(37440,O.flipY),n.pixelStorei(37441,O.premultiplyAlpha),n.pixelStorei(3317,O.unpackAlignment),n.pixelStorei(37443,0);const _t=function x(W){return!a&&(W.wrapS!==Is||W.wrapT!==Is||W.minFilter!==yr&&W.minFilter!==qi)}(O)&&!1===b(O.image);let B=y(O.image,_t,!1,u);B=yn(O,B);const Me=b(B)||a,Ae=s.convert(O.format,O.encoding);let zt,Xe=s.convert(O.type),Ze=w(O.internalFormat,Ae,Xe,O.encoding,O.isVideoTexture);ue(De,O,Me);const an=O.mipmaps,ii=a&&!0!==O.isVideoTexture,ee=void 0===Ve.__currentVersion||!0===Fe,Ge=E(O,B,Me);if(O.isDepthTexture)Ze=6402,a?Ze=O.type===zu?36012:O.type===Th?33190:O.type===h2?35056:33189:O.type===zu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),O.format===Eh&&6402===Ze&&1012!==O.type&&O.type!==Th&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),O.type=Th,Xe=s.convert(O.type)),O.format===f2&&6402===Ze&&(Ze=34041,O.type!==h2&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),O.type=h2,Xe=s.convert(O.type))),ee&&(ii?t.texStorage2D(3553,1,Ze,B.width,B.height):t.texImage2D(3553,0,Ze,B.width,B.height,0,Ae,Xe,null));else if(O.isDataTexture)if(an.length>0&&Me){ii&&ee&&t.texStorage2D(3553,Ge,Ze,an[0].width,an[0].height);for(let ge=0,tt=an.length;ge<tt;ge++)zt=an[ge],ii?t.texSubImage2D(3553,ge,0,0,zt.width,zt.height,Ae,Xe,zt.data):t.texImage2D(3553,ge,Ze,zt.width,zt.height,0,Ae,Xe,zt.data);O.generateMipmaps=!1}else ii?(ee&&t.texStorage2D(3553,Ge,Ze,B.width,B.height),t.texSubImage2D(3553,0,0,0,B.width,B.height,Ae,Xe,B.data)):t.texImage2D(3553,0,Ze,B.width,B.height,0,Ae,Xe,B.data);else if(O.isCompressedTexture){ii&&ee&&t.texStorage2D(3553,Ge,Ze,an[0].width,an[0].height);for(let ge=0,tt=an.length;ge<tt;ge++)zt=an[ge],O.format!==ka?null!==Ae?ii?t.compressedTexSubImage2D(3553,ge,0,0,zt.width,zt.height,Ae,zt.data):t.compressedTexImage2D(3553,ge,Ze,zt.width,zt.height,0,zt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ii?t.texSubImage2D(3553,ge,0,0,zt.width,zt.height,Ae,Xe,zt.data):t.texImage2D(3553,ge,Ze,zt.width,zt.height,0,Ae,Xe,zt.data)}else if(O.isDataArrayTexture)ii?(ee&&t.texStorage3D(35866,Ge,Ze,B.width,B.height,B.depth),t.texSubImage3D(35866,0,0,0,0,B.width,B.height,B.depth,Ae,Xe,B.data)):t.texImage3D(35866,0,Ze,B.width,B.height,B.depth,0,Ae,Xe,B.data);else if(O.isData3DTexture)ii?(ee&&t.texStorage3D(32879,Ge,Ze,B.width,B.height,B.depth),t.texSubImage3D(32879,0,0,0,0,B.width,B.height,B.depth,Ae,Xe,B.data)):t.texImage3D(32879,0,Ze,B.width,B.height,B.depth,0,Ae,Xe,B.data);else if(O.isFramebufferTexture){if(ee)if(ii)t.texStorage2D(3553,Ge,Ze,B.width,B.height);else{let ge=B.width,tt=B.height;for(let Ke=0;Ke<Ge;Ke++)t.texImage2D(3553,Ke,Ze,ge,tt,0,Ae,Xe,null),ge>>=1,tt>>=1}}else if(an.length>0&&Me){ii&&ee&&t.texStorage2D(3553,Ge,Ze,an[0].width,an[0].height);for(let ge=0,tt=an.length;ge<tt;ge++)zt=an[ge],ii?t.texSubImage2D(3553,ge,0,0,Ae,Xe,zt):t.texImage2D(3553,ge,Ze,Ae,Xe,zt);O.generateMipmaps=!1}else ii?(ee&&t.texStorage2D(3553,Ge,Ze,B.width,B.height),t.texSubImage2D(3553,0,0,0,Ae,Xe,B)):t.texImage2D(3553,0,Ze,Ae,Xe,B);M(O,Me)&&R(De),Ve.__currentVersion=Ve.version,O.onUpdate&&O.onUpdate(O)}W.__version=O.version}function Pe(W,O,ce,De,Fe){const Ve=s.convert(ce.format,ce.encoding),_t=s.convert(ce.type),B=w(ce.internalFormat,Ve,_t,ce.encoding);i.get(O).__hasExternalTextures||(32879===Fe||35866===Fe?t.texImage3D(Fe,0,B,O.width,O.height,O.depth,0,Ve,_t,null):t.texImage2D(Fe,0,B,O.width,O.height,0,Ve,_t,null)),t.bindFramebuffer(36160,W),ct(O)?h.framebufferTexture2DMultisampleEXT(36160,De,Fe,i.get(ce).__webglTexture,0,Qe(O)):n.framebufferTexture2D(36160,De,Fe,i.get(ce).__webglTexture,0),t.bindFramebuffer(36160,null)}function At(W,O,ce){if(n.bindRenderbuffer(36161,W),O.depthBuffer&&!O.stencilBuffer){let De=33189;if(ce||ct(O)){const Fe=O.depthTexture;Fe&&Fe.isDepthTexture&&(Fe.type===zu?De=36012:Fe.type===Th&&(De=33190));const Ve=Qe(O);ct(O)?h.renderbufferStorageMultisampleEXT(36161,Ve,De,O.width,O.height):n.renderbufferStorageMultisample(36161,Ve,De,O.width,O.height)}else n.renderbufferStorage(36161,De,O.width,O.height);n.framebufferRenderbuffer(36160,36096,36161,W)}else if(O.depthBuffer&&O.stencilBuffer){const De=Qe(O);ce&&!1===ct(O)?n.renderbufferStorageMultisample(36161,De,35056,O.width,O.height):ct(O)?h.renderbufferStorageMultisampleEXT(36161,De,35056,O.width,O.height):n.renderbufferStorage(36161,34041,O.width,O.height),n.framebufferRenderbuffer(36160,33306,36161,W)}else{const De=!0===O.isWebGLMultipleRenderTargets?O.texture:[O.texture];for(let Fe=0;Fe<De.length;Fe++){const Ve=De[Fe],_t=s.convert(Ve.format,Ve.encoding),B=s.convert(Ve.type),Me=w(Ve.internalFormat,_t,B,Ve.encoding),Ae=Qe(O);ce&&!1===ct(O)?n.renderbufferStorageMultisample(36161,Ae,Me,O.width,O.height):ct(O)?h.renderbufferStorageMultisampleEXT(36161,Ae,Me,O.width,O.height):n.renderbufferStorage(36161,Me,O.width,O.height)}}n.bindRenderbuffer(36161,null)}function fe(W){const O=i.get(W),ce=!0===W.isWebGLCubeRenderTarget;if(W.depthTexture&&!O.__autoAllocateDepthBuffer){if(ce)throw new Error("target.depthTexture not supported in Cube render targets");!function ye(W,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,W),!O.depthTexture||!O.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(O.depthTexture).__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),$(O.depthTexture,0);const De=i.get(O.depthTexture).__webglTexture,Fe=Qe(O);if(O.depthTexture.format===Eh)ct(O)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,De,0,Fe):n.framebufferTexture2D(36160,36096,3553,De,0);else{if(O.depthTexture.format!==f2)throw new Error("Unknown depthTexture format");ct(O)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,De,0,Fe):n.framebufferTexture2D(36160,33306,3553,De,0)}}(O.__webglFramebuffer,W)}else if(ce){O.__webglDepthbuffer=[];for(let De=0;De<6;De++)t.bindFramebuffer(36160,O.__webglFramebuffer[De]),O.__webglDepthbuffer[De]=n.createRenderbuffer(),At(O.__webglDepthbuffer[De],W,!1)}else t.bindFramebuffer(36160,O.__webglFramebuffer),O.__webglDepthbuffer=n.createRenderbuffer(),At(O.__webglDepthbuffer,W,!1);t.bindFramebuffer(36160,null)}function Qe(W){return Math.min(d,W.samples)}function ct(W){const O=i.get(W);return a&&W.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==O.__useRenderToTexture}function yn(W,O){const ce=W.encoding,De=W.format,Fe=W.type;return!0===W.isCompressedTexture||!0===W.isVideoTexture||1035===W.format||ce!==Dh&&(ce===Hn?!1===a?!0===e.has("EXT_sRGB")&&De===ka?(W.format=1035,W.minFilter=qi,W.generateMipmaps=!1):O=hW.sRGBToLinear(O):(De!==ka||Fe!==Sh)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ce)),O}this.allocateTextureUnit=function N(){const W=k;return W>=l&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+l),k+=1,W},this.resetTextureUnits=function F(){k=0},this.setTexture2D=$,this.setTexture2DArray=function te(W,O){const ce=i.get(W);W.version>0&&ce.__version!==W.version?Le(ce,W,O):(t.activeTexture(33984+O),t.bindTexture(35866,ce.__webglTexture))},this.setTexture3D=function j(W,O){const ce=i.get(W);W.version>0&&ce.__version!==W.version?Le(ce,W,O):(t.activeTexture(33984+O),t.bindTexture(32879,ce.__webglTexture))},this.setTextureCube=function _e(W,O){const ce=i.get(W);W.version>0&&ce.__version!==W.version?function qe(W,O,ce){if(6!==O.image.length)return;const De=Ie(W,O),Fe=O.source;if(t.activeTexture(33984+ce),t.bindTexture(34067,W.__webglTexture),Fe.version!==Fe.__currentVersion||!0===De){n.pixelStorei(37440,O.flipY),n.pixelStorei(37441,O.premultiplyAlpha),n.pixelStorei(3317,O.unpackAlignment),n.pixelStorei(37443,0);const Ve=O.isCompressedTexture||O.image[0].isCompressedTexture,_t=O.image[0]&&O.image[0].isDataTexture,B=[];for(let ge=0;ge<6;ge++)B[ge]=Ve||_t?_t?O.image[ge].image:O.image[ge]:y(O.image[ge],!1,!0,c),B[ge]=yn(O,B[ge]);const Me=B[0],Ae=b(Me)||a,Xe=s.convert(O.format,O.encoding),Ze=s.convert(O.type),zt=w(O.internalFormat,Xe,Ze,O.encoding),an=a&&!0!==O.isVideoTexture,ii=void 0===Fe.__currentVersion||!0===De;let Ge,ee=E(O,Me,Ae);if(ue(34067,O,Ae),Ve){an&&ii&&t.texStorage2D(34067,ee,zt,Me.width,Me.height);for(let ge=0;ge<6;ge++){Ge=B[ge].mipmaps;for(let tt=0;tt<Ge.length;tt++){const Ke=Ge[tt];O.format!==ka?null!==Xe?an?t.compressedTexSubImage2D(34069+ge,tt,0,0,Ke.width,Ke.height,Xe,Ke.data):t.compressedTexImage2D(34069+ge,tt,zt,Ke.width,Ke.height,0,Ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):an?t.texSubImage2D(34069+ge,tt,0,0,Ke.width,Ke.height,Xe,Ze,Ke.data):t.texImage2D(34069+ge,tt,zt,Ke.width,Ke.height,0,Xe,Ze,Ke.data)}}}else{Ge=O.mipmaps,an&&ii&&(Ge.length>0&&ee++,t.texStorage2D(34067,ee,zt,B[0].width,B[0].height));for(let ge=0;ge<6;ge++)if(_t){an?t.texSubImage2D(34069+ge,0,0,0,B[ge].width,B[ge].height,Xe,Ze,B[ge].data):t.texImage2D(34069+ge,0,zt,B[ge].width,B[ge].height,0,Xe,Ze,B[ge].data);for(let tt=0;tt<Ge.length;tt++){const ln=Ge[tt].image[ge].image;an?t.texSubImage2D(34069+ge,tt+1,0,0,ln.width,ln.height,Xe,Ze,ln.data):t.texImage2D(34069+ge,tt+1,zt,ln.width,ln.height,0,Xe,Ze,ln.data)}}else{an?t.texSubImage2D(34069+ge,0,0,0,Xe,Ze,B[ge]):t.texImage2D(34069+ge,0,zt,Xe,Ze,B[ge]);for(let tt=0;tt<Ge.length;tt++){const Ke=Ge[tt];an?t.texSubImage2D(34069+ge,tt+1,0,0,Xe,Ze,Ke.image[ge]):t.texImage2D(34069+ge,tt+1,zt,Xe,Ze,Ke.image[ge])}}}M(O,Ae)&&R(34067),Fe.__currentVersion=Fe.version,O.onUpdate&&O.onUpdate(O)}W.__version=O.version}(ce,W,O):(t.activeTexture(33984+O),t.bindTexture(34067,ce.__webglTexture))},this.rebindTextures=function Re(W,O,ce){const De=i.get(W);void 0!==O&&Pe(De.__webglFramebuffer,W,W.texture,36064,3553),void 0!==ce&&fe(W)},this.setupRenderTarget=function rt(W){const O=W.texture,ce=i.get(W),De=i.get(O);W.addEventListener("dispose",J),!0!==W.isWebGLMultipleRenderTargets&&(void 0===De.__webglTexture&&(De.__webglTexture=n.createTexture()),De.__version=O.version,o.memory.textures++);const Fe=!0===W.isWebGLCubeRenderTarget,Ve=!0===W.isWebGLMultipleRenderTargets,_t=b(W)||a;if(Fe){ce.__webglFramebuffer=[];for(let B=0;B<6;B++)ce.__webglFramebuffer[B]=n.createFramebuffer()}else{if(ce.__webglFramebuffer=n.createFramebuffer(),Ve)if(r.drawBuffers){const B=W.texture;for(let Me=0,Ae=B.length;Me<Ae;Me++){const Xe=i.get(B[Me]);void 0===Xe.__webglTexture&&(Xe.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&W.samples>0&&!1===ct(W)){const B=Ve?O:[O];ce.__webglMultisampledFramebuffer=n.createFramebuffer(),ce.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ce.__webglMultisampledFramebuffer);for(let Me=0;Me<B.length;Me++){const Ae=B[Me];ce.__webglColorRenderbuffer[Me]=n.createRenderbuffer(),n.bindRenderbuffer(36161,ce.__webglColorRenderbuffer[Me]);const Xe=s.convert(Ae.format,Ae.encoding),Ze=s.convert(Ae.type),zt=w(Ae.internalFormat,Xe,Ze,Ae.encoding),an=Qe(W);n.renderbufferStorageMultisample(36161,an,zt,W.width,W.height),n.framebufferRenderbuffer(36160,36064+Me,36161,ce.__webglColorRenderbuffer[Me])}n.bindRenderbuffer(36161,null),W.depthBuffer&&(ce.__webglDepthRenderbuffer=n.createRenderbuffer(),At(ce.__webglDepthRenderbuffer,W,!0)),t.bindFramebuffer(36160,null)}}if(Fe){t.bindTexture(34067,De.__webglTexture),ue(34067,O,_t);for(let B=0;B<6;B++)Pe(ce.__webglFramebuffer[B],W,O,36064,34069+B);M(O,_t)&&R(34067),t.unbindTexture()}else if(Ve){const B=W.texture;for(let Me=0,Ae=B.length;Me<Ae;Me++){const Xe=B[Me],Ze=i.get(Xe);t.bindTexture(3553,Ze.__webglTexture),ue(3553,Xe,_t),Pe(ce.__webglFramebuffer,W,Xe,36064+Me,3553),M(Xe,_t)&&R(3553)}t.unbindTexture()}else{let B=3553;(W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(a?B=W.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(B,De.__webglTexture),ue(B,O,_t),Pe(ce.__webglFramebuffer,W,O,36064,B),M(O,_t)&&R(B),t.unbindTexture()}W.depthBuffer&&fe(W)},this.updateRenderTargetMipmap=function Ne(W){const O=b(W)||a,ce=!0===W.isWebGLMultipleRenderTargets?W.texture:[W.texture];for(let De=0,Fe=ce.length;De<Fe;De++){const Ve=ce[De];if(M(Ve,O)){const _t=W.isWebGLCubeRenderTarget?34067:3553,B=i.get(Ve).__webglTexture;t.bindTexture(_t,B),R(_t),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Oe(W){if(a&&W.samples>0&&!1===ct(W)){const O=W.isWebGLMultipleRenderTargets?W.texture:[W.texture],ce=W.width,De=W.height;let Fe=16384;const Ve=[],_t=W.stencilBuffer?33306:36096,B=i.get(W),Me=!0===W.isWebGLMultipleRenderTargets;if(Me)for(let Ae=0;Ae<O.length;Ae++)t.bindFramebuffer(36160,B.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Ae,36161,null),t.bindFramebuffer(36160,B.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Ae,3553,null,0);t.bindFramebuffer(36008,B.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,B.__webglFramebuffer);for(let Ae=0;Ae<O.length;Ae++){Ve.push(36064+Ae),W.depthBuffer&&Ve.push(_t);const Xe=void 0!==B.__ignoreDepthValues&&B.__ignoreDepthValues;if(!1===Xe&&(W.depthBuffer&&(Fe|=256),W.stencilBuffer&&(Fe|=1024)),Me&&n.framebufferRenderbuffer(36008,36064,36161,B.__webglColorRenderbuffer[Ae]),!0===Xe&&(n.invalidateFramebuffer(36008,[_t]),n.invalidateFramebuffer(36009,[_t])),Me){const Ze=i.get(O[Ae]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,Ze,0)}n.blitFramebuffer(0,0,ce,De,0,0,ce,De,Fe,9728),f&&n.invalidateFramebuffer(36008,Ve)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Me)for(let Ae=0;Ae<O.length;Ae++){t.bindFramebuffer(36160,B.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Ae,36161,B.__webglColorRenderbuffer[Ae]);const Xe=i.get(O[Ae]).__webglTexture;t.bindFramebuffer(36160,B.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Ae,3553,Xe,0)}t.bindFramebuffer(36009,B.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=fe,this.setupFrameBufferTexture=Pe,this.useMultisampledRTT=ct}function ZIe(n,e,t){const i=t.isWebGL2;return{convert:function r(s,o=null){let a;if(s===Sh)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===Th)return 5125;if(s===zu)return 5126;if(s===G0)return i?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===ka)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===Eh)return 6402;if(s===f2)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===Hn){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===Hn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===Hn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===Hn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===h2?i?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class KIe extends Wr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Yu extends Kr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const QIe={type:"move"};class SM{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Yu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Yu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new z),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Yu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new z),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;for(const m of e.hand.values()){const g=t.getJointPose(m,i);if(void 0===c.joints[m.jointName]){const v=new Yu;v.matrixAutoUpdate=!1,v.visible=!1,c.joints[m.jointName]=v,c.add(v)}const _=c.joints[m.jointName];null!==g&&(_.matrix.fromArray(g.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=g.radius),_.visible=null!==g}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(QIe)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}}class JIe extends Oa{constructor(e,t,i,r,s,o,a,l,c,u){if((u=void 0!==u?u:Eh)!==Eh&&u!==f2)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===Eh&&(i=Th),void 0===i&&u===f2&&(i=h2),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:yr,this.minFilter=void 0!==l?l:yr,this.flipY=!1,this.generateMipmaps=!1}}class eke extends Rh{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=null,c=null,u=null,d=null,h=null,f=null;const p=t.getContextAttributes();let m=null,g=null;const _=[],v=[],y=new Wr;y.layers.enable(1),y.viewport=new qn;const b=new Wr;b.layers.enable(2),b.viewport=new qn;const x=[y,b],M=new KIe;M.layers.enable(1),M.layers.enable(2);let R=null,w=null;function E(V){const $=v.indexOf(V.inputSource);if(-1===$)return;const te=_[$];void 0!==te&&te.dispatchEvent({type:V.type,data:V.inputSource})}function P(){r.removeEventListener("select",E),r.removeEventListener("selectstart",E),r.removeEventListener("selectend",E),r.removeEventListener("squeeze",E),r.removeEventListener("squeezestart",E),r.removeEventListener("squeezeend",E),r.removeEventListener("end",P),r.removeEventListener("inputsourceschange",Y);for(let V=0;V<_.length;V++){const $=v[V];null!==$&&(v[V]=null,_[V].disconnect($))}R=null,w=null,e.setRenderTarget(m),h=null,d=null,u=null,r=null,g=null,N.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function Y(V){for(let $=0;$<V.removed.length;$++){const te=V.removed[$],j=v.indexOf(te);j>=0&&(v[j]=null,_[j].dispatchEvent({type:"disconnected",data:te}))}for(let $=0;$<V.added.length;$++){const te=V.added[$];let j=v.indexOf(te);if(-1===j){for(let se=0;se<_.length;se++){if(se>=v.length){v.push(te),j=se;break}if(null===v[se]){v[se]=te,j=se;break}}if(-1===j)break}const _e=_[j];_e&&_e.dispatchEvent({type:"connected",data:te})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(V){let $=_[V];return void 0===$&&($=new SM,_[V]=$),$.getTargetRaySpace()},this.getControllerGrip=function(V){let $=_[V];return void 0===$&&($=new SM,_[V]=$),$.getGripSpace()},this.getHand=function(V){let $=_[V];return void 0===$&&($=new SM,_[V]=$),$.getHandSpace()},this.setFramebufferScaleFactor=function(V){s=V,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(V){a=V,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(V){l=V},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=function(){var V=Ar(function*($){if(r=$,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",E),r.addEventListener("selectstart",E),r.addEventListener("selectend",E),r.addEventListener("squeeze",E),r.addEventListener("squeezestart",E),r.addEventListener("squeezeend",E),r.addEventListener("end",P),r.addEventListener("inputsourceschange",Y),!0!==p.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)h=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:h}),g=new Lh(h.framebufferWidth,h.framebufferHeight,{format:ka,type:Sh,encoding:e.outputEncoding,stencilBuffer:p.stencil});else{let te=null,j=null,_e=null;p.depth&&(_e=p.stencil?35056:33190,te=p.stencil?f2:Eh,j=p.stencil?h2:Th);const se={colorFormat:32856,depthFormat:_e,scaleFactor:s};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(se),r.updateRenderState({layers:[d]}),g=new Lh(d.textureWidth,d.textureHeight,{format:ka,type:Sh,depthTexture:new JIe(d.textureWidth,d.textureHeight,j,void 0,void 0,void 0,void 0,void 0,void 0,te),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=yield r.requestReferenceSpace(a),N.setContext(r),N.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function($){return V.apply(this,arguments)}}();const J=new z,q=new z;function G(V,$){null===$?V.matrixWorld.copy(V.matrix):V.matrixWorld.multiplyMatrices($.matrixWorld,V.matrix),V.matrixWorldInverse.copy(V.matrixWorld).invert()}this.updateCamera=function(V){if(null===r)return;M.near=b.near=y.near=V.near,M.far=b.far=y.far=V.far,(R!==M.near||w!==M.far)&&(r.updateRenderState({depthNear:M.near,depthFar:M.far}),R=M.near,w=M.far);const $=V.parent,te=M.cameras;G(M,$);for(let _e=0;_e<te.length;_e++)G(te[_e],$);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),V.matrix.copy(M.matrix),V.matrix.decompose(V.position,V.quaternion,V.scale);const j=V.children;for(let _e=0,se=j.length;_e<se;_e++)j[_e].updateMatrixWorld(!0);2===te.length?function I(V,$,te){J.setFromMatrixPosition($.matrixWorld),q.setFromMatrixPosition(te.matrixWorld);const j=J.distanceTo(q),_e=$.projectionMatrix.elements,se=te.projectionMatrix.elements,Ee=_e[14]/(_e[10]-1),ue=_e[14]/(_e[10]+1),Ie=(_e[9]+1)/_e[5],Le=(_e[9]-1)/_e[5],qe=(_e[8]-1)/_e[0],Pe=(se[8]+1)/se[0],At=Ee*qe,ye=Ee*Pe,fe=j/(-qe+Pe),Re=fe*-qe;$.matrixWorld.decompose(V.position,V.quaternion,V.scale),V.translateX(Re),V.translateZ(fe),V.matrixWorld.compose(V.position,V.quaternion,V.scale),V.matrixWorldInverse.copy(V.matrixWorld).invert();const rt=Ee+fe,Ne=ue+fe;V.projectionMatrix.makePerspective(At-Re,ye+(j-Re),Ie*ue/Ne*rt,Le*ue/Ne*rt,rt,Ne)}(M,y,b):M.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(V){null!==d&&(d.fixedFoveation=V),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=V)};let k=null;const N=new EW;N.setAnimationLoop(function F(V,$){if(c=$.getViewerPose(l||o),f=$,null!==c){const te=c.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let j=!1;te.length!==M.cameras.length&&(M.cameras.length=0,j=!0);for(let _e=0;_e<te.length;_e++){const se=te[_e];let Ee=null;if(null!==h)Ee=h.getViewport(se);else{const Ie=u.getViewSubImage(d,se);Ee=Ie.viewport,0===_e&&(e.setRenderTargetTextures(g,Ie.colorTexture,d.ignoreDepthValues?void 0:Ie.depthStencilTexture),e.setRenderTarget(g))}let ue=x[_e];void 0===ue&&(ue=new Wr,ue.layers.enable(_e),ue.viewport=new qn,x[_e]=ue),ue.matrix.fromArray(se.transform.matrix),ue.projectionMatrix.fromArray(se.projectionMatrix),ue.viewport.set(Ee.x,Ee.y,Ee.width,Ee.height),0===_e&&M.matrix.copy(ue.matrix),!0===j&&M.cameras.push(ue)}}for(let te=0;te<_.length;te++){const j=v[te],_e=_[te];null!==j&&void 0!==_e&&_e.update(j,$,l||o)}k&&k(V,$),f=null}),this.setAnimationLoop=function(V){k=V},this.dispose=function(){}}}function tke(n,e){function r(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,1===g.side&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),1===g.side&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const _=e.get(g).envMap;if(_&&(m.envMap.value=_,m.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const b=!0!==n.physicallyCorrectLights?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*b}let v,y;g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity),g.map?v=g.map:g.specularMap?v=g.specularMap:g.displacementMap?v=g.displacementMap:g.normalMap?v=g.normalMap:g.bumpMap?v=g.bumpMap:g.roughnessMap?v=g.roughnessMap:g.metalnessMap?v=g.metalnessMap:g.alphaMap?v=g.alphaMap:g.emissiveMap?v=g.emissiveMap:g.clearcoatMap?v=g.clearcoatMap:g.clearcoatNormalMap?v=g.clearcoatNormalMap:g.clearcoatRoughnessMap?v=g.clearcoatRoughnessMap:g.iridescenceMap?v=g.iridescenceMap:g.iridescenceThicknessMap?v=g.iridescenceThicknessMap:g.specularIntensityMap?v=g.specularIntensityMap:g.specularColorMap?v=g.specularColorMap:g.transmissionMap?v=g.transmissionMap:g.thicknessMap?v=g.thicknessMap:g.sheenColorMap?v=g.sheenColorMap:g.sheenRoughnessMap&&(v=g.sheenRoughnessMap),void 0!==v&&(v.isWebGLRenderTarget&&(v=v.texture),!0===v.matrixAutoUpdate&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix)),g.aoMap?y=g.aoMap:g.lightMap&&(y=g.lightMap),void 0!==y&&(y.isWebGLRenderTarget&&(y=y.texture),!0===y.matrixAutoUpdate&&y.updateMatrix(),m.uv2Transform.value.copy(y.matrix))}return{refreshFogUniforms:function t(m,g){m.fogColor.value.copy(g.color),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)},refreshMaterialUniforms:function i(m,g,_,v,y){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(m,g):g.isMeshToonMaterial?(r(m,g),function u(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}(m,g)):g.isMeshPhongMaterial?(r(m,g),function c(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}(m,g)):g.isMeshStandardMaterial?(r(m,g),function d(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}(m,g),g.isMeshPhysicalMaterial&&function h(m,g,_){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,1===g.side&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=_.texture,m.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}(m,g,y)):g.isMeshMatcapMaterial?(r(m,g),function f(m,g){g.matcap&&(m.matcap.value=g.matcap)}(m,g)):g.isMeshDepthMaterial?r(m,g):g.isMeshDistanceMaterial?(r(m,g),function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}(m,g)):g.isMeshNormalMaterial?r(m,g):g.isLineBasicMaterial?(function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}(m,g),g.isLineDashedMaterial&&function o(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}(m,g)):g.isPointsMaterial?function a(m,g,_,v){let y;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*_,m.scale.value=.5*v,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?y=g.map:g.alphaMap&&(y=g.alphaMap),void 0!==y&&(!0===y.matrixAutoUpdate&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix))}(m,g,_,v):g.isSpriteMaterial?function l(m,g){let _;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?_=g.map:g.alphaMap&&(_=g.alphaMap),void 0!==_&&(!0===_.matrixAutoUpdate&&_.updateMatrix(),m.uvTransform.value.copy(_.matrix))}(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function nke(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function f(v,y,b){const x=v.value;if(void 0===b[y])return b[y]="number"==typeof x?x:x.clone(),!0;if("number"==typeof x){if(b[y]!==x)return b[y]=x,!0}else{const M=b[y];if(!1===M.equals(x))return M.copy(x),!0}return!1}function m(v){const y=v.value,b={boundary:0,storage:0};return"number"==typeof y?(b.boundary=4,b.storage=4):y.isVector2?(b.boundary=8,b.storage=8):y.isVector3||y.isColor?(b.boundary=16,b.storage=12):y.isVector4?(b.boundary=16,b.storage=16):y.isMatrix3?(b.boundary=48,b.storage=48):y.isMatrix4?(b.boundary=64,b.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),b}function g(v){const y=v.target;y.removeEventListener("dispose",g);const b=o.indexOf(y.__bindingPointIndex);o.splice(b,1),n.deleteBuffer(r[y.id]),delete r[y.id],delete s[y.id]}return{bind:function l(v,y){i.uniformBlockBinding(v,y.program)},update:function c(v,y){let b=r[v.id];void 0===b&&(function p(v){const y=v.uniforms;let b=0;let M=0;for(let R=0,w=y.length;R<w;R++){const E=y[R],P=m(E);if(E.__data=new Float32Array(P.storage/Float32Array.BYTES_PER_ELEMENT),E.__offset=b,R>0){M=b%16;const Y=16-M;0!==M&&Y-P.boundary<0&&(b+=16-M,E.__offset=b)}b+=P.storage}M=b%16,M>0&&(b+=16-M),v.__size=b,v.__cache={}}(v),b=function u(v){const y=function d(){for(let v=0;v<a;v++)if(-1===o.indexOf(v))return o.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();v.__bindingPointIndex=y;const b=n.createBuffer(),x=v.__size,M=v.usage;return n.bindBuffer(35345,b),n.bufferData(35345,x,M),n.bindBuffer(35345,null),n.bindBufferBase(35345,y,b),b}(v),r[v.id]=b,v.addEventListener("dispose",g)),i.updateUBOMapping(v,y.program);const M=e.render.frame;s[v.id]!==M&&(function h(v){const b=v.uniforms,x=v.__cache;n.bindBuffer(35345,r[v.id]);for(let M=0,R=b.length;M<R;M++){const w=b[M];if(!0===f(w,M,x)){const E=w.value,P=w.__offset;"number"==typeof E?(w.__data[0]=E,n.bufferSubData(35345,P,w.__data)):(w.value.isMatrix3?(w.__data[0]=w.value.elements[0],w.__data[1]=w.value.elements[1],w.__data[2]=w.value.elements[2],w.__data[3]=w.value.elements[0],w.__data[4]=w.value.elements[3],w.__data[5]=w.value.elements[4],w.__data[6]=w.value.elements[5],w.__data[7]=w.value.elements[0],w.__data[8]=w.value.elements[6],w.__data[9]=w.value.elements[7],w.__data[10]=w.value.elements[8],w.__data[11]=w.value.elements[0]):E.toArray(w.__data),n.bufferSubData(35345,P,w.__data))}}n.bindBuffer(35345,null)}(v),s[v.id]=M)},dispose:function _(){for(const v in r)n.deleteBuffer(r[v]);o=[],r={},s={}}}}function nj(n={}){this.isWebGLRenderer=!0;const e=void 0!==n.canvas?n.canvas:function ike(){const n=q0("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,i=void 0===n.depth||n.depth,r=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,l=void 0!==n.powerPreference?n.powerPreference:"default",c=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let d=null,h=null;const f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Dh,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let g=!1,_=0,v=0,y=null,b=-1,x=null;const M=new qn,R=new qn;let w=null,E=e.width,P=e.height,Y=1,J=null,q=null;const I=new qn(0,0,E,P),G=new qn(0,0,E,P);let k=!1;const F=new yM;let N=!1,V=!1,$=null;const te=new Kt,j=new xe,_e=new z,se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ee(){return null===y?Y:1}let Le,qe,Pe,At,ye,fe,Re,rt,Ne,Oe,Qe,ct,$t,yn,W,O,ce,De,Fe,Ve,_t,B,Me,Ae,ue=t;function Ie(U,oe){for(let be=0;be<U.length;be++){const we=e.getContext(U[be],oe);if(null!==we)return we}return null}try{const U={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r144"),e.addEventListener("webglcontextlost",zt,!1),e.addEventListener("webglcontextrestored",an,!1),e.addEventListener("webglcontextcreationerror",ii,!1),null===ue){const oe=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&oe.shift(),ue=Ie(oe,U),null===ue)throw Ie(oe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ue.getShaderPrecisionFormat&&(ue.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}function Xe(){Le=new gRe(ue),qe=new uRe(ue,Le,n),Le.init(qe),B=new ZIe(ue,Le,qe),Pe=new YIe(ue,Le,qe),At=new yRe,ye=new FIe,fe=new XIe(ue,Le,Pe,ye,qe,B,At),Re=new hRe(m),rt=new mRe(m),Ne=new lDe(ue,qe),Me=new lRe(ue,Le,Ne,qe),Oe=new _Re(ue,Ne,At,Me),Qe=new CRe(ue,Oe,Ne,At),Fe=new wRe(ue,qe,fe),O=new dRe(ye),ct=new OIe(m,Re,rt,Le,qe,Me,O),$t=new tke(m,ye),yn=new zIe,W=new WIe(Le,qe),De=new aRe(m,Re,Pe,Qe,u,o),ce=new qIe(m,Qe,qe),Ae=new nke(ue,At,qe,Pe),Ve=new cRe(ue,Le,At,qe),_t=new vRe(ue,Le,At,qe),At.programs=ct.programs,m.capabilities=qe,m.extensions=Le,m.properties=ye,m.renderLists=yn,m.shadowMap=ce,m.state=Pe,m.info=At}Xe();const Ze=new eke(m,ue);function zt(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function an(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const U=At.autoReset,oe=ce.enabled,be=ce.autoUpdate,re=ce.needsUpdate,we=ce.type;Xe(),At.autoReset=U,ce.enabled=oe,ce.autoUpdate=be,ce.needsUpdate=re,ce.type=we}function ii(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function ee(U){const oe=U.target;oe.removeEventListener("dispose",ee),function Ge(U){(function ge(U){const oe=ye.get(U).programs;void 0!==oe&&(oe.forEach(function(be){ct.releaseProgram(be)}),U.isShaderMaterial&&ct.releaseShaderCache(U))})(U),ye.remove(U)}(oe)}this.xr=Ze,this.getContext=function(){return ue},this.getContextAttributes=function(){return ue.getContextAttributes()},this.forceContextLoss=function(){const U=Le.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=Le.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(U){void 0!==U&&(Y=U,this.setSize(E,P,!1))},this.getSize=function(U){return U.set(E,P)},this.setSize=function(U,oe,be){Ze.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=U,P=oe,e.width=Math.floor(U*Y),e.height=Math.floor(oe*Y),!1!==be&&(e.style.width=U+"px",e.style.height=oe+"px"),this.setViewport(0,0,U,oe))},this.getDrawingBufferSize=function(U){return U.set(E*Y,P*Y).floor()},this.setDrawingBufferSize=function(U,oe,be){E=U,P=oe,Y=be,e.width=Math.floor(U*be),e.height=Math.floor(oe*be),this.setViewport(0,0,U,oe)},this.getCurrentViewport=function(U){return U.copy(M)},this.getViewport=function(U){return U.copy(I)},this.setViewport=function(U,oe,be,re){U.isVector4?I.set(U.x,U.y,U.z,U.w):I.set(U,oe,be,re),Pe.viewport(M.copy(I).multiplyScalar(Y).floor())},this.getScissor=function(U){return U.copy(G)},this.setScissor=function(U,oe,be,re){U.isVector4?G.set(U.x,U.y,U.z,U.w):G.set(U,oe,be,re),Pe.scissor(R.copy(G).multiplyScalar(Y).floor())},this.getScissorTest=function(){return k},this.setScissorTest=function(U){Pe.setScissorTest(k=U)},this.setOpaqueSort=function(U){J=U},this.setTransparentSort=function(U){q=U},this.getClearColor=function(U){return U.copy(De.getClearColor())},this.setClearColor=function(){De.setClearColor.apply(De,arguments)},this.getClearAlpha=function(){return De.getClearAlpha()},this.setClearAlpha=function(){De.setClearAlpha.apply(De,arguments)},this.clear=function(U=!0,oe=!0,be=!0){let re=0;U&&(re|=16384),oe&&(re|=256),be&&(re|=1024),ue.clear(re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",zt,!1),e.removeEventListener("webglcontextrestored",an,!1),e.removeEventListener("webglcontextcreationerror",ii,!1),yn.dispose(),W.dispose(),ye.dispose(),Re.dispose(),rt.dispose(),Qe.dispose(),Me.dispose(),Ae.dispose(),ct.dispose(),Ze.dispose(),Ze.removeEventListener("sessionstart",ln),Ze.removeEventListener("sessionend",lr),$&&($.dispose(),$=null),Ti.stop()},this.renderBufferDirect=function(U,oe,be,re,we,Rt){null===oe&&(oe=se);const qt=we.isMesh&&we.matrixWorld.determinant()<0,cn=function ys(U,oe,be,re,we){!0!==oe.isScene&&(oe=se),fe.resetTextureUnits();const Rt=oe.fog,cn=null===y?m.outputEncoding:!0===y.isXRRenderTarget?y.texture.encoding:Dh,Qt=(re.isMeshStandardMaterial?rt:Re).get(re.envMap||(re.isMeshStandardMaterial?oe.environment:null)),Wn=!0===re.vertexColors&&!!be.attributes.color&&4===be.attributes.color.itemSize,Sn=!!re.normalMap&&!!be.attributes.tangent,Tn=!!be.morphAttributes.position,Ji=!!be.morphAttributes.normal,_1=!!be.morphAttributes.color,up=re.toneMapped?m.toneMapping:0,dp=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,El=void 0!==dp?dp.length:0,Nn=ye.get(re),hp=h.state.lights;!0!==N||!0!==V&&U===x||O.setState(re,U,U===x&&re.id===b);let Cr=!1;re.version===Nn.__version?(Nn.needsLights&&Nn.lightsStateVersion!==hp.state.version||Nn.outputEncoding!==cn||we.isInstancedMesh&&!1===Nn.instancing||!we.isInstancedMesh&&!0===Nn.instancing||we.isSkinnedMesh&&!1===Nn.skinning||!we.isSkinnedMesh&&!0===Nn.skinning||Nn.envMap!==Qt||!0===re.fog&&Nn.fog!==Rt||void 0!==Nn.numClippingPlanes&&(Nn.numClippingPlanes!==O.numPlanes||Nn.numIntersection!==O.numIntersection)||Nn.vertexAlphas!==Wn||Nn.vertexTangents!==Sn||Nn.morphTargets!==Tn||Nn.morphNormals!==Ji||Nn.morphColors!==_1||Nn.toneMapping!==up||!0===qe.isWebGL2&&Nn.morphTargetsCount!==El)&&(Cr=!0):(Cr=!0,Nn.__version=re.version);let sa=Nn.currentProgram;!0===Cr&&(sa=jc(re,oe,we));let dd=!1,$g=!1,PT=!1;const Ns=sa.getUniforms(),v1=Nn.uniforms;if(Pe.useProgram(sa.program)&&(dd=!0,$g=!0,PT=!0),re.id!==b&&(b=re.id,$g=!0),dd||x!==U){if(Ns.setValue(ue,"projectionMatrix",U.projectionMatrix),qe.logarithmicDepthBuffer&&Ns.setValue(ue,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),x!==U&&(x=U,$g=!0,PT=!0),re.isShaderMaterial||re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshStandardMaterial||re.envMap){const Po=Ns.map.cameraPosition;void 0!==Po&&Po.setValue(ue,_e.setFromMatrixPosition(U.matrixWorld))}(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial)&&Ns.setValue(ue,"isOrthographic",!0===U.isOrthographicCamera),(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial||re.isShadowMaterial||we.isSkinnedMesh)&&Ns.setValue(ue,"viewMatrix",U.matrixWorldInverse)}if(we.isSkinnedMesh){Ns.setOptional(ue,we,"bindMatrix"),Ns.setOptional(ue,we,"bindMatrixInverse");const Po=we.skeleton;Po&&(qe.floatVertexTextures?(null===Po.boneTexture&&Po.computeBoneTexture(),Ns.setValue(ue,"boneTexture",Po.boneTexture,fe),Ns.setValue(ue,"boneTextureSize",Po.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const OT=be.morphAttributes;if((void 0!==OT.position||void 0!==OT.normal||void 0!==OT.color&&!0===qe.isWebGL2)&&Fe.update(we,be,re,sa),($g||Nn.receiveShadow!==we.receiveShadow)&&(Nn.receiveShadow=we.receiveShadow,Ns.setValue(ue,"receiveShadow",we.receiveShadow)),re.isMeshGouraudMaterial&&null!==re.envMap&&(v1.envMap.value=Qt,v1.flipEnvMap.value=Qt.isCubeTexture&&!1===Qt.isRenderTargetTexture?-1:1),$g&&(Ns.setValue(ue,"toneMappingExposure",m.toneMappingExposure),Nn.needsLights&&function to(U,oe){U.ambientLightColor.needsUpdate=oe,U.lightProbe.needsUpdate=oe,U.directionalLights.needsUpdate=oe,U.directionalLightShadows.needsUpdate=oe,U.pointLights.needsUpdate=oe,U.pointLightShadows.needsUpdate=oe,U.spotLights.needsUpdate=oe,U.spotLightShadows.needsUpdate=oe,U.rectAreaLights.needsUpdate=oe,U.hemisphereLights.needsUpdate=oe}(v1,PT),Rt&&!0===re.fog&&$t.refreshFogUniforms(v1,Rt),$t.refreshMaterialUniforms(v1,re,Y,P,$),Z6.upload(ue,Nn.uniformsList,v1,fe)),re.isShaderMaterial&&!0===re.uniformsNeedUpdate&&(Z6.upload(ue,Nn.uniformsList,v1,fe),re.uniformsNeedUpdate=!1),re.isSpriteMaterial&&Ns.setValue(ue,"center",we.center),Ns.setValue(ue,"modelViewMatrix",we.modelViewMatrix),Ns.setValue(ue,"normalMatrix",we.normalMatrix),Ns.setValue(ue,"modelMatrix",we.matrixWorld),re.isShaderMaterial||re.isRawShaderMaterial){const Po=re.uniformsGroups;for(let FT=0,YVe=Po.length;FT<YVe;FT++)if(qe.isWebGL2){const qY=Po[FT];Ae.update(qY,sa),Ae.bind(qY,sa)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return sa}(U,oe,be,re,we);Pe.setMaterial(re,qt);let Qt=be.index;const Wn=be.attributes.position;if(null===Qt){if(void 0===Wn||0===Wn.count)return}else if(0===Qt.count)return;let Sn=1;!0===re.wireframe&&(Qt=Oe.getWireframeAttribute(be),Sn=2),Me.setup(we,re,cn,be,Qt);let Tn,Ji=Ve;null!==Qt&&(Tn=Ne.get(Qt),Ji=_t,Ji.setIndex(Tn));const _1=null!==Qt?Qt.count:Wn.count,up=be.drawRange.start*Sn,dp=be.drawRange.count*Sn,El=null!==Rt?Rt.start*Sn:0,Nn=null!==Rt?Rt.count*Sn:1/0,hp=Math.max(up,El),Cr=Math.min(_1,up+dp,El+Nn)-1,sa=Math.max(0,Cr-hp+1);if(0!==sa){if(we.isMesh)!0===re.wireframe?(Pe.setLineWidth(re.wireframeLinewidth*Ee()),Ji.setMode(1)):Ji.setMode(4);else if(we.isLine){let dd=re.linewidth;void 0===dd&&(dd=1),Pe.setLineWidth(dd*Ee()),Ji.setMode(we.isLineSegments?1:we.isLineLoop?2:3)}else we.isPoints?Ji.setMode(0):we.isSprite&&Ji.setMode(4);if(we.isInstancedMesh)Ji.renderInstances(hp,sa,we.count);else if(be.isInstancedBufferGeometry){const dd=Math.min(be.instanceCount,be._maxInstanceCount);Ji.renderInstances(hp,sa,dd)}else Ji.render(hp,sa)}},this.compile=function(U,oe){function be(re,we,Rt){!0===re.transparent&&2===re.side?(re.side=1,re.needsUpdate=!0,jc(re,we,Rt),re.side=0,re.needsUpdate=!0,jc(re,we,Rt),re.side=2):jc(re,we,Rt)}h=W.get(U),h.init(),p.push(h),U.traverseVisible(function(re){re.isLight&&re.layers.test(oe.layers)&&(h.pushLight(re),re.castShadow&&h.pushShadow(re))}),h.setupLights(m.physicallyCorrectLights),U.traverse(function(re){const we=re.material;if(we)if(Array.isArray(we))for(let Rt=0;Rt<we.length;Rt++)be(we[Rt],U,re);else be(we,U,re)}),p.pop(),h=null};let tt=null;function ln(){Ti.stop()}function lr(){Ti.start()}const Ti=new EW;function Zi(U,oe,be,re){if(!1===U.visible)return;if(U.layers.test(oe.layers))if(U.isGroup)be=U.renderOrder;else if(U.isLOD)!0===U.autoUpdate&&U.update(oe);else if(U.isLight)h.pushLight(U),U.castShadow&&h.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||F.intersectsSprite(U)){re&&_e.setFromMatrixPosition(U.matrixWorld).applyMatrix4(te);const qt=Qe.update(U),cn=U.material;cn.visible&&d.push(U,qt,cn,be,_e.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(U.isSkinnedMesh&&U.skeleton.frame!==At.render.frame&&(U.skeleton.update(),U.skeleton.frame=At.render.frame),!U.frustumCulled||F.intersectsObject(U))){re&&_e.setFromMatrixPosition(U.matrixWorld).applyMatrix4(te);const qt=Qe.update(U),cn=U.material;if(Array.isArray(cn)){const Qt=qt.groups;for(let Wn=0,Sn=Qt.length;Wn<Sn;Wn++){const Tn=Qt[Wn],Ji=cn[Tn.materialIndex];Ji&&Ji.visible&&d.push(U,qt,Ji,be,_e.z,Tn)}}else cn.visible&&d.push(U,qt,cn,be,_e.z,null)}const Rt=U.children;for(let qt=0,cn=Rt.length;qt<cn;qt++)Zi(Rt[qt],oe,be,re)}function Gn(U,oe,be,re){const we=U.opaque,Rt=U.transmissive,qt=U.transparent;h.setupLightsView(be),Rt.length>0&&function Ki(U,oe,be){const re=qe.isWebGL2;null===$&&($=new Lh(1,1,{generateMipmaps:!0,type:Le.has("EXT_color_buffer_half_float")?G0:Sh,minFilter:Nu,samples:re&&!0===s?4:0})),m.getDrawingBufferSize(j),re?$.setSize(j.x,j.y):$.setSize(M6(j.x),M6(j.y));const we=m.getRenderTarget();m.setRenderTarget($),m.clear();const Rt=m.toneMapping;m.toneMapping=0,Qi(U,oe,be),m.toneMapping=Rt,fe.updateMultisampleRenderTarget($),fe.updateRenderTargetMipmap($),m.setRenderTarget(we)}(we,oe,be),re&&Pe.viewport(M.copy(re)),we.length>0&&Qi(we,oe,be),Rt.length>0&&Qi(Rt,oe,be),qt.length>0&&Qi(qt,oe,be),Pe.buffers.depth.setTest(!0),Pe.buffers.depth.setMask(!0),Pe.buffers.color.setMask(!0),Pe.setPolygonOffset(!1)}function Qi(U,oe,be){const re=!0===oe.isScene?oe.overrideMaterial:null;for(let we=0,Rt=U.length;we<Rt;we++){const qt=U[we],cn=qt.object,Qt=qt.geometry,Wn=null===re?qt.material:re,Sn=qt.group;cn.layers.test(be.layers)&&Fs(cn,oe,be,Qt,Wn,Sn)}}function Fs(U,oe,be,re,we,Rt){U.onBeforeRender(m,oe,be,re,we,Rt),U.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),we.onBeforeRender(m,oe,be,re,U,Rt),!0===we.transparent&&2===we.side?(we.side=1,we.needsUpdate=!0,m.renderBufferDirect(be,oe,re,we,U,Rt),we.side=0,we.needsUpdate=!0,m.renderBufferDirect(be,oe,re,we,U,Rt),we.side=2):m.renderBufferDirect(be,oe,re,we,U,Rt),U.onAfterRender(m,oe,be,re,we,Rt)}function jc(U,oe,be){!0!==oe.isScene&&(oe=se);const re=ye.get(U),we=h.state.lights,qt=we.state.version,cn=ct.getParameters(U,we.state,h.state.shadowsArray,oe,be),Qt=ct.getProgramCacheKey(cn);let Wn=re.programs;re.environment=U.isMeshStandardMaterial?oe.environment:null,re.fog=oe.fog,re.envMap=(U.isMeshStandardMaterial?rt:Re).get(U.envMap||re.environment),void 0===Wn&&(U.addEventListener("dispose",ee),Wn=new Map,re.programs=Wn);let Sn=Wn.get(Qt);if(void 0!==Sn){if(re.currentProgram===Sn&&re.lightsStateVersion===qt)return g1(U,cn),Sn}else cn.uniforms=ct.getUniforms(U),U.onBuild(be,cn,m),U.onBeforeCompile(cn,m),Sn=ct.acquireProgram(cn,Qt),Wn.set(Qt,Sn),re.uniforms=cn.uniforms;const Tn=re.uniforms;(!U.isShaderMaterial&&!U.isRawShaderMaterial||!0===U.clipping)&&(Tn.clippingPlanes=O.uniform),g1(U,cn),re.needsLights=function $a(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&!0===U.lights}(U),re.lightsStateVersion=qt,re.needsLights&&(Tn.ambientLightColor.value=we.state.ambient,Tn.lightProbe.value=we.state.probe,Tn.directionalLights.value=we.state.directional,Tn.directionalLightShadows.value=we.state.directionalShadow,Tn.spotLights.value=we.state.spot,Tn.spotLightShadows.value=we.state.spotShadow,Tn.rectAreaLights.value=we.state.rectArea,Tn.ltc_1.value=we.state.rectAreaLTC1,Tn.ltc_2.value=we.state.rectAreaLTC2,Tn.pointLights.value=we.state.point,Tn.pointLightShadows.value=we.state.pointShadow,Tn.hemisphereLights.value=we.state.hemi,Tn.directionalShadowMap.value=we.state.directionalShadowMap,Tn.directionalShadowMatrix.value=we.state.directionalShadowMatrix,Tn.spotShadowMap.value=we.state.spotShadowMap,Tn.spotLightMatrix.value=we.state.spotLightMatrix,Tn.spotLightMap.value=we.state.spotLightMap,Tn.pointShadowMap.value=we.state.pointShadowMap,Tn.pointShadowMatrix.value=we.state.pointShadowMatrix);const Ji=Sn.getUniforms(),_1=Z6.seqWithValue(Ji.seq,Tn);return re.currentProgram=Sn,re.uniformsList=_1,Sn}function g1(U,oe){const be=ye.get(U);be.outputEncoding=oe.outputEncoding,be.instancing=oe.instancing,be.skinning=oe.skinning,be.morphTargets=oe.morphTargets,be.morphNormals=oe.morphNormals,be.morphColors=oe.morphColors,be.morphTargetsCount=oe.morphTargetsCount,be.numClippingPlanes=oe.numClippingPlanes,be.numIntersection=oe.numClipIntersection,be.vertexAlphas=oe.vertexAlphas,be.vertexTangents=oe.vertexTangents,be.toneMapping=oe.toneMapping}Ti.setAnimationLoop(function Ke(U){tt&&tt(U)}),typeof self<"u"&&Ti.setContext(self),this.setAnimationLoop=function(U){tt=U,Ze.setAnimationLoop(U),null===U?Ti.stop():Ti.start()},Ze.addEventListener("sessionstart",ln),Ze.addEventListener("sessionend",lr),this.render=function(U,oe){if(void 0===oe||!0===oe.isCamera){if(!0!==g){if(!0===U.matrixWorldAutoUpdate&&U.updateMatrixWorld(),null===oe.parent&&!0===oe.matrixWorldAutoUpdate&&oe.updateMatrixWorld(),!0===Ze.enabled&&!0===Ze.isPresenting&&(!0===Ze.cameraAutoUpdate&&Ze.updateCamera(oe),oe=Ze.getCamera()),!0===U.isScene&&U.onBeforeRender(m,U,oe,y),h=W.get(U,p.length),h.init(),p.push(h),te.multiplyMatrices(oe.projectionMatrix,oe.matrixWorldInverse),F.setFromProjectionMatrix(te),V=this.localClippingEnabled,N=O.init(this.clippingPlanes,V,oe),d=yn.get(U,f.length),d.init(),f.push(d),Zi(U,oe,0,m.sortObjects),d.finish(),!0===m.sortObjects&&d.sort(J,q),!0===N&&O.beginShadows(),ce.render(h.state.shadowsArray,U,oe),!0===N&&O.endShadows(),!0===this.info.autoReset&&this.info.reset(),De.render(d,U),h.setupLights(m.physicallyCorrectLights),oe.isArrayCamera){const re=oe.cameras;for(let we=0,Rt=re.length;we<Rt;we++){const qt=re[we];Gn(d,U,qt,qt.viewport)}}else Gn(d,U,oe);null!==y&&(fe.updateMultisampleRenderTarget(y),fe.updateRenderTargetMipmap(y)),!0===U.isScene&&U.onAfterRender(m,U,oe),Me.resetDefaultState(),b=-1,x=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(U,oe,be){ye.get(U.texture).__webglTexture=oe,ye.get(U.depthTexture).__webglTexture=be;const re=ye.get(U);re.__hasExternalTextures=!0,re.__hasExternalTextures&&(re.__autoAllocateDepthBuffer=void 0===be,re.__autoAllocateDepthBuffer||!0===Le.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),re.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,oe){const be=ye.get(U);be.__webglFramebuffer=oe,be.__useDefaultFramebuffer=void 0===oe},this.setRenderTarget=function(U,oe=0,be=0){y=U,_=oe,v=be;let re=!0;if(U){const Qt=ye.get(U);void 0!==Qt.__useDefaultFramebuffer?(Pe.bindFramebuffer(36160,null),re=!1):void 0===Qt.__webglFramebuffer?fe.setupRenderTarget(U):Qt.__hasExternalTextures&&fe.rebindTextures(U,ye.get(U.texture).__webglTexture,ye.get(U.depthTexture).__webglTexture)}let we=null,Rt=!1,qt=!1;if(U){const Qt=U.texture;(Qt.isData3DTexture||Qt.isDataArrayTexture)&&(qt=!0);const Wn=ye.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(we=Wn[oe],Rt=!0):we=qe.isWebGL2&&U.samples>0&&!1===fe.useMultisampledRTT(U)?ye.get(U).__webglMultisampledFramebuffer:Wn,M.copy(U.viewport),R.copy(U.scissor),w=U.scissorTest}else M.copy(I).multiplyScalar(Y).floor(),R.copy(G).multiplyScalar(Y).floor(),w=k;if(Pe.bindFramebuffer(36160,we)&&qe.drawBuffers&&re&&Pe.drawBuffers(U,we),Pe.viewport(M),Pe.scissor(R),Pe.setScissorTest(w),Rt){const Qt=ye.get(U.texture);ue.framebufferTexture2D(36160,36064,34069+oe,Qt.__webglTexture,be)}else if(qt){const Qt=ye.get(U.texture);ue.framebufferTextureLayer(36160,36064,Qt.__webglTexture,be||0,oe||0)}b=-1},this.readRenderTargetPixels=function(U,oe,be,re,we,Rt,qt){if(!U||!U.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let cn=ye.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&void 0!==qt&&(cn=cn[qt]),cn){Pe.bindFramebuffer(36160,cn);try{const Qt=U.texture,Wn=Qt.format,Sn=Qt.type;if(Wn!==ka&&B.convert(Wn)!==ue.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Tn=Sn===G0&&(Le.has("EXT_color_buffer_half_float")||qe.isWebGL2&&Le.has("EXT_color_buffer_float"));if(!(Sn===Sh||B.convert(Sn)===ue.getParameter(35738)||Sn===zu&&(qe.isWebGL2||Le.has("OES_texture_float")||Le.has("WEBGL_color_buffer_float"))||Tn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");oe>=0&&oe<=U.width-re&&be>=0&&be<=U.height-we&&ue.readPixels(oe,be,re,we,B.convert(Wn),B.convert(Sn),Rt)}finally{const Qt=null!==y?ye.get(y).__webglFramebuffer:null;Pe.bindFramebuffer(36160,Qt)}}},this.copyFramebufferToTexture=function(U,oe,be=0){const re=Math.pow(2,-be),we=Math.floor(oe.image.width*re),Rt=Math.floor(oe.image.height*re);fe.setTexture2D(oe,0),ue.copyTexSubImage2D(3553,be,0,0,U.x,U.y,we,Rt),Pe.unbindTexture()},this.copyTextureToTexture=function(U,oe,be,re=0){const we=oe.image.width,Rt=oe.image.height,qt=B.convert(be.format),cn=B.convert(be.type);fe.setTexture2D(be,0),ue.pixelStorei(37440,be.flipY),ue.pixelStorei(37441,be.premultiplyAlpha),ue.pixelStorei(3317,be.unpackAlignment),oe.isDataTexture?ue.texSubImage2D(3553,re,U.x,U.y,we,Rt,qt,cn,oe.image.data):oe.isCompressedTexture?ue.compressedTexSubImage2D(3553,re,U.x,U.y,oe.mipmaps[0].width,oe.mipmaps[0].height,qt,oe.mipmaps[0].data):ue.texSubImage2D(3553,re,U.x,U.y,qt,cn,oe.image),0===re&&be.generateMipmaps&&ue.generateMipmap(3553),Pe.unbindTexture()},this.copyTextureToTexture3D=function(U,oe,be,re,we=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Rt=U.max.x-U.min.x+1,qt=U.max.y-U.min.y+1,cn=U.max.z-U.min.z+1,Qt=B.convert(re.format),Wn=B.convert(re.type);let Sn;if(re.isData3DTexture)fe.setTexture3D(re,0),Sn=32879;else{if(!re.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");fe.setTexture2DArray(re,0),Sn=35866}ue.pixelStorei(37440,re.flipY),ue.pixelStorei(37441,re.premultiplyAlpha),ue.pixelStorei(3317,re.unpackAlignment);const Tn=ue.getParameter(3314),Ji=ue.getParameter(32878),_1=ue.getParameter(3316),up=ue.getParameter(3315),dp=ue.getParameter(32877),El=be.isCompressedTexture?be.mipmaps[0]:be.image;ue.pixelStorei(3314,El.width),ue.pixelStorei(32878,El.height),ue.pixelStorei(3316,U.min.x),ue.pixelStorei(3315,U.min.y),ue.pixelStorei(32877,U.min.z),be.isDataTexture||be.isData3DTexture?ue.texSubImage3D(Sn,we,oe.x,oe.y,oe.z,Rt,qt,cn,Qt,Wn,El.data):be.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ue.compressedTexSubImage3D(Sn,we,oe.x,oe.y,oe.z,Rt,qt,cn,Qt,El.data)):ue.texSubImage3D(Sn,we,oe.x,oe.y,oe.z,Rt,qt,cn,Qt,Wn,El),ue.pixelStorei(3314,Tn),ue.pixelStorei(32878,Ji),ue.pixelStorei(3316,_1),ue.pixelStorei(3315,up),ue.pixelStorei(32877,dp),0===we&&re.generateMipmaps&&ue.generateMipmap(Sn),Pe.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?fe.setTextureCube(U,0):U.isData3DTexture?fe.setTexture3D(U,0):U.isDataArrayTexture?fe.setTexture2DArray(U,0):fe.setTexture2D(U,0),Pe.unbindTexture()},this.resetState=function(){_=0,v=0,y=null,Pe.reset(),Me.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class rke extends nj{}).prototype.isWebGL1Renderer=!0;class ij extends Kr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class DM{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Do()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Do()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Do()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ps=new z;class Uh{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ps.fromBufferAttribute(this,t),Ps.applyMatrix4(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ps.fromBufferAttribute(this,t),Ps.applyNormalMatrix(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ps.fromBufferAttribute(this,t),Ps.transformDirection(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}setX(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ec(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ec(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ec(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ec(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ni(t,this.array),i=ni(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ni(t,this.array),i=ni(i,this.array),r=ni(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ni(t,this.array),i=ni(i,this.array),r=ni(r,this.array),s=ni(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new xr(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Uh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const cj=new z,uj=new qn,dj=new qn,ake=new z,hj=new Kt;class fj extends Qr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Kt,this.bindMatrixInverse=new Kt}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new qn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;uj.fromBufferAttribute(r.attributes.skinIndex,e),dj.fromBufferAttribute(r.attributes.skinWeight,e),cj.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=dj.getComponent(s);if(0!==o){const a=uj.getComponent(s);hj.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(ake.copy(cj).applyMatrix4(hj),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class RM extends Kr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ng extends Oa{constructor(e=null,t=1,i=1,r,s,o,a,l,c=yr,u=yr,d,h){super(null,o,a,l,c,u,r,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const pj=new Kt,lke=new Kt;class t8{constructor(e=[],t=[]){this.uuid=Do(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Kt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Kt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)pj.multiplyMatrices(e[s]?e[s].matrixWorld:lke,t[s]),pj.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new t8(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=cW(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new ng(t,e,e,ka,zu);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new RM),this.bones.push(o),this.boneInverses.push((new Kt).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class Qs extends Ba{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ye(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const _j=new z,vj=new z,yj=new Kt,IM=new L6,r8=new zh;class Gh extends Kr{constructor(e=new on,t=new Qs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)_j.fromBufferAttribute(t,r-1),vj.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=_j.distanceTo(vj);e.setAttribute("lineDistance",new mt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),r8.copy(i.boundingSphere),r8.applyMatrix4(r),r8.radius+=s,!1===e.ray.intersectsSphere(r8))return;yj.copy(r).invert(),IM.copy(e.ray).applyMatrix4(yj);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new z,u=new z,d=new z,h=new z,f=this.isLineSegments?2:1,p=i.index,g=i.attributes.position;if(null!==p)for(let y=Math.max(0,o.start),b=Math.min(p.count,o.start+o.count)-1;y<b;y+=f){const x=p.getX(y),M=p.getX(y+1);if(c.fromBufferAttribute(g,x),u.fromBufferAttribute(g,M),IM.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||t.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(let y=Math.max(0,o.start),b=Math.min(g.count,o.start+o.count)-1;y<b;y+=f){if(c.fromBufferAttribute(g,y),u.fromBufferAttribute(g,y+1),IM.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(h);M<e.near||M>e.far||t.push({distance:M,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const bj=new z,xj=new z;class kM extends Gh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)bj.fromBufferAttribute(t,r),xj.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+bj.distanceTo(xj);e.setAttribute("lineDistance",new mt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class wj extends Gh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class LM extends Ba{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ye(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Cj=new Kt,PM=new L6,s8=new zh,o8=new z;class Mj extends Kr{constructor(e=new on,t=new LM){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),s8.copy(i.boundingSphere),s8.applyMatrix4(r),s8.radius+=s,!1===e.ray.intersectsSphere(s8))return;Cj.copy(r).invert(),PM.copy(e.ray).applyMatrix4(Cj);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,d=i.attributes.position;if(null!==c)for(let p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);p<m;p++){const g=c.getX(p);o8.fromBufferAttribute(d,g),Sj(o8,g,l,r,e,t,this)}else for(let p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);p<m;p++)o8.fromBufferAttribute(d,p),Sj(o8,p,l,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Sj(n,e,t,i,r,s,o){const a=PM.distanceSqToPoint(n);if(a<t){const l=new z;PM.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class yl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;o=t||e*i[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,i[r]===o)return r/(s-1);const u=i[r];return(r+(o-u)/(i[r+1]-u))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new xe:new z);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new z,r=[],s=[],o=[],a=new z,l=new Kt;for(let f=0;f<=e;f++)r[f]=this.getTangentAt(f/e,new z);s[0]=new z,o[0]=new z;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(or(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(r[f],s[f])}if(!0===t){let f=Math.acos(or(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class OM extends yl{constructor(e=0,t=0,i=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new xe,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*u-f*d+this.aX,c=h*d+f*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function FM(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+d)+(l-a)/d;h*=u,f*=u,r(o,a,h,f)},calc:function(s){const o=s*s;return n+e*s+t*o+i*(o*s)}}}const a8=new z,NM=new FM,zM=new FM,BM=new FM;function Tj(n,e,t,i,r){const s=.5*(i-e),o=.5*(r-t),a=n*n;return(2*t-2*i+s+o)*(n*a)+(-3*t+3*i-2*s-o)*a+s*n+t}function sg(n,e,t,i){return function fke(n,e){const t=1-n;return t*t*e}(n,e)+function pke(n,e){return 2*(1-n)*n*e}(n,t)+function mke(n,e){return n*n*e}(n,i)}function og(n,e,t,i,r){return function gke(n,e){const t=1-n;return t*t*t*e}(n,e)+function _ke(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function vke(n,e){return 3*(1-n)*n*n*e}(n,i)+function yke(n,e){return n*n*n*e}(n,r)}class Ej extends yl{constructor(e=new xe,t=new xe,i=new xe,r=new xe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new xe){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(og(e,r.x,s.x,o.x,a.x),og(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class VM extends yl{constructor(e=new xe,t=new xe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new xe){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new xe;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Dj extends yl{constructor(e=new xe,t=new xe,i=new xe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new xe){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(sg(e,r.x,s.x,o.x),sg(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Rj extends yl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new xe){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(Tj(a,l.x,c.x,u.x,d.x),Tj(a,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new xe).fromArray(r))}return this}}var HM=Object.freeze({__proto__:null,ArcCurve:class dke extends OM{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class hke extends yl{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new z){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let c,u,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(a8.subVectors(r[0],r[1]).add(r[0]),c=a8);const d=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(a8.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=a8),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let p=Math.pow(c.distanceToSquared(d),f),m=Math.pow(d.distanceToSquared(h),f),g=Math.pow(h.distanceToSquared(u),f);m<1e-4&&(m=1),p<1e-4&&(p=m),g<1e-4&&(g=m),NM.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,p,m,g),zM.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,p,m,g),BM.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,p,m,g)}else"catmullrom"===this.curveType&&(NM.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),zM.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),BM.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return i.set(NM.calc(l),zM.calc(l),BM.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new z).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:Ej,CubicBezierCurve3:class bke extends yl{constructor(e=new z,t=new z,i=new z,r=new z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new z){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(og(e,r.x,s.x,o.x,a.x),og(e,r.y,s.y,o.y,a.y),og(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:OM,LineCurve:VM,LineCurve3:class xke extends yl{constructor(e=new z,t=new z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new z){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Dj,QuadraticBezierCurve3:class Aj extends yl{constructor(e=new z,t=new z,i=new z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new z){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(sg(e,r.x,s.x,o.x),sg(e,r.y,s.y,o.y),sg(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:Rj});class wke extends yl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new VM(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push((new HM[r.type]).fromJSON(r))}return this}}class l8 extends wke{constructor(e){super(),this.type="Path",this.currentPoint=new xe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new VM(this.currentPoint.clone(),new xe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Dj(this.currentPoint.clone(),new xe(e,t),new xe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new Ej(this.currentPoint.clone(),new xe(e,t),new xe(i,r),new xe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Rj(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new OM(e,t,i,r,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class jh extends l8{constructor(e){super(e),this.uuid=Do(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push((new l8).fromJSON(r))}return this}}function Ij(n,e,t,i,r){let s,o;if(r===function Vke(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}(n,e,t,i)>0)for(s=e;s<t;s+=i)o=Pj(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=Pj(s,n[s],n[s+1],o);return o&&f8(o,o.next)&&(ug(o),o=o.next),o}function Xu(n,e){if(!n)return n;e||(e=n);let i,t=n;do{if(i=!1,t.steiner||!f8(t,t.next)&&0!==Pi(t.prev,t,t.next))t=t.next;else{if(ug(t),t=e=t.prev,t===t.next)break;i=!0}}while(i||t!==e);return e}function lg(n,e,t,i,r,s,o){if(!n)return;!o&&s&&function Pke(n,e,t,i){let r=n;do{null===r.z&&(r.z=qM(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,function Oke(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,i);e++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1)}(r)}(n,i,r,s);let l,c,a=n;for(;n.prev!==n.next;)if(l=n.prev,c=n.next,s?Tke(n,i,r,s):Ske(n))e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),ug(n),n=c.next,a=c.next;else if((n=c)===a){o?1===o?lg(n=Eke(Xu(n),e,t),e,t,i,r,s,2):2===o&&Dke(n,e,t,i,r,s):lg(Xu(n),e,t,i,r,s,1);break}}function Ske(n){const e=n.prev,t=n,i=n.next;if(Pi(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(H2(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&Pi(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Tke(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Pi(r,s,o)>=0)return!1;const c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,d=qM(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,e,t,i),h=qM(c,u,e,t,i);let f=n.prevZ,p=n.nextZ;for(;f&&f.z>=d&&p&&p.z<=h;){if(f!==n.prev&&f!==n.next&&H2(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Pi(f.prev,f,f.next)>=0||(f=f.prevZ,p!==n.prev&&p!==n.next&&H2(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Pi(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=d;){if(f!==n.prev&&f!==n.next&&H2(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Pi(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==n.prev&&p!==n.next&&H2(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Pi(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Eke(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!f8(r,s)&&kj(r,i,i.next,s)&&cg(r,s)&&cg(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),ug(i),ug(i.next),i=n=s),i=i.next}while(i!==n);return Xu(i)}function Dke(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Nke(o,a)){let l=Lj(o,a);return o=Xu(o,o.next),l=Xu(l,l.next),lg(o,e,t,i,r,s),void lg(l,e,t,i,r,s)}a=a.next}o=o.next}while(o!==n)}function Rke(n,e){return n.x-e.x}function Ike(n,e){if(e=function kke(n,e){let t=e;const i=n.x,r=n.y;let o,s=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=i&&h>s){if(s=h,h===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const a=o,l=o.x,c=o.y;let d,u=1/0;t=o;do{i>=t.x&&t.x>=l&&i!==t.x&&H2(r<c?i:s,r,l,c,r<c?s:i,r,t.x,t.y)&&(d=Math.abs(r-t.y)/(i-t.x),cg(t,n)&&(d<u||d===u&&(t.x>o.x||t.x===o.x&&Lke(o,t)))&&(o=t,u=d)),t=t.next}while(t!==a);return o}(n,e),e){const t=Lj(e,n);Xu(e,e.next),Xu(t,t.next)}}function Lke(n,e){return Pi(n.prev,n,e.prev)<0&&Pi(e.next,n,n.next)<0}function qM(n,e,t,i,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*r)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Fke(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function H2(n,e,t,i,r,s,o,a){return(r-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(i-a)>=0}function Nke(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function zke(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&kj(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(cg(n,e)&&cg(e,n)&&function Bke(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next}while(t!==n);return i}(n,e)&&(Pi(n.prev,n,e.prev)||Pi(n,e.prev,e))||f8(n,e)&&Pi(n.prev,n,n.next)>0&&Pi(e.prev,e,e.next)>0)}function Pi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function f8(n,e){return n.x===e.x&&n.y===e.y}function kj(n,e,t,i){const r=m8(Pi(n,e,t)),s=m8(Pi(n,e,i)),o=m8(Pi(t,i,n)),a=m8(Pi(t,i,e));return!!(r!==s&&o!==a||0===r&&p8(n,t,e)||0===s&&p8(n,i,e)||0===o&&p8(t,n,i)||0===a&&p8(t,e,i))}function p8(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function m8(n){return n>0?1:n<0?-1:0}function cg(n,e){return Pi(n.prev,n,n.next)<0?Pi(n,e,n.next)>=0&&Pi(n,n.prev,e)>=0:Pi(n,e,n.prev)<0||Pi(n,n.next,e)<0}function Lj(n,e){const t=new YM(n.i,n.x,n.y),i=new YM(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function Pj(n,e,t,i){const r=new YM(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ug(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function YM(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Lc{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*i}static isClockWise(e){return Lc.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];Oj(e),Fj(i,e);let o=e.length;t.forEach(Oj);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,Fj(i,t[l]);const a=function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=Ij(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,h,f;if(i&&(s=function Ake(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=Ij(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(Fke(c));for(r.sort(Rke),s=0;s<r.length;s++)Ike(r[s],t),t=Xu(t,t.next);return t}(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let p=t;p<r;p+=t)d=n[p],h=n[p+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=0!==f?1/f:0}return lg(s,o,t,a,l,f),o}(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function Oj(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Fj(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class g8 extends on{constructor(e=new jh([new xe(.5,.5),new xe(-.5,.5),new xe(-.5,-.5),new xe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++)o(e[a]);function o(a){const l=[],c=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1,d=void 0!==t.depth?t.depth:1;let h=void 0===t.bevelEnabled||t.bevelEnabled,f=void 0!==t.bevelThickness?t.bevelThickness:.2,p=void 0!==t.bevelSize?t.bevelSize:f-.1,m=void 0!==t.bevelOffset?t.bevelOffset:0,g=void 0!==t.bevelSegments?t.bevelSegments:3;const _=t.extrudePath,v=void 0!==t.UVGenerator?t.UVGenerator:Hke;let y,x,M,R,w,b=!1;_&&(y=_.getSpacedPoints(u),b=!0,h=!1,x=_.computeFrenetFrames(u,!1),M=new z,R=new z,w=new z),h||(g=0,f=0,p=0,m=0);const E=a.extractPoints(c);let P=E.shape;const Y=E.holes;if(!Lc.isClockWise(P)){P=P.reverse();for(let ye=0,fe=Y.length;ye<fe;ye++){const Re=Y[ye];Lc.isClockWise(Re)&&(Y[ye]=Re.reverse())}}const q=Lc.triangulateShape(P,Y),I=P;for(let ye=0,fe=Y.length;ye<fe;ye++)P=P.concat(Y[ye]);function G(ye,fe,Re){return fe||console.error("THREE.ExtrudeGeometry: vec does not exist"),fe.clone().multiplyScalar(Re).add(ye)}const k=P.length,F=q.length;function N(ye,fe,Re){let rt,Ne,Oe;const Qe=ye.x-fe.x,ct=ye.y-fe.y,$t=Re.x-ye.x,yn=Re.y-ye.y,W=Qe*Qe+ct*ct;if(Math.abs(Qe*yn-ct*$t)>Number.EPSILON){const ce=Math.sqrt(W),De=Math.sqrt($t*$t+yn*yn),Fe=fe.x-ct/ce,Ve=fe.y+Qe/ce,Me=((Re.x-yn/De-Fe)*yn-(Re.y+$t/De-Ve)*$t)/(Qe*yn-ct*$t);rt=Fe+Qe*Me-ye.x,Ne=Ve+ct*Me-ye.y;const Ae=rt*rt+Ne*Ne;if(Ae<=2)return new xe(rt,Ne);Oe=Math.sqrt(Ae/2)}else{let ce=!1;Qe>Number.EPSILON?$t>Number.EPSILON&&(ce=!0):Qe<-Number.EPSILON?$t<-Number.EPSILON&&(ce=!0):Math.sign(ct)===Math.sign(yn)&&(ce=!0),ce?(rt=-ct,Ne=Qe,Oe=Math.sqrt(W)):(rt=Qe,Ne=ct,Oe=Math.sqrt(W/2))}return new xe(rt/Oe,Ne/Oe)}const V=[];for(let ye=0,fe=I.length,Re=fe-1,rt=ye+1;ye<fe;ye++,Re++,rt++)Re===fe&&(Re=0),rt===fe&&(rt=0),V[ye]=N(I[ye],I[Re],I[rt]);const $=[];let te,j=V.concat();for(let ye=0,fe=Y.length;ye<fe;ye++){const Re=Y[ye];te=[];for(let rt=0,Ne=Re.length,Oe=Ne-1,Qe=rt+1;rt<Ne;rt++,Oe++,Qe++)Oe===Ne&&(Oe=0),Qe===Ne&&(Qe=0),te[rt]=N(Re[rt],Re[Oe],Re[Qe]);$.push(te),j=j.concat(te)}for(let ye=0;ye<g;ye++){const fe=ye/g,Re=f*Math.cos(fe*Math.PI/2),rt=p*Math.sin(fe*Math.PI/2)+m;for(let Ne=0,Oe=I.length;Ne<Oe;Ne++){const Qe=G(I[Ne],V[Ne],rt);Ie(Qe.x,Qe.y,-Re)}for(let Ne=0,Oe=Y.length;Ne<Oe;Ne++){const Qe=Y[Ne];te=$[Ne];for(let ct=0,$t=Qe.length;ct<$t;ct++){const yn=G(Qe[ct],te[ct],rt);Ie(yn.x,yn.y,-Re)}}}const _e=p+m;for(let ye=0;ye<k;ye++){const fe=h?G(P[ye],j[ye],_e):P[ye];b?(R.copy(x.normals[0]).multiplyScalar(fe.x),M.copy(x.binormals[0]).multiplyScalar(fe.y),w.copy(y[0]).add(R).add(M),Ie(w.x,w.y,w.z)):Ie(fe.x,fe.y,0)}for(let ye=1;ye<=u;ye++)for(let fe=0;fe<k;fe++){const Re=h?G(P[fe],j[fe],_e):P[fe];b?(R.copy(x.normals[ye]).multiplyScalar(Re.x),M.copy(x.binormals[ye]).multiplyScalar(Re.y),w.copy(y[ye]).add(R).add(M),Ie(w.x,w.y,w.z)):Ie(Re.x,Re.y,d/u*ye)}for(let ye=g-1;ye>=0;ye--){const fe=ye/g,Re=f*Math.cos(fe*Math.PI/2),rt=p*Math.sin(fe*Math.PI/2)+m;for(let Ne=0,Oe=I.length;Ne<Oe;Ne++){const Qe=G(I[Ne],V[Ne],rt);Ie(Qe.x,Qe.y,d+Re)}for(let Ne=0,Oe=Y.length;Ne<Oe;Ne++){const Qe=Y[Ne];te=$[Ne];for(let ct=0,$t=Qe.length;ct<$t;ct++){const yn=G(Qe[ct],te[ct],rt);b?Ie(yn.x,yn.y+y[u-1].y,y[u-1].x+Re):Ie(yn.x,yn.y,d+Re)}}}function ue(ye,fe){let Re=ye.length;for(;--Re>=0;){const rt=Re;let Ne=Re-1;Ne<0&&(Ne=ye.length-1);for(let Oe=0,Qe=u+2*g;Oe<Qe;Oe++){const ct=k*Oe,$t=k*(Oe+1);qe(fe+rt+ct,fe+Ne+ct,fe+Ne+$t,fe+rt+$t)}}}function Ie(ye,fe,Re){l.push(ye),l.push(fe),l.push(Re)}function Le(ye,fe,Re){Pe(ye),Pe(fe),Pe(Re);const rt=r.length/3,Ne=v.generateTopUV(i,r,rt-3,rt-2,rt-1);At(Ne[0]),At(Ne[1]),At(Ne[2])}function qe(ye,fe,Re,rt){Pe(ye),Pe(fe),Pe(rt),Pe(fe),Pe(Re),Pe(rt);const Ne=r.length/3,Oe=v.generateSideWallUV(i,r,Ne-6,Ne-3,Ne-2,Ne-1);At(Oe[0]),At(Oe[1]),At(Oe[3]),At(Oe[1]),At(Oe[2]),At(Oe[3])}function Pe(ye){r.push(l[3*ye+0]),r.push(l[3*ye+1]),r.push(l[3*ye+2])}function At(ye){s.push(ye.x),s.push(ye.y)}(function se(){const ye=r.length/3;if(h){let fe=0,Re=k*fe;for(let rt=0;rt<F;rt++){const Ne=q[rt];Le(Ne[2]+Re,Ne[1]+Re,Ne[0]+Re)}fe=u+2*g,Re=k*fe;for(let rt=0;rt<F;rt++){const Ne=q[rt];Le(Ne[0]+Re,Ne[1]+Re,Ne[2]+Re)}}else{for(let fe=0;fe<F;fe++){const Re=q[fe];Le(Re[2],Re[1],Re[0])}for(let fe=0;fe<F;fe++){const Re=q[fe];Le(Re[0]+k*u,Re[1]+k*u,Re[2]+k*u)}}i.addGroup(ye,r.length/3-ye,0)})(),function Ee(){const ye=r.length/3;let fe=0;ue(I,fe),fe+=I.length;for(let Re=0,rt=Y.length;Re<rt;Re++){const Ne=Y[Re];ue(Ne,fe),fe+=Ne.length}i.addGroup(ye,r.length/3-ye,1)}()}this.setAttribute("position",new mt(r,3)),this.setAttribute("uv",new mt(s,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function Uke(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++)t.shapes.push(n[i].uuid);else t.shapes.push(n.uuid);return t.options=Object.assign({},e),void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++)i.push(t[e.shapes[s]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new HM[r.type]).fromJSON(r)),new g8(i,e.options)}}const Hke={generateTopUV:function(n,e,t,i,r){const a=e[3*i],l=e[3*i+1],c=e[3*r],u=e[3*r+1];return[new xe(e[3*t],e[3*t+1]),new xe(a,l),new xe(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[3*t],a=e[3*t+1],l=e[3*t+2],c=e[3*i],u=e[3*i+1],d=e[3*i+2],h=e[3*r],f=e[3*r+1],p=e[3*r+2],m=e[3*s],g=e[3*s+1],_=e[3*s+2];return Math.abs(a-u)<Math.abs(o-c)?[new xe(o,1-l),new xe(c,1-d),new xe(h,1-p),new xe(m,1-_)]:[new xe(a,1-l),new xe(u,1-d),new xe(f,1-p),new xe(g,1-_)]}};class dg extends Ba{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ye(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Zu extends dg{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new xe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return or(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ye(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ye(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ye(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function ra(n,e,t){return nS(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)}function $h(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function nS(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Bj(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i}function iS(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function rS(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)}class hg{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class tLe extends hg{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=e,l=2*i-t;break;case 2402:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(i-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),m=p*p,g=m*p,_=-h*g+2*h*m-h*p,v=(1+h)*g+(-1.5-2*h)*m+(-.5+h)*p+1,y=(-1-f)*g+(1.5+f)*m+.5*p,b=f*g-f*m;for(let x=0;x!==a;++x)s[x]=_*o[u+x]+v*o[c+x]+y*o[l+x]+b*o[d+x];return s}}class Vj extends hg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class nLe extends hg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class bl{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=$h(t,this.TimeBufferType),this.values=$h(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:$h(e.times,Array),values:$h(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new nLe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Vj(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new tLe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case W0:t=this.InterpolantFactoryMethodDiscrete;break;case p2:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return W0;case this.InterpolantFactoryMethodLinear:return p2;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=ra(i,s,o),this.values=ra(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&nS(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=ra(this.times),t=ra(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const d=a*i,h=d-i,f=d+i;for(let p=0;p!==i;++p){const m=t[d+p];if(m!==t[h+p]||m!==t[f+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,h=o*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=ra(e,0,o),this.values=ra(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=ra(this.times,0),t=ra(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}bl.prototype.TimeBufferType=Float32Array,bl.prototype.ValueBufferType=Float32Array,bl.prototype.DefaultInterpolation=p2;class U2 extends bl{}U2.prototype.ValueTypeName="bool",U2.prototype.ValueBufferType=Array,U2.prototype.DefaultInterpolation=W0,U2.prototype.InterpolantFactoryMethodLinear=void 0,U2.prototype.InterpolantFactoryMethodSmooth=void 0;class Hj extends bl{}Hj.prototype.ValueTypeName="color";class fg extends bl{}fg.prototype.ValueTypeName="number";class iLe extends hg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)ps.slerpFlat(s,0,o,c-a,o,c,l);return s}}class qh extends bl{InterpolantFactoryMethodLinear(e){return new iLe(this.times,this.values,this.getValueSize(),e)}}qh.prototype.ValueTypeName="quaternion",qh.prototype.DefaultInterpolation=p2,qh.prototype.InterpolantFactoryMethodSmooth=void 0;class G2 extends bl{}G2.prototype.ValueTypeName="string",G2.prototype.ValueBufferType=Array,G2.prototype.DefaultInterpolation=W0,G2.prototype.InterpolantFactoryMethodLinear=void 0,G2.prototype.InterpolantFactoryMethodSmooth=void 0;class pg extends bl{}pg.prototype.ValueTypeName="vector";class mg{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Do(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(sLe(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(bl.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=Bj(l);l=iS(l,1,u),c=iS(c,1,u),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new fg(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=r[d];h||(r[d]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,h,f,p,m){if(0!==f.length){const g=[],_=[];rS(f,g,_,p),0!==g.length&&m.push(new d(h,g,_))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let m=0;m<h[p].morphTargets.length;m++)f[h[p].morphTargets[m]]=-1;for(const m in f){const g=[],_=[];for(let v=0;v!==h[p].morphTargets.length;++v){const y=h[p];g.push(y.time),_.push(y.morphTarget===m?1:0)}r.push(new fg(".morphTargetInfluence["+m+"]",g,_))}l=f.length*o}else{const f=".bones["+t[d].name+"]";i(pg,f+".position",h,"pos",r),i(qh,f+".quaternion",h,"rot",r),i(pg,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function sLe(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function rLe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return fg;case"vector":case"vector2":case"vector3":case"vector4":return pg;case"color":return Hj;case"quaternion":return qh;case"bool":case"boolean":return U2;case"string":return G2}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];rS(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const W2={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Uj{constructor(e,t,i){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],p=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}}const oLe=new Uj;class gg{constructor(e){this.manager=void 0!==e?e:oLe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Pc={};class aLe extends Error{constructor(e,t){super(e),this.response=t}}class xl extends gg{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=W2.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==Pc[e])return void Pc[e].push({onLoad:t,onProgress:i,onError:r});Pc[e]=[],Pc[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const u=Pc[e],d=c.body.getReader(),h=c.headers.get("Content-Length"),f=h?parseInt(h):0,p=0!==f;let m=0;const g=new ReadableStream({start(_){!function v(){d.read().then(({done:y,value:b})=>{if(y)_.close();else{m+=b.byteLength;const x=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:f});for(let M=0,R=u.length;M<R;M++){const w=u[M];w.onProgress&&w.onProgress(x)}_.enqueue(b),v()}})}()}});return new Response(g)}throw new aLe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return c.json();default:if(void 0===a)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{W2.add(e,c);const u=Pc[e];delete Pc[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=Pc[e];if(void 0===u)throw this.manager.itemError(e),c;delete Pc[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class y8 extends gg{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=W2.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=q0("img");function l(){u(),W2.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class lLe extends gg{constructor(e){super(e)}load(e,t,i,r){const s=new Oa,o=new y8(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class b8 extends Kr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ye(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class Gj extends b8{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Kr.DefaultUp),this.updateMatrix(),this.groundColor=new Ye(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Wj=new Kt,jj=new z,$j=new z;class sS{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new xe(512,512),this.map=null,this.mapPass=null,this.matrix=new Kt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new yM,this._frameExtents=new xe(1,1),this._viewportCount=1,this._viewports=[new qn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;jj.setFromMatrixPosition(e.matrixWorld),t.position.copy(jj),$j.setFromMatrixPosition(e.target.matrixWorld),t.lookAt($j),t.updateMatrixWorld(),Wj.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Wj),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class cLe extends sS{constructor(){super(new Wr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*j0*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class qj extends b8{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Kr.DefaultUp),this.updateMatrix(),this.target=new Kr,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new cLe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Yj=new Kt,_g=new z,oS=new z;class uLe extends sS{constructor(){super(new Wr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new xe(4,2),this._viewportCount=6,this._viewports=[new qn(2,1,1,1),new qn(0,1,1,1),new qn(3,1,1,1),new qn(1,1,1,1),new qn(3,0,1,1),new qn(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),_g.setFromMatrixPosition(e.matrixWorld),i.position.copy(_g),oS.copy(i.position),oS.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(oS),i.updateMatrixWorld(),r.makeTranslation(-_g.x,-_g.y,-_g.z),Yj.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Yj)}}class Xj extends b8{constructor(e,t,i=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new uLe}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class dLe extends sS{constructor(){super(new q6(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class aS extends b8{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Kr.DefaultUp),this.updateMatrix(),this.target=new Kr,this.shadow=new dLe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Oc{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class yLe extends gg{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=W2.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){W2.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}const cS="\\[\\]\\.:\\/",MLe=new RegExp("["+cS+"]","g"),uS="[^"+cS+"]",SLe="[^"+cS.replace("\\.","")+"]",RLe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",uS)+/(WCOD+)?/.source.replace("WCOD",SLe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uS)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uS)+"$"),ILe=["material","materials","bones","map"];class kLe{constructor(e,t,i){const r=i||ui.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let ui=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(MLe,"")}static parseTrackName(t){const i=RLe.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==ILe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=kLe,n})();ui.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ui.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ui.prototype.GetterByBindingType=[ui.prototype._getValue_direct,ui.prototype._getValue_array,ui.prototype._getValue_arrayElement,ui.prototype._getValue_toArray],ui.prototype.SetterByBindingTypeAndVersioning=[[ui.prototype._setValue_direct,ui.prototype._setValue_direct_setNeedsUpdate,ui.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ui.prototype._setValue_array,ui.prototype._setValue_array_setNeedsUpdate,ui.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ui.prototype._setValue_arrayElement,ui.prototype._setValue_arrayElement_setNeedsUpdate,ui.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ui.prototype._setValue_fromArray,ui.prototype._setValue_fromArray_setNeedsUpdate,ui.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class o${constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(or(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"144"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="144");const g$={type:"change"},pS={type:"start"},_$={type:"end"};class VLe extends Rh{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new z,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(B){B.addEventListener("keydown",yn),this._domElementKeyEvents=B},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(g$),i.update(),s=r.NONE},this.update=function(){const B=new z,Me=(new ps).setFromUnitVectors(e.up,new z(0,1,0)),Ae=Me.clone().invert(),Xe=new z,Ze=new ps,zt=2*Math.PI;return function(){const ii=i.object.position;B.copy(ii).sub(i.target),B.applyQuaternion(Me),a.setFromVector3(B),i.autoRotate&&s===r.NONE&&E(function R(){return 2*Math.PI/60/60*i.autoRotateSpeed}()),i.enableDamping?(a.theta+=l.theta*i.dampingFactor,a.phi+=l.phi*i.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let ee=i.minAzimuthAngle,Ge=i.maxAzimuthAngle;return isFinite(ee)&&isFinite(Ge)&&(ee<-Math.PI?ee+=zt:ee>Math.PI&&(ee-=zt),Ge<-Math.PI?Ge+=zt:Ge>Math.PI&&(Ge-=zt),a.theta=ee<=Ge?Math.max(ee,Math.min(Ge,a.theta)):a.theta>(ee+Ge)/2?Math.max(ee,a.theta):Math.min(Ge,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(i.minDistance,Math.min(i.maxDistance,a.radius)),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),B.setFromSpherical(a),B.applyQuaternion(Ae),ii.copy(i.target).add(B),i.object.lookAt(i.target),!0===i.enableDamping?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,!!(d||Xe.distanceToSquared(i.object.position)>o||8*(1-Ze.dot(i.object.quaternion))>o)&&(i.dispatchEvent(g$),Xe.copy(i.object.position),Ze.copy(i.object.quaternion),d=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",ce),i.domElement.removeEventListener("pointerdown",Re),i.domElement.removeEventListener("pointercancel",Oe),i.domElement.removeEventListener("wheel",$t),i.domElement.removeEventListener("pointermove",rt),i.domElement.removeEventListener("pointerup",Ne),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",yn)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new o$,l=new o$;let c=1;const u=new z;let d=!1;const h=new xe,f=new xe,p=new xe,m=new xe,g=new xe,_=new xe,v=new xe,y=new xe,b=new xe,x=[],M={};function w(){return Math.pow(.95,i.zoomSpeed)}function E(B){l.theta-=B}function P(B){l.phi-=B}const Y=function(){const B=new z;return function(Ae,Xe){B.setFromMatrixColumn(Xe,0),B.multiplyScalar(-Ae),u.add(B)}}(),J=function(){const B=new z;return function(Ae,Xe){!0===i.screenSpacePanning?B.setFromMatrixColumn(Xe,1):(B.setFromMatrixColumn(Xe,0),B.crossVectors(i.object.up,B)),B.multiplyScalar(Ae),u.add(B)}}(),q=function(){const B=new z;return function(Ae,Xe){const Ze=i.domElement;if(i.object.isPerspectiveCamera){B.copy(i.object.position).sub(i.target);let an=B.length();an*=Math.tan(i.object.fov/2*Math.PI/180),Y(2*Ae*an/Ze.clientHeight,i.object.matrix),J(2*Xe*an/Ze.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(Y(Ae*(i.object.right-i.object.left)/i.object.zoom/Ze.clientWidth,i.object.matrix),J(Xe*(i.object.top-i.object.bottom)/i.object.zoom/Ze.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function I(B){i.object.isPerspectiveCamera?c/=B:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*B)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function G(B){i.object.isPerspectiveCamera?c*=B:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/B)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function k(B){h.set(B.clientX,B.clientY)}function N(B){m.set(B.clientX,B.clientY)}function se(){1===x.length?h.set(x[0].pageX,x[0].pageY):h.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function Ee(){1===x.length?m.set(x[0].pageX,x[0].pageY):m.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function ue(){const B=x[0].pageX-x[1].pageX,Me=x[0].pageY-x[1].pageY,Ae=Math.sqrt(B*B+Me*Me);v.set(0,Ae)}function qe(B){if(1==x.length)f.set(B.pageX,B.pageY);else{const Ae=_t(B);f.set(.5*(B.pageX+Ae.x),.5*(B.pageY+Ae.y))}p.subVectors(f,h).multiplyScalar(i.rotateSpeed);const Me=i.domElement;E(2*Math.PI*p.x/Me.clientHeight),P(2*Math.PI*p.y/Me.clientHeight),h.copy(f)}function Pe(B){if(1===x.length)g.set(B.pageX,B.pageY);else{const Me=_t(B);g.set(.5*(B.pageX+Me.x),.5*(B.pageY+Me.y))}_.subVectors(g,m).multiplyScalar(i.panSpeed),q(_.x,_.y),m.copy(g)}function At(B){const Me=_t(B),Ae=B.pageX-Me.x,Xe=B.pageY-Me.y,Ze=Math.sqrt(Ae*Ae+Xe*Xe);y.set(0,Ze),b.set(0,Math.pow(y.y/v.y,i.zoomSpeed)),I(b.y),v.copy(y)}function Re(B){!1!==i.enabled&&(0===x.length&&(i.domElement.setPointerCapture(B.pointerId),i.domElement.addEventListener("pointermove",rt),i.domElement.addEventListener("pointerup",Ne)),function De(B){x.push(B)}(B),"touch"===B.pointerType?function W(B){switch(Ve(B),x.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;se(),s=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;Ee(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Ie(){i.enableZoom&&ue(),i.enablePan&&Ee()})(),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function Le(){i.enableZoom&&ue(),i.enableRotate&&se()})(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(pS)}(B):function Qe(B){let Me;switch(B.button){case 0:Me=i.mouseButtons.LEFT;break;case 1:Me=i.mouseButtons.MIDDLE;break;case 2:Me=i.mouseButtons.RIGHT;break;default:Me=-1}switch(Me){case 1:if(!1===i.enableZoom)return;(function F(B){v.set(B.clientX,B.clientY)})(B),s=r.DOLLY;break;case 0:if(B.ctrlKey||B.metaKey||B.shiftKey){if(!1===i.enablePan)return;N(B),s=r.PAN}else{if(!1===i.enableRotate)return;k(B),s=r.ROTATE}break;case 2:if(B.ctrlKey||B.metaKey||B.shiftKey){if(!1===i.enableRotate)return;k(B),s=r.ROTATE}else{if(!1===i.enablePan)return;N(B),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(pS)}(B))}function rt(B){!1!==i.enabled&&("touch"===B.pointerType?function O(B){switch(Ve(B),s){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;qe(B),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;Pe(B),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function ye(B){i.enableZoom&&At(B),i.enablePan&&Pe(B)})(B),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function fe(B){i.enableZoom&&At(B),i.enableRotate&&qe(B)})(B),i.update();break;default:s=r.NONE}}(B):function ct(B){switch(s){case r.ROTATE:if(!1===i.enableRotate)return;!function V(B){f.set(B.clientX,B.clientY),p.subVectors(f,h).multiplyScalar(i.rotateSpeed);const Me=i.domElement;E(2*Math.PI*p.x/Me.clientHeight),P(2*Math.PI*p.y/Me.clientHeight),h.copy(f),i.update()}(B);break;case r.DOLLY:if(!1===i.enableZoom)return;!function $(B){y.set(B.clientX,B.clientY),b.subVectors(y,v),b.y>0?I(w()):b.y<0&&G(w()),v.copy(y),i.update()}(B);break;case r.PAN:if(!1===i.enablePan)return;!function te(B){g.set(B.clientX,B.clientY),_.subVectors(g,m).multiplyScalar(i.panSpeed),q(_.x,_.y),m.copy(g),i.update()}(B)}}(B))}function Ne(B){Fe(B),0===x.length&&(i.domElement.releasePointerCapture(B.pointerId),i.domElement.removeEventListener("pointermove",rt),i.domElement.removeEventListener("pointerup",Ne)),i.dispatchEvent(_$),s=r.NONE}function Oe(B){Fe(B)}function $t(B){!1===i.enabled||!1===i.enableZoom||s!==r.NONE||(B.preventDefault(),i.dispatchEvent(pS),function j(B){B.deltaY<0?G(w()):B.deltaY>0&&I(w()),i.update()}(B),i.dispatchEvent(_$))}function yn(B){!1===i.enabled||!1===i.enablePan||function _e(B){let Me=!1;switch(B.code){case i.keys.UP:q(0,i.keyPanSpeed),Me=!0;break;case i.keys.BOTTOM:q(0,-i.keyPanSpeed),Me=!0;break;case i.keys.LEFT:q(i.keyPanSpeed,0),Me=!0;break;case i.keys.RIGHT:q(-i.keyPanSpeed,0),Me=!0}Me&&(B.preventDefault(),i.update())}(B)}function ce(B){!1!==i.enabled&&B.preventDefault()}function Fe(B){delete M[B.pointerId];for(let Me=0;Me<x.length;Me++)if(x[Me].pointerId==B.pointerId)return void x.splice(Me,1)}function Ve(B){let Me=M[B.pointerId];void 0===Me&&(Me=new xe,M[B.pointerId]=Me),Me.set(B.pageX,B.pageY)}function _t(B){return M[(B.pointerId===x[0].pointerId?x[1]:x[0]).pointerId]}i.domElement.addEventListener("contextmenu",ce),i.domElement.addEventListener("pointerdown",Re),i.domElement.addEventListener("pointercancel",Oe),i.domElement.addEventListener("wheel",$t,{passive:!1}),this.update()}}class HLe extends gg{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new $Le(t)}),this.register(function(t){return new JLe(t)}),this.register(function(t){return new ePe(t)}),this.register(function(t){return new YLe(t)}),this.register(function(t){return new XLe(t)}),this.register(function(t){return new ZLe(t)}),this.register(function(t){return new KLe(t)}),this.register(function(t){return new jLe(t)}),this.register(function(t){return new QLe(t)}),this.register(function(t){return new qLe(t)}),this.register(function(t){return new GLe(t)}),this.register(function(t){return new tPe(t)})}load(e,t,i,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Oc.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new xl(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if("string"==typeof e)s=e;else if(Oc.decodeText(new Uint8Array(e,0,4))===v$){try{o[pn.KHR_BINARY_GLTF]=new nPe(e)}catch(d){return void(r&&r(d))}s=o[pn.KHR_BINARY_GLTF].content}else s=Oc.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(void 0===l.asset||l.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new mPe(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);a[d.name]=d,o[d.name]=!0}if(l.extensionsUsed)for(let u=0;u<l.extensionsUsed.length;++u){const d=l.extensionsUsed[u],h=l.extensionsRequired||[];switch(d){case pn.KHR_MATERIALS_UNLIT:o[d]=new WLe;break;case pn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[d]=new sPe;break;case pn.KHR_DRACO_MESH_COMPRESSION:o[d]=new iPe(l,this.dracoLoader);break;case pn.KHR_TEXTURE_TRANSFORM:o[d]=new rPe;break;case pn.KHR_MESH_QUANTIZATION:o[d]=new oPe;break;default:h.indexOf(d)>=0&&void 0===a[d]&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function ULe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const pn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class GLe{constructor(e){this.parser=e,this.name=pn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Ye(16777215);void 0!==l.color&&u.fromArray(l.color);const d=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new aS(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Xj(u),c.distance=d;break;case"spot":c=new qj(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,void 0!==l.intensity&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class WLe{constructor(){this.name=pn.KHR_MATERIALS_UNLIT}getMaterialType(){return Ks}extendParams(e,t,i){const r=[];e.color=new Ye(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Hn))}return Promise.all(r)}}class jLe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class $Le{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Zu:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new xe(a,a)}return Promise.all(s)}}class qLe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Zu:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class YLe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Zu:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ye(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Hn)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class XLe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Zu:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class ZLe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Zu:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ye(a[0],a[1],a[2]),Promise.all(s)}}class KLe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Zu:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class QLe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Zu:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ye(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Hn)),Promise.all(s)}}class JLe{constructor(e){this.parser=e,this.name=pn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class ePe{constructor(e){this.parser=e,this.name=pn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class tPe{constructor(e){this.name=pn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,d=r.byteStride,h=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,h,r.mode,r.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(f),u,d,h,r.mode,r.filter),f})})}return null}}const v$="glTF";class nPe{constructor(e){this.name=pn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:Oc.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==v$)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,r=new DataView(e,12);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,1313821514===a){const l=new Uint8Array(e,12+s,o);this.content=Oc.decodeText(l)}else if(5130562===a){const l=12+s;this.body=e.slice(l,l+o)}s+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class iPe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=pn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=gS[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=gS[u]||u.toLowerCase();if(void 0!==o[u]){const h=i.accessors[e.attributes[u]];c[d]=yg[h.componentType].name,l[d]=!0===h.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d){r.decodeDracoFile(u,function(h){for(const f in h.attributes){const p=h.attributes[f],m=l[f];void 0!==m&&(p.normalized=m)}d(h)},a,c)})})}}class rPe{constructor(){this.name=pn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class mS extends dg{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new Ye).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class sPe{constructor(){this.name=pn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return mS}extendParams(e,t,i){const r=t.extensions[this.name];e.color=new Ye(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(void 0!==r.diffuseTexture&&s.push(i.assignTexture(e,"map",r.diffuseTexture,Hn)),e.emissive=new Ye(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new Ye(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const o=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",o)),s.push(i.assignTexture(e,"specularMap",o,Hn))}return Promise.all(s)}createMaterial(e){const t=new mS(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}class oPe{constructor(){this.name=pn.KHR_MESH_QUANTIZATION}}class b$ extends hg{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=2*a,c=3*a,u=r-t,d=(i-t)/u,h=d*d,f=h*d,p=e*c,m=p-c,g=-2*f+3*h,_=f-h,v=1-g,y=_-h+d;for(let b=0;b!==a;b++)s[b]=v*o[m+b+a]+y*(o[m+b+l]*u)+g*o[p+b+a]+_*(o[p+b]*u);return s}}const aPe=new ps;class lPe extends b${interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return aPe.fromArray(s).normalize().toArray(s),s}}const yg={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},x$={9728:yr,9729:qi,9984:1004,9985:1007,9986:1005,9987:Nu},w$={33071:Is,33648:1002,10497:Mh},C$={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},gS={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Qu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},cPe={CUBICSPLINE:void 0,LINEAR:p2,STEP:W0};function uPe(n){return void 0===n.DefaultMaterial&&(n.DefaultMaterial=new dg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial}function bg(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Jh(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function hPe(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function fPe(n){const e=n.extensions&&n.extensions[pn.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+M$(e.attributes):n.indices+":"+M$(n.attributes)+":"+n.mode,t}function M$(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function vS(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class mPe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new ULe,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;this.textureLoader=typeof createImageBitmap>"u"||i||r&&s<98?new lLe(this.options.manager):new yLe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new xl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};bg(s,a,r),Jh(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[pn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(Oc.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=C$[r.type],c=yg[r.componentType],u=c.BYTES_PER_ELEMENT,h=r.byteOffset||0,f=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let m,g;if(f&&f!==u*l){const _=Math.floor(h/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count;let y=t.cache.get(v);y||(m=new c(a,_*f,r.count*f/u),y=new DM(m,f/u),t.cache.add(v,y)),g=new Uh(y,l,h%f/u,p)}else m=null===a?new c(r.count*l):new c(a,h,r.count*l),g=new xr(m,l,p);if(void 0!==r.sparse){const b=r.sparse.values.byteOffset||0,x=new(0,yg[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*C$.SCALAR),M=new c(o[2],b,r.sparse.count*l);null!==a&&(g=new xr(g.array.slice(),g.itemSize,g.normalized));for(let R=0,w=x.length;R<w;R++){const E=x[R];if(g.setX(E,M[R*l]),l>=2&&g.setY(E,M[R*l+1]),l>=3&&g.setZ(E,M[R*l+2]),l>=4&&g.setW(E,M[R*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,o.name&&(u.name=o.name);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=x$[h.magFilter]||qi,u.minFilter=x$[h.minFilter]||Nu,u.wrapS=w$[h.wrapS]||Mh,u.wrapT=w$[h.wrapT]||Mh,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const h=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(h,f){let p=h;!0===t.isImageBitmapLoader&&(p=function(m){const g=new Oa(m);g.needsUpdate=!0,h(g)}),t.load(Oc.resolveURL(d,s.path),p,void 0,f)})}).then(function(d){return!0===c&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||function pPe(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(void 0!==i.texCoord&&0!=i.texCoord&&!("aoMap"===t&&1==i.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[pn.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[pn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[pn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new LM,Ba.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Qs,Ba.prototype.copy.call(l,i),l.color.copy(i.color),this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}i.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return dg}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[pn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const d=r[pn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else if(l[pn.KHR_MATERIALS_UNLIT]){const d=r[pn.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Ye(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}void 0!==d.baseColorTexture&&c.push(t.assignTexture(a,"map",d.baseColorTexture,Hn)),a.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,a.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==Ks&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new xe(1,1),void 0!==s.normalTexture.scale)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}return void 0!==s.occlusionTexture&&o!==Ks&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==Ks&&(a.emissive=(new Ye).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&o!==Ks&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Hn)),Promise.all(c).then(function(){let d;return d=o===mS?r[pn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),s.name&&(d.name=s.name),Jh(d,s),t.associations.set(d,{materials:e}),s.extensions&&bg(r,d,s),d})}createUniqueName(e){const t=ui.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[pn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return T$(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=fPe(c),d=r[u];if(d)o.push(d.promise);else{let h;h=c.extensions&&c.extensions[pn.KHR_DRACO_MESH_COMPRESSION]?s(c):T$(new on,c,t),r[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=void 0===o[l].material?uPe(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let f=0,p=u.length;f<p;f++){const m=u[f],g=o[f];let _;const v=c[f];if(4===g.mode||5===g.mode||6===g.mode||void 0===g.mode)_=!0===s.isSkinnedMesh?new fj(m,v):new Qr(m,v),!0===_.isSkinnedMesh&&!_.geometry.attributes.skinWeight.normalized&&_.normalizeSkinWeights(),5===g.mode?_.geometry=E$(_.geometry,1):6===g.mode&&(_.geometry=E$(_.geometry,2));else if(1===g.mode)_=new kM(m,v);else if(3===g.mode)_=new Gh(m,v);else if(2===g.mode)_=new wj(m,v);else{if(0!==g.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);_=new Mj(m,v)}Object.keys(_.geometry.morphAttributes).length>0&&hPe(_,s),_.name=t.createUniqueName(s.name||"mesh_"+e),Jh(_,s),g.extensions&&bg(r,_,g),t.assignFinalMaterial(_),d.push(_)}for(let f=0,p=d.length;f<p;f++)t.associations.set(d[f],{meshes:e,primitives:f});if(1===d.length)return d[0];const h=new Yu;t.associations.set(h,{meshes:e});for(let f=0,p=d.length;f<p;f++)h.add(d[f]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new Wr(VEe.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new q6(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Jh(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],o=[],a=[],l=[];for(let c=0,u=i.channels.length;c<u;c++){const d=i.channels[c],h=i.samplers[d.sampler],f=d.target,m=void 0!==i.parameters?i.parameters[h.input]:h.input,g=void 0!==i.parameters?i.parameters[h.output]:h.output;r.push(this.getDependency("node",f.node)),s.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",g)),a.push(h),l.push(f)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],h=c[2],f=c[3],p=c[4],m=[];for(let _=0,v=u.length;_<v;_++){const y=u[_],b=d[_],x=h[_],M=f[_],R=p[_];if(void 0===y)continue;let w;switch(y.updateMatrix(),Qu[R.path]){case Qu.weights:w=fg;break;case Qu.rotation:w=qh;break;default:w=pg}const E=y.name?y.name:y.uuid,P=void 0!==M.interpolation?cPe[M.interpolation]:p2,Y=[];Qu[R.path]===Qu.weights?y.traverse(function(q){q.morphTargetInfluences&&Y.push(q.name?q.name:q.uuid)}):Y.push(E);let J=x.array;if(x.normalized){const q=vS(J.constructor),I=new Float32Array(J.length);for(let G=0,k=J.length;G<k;G++)I[G]=J[G]*q;J=I}for(let q=0,I=Y.length;q<I;q++){const G=new w(Y[q]+"."+Qu[R.path],b.array,J,P);"CUBICSPLINE"===M.interpolation&&(G.createInterpolant=function(F){return new(this instanceof qh?lPe:b$)(this.times,this.values,this.getValueSize()/3,F)},G.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(G)}}return new mg(i.name?i.name:"animation_"+e,void 0,m)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const i=this.extensions,r=this,s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(l=!0===s.isBone?new RM:a.length>1?new Yu:1===a.length?a[0]:new Kr,l!==a[0])for(let c=0,u=a.length;c<u;c++)l.add(a[c]);if(s.name&&(l.userData.name=s.name,l.name=o),Jh(l,s),s.extensions&&bg(i,l,s),void 0!==s.matrix){const c=new Kt;c.fromArray(s.matrix),l.applyMatrix4(c)}else void 0!==s.translation&&l.position.fromArray(s.translation),void 0!==s.rotation&&l.quaternion.fromArray(s.rotation),void 0!==s.scale&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,i=this.extensions,r=this.json.scenes[e],s=this,o=new Yu;r.name&&(o.name=s.createUniqueName(r.name)),Jh(o,r),r.extensions&&bg(i,o,r);const a=r.nodes||[],l=[];for(let c=0,u=a.length;c<u;c++)l.push(S$(a[c],o,t,s));return Promise.all(l).then(function(){return s.associations=(u=>{const d=new Map;for(const[h,f]of s.associations)(h instanceof Ba||h instanceof Oa)&&d.set(h,f);return u.traverse(h=>{const f=s.associations.get(h);null!=f&&d.set(h,f)}),d})(o),o})}}function S$(n,e,t,i){const r=t.nodes[n];return i.getDependency("node",n).then(function(s){if(void 0===r.skin)return s;let o;return i.getDependency("skin",r.skin).then(function(a){o=a;const l=[];for(let c=0,u=o.joints.length;c<u;c++)l.push(i.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const c=[],u=[];for(let d=0,h=a.length;d<h;d++){const f=a[d];if(f){c.push(f);const p=new Kt;void 0!==o.inverseBindMatrices&&p.fromArray(o.inverseBindMatrices.array,16*d),u.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[d])}l.bind(new t8(c,u),l.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let l=0,c=a.length;l<c;l++)o.push(S$(a[l],s,t,i))}return Promise.all(o)})}function T$(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=gS[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Jh(n,e),function gPe(n,e,t){const i=e.attributes,r=new Ph;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new z(l[0],l[1],l[2]),new z(c[0],c[1],c[2])),a.normalized){const u=vS(yg[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new z,l=new z;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(void 0!==d.POSITION){const h=t.json.accessors[d.POSITION],f=h.min,p=h.max;if(void 0!==f&&void 0!==p){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){const m=vS(yg[h.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new zh;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function dPe(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(void 0!==d.POSITION&&(i=!0),void 0!==d.NORMAL&&(r=!0),void 0!==d.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(i){const h=void 0!==d.POSITION?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(h)}if(r){const h=void 0!==d.NORMAL?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(h)}if(s){const h=void 0!==d.COLOR_0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[1],h=c[2];return i&&(n.morphAttributes.position=c[0]),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}function E$(n,e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}let D$=(()=>{class n{filter(t,i){t.children.forEach(r=>{console.log(r.name,i),r.visible=!!r.name.includes(i)})}lights(t){const s=new Gj(11657727,12155424,.7);t.add(s);const l=new aS(16777215,1);l.position.set(30,30,30),l.target.position.set(0,0,0),l.castShadow=!0,l.shadow.mapSize.width=512,l.shadow.mapSize.height=512,l.shadow.camera.near=.5,l.shadow.camera.far=500,t.add(l.target),t.add(l)}createSimpleMesh(t){const s=new jh;s.moveTo(5,5),s.bezierCurveTo(5,5,4,0,0,0),s.bezierCurveTo(-6,0,-6,7,-6,7),s.bezierCurveTo(-6,11,-3,15.4,5,19),s.bezierCurveTo(12,15.4,16,11,16,7),s.bezierCurveTo(16,7,16,0,10,0),s.bezierCurveTo(7,0,5,5,5,5);const o=new g8(s,{steps:2,depth:16,bevelEnabled:!0,bevelThickness:1,bevelSize:1,bevelOffset:0,bevelSegments:1}),a=new Ks({color:65280});return new Qr(o,a)}import(t,i,r){(new HLe).load("/assets/models/threejstest.glb",o=>{const a=o.scene;a.children.forEach(l=>{l.castShadow=!0,l.receiveShadow=!0}),a.castShadow=!0,a.receiveShadow=!0,a.name=i,t.add(a),r(a)})}basicGround(t){const r=new K0(100,100,1,1),s=new Ks({color:16777215}),o=new Qr(r,s);o.position.set(0,-.5,0),o.rotateX(-Math.PI/2),o.receiveShadow=!0,t.add(o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _Pe=["rendererContainer"];var jt=(()=>(function(n){n.OSB="OSB",n.Insulation="Insulation",n.construction="construction",n.drywall="drywall",n.serviceStuds="serviceStuds",n.tapes="tapes",n.floorBeam="floorBeam"}(jt||(jt={})),jt))();let vPe=(()=>{class n{constructor(t,i,r,s){this.threeService=t,this.houseService=i,this.host=r,this.appService=s,this.resize$=new Fn(void 0),this.renderer=new nj({antialias:!0,alpha:!0}),this.scene=new ij,this.subscriptions=[],this.modelName="wallDetail",this.subModels={},this.showingSubModels={[jt.OSB]:!1,[jt.Insulation]:!1,[jt.construction]:!1,[jt.drywall]:!1,[jt.serviceStuds]:!1,[jt.tapes]:!1,[jt.floorBeam]:!1}}onResize(){const t=this.host.nativeElement.getBoundingClientRect(),i=t.height,r=t.width;this.camera&&(this.camera.aspect=r/i,this.camera.updateProjectionMatrix()),this.renderer.setSize(r,i),this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)}animate(){window.requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}createSceneAndCamera(){this.camera=new Wr(50,1,.1,1e3),this.camera.position.set(0,1.7,10),this.controls=new VLe(this.camera,this.renderer.domElement),this.controls.minDistance=.1,this.controls.maxDistance=50,this.controls.update(),this.scene.background=null,this.renderer.shadowMap.enabled=!0,this.rendererContainer.nativeElement.appendChild(this.renderer.domElement),this.animate()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.observer.unobserve(this.host.nativeElement)}ngAfterViewInit(){this.createSceneAndCamera(),this.observer=new ResizeObserver(t=>this.resize$.next(t)),this.observer.observe(this.host.nativeElement),this.subscriptions.push(this.resize$.subscribe(()=>{this.onResize()}),this.appService.fullscreen$.subscribe(t=>{this.onResize(),this.controls.enableZoom=t}),this.appService.tag$.subscribe(()=>{this.tag=this.appService.tag$.value,this.sectionShowing()}),this.appService.scroll$.subscribe(()=>{const t=this.appService.scroll$.value;this.section!==t.section&&(this.section=t.section,this.sectionShowing())})),this.threeService.basicGround(this.scene),this.threeService.lights(this.scene),this.threeService.import(this.scene,this.modelName,t=>{this.model=t,this.model.children.forEach(i=>{i.userData.position=i.position.clone(),i.material.transparent=!0}),this.setSubModels(),this.sectionShowing(!0),console.log("Complete model:",t)})}setSubModels(){this.subModels[jt.Insulation]=this.model.children.filter(t=>{const i=t.name.toLocaleLowerCase();return i.includes("iso")||i.includes("iso")}),this.subModels[jt.OSB]=this.model.children.filter(t=>t.name.toLocaleLowerCase().includes("g-__")),this.subModels[jt.construction]=this.model.children.filter(t=>{const i=t.name.toLocaleLowerCase();return i.includes("joist")||i.includes("stud")}),this.subModels[jt.drywall]=this.model.children.filter(t=>t.name.toLocaleLowerCase().includes("gips")),this.subModels[jt.serviceStuds]=this.model.children.filter(t=>t.name.toLocaleLowerCase().includes("service"))}sectionShowing(t=!1){!this.model||(console.log(this.section,this.subModels),[ke.constructionFoundation].includes(this.section)&&(this.showingSubModels={[jt.Insulation]:!1,[jt.OSB]:!1,[jt.construction]:!0,[jt.drywall]:!1,[jt.floorBeam]:!1,[jt.serviceStuds]:!1,[jt.tapes]:!1}),[ke.constructionCrawlerSpace].includes(this.section)&&(this.showingSubModels={[jt.Insulation]:!1,[jt.OSB]:!0,[jt.construction]:!0,[jt.drywall]:!1,[jt.floorBeam]:!1,[jt.serviceStuds]:!1,[jt.tapes]:!1}),[ke.facadeDoor].includes(this.section)&&(this.showingSubModels={[jt.Insulation]:!0,[jt.OSB]:!0,[jt.construction]:!0,[jt.drywall]:!1,[jt.floorBeam]:!1,[jt.serviceStuds]:!1,[jt.tapes]:!1}),this.toggleInsulation(),this.toggleOSB(),this.toggleConstruction())}toggleConstruction(){const t=this.subModels[jt.Insulation];if(!t)return;const i=this.showingSubModels[jt.Insulation];t.forEach(r=>{const s=r.material,o=r.userData.position;i?(Eo.to(s,{opacity:1,duration:1,ease:"power1.out"}),console.log(r.position.y,o.y),r.position.y!==o.y&&Eo.fromTo(r.position,{y:r.position.y-3},{y:o.y,duration:1,ease:"power1.out"})):Eo.to(s,{opacity:0,duration:.3,ease:"power1.out"})})}toggleInsulation(){const t=this.subModels[jt.Insulation];if(!t)return;const i=this.showingSubModels[jt.Insulation];t.forEach(r=>{const s=r.material,o=r.userData.position;i?(Eo.to(s,{opacity:1,duration:1,ease:"power1.out"}),console.log(r.position.y,o.y),r.position.y!==o.y&&Eo.fromTo(r.position,{y:r.position.y-3},{y:o.y,duration:1,ease:"power1.out"})):Eo.to(s,{opacity:0,duration:.3,ease:"power1.out"})})}toggleOSB(){const t=this.subModels[jt.OSB],i=this.showingSubModels[jt.OSB];!t||!i||t.forEach(r=>{const s=r.material,o=r.userData.position;s.transparent=!0,console.log(r),i?Eo.fromTo(s,{opacity:1},{opacity:0,duration:.3,ease:"power1.out"}):(Eo.fromTo(s,{opacity:0},{opacity:1,duration:1,ease:"power1.out"}),Eo.fromTo(r.position,{y:o.y-3},{y:o.y,duration:1,ease:"power1.out"}))})}toggleDrywall(){const t=this.subModels[jt.drywall],i=this.showingSubModels[jt.drywall];!t||!i||t.forEach(r=>{const s=r.material,o=r.userData.position;s.transparent=!0,console.log(r),i?Eo.fromTo(s,{opacity:1},{opacity:0,duration:.3,ease:"power1.out"}):(Eo.fromTo(s,{opacity:0},{opacity:1,duration:1,ease:"power1.out"}),Eo.fromTo(r.position,{y:o.y-3},{y:o.y,duration:1,ease:"power1.out"}))})}}return n.\u0275fac=function(t){return new(t||n)(S(D$),S(rr),S(Be),S(Ii))},n.\u0275cmp=dt({type:n,selectors:[["app-three-window"]],viewQuery:function(t,i){if(1&t&&fi(_Pe,5),2&t){let r;kt(r=Lt())&&(i.rendererContainer=r.first)}},decls:2,vars:0,consts:[["rendererContainer",""]],template:function(t,i){1&t&&ne(0,"div",null,0)},styles:["[_nghost-%COMP%]{height:100%;width:100%}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})();const A$={leading:!0,trailing:!1};let xg=(()=>{class n{constructor(t,i,r,s){this.houseService=t,this.appService=i,this.cookieService=r,this.httpClient=s}loadSVG(t,i,r){const s=new xPe(i,r);return s.get(this.httpClient,t),s}}return n.\u0275fac=function(t){return new(t||n)(K(rr),K(Ii),K(e5),K(Qd))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class xPe{constructor(e,t){this.selector=e,this.callback=t}get(e,t){e.get(t,{responseType:"text"}).pipe(Yr(1)).subscribe(i=>{An(this.selector).html(i.replace(/height="\d+px"/gi,'height="0px"').replace(/width="\d+px"/gi,'width="0px"')),this.update()})}update(){this.callback(this.selector)}}const wPe=["svg"];let D8=(()=>{class n{constructor(t,i,r,s,o){this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.stringCache="",this.isChild=!1,this.marginInMeters=[0,0,0,0],this.marginInPixels=[0,0,0,0],this.house$=this.houseService.house$,this.sections=Object.values(ke),this.tags=Object.values(jo),this.resize$=new Fn(void 0),this.subscriptions=[],this.drawingSize=[[0,0],[200,100]],this.loaded=!1}onClick(t){const i=a=>{if(a&&a!==this.svgEl.nativeElement)return"id"in a&&`${a.id}`.length>0?a.id:i(a.parentNode)},r=i(t.target),s=()=>{this.tooltipService.detachOverlay(),document.body.classList.remove("selection-active"),document.querySelectorAll("svg .selected").forEach((a,l)=>{a.classList.remove("selected")})};if(!r)return s();const o=this.house.partsFlatten.find(a=>a.selector===r);if(!o)return console.log(`Couldnt find [${r}] in `,t.target,"probably its only a part of its full ID"),s();document.body.classList.add("selection-active"),o.select(),this.tooltipService.attachPopup([t.pageX,t.pageY],o)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.observer&&this.observer.unobserve(this.host.nativeElement),console.log("destroy",this.graphic),this.houseService.destroyParts()}svgUpdateMarginAndSize(){}setUp(){this.svg=An(this.svgEl.nativeElement),this.g=this.svg.select("g"),this.observer=new ResizeObserver(t=>this.resize$.next(t)),this.observer.observe(this.host.nativeElement),this.resize$.pipe(al(t=>lt(void 0))),this.subscriptions.push(Il(this.appService.fullscreen$.pipe(mi(t=>{t?this.svg.call(function ZMe(){var u,d,h,n=jMe,e=$Me,t=XMe,i=qMe,r=YMe,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=HMe,c=yH("start","zoom","end"),f=500,m=0,g=10;function _(I){I.property("__zoom",iU).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",P).filter(r).on("touchstart.zoom",Y).on("touchmove.zoom",J).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(I,G){return(G=Math.max(s[0],Math.min(s[1],G)))===I.k?I:new fl(G,I.x,I.y)}function y(I,G,k){var F=G[0]-k[0]*I.k,N=G[1]-k[1]*I.k;return F===I.x&&N===I.y?I:new fl(I.k,F,N)}function b(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function x(I,G,k,F){I.on("start.zoom",function(){M(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(F).end()}).tween("zoom",function(){var N=this,V=arguments,$=M(N,V).event(F),te=e.apply(N,V),j=null==k?b(te):"function"==typeof k?k.apply(N,V):k,_e=Math.max(te[1][0]-te[0][0],te[1][1]-te[0][1]),se=N.__zoom,Ee="function"==typeof G?G.apply(N,V):G,ue=l(se.invert(j).concat(_e/se.k),Ee.invert(j).concat(_e/Ee.k));return function(Ie){if(1===Ie)Ie=Ee;else{var Le=ue(Ie),qe=_e/Le[2];Ie=new fl(qe,j[0]-Le[0]*qe,j[1]-Le[1]*qe)}$.zoom(null,Ie)}})}function M(I,G,k){return!k&&I.__zooming||new R(I,G)}function R(I,G){this.that=I,this.args=G,this.active=0,this.sourceEvent=null,this.extent=e.apply(I,G),this.taps=0}function w(I,...G){if(n.apply(this,arguments)){var k=M(this,G).event(I),F=this.__zoom,N=Math.max(s[0],Math.min(s[1],F.k*Math.pow(2,i.apply(this,arguments)))),V=dh(I);if(k.wheel)(k.mouse[0][0]!==V[0]||k.mouse[0][1]!==V[1])&&(k.mouse[1]=F.invert(k.mouse[0]=V)),clearTimeout(k.wheel);else{if(F.k===N)return;k.mouse=[V,F.invert(V)],G_(this),k.start()}C0(I),k.wheel=setTimeout($,150),k.zoom("mouse",t(y(v(F,N),k.mouse[0],k.mouse[1]),k.extent,o))}function $(){k.wheel=null,k.end()}}function E(I,...G){if(!h&&n.apply(this,arguments)){var k=I.currentTarget,F=M(this,G,!0).event(I),N=An(I.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",_e,!0),V=dh(I,k),$=I.clientX,te=I.clientY;FMe(I.view),Yw(I),F.mouse=[V,this.__zoom.invert(V)],G_(this),F.start()}function j(se){if(C0(se),!F.moved){var Ee=se.clientX-$,ue=se.clientY-te;F.moved=Ee*Ee+ue*ue>m}F.event(se).zoom("mouse",t(y(F.that.__zoom,F.mouse[0]=dh(se,k),F.mouse[1]),F.extent,o))}function _e(se){N.on("mousemove.zoom mouseup.zoom",null),NMe(se.view,F.moved),C0(se),F.event(se).end()}}function P(I,...G){if(n.apply(this,arguments)){var k=this.__zoom,F=dh(I.changedTouches?I.changedTouches[0]:I,this),N=k.invert(F),$=t(y(v(k,k.k*(I.shiftKey?.5:2)),F,N),e.apply(this,G),o);C0(I),a>0?An(this).transition().duration(a).call(x,$,F,I):An(this).call(_.transform,$,F,I)}}function Y(I,...G){if(n.apply(this,arguments)){var V,$,te,j,k=I.touches,F=k.length,N=M(this,G,I.changedTouches.length===F).event(I);for(Yw(I),$=0;$<F;++$)j=[j=dh(te=k[$],this),this.__zoom.invert(j),te.identifier],N.touch0?!N.touch1&&N.touch0[2]!==j[2]&&(N.touch1=j,N.taps=0):(N.touch0=j,V=!0,N.taps=1+!!u);u&&(u=clearTimeout(u)),V&&(N.taps<2&&(d=j[0],u=setTimeout(function(){u=null},f)),G_(this),N.start())}}function J(I,...G){if(this.__zooming){var V,$,te,j,k=M(this,G).event(I),F=I.changedTouches,N=F.length;for(C0(I),V=0;V<N;++V)te=dh($=F[V],this),k.touch0&&k.touch0[2]===$.identifier?k.touch0[0]=te:k.touch1&&k.touch1[2]===$.identifier&&(k.touch1[0]=te);if($=k.that.__zoom,k.touch1){var _e=k.touch0[0],se=k.touch0[1],Ee=k.touch1[0],ue=k.touch1[1],Ie=(Ie=Ee[0]-_e[0])*Ie+(Ie=Ee[1]-_e[1])*Ie,Le=(Le=ue[0]-se[0])*Le+(Le=ue[1]-se[1])*Le;$=v($,Math.sqrt(Ie/Le)),te=[(_e[0]+Ee[0])/2,(_e[1]+Ee[1])/2],j=[(se[0]+ue[0])/2,(se[1]+ue[1])/2]}else{if(!k.touch0)return;te=k.touch0[0],j=k.touch0[1]}k.zoom("touch",t(y($,te,j),k.extent,o))}}function q(I,...G){if(this.__zooming){var V,$,k=M(this,G).event(I),F=I.changedTouches,N=F.length;for(Yw(I),h&&clearTimeout(h),h=setTimeout(function(){h=null},f),V=0;V<N;++V)$=F[V],k.touch0&&k.touch0[2]===$.identifier?delete k.touch0:k.touch1&&k.touch1[2]===$.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),2===k.taps&&($=dh($,this),Math.hypot(d[0]-$[0],d[1]-$[1])<g)){var te=An(this).on("dblclick.zoom");te&&te.apply(this,arguments)}}}return _.transform=function(I,G,k,F){var N=I.selection?I.selection():I;N.property("__zoom",iU),I!==N?x(I,G,k,F):N.interrupt().each(function(){M(this,arguments).event(F).start().zoom(null,"function"==typeof G?G.apply(this,arguments):G).end()})},_.scaleBy=function(I,G,k,F){_.scaleTo(I,function(){return this.__zoom.k*("function"==typeof G?G.apply(this,arguments):G)},k,F)},_.scaleTo=function(I,G,k,F){_.transform(I,function(){var N=e.apply(this,arguments),V=this.__zoom,$=null==k?b(N):"function"==typeof k?k.apply(this,arguments):k,te=V.invert($),j="function"==typeof G?G.apply(this,arguments):G;return t(y(v(V,j),$,te),N,o)},k,F)},_.translateBy=function(I,G,k,F){_.transform(I,function(){return t(this.__zoom.translate("function"==typeof G?G.apply(this,arguments):G,"function"==typeof k?k.apply(this,arguments):k),e.apply(this,arguments),o)},null,F)},_.translateTo=function(I,G,k,F,N){_.transform(I,function(){var V=e.apply(this,arguments),$=this.__zoom,te=null==F?b(V):"function"==typeof F?F.apply(this,arguments):F;return t(qw.translate(te[0],te[1]).scale($.k).translate("function"==typeof G?-G.apply(this,arguments):-G,"function"==typeof k?-k.apply(this,arguments):-k),V,o)},F,N)},R.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,G){return this.mouse&&"mouse"!==I&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&"touch"!==I&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&"touch"!==I&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var G=An(this.that).datum();c.call(I,this.that,new GMe(I,{sourceEvent:this.sourceEvent,target:_,type:I,transform:this.that.__zoom,dispatch:c}),G)}},_.wheelDelta=function(I){return arguments.length?(i="function"==typeof I?I:Q_(+I),_):i},_.filter=function(I){return arguments.length?(n="function"==typeof I?I:Q_(!!I),_):n},_.touchable=function(I){return arguments.length?(r="function"==typeof I?I:Q_(!!I),_):r},_.extent=function(I){return arguments.length?(e="function"==typeof I?I:Q_([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),_):e},_.scaleExtent=function(I){return arguments.length?(s[0]=+I[0],s[1]=+I[1],_):[s[0],s[1]]},_.translateExtent=function(I){return arguments.length?(o[0][0]=+I[0][0],o[1][0]=+I[1][0],o[0][1]=+I[0][1],o[1][1]=+I[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(I){return arguments.length?(t=I,_):t},_.duration=function(I){return arguments.length?(a=+I,_):a},_.interpolate=function(I){return arguments.length?(l=I,_):l},_.on=function(){var I=c.on.apply(c,arguments);return I===c?_:I},_.clickDistance=function(I){return arguments.length?(m=(I=+I)*I,_):Math.sqrt(m)},_.tapDistance=function(I){return arguments.length?(g=+I,_):g},_}().on("zoom",i=>{this.setTransform(i.transform,0)})):(this.svg.on(".zoom",null),this.setTransform())})),this.appService.scroll$.pipe(mi(t=>{this.section=this.appService.scroll$.value.section}))).subscribe(t=>{}),Il(this.appService.update$,this.house$).pipe(mi(t=>{const i=this.house$.value;this.house=i,this.cross=i.cross,this.stair=i.stair})).subscribe(t=>{this.updateSVG(!0)}),Il(this.appService.states$,this.appService.svgTransform$.pipe(mi(t=>{if(!this.loaded&&this.graphic in t){const i=t[this.graphic];this.setTransform(new fl(i.k,i.x,i.y))}})),this.resize$.pipe(function bPe(n,e=r5,t=A$){const i=sF(n,e);return function yPe(n,e=A$){return Ei((t,i)=>{const{leading:r,trailing:s}=e;let o=!1,a=null,l=null,c=!1;const u=()=>{l?.unsubscribe(),l=null,s&&(f(),c&&i.complete())},d=()=>{l=null,c&&i.complete()},h=p=>l=xs(n(p)).subscribe(oi(i,u,d)),f=()=>{if(o){o=!1;const p=a;a=null,i.next(p),!c&&h(p)}};t.subscribe(oi(i,p=>{o=!0,a=p,(!l||l.closed)&&(r?f():h(p))},()=>{c=!0,(!(s&&o&&l)||l.closed)&&i.complete()}))})}(()=>i,t)}(10))).pipe($n(t=>void 0!==this.house)).subscribe(t=>{this.updateSVG()})),this.loaded=!0}setTransform(t="translate(0,0) scale(1)",i=1e4){this.loaded&&this.appService.setTransformCookie(t,this.graphic),this.g.attr("transform",t)}updateSVG(t=!1){this.tooltipService.updateOverlay(),this.svgUpdateMarginAndSize();const[[i,r],[s,o]]=this.drawingSize,a=-this.marginInMeters[3]+i,l=-this.marginInMeters[0]+r,c=s+this.marginInMeters[3]+this.marginInMeters[1],u=o+this.marginInMeters[0]+this.marginInMeters[2],d=Math.abs(gt(this.svgEl.nativeElement.clientWidth,0)-this.marginInPixels[1]-this.marginInPixels[3]),h=Math.abs(gt(this.svgEl.nativeElement.clientHeight,0)-this.marginInPixels[0]-this.marginInPixels[2]),f=gt(c/d),p=gt(u/h),m=Math.max(f,p)/this.getScale(),g=this.meterPerPixel!==m;this.meterPerPixel=m;const _=this.marginInPixels.map(b=>gt(b*this.meterPerPixel));this.isChild||this.svg.transition().duration(1e3).attr("viewBox",`\n        ${-_[3]+a} \n        ${-_[0]+l} \n        ${Math.abs(c+(_[3]+_[1]))} \n        ${Math.abs(u+(_[0]+_[2]))}`);const v=[this.appService.floor$.value,this.appService.scroll$.value.section,Object.entries(this.appService.states$.value).filter(([b,x])=>!0===x).map(([b,x])=>b),this.graphic].join("-"),y=this.stringCache!==v||""===this.stringCache;this.stringCache=v,(!1!==t||y||g)&&(this.svgSpecificUpdate(),this.house.redrawHouse(this.appService.floor$.value,this.graphic,this.meterPerPixel,y||t))}svgSpecificUpdate(){}getScale(){const t=/scale\(\d+\.?\d*/g.exec(this.g.attr("transform"));return t?Number(t[0].replace("scale(","").replace(")","")):1}}return n.\u0275fac=function(t){return new(t||n)(S(rr),S(Ii),S(qf),S(Be),S(xg))},n.\u0275cmp=dt({type:n,selectors:[["app-svg-base"]],viewQuery:function(t,i){if(1&t&&fi(wPe,5),2&t){let r;kt(r=Lt())&&(i.svgEl=r.first)}},hostBindings:function(t,i){1&t&&$e("click",function(s){return i.onClick(s)})},inputs:{isChild:"isChild"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();const CPe=["render"];function MPe(n,e){1&n&&(xi(),ne(0,"g",72)),2&n&&kn("id","icon-",e.$implicit,"")}function SPe(n,e){1&n&&(xi(),ne(0,"polyline",73)),2&n&&kn("id","grid-index-",e.index,"")}function TPe(n,e){1&n&&(xi(),ne(0,"polyline",74)),2&n&&kn("id","grid-index-",e.index,"")}function EPe(n,e){1&n&&(xi(),ne(0,"polygon",72)),2&n&&Z("id",e.$implicit)}function DPe(n,e){1&n&&(xi(),C(0,"g",72),ne(1,"polyline",75)(2,"polyline",76)(3,"polygon",77)(4,"circle",78),T()),2&n&&Z("id",e.$implicit)}function APe(n,e){1&n&&(xi(),C(0,"g",72),ne(1,"polygon",79)(2,"path",80),T()),2&n&&Z("id",e.$implicit)}function RPe(n,e){1&n&&(xi(),C(0,"g",72),ne(1,"polygon",81)(2,"path",82),T()),2&n&&Z("id",e.$implicit)}function IPe(n,e){1&n&&(xi(),ne(0,"polyline",83)),2&n&&Ja("id",e.$implicit)}function kPe(n,e){if(1&n&&(xi(),C(0,"g",84),ne(1,"use",85),T()),2&n){const t=e.$implicit;Ja("id",t),H(1),Ja("id",t)}}const R$=function(){return[]};let LPe=(()=>{class n extends D8{constructor(t,i,r,s,o,a){super(t,i,r,s,a),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.httpClient=o,this.d3Service=a,this.marginInMeters=[0,0,0,0],this.marginInPixels=[72,64,64,8],this.gridSizeX$=new Fn(100),this.gridSizeY$=new Fn(100),this.roomKeys=this.houseService.roomKeys,this.doorKeys=this.houseService.doorKeys,this.wallKeys=this.houseService.wallKeys,this.windowKeys=this.houseService.windowKeys,this.sensorKeys=this.houseService.sensorKeys,this.SensorTypes=Object.values(X),this.graphic=Ri.plan,this.transformOrigin=[0,0],this.svgLoaders=[]}svgSpecificUpdate(){!0!==this.appService.fullscreen$.value&&this.g.attr("transform",this.appService.scroll$.value.section===ke.welcome?"transform: scale(0.6) translateX(25%)":"")}ngAfterViewInit(){this.svgLoaders.push(this.d3Service.loadSVG("assets/models/sun.svg",".g-sun",t=>{const i=this.house$.value,r=40*this.meterPerPixel;An(t).selectChild("svg").attr("height",r+"px").attr("width",r+"px").attr("x",i.houseWidth/2+"px").attr("y",i.houseLength+1*i.studDistance+"px")}));for(let t of Object.values(X))this.svgLoaders.push(this.d3Service.loadSVG(`assets/svg/${t}.svg`,`#icon-${t}`,i=>{const s=20*this.meterPerPixel;An(i).selectChild("svg").attr("x",-s/2+"px").attr("y",-s/2+"px").attr("height",s+"px").attr("width",s+"px")}));this.setUp(),this.setStairs(),this.renderImg=this.svg.select(".render-img").attr("xlink:href","/assets/img/top_render.jpg").attr("x",-636).attr("y",-354).attr("width",2).attr("height",2),An("svg")}svgUpdateMarginAndSize(){this.gridSizeX$.next(this.house.gridSizeX),this.gridSizeY$.next(this.house.gridSizeY);const t=3*this.house.studDistance;this.marginInMeters=[t,t,t,t],this.drawingSize=[[0,0],[this.house.houseWidth,this.house.houseLength]],this.scaleRenderImage(),this.scaleStairs(),this.svgLoaders.forEach(i=>i.update())}setStairs(){const t=document.querySelector(".svg-plan-stair-plan").firstChild;this.svg.select(".plan-stair-plan").select(".plan-stair-plan").node().replaceWith(t),t.classList.add("plan-stair-plan")}scaleStairs(){this.svg.select(".plan-stair-plan").attr("transform-origin",`${this.stair.stairOrigin[0]+this.stair.totalWidth/2} ${this.house.stair.stairOrigin[1]+this.stair.totalHeight/2}`)}scaleRenderImage(){const t=[636,394],s=gt(this.house.houseWidth/this.meterPerPixel),o=gt(this.house.houseLength/this.meterPerPixel),a=gt(535/s,5),l=gt(495/o,5),c=Math.max(l,a);!this.renderImg||this.renderImg.attr("x",-t[0]*this.meterPerPixel/c).attr("y",-t[1]*this.meterPerPixel/c).attr("width",1920*this.meterPerPixel/c).attr("height",1080*this.meterPerPixel/c)}}return n.\u0275fac=function(t){return new(t||n)(S(rr),S(Ii),S(qf),S(Be),S(Qd),S(xg))},n.\u0275cmp=dt({type:n,selectors:[["app-svg-plan"]],viewQuery:function(t,i){if(1&t&&fi(CPe,5),2&t){let r;kt(r=Lt())&&(i.renderEl=r.first)}},features:[he],decls:78,vars:11,consts:[["preserveAspectRatio","xMidYMid meet",1,"plan"],["svg",""],["type","text/css"],["id","MyGradient","gradientTransform","rotate(90)"],["offset","-10%",1,"alt-stop"],["offset","30%",1,"alt-stop"],["offset","100%",1,"main-stop"],["id","inset-shadow"],["stdDeviation","0.5","result","offset-blur"],["operator","out","in","SourceGraphic","in2","offset-blur","result","inverse"],["flood-color","black","flood-opacity","1","result","color"],["operator","in","in","color","in2","inverse","result","shadow"],["in","shadow","result","shadow"],["type","linear","slope",".175"],["transform","rotate(0)",1,"all"],[1,"icons",2,"display","none"],[3,"id",4,"ngFor","ngForOf"],[1,"house-stramien"],["clas","house-stramien",1,"house-stramien-in"],["clas","house-stramien","id","house-stramien-in-we-a"],["clas","house-stramien","id","house-stramien-in-we-b"],["clas","house-stramien","id","house-stramien-in-we-c"],["clas","house-stramien","id","house-stramien-in-we-d"],["clas","house-stramien","id","house-stramien-in-ns-a"],["clas","house-stramien","id","house-stramien-in-ns-b"],["clas","house-stramien","id","house-stramien-in-ns-c"],["clas","house-stramien","id","house-stramien-in-ns-d"],["clas","house-stramien",1,"house-stramien-out"],["clas","house-stramien","id","house-stramien-out-we-a"],["clas","house-stramien","id","house-stramien-out-we-b"],["clas","house-stramien","id","house-stramien-out-we-c"],["clas","house-stramien","id","house-stramien-out-we-d"],["clas","house-stramien","id","house-stramien-out-ns-a"],["clas","house-stramien","id","house-stramien-out-ns-b"],["clas","house-stramien","id","house-stramien-out-ns-c"],["clas","house-stramien","id","house-stramien-out-ns-d"],[1,"g-grid"],["class","grid-vertical",3,"id",4,"ngFor","ngForOf"],["class","grid-horizontal",3,"id",4,"ngFor","ngForOf"],[1,"house-wind-rose"],[1,"house-wind-rose-1"],[1,"house-wind-rose-2"],[1,"house-wind-rose-text"],[1,"g-room"],[1,"plan-stair-plan","included-stairs-plan"],[1,"plan-stair-plan"],[1,"g-wall"],[1,"g-door"],[1,"g-window"],[1,"extra"],["id","view-lines"],["id","central-void","filter","url(#inset-shadow)"],["id","tower-walls"],["id","roof-line-1"],["id","roof-line-2"],["id","roof-line-3"],["id","roof-line-4"],["id","roof-line-5"],[1,"house-measure"],["id","house-total-height"],["id","house-total-width"],["id","house-width-1"],["id","house-width-2"],["id","house-width-3"],["id","house-height-1"],["id","house-height-2"],["id","house-height-inner"],["id","house-height-3"],[1,"g-sensor"],["class","sensor-cable",3,"id",4,"ngFor","ngForOf"],["class","sensor-g",3,"id",4,"ngFor","ngForOf"],[1,"g-sun"],[3,"id"],[1,"grid-vertical",3,"id"],[1,"grid-horizontal",3,"id"],[1,"wall-left"],[1,"wall-right"],[1,"wall-fill"],[1,"wall-origin"],[1,"door-wall-opening"],[1,"door-swing"],[1,"window-wall-opening"],[1,"window-pane"],[1,"sensor-cable",3,"id"],[1,"sensor-g",3,"id"],[1,"sensor-icon",3,"id"]],template:function(t,i){1&t&&(xi(),C(0,"svg",0,1)(2,"style",2),D(3," .g-room { fill: url(#MyGradient) } "),T(),C(4,"defs")(5,"linearGradient",3),ne(6,"stop",4)(7,"stop",5)(8,"stop",6),T(),C(9,"filter",7),ne(10,"feGaussianBlur",8)(11,"feComposite",9)(12,"feFlood",10)(13,"feComposite",11),C(14,"feComponentTransfer",12),ne(15,"feFuncA",13),T()()(),C(16,"g",14)(17,"g",15),Ue(18,MPe,1,1,"g",16),T(),C(19,"g",17)(20,"g",18),ne(21,"polyline",19)(22,"polyline",20)(23,"polyline",21)(24,"polyline",22)(25,"polyline",23)(26,"polyline",24)(27,"polyline",25)(28,"polyline",26),T(),C(29,"g",27),ne(30,"polyline",28)(31,"polyline",29)(32,"polyline",30)(33,"polyline",31)(34,"polyline",32)(35,"polyline",33)(36,"polyline",34)(37,"polyline",35),T()(),C(38,"g",36),Ue(39,SPe,1,1,"polyline",37),Ue(40,TPe,1,1,"polyline",38),T(),C(41,"g",39),ne(42,"polygon",40)(43,"polygon",41)(44,"text",42),T(),C(45,"g",43),Ue(46,EPe,1,1,"polygon",16),T(),C(47,"g",44),ne(48,"svg",45),T(),C(49,"g",46),Ue(50,DPe,5,1,"g",16),T(),C(51,"g",47),Ue(52,APe,3,1,"g",16),T(),C(53,"g",48),Ue(54,RPe,3,1,"g",16),T(),C(55,"g",49),ne(56,"polyline",50)(57,"polygon",51)(58,"polygon",52)(59,"polyline",53)(60,"polyline",54)(61,"polyline",55)(62,"polyline",56)(63,"polyline",57),T(),C(64,"g",58),ne(65,"g",59)(66,"g",60)(67,"g",61)(68,"g",62)(69,"g",63)(70,"g",64)(71,"g",65)(72,"g",66)(73,"g",67),T(),C(74,"g",68),Ue(75,IPe,1,1,"polyline",69),Ue(76,kPe,2,2,"g",70),T(),ne(77,"g",71),T()()),2&t&&(H(18),Z("ngForOf",i.SensorTypes),H(21),Z("ngForOf",Id(9,R$).constructor(55)),H(1),Z("ngForOf",Id(10,R$).constructor(55)),H(6),Z("ngForOf",i.roomKeys),H(4),Z("ngForOf",i.wallKeys),H(2),Z("ngForOf",i.doorKeys),H(2),Z("ngForOf",i.windowKeys),H(21),Z("ngForOf",i.sensorKeys),H(1),Z("ngForOf",i.sensorKeys))},dependencies:[au],styles:[".floor-top .included-stairs-plan .floor-clip{clip-path:inherit}  .included-stairs-plan{pointer-events:none}  .sensor-dimmer,   .sensor-pir,   .sensor-vent-out,   .sensor-ethernet,   .sensor-perilex,   .sensor-light-switch{fill:var(--primary-color)}  .sensor-dimmer.sensor-cable,   .sensor-pir.sensor-cable,   .sensor-vent-out.sensor-cable,   .sensor-ethernet.sensor-cable,   .sensor-perilex.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--primary-color)!important}  .sensor-vent-in,   .sensor-camera,   .sensor-poe,   .sensor-socket,   .sensor-light-bulb{fill:var(--accent-color)}  .sensor-vent-in.sensor-cable,   .sensor-camera.sensor-cable,   .sensor-poe.sensor-cable,   .sensor-socket.sensor-cable,   .sensor-light-bulb.sensor-cable{stroke:var(--accent-color)!important}  .sensor-alarm,   .sensor-light-switch{fill:var(--first-color)}  .sensor-alarm.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--first-color)!important}  .sensor-dlc,   .sensor-wifi,   .sensor-blinds{fill:var(--second-color)}  .sensor-dlc.sensor-cable,   .sensor-wifi.sensor-cable,   .sensor-blinds.sensor-cable{stroke:var(--second-color)!important}  .sensor-temperature{fill:var(--third-color)}  .sensor-temperature.sensor-cable{stroke:var(--third-color)!important}  .sensor-smoke{fill:#a80000}  .sensor-smoke.sensor-cable{stroke:#a80000!important}  .selection-active .g-sensor>*:not(.selected){opacity:0!important}  svg.plan{height:100%;width:100%;position:relative}  svg.plan polyline[id^=roof-line-]{fill:none;stroke:var(--primary-color)}  svg.plan .g-sun{transition:.4s;opacity:0}  svg.plan .g-sun g{transform-origin:center;fill:#fdc865}  svg.plan #view-lines{fill:none;stroke:var(--primary-color);opacity:0}  svg.plan .render-img{pointer-events:none;transition:.4s;opacity:0;clip-path:polygon(0% 0%,100% 0%,100% 130%,51.7% 78.7%,51.7% 52.9%,42.4% 36.5%,33.1% 36.5%)}  svg.plan .house-wind-rose{fill:none;transition:.4s,stroke-width 1ms;stroke:#000;stroke-linecap:square}  svg.plan #tower-walls{fill:var(--accent-color);stroke:none;pointer-events:none;opacity:.6}  svg.plan .house-stramien{transition:.4s,stroke-width 1ms;stroke:var(--first-color);stroke-linecap:square}  svg.plan .house-stramien .house-stramien-out{stroke:var(--second-color)}  svg.plan .house-wind-rose{opacity:0}  svg.plan .house-wind-rose .house-wind-rose-text{stroke:none;fill:currentColor}  svg.plan .house-wind-rose .house-wind-rose-1{fill:currentColor}  svg.plan .g-grid .grid-main{stroke:var(--color-50)}  svg.plan .g-grid .grid-sub{stroke:var(--color-10)}  svg.plan .g-grid .grid-subsub{stroke:var(--color-30)}  svg.plan .g-sensor polyline{transition:.5s;fill:none;stroke:#00f}  svg.plan .g-sensor polyline.cable-connection{stroke:#079372}  svg.plan .g-room polygon{stroke:none!important;transition:.4s;fill:var(--color-0)}  svg.plan .g-room polygon:hover{fill:var(--primary-lighter-color)}  svg.plan .g-room polygon.room-hole{box-shadow:inset 3px 5px 2px #0006}  svg.plan .g-room polygon.selected{fill:var(--primary-color)}  svg.plan .g-wall{transition:.4s;opacity:1}  svg.plan .g-wall .selected polygon{fill:var(--primary-color)}  svg.plan .g-wall .selected circle{opacity:1}  svg.plan .g-wall polygon{transition:.5s;fill-rule:nonzero}  svg.plan .g-wall polygon:hover{fill:var(--primary-lighter-color)}  svg.plan .g-wall circle{stroke:none;fill:var(--color-50);opacity:0}  svg.plan .g-wall .type-outer{fill:var(--color-30);stroke:var(--color-60)}  svg.plan .g-wall .type-outer .side-out{stroke:var(--color-60)}  svg.plan .g-wall .side-out{transition:.6s}  svg.plan .g-wall .type-inner{fill:var(--color-20);stroke:#565656}  svg.plan .g-wall .type-theoretic{opacity:1;stroke:#0091b6;stroke-width:3px}  svg.plan .g-wall .wall-fill{stroke:none}  svg.plan .g-door g{transition:opacity .4s}  svg.plan .g-door polygon{transition:.5s;fill:var(--color-0);stroke:none}  svg.plan .g-door path{fill:none;stroke:var(--color-70);stroke-linecap:square}  svg.plan .g-window polygon{transition:.5s;fill:var(--color-20);stroke:var(--color-60)}  svg.plan .g-window path{fill:none;stroke:var(--color-60);stroke-linecap:square}  svg.plan .plan-stair-plan #walk-line,   svg.plan .plan-stair-plan .measure-stair{display:none}  .section-welcome:not(.fullscreen) .render-img{opacity:1!important}  .section-welcome:not(.fullscreen) .g-window g{opacity:0!important}  .section-basics .house-wind-rose,   .section-basics .g-grid{transition:2s;opacity:.7!important}  .section-tower .room-f{transition:2s;fill:var(--primary-color)!important}  .tag-base-dimension #L0-outer-WestWall-3 .side-out,   .tag-base-dimension #L0-outer-NorthWall .side-out,   .tag-base-dimension #L0-outer-SouthWall-2 .side-out,   .tag-base-dimension #L0-outer-EastWall-2 .side-out{transition:.4s;stroke-width:1!important;stroke:var(--primary-color)!important;stroke-linecap:round}  .tag-orientation .main-stop{stop-color:#fdc865}  .tag-orientation .alt-stop{stop-color:var(--color-0)}  .tag-orientation .house-wind-rose{opacity:.7!important}  .tag-orientation #L0-Central{fill:#fdc865!important}  .tag-orientation #L0-West,   .tag-orientation #L0-Central,   .tag-orientation #L0-East{shape-rendering:crispEdges;fill:url(#MyGradient)!important}  .tag-orientation .g-sun{opacity:.7!important}  .tag-orientation .g-sun g{animation:spin-animation 12s infinite}  .tag-insulated .g-wall *:not(.type-inner) polygon{fill:var(--primary-color);stroke:none!important}  .tag-viewlines #view-lines{opacity:.7!important}@keyframes spin-animation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}"]}),n})();function PPe(n,e){1&n&&(xi(),ne(0,"circle",42)),2&n&&kn("id","roof-point-",e.$implicit,"")}const I$=function(n){return{opacity:n}},OPe=function(){return[0,1,2,3,4,5,6,7,8,9,10]};let FPe=(()=>{class n extends D8{constructor(t,i,r,s,o){super(t,i,r,s,o),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.marginInMeters=[3,3,3,3],this.graphic=Ri.cross,this.RoofStyle=js}ngAfterViewInit(){this.loadFigure(),this.setUp()}loadFigure(){this.figure=this.d3Service.loadSVG("assets/models/dude.svg",".g-figure",t=>{let s,o,a;const l=.3913732394366197;[ke.roofBasics].includes(this.section)?(s=this.house$.value.cross.groundFloorTop,o=3*this.house$.value.cross.floorThickness,a=!0):(s=this.house$.value.cross.topFloorTop,o=this.house$.value.cross.innerWidth/2-l/2+.5,a=!1),An(t).selectChild("svg").attr("height","1.9px").attr("y",-s-1.9+"px").attr("x",o+"px").attr("width",l+"px").selectChild("g").attr("transform",a?"translate(117,0) scale(-1 1)":"")})}svgUpdateMarginAndSize(){this.drawingSize=[[0,-this.cross.roofTop],[this.house.outerBase,this.cross.houseHeight]],this.drawBendPoint(),this.figure.update()}drawPoints(){const t=this.cross.getIntersectionWithRoof(this.cross.minimumHeight),i=this.cross.getIntersectionWithRoof(this.cross.minimumHeightRoom),r=this.cross;[...r.innerRoofContourLine,t,i].forEach((s,o)=>{An(`#roof-point-${o}`).attr("cx",s[0]+r.wallOuterThickness).attr("cy",-s[1]).attr("r",o<4?.1:.13).style("fill",o<4?"var(--color-50)":"var(--color-80)").attr("stroke-width",0*this.meterPerPixel)})}drawBendPoint(){An("#bend-point__h-line").attr("points",[[0,-this.cross.roof70Walls],[this.cross.bendPoint[0],-this.cross.roof70Walls],[this.cross.bendPoint[0],this.cross.bendPoint[1]+.1]].join(" ")).attr("stroke-width",2*this.meterPerPixel),An("#bend-point__h-point").attr("cx",this.cross.bendPoint[0]).attr("cy",this.cross.bendPoint[1]).attr("r",.1).attr("stroke-width",2*this.meterPerPixel)}roofCheck(t){return this.section===ke.roof70?t===js.roof70?1:0:this.section===ke.roofCircle?t===js.roofCircle?1:0:[js.roofCircleAnd70,t].includes(this.house$.value.cross.roofStyle)?1:0}}return n.\u0275fac=function(t){return new(t||n)(S(rr),S(Ii),S(qf),S(Be),S(xg))},n.\u0275cmp=dt({type:n,selectors:[["app-svg-cross"]],features:[he],decls:43,vars:8,consts:[["preserveAspectRatio","xMidYMid meet",1,"cross"],["svg",""],["id","clip-roof","d","M130.532,285.709c0,0-17.042,21.134-29.287,14.291c-20.5-11.457-98.902,19.709-98.902,19.709\n    l-5.333,253.333h152.667L130.532,285.709z"],["id","diagonalHatch","patternUnits","userSpaceOnUse","width","4","height","4","patternTransform","scale(0.1)"],["d","M-1,1 l2,-2\n               M0,4 l4,-4\n               M3,5 l2,-2",2,"stroke","black","stroke-width","0.1"],["id","clip-roof2"],[0,"xlink","href","#clip-roof","overflow","visible"],["transform","rotate(0)",1,"all"],[1,"g-figure"],[1,"g-building"],["id","building-walls"],["id","building-room"],["id","building-crawler"],["id","building-ground-line"],["id","building-fill"],["id","building-ground-fill"],["id","building-ground","fill","url(#diagonalHatch)"],[1,"g-roof-circle",3,"ngStyle"],["id","building-roof-circle-wall1"],["id","building-roof-circle-wall2"],["id","roof-circle","clip-path","url(#clip-roof2)"],["id","roof-circle-shadow"],["id","roof-circle-fill"],[1,"g-roof-70",3,"ngStyle"],["id","building-roof-70-wall1"],["id","building-roof-70-wall2"],["id","roof-70","clip-path","url(#clip-roof2)"],["id","roof-70-fill"],["id","roof-70-shadow"],[1,"g-helper"],[3,"id",4,"ngFor","ngForOf"],[1,"g-h-circle-roof"],["id","roof-circle__h-line"],["id","roof-circle__h-circle"],[1,"g-h-bend-point"],["id","bend-point__h-line"],["id","bend-point__h-point"],[1,"cross-measure"],["id","minimum"],["id","minimum-h"],["id","minimum-room"],["id","minimum-room-h"],[3,"id"]],template:function(t,i){1&t&&(xi(),C(0,"svg",0,1)(2,"defs"),ne(3,"polygon",2),C(4,"pattern",3),ne(5,"path",4),T()(),C(6,"clipPath",5),ne(7,"use",6),T(),C(8,"g",7),ne(9,"g",8),C(10,"g",9),ne(11,"polygon",10)(12,"polygon",11)(13,"polygon",12)(14,"polyline",13)(15,"polygon",14)(16,"polygon",15)(17,"polygon",16),T(),C(18,"g",17),ne(19,"polygon",18)(20,"polygon",19)(21,"polygon",20)(22,"polygon",21)(23,"polygon",22),T(),C(24,"g",23),ne(25,"polygon",24)(26,"polygon",25)(27,"polygon",26)(28,"polygon",27)(29,"polygon",28),T(),C(30,"g",29),Ue(31,PPe,1,1,"circle",30),C(32,"g",31),ne(33,"polyline",32)(34,"path",33),T(),C(35,"g",34),ne(36,"polyline",35)(37,"circle",36),T()(),C(38,"g",37),ne(39,"g",38)(40,"g",39)(41,"g",40)(42,"g",41),T()()()),2&t&&(H(18),Z("ngStyle",Gl(3,I$,i.roofCheck(i.RoofStyle.roofCircle))),H(6),Z("ngStyle",Gl(5,I$,i.roofCheck(i.RoofStyle.roof70))),H(7),Z("ngForOf",Id(7,OPe)))},dependencies:[au,Od,t_],styles:["svg.cross{width:100%;height:100%;position:relative}  svg.cross *[id*=-fill]{stroke:none;opacity:0}  svg.cross *[id*=-fill]#building-ground-fill{opacity:1;fill:var(--color-0)}  svg.cross *{transition:fill .4s}  svg.cross .g-roof-circle,   svg.cross .g-roof-70,   svg.cross .g-building{stroke:var(--color-70);fill:var(--color-30)}  svg.cross .g-roof-circle #building-crawler,   svg.cross .g-roof-circle #building-room,   svg.cross .g-roof-70 #building-crawler,   svg.cross .g-roof-70 #building-room,   svg.cross .g-building #building-crawler,   svg.cross .g-building #building-room{fill:var(--color-0)}  svg.cross .g-helper>*{stroke:var(--primary-color)!important;opacity:0;fill:none}  svg.cross .g-helper>*[id^=roof-point-]{opacity:1!important}  .section-roof-basics #building-ground-fill{fill:transparent!important}  .tag-roof-both #roof-70-shadow,   .section-roof-choice #roof-70-shadow{opacity:.6;fill:var(--primary-color)!important}  .tag-roof-both #roof-circle-shadow,   .section-roof-choice #roof-circle-shadow{opacity:1;fill:var(--accent-color)!important}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}  .state-silhouette #building-roof-circle-wall1,   .state-silhouette #building-roof-circle-wall2,   .state-silhouette #building-roof-70-wall1,   .state-silhouette #building-roof-70-wall2,   .state-silhouette *[id*=-fill]:not(#building-ground-fill){fill:var(--color-90)!important;opacity:1!important;stroke:var(--color-90)!important}  .state-silhouette *[id*=-shadow]{stroke:var(--color-90)!important;fill:var(--color-90)!important}"]}),n})();function NPe(n,e){1&n&&(xi(),C(0,"g",15),ne(1,"polygon",16)(2,"polygon",17)(3,"text",18),T()),2&n&&kn("id","step-",e.index,"")}const zPe=function(){return[]};let BPe=(()=>{class n extends D8{constructor(t,i,r,s,o,a){super(t,i,r,s,a),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.httpClient=o,this.d3Service=a,this.graphic=Ri.stairCross,this.floor=ie.all,this.steps=new Fn(1)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){const t=this.stair.totalRise/Math.tan(Math.PI/180*30);[ke.stairCheck,ke.stairPlan].includes(this.section)?this.drawingSize=[[5*this.stair.run,9*-this.stair.rise],[4*this.stair.run,4*this.stair.rise]]:(this.drawingSize=[[-this.stair.run,-this.stair.totalRise],[t,this.stair.totalRise+this.stair.floorThickness]],this.marginInPixels=[40,40,0,0]),this.marginInMeters=[0,2*this.stair.run,0,0],[ke.stairPlan].includes(this.section)?(this.svg.style("opacity",0),this.svg.style("pointer-events","none")):(this.svg.style("pointer-events",""),this.svg.style("opacity",1))}}return n.\u0275fac=function(t){return new(t||n)(S(rr),S(Ii),S(qf),S(Be),S(Qd),S(xg))},n.\u0275cmp=dt({type:n,selectors:[["app-svg-stair-steps"]],features:[he],decls:16,vars:2,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-step"],["svg",""],[1,"g-building"],["id","floor-groundfloor"],["id","floor-topfloor-shadow"],["id","floor-topfloor"],[1,"g-step"],[3,"id",4,"ngFor","ngForOf"],[1,"g-helper"],["id","nose-line"],["id","back-line"],["id","run-size",1,"measure"],["id","rise-size",1,"measure"],["id","total-run-size",1,"measure"],["id","total-rise-size",1,"measure"],[3,"id"],[1,"step-run"],[1,"step-rise"],[1,"step-text"]],template:function(t,i){1&t&&(xi(),C(0,"svg",0,1)(2,"g")(3,"g",2),ne(4,"polygon",3)(5,"polygon",4)(6,"polygon",5),T(),C(7,"g",6),Ue(8,NPe,4,1,"g",7),T(),C(9,"g",8),ne(10,"path",9)(11,"path",10)(12,"g",11)(13,"g",12)(14,"g",13)(15,"g",14),T()()()),2&t&&(H(8),Z("ngForOf",Id(1,zPe).constructor(25)))},dependencies:[au],styles:["svg.stairs-step{width:100%;height:100%;position:relative;transition:.2s}  svg.stairs-step .g-helper,   svg.stairs-step .g-building,   svg.stairs-step .g-step{fill:var(--color-80);transition:.4s,stroke-width 1ms;stroke:var(--color-100)}  svg.stairs-step .g-step{fill:var(--color-100);stroke:none}  svg.stairs-step .g-step text{transition:.4s;opacity:0}  svg.stairs-step #back-line,   svg.stairs-step #nose-line{stroke:var(--color-30)}  svg.stairs-step .g-building{stroke:none;fill:var(--color-20)}  svg.stairs-step .g-building #floor-topfloor-shadow{fill:var(--color-5)}  svg.stairs-step .measure text{stroke:var(--color-0);paint-order:stroke}  svg.stairs-step .measure#rise-size,   svg.stairs-step .measure#run-size{transition:.4s 0s;opacity:0}  .section-stair-check #rise-size,   .section-stair-check #run-size{transition:.4s .6s!important;opacity:1!important}  .tag-amount-steps text{opacity:1!important}  .tag-amount-steps .measure{opacity:0}"]}),n})();function VPe(n,e){1&n&&(xi(),ne(0,"circle",17)),2&n&&kn("id","walk-line-",e.index,"")}function HPe(n,e){if(1&n&&(xi(),C(0,"g",18),ne(1,"polygon",19)(2,"polyline",20)(3,"text",21)(4,"circle",22),T()),2&n){const t=e.index;kn("id","step-plan-",t,""),H(4),kn("id","step-stinger-",t,"")}}function UPe(n,e){1&n&&(xi(),C(0,"g",23),ne(1,"g",24)(2,"g",25)(3,"g",26)(4,"g",27)(5,"g",28),T())}const k$=function(){return[]};function GPe(n,e){if(1&n&&(xi(),C(0,"g",9)(1,"g",10),ne(2,"path",11),Ue(3,VPe,1,1,"circle",12),T(),ne(4,"polygon",13),C(5,"g",14),Ue(6,HPe,5,2,"g",15),T(),Ue(7,UPe,6,0,"g",16),T()),2&n){const t=et();H(3),Z("ngForOf",Id(3,k$).constructor(25)),H(3),Z("ngForOf",Id(4,k$).constructor(25)),H(1),Z("ngIf",!t.isChild)}}let WPe=(()=>{class n extends D8{constructor(t,i,r,s,o){super(t,i,r,s,o),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.graphic=Ri.stairPlan,this.floor=ie.all,this.marginInMeters=[0,0,0,0],this.marginInPixels=[64,64,0,0],this.steps=new Fn(25)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){this.drawingSize=[this.stair.stairOrigin,[this.stair.totalWidth,this.stair.totalHeight]],this.marginInMeters=[2*this.stair.run,2*this.stair.run,2*this.stair.run,2*this.stair.run],[ke.stairStart,ke.stairBasic,ke.stairCheck].includes(this.section)?(this.svg.style("opacity",0),this.svg.style("pointer-events","none")):(this.svg.style("pointer-events",""),this.svg.style("opacity",1))}}return n.\u0275fac=function(t){return new(t||n)(S(rr),S(Ii),S(qf),S(Be),S(xg))},n.\u0275cmp=dt({type:n,selectors:[["app-svg-stair-plan"]],features:[he],decls:11,vars:3,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-plan"],["svg",""],["id","clip-roof-ref"],["id","clip-ground-floor-ref"],["id","clip-roof"],[0,"xlink","href","#clip-roof-ref","overflow","visible"],["id","clip-ground-floor"],[0,"xlink","href","#clip-ground-floor-ref","overflow","visible"],["class","floor-clip","clip-path","url(#clip-ground-floor)",4,"ngIf"],["clip-path","url(#clip-ground-floor)",1,"floor-clip"],[1,"g-walk-line"],["id","walk-line"],["class","walk-line-dot",3,"id",4,"ngFor","ngForOf"],["id","outline",1,"outline"],[1,"g-step-plan"],[3,"id",4,"ngFor","ngForOf"],["class","measure-stair",4,"ngIf"],[1,"walk-line-dot",3,"id"],[3,"id"],[1,"step-plan-lines"],[1,"step-plan-rise"],[1,"step-plan-text"],[1,"step-stinger",3,"id"],[1,"measure-stair"],["id","plateau-width"],["id","mid-width"],["id","total-width"],["id","total-height"],["id","lesser-height"]],template:function(t,i){1&t&&(xi(),C(0,"svg",0,1)(2,"defs"),ne(3,"polygon",2)(4,"polygon",3),T(),C(5,"clipPath",4),ne(6,"use",5),T(),C(7,"clipPath",6),ne(8,"use",7),T(),Ue(9,GPe,8,5,"g",8),Fr(10,"async"),T()),2&t&&(H(9),Z("ngIf",Nr(10,1,i.house$)))},dependencies:[au,Go,uf],styles:["[_nghost-%COMP%]     .floor-clip{clip-path:inherit}  svg.stairs-plan{width:100%;height:100%;position:relative;transition:.4s}  svg.stairs-plan .left-corner-line,   svg.stairs-plan .right-corner-line,   svg.stairs-plan .middleLine{stroke:var(--primary-color)}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .outline,   svg.stairs-plan .step-plan-lines{fill:none;stroke:var(--color-50)}  svg.stairs-plan .outline{stroke:var(--color-10)}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .step-stinger,   svg.stairs-plan .walk-line-dot,   svg.stairs-plan .walk-line,   svg.stairs-plan .step-plan-text{display:none}  .section-stair-plan .step-plan-rise,   .section-stair-plan .step-stinger,   .section-stair-plan .walk-line-dot,   .section-stair-plan .walk-line,   .section-stair-plan .step-plan-text{display:initial!important}  .section-stair-plan .walk-line-dot{opacity:0;fill:var(--first-color)}  .section-stair-plan #walk-line{fill:none;transition:0s;opacity:0;stroke:var(--first-color)}  .section-stair-plan .step-stinger{opacity:0;fill:var(--third-color)}  .section-stair-plan .step-plan-text{display:initial}  .section-stair-plan .step-plan-rise{stroke-dasharray:1%}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}  .state-walkLine .walk-line-dot,   .state-walkLine .step-stinger,   .state-walkLine #walk-line{opacity:1}"]}),n})(),L$=(()=>{class n{constructor(t,i){this.httpClient=t,this.sanitizer=i,this.height="32px",this.width="32px"}set color(t){this.fillColor="primary"===t?"var(--primary-color)":"accent"===t?"var(--accent-color)":"first"===t?"var(--first-color)":"second"===t?"var(--second-color)":"third"===t?"var(--third-color)":`${t}`}set size(t){this.width=`${t[0]}px`,this.height=`${t[1]}px`}ngOnInit(){this.httpClient.get(this.url,{responseType:"text"}).subscribe({next:t=>{t=t.replace(/height=\"64px\"/gi,"").replace(/width=\"64px\"/gi,""),this.svgData=this.sanitizer.bypassSecurityTrustHtml(t)},error:t=>{this.background="#aaa"}})}}return n.\u0275fac=function(t){return new(t||n)(S(Qd),S(hf))},n.\u0275cmp=dt({type:n,selectors:[["app-svg"]],hostVars:8,hostBindings:function(t,i){2&t&&qr("background",i.background)("fill",i.fillColor)("height",i.height)("width",i.width)},inputs:{background:"background",fillColor:"fillColor",height:"height",width:"width",url:"url",color:"color",size:"size"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(t,i){1&t&&ne(0,"div",0),2&t&&Z("innerHTML",i.svgData,xd)},styles:["[_nghost-%COMP%]{display:inline-block}  svg>g>g>path:first-child{fill:#747474}"]}),n})();function jPe(n,e){if(1&n){const t=is();zi(0),C(1,"button",7),$e("click",function(){Xt(t);const r=et(5);return Zt(r.appService.setState(r.States.doors))}),C(2,"label"),D(3," Doors "),T(),C(4,"mat-icon",8),D(5," door_front"),T()(),C(6,"button",7),$e("click",function(){Xt(t);const r=et(5);return Zt(r.appService.setState(r.States.theoreticalWalls))}),C(7,"label"),D(8," Theoretic walls "),T(),C(9,"mat-icon",8),D(10,"density_large"),T()(),C(11,"button",7),$e("click",function(){Xt(t);const r=et(5);return Zt(r.appService.setState(r.States.grid))}),C(12,"label"),D(13," Grid "),T(),C(14,"mat-icon",8),D(15,"grid_on"),T()(),C(16,"button",7),$e("click",function(){Xt(t);const r=et(5);return Zt(r.appService.setState(r.States.stramien))}),C(17,"label"),D(18," Stramien "),T(),C(19,"mat-icon",8),D(20,"grid_3x3"),T()(),C(21,"button",7),$e("click",function(){Xt(t);const r=et(5);return Zt(r.appService.setState(r.States.towerFootprint))}),C(22,"label"),D(23," Tower footprint "),T(),C(24,"mat-icon",8),D(25,"hexagon"),T()(),C(26,"button",7),$e("click",function(){Xt(t);const r=et(5);return Zt(r.appService.setState(r.States.measure))}),C(27,"label"),D(28," Measurements "),T(),C(29,"mat-icon",8),D(30,"square_foot"),T()(),Bi()}if(2&n){const t=et(5);H(1),Nt("active",t.checkState(t.States.doors)),H(5),Nt("active",t.checkState(t.States.theoreticalWalls)),H(5),Nt("active",t.checkState(t.States.grid)),H(5),Nt("active",t.checkState(t.States.stramien)),H(5),Nt("active",t.checkState(t.States.towerFootprint)),H(5),Nt("active",t.checkState(t.States.measure))}}function $Pe(n,e){if(1&n){const t=is();zi(0),C(1,"button",10),$e("click",function(){const s=Xt(t).$implicit;return Zt(et(6).appService.setState(s.state))}),C(2,"label",11),D(3),T(),ne(4,"app-svg",12),T(),Bi()}if(2&n){const t=e.$implicit,i=et(6);H(1),Nt("active",i.checkState(t.state)),H(2),vt(" ",t.title," "),H(1),tr("sensor-",t.state,""),kn("url","assets/svg/",t.state,".svg")}}function qPe(n,e){if(1&n&&(zi(0),Ue(1,$Pe,5,7,"ng-container",9),Bi()),2&n){const t=et(5);H(1),Z("ngForOf",t.sensors)}}function YPe(n,e){if(1&n&&(C(0,"div",6),Ue(1,jPe,31,12,"ng-container",0),Fr(2,"async"),Fr(3,"async"),Ue(4,qPe,2,1,"ng-container",0),Fr(5,"async"),T()),2&n){const t=et(4);H(1),Z("ngIf",Nr(2,2,t.page$).startsWith("house")||Nr(3,4,t.page$).startsWith("?")),H(3),Z("ngIf",Nr(5,6,t.page$).startsWith("wired"))}}function XPe(n,e){1&n&&(C(0,"mat-icon"),D(1,"exposure_plus_1"),T())}function ZPe(n,e){1&n&&(C(0,"mat-icon"),D(1,"exposure_zero"),T())}function KPe(n,e){if(1&n){const t=is();C(0,"button",3),$e("click",function(){return Xt(t),Zt(et(4).setFloor())}),Ue(1,XPe,2,0,"mat-icon",0),Ue(2,ZPe,2,0,"mat-icon",0),T()}if(2&n){const t=e.ngIf,i=et(4);H(1),Z("ngIf",t===i.Floor.top),H(1),Z("ngIf",t===i.Floor.ground)}}function QPe(n,e){if(1&n){const t=is();zi(0),Ue(1,YPe,6,8,"div",4),C(2,"button",3),$e("click",function(){Xt(t);const r=et(3);return Zt(r.extra=!r.extra)}),C(3,"mat-icon"),D(4,"keyboard_double_arrow_down "),T()(),Ue(5,KPe,3,2,"button",5),Fr(6,"async"),Bi()}if(2&n){const t=et(3);H(1),Z("ngIf",t.extra),H(1),Nt("active",t.extra),H(1),Yp("transform","rotate(",t.extra?20:180,"deg)"),qr("transition","0.4s"),H(2),Z("ngIf",Nr(6,9,t.floor$))}}function JPe(n,e){1&n&&(C(0,"mat-icon"),D(1,"home"),T())}function eOe(n,e){1&n&&(C(0,"mat-icon",8),D(1,"home_outline"),T())}function tOe(n,e){if(1&n){const t=is();C(0,"div",14)(1,"button",7),$e("click",function(){Xt(t);const r=et(4);return Zt(r.appService.setState(r.States.measure))}),C(2,"label"),D(3," Measurements "),T(),C(4,"mat-icon"),D(5,"square_foot"),T()(),C(6,"button",7),$e("click",function(){Xt(t);const r=et(4);return Zt(r.appService.setState(r.States.silhouette))}),C(7,"label"),D(8," Silhouette "),T(),Ue(9,JPe,2,0,"mat-icon",15),Ue(10,eOe,2,0,"ng-template",null,16,nl),T()()}if(2&n){const t=hi(11),i=et(4);H(1),Nt("active",i.checkState(i.States.measure)),H(5),Nt("active",i.checkState(i.States.silhouette)),H(3),Z("ngIf",!i.checkState(i.States.silhouette))("ngIfElse",t)}}function nOe(n,e){if(1&n){const t=is();zi(0),Ue(1,tOe,12,6,"div",13),C(2,"button",3),$e("click",function(){Xt(t);const r=et(3);return Zt(r.extra=!r.extra)}),C(3,"mat-icon"),D(4," keyboard_double_arrow_down "),T()(),Bi()}if(2&n){const t=et(3);H(1),Z("ngIf",t.extra),H(1),Nt("active",t.extra),H(1),Yp("transform","rotate(",t.extra?-20:-180,"deg)"),qr("transition","0.4s")}}function iOe(n,e){if(1&n){const t=is();C(0,"div",14)(1,"button",7),$e("click",function(){Xt(t);const r=et(4);return Zt(r.appService.setState(r.States.walkLine))}),C(2,"label"),D(3," Walk line "),T(),C(4,"mat-icon"),D(5,"directions_walk"),T()(),C(6,"button",7),$e("click",function(){Xt(t);const r=et(4);return Zt(r.appService.setState(r.States.measure))}),C(7,"label"),D(8," Measurements "),T(),C(9,"mat-icon"),D(10,"square_foot"),T()()()}if(2&n){const t=et(4);H(1),Nt("active",t.checkState(t.States.walkLine)),H(5),Nt("active",t.checkState(t.States.measure))}}function rOe(n,e){if(1&n){const t=is();zi(0),Ue(1,iOe,11,4,"div",13),C(2,"button",3),$e("click",function(){Xt(t);const r=et(3);return Zt(r.extra=!r.extra)}),C(3,"mat-icon"),D(4," keyboard_double_arrow_down "),T()(),Bi()}if(2&n){const t=et(3);H(1),Z("ngIf",t.extra),H(1),Nt("active",t.extra),H(1),Yp("transform","rotate(",t.extra?-20:-180,"deg)"),qr("transition","0.4s")}}function sOe(n,e){1&n&&(C(0,"mat-icon"),D(1,"fullscreen"),T())}function oOe(n,e){1&n&&(C(0,"mat-icon"),D(1,"fullscreen_exit"),T())}const aOe=function(n,e){return[n,e]};function lOe(n,e){if(1&n){const t=is();C(0,"div",2),Ue(1,QPe,7,11,"ng-container",0),Ue(2,nOe,5,8,"ng-container",0),Ue(3,rOe,5,8,"ng-container",0),C(4,"button",3),$e("click",function(){Xt(t);const r=et(2);return Zt(r.fullscreen=!r.fullscreen)}),Ue(5,sOe,2,0,"mat-icon",0),Ue(6,oOe,2,0,"mat-icon",0),T()()}if(2&n){const t=et().ngIf,i=et();tr("container\nsection-",t.section,""),H(1),Z("ngIf",t.graphic===i.Graphic.plan),H(1),Z("ngIf",t.graphic===i.Graphic.cross),H(1),Z("ngIf",II(8,aOe,i.Graphic.stairCross,i.Graphic.stairPlan).includes(t.graphic)),H(2),Z("ngIf",!i.fullscreen),H(1),Z("ngIf",i.fullscreen)}}function cOe(n,e){if(1&n&&(zi(0),Ue(1,lOe,7,11,"div",1),Fr(2,"async"),Bi()),2&n){const t=et();H(1),Z("ngIf",Nr(2,1,t.states$))}}let uOe=(()=>{class n{constructor(t,i,r,s,o){this.appService=t,this.elementRef=i,this.houseService=r,this.cookieService=s,this.router=o,this.house$=this.houseService.house$,this.Floor=ie,this.floor$=this.appService.floor$,this.scroll$=this.appService.scroll$,this.states$=this.appService.states$,this.setFloor=()=>this.appService.setFloor(),this.Graphic=Ri,this.States=ss,this.page$=this.appService.page$,this.sensors=Object.values(X).map(a=>({state:a,title:a})),this.extra=!0}get fullscreen(){return this.appService.fullscreen$.value}set fullscreen(t){this.cookieService.set("fullscreen",`${t}`),this.appService.fullscreen$.next(t)}ngOnInit(){}checkState(t){return!0===this.states$.value[t]}}return n.\u0275fac=function(t){return new(t||n)(S(Ii),S(Be),S(rr),S(e5),S(pr))},n.\u0275cmp=dt({type:n,selectors:[["controls"]],decls:2,vars:3,consts:[[4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",3,"class",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px"],["mat-mini-fab","","color","accent",3,"click"],["class","sub-controls","fxLayout","column","fxLayoutAlign","end end","fxLayoutGap","8px",4,"ngIf"],["mat-mini-fab","","color","accent",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end end","fxLayoutGap","8px",1,"sub-controls"],["mat-mini-fab","",3,"click"],[2,"font-family","Material Icons Outlined"],[4,"ngFor","ngForOf"],["mat-mini-fab","",1,"sensor-button",2,"height","12px","width","12px",3,"click"],[1,"sensor-label"],["height","12px","width","12px",3,"url"],["class","sub-controls","fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",1,"sub-controls"],[4,"ngIf","ngIfElse"],["elseGrey",""]],template:function(t,i){1&t&&(Ue(0,cOe,3,3,"ng-container",0),Fr(1,"async")),2&t&&Z("ngIf",Nr(1,1,i.scroll$))},dependencies:[au,Go,G5,Kx,Ef,Nm,Df,L$,uf],styles:["[_nghost-%COMP%]{display:block;position:fixed;bottom:0;z-index:9999}.controls-left[_nghost-%COMP%]{left:50px}.controls-left[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{left:-24px;bottom:8px;position:relative}.controls-left[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:left;left:50px;color:var(--color-100);cursor:pointer}.controls-right[_nghost-%COMP%]{right:50px}.controls-right[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{right:-24px;bottom:8px;position:relative}.controls-right[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:right;right:50px;color:var(--color-100);opacity:1}[_nghost-%COMP%]     .sensor-button{right:0}[_nghost-%COMP%]     .sensor-button svg{position:absolute;top:0;right:0}[_nghost-%COMP%]     .sensor-label{right:15px!important;top:6px;line-height:0}.active[_ngcontent-%COMP%]{background-color:var(--accent-50)!important;box-shadow:0 0 #0003,0 0 #00000024,0 0 #000!important;color:#1b1b1b!important}.active[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{opacity:.4}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px 8px 16px}"],data:{animation:[uU]}}),n})();function dOe(n,e){1&n&&ne(0,"controls",10),2&n&&Z("@slideInOut",void 0)}function hOe(n,e){1&n&&ne(0,"controls",11),2&n&&Z("@slideInOut",void 0)}function fOe(n,e){1&n&&ne(0,"app-svg-cross",15)}function pOe(n,e){1&n&&(zi(0),ne(1,"app-svg-stair-plan",16)(2,"app-svg-plan",17),Bi()),2&n&&(H(1),Z("isChild",!0))}function mOe(n,e){1&n&&(zi(0),ne(1,"app-three-window"),Bi())}function gOe(n,e){1&n&&(zi(0),ne(1,"app-svg-stair-plan",18),Bi())}function _Oe(n,e){1&n&&(zi(0),ne(1,"app-svg-stair-steps",19),Bi())}function vOe(n,e){if(1&n&&(zi(0),C(1,"div",12),Ue(2,fOe,1,0,"app-svg-cross",13),T(),C(3,"div",14),Ue(4,pOe,3,1,"ng-container",8),Ue(5,mOe,2,0,"ng-container",8),Ue(6,gOe,2,0,"ng-container",8),Ue(7,_Oe,2,0,"ng-container",8),T(),Bi()),2&n){const t=e.ngIf,i=et();H(2),Z("ngIf",t===i.Graphic.cross),H(2),Z("ngIf",t===i.Graphic.plan),H(1),Z("ngIf",t===i.Graphic.window),H(1),Z("ngIf",t===i.Graphic.stairPlan),H(1),Z("ngIf",t===i.Graphic.stairCross)}}const yOe=function(n){return{top:n}};let bOe=(()=>{class n{constructor(t,i,r,s,o,a){this.appService=t,this.tooltipService=i,this.houseService=r,this.router=s,this.activatedRoute=o,this.stateService=a,this.sections=Object.keys(ke),this.Tag=jo,this.GraphicSide=Bd,this.Graphic=Ri,this.sectionScroll={},this.goalLine=.4,this.popupActive$=this.appService.popupActive$,this.fullscreen$=this.appService.fullscreen$,this.scroll$=this.appService.scroll$,this.floor$=this.appService.floor$,this.tag$=this.appService.tag$,this.states$=this.appService.states$,this.page$=this.appService.page$,this.cssStates$=this.states$.pipe(It(l=>Object.entries(l).filter(([c,u])=>!0===u).map(([c,u])=>`state-${c}`).join(" "))),this.loaded=!1,Mf(window,"scroll").subscribe(l=>{this.calcSection()})}ngAfterViewInit(){this.router.events.pipe($n(t=>t instanceof Zl)).subscribe(t=>{setTimeout(()=>{this.setup()},0)}),this.setup()}setup(){this.sectionEls=document.querySelectorAll("section"),this.sectionScroll={},this.sectionEls.forEach(r=>{const s=r.id;this.sectionScroll[s]={id:s,top:r.offsetTop}}),this.calcSection();const i=this.activatedRoute.snapshot.params.tag;i&&this.tag$.next(i),this.loaded=!0}calcSection(){this.section=this.getSection(),void 0===this.section?(this.graphic=Ri.none,this.graphicSide=Bd.none):(this.graphic=this.setGraphic(this.section),this.graphicSide=this.getSide(),document.querySelector(`section#${this.section}`).classList.add("section-active")),this.appService.scroll$.next({scroll:gt(window.pageYOffset,0),percentage:this.getVerticalScrollPercentage(document.body),section:this.section,graphicSide:this.graphicSide,graphic:this.graphic}),this.stateService.updateStateBasedOnSection(this.section,this.loaded),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{section:this.section},replaceUrl:!0,queryParamsHandling:"merge"})}getVerticalScrollPercentage(t){var i=t.parentNode;return gt((t.scrollTop||i.scrollTop)/(i.scrollHeight-i.clientHeight))}setGraphic(t){let i=Ri.none;return[ke.welcome,ke.passiv,ke.basics,ke.extensions,ke.tower,ke.wiredWelcome,ke.wiredPower,ke.wiredEthernet,ke.wiredExtra,ke.wiredLight,ke.wiredSafety,ke.wiredVent].includes(t)&&(i=Ri.plan),[ke.roof70,ke.roofBasics,ke.roofChoice,ke.roofCircle,ke.roofEdge,ke.roofIntermezzo].includes(t)&&(i=Ri.cross,[ke.roof70].includes(t)&&this.houseService.update("cross","viewedRoofStyle",js.roof70),[ke.roofBasics,ke.roofCircle].includes(t)&&this.houseService.update("cross","viewedRoofStyle",js.roofCircle)),[ke.stairStart,ke.stairBasic,ke.stairCheck,ke.stairPlan].includes(t)&&(i=Ri.stairCross),[ke.stairPlan].includes(t)&&(i=Ri.stairPlan),[ke.facadeStart,ke.facadeWindow,ke.facadeDoor].includes(t)&&(i=Ri.none),[ke.constructionWelcome,ke.constructionCrawlerSpace,ke.constructionFloor,ke.constructionFoundation,ke.constructionRoof,ke.constructionWall,ke.constructionWallFinish].includes(t)&&(i=Ri.window),[ke.installationDrinkWater,ke.installationElectricity,ke.installationGreyWater,ke.installationHeating,ke.installationSmartHome,ke.installationVentilation].includes(t)&&(i=Ri.none),this.graphic!==i&&(console.log("Swap side!"),this.tooltipService.detachOverlay()),this.graphic=i,i}getSection(){var t=gt(window.innerHeight*this.goalLine,0),r=gt(window.pageYOffset,0)+t;this.sectionEls.forEach(o=>{const a=o.id;this.sectionScroll[a].past=this.sectionScroll[a].top<r,o.classList.remove("section-active")});const s=Object.values(this.sectionScroll).filter(o=>o.past).sort((o,a)=>a.top-o.top);return s&&s[0]?s[0].id:void 0}getSide(){return[Ri.cross].includes(this.graphic)?Bd.left:Bd.right}}return n.\u0275fac=function(t){return new(t||n)(S(Ii),S(qf),S(rr),S(pr),S(fu),S(pSe))},n.\u0275cmp=dt({type:n,selectors:[["app-main-page"]],decls:21,vars:31,consts:[[1,"page"],[1,"left-blinder","bg"],[1,"left-flex"],[1,"center"],[1,"right-flex"],[1,"right-blinder","bg"],["class","controls controls-left",4,"ngIf"],["class","controls controls-right",4,"ngIf"],[4,"ngIf"],[1,"goal-marker",3,"ngStyle"],[1,"controls","controls-left"],[1,"controls","controls-right"],[1,"floating","floating-left"],["class","svg-cross",4,"ngIf"],[1,"floating","floating-right"],[1,"svg-cross"],["fxFlex","0 0 0",1,"svg-plan-stair-plan",3,"isChild"],[1,"svg-plan"],[1,"svg-stair-plan"],[1,"svg-stair-steps"]],template:function(t,i){1&t&&(C(0,"div",0)(1,"div"),Fr(2,"async"),Fr(3,"async"),Fr(4,"async"),Fr(5,"async"),Fr(6,"async"),Fr(7,"async"),Fr(8,"async"),ne(9,"div",1),C(10,"main"),ne(11,"div",2),C(12,"div",3),ne(13,"router-outlet"),T(),ne(14,"div",4),T(),ne(15,"div",5),Ue(16,dOe,1,1,"controls",6),Ue(17,hOe,1,1,"controls",7),Ue(18,vOe,8,5,"ng-container",8),Fr(19,"async"),T()(),ne(20,"div",9)),2&t&&(H(1),function BR(n,e,t,i,r,s,o,a,l,c,u,d,h,f,p){va(co,tl,J1(Se(),n,e,t,i,r,s,o,a,l,c,u,d,h,f,p),!0)}("container \n  tag-",Nr(2,13,i.tag$)," \n  floor-",Nr(3,15,i.floor$)," \n  section-",Nr(4,17,i.scroll$).section," \n  show-",Nr(5,19,i.scroll$).graphicSide," \n  ",Nr(6,21,i.popupActive$)?"popup-active":""," \n  ",Nr(7,23,i.fullscreen$)?"fullscreen":"","\n  ",Nr(8,25,i.cssStates$)," \n  "),H(15),Z("ngIf",i.graphicSide===i.GraphicSide.left),H(1),Z("ngIf",i.graphicSide===i.GraphicSide.right),H(1),Z("ngIf",Nr(19,27,i.scroll$).graphic),H(2),Z("ngStyle",Gl(29,yOe,100*i.goalLine+"vh")))},dependencies:[Go,Od,bb,t_,U4,vPe,LPe,FPe,BPe,WPe,uOe,uf],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.page[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]{justify-content:center;display:flex;flex-direction:row;flex:1 1 100vw}.container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{max-width:800px;justify-content:center;display:flex;flex-direction:row;flex:10 1 800px}.container[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{transition:.6s}.container.show-left[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:1 1 100vw}.container.show-left[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container.show-right[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:1 1 0vw}.container.show-right[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%]{flex:1 1 100vw}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:1 1 100vw;border-left:0vw solid transparent;border-right:0vw solid transparent;max-width:450px;overflow-x:hidden;z-index:2;margin:0 46px}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{display:block;height:100%;width:0vw;position:absolute;z-index:5;transition:.8s ease-in;opacity:.8}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%]{left:0}.container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{right:0}.container.fullscreen.show-left[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container.fullscreen.show-right[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{transition:.6s ease-out;width:100vw;opacity:1}.container.fullscreen[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]{max-width:100vw!important}.container.fullscreen[_ngcontent-%COMP%]     g.all{transition:none!important}.floating[_ngcontent-%COMP%]{top:0;height:100vh;position:fixed;max-width:100vh;display:flex;flex-direction:column;justify-content:center;z-index:500;transition:1s}.floating.floating-right[_ngcontent-%COMP%]{left:50vw;width:50vw}.floating.floating-left[_ngcontent-%COMP%]{right:50vw;width:50vw}.floating[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{overflow:hidden;flex:1 1 100%;position:relative}.show-right[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:50vw;right:100vw}.show-left[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:50vw;left:100vw}.fullscreen.show-left[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:100vw;right:0vw;max-width:100vw}.fullscreen.show-right[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:100vw;left:0vw;max-width:100vw}.goal-marker[_ngcontent-%COMP%]{position:fixed;border:1px solid var(--color-30);height:13px;width:13px;transform:rotate(45deg);left:-10px}.svg-plan[_ngcontent-%COMP%]{transition:.6s;max-width:70vh}"],data:{animation:[uU,QMe]}}),n})();const xOe=["*"];let A8=(()=>{class n{constructor(t,i){this.appService=t,this.elementRef=i}mouseover(){this.appService.setTag(this.tag)}mouseout(){this.appService.setTag(void 0)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(S(Ii),S(Be))},n.\u0275cmp=dt({type:n,selectors:[["tag"]],hostBindings:function(t,i){1&t&&$e("mouseover",function(){return i.mouseover()})("mouseout",function(){return i.mouseout()})},inputs:{tag:"tag"},ngContentSelectors:xOe,decls:2,vars:0,consts:[["mat-flat-button","",1,"mat-button-tag"]],template:function(t,i){1&t&&(Vi(),C(0,"button",0),Dn(1),T())},dependencies:[Kx],styles:[".mat-button-tag[_ngcontent-%COMP%]{padding:3px 0 5px;border:1px solid var(--color-30);line-height:1em}.mat-button-tag[_ngcontent-%COMP%]     .mat-button-wrapper{padding:8px;font-weight:initial}"]}),n})(),wOe=(()=>{class n{constructor(t,i,r,s){this.builder=t,this.overlay=i,this.appService=r,this.viewContainerRef=s,this.open=!1,this.animate=!0,this.byClick=!1,this.unsubscribe=new xt}mouseover(){this.attachOverlay()}mouseout(){this.appService.popupActive$.next(!1),this.detachOverlay()}onResize(t){this.updateOnChange()}getPositionStrategy(){let t;return t=this.overlay.position().flexibleConnectedTo(this.viewContainerRef.element.nativeElement).withPositions([new y_({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,-20),new y_({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,20,"flipped")]).withPush(!0),t}getScrollStrategy(){return this.overlay.scrollStrategies.reposition()}ngOnInit(){this.pageEl=document.querySelector(".center"),this.btn=this.viewContainerRef.element.nativeElement;const t=this.getPositionStrategy(),i=this.getScrollStrategy();this.overlayRef=this.overlay.create({positionStrategy:t,scrollStrategy:i,hasBackdrop:this.byClick}),this.overlayRef.backdropClick().pipe(Ln(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.open&&this.attachOverlay()}ngOnDestroy(){this.detachOverlay(),this.unsubscribe.next(),this.unsubscribe.complete(),this.overlayRef.dispose()}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.arrowEl.remove(),this.overlayRef.detach())}attachOverlay(){const t=new ew(this.overlayTemplate,this.viewContainerRef);this.overlayRef&&!this.overlayRef.hasAttached()&&(this.componentRef=this.overlayRef.attach(t),this.updateOnChange(),this.createMakeMeAPopup(),this.appService.popupActive$.next(!0))}createMakeMeAPopup(){this.overlayRef.overlayElement.classList.add("popup","base"),this.arrowEl=document.createElement("div"),this.arrowEl.classList.add("popup-arrow","base"),this.setArrow(),this.overlayRef.overlayElement.append(this.arrowEl)}setArrow(){const{left:t,width:i}=this.btn.getBoundingClientRect(),{x:r}=this.pageEl.getBoundingClientRect();this.arrowEl.style.left=t-r-20+i/2+"px"}updateOnChange(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.overlayRef.updatePosition(),this.overlayRef.updateSize({width:this.pageEl.clientWidth}),this.arrowEl&&this.setArrow())}playAnimation(t,i){const s=this.builder.build(t).create(i);return s.play(),s}enterAnimation(t){return t.style.maxWidth="100%",[St({"max-width":"0%"}),Kn("150ms ease-out",St({"max-width":"100%"}))]}leaveAnimation(){return[Kn("200ms ease-in",St({"max-width":"0%"}))]}}return n.\u0275fac=function(t){return new(t||n)(S(lb),S(Ea),S(Ii),S(Br))},n.\u0275dir=le({type:n,selectors:[["","overlayTemplate",""]],hostBindings:function(t,i){1&t&&$e("mouseover",function(){return i.mouseover()})("mouseout",function(){return i.mouseout()})("resize",function(s){return i.onResize(s)},!1,zD)},inputs:{overlayTemplate:"overlayTemplate",open:"open"}}),n})();function COe(n,e){1&n&&D(0),2&n&&vt(" Insulation keeps you warm. Passiv houses have almost no heatloss so therefore (almost) no heating is needed! The walls are thicker than you are used to: ",.5," meter ")}function MOe(n,e){1&n&&D(0," In the winter, we need the sun to warmup the house. In the summer the house needs to be shaded on the outside to prevent overheating. ")}function SOe(n,e){1&n&&(D(0," It is even a hashtag "),C(1,"b"),D(2,"#EfficiencyFirst"),T(),D(3,". Why look at green energy if we wast still alot of energy. ( Ofcourse we still need green energy! ). First insulation to the max, before thinking of solarpanels. "))}function TOe(n,e){1&n&&D(0," It is not really a thing, more a concept. It helps the already complex roof to look good. And also, very helpful with calculations. ")}function EOe(n,e){1&n&&D(0," This extension is to greaten the three-part south facade, creates a bigger roof on the second floor. ")}function DOe(n,e){1&n&&D(0," Dont make this too long, it does not fit with the compact design, enlarge the base-dimension if you like. ")}function AOe(n,e){1&n&&D(0," A concept, how far is the bend-point of the roof, away from the outside wall. ")}function ROe(n,e){if(1&n){const t=is();zi(0),C(1,"section",1)(2,"h1"),D(3),T(),C(4,"p",13),D(5," A passiv-haus but in country style, and above all open-source. We love to share our plans as a community. See it as free building plans for your own house or give it to your constructor. Its truly free. "),T()(),C(6,"section",1)(7,"h2"),D(8,"Passiv? "),C(9,"span",14),D(10,"(Its German)"),T()(),C(11,"p"),D(12,"Passive houses are the future. Feel free to "),C(13,"a",15),D(14,"search online for 'Passiv Haus'"),T(),D(15," (not really sexy or anything). Therefor let us try to explain it. Well, really short: "),T(),C(16,"ul")(17,"li")(18,"tag",16),D(19,"Great insulated"),T(),Ue(20,COe,1,1,"ng-template",null,17,nl),T(),C(22,"li"),D(23,"Well & compact desinged"),T(),C(24,"li")(25,"tag",16),D(26,"Orientation"),T(),D(27," to the sun "),Ue(28,MOe,1,0,"ng-template",null,18,nl),T(),C(30,"li"),D(31,"No thermal bridges"),T(),C(32,"li"),D(33,"Can be houses, but also offices etc"),T(),C(34,"li"),D(35,"Sustainable (well in our opinion)"),T()(),C(36,"p"),D(37,"Passiv Haus in one punchline:"),T(),C(38,"div",19)(39,"tag",16),D(40,"Efficiency first"),T(),Ue(41,SOe,4,0,"ng-template",null,20,nl),T(),C(43,"p"),D(44," Sometimes passive houses are often not so pretty. (maybe, if you like form-follow-function). Effiency first, but style second for us! Therefore we try to combine old design styles with this great concept. "),T()(),C(45,"section",1)(46,"h2"),D(47,"The basics"),T(),C(48,"p"),D(49," The house is based on parametric design. So play with all the sliders, its interactive. Lets start at the very basics. And why does it look like a church from above? "),T(),C(50,"h3"),D(51,"Two axis"),T(),C(52,"p"),D(53,"The main house, seen from the south (up here) has two axis with a certain "),C(54,"tag",16),D(55,"base dimension"),T(),D(56,". A design seen often in classical buildings. It comes often with great "),C(57,"tag",21),D(58,"viewlines"),T(),D(59,". The higher the base-dimension is, the lower the extensions can be, the more efficient near-cube shape we get. "),T(),Ue(60,TOe,1,0,"ng-template",null,22,nl),C(62,"label")(63,"span"),D(64,"Base dimension "),T(),C(65,"mat-slider",23),$e("input",function(r){Xt(t);const s=et();return Zt(s.update("house","studAmount",r.value,s.tags.baseDimension))}),T()(),C(66,"label",24)(67,"span"),D(68,"Technical "),T(),D(69),C(70,"tag",16),D(71,"base dimension"),T(),D(72),T(),C(73,"label",24)(74,"span"),D(75,"Technical "),T(),C(76,"table")(77,"tr"),ne(78,"td")(79,"td"),C(80,"td"),D(81,"total"),T(),C(82,"td"),D(83),T()()()()(),C(84,"section",1)(85,"h2"),D(86,"Extensions"),T(),C(87,"p"),D(88," Break boring lines on the southface and create more interesting view points with a "),C(89,"tag",16),D(90,"south extension"),T(),ne(91,"i"),D(92,". The colder, darker side (less windows by design) is located in the convenient "),C(93,"tag",16),D(94,"north wing"),T()(),C(95,"h3"),D(96,"Body parts "),T(),Ue(97,EOe,1,0,"ng-template",null,25,nl),Ue(99,DOe,1,0,"ng-template",null,26,nl),C(101,"label")(102,"span"),D(103,"South extension "),T(),C(104,"mat-slider",27),$e("input",function(r){Xt(t);const s=et();return Zt(s.update("house","studAmountSouth",r.value,s.tags.extensionToSouth))}),T()(),C(105,"label")(106,"span"),D(107," North wing "),T(),C(108,"mat-slider",28),$e("input",function(r){Xt(t);const s=et();return Zt(s.update("house","studAmountNorth",r.value,s.tags.extensionToNorth))}),T()(),C(109,"label")(110,"span"),D(111," West wing "),T(),C(112,"mat-slider",28),$e("input",function(r){Xt(t);const s=et();return Zt(s.update("house","studAmountWest",r.value,s.tags.extensionToWest))}),T()(),C(113,"label")(114,"span"),D(115," East wing "),T(),C(116,"mat-slider",28),$e("input",function(r){Xt(t);const s=et();return Zt(s.update("house","studAmountEast",r.value,s.tags.extensionToEast))}),T()(),C(117,"label",24)(118,"span"),D(119,"Technical "),T(),C(120,"table")(121,"tr")(122,"td"),D(123,"Floor"),T(),C(124,"td"),D(125,"area"),T(),C(126,"td"),D(127,"ground"),T(),C(128,"td"),D(129),T()(),C(130,"tr"),ne(131,"td")(132,"td"),C(133,"td"),D(134,"top"),T(),C(135,"td"),D(136),T()(),C(137,"tr"),ne(138,"td")(139,"td"),C(140,"td"),D(141,"total"),T(),C(142,"td"),D(143),T()(),C(144,"tr")(145,"td"),D(146," Wall"),T(),C(147,"td"),D(148,"inside"),T(),C(149,"td"),D(150,"length"),T(),C(151,"td"),D(152),T()(),C(153,"tr"),ne(154,"td")(155,"td"),C(156,"td"),D(157,"area"),T(),C(158,"td"),D(159),T()(),C(160,"tr"),ne(161,"td"),C(162,"td"),D(163,"outside"),T(),C(164,"td"),D(165,"length"),T(),C(166,"td"),D(167),T()(),C(168,"tr"),ne(169,"td")(170,"td"),C(171,"td"),D(172,"area"),T(),C(173,"td"),D(174),T()()()()(),C(175,"section",29)(176,"h3"),D(177,"Tower"),T(),C(178,"p"),D(179,"This tower is a practical backdoor and allows you to walk from the kitchen to the rest of the house. It creates also a viewpoint from the roof! We like the tower. "),T(),C(180,"mat-slide-toggle",30),$e("ngModelChange",function(r){return Xt(t),Zt(et().update("house","showTower",r))}),D(181,"With a practical tower "),T()(),C(182,"section",1)(183,"h1"),D(184,"Cross section"),T(),C(185,"h2"),D(186,"Slicing it, the basics"),T(),C(187,"p"),D(188,"High ceilings are nice and makes the house feel larger, they costs more but worth it. Heat problems are less with floorheathing."),T(),C(189,"label")(190,"span"),D(191),T(),C(192,"mat-slider",31),$e("input",function(r){return Xt(t),Zt(et().update("cross","ceilingHeight",r.value))}),T()(),C(193,"h3"),D(194),T(),C(195,"p"),D(196,"Way too technical in this design fase! However a crawler space can raise the whole building, changing the overall experience. It can protect more against climate change. Floodings or heavy rains. It is also more expensive and takes more time to build."),T(),C(197,"mat-slide-toggle",30),$e("ngModelChange",function(r){return Xt(t),Zt(et().update("cross","crawlerSpace",r))}),D(198),T(),C(199,"label")(200,"span"),D(201),T(),C(202,"mat-slider",32),$e("input",function(r){return Xt(t),Zt(et().update("cross","floorAboveGround",r.value))}),T()()(),C(203,"section",1)(204,"h2"),D(205,"Roof style"),T(),C(206,"p")(207,"a",33),D(208,"Mansard or Gambrel roof"),T(),D(209," is gives a nice classic countryside stylefull roof.There are three methods to create them. We check both the \"circle\" and '70\xb0/30\xb0'"),T(),C(210,"h2"),D(211,"Circle-based"),T(),C(212,"p"),D(213,"Draw a "),C(214,"tag",21),D(215,"half circle"),T(),D(216," with 45\xb0 lines to create the breakpoints. If you use the slider to create more overhang, the circle moves with it, to keep proportions. The angles are resp: 67.5\xb0, 22.5\xb0 "),T(),C(217,"label")(218,"span"),D(219,"(Fictive) 'Wider roof'"),T(),C(220,"mat-slider",34),$e("input",function(r){Xt(t);const s=et();return Zt(s.update("cross","roofCirclePullDown",r.value,s.tags.halfCircle))}),T()(),C(221,"label")(222,"span"),D(223),T(),C(224,"mat-slider",34),$e("input",function(r){return Xt(t),Zt(et().update("cross","roofCircleWalls",r.value))}),T()()(),C(225,"section",1)(226,"h2"),D(227,"The 70\xb0/30\xb0 roof"),T(),C(228,"p"),D(229,"With this technique, draw a line 70\xb0 until a "),C(230,"tag",16),D(231,"bend point"),T(),D(232,". After than follow 30\xb0. Think about the solar potential! "),T(),D(233," . A common seen classical symmetrical design. "),Ue(234,AOe,1,0,"ng-template",null,35,nl),C(236,"label")(237,"span"),D(238,"Move "),C(239,"tag",16),D(240,"bend point"),T()(),C(241,"mat-slider",34),$e("input",function(r){Xt(t);const s=et();return Zt(s.update("cross","roof70offset",r.value,s.tags.bendPoint))}),T()(),C(242,"label")(243,"span"),D(244),T(),C(245,"mat-slider",34),$e("input",function(r){Xt(t);const s=et();return Zt(s.update("cross","roof70Walls",r.value,s.tags.roofWalls))}),T()(),C(246,"label")(247,"span"),D(248),T(),C(249,"mat-slider",34),$e("input",function(r){return Xt(t),Zt(et().update("cross","roof70Extension",r.value))}),T()()(),C(250,"section",1)(251,"h3"),D(252,"Roof, 70\xb0 or Circle"),T(),C(253,"p"),D(254,"We should choose a roof. There are more possibilities in the end. But for now a mansard roof it is. "),T(),C(255,"mat-button-toggle-group",36),$e("ngModelChange",function(r){return Zt(Xt(t).ngIf.cross.roofStyle=r)})("ngModelChange",function(r){return Xt(t),Zt(et().choosenRoofstyle(r))}),C(256,"mat-button-toggle",37),D(257,"Circle based"),T(),C(258,"mat-button-toggle",37),D(259,"Both"),T(),C(260,"mat-button-toggle",37),D(261,"70\xb0 based"),T()()(),C(262,"section",1)(263,"h3"),D(264,"The roof edge"),T(),C(265,"p"),D(266,"We can look at the silhouette to image it a bit better. We can also add or remove a gutter, and more decorative "),T()(),Bi()}if(2&n){const t=e.ngIf,i=hi(21),r=hi(29),s=hi(42),o=hi(61),a=hi(98),l=hi(100),c=hi(235),u=et();H(1),Z("id",u.Section.welcome),H(2),vt("Welcome to ",t.name,""),H(3),Z("id",u.Section.passiv),H(12),Z("tag",u.tags.insulated)("overlayTemplate",i),H(7),Z("tag",u.tags.orientation)("overlayTemplate",r),H(14),Z("tag",u.tags.efficiency)("overlayTemplate",s),H(6),Z("id",u.Section.basics),H(9),Z("tag",u.tags.baseDimension)("overlayTemplate",o),H(3),Z("tag",u.tags.viewlines),H(8),Z("ngModel",t.studAmount),H(4),vt(" We talk in studs, wooden columns in the wall. They are the core that follow a grid of ",100*t.studDistance," cm. The "),H(1),Z("tag",u.tags.baseDimension)("overlayTemplate",o),H(2),vt(" wall has now ",t.studAmount," studs. "),H(11),vt("",null==t.stats.floor.all?null:t.stats.floor.all.area," m2"),H(1),Z("id",u.Section.extensions),H(5),Z("tag",u.tags.extensionToSouth)("overlayTemplate",a),H(4),Z("tag",u.tags.extensionToNorth)("overlayTemplate",l),H(11),Z("ngModel",t.studAmountSouth)("displayWith",u.studLabel),H(4),Z("min",9)("max",18)("ngModel",t.studAmountNorth)("displayWith",u.studLabel),H(4),Z("min",5)("max",15)("ngModel",t.studAmountWest)("displayWith",u.studLabel),H(4),Z("min",5)("max",9)("ngModel",t.studAmountEast)("displayWith",u.studLabel),H(13),vt("",t.stats.floor.ground.area," m2"),H(7),vt("",t.stats.floor.top.area," m2"),H(7),vt("",null==t.stats.floor.all?null:t.stats.floor.all.area," m2"),H(9),vt("",t.stats.wall.innerLength," m"),H(7),vt("",t.stats.wall.innerArea," m2"),H(8),vt("",t.stats.wall.outerLength," m"),H(7),vt("",t.stats.wall.outerArea," m2"),H(1),Z("id",u.Section.tower),H(5),Z("ngModel",t.showTower),H(2),Z("id",u.Section.roofBasics),H(9),vt("Ceiling height: ",t.cross.ceilingHeight," m"),H(1),Z("ngModel",t.cross.ceilingHeight),H(2),vt("Foundation: ",t.cross.crawlerSpace?"crawler space":"flat foundation",""),H(3),Z("ngModel",t.cross.crawlerSpace),H(1),vt("With a ",t.cross.crawlerSpace?"crawler space":"flat foundation"," "),H(3),vt("Ground floor above ground: ",t.cross.floorAboveGround," m"),H(1),Z("ngModel",t.cross.floorAboveGround),H(1),Z("id",u.Section.roofCircle),H(11),Z("tag",u.tags.halfCircle),H(6),Z("ngModel",t.cross.roofCirclePullDown),H(3),vt("Walls under the roof ",t.cross.roofCircleWalls,"m"),H(1),Z("ngModel",t.cross.roofCircleWalls),H(1),Z("id",u.Section.roof70),H(5),Z("tag",u.tags.bendPoint)("overlayTemplate",c),H(9),Z("tag",u.tags.bendPoint)("overlayTemplate",c),H(2),Z("ngModel",t.cross.roof70offset),H(3),vt("Walls under the roof: ",t.cross.roof70Walls,"m"),H(1),Z("ngModel",t.cross.roof70Walls),H(3),vt("Roof extension: ",t.cross.roof70Extension,"m"),H(1),Z("ngModel",t.cross.roof70Extension),H(1),Z("id",u.Section.roofChoice),H(5),Z("ngModel",t.cross.roofStyle),H(1),Z("value",u.RoofStyle.roofCircle),H(2),Z("value",u.RoofStyle.roofCircleAnd70),H(2),Z("value",u.RoofStyle.roof70),H(2),Z("id",u.Section.roofEdge)}}let IOe=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.house$=this.houseService.house$,this.Section=ke,this.tags=jo,this.RoofStyle=js,this.round=gt,this.discord=this.appService.discord,this.faDiscord=E4,this.update=this.houseService.update}ngAfterViewInit(){}studLabel(t){return`#${t} `}sizeLabel(t){return`${t} m`}choosenRoofstyle(t){this.houseService.update("cross","roofStyle",t)}}return n.\u0275fac=function(t){return new(t||n)(S(rr),S(Ii))},n.\u0275cmp=dt({type:n,selectors:[["app-page-house"]],decls:45,vars:6,consts:[[4,"ngIf"],[3,"id"],["target","_blank",2,"background","var(--primary-color)","padding","0 6px","color","white",3,"href"],[3,"icon"],["fxLayout","column","fxLayoutGap","3px",2,"max-width","180px"],["mat-flat-button","","color","accent","routerLink","/stairs"],[2,"font-family","Material Icons Outlined"],["fxLayout","column","fxLayoutGap","16px",2,"max-width","180px"],["mat-flat-button","","color","accent","routerLink","/construction"],["mat-flat-button","","color","accent","routerLink","/wired"],["mat-flat-button","","color","accent","routerLink","/costs"],["mat-flat-button","","color","accent","routerLink","/installations"],["identifier","PassiveOpen-House"],[1,"mat-caption"],[2,"font-size","0.7em"],["href","https://passivehouse.com/","target","_blank"],["cdkOverlayOrigin","",3,"tag","overlayTemplate"],["insulated",""],["orientation",""],["fxLayoutAlign","center",2,"margin","8px 0 32px"],["efficiency",""],[3,"tag"],["baseDimension",""],["min","6","max","15","tickInterval","1",3,"ngModel","input"],[1,"technical"],["extensionToSouth",""],["extensionToNorth",""],["min","0","max","4","thumbLabel","","tickInterval","1",3,"ngModel","displayWith","input"],["thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],[2,"padding-bottom","80px",3,"id"],[3,"ngModel","ngModelChange"],["min","1.9","max","3.6","step","0.1","tickInterval","1",3,"ngModel","input"],["min","0","max","1","step","0.1","tickInterval","1",3,"ngModel","input"],["href","https://en.wikipedia.org/wiki/Mansard_roof","target","_blank"],["min","0","max","2","step","0.1","tickInterval","1",3,"ngModel","input"],["bendPoint",""],["name","roofstyle",3,"ngModel","ngModelChange"],[3,"value"]],template:function(t,i){1&t&&(Ue(0,ROe,267,76,"ng-container",0),Fr(1,"async"),C(2,"section",1)(3,"h3"),D(4,"This was the main design"),T(),C(5,"p"),D(6,"This site has a lot of info, if you are up for more. Feel free to join us at this "),C(7,"a",2),ne(8,"fa-icon",3),D(9," discord channel "),T(),D(10,": "),T(),ne(11,"br"),C(12,"p"),D(13,"Next step is to get the sizes of the stairs."),T(),C(14,"div",4)(15,"button",5)(16,"mat-icon",6),D(17,"stairs"),T(),C(18,"span"),D(19,"Stairs"),T()()(),C(20,"p"),D(21,"Its also okay to leave them default and check out other chapters!"),T(),ne(22,"br"),C(23,"div",7)(24,"button",8)(25,"mat-icon"),D(26,"handyman"),T(),C(27,"span"),D(28,"Construction"),T()(),C(29,"button",9)(30,"mat-icon"),D(31,"bolt"),T(),C(32,"span"),D(33,"Wired"),T()(),C(34,"button",10)(35,"mat-icon",6),D(36,"savings"),T(),C(37,"span"),D(38,"Costs"),T()(),C(39,"button",11)(40,"mat-icon"),D(41,"solar_power"),T(),C(42,"span"),D(43,"Installations"),T()()()(),ne(44,"disqus",12)),2&t&&(Z("ngIf",Nr(1,4,i.house$)),H(2),Z("id",i.Section.EndOfPageHouse),H(5),Ja("href",i.discord,tu),H(1),Z("icon",i.faDiscord))},dependencies:[Go,fve,G5,Kx,iw,MV,lx,J5,OV,FV,Ef,Nm,Df,Xb,Vf,Cm,A8,wOe,uf]}),n})();function kOe(n,e){if(1&n){const t=is();zi(0),C(1,"section",2,3)(3,"h1"),D(4,"Stairs"),T(),C(5,"p",4),D(6," Stairs are its own thing. There are even whole pinterest collections dedicated to stairs. "),T()(),C(7,"section",2)(8,"h2"),D(9,"Stair 101"),T(),C(10,"p"),D(11," There are different approaches to calculate stairs. We already did the following for us. "),T(),C(12,"ol")(13,"li"),D(14,"The "),C(15,"b"),D(16,"vertical"),T(),D(17),T(),C(18,"li"),D(19,"Building code allows the rise of the step to be between: 182mm and 220mm.Therefore we can only have between "),C(20,"b"),D(21),T()()(),C(22,"label")(23,"span"),D(24),T(),C(25,"mat-slider",5),$e("input",function(r){Xt(t);const s=et();return Zt(s.update("stair","steps",r.value,s.Tag.amountSteps))}),T()(),C(26,"ol",6)(27,"li"),D(28,"The min and max "),C(29,"b"),D(30,"horizontal distance"),T(),D(31," is easy, the stairs should be between 30\xb0 and 35\xb0"),T()(),C(32,"label")(33,"span"),D(34),T(),C(35,"mat-slider",7),$e("input",function(r){return Xt(t),Zt(et().update("stair","totalRun",r.value))}),T()(),C(36,"ol",8)(37,"li"),D(38),T()()(),C(39,"section",2,9)(41,"h2"),D(42,"The good, bad and perfect stairs"),T(),C(43,"label")(44,"span"),D(45,"Checks"),T(),D(46),C(47,"div"),D(48),T(),C(49,"div"),D(50),T(),C(51,"div"),D(52),T(),C(53,"div"),D(54),T()()(),C(55,"section",2,10)(57,"h2"),D(58,"Stair layout"),T(),C(59,"p"),D(60," Stairs can be straight, but we like to have two bends. This makes the stairs relative more compact. It prevents to falldown the complete stairs in accidents. Sideplus, it comes with a nice open hall effect. "),T(),C(61,"label")(62,"span"),D(63),T(),C(64,"mat-slider",11),$e("input",function(r){return Xt(t),Zt(et().update("stair","walkWidth",r.value))}),T()(),C(65,"label")(66,"span"),D(67),T(),C(68,"mat-slider",11),$e("input",function(r){return Xt(t),Zt(et().update("stair","totalWidth",r.value))}),T()(),C(69,"label")(70,"span"),D(71),T(),C(72,"mat-slider",12),$e("input",function(r){return Xt(t),Zt(et().update("stair","stepsRight",r.value))}),T()(),C(73,"p"),D(74," For now we keep the model as simple as possible. Stairs are quite complex. Steps can change direction slowly to make it a piece of art by it self. "),T(),ne(75,"img",13),T(),Bi()}if(2&n){const t=e.ngIf,i=et();H(1),Z("id",i.Section.stairStart),H(6),Z("id",i.Section.stairBasic),H(10),vt(" distance is already decided by the house: ",t.stair.totalRise,"m"),H(4),q3("",t.stair.minSteps," and ",t.stair.maxSteps," steps"),H(3),vt("Total steps: horizontal ",t.stair.steps,""),H(1),Z("min",t.stair.minSteps)("max",t.stair.maxSteps)("ngModel",t.stair.steps)("displayWith",i.sizeLabel),H(9),vt("Total length stairs: horizontal ",t.stair.totalRun,"m"),H(1),Z("min",i.totalRunMin)("max",i.totalRunMax)("ngModel",t.stair.totalRun)("displayWith",i.sizeLabel),H(3),vt("The angle now is: ",t.stair.angle,"\xb0"),H(1),Z("id",i.Section.stairCheck),H(7),vt(" The angle will be ",t.stair.angle,"\xb0 "),H(2),vt("Steps: ",t.stair.steps,""),H(2),vt("Rise: ",t.stair.rise," m"),H(2),vt("Run: ",t.stair.run," m"),H(2),vt("Rise+Run+Rise: ",10*t.stair.step," cm"),H(1),Z("id",i.Section.stairPlan),H(8),vt("Width ",t.stair.walkWidth,"m"),H(1),Z("min",.7)("max",1.2)("ngModel",t.stair.walkWidth),H(3),vt("Total width of stairs: ",t.stair.totalWidth,"m"),H(1),Z("min",2*t.stair.walkWidth)("max",12)("ngModel",t.stair.totalWidth),H(3),q3("Steps on the rightside: ",t.stair.stepsRight," of ",t.stair.steps,""),H(1),Z("min",0)("max",t.stair.steps/2)("ngModel",t.stair.stepsRight)}}let LOe=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.house$=this.houseService.house$,this.Section=ke,this.Tag=jo,this.tagsKeys=Object.keys(jo),this.deltas=4,this.update=this.houseService.update}ngAfterViewInit(){}sizeLabel(t){return`${t}m`}get totalRunMax(){return gt(this.house$.value.stair.totalRise/Math.tan(oU(30)),1)}get totalRunMin(){return gt(this.house$.value.stair.totalRise/Math.tan(oU(35)),1)}get rangeRun(){return this.totalRunMax-this.totalRunMin}get rangeSteps(){const t=this.house$.value.stair;return t.maxSteps-t.minSteps+1}currentRun(t){return gt(t/(this.deltas-1)*this.rangeRun+this.totalRunMin)}currentCell(t,i){const r=this.house$.value.stair,s=this.currentRun(i);return gt(s/(r.minSteps+t)*1e3,-1)}score(t,i){return t<220?"too-little":t>300?"too-much":void 0}select(t,i){this.update("stair","steps",t),this.update("stair","totalRun",i)}}return n.\u0275fac=function(t){return new(t||n)(S(rr),S(Ii))},n.\u0275cmp=dt({type:n,selectors:[["app-page-stairs"]],decls:3,vars:3,consts:[[4,"ngIf"],["identifier","PassiveOpen-Stairs"],[3,"id"],["Section.stairStart",""],[1,"mat-caption"],["step","1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["start","3"],["step","0.1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["start","4"],["Section.stairCheck",""],["Section.stairPlan",""],["step","0.1","tickInterval","1",3,"min","max","ngModel","input"],["step","1","tickInterval","1",3,"min","max","ngModel","input"],["width","100%","src","https://berkela.home.xs4all.nl/stijgpunten/afbeeldingen/tn_2005extra07_11.jpg"]],template:function(t,i){1&t&&(Ue(0,kOe,76,36,"ng-container",0),Fr(1,"async"),ne(2,"disqus",1)),2&t&&Z("ngIf",Nr(1,1,i.house$))},dependencies:[Go,iw,lx,J5,Vf,uf],styles:[".matrix[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-wrap:wrap;flex-direction:row}.matrix[_ngcontent-%COMP%]   .matrix-cell[_ngcontent-%COMP%]{display:block;border:1px solid black;border-radius:0;padding:0;margin:0;min-width:initial;min-height:inherit;line-height:1em;white-space:pre-wrap}.matrix[_ngcontent-%COMP%]   .matrix-cell.too-much[_ngcontent-%COMP%], .matrix[_ngcontent-%COMP%]   .matrix-cell.too-litte[_ngcontent-%COMP%]{border:1px solid rgb(255,255,255);opacity:.6}"]}),n})(),POe=(()=>{class n{constructor(t,i,r){this.zone=t,this.appService=i,this.houseService=r,this.Tag=jo,this.Section=ke}ngAfterViewInit(){this.zone.runOutsideAngular(()=>this.initMap())}initMap(){}}return n.\u0275fac=function(t){return new(t||n)(S(Ct),S(Ii),S(rr))},n.\u0275cmp=dt({type:n,selectors:[["app-page-construction"]],decls:101,vars:10,consts:[[3,"id"],[3,"tag"],["identifier","PassiveOpen-Construction"]],template:function(t,i){1&t&&(C(0,"section",0)(1,"h1"),D(2," Construction "),T(),C(3,"h3"),D(4," This page is still under construction. "),T()(),C(5,"section",0)(6,"h2"),D(7," Foundation "),T(),C(8,"ol")(9,"li"),D(10,"Stroke"),T(),C(11,"li"),D(12,"Poles"),T(),C(13,"li"),D(14,"Slab (not for crawler spaces)"),T(),C(15,"li"),D(16,"Slab + basement"),T()(),C(17,"p"),D(18," Poles Stroke "),T()(),C(19,"section",0)(20,"h2"),D(21," Crawler space "),T(),C(22,"p"),D(23," A crawler space is a space under the ground floor. It highers the ground floor, so a handyman can go under. And change pipes and such after the house is build. Kitchen on the other side of the house? Or even only the sink? Crawler spaces helps a lot."),ne(24,"br")(25,"br"),D(26," It helps too keep your wooden floors dry incase of a flooding or heavy rains. (to some limit of course). "),T()(),C(27,"section",0)(28,"h2"),D(29," Walls & Roof "),T(),C(30,"p"),D(31," Wood is the material for construction. It is a storage of CO"),C(32,"sub"),D(33,"2"),T(),D(34,", natural, light and easy to work with. Modern products like, "),C(35,"tag"),D(36,"I Joists"),T(),D(37,", are even stronger than their natual twins. And you don't need to have a 30cm tree to produce a 30cm beam, so trees can be used more effective. (A disadvantage can be the glue used tho). Wood can last forever, think of all the old houses in old cities."),ne(38,"br")(39,"br"),T(),C(40,"h2"),D(41,"The water problem"),T(),C(42,"p"),D(43," Warm air can contain more water, so the inside air normally would go through the wall and cools down. To a point that it cannot hold longer that amount of water, so it condense in the middle of the wall. "),ne(44,"br")(45,"br"),D(46," Traditional building takes that problem with plastic wraps. One on the outside to keep weather out. And a even more water-closed layer in the inside. Water moves out the construction. It is important during the building fase, to keep everything relatively dry. "),ne(47,"br")(48,"br"),D(49," The alternative is: "),C(50,"tag"),D(51,"damp Open"),T(),D(52,". where no wraps are needed. The inner layer of the house has a water-closed natural layer (OSB sheets). The outside layer is 'damp-open' so it would not absorb rainwater, but the moist air from inside can escape. It is more like a Dutch slogan: not fighting the water, but living with (some) water. "),ne(53,"br")(54,"br"),D(55," We try to look what is the best insulation out there. We think wood-fiber is the best most sustainable in therms of production/insulation values. Stone/glass fibers are a little bit less on the production level, but a bit more durable over time. "),ne(56,"br")(57,"br"),C(58,"tag",1),D(59,"Wood fiber panels"),T(),D(60," are treated with bitumen, there are light, water-resistant and still insulating. They are a perfect layer for the outside layer of the construction (not final outer layer). "),ne(61,"br")(62,"br"),D(63," On the inside of the OSB is an extra 2cm layer and finises of with wood or drywall(gips plates). This layer is practical, because all the switches and wall socket cannot interfere with the air-tight-layer. With a "),C(64,"tag",1),D(65," pipeLayer"),T(),D(66," is it: "),T(),C(67,"ol")(68,"li"),D(69,"Easier to build keep it "),C(70,"tag",1),D(71,"air tight"),T()(),C(72,"li"),D(73,"Deal with sockets in a later stage"),T(),C(74,"li"),D(75,"Modifications"),T()()(),C(76,"section",0)(77,"h2"),D(78," Walls outer finish "),T(),C(79,"p"),D(80," Wooden house, has wood on the outside. Not completely tru. Wood is a sustainable choice (altho we wonder, painting it every 10 years...), but in theory can we have anything on the outside. Keep in mind if you build"),C(81,"tag"),D(82,"damp-open "),T(),D(83," that the finish-layer should also be damp-open. Bricks are for example. The cement is definitely not sustainable, but there is no maintenance in the coming 100-ish years. "),T()(),C(84,"section",0)(85,"h2"),D(86," Floor "),T(),C(87,"p"),D(88," Mass (heavy things) can keep heat. Like a stone wall after sunset would emit heat. It works also the opposite. Like churches are nice cool in the summer. Mass balance out the heat in a nice way. A complete wooden house, would not have that effect. Therefore some mass is a good thing to have. "),ne(89,"br")(90,"br"),D(91," Hollow-concrete-plate are relatively light and have the mass we look for. They can come with insulation, altho this would not be damp-open. "),T()(),C(92,"section",0)(93,"h2"),D(94," The roof "),T(),C(95,"p"),D(96," The roof looks a lot like a wall, maybe a bit thinker. The inside does not need a OSB layer ???ToDo??? "),ne(97,"br")(98,"br"),D(99," The outside layer is of course no bricks, but roof tiles (sometimes architects mixed them up...). "),T()(),ne(100,"disqus",2)),2&t&&(Z("id",i.Section.constructionWelcome),H(5),Z("id",i.Section.constructionFoundation),H(14),Z("id",i.Section.constructionCrawlerSpace),H(8),Z("id",i.Section.constructionWall),H(31),Z("tag",i.Tag.woodFiberPlate),H(6),Z("tag",i.Tag.pipeLayer),H(6),Z("tag",i.Tag.airTight),H(6),Z("id",i.Section.constructionWallFinish),H(8),Z("id",i.Section.constructionFloor),H(8),Z("id",i.Section.constructionRoof))},dependencies:[Vf,A8]}),n})(),OOe=(()=>{class n{constructor(t,i,r){this.houseService=t,this.threeService=i,this.appService=r,this.house$=this.houseService.house$,this.Section=ke,this.Tag=jo,this.wallDetail="wallDetail",this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}ngAfterViewInit(){this.subscriptions.push()}showPerSection(){}}return n.\u0275fac=function(t){return new(t||n)(S(rr),S(D$),S(Ii))},n.\u0275cmp=dt({type:n,selectors:[["app-page-facade"]],decls:42,vars:3,consts:[[3,"id"],[1,"mat-caption"],[1,"technical",2,"max-width","640px"],["fxLayout","row wrap","fxLayoutGap","8px","fxLayoutAlign","center center",2,"padding","16px 0 24px"],["src","/assets/img/window_1.jpg",2,"max-height","360px"],["src","/assets/img/window_2.jpg",2,"max-height","360px"],["src","https://ars.els-cdn.com/content/image/1-s2.0-S0378778816316383-gr9.jpg"],["src","/assets/img/door_step_1.jpg",2,"max-height","360px"],["identifier","PassiveOpen-Facade"]],template:function(t,i){1&t&&(C(0,"section",0)(1,"h1"),D(2,"Facade"),T(),C(3,"p",1),D(4," We cover here all the basics about the outside of the house. Windows, doors, domers and bricks. "),T()(),C(5,"section",0)(6,"h1"),D(7,"Window"),T(),C(8,"p"),D(9," Windows are a tradeoff between a nice open light house and: heatloss, heatgain, complexer builds and more exepensive. In a passiv house, belongs high end windows, triple glass and high-end framing. That makes it one of the most costly invenstments. "),T(),C(10,"label",2)(11,"span"),D(12,"Design"),T(),C(13,"span"),D(14," Dutch traditional windows have some variations. "),ne(15,"br")(16,"br"),D(17," The right one is is nicely detailed. Look how the windowframe ends in a litte stone, to keep it dry and prevent rotting. However the windowframe is missing at the bottom, the window rest on the stone. Not our modern standards. "),ne(18,"br")(19,"br"),D(20," The major difference between them is that the left one has a frame at the bottom. That is better insulated, and we do need to use less pressious stone. "),T(),C(21,"div",3),ne(22,"img",4)(23,"img",5),T(),C(24,"span"),D(25," Furthermore both window-bottom-stones go into the brickwork. If you don't do this, you would create a channel for rainwater (wind blows it in the corner). And the dirt will collect on your walls. Now it would drip off. "),T()(),C(26,"p"),D(27," Place the window in the middle of insulation "),ne(28,"img",6),T()(),C(29,"section",0)(30,"h1"),D(31,"Doors"),T(),C(32,"p"),D(33," For guests the first warm welcome "),T(),C(34,"label",2)(35,"span"),D(36,"Design"),T(),C(37,"span"),D(38,"They kinda look like windows. Ofcourse the bottomframe is missing here. The bottom frame should be wheelchair friendly, altho its a bit contradictive with a eleveated ground floor (due to crawler space). The door and frame should be extreme insulated. "),T(),C(39,"div",3),ne(40,"img",7),T()()(),ne(41,"disqus",8)),2&t&&(Z("id",i.Section.facadeStart),H(5),Z("id",i.Section.facadeWindow),H(24),Z("id",i.Section.facadeDoor))},dependencies:[Ef,Nm,Df,Vf],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:48px;align-items:center}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})(),FOe=(()=>{class n{constructor(t,i,r){this.zone=t,this.appService=i,this.houseService=r,this.Tag=jo,this.Section=ke}ngAfterViewInit(){this.zone.runOutsideAngular(()=>this.initMap())}initMap(){}}return n.\u0275fac=function(t){return new(t||n)(S(Ct),S(Ii),S(rr))},n.\u0275cmp=dt({type:n,selectors:[["app-page-installation"]],decls:95,vars:10,consts:[[3,"id"],[3,"tag"],["identifier","PassiveOpen-installations"]],template:function(t,i){1&t&&(C(0,"section",0)(1,"h1"),D(2,"Installations"),T()(),C(3,"section",0)(4,"h2"),D(5,"Drink water"),T(),C(6,"p"),D(7," Not anything special here on the cold side. You can have a local source if you live on the countryside. "),ne(8,"br")(9,"br"),D(10," Hot/Warm drinkwater is needed in the sinks and showers. This water can be heated up via the central "),C(11,"tag",1),D(12," warm water buffer"),T(),D(13,". A big tank that takes heat from different sources, and allows for hot water and even heating. "),T()(),C(14,"section",0)(15,"h2"),D(16,"Heating"),T(),C(17,"p"),D(18," This is a bit of a contra verse subject. A passive house is passive, it receives energy from the sun, people and machines. The heat loss is minimum. Some passive houses don't need heating at all! In some colder climates some heating in extreme winters can be needed. There is only one real option (except air heating, which is fine for a few days, but less healthy): floor heating. It can use low-heat water from the "),C(19,"tag",1),D(20," warm water buffer"),T(),D(21,"1 "),T()(),C(22,"section",0)(23,"h2"),D(24,"Electricity"),T(),C(25,"p"),D(26," We like the off-grid principles, but still difficult to achieve in the 2020s. However we can take away a huge part of the electricity needed by solar panels and store energy in form of warm water. We can use solar-heat-panels or heating the overflow of electricity during the day to warm up the "),C(27,"tag",1),D(28," warm water buffer "),T(),D(29,". Warm water can be used in the shower, or heating. "),ne(30,"br")(31,"br"),D(32," This Mansard roof is a (near) perfect angle for solar panels. However the to make it look nice is harder. We are still looking for the right panel types with old, classical roof tiles. "),ne(33,"br")(34,"br"),D(35," There is a balance between the time you need electricity (evening, electricity-car & cooking) and when they produce the most (around noon). If you can return-to-the-net orientation to noon is the best. Otherwise some panels could actually more orientated to the west. "),T()(),C(36,"section",0)(37,"h2"),D(38,"Grey water"),T(),C(39,"p"),D(40," With a fancy word, climate adaption: Save rain water when it rains, like a buffer, an use it when a draught happens, or save on treated drinkwater. Rainwater water is perfect, because there are almost no levels of calcium. Water your plants with it, they love it! Flush the toilets with it and was your cloths with it, you ll see that you need less soap. "),ne(41,"br")(42,"br"),D(43," We need a big water tank outside in the ground (10m"),C(44,"sub"),D(45,"3"),T(),D(46,"), a pomp and 3-filter system. All the systems that need to use the rain water need also 'grey'-pipes. If the rainwater tank is empty, you still want the flush the toilets. There is a machine that puts normal drink-water in the 'grey'-pipes as backup. Automatically! "),ne(47,"br")(48,"br"),D(49,"In theory showering with rainwater seems perfect, but most law forbids to bend cold-rainwater with warm-drinkwater. If you do, you need less soap and your hair will be smooooth. "),T()(),C(50,"section",0)(51,"h2"),D(52,"Ventilation"),T(),C(53,"p"),D(54," A passive house is air-tight. It saves on heat loss (more than you would think). A modern house has a blow-in and suck-out ventilation system. The system can take the heat out of exit-air and warm the incoming air up. Only 6% of the heat is lost. A normal ventilation is 100% heat loss. Air-tight, than I can't open my windows. "),ne(55,"br"),D(56," Bit of a miss conception. If the outside temperature is near the inside temperature it's completely fine. Altho with a good climate system you shouldn't feel the need to open the windows! This closed system filters the air. It is perfect when there is smog or if you have hay fever or other allergies . "),ne(57,"br")(58,"br"),D(59," Some rooms get fresh air, living room, sleeping rooms. And some rooms the air is pumped out, the wet rooms and kitchen. This is in balance. In the floor there is some space for this ducts. In the "),C(60,"tag"),D(61,"installation room"),T(),D(62," there is a quite big pomp / filter. "),T()(),C(63,"section",0)(64,"h2"),D(65,"Domotica / Smart home"),T(),C(66,"p"),D(67," With more complex houses, house should become more smart. The air, and maybe the heating, should be automatic. You shouldn't even notice it. On hot summer days, the sunscreens should come down, and with rain up. "),ne(68,"br")(69,"br"),D(70," There is a basic level of intelligence needed but we can take it a few steps further with automatic lights and such. 'Smart home' creates some irritations here and there. And often completely understandable. A smart light without a button is annoying, sometimes you used need a button and not a voice command or smartphone. A smart home has them all, but above all knows when you want to turn on the lamp. "),ne(71,"br")(72,"br"),D(73,"Think of (all if over rulable) "),T(),C(74,"ul")(75,"li"),D(76,"Lights dim more if its evening"),T(),C(77,"li"),D(78,"Red nightlight in the toilet after 23:00"),T(),C(79,"li"),D(80,"Block the sunlight with screens"),T(),C(81,"li"),D(82,"Random light go on if you are on holiday"),T(),C(83,"li"),D(84,"Remote controllable (local VPN not via cloud)"),T(),C(85,"li"),D(86,"More secure, camera's and alarms"),T()(),ne(87,"br")(88,"br"),C(89,"p"),D(90," Wifi is great, but cables are better. If you build a new home, put some more internet cables than needed. A smart home can uses internet cables for sensors, camera and of course computers. Cat 6 cables are easy the work with and fine speeds for most applications (if not longer than 30m or so). Maybe put up a better cat cable for your work- or kids game stations. "),ne(91,"br")(92,"br"),D(93," For us this is still a process we need to rethink. For now we think one single local controller per room for a more decentralized system. Light switches to has a twisted-pair wire back to the room-controller. The light is on a hotel-switch so the button would always work as the digital version. "),T()(),ne(94,"disqus",2)),2&t&&(Z("id",i.Section.installationWelcome),H(3),Z("id",i.Section.installationDrinkWater),H(8),Z("tag",i.Tag.warmWaterBuffer),H(3),Z("id",i.Section.installationHeating),H(5),Z("tag",i.Tag.warmWaterBuffer),H(3),Z("id",i.Section.installationElectricity),H(5),Z("tag",i.Tag.warmWaterBuffer),H(9),Z("id",i.Section.installationGreyWater),H(14),Z("id",i.Section.installationVentilation),H(13),Z("id",i.Section.installationSmartHome))},dependencies:[Vf,A8]}),n})();const zc=class NOe{constructor(e){this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},yS=class zOe{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function e1(n,e){return n>e?1:n<e?-1:0}function bS(n,e,t){const i=n.length;if(n[0]<=e)return 0;if(e<=n[i-1])return i-1;{let r;if(t>0){for(r=1;r<i;++r)if(n[r]<e)return r-1}else if(t<0){for(r=1;r<i;++r)if(n[r]<=e)return r}else for(r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return"function"==typeof t?t(e,n[r-1],n[r])>0?r-1:r:n[r-1]-e<e-n[r]?r-1:r}return i-1}}function BOe(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function P$(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function t1(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function wg(){return!0}function R8(){return!1}function n1(){}function Cg(n){for(const e in n)delete n[e]}function Mg(n){let e;for(e in n)return!1;return!e}const I8=class UOe extends yS{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t="string"==typeof e,i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new zc(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let l;i in o||(o[i]=0,a[i]=0),++o[i];for(let c=0,u=r.length;c<u;++c)if(l="handleEvent"in r[c]?r[c].handleEvent(s):r[c].call(this,s),!1===l||s.propagationStopped){l=!1;break}if(0==--o[i]){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,n1);delete o[i]}return l}disposeInternal(){this.listeners_&&Cg(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,t){const i=this.listeners_&&this.listeners_[e];if(i){const r=i.indexOf(t);-1!==r&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=n1,++this.pendingRemovals_[e]):(i.splice(r,1),0===i.length&&delete this.listeners_[e]))}}};function Cn(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function k8(n,e,t,i){return Cn(n,e,t,i,!0)}function Si(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Cg(n))}const O$=class L8 extends I8{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Cn(this,e[s],t);return r}return Cn(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=k8(this,e[s],t)}else i=k8(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)!function GOe(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Si(n[e]);else Si(n)}(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}};function Mn(){throw new Error("Unimplemented abstract method.")}let WOe=0;function Pn(n){return n.ol_uid||(n.ol_uid=String(++WOe))}class F$ extends zc{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}const wl=class jOe extends O${constructor(e){super(),Pn(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new F$(i,e,t)),i="propertychange",this.hasListener(i)&&this.dispatchEvent(new F$(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){!e.values_||Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Mg(this.values_)&&(this.values_=null),t||this.notify(e,i)}}},$Oe={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class qOe extends Error{constructor(e){const t=$Oe[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}const N$=qOe;function _n(n,e){if(!n)throw new N$(e)}class xS extends wl{constructor(e){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?this.setGeometry(e):this.setProperties(e))}clone(){const e=new xS(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Si(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Cn(e,"change",this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function YOe(n){if("function"==typeof n)return n;{let e;return Array.isArray(n)?e=n:(_n("function"==typeof n.getZIndex,41),e=[n]),function(){return e}}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const XOe=xS;class P8 extends zc{constructor(e,t,i){super(e),this.element=t,this.index=i}}const Cl=class ZOe extends wl{constructor(e,t){if(super(),this.unique_=!!(t=t||{}).unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get("length")}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new P8("add",t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new P8("remove",t,e)),t}setAt(e,t){if(e>=this.getLength())return void this.insertAt(e,t);if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new P8("remove",r,e)),this.dispatchEvent(new P8("add",t,e))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new N$(58)}},Ju=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",KOe=Ju.includes("firefox"),QOe=(Ju.includes("safari")&&!Ju.includes("chrom")&&(Ju.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ju)),Ju.includes("webkit")&&!Ju.includes("edge")),JOe=Ju.includes("macintosh"),B$=typeof devicePixelRatio<"u"?devicePixelRatio:1,wS=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,eFe=typeof Image<"u"&&Image.prototype.decode,V$=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function jr(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function Bc(n,e,t,i,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return n[0]=i*c,n[1]=r*l,n[2]=-i*l,n[3]=r*c,n[4]=o*i*c-a*i*l+e,n[5]=o*r*l+a*r*c+t,n}function O8(n,e){const t=function iFe(n){return n[0]*n[3]-n[1]*n[2]}(e);_n(0!==t,32);const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-s/t,n[3]=i/t,n[4]=(s*l-o*a)/t,n[5]=-(i*l-r*a)/t,n}let H$;function SS(n){const e="matrix("+n.join(", ")+")";if(wS)return e;const t=H$||(H$=document.createElement("div"));return t.style.transform=e,t.style.transform}new Array(6);function U$(n){const e=[1/0,1/0,-1/0,-1/0];for(let t=0,i=n.length;t<i;++t)Y2(e,n[t]);return e}function TS(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function G$(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function W$(n,e,t){let i,r;return i=e<n[0]?n[0]-e:n[2]<e?e-n[2]:0,r=t<n[1]?n[1]-t:n[3]<t?t-n[3]:0,i*i+r*r}function F8(n,e){return j$(n,e[0],e[1])}function $2(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function j$(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function ES(n,e){const o=e[0],a=e[1];let l=0;return o<n[0]?l|=16:o>n[2]&&(l|=4),a<n[1]?l|=8:a>n[3]&&(l|=2),0===l&&(l=1),l}function Ml(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function q2(n){return Ml(1/0,1/0,-1/0,-1/0,n)}function Tg(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function Y2(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function q$(n,e,t,i,r){for(;t<i;t+=r)cFe(n,e[t],e[t+1]);return n}function cFe(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function Y$(n,e){let t;return t=e(z8(n)),!!(t||(t=e(B8(n)),t)||(t=e(V8(n)),t)||(t=e(r1(n)),t))&&t}function N8(n){let e=0;return RS(n)||(e=di(n)*Ua(n)),e}function z8(n){return[n[0],n[1]]}function B8(n){return[n[2],n[1]]}function X2(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function uFe(n,e){let t;return"bottom-left"===e?t=z8(n):"bottom-right"===e?t=B8(n):"top-left"===e?t=r1(n):"top-right"===e?t=V8(n):_n(!1,13),t}function DS(n,e,t,i,r){const[s,o,a,l,c,u,d,h]=AS(n,e,t,i);return Ml(Math.min(s,a,c,d),Math.min(o,l,u,h),Math.max(s,a,c,d),Math.max(o,l,u,h),r)}function AS(n,e,t,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(t),a=Math.sin(t),l=r*o,c=r*a,u=s*o,d=s*a,h=n[0],f=n[1];return[h-l+d,f-c-u,h-l-d,f-c+u,h+l-d,f+c+u,h+l+d,f+c-u,h-l+d,f-c-u]}function Ua(n){return n[3]-n[1]}function Z2(n,e,t){const i=t||[1/0,1/0,-1/0,-1/0];return eo(n,e)?(i[0]=n[0]>e[0]?n[0]:e[0],i[1]=n[1]>e[1]?n[1]:e[1],i[2]=n[2]<e[2]?n[2]:e[2],i[3]=n[3]<e[3]?n[3]:e[3]):q2(i),i}function r1(n){return[n[0],n[3]]}function V8(n){return[n[2],n[3]]}function di(n){return n[2]-n[0]}function eo(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function RS(n){return n[2]<n[0]||n[3]<n[1]}function X$(n,e){const t=e.getExtent(),i=X2(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=di(t),o=Math.floor((i[0]-t[0])/r)*r;n[0]-=o,n[2]-=o}return n}function wr(n,e,t){return Math.min(Math.max(n,e),t)}function mFe(n,e,t,i,r,s){const o=r-t,a=s-i;if(0!==o||0!==a){const l=((n-t)*o+(e-i)*a)/(o*o+a*a);l>1?(t=r,i=s):l>0&&(t+=o*l,i+=a*l)}return K2(n,e,t,i)}function K2(n,e,t,i){const r=t-n,s=i-e;return r*r+s*s}function H8(n){return n*Math.PI/180}function Q2(n,e){const t=n%e;return t*e<0?t+e:t}function s1(n,e,t){return n+t*(e-n)}function IS(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function U8(n,e){return Math.floor(IS(n,e))}function G8(n,e){return Math.ceil(IS(n,e))}const Z$=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,K$=/^([a-z]*)$|^hsla?\(.*\)$/i;function Q$(n){return"string"==typeof n?n:tq(n)}const _Fe=function(){const e={};let t=0;return function(i){let r;if(e.hasOwnProperty(i))r=e[i];else{if(t>=1024){let s=0;for(const o in e)0==(3&s++)&&(delete e[o],--t)}r=function vFe(n){let e,t,i,r,s;if(K$.exec(n)&&(n=function J$(n){const e=document.createElement("div");if(e.style.color=n,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}(n)),Z$.exec(n)){const o=n.length-1;let a;a=o<=4?1:2;const l=4===o||8===o;e=parseInt(n.substr(1+0*a,a),16),t=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),r=l?parseInt(n.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,t=(t<<4)+t,i=(i<<4)+i,l&&(r=(r<<4)+r)),s=[e,t,i,r/255]}else n.startsWith("rgba(")?(s=n.slice(5,-1).split(",").map(Number),eq(s)):n.startsWith("rgb(")?(s=n.slice(4,-1).split(",").map(Number),s.push(1),eq(s)):_n(!1,14);return s}(i),e[i]=r,++t}return r}}();function W8(n){return Array.isArray(n)?n:_Fe(n)}function eq(n){return n[0]=wr(n[0]+.5|0,0,255),n[1]=wr(n[1]+.5|0,0,255),n[2]=wr(n[2]+.5|0,0,255),n[3]=wr(n[3],0,1),n}function tq(n){let e=n[0];e!=(0|e)&&(e=e+.5|0);let t=n[1];t!=(0|t)&&(t=t+.5|0);let i=n[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+t+","+i+","+(void 0===n[3]?1:Math.round(100*n[3])/100)+")"}function nq(n,e,t){return e+":"+n+":"+(t?Q$(t):"null")}const j8=new class yFe{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];0==(3&e++)&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const r=nq(e,t,i);return r in this.cache_?this.cache_[r]:null}set(e,t,i,r){const s=nq(e,t,i);this.cache_[s]=r,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}},iq=class bFe extends wl{constructor(e){super(),this.background_=e.background;const t=Object.assign({},e);"object"==typeof e.properties&&(delete t.properties,Object.assign(t,e.properties)),t.opacity=void 0!==e.opacity?e.opacity:1,_n("number"==typeof t.opacity,64),t.visible=void 0===e.visible||e.visible,t.zIndex=e.zIndex,t.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,t.minResolution=void 0!==e.minResolution?e.minResolution:0,t.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,t.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,this.className_=void 0!==t.className?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:void 0===e||e},i=this.getZIndex();return t.opacity=wr(Math.round(100*this.getOpacity())/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=void 0!==i||t.managed?i:1/0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Mn()}getLayerStatesArray(e){return Mn()}getExtent(){return this.get("extent")}getMaxResolution(){return this.get("maxResolution")}getMinResolution(){return this.get("minResolution")}getMinZoom(){return this.get("minZoom")}getMaxZoom(){return this.get("maxZoom")}getOpacity(){return this.get("opacity")}getSourceState(){return Mn()}getVisible(){return this.get("visible")}getZIndex(){return this.get("zIndex")}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set("extent",e)}setMaxResolution(e){this.set("maxResolution",e)}setMinResolution(e){this.set("minResolution",e)}setMaxZoom(e){this.set("maxZoom",e)}setMinZoom(e){this.set("minZoom",e)}setOpacity(e){_n("number"==typeof e,64),this.set("opacity",e)}setVisible(e){this.set("visible",e)}setZIndex(e){this.set("zIndex",e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}};function kS(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}const $8=class xFe extends iq{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener("source",this.handleSourcePropertyChange_),this.setSource(e.source?e.source:null)}getLayersArray(e){return(e=e||[]).push(this),e}getLayerStatesArray(e){return(e=e||[]).push(this.getLayerState()),e}getSource(){return this.get("source")||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Si(this.sourceChangeKey_),this.sourceChangeKey_=null);const e=this.getSource();e&&(this.sourceChangeKey_=Cn(e,"change",this.handleSourceChange_,this)),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise(t=>t([]))}getData(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}render(e,t){const i=this.getRenderer();if(i.prepareFrame(e))return this.rendered=!0,i.renderFrame(e,t)}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set("map",e)}getMapInternal(){return this.get("map")}setMap(e){this.mapPrecomposeKey_&&(Si(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Si(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Cn(e,"precompose",function(t){const r=t.frameState.layerStatesArray,s=this.getLayerState(!1);_n(!r.some(function(o){return o.layer===s.layer}),67),r.push(s)},this),this.mapRenderKey_=Cn(this,"change",e.render,e),this.changed())}setSource(e){this.set("source",e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function q8(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function LS(n,e){const t=Math.cos(e),i=Math.sin(e),s=n[1]*t+n[0]*i;return n[0]=n[0]*t-n[1]*i,n[1]=s,n}function oq(n,e){if(e.canWrapX()){const t=di(e.getExtent()),i=function EFe(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||di(i),r=Math.floor((n[0]-i[0])/t)),r}(n,e,t);i&&(n[0]-=i*t)}return n}function AFe(n,e){j8.expire()}const RFe=class DFe extends yS{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Mn()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Bc(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),O8(r,i)}forEachFeatureAtCoordinate(e,t,i,r,s,o,a,l){let c;const u=t.viewState;function d(b,x,M,R){return s.call(o,x,b?M:null,R)}const h=u.projection,f=oq(e.slice(),h),p=[[0,0]];if(h.canWrapX()&&r){const x=di(h.getExtent());p.push([-x,0],[x,0])}const m=t.layerStatesArray,g=m.length,_=[],v=[];for(let b=0;b<p.length;b++)for(let x=g-1;x>=0;--x){const M=m[x],R=M.layer;if(R.hasRenderer()&&kS(M,u)&&a.call(l,R)){const w=R.getRenderer(),E=R.getSource();if(w&&E){const P=E.getWrapX()?f:e,Y=d.bind(null,M.managed);v[0]=P[0]+p[b][0],v[1]=P[1]+p[b][1],c=w.forEachFeatureAtCoordinate(v,t,i,Y,_)}if(c)return c}}if(0===_.length)return;const y=1/_.length;return _.forEach((b,x)=>b.distanceSq+=x*y),_.sort((b,x)=>b.distanceSq-x.distanceSq),_.some(b=>c=b.callback(b.feature,b.layer,b.geometry)),c}hasFeatureAtCoordinate(e,t,i,r,s,o){return void 0!==this.forEachFeatureAtCoordinate(e,t,i,r,wg,this,s,o)}getMap(){return this.map_}renderFrame(e){Mn()}scheduleExpireIconCache(e){j8.canExpireCache()&&e.postRenderFunctions.push(AFe)}},aq=class IFe extends zc{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}},Y8="ol-hidden",X8="ol-unselectable",PS="ol-control",lq="ol-collapsed",kFe=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),cq=["style","variant","weight","size","lineHeight","family"],uq=function(n){const e=n.match(kFe);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=cq.length;i<r;++i){const s=e[i+1];void 0!==s&&(t[cq[i]]=s)}return t.families=t.family.split(/,\s?/),t};function ko(n,e,t,i){let r;return r=t&&t.length?t.shift():wS?new OffscreenCanvas(n||300,e||300):document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}function dq(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function hq(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function OS(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}const fq="10px sans-serif",Vc="#000",Z8="round",Eg=[],J2="round",Rg="#000",Ig="center",K8="middle",o1=[0,0,0,0],Hc=new wl;let FS,ep=null;const NS={},OFe=function(){const e="32px ",t=["monospace","serif"],i=t.length,r="wmytzilWMYTZIL@#/&?$%10\uf013";let s,o;function a(c,u,d){let h=!0;for(let f=0;f<i;++f){const p=t[f];if(o=Q8(c+" "+u+" "+e+p,r),d!=p){const m=Q8(c+" "+u+" "+e+d+","+p,r);h=h&&m!=o}}return!!h}function l(){let c=!0;const u=Hc.getKeys();for(let d=0,h=u.length;d<h;++d){const f=u[d];Hc.get(f)<100&&(a.apply(this,f.split("\n"))?(Cg(NS),ep=null,FS=void 0,Hc.set(f,100)):(Hc.set(f,Hc.get(f)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){const u=uq(c);if(!u)return;const d=u.families;for(let h=0,f=d.length;h<f;++h){const p=d[h],m=u.style+"\n"+u.weight+"\n"+p;void 0===Hc.get(m)&&(Hc.set(m,100,!0),a(u.style,u.weight,p)||(Hc.set(m,0,!0),void 0===s&&(s=setInterval(l,32))))}}}(),FFe=function(){let n;return function(e){let t=NS[e];if(null==t){if(wS){const i=uq(e),r=pq(e,"\u017dg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);NS[e]=t}return t}}();function pq(n,e){return ep||(ep=ko(1,1)),n!=FS&&(ep.font=n,FS=ep.font),ep.measureText(e)}function Q8(n,e){return pq(n,e).width}function mq(n,e,t){if(e in t)return t[e];const i=e.split("\n").reduce((r,s)=>Math.max(r,Q8(n,s)),0);return t[e]=i,i}const HFe=class VFe extends RFe{constructor(e){super(e),this.fontChangeListenerKey_=Cn(Hc,"propertychange",e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=X8+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new aq(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){Si(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent("precompose",e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=e.viewState;this.children_.length=0;const r=[];let s=null;for(let o=0,a=t.length;o<a;++o){const l=t[o];e.layerIndex=o;const c=l.layer,u=c.getSourceState();if(!kS(l,i)||"ready"!=u&&"undefined"!=u){c.unrender();continue}const d=c.render(e,s);!d||(d!==s&&(this.children_.push(d),s=d),"getDeclutter"in c&&r.push(c))}for(let o=r.length-1;o>=0;--o)r[o].renderDeclutter(e);(function PFe(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}})(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}};class td extends zc{constructor(e,t){super(e),this.layer=t}}class BS extends iq{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),i?Array.isArray(i)?i=new Cl(i.slice(),{unique:!0}):_n("function"==typeof i.getArray,43):i=new Cl(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Si),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Cn(e,"add",this.handleLayersAdd_,this),Cn(e,"remove",this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Si);Cg(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new td("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Cn(e,"propertychange",this.handleLayerChange_,this),Cn(e,"change",this.handleLayerChange_,this)];e instanceof BS&&t.push(Cn(e,"addlayer",this.handleLayerGroupAdd_,this),Cn(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Pn(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new td("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new td("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new td("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Pn(t);this.listenerKeys_[i].forEach(Si),delete this.listenerKeys_[i],this.dispatchEvent(new td("removelayer",t)),this.changed()}getLayers(){return this.get("layers")}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new td("removelayer",i[r]))}this.set("layers",e)}getLayersArray(e){return e=void 0!==e?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=void 0!==e?e:[],i=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&void 0===r.zIndex&&(s=0);for(let o=i,a=t.length;o<a;o++){const l=t[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),void 0!==r.extent&&(l.extent=void 0!==l.extent?Z2(l.extent,r.extent):r.extent),void 0===l.zIndex&&(l.zIndex=s)}return t}getSourceState(){return"ready"}}const J8=BS,tp=class UFe extends zc{constructor(e,t,i){super(e),this.map=t,this.frameState=void 0!==i?i:null}},nd=class GFe extends tp{constructor(e,t,i,r,s,o){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==r&&r,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},Xi={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},jFe=class WFe extends I8{constructor(e,t){super(e),this.map_=e,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===t?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Cn(i,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=Cn(i,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener("touchmove",this.boundHandleTouchMove_,!!V$&&{passive:!1})}emulateClick_(e){let t=new nd(Xi.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new nd(Xi.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const i=new nd(Xi.SINGLECLICK,this.map_,e);this.dispatchEvent(i)}.bind(this),250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Xi.POINTERUP||t.type==Xi.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Xi.POINTERDOWN||t.type==Xi.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new nd(Xi.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(Si),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return 0===e.button}handlePointerDown_(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);const t=new nd(Xi.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.down_={};for(const i in e){const r=e[i];this.down_[i]="function"==typeof r?n1:r}if(0===this.dragListenerKeys_.length){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Cn(i,Xi.POINTERMOVE,this.handlePointerMove_,this),Cn(i,Xi.POINTERUP,this.handlePointerUp_,this),Cn(this.element_,Xi.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Cn(this.element_.getRootNode(),Xi.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new nd(Xi.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new nd(Xi.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&("boolean"!=typeof e.cancelable||!0===e.cancelable)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Si(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Si(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Si),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},e7=1/0,Ga={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},a1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},gq=class JFe{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||a1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}},Lg=6378137,np=Math.PI*Lg,eNe=[-np,-np,np,np],tNe=[-180,-85,180,85],t7=Lg*Math.log(Math.tan(Math.PI/2));class ip extends gq{constructor(e){super({code:e,units:"m",extent:eNe,global:!0,worldExtent:tNe,getPointResolution:function(t,i){return t/Math.cosh(i[1]/Lg)}})}}const _q=[new ip("EPSG:3857"),new ip("EPSG:102100"),new ip("EPSG:102113"),new ip("EPSG:900913"),new ip("http://www.opengis.net/def/crs/EPSG/0/3857"),new ip("http://www.opengis.net/gml/srs/epsg.xml#3857")];function nNe(n,e,t){const i=n.length;t=t>1?t:2,void 0===e&&(e=t>2?n.slice():new Array(i));for(let r=0;r<i;r+=t){e[r]=np*n[r]/180;let s=Lg*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));s>t7?s=t7:s<-t7&&(s=-t7),e[r+1]=s}return e}function iNe(n,e,t){const i=n.length;t=t>1?t:2,void 0===e&&(e=t>2?n.slice():new Array(i));for(let r=0;r<i;r+=t)e[r]=180*n[r]/np,e[r+1]=360*Math.atan(Math.exp(n[r+1]/Lg))/Math.PI-90;return e}const vq=[-180,-90,180,90],sNe=6378137*Math.PI/180;class l1 extends gq{constructor(e,t){super({code:e,units:"degrees",extent:vq,axisOrientation:t,global:!0,metersPerUnit:sNe,worldExtent:vq})}}const yq=[new l1("CRS:84"),new l1("EPSG:4326","neu"),new l1("urn:ogc:def:crs:OGC:1.3:CRS84"),new l1("urn:ogc:def:crs:OGC:2:84"),new l1("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new l1("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new l1("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let n7={},Wa={};function r7(n,e,t){const i=n.getCode(),r=e.getCode();i in Wa||(Wa[i]={}),Wa[i][r]=t}function US(n,e,t){t=t||6371008.8;const i=H8(n[1]),r=H8(e[1]),s=(r-i)/2,o=H8(e[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}let WS=!0;function jS(n,e,t){if(void 0!==e)for(let i=0,r=n.length;i<r;++i)e[i]=n[i];else e=n.slice();return e}function xq(n,e,t){if(void 0!==e&&n!==e){for(let i=0,r=n.length;i<r;++i)e[i]=n[i];n=e}return n}function dNe(n){(function aNe(n,e){n7[n]=e})(n.getCode(),n),r7(n,n,jS)}function vs(n){return"string"==typeof n?function oNe(n){return n7[n]||n7[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(n):n||null}function wq(n,e,t,i){let r;const s=(n=vs(n)).getPointResolutionFunc();if(s){if(r=s(e,t),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(r=r*o/a1[i])}}else{const o=n.getUnits();if("degrees"==o&&!i||"degrees"==i)r=e;else{const a=Pg(n,vs("EPSG:4326"));if(a===xq&&"degrees"!==o)r=e*n.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2),r=(US(c.slice(0,2),c.slice(2,4))+US(c.slice(4,6),c.slice(6,8)))/2}const l=i?a1[i]:n.getMetersPerUnit();void 0!==l&&(r/=l)}}return r}function Cq(n){(function hNe(n){n.forEach(dNe)})(n),n.forEach(function(e){n.forEach(function(t){e!==t&&r7(e,t,jS)})})}function $S(n,e){return n?"string"==typeof n?vs(n):n:vs(e)}function rp(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||Pg(n,e)===jS)&&t}function Pg(n,e){let r=function lNe(n,e){let t;return n in Wa&&e in Wa[n]&&(t=Wa[n][e]),t}(n.getCode(),e.getCode());return r||(r=xq),r}function Og(n,e){return Pg(vs(n),vs(e))}function Fg(n,e,t){return Og(e,t)(n,void 0,n.length)}let Os=null;function Tq(){return Os}function qS(n,e){return n}function Uc(n,e){return WS&&!q8(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(WS=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function YS(n,e){return n}function c1(n,e){return n}function mNe(n,e){return n}function Eq(n,e,t){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,c=e?0:s[1]*r,u=a?a[0]:0,d=a?a[1]:0;let h=n[0]+l/2+u,f=n[2]-l/2+u,p=n[1]+c/2+d,m=n[3]-c/2+d;h>f&&(h=(f+h)/2,f=h),p>m&&(p=(m+p)/2,m=p);let g=wr(i[0],h,f),_=wr(i[1],p,m);if(o&&t&&r){const v=30*r;g+=-v*Math.log(1+Math.max(0,h-i[0])/v)+v*Math.log(1+Math.max(0,i[0]-f)/v),_+=-v*Math.log(1+Math.max(0,p-i[1])/v)+v*Math.log(1+Math.max(0,i[1]-m)/v)}return[g,_]}}function _Ne(n){return n}function XS(n,e,t,i){const r=di(e)/t[0],s=Ua(e)/t[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function ZS(n,e,t){let i=Math.min(n,e);return i*=Math.log(1+50*Math.max(0,n/e-1))/50+1,t&&(i=Math.max(i,t),i/=Math.log(1+50*Math.max(0,t/n-1))/50+1),wr(i,t/2,2*e)}function Dq(n,e,t,i,r){return t=void 0===t||t,function(s,o,a,l){if(void 0!==s){const c=i?XS(n,i,a,r):n;return t&&l?ZS(s,c,e):wr(s,e,c)}}}function KS(n){if(void 0!==n)return 0}function Aq(n){if(void 0!==n)return n}function Rq(n){return Math.pow(n,3)}function sp(n){return 1-Rq(1-n)}function QS(n){return 3*n*n-2*n*n*n}function wNe(n){return n}function u1(n,e,t,i,r,s){s=s||[];let o=0;for(let a=e;a<t;a+=i){const l=n[a],c=n[a+1];s[o++]=r[0]*l+r[2]*c+r[4],s[o++]=r[1]*l+r[3]*c+r[5]}return s&&s.length!=o&&(s.length=o),s}function Iq(n,e,t,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],u=s[1];let d=0;for(let h=e;h<t;h+=i){const f=n[h]-c,p=n[h+1]-u;o[d++]=c+f*a-p*l,o[d++]=u+f*l+p*a;for(let m=h+2;m<h+i;++m)o[d++]=n[m]}return o&&o.length!=d&&(o.length=d),o}!function gNe(){Cq(_q),Cq(yq),function fNe(n,e,t,i){n.forEach(function(r){e.forEach(function(s){r7(r,s,t),r7(s,r,i)})})}(yq,_q,nNe,iNe)}();const kq=[1,0,0,1,0,0],TNe=class SNe extends wl{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function HOe(n){let t,i,r,e=!1;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!t1(s,i))&&(e=!0,r=this,i=s,t=n.apply(this,arguments)),t}}(function(e,t,i){if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Mn()}closestPointXY(e,t,i,r){return Mn()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return this.closestPointXY(e[0],e[1],t=t||[NaN,NaN],1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Mn()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&q2(t),this.extentRevision_=this.getRevision()}return function dFe(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}(this.extent_,e)}rotate(e,t){Mn()}scale(e,t,i){Mn()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Mn()}getType(){return Mn()}applyTransform(e){Mn()}intersectsExtent(e){return Mn()}translate(e,t){Mn()}transform(e,t){const i=vs(e),r="tile-pixels"==i.getUnits()?function(s,o,a){const l=i.getExtent(),c=i.getWorldExtent(),u=Ua(c)/Ua(l);return Bc(kq,c[0],c[3],u,-u,0,0,0),u1(s,0,s.length,a,kq,o),Og(i,t)(s,o,a)}:Og(i,t);return this.applyTransform(r),this}};function Lq(n){let e;return"XY"==n?e=2:"XYZ"==n||"XYM"==n?e=3:"XYZM"==n&&(e=4),e}const JS=class ENe extends TNe{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return function oFe(n,e,t,i,r){return q$(q2(r),n,e,t,i)}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Mn()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Lq(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Mn()}setLayout(e,t,i){let r;if(e)r=Lq(e);else{for(let s=0;s<i;++s){if(0===t.length)return this.layout="XY",void(this.stride=2);t=t[0]}r=t.length,e=function DNe(n){let e;return 2==n?e="XY":3==n?e="XYZ":4==n&&(e="XYZM"),e}(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();Iq(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){void 0===t&&(t=e),i||(i=X2(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();(function CNe(n,e,t,i,r,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let d=e;d<t;d+=i){const f=n[d+1]-c;a[u++]=l+r*(n[d]-l),a[u++]=c+s*f;for(let p=d+2;p<d+i;++p)a[u++]=n[p]}a&&a.length!=u&&(a.length=u)})(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();(function MNe(n,e,t,i,r,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=i){o[a++]=n[l]+r,o[a++]=n[l+1]+s;for(let c=l+2;c<l+i;++c)o[a++]=n[c]}o&&o.length!=a&&(o.length=a)})(i,0,i.length,r,e,t,i),this.changed()}}};function Pq(n,e,t,i,r,s,o){const a=n[e],l=n[e+1],c=n[t]-a,u=n[t+1]-l;let d;if(0===c&&0===u)d=e;else{const h=((r-a)*c+(s-l)*u)/(c*c+u*u);if(h>1)d=t;else{if(h>0){for(let f=0;f<i;++f)o[f]=s1(n[e+f],n[t+f],h);return void(o.length=i)}d=e}}for(let h=0;h<i;++h)o[h]=n[d+h];o.length=i}function Oq(n,e,t,i,r){let s=n[e],o=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],l=n[e+1],c=K2(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function Nq(n,e,t,i,r,s,o,a,l,c,u){if(e==t)return c;let d,h;if(0===r){if(h=K2(o,a,n[e],n[e+1]),h<c){for(d=0;d<i;++d)l[d]=n[e+d];return l.length=i,h}return c}u=u||[NaN,NaN];let f=e+i;for(;f<t;)if(Pq(n,f-i,f,i,o,a,u),h=K2(o,a,u[0],u[1]),h<c){for(c=h,d=0;d<i;++d)l[d]=u[d];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(h)-Math.sqrt(c))/r|0,1);if(s&&(Pq(n,t-i,e,i,o,a,u),h=K2(o,a,u[0],u[1]),h<c)){for(c=h,d=0;d<i;++d)l[d]=u[d];l.length=i}return c}function Bq(n,e,t,i){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<i;++a)n[e++]=o[a]}return e}function d1(n,e){return e*Math.round(n/e)}function LNe(n,e,t,i,r,s,o){if(e==t)return o;let c,u,a=d1(n[e],r),l=d1(n[e+1],r);e+=i,s[o++]=a,s[o++]=l;do{if(c=d1(n[e],r),u=d1(n[e+1],r),(e+=i)==t)return s[o++]=c,s[o++]=u,o}while(c==a&&u==l);for(;e<t;){const d=d1(n[e],r),h=d1(n[e+1],r);if(e+=i,d==c&&h==u)continue;const f=c-a,p=u-l,m=d-a,g=h-l;f*g==p*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(p<0&&g<p||p==g||p>0&&g>p)?(c=d,u=h):(s[o++]=c,s[o++]=u,a=c,l=u,c=d,u=h)}return s[o++]=c,s[o++]=u,o}function op(n,e,t,i,r){r=void 0!==r?r:[];let s=0;for(let o=e;o<t;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function a7(n,e,t,i,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=op(n,e,l,i,r[s]),e=l}return r.length=s,r}function Uq(n,e,t,i,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=1===l.length&&l[0]===e?[]:a7(n,e,l,i,r[s]),e=l[l.length-1]}return r.length=s,r}function Gq(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],l=n[e+1];r+=o*a-s*l,s=a,o=l}return r/2}class l7 extends JS{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}clone(){return new l7(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<W$(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Oq(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Nq(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return Gq(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return op(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=function eT(n,e,t,i,r,s,o){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)s[o++]=n[e],s[o++]=n[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,t-i];let u=0;for(;c.length>0;){const d=c.pop(),h=c.pop();let f=0;const p=n[h],m=n[h+1],g=n[d],_=n[d+1];for(let v=h+i;v<d;v+=i){const x=mFe(n[v],n[v+1],p,m,g,_);x>f&&(u=v,f=x)}f>r&&(l[(u-e)/i]=1,h+i<u&&c.push(h,u),u+i<d&&c.push(u,d))}for(let d=0;d<a;++d)l[d]&&(s[o++]=n[e+d*i],s[o++]=n[e+d*i+1]);return o}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new l7(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Bq(this.flatCoordinates,0,e,this.stride),this.changed()}}const jq=l7;class tT extends JS{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new tT(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=K2(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return function sFe(n,e){const t=n[0],i=n[1];return Ml(t,i,t,i,e)}(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return j$(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function RNe(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}(this.flatCoordinates,0,e),this.changed()}}const $q=tT;function PNe(n,e,t,i,r){return!Y$(r,function(o){return!h1(n,e,t,i,o[0],o[1])})}function h1(n,e,t,i,r,s){let o=0,a=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const c=n[e],u=n[e+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return 0!==o}function nT(n,e,t,i,r,s){if(0===t.length||!h1(n,e,t[0],i,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(h1(n,t[o-1],t[o],i,r,s))return!1;return!0}function iT(n,e,t,i,r){const s=q$([1/0,1/0,-1/0,-1/0],n,e,t,i);return!!eo(r,s)&&(!!($2(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3])||function ONe(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}(n,e,t,i,function(o,a){return function hFe(n,e,t){let i=!1;const r=ES(n,e),s=ES(n,t);if(1===r||1===s)i=!0;else{const o=n[0],a=n[1],l=n[2],c=n[3],h=t[0],f=t[1],p=(f-e[1])/(h-e[0]);let m,g;!!(2&s)&&!(2&r)&&(m=h-(f-c)/p,i=m>=o&&m<=l),!i&&!!(4&s)&&!(4&r)&&(g=f-(h-l)*p,i=g>=a&&g<=c),!i&&!!(8&s)&&!(8&r)&&(m=h-(f-a)/p,i=m>=o&&m<=l),!i&&16&s&&!(16&r)&&(g=f-(h-o)*p,i=g>=a&&g<=c)}return i}(r,o,a)}))}function Yq(n,e,t,i,r){return!!(iT(n,e,t,i,r)||h1(n,e,t,i,r[0],r[1])||h1(n,e,t,i,r[0],r[3])||h1(n,e,t,i,r[2],r[1])||h1(n,e,t,i,r[2],r[3]))}function FNe(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function rT(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],l=n[e+1];r+=(a-s)*(l+o),s=a,o=l}return 0===r?void 0:r>0}function sT(n,e,t,i,r){r=void 0!==r&&r;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=rT(n,e,a,i);(0===s?r&&l||!r&&!l:r&&!l||!r&&l)&&FNe(n,e,a,i),e=a}return e}class f1 extends JS{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==t&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?P$(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new f1(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<W$(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function Fq(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=Oq(n,e,a,i,r),e=a}return r}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function zq(n,e,t,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let d=0,h=t.length;d<h;++d){const f=t[d];c=Nq(n,e,f,i,r,s,o,a,l,c,u),e=f}return c}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return nT(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return function Wq(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=Gq(n,e,a,i),e=a}return r}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),sT(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,a7(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=X2(this.getExtent());this.flatInteriorPoint_=function qq(n,e,t,i,r,s,o){let a,l,c,u,d,h,f;const p=r[s+1],m=[];for(let v=0,y=t.length;v<y;++v){const b=t[v];for(u=n[b-i],h=n[b-i+1],a=e;a<b;a+=i)d=n[a],f=n[a+1],(p<=h&&f<=p||h<=p&&p<=f)&&(c=(p-h)/(f-h)*(d-u)+u,m.push(c)),u=d,h=f}let g=NaN,_=-1/0;for(m.sort(e1),u=m[0],a=1,l=m.length;a<l;++a){d=m[a];const v=Math.abs(d-u);v>_&&(c=(u+d)/2,nT(n,e,t,i,c,p)&&(g=c,_=v)),u=d}return isNaN(g)&&(g=r[s]),o?(o.push(g,p,_),o):[g,p,_]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new $q(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new jq(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new jq(t.slice(s,l),e);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;!function Zq(n,e,t,i,r){r=void 0!==r&&r;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=rT(n,e,a,i);if(0===s){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}(e,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=sT(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=e,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=function Hq(n,e,t,i,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=LNe(n,e,u,i,r,s,o),a.push(o),e=u}return o}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new f1(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return function Xq(n,e,t,i,r){if(!Yq(n,e,t[0],i,r))return!1;if(1===t.length)return!0;for(let s=1,o=t.length;s<o;++s)if(PNe(n,t[s-1],t[s],i,r)&&!iT(n,t[s-1],t[s],i,r))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=function Vq(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=Bq(n,e,t[o],i);r[s++]=l,e=l}return r.length=s,r}(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const NNe=f1;function Kq(n){const e=n[0],t=n[1],i=n[2],r=n[3],s=[e,t,e,r,i,r,i,t,e,t];return new f1(s,"XY",[s.length])}function c7(n,e){setTimeout(function(){n(e)},0)}function GNe(n){return!(n.sourceCenter&&n.targetCenter&&!q8(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function aT(n,e,t,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=n[0]*s-n[1]*o,l=n[1]*s+n[0]*o;return a+=(e[0]/2-t[0])*i,l+=(t[1]-e[1]/2)*i,o=-o,[a*s-l*o,l*s+a*o]}const rd=class BNe extends wl{constructor(e){super(),e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.projection_=$S(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,e.projection&&function bq(n){WS=!(void 0===n||n)}(),e.center&&(e.center=Uc(e.center)),e.extent&&(e.extent=c1(e.extent)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in Ga)delete t[a];this.setProperties(t,!0);const i=function HNe(n){let e,t,i,o=void 0!==n.minZoom?n.minZoom:0,a=void 0!==n.maxZoom?n.maxZoom:28;const l=void 0!==n.zoomFactor?n.zoomFactor:2,c=void 0!==n.multiWorld&&n.multiWorld,u=void 0===n.smoothResolutionConstraint||n.smoothResolutionConstraint,d=void 0!==n.showFullExtent&&n.showFullExtent,h=$S(n.projection,"EPSG:3857"),f=h.getExtent();let p=n.constrainOnlyCenter,m=n.extent;if(!c&&!m&&h.isGlobal()&&(p=!1,m=f),void 0!==n.resolutions){const g=n.resolutions;t=g[o],i=void 0!==g[a]?g[a]:g[g.length-1],e=n.constrainResolution?function vNe(n,e,t,i){return e=void 0===e||e,function(r,s,o,a){if(void 0!==r){const l=n[0],c=n[n.length-1],u=t?XS(l,t,o,i):l;if(a)return e?ZS(r,u,c):wr(r,c,u);const d=Math.min(u,r),h=Math.floor(bS(n,d,s));return n[h]>u&&h<n.length-1?n[h+1]:n[h]}}}(g,u,!p&&m,d):Dq(t,i,u,!p&&m,d)}else{const _=(f?Math.max(di(f),Ua(f)):360*a1.degrees/h.getMetersPerUnit())/256/Math.pow(2,0),v=_/Math.pow(2,28);t=n.maxResolution,void 0!==t?o=0:t=_/Math.pow(l,o),i=n.minResolution,void 0===i&&(i=void 0!==n.maxZoom?void 0!==n.maxResolution?t/Math.pow(l,a):_/Math.pow(l,a):v),a=o+Math.floor(Math.log(t/i)/Math.log(l)),i=t/Math.pow(l,a-o),e=n.constrainResolution?function yNe(n,e,t,i,r,s){return i=void 0===i||i,t=void 0!==t?t:0,function(o,a,l,c){if(void 0!==o){const u=r?XS(e,r,l,s):e;if(c)return i?ZS(o,u,t):wr(o,t,u);const d=1e-9,h=Math.ceil(Math.log(e/u)/Math.log(n)-d),f=-a*(.5-d)+.5,p=Math.min(u,o),m=Math.floor(Math.log(e/p)/Math.log(n)+f),g=Math.max(h,m);return wr(e/Math.pow(n,g),t,u)}}}(l,t,i,u,!p&&m,d):Dq(t,i,u,!p&&m,d)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:l}}(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=function VNe(n){if(void 0!==n.extent)return Eq(n.extent,n.constrainOnlyCenter,void 0===n.smoothExtentConstraint||n.smoothExtentConstraint);const e=$S(n.projection,"EPSG:3857");if(!0!==n.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Eq(t,!1,!1)}return _Ne}(e),s=i.constraint,o=function UNe(n){if(void 0===n.enableRotation||n.enableRotation){const t=n.constrainRotation;return void 0===t||!0===t?function xNe(n){return n=n||H8(5),function(e,t){return t?e:void 0!==e?Math.abs(e)<=n?0:e:void 0}}():!1===t?Aq:"number"==typeof t?function bNe(n){const e=2*Math.PI/n;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(t):Aq}return KS}(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenter();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution();this.setCenterInternal([i[0]+s/2*(r[3]-t[3]+t[1]-r[1]),i[1]-s/2*(r[0]-t[0]+t[2]-r[2])])}}getUpdatedOptions_(e){const t=this.getProperties();return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=Uc(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Uc(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let i,t=arguments.length;t>1&&"function"==typeof arguments[t-1]&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),void 0!==u.zoom?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),void 0!==u.rotation&&this.setRotation(u.rotation)}if(r===t)return void(i&&c7(i,!0));let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<t;++r){const u=arguments[r],d={start:s,complete:!1,anchor:u.anchor,duration:void 0!==u.duration?u.duration:1e3,easing:u.easing||QS,callback:i};if(u.center&&(d.sourceCenter=o,d.targetCenter=u.center.slice(),o=d.targetCenter),void 0!==u.zoom?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(u.zoom),a=d.targetResolution):u.resolution&&(d.sourceResolution=a,d.targetResolution=u.resolution,a=d.targetResolution),void 0!==u.rotation){d.sourceRotation=l;const h=Q2(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+h,l=d.targetRotation}GNe(d)?d.complete=!0:s+=d.duration,c.push(d)}this.animations_.push(c),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let e;this.setHint(0,-this.hints_[0]);for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&c7(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=e-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const d=l.easing(u);if(l.sourceCenter){const h=l.sourceCenter[0],f=l.sourceCenter[1],p=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter,this.targetCenter_=[h+d*(p-h),f+d*(m-f)]}if(l.sourceResolution&&l.targetResolution){const h=1===d?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(h,0,f,!0);this.targetCenter_=this.calculateCenterZoom(p,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=h,this.applyTargetState_(!0)}if(void 0!==l.sourceRotation&&void 0!==l.targetRotation){const h=1===d?Q2(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(h,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=h}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&c7(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return void 0!==r&&(i=[r[0]-t[0],r[1]-t[1]],LS(i,e-this.getRotation()),function wFe(n,e){n[0]+=+e[0],n[1]+=+e[1]}(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),s=this.getResolution();return void 0!==r&&void 0!==s&&(i=[t[0]-e*(t[0]-r[0])/s,t[1]-e*(t[1]-r[1])/s]),i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&qS(e,this.getProjection())}getCenterInternal(){return this.get(Ga.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){return YS(this.calculateExtentInternal(e),this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();_n(t,1);const i=this.getResolution();_n(void 0!==i,2);const r=this.getRotation();return _n(void 0!==r,3),DS(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Ga.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(c1(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=di(e)/t[0],r=Ua(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=Math.log(t/this.minResolution_)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get(Ga.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),s=Math.log(i/this.minResolution_)/t;return function(o){return Math.log(i/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=aT(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,i)}return{center:r.slice(0),projection:void 0!==e?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getZoom(){let e;const t=this.getResolution();return void 0!==t&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let i,r,t=this.minZoom_||0;if(this.resolutions_){const s=bS(this.resolutions_,e,1);t=s,i=this.resolutions_[s],r=s==this.resolutions_.length-1?2:i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=wr(Math.floor(e),0,this.resolutions_.length-2);return this.resolutions_[t]/Math.pow(this.resolutions_[t]/this.resolutions_[t+1],wr(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(_n(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,24),Array.isArray(e))_n(!RS(e),25),i=Kq(c1(e,this.getProjection()));else if("Circle"===e.getType()){const r=c1(e.getExtent(),this.getProjection());i=Kq(r),i.rotate(this.getRotation(),X2(r))}else{const r=Tq();i=r?e.clone().transform(r,this.getProjection()):e}this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let d=0,h=s.length;d<h;d+=o){const f=s[d]*i-s[d+1]*r,p=s[d]*r+s[d+1]*i;a=Math.min(a,f),l=Math.min(l,p),c=Math.max(c,f),u=Math.max(u,p)}return[a,l,c,u]}fitInternal(e,t){let i=(t=t||{}).size;i||(i=this.getViewportSizeMinusPadding_());const r=void 0!==t.padding?t.padding:[0,0,0,0],s=void 0!==t.nearest&&t.nearest;let o;o=void 0!==t.minResolution?t.minResolution:void 0!==t.maxZoom?this.getResolutionForZoom(t.maxZoom):0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),d=Math.cos(c),h=X2(a);h[0]+=(r[1]-r[3])/2*l,h[1]+=(r[0]-r[2])/2*l;const m=this.getConstrainedCenter([h[0]*d-h[1]*u,h[1]*d+h[0]*u],l),g=t.callback?t.callback:n1;void 0!==t.duration?this.animateInternal({resolution:l,center:m,duration:t.duration,easing:t.easing},g):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),c7(g,!0))}centerOn(e,t,i){this.centerOnInternal(Uc(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(aT(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),l=aT(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,i);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(e){const t=qS(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Uc(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Uc(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Uc(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(Ga.ROTATION)!==r&&this.set(Ga.ROTATION,r),this.get(Ga.RESOLUTION)!==o&&(this.set(Ga.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Ga.CENTER)||!q8(this.get(Ga.CENTER),a))&&this.set(Ga.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=void 0!==e?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(0===e&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,void this.applyTargetState_();i=i||(0===e?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!q8(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:sp,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(e,t,i){i=i&&Uc(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.setHint(1,-1),this.resolveConstraints(e,t,i)}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}},lT=class WNe extends wl{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){OS(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&OS(this.element);for(let t=0,i=this.listenerKeys.length;t<i;++t)Si(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==n1&&this.listenerKeys.push(Cn(e,"postrender",this.render,this)),e.render())}render(e){}setTarget(e){this.target_="string"==typeof e?document.getElementById(e):e}},$Ne=class jNe extends lT{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==e.collapsible,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const t=void 0!==e.className?e.className:"ol-attribution",i=void 0!==e.tipLabel?e.tipLabel:"Attributions",r=void 0!==e.expandClassName?e.expandClassName:t+"-expand",s=void 0!==e.collapseLabel?e.collapseLabel:"\u203a",o=void 0!==e.collapseClassName?e.collapseClassName:t+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=void 0!==e.label?e.label:"i";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener("click",this.handleClick_.bind(this),!1);const u=this.element;u.className=t+" "+X8+" "+PS+(this.collapsed_&&this.collapsible_?" "+lq:"")+(this.collapsible_?"":" ol-uncollapsible"),u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t={},i=[];let r=!0;const s=e.layerStatesArray;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(!kS(l,e.viewState))continue;const c=l.layer.getSource();if(!c)continue;const u=c.getAttributions();if(!u)continue;const d=u(e);if(d)if(r=r&&!1!==c.getAttributionsCollapsible(),Array.isArray(d))for(let h=0,f=d.length;h<f;++h)d[h]in t||(i.push(d[h]),t[d[h]]=!0);else d in t||(i.push(d),t[d]=!0)}return this.overrideCollapsible_||this.setCollapsible(r),i}updateElement_(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const t=this.collectSourceAttributions_(e),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!t1(t,this.renderedAttributions_)){!function LFe(n){for(;n.lastChild;)n.removeChild(n.lastChild)}(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(lq),this.collapsed_?hq(this.collapseLabel_,this.label_):hq(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}},YNe=class qNe extends lT{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=void 0!==e.className?e.className:"ol-rotate",i=void 0!==e.label?e.label:"\u21e7",r=void 0!==e.compassClassName?e.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener("click",this.handleClick_.bind(this),!1);const l=this.element;l.className=t+" "+X8+" "+PS,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Y8)}handleClick_(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();void 0!==i&&(this.duration_>0&&i%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:sp}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(Y8);s||0!==i?s&&0!==i&&this.element.classList.remove(Y8):this.element.classList.add(Y8)}this.label_.style.transform=r}this.rotation_=i}},ZNe=class XNe extends lT{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=void 0!==e.className?e.className:"ol-zoom",i=void 0!==e.delta?e.delta:1,r=void 0!==e.zoomInClassName?e.zoomInClassName:t+"-in",s=void 0!==e.zoomOutClassName?e.zoomOutClassName:t+"-out",o=void 0!==e.zoomInLabel?e.zoomInLabel:"+",a=void 0!==e.zoomOutLabel?e.zoomOutLabel:"\u2013",l=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",c=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild("string"==typeof o?document.createTextNode(o):o),u.addEventListener("click",this.handleClick_.bind(this,i),!1);const d=document.createElement("button");d.className=s,d.setAttribute("type","button"),d.title=c,d.appendChild("string"==typeof a?document.createTextNode(a):a),d.addEventListener("click",this.handleClick_.bind(this,-i),!1);const f=this.element;f.className=t+" "+X8+" "+PS,f.appendChild(u),f.appendChild(d),this.duration_=void 0!==e.duration?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(void 0!==r){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:sp})):i.setZoom(s)}}};function cT(n,e,t,i){const r=n.getZoom();if(void 0===r)return;const s=n.getConstrainedZoom(r+e),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:void 0!==i?i:250,easing:sp})}const Ng=class QNe extends wl{constructor(e){super(),e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set("active",e)}setMap(e){this.map_=e}},tze=class eze extends Ng{constructor(e){super(),this.delta_=(e=e||{}).delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}handleEvent(e){let t=!1;if(e.type==Xi.DBLCLICK){const i=e.originalEvent,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_;cT(e.map.getView(),o,s,this.duration_),i.preventDefault(),t=!0}return!t}};function uT(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return[t/e,i/e]}const zg=class nze extends Ng{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Xi.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Xi.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Xi.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Xi.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};function dT(n){const e=arguments;return function(t){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](t),i);++r);return i}}const ize=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Jq=function(n){return!n.map.getTargetElement().hasAttribute("tabindex")||function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)}(n)},sze=wg,eY=function(n){const e=n.originalEvent;return 0==e.button&&!(QOe&&JOe&&e.ctrlKey)},tY=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},oze=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},nY=function(n){const e=n.originalEvent,t=e.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t&&!e.target.isContentEditable},hT=function(n){const e=n.originalEvent;return _n(void 0!==e,56),"mouse"==e.pointerType},aze=function(n){const e=n.originalEvent;return _n(void 0!==e,56),e.isPrimary&&0===e.button},cze=class lze extends zg{constructor(e){super({stopDown:R8}),this.kinetic_=(e=e||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const t=e.condition?e.condition:dT(tY,aze);this.condition_=e.onFocusOnly?dT(Jq,t):t,this.noKinetic_=!1}handleDragEvent(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const t=this.targetPointers,i=uT(t);if(t.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();(function SFe(n,e){n[0]*=e,n[1]*=e})(r,o.getResolution()),LS(r,o.getRotation()),o.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=t.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:sp})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},dze=class uze extends zg{constructor(e){e=e||{},super({stopDown:R8}),this.condition_=e.condition?e.condition:ize,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){if(!hT(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===KS)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);void 0!==this.lastAngle_&&i.adjustRotationInternal(-(o-this.lastAngle_)),this.lastAngle_=o}handleUpEvent(e){return!hT(e)||(e.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(e){return!!(hT(e)&&eY(e)&&this.condition_(e))&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},fze=class hze extends yS{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new NNe([r])}getGeometry(){return this.geometry_}};class fT extends zc{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}const mze=class pze extends zg{constructor(e){super(),this.box_=new fze((e=e||{}).className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:eY,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],s=i[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new fT("boxdrag",e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new fT(t?"boxend":"boxcancel",e.coordinate,e)),!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new fT("boxstart",e.coordinate,e)),!0)}onBoxEnd(e){}},_ze=class gze extends mze{constructor(e){super({condition:(e=e||{}).condition?e.condition:oze,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:sp})}},yze=class vze extends Ng{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return tY(t)&&nY(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128}handleEvent(e){let t=!1;if("keydown"==e.type){const i=e.originalEvent,r=i.keyCode;if(this.condition_(e)&&(40==r||37==r||39==r||38==r)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;40==r?c=-a:37==r?l=-a:39==r?l=a:c=a;const u=[l,c];LS(u,o.getRotation()),function JNe(n,e,t){const i=n.getCenterInternal();i&&n.animateInternal({duration:void 0!==t?t:250,easing:wNe,center:n.getConstrainedCenter([i[0]+e[0],i[1]+e[1]])})}(o,u,this.duration_),i.preventDefault(),t=!0}}return!t}},xze=class bze extends Ng{constructor(e){super(),this.condition_=(e=e||{}).condition?e.condition:nY,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100}handleEvent(e){let t=!1;if("keydown"==e.type||"keypress"==e.type){const i=e.originalEvent,r=i.charCode;if(this.condition_(e)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){const s=e.map,o=r=="+".charCodeAt(0)?this.delta_:-this.delta_;cT(s.getView(),o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}},Sze=class Mze extends Ng{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==e.maxDelta?e.maxDelta:1,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=void 0!==e.constrainResolution&&e.constrainResolution;const t=e.condition?e.condition:sze;this.condition_=e.onFocusOnly?dT(Jq,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||"wheel"!==e.type)return!0;const i=e.map,r=e.originalEvent;let s;if(r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),"wheel"==e.type&&(s=r.deltaY,KOe&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=B$),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),0===s)return!1;this.lastDelta_=s;const o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if("trackpad"===this.mode_&&!a.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-wr(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),cT(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},Eze=class Tze extends zg{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=R8),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.lastAngle_){const u=s-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=u}this.lastAngle_=s;const o=e.map,a=o.getView();if(a.getConstraints().rotation===KS)return;const l=o.getViewport().getBoundingClientRect(),c=uT(this.targetPointers);c[0]-=l.left,c[1]-=l.top,this.anchor_=o.getCoordinateFromPixelInternal(c),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_))}handleUpEvent(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}},Aze=class Dze extends zg{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=R8),super(t),this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);void 0!==this.lastDistance_&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();1!=t&&(this.lastScaleDelta_=t);const u=l.getViewport().getBoundingClientRect(),d=uT(this.targetPointers);d[0]-=u.left,d[1]-=u.top,this.anchor_=l.getCoordinateFromPixelInternal(d),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){return!(this.targetPointers.length<2)||(e.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}};function iY(n){return n[0]>0&&n[1]>0}function Lo(n,e){return Array.isArray(n)?n:(void 0===e?e=[n,n]:(e[0]=n,e[1]=n),e)}function rY(n){n instanceof $8?n.setMapInternal(null):n instanceof J8&&n.getLayers().forEach(rY)}function sY(n,e){if(n instanceof $8)n.setMapInternal(e);else if(n instanceof J8){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)sY(t[i],e)}}const Pze=class kze extends wl{constructor(e){super();const t=function Lze(n){let e=null;void 0!==n.keyboardEventTarget&&(e="string"==typeof n.keyboardEventTarget?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&"function"==typeof n.layers.getLayers?n.layers:new J8({layers:n.layers});let r,s,o;return t.layergroup=i,t.target=n.target,t.view=n.view instanceof rd?n.view:new rd,void 0!==n.controls&&(Array.isArray(n.controls)?r=new Cl(n.controls.slice()):(_n("function"==typeof n.controls.getArray,47),r=n.controls)),void 0!==n.interactions&&(Array.isArray(n.interactions)?s=new Cl(n.interactions.slice()):(_n("function"==typeof n.interactions.getArray,48),s=n.interactions)),void 0!==n.overlays?Array.isArray(n.overlays)?o=new Cl(n.overlays.slice()):(_n("function"==typeof n.overlays.getArray,49),o=n.overlays):o=new Cl,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}(e=e||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:B$,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=t.controls||function KNe(n){n=n||{};const e=new Cl;return(void 0===n.zoom||n.zoom)&&e.push(new ZNe(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&e.push(new YNe(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&e.push(new $Ne(n.attributionOptions)),e}(),this.interactions=t.interactions||function Rze(n){n=n||{};const e=new Cl,t=new class wze{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&e.push(new dze),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&e.push(new tze({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&e.push(new cze({onFocusOnly:n.onFocusOnly,kinetic:t})),(void 0===n.pinchRotate||n.pinchRotate)&&e.push(new Eze),(void 0===n.pinchZoom||n.pinchZoom)&&e.push(new Aze({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(e.push(new yze),e.push(new xze({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&e.push(new Sze({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&e.push(new _ze({duration:n.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new class YFe extends class $Fe{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Cg(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){_n(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=e7&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return 0===this.elements_.length}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,s=t[e],o=i[e],a=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<r&&i[c]<i[l]?c:l;t[e]=t[u],i[e]=i[u],e=u}t[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,s=i[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(!(r[a]>o))break;i[t]=i[a],r[t]=r[a],t=a}i[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const s=t.length;let o,a,l;for(a=0;a<s;++a)o=t[a],l=e(o),l==e7?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,t[r++]=o);t.length=r,i.length=r,this.heapify_()}}{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener("change",this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(2===i||3===i||4===i){3!==i&&t.removeEventListener("change",this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r,s,o,i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),0===r&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof rd)&&e.view.then(function(r){i.setView(new rd(r))}),this.controls.addEventListener("add",function(r){r.element.setMap(this)}.bind(this)),this.controls.addEventListener("remove",function(r){r.element.setMap(null)}.bind(this)),this.interactions.addEventListener("add",function(r){r.element.setMap(this)}.bind(this)),this.interactions.addEventListener("remove",function(r){r.element.setMap(null)}.bind(this)),this.overlays_.addEventListener("add",function(r){this.addOverlayInternal_(r.element)}.bind(this)),this.overlays_.addEventListener("remove",function(r){const s=r.element.getId();void 0!==s&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}.bind(this)),this.controls.forEach(function(r){r.setMap(this)}.bind(this)),this.interactions.forEach(function(r){r.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){sY(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,!1!==i.checkWrapped,t,null,void 0!==i.layerFilter?i.layerFilter:wg,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];return function t(i){i.forEach(function(r){r instanceof J8?t(r.getLayers()):e.push(r)})}(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,void 0!==(t=void 0!==t?t:{}).hitTolerance?t.hitTolerance:0,!1!==t.checkWrapped,void 0!==t.layerFilter?t.layerFilter:wg,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const t=this.viewport_.getBoundingClientRect(),i="changedTouches"in e?e.changedTouches[0]:e;return[i.clientX-t.left,i.clientY-t.top]}getTarget(){return this.get("target")}getTargetElement(){const e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null}getCoordinateFromPixel(e){return qS(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?jr(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(e){const t=this.getLayerGroup();if(e instanceof Cl)return void t.setLayers(e);const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Uc(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?jr(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return function ZFe(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return e7;const s=n.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){const i=new nd(t=t||e.type,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if("pointerdown"===i||"wheel"===i||"keydown"===i){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e)){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()===this&&o.getActive()&&this.getTargetElement()&&(!o.handleEvent(e)||e.propagationStopped))break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[0]||o[1]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new tp("loadend",this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new tp("loadstart",this,e))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,i=this.targetChangeHandlerKeys_.length;t<i;++t)Si(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,OS(this.viewport_)}const e=this.getTargetElement();if(e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new HFe(this)),this.mapBrowserEventHandler_=new jFe(this,this.moveTolerance_);for(const r in Xi)this.mapBrowserEventHandler_.addEventListener(Xi[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!V$&&{passive:!1});const t=this.getOwnerDocument().defaultView,i=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[Cn(i,"keydown",this.handleBrowserEvent,this),Cn(i,"keypress",this.handleBrowserEvent,this),Cn(t,"resize",this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Si(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Si(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Cn(e,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Cn(e,"change",this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Si),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new td("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Cn(e,"propertychange",this.render,this),Cn(e,"change",this.render,this),Cn(e,"addlayer",this.handleLayerAdd_,this),Cn(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){rY(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(void 0!==t&&iY(t)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:DS(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Pn(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=DS(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!RS(this.previousExtent_)&&!Tg(s.extent,this.previousExtent_))&&(this.dispatchEvent(new tp("movestart",this,r)),this.previousExtent_=q2(this.previousExtent_)),this.previousExtent_&&!s.viewHints[0]&&!s.viewHints[1]&&!Tg(s.extent,this.previousExtent_)&&(this.dispatchEvent(new tp("moveend",this,s)),G$(s.extent,this.previousExtent_))),this.dispatchEvent(new tp("postrender",this,s)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new td("removelayer",t)),this.set("layergroup",e)}setSize(e){this.set("size",e)}setTarget(e){this.set("target",e)}setView(e){if(!e||e instanceof rd)return void this.set("view",e);this.set("view",new rd);const t=this;e.then(function(i){t.setView(new rd(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),r=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(r)&&!isNaN(s)&&(t=[r,s],!iY(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(t),this.updateViewportSize_()}updateViewportSize_(){const e=this.getView();if(e){let t;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(t=[parseInt(i.width,10),parseInt(i.height,10)]),e.setViewportSize(t)}}},oY=class Oze extends I8{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent("change")}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(2==e.getState())return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(2==e.getState()){e.interimTile=null;break}1==e.getState()?t=e:0==e.getState()?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(3!==this.state&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Mn()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(i){if(-1===i)return 1}else i=t,this.transitionStarts_[e]=i;const r=t-i+1e3/60;return r>=this.transition_?1:Rq(r/this.transition_)}inTransition(e){return!!this.transition_&&-1!==this.transitionStarts_[e]}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}};function pT(n,e,t){const i=n;let r=!0,s=!1,o=!1;const a=[k8(i,"load",function(){o=!0,s||e()})];return i.src&&eFe?(s=!0,i.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():t())})):a.push(k8(i,"error",t)),function(){r=!1,a.forEach(Si)}}const aY=class Fze extends oY{constructor(e,t,i,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function Nze(){const n=ko(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}(),this.changed()}handleImageLoad_(){const e=this.image_;this.state=e.naturalWidth&&e.naturalHeight?2:4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=pT(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};let mT;const cY=[];function uY(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function gT(n,e){return Math.abs(n[4*e]-210)>2||Math.abs(n[4*e+3]-191.25)>2}function dY(n,e,t,i){const r=Fg(t,e,n);let s=wq(e,i,t);const o=e.getMetersPerUnit();void 0!==o&&(s*=o);const a=n.getMetersPerUnit();void 0!==a&&(s/=a);const l=n.getExtent();if(!l||F8(l,r)){const c=wq(n,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}const _T=class jze extends oY{constructor(e,t,i,r,s,o,a,l,c,u,d,h){super(s,0,{interpolate:!!h}),this.renderEdges_=void 0!==d&&d,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const f=r.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const g=p?Z2(f,p):f;if(0===N8(g))return void(this.state=4);const _=e.getExtent();_&&(m=m?Z2(m,_):_);const v=r.getResolution(this.wrappedTileCoord_[0]),y=function Gze(n,e,t,i){const r=X2(t);let s=dY(n,e,r,i);return(!isFinite(s)||s<=0)&&Y$(t,function(o){return s=dY(n,e,o,i),isFinite(s)&&s>0}),s}(e,i,g,v);if(!isFinite(y)||y<=0)return void(this.state=4);if(this.triangulation_=new class Vze{constructor(e,t,i,r,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=Og(this.targetProj_,this.sourceProj_);this.transformInv_=function(v){const y=v[0]+"/"+v[1];return a[y]||(a[y]=l(v)),a[y]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&di(r)==di(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?di(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?di(this.targetProj_.getExtent()):null;const c=r1(i),u=V8(i),d=B8(i),h=z8(i),f=this.transformInv_(c),p=this.transformInv_(u),m=this.transformInv_(d),g=this.transformInv_(h),_=10+(o?Math.max(0,Math.ceil(Math.log2(N8(i)/(o*o*256*256)))):0);if(this.addQuad_(c,u,d,h,f,p,m,g,_),this.wrapsXInSource_){let v=1/0;this.triangles_.forEach(function(y,b,x){v=Math.min(v,y.source[0][0],y.source[1][0],y.source[2][0])}),this.triangles_.forEach(function(y){if(Math.max(y.source[0][0],y.source[1][0],y.source[2][0])-v>this.sourceWorldWidth_/2){const b=[[y.source[0][0],y.source[0][1]],[y.source[1][0],y.source[1][1]],[y.source[2][0],y.source[2][1]]];b[0][0]-v>this.sourceWorldWidth_/2&&(b[0][0]-=this.sourceWorldWidth_),b[1][0]-v>this.sourceWorldWidth_/2&&(b[1][0]-=this.sourceWorldWidth_),b[2][0]-v>this.sourceWorldWidth_/2&&(b[2][0]-=this.sourceWorldWidth_);const x=Math.min(b[0][0],b[1][0],b[2][0]);Math.max(b[0][0],b[1][0],b[2][0])-x<this.sourceWorldWidth_/2&&(y.source=b)}}.bind(this))}a={}}addTriangle_(e,t,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,i]})}addQuad_(e,t,i,r,s,o,a,l,c){const u=U$([s,o,a,l]),d=this.sourceWorldWidth_?di(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&d>.5&&d<1;let p=!1;if(c>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(p=di(U$([e,t,i,r]))/this.targetWorldWidth_>.25||p),!f&&this.sourceProj_.isGlobal()&&d&&(p=d>.25||p)),!p&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!eo(u,this.maxSourceExtent_))return;let m=0;if(!(p||isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])))if(c>0)p=!0;else if(m=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(l[0])&&isFinite(l[1])?0:1),1!=m&&2!=m&&4!=m&&8!=m)return;if(c>0){if(!p){const _=this.transformInv_([(e[0]+i[0])/2,(e[1]+i[1])/2]);let v;v=f?(Q2(s[0],h)+Q2(a[0],h))/2-Q2(_[0],h):(s[0]+a[0])/2-_[0];const y=(s[1]+a[1])/2-_[1];p=v*v+y*y>this.errorThresholdSquared_}if(p){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const g=[(t[0]+i[0])/2,(t[1]+i[1])/2],_=this.transformInv_(g),v=[(r[0]+e[0])/2,(r[1]+e[1])/2],y=this.transformInv_(v);this.addQuad_(e,t,g,v,s,o,_,y,c-1),this.addQuad_(v,g,i,r,y,_,a,l,c-1)}else{const g=[(e[0]+t[0])/2,(e[1]+t[1])/2],_=this.transformInv_(g),v=[(i[0]+r[0])/2,(i[1]+r[1])/2],y=this.transformInv_(v);this.addQuad_(e,g,v,r,s,_,y,l,c-1),this.addQuad_(g,t,i,v,_,o,a,y,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&m)&&this.addTriangle_(e,i,r,s,a,l),0==(14&m)&&this.addTriangle_(e,i,t,s,a,o),m&&(0==(13&m)&&this.addTriangle_(t,r,e,o,l,s),0==(7&m)&&this.addTriangle_(t,r,i,o,l,a))}calculateSourceExtent(){const e=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(t,i,r){const s=t.source;Y2(e,s[0]),Y2(e,s[1]),Y2(e,s[2])}),e}getTriangles(){return this.triangles_}}(e,i,g,m,y*(void 0!==u?u:.5),v),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=t.getZForResolution(y);let x=this.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(x[1]=wr(x[1],m[1],m[3]),x[3]=wr(x[3],m[1],m[3])):x=Z2(x,m)),N8(x)){const M=t.getTileRangeForExtentAndZ(x,this.sourceZ_);for(let R=M.minX;R<=M.maxX;R++)for(let w=M.minY;w<=M.maxY;w++){const E=c(this.sourceZ_,R,w,a);E&&this.sourceTiles_.push(E)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(function(t,i,r){t&&2==t.getState()&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=3;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function Wze(n,e,t,i,r,s,o,a,l,c,u,d){const h=ko(Math.round(t*n),Math.round(t*e),cY);if(d||(h.imageSmoothingEnabled=!1),0===l.length)return h.canvas;function f(b){return Math.round(b*t)/t}h.scale(t,t),h.globalCompositeOperation="lighter";const p=[1/0,1/0,-1/0,-1/0];l.forEach(function(b,x,M){!function aFe(n,e){e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3])}(p,b.extent)});const m=di(p),g=Ua(p),_=ko(Math.round(t*m/i),Math.round(t*g/i));d||(_.imageSmoothingEnabled=!1);const v=t/i;l.forEach(function(b,x,M){const R=b.extent[0]-p[0],w=-(b.extent[3]-p[3]),E=di(b.extent),P=Ua(b.extent);b.image.width>0&&b.image.height>0&&_.drawImage(b.image,c,c,b.image.width-2*c,b.image.height-2*c,R*v,w*v,E*v,P*v)});const y=r1(o);return a.getTriangles().forEach(function(b,x,M){const R=b.source,w=b.target;let E=R[0][0],P=R[0][1],Y=R[1][0],J=R[1][1],q=R[2][0],I=R[2][1];const G=f((w[0][0]-y[0])/s),k=f(-(w[0][1]-y[1])/s),F=f((w[1][0]-y[0])/s),N=f(-(w[1][1]-y[1])/s),V=f((w[2][0]-y[0])/s),$=f(-(w[2][1]-y[1])/s),te=E,j=P;E=0,P=0,Y-=te,J-=j,q-=te,I-=j;const se=function gFe(n){const e=n.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const l=Math.abs(n[a][i]);l>s&&(s=l,r=a)}if(0===s)return null;const o=n[r];n[r]=n[i],n[i]=o;for(let a=i+1;a<e;a++){const l=-n[a][i]/n[i][i];for(let c=i;c<e+1;c++)i==c?n[a][c]=0:n[a][c]+=l*n[i][c]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}([[Y,J,0,0,F-G],[q,I,0,0,V-G],[0,0,Y,J,N-k],[0,0,q,I,$-k]]);if(se){if(h.save(),h.beginPath(),function Uze(){if(void 0===mT){const n=document.createElement("canvas").getContext("2d");n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",uY(n,4,5,4,0),uY(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;mT=gT(e,0)||gT(e,4)||gT(e,8)}return mT}()||!d){h.moveTo(F,N);const Ee=4,ue=G-F,Ie=k-N;for(let Le=0;Le<Ee;Le++)h.lineTo(F+f((Le+1)*ue/Ee),N+f(Le*Ie/(Ee-1))),Le!=Ee-1&&h.lineTo(F+f((Le+1)*ue/Ee),N+f((Le+1)*Ie/(Ee-1)));h.lineTo(V,$)}else h.moveTo(F,N),h.lineTo(G,k),h.lineTo(V,$);h.clip(),h.transform(se[0],se[2],se[1],se[3],G,k),h.translate(p[0]-te,p[3]-j),h.scale(i/t,-i/t),h.drawImage(_.canvas,0,0),h.restore()}}),u&&(h.save(),h.globalCompositeOperation="source-over",h.strokeStyle="black",h.lineWidth=1,a.getTriangles().forEach(function(b,x,M){const R=b.target,w=(R[0][0]-y[0])/s,E=-(R[0][1]-y[1])/s,P=(R[1][0]-y[0])/s,Y=-(R[1][1]-y[1])/s,J=(R[2][0]-y[0])/s,q=-(R[2][1]-y[1])/s;h.beginPath(),h.moveTo(P,Y),h.lineTo(w,E),h.lineTo(J,q),h.closePath(),h.stroke()}),h.restore()),h.canvas}(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(t,i,r){const s=t.getState();if(0==s||1==s){e++;const o=Cn(t,"change",function(a){const l=t.getState();(2==l||3==l||4==l)&&(Si(o),e--,0===e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,r){0==t.getState()&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Si),this.sourcesListenerKeys_=null}release(){this.canvas_&&(dq(this.canvas_.getContext("2d")),cY.push(this.canvas_),this.canvas_=null),super.release()}};function hY(n,e,t,i){return void 0!==i?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function Bg(n,e,t){return n+"/"+e+"/"+t}function fY(n){return Bg(n[0],n[1],n[2])}const pY=class Kze extends class $ze{constructor(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return _n(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return _n(void 0!==t,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let i,t=0;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let i,t=0;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){_n(!(e in this.entries_),16);const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const i=function Yze(n){return n.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(r){r.tileCoord[0]!==i&&(this.remove(fY(r.tileCoord)),r.release())}.bind(this))}};function mY(n){return n?Array.isArray(n)?function(e){return n}:"function"==typeof n?n:function(e){return[n]}:null}const gY=class Qze extends wl{constructor(e){super(),this.projection=vs(e.projection),this.attributions_=mY(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:"ready",this.wrapX_=void 0!==e.wrapX&&e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return Mn()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=mY(e),this.changed()}setState(e){this.state_=e,this.changed()}};class _Y{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function ap(n,e,t,i,r){return void 0!==r?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new _Y(n,e,t,i)}const vY=_Y,Jze=[0,0,0],yY=class eBe{constructor(e){let t;if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,_n(function VOe(n,e,t){const i=e||e1;return n.every(function(r,s){if(0===s)return!0;const o=i(n[s-1],r);return!(o>0||t&&0===o)})}(this.resolutions_,function(r,s){return s-r},!0),17),!e.origins)for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(t){if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}else t=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,_n(this.origins_.length==this.resolutions_.length,20));const i=e.extent;void 0!==i&&!this.origin_&&!this.origins_&&(this.origin_=r1(i)),_n(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,_n(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:256,_n(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map(function(r,s){const o=new vY(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([t,s,a])}forEachTileCoordParentTileRange(e,t,i,r){let s,o,a,l=null,c=e[0]-1;for(2===this.zoomFactor_?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);c>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),a=Math.floor(a/2),s=ap(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,c,i),t(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){const s=2*e[1],o=2*e[2];return ap(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return ap(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-r),c=Math.floor(s*l),u=Math.floor(o*l);return t<r?ap(c,c,u,u,i):ap(c,Math.floor(l*(s+1))-1,u,Math.floor(l*(o+1))-1,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeExtent(e,t,i){const r=this.getOrigin(e),s=this.getResolution(e),o=Lo(this.getTileSize(e),this.tmpSize_);return Ml(r[0]+t.minX*o[0]*s,r[1]+t.minY*o[1]*s,r[0]+(t.maxX+1)*o[0]*s,r[1]+(t.maxY+1)*o[1]*s,i)}getTileRangeForExtentAndZ(e,t,i){const r=Jze;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,r);const s=r[1],o=r[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,r),ap(s,r[1],o,r[2],i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=Lo(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=Lo(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r;return Ml(o,a,o+s[0]*r,a+s[1]*r,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=Lo(this.getTileSize(o),this.tmpSize_);let u=a*(e-l[0])/i/c[0],d=a*(l[1]-t)/i/c[1];return r?(u=G8(u,5)-1,d=G8(d,5)-1):(u=U8(u,5),d=U8(d,5)),hY(o,u,d,s)}getTileCoordForXYAndZ_(e,t,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=Lo(this.getTileSize(i),this.tmpSize_);let c=(e-o[0])/a/l[0],u=(o[1]-t)/a/l[1];return r?(c=G8(c,5)-1,u=G8(u,5)-1):(c=U8(c,5),u=U8(u,5)),hY(i,c,u,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){return wr(bS(this.resolutions_,e,t||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Yq(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}};function bY(n){let e=n.getDefaultTileGrid();return e||(e=function rBe(n,e,t,i){return function nBe(n,e,t,i){i=void 0!==i?i:"top-left";const r=xY(n,e,t);return new yY({extent:n,origin:uFe(n,i),resolutions:r,tileSize:t})}(yT(n),e,t,i)}(n),n.setDefaultTileGrid(e)),e}function xY(n,e,t,i){e=void 0!==e?e:42,t=Lo(void 0!==t?t:256);const r=Ua(n),s=di(n);i=i>0?i:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function yT(n){let e=(n=vs(n)).getExtent();if(!e){const t=180*a1.degrees/n.getMetersPerUnit();e=Ml(-t,-t,t,t)}return e}class oBe extends zc{constructor(e,t){super(e),this.tile=t}}const aBe=class sBe extends gY{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileGrid&&Lo(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new pY(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let a,l,c,o=!0;for(let u=i.minX;u<=i.maxX;++u)for(let d=i.minY;d<=i.maxY;++d)l=Bg(t,u,d),c=!1,s.containsKey(l)&&(a=s.get(l),c=2===a.getState(),c&&(c=!1!==r(a))),c||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(e,t,i,r,s){return Mn()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:bY(e)}getTileCacheForProjection(e){const t=this.getProjection();return _n(null===t||rp(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),o=Lo(r.getTileSize(e),this.tmpSize);return 1==s?o:function Ize(n,e,t){return void 0===t&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=void 0!==t?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=function tBe(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),s=yT(t);if(F8(s,r))return e;{const o=di(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,n.getTileCoordForCoordAndZ(r,i)}}(i,e,t)),function Zze(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return!s||s.containsXY(i,r)}(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,r){}};function lBe(n,e){const t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const u=e.getFullTileRange(o[0]);return _n(u,55),(u.getHeight()-o[2]-1).toString()})}}class bT extends aBe{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===bT.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Pn(t),r=t.getState();let s;1==r?(this.tileLoadingKeys_[i]=!0,s="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=3==r?"tileloaderror":2==r?"tileloadend":void 0),null!=s&&this.dispatchEvent(new oBe(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=function dBe(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function cBe(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=lBe(n[r],e);return function uBe(n){return 1===n.length?n[0]:function(e,t,i){if(e){const r=function Xze(n){return(n[1]<<n[0])+n[2]}(e),s=Q2(r,n.length);return n[s](e,t,i)}}}(i)}(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const r=Bg(e,t,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const hBe=bT;function pBe(n,e){n.getImage().src=e}const mBe=class fBe extends hBe{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:pBe,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:aY,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!rp(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return!(this.getProjection()&&e&&!rp(this.getProjection(),e))&&super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||rp(t,e)))return this.tileGrid;{const i=Pn(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=bY(e)),this.tileGridForProjection[i]}}getTileCacheForProjection(e){const t=this.getProjection();if(!t||rp(t,e))return this.tileCache;{const i=Pn(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new pY(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}}createTile_(e,t,i,r,s,o){const a=[e,t,i],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,u=new this.tileClass(a,void 0!==c?0:4,void 0!==c?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener("change",this.handleTileChange.bind(this)),u}getTile(e,t,i,r,s){const o=this.getProjection();if(!o||!s||rp(o,s))return this.getTileInternal(e,t,i,r,o||s);{const a=this.getTileCacheForProjection(s),l=[e,t,i];let c;const u=fY(l);a.containsKey(u)&&(c=a.get(u));const d=this.getKey();if(c&&c.key==d)return c;{const h=this.getTileGridForProjection(o),f=this.getTileGridForProjection(s),p=this.getTileCoordForTileUrlFunction(l,s),m=new _T(o,h,s,f,l,p,this.getTilePixelRatio(r),this.getGutter(),function(g,_,v,y){return this.getTileInternal(g,_,v,y,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=d,c?(m.interimTile=c,m.refreshInterimChain(),a.replace(u,m)):a.set(u,m),m}}}getTileInternal(e,t,i,r,s){let o=null;const a=Bg(e,t,i),l=this.getKey();if(this.tileCache.containsKey(a)){if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(e,t,i,r,s,l),o.interimTile=0==c.getState()?c.interimTile:c,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(e,t,i,r,s,l),this.tileCache.set(a,o);return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=vs(e);if(i){const r=Pn(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}},_Be=class gBe extends mBe{constructor(e){const t=void 0!==(e=e||{}).projection?e.projection:"EPSG:3857",i=void 0!==e.tileGrid?e.tileGrid:function iBe(n){const e=n||{},t=e.extent||vs("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:xY(t,e.maxZoom,e.tileSize,e.maxResolution)};return new yY(i)}({extent:yT(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=void 0!==e.gutter?e.gutter:0}getGutter(){return this.gutter_}},bBe=class yBe extends _Be{constructor(e){let t;t=void 0!==(e=e||{}).attributions?e.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,opaque:void 0===e.opaque||e.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:void 0!==e.url?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:e.wrapX,zDirection:e.zDirection})}},wBe=class xBe extends $8{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError)}getPreload(){return this.get("preload")}setPreload(e){this.set("preload",e)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(e){this.set("useInterimTilesOnError",e)}getData(e){return super.getData(e)}},MBe=class CBe extends O${constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return Mn()}getData(e){return null}prepareFrame(e){return Mn()}renderFrame(e,t){return Mn()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return function(r,s){const o=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(t,r,s,o)}.bind(this)}forEachFeatureAtCoordinate(e,t,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){2===e.target.getState()&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return 2!=t&&3!=t&&e.addEventListener("change",this.boundHandleImageChange_),0==t&&(e.load(),t=e.getState()),2==t}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},wY=[];let lp=null;const CY=class TBe extends MBe{constructor(e){super(e),this.container=null,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){let r;lp||function SBe(){const n=document.createElement("canvas");n.width=1,n.height=1,lp=n.getContext("2d")}(),lp.clearRect(0,0,1,1);try{lp.drawImage(e,t,i,1,1,0,0,1,1),r=lp.getImageData(0,0,1,1).data}catch{return lp=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return"function"==typeof i&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&t1(W8(e.style.backgroundColor),W8(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=ko();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=r1(i),s=V8(i),o=B8(i),a=z8(i);jr(t.coordinateToPixelTransform,r),jr(t.coordinateToPixelTransform,s),jr(t.coordinateToPixelTransform,o),jr(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;jr(l,r),jr(l,s),jr(l,o),jr(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const s=new aq(e,this.inversePixelTransform,i,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_("prerender",e,t)}postRender(e,t){this.dispatchRenderEvent_("postrender",e,t)}getRenderTransform(e,t,i,r,s,o,a){const u=r/t;return Bc(this.tempTransform,s/2,o/2,u,-u,-i,-e[0]+a,-e[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}},DBe=class EBe extends CY{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new vY(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),r=t.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!r}getTile(e,t,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(e,t,i,s,o);return 3==c.getState()&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=jr(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!F8(s,r))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,c=i.getRenderSource(),u=c.getTileGridForProjection(l.projection),d=c.getTilePixelRatio(t.pixelRatio);for(let h=u.getZForResolution(l.resolution);h>=u.getMinZoom();--h){const f=u.getTileCoordForCoordAndZ(r,h),p=c.getTile(h,f[1],f[2],o,a);if(!(p instanceof aY||p instanceof _T)||p instanceof _T&&4===p.getState())return null;if(2!==p.getState())continue;const m=u.getOrigin(h),g=Lo(u.getTileSize(h)),_=u.getResolution(h),v=Math.floor(d*((r[0]-m[0])/_-f[1]*g[0])),y=Math.floor(d*((m[1]-r[1])/_-f[2]*g[1])),b=Math.round(d*c.getGutterForProjection(l.projection));return this.getImageData(p.getImage(),v+b,y+b)}return null}loadedTileCallback(e,t,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(e,t,i)}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,c=e.pixelRatio,u=this.getLayer(),d=u.getSource(),h=d.getRevision(),f=d.getTileGridForProjection(s),p=f.getZForResolution(o,d.zDirection),m=f.getResolution(p);let g=e.extent;const _=e.viewState.resolution,v=d.getTilePixelRatio(c),y=Math.round(di(g)/_*c),b=Math.round(Ua(g)/_*c),x=i.extent&&c1(i.extent);x&&(g=Z2(g,c1(i.extent)));const M=m*y/2/v,R=m*b/2/v,w=[a[0]-M,a[1]-R,a[0]+M,a[1]+R],E=f.getTileRangeForExtentAndZ(g,p),P={};P[p]={};const Y=this.createLoadedTileFinder(d,s,P),J=this.tmpExtent,q=this.tmpTileRange_;this.newTiles_=!1;const I=l?AS(r.center,_,l,e.size):void 0;for(let _e=E.minX;_e<=E.maxX;++_e)for(let se=E.minY;se<=E.maxY;++se){if(l&&!f.tileCoordIntersectsViewport([p,_e,se],I))continue;const Ee=this.getTile(p,_e,se,e);if(this.isDrawableTile(Ee)){const Le=Pn(this);if(2==Ee.getState()){P[p][Ee.tileCoord.toString()]=Ee;let qe=Ee.inTransition(Le);qe&&1!==i.opacity&&(Ee.endTransition(Le),qe=!1),!this.newTiles_&&(qe||!this.renderedTiles.includes(Ee))&&(this.newTiles_=!0)}if(1===Ee.getAlpha(Le,e.time))continue}const ue=f.getTileCoordChildTileRange(Ee.tileCoord,q,J);let Ie=!1;ue&&(Ie=Y(p+1,ue)),Ie||f.forEachTileCoordParentTileRange(Ee.tileCoord,Y,q,J)}const G=m/o*c/v;Bc(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,l,-y/2,-b/2);const k=SS(this.pixelTransform);this.useContainer(t,k,this.getBackground(e));const F=this.context,N=F.canvas;O8(this.inversePixelTransform,this.pixelTransform),Bc(this.tempTransform,y/2,b/2,G,G,0,-y/2,-b/2),N.width!=y||N.height!=b?(N.width=y,N.height=b):this.containerReused||F.clearRect(0,0,y,b),x&&this.clipUnrotated(F,e,x),d.getInterpolate()||(F.imageSmoothingEnabled=!1),this.preRender(F,e),this.renderedTiles.length=0;let $,te,j,V=Object.keys(P).map(Number);V.sort(e1),1!==i.opacity||this.containerReused&&!d.getOpaque(e.viewState.projection)?($=[],te=[]):V=V.reverse();for(let _e=V.length-1;_e>=0;--_e){const se=V[_e],Ee=d.getTilePixelSize(se,c,s),Ie=f.getResolution(se)/m,Le=Ee[0]*Ie*G,qe=Ee[1]*Ie*G,Pe=f.getTileCoordForCoordAndZ(r1(w),se),At=f.getTileCoordExtent(Pe),ye=jr(this.tempTransform,[v*(At[0]-w[0])/m,v*(w[3]-At[3])/m]),fe=v*d.getGutterForProjection(s),Re=P[se];for(const rt in Re){const Ne=Re[rt],Oe=Ne.tileCoord,Qe=Pe[1]-Oe[1],ct=Math.round(ye[0]-(Qe-1)*Le),$t=Pe[2]-Oe[2],yn=Math.round(ye[1]-($t-1)*qe),W=Math.round(ye[0]-Qe*Le),O=Math.round(ye[1]-$t*qe),ce=ct-W,De=yn-O,Fe=p===se,Ve=Fe&&1!==Ne.getAlpha(Pn(this),e.time);let _t=!1;if(!Ve)if($){j=[W,O,W+ce,O,W+ce,O+De,W,O+De];for(let B=0,Me=$.length;B<Me;++B)if(p!==se&&se<te[B]){const Ae=$[B];eo([W,O,W+ce,O+De],[Ae[0],Ae[3],Ae[4],Ae[7]])&&(_t||(F.save(),_t=!0),F.beginPath(),F.moveTo(j[0],j[1]),F.lineTo(j[2],j[3]),F.lineTo(j[4],j[5]),F.lineTo(j[6],j[7]),F.moveTo(Ae[6],Ae[7]),F.lineTo(Ae[4],Ae[5]),F.lineTo(Ae[2],Ae[3]),F.lineTo(Ae[0],Ae[1]),F.clip())}$.push(j),te.push(se)}else F.clearRect(W,O,ce,De);this.drawTileImage(Ne,e,W,O,ce,De,fe,Fe),$&&!Ve?(_t&&F.restore(),this.renderedTiles.unshift(Ne)):this.renderedTiles.push(Ne),this.updateUsedTiles(e.usedTiles,d,Ne)}}return this.renderedRevision=h,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!Tg(this.renderedExtent_,w),this.renderedExtent_=w,this.renderedPixelRatio=c,this.renderedProjection=s,this.manageTilePyramid(e,d,f,c,s,g,p,u.getPreload()),this.scheduleExpireCache(e,d),this.postRender(F,e),i.extent&&F.restore(),F.imageSmoothingEnabled=!0,k!==N.style.transform&&(N.style.transform=k),this.container}drawTileImage(e,t,i,r,s,o,a,l){const c=this.getTileImage(e);if(!c)return;const u=Pn(this),d=t.layerStatesArray[t.layerIndex],h=d.opacity*(l?e.getAlpha(u,t.time):1),f=h!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=h),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,r,s,o),f&&this.context.restore(),h!==d.opacity?t.animate=!0:l&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=function(r,s,o){const a=Pn(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const r=Pn(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}manageTilePyramid(e,t,i,r,s,o,a,l,c){const u=Pn(t);u in e.wantedTiles||(e.wantedTiles[u]={});const d=e.wantedTiles[u],h=e.tileQueue,f=i.getMinZoom(),p=e.viewState.rotation,m=p?AS(e.viewState.center,e.viewState.resolution,p,e.size):void 0;let _,v,y,b,x,M,g=0;for(M=f;M<=a;++M)for(v=i.getTileRangeForExtentAndZ(o,M,v),y=i.getResolution(M),b=v.minX;b<=v.maxX;++b)for(x=v.minY;x<=v.maxY;++x)p&&!i.tileCoordIntersectsViewport([M,b,x],m)||(a-M<=l?(++g,_=t.getTile(M,b,x,r,s),0==_.getState()&&(d[_.getKey()]=!0,h.isKeyQueued(_.getKey())||h.enqueue([_,u,i.getTileCoordCenter(_.tileCoord),y])),void 0!==c&&c(_)):t.useTile(M,b,x,s));t.updateCacheSize(g,s)}},RBe=class ABe extends wBe{constructor(e){super(e)}createRenderer(){return new DBe(this)}};var MY=qa(402);class xT{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Lo(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new xT({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Mn()}getImage(e){return Mn()}getHitDetectionImage(){return Mn()}getPixelRatio(e){return 1}getImageState(){return Mn()}getImageSize(){return Mn()}getOrigin(){return Mn()}getSize(){return Mn()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Lo(e)}listenImageChange(e){Mn()}load(){Mn()}unlistenImageChange(e){Mn()}}const SY=xT;function Sl(n){return Array.isArray(n)?tq(n):n}class wT extends SY{constructor(e){super({opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new wT({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const i=this.renderOptions_,r=ko(i.size*e,i.size*e);this.draw_(i,r,e),t=r.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return 2}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(0===t||this.points_===1/0||"bevel"!==e&&"miter"!==e)return t;let r=this.radius_,s=void 0===this.radius2_?r:this.radius2_;if(r<s){const M=r;r=s,s=M}const a=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),l=s*Math.sin(a),u=r-Math.sqrt(s*s-l*l),d=Math.sqrt(l*l+u*u),h=d/l;if("miter"===e&&h<=i)return h*t;const f=t/2/h,p=t/2*(u/d),g=Math.sqrt((r+f)*(r+f)+p*p)-r;if(void 0===this.radius2_||"bevel"===e)return 2*g;const _=r*Math.sin(a),y=s-Math.sqrt(r*r-_*_),x=Math.sqrt(_*_+y*y)/_;return x<=i?2*Math.max(g,x*t/2-s-r):2*g}createRenderOptions(){let s,e=J2,t=0,i=null,r=0,o=0;this.stroke_&&(s=this.stroke_.getColor(),null===s&&(s=Rg),s=Sl(s),o=this.stroke_.getWidth(),void 0===o&&(o=1),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=J2),t=this.stroke_.getMiterLimit(),void 0===t&&(t=10));const a=this.calculateLineJoinSize_(e,o,t),l=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:s,strokeWidth:o,size:Math.ceil(2*l+a),lineDash:i,lineDashOffset:r,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();null===r&&(r=Vc),t.fillStyle=Sl(r),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),i=0;if("string"==typeof t&&(t=W8(t)),null===t?i=1:Array.isArray(t)&&(i=4===t.length?t[3]:1),0===i){const r=ko(e.size,e.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(e,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=s+a*o,c=a%2==0?i:r;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Vc,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}const TY=wT;class CT extends TY{constructor(e){super({points:1/0,fill:(e=e||{radius:5}).fill,radius:e.radius,stroke:e.stroke,scale:void 0!==e.scale?e.scale:1,rotation:void 0!==e.rotation?e.rotation:0,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new CT({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}const EY=CT;class MT{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null}clone(){const e=this.getColor();return new MT({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}const ST=MT;class TT{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new TT({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const DY=TT;class od{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=AY,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new od({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=AY,this.geometry_=e}setZIndex(e){this.zIndex_=e}}let ET=null;function kBe(n,e){if(!ET){const t=new ST({color:"rgba(255,255,255,0.4)"}),i=new DY({color:"#3399CC",width:1.25});ET=[new od({image:new EY({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return ET}function AY(n){return n.getGeometry()}const DT=od;let Vg=null;class LBe extends I8{constructor(e,t,i,r,s,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=s,this.size_=i,this.src_=t}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&2===this.imageState_){Vg||(Vg=ko(1,1)),Vg.drawImage(this.image_,0,0);try{Vg.getImageData(0,0,1,1),this.tainted_=!1}catch{Vg=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent("change")}handleImageError_(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=ko(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=pT(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||2!==this.imageState_)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const r=i.getContext("2d");r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=Q$(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}class AT extends SY{constructor(e){super({opacity:void 0!==(e=e||{}).opacity?e.opacity:1,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,declutterMode:e.declutterMode}),this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const o=void 0!==e.img?e.img:null;this.imgSize_=e.imgSize;let a=e.src;_n(!(void 0!==a&&o),4),_n(!o||o&&this.imgSize_,5),(void 0===a||0===a.length)&&o&&(a=o.src||Pn(o)),_n(void 0!==a&&a.length>0,6);const l=void 0!==e.src?0:2;this.color_=void 0!==e.color?W8(e.color):null,this.iconImage_=function PBe(n,e,t,i,r,s){let o=j8.get(e,i,s);return o||(o=new LBe(n,e,t,i,r,s),j8.set(e,i,s,o)),o}(o,a,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,l,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==e.size?e.size:null}clone(){const e=this.getScale();return new AT({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(e)?e.slice():e,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!r)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=r[0]),"fraction"==this.anchorYUnits_&&(e[1]*=r[1])}if("top-left"!=this.anchorOrigin_){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+r[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if("top-left"!=this.offsetOrigin_){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=i[0]-t[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(e){this.iconImage_.addEventListener("change",e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener("change",e)}}const RY=AT;class RT{constructor(e){this.font_=(e=e||{}).font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Lo(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new ST({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}clone(){const e=this.getScale();return new RT({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Lo(void 0!==e?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const FBe=RT;function IY(n){return new DT({fill:Hg(n,""),stroke:Ug(n,""),text:NBe(n),image:zBe(n)})}function Hg(n,e){const t=n[e+"fill-color"];if(t)return new ST({color:t})}function Ug(n,e){const t=n[e+"stroke-width"],i=n[e+"stroke-color"];if(t||i)return new DY({width:t,color:i,lineCap:n[e+"stroke-line-cap"],lineJoin:n[e+"stroke-line-join"],lineDash:n[e+"stroke-line-dash"],lineDashOffset:n[e+"stroke-line-dash-offset"],miterLimit:n[e+"stroke-miter-limit"]})}function NBe(n){const e=n["text-value"];return e?new FBe({text:e,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:Hg(n,"text-"),backgroundFill:Hg(n,"text-background-"),stroke:Ug(n,"text-"),backgroundStroke:Ug(n,"text-background-")}):void 0}function zBe(n){const e=n["icon-src"],t=n["icon-img"];if(e||t)return new RY({src:e,img:t,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});const i=n["shape-points"];if(i){const s="shape-";return new TY({points:i,fill:Hg(n,s),stroke:Ug(n,s),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}const r=n["circle-radius"];if(r){const s="circle-";return new EY({radius:r,fill:Hg(n,s),stroke:Ug(n,s),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}const VBe=class BBe extends $8{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new MY(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set("renderOrder",e)}setStyle(e){let t;if(void 0===e)t=kBe;else if(null===e)t=null;else if("function"==typeof e)t=e;else if(e instanceof DT)t=e;else if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s){const o=e[s];r[s]=o instanceof DT?o:IY(o)}t=r}else t=IY(e);this.style_=t,this.styleFunction_=null===e?void 0:function IBe(n){let e;if("function"==typeof n)e=n;else{let t;Array.isArray(n)?t=n:(_n("function"==typeof n.getZIndex,41),t=[n]),e=function(){return t}}return e}(this.style_),this.changed()}},Gg={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},h7=[Gg.FILL],ad=[Gg.STROKE],m1=[Gg.BEGIN_PATH],LY=[Gg.CLOSE_PATH],Ot=Gg,PY=class HBe{drawCustom(e,t,i,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}},Wg=class UBe extends PY{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return 1==t?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=t)r[0]=e[a],r[1]=e[a+1],F8(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,i,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(t+=r);let u=e[t],d=e[t+1];const h=this.tmpCoordinate_;let p,m,g,f=!0;for(p=t+r;p<i;p+=r)h[0]=e[p],h[1]=e[p+1],g=ES(c,h),g!==m?(f&&(a[l++]=u,a[l++]=d,f=!1),a[l++]=h[0],a[l++]=h[1]):1===g?(a[l++]=h[0],a[l++]=h[1],f=!1):f=!0,u=h[0],d=h[1],m=g;return(s&&f||p===t+r)&&(a[l++]=u,a[l++]=d),l}drawCustomCoordinates_(e,t,i,r,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(e,t,l,r,!1,!1);s.push(c),t=l}return t}drawCustom(e,t,i,r){this.beginGeometry(e,t);const s=e.getType(),o=e.getStride(),a=this.coordinates.length;let l,c,u,d,h;switch(s){case"MultiPolygon":l=e.getOrientedFlatCoordinates(),d=[];const f=e.getEndss();h=0;for(let p=0,m=f.length;p<m;++p){const g=[];h=this.drawCustomCoordinates_(l,h,f[p],o,g),d.push(g)}this.instructions.push([Ot.CUSTOM,a,d,e,i,Uq]),this.hitDetectionInstructions.push([Ot.CUSTOM,a,d,e,r||i,Uq]);break;case"Polygon":case"MultiLineString":u=[],l="Polygon"==s?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),h=this.drawCustomCoordinates_(l,0,e.getEnds(),o,u),this.instructions.push([Ot.CUSTOM,a,u,e,i,a7]),this.hitDetectionInstructions.push([Ot.CUSTOM,a,u,e,r||i,a7]);break;case"LineString":case"Circle":l=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([Ot.CUSTOM,a,c,e,i,op]),this.hitDetectionInstructions.push([Ot.CUSTOM,a,c,e,r||i,op]);break;case"MultiPoint":l=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([Ot.CUSTOM,a,c,e,i,op]),this.hitDetectionInstructions.push([Ot.CUSTOM,a,c,e,r||i,op]));break;case"Point":l=e.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([Ot.CUSTOM,a,c,e,i]),this.hitDetectionInstructions.push([Ot.CUSTOM,a,c,e,r||i])}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[Ot.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Ot.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let t;e.reverse();const i=e.length;let r,s,o=-1;for(t=0;t<i;++t)r=e[t],s=r[0],s==Ot.END_GEOMETRY?o=t:s==Ot.BEGIN_GEOMETRY&&(r[2]=t,BOe(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const r=e.getColor();i.fillStyle=Sl(r||Vc)}else i.fillStyle=void 0;if(t){const r=t.getColor();i.strokeStyle=Sl(r||Rg);const s=t.getLineCap();i.lineCap=void 0!==s?s:Z8;const o=t.getLineDash();i.lineDash=o?o.slice():Eg;const a=t.getLineDashOffset();i.lineDashOffset=a||0;const l=t.getLineJoin();i.lineJoin=void 0!==l?l:J2;const c=t.getWidth();i.lineWidth=void 0!==c?c:1;const u=t.getMiterLimit();i.miterLimit=void 0!==u?u:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[Ot.SET_FILL_STYLE,t];return"string"!=typeof t&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Ot.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;("string"!=typeof i||e.currentFillStyle!=i)&&(void 0!==i&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!t1(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(void 0!==i&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Ot.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=G$(this.maxExtent),this.maxLineWidth>0)&&TS(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}},OY=class qBe extends Wg{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const s=this.state,o=void 0!==s.fillStyle,a=void 0!==s.strokeStyle,l=i.length;this.instructions.push(m1),this.hitDetectionInstructions.push(m1);for(let c=0;c<l;++c){const u=i[c],d=this.coordinates.length,h=this.appendFlatLineCoordinates(e,t,u,r,!0,!a),f=[Ot.MOVE_TO_LINE_TO,d,h];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(LY),this.hitDetectionInstructions.push(LY)),t=u}return o&&(this.instructions.push(h7),this.hitDetectionInstructions.push(h7)),a&&(this.instructions.push(ad),this.hitDetectionInstructions.push(ad)),t}drawCircle(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Ot.SET_FILL_STYLE,Vc]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Ot.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[Ot.CIRCLE,l];this.instructions.push(m1,c),this.hitDetectionInstructions.push(m1,c),void 0!==i.fillStyle&&(this.instructions.push(h7),this.hitDetectionInstructions.push(h7)),void 0!==i.strokeStyle&&(this.instructions.push(ad),this.hitDetectionInstructions.push(ad)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Ot.SET_FILL_STYLE,Vc]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Ot.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),l=e.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Ot.SET_FILL_STYLE,Vc]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Ot.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,d=o.length;u<d;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(0!==e){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=d1(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)}};function YBe(n,e,t,i,r){let u,d,h,f,p,m,g,_,v,y,s=t,o=t,a=0,l=0,c=t;for(d=t;d<i;d+=r){const b=e[d],x=e[d+1];void 0!==p&&(v=b-p,y=x-m,f=Math.sqrt(v*v+y*y),void 0!==g&&(l+=h,u=Math.acos((g*v+_*y)/(h*f)),u>n&&(l>a&&(a=l,s=c,o=d),l=0,c=d-r)),h=f,g=v,_=y),p=b,m=x}return l+=f,l>a?[c,d]:[s,o]}const jg={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},ZBe={Circle:OY,Default:Wg,Image:class GBe extends Wg{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Ot.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ot.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Ot.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ot.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},LineString:class jBe extends Wg{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[Ot.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Ot.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Eg,0],m1);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(ad),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Ot.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],m1);const o=e.getEnds(),a=e.getFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,d=o.length;u<d;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(ad),this.endGeometry(t)}finish(){const e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(ad),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(ad),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(m1)}},Polygon:OY,Text:class XBe extends Wg{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const s=this.textState_;if(""===this.text_||!s||!this.textFillState_&&!this.textStrokeState_)return;const o=this.coordinates;let a=o.length;const l=e.getType();let c=null,u=e.getStride();if("line"!==s.placement||"LineString"!=l&&"MultiLineString"!=l&&"Polygon"!=l&&"MultiPolygon"!=l){let d=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),u=2;break;case"Polygon":c=e.getFlatInteriorPoint(),s.overflow||d.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const g=e.getFlatInteriorPoints();c=[];for(let _=0,v=g.length;_<v;_+=3)s.overflow||d.push(g[_+2]/this.resolution),c.push(g[_],g[_+1]);if(0===c.length)return;u=2}const h=this.appendFlatPointCoordinates(c,u);if(h===a)return;if(d&&(h-a)/2!=c.length/u){let g=a/2;d=d.filter((_,v)=>{const y=o[2*(g+v)]===c[v*u]&&o[2*(g+v)+1]===c[v*u+1];return y||--g,y})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let f=s.padding;if(f!=o1&&(s.scale[0]<0||s.scale[1]<0)){let g=s.padding[0],_=s.padding[1],v=s.padding[2],y=s.padding[3];s.scale[0]<0&&(_=-_,y=-y),s.scale[1]<0&&(g=-g,v=-v),f=[g,_,v,y]}const p=this.pixelRatio;this.instructions.push([Ot.DRAW_IMAGE,a,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,f==o1?o1:f.map(function(g){return g*p}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const m=1/p;this.hitDetectionInstructions.push([Ot.DRAW_IMAGE,a,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,f,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(t)}else{if(!eo(this.getBufferedMaxExtent(),e.getExtent()))return;let d;if(c=e.getFlatCoordinates(),"LineString"==l)d=[c.length];else if("MultiLineString"==l)d=e.getEnds();else if("Polygon"==l)d=e.getEnds().slice(0,1);else if("MultiPolygon"==l){const m=e.getEndss();d=[];for(let g=0,_=m.length;g<_;++g)d.push(m[g][0])}this.beginGeometry(e,t);const h=s.textAlign;let p,f=0;for(let m=0,g=d.length;m<g;++m){if(null==h){const v=YBe(s.maxAngle,c,f,d[m],u);f=v[0],p=v[1]}else p=d[m];for(let v=f;v<p;v+=u)o.push(c[v],c[v+1]);const _=o.length;f=d[m],this.drawChars_(a,_),a=_}this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||Ig,justify:t.justify,textBaseline:t.textBaseline||K8,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=jg[r.textBaseline],u=this.textOffsetY_*l,d=this.text_,h=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Ot.DRAW_CHARS,e,t,c,r.overflow,a,r.maxAngle,l,u,s,h*l,d,o,1]),this.hitDetectionInstructions.push([Ot.DRAW_CHARS,e,t,c,r.overflow,a,r.maxAngle,1,u,s,h,d,o,1/l])}setTextStyle(e,t){let i,r,s;if(e){const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Sl(o.getColor()||Vc)):(r=null,this.textFillState_=r);const a=e.getStroke();if(a){s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const p=a.getLineDash(),m=a.getLineDashOffset(),g=a.getWidth(),_=a.getMiterLimit();s.lineCap=a.getLineCap()||Z8,s.lineDash=p?p.slice():Eg,s.lineDashOffset=void 0===m?0:m,s.lineJoin=a.getLineJoin()||J2,s.lineWidth=void 0===g?1:g,s.miterLimit=void 0===_?10:_,s.strokeStyle=Sl(a.getColor()||Rg)}else s=null,this.textStrokeState_=s;i=this.textState_;const l=e.getFont()||fq;OFe(l);const c=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||K8,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||o1,i.scale=void 0===c?[1,1]:c;const u=e.getOffsetX(),d=e.getOffsetY(),h=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===u?0:u,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==h&&h,this.textRotation_=void 0===f?0:f,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:Pn(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+Pn(r.fillStyle):""}else this.text_="";this.declutterImageWithText_=t}}},FY=class KBe{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=void 0!==e?e.toString():"0";let r=this.buildersByZIndex_[i];void 0===r&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];return void 0===s&&(s=new(0,ZBe[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s),s}};function QBe(n,e,t,i,r,s,o,a,l,c,u,d){let h=n[e],f=n[e+1],p=0,m=0,g=0,_=0;function v(){p=h,m=f,h=n[e+=i],f=n[e+1],_+=g,g=Math.sqrt((h-p)*(h-p)+(f-m)*(f-m))}do{v()}while(e<t-i&&_+g<s);let y=0===g?0:(s-_)/g;const b=s1(p,h,y),x=s1(m,f,y),M=e-i,R=_,w=s+a*l(c,r,u);for(;e<t-i&&_+g<w;)v();y=0===g?0:(w-_)/g;const E=s1(p,h,y),P=s1(m,f,y);let Y;if(d){const k=[b,x,E,P];Iq(k,0,4,2,d,k,k),Y=k[0]>k[2]}else Y=b>E;const J=Math.PI,q=[],I=M+i===e;let G;if(g=0,_=R,h=n[e=M],f=n[e+1],I)return v(),G=Math.atan2(f-m,h-p),Y&&(G+=G>0?-J:J),q[0]=[(E+b)/2,(P+x)/2,(w-s)/2,G,r],q;for(let k=0,F=(r=r.replace(/\n/g," ")).length;k<F;){v();let N=Math.atan2(f-m,h-p);if(Y&&(N+=N>0?-J:J),void 0!==G){let se=N-G;if(se+=se>J?-2*J:se<-J?2*J:0,Math.abs(se)>o)return null}G=N;const V=k;let $=0;for(;k<F;++k){const Ee=a*l(c,r[Y?F-k-1:k],u);if(e+i<t&&_+g<s+$+Ee/2)break;$+=Ee}if(k===V)continue;const te=Y?r.substring(F-V,F-k):r.substring(V,k);y=0===g?0:(s+$/2-_)/g;const j=s1(p,h,y),_e=s1(m,f,y);q.push([j,_e,$/2,N,te]),s+=$}return q}function NY(n,e,t,i){let r=n[e],s=n[e+1],o=0;for(let a=e+i;a<t;a+=i){const l=n[a],c=n[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}const cp=[1/0,1/0,-1/0,-1/0],ld=[],Gc=[],Wc=[],cd=[];function zY(n){return n[3].declutterBox}const JBe=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function BY(n,e){return("start"===e||"end"===e)&&!JBe.test(n)&&(e="start"===e?"left":"right"),jg[e]}function eVe(n,e,t){return t>0&&n.push("\n",""),n.push(e,""),n}const nVe=class tVe{constructor(e,t,i,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,r){const s=e+t+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[t],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],d=Array.isArray(e),h=l.justify?jg[l.justify]:BY(Array.isArray(e)?e[0]:e,l.textAlign||Ig),f=r&&o.lineWidth?o.lineWidth:0,p=d?e:e.split("\n").reduce(eVe,[]),{width:m,height:g,widths:_,heights:v,lineWidths:y}=function NFe(n,e){const t=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const d=e[c];if("\n"===d||c===u){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const h=e[c+1]||n.font,f=Q8(h,d);t.push(f),o+=f;const p=FFe(h);i.push(p),l=Math.max(l,p)}return{width:s,height:a,widths:t,heights:i,lineWidths:r}}(l,p),b=m+f,x=[],M=(b+2)*u[0],R=(g+f)*u[1],w={width:M<0?Math.floor(M):Math.ceil(M),height:R<0?Math.floor(R):Math.ceil(R),contextInstructions:x};(1!=u[0]||1!=u[1])&&x.push("scale",u),r&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",f),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)),i&&x.push("fillStyle",a.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");const E=.5-h;let P=h*b+E*f;const Y=[],J=[];let F,q=0,I=0,G=0,k=0;for(let N=0,V=p.length;N<V;N+=2){const $=p[N];if("\n"===$){I+=q,q=0,P=h*b+E*f,++k;continue}const te=p[N+1]||l.font;te!==F&&(r&&Y.push("font",te),i&&J.push("font",te),F=te),q=Math.max(q,v[G]);const j=[$,P+E*_[G]+h*(_[G]-y[k]),.5*(f+q)+I];P+=_[G],r&&Y.push("strokeText",j),i&&J.push("fillText",j),++G}return Array.prototype.push.apply(x,Y),Array.prototype.push.apply(x,J),this.labels_[s]=w,w}replayTextBackground_(e,t,i,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,s,o,a,l,c,u,d,h,f,p,m,g){let _=i-(a*=h[0]),v=r-(l*=h[1]);const y=s+c>e?e-c:s,b=o+u>t?t-u:o,x=p[3]+y*h[0]+p[1],M=p[0]+b*h[1]+p[2],R=_-p[3],w=v-p[0];let E;return(m||0!==d)&&(ld[0]=R,cd[0]=R,ld[1]=w,Gc[1]=w,Gc[0]=R+x,Wc[0]=Gc[0],Wc[1]=w+M,cd[1]=Wc[1]),0!==d?(E=Bc([1,0,0,1,0,0],i,r,1,1,d,-i,-r),jr(E,ld),jr(E,Gc),jr(E,Wc),jr(E,cd),Ml(Math.min(ld[0],Gc[0],Wc[0],cd[0]),Math.min(ld[1],Gc[1],Wc[1],cd[1]),Math.max(ld[0],Gc[0],Wc[0],cd[0]),Math.max(ld[1],Gc[1],Wc[1],cd[1]),cp)):Ml(Math.min(R,R+x),Math.min(w,w+M),Math.max(R,R+x),Math.max(w,w+M),cp),f&&(_=Math.round(_),v=Math.round(v)),{drawImageX:_,drawImageY:v,drawImageW:y,drawImageH:b,originX:c,originY:u,declutterBox:{minX:cp[0],minY:cp[1],maxX:cp[2],maxY:cp[3],value:g},canvasTransform:E,scale:h}}replayImageOrLabel_(e,t,i,r,s,o,a){const c=r.declutterBox,u=e.canvas,d=a?a[2]*r.scale[0]/2:0;return c.minX-d<=u.width/t&&c.maxX+d>=0&&c.minY-d<=u.height/t&&c.maxY+d>=0&&(!(!o&&!a)&&this.replayTextBackground_(e,ld,Gc,Wc,cd,o,a),function zFe(n,e,t,i,r,s,o,a,l,c,u){n.save(),1!==t&&(n.globalAlpha*=t),e&&n.setTransform.apply(n,e),i.contextInstructions?(n.translate(l,c),n.scale(u[0],u[1]),function BFe(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}(i,n)):u[0]<0||u[1]<0?(n.translate(l,c),n.scale(u[0],u[1]),n.drawImage(i,r,s,o,a,0,0,o,a)):n.drawImage(i,r,s,o,a,l,c,o*u[0],a*u[1]),n.restore()}(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){if(this.alignFill_){const t=jr(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,r){const s=this.textStates[t],o=this.createLabel(e,t,r,i),a=this.strokeStates[i],l=this.pixelRatio,c=BY(Array.isArray(e)?e[0]:e,s.textAlign||Ig),u=jg[s.textBaseline||K8],d=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:c*(o.width/l-2*s.scale[0])+2*(.5-c)*d,anchorY:u*o.height/l+2*(.5-u)*d}}execute_(e,t,i,r,s,o,a,l){let c;this.pixelCoordinates_&&t1(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=u1(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),function tFe(n,e){n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5]}(this.renderedTransform_,i));let u=0;const d=r.length;let f,p,m,g,_,v,y,b,x,M,R,w,h=0,E=0,P=0,Y=null,J=null;const q=this.coordinateCache_,I=this.viewRotation_,G=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,k={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:I},F=this.instructions!=r||this.overlaps?0:200;let N,V,$,te;for(;u<d;){const j=r[u];switch(j[0]){case Ot.BEGIN_GEOMETRY:N=j[1],te=j[3],N.getGeometry()?void 0===a||eo(a,te.getExtent())?++u:u=j[2]+1:u=j[2];break;case Ot.BEGIN_PATH:E>F&&(this.fill_(e),E=0),P>F&&(e.stroke(),P=0),!E&&!P&&(e.beginPath(),g=NaN,_=NaN),++u;break;case Ot.CIRCLE:h=j[1];const se=c[h],Ee=c[h+1],Le=c[h+2]-se,qe=c[h+3]-Ee,Pe=Math.sqrt(Le*Le+qe*qe);e.moveTo(se+Pe,Ee),e.arc(se,Ee,Pe,0,2*Math.PI,!0),++u;break;case Ot.CLOSE_PATH:e.closePath(),++u;break;case Ot.CUSTOM:h=j[1],f=j[2];const ye=j[4],fe=6==j.length?j[5]:void 0;k.geometry=j[3],k.feature=N,u in q||(q[u]=[]);const Re=q[u];fe?fe(c,h,f,2,Re):(Re[0]=c[h],Re[1]=c[h+1],Re.length=2),ye(Re,k),++u;break;case Ot.DRAW_IMAGE:h=j[1],f=j[2],b=j[3],p=j[4],m=j[5];let rt=j[6];const Ne=j[7],Oe=j[8],Qe=j[9],ct=j[10];let $t=j[11];const yn=j[12];let W=j[13];const O=j[14],ce=j[15];if(!b&&j.length>=20){x=j[19],M=j[20],R=j[21],w=j[22];const Zi=this.drawLabelWithPointPlacement_(x,M,R,w);b=Zi.label,j[3]=b,p=(Zi.anchorX-j[23])*this.pixelRatio,j[4]=p,m=(Zi.anchorY-j[24])*this.pixelRatio,j[5]=m,rt=b.height,j[6]=rt,W=b.width,j[13]=W}let De,Fe,Ve,_t;j.length>25&&(De=j[25]),j.length>17?(Fe=j[16],Ve=j[17],_t=j[18]):(Fe=o1,Ve=!1,_t=!1),ct&&G?$t+=I:!ct&&!G&&($t-=I);let B=0;for(;h<f;h+=2){if(De&&De[B++]<W/this.pixelRatio)continue;const Zi=this.calculateImageOrLabelDimensions_(b.width,b.height,c[h],c[h+1],W,rt,p,m,Oe,Qe,$t,yn,s,Fe,Ve||_t,N),Gn=[e,t,b,Zi,Ne,Ve?Y:null,_t?J:null];if(l){if("none"===O)continue;if("obstacle"===O){l.insert(Zi.declutterBox);continue}{let Ki,Qi;if(ce){const Fs=f-h;if(!ce[Fs]){ce[Fs]=Gn;continue}if(Ki=ce[Fs],delete ce[Fs],Qi=zY(Ki),l.collides(Qi))continue}if(l.collides(Zi.declutterBox))continue;Ki&&(l.insert(Qi),this.replayImageOrLabel_.apply(this,Ki)),l.insert(Zi.declutterBox)}}this.replayImageOrLabel_.apply(this,Gn)}++u;break;case Ot.DRAW_CHARS:const Me=j[1],Ae=j[2],Xe=j[3],Ze=j[4];w=j[5];const zt=j[6],an=j[7],ii=j[8];R=j[9];const ee=j[10];x=j[11],M=j[12];const Ge=[j[13],j[13]],ge=this.textStates[M],tt=ge.font,Ke=[ge.scale[0]*an,ge.scale[1]*an];let ln;tt in this.widths_?ln=this.widths_[tt]:(ln={},this.widths_[tt]=ln);const lr=NY(c,Me,Ae,2),Ti=Math.abs(Ke[0])*mq(tt,x,ln);if(Ze||Ti<=lr){const Ki=QBe(c,Me,Ae,2,x,(lr-Ti)*jg[this.textStates[M].textAlign],zt,Math.abs(Ke[0]),mq,tt,ln,G?0:this.viewRotation_);e:if(Ki){const Qi=[];let Fs,jc,g1,ys,to;if(R)for(Fs=0,jc=Ki.length;Fs<jc;++Fs){to=Ki[Fs],g1=to[4],ys=this.createLabel(g1,M,"",R),p=to[2]+(Ke[0]<0?-ee:ee),m=Xe*ys.height+2*(.5-Xe)*ee*Ke[1]/Ke[0]-ii;const $a=this.calculateImageOrLabelDimensions_(ys.width,ys.height,to[0],to[1],ys.width,ys.height,p,m,0,0,to[3],Ge,!1,o1,!1,N);if(l&&l.collides($a.declutterBox))break e;Qi.push([e,t,ys,$a,1,null,null])}if(w)for(Fs=0,jc=Ki.length;Fs<jc;++Fs){to=Ki[Fs],g1=to[4],ys=this.createLabel(g1,M,w,""),p=to[2],m=Xe*ys.height-ii;const $a=this.calculateImageOrLabelDimensions_(ys.width,ys.height,to[0],to[1],ys.width,ys.height,p,m,0,0,to[3],Ge,!1,o1,!1,N);if(l&&l.collides($a.declutterBox))break e;Qi.push([e,t,ys,$a,1,null,null])}l&&l.load(Qi.map(zY));for(let $a=0,U=Qi.length;$a<U;++$a)this.replayImageOrLabel_.apply(this,Qi[$a])}}++u;break;case Ot.END_GEOMETRY:if(void 0!==o){N=j[1];const Zi=o(N,te);if(Zi)return Zi}++u;break;case Ot.FILL:F?E++:this.fill_(e),++u;break;case Ot.MOVE_TO_LINE_TO:for(h=j[1],f=j[2],V=c[h],$=c[h+1],v=V+.5|0,y=$+.5|0,(v!==g||y!==_)&&(e.moveTo(V,$),g=v,_=y),h+=2;h<f;h+=2)V=c[h],$=c[h+1],v=V+.5|0,y=$+.5|0,(h==f-2||v!==g||y!==_)&&(e.lineTo(V,$),g=v,_=y);++u;break;case Ot.SET_FILL_STYLE:Y=j,this.alignFill_=j[2],E&&(this.fill_(e),E=0,P&&(e.stroke(),P=0)),e.fillStyle=j[1],++u;break;case Ot.SET_STROKE_STYLE:J=j,P&&(e.stroke(),P=0),this.setStrokeStyle_(e,j),++u;break;case Ot.STROKE:F?P++:e.stroke(),++u;break;default:++u}}E&&this.fill_(e),P&&e.stroke()}execute(e,t,i,r,s,o){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,i,r,s){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,s)}},IT=["Polygon","Circle","LineString","Image","Text","Default"],kT={},VY=class iVe{constructor(e,t,i,r,s,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(s)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];void 0===i&&(i={},this.executorsByZIndex_[t]=i);const r=e[t];for(const s in r)i[s]=new nVe(this.resolution_,this.pixelRatio_,this.overlaps_,r[s])}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,s,o){const a=2*(r=Math.round(r))+1,l=Bc(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=ko(a,a));const u=this.hitDetectionContext_;let d;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(d=[1/0,1/0,-1/0,-1/0],Y2(d,e),TS(d,t*(this.renderBuffer_+r),d));const h=function rVe(n){if(void 0!==kT[n])return kT[n];const e=2*n+1,t=n*n,i=new Array(t+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){const a=s*s+o*o;if(a>t)break;let l=i[a];l||(l=[],i[a]=l),l.push(4*((n+s)*e+(n+o))+3),s>0&&l.push(4*((n-s)*e+(n+o))+3),o>0&&(l.push(4*((n+s)*e+(n-o))+3),s>0&&l.push(4*((n-s)*e+(n-o))+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return kT[n]=r,r}(r);let f;function p(x,M){const R=u.getImageData(0,0,a,a).data;for(let w=0,E=h.length;w<E;w++)if(R[h[w]]>0){if(!o||"Image"!==f&&"Text"!==f||o.includes(x)){const P=(h[w]-3)/4,Y=r-P%a,J=r-(P/a|0),q=s(x,M,Y*Y+J*J);if(q)return q}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);let g,_,v,y,b;for(m.sort(e1),g=m.length-1;g>=0;--g){const x=m[g].toString();for(v=this.executorsByZIndex_[x],_=IT.length-1;_>=0;--_)if(f=IT[_],y=v[f],void 0!==y&&(b=y.executeHitDetection(u,l,i,p,d),b))return b}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],s=t[2],o=t[3],a=[i,r,i,o,s,o,s,r];return u1(a,0,8,2,e,a),a}isEmpty(){return Mg(this.executorsByZIndex_)}execute(e,t,i,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);let c,u,d,h,f,p;for(l.sort(e1),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||IT,a&&l.reverse(),c=0,u=l.length;c<u;++c){const m=l[c].toString();for(f=this.executorsByZIndex_[m],d=0,h=o.length;d<h;++d)p=f[o[d]],void 0!==p&&p.execute(e,t,i,r,s,a)}this.maxExtent_&&e.restore()}},oVe=class sVe extends PY{constructor(e,t,i,r,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(e,t,i,r){if(!this.image_)return;const s=u1(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,d=s.length;u<d;u+=2){const h=s[u]-this.imageAnchorX_,f=s[u+1]-this.imageAnchorY_;if(0!==c||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const p=h+this.imageAnchorX_,m=f+this.imageAnchorY_;Bc(a,p,m,1,1,c,-p,-m),o.setTransform.apply(o,a),o.translate(p,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,f,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=l)}drawText_(e,t,i,r){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=u1(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const l=s[t]+this.textOffsetX_,c=s[t+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,t,i,r,s){const o=this.context_,a=u1(e,t,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),i}drawRings_(e,t,i,r){for(let s=0,o=i.length;s<o;++s)t=this.moveToLineTo_(e,t,i[s],r,!0);return t}drawCircle(e){if(eo(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=function ANe(n,e,t){const i=n.getFlatCoordinates();if(i){const r=n.getStride();return u1(i,0,i.length,r,e,t)}return null}(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}drawFeature(e,t){const i=t.getGeometryFunction()(e);!i||!eo(this.extent_,i.getExtent())||(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),eo(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(""!==this.text_){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(eo(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(""!==this.text_){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),eo(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),eo(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=s.length;a<l;++a)r=this.drawRings_(i,r,s[a],o);this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),t1(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:Ig;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(e){const i=e.getColor();this.fillState_={fillStyle:Sl(i||Vc)}}else this.fillState_=null;if(t){const i=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),u=s||Eg;this.strokeState_={lineCap:void 0!==r?r:Z8,lineDash:1===this.pixelRatio_?u:u.map(d=>d*this.pixelRatio_),lineDashOffset:(o||0)*this.pixelRatio_,lineJoin:void 0!==a?a:J2,lineWidth:(void 0!==l?l:1)*this.pixelRatio_,miterLimit:void 0!==c?c:10,strokeStyle:Sl(i||Rg)}}else this.strokeState_=null}setImageStyle(e){let t;if(!e||!(t=e.getSize()))return void(this.image_=null);const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(e){const t=e.getFill();if(t){const f=t.getColor();this.textFillState_={fillStyle:Sl(f||Vc)}}else this.textFillState_=null;const i=e.getStroke();if(i){const f=i.getColor(),p=i.getLineCap(),m=i.getLineDash(),g=i.getLineDashOffset(),_=i.getLineJoin(),v=i.getWidth(),y=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==p?p:Z8,lineDash:m||Eg,lineDashOffset:g||0,lineJoin:void 0!==_?_:J2,lineWidth:void 0!==v?v:1,miterLimit:void 0!==y?y:10,strokeStyle:Sl(f||Rg)}}else this.textStrokeState_=null;const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),u=e.getText(),d=e.getTextAlign(),h=e.getTextBaseline();this.textState_={font:void 0!==r?r:fq,textAlign:void 0!==d?d:Ig,textBaseline:void 0!==h?h:K8},this.text_=void 0!==u?Array.isArray(u)?u.reduce((f,p,m)=>f+(m%2?" ":p),""):u:"",this.textOffsetX_=void 0!==s?this.pixelRatio_*s:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==a&&a,this.textRotation_=void 0!==l?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}else this.text_=""}},Tl=.5,HY={Point:function vVe(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(2!=s.getImageState())return;let l=n;if(r){const u=s.getDeclutterMode();if("none"!==u)if(l=r,"obstacle"===u){const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(s,a),d.drawPoint(e,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(s,a),c.drawPoint(e,i)}if(o&&o.getText()){let l=n;r&&(l=r);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,i)}},LineString:function mVe(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}},Polygon:function bVe(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}},MultiPoint:function yVe(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(2!=s.getImageState())return;let l=n;if(r){const u=s.getDeclutterMode();if("none"!==u)if(l=r,"obstacle"===u){const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(s,a),d.drawMultiPoint(e,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(s,a),c.drawMultiPoint(e,i)}if(o&&o.getText()){let l=n;r&&(l=r);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,i)}},MultiLineString:function gVe(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}},MultiPolygon:function _Ve(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(o||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}},GeometryCollection:function pVe(n,e,t,i,r){const s=e.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o)(0,HY[s[o].getType()])(n,s[o],t,i,r)},Circle:function hVe(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,i)}const a=t.getText();if(a&&a.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}};function uVe(n,e){return parseInt(Pn(n),10)-parseInt(Pn(e),10)}function LT(n,e){return.5*n/e}function UY(n,e,t,i,r,s,o){let a=!1;const l=t.getImage();if(l){const c=l.getImageState();2==c||3==c?l.unlistenImageChange(r):(0==c&&l.load(),l.listenImageChange(r),a=!0)}return function fVe(n,e,t,i,r,s){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(i,r);t.getRenderer()?GY(n,a,t,e):(0,HY[a.getType()])(n,a,t,e,s)}(n,e,t,i,s,o),a}function GY(n,e,t,i){if("GeometryCollection"!=e.getType())n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer());else{const s=e.getGeometries();for(let o=0,a=s.length;o<a;++o)GY(n,s[o],t,i)}}const wVe=class xVe extends CY{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),d=this.getLayer().getSource(),h=t.pixelRatio,f=t.viewHints,p=!(f[0]||f[1]),m=this.compositionContext_,g=Math.round(t.size[0]*h),_=Math.round(t.size[1]*h),v=d.getWrapX()&&l.canWrapX(),y=v?di(u):null,b=v?Math.ceil((r[2]-u[2])/y)+1:1;let x=v?Math.floor((r[0]-u[0])/y):0;do{const M=this.getRenderTransform(o,a,c,h,g,_,x*y);e.execute(m,1,M,c,p,void 0,i)}while(++x<b)}setupCompositionContext_(){if(1!==this.opacity_){const e=ko(this.context.canvas.width,this.context.canvas.height,wY);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,dq(this.compositionContext_),wY.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,r=e.layerStatesArray[e.layerIndex];(function nFe(n,e,t){(function Sg(n,e,t,i,r,s,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n})(n,e,0,0,t,0,0)})(this.pixelTransform,1/i,1/i),O8(this.inversePixelTransform,this.pixelTransform);const s=SS(this.pixelTransform);this.useContainer(t,s,this.getBackground(e));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;if((!l||l.isEmpty())&&(!c||c.isEmpty()))return null;const u=Math.round(e.size[0]*i),d=Math.round(e.size[1]*i);a.width!=u||a.height!=d?(a.width=u,a.height=d,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,u,d),this.preRender(o,e);const h=e.viewState;this.opacity_=r.opacity,this.setupCompositionContext_();let p=!1,m=!0;if(r.extent&&this.clipping){const g=c1(r.extent);m=eo(g,e.extent),p=m&&!$2(g,e.extent),p&&this.clipUnrotated(this.compositionContext_,e,g)}return m&&this.renderWorlds(l,e),p&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==h.rotation&&(this.renderedRotation_=h.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(function(t){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];jr(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],d=i[0]*Tl,h=i[1]*Tl;u.push(this.getRenderTransform(r,s,o,Tl,d,h,0).slice());const f=c.getSource(),p=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!$2(p,l)){let m=l[0];const g=di(p);let v,_=0;for(;m<p[0];)--_,v=g*_,u.push(this.getRenderTransform(r,s,o,Tl,d,h,v).slice()),m+=g;for(_=0,m=l[2];m>p[2];)++_,v=g*_,u.push(this.getRenderTransform(r,s,o,Tl,d,h,v).slice()),m-=g}this.hitDetectionImageData_=function aVe(n,e,t,i,r,s,o){const c=ko(n[0]*Tl,n[1]*Tl);c.imageSmoothingEnabled=!1;const u=c.canvas,d=new oVe(c,Tl,r,null,o),h=t.length,f=Math.floor(16777215/h),p={};for(let g=1;g<=h;++g){const _=t[g-1],v=_.getStyleFunction()||i;if(!i)continue;let y=v(_,s);if(!y)continue;Array.isArray(y)||(y=[y]);const x="#"+("000000"+(g*f).toString(16)).slice(-6);for(let M=0,R=y.length;M<R;++M){const w=y[M],E=w.getGeometryFunction()(_);if(!E||!eo(r,E.getExtent()))continue;const P=w.clone(),Y=P.getFill();Y&&Y.setColor(x);const J=P.getStroke();J&&(J.setColor(x),J.setLineDash(null)),P.setText(void 0);const q=w.getImage();if(q&&0!==q.getOpacity()){const k=q.getImageSize();if(!k)continue;const F=ko(k[0],k[1],void 0,{alpha:!1}),N=F.canvas;F.fillStyle=x,F.fillRect(0,0,N.width,N.height),P.setImage(new RY({img:N,imgSize:k,anchor:q.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:q.getOrigin(),opacity:1,size:q.getSize(),scale:q.getScale(),rotation:q.getRotation(),rotateWithView:q.getRotateWithView()}))}const I=P.getZIndex()||0;let G=p[I];G||(G={},p[I]=G,G.Polygon=[],G.Circle=[],G.LineString=[],G.Point=[]),G[E.getType().replace("Multi","")].push(E,P)}}const m=Object.keys(p).map(Number).sort(e1);for(let g=0,_=m.length;g<_;++g){const v=p[m[g]];for(const y in v){const b=v[y];for(let x=0,M=b.length;x<M;x+=2){d.setStyle(b[x+1]);for(let R=0,w=e.length;R<w;++R)d.setTransform(e[R]),d.drawGeometry(b[x])}}}return c.getImageData(0,0,u.width,u.height)}(i,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o)}t(function lVe(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*Tl),s=Math.floor(Math.round(n[1])*Tl),o=4*(wr(r,0,t.width-1)+wr(s,0,t.height-1)*t.width),u=t.data[o+2]+256*(t.data[o+1]+256*t.data[o]),d=Math.floor(16777215/e.length);u&&u%d==0&&i.push(e[u/d-1])}return i}(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(e,t,i,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},u=function(f,p,m){const g=Pn(f),_=c[g];if(_){if(!0!==_&&m<_.distanceSq){if(0===m)return c[g]=!0,s.splice(s.lastIndexOf(_),1),r(f,l,p);_.geometry=p,_.distanceSq=m}}else{if(0===m)return c[g]=!0,r(f,l,p);s.push(c[g]={feature:f,layer:l,geometry:p,distanceSq:m,callback:r})}};let d;const h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some(f=>d=f.forEachFeatureAtCoordinate(e,o,a,i,u,f===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(p=>p.value):null)),d}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[0],s=e.viewHints[1],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,u=c.projection,d=c.resolution,h=e.pixelRatio,f=t.getRevision(),p=t.getRenderBuffer();let m=t.getRenderOrder();void 0===m&&(m=uVe);const g=c.center.slice(),_=TS(l,p*d),v=_.slice(),y=[_.slice()],b=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!$2(b,e.extent)){const k=di(b),F=Math.max(di(_)/2,k);_[0]=b[0]-F,_[2]=b[2]+F,oq(g,u);const N=X$(y[0],u);N[0]<b[0]&&N[2]<b[2]?y.push([N[0]+k,N[1],N[2]+k,N[3]]):N[0]>b[0]&&N[2]>b[2]&&y.push([N[0]-k,N[1],N[2]-k,N[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==f&&this.renderedRenderOrder_==m&&$2(this.wrappedRenderedExtent_,_))return t1(this.renderedExtent_,v)||(this.hitDetectionImageData_=null,this.renderedExtent_=v),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new FY(LT(d,h),_,d,h);let M;this.getLayer().getDeclutter()&&(M=new FY(LT(d,h),_,d,h));const R=Tq();let w;if(R){for(let k=0,F=y.length;k<F;++k){const V=YS(y[k]);i.loadFeatures(V,mNe(d),R)}w=Pg(R,u)}else for(let k=0,F=y.length;k<F;++k)i.loadFeatures(y[k],d,u);const E=function dVe(n,e){const t=LT(n,e);return t*t}(d,h);let P=!0;const Y=function(k){let F;const N=k.getStyleFunction()||t.getStyleFunction();if(N&&(F=N(k,d)),F){const V=this.renderFeature(k,E,F,x,w,M);P=P&&!V}}.bind(this),J=YS(_),q=i.getFeaturesInExtent(J);m&&q.sort(m);for(let k=0,F=q.length;k<F;++k)Y(q[k]);this.renderedFeatures_=q,this.ready=P;const I=x.finish(),G=new VY(_,d,h,i.getOverlaps(),I,t.getRenderBuffer());return M&&(this.declutterExecutorGroup=new VY(_,d,h,i.getOverlaps(),M.finish(),t.getRenderBuffer())),this.renderedResolution_=d,this.renderedRevision_=f,this.renderedRenderOrder_=m,this.renderedExtent_=v,this.wrappedRenderedExtent_=_,this.renderedCenter_=g,this.renderedProjection_=u,this.replayGroup_=G,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=UY(r,e,i[l],t,this.boundHandleStyleImageChange_,s,o)||a;else a=UY(r,e,i,t,this.boundHandleStyleImageChange_,s,o);return a}},MVe=class CVe extends VBe{constructor(e){super(e)}createRenderer(){return new wVe(this)}},WY=class SVe{constructor(e){this.rbush_=new MY(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Pn(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[Pn(a)]=l}this.rbush_.load(i)}remove(e){const t=Pn(e),i=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(i)}update(e,t){const i=this.items_[Pn(t)];Tg([i.minX,i.minY,i.maxX,i.maxY],e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){return this.rbush_.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,s=e.length;r<s;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return Mg(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Ml(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}};function TVe(n,e){return[[-1/0,-1/0,1/0,1/0]]}function $Y(n,e){return function(t,i,r,s,o){const a=this;!function EVe(n,e,t,i,r,s,o){const a=new XMLHttpRequest;a.open("GET","function"==typeof n?n(t,i,r):n,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();let u;"json"==c||"text"==c?u=a.responseText:"xml"==c?(u=a.responseXML,u||(u=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==c&&(u=a.response),u?s(e.readFeatures(u,{extent:t,featureProjection:r}),e.readProjection(u)):o()}else o()},a.onerror=o,a.send()}(n,e,t,i,r,function(l,c){a.addFeatures(l),void 0!==s&&s(l)},o||n1)}}class ud extends zc{constructor(e,t,i){super(e),this.feature=t,this.features=i}}const AVe=class DVe extends gY{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=n1,this.format_=e.format,this.overlaps_=void 0===e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(_n(this.format_,7),this.loader_=$Y(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:TVe;const t=void 0===e.useSpatialIndex||e.useSpatialIndex;let i,r;this.featuresRtree_=t?new WY:null,this.loadedExtentsRtree_=new WY,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&void 0===i&&(i=new Cl(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Pn(e);if(!this.addToIndex_(t,e))return void(this.featuresCollection_&&this.featuresCollection_.remove(e));this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new ud("addfeature",e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[Cn(t,"change",this.handleFeatureChange_,this),Cn(t,"propertychange",this.handleFeatureChange_,this)]}addToIndex_(e,t){let i=!0;const r=t.getId();return void 0!==r&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=t),i&&(_n(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=Pn(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=Pn(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();t.push(u),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener("addfeature"))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new ud("addfeature",i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener("addfeature",function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener("removefeature",function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener("add",function(i){t||(t=!0,this.addFeature(i.element),t=!1)}.bind(this)),e.addEventListener("remove",function(i){t||(t=!0,this.removeFeature(i.element),t=!1)}.bind(this)),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Si);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=function(r){this.removeFeatureInternal(r)}.bind(this);this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new ud("clear");this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){return this.forEachFeatureInExtent([e[0],e[1],e[0],e[1]],function(r){if(r.getGeometry().intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Mg(this.nullGeometryFeatures_)||P$(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=function pFe(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];X$(n,e);const i=di(t);if(di(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||wg,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const u=c.getGeometry(),d=a;if(a=u.closestPointXY(i,r,o,a),a<d){s=c;const h=Math.sqrt(a);l[0]=i-h,l[1]=r-h,l[2]=i+h,l[3]=r+h}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return void 0!==t?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return void 0!==t?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Pn(t),r=t.getGeometry();if(r){const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);const s=t.getId();if(void 0!==s){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new ud("changefeature",t))}hasFeature(e){const t=e.getId();return void 0!==t?t in this.idIndex_:Pn(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Mg(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(u){return $2(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new ud("featuresloadstart")),this.loader_.call(this,l,t,i,function(u){--this.loadingExtentsCount_,this.dispatchEvent(new ud("featuresloadend",void 0,u))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new ud("featuresloaderror"))}.bind(this)),r.insert(l,{extent:l.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(r){if(Tg(r.extent,e))return i=r,!0}),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=Pn(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Pn(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(Si),delete this.featureChangeKeys_[t];const r=e.getId();return void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new ud("removefeature",e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){_n(this.format_,7),this.url_=e,this.setLoader($Y(e,this.format_))}},RVe=["map"];let IVe=(()=>{class n{constructor(t,i,r){this.zone=t,this.appService=i,this.houseService=r,this.houseFeature=new XOe({geometry:new $q([1511855.49950191,7539541.240669869])})}ngAfterViewInit(){this.zone.runOutsideAngular(()=>this.initMap())}initMap(){this.houseLayer=new MVe({source:new AVe({features:[this.houseFeature]})}),this.map=new Pze({view:new rd({center:[1511855.49950191,7539541.240669869],zoom:19}),layers:[new RBe({source:new bBe}),this.houseLayer],target:this.mapEl.nativeElement}),window.map=this.map}}return n.\u0275fac=function(t){return new(t||n)(S(Ct),S(Ii),S(rr))},n.\u0275cmp=dt({type:n,selectors:[["app-page-map"]],viewQuery:function(t,i){if(1&t&&fi(RVe,5),2&t){let r;kt(r=Lt())&&(i.mapEl=r.first)}},decls:4,vars:0,consts:[[1,"map"],["map",""]],template:function(t,i){1&t&&(C(0,"h1"),D(1,"Map"),T(),ne(2,"div",0,1))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}.map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),n})(),kVe=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.Tag=jo,this.Section=ke,this.SensorType=X}ngAfterViewInit(){this.appService.hardSetStates({[ss.theoreticalWalls]:!1})}getGroups(t){return[...new Set(Object.values(this.houseService.house$.value.partsFlatten).filter(r=>r instanceof de).filter(r=>r.sensorType===t).map(r=>r.group))].filter(r=>r).sort((r,s)=>r-s).join(", ")}getOutlets(t){return Object.values(this.houseService.house$.value.partsFlatten).filter(r=>r instanceof de).filter(r=>r.sensorType===t).map(r=>r.amount).reduce((r,s)=>r+s,0)}getCable(t,i=1){return gt(Object.values(this.houseService.house$.value.partsFlatten).filter(s=>s instanceof de).filter(s=>s.sensorType===t).map(s=>s.cableLength).reduce((s,o)=>s+o,0),i)}}return n.\u0275fac=function(t){return new(t||n)(S(rr),S(Ii))},n.\u0275cmp=dt({type:n,selectors:[["app-page-wired"]],decls:175,vars:91,consts:[[3,"id"],[3,"url"],[1,"technical"],["href","https://community.home-assistant.io/t/circadian-lighting-custom-component/61246"],["identifier","PassiveOpen-Wired"]],template:function(t,i){1&t&&(C(0,"section",0)(1,"h1"),D(2,"Smart home"),T()(),C(3,"section",0)(4,"h2"),D(5," Electricity "),T(),C(6,"h3"),ne(7,"app-svg",1),C(8,"span"),D(9,"Normal - 230v"),T()(),C(10,"p"),D(11," The standard in Sweden is 10amps per group (1.5mm2). In Netherlands that would be 16amps and 2.5mm2 "),T(),C(12,"label",2)(13,"span"),D(14,"Technical "),T(),D(15),ne(16,"br"),D(17),ne(18,"br"),D(19),ne(20,"br"),T(),C(21,"h3"),ne(22,"app-svg",1),C(23,"span"),D(24,"3Phase - 400v"),T()(),C(25,"p"),D(26," This weird symbol is a "),C(27,"tag"),D(28,"perilex"),T(),D(29," plug. It has 3-phase (or sometimes just two). The main goal is the devide the load over 3 wires instead of one. It requires more wires though. Think induction in the kitchen, or e-car (not this connector). "),T(),C(30,"label",2)(31,"span"),D(32,"Technical "),T(),D(33),ne(34,"br"),D(35),ne(36,"br"),D(37),ne(38,"br"),T()(),C(39,"section",0)(40,"h2"),D(41," lightning "),T(),C(42,"h3"),ne(43,"app-svg",1),C(44,"span"),D(45,"Lamps"),T()(),C(46,"p"),D(47," Lamps can come in 230v and 24v. Most lamps should be dimmable and wires run back to the PLC "),T(),C(48,"h3"),ne(49,"app-svg",1),C(50,"span"),D(51,"Double switch "),T()(),C(52,"p"),D(53," Double pulse switches. Allows for 6 options. Single, double and long press. They are 24v and wires run back to the PLC. "),T(),C(54,"h3"),ne(55,"app-svg",1),C(56,"span"),D(57,"Dimmer"),T()(),C(58,"p"),D(59," All dimmable lights have a dim level that became less bright during the evening. Following the "),C(60,"a",3),D(61,"circadian lightning."),T(),D(62,". This button is only to overrule and switch on or off "),T(),C(63,"h3"),ne(64,"app-svg",1),C(65,"span"),D(66,"DLC, or light plugs"),T()(),C(67,"p"),D(68," Completely strange for outstanders. but every fixed light has a seperate miniplug. In Sweden they had a old one, and since 2019 they follow the EU standard of DLC. "),T()(),C(69,"section",0)(70,"h2"),D(71," Network / Ethernet "),T(),C(72,"h3"),ne(73,"app-svg",1),C(74,"span"),D(75,"Ethernet (rj45)"),T()(),C(76,"p"),D(77," If you work home, you need reliable internet. A wall outlet for a normal internet cable works the best. Not limited to computers, many devices can have them as well. Like speakers, television etc. "),T(),C(78,"label",2)(79,"span"),D(80,"Technical "),T(),D(81),ne(82,"br"),D(83),ne(84,"br"),T(),C(85,"h3"),ne(86,"app-svg",1),C(87,"span"),D(88,"Power-over-Ethernet "),T()(),C(89,"p"),D(90,"Its a internet cable with (often) 48volts. So you can power up a device with only the internet cable. Perfect for a ring-doorbel, security camera or even wifi-access-points "),T(),C(91,"h3"),ne(92,"app-svg",1),C(93,"span"),D(94,"Wifi"),T()(),C(95,"p"),D(96,"Maybe most important for any mobile device, or guests "),T(),C(97,"label",2)(98,"span"),D(99,"Technical "),T(),D(100),ne(101,"br"),T()(),C(102,"section",0)(103,"h2"),D(104," Safety "),T(),C(105,"h3"),ne(106,"app-svg",1),C(107,"span"),D(108,"Smoke/heat detectors"),T()(),C(109,"p"),D(110,"We have a firefighter in the family. On a serious note, everyone should have multiple of smoke sensors. A heat sensor in the kitchen. "),T(),C(111,"label",2)(112,"span"),D(113,"Technical "),T(),D(114),ne(115,"br"),D(116),ne(117,"br"),T(),C(118,"h3"),ne(119,"app-svg",1),C(120,"span"),D(121,"Camera's"),T()(),C(122,"p"),D(123," The most optional step. Gives a bit of comfort, security wise. It does allow you to monitor your house, when you are away (via your own VPN of course) "),T(),C(124,"label",2)(125,"span"),D(126,"Technical "),T(),D(127),ne(128,"br"),T(),C(129,"h3"),ne(130,"app-svg",1)(131,"app-svg",1),C(132,"span"),D(133,"Window/Door sensors/Motion detection"),T()(),C(134,"p"),D(135," Extends the alarm functoin "),T()(),C(136,"section",0)(137,"h2"),D(138," Other smarts "),T(),C(139,"h3"),ne(140,"app-svg",1),C(141,"span"),D(142,"Sun blinds / screens"),T()(),C(143,"p"),D(144," Essential to a passive house, because the sun radiation is to much during the summer. "),T(),C(145,"h3"),ne(146,"app-svg",1),C(147,"span"),D(148,"Motion sensors"),T()(),C(149,"p"),D(150," Fun addon to help to automate the smart-home. Lights can be turned on/off automatically. "),T(),C(151,"h3"),ne(152,"app-svg",1),C(153,"span"),D(154,"Temperature"),T()(),C(155,"p"),D(156," Help to regulate the heat/cooling and ventilation in certain area's of the house "),T()(),C(157,"section",0)(158,"h2"),D(159," Ventilation "),T(),C(160,"h3"),ne(161,"app-svg",1),C(162,"span"),D(163,"Ventilation in"),T()(),C(164,"p"),D(165," Fresh air is needed in the bedrooms and main living rooms. It flows to the other parts of the house. Mainly because the air-intake in other rooms "),T(),C(166,"h3"),ne(167,"app-svg",1),C(168,"span"),D(169,"Ventilation out"),T()(),C(170,"p"),D(171," The air intakes are in the rooms with 'dirty' air. Of course the toilets, but also the bathroom/kitchen due to moisture and smells. "),T(),C(172,"p"),D(173," Read more about ventilation on the installation page! "),T()(),ne(174,"disqus",4)),2&t&&(Z("id",i.Section.wiredWelcome),H(3),Z("id",i.Section.wiredPower),H(4),tr("sensor-",i.SensorType.socket,""),kn("url","assets/svg/",i.SensorType.socket,".svg"),H(8),vt(" Total cable length: ",i.getCable(i.SensorType.socket),"m"),H(2),vt(" Groups: ",i.getGroups(i.SensorType.socket),""),H(2),vt(" Amount: ",i.getOutlets(i.SensorType.socket),""),H(3),tr("sensor-",i.SensorType.perilex,""),kn("url","assets/svg/",i.SensorType.perilex,".svg"),H(11),vt(" Total cable length: ",i.getCable(i.SensorType.perilex),"m"),H(2),vt(" Groups: ",i.getGroups(i.SensorType.perilex),""),H(2),vt(" Amount: ",i.getOutlets(i.SensorType.perilex),""),H(2),Z("id",i.Section.wiredLight),H(4),tr("sensor-",i.SensorType.lightBulb,""),kn("url","assets/svg/",i.SensorType.lightBulb,".svg"),H(6),tr("sensor-",i.SensorType.lightSwitch,""),kn("url","assets/svg/",i.SensorType.lightSwitch,".svg"),H(6),tr("sensor-",i.SensorType.dimmer,""),kn("url","assets/svg/",i.SensorType.dimmer,".svg"),H(9),tr("sensor-",i.SensorType.dlc,""),kn("url","assets/svg/",i.SensorType.dlc,".svg"),H(5),Z("id",i.Section.wiredEthernet),H(4),tr("sensor-",i.SensorType.ethernet,""),kn("url","assets/svg/",i.SensorType.ethernet,".svg"),H(8),vt(" Amount: ",i.getOutlets(i.SensorType.ethernet),""),H(2),vt(" Total cable length: ",i.getCable(i.SensorType.ethernet,0),"m"),H(3),tr("sensor-",i.SensorType.poe,""),kn("url","assets/svg/",i.SensorType.poe,".svg"),H(6),tr("sensor-",i.SensorType.wifi,""),kn("url","assets/svg/",i.SensorType.wifi,".svg"),H(8),vt(" Amount: ",i.getOutlets(i.SensorType.wifi)," Access points"),H(2),Z("id",i.Section.wiredSafety),H(4),tr("sensor-",i.SensorType.smoke,""),kn("url","assets/svg/",i.SensorType.smoke,".svg"),H(8),vt(" Amount: ",i.getOutlets(i.SensorType.smoke),""),H(2),vt(" Total cable length: ",i.getCable(i.SensorType.smoke,0),"m"),H(3),tr("sensor-",i.SensorType.camera,""),kn("url","assets/svg/",i.SensorType.camera,".svg"),H(8),vt(" Amount: ",i.getOutlets(i.SensorType.camera)," PoE"),H(3),tr("sensor-",i.SensorType.pir,""),kn("url","assets/svg/",i.SensorType.pir,".svg"),H(1),tr("sensor-",i.SensorType.alarm,""),kn("url","assets/svg/",i.SensorType.alarm,".svg"),H(5),Z("id",i.Section.wiredExtra),H(4),tr("sensor-",i.SensorType.blinds,""),kn("url","assets/svg/",i.SensorType.blinds,".svg"),H(6),tr("sensor-",i.SensorType.pir,""),kn("url","assets/svg/",i.SensorType.pir,".svg"),H(6),tr("sensor-",i.SensorType.temperature,""),kn("url","assets/svg/",i.SensorType.temperature,".svg"),H(5),Z("id",i.Section.wiredVent),H(4),tr("sensor-",i.SensorType.ventIn,""),kn("url","assets/svg/",i.SensorType.ventIn,".svg"),H(6),tr("sensor-",i.SensorType.ventOut,""),kn("url","assets/svg/",i.SensorType.ventOut,".svg"))},dependencies:[Vf,L$,A8],styles:["h3[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%]{margin-right:6px}"]}),n})();const LVe=["tableRows"];function PVe(n,e){if(1&n&&(C(0,"th",7),D(1),T()),2&n){const t=et().$implicit;H(1),vt(" ",t.name," ")}}function OVe(n,e){if(1&n&&ne(0,"span",9),2&n){const t=et().$implicit,i=et().$implicit;Z("innerHTML",i.def(t[i.id],t.unit),xd)}}function FVe(n,e){if(1&n&&(C(0,"td",8),ne(1,"span",9),Ue(2,OVe,1,1,"span",10),ne(3,"span",9),T()),2&n){const t=e.$implicit,i=et().$implicit;H(1),Z("innerHTML",i.prefix,xd),H(1),Z("ngIf",t[i.id]),H(1),Z("innerHTML",i.postfix,xd)}}function NVe(n,e){1&n&&(zi(0,4),Ue(1,PVe,2,1,"th",5),Ue(2,FVe,4,3,"td",6),Bi()),2&n&&Z("matColumnDef",e.$implicit.id)}function zVe(n,e){1&n&&ne(0,"tr",11)}function BVe(n,e){if(1&n){const t=is();zi(0),C(1,"tr",12,13),$e("click",function(){const s=Xt(t).$implicit;return Zt(et().rowClick(s))}),T(),Bi()}if(2&n){const t=e.$implicit;H(1),function zR(n,e,t,i,r){va(co,tl,Y1(Se(),n,e,t,i,r),!0)}("group-",t.uuid," row-",t.type,""),Nt("row-folded",t.uuid)}}let VVe=(()=>{class n{constructor(t){this.houseService=t,this.columns=[{id:"folded",name:"",def:i=>`${i}`},{id:$f.name,name:"Name",def:i=>`${i}`},{id:"calcAmount",name:"#",def:(i,r="x")=>`${i}${r}`},{id:"price",name:"Piece price",def:i=>`${this.readableNumbers(Number(i))}`},{id:"calcPrice",name:"Sum price",def:i=>`${this.readableNumbers(Number(i),-2)}`},{id:$f.sizeOrVersion,name:"Size or Version",def:i=>`${i}`},{id:$f.remarks,name:"remarks",def:i=>`${i}`}],this.groupRow={},this.columnNames=this.columns.map(i=>i.id),this.parts=[]}set data(t){this.costTable=t;const i=t.costs.filter(r=>r);this.dataSource=[...i.flatMap(r=>r instanceof t6?[r,...r.costs]:r),new fSe({name:`Total ${t.alias.toLocaleLowerCase()}`,costs:i})]}readableNumbers(t,i){return void 0!==i?`\u20ac${gt(t,0).toLocaleString()}`:t>1e3?`\u20ac${gt(t).toLocaleString()}`:`\u20ac${t}`}rowClick(t){t instanceof t6&&(t.toggleFold(),this.rowContainers.forEach(i=>{const r=i.nativeElement.classList;r.contains(`group-${t.uuid}`)&&r.toggle("row-folded")}))}}return n.\u0275fac=function(t){return new(t||n)(S(rr))},n.\u0275cmp=dt({type:n,selectors:[["app-table"]],viewQuery:function(t,i){if(1&t&&fi(LVe,5,Be),2&t){let r;kt(r=Lt())&&(i.rowContainers=r)}},inputs:{data:"data"},decls:4,vars:6,consts:[["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z0",3,"dataSource","id"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"innerHTML"],[3,"innerHTML",4,"ngIf"],["mat-header-row",""],["mat-row","",3,"click"],["tableRows",""]],template:function(t,i){1&t&&(C(0,"table",0),Ue(1,NVe,3,1,"ng-container",1),Ue(2,zVe,1,0,"tr",2),Ue(3,BVe,3,6,"ng-container",3),T()),2&t&&(kn("id","table-",i.costTable.section,""),Z("dataSource",i.dataSource),H(1),Z("ngForOf",i.columns),H(1),Z("matHeaderRowDef",i.columnNames)("matHeaderRowDefSticky",!0),H(1),Z("matRowDefColumns",i.columnNames))},dependencies:[au,Go,GV,xw,WV,ww,bw,jV,Cw,Mw,$V,qV],styles:["tr[_ngcontent-%COMP%]{transition:.2s;background-color:var(--color-0)!important}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr.row-total[_ngcontent-%COMP%]{background-color:var(--color-5)!important}tr.row-group[_ngcontent-%COMP%]{background-color:var(--color-10)!important;cursor:pointer}tr[_ngcontent-%COMP%]:hover{background-color:var(--color-20)!important}tr.row-folded[_ngcontent-%COMP%]:not(.row-group){height:0}tr.row-folded[_ngcontent-%COMP%]:not(.row-group)   td[_ngcontent-%COMP%]{border-bottom-width:0px;padding:0;line-height:0px;overflow:hidden}[_nghost-%COMP%], table[_ngcontent-%COMP%]{width:100%}.mat-column-calcAmount[_ngcontent-%COMP%], .mat-column-price[_ngcontent-%COMP%], .mat-column-calcPrice[_ngcontent-%COMP%]{text-align:right;width:60px}.mat-column-calcPrice[_ngcontent-%COMP%]{padding-right:16px}.mat-column-sizeOrVersion[_ngcontent-%COMP%], .mat-column-other[_ngcontent-%COMP%]{min-width:60px}.mat-column-name[_ngcontent-%COMP%]{min-width:200px}"]}),n})();function HVe(n,e){1&n&&ga(0)}const UVe=function(n){return{$implicit:n}};function GVe(n,e){if(1&n&&(zi(0),Ue(1,HVe,1,0,"ng-container",4),Bi()),2&n){const t=e.$implicit;et();const i=hi(8);H(1),Z("ngTemplateOutlet",i)("ngTemplateOutletContext",Gl(2,UVe,t))}}function WVe(n,e){1&n&&(C(0,"span"),D(1," Nice to discover a lot of moldings: "),C(2,"a",8),D(3,"Wikipedia Moldings"),T()())}function jVe(n,e){if(1&n){const t=is();C(0,"section",5)(1,"h2",6),$e("click",function(){const s=Xt(t).$implicit;return Zt(s.sectionFold=!s.sectionFold)}),C(2,"mat-icon"),D(3),T(),D(4),T(),C(5,"div"),Ue(6,WVe,4,0,"span",7),ne(7,"app-table",3),T()()}if(2&n){const t=e.$implicit,i=et();Z("id",t.section),H(3),vt("",t.sectionFold?"expand_more":"expand_less"," "),H(1),vt(" ",t.alias," "),H(1),Nt("folded",t.sectionFold),H(1),Z("ngIf",t.section===i.Section.costsFinishes),H(1),Z("data",t)}}const $Ve=[{path:"map",component:IVe},{path:"costs",component:(()=>{class n{constructor(t){this.houseService=t,this.Section=ke,this.tables=[this.getPreps(),this.getConstruction(),this.getOpenings(),this.getElectra(),this.getFinish(),this.getOutsideFinish()],this.hiddenTables=[this.getKitchen(),this.getBathroom()],this.totals=this.getTotals()}getFinish(){const{innerLength:i}=this.houseService.getWallLength(),{innerArea:s}=this.houseService.getWallArea();return new _c({section:ke.costsFinishes,alias:"Finishes",costs:[new Mi({amount:i,name:"Crown molding",price:3,unit:"m"}),new Mi({amount:i,name:"Baseboard",price:3,unit:"m"}),this.houseService.getT(Jn,[],a=>({name:"Door casing",price:60})),this.houseService.getT(Hr,[],a=>({name:"Window casing",price:60})),new Mi({amount:s,name:"Drywall / Gips boards",price:10,unit:"m2"})]})}getOutsideFinish(){const{innerLength:i}=this.houseService.getWallLength(),{innerArea:s}=this.houseService.getWallArea();return new _c({section:ke.costsOuterFinishes,alias:"Outer finishes",costs:[new Mi({amount:i,name:"Crown molding",price:3,unit:"m"}),new Mi({amount:i,name:"Baseboard",price:3,unit:"m"}),this.houseService.getT(Jn,[],a=>({name:"Door casing",price:60})),this.houseService.getT(Hr,[],a=>({name:"Window casing",price:60})),new Mi({amount:s,name:"Drywall / Gips boards",price:10,unit:"m2"})]})}getElectra(){return new _c({section:ke.costsElectra,alias:"Electra",costs:[new Mi({amount:this.houseService.getGroups(X.socket).length,name:"Circuit breaker",sizeOrVersion:"10A - 240v",price:10}),new Mi({amount:Math.ceil(this.houseService.getGroups(X.socket).length/4),name:"Circuit breaker Earth Group",sizeOrVersion:"240v",price:80}),this.houseService.getT(de,["sensorType"],i=>({name:"Electric power socket",sizeOrVersion:"230v",price:20}),i=>i.sensorType===X.socket),this.houseService.getT(de,["sensorType"],i=>({name:"Electric wires",sizeOrVersion:"2.5mm2 230v",price:2,unit:"m"}),i=>[X.socket].includes(i.sensorType),!1),this.houseService.getT(de,["sensorType"],i=>({name:"Perilex socket",price:60}),i=>i.sensorType===X.perilex),this.houseService.getT(de,["sensorType"],i=>({name:"Perilex wire",sizeOrVersion:"5 sub wires",price:2,unit:"m"}),i=>[X.perilex].includes(i.sensorType),!1),this.houseService.getT(_r,["sensorType"],i=>({name:"Light socket",price:20}),i=>!0),this.houseService.getT(de,["sensorType"],i=>({name:"Switch (light)",sizeOrVersion:"Double pulse",price:20}),i=>i.sensorType===X.lightSwitch),this.houseService.getT(de,["sensorType"],i=>({name:"Dimmer",price:20}),i=>i.sensorType===X.dimmer),this.houseService.getT(de,["sensorType"],i=>({name:"Wifi AP",price:100}),i=>i.sensorType===X.wifi),this.houseService.getT(de,[],i=>({name:"Ethernet cable",sizeOrVersion:"CAT6",price:.6,unit:"m"}),i=>[X.ethernet,X.poe].includes(i.sensorType),!1)]})}getPreps(){return new _c({section:ke.costsPreparations,alias:"Preparations",costs:[new Mi({name:"Ground prep",price:9e3}),new Mi({name:"Constructions calculations",price:3e3}),new Mi({name:"PassivHaus Certification",price:3e3}),new Mi({name:"Utilities connections /fees",price:15e3}),new Mi({name:"Tool rental",price:3e3})]})}getConstruction(){return new _c({section:ke.costsConstruction,alias:"Construction",costs:[new Mi({name:"foundation",price:9e3}),new Mi({name:"footer",price:9e3}),new Mi({name:"Concrete prefab floor",price:32e3}),new Mi({name:"Studs",price:1e4}),new Mi({name:"OSB",price:1e4})]})}getBathroom(){return new _c({section:ke.costsConstruction,alias:"Bathroom",costs:[new Mi({name:"Complete kitchen",price:9e3})]})}getKitchen(){return new _c({section:ke.costsConstruction,alias:"Kitchen",costs:[new Mi({name:"Complete kitchen",price:9e3})]})}getOpenings(){return new _c({section:ke.costsOpenings,alias:"Openings",costs:[this.houseService.getT(Jn,["outside"],i=>({name:"Door",sizeOrVersion:`230x${i.width}`,price:i.outside?600:200,unit:"#",other:i.outside?"Outer door":"Inner door"})),this.houseService.getT(Hr,["width","height","windowForm"],i=>({name:"Window",sizeOrVersion:`${i.height}x${i.width}`,price:800*i.width,other:`${i.windowForm}`}),i=>![gc.windowWall].includes(i.windowForm)),this.houseService.getT(Hr,["width","height","windowForm"],i=>({name:"Window wall",sizeOrVersion:`${i.height}x${i.width}`,price:6e4,other:"main window wall"}),i=>[gc.windowWall].includes(i.windowForm))]})}getTotals(){const t=[...this.tables,...this.hiddenTables].flatMap(i=>new Mi({price:pl(i.costs.filter(r=>void 0!==r).map(r=>r.calcPrice)),name:i.alias}));return console.log(),new _c({section:ke.costsTotals,alias:"Total",costs:[...t,new Mi({price:pl(t.map(i=>i.price)),amount:.12,name:"Unexpected costs (12%)"})]})}}return n.\u0275fac=function(t){return new(t||n)(S(rr))},n.\u0275cmp=dt({type:n,selectors:[["app-page-costs"]],decls:13,vars:3,consts:[[4,"ngFor","ngForOf"],["simple",""],[2,"margin-bottom","40px",3,"id"],[3,"data"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"id"],[3,"click"],[4,"ngIf"],["href","https://en.wikipedia.org/wiki/Molding_(decorative)"]],template:function(t,i){1&t&&(C(0,"h1"),D(1,"What does it costs"),T(),C(2,"p"),D(3," This is a overview of all the prices. Some are fixed but most are dynamic calculated of the other inputs on this website. All these prices are estimations based on on certain area, with a certain deal with a construction store.\n"),T(),C(4,"h3"),D(5," This page is still under construction. Not complete!!! Prices are not accurate\n"),T(),Ue(6,GVe,2,4,"ng-container",0),Ue(7,jVe,8,7,"ng-template",null,1,nl),C(9,"section",2)(10,"h1"),D(11,"Totals"),T(),ne(12,"app-table",3),T()),2&t&&(H(6),Z("ngForOf",i.tables),H(3),Z("id",i.Section.costsTotals),H(3),Z("data",i.totals))},dependencies:[au,Go,sL,G5,VVe],styles:["[_nghost-%COMP%]{max-width:900px;display:block;margin:0 auto;padding:0 32px}section[_ngcontent-%COMP%]{margin:0;padding:0 0 0 24px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{cursor:pointer;transition:.2s;display:flex;align-items:center;padding:6px;gap:16px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{background:var(--color-10)}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{max-height:100vh;transition:.4s ease-in;overflow:hidden}section[_ngcontent-%COMP%] > div.folded[_ngcontent-%COMP%]{transition:.4s ease-out;max-height:0px}app-table[_ngcontent-%COMP%]{display:block}  #table-costs-totals .mat-column-sizeOrVersion,   #table-costs-totals .mat-column-other,   #table-costs-totals .mat-column-calcAmount,   #table-costs-totals .mat-column-calcAmount,   #table-costs-totals .mat-column-price{color:transparent}"]}),n})()},{path:"about",component:(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.discord=this.appService.discord,this.github=this.appService.github,this.faDiscord=E4,this.faGithub=p9}}return n.\u0275fac=function(t){return new(t||n)(S(rr),S(Ii))},n.\u0275cmp=dt({type:n,selectors:[["app-page-about"]],decls:45,vars:4,consts:[["src","/assets/svg/logo.svg"],["target","_blank",1,"larger-link",2,"background","var(--primary-color)",3,"href"],[3,"icon"],["target","_blank",1,"larger-link",3,"href"],["target","_blank","href","https://GeoDev.nl",1,"larger-link"],["target","_blank","href","https://www.joostdevree.nl"],["target","_blank","href","https://gathering.tweakers.net/forum/list_messages/2147286"]],template:function(t,i){1&t&&(C(0,"h1"),D(1,"About PassiveOpen "),ne(2,"img",0),T(),D(3," Well we didn't put a lot of effort in this part of the site yet. Maybe you can help! "),C(4,"h2"),D(5," We have an online community.\n"),T(),C(6,"p"),D(7,"Join us on our "),C(8,"a",1),ne(9,"fa-icon",2),D(10," Discord "),T(),D(11," channel. We know, its just an other tool... But it allows us to be more swift with it all. Anybody is welcome!\n"),T(),C(12,"h2"),D(13," Open source\n"),T(),C(14,"p"),D(15," The plan is to share the plans. That would include any costs, calculations and plans, drawings and of course thoughts."),ne(16,"br")(17,"br"),D(18," We share this, so you can build this optimized but charming house your self or with a contractor. For free (not the contractor nor materials) "),ne(19,"br")(20,"br"),D(21," We are still figuring out which 'license model' we should give this project. But don't be afraid, it won't cost you anything. More about credits to the people that helped this project.\n"),T(),C(22,"div"),D(23," Everything is free and open source. See "),C(24,"a",3),ne(25,"fa-icon",2),D(26," GitHub "),T()(),C(27,"h2"),D(28," Ungoing credits:\n"),T(),C(29,"div")(30,"ul")(31,"li"),D(32," Build by "),C(33,"a",4),D(34,"GeoDev"),T()(),C(35,"li"),D(36," All the discord users of course "),T()(),D(37," Site and credits in Dutch: "),C(38,"ul")(39,"li")(40,"a",5),D(41,"https://www.joostdevree.nl"),T()(),C(42,"li")(43,"a",6),D(44,"tweakers forum"),T()()()()),2&t&&(H(8),Ja("href",i.discord,tu),H(1),Z("icon",i.faDiscord),H(15),Ja("href",i.github,tu),H(1),Z("icon",i.faGithub))},dependencies:[Xb],styles:["[_nghost-%COMP%]{max-width:600px;display:block;margin:0 auto;padding:0 32px}h2[_ngcontent-%COMP%]{margin-top:80px!important}h1[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}"]}),n})()},{path:"",component:bOe,children:[{path:"",component:IOe},{path:"stairs",component:LOe},{path:"facade",component:OOe},{path:"installations",component:FOe},{path:"construction",component:POe},{path:"wired",component:kVe}]},{path:"**",redirectTo:"",pathMatch:"full"}];let qVe=(()=>{class n{constructor(t){t.addSvgIconSet("material-icons-outlined")}}return n.\u0275fac=function(t){return new(t||n)(K(Qm))},n.\u0275mod=at({type:n,bootstrap:[x6e]}),n.\u0275inj=ot({providers:[e5],imports:[DL,b7e,G9e,dxe,y5e,r5e,hxe.forRoot("passiv"),$pe.forRoot($Ve,{anchorScrolling:"enabled"})]}),n})();(function fie(){Ek=!1})(),Nse().bootstrapModule(qVe).catch(n=>console.error(n))},402:function(fp){fp.exports=function(){"use strict";function pp(ae,me,ze,ht,ft){!function ut(bt,tn,wn,un,si){for(;un>wn;){if(un-wn>600){var zn=un-wn+1,Oi=tn-wn+1,hd=Math.log(zn),la=.5*Math.exp(2*hd/3),bs=.5*Math.sqrt(hd*la*(zn-la)/zn)*(Oi-zn/2<0?-1:1);ut(bt,tn,Math.max(wn,Math.floor(tn-Oi*la/zn+bs)),Math.min(un,Math.floor(tn+(zn-Oi)*la/zn+bs)),si)}var bn=bt[tn],Zc=wn,no=un;for(qa(bt,wn,tn),si(bt[un],bn)>0&&qa(bt,wn,un);Zc<no;){for(qa(bt,Zc,no),Zc++,no--;si(bt[Zc],bn)<0;)Zc++;for(;si(bt[no],bn)>0;)no--}0===si(bt[wn],bn)?qa(bt,wn,no):qa(bt,++no,un),no<=tn&&(wn=no+1),tn<=no&&(un=no-1)}}(ae,me,ze||0,ht||ae.length-1,ft||mn)}function qa(ae,me,ze){var ht=ae[me];ae[me]=ae[ze],ae[ze]=ht}function mn(ae,me){return ae<me?-1:ae>me?1:0}var jn=function(ae){void 0===ae&&(ae=9),this._maxEntries=Math.max(4,ae),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function mp(ae,me,ze){if(!ze)return me.indexOf(ae);for(var ht=0;ht<me.length;ht++)if(ze(ae,me[ht]))return ht;return-1}function oa(ae,me){ri(ae,0,ae.children.length,me,ae)}function ri(ae,me,ze,ht,ft){ft||(ft=Yc(null)),ft.minX=1/0,ft.minY=1/0,ft.maxX=-1/0,ft.maxY=-1/0;for(var ut=me;ut<ze;ut++){var bt=ae.children[ut];$c(ft,ae.leaf?ht(bt):bt)}return ft}function $c(ae,me){return ae.minX=Math.min(ae.minX,me.minX),ae.minY=Math.min(ae.minY,me.minY),ae.maxX=Math.max(ae.maxX,me.maxX),ae.maxY=Math.max(ae.maxY,me.maxY),ae}function qg(ae,me){return ae.minX-me.minX}function Yg(ae,me){return ae.minY-me.minY}function aa(ae){return(ae.maxX-ae.minX)*(ae.maxY-ae.minY)}function Dl(ae){return ae.maxX-ae.minX+(ae.maxY-ae.minY)}function y1(ae,me){return ae.minX<=me.minX&&ae.minY<=me.minY&&me.maxX<=ae.maxX&&me.maxY<=ae.maxY}function qc(ae,me){return me.minX<=ae.maxX&&me.minY<=ae.maxY&&me.maxX>=ae.minX&&me.maxY>=ae.minY}function Yc(ae){return{children:ae,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Xg(ae,me,ze,ht,ft){for(var ut=[me,ze];ut.length;)if(!((ze=ut.pop())-(me=ut.pop())<=ht)){var bt=me+Math.ceil((ze-me)/ht/2)*ht;pp(ae,bt,me,ze,ft),ut.push(me,bt,bt,ze)}}return jn.prototype.all=function(){return this._all(this.data,[])},jn.prototype.search=function(ae){var me=this.data,ze=[];if(!qc(ae,me))return ze;for(var ht=this.toBBox,ft=[];me;){for(var ut=0;ut<me.children.length;ut++){var bt=me.children[ut],tn=me.leaf?ht(bt):bt;qc(ae,tn)&&(me.leaf?ze.push(bt):y1(ae,tn)?this._all(bt,ze):ft.push(bt))}me=ft.pop()}return ze},jn.prototype.collides=function(ae){var me=this.data;if(!qc(ae,me))return!1;for(var ze=[];me;){for(var ht=0;ht<me.children.length;ht++){var ft=me.children[ht],ut=me.leaf?this.toBBox(ft):ft;if(qc(ae,ut)){if(me.leaf||y1(ae,ut))return!0;ze.push(ft)}}me=ze.pop()}return!1},jn.prototype.load=function(ae){if(!ae||!ae.length)return this;if(ae.length<this._minEntries){for(var me=0;me<ae.length;me++)this.insert(ae[me]);return this}var ze=this._build(ae.slice(),0,ae.length-1,0);if(this.data.children.length)if(this.data.height===ze.height)this._splitRoot(this.data,ze);else{if(this.data.height<ze.height){var ht=this.data;this.data=ze,ze=ht}this._insert(ze,this.data.height-ze.height-1,!0)}else this.data=ze;return this},jn.prototype.insert=function(ae){return ae&&this._insert(ae,this.data.height-1),this},jn.prototype.clear=function(){return this.data=Yc([]),this},jn.prototype.remove=function(ae,me){if(!ae)return this;for(var ze,ht,ft,ut=this.data,bt=this.toBBox(ae),tn=[],wn=[];ut||tn.length;){if(ut||(ut=tn.pop(),ht=tn[tn.length-1],ze=wn.pop(),ft=!0),ut.leaf){var un=mp(ae,ut.children,me);if(-1!==un)return ut.children.splice(un,1),tn.push(ut),this._condense(tn),this}ft||ut.leaf||!y1(ut,bt)?ht?(ze++,ut=ht.children[ze],ft=!1):ut=null:(tn.push(ut),wn.push(ze),ze=0,ht=ut,ut=ut.children[0])}return this},jn.prototype.toBBox=function(ae){return ae},jn.prototype.compareMinX=function(ae,me){return ae.minX-me.minX},jn.prototype.compareMinY=function(ae,me){return ae.minY-me.minY},jn.prototype.toJSON=function(){return this.data},jn.prototype.fromJSON=function(ae){return this.data=ae,this},jn.prototype._all=function(ae,me){for(var ze=[];ae;)ae.leaf?me.push.apply(me,ae.children):ze.push.apply(ze,ae.children),ae=ze.pop();return me},jn.prototype._build=function(ae,me,ze,ht){var ft,ut=ze-me+1,bt=this._maxEntries;if(ut<=bt)return oa(ft=Yc(ae.slice(me,ze+1)),this.toBBox),ft;ht||(ht=Math.ceil(Math.log(ut)/Math.log(bt)),bt=Math.ceil(ut/Math.pow(bt,ht-1))),(ft=Yc([])).leaf=!1,ft.height=ht;var tn=Math.ceil(ut/bt),wn=tn*Math.ceil(Math.sqrt(bt));Xg(ae,me,ze,wn,this.compareMinX);for(var un=me;un<=ze;un+=wn){var si=Math.min(un+wn-1,ze);Xg(ae,un,si,tn,this.compareMinY);for(var zn=un;zn<=si;zn+=tn){var Oi=Math.min(zn+tn-1,si);ft.children.push(this._build(ae,zn,Oi,ht-1))}}return oa(ft,this.toBBox),ft},jn.prototype._chooseSubtree=function(ae,me,ze,ht){for(;ht.push(me),!me.leaf&&ht.length-1!==ze;){for(var ft=1/0,ut=1/0,bt=void 0,tn=0;tn<me.children.length;tn++){var wn=me.children[tn],un=aa(wn),si=(zn=ae,Oi=wn,(Math.max(Oi.maxX,zn.maxX)-Math.min(Oi.minX,zn.minX))*(Math.max(Oi.maxY,zn.maxY)-Math.min(Oi.minY,zn.minY))-un);si<ut?(ut=si,ft=un<ft?un:ft,bt=wn):si===ut&&un<ft&&(ft=un,bt=wn)}me=bt||me.children[0]}var zn,Oi;return me},jn.prototype._insert=function(ae,me,ze){var ht=ze?ae:this.toBBox(ae),ft=[],ut=this._chooseSubtree(ht,this.data,me,ft);for(ut.children.push(ae),$c(ut,ht);me>=0&&ft[me].children.length>this._maxEntries;)this._split(ft,me),me--;this._adjustParentBBoxes(ht,ft,me)},jn.prototype._split=function(ae,me){var ze=ae[me],ht=ze.children.length,ft=this._minEntries;this._chooseSplitAxis(ze,ft,ht);var ut=this._chooseSplitIndex(ze,ft,ht),bt=Yc(ze.children.splice(ut,ze.children.length-ut));bt.height=ze.height,bt.leaf=ze.leaf,oa(ze,this.toBBox),oa(bt,this.toBBox),me?ae[me-1].children.push(bt):this._splitRoot(ze,bt)},jn.prototype._splitRoot=function(ae,me){this.data=Yc([ae,me]),this.data.height=ae.height+1,this.data.leaf=!1,oa(this.data,this.toBBox)},jn.prototype._chooseSplitIndex=function(ae,me,ze){for(var ht,ft,ut,bt,tn,wn,un,si=1/0,zn=1/0,Oi=me;Oi<=ze-me;Oi++){var hd=ri(ae,0,Oi,this.toBBox),la=ri(ae,Oi,ze,this.toBBox),bs=(ft=hd,ut=la,void 0,void 0,void 0,void 0,bt=Math.max(ft.minX,ut.minX),tn=Math.max(ft.minY,ut.minY),wn=Math.min(ft.maxX,ut.maxX),un=Math.min(ft.maxY,ut.maxY),Math.max(0,wn-bt)*Math.max(0,un-tn)),Xc=aa(hd)+aa(la);bs<si?(si=bs,ht=Oi,zn=Xc<zn?Xc:zn):bs===si&&Xc<zn&&(zn=Xc,ht=Oi)}return ht||ze-me},jn.prototype._chooseSplitAxis=function(ae,me,ze){var ht=ae.leaf?this.compareMinX:qg,ft=ae.leaf?this.compareMinY:Yg;this._allDistMargin(ae,me,ze,ht)<this._allDistMargin(ae,me,ze,ft)&&ae.children.sort(ht)},jn.prototype._allDistMargin=function(ae,me,ze,ht){ae.children.sort(ht);for(var ft=this.toBBox,ut=ri(ae,0,me,ft),bt=ri(ae,ze-me,ze,ft),tn=Dl(ut)+Dl(bt),wn=me;wn<ze-me;wn++){var un=ae.children[wn];$c(ut,ae.leaf?ft(un):un),tn+=Dl(ut)}for(var si=ze-me-1;si>=me;si--){var zn=ae.children[si];$c(bt,ae.leaf?ft(zn):zn),tn+=Dl(bt)}return tn},jn.prototype._adjustParentBBoxes=function(ae,me,ze){for(var ht=ze;ht>=0;ht--)$c(me[ht],ae)},jn.prototype._condense=function(ae){for(var me=ae.length-1,ze=void 0;me>=0;me--)0===ae[me].children.length?me>0?(ze=ae[me-1].children).splice(ze.indexOf(ae[me]),1):this.clear():oa(ae[me],this.toBBox)},jn}()}},fp=>{fp(fp.s=920)}]);