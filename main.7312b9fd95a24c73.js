(self.webpackChunkpassiveopen=self.webpackChunkpassiveopen||[]).push([[179],{267:(Pm,Lm,Pa)=>{"use strict";function cn(i){return"function"==typeof i}function Hn(i){const e=i(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Fm=Hn(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Xo(i,t){if(i){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}class Jn{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(cn(n))try{n()}catch(s){t=s instanceof Fm?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{ny(s)}catch(o){t=null!=t?t:[],o instanceof Fm?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Fm(t)}}add(t){var e;if(t&&t!==this)if(this.closed)ny(t);else{if(t instanceof Jn){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Xo(e,t)}remove(t){const{_finalizers:e}=this;e&&Xo(e,t),t instanceof Jn&&t._removeParent(this)}}Jn.EMPTY=(()=>{const i=new Jn;return i.closed=!0,i})();const Sc=Jn.EMPTY;function ty(i){return i instanceof Jn||i&&"closed"in i&&cn(i.remove)&&cn(i.add)&&cn(i.unsubscribe)}function ny(i){cn(i)?i():i.unsubscribe()}const Ko={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},_l={setTimeout(i,t,...e){const{delegate:n}=_l;return(null==n?void 0:n.setTimeout)?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){const{delegate:t}=_l;return((null==t?void 0:t.clearTimeout)||clearTimeout)(i)},delegate:void 0};function Fh(i){_l.setTimeout(()=>{const{onUnhandledError:t}=Ko;if(!t)throw i;t(i)})}function Ec(){}const Tc=de("C",void 0,void 0);function de(i,t,e){return{kind:i,value:t,error:e}}let Ie=null;function ot(i){if(Ko.useDeprecatedSynchronousErrorHandling){const t=!Ie;if(t&&(Ie={errorThrown:!1,error:null}),i(),t){const{errorThrown:e,error:n}=Ie;if(Ie=null,e)throw n}}else i()}class rt extends Jn{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ty(t)&&t.add(this)):this.destination=Hu}static create(t,e,n){return new rn(t,e,n)}next(t){this.isStopped?Ei(function se(i){return de("N",i,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Ei(function iy(i){return de("E",void 0,i)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ei(Tc,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mt=Function.prototype.bind;function Jt(i,t){return mt.call(i,t)}class wn{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){ei(n)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){ei(n)}else ei(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){ei(e)}}}class rn extends rt{constructor(t,e,n){let r;if(super(),cn(t)||!t)r={next:null!=t?t:void 0,error:null!=e?e:void 0,complete:null!=n?n:void 0};else{let s;this&&Ko.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&Jt(t.next,s),error:t.error&&Jt(t.error,s),complete:t.complete&&Jt(t.complete,s)}):r=t}this.destination=new wn(r)}}function ei(i){Ko.useDeprecatedSynchronousErrorHandling?function ct(i){Ko.useDeprecatedSynchronousErrorHandling&&Ie&&(Ie.errorThrown=!0,Ie.error=i)}(i):Fh(i)}function Ei(i,t){const{onStoppedNotification:e}=Ko;e&&_l.setTimeout(()=>e(i,t))}const Hu={closed:!0,next:Ec,error:function Ln(i){throw i},complete:Ec},Zo="function"==typeof Symbol&&Symbol.observable||"@@observable";function cs(i){return i}let Mn=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){const s=function N$(i){return i&&i instanceof rt||function Vs(i){return i&&cn(i.next)&&cn(i.error)&&cn(i.complete)}(i)&&ty(i)}(e)?e:new rn(e,n,r);return ot(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=Dc(n))((r,s)=>{const o=new rn({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[Zo](){return this}pipe(...e){return function ry(i){return 0===i.length?cs:1===i.length?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}(e)(this)}toPromise(e){return new(e=Dc(e))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=t=>new i(t),i})();function Dc(i){var t;return null!==(t=null!=i?i:Ko.Promise)&&void 0!==t?t:Promise}const B$=Hn(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Dt=(()=>{class i extends Mn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new rk(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new B$}next(e){ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:s}=this;return n||r?Sc:(this.currentObservers=null,s.push(e),new Jn(()=>{this.currentObservers=null,Xo(s,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:s}=this;n?e.error(r):s&&e.complete()}asObservable(){const e=new Mn;return e.source=this,e}}return i.create=(t,e)=>new rk(t,e),i})();class rk extends Dt{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:Sc}}function sk(i){return cn(null==i?void 0:i.lift)}function Ti(i){return t=>{if(sk(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function di(i,t,e,n,r){return new V$(i,t,e,n,r)}class V$ extends rt{constructor(t,e,n,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function en(i,t){return Ti((e,n)=>{let r=0;e.subscribe(di(n,s=>{n.next(i.call(t,s,r++))}))})}function zu(i){return this instanceof zu?(this.v=i,this):new zu(i)}function z$(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(i,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){n[h]&&(r[h]=function(f){return new Promise(function(p,m){s.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof zu?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(n[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function G$(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=function lk(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=i[s](o)).done,o.value)})}}}const $M=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function ck(i){return cn(null==i?void 0:i.then)}function uk(i){return cn(i[Zo])}function dk(i){return Symbol.asyncIterator&&cn(null==i?void 0:i[Symbol.asyncIterator])}function hk(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const fk=function j$(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function pk(i){return cn(null==i?void 0:i[fk])}function mk(i){return z$(this,arguments,function*(){const e=i.getReader();try{for(;;){const{value:n,done:r}=yield zu(e.read());if(r)return yield zu(void 0);yield yield zu(n)}}finally{e.releaseLock()}})}function gk(i){return cn(null==i?void 0:i.getReader)}function us(i){if(i instanceof Mn)return i;if(null!=i){if(uk(i))return function $$(i){return new Mn(t=>{const e=i[Zo]();if(cn(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if($M(i))return function q$(i){return new Mn(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}(i);if(ck(i))return function Y$(i){return new Mn(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Fh)})}(i);if(dk(i))return _k(i);if(pk(i))return function X$(i){return new Mn(t=>{for(const e of i)if(t.next(e),t.closed)return;t.complete()})}(i);if(gk(i))return function K$(i){return _k(mk(i))}(i)}throw hk(i)}function _k(i){return new Mn(t=>{(function Z$(i,t){var e,n,r,s;return function H$(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=G$(i);!(n=yield e.next()).done;)if(t.next(n.value),t.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(i,t).catch(e=>t.error(e))})}function vl(i,t,e,n=0,r=!1){const s=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function hr(i,t,e=1/0){return cn(t)?hr((n,r)=>en((s,o)=>t(n,s,r,o))(us(i(n,r))),e):("number"==typeof t&&(e=t),Ti((n,r)=>function Q$(i,t,e,n,r,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&t.complete()},f=m=>c<n?p(m):l.push(m),p=m=>{s&&t.next(m),c++;let g=!1;us(e(m,u++)).subscribe(di(t,_=>{null==r||r(_),s?f(_):t.next(_)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<n;){const _=l.shift();o?vl(t,o,()=>p(_)):p(_)}h()}catch(_){t.error(_)}}))};return i.subscribe(di(t,f,()=>{d=!0,h()})),()=>{null==a||a()}}(n,r,i,e)))}function Nm(i=1/0){return hr(cs,i)}const yl=new Mn(i=>i.complete());function vk(i){return i&&cn(i.schedule)}function qM(i){return i[i.length-1]}function yk(i){return cn(qM(i))?i.pop():void 0}function Bm(i){return vk(qM(i))?i.pop():void 0}function bk(i,t=0){return Ti((e,n)=>{e.subscribe(di(n,r=>vl(n,i,()=>n.next(r),t),()=>vl(n,i,()=>n.complete(),t),r=>vl(n,i,()=>n.error(r),t)))})}function xk(i,t=0){return Ti((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function wk(i,t){if(!i)throw new Error("Iterable cannot be null");return new Mn(e=>{vl(e,t,()=>{const n=i[Symbol.asyncIterator]();vl(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Cr(i,t){return t?function a7(i,t){if(null!=i){if(uk(i))return function t7(i,t){return us(i).pipe(xk(t),bk(t))}(i,t);if($M(i))return function r7(i,t){return new Mn(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}(i,t);if(ck(i))return function n7(i,t){return us(i).pipe(xk(t),bk(t))}(i,t);if(dk(i))return wk(i,t);if(pk(i))return function s7(i,t){return new Mn(e=>{let n;return vl(e,t,()=>{n=i[fk](),vl(e,t,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>cn(null==n?void 0:n.return)&&n.return()})}(i,t);if(gk(i))return function o7(i,t){return wk(mk(i),t)}(i,t)}throw hk(i)}(i,t):us(i)}function Nh(...i){const t=Bm(i),e=function e7(i,t){return"number"==typeof qM(i)?i.pop():t}(i,1/0),n=i;return n.length?1===n.length?us(n[0]):Nm(e)(Cr(n,t)):yl}function Mk(i={}){const{connector:t=(()=>new Dt),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{null==a||a.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},p=()=>{const m=o;f(),null==m||m.unsubscribe()};return Ti((m,g)=>{c++,!d&&!u&&h();const _=l=null!=l?l:t();g.add(()=>{c--,0===c&&!d&&!u&&(a=YM(p,r))}),_.subscribe(g),!o&&c>0&&(o=new rn({next:v=>_.next(v),error:v=>{d=!0,h(),a=YM(f,e,v),_.error(v)},complete:()=>{u=!0,h(),a=YM(f,n),_.complete()}}),us(m).subscribe(o))})(s)}}function YM(i,t,...e){if(!0===t)return void i();if(!1===t)return;const n=new rn({next:()=>{n.unsubscribe(),i()}});return t(...e).subscribe(n)}function Wn(i){for(let t in i)if(i[t]===Wn)return t;throw Error("Could not find renamed property on target object.")}function XM(i,t){for(const e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function Fn(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Fn).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function KM(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const l7=Wn({__forward_ref__:Wn});function sn(i){return i.__forward_ref__=sn,i.toString=function(){return Fn(this())},i}function Kt(i){return Ck(i)?i():i}function Ck(i){return"function"==typeof i&&i.hasOwnProperty(l7)&&i.__forward_ref__===sn}class et extends Error{constructor(t,e){super(function ZM(i,t){return`NG0${Math.abs(i)}${t?": "+t:""}`}(t,e)),this.code=t}}function Ut(i){return"string"==typeof i?i:null==i?"":String(i)}function Nr(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ut(i)}function sy(i,t){const e=t?` in ${t}`:"";throw new et(-201,`No provider for ${Nr(i)} found${e}`)}function Us(i,t){null==i&&function jn(i,t,e,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,i,null,"!=")}function be(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function st(i){return{providers:i.providers||[],imports:i.imports||[]}}function QM(i){return Sk(i,oy)||Sk(i,Tk)}function Sk(i,t){return i.hasOwnProperty(t)?i[t]:null}function Ek(i){return i&&(i.hasOwnProperty(JM)||i.hasOwnProperty(m7))?i[JM]:null}const oy=Wn({\u0275prov:Wn}),JM=Wn({\u0275inj:Wn}),Tk=Wn({ngInjectableDef:Wn}),m7=Wn({ngInjectorDef:Wn});var Ft=(()=>((Ft=Ft||{})[Ft.Default=0]="Default",Ft[Ft.Host=1]="Host",Ft[Ft.Self=2]="Self",Ft[Ft.SkipSelf=4]="SkipSelf",Ft[Ft.Optional=8]="Optional",Ft))();let eC;function Ac(i){const t=eC;return eC=i,t}function Dk(i,t,e){const n=QM(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&Ft.Optional?null:void 0!==t?t:void sy(Fn(i),"Injector")}function Rc(i){return{toString:i}.toString()}var Qo=(()=>((Qo=Qo||{})[Qo.OnPush=0]="OnPush",Qo[Qo.Default=1]="Default",Qo))(),Jo=(()=>{return(i=Jo||(Jo={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Jo;var i})();const _7="undefined"!=typeof globalThis&&globalThis,v7="undefined"!=typeof window&&window,y7="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Un=_7||"undefined"!=typeof global&&global||v7||y7,Bh={},$n=[],ay=Wn({\u0275cmp:Wn}),tC=Wn({\u0275dir:Wn}),nC=Wn({\u0275pipe:Wn}),Ak=Wn({\u0275mod:Wn}),xl=Wn({\u0275fac:Wn}),Vm=Wn({__NG_ELEMENT_ID__:Wn});let b7=0;function ft(i){return Rc(()=>{const e={},n={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Qo.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||$n,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Jo.Emulated,id:"c",styles:i.styles||$n,_:null,setInput:null,schemas:i.schemas||null,tView:null},r=i.directives,s=i.features,o=i.pipes;return n.id+=b7++,n.inputs=Ok(i.inputs,e),n.outputs=Ok(i.outputs),s&&s.forEach(a=>a(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Rk):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(Ik):null,n})}function Rk(i){return jr(i)||function Ic(i){return i[tC]||null}(i)}function Ik(i){return function Gu(i){return i[nC]||null}(i)}const kk={};function at(i){return Rc(()=>{const t={type:i.type,bootstrap:i.bootstrap||$n,declarations:i.declarations||$n,imports:i.imports||$n,exports:i.exports||$n,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(kk[i.id]=i.type),t})}function Ok(i,t){if(null==i)return Bh;const e={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=n,t&&(t[r]=s)}return e}const ae=ft;function ws(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function jr(i){return i[ay]||null}function yo(i,t){const e=i[Ak]||null;if(!e&&!0===t)throw new Error(`Type ${Fn(i)} does not have '\u0275mod' property.`);return e}function La(i){return Array.isArray(i)&&"object"==typeof i[1]}function ta(i){return Array.isArray(i)&&!0===i[1]}function sC(i){return 0!=(8&i.flags)}function dy(i){return 2==(2&i.flags)}function hy(i){return 1==(1&i.flags)}function na(i){return null!==i.template}function E7(i){return 0!=(512&i[2])}function qu(i,t){return i.hasOwnProperty(xl)?i[xl]:null}class A7{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function fr(){return Lk}function Lk(i){return i.type.prototype.ngOnChanges&&(i.setInput=I7),R7}function R7(){const i=Nk(this),t=null==i?void 0:i.current;if(t){const e=i.previous;if(e===Bh)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function I7(i,t,e,n){const r=Nk(i)||function k7(i,t){return i[Fk]=t}(i,{previous:Bh,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[e],l=o[a];s[a]=new A7(l&&l.currentValue,t,o===Bh),i[n]=t}fr.ngInherit=!0;const Fk="__ngSimpleChanges__";function Nk(i){return i[Fk]||null}let uC;function dC(){return void 0!==uC?uC:"undefined"!=typeof document?document:void 0}function Di(i){return!!i.listen}const Bk={createRenderer:(i,t)=>dC()};function Ki(i){for(;Array.isArray(i);)i=i[0];return i}function fy(i,t){return Ki(t[i])}function wo(i,t){return Ki(t[i.index])}function hC(i,t){return i.data[t]}function Gh(i,t){return i[t]}function Gs(i,t){const e=t[i];return La(e)?e:e[0]}function Vk(i){return 4==(4&i[2])}function fC(i){return 128==(128&i[2])}function kc(i,t){return null==t?null:i[t]}function Hk(i){i[18]=0}function pC(i,t){i[5]+=t;let e=i,n=i[3];for(;null!==n&&(1===t&&1===e[5]||-1===t&&0===e[5]);)n[5]+=t,e=n,n=n[3]}const zt={lFrame:Xk(null),bindingsEnabled:!0};function zk(){return zt.bindingsEnabled}function xe(){return zt.lFrame.lView}function yn(){return zt.lFrame.tView}function on(i){return zt.lFrame.contextLView=i,i[8]}function pr(){let i=Gk();for(;null!==i&&64===i.type;)i=i.parent;return i}function Gk(){return zt.lFrame.currentTNode}function Fa(i,t){const e=zt.lFrame;e.currentTNode=i,e.isParent=t}function mC(){return zt.lFrame.isParent}function gC(){zt.lFrame.isParent=!1}function ds(){const i=zt.lFrame;let t=i.bindingRootIndex;return-1===t&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function wl(){return zt.lFrame.bindingIndex}function Wh(){return zt.lFrame.bindingIndex++}function Ml(i){const t=zt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function X7(i,t){const e=zt.lFrame;e.bindingIndex=e.bindingRootIndex=i,_C(t)}function _C(i){zt.lFrame.currentDirectiveIndex=i}function vC(i){const t=zt.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}function $k(){return zt.lFrame.currentQueryIndex}function yC(i){zt.lFrame.currentQueryIndex=i}function Z7(i){const t=i[1];return 2===t.type?t.declTNode:1===t.type?i[6]:null}function qk(i,t,e){if(e&Ft.SkipSelf){let r=t,s=i;for(;!(r=r.parent,null!==r||e&Ft.Host||(r=Z7(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;t=r,i=s}const n=zt.lFrame=Yk();return n.currentTNode=t,n.lView=i,!0}function my(i){const t=Yk(),e=i[1];zt.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Yk(){const i=zt.lFrame,t=null===i?null:i.child;return null===t?Xk(i):t}function Xk(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function Kk(){const i=zt.lFrame;return zt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Zk=Kk;function gy(){const i=Kk();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function hs(){return zt.lFrame.selectedIndex}function Oc(i){zt.lFrame.selectedIndex=i}function Ai(){const i=zt.lFrame;return hC(i.tView,i.selectedIndex)}function qn(){zt.lFrame.currentNamespace="svg"}function _y(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const s=i.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(i.contentHooks||(i.contentHooks=[])).push(-e,o),a&&((i.contentHooks||(i.contentHooks=[])).push(e,a),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(e,a)),l&&(i.viewHooks||(i.viewHooks=[])).push(-e,l),c&&((i.viewHooks||(i.viewHooks=[])).push(e,c),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(e,c)),null!=u&&(i.destroyHooks||(i.destroyHooks=[])).push(e,u)}}function vy(i,t,e){Jk(i,t,3,e)}function yy(i,t,e,n){(3&i[2])===e&&Jk(i,t,e,n)}function bC(i,t){let e=i[2];(3&e)===t&&(e&=2047,e+=1,i[2]=e)}function Jk(i,t,e,n){const s=null!=n?n:-1,o=t.length-1;let a=0;for(let l=void 0!==n?65535&i[18]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=n&&a>=n)break}else t[l]<0&&(i[18]+=65536),(a<s||-1==s)&&(r9(i,e,t,l),i[18]=(4294901760&i[18])+l+2),l++}function r9(i,t,e,n){const r=e[n]<0,s=e[n+1],a=i[r?-e[n]:e[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===t){i[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Wm{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function by(i,t,e){const n=Di(i);let r=0;for(;r<e.length;){const s=e[r];if("number"==typeof s){if(0!==s)break;r++;const o=e[r++],a=e[r++],l=e[r++];n?i.setAttribute(t,a,l,o):t.setAttributeNS(o,a,l)}else{const o=s,a=e[++r];wC(o)?n&&i.setProperty(t,o,a):n?i.setAttribute(t,o,a):t.setAttribute(o,a),r++}}return r}function eO(i){return 3===i||4===i||6===i}function wC(i){return 64===i.charCodeAt(0)}function xy(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const r=t[n];"number"==typeof r?e=r:0===e||tO(i,e,r,null,-1===e||2===e?t[++n]:null)}}return i}function tO(i,t,e,n,r){let s=0,o=i.length;if(-1===t)o=-1;else for(;s<i.length;){const a=i[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<i.length;){const a=i[s];if("number"==typeof a)break;if(a===e){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,t),s=o+1),i.splice(s++,0,e),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function nO(i){return-1!==i}function jh(i){return 32767&i}function $h(i,t){let e=function c9(i){return i>>16}(i),n=t;for(;e>0;)n=n[15],e--;return n}let MC=!0;function wy(i){const t=MC;return MC=i,t}let u9=0;function $m(i,t){const e=SC(i,t);if(-1!==e)return e;const n=t[1];n.firstCreatePass&&(i.injectorIndex=t.length,CC(n.data,i),CC(t,null),CC(n.blueprint,null));const r=My(i,t),s=i.injectorIndex;if(nO(r)){const o=jh(r),a=$h(r,t),l=a[1].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=r,s}function CC(i,t){i.push(0,0,0,0,0,0,0,0,t)}function SC(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function My(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;null!==r;){const s=r[1],o=s.type;if(n=2===o?s.declTNode:1===o?r[6]:null,null===n)return-1;if(e++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function Cy(i,t,e){!function d9(i,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(Vm)&&(n=e[Vm]),null==n&&(n=e[Vm]=u9++);const r=255&n;t.data[i+(r>>5)]|=1<<r}(i,t,e)}function sO(i,t,e){if(e&Ft.Optional)return i;sy(t,"NodeInjector")}function oO(i,t,e,n){if(e&Ft.Optional&&void 0===n&&(n=null),0==(e&(Ft.Self|Ft.Host))){const r=i[9],s=Ac(void 0);try{return r?r.get(t,n,e&Ft.Optional):Dk(t,n,e&Ft.Optional)}finally{Ac(s)}}return sO(n,t,e)}function aO(i,t,e,n=Ft.Default,r){if(null!==i){const s=function m9(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(Vm)?i[Vm]:void 0;return"number"==typeof t?t>=0?255&t:f9:t}(e);if("function"==typeof s){if(!qk(t,i,n))return n&Ft.Host?sO(r,e,n):oO(t,e,n,r);try{const o=s(n);if(null!=o||n&Ft.Optional)return o;sy(e)}finally{Zk()}}else if("number"==typeof s){let o=null,a=SC(i,t),l=-1,c=n&Ft.Host?t[16][6]:null;for((-1===a||n&Ft.SkipSelf)&&(l=-1===a?My(i,t):t[a+8],-1!==l&&uO(n,!1)?(o=t[1],a=jh(l),t=$h(l,t)):a=-1);-1!==a;){const u=t[1];if(cO(s,a,u.data)){const d=p9(a,t,e,o,n,c);if(d!==lO)return d}l=t[a+8],-1!==l&&uO(n,t[1].data[a+8]===c)&&cO(s,a,t)?(o=u,a=jh(l),t=$h(l,t)):a=-1}}}return oO(t,e,n,r)}const lO={};function f9(){return new qh(pr(),xe())}function p9(i,t,e,n,r,s){const o=t[1],a=o.data[i+8],u=Sy(a,o,e,null==n?dy(a)&&MC:n!=o&&0!=(3&a.type),r&Ft.Host&&s===a);return null!==u?qm(t,o,u,a):lO}function Sy(i,t,e,n,r){const s=i.providerIndexes,o=t.data,a=1048575&s,l=i.directiveStart,u=s>>20,h=r?a+u:i.directiveEnd;for(let f=n?a:a+u;f<h;f++){const p=o[f];if(f<l&&e===p||f>=l&&p.type===e)return f}if(r){const f=o[l];if(f&&na(f)&&f.type===e)return l}return null}function qm(i,t,e,n){let r=i[e];const s=t.data;if(function s9(i){return i instanceof Wm}(r)){const o=r;o.resolving&&function c7(i,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new et(-200,`Circular dependency in DI detected for ${i}${e}`)}(Nr(s[e]));const a=wy(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ac(o.injectImpl):null;qk(i,n,Ft.Default);try{r=i[e]=o.factory(void 0,s,i,n),t.firstCreatePass&&e>=n.directiveStart&&function i9(i,t,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(n){const o=Lk(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(i,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-i,r),s&&((e.preOrderHooks||(e.preOrderHooks=[])).push(i,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,s))}(e,s[e],t)}finally{null!==l&&Ac(l),wy(a),o.resolving=!1,Zk()}}return r}function cO(i,t,e){return!!(e[t+(i>>5)]&1<<i)}function uO(i,t){return!(i&Ft.Self||i&Ft.Host&&t)}class qh{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return aO(this._tNode,this._lView,t,n,e)}}function He(i){return Rc(()=>{const t=i.prototype.constructor,e=t[xl]||EC(t),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[xl]||EC(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function EC(i){return Ck(i)?()=>{const t=EC(Kt(i));return t&&t()}:qu(i)}function Ws(i){return function h9(i,t){if("class"===t)return i.classes;if("style"===t)return i.styles;const e=i.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const s=e[r];if(eO(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(pr(),i)}const Xh="__parameters__";function Zh(i,t,e){return Rc(()=>{const n=function TC(i){return function(...e){if(i){const n=i(...e);for(const r in n)this[r]=n[r]}}}(t);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Xh)?l[Xh]:Object.defineProperty(l,Xh,{value:[]})[Xh];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class ve{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=be({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const _9=new ve("AnalyzeForEntryComponents");function Mo(i,t){void 0===t&&(t=i);for(let e=0;e<i.length;e++){let n=i[e];Array.isArray(n)?(t===i&&(t=i.slice(0,e)),Mo(n,t)):t!==i&&t.push(n)}return t}function Na(i,t){i.forEach(e=>Array.isArray(e)?Na(e,t):t(e))}function hO(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function Ey(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function Km(i,t){const e=[];for(let n=0;n<i;n++)e.push(t);return e}function js(i,t,e){let n=Qh(i,t);return n>=0?i[1|n]=e:(n=~n,function b9(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(1===r)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;)i[r]=i[r-2],r--;i[t]=e,i[t+1]=n}}(i,n,t,e)),n}function AC(i,t){const e=Qh(i,t);if(e>=0)return i[1|e]}function Qh(i,t){return function mO(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<e];if(t===o)return s<<e;o>t?r=s:n=s+1}return~(r<<e)}(i,t,1)}const Zm={},IC="__NG_DI_FLAG__",Dy="ngTempTokenPath",T9=/\n/gm,_O="__source",A9=Wn({provide:String,useValue:Wn});let Qm;function vO(i){const t=Qm;return Qm=i,t}function R9(i,t=Ft.Default){if(void 0===Qm)throw new et(203,"");return null===Qm?Dk(i,void 0,t):Qm.get(i,t&Ft.Optional?null:void 0,t)}function J(i,t=Ft.Default){return(function g7(){return eC}()||R9)(Kt(i),t)}const Jh=J;function kC(i){const t=[];for(let e=0;e<i.length;e++){const n=Kt(i[e]);if(Array.isArray(n)){if(0===n.length)throw new et(900,"");let r,s=Ft.Default;for(let o=0;o<n.length;o++){const a=n[o],l=I9(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}t.push(J(r,s))}else t.push(J(n))}return t}function Jm(i,t){return i[IC]=t,i.prototype[IC]=t,i}function I9(i){return i[IC]}const Ay=Jm(Zh("Inject",i=>({token:i})),-1),Co=Jm(Zh("Optional"),8),Yu=Jm(Zh("SkipSelf"),4);let Iy,ky;function tf(i){var t;return(null===(t=function PC(){if(void 0===Iy&&(Iy=null,Un.trustedTypes))try{Iy=Un.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Iy}())||void 0===t?void 0:t.createHTML(i))||i}function CO(i){var t;return(null===(t=function LC(){if(void 0===ky&&(ky=null,Un.trustedTypes))try{ky=Un.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return ky}())||void 0===t?void 0:t.createHTML(i))||i}class Xu{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class W9 extends Xu{getTypeName(){return"HTML"}}class j9 extends Xu{getTypeName(){return"Style"}}class $9 extends Xu{getTypeName(){return"Script"}}class q9 extends Xu{getTypeName(){return"URL"}}class Y9 extends Xu{getTypeName(){return"ResourceURL"}}function $s(i){return i instanceof Xu?i.changingThisBreaksApplicationSecurity:i}function Ba(i,t){const e=TO(i);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}function TO(i){return i instanceof Xu&&i.getTypeName()||null}class eq{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(tf(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class tq{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=tf(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=tf(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&t.removeAttribute(o)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const iq=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,rq=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function tg(i){return(i=String(i)).match(iq)||i.match(rq)?i:"unsafe:"+i}function AO(i){return(i=String(i)).split(",").map(t=>tg(t.trim())).join(", ")}function Va(i){const t={};for(const e of i.split(","))t[e]=!0;return t}function ng(...i){const t={};for(const e of i)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const RO=Va("area,br,col,hr,img,wbr"),IO=Va("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),kO=Va("rp,rt"),FC=ng(RO,ng(IO,Va("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ng(kO,Va("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ng(kO,IO)),NC=Va("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),BC=Va("srcset"),OO=ng(NC,BC,Va("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Va("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),sq=Va("script,style,template");class oq{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!FC.hasOwnProperty(e))return this.sanitizedSomething=!0,!sq.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,a=o.toLowerCase();if(!OO.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;NC[a]&&(l=tg(l)),BC[a]&&(l=AO(l)),this.buf.push(" ",o,'="',PO(l),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();FC.hasOwnProperty(e)&&!RO.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(PO(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const aq=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lq=/([^\#-~ |!])/g;function PO(i){return i.replace(/&/g,"&amp;").replace(aq,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(lq,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Oy;function LO(i,t){let e=null;try{Oy=Oy||function DO(i){const t=new tq(i);return function nq(){try{return!!(new window.DOMParser).parseFromString(tf(""),"text/html")}catch(i){return!1}}()?new eq(t):t}(i);let n=t?String(t):"";e=Oy.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=e.innerHTML,e=Oy.getInertBodyElement(n)}while(n!==s);return tf((new oq).sanitizeChildren(VC(e)||e))}finally{if(e){const n=VC(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function VC(i){return"content"in i&&function cq(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var En=(()=>((En=En||{})[En.NONE=0]="NONE",En[En.HTML=1]="HTML",En[En.STYLE=2]="STYLE",En[En.SCRIPT=3]="SCRIPT",En[En.URL=4]="URL",En[En.RESOURCE_URL=5]="RESOURCE_URL",En))();function Ku(i){const t=ig();return t?CO(t.sanitize(En.HTML,i)||""):Ba(i,"HTML")?CO($s(i)):LO(dC(),Ut(i))}function HC(i){const t=ig();return t?t.sanitize(En.URL,i)||"":Ba(i,"URL")?$s(i):tg(Ut(i))}function ig(){const i=xe();return i&&i[12]}const BO="__ngContext__";function qr(i,t){i[BO]=t}function zC(i){const t=function rg(i){return i[BO]||null}(i);return t?Array.isArray(t)?t:t.lView:null}function WC(i){return i.ngOriginalError}function Sq(i,...t){i.error(...t)}class Lc{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=function Cq(i){return i&&i.ngErrorLogger||Sq}(t);n(this._console,"ERROR",t),e&&n(this._console,"ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&WC(t);for(;e&&WC(e);)e=WC(e);return e||null}}const Lq=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Un))();function jC(i){return i.ownerDocument.defaultView}function Ha(i){return i instanceof Function?i():i}var qs=(()=>((qs=qs||{})[qs.Important=1]="Important",qs[qs.DashCase=2]="DashCase",qs))();function qC(i,t){return undefined(i,t)}function sg(i){const t=i[3];return ta(t)?t[3]:t}function YC(i){return qO(i[13])}function XC(i){return qO(i[4])}function qO(i){for(;null!==i&&!ta(i);)i=i[4];return i}function rf(i,t,e,n,r){if(null!=n){let s,o=!1;ta(n)?s=n:La(n)&&(o=!0,n=n[0]);const a=Ki(n);0===i&&null!==e?null==r?JO(t,e,a):Zu(t,e,a,r||null,!0):1===i&&null!==e?Zu(t,e,a,r||null,!0):2===i?function oP(i,t,e){const n=Py(i,t);n&&function Yq(i,t,e,n){Di(i)?i.removeChild(t,e,n):t.removeChild(e)}(i,n,t,e)}(t,a,o):3===i&&t.destroyNode(a),null!=s&&function Zq(i,t,e,n,r){const s=e[7];s!==Ki(e)&&rf(t,i,n,s,r);for(let a=10;a<e.length;a++){const l=e[a];og(l[1],l,i,t,n,s)}}(t,i,s,e,r)}}function ZC(i,t,e){if(Di(i))return i.createElement(t,e);{const n=null!==e?function F7(i){const t=i.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(e):null;return null===n?i.createElement(t):i.createElementNS(n,t)}}function XO(i,t){const e=i[9],n=e.indexOf(t),r=t[3];1024&t[2]&&(t[2]&=-1025,pC(r,-1)),e.splice(n,1)}function QC(i,t){if(i.length<=10)return;const e=10+t,n=i[e];if(n){const r=n[17];null!==r&&r!==i&&XO(r,n),t>0&&(i[e-1][4]=n[4]);const s=Ey(i,10+t);!function Hq(i,t){og(i,t,t[11],2,null,null),t[0]=null,t[6]=null}(n[1],n);const o=s[19];null!==o&&o.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-129}return n}function KO(i,t){if(!(256&t[2])){const e=t[11];Di(e)&&e.destroyNode&&og(i,t,e,3,null,null),function Gq(i){let t=i[13];if(!t)return JC(i[1],i);for(;t;){let e=null;if(La(t))e=t[13];else{const n=t[10];n&&(e=n)}if(!e){for(;t&&!t[4]&&t!==i;)La(t)&&JC(t[1],t),t=t[3];null===t&&(t=i),La(t)&&JC(t[1],t),e=t&&t[4]}t=e}}(t)}}function JC(i,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function qq(i,t){let e;if(null!=i&&null!=(e=i.destroyHooks))for(let n=0;n<e.length;n+=2){const r=t[e[n]];if(!(r instanceof Wm)){const s=e[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(i,t),function $q(i,t){const e=i.cleanup,n=t[7];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+1],a="function"==typeof o?o(t):Ki(t[o]),l=n[r=e[s+2]],c=e[s+3];"boolean"==typeof c?a.removeEventListener(e[s],l,c):c>=0?n[r=c]():n[r=-c].unsubscribe(),s+=2}else{const o=n[r=e[s+1]];e[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)n[s]();t[7]=null}}(i,t),1===t[1].type&&Di(t[11])&&t[11].destroy();const e=t[17];if(null!==e&&ta(t[3])){e!==t[3]&&XO(e,t);const n=t[19];null!==n&&n.detachView(i)}}}function ZO(i,t,e){return function QO(i,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[0];if(2&n.flags){const r=i.data[n.directiveStart].encapsulation;if(r===Jo.None||r===Jo.Emulated)return null}return wo(n,e)}(i,t.parent,e)}function Zu(i,t,e,n,r){Di(i)?i.insertBefore(t,e,n,r):t.insertBefore(e,n,r)}function JO(i,t,e){Di(i)?i.appendChild(t,e):t.appendChild(e)}function eP(i,t,e,n,r){null!==n?Zu(i,t,e,n,r):JO(i,t,e)}function Py(i,t){return Di(i)?i.parentNode(t):t.parentNode}function tP(i,t,e){return iP(i,t,e)}let iP=function nP(i,t,e){return 40&i.type?wo(i,e):null};function Ly(i,t,e,n){const r=ZO(i,n,t),s=t[11],a=tP(n.parent||t[6],n,t);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)eP(s,r,e[l],a,!1);else eP(s,r,e,a,!1)}function Fy(i,t){if(null!==t){const e=t.type;if(3&e)return wo(t,i);if(4&e)return tS(-1,i[t.index]);if(8&e){const n=t.child;if(null!==n)return Fy(i,n);{const r=i[t.index];return ta(r)?tS(-1,r):Ki(r)}}if(32&e)return qC(t,i)()||Ki(i[t.index]);{const n=sP(i,t);return null!==n?Array.isArray(n)?n[0]:Fy(sg(i[16]),n):Fy(i,t.next)}}return null}function sP(i,t){return null!==t?i[16][6].projection[t.projection]:null}function tS(i,t){const e=10+i+1;if(e<t.length){const n=t[e],r=n[1].firstChild;if(null!==r)return Fy(n,r)}return t[7]}function nS(i,t,e,n,r,s,o){for(;null!=e;){const a=n[e.index],l=e.type;if(o&&0===t&&(a&&qr(Ki(a),n),e.flags|=4),64!=(64&e.flags))if(8&l)nS(i,t,e.child,n,r,s,!1),rf(t,i,r,a,s);else if(32&l){const c=qC(e,n);let u;for(;u=c();)rf(t,i,r,u,s);rf(t,i,r,a,s)}else 16&l?aP(i,t,n,e,r,s):rf(t,i,r,a,s);e=o?e.projectionNext:e.next}}function og(i,t,e,n,r,s){nS(e,n,i.firstChild,t,r,s,!1)}function aP(i,t,e,n,r,s){const o=e[16],l=o[6].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)rf(t,i,r,l[c],s);else nS(i,t,l,o[3],r,s,!0)}function lP(i,t,e){Di(i)?i.setAttribute(t,"style",e):t.style.cssText=e}function iS(i,t,e){Di(i)?""===e?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e):t.className=e}function cP(i,t,e){let n=i.length;for(;;){const r=i.indexOf(t,e);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=t.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}e=r+1}}const uP="ng-template";function Jq(i,t,e){let n=0;for(;n<i.length;){let r=i[n++];if(e&&"class"===r){if(r=i[n],-1!==cP(r.toLowerCase(),t,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function dP(i){return 4===i.type&&i.value!==uP}function eY(i,t,e){return t===(4!==i.type||e?i.value:uP)}function tY(i,t,e){let n=4;const r=i.attrs||[],s=function rY(i){for(let t=0;t<i.length;t++)if(eO(i[t]))return t;return i.length}(r);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!eY(i,l,e)||""===l&&1===t.length){if(ia(n))return!1;o=!0}}else{const c=8&n?l:t[++a];if(8&n&&null!==i.attrs){if(!Jq(i.attrs,c,e)){if(ia(n))return!1;o=!0}continue}const d=nY(8&n?"class":l,r,dP(i),e);if(-1===d){if(ia(n))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&n?h:null;if(f&&-1!==cP(f,c,0)||2&n&&c!==h){if(ia(n))return!1;o=!0}}}}else{if(!o&&!ia(n)&&!ia(l))return!1;if(o&&ia(l))continue;o=!1,n=l|1&n}}return ia(n)||o}function ia(i){return 0==(1&i)}function nY(i,t,e,n){if(null===t)return-1;let r=0;if(n||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function sY(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){const n=i[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,i)}function hP(i,t,e=!1){for(let n=0;n<t.length;n++)if(tY(i,t[n],e))return!0;return!1}function oY(i,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function fP(i,t){return i?":not("+t.trim()+")":t}function aY(i){let t=i[0],e=1,n=2,r="",s=!1;for(;e<i.length;){let o=i[e];if("string"==typeof o)if(2&n){const a=i[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!ia(o)&&(t+=fP(s,r),r=""),n=o,s=s||!ia(n);e++}return""!==r&&(t+=fP(s,r)),t}const Gt={};function $(i){pP(yn(),xe(),hs()+i,!1)}function pP(i,t,e,n){if(!n)if(3==(3&t[2])){const s=i.preOrderCheckHooks;null!==s&&vy(t,s,e)}else{const s=i.preOrderHooks;null!==s&&yy(t,s,0,e)}Oc(e)}function Ny(i,t){return i<<17|t<<2}function ra(i){return i>>17&32767}function rS(i){return 2|i}function Cl(i){return(131068&i)>>2}function sS(i,t){return-131069&i|t<<2}function oS(i){return 1|i}function SP(i,t){const e=i.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const r=e[n],s=e[n+1];if(-1!==s){const o=i.data[s];yC(r),o.contentQueries(2,t[s],s)}}}function ag(i,t,e,n,r,s,o,a,l,c){const u=t.blueprint.slice();return u[0]=r,u[2]=140|n,Hk(u),u[3]=u[15]=i,u[8]=e,u[10]=o||i&&i[10],u[11]=a||i&&i[11],u[12]=l||i&&i[12]||null,u[9]=c||i&&i[9]||null,u[6]=s,u[16]=2==t.type?i[16]:u,u}function sf(i,t,e,n,r){let s=i.data[t];if(null===s)s=function mS(i,t,e,n,r){const s=Gk(),o=mC(),l=i.data[t]=function SY(i,t,e,n,r,s){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,n,r);return null===i.firstChild&&(i.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(i,t,e,n,r),function Y7(){return zt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=e,s.value=n,s.attrs=r;const o=function Gm(){const i=zt.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Fa(s,!0),s}function af(i,t,e,n){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function lg(i,t,e){my(t);try{const n=i.viewQuery;null!==n&&CS(1,n,e);const r=i.template;null!==r&&EP(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&SP(i,t),i.staticViewQueries&&CS(2,i.viewQuery,e);const s=i.components;null!==s&&function wY(i,t){for(let e=0;e<t.length;e++)GY(i,t[e])}(t,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[2]&=-5,gy()}}function lf(i,t,e,n){const r=t[2];if(256!=(256&r)){my(t);try{Hk(t),function Wk(i){return zt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==e&&EP(i,t,e,2,n);const o=3==(3&r);if(o){const c=i.preOrderCheckHooks;null!==c&&vy(t,c,null)}else{const c=i.preOrderHooks;null!==c&&yy(t,c,0,null),bC(t,0)}if(function UY(i){for(let t=YC(i);null!==t;t=XC(t)){if(!t[2])continue;const e=t[9];for(let n=0;n<e.length;n++){const r=e[n],s=r[3];0==(1024&r[2])&&pC(s,1),r[2]|=1024}}}(t),function HY(i){for(let t=YC(i);null!==t;t=XC(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];fC(n)&&lf(r,n,r.template,n[8])}}(t),null!==i.contentQueries&&SP(i,t),o){const c=i.contentCheckHooks;null!==c&&vy(t,c)}else{const c=i.contentHooks;null!==c&&yy(t,c,1),bC(t,1)}!function bY(i,t){const e=i.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)Oc(~r);else{const s=r,o=e[++n],a=e[++n];X7(o,s),a(2,t[s])}}}finally{Oc(-1)}}(i,t);const a=i.components;null!==a&&function xY(i,t){for(let e=0;e<t.length;e++)zY(i,t[e])}(t,a);const l=i.viewQuery;if(null!==l&&CS(2,l,n),o){const c=i.viewCheckHooks;null!==c&&vy(t,c)}else{const c=i.viewHooks;null!==c&&yy(t,c,2),bC(t,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),t[2]&=-73,1024&t[2]&&(t[2]&=-1025,pC(t[3],-1))}finally{gy()}}}function MY(i,t,e,n){const r=t[10],o=Vk(t);try{!o&&r.begin&&r.begin(),o&&lg(i,t,n),lf(i,t,e,n)}finally{!o&&r.end&&r.end()}}function EP(i,t,e,n,r){const s=hs(),o=2&n;try{Oc(-1),o&&t.length>20&&pP(i,t,20,!1),e(n,r)}finally{Oc(s)}}function TP(i,t,e){if(sC(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function gS(i,t,e){!zk()||(function kY(i,t,e,n){const r=e.directiveStart,s=e.directiveEnd;i.firstCreatePass||$m(e,t),qr(n,t);const o=e.initialInputs;for(let a=r;a<s;a++){const l=i.data[a],c=na(l);c&&NY(t,e,l);const u=qm(t,i,a,e);qr(u,t),null!==o&&BY(0,a-r,u,l,0,o),c&&(Gs(e.index,t)[8]=u)}}(i,t,e,wo(e,t)),128==(128&e.flags)&&function OY(i,t,e){const n=e.directiveStart,r=e.directiveEnd,o=e.index,a=function K7(){return zt.lFrame.currentDirectiveIndex}();try{Oc(o);for(let l=n;l<r;l++){const c=i.data[l],u=t[l];_C(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&LP(c,u)}}finally{Oc(-1),_C(a)}}(i,t,e))}function _S(i,t,e=wo){const n=t.localNames;if(null!==n){let r=t.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],a=-1===o?e(t,i):i[o];i[r++]=a}}}function DP(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=Hy(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):t}function Hy(i,t,e,n,r,s,o,a,l,c){const u=20+n,d=u+r,h=function CY(i,t){const e=[];for(let n=0;n<t;n++)e.push(n<i?null:Gt);return e}(u,d),f="function"==typeof c?c():c;return h[1]={type:i,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function IP(i,t,e,n){const r=UP(t);null===e?r.push(n):(r.push(e),i.firstCreatePass&&zP(i).push(n,r.length-1))}function kP(i,t,e){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}return e}function Ys(i,t,e,n,r,s,o,a){const l=wo(t,e);let u,c=t.inputs;!a&&null!=c&&(u=c[n])?(jP(i,e,u,n,r),dy(t)&&function DY(i,t){const e=Gs(t,i);16&e[2]||(e[2]|=64)}(e,t.index)):3&t.type&&(n=function TY(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,t.value||"",n):r,Di(s)?s.setProperty(l,n,r):wC(n)||(l.setProperty?l.setProperty(n,r):l[n]=r))}function vS(i,t,e,n){let r=!1;if(zk()){const s=function PY(i,t,e){const n=i.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];hP(e,o.selectors,!1)&&(r||(r=[]),Cy($m(e,t),i,o.type),na(o)?(FP(i,e),r.unshift(o)):r.push(o))}return r}(i,t,e),o=null===n?null:{"":-1};if(null!==s){r=!0,NP(e,i.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=af(i,t,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];e.mergedAttrs=xy(e.mergedAttrs,d.hostAttrs),BP(i,e,t,c,d),FY(c,d,o),null!==d.contentQueries&&(e.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(e.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(e.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(e.index),l=!0),c++}!function EY(i,t){const n=t.directiveEnd,r=i.data,s=t.attrs,o=[];let a=null,l=null;for(let c=t.directiveStart;c<n;c++){const u=r[c],d=u.inputs,h=null===s||dP(t)?null:VY(d,s);o.push(h),a=kP(d,c,a),l=kP(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=a,t.outputs=l}(i,e)}o&&function LY(i,t,e){if(t){const n=i.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new et(-301,!1);n.push(t[r],s)}}}(e,n,o)}return e.mergedAttrs=xy(e.mergedAttrs,e.attrs),r}function PP(i,t,e,n,r,s){const o=s.hostBindings;if(o){let a=i.hostBindingOpCodes;null===a&&(a=i.hostBindingOpCodes=[]);const l=~t.index;(function IY(i){let t=i.length;for(;t>0;){const e=i[--t];if("number"==typeof e&&e<0)return e}return 0})(a)!=l&&a.push(l),a.push(n,r,o)}}function LP(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function FP(i,t){t.flags|=2,(i.components||(i.components=[])).push(t.index)}function FY(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;na(t)&&(e[""]=i)}}function NP(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}function BP(i,t,e,n,r){i.data[n]=r;const s=r.factory||(r.factory=qu(r.type)),o=new Wm(s,na(r),null);i.blueprint[n]=o,e[n]=o,PP(i,t,0,n,af(i,e,r.hostVars,Gt),r)}function NY(i,t,e){const n=wo(t,i),r=DP(e),s=i[10],o=Uy(i,ag(i,r,null,e.onPush?64:16,n,t,s,s.createRenderer(n,e),null,null));i[t.index]=o}function Ua(i,t,e,n,r,s){const o=wo(i,t);!function yS(i,t,e,n,r,s,o){if(null==s)Di(i)?i.removeAttribute(t,r,e):t.removeAttribute(r);else{const a=null==o?Ut(s):o(s,n||"",r);Di(i)?i.setAttribute(t,r,a,e):e?t.setAttributeNS(e,r,a):t.setAttribute(r,a)}}(t[11],o,s,i.value,e,n,r)}function BY(i,t,e,n,r,s){const o=s[t];if(null!==o){const a=n.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?n.setInput(e,d,c,u):e[u]=d}}}function VY(i,t){let e=null,n=0;for(;n<t.length;){const r=t[n];if(0!==r)if(5!==r){if("number"==typeof r)break;i.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,i[r],t[n+1])),n+=2}else n+=2;else n+=4}return e}function VP(i,t,e,n){return new Array(i,!0,!1,t,null,0,n,e,null,null)}function zY(i,t){const e=Gs(t,i);if(fC(e)){const n=e[1];80&e[2]?lf(n,e,n.template,e[8]):e[5]>0&&bS(e)}}function bS(i){for(let n=YC(i);null!==n;n=XC(n))for(let r=10;r<n.length;r++){const s=n[r];if(1024&s[2]){const o=s[1];lf(o,s,o.template,s[8])}else s[5]>0&&bS(s)}const e=i[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Gs(e[n],i);fC(r)&&r[5]>0&&bS(r)}}function GY(i,t){const e=Gs(t,i),n=e[1];(function WY(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])})(n,e),lg(n,e,e[8])}function Uy(i,t){return i[13]?i[14][4]=t:i[13]=t,i[14]=t,t}function xS(i){for(;i;){i[2]|=64;const t=sg(i);if(E7(i)&&!t)return i;i=t}return null}function HP(i){!function wS(i){for(let t=0;t<i.components.length;t++){const e=i.components[t],n=zC(e),r=n[1];MY(r,n,r.template,e)}}(i[8])}function CS(i,t,e){yC(0),t(i,e)}const $Y=(()=>Promise.resolve(null))();function UP(i){return i[7]||(i[7]=[])}function zP(i){return i.cleanup||(i.cleanup=[])}function GP(i,t,e){return(null===i||na(i))&&(e=function V7(i){for(;Array.isArray(i);){if("object"==typeof i[1])return i;i=i[0]}return null}(e[t.index])),e[11]}function WP(i,t){const e=i[9],n=e?e.get(Lc,null):null;n&&n.handleError(t)}function jP(i,t,e,n,r){for(let s=0;s<e.length;){const o=e[s++],a=e[s++],l=t[o],c=i.data[o];null!==c.setInput?c.setInput(l,r,n,a):l[a]=r}}function Sl(i,t,e){const n=fy(t,i);!function YO(i,t,e){Di(i)?i.setValue(t,e):t.textContent=e}(i[11],n,e)}function zy(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?r=KM(r,a):2==s&&(n=KM(n,a+": "+t[++o]+";"))}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}const SS=new ve("INJECTOR",-1);class $P{get(t,e=Zm){if(e===Zm){const n=new Error(`NullInjectorError: No provider for ${Fn(t)}!`);throw n.name="NullInjectorError",n}return e}}const ES=new ve("Set Injector scope."),cg={},XY={};let TS;function qP(){return void 0===TS&&(TS=new $P),TS}function YP(i,t=null,e=null,n){const r=XP(i,t,e,n);return r._resolveInjectorDefTypes(),r}function XP(i,t=null,e=null,n){return new KY(i,e,t||qP(),n)}class KY{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];e&&Na(e,a=>this.processProvider(a,t,e)),Na([t],a=>this.processInjectorType(a,[],s)),this.records.set(SS,cf(void 0,this));const o=this.records.get(ES);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:Fn(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Zm,n=Ft.Default){this.assertNotDestroyed();const r=vO(this),s=Ac(void 0);try{if(!(n&Ft.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function rX(i){return"function"==typeof i||"object"==typeof i&&i instanceof ve}(t)&&QM(t);a=l&&this.injectableDefInScope(l)?cf(DS(t),cg):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(n&Ft.Self?qP():this.parent).get(t,e=n&Ft.Optional&&e===Zm?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[Dy]=o[Dy]||[]).unshift(Fn(t)),r)throw o;return function k9(i,t,e,n){const r=i[Dy];throw t[_O]&&r.unshift(t[_O]),i.message=function O9(i,t,e,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let r=Fn(t);if(Array.isArray(t))r=t.map(Fn).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Fn(a)))}r=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(T9,"\n  ")}`}("\n"+i.message,r,e,n),i.ngTokenPath=r,i[Dy]=null,i}(o,t,"R3InjectorError",this.source)}throw o}finally{Ac(s),vO(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((n,r)=>t.push(Fn(r))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new et(205,!1)}processInjectorType(t,e,n){if(!(t=Kt(t)))return!1;let r=Ek(t);const s=null==r&&t.ngModule||void 0,o=void 0===s?t:s,a=-1!==n.indexOf(o);if(void 0!==s&&(r=Ek(s)),null==r)return!1;if(null!=r.imports&&!a){let u;n.push(o);try{Na(r.imports,d=>{this.processInjectorType(d,e,n)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];Na(f,p=>this.processProvider(p,h,f||$n))}}this.injectorDefTypes.add(o);const l=qu(o)||(()=>new o);this.records.set(o,cf(l,cg));const c=r.providers;if(null!=c&&!a){const u=t;Na(c,d=>this.processProvider(d,u,c))}return void 0!==s&&void 0!==t.providers}processProvider(t,e,n){let r=uf(t=Kt(t))?t:Kt(t&&t.provide);const s=function QY(i,t,e){return ZP(i)?cf(void 0,i.useValue):cf(KP(i),cg)}(t);if(uf(t)||!0!==t.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=cf(void 0,cg,!0),o.factory=()=>kC(o.multi),this.records.set(r,o)),r=t,o.multi.push(t)}this.records.set(r,s)}hydrate(t,e){return e.value===cg&&(e.value=XY,e.value=e.factory()),"object"==typeof e.value&&e.value&&function iX(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Kt(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function DS(i){const t=QM(i),e=null!==t?t.factory:qu(i);if(null!==e)return e;if(i instanceof ve)throw new et(204,!1);if(i instanceof Function)return function ZY(i){const t=i.length;if(t>0)throw Km(t,"?"),new et(204,!1);const e=function f7(i){const t=i&&(i[oy]||i[Tk]);if(t){const e=function p7(i){if(i.hasOwnProperty("name"))return i.name;const t=(""+i).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(i);return null!==e?()=>e.factory(i):()=>new i}(i);throw new et(204,!1)}function KP(i,t,e){let n;if(uf(i)){const r=Kt(i);return qu(r)||DS(r)}if(ZP(i))n=()=>Kt(i.useValue);else if(function eX(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...kC(i.deps||[]));else if(function JY(i){return!(!i||!i.useExisting)}(i))n=()=>J(Kt(i.useExisting));else{const r=Kt(i&&(i.useClass||i.provide));if(!function nX(i){return!!i.deps}(i))return qu(r)||DS(r);n=()=>new r(...kC(i.deps))}return n}function cf(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function ZP(i){return null!==i&&"object"==typeof i&&A9 in i}function uf(i){return"function"==typeof i}let Ui=(()=>{class i{static create(e,n){var r;if(Array.isArray(e))return YP({name:""},n,e,"");{const s=null!==(r=e.name)&&void 0!==r?r:"";return YP({name:s},e.parent,e.providers,s)}}}return i.THROW_IF_NOT_FOUND=Zm,i.NULL=new $P,i.\u0275prov=be({token:i,providedIn:"any",factory:()=>J(SS)}),i.__NG_ELEMENT_ID__=-1,i})();function hX(i,t){_y(zC(i)[1],pr())}function he(i){let t=function cL(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),e=!0;const n=[i];for(;t;){let r;if(na(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new et(903,"");r=t.\u0275dir}if(r){if(e){n.push(r);const o=i;o.inputs=IS(i.inputs),o.declaredInputs=IS(i.declaredInputs),o.outputs=IS(i.outputs);const a=r.hostBindings;a&&gX(i,a);const l=r.viewQuery,c=r.contentQueries;if(l&&pX(i,l),c&&mX(i,c),XM(i.inputs,r.inputs),XM(i.declaredInputs,r.declaredInputs),XM(i.outputs,r.outputs),na(r)&&r.data.animation){const u=i.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(i),a===he&&(e=!1)}}t=Object.getPrototypeOf(t)}!function fX(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=xy(r.hostAttrs,e=xy(e,r.hostAttrs))}}(n)}function IS(i){return i===Bh?{}:i===$n?[]:i}function pX(i,t){const e=i.viewQuery;i.viewQuery=e?(n,r)=>{t(n,r),e(n,r)}:t}function mX(i,t){const e=i.contentQueries;i.contentQueries=e?(n,r,s)=>{t(n,r,s),e(n,r,s)}:t}function gX(i,t){const e=i.hostBindings;i.hostBindings=e?(n,r)=>{t(n,r),e(n,r)}:t}let Gy=null;function df(){if(!Gy){const i=Un.Symbol;if(i&&i.iterator)Gy=i.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Gy=n)}}}return Gy}function ug(i){return!!kS(i)&&(Array.isArray(i)||!(i instanceof Map)&&df()in i)}function kS(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function za(i,t,e){return i[t]=e}function Yr(i,t,e){return!Object.is(i[t],e)&&(i[t]=e,!0)}function Qu(i,t,e,n){const r=Yr(i,t,e);return Yr(i,t+1,n)||r}function bn(i,t,e,n){const r=xe();return Yr(r,Wh(),t)&&(yn(),Ua(Ai(),r,i,t,e,n)),bn}function ff(i,t,e,n){return Yr(i,Wh(),e)?t+Ut(e)+n:Gt}function pf(i,t,e,n,r,s){const a=Qu(i,wl(),e,r);return Ml(2),a?t+Ut(e)+n+Ut(r)+s:Gt}function yf(i,t,e,n,r,s,o,a,l,c,u,d,h,f,p,m){const g=wl();let _=function So(i,t,e,n,r,s){const o=Qu(i,t,e,n);return Qu(i,t+2,r,s)||o}(i,g,e,r,o,l);return _=function Wy(i,t,e,n,r){const s=Qu(i,t,e,n);return Yr(i,t+2,r)||s}(i,g+4,u,h,p)||_,Ml(7),_?t+Ut(e)+n+Ut(r)+s+Ut(o)+a+Ut(l)+c+Ut(u)+d+Ut(h)+f+Ut(p)+m:Gt}function Ge(i,t,e,n,r,s,o,a){const l=xe(),c=yn(),u=i+20,d=c.firstCreatePass?function MX(i,t,e,n,r,s,o,a,l){const c=t.consts,u=sf(t,i,4,o||null,kc(c,a));vS(t,e,u,kc(c,l)),_y(t,u);const d=u.tViews=Hy(2,u,n,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,e,n,r,s,o):c.data[u];Fa(d,!1);const h=l[11].createComment("");Ly(c,l,h,d),qr(h,l),Uy(l,l[u]=VP(h,l,h,d)),hy(d)&&gS(c,l,d),null!=o&&_S(l,d,a)}function hi(i){return Gh(function q7(){return zt.lFrame.contextLView}(),20+i)}function C(i,t=Ft.Default){const e=xe();return null===e?J(i,t):aO(pr(),e,Kt(i),t)}function hg(){throw new Error("invalid")}function Z(i,t,e){const n=xe();return Yr(n,Wh(),t)&&Ys(yn(),Ai(),n,i,t,n[11],e,!1),Z}function NS(i,t,e,n,r){const o=r?"class":"style";jP(i,e,t.inputs[o],o,n)}function M(i,t,e,n){const r=xe(),s=yn(),o=20+i,a=r[11],l=r[o]=ZC(a,t,function n9(){return zt.lFrame.currentNamespace}()),c=s.firstCreatePass?function WX(i,t,e,n,r,s,o){const a=t.consts,c=sf(t,i,2,r,kc(a,s));return vS(t,e,c,kc(a,o)),null!==c.attrs&&zy(c,c.attrs,!1),null!==c.mergedAttrs&&zy(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(o,s,r,0,t,e,n):s.data[o];Fa(c,!0);const u=c.mergedAttrs;null!==u&&by(a,l,u);const d=c.classes;null!==d&&iS(a,l,d);const h=c.styles;return null!==h&&lP(a,l,h),64!=(64&c.flags)&&Ly(s,r,l,c),0===function z7(){return zt.lFrame.elementDepthCount}()&&qr(l,r),function G7(){zt.lFrame.elementDepthCount++}(),hy(c)&&(gS(s,r,c),TP(s,c,r)),null!==n&&_S(r,c),M}function T(){let i=pr();mC()?gC():(i=i.parent,Fa(i,!1));const t=i;!function W7(){zt.lFrame.elementDepthCount--}();const e=yn();return e.firstCreatePass&&(_y(e,i),sC(i)&&e.queries.elementEnd(i)),null!=t.classesWithoutHost&&function a9(i){return 0!=(16&i.flags)}(t)&&NS(e,t,xe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function l9(i){return 0!=(32&i.flags)}(t)&&NS(e,t,xe(),t.stylesWithoutHost,!1),T}function ie(i,t,e,n){return M(i,t,e,n),T(),ie}function Er(i,t,e){const n=xe(),r=yn(),s=i+20,o=r.firstCreatePass?function jX(i,t,e,n,r){const s=t.consts,o=kc(s,n),a=sf(t,i,8,"ng-container",o);return null!==o&&zy(a,o,!0),vS(t,e,a,kc(s,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,r,n,t,e):r.data[s];Fa(o,!0);const a=n[s]=n[11].createComment("");return Ly(r,n,a,o),qr(a,n),hy(o)&&(gS(r,n,o),TP(r,o,n)),null!=e&&_S(n,o),Er}function Tr(){let i=pr();const t=yn();return mC()?gC():(i=i.parent,Fa(i,!1)),t.firstCreatePass&&(_y(t,i),sC(i)&&t.queries.elementEnd(i)),Tr}function oa(i,t,e){return Er(i,t,e),Tr(),oa}function Eo(){return xe()}function fg(i){return!!i&&"function"==typeof i.then}function AL(i){return!!i&&"function"==typeof i.subscribe}const BS=AL;function $e(i,t,e,n){const r=xe(),s=yn(),o=pr();return RL(s,r,r[11],o,i,t,!!e,n),$e}function $y(i,t){const e=pr(),n=xe(),r=yn();return RL(r,n,GP(vC(r.data),e,n),e,i,t,!1),$y}function RL(i,t,e,n,r,s,o,a){const l=hy(n),u=i.firstCreatePass&&zP(i),d=t[8],h=UP(t);let f=!0;if(3&n.type||a){const g=wo(n,t),_=a?a(g):g,v=h.length,y=a?b=>a(Ki(b[n.index])):n.index;if(Di(e)){let b=null;if(!a&&l&&(b=function $X(i,t,e,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===n){const a=t[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(i,t,r,n.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=s,b.__ngLastListenerFn__=s,f=!1;else{s=VS(n,t,d,s,!1);const x=e.listen(_,r,s);h.push(s,x),u&&u.push(r,y,v,v+1)}}else s=VS(n,t,d,s,!0),_.addEventListener(r,s,o),h.push(s),u&&u.push(r,y,v,o)}else s=VS(n,t,d,s,!1);const p=n.outputs;let m;if(f&&null!==p&&(m=p[r])){const g=m.length;if(g)for(let _=0;_<g;_+=2){const w=t[m[_]][m[_+1]].subscribe(s),E=h.length;h.push(s,w),u&&u.push(r,n.index,E,-(E+1))}}}function IL(i,t,e,n){try{return!1!==e(n)}catch(r){return WP(i,r),!1}}function VS(i,t,e,n,r){return function s(o){if(o===Function)return n;const a=2&i.flags?Gs(i.index,t):t;0==(32&t[2])&&xS(a);let l=IL(t,0,n,o),c=s.__ngNextListenerFn__;for(;c;)l=IL(t,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Qe(i=1){return function Q7(i){return(zt.lFrame.contextLView=function J7(i,t){for(;i>0;)t=t[15],i--;return t}(i,zt.lFrame.contextLView))[8]}(i)}function qX(i,t){let e=null;const n=function iY(i){const t=i.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(i);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===n?hP(i,s,!0):oY(n,s))return r}else e=r}return e}function zi(i){const t=xe()[16][6];if(!t.projection){const n=t.projection=Km(i?i.length:1,null),r=n.slice();let s=t.child;for(;null!==s;){const o=i?qX(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function Tn(i,t=0,e){const n=xe(),r=yn(),s=sf(r,20+i,16,null,e||null);null===s.projection&&(s.projection=t),gC(),64!=(64&s.flags)&&function Kq(i,t,e){aP(t[11],0,t,e,ZO(i,e,t),tP(e.parent||t[6],e,t))}(r,n,s)}function qy(i,t,e){return zn(i,"",t,"",e),qy}function zn(i,t,e,n,r){const s=xe(),o=ff(s,t,e,n);return o!==Gt&&Ys(yn(),Ai(),s,i,o,s[11],r,!1),zn}function HL(i,t,e,n,r){const s=i[e+1],o=null===t;let a=n?ra(s):Cl(s),l=!1;for(;0!==a&&(!1===l||o);){const u=i[a+1];KX(i[a],t)&&(l=!0,i[a+1]=n?oS(u):rS(u)),a=n?ra(u):Cl(u)}l&&(i[e+1]=n?rS(s):oS(s))}function KX(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&Qh(i,t)>=0}const gr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function UL(i){return i.substring(gr.key,gr.keyEnd)}function zL(i,t){const e=gr.textEnd;return e===t?-1:(t=gr.keyEnd=function eK(i,t,e){for(;t<e&&i.charCodeAt(t)>32;)t++;return t}(i,gr.key=t,e),wf(i,t,e))}function wf(i,t,e){for(;t<e&&i.charCodeAt(t)<=32;)t++;return t}function Xr(i,t,e){return aa(i,t,e,!1),Xr}function qt(i,t){return aa(i,t,null,!0),qt}function Wa(i,t){for(let e=function QX(i){return function WL(i){gr.key=0,gr.keyEnd=0,gr.value=0,gr.valueEnd=0,gr.textEnd=i.length}(i),zL(i,wf(i,0,gr.textEnd))}(t);e>=0;e=zL(t,e))js(i,UL(t),!0)}function aa(i,t,e,n){const r=xe(),s=yn(),o=Ml(2);s.firstUpdatePass&&XL(s,i,o,n),t!==Gt&&Yr(r,o,t)&&ZL(s,s.data[hs()],r,r[11],i,r[o+1]=function uK(i,t){return null==i||("string"==typeof t?i+=t:"object"==typeof i&&(i=Fn($s(i)))),i}(t,e),n,o)}function la(i,t,e,n){const r=yn(),s=Ml(2);r.firstUpdatePass&&XL(r,null,s,n);const o=xe();if(e!==Gt&&Yr(o,s,e)){const a=r.data[hs()];if(JL(a,n)&&!YL(r,s)){let l=n?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=KM(l,e||"")),NS(r,a,o,e,n)}else!function cK(i,t,e,n,r,s,o,a){r===Gt&&(r=$n);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const h=l<r.length?r[l+1]:void 0,f=c<s.length?s[c+1]:void 0;let m,p=null;u===d?(l+=2,c+=2,h!==f&&(p=d,m=f)):null===d||null!==u&&u<d?(l+=2,p=u):(c+=2,p=d,m=f),null!==p&&ZL(i,t,e,n,p,m,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function lK(i,t,e){if(null==e||""===e)return $n;const n=[],r=$s(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&t(n,r);return n}(i,t,e),n,s)}}function YL(i,t){return t>=i.expandoStartIndex}function XL(i,t,e,n){const r=i.data;if(null===r[e+1]){const s=r[hs()],o=YL(i,e);JL(s,n)&&null===t&&!o&&(t=!1),t=function rK(i,t,e,n){const r=vC(i);let s=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(e=pg(e=HS(null,i,t,e,n),t.attrs,n),s=null);else{const o=t.directiveStylingLast;if(-1===o||i[o]!==r)if(e=HS(r,i,t,e,n),null===s){let l=function sK(i,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==Cl(n))return i[ra(n)]}(i,t,n);void 0!==l&&Array.isArray(l)&&(l=HS(null,i,t,l[1],n),l=pg(l,t.attrs,n),function oK(i,t,e,n){i[ra(e?t.classBindings:t.styleBindings)]=n}(i,t,n,l))}else s=function aK(i,t,e){let n;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)n=pg(n,i[s].hostAttrs,e);return pg(n,t.attrs,e)}(i,t,n)}return void 0!==s&&(n?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,n),function YX(i,t,e,n,r,s){let o=s?t.classBindings:t.styleBindings,a=ra(o),l=Cl(o);i[n]=e;let u,c=!1;if(Array.isArray(e)){const d=e;u=d[1],(null===u||Qh(d,u)>0)&&(c=!0)}else u=e;if(r)if(0!==l){const h=ra(i[a+1]);i[n+1]=Ny(h,a),0!==h&&(i[h+1]=sS(i[h+1],n)),i[a+1]=function uY(i,t){return 131071&i|t<<17}(i[a+1],n)}else i[n+1]=Ny(a,0),0!==a&&(i[a+1]=sS(i[a+1],n)),a=n;else i[n+1]=Ny(l,0),0===a?a=n:i[l+1]=sS(i[l+1],n),l=n;c&&(i[n+1]=rS(i[n+1])),HL(i,u,n,!0),HL(i,u,n,!1),function XX(i,t,e,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof t&&Qh(s,t)>=0&&(e[n+1]=oS(e[n+1]))}(t,u,i,n,s),o=Ny(a,l),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,n)}}function HS(i,t,e,n,r){let s=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(s=t[a],n=pg(n,s.hostAttrs,r),s!==i);)a++;return null!==i&&(e.directiveStylingLast=a),n}function pg(i,t,e){const n=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),js(i,o,!!e||t[++s]))}return void 0===i?null:i}function ZL(i,t,e,n,r,s,o,a){if(!(3&t.type))return;const l=i.data,c=l[a+1];Yy(function _P(i){return 1==(1&i)}(c)?QL(l,t,e,r,Cl(c),o):void 0)||(Yy(s)||function gP(i){return 2==(2&i)}(c)&&(s=QL(l,null,e,r,a,o)),function Qq(i,t,e,n,r){const s=Di(i);if(t)r?s?i.addClass(e,n):e.classList.add(n):s?i.removeClass(e,n):e.classList.remove(n);else{let o=-1===n.indexOf("-")?void 0:qs.DashCase;if(null==r)s?i.removeStyle(e,n,o):e.style.removeProperty(n);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=qs.Important),s?i.setStyle(e,n,r,o):e.style.setProperty(n,r,a?"important":"")}}}(n,o,fy(hs(),e),r,s))}function QL(i,t,e,n,r,s){const o=null===t;let a;for(;r>0;){const l=i[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=e[r+1];h===Gt&&(h=d?$n:void 0);let f=d?AC(h,n):u===n?h:void 0;if(c&&!Yy(f)&&(f=AC(l,n)),Yy(f)&&(a=f,o))return a;const p=i[r+1];r=o?ra(p):Cl(p)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=AC(l,n))}return a}function Yy(i){return void 0!==i}function JL(i,t){return 0!=(i.flags&(t?16:32))}function k(i,t=""){const e=xe(),n=yn(),r=i+20,s=n.firstCreatePass?sf(n,r,1,t,null):n.data[r],o=e[r]=function KC(i,t){return Di(i)?i.createText(t):i.createTextNode(t)}(e[11],t);Ly(n,e,o,s),Fa(s,!1)}function mg(i){return At("",i,""),mg}function At(i,t,e){const n=xe(),r=ff(n,i,t,e);return r!==Gt&&Sl(n,hs(),r),At}function gg(i,t,e,n,r){const s=xe(),o=pf(s,i,t,e,n,r);return o!==Gt&&Sl(s,hs(),o),gg}function _i(i,t,e){la(js,Wa,ff(xe(),i,t,e),!0)}function Xy(i,t,e,n,r){return aa(i,ff(xe(),t,e,n),r,!1),Xy}function Mf(i,t,e){const n=xe();return Yr(n,Wh(),t)&&Ys(yn(),Ai(),n,i,t,n[11],e,!0),Mf}function Ky(i,t,e){const n=xe();if(Yr(n,Wh(),t)){const s=yn(),o=Ai();Ys(s,o,n,i,t,GP(vC(s.data),o,n),e,!0)}return Ky}const Zy="en-US";let yF=Zy;function GS(i,t,e,n,r){if(i=Kt(i),Array.isArray(i))for(let s=0;s<i.length;s++)GS(i[s],t,e,n,r);else{const s=yn(),o=xe();let a=uf(i)?i:Kt(i.provide),l=KP(i);const c=pr(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(uf(i)||!i.multi){const f=new Wm(l,r,C),p=jS(a,t,r?u:u+h,d);-1===p?(Cy($m(c,o),s,a),WS(s,i,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(f),o.push(f)):(e[p]=f,o[p]=f)}else{const f=jS(a,t,u+h,d),p=jS(a,t,u,u+h),m=f>=0&&e[f],g=p>=0&&e[p];if(r&&!g||!r&&!m){Cy($m(c,o),s,a);const _=function EZ(i,t,e,n,r){const s=new Wm(i,e,C);return s.multi=[],s.index=t,s.componentProviders=0,GF(s,r,n&&!e),s}(r?SZ:CZ,e.length,r,n,l);!r&&g&&(e[p].providerFactory=_),WS(s,i,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(_),o.push(_)}else WS(s,i,f>-1?f:p,GF(e[r?p:f],l,!r&&n));!r&&n&&g&&e[p].componentProviders++}}}function WS(i,t,e,n){const r=uf(t),s=function tX(i){return!!i.useClass}(t);if(r||s){const l=(s?Kt(t.useClass):t).prototype.ngOnDestroy;if(l){const c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){const u=c.indexOf(e);-1===u?c.push(e,[n,l]):c[u+1].push(n,l)}else c.push(e,l)}}}function GF(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function jS(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function CZ(i,t,e,n){return $S(this.multi,[])}function SZ(i,t,e,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=qm(e,e[1],this.providerFactory.index,n);s=a.slice(0,o),$S(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],$S(r,s);return s}function $S(i,t){for(let e=0;e<i.length;e++)t.push((0,i[e])());return t}function gt(i,t=[]){return e=>{e.providersResolver=(n,r)=>function MZ(i,t,e){const n=yn();if(n.firstCreatePass){const r=na(i);GS(e,n.data,n.blueprint,r,!0),GS(t,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,t)}}class WF{}class AZ{resolveComponentFactory(t){throw function DZ(i){const t=Error(`No component factory found for ${Fn(i)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=i,t}(t)}}let ed=(()=>{class i{}return i.NULL=new AZ,i})();function RZ(){return Ef(pr(),xe())}function Ef(i,t){return new Ve(wo(i,t))}let Ve=(()=>{class i{constructor(e){this.nativeElement=e}}return i.__NG_ELEMENT_ID__=RZ,i})();function IZ(i){return i instanceof Ve?i.nativeElement:i}class xg{}let ca=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function OZ(){const i=xe(),e=Gs(pr().index,i);return function kZ(i){return i[11]}(La(e)?e:i)}(),i})(),PZ=(()=>{class i{}return i.\u0275prov=be({token:i,providedIn:"root",factory:()=>null}),i})();class Bc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const LZ=new Bc("13.3.11"),qS={};function n0(i,t,e,n,r=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&n.push(Ki(s)),ta(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&n0(l[1],l,c,n)}const o=e.type;if(8&o)n0(i,t,e.child,n);else if(32&o){const a=qC(e,t);let l;for(;l=a();)n.push(l)}else if(16&o){const a=sP(t,e);if(Array.isArray(a))n.push(...a);else{const l=sg(t[16]);n0(l[1],l,a,n,!0)}}e=r?e.projectionNext:e.next}return n}class wg{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return n0(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ta(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(QC(t,n),Ey(e,n))}this._attachedToViewContainer=!1}KO(this._lView[1],this._lView)}onDestroy(t){IP(this._lView[1],this._lView,null,t)}markForCheck(){xS(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function MS(i,t,e){const n=t[10];n.begin&&n.begin();try{lf(i,t,i.template,e)}catch(r){throw WP(t,r),r}finally{n.end&&n.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new et(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zq(i,t){og(i,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new et(902,"");this._appRef=t}}class FZ extends wg{constructor(t){super(t),this._view=t}detectChanges(){HP(this._view)}checkNoChanges(){}get context(){return null}}class $F extends ed{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=jr(t);return new YS(e,this.ngModule)}}function qF(i){const t=[];for(let e in i)i.hasOwnProperty(e)&&t.push({propName:i[e],templateName:e});return t}class YS extends WF{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function lY(i){return i.map(aY).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return qF(this.componentDef.inputs)}get outputs(){return qF(this.componentDef.outputs)}create(t,e,n,r){const s=(r=r||this.ngModule)?function BZ(i,t){return{get:(e,n,r)=>{const s=i.get(e,qS,r);return s!==qS||n===qS?s:t.get(e,n,r)}}}(t,r.injector):t,o=s.get(xg,Bk),a=s.get(PZ,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function RP(i,t,e){if(Di(i))return i.selectRootElement(t,e===Jo.ShadowDom);let n="string"==typeof t?i.querySelector(t):t;return n.textContent="",n}(l,n,this.componentDef.encapsulation):ZC(o.createRenderer(null,this.componentDef),c,function NZ(i){const t=i.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(c)),d=this.componentDef.onPush?576:528,h=function lL(i,t){return{components:[],scheduler:i||Lq,clean:$Y,playerHandler:t||null,flags:0}}(),f=Hy(0,null,null,1,0,null,null,null,null,null),p=ag(null,f,h,d,null,null,o,l,a,s);let m,g;my(p);try{const _=function oL(i,t,e,n,r,s){const o=e[1];e[20]=i;const l=sf(o,20,2,"#host",null),c=l.mergedAttrs=t.hostAttrs;null!==c&&(zy(l,c,!0),null!==i&&(by(r,i,c),null!==l.classes&&iS(r,i,l.classes),null!==l.styles&&lP(r,i,l.styles)));const u=n.createRenderer(i,t),d=ag(e,DP(t),null,t.onPush?64:16,e[20],l,n,u,s||null,null);return o.firstCreatePass&&(Cy($m(l,e),o,t.type),FP(o,l),NP(l,e.length,1)),Uy(e,d),e[20]=d}(u,this.componentDef,p,o,l);if(u)if(n)by(l,u,["ng-version",LZ.full]);else{const{attrs:v,classes:y}=function cY(i){const t=[],e=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&t.push(s,i[++n]):8===r&&e.push(s);else{if(!ia(r))break;r=s}n++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);v&&by(l,u,v),y&&y.length>0&&iS(l,u,y.join(" "))}if(g=hC(f,20),void 0!==e){const v=g.projection=[];for(let y=0;y<this.ngContentSelectors.length;y++){const b=e[y];v.push(null!=b?Array.from(b):null)}}m=function aL(i,t,e,n,r){const s=e[1],o=function RY(i,t,e){const n=pr();i.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),BP(i,n,t,af(i,t,1,null),e));const r=qm(t,i,n.directiveStart,n);qr(r,t);const s=wo(n,t);return s&&qr(s,t),r}(s,e,t);if(n.components.push(o),i[8]=o,r&&r.forEach(l=>l(o,t)),t.contentQueries){const l=pr();t.contentQueries(1,o,l.directiveStart)}const a=pr();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Oc(a.index),PP(e[1],a,0,a.directiveStart,a.directiveEnd,t),LP(t,o)),o}(_,this.componentDef,p,h,[hX]),lg(f,p,null)}finally{gy()}return new HZ(this.componentType,m,Ef(g,p),p,g)}}class HZ extends class TZ{}{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new FZ(r),this.componentType=t}get injector(){return new qh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class El{}class YF{}const Tf=new Map;class ZF extends El{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $F(this);const n=yo(t);this._bootstrapComponents=Ha(n.bootstrap),this._r3Injector=XP(t,e,[{provide:El,useValue:this},{provide:ed,useValue:this.componentFactoryResolver}],Fn(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Ui.THROW_IF_NOT_FOUND,n=Ft.Default){return t===Ui||t===El||t===SS?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class XS extends YF{constructor(t){super(),this.moduleType=t,null!==yo(t)&&function zZ(i){const t=new Set;!function e(n){const r=yo(n,!0),s=r.id;null!==s&&(function XF(i,t,e){if(t&&t!==e)throw new Error(`Duplicate module registered for ${i} - ${Fn(t)} vs ${Fn(t.name)}`)}(s,Tf.get(s),n),Tf.set(s,n));const o=Ha(r.imports);for(const a of o)t.has(a)||(t.add(a),e(a))}(i)}(t)}create(t){return new ZF(this.moduleType,t)}}function td(i,t,e){const n=ds()+i,r=xe();return r[n]===Gt?za(r,n,e?t.call(e):t()):function dg(i,t){return i[t]}(r,n)}function Tl(i,t,e,n){return QF(xe(),ds(),i,t,e,n)}function QF(i,t,e,n,r,s){const o=t+e;return Yr(i,o,r)?za(i,o+1,s?n.call(s,r):n(r)):function Mg(i,t){const e=i[t];return e===Gt?void 0:e}(i,o+1)}function Br(i,t){const e=yn();let n;const r=i+20;e.firstCreatePass?(n=function ZZ(i,t){if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];if(i===n.name)return n}}(t,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const s=n.factory||(n.factory=qu(n.type)),o=Ac(C);try{const a=wy(!1),l=s();return wy(a),function CX(i,t,e,n){e>=i.data.length&&(i.data[e]=null,i.blueprint[e]=null),t[e]=n}(e,xe(),r,l),l}finally{Ac(o)}}function Vr(i,t,e){const n=i+20,r=xe(),s=Gh(r,n);return function Cg(i,t){return i[1].data[t].pure}(r,n)?QF(r,ds(),t,s.transform,e,s):s.transform(e)}function KS(i){return t=>{setTimeout(i,void 0,t)}}const Wt=class nQ extends Dt{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,s,o;let a=t,l=e||(()=>null),c=n;if(t&&"object"==typeof t){const d=t;a=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(s=d.error)||void 0===s?void 0:s.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=KS(l),a&&(a=KS(a)),c&&(c=KS(c)));const u=super.subscribe({next:a,error:l,complete:c});return t instanceof Jn&&t.add(u),u}};function iQ(){return this._results[df()]()}class Df{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=df(),n=Df.prototype;n[e]||(n[e]=iQ)}get changes(){return this._changes||(this._changes=new Wt)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Mo(t);(this._changesDetected=!function v9(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=t[n];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Dr=(()=>{class i{}return i.__NG_ELEMENT_ID__=oQ,i})();const rQ=Dr,sQ=class extends rQ{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ag(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(n[19]=s.createEmbeddedView(e)),lg(e,n,t),new wg(n)}};function oQ(){return r0(pr(),xe())}function r0(i,t){return 4&i.type?new sQ(t,i,Ef(i,t)):null}let Ar=(()=>{class i{}return i.__NG_ELEMENT_ID__=aQ,i})();function aQ(){return o2(pr(),xe())}const lQ=Ar,r2=class extends lQ{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ef(this._hostTNode,this._hostLView)}get injector(){return new qh(this._hostTNode,this._hostLView)}get parentInjector(){const t=My(this._hostTNode,this._hostLView);if(nO(t)){const e=$h(t,this._hostLView),n=jh(t);return new qh(e[1].data[n+8],e)}return new qh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=s2(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,s){const o=t&&!function Xm(i){return"function"==typeof i}(t);let a;if(o)a=e;else{const d=e||{};a=d.index,n=d.injector,r=d.projectableNodes,s=d.ngModuleRef}const l=o?t:new YS(jr(t)),c=n||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(El,null);h&&(s=h)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(t,e){const n=t._lView,r=n[1];if(function U7(i){return ta(i[3])}(n)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const d=n[3],h=new r2(d,d[6],d[3]);h.detach(h.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function Wq(i,t,e,n){const r=10+n,s=e.length;n>0&&(e[r-1][4]=t),n<s-10?(t[4]=e[r],hO(e,10+n,t)):(e.push(t),t[4]=null),t[3]=e;const o=t[17];null!==o&&e!==o&&function jq(i,t){const e=i[9];t[16]!==t[3][3][16]&&(i[2]=!0),null===e?i[9]=[t]:e.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(i),t[2]|=128}(r,n,o,s);const a=tS(s,o),l=n[11],c=Py(l,o[7]);return null!==c&&function Uq(i,t,e,n,r,s){n[0]=r,n[6]=t,og(i,n,e,1,r,s)}(r,o[6],l,n,c,a),t.attachToViewContainerRef(),hO(ZS(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=s2(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=QC(this._lContainer,e);n&&(Ey(ZS(this._lContainer),e),KO(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=QC(this._lContainer,e);return n&&null!=Ey(ZS(this._lContainer),e)?new wg(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function s2(i){return i[8]}function ZS(i){return i[8]||(i[8]=[])}function o2(i,t){let e;const n=t[i.index];if(ta(n))e=n;else{let r;if(8&i.type)r=Ki(n);else{const s=t[11];r=s.createComment("");const o=wo(i,t);Zu(s,Py(s,o),r,function Xq(i,t){return Di(i)?i.nextSibling(t):t.nextSibling}(s,o),!1)}t[i.index]=e=VP(n,t,r,i),Uy(t,e)}return new r2(e,i,t)}class QS{constructor(t){this.queryList=t,this.matches=null}clone(){return new QS(this.queryList)}setDirty(){this.queryList.setDirty()}}class JS{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<n;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new JS(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==d2(t,e).matches&&this.queries[e].setDirty()}}class a2{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class eE{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new eE(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class tE{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new tE(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(t,e,dQ(e,s)),this.matchTNodeWithReadOption(t,e,Sy(e,t,s,!1,!1))}else n===Dr?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Sy(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ve||r===Ar||r===Dr&&4&e.type)this.addMatch(e.index,-2);else{const s=Sy(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function dQ(i,t){const e=i.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function fQ(i,t,e,n){return-1===e?function hQ(i,t){return 11&i.type?Ef(i,t):4&i.type?r0(i,t):null}(t,i):-2===e?function pQ(i,t,e){return e===Ve?Ef(t,i):e===Dr?r0(t,i):e===Ar?o2(t,i):void 0}(i,t,n):qm(i,i[1],e,t)}function l2(i,t,e,n){const r=t[19].queries[n];if(null===r.matches){const s=i.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:fQ(t,s[c],o[l+1],e.metadata.read))}r.matches=a}return r.matches}function nE(i,t,e,n){const r=i.queries.getByIndex(e),s=r.matches;if(null!==s){const o=l2(i,t,r,e);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)n.push(o[a/2]);else{const c=s[a+1],u=t[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&nE(h[1],h,c,n)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];nE(f[1],f,c,n)}}}}}return n}function Ct(i){const t=xe(),e=yn(),n=$k();yC(n+1);const r=d2(e,n);if(i.dirty&&Vk(t)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?nE(e,t,n,[]):l2(e,t,r,n);i.reset(s,IZ),i.notifyOnChanges()}return!0}return!1}function ni(i,t,e){const n=yn();n.firstCreatePass&&(u2(n,new a2(i,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),c2(n,xe(),t)}function fi(i,t,e,n){const r=yn();if(r.firstCreatePass){const s=pr();u2(r,new a2(t,e,n),s.index),function gQ(i,t){const e=i.contentQueries||(i.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(i.queries.length-1,t)}(r,i),2==(2&e)&&(r.staticContentQueries=!0)}c2(r,xe(),e)}function St(){return function mQ(i,t){return i[19].queries[t].queryList}(xe(),$k())}function c2(i,t,e){const n=new Df(4==(4&e));IP(i,t,n,n.destroy),null===t[19]&&(t[19]=new JS),t[19].queries.push(new QS(n))}function u2(i,t,e){null===i.queries&&(i.queries=new eE),i.queries.track(new tE(t,e))}function d2(i,t){return i.queries.getByIndex(t)}function ja(i,t){return r0(i,t)}function a0(...i){}const lE=new ve("Application Initializer");let cE=(()=>{class i{constructor(e){this.appInits=e,this.resolve=a0,this.reject=a0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(fg(s))e.push(s);else if(BS(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return i.\u0275fac=function(e){return new(e||i)(J(lE,8))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Eg=new ve("AppId",{providedIn:"root",factory:function D2(){return`${uE()}${uE()}${uE()}`}});function uE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const A2=new ve("Platform Initializer"),Xs=new ve("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),dE=new ve("appBootstrapListener");let OQ=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Dl=new ve("LocaleId",{providedIn:"root",factory:()=>Jh(Dl,Ft.Optional|Ft.SkipSelf)||function PQ(){return"undefined"!=typeof $localize&&$localize.locale||Zy}()});class FQ{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let R2=(()=>{class i{compileModuleSync(e){return new XS(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),s=Ha(yo(e).declarations).reduce((o,a)=>{const l=jr(a);return l&&o.push(new YS(l)),o},[]);return new FQ(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const BQ=(()=>Promise.resolve(0))();function hE(i){"undefined"==typeof Zone?BQ.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ot{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wt(!1),this.onMicrotaskEmpty=new Wt(!1),this.onStable=new Wt(!1),this.onError=new Wt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function VQ(){let i=Un.requestAnimationFrame,t=Un.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&t){const e=i[Zone.__symbol__("OriginalDelegate")];e&&(i=e);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function zQ(i){const t=()=>{!function UQ(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Un,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,pE(i),i.isCheckStableRunning=!0,fE(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),pE(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,s,o,a)=>{try{return I2(i),e.invokeTask(r,s,o,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&t(),k2(i)}},onInvoke:(e,n,r,s,o,a,l)=>{try{return I2(i),e.invoke(r,s,o,a,l)}finally{i.shouldCoalesceRunChangeDetection&&t(),k2(i)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,pE(i),fE(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ot.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ot.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,HQ,a0,a0);try{return s.runTask(o,e,n)}finally{s.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const HQ={};function fE(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function pE(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function I2(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function k2(i){i._nesting--,fE(i)}class GQ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wt,this.onMicrotaskEmpty=new Wt,this.onStable=new Wt,this.onError=new Wt}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let mE=(()=>{class i{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ot.assertNotInAngularZone(),hE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hE(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,n,r){return[]}}return i.\u0275fac=function(e){return new(e||i)(J(Ot))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})(),WQ=(()=>{class i{constructor(){this._applications=new Map,gE.addToWindow(this)}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return gE.findTestabilityInTree(this,e,n)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class jQ{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let gE=new jQ,nd=null;const O2=new ve("AllowMultipleToken"),P2=new ve("PlatformOnDestroy");class L2{constructor(t,e){this.name=t,this.token=e}}function F2(i,t,e=[]){const n=`Platform: ${t}`,r=new ve(n);return(s=[])=>{let o=_E();if(!o||o.injector.get(O2,!1)){const a=[...e,...s,{provide:r,useValue:!0}];i?i(a):function XQ(i){if(nd&&!nd.get(O2,!1))throw new et(400,"");nd=i;const t=i.get(N2),e=i.get(A2,null);e&&e.forEach(n=>n())}(function ZQ(i=[],t){return Ui.create({name:t,providers:[{provide:ES,useValue:"platform"},{provide:P2,useValue:()=>nd=null},...i]})}(a,n))}return function KQ(i){const t=_E();if(!t)throw new et(401,"");return t}()}}function _E(){var i;return null!==(i=null==nd?void 0:nd.get(N2))&&void 0!==i?i:null}let N2=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const a=function QQ(i,t){let e;return e="noop"===i?new GQ:("zone.js"===i?void 0:i)||new Ot({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),e}(n?n.ngZone:void 0,{ngZoneEventCoalescing:n&&n.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:n&&n.ngZoneRunCoalescing||!1}),l=[{provide:Ot,useValue:a}];return a.run(()=>{const c=Ui.create({providers:l,parent:this.injector,name:e.moduleType.name}),u=e.create(c),d=u.injector.get(Lc,null);if(!d)throw new et(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{vE(this._modules,u),h.unsubscribe()})}),function JQ(i,t,e){try{const n=e();return fg(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}(d,a,()=>{const h=u.injector.get(cE);return h.runInitializers(),h.donePromise.then(()=>(function kK(i){Us(i,"Expected localeId to be defined"),"string"==typeof i&&(yF=i.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Dl,Zy)||Zy),this._moduleDoBootstrap(u),u))})})}bootstrapModule(e,n=[]){const r=B2({},n);return function qQ(i,t,e){const n=new XS(e);return Promise.resolve(n)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const n=e.injector.get(l0);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new et(403,"");e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new et(404,"");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const e=this._injector.get(P2,null);null==e||e(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(e){return new(e||i)(J(Ui))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function B2(i,t){return Array.isArray(t)?t.reduce(B2,i):Object.assign(Object.assign({},i),t)}let l0=(()=>{class i{constructor(e,n,r,s){this._zone=e,this._injector=n,this._exceptionHandler=r,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Mn(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),a=new Mn(l=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{Ot.assertNotInAngularZone(),hE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{Ot.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{c.unsubscribe(),u.unsubscribe()}});this.isStable=Nh(o,a.pipe(Mk()))}bootstrap(e,n){if(!this._initStatus.done)throw new et(405,"");let r;r=e instanceof WF?e:this._injector.get(ed).resolveComponentFactory(e),this.componentTypes.push(r.componentType);const s=function YQ(i){return i.isBoundToModule}(r)?void 0:this._injector.get(El),a=r.create(Ui.NULL,[],n||r.selector,s),l=a.location.nativeElement,c=a.injector.get(mE,null),u=c&&a.injector.get(WQ);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),vE(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new et(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;vE(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(dE,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(e){return new(e||i)(J(Ot),J(Ui),J(Lc),J(cE))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function vE(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}let H2=!0,Zi=(()=>{class i{}return i.__NG_ELEMENT_ID__=nJ,i})();function nJ(i){return function iJ(i,t,e){if(dy(i)&&!e){const n=Gs(i.index,t);return new wg(n,n)}return 47&i.type?new wg(t[16],t):null}(pr(),xe(),16==(16&i))}class j2{constructor(){}supports(t){return ug(t)}create(t){return new cJ(t)}}const lJ=(i,t)=>t;class cJ{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||lJ}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const o=!n||e&&e.currentIndex<q2(n,r,s)?e:n,a=q2(o,r,s),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!ug(t))throw new et(900,"");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,a),n=!0),e=e._next}else r=0,function wX(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{const e=i[df()]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,a=>{o=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new uJ(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new $2),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $2),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class uJ{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dJ{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class $2{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new dJ,this.map.set(e,n)),n.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function q2(i,t,e){const n=i.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}class Y2{constructor(){}supports(t){return t instanceof Map||kS(t)}create(){return new hJ}}class hJ{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||kS(t)))throw new et(900,"")}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new fJ(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class fJ{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function X2(){return new $a([new j2])}let $a=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||X2()),deps:[[i,new Yu,new Co]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new et(901,"")}}return i.\u0275prov=be({token:i,providedIn:"root",factory:X2}),i})();function K2(){return new rd([new Y2])}let rd=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||K2()),deps:[[i,new Yu,new Co]]}}find(e){const n=this.factories.find(s=>s.supports(e));if(n)return n;throw new et(901,"")}}return i.\u0275prov=be({token:i,providedIn:"root",factory:K2}),i})();const gJ=F2(null,"core",[]);let _J=(()=>{class i{constructor(e){}}return i.\u0275fac=function(e){return new(e||i)(J(l0))},i.\u0275mod=at({type:i}),i.\u0275inj=st({}),i})(),d0=null;function qa(){return d0}const Lt=new ve("DocumentToken");let sd=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=be({token:i,factory:function(){return function xJ(){return J(Z2)}()},providedIn:"platform"}),i})();const wJ=new ve("Location Initialized");let Z2=(()=>{class i extends sd{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qa().getBaseHref(this._doc)}onPopState(e){const n=qa().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=qa().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,r){Q2()?this._history.pushState(e,n,r):this.location.hash=r}replaceState(e,n,r){Q2()?this._history.replaceState(e,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(J(Lt))},i.\u0275prov=be({token:i,factory:function(){return function MJ(){return new Z2(J(Lt))}()},providedIn:"platform"}),i})();function Q2(){return!!window.history.pushState}function ME(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function J2(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function Al(i){return i&&"?"!==i[0]?"?"+i:i}let Rf=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=be({token:i,factory:function(){return function CJ(i){const t=J(Lt).location;return new eN(J(sd),t&&t.origin||"")}()},providedIn:"root"}),i})();const CE=new ve("appBaseHref");let eN=(()=>{class i extends Rf{constructor(e,n){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==n&&(n=this._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=n}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return ME(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+Al(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,s){const o=this.prepareExternalUrl(r+Al(s));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){const o=this.prepareExternalUrl(r+Al(s));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformLocation).historyGo)||void 0===r||r.call(n,e)}}return i.\u0275fac=function(e){return new(e||i)(J(sd),J(CE,8))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})(),SJ=(()=>{class i extends Rf{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=ME(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,s){let o=this.prepareExternalUrl(r+Al(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){let o=this.prepareExternalUrl(r+Al(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformLocation).historyGo)||void 0===r||r.call(n,e)}}return i.\u0275fac=function(e){return new(e||i)(J(sd),J(CE,8))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})(),Tg=(()=>{class i{constructor(e,n){this._subject=new Wt,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=J2(tN(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+Al(n))}normalize(e){return i.stripTrailingSlash(function TJ(i,t){return i&&t.startsWith(i)?t.substring(i.length):t}(this._baseHref,tN(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._platformStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Al(n)),r)}replaceState(e,n="",r=null){this._platformStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Al(n)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformStrategy).historyGo)||void 0===r||r.call(n,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}))}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return i.normalizeQueryParams=Al,i.joinWithSlash=ME,i.stripTrailingSlash=J2,i.\u0275fac=function(e){return new(e||i)(J(Rf),J(sd))},i.\u0275prov=be({token:i,factory:function(){return function EJ(){return new Tg(J(Rf),J(sd))}()},providedIn:"root"}),i})();function tN(i){return i.replace(/\/index.html$/,"")}function uN(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const n=e.indexOf("="),[r,s]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}class dee{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let od=(()=>{class i{constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new dee(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const a=n.get(s);n.move(a,o),dN(a,r)}});for(let r=0,s=n.length;r<s;r++){const a=n.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{dN(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(C(Ar),C(Dr),C($a))},i.\u0275dir=ae({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i})();function dN(i,t){i.context.$implicit=t.item}let Ks=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new hee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){hN("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){hN("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(C(Ar),C(Dr))},i.\u0275dir=ae({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class hee{constructor(){this.$implicit=null,this.ngIf=null}}function hN(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${Fn(t)}'.`)}class LE{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let x0=(()=>{class i{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(e)}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ae({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),i})(),fN=(()=>{class i{constructor(e,n,r){this.ngSwitch=r,r._addCase(),this._view=new LE(e,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(e){return new(e||i)(C(Ar),C(Dr),C(x0,9))},i.\u0275dir=ae({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),i})(),ad=(()=>{class i{constructor(e,n,r){this._ngEl=e,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,n){const[r,s]=e.split(".");null!=(n=null!=n&&s?`${n}${s}`:n)?this._renderer.setStyle(this._ngEl.nativeElement,r,n):this._renderer.removeStyle(this._ngEl.nativeElement,r)}_applyChanges(e){e.forEachRemovedItem(n=>this._setStyle(n.key,null)),e.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),e.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(rd),C(ca))},i.\u0275dir=ae({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),i})(),mN=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const n=this._viewContainerRef;this._viewRef&&n.remove(n.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?n.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(e){return new(e||i)(C(Ar))},i.\u0275dir=ae({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[fr]}),i})();class mee{createSubscription(t,e){return t.subscribe({next:e,error:n=>{throw n}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class gee{createSubscription(t,e){return t.then(e,n=>{throw n})}dispose(t){}onDestroy(t){}}const _ee=new gee,vee=new mee;let If=(()=>{class i{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,n=>this._updateLatestValue(e,n))}_selectStrategy(e){if(fg(e))return _ee;if(AL(e))return vee;throw function da(i,t){return new et(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,n){e===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return i.\u0275fac=function(e){return new(e||i)(C(Zi,16))},i.\u0275pipe=ws({name:"async",type:i,pure:!1}),i})(),Ss=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({}),i})();const _N="browser";function Vc(i){return i===_N}function kf(i){return"server"===i}let Bee=(()=>{class i{}return i.\u0275prov=be({token:i,providedIn:"root",factory:()=>new Vee(J(Lt),window)}),i})();class Vee{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Hee(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=vN(this.window.history)||vN(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function vN(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class yN{}class BE extends class Uee extends class bJ{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function yJ(i){d0||(d0=i)}(new BE)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function zee(){return Rg=Rg||document.querySelector("base"),Rg?Rg.getAttribute("href"):null}();return null==e?null:function Gee(i){w0=w0||document.createElement("a"),w0.setAttribute("href",i);const t=w0.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Rg=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return uN(document.cookie,t)}}let w0,Rg=null;const bN=new ve("TRANSITION_ID"),jee=[{provide:lE,useFactory:function Wee(i,t,e){return()=>{e.get(cE).donePromise.then(()=>{const n=qa(),r=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[bN,Lt,Ui],multi:!0}];class VE{static init(){!function $Q(i){gE=i}(new VE)}addToWindow(t){Un.getAngularTestability=(n,r=!0)=>{const s=t.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},Un.getAllAngularTestabilities=()=>t.getAllTestabilities(),Un.getAllAngularRootElements=()=>t.getAllRootElements(),Un.frameworkStabilizers||(Un.frameworkStabilizers=[]),Un.frameworkStabilizers.push(n=>{const r=Un.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&n(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?qa().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let $ee=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();const M0=new ve("EventManagerPlugins");let C0=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(J(M0),J(Ot))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();class xN{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=qa().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let wN=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})(),Ig=(()=>{class i extends wN{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,r){e.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(n.appendChild(o))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(MN),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(e,r,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(MN))}}return i.\u0275fac=function(e){return new(e||i)(J(Lt))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();function MN(i){qa().remove(i)}const HE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},UE=/%COMP%/g;function S0(i,t,e){for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?S0(i,r,e):(r=r.replace(UE,i),e.push(r))}return e}function EN(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let E0=(()=>{class i{constructor(e,n,r){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new zE(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case Jo.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new Qee(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(e),r}case 1:case Jo.ShadowDom:return new Jee(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const r=S0(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(J(C0),J(Ig),J(Eg))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();class zE{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(HE[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=HE[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=HE[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(qs.DashCase|qs.Important)?t.style.setProperty(e,n,r&qs.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&qs.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,EN(n)):this.eventManager.addEventListener(t,e,EN(n))}}class Qee extends zE{constructor(t,e,n,r){super(t),this.component=n;const s=S0(r+"-"+n.id,n.styles,[]);e.addStyles(s),this.contentAttr=function Xee(i){return"_ngcontent-%COMP%".replace(UE,i)}(r+"-"+n.id),this.hostAttr=function Kee(i){return"_nghost-%COMP%".replace(UE,i)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Jee extends zE{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=S0(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ete=(()=>{class i extends xN{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return i.\u0275fac=function(e){return new(e||i)(J(Lt))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();const DN=["alt","control","meta","shift"],nte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},AN={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ite={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let rte=(()=>{class i extends xN{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qa().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="";if(DN.forEach(l=>{const c=n.indexOf(l);c>-1&&(n.splice(c,1),o+=l+".")}),o+=s,0!=n.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(e){let n="",r=function ste(i){let t=i.key;if(null==t){if(t=i.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===i.location&&AN.hasOwnProperty(t)&&(t=AN[t]))}return nte[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),DN.forEach(s=>{s!=r&&ite[s](e)&&(n+=s+".")}),n+=r,n}static eventCallback(e,n,r){return s=>{i.getEventFullKey(s)===e&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(J(Lt))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();const cte=F2(gJ,"browser",[{provide:Xs,useValue:_N},{provide:A2,useValue:function ote(){BE.makeCurrent(),VE.init()},multi:!0},{provide:Lt,useFactory:function lte(){return function N7(i){uC=i}(document),document},deps:[]}]),ute=[{provide:ES,useValue:"root"},{provide:Lc,useFactory:function ate(){return new Lc},deps:[]},{provide:M0,useClass:ete,multi:!0,deps:[Lt,Ot,Xs]},{provide:M0,useClass:rte,multi:!0,deps:[Lt]},{provide:E0,useClass:E0,deps:[C0,Ig,Eg]},{provide:xg,useExisting:E0},{provide:wN,useExisting:Ig},{provide:Ig,useClass:Ig,deps:[Lt]},{provide:mE,useClass:mE,deps:[Ot]},{provide:C0,useClass:C0,deps:[M0,Ot]},{provide:yN,useClass:$ee,deps:[]}];let RN=(()=>{class i{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:i,providers:[{provide:Eg,useValue:e.appId},{provide:bN,useExisting:Eg},jee]}}}return i.\u0275fac=function(e){return new(e||i)(J(i,12))},i.\u0275mod=at({type:i}),i.\u0275inj=st({providers:ute,imports:[Ss,_J]}),i})();"undefined"!=typeof window&&window;let kg=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=be({token:i,factory:function(e){let n=null;return n=e?new(e||i):J(ON),n},providedIn:"root"}),i})(),ON=(()=>{class i extends kg{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case En.NONE:return n;case En.HTML:return Ba(n,"HTML")?$s(n):LO(this._doc,String(n)).toString();case En.STYLE:return Ba(n,"Style")?$s(n):n;case En.SCRIPT:if(Ba(n,"Script"))return $s(n);throw new Error("unsafe value used in a script context");case En.URL:return TO(n),Ba(n,"URL")?$s(n):tg(String(n));case En.RESOURCE_URL:if(Ba(n,"ResourceURL"))return $s(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function X9(i){return new W9(i)}(e)}bypassSecurityTrustStyle(e){return function K9(i){return new j9(i)}(e)}bypassSecurityTrustScript(e){return function Z9(i){return new $9(i)}(e)}bypassSecurityTrustUrl(e){return function Q9(i){return new q9(i)}(e)}bypassSecurityTrustResourceUrl(e){return function J9(i){return new Y9(i)}(e)}}return i.\u0275fac=function(e){return new(e||i)(J(Lt))},i.\u0275prov=be({token:i,factory:function(e){let n=null;return n=e?new e:function bte(i){return new ON(i.get(Lt))}(J(Ui)),n},providedIn:"root"}),i})();class In extends Dt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}var Ao=(()=>{return(i=Ao||(Ao={})).insulated="insulated",i.orientation="orientation",i.baseDimension="base-dimension",i.extensionToNorth="extension-north",i.extensionToSouth="extension-south",i.extensionToWest="extension-west",i.extensionToEast="extension-east",i.halfCircle="half-circle",i.bendPoint="bend-point",i.roofBoth="roof-both",i.roofCircle="roof-circle",i.roof70="roof-70",i.roofWalls="roof-walls",i.efficiency="efficiency",i.greyOut="greyOut",i.amountSteps="amount-steps",i.viewlines="viewlines",i.warmWaterBuffer="warm-water-buffer",i.iJoists="i-joits",i.dampOpen="damp-open",i.airTight="air-tight",i.pipeLayer="pipe-layer",i.woodFiberPlate="wood-fiber-plate",Ao;var i})(),Je=(()=>{return(i=Je||(Je={})).welcome="welcome",i.passiv="passiv",i.basics="basics",i.extensions="extensions",i.tower="tower",i.end="end",i.roofBasics="roof-basics",i.roofCircle="roof-circle",i.roofIntermezzo="roof-intermezzo",i.roof70="roof70",i.roofChoice="roof-choice",i.roofEdge="roof-edge",i.stairStart="stair-start",i.stairBasic="stair-basic",i.stairCheck="stair-check",i.stairPlan="stair-plan",i.facadeStart="facade-start",i.facadeWindow="facade-window",i.facadeBrick="facade-Brick",i.facadeDoor="facade-Door",i.contructionFoundation="contruction-foundation",i.contructionCrawlerSpace="contruction-crawler-space",i.contructionRoof="contruction-roof",i.contructionFloor="contruction-floor",i.contructionWall="contruction-wall",i.contructionWallFinish="contruction-wall-finish",i.instaltionDrinkWater="instaltions-drink-water",i.instaltionGreyWater="instaltions-grey-water",i.instaltionHeating="instaltions-heating",i.instaltionElectricity="instaltions-electricity",i.instaltionVentilation="instaltions-ventilation",i.instaltionSmartHome="instaltions-smartHome",i.wiredPower="wired-power",i.wiredEthernet="wired-ethernet",i.wiredSafety="wired-safety",i.wiredExtra="wired-extra",i.wiredLight="wired-light",Je;var i})(),Zs=(()=>{return(i=Zs||(Zs={})).doors="doors",i.stats="stats",i.theoreticalWalls="theoreticalWalls",i.grey="grey",i.measure="measure",i.decoration="decoration",i.stramien="stramien",i.towerFootprint="towerFootprint",i.grid="grid",Zs;var i})(),ee=(()=>{return(i=ee||(ee={})).top="top",i.ground="ground",i.ceiling="ceiling",i.all="all",i.none="none",ee;var i})(),Of=(()=>{return(i=Of||(Of={})).left="left",i.right="right",Of;var i})(),vr=(()=>{return(i=vr||(vr={})).plan="plan",i.cross="cross",i.stair="stair",i.window="window",i.none="none",vr;var i})(),Te=(()=>{return(i=Te||(Te={})).socket="socket",i.perilex="perilex",i.pir="pir",i.poe="poe",i.ethernet="ethernet",i.light="light",i.lightSwitch="light-switch",i.dimmer="dimmer",i.blinds="blinds",i.temperature="temperature",i.alarm="alarm",i.dlc="dlc",i.ventIn="vent-in",i.ventOut="vent-out",i.smoke="smoke",i.wifi="wifi",i.camera="camera",Te;var i})(),ha=(()=>{return(i=ha||(ha={})).OutsidePOE="OutsidePOE",i.SharedEthernet="SharedEthernet",ha;var i})();let T0=(()=>{class i{constructor(e,n){this.document=e,this.platformId=n,this.documentIsAccessible=Vc(this.platformId)}static getCookieRegExp(e){const n=e.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+n+"|;\\s*"+n+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(e){try{return decodeURIComponent(e)}catch(n){return e}}check(e){return!!this.documentIsAccessible&&(e=encodeURIComponent(e),i.getCookieRegExp(e).test(this.document.cookie))}get(e){if(this.documentIsAccessible&&this.check(e)){e=encodeURIComponent(e);const r=i.getCookieRegExp(e).exec(this.document.cookie);return r[1]?i.safeDecodeURIComponent(r[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const e={},n=this.document;return n.cookie&&""!==n.cookie&&n.cookie.split(";").forEach(r=>{const[s,o]=r.split("=");e[i.safeDecodeURIComponent(s.replace(/^ /,""))]=i.safeDecodeURIComponent(o)}),e}set(e,n,r,s,o,a,l){if(!this.documentIsAccessible)return;if("number"==typeof r||r instanceof Date||s||o||a||l)return void this.set(e,n,{expires:r,path:s,domain:o,secure:a,sameSite:l||"Lax"});let c=encodeURIComponent(e)+"="+encodeURIComponent(n)+";";const u=r||{};u.expires&&(c+="number"==typeof u.expires?"expires="+new Date((new Date).getTime()+1e3*u.expires*60*60*24).toUTCString()+";":"expires="+u.expires.toUTCString()+";"),u.path&&(c+="path="+u.path+";"),u.domain&&(c+="domain="+u.domain+";"),!1===u.secure&&"None"===u.sameSite&&(u.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${e} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),u.secure&&(c+="secure;"),u.sameSite||(u.sameSite="Lax"),c+="sameSite="+u.sameSite+";",this.document.cookie=c}delete(e,n,r,s,o="Lax"){if(!this.documentIsAccessible)return;const a=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(e,"",{expires:a,path:n,domain:r,secure:s,sameSite:o})}deleteAll(e,n,r,s="Lax"){if(!this.documentIsAccessible)return;const o=this.getAll();for(const a in o)o.hasOwnProperty(a)&&this.delete(a,e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)(J(Lt),J(Xs))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Wi=(()=>{class i{constructor(e){this.cookieService=e,this.darkMode=!1,this.title="Lindelund",this.update$=new Dt,this.tag$=new In(void 0),this.graphic$=new In(void 0),this.states$=new In([]),this.popupActive$=new In(!1),this.fullscreen$=new In(!0),this.svgTransform$=new In(void 0),this.floor$=new In(ee.ground),this.scroll$=new In({scroll:0,percentage:0,section:void 0,graphicSide:void 0,graphic:void 0}),this.getCookies()}setStates(e,n,r){const s=this.states$.value;let o;const a=()=>s.includes(e),l=()=>{o=a()?s:[...s,e]};r&&this.cookieService.get("states").includes(e)||(!0===n?l():!1===n||a()?o=s.filter(u=>u!==e):l(),this.states$.next(o),this.cookieService.set("states",o))}setTransformCookie(e,n){this.svgTransform$.next({[n]:e}),this.cookieService.set("svgTransform",JSON.stringify(this.svgTransform$.value))}getCookies(){let e=this.cookieService.get("floor");""===e&&(e=ee.ground),this.floor$.next(e);let n=this.cookieService.get("fullscreen");n=""!==n&&"true"===n,this.fullscreen$.next(n);let r=this.cookieService.get("svgTransform");(""===r||!1===n)&&(r="{}"),this.svgTransform$.next(JSON.parse(r));let s=this.cookieService.get("darkMode");this.setDarkMode(""===s?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches:"true"===s);const a=this.cookieService.get("states").split(",");this.states$.next(a)}setFloor(e){let n;void 0!==e?n=e:(this.floor$.value===ee.ground&&(n=ee.top),this.floor$.value===ee.top&&(n=ee.ground)),this.floor$.next(n),this.cookieService.set("floor",n),this.update$.next()}setTag(e){this.tag$.next(e),this.update$.next()}setDarkMode(e,n=!1){document.body.classList.remove("light"),document.body.classList.remove("dark"),this.darkMode=void 0!==e?e:!this.darkMode,this.darkMode?document.body.classList.add("dark"):document.body.classList.add("light"),n&&this.cookieService.set("darkMode",`${this.darkMode}`,.1)}}return i.\u0275fac=function(e){return new(e||i)(J(T0))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Nt(i){return null!=i&&"false"!=`${i}`}function Qs(i,t=0){return function xte(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):t}function PN(i){return Array.isArray(i)?i:[i]}function er(i){return null==i?"":"string"==typeof i?i:`${i}px`}function ld(i){return i instanceof Ve?i.nativeElement:i}function _t(...i){return Cr(i,Bm(i))}const{isArray:wte}=Array;function WE(i){return en(t=>function Mte(i,t){return wte(t)?i(...t):i(t)}(i,t))}const Cte=["addListener","removeListener"],Ste=["addEventListener","removeEventListener"],Ete=["on","off"];function Og(i,t,e,n){if(cn(e)&&(n=e,e=void 0),n)return Og(i,t,e).pipe(WE(n));const[r,s]=function Ate(i){return cn(i.addEventListener)&&cn(i.removeEventListener)}(i)?Ste.map(o=>a=>i[o](t,a,e)):function Tte(i){return cn(i.addListener)&&cn(i.removeListener)}(i)?Cte.map(LN(i,t)):function Dte(i){return cn(i.on)&&cn(i.off)}(i)?Ete.map(LN(i,t)):[];if(!r&&$M(i))return hr(o=>Og(o,t,e))(us(i));if(!r)throw new TypeError("Invalid event target");return new Mn(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function LN(i,t){return e=>n=>i[e](t,n)}class Rte extends Jn{constructor(t,e){super()}schedule(t,e=0){return this}}const D0={setInterval(i,t,...e){const{delegate:n}=D0;return(null==n?void 0:n.setInterval)?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=D0;return((null==t?void 0:t.clearInterval)||clearInterval)(i)},delegate:void 0};class jE extends Rte{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return D0.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;D0.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Xo(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const Pg={schedule(i){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:n}=Pg;n&&(t=n.requestAnimationFrame,e=n.cancelAnimationFrame);const r=t(s=>{e=void 0,i(s)});return new Jn(()=>null==e?void 0:e(r))},requestAnimationFrame(...i){const{delegate:t}=Pg;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:t}=Pg;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...i)},delegate:void 0},FN={now:()=>(FN.delegate||Date).now(),delegate:void 0};class Lg{constructor(t,e=Lg.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}Lg.now=FN.now;class $E extends Lg{constructor(t,e=Lg.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}new class kte extends $E{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class Ite extends jE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=Pg.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,n=0){if(null!=n&&n>0||null==n&&this.delay>0)return super.recycleAsyncId(t,e,n);t.actions.some(r=>r.id===e)||(Pg.cancelAnimationFrame(e),t._scheduled=void 0)}});let qE,Pte=1;const A0={};function NN(i){return i in A0&&(delete A0[i],!0)}const Lte={setImmediate(i){const t=Pte++;return A0[t]=!0,qE||(qE=Promise.resolve()),qE.then(()=>NN(t)&&i()),t},clearImmediate(i){NN(i)}},{setImmediate:Fte,clearImmediate:Nte}=Lte,R0={setImmediate(...i){const{delegate:t}=R0;return((null==t?void 0:t.setImmediate)||Fte)(...i)},clearImmediate(i){const{delegate:t}=R0;return((null==t?void 0:t.clearImmediate)||Nte)(i)},delegate:void 0},I0=(new class Vte extends $E{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class Bte extends jE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=R0.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,n=0){if(null!=n&&n>0||null==n&&this.delay>0)return super.recycleAsyncId(t,e,n);t.actions.some(r=>r.id===e)||(R0.clearImmediate(e),t._scheduled=void 0)}}),new $E(jE)),Ute=I0;function BN(i=0,t,e=Ute){let n=-1;return null!=t&&(vk(t)?e=t:n=t),new Mn(r=>{let s=function Gte(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}function VN(i,t=I0){return function zte(i){return Ti((t,e)=>{let n=!1,r=null,s=null,o=!1;const a=()=>{if(null==s||s.unsubscribe(),s=null,n){n=!1;const c=r;r=null,e.next(c)}o&&e.complete()},l=()=>{s=null,o&&e.complete()};t.subscribe(di(e,c=>{n=!0,r=c,s||us(i(c)).subscribe(s=di(e,a,l))},()=>{o=!0,(!n||!s||s.closed)&&e.complete()}))})}(()=>BN(i,t))}function pi(i,t){return Ti((e,n)=>{let r=0;e.subscribe(di(n,s=>i.call(t,s,r++)&&n.next(s)))})}function kn(i){return Ti((t,e)=>{us(i).subscribe(di(e,()=>e.complete(),Ec)),!e.closed&&t.subscribe(e)})}let YE;try{YE="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(i){YE=!1}let Fg,k0,cd,XE,Es=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Vc(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!YE)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(e){return new(e||i)(J(Xs))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Uc(i){return function Wte(){if(null==Fg&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Fg=!0}))}finally{Fg=Fg||!1}return Fg}()?i:!!i.capture}function UN(){if(null==cd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return cd=!1,cd;if("scrollBehavior"in document.documentElement.style)cd=!0;else{const i=Element.prototype.scrollTo;cd=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return cd}function Ng(){if("object"!=typeof document||!document)return 0;if(null==k0){const i=document.createElement("div"),t=i.style;i.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),n=e.style;n.width="2px",n.height="1px",i.appendChild(e),document.body.appendChild(i),k0=0,0===i.scrollLeft&&(i.scrollLeft=1,k0=0===i.scrollLeft?1:2),i.remove()}return k0}function zN(i){if(function jte(){if(null==XE){const i="undefined"!=typeof document?document.head:null;XE=!(!i||!i.createShadowRoot&&!i.attachShadow)}return XE}()){const t=i.getRootNode?i.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function KE(){let i="undefined"!=typeof document&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const t=i.shadowRoot.activeElement;if(t===i)break;i=t}return i}function ud(i){return i.composedPath?i.composedPath()[0]:i.target}function ZE(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const $te=new ve("cdk-dir-doc",{providedIn:"root",factory:function qte(){return Jh(Lt)}}),Yte=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Il=(()=>{class i{constructor(e){if(this.value="ltr",this.change=new Wt,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function Xte(i){const t=(null==i?void 0:i.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?Yte.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(e){return new(e||i)(J($te,8))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),dd=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({}),i})(),O0=(()=>{class i{constructor(e,n,r){this._ngZone=e,this._platform=n,this._scrolled=new Dt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Mn(n=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(VN(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):_t()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){const r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(pi(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let r=ld(n),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Og(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(e){return new(e||i)(J(Ot),J(Es),J(Lt,8))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Bg=(()=>{class i{constructor(e,n,r,s){this.elementRef=e,this.scrollDispatcher=n,this.ngZone=r,this.dir=s,this._destroyed=new Dt,this._elementScrolled=new Mn(o=>this.ngZone.runOutsideAngular(()=>Og(this.elementRef.nativeElement,"scroll").pipe(kn(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const n=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=n.scrollHeight-n.clientHeight-e.bottom),r&&0!=Ng()?(null!=e.left&&(e.right=n.scrollWidth-n.clientWidth-e.left),2==Ng()?e.left=e.right:1==Ng()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=n.scrollWidth-n.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const n=this.elementRef.nativeElement;UN()?n.scrollTo(e):(null!=e.top&&(n.scrollTop=e.top),null!=e.left&&(n.scrollLeft=e.left))}measureScrollOffset(e){const n="left",r="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==e?e=o?r:n:"end"==e&&(e=o?n:r),o&&2==Ng()?e==n?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==Ng()?e==n?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==n?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(O0),C(Ot),C(Il,8))},i.\u0275dir=ae({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),i})(),Vg=(()=>{class i{constructor(e,n,r){this._platform=e,this._change=new Dt,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,n=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(VN(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(e){return new(e||i)(J(Es),J(Ot),J(Lt,8))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),hd=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({}),i})(),P0=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[dd,hd],dd,hd]}),i})();function Lf(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function Ii(i,t,e){const n=cn(i)||t||e?{next:i,error:t,complete:e}:i;return n?Ti((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let a=!0;r.subscribe(di(s,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),s.next(l)},()=>{var l;a=!1,null===(l=n.complete)||void 0===l||l.call(n),s.complete()},l=>{var c;a=!1,null===(c=n.error)||void 0===c||c.call(n,l),s.error(l)},()=>{var l,c;a&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):cs}function eT(i,t=I0){return Ti((e,n)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,n.next(c)}};function l(){const c=o+i,u=t.now();if(u<c)return r=this.schedule(void 0,c-u),void n.add(r);a()}e.subscribe(di(n,c=>{s=c,o=t.now(),r||(r=t.schedule(l,i),n.add(r))},()=>{a(),n.complete()},void 0,()=>{s=r=null}))})}function Ts(i){return i<=0?()=>yl:Ti((t,e)=>{let n=0;t.subscribe(di(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function KN(i,t=cs){return i=null!=i?i:hne,Ti((e,n)=>{let r,s=!0;e.subscribe(di(n,o=>{const a=t(o);(s||!i(r,a))&&(s=!1,r=a,n.next(o))}))})}function hne(i,t){return i===t}let ZN=(()=>{class i{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),fne=(()=>{class i{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,n)=>this._cleanupObserver(n))}observe(e){const n=ld(e);return new Mn(r=>{const o=this._observeElement(n).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(n)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const n=new Dt,r=this._mutationObserverFactory.create(s=>n.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:n,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:n,stream:r}=this._observedElements.get(e);n&&n.disconnect(),r.complete(),this._observedElements.delete(e)}}}return i.\u0275fac=function(e){return new(e||i)(J(ZN))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),QN=(()=>{class i{constructor(e,n,r){this._contentObserver=e,this._elementRef=n,this._ngZone=r,this.event=new Wt,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Nt(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Qs(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(eT(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(C(fne),C(Ve),C(Ot))},i.\u0275dir=ae({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),Hg=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({providers:[ZN]}),i})(),tT=(()=>{class i{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function yne(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const n=function vne(i){try{return i.frameElement}catch(t){return null}}(function Tne(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(e));if(n&&(-1===nB(n)||!this.isVisible(n)))return!1;let r=e.nodeName.toLowerCase(),s=nB(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function Sne(i){let t=i.nodeName.toLowerCase(),e="input"===t&&i.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,n){return function Ene(i){return!function xne(i){return function Mne(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function bne(i){let t=i.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(i)||function wne(i){return function Cne(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||tB(i))}(e)&&!this.isDisabled(e)&&((null==n?void 0:n.ignoreVisibility)||this.isVisible(e))}}return i.\u0275fac=function(e){return new(e||i)(J(Es))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function tB(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let t=i.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function nB(i){if(!tB(i))return null;const t=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class Dne{constructor(t,e,n,r,s=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return null==n||n.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=0;n<e.length;n++){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=e.length-1;n>=0;n--){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Ts(1)).subscribe(t)}}let iB=(()=>{class i{constructor(e,n,r){this._checker=e,this._ngZone=n,this._document=r}create(e,n=!1){return new Dne(e,this._checker,this._ngZone,this._document,n)}}return i.\u0275fac=function(e){return new(e||i)(J(tT),J(Ot),J(Lt))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function rB(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function sB(i){const t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const Ane=new ve("cdk-input-modality-detector-options"),Rne={ignoreKeys:[18,17,224,91,16]},Ff=Uc({passive:!0,capture:!0});let Ine=(()=>{class i{constructor(e,n,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new In(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=ud(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(rB(o)?"keyboard":"mouse"),this._mostRecentTarget=ud(o))},this._onTouchstart=o=>{sB(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ud(o))},this._options=Object.assign(Object.assign({},Rne),s),this.modalityDetected=this._modality.pipe(function dne(i){return pi((t,e)=>i<=e)}(1)),this.modalityChanged=this.modalityDetected.pipe(KN()),e.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Ff),r.addEventListener("mousedown",this._onMousedown,Ff),r.addEventListener("touchstart",this._onTouchstart,Ff)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ff),document.removeEventListener("mousedown",this._onMousedown,Ff),document.removeEventListener("touchstart",this._onTouchstart,Ff))}}return i.\u0275fac=function(e){return new(e||i)(J(Es),J(Ot),J(Lt),J(Ane,8))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const One=new ve("cdk-focus-monitor-default-options"),L0=Uc({passive:!0,capture:!0});let kl=(()=>{class i{constructor(e,n,r,s,o){this._ngZone=e,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Dt,this._rootNodeFocusAndBlurListener=a=>{const l=ud(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let u=l;u;u=u.parentElement)c.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(e,n=!1){const r=ld(e);if(!this._platform.isBrowser||1!==r.nodeType)return _t(null);const s=zN(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;const a={checkChildren:n,subject:new Dt,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const n=ld(e),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(e,n,r){const s=ld(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused","touch"===n),e.classList.toggle("cdk-keyboard-focused","keyboard"===n),e.classList.toggle("cdk-mouse-focused","mouse"===n),e.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,n){const r=this._elementInfo.get(n),s=ud(e);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(e,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(r.subject,null))}_emitOrigin(e,n){this._ngZone.run(()=>e.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,L0),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,L0)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(kn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,L0),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,L0),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,r){this._setClasses(e,n),this._emitOrigin(r.subject,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){const n=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&n.push([s,r])}),n}}return i.\u0275fac=function(e){return new(e||i)(J(Ot),J(Es),J(Ine),J(Lt,8),J(One,8))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const aB="cdk-high-contrast-black-on-white",lB="cdk-high-contrast-white-on-black",nT="cdk-high-contrast-active";let cB=(()=>{class i{constructor(e,n){this._platform=e,this._document=n}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(nT),e.remove(aB),e.remove(lB),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?(e.add(nT),e.add(aB)):2===n&&(e.add(nT),e.add(lB))}}}return i.\u0275fac=function(e){return new(e||i)(J(Es),J(Lt))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),uB=(()=>{class i{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(e){return new(e||i)(J(cB))},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[Hg]]}),i})();function iT(...i){return function Pne(){return Nm(1)}()(Cr(i,Bm(i)))}function Nf(...i){const t=Bm(i);return Ti((e,n)=>{(t?iT(i,e,t):iT(i,e)).subscribe(n)})}class rT{}const Ol="*";function Kr(i,t){return{type:7,name:i,definitions:t,options:{}}}function Yn(i,t=null){return{type:4,styles:t,timings:i}}function dB(i,t=null){return{type:3,steps:i,options:t}}function hB(i,t=null){return{type:2,steps:i,options:t}}function bt(i){return{type:6,styles:i,offset:null}}function Xn(i,t,e){return{type:0,name:i,styles:t,options:e}}function ri(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}function sT(i=null){return{type:9,options:i}}function oT(i,t,e=null){return{type:11,selector:i,animation:t,options:e}}function fB(i){Promise.resolve(null).then(i)}class Ug{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){fB(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class pB{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const s=this.players.length;0==s?fB(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}const un=!1;function mB(i){return new et(3e3,un)}function gie(){return"undefined"!=typeof window&&void 0!==window.document}function lT(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function zc(i){switch(i.length){case 0:return new Ug;case 1:return i[0];default:return new pB(i)}}function gB(i,t,e,n,r={},s={}){const o=[],a=[];let l=-1,c=null;if(n.forEach(u=>{const d=u.offset,h=d==l,f=h&&c||{};Object.keys(u).forEach(p=>{let m=p,g=u[p];if("offset"!==p)switch(m=t.normalizePropertyName(m,o),g){case"!":g=r[p];break;case Ol:g=s[p];break;default:g=t.normalizeStyleValue(p,m,g,o)}f[m]=g}),h||a.push(f),c=f,l=d}),o.length)throw function sie(i){return new et(3502,un)}();return a}function cT(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&uT(e,"start",i)));break;case"done":i.onDone(()=>n(e&&uT(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&uT(e,"destroy",i)))}}function uT(i,t,e){const n=e.totalTime,s=dT(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,null==n?i.totalTime:n,!!e.disabled),o=i._data;return null!=o&&(s._data=o),s}function dT(i,t,e,n,r="",s=0,o){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function Js(i,t,e){let n;return i instanceof Map?(n=i.get(t),n||i.set(t,n=e)):(n=i[t],n||(n=i[t]=e)),n}function _B(i){const t=i.indexOf(":");return[i.substring(1,t),i.substr(t+1)]}let hT=(i,t)=>!1,vB=(i,t,e)=>[],yB=null;function fT(i){const t=i.parentNode||i.host;return t===yB?null:t}(lT()||"undefined"!=typeof Element)&&(gie()?(yB=(()=>document.documentElement)(),hT=(i,t)=>{for(;t;){if(t===i)return!0;t=fT(t)}return!1}):hT=(i,t)=>i.contains(t),vB=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const n=i.querySelector(t);return n?[n]:[]});let fd=null,bB=!1;function xB(i){fd||(fd=function vie(){return"undefined"!=typeof document?document.body:null}()||{},bB=!!fd.style&&"WebkitAppearance"in fd.style);let t=!0;return fd.style&&!function _ie(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in fd.style,!t&&bB&&(t="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in fd.style)),t}const wB=hT,MB=vB;let CB=(()=>{class i{validateStyleProperty(e){return xB(e)}matchesElement(e,n){return!1}containsElement(e,n){return wB(e,n)}getParentElement(e){return fT(e)}query(e,n,r){return MB(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,s,o,a=[],l){return new Ug(r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})(),pT=(()=>{class i{}return i.NOOP=new CB,i})();const mT="ng-enter",N0="ng-leave",B0="ng-trigger",V0=".ng-trigger",EB="ng-animating",gT=".ng-animating";function pd(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:_T(parseFloat(t[1]),t[2])}function _T(i,t){return"s"===t?1e3*i:i}function H0(i,t,e){return i.hasOwnProperty("duration")?i:function xie(i,t,e){let r,s=0,o="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(mB()),{duration:0,delay:0,easing:""};r=_T(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=_T(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=i;if(!e){let a=!1,l=t.length;r<0&&(t.push(function Nne(){return new et(3100,un)}()),a=!0),s<0&&(t.push(function Bne(){return new et(3101,un)}()),a=!0),a&&t.splice(l,0,mB())}return{duration:r,delay:s,easing:o}}(i,t,e)}function Bf(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function Gc(i,t,e={}){if(t)for(let n in i)e[n]=i[n];else Bf(i,e);return e}function DB(i,t,e){return e?t+":"+e+";":""}function AB(i){let t="";for(let e=0;e<i.style.length;e++){const n=i.style.item(e);t+=DB(0,n,i.style.getPropertyValue(n))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=DB(0,Cie(e),i.style[e]));i.setAttribute("style",t)}function Ya(i,t,e){i.style&&(Object.keys(t).forEach(n=>{const r=yT(n);e&&!e.hasOwnProperty(n)&&(e[n]=i.style[r]),i.style[r]=t[n]}),lT()&&AB(i))}function md(i,t){i.style&&(Object.keys(t).forEach(e=>{const n=yT(e);i.style[n]=""}),lT()&&AB(i))}function zg(i){return Array.isArray(i)?1==i.length?i[0]:hB(i):i}const vT=new RegExp("{{\\s*(.+?)\\s*}}","g");function RB(i){let t=[];if("string"==typeof i){let e;for(;e=vT.exec(i);)t.push(e[1]);vT.lastIndex=0}return t}function U0(i,t,e){const n=i.toString(),r=n.replace(vT,(s,o)=>{let a=t[o];return t.hasOwnProperty(o)||(e.push(function Hne(i){return new et(3003,un)}()),a=""),a.toString()});return r==n?i:r}function z0(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const Mie=/-+([a-z0-9])/g;function yT(i){return i.replace(Mie,(...t)=>t[1].toUpperCase())}function Cie(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function eo(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw function Une(i){return new et(3004,un)}()}}function IB(i,t){return window.getComputedStyle(i)[t]}function Rie(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function Iie(i,t,e){if(":"==i[0]){const l=function kie(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(function tie(i){return new et(3016,un)}()),"* => *"}}(i,e);if("function"==typeof l)return void t.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function eie(i){return new et(3015,un)}()),t;const r=n[1],s=n[2],o=n[3];t.push(kB(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&t.push(kB(o,r))}(n,e,t)):e.push(i),e}const $0=new Set(["true","1"]),q0=new Set(["false","0"]);function kB(i,t){const e=$0.has(i)||q0.has(i),n=$0.has(t)||q0.has(t);return(r,s)=>{let o="*"==i||i==r,a="*"==t||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?$0.has(i):q0.has(i)),!a&&n&&"boolean"==typeof s&&(a=s?$0.has(t):q0.has(t)),o&&a}}const Oie=new RegExp("s*:selfs*,?","g");function bT(i,t,e,n){return new Pie(i).build(t,e,n)}class Pie{constructor(t){this._driver=t}build(t,e,n){const r=new Nie(e);this._resetContextStyleTimingState(r);const s=eo(this,zg(t),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function Gne(){return new et(3006,un)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,e))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,e);n+=l.queryCount,r+=l.depCount,o.push(l)}else e.errors.push(function Wne(){return new et(3007,un)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(a=>{if(Y0(a)){const l=a;Object.keys(l).forEach(c=>{RB(l[c]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size&&(z0(s.values()),e.errors.push(function jne(i,t){return new et(3008,un)}()))}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=eo(this,zg(t.animation),e);return{type:1,matchers:Rie(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:gd(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>eo(this,n,e)),options:gd(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=n;const a=eo(this,o,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:3,steps:s,options:gd(t.options)}}visitAnimate(t,e){const n=function Vie(i,t){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return xT(H0(i,t).duration,0,"");const e=i;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=xT(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=H0(e,t);return xT(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let r,s=t.styles?t.styles:bt({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;const c={};n.easing&&(c.easing=n.easing),o=bt(c)}e.currentTime+=n.duration+n.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(o=>{"string"==typeof o?o==Ol?n.push(o):e.errors.push(function $ne(i){return new et(3002,un)}()):n.push(o)}):n.push(t.styles);let r=!1,s=null;return n.forEach(o=>{if(Y0(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!r)for(let c in a)if(a[c].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:s,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return delete o[a],void e.unsupportedCSSPropertiesFound.add(a);const l=e.collectedStyles[e.currentQuerySelector],c=l[a];let u=!0;c&&(s!=r&&s>=c.startTime&&r<=c.endTime&&(e.errors.push(function qne(i,t,e,n,r){return new et(3010,un)}()),u=!1),s=c.startTime),u&&(l[a]={startTime:s,endTime:r}),e.options&&function wie(i,t,e){const n=t.params||{},r=RB(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||e.push(function Vne(i){return new et(3001,un)}())})}(o[a],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function Yne(){return new et(3011,un)}()),n;let s=0;const o=[];let a=!1,l=!1,c=0;const u=t.steps.map(_=>{const v=this._makeStyleAst(_,e);let y=null!=v.offset?v.offset:function Bie(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(Y0(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(Y0(i)&&i.hasOwnProperty("offset")){const e=i;t=parseFloat(e.offset),delete e.offset}return t}(v.styles),b=0;return null!=y&&(s++,b=v.offset=y),l=l||b<0||b>1,a=a||b<c,c=b,o.push(b),v});l&&e.errors.push(function Xne(){return new et(3012,un)}()),a&&e.errors.push(function Kne(){return new et(3200,un)}());const d=t.steps.length;let h=0;s>0&&s<d?e.errors.push(function Zne(){return new et(3202,un)}()):0==s&&(h=1/(d-1));const f=d-1,p=e.currentTime,m=e.currentAnimateTimings,g=m.duration;return u.forEach((_,v)=>{const y=h>0?v==f?1:h*v:o[v],b=y*g;e.currentTime=p+m.delay+b,m.duration=b,this._validateStyleAst(_,e),_.offset=y,n.styles.push(_)}),n}visitReference(t,e){return{type:8,animation:eo(this,zg(t.animation),e),options:gd(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:gd(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:gd(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function Lie(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(Oie,"")),i=i.replace(/@\*/g,V0).replace(/@\w+/g,e=>V0+"-"+e.substr(1)).replace(/:animating/g,gT),[i,t]}(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,Js(e.collectedStyles,e.currentQuerySelector,{});const a=eo(this,zg(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:gd(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function Qne(){return new et(3013,un)}());const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:H0(t.timings,e.errors,!0);return{type:12,animation:eo(this,zg(t.animation),e),timings:n,options:null}}}class Nie{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Y0(i){return!Array.isArray(i)&&"object"==typeof i}function gd(i){return i?(i=Bf(i)).params&&(i.params=function Fie(i){return i?Bf(i):null}(i.params)):i={},i}function xT(i,t,e){return{duration:i,delay:t,easing:e}}function wT(i,t,e,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class X0{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const zie=new RegExp(":enter","g"),Wie=new RegExp(":leave","g");function MT(i,t,e,n,r,s={},o={},a,l,c=[]){return(new jie).buildKeyframes(i,t,e,n,r,s,o,a,l,c)}class jie{buildKeyframes(t,e,n,r,s,o,a,l,c,u=[]){c=c||new X0;const d=new CT(t,e,c,r,s,u,[]);d.options=l,d.currentTimeline.setStyles([o],null,d.errors,l),eo(this,n,d);const h=d.timelines.filter(f=>f.containsAnimation());if(Object.keys(a).length){let f;for(let p=h.length-1;p>=0;p--){const m=h[p];if(m.element===e){f=m;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[wT(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime;const o=null!=n.duration?pd(n.duration):null,a=null!=n.delay?pd(n.delay):null;return 0!==o&&t.forEach(l=>{const c=e.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),eo(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=K0);const o=pd(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>eo(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?pd(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);s&&a.delayNextStep(s),eo(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return H0(e.params?U0(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,a=e.createSubContext().currentTimeline;a.easing=n.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?pd(r.delay):0;s&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=K0);let o=n;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;const d=e.createSubContext(t.options,c);s&&d.delayNextStep(s),c===e.element&&(l=d.currentTimeline),eo(this,t.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const u=e.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;eo(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-d+(r.startTime-n.currentTimeline.startTime)}}const K0={};class CT{constructor(t,e,n,r,s,o,a,l){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=K0,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Z0(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=pd(n.duration)),null!=n.delay&&(r.delay=pd(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=U0(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,s=new CT(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=K0,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},s=new $ie(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,o){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(zie,"."+this._enterClassName)).replace(Wie,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=n);0!==n&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!s&&0==a.length&&o.push(function Jne(i){return new et(3014,un)}()),a}}class Z0{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Z0(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Ol,this._currentKeyframe[e]=Ol}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const s=r&&r.params||{},o=function qie(i,t){const e={};let n;return i.forEach(r=>{"*"===r?(n=n||Object.keys(t),n.forEach(s=>{e[s]=Ol})):Gc(r,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=U0(o[a],s,n);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:Ol),this._updateStyle(a,l)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(n=>{this._currentKeyframe[n]=t[n]}),Object.keys(this._localTimelineStyles).forEach(n=>{this._currentKeyframe.hasOwnProperty(n)||(this._currentKeyframe[n]=this._localTimelineStyles[n])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Gc(a,!0);Object.keys(c).forEach(u=>{const d=c[u];"!"==d?t.add(u):d==Ol&&e.add(u)}),n||(c.offset=l/this.duration),r.push(c)});const s=t.size?z0(t.values()):[],o=e.size?z0(e.values()):[];if(n){const a=r[0],l=Bf(a);a.offset=0,l.offset=1,r=[a,l]}return wT(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class $ie extends Z0{constructor(t,e,n,r,s,o,a=!1){super(t,e,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=n+e,a=e/o,l=Gc(t[0],!1);l.offset=0,s.push(l);const c=Gc(t[0],!1);c.offset=LB(a),s.push(c);const u=t.length-1;for(let d=1;d<=u;d++){let h=Gc(t[d],!1);h.offset=LB((e+h.offset*n)/o),s.push(h)}n=o,e=0,r="",t=s}return wT(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function LB(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class ST{}class Yie extends ST{normalizePropertyName(t,e){return yT(t)}normalizeStyleValue(t,e,n,r){let s="";const o=n.toString().trim();if(Xie[e]&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function zne(i,t){return new et(3005,un)}())}return o+s}}const Xie=(()=>function Kie(i){const t={};return i.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function FB(i,t,e,n,r,s,o,a,l,c,u,d,h){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const ET={};class NB{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function Zie(i,t,e,n,r){return i.some(s=>s(t,e,n,r))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],s=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return s?s.buildStyles(e,n):o}build(t,e,n,r,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||ET,p=this.buildStyles(n,a&&a.params||ET,d),m=l&&l.params||ET,g=this.buildStyles(r,m,d),_=new Set,v=new Map,y=new Map,b="void"===r,x={params:Object.assign(Object.assign({},h),m)},w=u?[]:MT(t,e,this.ast.animation,s,o,p,g,x,c,d);let E=0;if(w.forEach(F=>{E=Math.max(F.duration+F.delay,E)}),d.length)return FB(e,this._triggerName,n,r,b,p,g,[],[],v,y,E,d);w.forEach(F=>{const N=F.element,S=Js(v,N,{});F.preStyleProps.forEach(Y=>S[Y]=!0);const L=Js(y,N,{});F.postStyleProps.forEach(Y=>L[Y]=!0),N!==e&&_.add(N)});const R=z0(_.values());return FB(e,this._triggerName,n,r,b,p,g,w,R,v,y,E)}}class Qie{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n={},r=Bf(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!=o&&(r[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=U0(l,r,e));const c=this.normalizer.normalizePropertyName(a,e);l=this.normalizer.normalizeStyleValue(a,c,l,e),n[c]=l})}}),n}}class ere{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states={},e.states.forEach(r=>{this.states[r.name]=new Qie(r.style,r.options&&r.options.params||{},n)}),BB(this.states,"true","1"),BB(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new NB(t,r,this.states))}),this.fallbackTransition=function tre(i,t,e){return new NB(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(o=>o.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function BB(i,t,e){i.hasOwnProperty(t)?i.hasOwnProperty(e)||(i[e]=i[t]):i.hasOwnProperty(e)&&(i[t]=i[e])}const nre=new X0;class ire{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],s=bT(this._driver,e,n,[]);if(n.length)throw function oie(i){return new et(3503,un)}();this._animations[t]=s}_buildPlayer(t,e,n){const r=t.element,s=gB(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],s=this._animations[t];let o;const a=new Map;if(s?(o=MT(this._driver,e,s,mT,N0,{},{},n,nre,r),o.forEach(u=>{const d=Js(a,u.element,{});u.postStyleProps.forEach(h=>d[h]=null)})):(r.push(function aie(){return new et(3300,un)}()),o=[]),r.length)throw function lie(i){return new et(3504,un)}();a.forEach((u,d)=>{Object.keys(u).forEach(h=>{u[h]=this._driver.computeStyle(d,h,Ol)})});const c=zc(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,{},d)}));return this._playersById[t]=c,c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw function cie(i){return new et(3301,un)}();return e}listen(t,e,n,r){const s=dT(e,"","","");return cT(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const VB="ng-animate-queued",TT="ng-animate-disabled",lre=[],HB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},cre={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ro="__ng_removed";class DT{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function fre(i){return null!=i?i:null}(n?t.value:t),n){const s=Bf(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const Gg="void",AT=new DT(Gg);class ure{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Io(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw function uie(i,t){return new et(3302,un)}();if(null==n||0==n.length)throw function die(i){return new et(3303,un)}();if(!function pre(i){return"start"==i||"done"==i}(n))throw function hie(i,t){return new et(3400,un)}();const s=Js(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=Js(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Io(t,B0),Io(t,B0+"-"+e),a[e]=AT),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw function fie(i){return new et(3401,un)}();return e}trigger(t,e,n,r=!0){const s=this._getTrigger(e),o=new RT(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(Io(t,B0),Io(t,B0+"-"+e),this._engine.statesByElement.set(t,a={}));let l=a[e];const c=new DT(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[e]=c,l||(l=AT),c.value!==Gg&&l.value===c.value){if(!function _re(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}(l.params,c.params)){const m=[],g=s.matchStyles(l.value,l.params,m),_=s.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{md(t,g),Ya(t,_)})}return}const h=Js(this._engine.playersByElement,t,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==e&&m.queued&&m.destroy()});let f=s.matchTransition(l.value,c.value,t,c.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(Io(t,VB),o.onStart(()=>{Vf(t,VB)})),o.onDone(()=>{let m=this.players.indexOf(o);m>=0&&this.players.splice(m,1);const g=this._engine.playersByElement.get(t);if(g){let _=g.indexOf(o);_>=0&&g.splice(_,1)}}),this.players.push(o),h.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,V0,!0);n.forEach(r=>{if(r[Ro])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const a=[];if(Object.keys(s).forEach(l=>{if(o.set(l,s[l].value),this._triggers[l]){const c=this.trigger(t,l,Gg,r);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),n&&zc(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers[o].fallbackTransition,c=n[o]||AT,u=new DT(Gg),d=new RT(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Ro];(!s||s===HB)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Io(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){const l=dT(s,n.triggerName,n.fromState.value,n.toState.value);l._data=t,cT(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(n=>n.element===t)||e,e}}class dre{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new ure(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList,r=this.namespacesByHostElement,s=n.length-1;if(s>=0){let o=!1;if(void 0!==this.driver.getParentElement){let a=this.driver.getParentElement(e);for(;a;){const l=r.get(a);if(l){const c=n.indexOf(l);n.splice(c+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}}else for(let a=s;a>=0;a--)if(this.driver.containsElement(n[a].hostElement,e)){n.splice(a+1,0,t),o=!0;break}o||n.unshift(t)}else n.push(t);return r.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const r=Object.keys(n);for(let s=0;s<r.length;s++){const o=n[r[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&e.add(a)}}}return e}trigger(t,e,n,r){if(Q0(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Q0(e))return;const s=e[Ro];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Io(t,TT)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Vf(t,TT))}removeNode(t,e,n,r){if(Q0(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r,s){this.collectedLeaveElements.push(e),e[Ro]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,n,r,s){return Q0(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,V0,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,gT,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return zc(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const n=t[Ro];if(n&&n.setForRemoval){if(t[Ro]=HB,n.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(TT))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Io(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?zc(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw function pie(i){return new et(3402,un)}()}_flushAnimations(t,e){const n=new X0,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(D=>{u.add(D);const P=this.driver.query(D,".ng-animate-queued",!0);for(let O=0;O<P.length;O++)u.add(P[O])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=GB(h,this.collectedEnterElements),p=new Map;let m=0;f.forEach((D,P)=>{const O=mT+m++;p.set(P,O),D.forEach(q=>Io(q,O))});const g=[],_=new Set,v=new Set;for(let D=0;D<this.collectedLeaveElements.length;D++){const P=this.collectedLeaveElements[D],O=P[Ro];O&&O.setForRemoval&&(g.push(P),_.add(P),O.hasAnimation?this.driver.query(P,".ng-star-inserted",!0).forEach(q=>_.add(q)):v.add(P))}const y=new Map,b=GB(h,Array.from(_));b.forEach((D,P)=>{const O=N0+m++;y.set(P,O),D.forEach(q=>Io(q,O))}),t.push(()=>{f.forEach((D,P)=>{const O=p.get(P);D.forEach(q=>Vf(q,O))}),b.forEach((D,P)=>{const O=y.get(P);D.forEach(q=>Vf(q,O))}),g.forEach(D=>{this.processLeaveNode(D)})});const x=[],w=[];for(let D=this._namespaceList.length-1;D>=0;D--)this._namespaceList[D].drainQueuedTransitions(e).forEach(O=>{const q=O.player,K=O.element;if(x.push(q),this.collectedEnterElements.length){const Ae=K[Ro];if(Ae&&Ae.setForMove){if(Ae.previousTriggersValues&&Ae.previousTriggersValues.has(O.triggerName)){const Oe=Ae.previousTriggersValues.get(O.triggerName),tt=this.statesByElement.get(O.element);tt&&tt[O.triggerName]&&(tt[O.triggerName].value=Oe)}return void q.destroy()}}const Q=!d||!this.driver.containsElement(d,K),j=y.get(K),we=p.get(K),fe=this._buildInstruction(O,n,we,j,Q);if(fe.errors&&fe.errors.length)return void w.push(fe);if(Q)return q.onStart(()=>md(K,fe.fromStyles)),q.onDestroy(()=>Ya(K,fe.toStyles)),void r.push(q);if(O.isFallbackTransition)return q.onStart(()=>md(K,fe.fromStyles)),q.onDestroy(()=>Ya(K,fe.toStyles)),void r.push(q);const _e=[];fe.timelines.forEach(Ae=>{Ae.stretchStartingKeyframe=!0,this.disabledNodes.has(Ae.element)||_e.push(Ae)}),fe.timelines=_e,n.append(K,fe.timelines),o.push({instruction:fe,player:q,element:K}),fe.queriedElements.forEach(Ae=>Js(a,Ae,[]).push(q)),fe.preStyleProps.forEach((Ae,Oe)=>{const tt=Object.keys(Ae);if(tt.length){let ye=l.get(Oe);ye||l.set(Oe,ye=new Set),tt.forEach(vt=>ye.add(vt))}}),fe.postStyleProps.forEach((Ae,Oe)=>{const tt=Object.keys(Ae);let ye=c.get(Oe);ye||c.set(Oe,ye=new Set),tt.forEach(vt=>ye.add(vt))})});if(w.length){const D=[];w.forEach(P=>{D.push(function mie(i,t){return new et(3505,un)}())}),x.forEach(P=>P.destroy()),this.reportError(D)}const E=new Map,R=new Map;o.forEach(D=>{const P=D.element;n.has(P)&&(R.set(P,P),this._beforeAnimationBuild(D.player.namespaceId,D.instruction,E))}),r.forEach(D=>{const P=D.element;this._getPreviousPlayers(P,!1,D.namespaceId,D.triggerName,null).forEach(q=>{Js(E,P,[]).push(q),q.destroy()})});const F=g.filter(D=>jB(D,l,c)),N=new Map;zB(N,this.driver,v,c,Ol).forEach(D=>{jB(D,l,c)&&F.push(D)});const L=new Map;f.forEach((D,P)=>{zB(L,this.driver,new Set(D),l,"!")}),F.forEach(D=>{const P=N.get(D),O=L.get(D);N.set(D,Object.assign(Object.assign({},P),O))});const Y=[],I=[],z={};o.forEach(D=>{const{element:P,player:O,instruction:q}=D;if(n.has(P)){if(u.has(P))return O.onDestroy(()=>Ya(P,q.toStyles)),O.disabled=!0,O.overrideTotalTime(q.totalTime),void r.push(O);let K=z;if(R.size>1){let j=P;const we=[];for(;j=j.parentNode;){const fe=R.get(j);if(fe){K=fe;break}we.push(j)}we.forEach(fe=>R.set(fe,K))}const Q=this._buildAnimation(O.namespaceId,q,E,s,L,N);if(O.setRealPlayer(Q),K===z)Y.push(O);else{const j=this.playersByElement.get(K);j&&j.length&&(O.parentPlayer=zc(j)),r.push(O)}}else md(P,q.fromStyles),O.onDestroy(()=>Ya(P,q.toStyles)),I.push(O),u.has(P)&&r.push(O)}),I.forEach(D=>{const P=s.get(D.element);if(P&&P.length){const O=zc(P);D.setRealPlayer(O)}}),r.forEach(D=>{D.parentPlayer?D.syncPlayerEvents(D.parentPlayer):D.destroy()});for(let D=0;D<g.length;D++){const P=g[D],O=P[Ro];if(Vf(P,N0),O&&O.hasAnimation)continue;let q=[];if(a.size){let Q=a.get(P);Q&&Q.length&&q.push(...Q);let j=this.driver.query(P,gT,!0);for(let we=0;we<j.length;we++){let fe=a.get(j[we]);fe&&fe.length&&q.push(...fe)}}const K=q.filter(Q=>!Q.destroyed);K.length?mre(this,P,K):this.processLeaveNode(P)}return g.length=0,Y.forEach(D=>{this.players.push(D),D.onDone(()=>{D.destroy();const P=this.players.indexOf(D);this.players.splice(P,1)}),D.play()}),Y}elementContainsData(t,e){let n=!1;const r=e[Ro];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let o=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==Gg;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(t,e,n){const s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,u=c!==s,d=Js(n,c,[]);this._getPreviousPlayers(c,u,o,a,e.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}md(s,e.fromStyles)}_buildAnimation(t,e,n,r,s,o){const a=e.triggerName,l=e.element,c=[],u=new Set,d=new Set,h=e.timelines.map(p=>{const m=p.element;u.add(m);const g=m[Ro];if(g&&g.removedBeforeQueried)return new Ug(p.duration,p.delay);const _=m!==l,v=function gre(i){const t=[];return WB(i,t),t}((n.get(m)||lre).map(E=>E.getRealPlayer())).filter(E=>!!E.element&&E.element===m),y=s.get(m),b=o.get(m),x=gB(0,this._normalizer,0,p.keyframes,y,b),w=this._buildPlayer(p,x,v);if(p.subTimeline&&r&&d.add(m),_){const E=new RT(t,a,m);E.setRealPlayer(w),c.push(E)}return w});c.forEach(p=>{Js(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function hre(i,t,e){let n;if(i instanceof Map){if(n=i.get(t),n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&i.delete(t)}}else if(n=i[t],n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&delete i[t]}return n}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Io(p,EB));const f=zc(h);return f.onDestroy(()=>{u.forEach(p=>Vf(p,EB)),Ya(l,e.toStyles)}),d.forEach(p=>{Js(r,p,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Ug(t.duration,t.delay)}}class RT{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Ug,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>cT(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Js(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Q0(i){return i&&1===i.nodeType}function UB(i,t){const e=i.style.display;return i.style.display=null!=t?t:"none",e}function zB(i,t,e,n,r){const s=[];e.forEach(l=>s.push(UB(l)));const o=[];n.forEach((l,c)=>{const u={};l.forEach(d=>{const h=u[d]=t.computeStyle(c,d,r);(!h||0==h.length)&&(c[Ro]=cre,o.push(c))}),i.set(c,u)});let a=0;return e.forEach(l=>UB(l,s[a++])),o}function GB(i,t){const e=new Map;if(i.forEach(a=>e.set(a,[])),0==t.length)return e;const r=new Set(t),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return t.forEach(a=>{const l=o(a);1!==l&&e.get(l).push(a)}),e}function Io(i,t){var e;null===(e=i.classList)||void 0===e||e.add(t)}function Vf(i,t){var e;null===(e=i.classList)||void 0===e||e.remove(t)}function mre(i,t,e){zc(e).onDone(()=>i.processLeaveNode(t))}function WB(i,t){for(let e=0;e<i.length;e++){const n=i[e];n instanceof pB?WB(n.players,t):t.push(n)}}function jB(i,t,e){const n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(s=>r.add(s)):t.set(i,n),e.delete(i),!0}class J0{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new dre(t,e,n),this._timelineEngine=new ire(t,e,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,n,r,s){const o=t+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=bT(this._driver,s,l,[]);if(l.length)throw function rie(i,t){return new et(3404,un)}();a=function Jie(i,t,e){return new ere(i,t,e)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[s,o]=_B(n);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if("@"==n.charAt(0)){const[o,a]=_B(n);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let yre=(()=>{class i{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(e);s||i.initialStylesByElement.set(e,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ya(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ya(this._element,this._initialStyles),this._endStyles&&(Ya(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(md(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(md(this._element,this._endStyles),this._endStyles=null),Ya(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function IT(i){let t=null;const e=Object.keys(i);for(let n=0;n<e.length;n++){const r=e[n];bre(r)&&(t=t||{},t[r]=i[r])}return t}function bre(i){return"display"===i||"position"===i}class $B{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(n=>{"offset"!=n&&(t[n]=this._finished?e[n]:IB(this.element,n))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class xre{validateStyleProperty(t){return xB(t)}matchesElement(t,e){return!1}containsElement(t,e){return wB(t,e)}getParentElement(t){return fT(t)}query(t,e,n){return MB(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}animate(t,e,n,r,s,o=[]){const l={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c={},u=o.filter(h=>h instanceof $B);(function Sie(i,t){return 0===i||0===t})(n,r)&&u.forEach(h=>{let f=h.currentSnapshot;Object.keys(f).forEach(p=>c[p]=f[p])}),e=function Eie(i,t,e){const n=Object.keys(e);if(n.length&&t.length){let s=t[0],o=[];if(n.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=e[a]}),o.length)for(var r=1;r<t.length;r++){let a=t[r];o.forEach(function(l){a[l]=IB(i,l)})}}return t}(t,e=e.map(h=>Gc(h,!1)),c);const d=function vre(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=IT(t[0]),t.length>1&&(n=IT(t[t.length-1]))):t&&(e=IT(t)),e||n?new yre(i,e,n):null}(t,e);return new $B(t,e,l,d)}}let wre=(()=>{class i extends rT{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:Jo.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?hB(e):e;return qB(this._renderer,null,n,"register",[r]),new Mre(n,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(J(xg),J(Lt))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();class Mre extends class Lne{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Cre(this._id,t,e||{},this._renderer)}}class Cre{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return qB(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function qB(i,t,e,n,r){return i.setProperty(t,`@@${e}:${n}`,r)}const YB="@.disabled";let Sre=(()=>{class i{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(e,n){const s=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let u=this._rendererCache.get(s);return u||(u=new XB("",s,this.engine),this._rendererCache.set(s,u)),u}const o=n.id,a=n.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,e,u.name,u)};return n.data.animation.forEach(l),new Ere(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){e>=0&&e<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(J(xg),J(J0),J(Ot))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();class XB{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==YB?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Ere extends XB{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==YB?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function Tre(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let s=e.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Dre(i){const t=i.indexOf(".");return[i.substring(0,t),i.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(t,e,n)}}let Are=(()=>{class i extends J0{constructor(e,n,r){super(e.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(J(Lt),J(pT),J(ST))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();const ko=new ve("AnimationModuleType"),KB=[{provide:rT,useClass:wre},{provide:ST,useFactory:function Rre(){return new Yie}},{provide:J0,useClass:Are},{provide:xg,useFactory:function Ire(i,t,e){return new Sre(i,t,e)},deps:[E0,J0,Ot]}],ZB=[{provide:pT,useFactory:()=>new xre},{provide:ko,useValue:"BrowserAnimations"},...KB],kre=[{provide:pT,useClass:CB},{provide:ko,useValue:"NoopAnimations"},...KB];let Ore=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?kre:ZB}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({providers:ZB,imports:[RN]}),i})();const Lre=new ve("mat-sanity-checks",{providedIn:"root",factory:function Pre(){return!0}});let pt=(()=>{class i{constructor(e,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!ZE()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return i.\u0275fac=function(e){return new(e||i)(J(cB),J(Lre,8),J(Lt))},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[dd],dd]}),i})();function Wg(i){return class extends i{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Nt(t)}}}function _d(i,t){return class extends i{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const n=e||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}}}function Pl(i){return class extends i{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Nt(t)}}}function tb(i,t=0){return class extends i{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Qs(e):this.defaultTabIndex}}}let JB=(()=>{class i{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),e3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ae({type:i,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),i})();function jg(i,t,e){i.nativeElement.classList.toggle(t,e)}let nb=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[pt],pt]}),i})();class Nre{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const n3={enterDuration:225,exitDuration:150},kT=Uc({passive:!0}),r3=["mousedown","touchstart"],s3=["mouseup","mouseleave","touchend","touchcancel"];class Vre{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ld(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},n3),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const o=n.radius||function Ure(i,t,e){const n=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+r*r)}(t,e,r),a=t-r.left,l=e-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=n.color&&(u.style.backgroundColor=n.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u),function Hre(i){window.getComputedStyle(i).getPropertyValue("opacity")}(u),u.style.transform="scale(1)";const d=new Nre(this,u,n);return d.state=0,this._activeRipples.add(d),n.persistent||(this._mostRecentTransientRipple=d),this._runTimeoutOutsideZone(()=>{const h=d===this._mostRecentTransientRipple;d.state=1,!n.persistent&&(!h||!this._isPointerDown)&&d.fadeOut()},c),d}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},n3),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=ld(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(r3))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(s3),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=rB(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!sB(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,kT)})})}_removeTriggerEvents(){this._triggerElement&&(r3.forEach(t=>{this._triggerElement.removeEventListener(t,this,kT)}),this._pointerUpEventsRegistered&&s3.forEach(t=>{this._triggerElement.removeEventListener(t,this,kT)}))}}const zre=new ve("mat-ripple-global-options");let Ll=(()=>{class i{constructor(e,n,r,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Vre(this,n,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,n,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(Ot),C(Es),C(zre,8),C(ko,8))},i.\u0275dir=ae({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,n){2&e&&qt("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),fa=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[pt],pt]}),i})(),OT=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[pt]]}),i})(),o3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[fa,Ss,pt,OT]]}),i})();function a3(i){return en(()=>i)}const ib=["*"],Wre=["content"];function jre(i,t){if(1&i){const e=Eo();M(0,"div",2),$e("click",function(){return on(e),Qe()._onBackdropClicked()}),T()}2&i&&qt("mat-drawer-shown",Qe()._isShowingBackdrop())}function $re(i,t){1&i&&(M(0,"mat-drawer-content"),Tn(1,2),T())}const qre=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Yre=["mat-drawer","mat-drawer-content","*"];function Xre(i,t){if(1&i){const e=Eo();M(0,"div",2),$e("click",function(){return on(e),Qe()._onBackdropClicked()}),T()}2&i&&qt("mat-drawer-shown",Qe()._isShowingBackdrop())}function Kre(i,t){1&i&&(M(0,"mat-sidenav-content"),Tn(1,2),T())}const Zre=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Qre=["mat-sidenav","mat-sidenav-content","*"],l3={transformDrawer:Kr("transform",[Xn("open, open-instant",bt({transform:"none",visibility:"visible"})),Xn("void",bt({"box-shadow":"none",visibility:"hidden"})),ri("void => open-instant",Yn("0ms")),ri("void <=> open, open-instant => void",Yn("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},ese=new ve("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function tse(){return!1}}),PT=new ve("MAT_DRAWER_CONTAINER");let rb=(()=>{class i extends Bg{constructor(e,n,r,s,o){super(r,s,o),this._changeDetectorRef=e,this._container=n}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(e){return new(e||i)(C(Zi),C(sn(()=>u3)),C(Ve),C(O0),C(Ot))},i.\u0275cmp=ft({type:i,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,n){2&e&&Xr("margin-left",n._container._contentMargins.left,"px")("margin-right",n._container._contentMargins.right,"px")},features:[gt([{provide:Bg,useExisting:i}]),he],ngContentSelectors:ib,decls:1,vars:0,template:function(e,n){1&e&&(zi(),Tn(0))},encapsulation:2,changeDetection:0}),i})(),c3=(()=>{class i{constructor(e,n,r,s,o,a,l,c){this._elementRef=e,this._focusTrapFactory=n,this._focusMonitor=r,this._platform=s,this._ngZone=o,this._interactivityChecker=a,this._doc=l,this._container=c,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Dt,this._animationEnd=new Dt,this._animationState="void",this.openedChange=new Wt(!0),this._openedStream=this.openedChange.pipe(pi(u=>u),en(()=>{})),this.openedStart=this._animationStarted.pipe(pi(u=>u.fromState!==u.toState&&0===u.toState.indexOf("open")),a3(void 0)),this._closedStream=this.openedChange.pipe(pi(u=>!u),en(()=>{})),this.closedStart=this._animationStarted.pipe(pi(u=>u.fromState!==u.toState&&"void"===u.toState),a3(void 0)),this._destroyed=new Dt,this.onPositionChanged=new Wt,this._modeChanged=new Dt,this.openedChange.subscribe(u=>{u?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Og(this._elementRef.nativeElement,"keydown").pipe(pi(u=>27===u.keyCode&&!this.disableClose&&!Lf(u)),kn(this._destroyed)).subscribe(u=>this._ngZone.run(()=>{this.close(),u.stopPropagation(),u.preventDefault()}))}),this._animationEnd.pipe(KN((u,d)=>u.fromState===d.fromState&&u.toState===d.toState)).subscribe(u=>{const{fromState:d,toState:h}=u;(0===h.indexOf("open")&&"void"===d||"void"===h&&0===d.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=Nt(e)}get autoFocus(){const e=this._autoFocus;return null==e?"side"===this.mode?"dialog":"first-tabbable":e}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=Nt(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(Nt(e))}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(n)}_focusByCssSelector(e,n){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,n)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{!n&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var e;this._focusTrap&&this._focusTrap.destroy(),null===(e=this._anchor)||void 0===e||e.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,n){e&&n&&(this._openedVia=n);const r=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),r}_setOpen(e,n,r){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",n&&this._restoreFocus(r)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(Ts(1)).subscribe(o=>s(o?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(e){const n=this._elementRef.nativeElement,r=n.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,n)),r.appendChild(n)):this._anchor&&this._anchor.parentNode.insertBefore(n,this._anchor)}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(iB),C(kl),C(Es),C(Ot),C(tT),C(Lt,8),C(PT,8))},i.\u0275cmp=ft({type:i,selectors:[["mat-drawer"]],viewQuery:function(e,n){if(1&e&&ni(Wre,5),2&e){let r;Ct(r=St())&&(n._content=r.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,n){1&e&&$y("@transform.start",function(s){return n._animationStarted.next(s)})("@transform.done",function(s){return n._animationEnd.next(s)}),2&e&&(bn("align",null),Ky("@transform",n._animationState),qt("mat-drawer-end","end"===n.position)("mat-drawer-over","over"===n.mode)("mat-drawer-push","push"===n.mode)("mat-drawer-side","side"===n.mode)("mat-drawer-opened",n.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:ib,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,n){1&e&&(zi(),M(0,"div",0,1),Tn(2),T())},directives:[Bg],encapsulation:2,data:{animation:[l3.transformDrawer]},changeDetection:0}),i})(),u3=(()=>{class i{constructor(e,n,r,s,o,a=!1,l){this._dir=e,this._element=n,this._ngZone=r,this._changeDetectorRef=s,this._animationMode=l,this._drawers=new Df,this.backdropClick=new Wt,this._destroyed=new Dt,this._doCheckSubject=new Dt,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Dt,e&&e.change.pipe(kn(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(kn(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=a}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=Nt(e)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(e){this._backdropOverride=null==e?null:Nt(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Nf(this._allDrawers),kn(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(n=>!n._container||n._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Nf(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(eT(10),kn(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,n=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();e+=r,n-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();n+=r,e-=r}e=e||null,n=n||null,(e!==this._contentMargins.left||n!==this._contentMargins.right)&&(this._contentMargins={left:e,right:n},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(pi(n=>n.fromState!==n.toState),kn(this._drawers.changes)).subscribe(n=>{"open-instant"!==n.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(kn(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe(kn(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Ts(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(kn(Nh(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const n=this._element.nativeElement.classList,r="mat-drawer-container-has-open";e?n.add(r):n.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return i.\u0275fac=function(e){return new(e||i)(C(Il,8),C(Ve),C(Ot),C(Zi),C(Vg),C(ese),C(ko,8))},i.\u0275cmp=ft({type:i,selectors:[["mat-drawer-container"]],contentQueries:function(e,n,r){if(1&e&&(fi(r,rb,5),fi(r,c3,5)),2&e){let s;Ct(s=St())&&(n._content=s.first),Ct(s=St())&&(n._allDrawers=s)}},viewQuery:function(e,n){if(1&e&&ni(rb,5),2&e){let r;Ct(r=St())&&(n._userContent=r.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,n){2&e&&qt("mat-drawer-container-explicit-backdrop",n._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[gt([{provide:PT,useExisting:i}])],ngContentSelectors:Yre,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,n){1&e&&(zi(qre),Ge(0,jre,1,2,"div",0),Tn(1),Tn(2,1),Ge(3,$re,2,0,"mat-drawer-content",1)),2&e&&(Z("ngIf",n.hasBackdrop),$(3),Z("ngIf",!n._content))},directives:[rb,Ks],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),i})(),LT=(()=>{class i extends rb{constructor(e,n,r,s,o){super(e,n,r,s,o)}}return i.\u0275fac=function(e){return new(e||i)(C(Zi),C(sn(()=>h3)),C(Ve),C(O0),C(Ot))},i.\u0275cmp=ft({type:i,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(e,n){2&e&&Xr("margin-left",n._container._contentMargins.left,"px")("margin-right",n._container._contentMargins.right,"px")},features:[gt([{provide:Bg,useExisting:i}]),he],ngContentSelectors:ib,decls:1,vars:0,template:function(e,n){1&e&&(zi(),Tn(0))},encapsulation:2,changeDetection:0}),i})(),d3=(()=>{class i extends c3{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(e){this._fixedInViewport=Nt(e)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(e){this._fixedTopGap=Qs(e)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(e){this._fixedBottomGap=Qs(e)}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275cmp=ft({type:i,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(e,n){2&e&&(bn("align",null),Xr("top",n.fixedInViewport?n.fixedTopGap:null,"px")("bottom",n.fixedInViewport?n.fixedBottomGap:null,"px"),qt("mat-drawer-end","end"===n.position)("mat-drawer-over","over"===n.mode)("mat-drawer-push","push"===n.mode)("mat-drawer-side","side"===n.mode)("mat-drawer-opened",n.opened)("mat-sidenav-fixed",n.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[he],ngContentSelectors:ib,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,n){1&e&&(zi(),M(0,"div",0,1),Tn(2),T())},directives:[Bg],encapsulation:2,data:{animation:[l3.transformDrawer]},changeDetection:0}),i})(),h3=(()=>{class i extends u3{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275cmp=ft({type:i,selectors:[["mat-sidenav-container"]],contentQueries:function(e,n,r){if(1&e&&(fi(r,LT,5),fi(r,d3,5)),2&e){let s;Ct(s=St())&&(n._content=s.first),Ct(s=St())&&(n._allDrawers=s)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(e,n){2&e&&qt("mat-drawer-container-explicit-backdrop",n._backdropOverride)},exportAs:["matSidenavContainer"],features:[gt([{provide:PT,useExisting:i}]),he],ngContentSelectors:Qre,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,n){1&e&&(zi(Zre),Ge(0,Xre,1,2,"div",0),Tn(1),Tn(2,1),Ge(3,Kre,2,0,"mat-sidenav-content",1)),2&e&&(Z("ngIf",n.hasBackdrop),$(3),Z("ngIf",!n._content))},directives:[LT,Ks],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),i})(),nse=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[Ss,pt,hd],hd,pt]}),i})();function FT(i){return i&&"function"==typeof i.connect}class f3{applyChanges(t,e,n,r,s){t.forEachOperation((o,a,l)=>{let c,u;if(null==o.previousIndex){const d=n(o,a,l);c=e.createEmbeddedView(d.templateRef,d.context,d.index),u=1}else null==l?(e.remove(a),u=3):(c=e.get(a),e.move(c,l),u=2);s&&s({context:null==c?void 0:c.context,operation:u,record:o})})}detach(){}}class NT{constructor(t=!1,e,n=!0){this._multiple=t,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Dt,e&&e.length&&(t?e.forEach(r=>this._markSelected(r)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}const $g=new ve("_ViewRepeater"),{isArray:rse}=Array,{getPrototypeOf:sse,prototype:ose,keys:ase}=Object;function m3(i){if(1===i.length){const t=i[0];if(rse(t))return{args:t,keys:null};if(function lse(i){return i&&"object"==typeof i&&sse(i)===ose}(t)){const e=ase(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}function g3(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function _3(...i){const t=yk(i),{args:e,keys:n}=m3(i),r=new Mn(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;us(e[u]).subscribe(di(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(n?g3(n,a):a),s.complete())}))}});return t?r.pipe(WE(t)):r}let v3=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(C(ca),C(Ve))},i.\u0275dir=ae({type:i}),i})(),vd=(()=>{class i extends v3{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275dir=ae({type:i,features:[he]}),i})();const Zr=new ve("NgValueAccessor"),use={provide:Zr,useExisting:sn(()=>BT),multi:!0},hse=new ve("CompositionEventMode");let BT=(()=>{class i extends v3{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function dse(){const i=qa()?qa().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(C(ca),C(Ve),C(hse,8))},i.\u0275dir=ae({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&$e("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[gt([use]),he]}),i})();const Rr=new ve("NgValidators"),jc=new ve("NgAsyncValidators");function A3(i){return null!=i}function R3(i){const t=fg(i)?Cr(i):i;return BS(t),t}function I3(i){let t={};return i.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function k3(i,t){return t.map(e=>e(i))}function O3(i){return i.map(t=>function pse(i){return!i.validate}(t)?t:e=>t.validate(e))}function VT(i){return null!=i?function P3(i){if(!i)return null;const t=i.filter(A3);return 0==t.length?null:function(e){return I3(k3(e,t))}}(O3(i)):null}function HT(i){return null!=i?function L3(i){if(!i)return null;const t=i.filter(A3);return 0==t.length?null:function(e){return _3(k3(e,t).map(R3)).pipe(en(I3))}}(O3(i)):null}function F3(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function UT(i){return i?Array.isArray(i)?i:[i]:[]}function ob(i,t){return Array.isArray(i)?i.includes(t):i===t}function V3(i,t){const e=UT(t);return UT(i).forEach(r=>{ob(e,r)||e.push(r)}),e}function H3(i,t){return UT(t).filter(e=>!ob(i,e))}class U3{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=VT(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=HT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class $c extends U3{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class gs extends U3{get formDirective(){return null}get path(){return null}}let zT=(()=>{class i extends class z3{constructor(t){this._cd=t}is(t){var e,n,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[t])}}{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(C($c,2))},i.\u0275dir=ae({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&qt("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))},features:[he]}),i})();function qg(i,t){(function jT(i,t){const e=function N3(i){return i._rawValidators}(i);null!==t.validator?i.setValidators(F3(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const n=function B3(i){return i._rawAsyncValidators}(i);null!==t.asyncValidator?i.setAsyncValidators(F3(n,t.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();ub(t._rawValidators,r),ub(t._rawAsyncValidators,r)})(i,t),t.valueAccessor.writeValue(i.value),function Mse(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&W3(i,t)})}(i,t),function Sse(i,t){const e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function Cse(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&W3(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function wse(i,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function ub(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function W3(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function YT(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}const Yg="VALID",hb="INVALID",Hf="PENDING",Xg="DISABLED";function KT(i){return(fb(i)?i.validators:i)||null}function Y3(i){return Array.isArray(i)?VT(i):i||null}function ZT(i,t){return(fb(t)?t.asyncValidators:i)||null}function X3(i){return Array.isArray(i)?HT(i):i||null}function fb(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}const QT=i=>i instanceof e1;function Z3(i){return(i=>i instanceof eV)(i)?i.value:i.getRawValue()}function Q3(i,t){const e=QT(i),n=i.controls;if(!(e?Object.keys(n):n).length)throw new et(1e3,"");if(!n[t])throw new et(1001,"")}function J3(i,t){QT(i),i._forEachChild((n,r)=>{if(void 0===t[r])throw new et(1002,"")})}class JT{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Y3(this._rawValidators),this._composedAsyncValidatorFn=X3(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Yg}get invalid(){return this.status===hb}get pending(){return this.status==Hf}get disabled(){return this.status===Xg}get enabled(){return this.status!==Xg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Y3(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=X3(t)}addValidators(t){this.setValidators(V3(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(V3(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(H3(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(H3(t,this._rawAsyncValidators))}hasValidator(t){return ob(this._rawValidators,t)}hasAsyncValidator(t){return ob(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Hf,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Xg,this.errors=null,this._forEachChild(n=>{n.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Yg,this._forEachChild(n=>{n.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yg||this.status===Hf)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xg:Yg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Hf,this._hasOwnPendingAsyncValidator=!0;const e=R3(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function Ase(i,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let n=i;return t.forEach(r=>{n=QT(n)?n.controls.hasOwnProperty(r)?n.controls[r]:null:(i=>i instanceof Ise)(n)&&n.at(r)||null}),n}(this,t,".")}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Wt,this.statusChanges=new Wt}_calculateStatus(){return this._allControlsDisabled()?Xg:this.errors?hb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hf)?Hf:this._anyControlsHaveStatus(hb)?hb:Yg}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){fb(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class eV extends JT{constructor(t=null,e,n){super(KT(e),ZT(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fb(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){YT(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){YT(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class e1 extends JT{constructor(t,e,n){super(KT(e),ZT(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){J3(this,t),Object.keys(t).forEach(n=>{Q3(this,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=Z3(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((r,s)=>{n=e(n,r,s)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Ise extends JT{constructor(t,e,n){super(KT(e),ZT(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){J3(this,t),t.forEach((n,r)=>{Q3(this,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>Z3(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Pse={provide:$c,useExisting:sn(()=>pb)},iV=(()=>Promise.resolve(null))();let pb=(()=>{class i extends $c{constructor(e,n,r,s,o){super(),this._changeDetectorRef=o,this.control=new eV,this._registered=!1,this.update=new Wt,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function qT(i,t){if(!t)return null;let e,n,r;return Array.isArray(t),t.forEach(s=>{s.constructor===BT?e=s:function Dse(i){return Object.getPrototypeOf(i.constructor)===vd}(s)?n=s:r=s}),r||n||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function $T(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){qg(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){iV.then(()=>{var n;this.control.setValue(e,{emitViewToModelChange:!1}),null===(n=this._changeDetectorRef)||void 0===n||n.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;iV.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(e){return this._parent?function lb(i,t){return[...t.path,i]}(e,this._parent):[e]}}return i.\u0275fac=function(e){return new(e||i)(C(gs,9),C(Rr,10),C(jc,10),C(Zr,10),C(Zi,8))},i.\u0275dir=ae({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[gt([Pse]),he,fr]}),i})(),sV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({}),i})(),ooe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[sV]]}),i})(),aoe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[ooe]}),i})(),loe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[pt],pt]}),i})();const wV=["*"],coe=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],uoe=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],moe=Wg(Pl(class{})),goe=Pl(class{}),CV=new ve("MatList"),_oe=new ve("MatNavList");let voe=(()=>{class i extends moe{constructor(e){super(),this._elementRef=e,this._stateChanges=new Dt,"action-list"===this._getListType()&&e.nativeElement.classList.add("mat-action-list")}_getListType(){const e=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===e?"list":"mat-action-list"===e?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return i.\u0275fac=function(e){return new(e||i)(C(Ve))},i.\u0275cmp=ft({type:i,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[gt([{provide:CV,useExisting:i}]),he,fr],ngContentSelectors:wV,decls:1,vars:0,template:function(e,n){1&e&&(zi(),Tn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),i})(),SV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ae({type:i,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),i})(),EV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ae({type:i,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),i})(),yoe=(()=>{class i extends goe{constructor(e,n,r,s){super(),this._element=e,this._isInteractiveList=!1,this._destroyed=new Dt,this._disabled=!1,this._isInteractiveList=!!(r||s&&"action-list"===s._getListType()),this._list=r||s;const o=this._getHostElement();"button"===o.nodeName.toLowerCase()&&!o.hasAttribute("type")&&o.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(kn(this._destroyed)).subscribe(()=>{n.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(e){this._disabled=Nt(e)}ngAfterContentInit(){!function t3(i,t,e="mat"){i.changes.pipe(Nf(i)).subscribe(({length:n})=>{jg(t,`${e}-2-line`,!1),jg(t,`${e}-3-line`,!1),jg(t,`${e}-multi-line`,!1),2===n||3===n?jg(t,`${e}-${n}-line`,!0):n>3&&jg(t,`${e}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(Zi),C(_oe,8),C(CV,8))},i.\u0275cmp=ft({type:i,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(e,n,r){if(1&e&&(fi(r,SV,5),fi(r,EV,5),fi(r,e3,5)),2&e){let s;Ct(s=St())&&(n._avatar=s.first),Ct(s=St())&&(n._icon=s.first),Ct(s=St())&&(n._lines=s)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(e,n){2&e&&qt("mat-list-item-disabled",n.disabled)("mat-list-item-avatar",n._avatar||n._icon)("mat-list-item-with-avatar",n._avatar||n._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[he],ngContentSelectors:uoe,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(e,n){1&e&&(zi(coe),M(0,"span",0),ie(1,"span",1),Tn(2),M(3,"span",2),Tn(4,1),T(),Tn(5,2),T()),2&e&&($(1),Z("matRippleTrigger",n._getHostElement())("matRippleDisabled",n._isRippleDisabled()))},directives:[Ll],encapsulation:2,changeDetection:0}),i})(),Soe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[nb,fa,pt,OT,Ss],nb,pt,OT,loe]}),i})();function DV(i){for(let t in i){let e=i[t]||"";switch(t){case"display":i.display="flex"===e?["-webkit-flex","flex"]:"inline-flex"===e?["-webkit-inline-flex","inline-flex"]:e;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":i["-webkit-"+t]=e;break;case"flex-direction":e=e||"row",i["-webkit-flex-direction"]=e,i["flex-direction"]=e;break;case"order":i.order=i["-webkit-"+t]=isNaN(+e)?"0":e}}return i}const c1="inline",gb=["row","column","row-reverse","column-reverse"];function AV(i){let[t,e,n]=RV(i);return function Toe(i,t=null,e=!1){return{display:e?"inline-flex":"flex","box-sizing":"border-box","flex-direction":i,"flex-wrap":t||null}}(t,e,n)}function RV(i){var t;i=null!==(t=null==i?void 0:i.toLowerCase())&&void 0!==t?t:"";let[e,n,r]=i.split(" ");return gb.find(s=>s===e)||(e=gb[0]),n===c1&&(n=r!==c1?r:"",r=c1),[e,Eoe(n),!!r]}function Zg(i){let[t]=RV(i);return t.indexOf("row")>-1}function Eoe(i){if(i)switch(i.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":i="wrap-reverse";break;case"no":case"none":case"nowrap":i="nowrap";break;default:i="wrap"}return i}function Fl(i,...t){if(null==i)throw TypeError("Cannot convert undefined or null to object");for(let e of t)if(null!=e)for(let n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i}const Aoe={provide:dE,useFactory:function Doe(i,t){return()=>{if(Vc(t)){const e=Array.from(i.querySelectorAll(`[class*=${IV}]`)),n=/\bflex-layout-.+?\b/g;e.forEach(r=>{r.classList.contains(`${IV}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(n,"")})}}},deps:[Lt,Xs],multi:!0},IV="flex-layout-";let u1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({providers:[Aoe]}),i})();class bd{constructor(t=!1,e="all",n="",r="",s=0){this.matches=t,this.mediaQuery=e,this.mqAlias=n,this.suffix=r,this.priority=s,this.property=""}clone(){return new bd(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let Roe=(()=>{class i{constructor(){this.stylesheet=new Map}addStyleToElement(e,n,r){const s=this.stylesheet.get(e);s?s.set(n,r):this.stylesheet.set(e,new Map([[n,r]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(e,n){const r=this.stylesheet.get(e);let s="";if(r){const o=r.get(n);("number"==typeof o||"string"==typeof o)&&(s=o+"")}return s}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const d1={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},pa=new ve("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>d1}),Uf=new ve("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),h1=new ve("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function kV(i,t){return i=i?i.clone():new bd,t&&(i.mqAlias=t.alias,i.mediaQuery=t.mediaQuery,i.suffix=t.suffix,i.priority=t.priority),i}class ki{constructor(){this.shouldCache=!0}sideEffect(t,e,n){}}let mi=(()=>{class i{constructor(e,n,r,s){this._serverStylesheet=e,this._serverModuleLoaded=n,this._platformId=r,this.layoutConfig=s}applyStyleToElement(e,n,r=null){let s={};"string"==typeof n&&(s[n]=r,n=s),s=this.layoutConfig.disableVendorPrefixes?n:DV(n),this._applyMultiValueStyleToElement(s,e)}applyStyleToElements(e,n=[]){const r=this.layoutConfig.disableVendorPrefixes?e:DV(e);n.forEach(s=>{this._applyMultiValueStyleToElement(r,s)})}getFlowDirection(e){const n="flex-direction";let r=this.lookupStyle(e,n);return[r||"row",this.lookupInlineStyle(e,n)||kf(this._platformId)&&this._serverModuleLoaded?r:""]}hasWrap(e){return"wrap"===this.lookupStyle(e,"flex-wrap")}lookupAttributeValue(e,n){var r;return null!==(r=e.getAttribute(n))&&void 0!==r?r:""}lookupInlineStyle(e,n){return Vc(this._platformId)?e.style.getPropertyValue(n):function Ioe(i,t){var e;return null!==(e=OV(i)[t])&&void 0!==e?e:""}(e,n)}lookupStyle(e,n,r=!1){let s="";return e&&((s=this.lookupInlineStyle(e,n))||(Vc(this._platformId)?r||(s=getComputedStyle(e).getPropertyValue(n)):this._serverModuleLoaded&&(s=this._serverStylesheet.getStyleForElement(e,n)))),s?s.trim():""}_applyMultiValueStyleToElement(e,n){Object.keys(e).sort().forEach(r=>{const s=e[r],o=Array.isArray(s)?s:[s];o.sort();for(let a of o)a=a?a+"":"",Vc(this._platformId)||!this._serverModuleLoaded?Vc(this._platformId)?n.style.setProperty(r,a):koe(n,r,a):this._serverStylesheet.addStyleToElement(n,r,a)})}}return i.\u0275fac=function(e){return new(e||i)(J(Roe),J(Uf),J(Xs),J(pa))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function koe(i,t,e){t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const n=OV(i);n[t]=null!=e?e:"",function Ooe(i,t){let e="";for(const n in t)t[n]&&(e+=`${n}:${t[n]};`);i.setAttribute("style",e)}(i,n)}function OV(i){const t={},e=i.getAttribute("style");if(e){const n=e.split(/;+/g);for(let r=0;r<n.length;r++){const s=n[r].trim();if(s.length>0){const o=s.indexOf(":");if(-1===o)throw new Error(`Invalid CSS style: ${s}`);t[s.substr(0,o).trim()]=s.substr(o+1).trim()}}}return t}function Qg(i,t){return(t&&t.priority||0)-(i&&i.priority||0)}function Poe(i,t){return(i.priority||0)-(t.priority||0)}let f1=(()=>{class i{constructor(e,n,r){this._zone=e,this._platformId=n,this._document=r,this.source=new In(new bd(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const e=[];return this.registry.forEach((n,r)=>{n.matches&&e.push(r)}),e}isActive(e){var n;const r=this.registry.get(e);return null!==(n=null==r?void 0:r.matches)&&void 0!==n?n:this.registerQuery(e).some(s=>s.matches)}observe(e,n=!1){if(e&&e.length){const r=this._observable$.pipe(pi(o=>!n||e.indexOf(o.mediaQuery)>-1));return Nh(new Mn(o=>{const a=this.registerQuery(e);if(a.length){const l=a.pop();a.forEach(c=>{o.next(c)}),this.source.next(l)}o.complete()}),r)}return this._observable$}registerQuery(e){const n=Array.isArray(e)?e:[e],r=[];return function Loe(i,t){const e=i.filter(n=>!PV[n]);if(e.length>0){const n=e.join(", ");try{const r=t.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(t.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${n} {.fx-query-test{ }}\n`)),t.head.appendChild(r),e.forEach(s=>PV[s]=r)}catch(r){console.error(r)}}}(n,this._document),n.forEach(s=>{const o=l=>{this._zone.run(()=>this.source.next(new bd(l.matches,s)))};let a=this.registry.get(s);a||(a=this.buildMQL(s),a.addListener(o),this.pendingRemoveListenerFns.push(()=>a.removeListener(o)),this.registry.set(s,a)),a.matches&&r.push(new bd(!0,s))}),r}ngOnDestroy(){let e;for(;e=this.pendingRemoveListenerFns.pop();)e()}buildMQL(e){return function Foe(i,t){return t&&window.matchMedia("all").addListener?window.matchMedia(i):{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(e,Vc(this._platformId))}}return i.\u0275fac=function(e){return new(e||i)(J(Ot),J(Xs),J(Lt))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const PV={},Noe=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],LV="(orientation: portrait) and (max-width: 599.98px)",FV="(orientation: landscape) and (max-width: 959.98px)",NV="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",BV="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",VV="(orientation: portrait) and (min-width: 840px)",HV="(orientation: landscape) and (min-width: 1280px)",Nl={HANDSET:`${LV}, ${FV}`,TABLET:`${NV} , ${BV}`,WEB:`${VV}, ${HV} `,HANDSET_PORTRAIT:`${LV}`,TABLET_PORTRAIT:`${NV} `,WEB_PORTRAIT:`${VV}`,HANDSET_LANDSCAPE:`${FV}`,TABLET_LANDSCAPE:`${BV}`,WEB_LANDSCAPE:`${HV}`},Boe=[{alias:"handset",priority:2e3,mediaQuery:Nl.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:Nl.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:Nl.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:Nl.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:Nl.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:Nl.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:Nl.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:Nl.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:Nl.WEB_PORTRAIT,overlapping:!0}],Voe=/(\.|-|_)/g;function Hoe(i){let t=i.length>0?i.charAt(0):"",e=i.length>1?i.slice(1):"";return t.toUpperCase()+e}const Woe=new ve("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const i=Jh(h1),t=Jh(pa),e=[].concat.apply([],(i||[]).map(r=>Array.isArray(r)?r:[r]));return function Goe(i,t=[]){const e={};return i.forEach(n=>{e[n.alias]=n}),t.forEach(n=>{e[n.alias]?Fl(e[n.alias],n):e[n.alias]=n}),function zoe(i){return i.forEach(t=>{t.suffix||(t.suffix=function Uoe(i){return i.replace(Voe,"|").split("|").map(Hoe).join("")}(t.alias),t.overlapping=!!t.overlapping)}),i}(Object.keys(e).map(n=>e[n]))}((t.disableDefaultBps?[]:Noe).concat(t.addOrientationBps?Boe:[]),e)}});let p1=(()=>{class i{constructor(e){this.findByMap=new Map,this.items=[...e].sort(Poe)}findByAlias(e){return e?this.findWithPredicate(e,n=>n.alias===e):null}findByQuery(e){return this.findWithPredicate(e,n=>n.mediaQuery===e)}get overlappings(){return this.items.filter(e=>e.overlapping)}get aliases(){return this.items.map(e=>e.alias)}get suffixes(){return this.items.map(e=>{var n;return null!==(n=null==e?void 0:e.suffix)&&void 0!==n?n:""})}findWithPredicate(e,n){var r;let s=this.findByMap.get(e);return s||(s=null!==(r=this.items.find(n))&&void 0!==r?r:null,this.findByMap.set(e,s)),null!=s?s:null}}return i.\u0275fac=function(e){return new(e||i)(J(Woe))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const zf="print",joe={alias:zf,mediaQuery:zf,priority:1e3};let $oe=(()=>{class i{constructor(e,n,r){this.breakpoints=e,this.layoutConfig=n,this._document=r,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new qoe,this.deactivations=[]}withPrintQuery(e){return[...e,zf]}isPrintEvent(e){return e.mediaQuery.startsWith(zf)}get printAlias(){var e;return[...null!==(e=this.layoutConfig.printWithBreakpoints)&&void 0!==e?e:[]]}get printBreakPoints(){return this.printAlias.map(e=>this.breakpoints.findByAlias(e)).filter(e=>null!==e)}getEventBreakpoints({mediaQuery:e}){const n=this.breakpoints.findByQuery(e);return(n?[...this.printBreakPoints,n]:this.printBreakPoints).sort(Qg)}updateEvent(e){var n;let r=this.breakpoints.findByQuery(e.mediaQuery);return this.isPrintEvent(e)&&(r=this.getEventBreakpoints(e)[0],e.mediaQuery=null!==(n=null==r?void 0:r.mediaQuery)&&void 0!==n?n:""),kV(e,r)}registerBeforeAfterPrintHooks(e){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const n=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(e,this.getEventBreakpoints(new bd(!0,zf))),e.updateStyles())},r=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(e),e.updateStyles())};this._document.defaultView.addEventListener("beforeprint",n),this._document.defaultView.addEventListener("afterprint",r),this.beforePrintEventListeners.push(n),this.afterPrintEventListeners.push(r)}interceptEvents(e){return n=>{this.isPrintEvent(n)?n.matches&&!this.isPrinting?(this.startPrinting(e,this.getEventBreakpoints(n)),e.updateStyles()):!n.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(e),e.updateStyles()):this.collectActivations(e,n)}}blockPropagation(){return e=>!(this.isPrinting||this.isPrintEvent(e))}startPrinting(e,n){this.isPrinting=!0,this.formerActivations=e.activatedBreakpoints,e.activatedBreakpoints=this.queue.addPrintBreakpoints(n)}stopPrinting(e){e.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(e,n){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!n.matches){const r=this.breakpoints.findByQuery(n.mediaQuery);if(r){const s=this.formerActivations&&this.formerActivations.includes(r),o=!this.formerActivations&&e.activatedBreakpoints.includes(r);(s||o)&&(this.deactivations.push(r),this.deactivations.sort(Qg))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("beforeprint",e)),this.afterPrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("afterprint",e)))}}return i.\u0275fac=function(e){return new(e||i)(J(p1),J(pa),J(Lt))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class qoe{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(t){return t.push(joe),t.sort(Qg),t.forEach(e=>this.addBreakpoint(e)),this.printBreakpoints}addBreakpoint(t){t&&void 0===this.printBreakpoints.find(n=>n.mediaQuery===t.mediaQuery)&&(this.printBreakpoints=function Yoe(i){var t;return null!==(t=null==i?void 0:i.mediaQuery.startsWith(zf))&&void 0!==t&&t}(t)?[t,...this.printBreakpoints]:[...this.printBreakpoints,t])}clear(){this.printBreakpoints=[]}}let vi=(()=>{class i{constructor(e,n,r){this.matchMedia=e,this.breakpoints=n,this.hook=r,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new Dt,this.observeActivations()}get activatedAlias(){var e,n;return null!==(n=null===(e=this.activatedBreakpoints[0])||void 0===e?void 0:e.alias)&&void 0!==n?n:""}set activatedBreakpoints(e){this._activatedBreakpoints=[...e]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(e){this._useFallbacks=e}onMediaChange(e){const n=this.findByQuery(e.mediaQuery);if(n){e=kV(e,n);const r=this.activatedBreakpoints.indexOf(n);e.matches&&-1===r?(this._activatedBreakpoints.push(n),this._activatedBreakpoints.sort(Qg),this.updateStyles()):!e.matches&&-1!==r&&(this._activatedBreakpoints.splice(r,1),this._activatedBreakpoints.sort(Qg),this.updateStyles())}}init(e,n,r,s,o=[]){UV(this.updateMap,e,n,r),UV(this.clearMap,e,n,s),this.buildElementKeyMap(e,n),this.watchExtraTriggers(e,n,o)}getValue(e,n,r){const s=this.elementMap.get(e);if(s){const o=void 0!==r?s.get(r):this.getActivatedValues(s,n);if(o)return o.get(n)}}hasValue(e,n){const r=this.elementMap.get(e);if(r){const s=this.getActivatedValues(r,n);if(s)return void 0!==s.get(n)||!1}return!1}setValue(e,n,r,s){var o;let a=this.elementMap.get(e);if(a){const c=(null!==(o=a.get(s))&&void 0!==o?o:new Map).set(n,r);a.set(s,c),this.elementMap.set(e,a)}else a=(new Map).set(s,(new Map).set(n,r)),this.elementMap.set(e,a);const l=this.getValue(e,n);void 0!==l&&this.updateElement(e,n,l)}trackValue(e,n){return this.subject.asObservable().pipe(pi(r=>r.element===e&&r.key===n))}updateStyles(){this.elementMap.forEach((e,n)=>{const r=new Set(this.elementKeyMap.get(n));let s=this.getActivatedValues(e);s&&s.forEach((o,a)=>{this.updateElement(n,a,o),r.delete(a)}),r.forEach(o=>{if(s=this.getActivatedValues(e,o),s){const a=s.get(o);this.updateElement(n,o,a)}else this.clearElement(n,o)})})}clearElement(e,n){const r=this.clearMap.get(e);if(r){const s=r.get(n);s&&(s(),this.subject.next({element:e,key:n,value:""}))}}updateElement(e,n,r){const s=this.updateMap.get(e);if(s){const o=s.get(n);o&&(o(r),this.subject.next({element:e,key:n,value:r}))}}releaseElement(e){const n=this.watcherMap.get(e);n&&(n.forEach(s=>s.unsubscribe()),this.watcherMap.delete(e));const r=this.elementMap.get(e);r&&(r.forEach((s,o)=>r.delete(o)),this.elementMap.delete(e))}triggerUpdate(e,n){const r=this.elementMap.get(e);if(r){const s=this.getActivatedValues(r,n);s&&(n?this.updateElement(e,n,s.get(n)):s.forEach((o,a)=>this.updateElement(e,a,o)))}}buildElementKeyMap(e,n){let r=this.elementKeyMap.get(e);r||(r=new Set,this.elementKeyMap.set(e,r)),r.add(n)}watchExtraTriggers(e,n,r){if(r&&r.length){let s=this.watcherMap.get(e);if(s||(s=new Map,this.watcherMap.set(e,s)),!s.get(n)){const a=Nh(...r).subscribe(()=>{const l=this.getValue(e,n);this.updateElement(e,n,l)});s.set(n,a)}}}findByQuery(e){return this.breakpoints.findByQuery(e)}getActivatedValues(e,n){for(let s=0;s<this.activatedBreakpoints.length;s++){const a=e.get(this.activatedBreakpoints[s].alias);if(a&&(void 0===n||a.has(n)&&null!=a.get(n)))return a}if(!this._useFallbacks)return;const r=e.get("");return void 0===n||r&&r.has(n)?r:void 0}observeActivations(){const e=this.breakpoints.items.map(n=>n.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(e)).pipe(Ii(this.hook.interceptEvents(this)),pi(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return i.\u0275fac=function(e){return new(e||i)(J(f1),J(p1),J($oe))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function UV(i,t,e,n){var r;if(void 0!==n){const s=null!==(r=i.get(t))&&void 0!==r?r:new Map;s.set(e,n),i.set(t,s)}}let wi=(()=>{class i{constructor(e,n,r,s){this.elementRef=e,this.styleBuilder=n,this.styler=r,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new Dt,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(e){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,this.marshal.activatedAlias)}ngOnChanges(e){Object.keys(e).forEach(n=>{if(-1!==this.inputs.indexOf(n)){const r=n.split(".").slice(1).join(".");this.setValue(e[n].currentValue,r)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(e=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),e)}addStyles(e,n){const r=this.styleBuilder,s=r.shouldCache;let o=this.styleCache.get(e);(!o||!s)&&(o=r.buildStyles(e,n),s&&this.styleCache.set(e,o)),this.mru=Object.assign({},o),this.applyStyleToElement(o),r.sideEffect(e,o,n)}clearStyles(){Object.keys(this.mru).forEach(e=>{this.mru[e]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(e,n=!1){if(e){const[r,s]=this.styler.getFlowDirection(e);if(!s&&n){const o=AV(r);this.styler.applyStyleToElements(o,[e])}return r.trim()}return"row"}hasWrap(e){return this.styler.hasWrap(e)}applyStyleToElement(e,n,r=this.nativeElement){this.styler.applyStyleToElement(r,e,n)}setValue(e,n){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,n)}updateWithValue(e){this.currentValue!==e&&(this.addStyles(e),this.currentValue=e)}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(ki),C(mi),C(vi))},i.\u0275dir=ae({type:i,features:[fr]}),i})();function zV(i,t="1",e="1"){let n=[t,e,i],r=i.indexOf("calc");if(r>0){n[2]=GV(i.substring(r).trim());let s=i.substr(0,r).trim().split(" ");2==s.length&&(n[0]=s[0],n[1]=s[1])}else if(0==r)n[2]=GV(i.trim());else{let s=i.split(" ");n=3===s.length?s:[t,e,i]}return n}function GV(i){return i.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}function _b(i,t){if(void 0===t)return i;const e=n=>{const r=+n.slice(0,-"x".length);return i.endsWith("x")&&!isNaN(r)?`${r*t.value}${t.unit}`:i};return i.includes(" ")?i.split(" ").map(e).join(" "):e(i)}let Zoe=(()=>{class i extends ki{buildStyles(e,{display:n}){const r=AV(e);return Object.assign(Object.assign({},r),{display:"none"===n?n:r.display})}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Qoe=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let Joe=(()=>{class i extends wi{constructor(e,n,r,s,o){super(e,r,n,s),this._config=o,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(e){var n;const s=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=null!==(n=jV.get(s))&&void 0!==n?n:new Map,jV.set(s,this.styleCache),this.currentValue!==e&&(this.addStyles(e,{display:s}),this.currentValue=e)}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(mi),C(Zoe),C(vi),C(pa))},i.\u0275dir=ae({type:i,features:[he]}),i})(),Jg=(()=>{class i extends Joe{constructor(){super(...arguments),this.inputs=Qoe}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275dir=ae({type:i,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[he]}),i})();const jV=new Map,$V={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};let eae=(()=>{class i extends ki{constructor(e,n){super(),this._styler=e,this._config=n}buildStyles(e,n){return e.endsWith(yb)?function lae(i,t){const[e,n]=i.split(" "),s=c=>`-${c}`;let o="0px",a=s(null!=n?n:e),l="0px";return"rtl"===t?l=s(e):o=s(e),{margin:`0px ${o} ${a} ${l}`}}(e=_b(e=e.slice(0,e.indexOf(yb)),this._config.multiplier),n.directionality):{}}sideEffect(e,n,r){const s=r.items;if(e.endsWith(yb)){const o=function aae(i,t){const[e,n]=i.split(" ");let s="0px",a="0px";return"rtl"===t?a=e:s=e,{padding:`0px ${s} ${null!=n?n:e} ${a}`}}(e=_b(e=e.slice(0,e.indexOf(yb)),this._config.multiplier),r.directionality);this._styler.applyStyleToElements(o,r.items)}else{e=_b(e,this._config.multiplier),e=this.addFallbackUnit(e);const o=s.pop(),a=function cae(i,t){const e=qV(t.directionality,t.layout),n=Object.assign({},$V);return n[e]=i,n}(e,r);this._styler.applyStyleToElements(a,s),this._styler.applyStyleToElements($V,[o])}}addFallbackUnit(e){return isNaN(+e)?e:`${e}${this._config.defaultUnit}`}}return i.\u0275fac=function(e){return new(e||i)(J(mi),J(pa))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const tae=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"];let nae=(()=>{class i extends wi{constructor(e,n,r,s,o,a){super(e,o,s,a),this.zone=n,this.directionality=r,this.styleUtils=s,this.layout="row",this.DIRECTIVE_KEY="layout-gap",this.observerSubject=new Dt;const l=[this.directionality.change,this.observerSubject.asObservable()];this.init(l),this.marshal.trackValue(this.nativeElement,"layout").pipe(kn(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}get childrenNodes(){const e=this.nativeElement.children,n=[];for(let r=e.length;r--;)n[r]=e[r];return n}ngAfterContentInit(){this.buildChildObservable(),this.triggerUpdate()}ngOnDestroy(){super.ngOnDestroy(),this.observer&&this.observer.disconnect()}onLayoutChange(e){const r=e.value.split(" ");this.layout=r[0],gb.find(s=>s===this.layout)||(this.layout="row"),this.triggerUpdate()}updateWithValue(e){const n=this.childrenNodes.filter(r=>1===r.nodeType&&this.willDisplay(r)).sort((r,s)=>{const o=+this.styler.lookupStyle(r,"order"),a=+this.styler.lookupStyle(s,"order");return isNaN(o)||isNaN(a)||o===a?0:o>a?1:-1});if(n.length>0){const r=this.directionality.value,s=this.layout;"row"===s&&"rtl"===r?this.styleCache=iae:"row"===s&&"rtl"!==r?this.styleCache=sae:"column"===s&&"rtl"===r?this.styleCache=rae:"column"===s&&"rtl"!==r&&(this.styleCache=oae),this.addStyles(e,{directionality:r,items:n,layout:s})}}clearStyles(){const e=Object.keys(this.mru).length>0,n=e?"padding":qV(this.directionality.value,this.layout);e&&super.clearStyles(),this.styleUtils.applyStyleToElements({[n]:""},this.childrenNodes)}willDisplay(e){const n=this.marshal.getValue(e,"show-hide");return!0===n||void 0===n&&"none"!==this.styleUtils.lookupStyle(e,"display")}buildChildObservable(){this.zone.runOutsideAngular(()=>{"undefined"!=typeof MutationObserver&&(this.observer=new MutationObserver(e=>{e.some(r=>r.addedNodes&&r.addedNodes.length>0||r.removedNodes&&r.removedNodes.length>0)&&this.observerSubject.next()}),this.observer.observe(this.nativeElement,{childList:!0}))})}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(Ot),C(Il),C(mi),C(eae),C(vi))},i.\u0275dir=ae({type:i,features:[he]}),i})(),vb=(()=>{class i extends nae{constructor(){super(...arguments),this.inputs=tae}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275dir=ae({type:i,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[he]}),i})();const iae=new Map,rae=new Map,sae=new Map,oae=new Map,yb=" grid";function qV(i,t){switch(t){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":default:return"rtl"===i?"margin-left":"margin-right";case"row-reverse":return"rtl"===i?"margin-right":"margin-left"}}let uae=(()=>{class i extends ki{constructor(e){super(),this.layoutConfig=e}buildStyles(e,n){let[r,s,...o]=e.split(" "),a=o.join(" ");const l=n.direction.indexOf("column")>-1?"column":"row",c=Zg(l)?"max-width":"max-height",u=Zg(l)?"min-width":"min-height",d=String(a).indexOf("calc")>-1,h=d||"auto"===a,f=String(a).indexOf("%")>-1&&!d,p=String(a).indexOf("px")>-1||String(a).indexOf("rem")>-1||String(a).indexOf("em")>-1||String(a).indexOf("vw")>-1||String(a).indexOf("vh")>-1;let m=d||p;r="0"==r?0:r,s="0"==s?0:s;const g=!r&&!s;let _={};const v={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(a||""){case"":const y=!1!==this.layoutConfig.useColumnBasisZero;a="row"===l?"0%":y?"0.000000001px":"auto";break;case"initial":case"nogrow":r=0,a="auto";break;case"grow":a="100%";break;case"noshrink":s=0,a="auto";break;case"auto":break;case"none":r=0,s=0,a="auto";break;default:!m&&!f&&!isNaN(a)&&(a+="%"),"0%"===a&&(m=!0),"0px"===a&&(a="0%"),_=Fl(v,d?{"flex-grow":r,"flex-shrink":s,"flex-basis":m?a:"100%"}:{flex:`${r} ${s} ${m?a:"100%"}`})}return _.flex||_["flex-grow"]||(_=Fl(v,d?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`})),"0%"!==a&&"0px"!==a&&"0.000000001px"!==a&&"auto"!==a&&(_[u]=g||m&&r?a:null,_[c]=g||!h&&s?a:null),_[u]||_[c]?n.hasWrap&&(_[d?"flex-basis":"flex"]=_[c]?d?_[c]:`${r} ${s} ${_[c]}`:d?_[u]:`${r} ${s} ${_[u]}`):_=Fl(v,d?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`}),Fl(_,{"box-sizing":"border-box"})}}return i.\u0275fac=function(e){return new(e||i)(J(pa))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const dae=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let hae=(()=>{class i extends wi{constructor(e,n,r,s,o){super(e,s,n,o),this.layoutConfig=r,this.marshal=o,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(e){this.flexShrink=e||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(e){this.flexGrow=e||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(kn(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(kn(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(e){const r=e.value.split(" ");this.direction=r[0],this.wrap=void 0!==r[1]&&"wrap"===r[1],this.triggerUpdate()}updateWithValue(e){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const r=this.direction,s=r.startsWith("row"),o=this.wrap;s&&o?this.styleCache=mae:s&&!o?this.styleCache=fae:!s&&o?this.styleCache=gae:!s&&!o&&(this.styleCache=pae);const l=zV(String(e).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(l.join(" "),{direction:r,hasWrap:o})}triggerReflow(){const e=this.activatedValue;if(void 0!==e){const n=zV(e+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,n.join(" "))}}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(mi),C(pa),C(uae),C(vi))},i.\u0275dir=ae({type:i,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[he]}),i})(),m1=(()=>{class i extends hae{constructor(){super(...arguments),this.inputs=dae}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275dir=ae({type:i,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[he]}),i})();const fae=new Map,pae=new Map,mae=new Map,gae=new Map;let Vae=(()=>{class i extends ki{buildStyles(e,n){const r={},[s,o]=e.split(" ");switch(s){case"center":r["justify-content"]="center";break;case"space-around":r["justify-content"]="space-around";break;case"space-between":r["justify-content"]="space-between";break;case"space-evenly":r["justify-content"]="space-evenly";break;case"end":case"flex-end":r["justify-content"]="flex-end";break;default:r["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":r["align-items"]=r["align-content"]="flex-start";break;case"center":r["align-items"]=r["align-content"]="center";break;case"end":case"flex-end":r["align-items"]=r["align-content"]="flex-end";break;case"space-between":r["align-content"]="space-between",r["align-items"]="stretch";break;case"space-around":r["align-content"]="space-around",r["align-items"]="stretch";break;case"baseline":r["align-content"]="stretch",r["align-items"]="baseline";break;default:r["align-items"]=r["align-content"]="stretch"}return Fl(r,{display:n.inline?"inline-flex":"flex","flex-direction":n.layout,"box-sizing":"border-box","max-width":"stretch"===o?Zg(n.layout)?null:"100%":null,"max-height":"stretch"===o&&Zg(n.layout)?"100%":null})}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Hae=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let Uae=(()=>{class i extends wi{constructor(e,n,r,s){super(e,r,n,s),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(kn(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(e){const n=this.layout||"row",r=this.inline;"row"===n&&r?this.styleCache=$ae:"row"!==n||r?"row-reverse"===n&&r?this.styleCache=Yae:"row-reverse"!==n||r?"column"===n&&r?this.styleCache=qae:"column"!==n||r?"column-reverse"===n&&r?this.styleCache=Xae:"column-reverse"===n&&!r&&(this.styleCache=jae):this.styleCache=Gae:this.styleCache=Wae:this.styleCache=zae,this.addStyles(e,{layout:n,inline:r})}onLayoutChange(e){const n=e.value.split(" ");this.layout=n[0],this.inline=e.value.includes("inline"),gb.find(r=>r===this.layout)||(this.layout="row"),this.triggerUpdate()}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(mi),C(Vae),C(vi))},i.\u0275dir=ae({type:i,features:[he]}),i})(),Gf=(()=>{class i extends Uae{constructor(){super(...arguments),this.inputs=Hae}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275dir=ae({type:i,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[he]}),i})();const zae=new Map,Gae=new Map,Wae=new Map,jae=new Map,$ae=new Map,qae=new Map,Yae=new Map,Xae=new Map;let YV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[u1,dd]]}),i})();function e_(i,t){const e=cn(i)?i:()=>i,n=r=>r.error(e());return new Mn(t?r=>t.schedule(n,0,r):n)}function Xa(i){return Ti((t,e)=>{let s,n=null,r=!1;n=t.subscribe(di(e,void 0,void 0,o=>{s=us(i(o,Xa(i)(t))),n?(n.unsubscribe(),n=null,s.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(e))})}function XV(i){return Ti((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}function Wf(i,t){return cn(t)?hr(i,t,1):hr(i,1)}class KV{}class ZV{}class Bl{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),s=r.toLowerCase(),o=e.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Bl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Bl;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Bl?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Kae{encodeKey(t){return QV(t)}encodeValue(t){return QV(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Qae=/%(\d[a-f0-9])/gi,Jae={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function QV(i){return encodeURIComponent(i).replace(Qae,(t,e)=>{var n;return null!==(n=Jae[e])&&void 0!==n?n:t})}function JV(i){return`${i}`}class qc{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Kae,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Zae(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new qc({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(JV(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const r=n.indexOf(JV(t.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class ele{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function eH(i){return"undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer}function tH(i){return"undefined"!=typeof Blob&&i instanceof Blob}function nH(i){return"undefined"!=typeof FormData&&i instanceof FormData}class t_{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function tle(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Bl),this.context||(this.context=new ele),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new qc,this.urlWithParams=e}serializeBody(){return null===this.body?null:eH(this.body)||tH(this.body)||nH(this.body)||function nle(i){return"undefined"!=typeof URLSearchParams&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof qc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||nH(this.body)?null:tH(this.body)?this.body.type||null:eH(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof qc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,r=t.url||this.url,s=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,l=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let c=t.headers||this.headers,u=t.params||this.params;const d=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(c=Object.keys(t.setHeaders).reduce((h,f)=>h.set(f,t.setHeaders[f]),c)),t.setParams&&(u=Object.keys(t.setParams).reduce((h,f)=>h.set(f,t.setParams[f]),u)),new t_(n,r,o,{params:u,headers:c,context:d,reportProgress:l,responseType:s,withCredentials:a})}}var tr=(()=>((tr=tr||{})[tr.Sent=0]="Sent",tr[tr.UploadProgress=1]="UploadProgress",tr[tr.ResponseHeader=2]="ResponseHeader",tr[tr.DownloadProgress=3]="DownloadProgress",tr[tr.Response=4]="Response",tr[tr.User=5]="User",tr))();class g1{constructor(t,e=200,n="OK"){this.headers=t.headers||new Bl,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class _1 extends g1{constructor(t={}){super(t),this.type=tr.ResponseHeader}clone(t={}){return new _1({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class bb extends g1{constructor(t={}){super(t),this.type=tr.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new bb({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class iH extends g1{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function v1(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let xd=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let s;if(e instanceof t_)s=e;else{let l,c;l=r.headers instanceof Bl?r.headers:new Bl(r.headers),r.params&&(c=r.params instanceof qc?r.params:new qc({fromObject:r.params})),s=new t_(e,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=_t(s).pipe(Wf(l=>this.handler.handle(l)));if(e instanceof t_||"events"===r.observe)return o;const a=o.pipe(pi(l=>l instanceof bb));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(en(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(en(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(en(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(en(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new qc).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,v1(r,n))}post(e,n,r={}){return this.request("POST",e,v1(r,n))}put(e,n,r={}){return this.request("PUT",e,v1(r,n))}}return i.\u0275fac=function(e){return new(e||i)(J(KV))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();class rH{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const sH=new ve("HTTP_INTERCEPTORS");let ile=(()=>{class i{intercept(e,n){return n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();const rle=/^\)\]\}',?\n/;let oH=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Mn(n=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((f,p)=>r.setRequestHeader(f,p.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const f=e.detectContentTypeHeader();null!==f&&r.setRequestHeader("Content-Type",f)}if(e.responseType){const f=e.responseType.toLowerCase();r.responseType="json"!==f?f:"text"}const s=e.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const f=r.statusText||"OK",p=new Bl(r.getAllResponseHeaders()),m=function sle(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(r)||e.url;return o=new _1({headers:p,status:r.status,statusText:f,url:m}),o},l=()=>{let{headers:f,status:p,statusText:m,url:g}=a(),_=null;204!==p&&(_=void 0===r.response?r.responseText:r.response),0===p&&(p=_?200:0);let v=p>=200&&p<300;if("json"===e.responseType&&"string"==typeof _){const y=_;_=_.replace(rle,"");try{_=""!==_?JSON.parse(_):null}catch(b){_=y,v&&(v=!1,_={error:b,text:_})}}v?(n.next(new bb({body:_,headers:f,status:p,statusText:m,url:g||void 0})),n.complete()):n.error(new iH({error:_,headers:f,status:p,statusText:m,url:g||void 0}))},c=f=>{const{url:p}=a(),m=new iH({error:f,status:r.status||0,statusText:r.statusText||"Unknown Error",url:p||void 0});n.error(m)};let u=!1;const d=f=>{u||(n.next(a()),u=!0);let p={type:tr.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===e.responseType&&!!r.responseText&&(p.partialText=r.responseText),n.next(p)},h=f=>{let p={type:tr.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),n.next(p)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),e.reportProgress&&(r.addEventListener("progress",d),null!==s&&r.upload&&r.upload.addEventListener("progress",h)),r.send(s),n.next({type:tr.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),e.reportProgress&&(r.removeEventListener("progress",d),null!==s&&r.upload&&r.upload.removeEventListener("progress",h)),r.readyState!==r.DONE&&r.abort()}})}}return i.\u0275fac=function(e){return new(e||i)(J(yN))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();const y1=new ve("XSRF_COOKIE_NAME"),b1=new ve("XSRF_HEADER_NAME");class aH{}let ole=(()=>{class i{constructor(e,n,r){this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=uN(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return i.\u0275fac=function(e){return new(e||i)(J(Lt),J(Xs),J(y1))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})(),x1=(()=>{class i{constructor(e,n){this.tokenService=e,this.headerName=n}intercept(e,n){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return n.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(J(aH),J(b1))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})(),ale=(()=>{class i{constructor(e,n){this.backend=e,this.injector=n,this.chain=null}handle(e){if(null===this.chain){const n=this.injector.get(sH,[]);this.chain=n.reduceRight((r,s)=>new rH(r,s),this.backend)}return this.chain.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(J(ZV),J(Ui))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})(),lle=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:x1,useClass:ile}]}}static withOptions(e={}){return{ngModule:i,providers:[e.cookieName?{provide:y1,useValue:e.cookieName}:[],e.headerName?{provide:b1,useValue:e.headerName}:[]]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({providers:[x1,{provide:sH,useExisting:x1,multi:!0},{provide:aH,useClass:ole},{provide:y1,useValue:"XSRF-TOKEN"},{provide:b1,useValue:"X-XSRF-TOKEN"}]}),i})(),cle=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({providers:[xd,{provide:KV,useClass:ale},oH,{provide:ZV,useExisting:oH}],imports:[[lle.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),i})();const ule=["*"];let xb;function n_(i){var t;return(null===(t=function dle(){if(void 0===xb&&(xb=null,"undefined"!=typeof window)){const i=window;void 0!==i.trustedTypes&&(xb=i.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return xb}())||void 0===t?void 0:t.createHTML(i))||i}function lH(i){return Error(`Unable to find icon with the name "${i}"`)}function cH(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function uH(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class wd{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let i_=(()=>{class i{constructor(e,n,r,s){this._httpClient=e,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(e,n,r){return this.addSvgIconInNamespace("",e,n,r)}addSvgIconLiteral(e,n,r){return this.addSvgIconLiteralInNamespace("",e,n,r)}addSvgIconInNamespace(e,n,r,s){return this._addSvgIconConfig(e,n,new wd(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,r,s){const o=this._sanitizer.sanitize(En.HTML,r);if(!o)throw uH(r);const a=n_(o);return this._addSvgIconConfig(e,n,new wd("",a,s))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,r){return this._addSvgIconSetConfig(e,new wd(n,null,r))}addSvgIconSetLiteralInNamespace(e,n,r){const s=this._sanitizer.sanitize(En.HTML,n);if(!s)throw uH(n);const o=n_(s);return this._addSvgIconSetConfig(e,new wd("",o,r))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const n=this._sanitizer.sanitize(En.RESOURCE_URL,e);if(!n)throw cH(e);const r=this._cachedIconsByUrl.get(n);return r?_t(wb(r)):this._loadSvgIconFromConfig(new wd(e,null)).pipe(Ii(s=>this._cachedIconsByUrl.set(n,s)),en(s=>wb(s)))}getNamedSvgIcon(e,n=""){const r=dH(n,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(e,o):e_(lH(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?_t(wb(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(en(n=>wb(n)))}_getSvgFromIconSetConfigs(e,n){const r=this._extractIconWithNameFromAnySet(e,n);return r?_t(r):_3(n.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Xa(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(En.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),_t(null)})))).pipe(en(()=>{const o=this._extractIconWithNameFromAnySet(e,n);if(!o)throw lH(e);return o}))}_extractIconWithNameFromAnySet(e,n){for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,e,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Ii(n=>e.svgText=n),en(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?_t(null):this._fetchIcon(e).pipe(Ii(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,r){const s=e.querySelector(`[id="${n}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(n_("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(e){const n=this._document.createElement("DIV");n.innerHTML=e;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const n=this._svgElementFromString(n_("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&n.setAttribute(o,a)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){var n;const{url:r,options:s}=e,o=null!==(n=null==s?void 0:s.withCredentials)&&void 0!==n&&n;if(!this._httpClient)throw function hle(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(En.RESOURCE_URL,r);if(!a)throw cH(r);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(en(u=>n_(u)),XV(()=>this._inProgressUrlFetches.delete(a)),Mk());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(e,n,r){return this._svgIconConfigs.set(dH(e,n),r),this}_addSvgIconSetConfig(e,n){const r=this._iconSetConfigs.get(e);return r?r.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){const n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](n,e);if(s)return ple(s)?new wd(s.url,null,s.options):new wd(s,null)}}}return i.\u0275fac=function(e){return new(e||i)(J(xd,8),J(kg),J(Lt,8),J(Lc))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function wb(i){return i.cloneNode(!0)}function dH(i,t){return i+":"+t}function ple(i){return!(!i.url||!i.options)}const mle=_d(class{constructor(i){this._elementRef=i}}),gle=new ve("mat-icon-location",{providedIn:"root",factory:function _le(){const i=Jh(Lt),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),hH=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],vle=hH.map(i=>`[${i}]`).join(", "),yle=/^url\(['"]?#(.*?)['"]?\)$/;let fH=(()=>{class i extends mle{constructor(e,n,r,s,o){super(e),this._iconRegistry=n,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=Jn.EMPTY,r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Nt(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=e.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,n=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();n!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),n&&e.classList.add(n),this._previousFontSetClass=n),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const n=this._elementsWithExternalReferences;n&&n.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){const n=e.querySelectorAll(vle),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)hH.forEach(o=>{const a=n[s],l=a.getAttribute(o),c=l?l.match(yle):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[n,r]=this._splitIconName(e);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(Ts(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${s.message}`))})}}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(i_),Ws("aria-hidden"),C(gle),C(Lc))},i.\u0275cmp=ft({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,n){2&e&&(bn("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet),qt("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[he],ngContentSelectors:ule,decls:1,vars:0,template:function(e,n){1&e&&(zi(),Tn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),i})(),pH=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[pt],pt]}),i})();function mH(i,t,e){i?vl(e,i,t):t()}const Mb=Hn(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});function w1(i){return new Mn(t=>{us(i()).subscribe(t)})}function gH(){return Ti((i,t)=>{let e=null;i._refCount++;const n=di(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const r=i._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}class wle extends Mn{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,sk(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Jn;const e=this.getSubject();t.add(this.source.subscribe(di(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Jn.EMPTY)}return t}refCount(){return gH()(this)}}function Md(i,t){return Ti((e,n)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&n.complete();e.subscribe(di(n,l=>{null==r||r.unsubscribe();let c=0;const u=s++;us(i(l,u)).subscribe(r=di(n,d=>n.next(t?t(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Mle(i,t,e,n,r){return(s,o)=>{let a=e,l=t,c=0;s.subscribe(di(o,u=>{const d=c++;l=a?i(l,u,d):(a=!0,u),n&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function _H(i,t){return Ti(Mle(i,t,arguments.length>=2,!0))}function M1(i){return i<=0?()=>yl:Ti((t,e)=>{let n=[];t.subscribe(di(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function vH(i=Cle){return Ti((t,e)=>{let n=!1;t.subscribe(di(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function Cle(){return new Mb}function yH(i){return Ti((t,e)=>{let n=!1;t.subscribe(di(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function jf(i,t){const e=arguments.length>=2;return n=>n.pipe(i?pi((r,s)=>i(r,s,n)):cs,Ts(1),e?yH(t):vH(()=>new Mb))}class Vl{constructor(t,e){this.id=t,this.url=e}}class C1 extends Vl{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $f extends Vl{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class bH extends Vl{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ele extends Vl{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Tle extends Vl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dle extends Vl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ale extends Vl{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Rle extends Vl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ile extends Vl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xH{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wH{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class kle{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ole{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ple{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lle{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class MH{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const nn="primary";class Fle{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function qf(i){return new Fle(i)}const CH="ngNavigationCancelingError";function S1(i){const t=Error("NavigationCancelingError: "+i);return t[CH]=!0,t}function Ble(i,t,e){const n=e.path.split("/");if(n.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],a=i[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function Ka(i,t){const e=i?Object.keys(i):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!SH(i[r],t[r]))return!1;return!0}function SH(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}return i===t}function EH(i){return Array.prototype.concat.apply([],i)}function TH(i){return i.length>0?i[i.length-1]:null}function Hr(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function Za(i){return BS(i)?i:fg(i)?Cr(Promise.resolve(i)):_t(i)}const Ule={exact:function RH(i,t,e){if(!Sd(i.segments,t.segments)||!Cb(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!i.children[n]||!RH(i.children[n],t.children[n],e))return!1;return!0},subset:IH},DH={exact:function zle(i,t){return Ka(i,t)},subset:function Gle(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>SH(i[e],t[e]))},ignored:()=>!0};function AH(i,t,e){return Ule[e.paths](i.root,t.root,e.matrixParams)&&DH[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function IH(i,t,e){return kH(i,t,t.segments,e)}function kH(i,t,e,n){if(i.segments.length>e.length){const r=i.segments.slice(0,e.length);return!(!Sd(r,e)||t.hasChildren()||!Cb(r,e,n))}if(i.segments.length===e.length){if(!Sd(i.segments,e)||!Cb(i.segments,e,n))return!1;for(const r in t.children)if(!i.children[r]||!IH(i.children[r],t.children[r],n))return!1;return!0}{const r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!!(Sd(i.segments,r)&&Cb(i.segments,r,n)&&i.children[nn])&&kH(i.children[nn],t,s,n)}}function Cb(i,t,e){return t.every((n,r)=>DH[e](i[r].parameters,n.parameters))}class Cd{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qf(this.queryParams)),this._queryParamMap}toString(){return $le.serialize(this)}}class dn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Hr(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sb(this)}}class r_{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=qf(this.parameters)),this._parameterMap}toString(){return NH(this)}}function Sd(i,t){return i.length===t.length&&i.every((e,n)=>e.path===t[n].path)}class OH{}class PH{parse(t){const e=new tce(t);return new Cd(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${s_(t.root,!0)}`,n=function Xle(i){const t=Object.keys(i).map(e=>{const n=i[e];return Array.isArray(n)?n.map(r=>`${Eb(e)}=${Eb(r)}`).join("&"):`${Eb(e)}=${Eb(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${n}${"string"==typeof t.fragment?`#${function qle(i){return encodeURI(i)}(t.fragment)}`:""}`}}const $le=new PH;function Sb(i){return i.segments.map(t=>NH(t)).join("/")}function s_(i,t){if(!i.hasChildren())return Sb(i);if(t){const e=i.children[nn]?s_(i.children[nn],!1):"",n=[];return Hr(i.children,(r,s)=>{s!==nn&&n.push(`${s}:${s_(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function jle(i,t){let e=[];return Hr(i.children,(n,r)=>{r===nn&&(e=e.concat(t(n,r)))}),Hr(i.children,(n,r)=>{r!==nn&&(e=e.concat(t(n,r)))}),e}(i,(n,r)=>r===nn?[s_(i.children[nn],!1)]:[`${r}:${s_(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[nn]?`${Sb(i)}/${e[0]}`:`${Sb(i)}/(${e.join("//")})`}}function LH(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Eb(i){return LH(i).replace(/%3B/gi,";")}function E1(i){return LH(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tb(i){return decodeURIComponent(i)}function FH(i){return Tb(i.replace(/\+/g,"%20"))}function NH(i){return`${E1(i.path)}${function Yle(i){return Object.keys(i).map(t=>`;${E1(t)}=${E1(i[t])}`).join("")}(i.parameters)}`}const Kle=/^[^\/()?;=#]+/;function Db(i){const t=i.match(Kle);return t?t[0]:""}const Zle=/^[^=?&#]+/,Jle=/^[^&#]+/;class tce{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new dn([],{}):new dn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[nn]=new dn(t,e)),n}parseSegment(){const t=Db(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new r_(Tb(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Db(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=Db(this.remaining);r&&(n=r,this.capture(n))}t[Tb(e)]=Tb(n)}parseQueryParam(t){const e=function Qle(i){const t=i.match(Zle);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const o=function ece(i){const t=i.match(Jle);return t?t[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=FH(e),s=FH(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Db(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;n.indexOf(":")>-1?(s=n.substr(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=nn);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[nn]:new dn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class BH{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=T1(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=T1(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=D1(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return D1(t,this._root).map(e=>e.value)}}function T1(i,t){if(i===t.value)return t;for(const e of t.children){const n=T1(i,e);if(n)return n}return null}function D1(i,t){if(i===t.value)return[t];for(const e of t.children){const n=D1(i,e);if(n.length)return n.unshift(t),n}return[]}class Hl{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Yf(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class VH extends BH{constructor(t,e){super(t),this.snapshot=e,A1(this,t)}toString(){return this.snapshot.toString()}}function HH(i,t){const e=function nce(i,t){const o=new Ab([],{},{},"",{},nn,t,null,i.root,-1,{});return new zH("",new Hl(o,[]))}(i,t),n=new In([new r_("",{})]),r=new In({}),s=new In({}),o=new In({}),a=new In(""),l=new Ed(n,r,o,a,s,nn,t,e.root);return l.snapshot=e.root,new VH(new Hl(l,[]),e)}class Ed{constructor(t,e,n,r,s,o,a,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(en(t=>qf(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(en(t=>qf(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function UH(i,t="emptyOnly"){const e=i.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const r=e[n],s=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function ice(i){return i.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(n))}class Ab{constructor(t,e,n,r,s,o,a,l,c,u,d){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zH extends BH{constructor(t,e){super(e),this.url=t,A1(this,e)}toString(){return GH(this._root)}}function A1(i,t){t.value._routerState=i,t.children.forEach(e=>A1(i,e))}function GH(i){const t=i.children.length>0?` { ${i.children.map(GH).join(", ")} } `:"";return`${i.value}${t}`}function R1(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,Ka(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),Ka(t.params,e.params)||i.params.next(e.params),function Vle(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!Ka(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),Ka(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function I1(i,t){const e=Ka(i.params,t.params)&&function Wle(i,t){return Sd(i,t)&&i.every((e,n)=>Ka(e.parameters,t[n].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||I1(i.parent,t.parent))}function o_(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const r=function sce(i,t,e){return t.children.map(n=>{for(const r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return o_(i,n,r);return o_(i,n)})}(i,t,e);return new Hl(n,r)}{if(i.shouldAttach(t.value)){const s=i.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>o_(i,a)),o}}const n=function oce(i){return new Ed(new In(i.url),new In(i.params),new In(i.queryParams),new In(i.fragment),new In(i.data),i.outlet,i.component,i)}(t.value),r=t.children.map(s=>o_(i,s));return new Hl(n,r)}}function Rb(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function a_(i){return"object"==typeof i&&null!=i&&i.outlets}function k1(i,t,e,n,r){let s={};if(n&&Hr(n,(a,l)=>{s[l]=Array.isArray(a)?a.map(c=>`${c}`):`${a}`}),i===t)return new Cd(e,s,r);const o=WH(i,t,e);return new Cd(o,s,r)}function WH(i,t,e){const n={};return Hr(i.children,(r,s)=>{n[s]=r===t?e:WH(r,t,e)}),new dn(i.segments,n)}class jH{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Rb(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(a_);if(r&&r!==TH(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class O1{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function $H(i,t,e){if(i||(i=new dn([],{})),0===i.segments.length&&i.hasChildren())return Ib(i,t,e);const n=function hce(i,t,e){let n=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;const o=i.segments[r],a=e[n];if(a_(a))break;const l=`${a}`,c=n<e.length-1?e[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!YH(l,c,o))return s;n+=2}else{if(!YH(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new dn(i.segments.slice(0,n.pathIndex),{});return s.children[nn]=new dn(i.segments.slice(n.pathIndex),i.children),Ib(s,0,r)}return n.match&&0===r.length?new dn(i.segments,{}):n.match&&!i.hasChildren()?P1(i,t,e):n.match?Ib(i,0,r):P1(i,t,e)}function Ib(i,t,e){if(0===e.length)return new dn(i.segments,{});{const n=function dce(i){return a_(i[0])?i[0].outlets:{[nn]:i}}(e),r={};return Hr(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=$H(i.children[o],t,s))}),Hr(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new dn(i.segments,r)}}function P1(i,t,e){const n=i.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(a_(s)){const l=fce(s.outlets);return new dn(n,l)}if(0===r&&Rb(e[0])){n.push(new r_(i.segments[t].path,qH(e[0]))),r++;continue}const o=a_(s)?s.outlets[nn]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&Rb(a)?(n.push(new r_(o,qH(a))),r+=2):(n.push(new r_(o,{})),r++)}return new dn(n,{})}function fce(i){const t={};return Hr(i,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=P1(new dn([],{}),0,e))}),t}function qH(i){const t={};return Hr(i,(e,n)=>t[n]=`${e}`),t}function YH(i,t,e){return i==e.path&&Ka(t,e.parameters)}class mce{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),R1(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Yf(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Hr(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=Yf(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=Yf(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Yf(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new Lle(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Ole(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(R1(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),R1(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=function gce(i){for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}}class L1{constructor(t,e){this.routes=t,this.module=e}}function Yc(i){return"function"==typeof i}function Td(i){return i instanceof Cd}const l_=Symbol("INITIAL_VALUE");function c_(){return Md(i=>function ble(...i){const t=Bm(i),e=yk(i),{args:n,keys:r}=m3(i);if(0===n.length)return Cr([],t);const s=new Mn(function xle(i,t,e=cs){return n=>{mH(t,()=>{const{length:r}=i,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)mH(t,()=>{const c=Cr(i[l],t);let u=!1;c.subscribe(di(n,d=>{s[l]=d,u||(u=!0,a--),a||n.next(e(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,t,r?o=>g3(r,o):cs));return e?s.pipe(WE(e)):s}(i.map(t=>t.pipe(Ts(1),Nf(l_)))).pipe(_H((t,e)=>{let n=!1;return e.reduce((r,s,o)=>r!==l_?r:(s===l_&&(n=!0),n||!1!==s&&o!==e.length-1&&!Td(s)?r:s),t)},l_),pi(t=>t!==l_),en(t=>Td(t)?t:!0===t),Ts(1)))}class wce{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new u_,this.attachRef=null}}class u_{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new wce,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let kb=(()=>{class i{constructor(e,n,r,s,o){this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Wt,this.deactivateEvents=new Wt,this.attachEvents=new Wt,this.detachEvents=new Wt,this.name=s||nn,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const o=(n=n||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new Mce(e,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)(C(u_),C(Ar),C(ed),Ws("name"),C(Zi))},i.\u0275dir=ae({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class Mce{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Ed?this.route:t===u_?this.childContexts:this.parent.get(t,e)}}let XH=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=ft({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&ie(0,"router-outlet")},directives:[kb],encapsulation:2}),i})();function KH(i,t=""){for(let e=0;e<i.length;e++){const n=i[e];Cce(n,Sce(t,n))}}function Cce(i,t){i.children&&KH(i.children,t)}function Sce(i,t){return t?i||t.path?i&&!t.path?`${i}/`:!i&&t.path?t.path:`${i}/${t.path}`:"":i}function F1(i){const t=i.children&&i.children.map(F1),e=t?Object.assign(Object.assign({},i),{children:t}):Object.assign({},i);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==nn&&(e.component=XH),e}function Oo(i){return i.outlet||nn}function ZH(i,t){const e=i.filter(n=>Oo(n)===t);return e.push(...i.filter(n=>Oo(n)!==t)),e}const QH={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ob(i,t,e){var n;if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?Object.assign({},QH):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const s=(t.matcher||Ble)(e,i,t);if(!s)return Object.assign({},QH);const o={};Hr(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:a,positionalParamSegments:null!==(n=s.posParams)&&void 0!==n?n:{}}}function Pb(i,t,e,n,r="corrected"){if(e.length>0&&function Dce(i,t,e){return e.some(n=>Lb(i,t,n)&&Oo(n)!==nn)}(i,e,n)){const o=new dn(t,function Tce(i,t,e,n){const r={};r[nn]=n,n._sourceSegment=i,n._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Oo(s)!==nn){const o=new dn([],{});o._sourceSegment=i,o._segmentIndexShift=t.length,r[Oo(s)]=o}return r}(i,t,n,new dn(e,i.children)));return o._sourceSegment=i,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function Ace(i,t,e){return e.some(n=>Lb(i,t,n))}(i,e,n)){const o=new dn(i.segments,function Ece(i,t,e,n,r,s){const o={};for(const a of n)if(Lb(i,e,a)&&!r[Oo(a)]){const l=new dn([],{});l._sourceSegment=i,l._segmentIndexShift="legacy"===s?i.segments.length:t.length,o[Oo(a)]=l}return Object.assign(Object.assign({},r),o)}(i,t,e,n,i.children,r));return o._sourceSegment=i,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const s=new dn(i.segments,i.children);return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function Lb(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function JH(i,t,e,n){return!!(Oo(i)===n||n!==nn&&Lb(t,e,i))&&("**"===i.path||Ob(t,i,e).matched)}function eU(i,t,e){return 0===t.length&&!i.children[e]}class Fb{constructor(t){this.segmentGroup=t||null}}class tU{constructor(t){this.urlTree=t}}function d_(i){return e_(new Fb(i))}function nU(i){return e_(new tU(i))}class Oce{constructor(t,e,n,r,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(El)}apply(){const t=Pb(this.urlTree.root,[],[],this.config).segmentGroup,e=new dn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,nn).pipe(en(s=>this.createUrlTree(N1(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xa(s=>{if(s instanceof tU)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Fb?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,nn).pipe(en(r=>this.createUrlTree(N1(r),t.queryParams,t.fragment))).pipe(Xa(r=>{throw r instanceof Fb?this.noMatchError(r):r}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new dn([],{[nn]:t}):t;return new Cd(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(en(s=>new dn([],s))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return Cr(r).pipe(Wf(s=>{const o=n.children[s],a=ZH(e,s);return this.expandSegmentGroup(t,a,o,s).pipe(en(l=>({segment:l,outlet:s})))}),_H((s,o)=>(s[o.outlet]=o.segment,s),{}),function Sle(i,t){const e=arguments.length>=2;return n=>n.pipe(i?pi((r,s)=>i(r,s,n)):cs,M1(1),e?yH(t):vH(()=>new Mb))}())}expandSegment(t,e,n,r,s,o){return Cr(n).pipe(Wf(a=>this.expandSegmentAgainstRoute(t,e,n,a,r,s,o).pipe(Xa(c=>{if(c instanceof Fb)return _t(null);throw c}))),jf(a=>!!a),Xa((a,l)=>{if(a instanceof Mb||"EmptyError"===a.name)return eU(e,r,s)?_t(new dn([],{})):d_(e);throw a}))}expandSegmentAgainstRoute(t,e,n,r,s,o,a){return JH(r,e,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o):d_(e):d_(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?nU(s):this.lineralizeSegments(n,s).pipe(hr(o=>{const a=new dn(o,{});return this.expandSegment(t,a,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Ob(e,r,s);if(!a)return d_(e);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?nU(d):this.lineralizeSegments(r,d).pipe(hr(h=>this.expandSegment(t,e,n,h.concat(c),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){if("**"===n.path)return n.loadChildren?(n._loadedConfig?_t(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(en(d=>(n._loadedConfig=d,new dn(r,{})))):_t(new dn(r,{}));const{matched:o,consumedSegments:a,remainingSegments:l}=Ob(e,n,r);return o?this.getChildConfig(t,n,r).pipe(hr(u=>{const d=u.module,h=u.routes,{segmentGroup:f,slicedSegments:p}=Pb(e,a,l,h),m=new dn(f.segments,f.children);if(0===p.length&&m.hasChildren())return this.expandChildren(d,h,m).pipe(en(y=>new dn(a,y)));if(0===h.length&&0===p.length)return _t(new dn(a,{}));const g=Oo(n)===s;return this.expandSegment(d,m,h,p,g?nn:s,!0).pipe(en(v=>new dn(a.concat(v.segments),v.children)))})):d_(e)}getChildConfig(t,e,n){return e.children?_t(new L1(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?_t(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(hr(r=>r?this.configLoader.load(t.injector,e).pipe(en(s=>(e._loadedConfig=s,s))):function Ice(i){return e_(S1(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`))}(e))):_t(new L1([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?_t(r.map(o=>{const a=t.get(o);let l;if(function vce(i){return i&&Yc(i.canLoad)}(a))l=a.canLoad(e,n);else{if(!Yc(a))throw new Error("Invalid CanLoad guard");l=a(e,n)}return Za(l)})).pipe(c_(),Ii(o=>{if(!Td(o))return;const a=S1(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),en(o=>!0===o)):_t(!0)}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return _t(n);if(r.numberOfChildren>1||!r.children[nn])return e_(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));r=r.children[nn]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new Cd(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Hr(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);n[s]=e[a]}else n[s]=r}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let o={};return Hr(e.children,(a,l)=>{o[l]=this.createSegmentGroup(t,a,n,r)}),new dn(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function N1(i){const t={};for(const n of Object.keys(i.children)){const s=N1(i.children[n]);(s.segments.length>0||s.hasChildren())&&(t[n]=s)}return function Pce(i){if(1===i.numberOfChildren&&i.children[nn]){const t=i.children[nn];return new dn(i.segments.concat(t.segments),t.children)}return i}(new dn(i.segments,t))}class iU{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Nb{constructor(t,e){this.component=t,this.route=e}}function Fce(i,t,e){const n=i._root;return h_(n,t?t._root:null,e,[n.value])}function Bb(i,t,e){const n=function Bce(i){if(!i)return null;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(n?n.module.injector:e).get(i)}function h_(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Yf(t);return i.children.forEach(o=>{(function Vce(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=t?t.value:null,a=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Hce(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!Sd(i.url,t.url);case"pathParamsOrQueryParamsChange":return!Sd(i.url,t.url)||!Ka(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!I1(i,t)||!Ka(i.queryParams,t.queryParams);default:return!I1(i,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new iU(n)):(s.data=o.data,s._resolvedData=o._resolvedData),h_(i,t,s.component?a?a.children:null:e,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Nb(a.outlet.component,o))}else o&&f_(t,a,r),r.canActivateChecks.push(new iU(n)),h_(i,null,s.component?a?a.children:null:e,n,r)})(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),Hr(s,(o,a)=>f_(o,e.getContext(a),r)),r}function f_(i,t,e){const n=Yf(i),r=i.value;Hr(n,(s,o)=>{f_(s,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new Nb(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}class Xce{}function rU(i){return new Mn(t=>t.error(i))}class Zce{constructor(t,e,n,r,s,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const t=Pb(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,nn);if(null===e)return null;const n=new Ab([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},nn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Hl(n,e),s=new zH(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const e=t.value,n=UH(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const s of Object.keys(e.children)){const o=e.children[s],a=ZH(t,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;n.push(...l)}const r=sU(n);return function Qce(i){i.sort((t,e)=>t.value.outlet===nn?-1:e.value.outlet===nn?1:t.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(t,e,n,r){for(const s of t){const o=this.processSegmentAgainstRoute(s,e,n,r);if(null!==o)return o}return eU(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!JH(t,e,n,r))return null;let s,o=[],a=[];if("**"===t.path){const f=n.length>0?TH(n).parameters:{};s=new Ab(n,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,lU(t),Oo(t),t.component,t,oU(e),aU(e)+n.length,cU(t))}else{const f=Ob(e,t,n);if(!f.matched)return null;o=f.consumedSegments,a=f.remainingSegments,s=new Ab(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,lU(t),Oo(t),t.component,t,oU(e),aU(e)+o.length,cU(t))}const l=function Jce(i){return i.children?i.children:i.loadChildren?i._loadedConfig.routes:[]}(t),{segmentGroup:c,slicedSegments:u}=Pb(e,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new Hl(s,f)]}if(0===l.length&&0===u.length)return[new Hl(s,[])];const d=Oo(t)===r,h=this.processSegment(l,c,u,d?nn:r);return null===h?null:[new Hl(s,h)]}}function eue(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function sU(i){const t=[],e=new Set;for(const n of i){if(!eue(n)){t.push(n);continue}const r=t.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):t.push(n)}for(const n of e){const r=sU(n.children);t.push(new Hl(n.value,r))}return t.filter(n=>!e.has(n))}function oU(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function aU(i){let t=i,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function lU(i){return i.data||{}}function cU(i){return i.resolve||{}}function uU(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function B1(i){return Md(t=>{const e=i(t);return e?Cr(e).pipe(en(()=>t)):_t(t)})}class lue extends class aue{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const V1=new ve("ROUTES");class dU{constructor(t,e,n,r){this.injector=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe(en(s=>{this.onLoadEndListener&&this.onLoadEndListener(e);const o=s.create(t);return new L1(EH(o.injector.get(V1,void 0,Ft.Self|Ft.Optional)).map(F1),o)}),Xa(s=>{throw e._loader$=void 0,s}));return e._loader$=new wle(r,()=>new Dt).pipe(gH()),e._loader$}loadModuleFactory(t){return Za(t()).pipe(hr(e=>e instanceof YF?_t(e):Cr(this.compiler.compileModuleAsync(e))))}}class uue{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function due(i){throw i}function hue(i,t,e){return t.parse("/")}function hU(i,t){return _t(null)}const fue={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pue={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ds=(()=>{class i{constructor(e,n,r,s,o,a,l){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Dt,this.errorHandler=due,this.malformedUriErrorHandler=hue,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:hU,afterPreactivation:hU},this.urlHandlingStrategy=new uue,this.routeReuseStrategy=new lue,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(El),this.console=o.get(OQ);const d=o.get(Ot);this.isNgZoneEnabled=d instanceof Ot&&Ot.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function Hle(){return new Cd(new dn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new dU(o,a,h=>this.triggerEvent(new xH(h)),h=>this.triggerEvent(new wH(h))),this.routerState=HH(this.currentUrlTree,this.rootComponentType),this.transitions=new In({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const n=this.events;return e.pipe(pi(r=>0!==r.id),en(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Md(r=>{let s=!1,o=!1;return _t(r).pipe(Ii(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Md(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return fU(a.source)&&(this.browserUrlTree=a.extractedUrl),_t(a).pipe(Md(d=>{const h=this.transitions.getValue();return n.next(new C1(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?yl:Promise.resolve(d)}),function Lce(i,t,e,n){return Md(r=>function kce(i,t,e,n,r){return new Oce(i,t,e,n,r).apply()}(i,t,e,r.extractedUrl,n).pipe(en(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ii(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function tue(i,t,e,n,r){return hr(s=>function Kce(i,t,e,n,r="emptyOnly",s="legacy"){try{const o=new Zce(i,t,e,n,r,s).recognize();return null===o?rU(new Xce):_t(o)}catch(o){return rU(o)}}(i,t,s.urlAfterRedirects,e(s.urlAfterRedirects),n,r).pipe(en(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ii(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new Tle(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);n.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:m,extras:g}=a,_=new C1(h,this.serializeUrl(f),p,m);n.next(_);const v=HH(f,this.rootComponentType).snapshot;return _t(Object.assign(Object.assign({},a),{targetSnapshot:v,urlAfterRedirects:f,extras:Object.assign(Object.assign({},g),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),yl}),B1(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),Ii(a=>{const l=new Dle(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),en(a=>Object.assign(Object.assign({},a),{guards:Fce(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function Uce(i,t){return hr(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?_t(Object.assign(Object.assign({},e),{guardsResult:!0})):function zce(i,t,e,n){return Cr(i).pipe(hr(r=>function Yce(i,t,e,n,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?_t(s.map(a=>{const l=Bb(a,t,r);let c;if(function xce(i){return i&&Yc(i.canDeactivate)}(l))c=Za(l.canDeactivate(i,t,e,n));else{if(!Yc(l))throw new Error("Invalid CanDeactivate guard");c=Za(l(i,t,e,n))}return c.pipe(jf())})).pipe(c_()):_t(!0)}(r.component,r.route,e,t,n)),jf(r=>!0!==r,!0))}(o,n,r,i).pipe(hr(a=>a&&function _ce(i){return"boolean"==typeof i}(a)?function Gce(i,t,e,n){return Cr(t).pipe(Wf(r=>iT(function jce(i,t){return null!==i&&t&&t(new kle(i)),_t(!0)}(r.route.parent,n),function Wce(i,t){return null!==i&&t&&t(new Ple(i)),_t(!0)}(r.route,n),function qce(i,t,e){const n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function Nce(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(o)).filter(o=>null!==o).map(o=>w1(()=>_t(o.guards.map(l=>{const c=Bb(l,o.node,e);let u;if(function bce(i){return i&&Yc(i.canActivateChild)}(c))u=Za(c.canActivateChild(n,i));else{if(!Yc(c))throw new Error("Invalid CanActivateChild guard");u=Za(c(n,i))}return u.pipe(jf())})).pipe(c_())));return _t(s).pipe(c_())}(i,r.path,e),function $ce(i,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return _t(!0);const r=n.map(s=>w1(()=>{const o=Bb(s,t,e);let a;if(function yce(i){return i&&Yc(i.canActivate)}(o))a=Za(o.canActivate(t,i));else{if(!Yc(o))throw new Error("Invalid CanActivate guard");a=Za(o(t,i))}return a.pipe(jf())}));return _t(r).pipe(c_())}(i,r.route,e))),jf(r=>!0!==r,!0))}(n,s,i,t):_t(a)),en(a=>Object.assign(Object.assign({},e),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Ii(a=>{if(Td(a.guardsResult)){const c=S1(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new Ale(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),pi(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),B1(a=>{if(a.guards.canActivateChecks.length)return _t(a).pipe(Ii(l=>{const c=new Rle(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Md(l=>{let c=!1;return _t(l).pipe(function nue(i,t){return hr(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return _t(e);let s=0;return Cr(r).pipe(Wf(o=>function iue(i,t,e,n){return function rue(i,t,e,n){const r=uU(i);if(0===r.length)return _t({});const s={};return Cr(r).pipe(hr(o=>function sue(i,t,e,n){const r=Bb(i,t,n);return Za(r.resolve?r.resolve(t,e):r(t,e))}(i[o],t,e,n).pipe(Ii(a=>{s[o]=a}))),M1(1),hr(()=>uU(s).length===r.length?_t(s):yl))}(i._resolve,i,t,n).pipe(en(s=>(i._resolvedData=s,i.data=Object.assign(Object.assign({},i.data),UH(i,e).resolve),null)))}(o.route,n,i,t)),Ii(()=>s++),M1(1),hr(o=>s===r.length?_t(e):yl))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ii({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Ii(l=>{const c=new Ile(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),B1(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),en(a=>{const l=function rce(i,t,e){const n=o_(i,t._root,e?e._root:void 0);return new VH(n,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),Ii(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((i,t,e)=>en(n=>(new mce(t,n.targetRouterState,n.currentRouterState,e).activate(i),n)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Ii({next(){s=!0},complete(){s=!0}}),XV(()=>{var a;s||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===r.id&&(this.currentNavigation=null)}),Xa(a=>{if(o=!0,function Nle(i){return i&&i[CH]}(a)){const l=Td(a.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new bH(r.id,this.serializeUrl(r.extractedUrl),a.message);n.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fU(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new Ele(r.id,this.serializeUrl(r.extractedUrl),a);n.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return yl}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{var r;const s={replaceUrl:!0},o=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(e.url);this.scheduleNavigation(a,n,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){KH(e),this.config=e.map(F1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function ace(i,t,e,n,r){if(0===e.length)return k1(t.root,t.root,t.root,n,r);const s=function lce(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new jH(!0,0,i);let t=0,e=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Hr(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new jH(e,t,n)}(e);if(s.toRoot())return k1(t.root,t.root,new dn([],{}),n,r);const o=function cce(i,t,e){if(i.isAbsolute)return new O1(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const s=e.snapshot._urlSegment;return new O1(s,s===t.root,0)}const n=Rb(i.commands[0])?0:1;return function uce(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new Error("Invalid number of '../'");r=n.segments.length}return new O1(n,!1,r-s)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+n,i.numberOfDoubleDots)}(s,t,i),a=o.processChildren?Ib(o.segmentGroup,o.index,s.commands):$H(o.segmentGroup,o.index,s.commands);return k1(t.root,o.segmentGroup,a,n,r)}(c,this.currentUrlTree,e,d,null!=u?u:null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=Td(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function mue(i){for(let t=0;t<i.length;t++){const e=i[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?Object.assign({},fue):!1===n?Object.assign({},pue):n,Td(e))return AH(this.currentUrlTree,e,r);const s=this.parseUrl(e);return AH(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const s=e[r];return null!=s&&(n[r]=s),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new $f(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,n,r,s,o){var a,l;if(this.disposed)return Promise.resolve(!1);let c,u,d;o?(c=o.resolve,u=o.reject,d=o.promise):d=new Promise((p,m)=>{c=p,u=m});const h=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),f=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):f=0,this.setTransition({id:h,targetPageId:f,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e),s=Object.assign(Object.assign({},n.extras.state),this.generateNgRouterState(n.id,n.targetPageId));this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,n=!1){var r,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,n){const r=new bH(e.id,this.serializeUrl(e.extractedUrl),n);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return i.\u0275fac=function(e){hg()},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();function fU(i){return"imperative"!==i}let Vb=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.route=n,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new Dt,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const n=this.renderer,r=this.el.nativeElement;null!==e?n.setAttribute(r,"tabindex",e):n.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:Xf(this.skipLocationChange),replaceUrl:Xf(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Xf(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(C(Ds),C(Ed),Ws("tabindex"),C(ca),C(Ve))},i.\u0275dir=ae({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,n){1&e&&$e("click",function(){return n.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[fr]}),i})(),H1=(()=>{class i{constructor(e,n,r){this.router=e,this.route=n,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new Dt,this.subscription=e.events.subscribe(s=>{s instanceof $f&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,n,r,s,o){if(0!==e||n||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const a={skipLocationChange:Xf(this.skipLocationChange),replaceUrl:Xf(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Xf(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(C(Ds),C(Ed),C(Rf))},i.\u0275dir=ae({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,n){1&e&&$e("click",function(s){return n.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&bn("target",n.target)("href",n.href,HC)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[fr]}),i})();function Xf(i){return""===i||!!i}let pU=(()=>{class i{constructor(e,n,r,s,o,a){this.router=e,this.element=n,this.renderer=r,this.cdr=s,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Wt,this.routerEventsSubscription=e.events.subscribe(l=>{l instanceof $f&&this.update()})}ngAfterContentInit(){_t(this.links.changes,this.linksWithHrefs.changes,_t(null)).pipe(Nm()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const n=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Cr(n).pipe(Nm()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){const n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(n=>{e?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),this.isActiveChange.emit(e))})}isLinkActive(e){const n=function gue(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,n)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return i.\u0275fac=function(e){return new(e||i)(C(Ds),C(Ve),C(ca),C(Zi),C(Vb,8),C(H1,8))},i.\u0275dir=ae({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(e,n,r){if(1&e&&(fi(r,Vb,5),fi(r,H1,5)),2&e){let s;Ct(s=St())&&(n.links=s),Ct(s=St())&&(n.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[fr]}),i})();class mU{}class gU{preload(t,e){return _t(null)}}let _U=(()=>{class i{constructor(e,n,r,s){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=new dU(r,n,l=>e.triggerEvent(new xH(l)),l=>e.triggerEvent(new wH(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(pi(e=>e instanceof $f),Wf(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(El);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const s of n)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(e,s)):s.children&&r.push(this.processRoutes(e,s.children));return Cr(r).pipe(Nm(),en(s=>{}))}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>(n._loadedConfig?_t(n._loadedConfig):this.loader.load(e.injector,n)).pipe(hr(s=>(n._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return i.\u0275fac=function(e){return new(e||i)(J(Ds),J(R2),J(Ui),J(mU))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})(),U1=(()=>{class i{constructor(e,n,r={}){this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof C1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof $f&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof MH&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new MH(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(e){hg()},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();const Dd=new ve("ROUTER_CONFIGURATION"),vU=new ve("ROUTER_FORROOT_GUARD"),vue=[Tg,{provide:OH,useClass:PH},{provide:Ds,useFactory:function Cue(i,t,e,n,r,s,o={},a,l){const c=new Ds(null,i,t,e,n,r,EH(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function Sue(i,t){i.errorHandler&&(t.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(t.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(t.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(t.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(t.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(t.canceledNavigationResolution=i.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,h;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[OH,u_,Tg,Ui,R2,V1,Dd,[class cue{},new Co],[class oue{},new Co]]},u_,{provide:Ed,useFactory:function Eue(i){return i.routerState.root},deps:[Ds]},_U,gU,class _ue{preload(t,e){return e().pipe(Xa(()=>_t(null)))}},{provide:Dd,useValue:{enableTracing:!1}}];function yue(){return new L2("Router",Ds)}let bue=(()=>{class i{constructor(e,n){}static forRoot(e,n){return{ngModule:i,providers:[vue,yU(e),{provide:vU,useFactory:Mue,deps:[[Ds,new Co,new Yu]]},{provide:Dd,useValue:n||{}},{provide:Rf,useFactory:wue,deps:[sd,[new Ay(CE),new Co],Dd]},{provide:U1,useFactory:xue,deps:[Ds,Bee,Dd]},{provide:mU,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:gU},{provide:L2,multi:!0,useFactory:yue},[z1,{provide:lE,multi:!0,useFactory:Tue,deps:[z1]},{provide:bU,useFactory:Due,deps:[z1]},{provide:dE,multi:!0,useExisting:bU}]]}}static forChild(e){return{ngModule:i,providers:[yU(e)]}}}return i.\u0275fac=function(e){return new(e||i)(J(vU,8),J(Ds,8))},i.\u0275mod=at({type:i}),i.\u0275inj=st({}),i})();function xue(i,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new U1(i,t,e)}function wue(i,t,e={}){return e.useHash?new SJ(i,t):new eN(i,t)}function Mue(i){return"guarded"}function yU(i){return[{provide:_9,multi:!0,useValue:i},{provide:V1,multi:!0,useValue:i}]}let z1=(()=>{class i{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Dt}appInitializer(){return this.injector.get(wJ,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let n=null;const r=new Promise(a=>n=a),s=this.injector.get(Ds),o=this.injector.get(Dd);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),n(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?_t(null):(this.initNavigation=!0,n(!0),this.resultOfPreactivationDone),s.initialNavigation()):n(!0),r})}bootstrapListener(e){const n=this.injector.get(Dd),r=this.injector.get(_U),s=this.injector.get(U1),o=this.injector.get(Ds),a=this.injector.get(l0);e===a.components[0]&&(("enabledNonBlocking"===n.initialNavigation||void 0===n.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(e){return new(e||i)(J(Ui))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();function Tue(i){return i.appInitializer.bind(i)}function Due(i){return i.bootstrapListener.bind(i)}const bU=new ve("Router Initializer");class zue{constructor(t,e,n=!0){this.key=t,this.value=e,this.key=n?t.replace(/['"]/g,"").trim():t.trim(),this.value=n?e.replace(/['"]/g,"").trim():e.trim(),this.value=this.value.replace(/;/,"")}}function xU(i){let t=typeof i;return"object"===t?i.constructor===Array?"array":i.constructor===Set?"set":"object":t}function MU(i){const[t,...e]=i.split(":");return new zue(t,e.join(":"))}function CU(i,t){return t.key&&(i[t.key]=t.value),i}let jue=(()=>{class i extends wi{constructor(e,n,r,s,o,a,l,c,u){var d;super(e,null,n,r),this.sanitizer=s,this.ngStyleInstance=l,this.DIRECTIVE_KEY="ngStyle",this.ngStyleInstance||(this.ngStyleInstance=new ad(e,o,a)),this.init();const h=null!==(d=this.nativeElement.getAttribute("style"))&&void 0!==d?d:"";this.fallbackStyles=this.buildStyleMap(h),this.isServer=c&&kf(u)}updateWithValue(e){const n=this.buildStyleMap(e);this.ngStyleInstance.ngStyle=Object.assign(Object.assign({},this.fallbackStyles),n),this.isServer&&this.applyStyleToElement(n),this.ngStyleInstance.ngDoCheck()}clearStyles(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}buildStyleMap(e){const n=r=>{var s;return null!==(s=this.sanitizer.sanitize(En.STYLE,r))&&void 0!==s?s:""};if(e)switch(xU(e)){case"string":return SU(function Gue(i,t=";"){return String(i).trim().split(t).map(e=>e.trim()).filter(e=>""!==e)}(e),n);case"array":return SU(e,n);default:return function wU(i,t){let e=[];return"set"===xU(i)?i.forEach(n=>e.push(n)):Object.keys(i).forEach(n=>{e.push(`${n}:${i[n]}`)}),function Wue(i,t){return i.map(MU).filter(n=>!!n).map(n=>(t&&(n.value=t(n.value)),n)).reduce(CU,{})}(e,t)}(e,n)}return{}}ngDoCheck(){this.ngStyleInstance.ngDoCheck()}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(mi),C(vi),C(kg),C(rd),C(ca),C(ad,10),C(Uf),C(Xs))},i.\u0275dir=ae({type:i,features:[he]}),i})();const $ue=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"];let Hb=(()=>{class i extends jue{constructor(){super(...arguments),this.inputs=$ue}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275dir=ae({type:i,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[he]}),i})();function SU(i,t){return i.map(MU).filter(n=>!!n).map(n=>(t&&(n.value=t(n.value)),n)).reduce(CU,{})}let EU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[u1]]}),i})();function que(i,t){1&i&&(M(0,"mat-icon"),k(1,"close"),T())}function Yue(i,t){1&i&&(M(0,"mat-icon"),k(1,"menu"),T())}function Xue(i,t){1&i&&(M(0,"span"),k(1,"Close"),T())}function Kue(i,t){if(1&i&&(M(0,"span"),k(1),T()),2&i){const e=Qe();$(1),mg(e.title)}}function Zue(i,t){1&i&&(M(0,"mat-icon"),k(1,"light_mode"),T())}function Que(i,t){1&i&&(M(0,"mat-icon"),k(1,"dark_mode"),T())}const Jue=function(i){return{transform:i}};let ede=(()=>{class i{constructor(e){this.appService=e,this.mini=!1,this.collapsed=!0,this.title=this.appService.title}open(){this.mini&&(this.collapsed=!1),this.mini=!this.mini}click(){this.collapsed=!0}ngOnInit(){}get darkMode(){return this.appService.darkMode}set darkMode(e){this.appService.setDarkMode(e,!0)}}return i.\u0275fac=function(e){return new(e||i)(C(Wi))},i.\u0275cmp=ft({type:i,selectors:[["app-sidemenu"]],hostVars:4,hostBindings:function(e,n){2&e&&qt("mini",n.mini)("collapsed",n.collapsed)},decls:74,vars:19,consts:[[1,"side"],["fxLayout","column","fxLayoutAlign","start start","fxFlex","1 1",1,"menu"],["mat-list-item","",3,"click"],[4,"ngIf"],["mat-list-item","",1,"title"],[2,"opacity","0","transition","0"],["mat-list-item","","routerLink","/house","routerLinkActive","active",3,"disabled","click"],["house","routerLinkActive"],[2,"font-family","Material Icons Outlined"],["mat-list-item","","routerLink","/stairs","routerLinkActive","active",3,"disabled","click"],["stairs","routerLinkActive"],["mat-list-item","","routerLink","/facade","routerLinkActive","active",3,"disabled","click"],["facade","routerLinkActive"],["mat-list-item","","routerLink","/construction","routerLinkActive","active",3,"disabled","click"],["construction","routerLinkActive"],["mat-list-item","","routerLink","/wired","routerLinkActive","active",3,"disabled","click"],["wired","routerLinkActive"],["mat-list-item","","routerLink","/costs","routerLinkActive","active",3,"disabled","click"],["mat-list-item","","routerLink","/installations","routerLinkActive","active",3,"disabled","click"],["installations","routerLinkActive"],["mat-list-item","","routerLink","/map","routerLinkActive","active",3,"disabled","click"],["map","routerLinkActive"],["fxFlex","1 1"],["mat-list-item","","color","accent",3,"click"],["fxLayoutAlign","start center","fxLayoutGap","16px"],["mat-list-item","",2,"opacity","0.7",3,"click"],[3,"ngStyle"]],template:function(e,n){if(1&e&&(M(0,"div",0)(1,"mat-action-list",1)(2,"button",2),$e("click",function(){return n.open()}),Ge(3,que,2,0,"mat-icon",3),Ge(4,Yue,2,0,"mat-icon",3),Ge(5,Xue,2,0,"span",3),Ge(6,Kue,2,1,"span",3),T(),M(7,"button",4)(8,"mat-icon",5),k(9,"gite"),T(),M(10,"span"),k(11),T()(),M(12,"button",6,7),$e("click",function(){return n.click()}),M(14,"mat-icon",8),k(15,"home"),T(),M(16,"span"),k(17,"The house"),T()(),M(18,"button",9,10),$e("click",function(){return n.click()}),M(20,"mat-icon",8),k(21,"stairs"),T(),M(22,"span"),k(23,"Stairs"),T()(),M(24,"button",11,12),$e("click",function(){return n.click()}),M(26,"mat-icon"),k(27,"roofing"),T(),M(28,"span"),k(29,"Fa\xe7ade"),T()(),M(30,"button",13,14),$e("click",function(){return n.click()}),M(32,"mat-icon"),k(33,"handyman"),T(),M(34,"span"),k(35,"Construction"),T()(),M(36,"button",15,16),$e("click",function(){return n.click()}),M(38,"mat-icon"),k(39,"bolt"),T(),M(40,"span"),k(41,"Wired"),T()(),M(42,"button",17,16),$e("click",function(){return n.click()}),M(44,"mat-icon",8),k(45,"savings"),T(),M(46,"span"),k(47,"Costs"),T()(),M(48,"button",18,19),$e("click",function(){return n.click()}),M(50,"mat-icon"),k(51,"solar_power"),T(),M(52,"span"),k(53,"Installations"),T()(),M(54,"button",20,21),$e("click",function(){return n.click()}),M(56,"mat-icon"),k(57,"pin_drop"),T(),M(58,"span"),k(59,"Map"),T()(),ie(60,"div",22),M(61,"button",23),$e("click",function(){return n.darkMode=!n.darkMode}),M(62,"mat-icon",5),k(63,"dark_mode"),T(),M(64,"span",24),Ge(65,Zue,2,0,"mat-icon",3),Ge(66,Que,2,0,"mat-icon",3),M(67,"div"),k(68),T()()(),M(69,"button",25),$e("click",function(){return n.collapsed=!n.collapsed}),M(70,"mat-icon",26),k(71,"double_arrow"),T(),M(72,"span"),k(73,"Collapse"),T()()()()),2&e){const r=hi(13),s=hi(19),o=hi(25),a=hi(31),l=hi(37),c=hi(49),u=hi(55);$(3),Z("ngIf",!n.mini),$(1),Z("ngIf",n.mini),$(1),Z("ngIf",!n.mini),$(1),Z("ngIf",n.mini),$(5),mg(n.title),$(1),Z("disabled",r.isActive),$(6),Z("disabled",s.isActive),$(6),Z("disabled",o.isActive),$(6),Z("disabled",a.isActive),$(6),Z("disabled",l.isActive),$(6),Z("disabled",l.isActive),$(6),Z("disabled",c.isActive),$(6),Z("disabled",u.isActive),$(11),Z("ngIf",n.darkMode),$(1),Z("ngIf",!n.darkMode),$(2),At("",n.darkMode?"Light":"Dark"," mode"),$(2),Z("ngStyle",Tl(17,Jue,"rotate("+(n.collapsed?0:-180)+"deg) scale(0.7)"))}},directives:[voe,Jg,Gf,m1,yoe,Ks,fH,Vb,pU,vb,ad,Hb],styles:[".side[_ngcontent-%COMP%]{top:0;position:fixed;display:flex;flex-direction:column;max-width:200px;overflow:hidden;transition:.6s;height:100vh;max-height:100vh;border-right:1px solid var(--color-30);border-bottom:1px solid var(--color-30)}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{height:100vh;padding:0}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{min-height:56px;white-space:nowrap;opacity:1;transition:.4s}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:24px;padding-right:24px}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transition:.4s}.side[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:initial;pointer-events:none;opacity:.7}[_nghost-%COMP%]{display:flex;flex-direction:row}.collapsed[_nghost-%COMP%] > .side[_ngcontent-%COMP%]{max-width:50px}.collapsed[_nghost-%COMP%] > .side[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{opacity:.5}.collapsed[_nghost-%COMP%] > .side[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]:hover{opacity:1}.mini[_nghost-%COMP%] > .side[_ngcontent-%COMP%]{max-height:50px}"]}),i})();const tde=["*",[["mat-toolbar-row"]]],nde=["*","mat-toolbar-row"],ide=_d(class{constructor(i){this._elementRef=i}});let rde=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ae({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i})(),sde=(()=>{class i extends ide{constructor(e,n,r){super(e),this._platform=n,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(Es),C(Lt))},i.\u0275cmp=ft({type:i,selectors:[["mat-toolbar"]],contentQueries:function(e,n,r){if(1&e&&fi(r,rde,5),2&e){let s;Ct(s=St())&&(n._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,n){2&e&&qt("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",0===n._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[he],ngContentSelectors:nde,decls:2,vars:0,template:function(e,n){1&e&&(zi(tde),Tn(0),Tn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),ode=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[pt],pt]}),i})(),ade=(()=>{class i{constructor(e){this.appService=e,this.year=(new Date).getFullYear(),this.title=this.appService.title}ngOnInit(){}ngAfterViewInit(){}}return i.\u0275fac=function(e){return new(e||i)(C(Wi))},i.\u0275cmp=ft({type:i,selectors:[["app-root"]],decls:14,vars:2,consts:[[1,"example-container"],["mode","side","opened",""],["fxLayout","column","fxLayoutAlign","center center"],["href","https://github.com/PassiveOpen/PassiveOpen.github.io"]],template:function(e,n){1&e&&(M(0,"mat-sidenav-container",0)(1,"mat-sidenav",1),ie(2,"app-sidemenu"),T(),M(3,"mat-sidenav-content")(4,"main"),ie(5,"router-outlet"),T(),M(6,"footer")(7,"mat-toolbar",2)(8,"div"),k(9),T(),M(10,"div"),k(11," Everything is free and open source. See "),M(12,"a",3),k(13,"github"),T()()()()()()),2&e&&($(9),gg(" ",n.title," 2019 - ",n.year," "))},directives:[h3,d3,ede,LT,kb,sde,Jg,Gf],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}main[_ngcontent-%COMP%]{min-height:calc(100vh - 56px)}footer[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{padding:48px 0;font-size:.8rem;opacity:.8;font-weight:400}.mat-drawer-content[_ngcontent-%COMP%]{overflow-y:hidden}"]}),i})();const lde=["mat-button",""],cde=["*"],dde=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],hde=_d(Wg(Pl(class{constructor(i){this._elementRef=i}})));let TU=(()=>{class i extends hde{constructor(e,n,r){super(e),this._focusMonitor=n,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of dde)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,n){e?this._focusMonitor.focusVia(this._getHostElement(),e,n):this._getHostElement().focus(n)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(n=>this._getHostElement().hasAttribute(n))}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(kl),C(ko,8))},i.\u0275cmp=ft({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,n){if(1&e&&ni(Ll,5),2&e){let r;Ct(r=St())&&(n.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,n){2&e&&(bn("disabled",n.disabled||null),qt("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-button-disabled",n.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[he],attrs:lde,ngContentSelectors:cde,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,n){1&e&&(zi(),M(0,"span",0),Tn(1),T(),ie(2,"span",1)(3,"span",2)),2&e&&($(2),qt("mat-button-ripple-round",n.isRoundButton||n.isIconButton),Z("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",n.isIconButton)("matRippleTrigger",n._getHostElement()))},directives:[Ll],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),i})(),W1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[fa,pt],pt]}),i})(),fde=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({}),i})();class j1{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Ub extends j1{constructor(t,e,n,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class $1 extends j1{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class pde extends j1{constructor(t){super(),this.element=t instanceof Ve?t.nativeElement:t}}class q1{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Ub?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof $1?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof pde?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class mde extends q1{constructor(t,e,n,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(t){const n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||Ui.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);-1!==r&&e.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let DU=(()=>{class i extends q1{constructor(e,n,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new Wt,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=n.createComponent(s,n.length,e.injector||n.injector);return n!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return i.\u0275fac=function(e){return new(e||i)(C(ed),C(Ar),C(Lt))},i.\u0275dir=ae({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[he]}),i})(),Kf=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({}),i})(),gde=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[Ss,pt,fde,Kf]]}),i})();const _de=["sliderWrapper"],Po=Uc({passive:!1}),wde={provide:Zr,useExisting:sn(()=>Y1),multi:!0};class Mde{}const Cde=tb(_d(Wg(class{constructor(i){this._elementRef=i}}),"accent"));let Y1=(()=>{class i extends Cde{constructor(e,n,r,s,o,a,l,c){super(e),this._focusMonitor=n,this._changeDetectorRef=r,this._dir=s,this._ngZone=a,this._animationMode=c,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new Wt,this.input=new Wt,this.valueChange=new Wt,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=Jn.EMPTY,this._pointerDown=u=>{this.disabled||this._isSliding||!p_(u)&&0!==u.button||this._ngZone.run(()=>{this._touchId=p_(u)?function Sde(i,t){for(let e=0;e<i.touches.length;e++){const n=i.touches[e].target;if(t===n||t.contains(n))return i.touches[e].identifier}}(u,this._elementRef.nativeElement):void 0;const d=IU(u,this._touchId);if(d){const h=this.value;this._isSliding="pointer",this._lastPointerEvent=u,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(u),this._focusHostElement(),this._updateValueFromPosition(d),this._valueOnSlideStart=h,u.cancelable&&u.preventDefault(),h!=this.value&&this._emitInputEvent()}})},this._pointerMove=u=>{if("pointer"===this._isSliding){const d=IU(u,this._touchId);if(d){u.preventDefault();const h=this.value;this._lastPointerEvent=u,this._updateValueFromPosition(d),h!=this.value&&this._emitInputEvent()}}},this._pointerUp=u=>{"pointer"===this._isSliding&&(!p_(u)||"number"!=typeof this._touchId||X1(u.changedTouches,this._touchId))&&(u.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=l,this.tabIndex=parseInt(o)||0,a.runOutsideAngular(()=>{const u=e.nativeElement;u.addEventListener("mousedown",this._pointerDown,Po),u.addEventListener("touchstart",this._pointerDown,Po)})}get invert(){return this._invert}set invert(e){this._invert=Nt(e)}get max(){return this._max}set max(e){this._max=Qs(e,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(e){this._min=Qs(e,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(e){this._step=Qs(e,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(e){this._thumbLabel=Nt(e)}get tickInterval(){return this._tickInterval}set tickInterval(e){this._tickInterval="auto"===e?"auto":"number"==typeof e||"string"==typeof e?Qs(e,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(e){if(e!==this._value){let n=Qs(e,0);this._roundToDecimal&&n!==this.min&&n!==this.max&&(n=parseFloat(n.toFixed(this._roundToDecimal))),this._value=n,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(e){this._vertical=Nt(e)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(e){this._focusHostElement(e)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const n=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${n})`}}_getTrackFillStyles(){const e=this.percent,r=this.vertical?`1, ${e}, 1`:`${e}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${r})`,display:0===e?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let e=100*this._tickIntervalPercent,a={backgroundSize:this.vertical?`2px ${e}%`:`${e}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${e/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const l=this._shouldInvertAxis();let c;c=this.vertical?l?"Bottom":"Top":l?"Right":"Left",a[`padding${c}`]=`${this._getThumbGap()}px`}return a}_getThumbContainerStyles(){const e=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?e:!e)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const e=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?e:!e}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{this._isActive=!!e&&"keyboard"!==e,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("mousedown",this._pointerDown,Po),e.removeEventListener("touchstart",this._pointerDown,Po),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(e){if(this.disabled||Lf(e)||this._isSliding&&"keyboard"!==this._isSliding)return;const n=this.value;switch(e.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}n!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",e.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(e){const n=this._document,r=p_(e),o=r?"touchend":"mouseup";n.addEventListener(r?"touchmove":"mousemove",this._pointerMove,Po),n.addEventListener(o,this._pointerUp,Po),r&&n.addEventListener("touchcancel",this._pointerUp,Po);const a=this._getWindow();void 0!==a&&a&&a.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const e=this._document;e.removeEventListener("mousemove",this._pointerMove,Po),e.removeEventListener("mouseup",this._pointerUp,Po),e.removeEventListener("touchmove",this._pointerMove,Po),e.removeEventListener("touchend",this._pointerUp,Po),e.removeEventListener("touchcancel",this._pointerUp,Po);const n=this._getWindow();void 0!==n&&n&&n.removeEventListener("blur",this._windowBlur)}_increment(e){const n=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(n+this.step*e,this.min,this.max)}_updateValueFromPosition(e){if(!this._sliderDimensions)return;let o=this._clamp(((this.vertical?e.y:e.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(o=1-o),0===o)this.value=this.min;else if(1===o)this.value=this.max;else{const a=this._calculateValue(o),l=Math.round((a-this.min)/this.step)*this.step+this.min;this.value=this._clamp(l,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let e;if("auto"==this.tickInterval){let n=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;e=Math.ceil(30/(n*this.step/(this.max-this.min)))*this.step/n}else e=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=RU(e)?e:0}_createChangeEvent(e=this.value){let n=new Mde;return n.source=this,n.value=e,n}_calculatePercentage(e){const n=((e||0)-this.min)/(this.max-this.min);return RU(n)?n:0}_calculateValue(e){return this.min+e*(this.max-this.min)}_clamp(e,n=0,r=1){return Math.max(n,Math.min(e,r))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(e){this._elementRef.nativeElement.focus(e)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(e){this.value=e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(kl),C(Zi),C(Il,8),Ws("tabindex"),C(Ot),C(Lt),C(ko,8))},i.\u0275cmp=ft({type:i,selectors:[["mat-slider"]],viewQuery:function(e,n){if(1&e&&ni(_de,5),2&e){let r;Ct(r=St())&&(n._sliderWrapper=r.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(e,n){1&e&&$e("focus",function(){return n._onFocus()})("blur",function(){return n._onBlur()})("keydown",function(s){return n._onKeydown(s)})("keyup",function(){return n._onKeyup()})("mouseenter",function(){return n._onMouseenter()})("selectstart",function(s){return s.preventDefault()}),2&e&&(Mf("tabIndex",n.tabIndex),bn("aria-disabled",n.disabled)("aria-valuemax",n.max)("aria-valuemin",n.min)("aria-valuenow",n.value)("aria-valuetext",null==n.valueText?n.displayValue:n.valueText)("aria-orientation",n.vertical?"vertical":"horizontal"),qt("mat-slider-disabled",n.disabled)("mat-slider-has-ticks",n.tickInterval)("mat-slider-horizontal",!n.vertical)("mat-slider-axis-inverted",n._shouldInvertAxis())("mat-slider-invert-mouse-coords",n._shouldInvertMouseCoords())("mat-slider-sliding",n._isSliding)("mat-slider-thumb-label-showing",n.thumbLabel)("mat-slider-vertical",n.vertical)("mat-slider-min-value",n._isMinValue())("mat-slider-hide-last-tick",n.disabled||n._isMinValue()&&n._getThumbGap()&&n._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[gt([wde]),he],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(e,n){1&e&&(M(0,"div",0,1)(2,"div",2),ie(3,"div",3)(4,"div",4),T(),M(5,"div",5),ie(6,"div",6),T(),M(7,"div",7),ie(8,"div",8)(9,"div",9),M(10,"div",10)(11,"span",11),k(12),T()()()()),2&e&&($(3),Z("ngStyle",n._getTrackBackgroundStyles()),$(1),Z("ngStyle",n._getTrackFillStyles()),$(1),Z("ngStyle",n._getTicksContainerStyles()),$(1),Z("ngStyle",n._getTicksStyles()),$(1),Z("ngStyle",n._getThumbContainerStyles()),$(5),mg(n.displayValue))},directives:[ad],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}\n'],encapsulation:2,changeDetection:0}),i})();function RU(i){return!isNaN(i)&&isFinite(i)}function p_(i){return"t"===i.type[0]}function IU(i,t){let e;return e=p_(i)?"number"==typeof t?X1(i.touches,t)||X1(i.changedTouches,t):i.touches[0]||i.changedTouches[0]:i,e?{x:e.clientX,y:e.clientY}:void 0}function X1(i,t){for(let e=0;e<i.length;e++)if(i[e].identifier===t)return i[e]}let Ede=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[Ss,pt],pt]}),i})(),PU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({}),i})(),Bde=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[fa,pt,Hg,PU],pt,PU]}),i})();const LU=UN();class Vde{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=er(-this._previousScrollPosition.left),t.style.top=er(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,n=t.style,r=this._document.body.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),LU&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),LU&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}}class Hde{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class FU{enable(){}disable(){}attach(){}}function K1(i,t){return t.some(e=>i.bottom<e.top||i.top>e.bottom||i.right<e.left||i.left>e.right)}function NU(i,t){return t.some(e=>i.top<e.top||i.bottom>e.bottom||i.left<e.left||i.right>e.right)}class Ude{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();K1(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let zde=(()=>{class i{constructor(e,n,r,s){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new FU,this.close=o=>new Hde(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Vde(this._viewportRuler,this._document),this.reposition=o=>new Ude(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return i.\u0275fac=function(e){return new(e||i)(J(O0),J(Vg),J(Ot),J(Lt))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class BU{constructor(t){if(this.scrollStrategy=new FU,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class zb{constructor(t,e,n,r,s){this.offsetX=n,this.offsetY=r,this.panelClass=s,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class Gde{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}class Wde{constructor(t,e,n,r,s,o,a,l,c){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new Dt,this._attachments=new Dt,this._detachments=new Dt,this._locationChanges=Jn.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new Dt,this._outsidePointerEvents=new Dt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ts(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(t=this._host)||void 0===t||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=er(this._config.width),t.height=er(this._config.height),t.minWidth=er(this._config.minWidth),t.minHeight=er(this._config.minHeight),t.maxWidth=er(this._config.maxWidth),t.maxHeight=er(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;!t||(t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500)))}_toggleClasses(t,e,n){const r=PN(e||[]).filter(s=>!!s);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(kn(Nh(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let Z1=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){var e;null===(e=this._containerElement)||void 0===e||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||ZE()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const n=this._document.createElement("div");n.classList.add(e),ZE()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return i.\u0275fac=function(e){return new(e||i)(J(Lt),J(Es))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const VU="cdk-overlay-connected-position-bounding-box",jde=/([A-Za-z%]+)$/;class $de{constructor(t,e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Dt,this._resizeSubscription=Jn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(VU),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),c=this._getOverlayPoint(l,e,a),u=this._getOverlayFit(c,e,n,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,n)?s.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ad(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(VU),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let r,s;if("center"==n.originX)r=t.left+t.width/2;else{const o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==n.originX?o:a}return e.left<0&&(r-=e.left),s="center"==n.originY?t.top+t.height/2:"top"==n.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,n){let r,s;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,n,r){const s=UU(e);let{x:o,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-n.height,p=this._subtractOverflows(s.width,0-o,o+s.width-n.width),m=this._subtractOverflows(s.height,h,f),g=p*m;return{visibleArea:g,isCompletelyWithinViewport:s.width*s.height===g,fitsInViewportVertically:m===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,s=n.right-e.x,o=HU(this._overlayRef.getConfig().minHeight),a=HU(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportHorizontally||null!=a&&a<=s;return(t.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=UU(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-n.top-t.y,0),c=Math.max(s.left-n.left-t.x,0);let u=0,d=0;return u=r.width<=s.width?c||-o:t.x<this._viewportMargin?s.left-n.left-t.x:0,d=r.height<=s.height?l||-a:t.y<this._viewportMargin?s.top-n.top-t.y:0,this._previousPushAmount={x:u,y:d},{x:t.x+u,y:t.y+d}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new Gde(t,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let s,o,a,u,d,h;if("top"===e.overlayY)o=t.y,s=n.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=n.height-t.y+2*this._viewportMargin,s=n.height-a+this._viewportMargin;else{const f=Math.min(n.bottom-t.y+n.top,t.y),p=this._lastBoundingBoxSize.height;s=2*f,o=t.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-p/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)h=n.width-t.x+this._viewportMargin,u=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)d=t.x,u=n.right-t.x;else{const f=Math.min(n.right-t.x+n.left,t.x),p=this._lastBoundingBoxSize.width;u=2*f,d=t.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=t.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=er(n.height),r.top=er(n.top),r.bottom=er(n.bottom),r.width=er(n.width),r.left=er(n.left),r.right=er(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=er(s)),o&&(r.maxWidth=er(o))}this._lastBoundingBoxSize=n,Ad(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Ad(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ad(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();Ad(n,this._getExactOverlayY(e,t,u)),Ad(n,this._getExactOverlayX(e,t,u))}else n.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=er(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=er(o.maxWidth):s&&(n.maxWidth="")),Ad(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=er(s.y),r}_getExactOverlayX(t,e,n){let o,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),o=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=er(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:NU(t,n),isOriginOutsideView:K1(t,n),isOverlayClipped:NU(e,n),isOverlayOutsideView:K1(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&PN(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Ve)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function Ad(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function HU(i){if("number"!=typeof i&&null!=i){const[t,e]=i.split(jde);return e&&"px"!==e?null:parseFloat(t)}return i||null}function UU(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const zU="cdk-global-overlay-wrapper";class qde{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(zU),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=n,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);t.position=this._cssPosition,t.marginLeft=l?"0":this._leftOffset,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,l?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(zU),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Yde=(()=>{class i{constructor(e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new qde}flexibleConnectedTo(e){return new $de(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(e){return new(e||i)(J(Vg),J(Lt),J(Es),J(Z1))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),GU=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(e){return new(e||i)(J(Lt))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Xde=(()=>{class i extends GU{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(e){return new(e||i)(J(Lt),J(Ot,8))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Kde=(()=>{class i extends GU{constructor(e,n,r){super(e),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=ud(s)},this._clickListener=s=>{const o=ud(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(s)):d.next(s)}}}add(e){if(super.add(e),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(e){return new(e||i)(J(Lt),J(Es),J(Ot,8))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Zde=0,Ul=(()=>{class i{constructor(e,n,r,s,o,a,l,c,u,d,h){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h}create(e){const n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new BU(e);return o.direction=o.direction||this._directionality.value,new Wde(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const n=this._document.createElement("div");return n.id="cdk-overlay-"+Zde++,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(l0)),new mde(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(e){return new(e||i)(J(zde),J(Z1),J(ed),J(Yde),J(Xde),J(Ui),J(Ot),J(Lt),J(Il),J(Tg),J(Kde))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})();const Qde=new ve("cdk-connected-overlay-scroll-strategy");let Jde=(()=>{class i{constructor(e){this.elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(C(Ve))},i.\u0275dir=ae({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),i})();const the={provide:Qde,deps:[Ul],useFactory:function ehe(i){return()=>i.scrollStrategies.reposition()}};let Zf=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({providers:[Ul,the],imports:[[dd,Kf,P0],P0]}),i})();const she={provide:new ve("mat-menu-scroll-strategy"),deps:[Ul],useFactory:function rhe(i){return()=>i.scrollStrategies.reposition()}};let ohe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({providers:[she],imports:[[Ss,pt,fa,Zf],hd,pt]}),i})();function ahe(i,t){}class Q1{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const lhe={dialogContainer:Kr("dialogContainer",[Xn("void, exit",bt({opacity:0,transform:"scale(0.7)"})),Xn("enter",bt({transform:"none"})),ri("* => enter",dB([Yn("150ms cubic-bezier(0, 0, 0.2, 1)",bt({transform:"none",opacity:1})),oT("@*",sT(),{optional:!0})])),ri("* => void, * => exit",dB([Yn("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",bt({opacity:0})),oT("@*",sT(),{optional:!0})]))])};let che=(()=>{class i extends q1{constructor(e,n,r,s,o,a,l,c){super(),this._elementRef=e,this._focusTrapFactory=n,this._changeDetectorRef=r,this._config=o,this._interactivityChecker=a,this._ngZone=l,this._focusMonitor=c,this._animationStateChanged=new Wt,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(u)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=KE())}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(n)}_focusByCssSelector(e,n){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,n)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{n||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const n=KE(),r=this._elementRef.nativeElement;(!n||n===this._document.body||n===r||r.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=KE();return e===n||e.contains(n)}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(iB),C(Zi),C(Lt,8),C(Q1),C(tT),C(Ot),C(kl))},i.\u0275dir=ae({type:i,viewQuery:function(e,n){if(1&e&&ni(DU,7),2&e){let r;Ct(r=St())&&(n._portalOutlet=r.first)}},features:[he]}),i})(),uhe=(()=>{class i extends che{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:n}){"enter"===e?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:n}))}_onAnimationStart({toState:e,totalTime:n}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275cmp=ft({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,n){1&e&&$y("@dialogContainer.start",function(s){return n._onAnimationStart(s)})("@dialogContainer.done",function(s){return n._onAnimationDone(s)}),2&e&&(Mf("id",n._id),bn("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),Ky("@dialogContainer",n._state))},features:[he],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,n){1&e&&Ge(0,ahe,0,0,"ng-template",0)},directives:[DU],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[lhe.dialogContainer]}}),i})(),dhe=0;class hhe{constructor(t,e,n="mat-dialog-"+dhe++){this._overlayRef=t,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Dt,this._afterClosed=new Dt,this._beforeClosed=new Dt,this._state=0,e._id=n,e._animationStateChanged.pipe(pi(r=>"opened"===r.state),Ts(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(pi(r=>"closed"===r.state),Ts(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(pi(r=>27===r.keyCode&&!this.disableClose&&!Lf(r))).subscribe(r=>{r.preventDefault(),jU(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():jU(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(pi(e=>"closing"===e.state),Ts(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function jU(i,t,e){return void 0!==i._containerInstance&&(i._containerInstance._closeInteractionType=t),i.close(e)}const fhe=new ve("MatDialogData"),phe=new ve("mat-dialog-default-options"),$U=new ve("mat-dialog-scroll-strategy"),ghe={provide:$U,deps:[Ul],useFactory:function mhe(i){return()=>i.scrollStrategies.block()}};let _he=(()=>{class i{constructor(e,n,r,s,o,a,l,c,u,d){this._overlay=e,this._injector=n,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Dt,this._afterOpenedAtThisLevel=new Dt,this._ariaHiddenElements=new Map,this.afterAllClosed=w1(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Nf(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,n){n=function yhe(i,t){return Object.assign(Object.assign({},t),i)}(n,this._defaultOptions||new Q1),n.id&&this.getDialogById(n.id);const r=this._createOverlay(n),s=this._attachDialogContainer(r,n),o=this._attachDialogContent(e,s,r,n);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const n=this._getOverlayConfig(e);return this._overlay.create(n)}_getOverlayConfig(e){const n=new BU({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachDialogContainer(e,n){const s=Ui.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:Q1,useValue:n}]}),o=new Ub(this._dialogContainerType,n.viewContainerRef,s,n.componentFactoryResolver);return e.attach(o).instance}_attachDialogContent(e,n,r,s){const o=new this._dialogRefConstructor(r,n,s.id);if(e instanceof Dr)n.attachTemplatePortal(new $1(e,null,{$implicit:s.data,dialogRef:o}));else{const a=this._createInjector(s,o,n),l=n.attachComponentPortal(new Ub(e,s.viewContainerRef,a,s.componentFactoryResolver));o.componentInstance=l.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(e,n,r){const s=e&&e.viewContainerRef&&e.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:n}];return e.direction&&(!s||!s.get(Il,null,Ft.Optional))&&o.push({provide:Il,useValue:{value:e.direction,change:_t()}}),Ui.create({parent:s||this._injector,providers:o})}_removeOpenDialog(e){const n=this.openDialogs.indexOf(e);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let r=n.length-1;r>-1;r--){let s=n[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}}return i.\u0275fac=function(e){hg()},i.\u0275dir=ae({type:i}),i})(),vhe=(()=>{class i extends _he{constructor(e,n,r,s,o,a,l,c){super(e,n,s,a,l,o,hhe,uhe,fhe,c)}}return i.\u0275fac=function(e){return new(e||i)(J(Ul),J(Ui),J(Tg,8),J(phe,8),J($U),J(i,12),J(Z1),J(ko,8))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})(),bhe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({providers:[vhe,ghe],imports:[[Zf,Kf,pt],pt]}),i})(),Ohe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[fa,pt],pt]}),i})(),Phe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[pt],pt]}),i})();const Lhe=["thumbContainer"],Fhe=["toggleBar"],Nhe=["input"],Bhe=function(i){return{enterDuration:i}},Vhe=["*"],Hhe=new ve("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let Uhe=0;const zhe={provide:Zr,useExisting:sn(()=>KU),multi:!0};class Ghe{constructor(t,e){this.source=t,this.checked=e}}const Whe=tb(_d(Pl(Wg(class{constructor(i){this._elementRef=i}}))));let KU=(()=>{class i extends Whe{constructor(e,n,r,s,o,a){super(e),this._focusMonitor=n,this._changeDetectorRef=r,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++Uhe,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Wt,this.toggleChange=new Wt,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=o.color||"accent",this._noopAnimations="NoopAnimations"===a}get required(){return this._required}set required(e){this._required=Nt(e)}get checked(){return this._checked}set checked(e){this._checked=Nt(e),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(e){e.stopPropagation()}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}focus(e,n){n?this._focusMonitor.focusVia(this._inputElement,n,e):this._inputElement.nativeElement.focus(e)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new Ghe(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return i.\u0275fac=function(e){return new(e||i)(C(Ve),C(kl),C(Zi),Ws("tabindex"),C(Hhe),C(ko,8))},i.\u0275cmp=ft({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(e,n){if(1&e&&(ni(Lhe,5),ni(Fhe,5),ni(Nhe,5)),2&e){let r;Ct(r=St())&&(n._thumbEl=r.first),Ct(r=St())&&(n._thumbBarEl=r.first),Ct(r=St())&&(n._inputElement=r.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(e,n){2&e&&(Mf("id",n.id),bn("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),qt("mat-checked",n.checked)("mat-disabled",n.disabled)("mat-slide-toggle-label-before","before"==n.labelPosition)("_mat-animation-noopable",n._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[gt([zhe]),he],ngContentSelectors:Vhe,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,n){if(1&e&&(zi(),M(0,"label",0,1)(2,"span",2,3)(4,"input",4,5),$e("change",function(s){return n._onChangeEvent(s)})("click",function(s){return n._onInputClick(s)}),T(),M(6,"span",6,7),ie(8,"span",8),M(9,"span",9),ie(10,"span",10),T()()(),M(11,"span",11,12),$e("cdkObserveContent",function(){return n._onLabelTextChange()}),M(13,"span",13),k(14,"\xa0"),T(),Tn(15),T()()),2&e){const r=hi(1),s=hi(12);bn("for",n.inputId),$(2),qt("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),$(2),Z("id",n.inputId)("required",n.required)("tabIndex",n.tabIndex)("checked",n.checked)("disabled",n.disabled),bn("name",n.name)("aria-checked",n.checked)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedby),$(5),Z("matRippleTrigger",r)("matRippleDisabled",n.disableRipple||n.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",Tl(18,Bhe,n._noopAnimations?0:150))}},directives:[Ll,QN],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),i})(),ZU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({}),i})(),qhe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[ZU,fa,pt,Hg],ZU,pt]}),i})(),Gb=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[Ss,pt,Hg],pt]}),i})(),Qhe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[dd]]}),i})(),J1=(()=>{class i{constructor(){this.changes=new Dt,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const cfe={provide:J1,deps:[[new Co,new Yu,J1]],useFactory:function lfe(i){return i||new J1}};let ufe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({providers:[cfe,JB],imports:[[pt,Ss,Kf,W1,Qhe,pH,fa],pt]}),i})(),JU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({}),i})(),dfe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({providers:[JB],imports:[[JU,Gb,pt],JU,Gb]}),i})(),gfe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[Ss,pt,Kf,fa,Hg,uB],pt]}),i})(),yfe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[nb,pt],nb,pt]}),i})();const bfe=["button"],xfe=["*"],tz=new ve("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),nz=new ve("MatButtonToggleGroup"),wfe={provide:Zr,useExisting:sn(()=>sz),multi:!0};let iz=0;class rz{constructor(t,e){this.source=t,this.value=e}}let sz=(()=>{class i{constructor(e,n){this._changeDetector=e,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+iz++,this.valueChange=new Wt,this.change=new Wt,this.appearance=n&&n.appearance?n.appearance:"standard"}get name(){return this._name}set name(e){this._name=e,this._buttonToggles&&this._buttonToggles.forEach(n=>{n.name=this._name,n._markForCheck()})}get vertical(){return this._vertical}set vertical(e){this._vertical=Nt(e)}get value(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(n=>n.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}get selected(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=Nt(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=Nt(e),this._buttonToggles&&this._buttonToggles.forEach(n=>n._markForCheck())}ngOnInit(){this._selectionModel=new NT(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked))}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_emitChangeEvent(){const e=this.selected,n=Array.isArray(e)?e[e.length-1]:e,r=new rz(n,this.value);this._controlValueAccessorChangeFn(r.value),this.change.emit(r)}_syncButtonToggle(e,n,r=!1,s=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?n?this._selectionModel.select(e):this._selectionModel.deselect(e):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(r)):this._updateModelValue(r)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return void 0!==this._rawValue&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(n=>null!=e.value&&n===e.value):e.value===this._rawValue)}_setSelectionByValue(e){this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(n=>this._selectValue(n))):(this._clearSelection(),this._selectValue(e)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>e.checked=!1)}_selectValue(e){const n=this._buttonToggles.find(r=>null!=r.value&&r.value===e);n&&(n.checked=!0,this._selectionModel.select(n))}_updateModelValue(e){e&&this._emitChangeEvent(),this.valueChange.emit(this.value)}}return i.\u0275fac=function(e){return new(e||i)(C(Zi),C(tz,8))},i.\u0275dir=ae({type:i,selectors:[["mat-button-toggle-group"]],contentQueries:function(e,n,r){if(1&e&&fi(r,oz,5),2&e){let s;Ct(s=St())&&(n._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(e,n){2&e&&(bn("aria-disabled",n.disabled),qt("mat-button-toggle-vertical",n.vertical)("mat-button-toggle-group-appearance-standard","standard"===n.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[gt([wfe,{provide:nz,useExisting:i}])]}),i})();const Mfe=Pl(class{});let oz=(()=>{class i extends Mfe{constructor(e,n,r,s,o,a){super(),this._changeDetectorRef=n,this._elementRef=r,this._focusMonitor=s,this._isSingleSelector=!1,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new Wt;const l=Number(o);this.tabIndex=l||0===l?l:null,this.buttonToggleGroup=e,this.appearance=a&&a.appearance?a.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){const n=Nt(e);n!==this._checked&&(this._checked=n,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=Nt(e)}ngOnInit(){const e=this.buttonToggleGroup;this._isSingleSelector=e&&!e.multiple,this.id=this.id||"mat-button-toggle-"+iz++,this._isSingleSelector&&(this.name=e.name),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){const e=!!this._isSingleSelector||!this._checked;e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new rz(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(C(nz,8),C(Zi),C(Ve),C(kl),Ws("tabindex"),C(tz,8))},i.\u0275cmp=ft({type:i,selectors:[["mat-button-toggle"]],viewQuery:function(e,n){if(1&e&&ni(bfe,5),2&e){let r;Ct(r=St())&&(n._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(e,n){1&e&&$e("focus",function(){return n.focus()}),2&e&&(bn("aria-label",null)("aria-labelledby",null)("id",n.id)("name",null),qt("mat-button-toggle-standalone",!n.buttonToggleGroup)("mat-button-toggle-checked",n.checked)("mat-button-toggle-disabled",n.disabled)("mat-button-toggle-appearance-standard","standard"===n.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[he],ngContentSelectors:xfe,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(e,n){if(1&e&&(zi(),M(0,"button",0,1),$e("click",function(){return n._onButtonClick()}),M(2,"span",2),Tn(3),T()(),ie(4,"span",3)(5,"span",4)),2&e){const r=hi(1);Z("id",n.buttonId)("disabled",n.disabled||null),bn("tabindex",n.disabled?-1:n.tabIndex)("aria-pressed",n.checked)("name",n.name||null)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby),$(5),Z("matRippleTrigger",r)("matRippleDisabled",n.disableRipple||n.disabled)}},directives:[Ll],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent;transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .cdk-high-contrast-active .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),i})(),Cfe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[pt,fa],pt]}),i})(),Tfe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[Zf,Kf,Ss,W1,pt],pt]}),i})();const kfe={provide:new ve("mat-tooltip-scroll-strategy"),deps:[Ul],useFactory:function Ife(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}};let Pfe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({providers:[kfe],imports:[[uB,Ss,Zf,pt],pt,hd]}),i})();const Vfe={provide:new ve("mat-select-scroll-strategy"),deps:[Ul],useFactory:function Bfe(i){return()=>i.scrollStrategies.reposition()}};let Hfe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({providers:[Vfe],imports:[[Ss,Zf,o3,pt],hd,Gb,o3,pt]}),i})();function Ufe(i,t){if(1&i&&(qn(),ie(0,"circle",4)),2&i){const e=Qe(),n=hi(1);Xr("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(n)),bn("r",e._getCircleRadius())}}function zfe(i,t){if(1&i&&(qn(),ie(0,"circle",4)),2&i){const e=Qe(),n=hi(1);Xr("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(n)),bn("r",e._getCircleRadius())}}const Wfe=_d(class{constructor(i){this._elementRef=i}},"primary"),jfe=new ve("mat-progress-spinner-default-options",{providedIn:"root",factory:function $fe(){return{diameter:100}}});class Xc extends Wfe{constructor(t,e,n,r,s,o,a,l){super(t),this._document=n,this._diameter=100,this._value=0,this._resizeSubscription=Jn.EMPTY,this.mode="determinate";const c=Xc._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),c.has(n.head)||c.set(n.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),e.isBrowser&&e.SAFARI&&a&&o&&l&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&l.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=Qs(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Qs(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Qs(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=zN(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){var e;const n=50*(null!==(e=t.currentScale)&&void 0!==e?e:1);return`${n}% ${n}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,n=Xc._diameters;let r=n.get(t);if(!r||!r.has(e)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),t.appendChild(s),r||(r=new Set,n.set(t,r)),r.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Xc._diameters=new WeakMap,Xc.\u0275fac=function(t){return new(t||Xc)(C(Ve),C(Es),C(Lt,8),C(ko,8),C(jfe),C(Zi),C(Vg),C(Ot))},Xc.\u0275cmp=ft({type:Xc,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(bn("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),Xr("width",e.diameter,"px")("height",e.diameter,"px"),qt("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[he],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(qn(),M(0,"svg",0,1),Ge(2,Ufe,1,11,"circle",2),Ge(3,zfe,1,9,"circle",3),T()),2&t&&(Xr("width",e.diameter,"px")("height",e.diameter,"px"),Z("ngSwitch","indeterminate"===e.mode),bn("viewBox",e._getViewBox()),$(2),Z("ngSwitchCase",!0),$(1),Z("ngSwitchCase",!1))},directives:[x0,fN],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let Yfe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[pt,Ss],pt]}),i})();const Kfe=[[["caption"]],[["colgroup"],["col"]]],Zfe=["caption","colgroup, col"];function tD(i){return class extends i{constructor(...t){super(...t),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(t){const e=this._sticky;this._sticky=Nt(t),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const t=this._hasStickyChanged;return this._hasStickyChanged=!1,t}resetStickyChanged(){this._hasStickyChanged=!1}}}const Qf=new ve("CDK_TABLE");let Jf=(()=>{class i{constructor(e){this.template=e}}return i.\u0275fac=function(e){return new(e||i)(C(Dr))},i.\u0275dir=ae({type:i,selectors:[["","cdkCellDef",""]]}),i})(),ep=(()=>{class i{constructor(e){this.template=e}}return i.\u0275fac=function(e){return new(e||i)(C(Dr))},i.\u0275dir=ae({type:i,selectors:[["","cdkHeaderCellDef",""]]}),i})(),Wb=(()=>{class i{constructor(e){this.template=e}}return i.\u0275fac=function(e){return new(e||i)(C(Dr))},i.\u0275dir=ae({type:i,selectors:[["","cdkFooterCellDef",""]]}),i})();class tpe{}const npe=tD(tpe);let zl=(()=>{class i extends npe{constructor(e){super(),this._table=e,this._stickyEnd=!1}get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const n=this._stickyEnd;this._stickyEnd=Nt(e),this._hasStickyChanged=n!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return i.\u0275fac=function(e){return new(e||i)(C(Qf,8))},i.\u0275dir=ae({type:i,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,n,r){if(1&e&&(fi(r,Jf,5),fi(r,ep,5),fi(r,Wb,5)),2&e){let s;Ct(s=St())&&(n.cell=s.first),Ct(s=St())&&(n.headerCell=s.first),Ct(s=St())&&(n.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[gt([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:i}]),he]}),i})();class nD{constructor(t,e){e.nativeElement.classList.add(...t._columnCssClassName)}}let iD=(()=>{class i extends nD{constructor(e,n){super(e,n)}}return i.\u0275fac=function(e){return new(e||i)(C(zl),C(Ve))},i.\u0275dir=ae({type:i,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[he]}),i})(),rD=(()=>{class i extends nD{constructor(e,n){var r;if(super(e,n),1===(null===(r=e._table)||void 0===r?void 0:r._elementRef.nativeElement.nodeType)){const s=e._table._elementRef.nativeElement.getAttribute("role");n.nativeElement.setAttribute("role","grid"===s||"treegrid"===s?"gridcell":"cell")}}}return i.\u0275fac=function(e){return new(e||i)(C(zl),C(Ve))},i.\u0275dir=ae({type:i,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[he]}),i})();class cz{constructor(){this.tasks=[],this.endTasks=[]}}const sD=new ve("_COALESCED_STYLE_SCHEDULER");let uz=(()=>{class i{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new Dt}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new cz,this._getScheduleObservable().pipe(kn(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new cz;for(const n of e.tasks)n();for(const n of e.endTasks)n()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?Cr(Promise.resolve(void 0)):this._ngZone.onStable.pipe(Ts(1))}}return i.\u0275fac=function(e){return new(e||i)(J(Ot))},i.\u0275prov=be({token:i,factory:i.\u0275fac}),i})(),oD=(()=>{class i{constructor(e,n){this.template=e,this._differs=n}ngOnChanges(e){if(!this._columnsDiffer){const n=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(n).create(),this._columnsDiffer.diff(n)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof m_?e.headerCell.template:this instanceof g_?e.footerCell.template:e.cell.template}}return i.\u0275fac=function(e){return new(e||i)(C(Dr),C($a))},i.\u0275dir=ae({type:i,features:[fr]}),i})();class ipe extends oD{}const rpe=tD(ipe);let m_=(()=>{class i extends rpe{constructor(e,n,r){super(e,n),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return i.\u0275fac=function(e){return new(e||i)(C(Dr),C($a),C(Qf,8))},i.\u0275dir=ae({type:i,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[he,fr]}),i})();class spe extends oD{}const ope=tD(spe);let g_=(()=>{class i extends ope{constructor(e,n,r){super(e,n),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return i.\u0275fac=function(e){return new(e||i)(C(Dr),C($a),C(Qf,8))},i.\u0275dir=ae({type:i,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[he,fr]}),i})(),jb=(()=>{class i extends oD{constructor(e,n,r){super(e,n),this._table=r}}return i.\u0275fac=function(e){return new(e||i)(C(Dr),C($a),C(Qf,8))},i.\u0275dir=ae({type:i,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[he]}),i})(),Gl=(()=>{class i{constructor(e){this._viewContainer=e,i.mostRecentCellOutlet=this}ngOnDestroy(){i.mostRecentCellOutlet===this&&(i.mostRecentCellOutlet=null)}}return i.mostRecentCellOutlet=null,i.\u0275fac=function(e){return new(e||i)(C(Ar))},i.\u0275dir=ae({type:i,selectors:[["","cdkCellOutlet",""]]}),i})(),aD=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=ft({type:i,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,n){1&e&&oa(0,0)},directives:[Gl],encapsulation:2}),i})(),cD=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=ft({type:i,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,n){1&e&&oa(0,0)},directives:[Gl],encapsulation:2}),i})(),$b=(()=>{class i{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}}return i.\u0275fac=function(e){return new(e||i)(C(Dr))},i.\u0275dir=ae({type:i,selectors:[["ng-template","cdkNoDataRow",""]]}),i})();const dz=["top","bottom","left","right"];class ape{constructor(t,e,n,r,s=!0,o=!0,a){this._isNativeHtmlTable=t,this._stickCellCss=e,this.direction=n,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=o,this._positionListener=a,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(t,e){const n=[];for(const r of t)if(r.nodeType===r.ELEMENT_NODE){n.push(r);for(let s=0;s<r.children.length;s++)n.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of n)this._removeStickyStyle(r,e)})}updateStickyColumns(t,e,n,r=!0){if(!t.length||!this._isBrowser||!e.some(h=>h)&&!n.some(h=>h))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=t[0],o=s.children.length,a=this._getCellWidths(s,r),l=this._getStickyStartColumnPositions(a,e),c=this._getStickyEndColumnPositions(a,n),u=e.lastIndexOf(!0),d=n.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const h="rtl"===this.direction,f=h?"right":"left",p=h?"left":"right";for(const m of t)for(let g=0;g<o;g++){const _=m.children[g];e[g]&&this._addStickyStyle(_,f,l[g],g===u),n[g]&&this._addStickyStyle(_,p,c[g],g===d)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===u?[]:a.slice(0,u+1).map((m,g)=>e[g]?m:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===d?[]:a.slice(d).map((m,g)=>n[g+d]?m:null).reverse()}))})}stickRows(t,e,n){if(!this._isBrowser)return;const r="bottom"===n?t.slice().reverse():t,s="bottom"===n?e.slice().reverse():e,o=[],a=[],l=[];for(let u=0,d=0;u<r.length;u++){if(!s[u])continue;o[u]=d;const h=r[u];l[u]=this._isNativeHtmlTable?Array.from(h.children):[h];const f=h.getBoundingClientRect().height;d+=f,a[u]=f}const c=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{var u,d;for(let h=0;h<r.length;h++){if(!s[h])continue;const f=o[h],p=h===c;for(const m of l[h])this._addStickyStyle(m,n,f,p)}"top"===n?null===(u=this._positionListener)||void 0===u||u.stickyHeaderRowsUpdated({sizes:a,offsets:o,elements:l}):null===(d=this._positionListener)||void 0===d||d.stickyFooterRowsUpdated({sizes:a,offsets:o,elements:l})})}updateStickyFooterContainer(t,e){if(!this._isNativeHtmlTable)return;const n=t.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{e.some(r=>!r)?this._removeStickyStyle(n,["bottom"]):this._addStickyStyle(n,"bottom",0,!1)})}_removeStickyStyle(t,e){for(const r of e)t.style[r]="",t.classList.remove(this._borderCellCss[r]);dz.some(r=>-1===e.indexOf(r)&&t.style[r])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,n,r){t.classList.add(this._stickCellCss),r&&t.classList.add(this._borderCellCss[e]),t.style[e]=`${n}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){const e={top:100,bottom:10,left:1,right:1};let n=0;for(const r of dz)t.style[r]&&(n+=e[r]);return n?`${n}`:""}_getCellWidths(t,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const n=[],r=t.children;for(let s=0;s<r.length;s++)n.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=n,n}_getStickyStartColumnPositions(t,e){const n=[];let r=0;for(let s=0;s<t.length;s++)e[s]&&(n[s]=r,r+=t[s]);return n}_getStickyEndColumnPositions(t,e){const n=[];let r=0;for(let s=t.length;s>0;s--)e[s]&&(n[s]=r,r+=t[s]);return n}}const uD=new ve("CDK_SPL");let qb=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n}}return i.\u0275fac=function(e){return new(e||i)(C(Ar),C(Ve))},i.\u0275dir=ae({type:i,selectors:[["","rowOutlet",""]]}),i})(),Yb=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n}}return i.\u0275fac=function(e){return new(e||i)(C(Ar),C(Ve))},i.\u0275dir=ae({type:i,selectors:[["","headerRowOutlet",""]]}),i})(),Xb=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n}}return i.\u0275fac=function(e){return new(e||i)(C(Ar),C(Ve))},i.\u0275dir=ae({type:i,selectors:[["","footerRowOutlet",""]]}),i})(),Kb=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n}}return i.\u0275fac=function(e){return new(e||i)(C(Ar),C(Ve))},i.\u0275dir=ae({type:i,selectors:[["","noDataRowOutlet",""]]}),i})(),Zb=(()=>{class i{constructor(e,n,r,s,o,a,l,c,u,d,h,f){this._differs=e,this._changeDetectorRef=n,this._elementRef=r,this._dir=o,this._platform=l,this._viewRepeater=c,this._coalescedStyleScheduler=u,this._viewportRuler=d,this._stickyPositioningListener=h,this._ngZone=f,this._onDestroy=new Dt,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new Wt,this.viewChange=new In({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=a,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=Nt(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=Nt(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,n)=>this.trackBy?this.trackBy(n.dataIndex,n.data):n),this._viewportRuler.change().pipe(kn(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const n=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||n,this._forceRecalculateCellWidths=n,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),FT(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const n=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,n,(r,s,o)=>this._getEmbeddedViewArgs(r.item,o),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(r=>{n.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&Ot.isInAngularZone()?this._ngZone.onStable.pipe(Ts(1),kn(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=e.length?"":"none");const s=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,s,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=e.length?"":"none");const s=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),n=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...n,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((s,o)=>{this._addStickyColumnStyles([s],this._headerRowDefs[o])}),this._rowDefs.forEach(s=>{const o=[];for(let a=0;a<n.length;a++)this._renderRows[a].rowDef===s&&o.push(n[a]);this._addStickyColumnStyles(o,s)}),r.forEach((s,o)=>{this._addStickyColumnStyles([s],this._footerRowDefs[o])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const e=[],n=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const o=this._getRenderRowsForData(s,r,n.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let a=0;a<o.length;a++){let l=o[a];const c=this._cachedRenderRowsMap.get(l.data);c.has(l.rowDef)?c.get(l.rowDef).push(l):c.set(l.rowDef,[l]),e.push(l)}}return e}_getRenderRowsForData(e,n,r){return this._getRowDefs(e,n).map(o=>{const a=r&&r.has(o)?r.get(o):[];if(a.length){const l=a.shift();return l.dataIndex=n,l}return{data:e,rowDef:o,dataIndex:n}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Qb(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(n=>{this._columnDefsByName.has(n.name),this._columnDefsByName.set(n.name,n)})}_cacheRowDefs(){this._headerRowDefs=Qb(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Qb(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Qb(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(n=>!n.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(o,a)=>o||!!a.getColumnsDiff(),n=this._rowDefs.reduce(e,!1);n&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(e,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(e,!1);return s&&this._forceRenderFooterRows(),n||r||s}_switchDataSource(e){this._data=[],FT(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;FT(this.dataSource)?e=this.dataSource.connect(this):function Xfe(i){return!!i&&(i instanceof Mn||cn(i.lift)&&cn(i.subscribe))}(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=_t(this.dataSource)),this._renderChangeSubscription=e.pipe(kn(this._onDestroy)).subscribe(n=>{this._data=n||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,n)=>this._renderRow(this._headerRowOutlet,e,n)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,n)=>this._renderRow(this._footerRowOutlet,e,n)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,n){const r=Array.from(n.columns||[]).map(a=>this._columnDefsByName.get(a)),s=r.map(a=>a.sticky),o=r.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(e,s,o,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const n=[];for(let r=0;r<e.viewContainer.length;r++){const s=e.viewContainer.get(r);n.push(s.rootNodes[0])}return n}_getRowDefs(e,n){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(n,e));else{let s=this._rowDefs.find(o=>o.when&&o.when(n,e))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(e,n){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:n}}_renderRow(e,n,r,s={}){const o=e.viewContainer.createEmbeddedView(n.template,s,r);return this._renderCellTemplateForItem(n,s),o}_renderCellTemplateForItem(e,n){for(let r of this._getCellTemplates(e))Gl.mostRecentCellOutlet&&Gl.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,n);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let n=0,r=e.length;n<r;n++){const o=e.get(n).context;o.count=r,o.first=0===n,o.last=n===r-1,o.even=n%2==0,o.odd=!o.even,this.multiTemplateDataRows?(o.dataIndex=this._renderRows[n].dataIndex,o.renderIndex=n):o.index=this._renderRows[n].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,n=>{const r=this._columnDefsByName.get(n);return e.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),n=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of n){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const o of r.outlets)s.appendChild(o.elementRef.nativeElement);e.appendChild(s)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(n,r)=>n||r.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new ape(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:_t()).pipe(kn(this._onDestroy)).subscribe(n=>{this._stickyStyler.direction=n,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(n=>!n._table||n._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(!e)return;const n=0===this._rowOutlet.viewContainer.length;if(n===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(n){const s=r.createEmbeddedView(e.templateRef),o=s.rootNodes[0];1===s.rootNodes.length&&(null==o?void 0:o.nodeType)===this._document.ELEMENT_NODE&&(o.setAttribute("role","row"),o.classList.add(e._contentClassName))}else r.clear();this._isShowingNoDataRow=n}}return i.\u0275fac=function(e){return new(e||i)(C($a),C(Zi),C(Ve),Ws("role"),C(Il,8),C(Lt),C(Es),C($g),C(sD),C(Vg),C(uD,12),C(Ot,8))},i.\u0275cmp=ft({type:i,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,n,r){if(1&e&&(fi(r,$b,5),fi(r,zl,5),fi(r,jb,5),fi(r,m_,5),fi(r,g_,5)),2&e){let s;Ct(s=St())&&(n._noDataRow=s.first),Ct(s=St())&&(n._contentColumnDefs=s),Ct(s=St())&&(n._contentRowDefs=s),Ct(s=St())&&(n._contentHeaderRowDefs=s),Ct(s=St())&&(n._contentFooterRowDefs=s)}},viewQuery:function(e,n){if(1&e&&(ni(qb,7),ni(Yb,7),ni(Xb,7),ni(Kb,7)),2&e){let r;Ct(r=St())&&(n._rowOutlet=r.first),Ct(r=St())&&(n._headerRowOutlet=r.first),Ct(r=St())&&(n._footerRowOutlet=r.first),Ct(r=St())&&(n._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(e,n){2&e&&qt("cdk-table-fixed-layout",n.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[gt([{provide:Qf,useExisting:i},{provide:$g,useClass:f3},{provide:sD,useClass:uz},{provide:uD,useValue:null}])],ngContentSelectors:Zfe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,n){1&e&&(zi(Kfe),Tn(0),Tn(1,1),oa(2,0)(3,1)(4,2)(5,3))},directives:[Yb,qb,Kb,Xb],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),i})();function Qb(i,t){return i.concat(Array.from(t))}let cpe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[P0]]}),i})();const upe=[[["caption"]],[["colgroup"],["col"]]],dpe=["caption","colgroup, col"];let fz=(()=>{class i extends Zb{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275cmp=ft({type:i,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(e,n){2&e&&qt("mat-table-fixed-layout",n.fixedLayout)},exportAs:["matTable"],features:[gt([{provide:$g,useClass:f3},{provide:Zb,useExisting:i},{provide:Qf,useExisting:i},{provide:sD,useClass:uz},{provide:uD,useValue:null}]),he],ngContentSelectors:dpe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,n){1&e&&(zi(upe),Tn(0),Tn(1,1),oa(2,0)(3,1)(4,2)(5,3))},directives:[Yb,qb,Kb,Xb],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),i})(),dD=(()=>{class i extends Jf{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275dir=ae({type:i,selectors:[["","matCellDef",""]],features:[gt([{provide:Jf,useExisting:i}]),he]}),i})(),hD=(()=>{class i extends ep{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275dir=ae({type:i,selectors:[["","matHeaderCellDef",""]],features:[gt([{provide:ep,useExisting:i}]),he]}),i})(),fD=(()=>{class i extends zl{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275dir=ae({type:i,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[gt([{provide:zl,useExisting:i},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:i}]),he]}),i})(),pD=(()=>{class i extends iD{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275dir=ae({type:i,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[he]}),i})(),mD=(()=>{class i extends rD{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275dir=ae({type:i,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[he]}),i})(),pz=(()=>{class i extends m_{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275dir=ae({type:i,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[gt([{provide:m_,useExisting:i}]),he]}),i})(),mz=(()=>{class i extends jb{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275dir=ae({type:i,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[gt([{provide:jb,useExisting:i}]),he]}),i})(),gz=(()=>{class i extends aD{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275cmp=ft({type:i,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[gt([{provide:aD,useExisting:i}]),he],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,n){1&e&&oa(0,0)},directives:[Gl],encapsulation:2}),i})(),_z=(()=>{class i extends cD{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=He(i)))(n||i)}}(),i.\u0275cmp=ft({type:i,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[gt([{provide:cD,useExisting:i}]),he],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,n){1&e&&oa(0,0)},directives:[Gl],encapsulation:2}),i})(),xpe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[cpe,pt],pt]}),i})(),Mpe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[],Zf,dfe,ode,pH,W1,nse,Soe,gde,Ede,Bde,ohe,bhe,Ohe,ufe,Phe,qhe,Gb,xpe,aoe,gfe,yfe,fa,Cfe,Tfe,Pfe,Hfe,Yfe,P0]}),i})(),Sz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[u1]]}),i})(),jme=(()=>{class i{constructor(e,n){kf(n)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,n=[]){return{ngModule:i,providers:e.serverLoaded?[{provide:pa,useValue:Object.assign(Object.assign({},d1),e)},{provide:h1,useValue:n,multi:!0},{provide:Uf,useValue:!0}]:[{provide:pa,useValue:Object.assign(Object.assign({},d1),e)},{provide:h1,useValue:n,multi:!0}]}}}return i.\u0275fac=function(e){return new(e||i)(J(Uf),J(Xs))},i.\u0275mod=at({type:i}),i.\u0275inj=st({imports:[[YV,EU,Sz],YV,EU,Sz]}),i})();function Ez(i,t,e,n,r,s,o){try{var a=i[s](o),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(n,r)}function nr(i){return function(){var t=this,e=arguments;return new Promise(function(n,r){var s=i.apply(t,e);function o(l){Ez(s,n,r,o,a,"next",l)}function a(l){Ez(s,n,r,o,a,"throw",l)}o(void 0)})}}function gD(i,t){let e=0;if(void 0===t)for(let n of i)(n=+n)&&(e+=n);else{let n=-1;for(let r of i)(r=+t(r,++n,i))&&(e+=r)}return e}function $me(){}function _D(i){return null==i?$me:function(){return this.querySelector(i)}}function Yme(i){return null==i?[]:Array.isArray(i)?i:Array.from(i)}function Xme(){return[]}function Tz(i){return null==i?Xme:function(){return this.querySelectorAll(i)}}function Dz(i){return function(){return this.matches(i)}}function Az(i){return function(t){return t.matches(i)}}var Qme=Array.prototype.find;function ege(){return this.firstElementChild}var nge=Array.prototype.filter;function ige(){return Array.from(this.children)}function Rz(i){return new Array(i.length)}function Jb(i,t){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=t}function lge(i){return function(){return i}}function cge(i,t,e,n,r,s){for(var a,o=0,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],n[o]=a):e[o]=new Jb(i,s[o]);for(;o<l;++o)(a=t[o])&&(r[o]=a)}function uge(i,t,e,n,r,s,o){var a,l,f,c=new Map,u=t.length,d=s.length,h=new Array(u);for(a=0;a<u;++a)(l=t[a])&&(h[a]=f=o.call(l,l.__data__,a,t)+"",c.has(f)?r[a]=l:c.set(f,l));for(a=0;a<d;++a)f=o.call(i,s[a],a,s)+"",(l=c.get(f))?(n[a]=l,l.__data__=s[a],c.delete(f)):e[a]=new Jb(i,s[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(h[a])===l&&(r[a]=l)}function dge(i){return i.__data__}function fge(i){return"object"==typeof i&&"length"in i?i:Array.from(i)}function yge(i,t){return i<t?-1:i>t?1:i>=t?0:NaN}Jb.prototype={constructor:Jb,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,t){return this._parent.insertBefore(i,t)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};var vD="http://www.w3.org/1999/xhtml";const Iz={svg:"http://www.w3.org/2000/svg",xhtml:vD,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ex(i){var t=i+="",e=t.indexOf(":");return e>=0&&"xmlns"!==(t=i.slice(0,e))&&(i=i.slice(e+1)),Iz.hasOwnProperty(t)?{space:Iz[t],local:i}:i}function Ege(i){return function(){this.removeAttribute(i)}}function Tge(i){return function(){this.removeAttributeNS(i.space,i.local)}}function Dge(i,t){return function(){this.setAttribute(i,t)}}function Age(i,t){return function(){this.setAttributeNS(i.space,i.local,t)}}function Rge(i,t){return function(){var e=t.apply(this,arguments);null==e?this.removeAttribute(i):this.setAttribute(i,e)}}function Ige(i,t){return function(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,e)}}function kz(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function Oge(i){return function(){this.style.removeProperty(i)}}function Pge(i,t,e){return function(){this.style.setProperty(i,t,e)}}function Lge(i,t,e){return function(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(i):this.style.setProperty(i,n,e)}}function tp(i,t){return i.style.getPropertyValue(t)||kz(i).getComputedStyle(i,null).getPropertyValue(t)}function Nge(i){return function(){delete this[i]}}function Bge(i,t){return function(){this[i]=t}}function Vge(i,t){return function(){var e=t.apply(this,arguments);null==e?delete this[i]:this[i]=e}}function Oz(i){return i.trim().split(/^|\s+/)}function yD(i){return i.classList||new Pz(i)}function Pz(i){this._node=i,this._names=Oz(i.getAttribute("class")||"")}function Lz(i,t){for(var e=yD(i),n=-1,r=t.length;++n<r;)e.add(t[n])}function Fz(i,t){for(var e=yD(i),n=-1,r=t.length;++n<r;)e.remove(t[n])}function Uge(i){return function(){Lz(this,i)}}function zge(i){return function(){Fz(this,i)}}function Gge(i,t){return function(){(t.apply(this,arguments)?Lz:Fz)(this,i)}}function jge(){this.textContent=""}function $ge(i){return function(){this.textContent=i}}function qge(i){return function(){var t=i.apply(this,arguments);this.textContent=null==t?"":t}}function Xge(){this.innerHTML=""}function Kge(i){return function(){this.innerHTML=i}}function Zge(i){return function(){var t=i.apply(this,arguments);this.innerHTML=null==t?"":t}}function Jge(){this.nextSibling&&this.parentNode.appendChild(this)}function t_e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function i_e(i){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===vD&&t.documentElement.namespaceURI===vD?t.createElement(i):t.createElementNS(e,i)}}function r_e(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function Nz(i){var t=ex(i);return(t.local?r_e:i_e)(t)}function o_e(){return null}function l_e(){var i=this.parentNode;i&&i.removeChild(this)}function u_e(){var i=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(i,this.nextSibling):i}function d_e(){var i=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(i,this.nextSibling):i}function m_e(i){return i.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function g_e(i){return function(){var t=this.__on;if(t){for(var s,e=0,n=-1,r=t.length;e<r;++e)s=t[e],i.type&&s.type!==i.type||s.name!==i.name?t[++n]=s:this.removeEventListener(s.type,s.listener,s.options);++n?t.length=n:delete this.__on}}}function __e(i,t,e){return function(){var r,n=this.__on,s=function p_e(i){return function(t){i.call(this,t,this.__data__)}}(t);if(n)for(var o=0,a=n.length;o<a;++o)if((r=n[o]).type===i.type&&r.name===i.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=e),void(r.value=t);this.addEventListener(i.type,s,e),r={type:i.type,name:i.name,value:t,listener:s,options:e},n?n.push(r):this.__on=[r]}}function Bz(i,t,e){var n=kz(i),r=n.CustomEvent;"function"==typeof r?r=new r(t,e):(r=n.document.createEvent("Event"),e?(r.initEvent(t,e.bubbles,e.cancelable),r.detail=e.detail):r.initEvent(t,!1,!1)),i.dispatchEvent(r)}function y_e(i,t){return function(){return Bz(this,i,t)}}function b_e(i,t){return function(){return Bz(this,i,t.apply(this,arguments))}}Pz.prototype={add:function(i){this._names.indexOf(i)<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var t=this._names.indexOf(i);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};var Vz=[null];function to(i,t){this._groups=i,this._parents=t}function Hz(){return new to([[document.documentElement]],Vz)}to.prototype=Hz.prototype={constructor:to,select:function qme(i){"function"!=typeof i&&(i=_D(i));for(var t=this._groups,e=t.length,n=new Array(e),r=0;r<e;++r)for(var l,c,s=t[r],o=s.length,a=n[r]=new Array(o),u=0;u<o;++u)(l=s[u])&&(c=i.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new to(n,this._parents)},selectAll:function Zme(i){i="function"==typeof i?function Kme(i){return function(){return Yme(i.apply(this,arguments))}}(i):Tz(i);for(var t=this._groups,e=t.length,n=[],r=[],s=0;s<e;++s)for(var l,o=t[s],a=o.length,c=0;c<a;++c)(l=o[c])&&(n.push(i.call(l,l.__data__,c,o)),r.push(l));return new to(n,r)},selectChild:function tge(i){return this.select(null==i?ege:function Jme(i){return function(){return Qme.call(this.children,i)}}("function"==typeof i?i:Az(i)))},selectChildren:function sge(i){return this.selectAll(null==i?ige:function rge(i){return function(){return nge.call(this.children,i)}}("function"==typeof i?i:Az(i)))},filter:function oge(i){"function"!=typeof i&&(i=Dz(i));for(var t=this._groups,e=t.length,n=new Array(e),r=0;r<e;++r)for(var l,s=t[r],o=s.length,a=n[r]=[],c=0;c<o;++c)(l=s[c])&&i.call(l,l.__data__,c,s)&&a.push(l);return new to(n,this._parents)},data:function hge(i,t){if(!arguments.length)return Array.from(this,dge);var e=t?uge:cge,n=this._parents,r=this._groups;"function"!=typeof i&&(i=lge(i));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=n[c],d=r[c],h=d.length,f=fge(i.call(u,u&&u.__data__,c,n)),p=f.length,m=a[c]=new Array(p),g=o[c]=new Array(p),_=l[c]=new Array(h);e(u,d,m,g,_,f,t);for(var b,x,v=0,y=0;v<p;++v)if(b=m[v]){for(v>=y&&(y=v+1);!(x=g[y])&&++y<p;);b._next=x||null}}return(o=new to(o,n))._enter=a,o._exit=l,o},enter:function age(){return new to(this._enter||this._groups.map(Rz),this._parents)},exit:function pge(){return new to(this._exit||this._groups.map(Rz),this._parents)},join:function mge(i,t,e){var n=this.enter(),r=this,s=this.exit();return"function"==typeof i?(n=i(n))&&(n=n.selection()):n=n.append(i+""),null!=t&&(r=t(r))&&(r=r.selection()),null==e?s.remove():e(s),n&&r?n.merge(r).order():r},merge:function gge(i){for(var t=i.selection?i.selection():i,e=this._groups,n=t._groups,r=e.length,o=Math.min(r,n.length),a=new Array(r),l=0;l<o;++l)for(var f,c=e[l],u=n[l],d=c.length,h=a[l]=new Array(d),p=0;p<d;++p)(f=c[p]||u[p])&&(h[p]=f);for(;l<r;++l)a[l]=e[l];return new to(a,this._parents)},selection:function M_e(){return this},order:function _ge(){for(var i=this._groups,t=-1,e=i.length;++t<e;)for(var o,n=i[t],r=n.length-1,s=n[r];--r>=0;)(o=n[r])&&(s&&4^o.compareDocumentPosition(s)&&s.parentNode.insertBefore(o,s),s=o);return this},sort:function vge(i){function t(d,h){return d&&h?i(d.__data__,h.__data__):!d-!h}i||(i=yge);for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s){for(var c,o=e[s],a=o.length,l=r[s]=new Array(a),u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new to(r,this._parents).order()},call:function bge(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this},nodes:function xge(){return Array.from(this)},node:function wge(){for(var i=this._groups,t=0,e=i.length;t<e;++t)for(var n=i[t],r=0,s=n.length;r<s;++r){var o=n[r];if(o)return o}return null},size:function Mge(){let i=0;for(const t of this)++i;return i},empty:function Cge(){return!this.node()},each:function Sge(i){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var a,r=t[e],s=0,o=r.length;s<o;++s)(a=r[s])&&i.call(a,a.__data__,s,r);return this},attr:function kge(i,t){var e=ex(i);if(arguments.length<2){var n=this.node();return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}return this.each((null==t?e.local?Tge:Ege:"function"==typeof t?e.local?Ige:Rge:e.local?Age:Dge)(e,t))},style:function Fge(i,t,e){return arguments.length>1?this.each((null==t?Oge:"function"==typeof t?Lge:Pge)(i,t,null==e?"":e)):tp(this.node(),i)},property:function Hge(i,t){return arguments.length>1?this.each((null==t?Nge:"function"==typeof t?Vge:Bge)(i,t)):this.node()[i]},classed:function Wge(i,t){var e=Oz(i+"");if(arguments.length<2){for(var n=yD(this.node()),r=-1,s=e.length;++r<s;)if(!n.contains(e[r]))return!1;return!0}return this.each(("function"==typeof t?Gge:t?Uge:zge)(e,t))},text:function Yge(i){return arguments.length?this.each(null==i?jge:("function"==typeof i?qge:$ge)(i)):this.node().textContent},html:function Qge(i){return arguments.length?this.each(null==i?Xge:("function"==typeof i?Zge:Kge)(i)):this.node().innerHTML},raise:function e_e(){return this.each(Jge)},lower:function n_e(){return this.each(t_e)},append:function s_e(i){var t="function"==typeof i?i:Nz(i);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function a_e(i,t){var e="function"==typeof i?i:Nz(i),n=null==t?o_e:"function"==typeof t?t:_D(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),n.apply(this,arguments)||null)})},remove:function c_e(){return this.each(l_e)},clone:function h_e(i){return this.select(i?d_e:u_e)},datum:function f_e(i){return arguments.length?this.property("__data__",i):this.node().__data__},on:function v_e(i,t,e){var r,o,n=m_e(i+""),s=n.length;if(!(arguments.length<2)){for(a=t?__e:g_e,r=0;r<s;++r)this.each(a(n[r],t,e));return this}var a=this.node().__on;if(a)for(var u,l=0,c=a.length;l<c;++l)for(r=0,u=a[l];r<s;++r)if((o=n[r]).type===u.type&&o.name===u.name)return u.value},dispatch:function x_e(i,t){return this.each(("function"==typeof t?b_e:y_e)(i,t))},[Symbol.iterator]:function*w_e(){for(var i=this._groups,t=0,e=i.length;t<e;++t)for(var o,n=i[t],r=0,s=n.length;r<s;++r)(o=n[r])&&(yield o)}};const __=Hz;var C_e={value:()=>{}};function Uz(){for(var n,i=0,t=arguments.length,e={};i<t;++i){if(!(n=arguments[i]+"")||n in e||/[\s.]/.test(n))throw new Error("illegal type: "+n);e[n]=[]}return new tx(e)}function tx(i){this._=i}function S_e(i,t){return i.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function E_e(i,t){for(var r,e=0,n=i.length;e<n;++e)if((r=i[e]).name===t)return r.value}function zz(i,t,e){for(var n=0,r=i.length;n<r;++n)if(i[n].name===t){i[n]=C_e,i=i.slice(0,n).concat(i.slice(n+1));break}return null!=e&&i.push({name:t,value:e}),i}tx.prototype=Uz.prototype={constructor:tx,on:function(i,t){var r,e=this._,n=S_e(i+"",e),s=-1,o=n.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++s<o;)if(r=(i=n[s]).type)e[r]=zz(e[r],i.name,t);else if(null==t)for(r in e)e[r]=zz(e[r],i.name,null);return this}for(;++s<o;)if((r=(i=n[s]).type)&&(r=E_e(e[r],i.name)))return r},copy:function(){var i={},t=this._;for(var e in t)i[e]=t[e].slice();return new tx(i)},call:function(i,t){if((r=arguments.length-2)>0)for(var r,s,e=new Array(r),n=0;n<r;++n)e[n]=arguments[n+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(n=0,r=(s=this._[i]).length;n<r;++n)s[n].value.apply(t,e)},apply:function(i,t,e){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var n=this._[i],r=0,s=n.length;r<s;++r)n[r].value.apply(t,e)}};const Gz=Uz;var nx,b_,np=0,v_=0,y_=0,ix=0,Id=0,rx=0,x_="object"==typeof performance&&performance.now?performance:Date,jz="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function bD(){return Id||(jz(T_e),Id=x_.now()+rx)}function T_e(){Id=0}function sx(){this._call=this._time=this._next=null}function $z(i,t,e){var n=new sx;return n.restart(i,t,e),n}function qz(){Id=(ix=x_.now())+rx,np=v_=0;try{!function D_e(){bD(),++np;for(var t,i=nx;i;)(t=Id-i._time)>=0&&i._call.call(void 0,t),i=i._next;--np}()}finally{np=0,function R_e(){for(var i,e,t=nx,n=1/0;t;)t._call?(n>t._time&&(n=t._time),i=t,t=t._next):(e=t._next,t._next=null,t=i?i._next=e:nx=e);b_=i,xD(n)}(),Id=0}}function A_e(){var i=x_.now(),t=i-ix;t>1e3&&(rx-=t,ix=i)}function xD(i){np||(v_&&(v_=clearTimeout(v_)),i-Id>24?(i<1/0&&(v_=setTimeout(qz,i-x_.now()-rx)),y_&&(y_=clearInterval(y_))):(y_||(ix=x_.now(),y_=setInterval(A_e,1e3)),np=1,jz(qz)))}function Yz(i,t,e){var n=new sx;return n.restart(r=>{n.stop(),i(r+t)},t=null==t?0:+t,e),n}sx.prototype=$z.prototype={constructor:sx,restart:function(i,t,e){if("function"!=typeof i)throw new TypeError("callback is not a function");e=(null==e?bD():+e)+(null==t?0:+t),!this._next&&b_!==this&&(b_?b_._next=this:nx=this,b_=this),this._call=i,this._time=e,xD()},stop:function(){this._call&&(this._call=null,this._time=1/0,xD())}};var I_e=Gz("start","end","cancel","interrupt"),k_e=[];function lx(i,t,e,n,r,s){var o=i.__transition;if(o){if(e in o)return}else i.__transition={};!function O_e(i,t,e){var r,n=i.__transition;function o(c){var u,d,h,f;if(1!==e.state)return l();for(u in n)if((f=n[u]).name===e.name){if(3===f.state)return Yz(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",i,i.__data__,f.index,f.group),delete n[u]):+u<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",i,i.__data__,f.index,f.group),delete n[u])}if(Yz(function(){3===e.state&&(e.state=4,e.timer.restart(a,e.delay,e.time),a(c))}),e.state=2,e.on.call("start",i,i.__data__,e.index,e.group),2===e.state){for(e.state=3,r=new Array(h=e.tween.length),u=0,d=-1;u<h;++u)(f=e.tween[u].value.call(i,i.__data__,e.index,e.group))&&(r[++d]=f);r.length=d+1}}function a(c){for(var u=c<e.duration?e.ease.call(null,c/e.duration):(e.timer.restart(l),e.state=5,1),d=-1,h=r.length;++d<h;)r[d].call(i,u);5===e.state&&(e.on.call("end",i,i.__data__,e.index,e.group),l())}function l(){for(var c in e.state=6,e.timer.stop(),delete n[t],n)return;delete i.__transition}n[t]=e,e.timer=$z(function s(c){e.state=1,e.timer.restart(o,e.delay,e.time),e.delay<=c&&o(c-e.delay)},0,e.time)}(i,e,{name:t,index:n,group:r,on:I_e,tween:k_e,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function CD(i,t){var e=ma(i,t);if(e.state>0)throw new Error("too late; already scheduled");return e}function Qa(i,t){var e=ma(i,t);if(e.state>3)throw new Error("too late; already running");return e}function ma(i,t){var e=i.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function cx(i,t){var n,r,o,e=i.__transition,s=!0;if(e){for(o in t=null==t?null:t+"",e)(n=e[o]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",i,i.__data__,n.index,n.group),delete e[o]):s=!1;s&&delete i.__transition}}function Kc(i,t){return i=+i,t=+t,function(e){return i*(1-e)+t*e}}var ux,Qz=180/Math.PI,SD={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Jz(i,t,e,n,r,s){var o,a,l;return(o=Math.sqrt(i*i+t*t))&&(i/=o,t/=o),(l=i*e+t*n)&&(e-=i*l,n-=t*l),(a=Math.sqrt(e*e+n*n))&&(e/=a,n/=a,l/=a),i*n<t*e&&(i=-i,t=-t,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,i)*Qz,skewX:Math.atan(l)*Qz,scaleX:o,scaleY:a}}function eG(i,t,e,n){function r(c){return c.length?c.pop()+" ":""}return function(c,u){var d=[],h=[];return c=i(c),u=i(u),function s(c,u,d,h,f,p){if(c!==d||u!==h){var m=f.push("translate(",null,t,null,e);p.push({i:m-4,x:Kc(c,d)},{i:m-2,x:Kc(u,h)})}else(d||h)&&f.push("translate("+d+t+h+e)}(c.translateX,c.translateY,u.translateX,u.translateY,d,h),function o(c,u,d,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:d.push(r(d)+"rotate(",null,n)-2,x:Kc(c,u)})):u&&d.push(r(d)+"rotate("+u+n)}(c.rotate,u.rotate,d,h),function a(c,u,d,h){c!==u?h.push({i:d.push(r(d)+"skewX(",null,n)-2,x:Kc(c,u)}):u&&d.push(r(d)+"skewX("+u+n)}(c.skewX,u.skewX,d,h),function l(c,u,d,h,f,p){if(c!==d||u!==h){var m=f.push(r(f)+"scale(",null,",",null,")");p.push({i:m-4,x:Kc(c,d)},{i:m-2,x:Kc(u,h)})}else(1!==d||1!==h)&&f.push(r(f)+"scale("+d+","+h+")")}(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,h),c=u=null,function(f){for(var g,p=-1,m=h.length;++p<m;)d[(g=h[p]).i]=g.x(f);return d.join("")}}}var N_e=eG(function L_e(i){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(i+"");return t.isIdentity?SD:Jz(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),B_e=eG(function F_e(i){return null!=i&&(ux||(ux=document.createElementNS("http://www.w3.org/2000/svg","g")),ux.setAttribute("transform",i),i=ux.transform.baseVal.consolidate())?Jz((i=i.matrix).a,i.b,i.c,i.d,i.e,i.f):SD},", ",")",")");function V_e(i,t){var e,n;return function(){var r=Qa(this,i),s=r.tween;if(s!==e)for(var o=0,a=(n=e=s).length;o<a;++o)if(n[o].name===t){(n=n.slice()).splice(o,1);break}r.tween=n}}function H_e(i,t,e){var n,r;if("function"!=typeof e)throw new Error;return function(){var s=Qa(this,i),o=s.tween;if(o!==n){r=(n=o).slice();for(var a={name:t,value:e},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}s.tween=r}}function ED(i,t,e){var n=i._id;return i.each(function(){var r=Qa(this,n);(r.value||(r.value={}))[t]=e.apply(this,arguments)}),function(r){return ma(r,n).value[t]}}function TD(i,t,e){i.prototype=t.prototype=e,e.constructor=i}function tG(i,t){var e=Object.create(i.prototype);for(var n in t)e[n]=t[n];return e}function w_(){}var dx=1/.7,ip="\\s*([+-]?\\d+)\\s*",C_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ja="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",z_e=/^#([0-9a-f]{3,8})$/,G_e=new RegExp(`^rgb\\(${ip},${ip},${ip}\\)$`),W_e=new RegExp(`^rgb\\(${Ja},${Ja},${Ja}\\)$`),j_e=new RegExp(`^rgba\\(${ip},${ip},${ip},${C_}\\)$`),$_e=new RegExp(`^rgba\\(${Ja},${Ja},${Ja},${C_}\\)$`),q_e=new RegExp(`^hsl\\(${C_},${Ja},${Ja}\\)$`),Y_e=new RegExp(`^hsla\\(${C_},${Ja},${Ja},${C_}\\)$`),nG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function iG(){return this.rgb().formatHex()}function rG(){return this.rgb().formatRgb()}function S_(i){var t,e;return i=(i+"").trim().toLowerCase(),(t=z_e.exec(i))?(e=t[1].length,t=parseInt(t[1],16),6===e?sG(t):3===e?new As(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===e?hx(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===e?hx(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=G_e.exec(i))?new As(t[1],t[2],t[3],1):(t=W_e.exec(i))?new As(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=j_e.exec(i))?hx(t[1],t[2],t[3],t[4]):(t=$_e.exec(i))?hx(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=q_e.exec(i))?lG(t[1],t[2]/100,t[3]/100,1):(t=Y_e.exec(i))?lG(t[1],t[2]/100,t[3]/100,t[4]):nG.hasOwnProperty(i)?sG(nG[i]):"transparent"===i?new As(NaN,NaN,NaN,0):null}function sG(i){return new As(i>>16&255,i>>8&255,255&i,1)}function hx(i,t,e,n){return n<=0&&(i=t=e=NaN),new As(i,t,e,n)}function Z_e(i){return i instanceof w_||(i=S_(i)),i?new As((i=i.rgb()).r,i.g,i.b,i.opacity):new As}function fx(i,t,e,n){return 1===arguments.length?Z_e(i):new As(i,t,e,null==n?1:n)}function As(i,t,e,n){this.r=+i,this.g=+t,this.b=+e,this.opacity=+n}function oG(){return`#${Od(this.r)}${Od(this.g)}${Od(this.b)}`}function aG(){const i=px(this.opacity);return`${1===i?"rgb(":"rgba("}${kd(this.r)}, ${kd(this.g)}, ${kd(this.b)}${1===i?")":`, ${i})`}`}function px(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function kd(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Od(i){return((i=kd(i))<16?"0":"")+i.toString(16)}function lG(i,t,e,n){return n<=0?i=t=e=NaN:e<=0||e>=1?i=t=NaN:t<=0&&(i=NaN),new ga(i,t,e,n)}function cG(i){if(i instanceof ga)return new ga(i.h,i.s,i.l,i.opacity);if(i instanceof w_||(i=S_(i)),!i)return new ga;if(i instanceof ga)return i;var t=(i=i.rgb()).r/255,e=i.g/255,n=i.b/255,r=Math.min(t,e,n),s=Math.max(t,e,n),o=NaN,a=s-r,l=(s+r)/2;return a?(o=t===s?(e-n)/a+6*(e<n):e===s?(n-t)/a+2:(t-e)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new ga(o,a,l,i.opacity)}function ga(i,t,e,n){this.h=+i,this.s=+t,this.l=+e,this.opacity=+n}function uG(i){return(i=(i||0)%360)<0?i+360:i}function mx(i){return Math.max(0,Math.min(1,i||0))}function DD(i,t,e){return 255*(i<60?t+(e-t)*i/60:i<180?e:i<240?t+(e-t)*(240-i)/60:t)}function dG(i,t,e,n,r){var s=i*i,o=s*i;return((1-3*i+3*s-o)*t+(4-6*s+3*o)*e+(1+3*i+3*s-3*o)*n+o*r)/6}TD(w_,S_,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:iG,formatHex:iG,formatHex8:function X_e(){return this.rgb().formatHex8()},formatHsl:function K_e(){return cG(this).formatHsl()},formatRgb:rG,toString:rG}),TD(As,fx,tG(w_,{brighter(i){return i=null==i?dx:Math.pow(dx,i),new As(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=null==i?.7:Math.pow(.7,i),new As(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new As(kd(this.r),kd(this.g),kd(this.b),px(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oG,formatHex:oG,formatHex8:function Q_e(){return`#${Od(this.r)}${Od(this.g)}${Od(this.b)}${Od(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:aG,toString:aG})),TD(ga,function J_e(i,t,e,n){return 1===arguments.length?cG(i):new ga(i,t,e,null==n?1:n)},tG(w_,{brighter(i){return i=null==i?dx:Math.pow(dx,i),new ga(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=null==i?.7:Math.pow(.7,i),new ga(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+360*(this.h<0),t=isNaN(i)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*t,r=2*e-n;return new As(DD(i>=240?i-240:i+120,r,n),DD(i,r,n),DD(i<120?i+240:i-120,r,n),this.opacity)},clamp(){return new ga(uG(this.h),mx(this.s),mx(this.l),px(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=px(this.opacity);return`${1===i?"hsl(":"hsla("}${uG(this.h)}, ${100*mx(this.s)}%, ${100*mx(this.l)}%${1===i?")":`, ${i})`}`}}));const hG=i=>()=>i;function pG(i,t){var e=t-i;return e?function fG(i,t){return function(e){return i+e*t}}(i,e):hG(isNaN(i)?t:i)}const mG=function i(t){var e=function ive(i){return 1==(i=+i)?pG:function(t,e){return e-t?function nve(i,t,e){return i=Math.pow(i,e),t=Math.pow(t,e)-i,e=1/e,function(n){return Math.pow(i+n*t,e)}}(t,e,i):hG(isNaN(t)?e:t)}}(t);function n(r,s){var o=e((r=fx(r)).r,(s=fx(s)).r),a=e(r.g,s.g),l=e(r.b,s.b),c=pG(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return n.gamma=i,n}(1);function gG(i){return function(t){var o,a,e=t.length,n=new Array(e),r=new Array(e),s=new Array(e);for(o=0;o<e;++o)a=fx(t[o]),n[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return n=i(n),r=i(r),s=i(s),a.opacity=1,function(l){return a.r=n(l),a.g=r(l),a.b=s(l),a+""}}}gG(function eve(i){var t=i.length-1;return function(e){var n=e<=0?e=0:e>=1?(e=1,t-1):Math.floor(e*t),r=i[n],s=i[n+1];return dG((e-n/t)*t,n>0?i[n-1]:2*r-s,r,s,n<t-1?i[n+2]:2*s-r)}}),gG(function tve(i){var t=i.length;return function(e){var n=Math.floor(((e%=1)<0?++e:e)*t);return dG((e-n/t)*t,i[(n+t-1)%t],i[n%t],i[(n+1)%t],i[(n+2)%t])}});var AD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,RD=new RegExp(AD.source,"g");function ove(i,t){var n,r,s,e=AD.lastIndex=RD.lastIndex=0,o=-1,a=[],l=[];for(i+="",t+="";(n=AD.exec(i))&&(r=RD.exec(t));)(s=r.index)>e&&(s=t.slice(e,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Kc(n,r)})),e=RD.lastIndex;return e<t.length&&(s=t.slice(e),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?function sve(i){return function(t){return i(t)+""}}(l[0].x):function rve(i){return function(){return i}}(t):(t=l.length,function(c){for(var d,u=0;u<t;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function _G(i,t){var e;return("number"==typeof t?Kc:t instanceof S_?mG:(e=S_(t))?(t=e,mG):ove)(i,t)}function ave(i){return function(){this.removeAttribute(i)}}function lve(i){return function(){this.removeAttributeNS(i.space,i.local)}}function cve(i,t,e){var n,s,r=e+"";return function(){var o=this.getAttribute(i);return o===r?null:o===n?s:s=t(n=o,e)}}function uve(i,t,e){var n,s,r=e+"";return function(){var o=this.getAttributeNS(i.space,i.local);return o===r?null:o===n?s:s=t(n=o,e)}}function dve(i,t,e){var n,r,s;return function(){var o,l,a=e(this);return null==a?void this.removeAttribute(i):(o=this.getAttribute(i))===(l=a+"")?null:o===n&&l===r?s:(r=l,s=t(n=o,a))}}function hve(i,t,e){var n,r,s;return function(){var o,l,a=e(this);return null==a?void this.removeAttributeNS(i.space,i.local):(o=this.getAttributeNS(i.space,i.local))===(l=a+"")?null:o===n&&l===r?s:(r=l,s=t(n=o,a))}}function pve(i,t){return function(e){this.setAttribute(i,t.call(this,e))}}function mve(i,t){return function(e){this.setAttributeNS(i.space,i.local,t.call(this,e))}}function gve(i,t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&mve(i,s)),e}return r._value=t,r}function _ve(i,t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&pve(i,s)),e}return r._value=t,r}function yve(i,t){return function(){CD(this,i).delay=+t.apply(this,arguments)}}function bve(i,t){return t=+t,function(){CD(this,i).delay=t}}function wve(i,t){return function(){Qa(this,i).duration=+t.apply(this,arguments)}}function Mve(i,t){return t=+t,function(){Qa(this,i).duration=t}}function Sve(i,t){if("function"!=typeof t)throw new Error;return function(){Qa(this,i).ease=t}}function kve(i,t,e){var n,r,s=function Ive(i){return(i+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(t)?CD:Qa;return function(){var o=s(this,i),a=o.on;a!==n&&(r=(n=a).copy()).on(t,e),o.on=r}}var Bve=__.prototype.constructor;function vG(i){return function(){this.style.removeProperty(i)}}function jve(i,t,e){return function(n){this.style.setProperty(i,t.call(this,n),e)}}function $ve(i,t,e){var n,r;function s(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&jve(i,o,e)),n}return s._value=t,s}function Zve(i){return function(t){this.textContent=i.call(this,t)}}function Qve(i){var t,e;function n(){var r=i.apply(this,arguments);return r!==e&&(t=(e=r)&&Zve(r)),t}return n._value=i,n}var nye=0;function Wl(i,t,e,n){this._groups=i,this._parents=t,this._name=e,this._id=n}function yG(){return++nye}var jl=__.prototype;Wl.prototype=function iye(i){return __().transition(i)}.prototype={constructor:Wl,select:function Fve(i){var t=this._name,e=this._id;"function"!=typeof i&&(i=_D(i));for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o)for(var u,d,a=n[o],l=a.length,c=s[o]=new Array(l),h=0;h<l;++h)(u=a[h])&&(d=i.call(u,u.__data__,h,a))&&("__data__"in u&&(d.__data__=u.__data__),c[h]=d,lx(c[h],t,e,h,c,ma(u,e)));return new Wl(s,this._parents,t,e)},selectAll:function Nve(i){var t=this._name,e=this._id;"function"!=typeof i&&(i=Tz(i));for(var n=this._groups,r=n.length,s=[],o=[],a=0;a<r;++a)for(var u,l=n[a],c=l.length,d=0;d<c;++d)if(u=l[d]){for(var f,h=i.call(u,u.__data__,d,l),p=ma(u,e),m=0,g=h.length;m<g;++m)(f=h[m])&&lx(f,t,e,m,h,p);s.push(h),o.push(u)}return new Wl(s,o,t,e)},selectChild:jl.selectChild,selectChildren:jl.selectChildren,filter:function Ave(i){"function"!=typeof i&&(i=Dz(i));for(var t=this._groups,e=t.length,n=new Array(e),r=0;r<e;++r)for(var l,s=t[r],o=s.length,a=n[r]=[],c=0;c<o;++c)(l=s[c])&&i.call(l,l.__data__,c,s)&&a.push(l);return new Wl(n,this._parents,this._name,this._id)},merge:function Rve(i){if(i._id!==this._id)throw new Error;for(var t=this._groups,e=i._groups,n=t.length,s=Math.min(n,e.length),o=new Array(n),a=0;a<s;++a)for(var h,l=t[a],c=e[a],u=l.length,d=o[a]=new Array(u),f=0;f<u;++f)(h=l[f]||c[f])&&(d[f]=h);for(;a<n;++a)o[a]=t[a];return new Wl(o,this._parents,this._name,this._id)},selection:function Vve(){return new Bve(this._groups,this._parents)},transition:function eye(){for(var i=this._name,t=this._id,e=yG(),n=this._groups,r=n.length,s=0;s<r;++s)for(var l,o=n[s],a=o.length,c=0;c<a;++c)if(l=o[c]){var u=ma(l,t);lx(l,i,e,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Wl(n,this._parents,i,e)},call:jl.call,nodes:jl.nodes,node:jl.node,size:jl.size,empty:jl.empty,each:jl.each,on:function Ove(i,t){var e=this._id;return arguments.length<2?ma(this.node(),e).on.on(i):this.each(kve(e,i,t))},attr:function fve(i,t){var e=ex(i),n="transform"===e?B_e:_G;return this.attrTween(i,"function"==typeof t?(e.local?hve:dve)(e,n,ED(this,"attr."+i,t)):null==t?(e.local?lve:ave)(e):(e.local?uve:cve)(e,n,t))},attrTween:function vve(i,t){var e="attr."+i;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;var n=ex(i);return this.tween(e,(n.local?gve:_ve)(n,t))},style:function Wve(i,t,e){var n="transform"==(i+="")?N_e:_G;return null==t?this.styleTween(i,function Hve(i,t){var e,n,r;return function(){var s=tp(this,i),o=(this.style.removeProperty(i),tp(this,i));return s===o?null:s===e&&o===n?r:r=t(e=s,n=o)}}(i,n)).on("end.style."+i,vG(i)):"function"==typeof t?this.styleTween(i,function zve(i,t,e){var n,r,s;return function(){var o=tp(this,i),a=e(this),l=a+"";return null==a&&(this.style.removeProperty(i),l=a=tp(this,i)),o===l?null:o===n&&l===r?s:(r=l,s=t(n=o,a))}}(i,n,ED(this,"style."+i,t))).each(function Gve(i,t){var e,n,r,a,s="style."+t,o="end."+s;return function(){var l=Qa(this,i),c=l.on,u=null==l.value[s]?a||(a=vG(t)):void 0;(c!==e||r!==u)&&(n=(e=c).copy()).on(o,r=u),l.on=n}}(this._id,i)):this.styleTween(i,function Uve(i,t,e){var n,s,r=e+"";return function(){var o=tp(this,i);return o===r?null:o===n?s:s=t(n=o,e)}}(i,n,t),e).on("end.style."+i,null)},styleTween:function qve(i,t,e){var n="style."+(i+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,$ve(i,t,null==e?"":e))},text:function Kve(i){return this.tween("text","function"==typeof i?function Xve(i){return function(){var t=i(this);this.textContent=null==t?"":t}}(ED(this,"text",i)):function Yve(i){return function(){this.textContent=i}}(null==i?"":i+""))},textTween:function Jve(i){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==i)return this.tween(t,null);if("function"!=typeof i)throw new Error;return this.tween(t,Qve(i))},remove:function Lve(){return this.on("end.remove",function Pve(i){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==i)return;t&&t.removeChild(this)}}(this._id))},tween:function U_e(i,t){var e=this._id;if(i+="",arguments.length<2){for(var o,n=ma(this.node(),e).tween,r=0,s=n.length;r<s;++r)if((o=n[r]).name===i)return o.value;return null}return this.each((null==t?V_e:H_e)(e,i,t))},delay:function xve(i){var t=this._id;return arguments.length?this.each(("function"==typeof i?yve:bve)(t,i)):ma(this.node(),t).delay},duration:function Cve(i){var t=this._id;return arguments.length?this.each(("function"==typeof i?wve:Mve)(t,i)):ma(this.node(),t).duration},ease:function Eve(i){var t=this._id;return arguments.length?this.each(Sve(t,i)):ma(this.node(),t).ease},easeVarying:function Dve(i){if("function"!=typeof i)throw new Error;return this.each(function Tve(i,t){return function(){var e=t.apply(this,arguments);if("function"!=typeof e)throw new Error;Qa(this,i).ease=e}}(this._id,i))},end:function tye(){var i,t,e=this,n=e._id,r=e.size();return new Promise(function(s,o){var a={value:o},l={value:function(){0==--r&&s()}};e.each(function(){var c=Qa(this,n),u=c.on;u!==i&&((t=(i=u).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),0===r&&s()})},[Symbol.iterator]:jl[Symbol.iterator]};var sye={time:null,delay:0,duration:250,ease:function rye(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}};function oye(i,t){for(var e;!(e=i.__transition)||!(e=e[t]);)if(!(i=i.parentNode))throw new Error(`transition ${t} not found`);return e}__.prototype.interrupt=function P_e(i){return this.each(function(){cx(this,i)})},__.prototype.transition=function aye(i){var t,e;i instanceof Wl?(t=i._id,i=i._name):(t=yG(),(e=sye).time=bD(),i=null==i?null:i+"");for(var n=this._groups,r=n.length,s=0;s<r;++s)for(var l,o=n[s],a=o.length,c=0;c<a;++c)(l=o[c])&&lx(l,i,t,c,o,e||oye(l,t));return new Wl(n,this._parents,i,t)};Math;function E_(i){return{type:i}}function SG(i){for(var n,t=-1,e=i.length,r=i[e-1],s=0;++t<e;)s+=(n=r)[1]*(r=i[t])[0]-n[0]*r[1];return s/2}function On(i){return"string"==typeof i?new to([[document.querySelector(i)]],[document.documentElement]):new to([[i]],Vz)}["w","e"].map(E_),["n","s"].map(E_),["n","w","e","s","nw","ne","sw","se"].map(E_);const LD={capture:!0,passive:!1};function FD(i){i.preventDefault(),i.stopImmediatePropagation()}function mye(i){var t=i.document.documentElement,e=On(i).on("dragstart.drag",FD,LD);"onselectstart"in t?e.on("selectstart.drag",FD,LD):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function gye(i,t){var e=i.document.documentElement,n=On(i).on("dragstart.drag",null);t&&(n.on("click.drag",FD,LD),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in e?n.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function EG(i){return((i=Math.exp(i))+1/i)/2}const bye=function i(t,e,n){function r(s,o){var g,_,a=s[0],l=s[1],c=s[2],h=o[2],f=o[0]-a,p=o[1]-l,m=f*f+p*p;if(m<1e-12)_=Math.log(h/c)/t,g=function(E){return[a+E*f,l+E*p,c*Math.exp(t*E*_)]};else{var v=Math.sqrt(m),y=(h*h-c*c+n*m)/(2*c*e*v),b=(h*h-c*c-n*m)/(2*h*e*v),x=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(b*b+1)-b);_=(w-x)/t,g=function(E){var R=E*_,F=EG(x),N=c/(e*v)*(F*function yye(i){return((i=Math.exp(2*i))-1)/(i+1)}(t*R+x)-function vye(i){return((i=Math.exp(i))-1/i)/2}(x));return[a+N*f,l+N*p,c*F/EG(t*R+x)]}}return g.duration=1e3*_*t/Math.SQRT2,g}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o;return i(o,a,a*a)},r}(Math.SQRT2,2,4);function Pd(i,t){if(i=function xye(i){let t;for(;t=i.sourceEvent;)i=t;return i}(i),void 0===t&&(t=i.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var n=e.createSVGPoint();return n.x=i.clientX,n.y=i.clientY,[(n=n.matrixTransform(t.getScreenCTM().inverse())).x,n.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[i.clientX-r.left-t.clientLeft,i.clientY-r.top-t.clientTop]}}return[i.pageX,i.pageY]}const vx=i=>()=>i;function wye(i,{sourceEvent:t,target:e,transform:n,dispatch:r}){Object.defineProperties(this,{type:{value:i,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:r}})}function el(i,t,e){this.k=i,this.x=t,this.y=e}el.prototype={constructor:el,scale:function(i){return 1===i?this:new el(this.k*i,this.x,this.y)},translate:function(i,t){return 0===i&0===t?this:new el(this.k,this.x+this.k*i,this.y+this.k*t)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ND=new el(1,0,0);function BD(i){i.stopImmediatePropagation()}function T_(i){i.preventDefault(),i.stopImmediatePropagation()}function Cye(i){return!(i.ctrlKey&&"wheel"!==i.type||i.button)}function Sye(){var i=this;return i instanceof SVGElement?(i=i.ownerSVGElement||i).hasAttribute("viewBox")?[[(i=i.viewBox.baseVal).x,i.y],[i.x+i.width,i.y+i.height]]:[[0,0],[i.width.baseVal.value,i.height.baseVal.value]]:[[0,0],[i.clientWidth,i.clientHeight]]}function TG(){return this.__zoom||ND}function Eye(i){return-i.deltaY*(1===i.deltaMode?.05:i.deltaMode?1:.002)*(i.ctrlKey?10:1)}function Tye(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dye(i,t,e){var n=i.invertX(t[0][0])-e[0][0],r=i.invertX(t[1][0])-e[1][0],s=i.invertY(t[0][1])-e[0][1],o=i.invertY(t[1][1])-e[1][1];return i.translate(r>n?(n+r)/2:Math.min(0,n)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}let yx={};class Rs{constructor(){this.lineThickness=1,this.classes=[],this.transform="",this.selector="",this.index=0,this.visible=!0,this.outOfDesign=!1,this.theoretic=!1,this.tooltip=t=>`<b>${this.name?this.name:this.selector}</b>`}show(t){return(this.floor===t||this.floor===ee.all)&&!this.theoretic&&this.visible&&!this.outOfDesign}redraw(t,e,n){var r=this;return nr(function*(){r.onUpdate(t),void 0!==t.showTower?void 0===r.floor&&r.parent&&r.parent.floor&&(r.floor=r.parent.floor):r.floor=ee.all,r.meterPerPixel=n,yield r.draw(e)})()}createSelector(){if(!this.selector)if(this.parent&&(this.parent.selector?this.selector=this.parent.selector:(this.floor===ee.ground&&(this.selector="L0"),this.floor===ee.top&&(this.selector="L1"))),void 0!==this.name)this.selector+=`-${this.name.replace(/\s/g,"")}`;else{let t=this.constructor.name;"sensorType"in this&&(t=this.sensorType),t in yx||(yx[t]=0),yx[t]++,this.selector+=`-${t}-${yx[t]}`}}draw(t){return nr(function*(){})()}select(){document.querySelectorAll("svg .selected").forEach((t,e)=>{t.classList.remove("selected")}),this.svg.node().classList.add("selected")}setClass(t){!t.node()||!this.classes||this.classes.forEach(e=>{t.node().classList.add(e)})}}class si extends Rs{constructor(t){super(),this.name="",this.coords=[],this.lineThickness=.2,Object.assign(this,t)}draw(t){var e=this;return nr(function*(){void 0===e.svg&&(e.svg=On(`#${e.selector}`)),e.show(t)?(e.svg.attr("points",e.coords.join(" ")).attr("stroke-width",e.meterPerPixel*e.lineThickness).attr("transform",e.transform),e.setClass(e.svg)):e.svg.attr("points","")})()}}class Is extends Rs{constructor(t){super(),this.points=[],this.dash=[],Object.assign(this,t)}draw(t){var e=this;return nr(function*(){void 0===e.svg&&(e.svg=On(`#${e.selector}`)),e.show(t)?(e.svg.attr("points",e.points.join(" ")).attr("stroke-width",e.meterPerPixel*e.lineThickness).attr("transform",e.transform),e.svg.attr("stroke-dasharray",e.dash.map(n=>n*e.meterPerPixel*e.lineThickness).join(" ")),e.setClass(e.svg)):e.svg.attr("points","")})()}}class bx extends Rs{constructor(t){super(),this.d="",Object.assign(this,t)}draw(t){var e=this;return nr(function*(){if(void 0===e.svg){if(!e.show(t))return;e.svg=On(`#${e.selector}`)}e.svg.attr("d",e.d).attr("stroke-width",e.meterPerPixel*e.lineThickness).attr("transform",e.transform),e.setClass(e.svg)})()}setClass(t){!t.node()||0===this.classes.length||t.node().classList.add(this.classes)}}const Et=(i,t)=>Math.round(t*10**i)/10**i,ql=(i,t=3)=>Et(t,i.reduce((e,n)=>e+n,0)),oi=(i,t,e=[0,0],n=3)=>{const r=i*Math.PI/180,s=t*Math.cos(r),o=t*Math.sin(r);return[Et(n,s+e[0]),Et(n,o+e[1])]},Zc=(i,t)=>180*Math.atan2(t[1]-i[1],t[0]-i[0])/Math.PI,DG=(i,t,e,n=0,r=0)=>{const s=f=>f*f,o=f=>Math.sqrt(f);var a=1+s(t),l=2*-n+t*(e-r)*2,c=s(n)+s(e-r)-s(i);s(l);const h=(o(s(l)-4*a*c),(-l-o(s(l)-4*a*c))/(2*a));return[h,t*h+e]},VD=(i,t)=>{const[[e,n],[r,s]]=i,[[o,a],[l,c]]=t;var u,h=(c-a)*(r-e)-(l-o)*(s-n);return 0==h?null:[e+(u=((l-o)*(n-a)-(c-a)*(e-o))/h)*(r-e),n+u*(s-n)]},_a=(i,t,e=2)=>i&&t?Math.round(Math.hypot(t[0]-i[0],t[1]-i[1])*10**e)/10**e:0,H=(i,t)=>[i[0]+t[0],i[1]+t[1]],Yt=(i,t,e=!0)=>e?[i[0],t[1]]:[t[0],i[1]];String.prototype.toTitleCase=function(){return this.replace(/\b\w/g,i=>i.toLocaleUpperCase())};class ji extends Rs{constructor(t){super(),this.textRotate=0,this.fontSize=14,this.a=[0,0],this.b=[4,4],this.offsetPixels=0,this.offsetMeters=0,this.direction=90,this.lineThickness=.6,this.decimals=1,this.classes=["measure"],this.visible=!1,Object.assign(this,t)}between(t,e){return[t[0]+(e[0]-t[0])/2,t[1]+(e[1]-t[1])/2]}draw(t){var e=this;return nr(function*(){if(void 0===e.svg){if(!e.show(t))return;e.svg=On(`#${e.selector}`),e.setClass(e.svg),e.svgLine=e.svg.append("polyline"),e.svgArrow1=e.svg.append("text"),e.svgArrow2=e.svg.append("text"),e.svgText=e.svg.append("text")}if(!e.show(t))return e.svgLine.attr("points",""),e.svgText.text(""),e.svgArrow1.text(""),void e.svgArrow2.text("");let n=[...e.a],r=[...e.b],s=[0,0];90===e.direction&&(n=[n[0],Math.max(n[1],r[1])],r=[r[0],Math.max(n[1],r[1])]),-90===e.direction&&(n=[n[0],Math.min(n[1],r[1])],r=[r[0],Math.min(n[1],r[1])]),0===e.direction&&(n=[Math.max(n[0],r[0]),n[1]],r=[Math.max(n[0],r[0]),r[1]]),180===e.direction&&(n=[Math.min(n[0],r[0]),n[1]],r=[Math.min(n[0],r[0]),r[1]]);const o=e.offsetPixels*e.meterPerPixel,a=oi(e.direction,o+e.offsetMeters,n),l=oi(e.direction,o+e.offsetMeters,r),u=e.between(a,l);var d=l[0]-a[0],h=l[1]-a[1],f=Et(e.decimals,Math.sqrt(d*d+h*h));e.svg.style("visibility",0===f?"hidden":""),e.svgLine.attr("points",[e.a,n,a,l,r,e.b].join(" ")).attr("stroke-width",e.meterPerPixel*e.lineThickness),e.svgText.attr("font-size",e.meterPerPixel*e.fontSize).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6*e.meterPerPixel).attr("transform",`\n        translate(${u[0]+s[0]} ${u[1]+s[1]}) \n        rotate(${e.textRotate})\n        `).text(f);let p=90;[90,0].includes(e.direction)&&(p=-90),e.svgArrow1.attr("font-size",16*e.meterPerPixel).attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n        translate(${a[0]} ${a[1]}) \n        rotate(${e.direction+p})\n        `).text("<"),e.svgArrow2.attr("font-size",16*e.meterPerPixel).attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n          translate(${l[0]} ${l[1]}) \n          rotate(${e.direction+p+180})\n          `).text("<")})()}}var yr=(()=>{return(i=yr||(yr={})).outer="outer",i.inner="inner",i.sketch="sketch",i.shadow="shadow",yr;var i})(),ks=(()=>{return(i=ks||(ks={})).roof70="roof70",i.roofCircle="roofCircle",i.roofCircleAnd70="roofCircleAnd70",ks;var i})();class Rye{constructor(){this.innerWidth=-1,this.wallOuterThickness=-1,this.roofThickness=.5,this.ceilingHeight=3.3,this.floorAboveGround=.7,this.crawlerSpace=!0,this.floorThickness=.5,this.center=[],this.roofCirclePullDown=1,this.roofCircleExtra=-1,this.roofCircleWalls=1,this.roof70offset=.6,this.roof70Extension=1.2,this.roof70Walls=1.4,this.bendPoint=[-1,-1],this.bendPointInner=[-1,-1],this.roofTop=-1,this.crawlerHeight=-1,this.groundFloorTop=-1,this.groundFloorBottom=-1,this.topFloorTop=-1,this.topFloorBottom=-1,this.groundElevation=-1,this.houseHeight=-1,this.outerWallHeight=-1,this.gableWallArea=-1,this.minimumHeight=1.5,this.minimumHeightWidth=-1,this.minimumHeightRoom=2.3,this.minimumHeightRoomWidth=-1,this.roofStyle=ks.roof70,this.viewedRoofStyle=ks.roof70,this.parts=[],this.create()}create(){this.createCircleRoof(),this.createBuilding(),this.create70Roof(),this.createHelpers(),this.parts.push(new si({selector:"clip-roof",name:"#clip-roof",onUpdate:function(t){this.coords=[[0,-t.roof70Walls],[0,-t.innerWidth],[t.innerWidth,-t.innerWidth],[t.innerWidth,-t.roof70Walls],[t.innerWidth-t.wallOuterThickness,-t.roof70Walls],[t.innerWidth-t.wallOuterThickness,0],[t.wallOuterThickness,0],[t.wallOuterThickness,-t.roof70Walls],,]}}))}calculate(t){this.house=t,this.innerWidth=this.house.outerBase,this.wallOuterThickness=this.house.wallOuterThickness,this.center=[this.house.outerBase/2,0],this.roofCircleExtra=Math.round(Math.cos(65*Math.PI/180)*this.roofCirclePullDown*100)/100,this.bendPoint=[this.roof70offset,-this.getAngle(70,this.roof70offset)-this.roof70Walls],this.bendPointInner=[this.roof70offset,-this.getAngle(70,this.roof70offset)],this.topFloorTop=0,this.topFloorBottom=this.topFloorTop+-this.floorThickness,this.groundFloorTop=this.topFloorBottom-this.ceilingHeight,this.groundFloorBottom=this.groundFloorTop-this.floorThickness,this.groundElevation=this.groundFloorTop-(this.crawlerSpace?this.floorAboveGround:0),this.crawlerHeight=this.crawlerSpace?.9:0,this.roofTop=this.topFloorTop+(this.roof70Walls+2),this.houseHeight=Et(3,this.roofTop-this.groundElevation),this.roofInnerContourLine(),this.gableWallArea=10,this.outerWallHeight=Math.abs(this.groundElevation),this.minimumHeightWidth=Et(3,this.getIntersectionWithRoof(this.minimumHeight)[0]),this.minimumHeightRoomWidth=Et(3,this.getIntersectionWithRoof(this.minimumHeightRoom)[0])}createBuilding(){this.parts.push(new si({selector:"building-ground-fill",onUpdate:function(t){this.coords=[[-2,-t.groundElevation],[t.innerWidth+2,-t.groundElevation],[t.innerWidth+2,2-t.groundElevation],[-2,2-t.groundElevation]]}})),this.parts.push(new si({selector:"building-ground",onUpdate:function(t){this.coords=[[-2,-t.groundElevation],[t.innerWidth+2,-t.groundElevation],[t.innerWidth+2,2-t.groundElevation],[-2,2-t.groundElevation]]}})),this.parts.push(new Is({selector:"building-ground-line",onUpdate:function(t){this.points=[[-2,-t.groundElevation],[t.innerWidth+2,-t.groundElevation]]}})),this.parts.push(new si({selector:"building-crawler",onUpdate:function(t){const[e,n]=[t.innerWidth-2*t.wallOuterThickness,t.crawlerHeight],r=[t.wallOuterThickness,-t.groundFloorBottom];this.coords=[[r[0],r[1]],[r[0]+e,r[1]],[r[0]+e,r[1]+n],[r[0],r[1]+n]]}})),this.parts.push(new si({selector:"building-walls",onUpdate:function(t){const[e,n]=[t.innerWidth,-(t.groundFloorBottom-t.crawlerHeight)],r=[0,-t.topFloorTop];this.coords=[[r[0],r[1]],[r[0]+e,r[1]],[r[0]+e,r[1]+n],[r[0],r[1]+n]]}})),this.parts.push(new si({selector:"building-room",onUpdate:function(t){this.coords=[[t.wallOuterThickness,-t.topFloorBottom],[t.innerWidth-t.wallOuterThickness,-t.topFloorBottom],[t.innerWidth-t.wallOuterThickness,-t.groundFloorTop],[t.wallOuterThickness,-t.groundFloorTop]]}})),this.parts.push(new si({selector:"building-fill",onUpdate:function(t){const e=t.viewedRoofStyle===ks.roof70?t.roof70Walls:t.roofCircleWalls,[n,r]=[t.innerWidth,-(t.groundElevation-e)],s=[0,-e];this.coords=[[s[0],s[1]],[s[0]+n,s[1]],[s[0]+n,s[1]+r],[s[0],s[1]+r]]}})),this.parts.push(new si({selector:"building-roof-70-wall1",onUpdate:function(t){this.coords=[[0,-t.roof70Walls],[t.wallOuterThickness,-t.roof70Walls],[t.wallOuterThickness,0],[0,0]]}})),this.parts.push(new si({selector:"building-roof-70-wall2",onUpdate:function(t){this.coords=[[t.innerWidth,-t.roof70Walls],[t.innerWidth-t.wallOuterThickness,-t.roof70Walls],[t.innerWidth-t.wallOuterThickness,0],[t.innerWidth,0]]}})),this.parts.push(new si({selector:"building-roof-circle-wall1",onUpdate:function(t){this.coords=[[0,-t.roofCircleWalls],[t.wallOuterThickness,-t.roofCircleWalls],[t.wallOuterThickness,0],[0,0]]}})),this.parts.push(new si({selector:"building-roof-circle-wall2",onUpdate:function(t){this.coords=[[t.innerWidth,-t.roofCircleWalls],[t.innerWidth-t.wallOuterThickness,-t.roofCircleWalls],[t.innerWidth-t.wallOuterThickness,0],[t.innerWidth,0]]}}))}createHelpers(){this.parts.push(new ji({selector:"minimum",floor:ee.all,direction:0,textRotate:0,onUpdate:function(t){this.offsetPixels=-60;const e=t.getIntersectionWithRoof(t.minimumHeight);this.offsetMeters=-e[0],this.a=[e[0]+t.wallOuterThickness,0],this.b=[e[0]+t.wallOuterThickness,-e[1]]}})),this.parts.push(new ji({selector:"minimum-h",floor:ee.all,direction:-90,textRotate:0,onUpdate:function(t){this.offsetPixels=0;const e=t.getIntersectionWithRoof(t.minimumHeight);this.offsetMeters=1.5,this.a=[+t.wallOuterThickness,0],this.b=[e[0]+t.wallOuterThickness,-e[1]]}})),this.parts.push(new ji({selector:"minimum-room",floor:ee.all,direction:0,textRotate:0,onUpdate:function(t){this.offsetPixels=60;const e=t.getIntersectionWithRoof(t.minimumHeightRoom);this.offsetMeters=e[0];const n=t.innerWidth-e[0]-t.wallOuterThickness;this.a=[n,0],this.b=[n,-e[1]]}})),this.parts.push(new ji({selector:"minimum-room-h",floor:ee.all,direction:-90,textRotate:0,onUpdate:function(t){this.offsetPixels=0;const e=t.getIntersectionWithRoof(t.minimumHeightRoom);this.offsetMeters=1.5;const n=t.innerWidth-e[0]-t.wallOuterThickness;this.a=[n,-e[1]],this.b=[n+e[0],0]}}))}getIntersectionWithRoof(t){const e=[];this.innerRoofContourLine.forEach((r,s,o)=>{if(s+1===o.length)return;const l=VD([r,o[s+1]],[[-100,t],[100,t]]);e.push(l)});let n=e.sort((r,s)=>s[0]-r[0])[0];return n[0]>=(this.innerWidth-this.wallOuterThickness)/2?this.innerRoofContourLine[3]:n}createCircleRoof(){this.parts.push(new si({selector:"roof-circle-fill",onUpdate:function(t){this.coords=[...[0,1,2,3,4].map(e=>t.pointOnCircleRoof(Math.PI*(-e/4),yr.outer))].map(e=>[e[0],e[1]-t.roofCircleWalls])}})),this.parts.push(new si({selector:"roof-circle-shadow",onUpdate:function(t){this.coords=[...[0,1,2,3,4].map(e=>t.pointOnCircleRoof(Math.PI*(-e/4),yr.outer)),...[0,1,2,3,4].map(e=>t.pointOnCircleRoof(Math.PI*(-e/4),yr.inner)).reverse()].map(e=>[e[0],e[1]-t.roofCircleWalls])}})),this.parts.push(new si({selector:"roof-circle",onUpdate:function(t){this.coords=[...[0,1,2,3,4].map(e=>t.pointOnCircleRoof(Math.PI*(-e/4),yr.outer)),...[0,1,2,3,4].map(e=>t.pointOnCircleRoof(Math.PI*(-e/4),yr.inner)).reverse()].map(e=>[e[0],e[1]-t.roofCircleWalls])}})),this.parts.push(new bx({selector:"roof-circle__h-circle",lineThickness:2,onUpdate:function(t){const[e,n]=t.pointOnCircleRoof(0,yr.outer),r=e-t.innerWidth,s=2*r+t.innerWidth;this.d=`M${s},0 a1,1 0 0,0 ${-s},0`,this.transform=`translate(${-r} ${n-t.roofCircleWalls})`}})),this.parts.push(new si({selector:"roof-circle__h-line",lineThickness:2,onUpdate:function(t){this.coords=[t.pointOnCircleRoof(Math.PI*(-3/4),yr.sketch),[t.center[0],t.center[1]+t.roofCirclePullDown],t.pointOnCircleRoof(Math.PI,yr.outer),t.pointOnCircleRoof(0,yr.outer),[t.center[0],t.center[1]+t.roofCirclePullDown],t.pointOnCircleRoof(Math.PI*(-1/4),yr.sketch)].map(function(e){return[e[0],e[1]-t.roofCircleWalls]})}}))}create70Roof(){this.parts.push(new si({selector:"roof-70-fill",onUpdate:function(t){this.coords=t.pointOfRoof().slice(0,7)}})),this.parts.push(new si({selector:"roof-70-shadow",onUpdate:function(t){this.coords=t.pointOfRoof(!0)}})),this.parts.push(new si({selector:"roof-70",onUpdate:function(t){this.coords=t.pointOfRoof()}}))}roofInnerContourLine(){const t=this.pointOfRoof(),e=this.viewedRoofStyle===ks.roof70,n=[this.wallOuterThickness,this.topFloorTop-3],r=[this.wallOuterThickness,this.topFloorTop],s=e?-this.roof70Walls:-this.roofCircleWalls,o=e?t[13]:H(this.pointOnCircleRoof(-1*Math.PI,yr.inner),[0,s]),a=e?t[11]:H(this.pointOnCircleRoof(Math.PI*(-3/4),yr.inner),[0,s]),l=e?t[10]:H(this.pointOnCircleRoof(-.5*Math.PI,yr.inner),[0,s]),c=VD([r,n],[o,a]);this.innerRoofContourLine=[r,c,a,l].map(u=>H(u,[-this.wallOuterThickness,0]).map(h=>Math.abs(Et(3,h))))}pointOfRoof(t=!1){const e=this.roofThickness/Math.sin(70*Math.PI/180),n=.5/Math.tan(70*Math.PI/180),r=Math.sqrt(n**2+e**2),s=this.roofThickness*Math.sin(30*Math.PI/180),o=this.innerWidth/2,a=this.roof70offset,l=this.getAngle(70,a)+this.roof70Walls,c=this.angle(-40,r),u=a-c[0],d=l+c[1],h=o-a,f=h-s,g=this.getAngle(30,h)+l,_=this.getAngle(30,f)+d;return[this.angle(110*Math.PI/180,this.roof70Extension,[0,-this.roof70Walls]),[0,-this.roof70Walls],[a,-l],[o,-g],[this.innerWidth-a,-l],[this.innerWidth,-this.roof70Walls],this.angle(70*Math.PI/180,this.roof70Extension,[this.innerWidth,-this.roof70Walls]),this.angle(70*Math.PI/180,this.roof70Extension,[this.innerWidth-e,-this.roof70Walls]),[this.innerWidth-e,-this.roof70Walls],[this.innerWidth-u,-d],[o,-_],[u,-d],[e,-this.roof70Walls],this.angle(110*Math.PI/180,this.roof70Extension,[e,-this.roof70Walls])]}getAngle(t,e){return e*Math.tan(t*Math.PI/180)}pointOnCircleRoof(t,e){let n;e===yr.outer&&(n=this.innerWidth/2+this.roofCircleExtra),e===yr.inner&&(n=this.innerWidth/2-this.roofThickness+this.roofCircleExtra),e===yr.sketch&&(n=this.innerWidth/2+1.5*this.roofThickness+this.roofCircleExtra);const r=this.angle(t,n);return[r[0]+this.center[0],r[1]+this.center[1]+this.roofCirclePullDown]}angle(t,e,n=[0,0]){const r=e*Math.cos(t),s=e*Math.sin(t);return[r+n[0],s+n[1]]}}const kG=Kr("slideInOut",[ri(":enter",[bt({transform:"translateY(100%)"}),Yn("600ms 0ms ease-out",bt({transform:"translateY(0%)"}))]),ri(":leave",[Yn("300ms  ease-in",bt({transform:"translateY(100%)"}))])]),Iye=Kr("fallInOut",[ri(":enter",[bt({transform:"translateY(-100%)"}),Yn("600ms 0ms ease-out",bt({transform:"translateY(0%)"}))]),ri(":leave",[Yn("300ms ease-in",bt({transform:"translateY(-100%)"}))])]);class OG extends Rs{constructor(t){super(),this.coords=[],this.floor=ee.ground,this.theoretic=!1,this.tooltip=()=>(console.log(this.selector),`Footprint\n    <br>${this.floor}-level\n    <br>${this.area()}m2`),this.area=()=>Math.abs(Math.round(10*SG(this.coords))/10),Object.assign(this,t)}setup(){}draw(t){var e=this;return nr(function*(){void 0===e.svg&&(e.svg=On(`#${e.selector}`),e.name||(e.name=e.selector),e.classes=[`floor-${e.floor}`],e.classes.push("bg-fill")),e.show(t)?(e.svg.attr("points",e.coords.join(" ")),e.setClass(e.svg)):e.svg.attr("points","")})()}}let D_={};var Fe=(()=>{return(i=Fe||(Fe={})).outer="outer",i.inner="inner",i.theoretic="theoretic",Fe;var i})(),te=(()=>{return(i=te||(te={})).in="in",i.out="out",i.left="left",i.right="right",te;var i})(),Ht=(()=>{return(i=Ht||(Ht={})).inside="inside",i.outside="outside",i.tower="tower",i.straight="straight",Ht;var i})();class Ze extends Rs{constructor(t){super(),this.origin=[0,0],this.orientation="",this.ceiling=-1,this.gable=!1,this.tooltip=()=>`Wall <b>${this.orientation}</b> (${this.parent instanceof OG?"outer wall":"of "+this.parent+" room"} ) \n    <br>Inside ${this.getLength(te.in,2)} m2\n    <br>Outside ${this.outerWallLength=this.getLength(te.out,2)} m2`,Object.assign(this,t)}createSelector(){this.selector=this.parent.selector.replace("Footprint-1","outer");const t=Zc(this.sides[te.in][0],this.sides[te.in][1]);this.orientation=0===t?"North":45===t?"NortEast":-45===t||315===t?"NorthWest":90===t?"East":180===t?"South":270===t||-90===t?"West":`${t}`.split(".")[0],this.selector+=`-${this.orientation}Wall`,this.selector in D_||(D_[this.selector]=0),D_[this.selector]++,D_[this.selector]>1&&(this.selector+=`-${D_[this.selector]}`)}draw(t){var e=this;return nr(function*(){if(void 0===e.svg&&(e.svg=On(`#${e.selector}`),e.svgOrigin=e.svg.select(".wall-origin"),e.svgLeft=e.svg.select(".wall-left"),e.svgRight=e.svg.select(".wall-right"),e.svgFill=e.svg.select(".wall-fill"),e.type===Fe.outer&&(e.thickness=e.parent.parent.wallOuterThickness),e.type===Fe.inner&&(e.thickness=e.parent.parent.wallInnerThickness),e.svg.node()&&e.svg.node().classList.add(`type-${e.type}`)),!e.show(t))return e.svgFill.attr("points",""),e.svgLeft.attr("points",""),e.svgRight.attr("points",""),void e.svgOrigin.attr("r","0");e.svgOrigin.attr("cx",e.origin[0]).attr("cy",e.origin[1]).attr("r",e.meterPerPixel*e.lineThickness*3),e.sides.in&&e.sides.out&&e.svgFill.attr("points",[...e.sides.in,...[...e.sides.out].reverse()].join(" "));for(let n of Object.keys(te)){const r=n;if(!(r in e.sides))return;let s;s=r===te.in?e.svgLeft:e.svgRight,s.attr("stroke-width",e.meterPerPixel*e.lineThickness*(e.type===Fe.theoretic?4:1)).attr("points",e.sides[r].join(" ")),s.node()&&s.node().classList.add(`side-${r}`)}e.innerWallLength=e.getLength(te.in),e.outerWallLength=e.getLength(te.out)})()}getLength(t,e=2){const n=this.sides[t];return n&&n[0]&&n[1]?Et(e,_a(...n)):0}getArea(t,e=2){const n=this.getLength(t);return 0===n?0:Et(e,n*this.ceiling)}getPosition(t,e,n=0){const r=this.sides[t],s=this.getLength(t)*e,o=Zc(r[0],r[1]);return oi(o,s+n,r[0])}drawTheoretic(t,e,n){this.thickness=n,"n"===t&&this.drawByRoom(0,1,e,Ht.straight,Ht.straight),"e"===t&&this.drawByRoom(1,2,e,Ht.straight,Ht.straight),"s"===t&&this.drawByRoom(2,3,e,Ht.straight,Ht.straight),"w"===t&&this.drawByRoom(3,0,e,Ht.straight,Ht.straight)}drawByRoom(t,e,n,r,s){if(!1===this.visible)return void(this.sides={[te.in]:[[0,0],[0,0]],[te.out]:[[0,0],[0,0]]});this.type===Fe.inner?(this.thickness=n.wallInnerThickness,this.ceiling=n.cross.ceilingHeight):this.type===Fe.outer?(this.thickness=n.wallOuterThickness,this.ceiling=n.cross.outerWallHeight):this.type===Fe.theoretic?this.ceiling=n.cross.ceilingHeight:console.error(this);const o=(d,h,f)=>h===Ht.inside&&0===d?f+45:h===Ht.inside&&1===d||h===Ht.outside&&0===d?f-45:h===Ht.outside&&1===d?f+45:h===Ht.tower&&0===d?f+67.5:h===Ht.tower&&1===d?f-67.5:h===Ht.straight?f:void 0,a=d=>{const h=Math.sqrt(this.thickness**2*2),f=n.tower;return d===Ht.inside||d===Ht.outside?h:d===Ht.tower?_a(f.innerCoords[0],f.outerCoords[7]):d===Ht.straight?this.thickness:void 0};let l=this.parent.coords[t],c=this.parent.coords[e];this.origin=l,this.innerWallLength=_a(l,c);let u=Zc(l,c)-90;this.sides={[te.in]:[l,c]},this.type!==Fe.theoretic&&(this.sides[te.out]=[oi(o(0,r,u),a(r),l),oi(o(1,s,u),a(s),c)])}}class Re extends Rs{constructor(t){super(),this.points=[],this.offset=[0,0],this.offsetWall=.3,this.elevation=.3,this.verticalCableLength=0,this.cableOnly=!1,this.sensorOnly=!1,this.wallSide=te.in,this.cableLength=0,this.amount=1,this.floor=ee.ground,this.fontSize=14,this.visible=!1,this.tooltip=()=>{let e=`<b>${this.sensorType.toTitleCase()} `;return this.cableLength>0&&(e+=`<br>Cable length ${Et(1,this.cableLength)}m2`),this.group&&(e+=`<br>Group ${this.group}`),e},Object.assign(this,t)}getSVG(){var t=this;return nr(function*(){return(yield(yield fetch(`assets/svg/${t.sensorType}.svg`)).text()).replace(/id=\"\w+-?\w*\"/gi,"")})()}draw(t){var e=this;return nr(function*(){if(void 0===e.svg){if(!e.show(t))return;if(e.svg=On(`#${e.selector}.sensor-cable`),e.sensorType===Te.temperature&&(e.sensorOnly=!0),e.cableOnly)e.lineThickness=2,e.classes.push("sensor-room-cable");else{e.svgIcon=On(`#${e.selector}.sensor-icon`),e.svgIcon.node().innerHTML=yield e.getSVG();const r=Math.round(32*e.meterPerPixel*64);e.svgIcon.selectChild().attr("height",`${r}px`).attr("width",`${r}px`).attr("x",-r/2+"px").attr("y",-r/2+"px"),e.badge()}e.group&&e.classes.push(`el-group-${e.group}`),e.cableType&&e.classes.push(`cable-${e.cableType}`),e.classes.push(`sensor-${e.sensorType}`)}if(!e.show(t))return e.svgIcon.attr("points",""),void e.svg.attr("points","");const n=e.calcOffsetWall();e.cableOnly||(e.svgIcon.attr("transform",`translate(${n[0]}, ${n[1]}) scale(${e.show(t)?.01:1e-4})`),e.setClass(e.svgIcon)),e.sensorOnly||(e.svg.attr("points",e.cablePoints(n,t).join(" ")).attr("stroke-width",e.meterPerPixel*e.lineThickness*3).attr("transform",e.transform),e.cableType===ha.OutsidePOE&&e.svg.attr("stroke-dasharray",`${e.meterPerPixel*e.lineThickness*10*.5} ${e.meterPerPixel*e.lineThickness*10}`),e.setClass(e.svg),e.cableLength=e.getLength())})()}cablePoints(t,e){return this.show(e)?[t,...this.points]:[]}getLength(){let e=0;return this.points.forEach((n,r,s)=>{r+1!==this.points.length&&(e+=((n,r)=>Math.hypot(r[0]-n[0],r[1]-n[1]))(n,s[r+1]))}),Et(2,e+this.verticalCableLength+.3*this.amount)}badge(){if(this.amount<2)return;const t=this.svgIcon.append("g").attr("class","sensor-badge");t.append("circle").attr("r",24).attr("cx",26).attr("fill",2===this.amount?"white":"#333").attr("stroke","black").attr("cy",-26).attr("stroke-width",this.meterPerPixel*this.lineThickness*40),t.append("text").attr("fill",2===this.amount?"black":"white").attr("x",26).attr("y",-22).attr("text-anchor","middle").attr("class","sensor-badge-text").attr("stroke","none").attr("dominant-baseline","middle").attr("font-size",3*this.fontSize).text(`${this.amount}`)}calcOffsetWall(){if(this.parent instanceof Ze){const e=this.parent.sides[this.wallSide],n=Zc(e[0],e[1]);return oi(n+90,this.offsetWall,this.points[0])}return[this.points[0][0]+this.offset[0],this.points[0][1]+this.offset[1]]}select(){document.querySelectorAll("svg .selected").forEach((t,e)=>{t.classList.remove("selected")}),[Te.socket,Te.perilex].includes(this.sensorType)?document.querySelectorAll(`.el-group-${this.group}`).forEach((t,e)=>{t.classList.add("selected")}):(this.svg.node().classList.add("selected"),this.svgIcon.node().classList.add("selected"))}}let kye=(()=>{class i{constructor(){this.class="base",this.html="dummy"}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=ft({type:i,selectors:[["tooltip"]],hostAttrs:[1,"popup"],hostVars:2,hostBindings:function(e,n){2&e&&function qL(i){la(js,Wa,i,!0)}(n.class)},decls:2,vars:1,consts:[[3,"innerHtml"],[1,"popup-arrow","popup-arrow-mid"]],template:function(e,n){1&e&&ie(0,"div",0)(1,"div",1),2&e&&Z("innerHtml",n.html,Ku)},styles:[".popup-arrow-mid{left:calc(50% - 10px)!important;background:inherit}[_nghost-%COMP%]{position:relative!important}"]}),i})();class Oi extends Rs{constructor(t){super(),this.coords=[],this.floor=ee.ground,this.hole=!1,this.centralElectricity=[0,0],this.theoretic=!1,this.width=0,this.height=0,this.tooltip=()=>{console.log(this.selector);let e=`Room <b>${this.name}</b> \n    <br>${this.floor}-level\n    <br>${this.area()}m2`;return this.width&&(e+=`<br>width: ${this.width}m`),this.height&&(e+=`<br>height: ${this.height}m`),e},this.area=()=>0===this.coords.length||this.hole?0:Math.abs(Math.round(10*SG(this.coords))/10),this.volume=()=>this.floor===ee.top||this.hole||this.floor===ee.ground||this.hole?this.area()*this.parent.cross.ceilingHeight:void 0,this.squaredRoom=(e,n)=>{this.width=Et(3,e),this.height=Et(3,n),this.coords=[this.northWestCorner,H(this.northWestCorner,[e,0]),H(this.northWestCorner,[e,n]),H(this.northWestCorner,[0,n])],this.center=H(this.northWestCorner,[e/2,n/2]),this.centralElectricity=this.center},Object.assign(this,t)}setup(){}draw(t){var e=this;return nr(function*(){void 0===e.svg&&(e.svg=On(`#${e.selector}`),e.name||(e.name=e.selector),e.classes=[`floor-${e.floor}`],e.hole&&(e.classes.push("room-hole"),e.svg.attr("filter","url(#inset-shadow)")),e.classes.push("bg-fill")),e.show(t)?(e.svg.attr("points",e.coords.join(" ")),e.setClass(e.svg)):e.svg.attr("points","")})()}}class Oye extends Rs{constructor(t){super(),this.last=!1,this.visible=!0,this.fontSize=14,Object.assign(this,t)}draw(t){var e=this;return nr(function*(){void 0===e.svg&&(e.svg=On(`#${e.selector}`),e.svgRun=e.svg.select(".step-run"),e.svgRise=e.svg.select(".step-rise"),e.svgText=e.svg.select(".step-text"),e.last&&e.classes.push("last")),e.svg.style("display",e.show?"":"none"),e.svg.attr("transform",`translate(${e.index*e.parent.run}, ${-e.index*e.parent.rise})`),e.setClass(e.svg),e.svgRun.attr("stroke-width",e.meterPerPixel*e.lineThickness).attr("points",[[0,0],[0,e.parent.runThickness],[e.last?e.parent.nose:e.parent.run+e.parent.riseThickness+e.parent.nose,e.parent.runThickness],[e.last?e.parent.nose:e.parent.run+e.parent.riseThickness+e.parent.nose,0]].join(" ")),e.svgRise.attr("stroke-width",e.meterPerPixel*e.lineThickness).attr("points",[[e.parent.nose,e.parent.runThickness],[e.parent.nose,e.parent.rise],[e.parent.nose+e.parent.riseThickness,e.parent.rise],[e.parent.nose+e.parent.riseThickness,e.parent.runThickness]].join(" ")),e.svgText.attr("font-size",e.fontSize*e.meterPerPixel).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6*e.meterPerPixel).attr("transform",`\n        translate(${e.parent.run/2} ${16*-e.meterPerPixel}) \n        `).text(e.index)})()}}class PG extends Rs{constructor(t){super(),this.name="",this.cx=0,this.cy=0,this.r=1,this.lineThickness=.2,Object.assign(this,t)}draw(t){var e=this;return nr(function*(){if(void 0===e.svg){if(!e.show(t))return;e.svg=On(`#${e.selector}`)}e.svg.attr("cx",e.cx).attr("cy",e.cy).attr("r",e.r).attr("stroke-width",e.meterPerPixel*e.lineThickness).attr("transform",e.transform),e.setClass(e.svg)})()}}class Pye extends Rs{constructor(t){super(),this.floor=ee.all,this.name="step",this.last=!1,this.visible=!0,this.fontSize=10,this.walkLineXY=[0,0],this.nextWalkLineXY=[0,0],this.stringerXY=[0,0],this.nextStingerXY=[0,0],this.lineThickness=.3,Object.assign(this,t)}draw(t){var e=this;return nr(function*(){void 0===e.svg&&(e.svg=On(`#${e.selector}`),e.svgText=e.svg.select(".step-plan-text"),e.svgRise=e.svg.select(".step-plan-rise"),e.svgStep=e.svg.select(".step-plan-lines"),e.last&&e.classes.push("last"));const n=Zc(e.walkLineXY,e.nextWalkLineXY),r=oi(n-45,.8*e.parent.run,e.walkLineXY),s=Zc(e.stringerXY,e.walkLineXY),o=Zc(e.nextStingerXY,e.nextWalkLineXY),a=oi(s,1,e.walkLineXY),l=oi(o,1,e.nextWalkLineXY);e.svgStep.attr("stroke-width",e.meterPerPixel*e.lineThickness).attr("points",[e.walkLineXY,e.stringerXY,e.nextStingerXY,e.nextWalkLineXY,l,a].join(" ")),e.svgRise.attr("stroke-width",e.meterPerPixel*e.lineThickness*1).attr("points",[oi(s+90,e.parent.nose,a),oi(s+90,e.parent.nose,e.stringerXY)].join(" ")),e.svgText.attr("font-size",e.fontSize*e.meterPerPixel).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`translate(${r[0]}, ${r[1]})`).text(e.index),e.setClass(e.svg)})()}}class Lye{constructor(){this.outerBase=-1,this.wallOuterThickness=-1,this.ceilingHeight=3.3,this.floorThickness=.5,this.extensionToNorth=-1,this.groundFloorTop=-1,this.topFloorTop=-1,this.topFloorBottom=-1,this.groundElevation=-1,this.totalRise=-1,this.totalRun=6,this.run=.3,this.runThickness=.02,this.rise=.2,this.riseThickness=.02,this.nose=.02,this.steps=20,this.walkWidth=.8,this.stairOrigin=[0,0],this.stepsRight=12,this.leftFlightSteps=5,this.midFlightSteps=4,this.totalWidth=2.7,this.totalHeight=-1,this.lesserHeight=-1,this.intersections={},this.walkLineOffset=.3,this.parts=[],this.create()}create(){this.createBuilding(),this.createStep(),this.createMeasures(),this.createPlan()}calculate(t){this.house=t,this.outerBase=this.outerBase,this.wallOuterThickness=this.wallOuterThickness,this.extensionToNorth=this.extensionToNorth,this.ceilingHeight=this.house.cross.ceilingHeight,this.floorThickness=this.house.cross.floorThickness,this.groundFloorTop=0,this.topFloorTop=-this.house.cross.groundFloorTop,this.totalRise=this.topFloorTop-this.groundFloorTop,this.stairOrigin=[this.house.stramien.in.we.b,this.house.stramien.in.ns.b-5],this.angle=Et(this.house.stramien.in.ns.b,Math.atan(this.totalRise/this.totalRun)*(180/Math.PI)),this.run=Et(3,this.totalRun/this.steps),this.rise=Et(3,this.totalRise/this.steps),this.step=Et(3,2*this.run+this.run),this.maxSteps=Math.ceil(this.totalRise/.182),this.minSteps=Math.ceil(this.totalRise/.22);const[e,n]=[this.alongWalkLine(1)[1]-this.stairOrigin[1],this.alongWalkLine(this.steps)[1]-this.stairOrigin[1]];this.totalHeight=Math.max(e,n),this.lesserHeight=Math.min(e,n),this.calculateCorrectionArray()}createBuilding(){this.parts.push(new si({selector:"floor-groundfloor",floor:ee.all,parent:this,onUpdate:function(t){this.coords=[[-t.run,t.groundFloorTop],[10,t.groundFloorTop],[10,t.groundFloorTop+t.floorThickness],[-t.run,t.groundFloorTop+t.floorThickness]]}})),this.parts.push(new si({selector:"floor-topfloor-shadow",floor:ee.all,parent:this,onUpdate:function(t){this.coords=[[t.totalRun,-t.topFloorTop],[-t.run,-t.topFloorTop],[-t.run,-(t.topFloorTop-t.floorThickness)],[t.totalRun,-(t.topFloorTop-t.floorThickness)]]}})),this.parts.push(new si({selector:"floor-topfloor",floor:ee.all,parent:this,onUpdate:function(t){this.coords=[[t.totalRun+t.nose,-t.topFloorTop],[10,-t.topFloorTop],[10,-(t.topFloorTop-t.floorThickness)],[t.totalRun+t.nose,-(t.topFloorTop-t.floorThickness)]]}})),this.parts.push(new bx({selector:"nose-line",floor:ee.all,parent:this,onUpdate:function(t){this.d=`M0 0 L${t.totalRun} ${-t.totalRise} `}})),this.parts.push(new bx({selector:"back-line",floor:ee.all,parent:this,onUpdate:function(t){const e=1*t.run;this.d=`M${e} 0 L${oi(-t.angle,-t.run/Math.tan(t.angle*Math.PI/180),[t.totalRun+e,-t.totalRise])}`}}))}createStep(){for(let t=1;t<25;t++)this.parts.push(new Oye({selector:`step-${t}`,floor:ee.all,parent:this,index:t,onUpdate:function(e){this.visible=t<e.steps}}))}createMeasures(){this.parts.push(new ji({selector:"run-size",floor:ee.all,direction:-90,decimals:3,onUpdate:function(t){this.offsetPixels=0,this.offsetMeters=1*t.rise,this.distance=0,this.a=[7*t.run,7*-t.rise],this.b=[8*t.run,8*-t.rise]}})),this.parts.push(new ji({selector:"rise-size",floor:ee.all,direction:180,offsetPixels:.5,decimals:3,onUpdate:function(t){this.offsetPixels=0,this.offsetMeters=1*t.run,this.distance=0,this.a=[7*t.run,7*-t.rise],this.b=[8*t.run,8*-t.rise]}})),this.parts.push(new ji({selector:"total-rise-size",floor:ee.all,direction:0,offsetPixels:0,onUpdate:function(t){const e=t.totalRun+2*t.run;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[e,0],this.b=[e,-t.totalRise]}})),this.parts.push(new ji({selector:"total-run-size",floor:ee.all,direction:90,onUpdate:function(t){this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[0,0],this.b=[t.totalRun,0]}})),this.parts.push(new ji({selector:"plateau-width",floor:ee.all,direction:-90,onUpdate:function(t){const e=t.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[t.stairOrigin[0]+0,e],this.b=[t.stairOrigin[0]+t.walkWidth,e]}})),this.parts.push(new ji({selector:"mid-width",floor:ee.all,direction:-90,onUpdate:function(t){const e=t.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[t.stairOrigin[0]+t.walkWidth,e],this.b=[t.stairOrigin[0]+t.totalWidth-t.walkWidth,e]}})),this.parts.push(new ji({selector:"total-width",floor:ee.all,direction:-90,onUpdate:function(t){const e=t.stairOrigin[1]-.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[t.stairOrigin[0],e],this.b=[t.stairOrigin[0]+t.totalWidth,e]}})),this.parts.push(new ji({selector:"total-height",floor:ee.all,direction:0,onUpdate:function(t){const e=t.stairOrigin[0]+t.totalWidth+.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.b=[e,t.stairOrigin[1]],this.a=[e,t.stairOrigin[1]+t.totalHeight]}})),this.parts.push(new ji({selector:"lesser-height",floor:ee.all,direction:0,onUpdate:function(t){const e=t.stairOrigin[0]+t.totalWidth+.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.b=[e,t.stairOrigin[1]],this.a=[e,t.stairOrigin[1]+t.lesserHeight]}}))}getAngle(t,e,n=[0,0]){const r=e*Math.cos(t),s=e*Math.sin(t);return[r+n[0],s+n[1]]}createPlan(){for(let t=1;t<this.steps+1;t++)this.parts.push(new Pye({selector:`step-plan-${t}`,floor:ee.all,parent:this,index:t,onUpdate:function(e){this.walkLineXY=e.alongWalkLine(t),this.nextWalkLineXY=e.alongWalkLine(t+1),this.stringerXY=e.alongStinger(t),this.nextStingerXY=e.alongStinger(t+1)}})),this.parts.push(new PG({selector:"walk-line-"+t,floor:ee.all,parent:this,onUpdate:function(e){this.r=.1*this.lineThickness,[this.cx,this.cy]=e.alongWalkLine(t)}})),this.parts.push(new PG({selector:"step-stinger-"+t,floor:ee.all,parent:this,onUpdate:function(e){this.r=.1*this.lineThickness,[this.cx,this.cy]=e.alongStinger(t)}}));this.parts.push(new si({selector:"clip-roof-ref",onUpdate:function(t){const[e,n]=t.stairOrigin,r=e+t.walkWidth,s=e+t.totalWidth-t.walkWidth,o=Math.max(t.alongWalkLine(1)[1],n+t.walkWidth),a=Math.max(t.alongWalkLine(t.steps)[1],n+t.walkWidth);this.coords=[[e,n],[e+t.totalWidth,n],[e+t.totalWidth,a],[s,a],[s,n+t.walkWidth],[r,n+t.walkWidth],[r,o],[e,o]]}})),this.parts.push(new si({selector:"clip-ground-floor-ref",floor:ee.ground,onUpdate:function(t){const[e,n]=t.stairOrigin,r=e+t.walkWidth,s=e+t.totalWidth-t.walkWidth,o=Math.max(t.alongWalkLine(1)[1],n+t.walkWidth);Math.max(t.alongWalkLine(t.steps)[1],n+t.walkWidth),this.coords=[[e,n],[s,n],[s,n+t.walkWidth],[r,n+t.walkWidth],[r,o],[e,o]]}})),this.parts.push(new si({selector:"clip-roof-ref",onUpdate:function(t){const[e,n]=t.stairOrigin,r=e+t.walkWidth,s=e+t.totalWidth-t.walkWidth,o=Math.max(t.alongWalkLine(1)[1],n+t.walkWidth),a=Math.max(t.alongWalkLine(t.steps)[1],n+t.walkWidth);this.coords=[[e,n],[e+t.totalWidth,n],[e+t.totalWidth,a],[s,a],[s,n+t.walkWidth],[r,n+t.walkWidth],[r,o],[e,o]]}})),this.parts.push(new si({selector:"outline",floor:ee.all,parent:this,onUpdate:function(t){const[e,n]=t.stairOrigin,r=e+t.walkWidth,s=e+t.totalWidth-t.walkWidth,o=Math.max(t.alongWalkLine(1)[1],n+t.walkWidth),a=Math.max(t.alongWalkLine(t.steps)[1],n+t.walkWidth);this.coords=[[e,n],[e+t.totalWidth,n],[e+t.totalWidth,a],[s,a],[s,n+t.walkWidth],[r,n+t.walkWidth],[r,o],[e,o]]}})),this.parts.push(new Is({selector:"middleLine",floor:ee.all,parent:this,lineThickness:2,onUpdate:function(t){const e=t.stairOrigin[0]+t.totalWidth/2;this.points=[[e,t.stairOrigin[1]],[e,t.stairOrigin[1]+t.walkWidth]]}})),this.parts.push(new Is({selector:"left-corner-line",floor:ee.all,parent:this,lineThickness:2,onUpdate:function(t){this.points=[[t.stairOrigin[0],t.stairOrigin[1]],[t.stairOrigin[0]+t.walkWidth,t.stairOrigin[1]+t.walkWidth]]}})),this.parts.push(new Is({selector:"right-corner-line",floor:ee.all,parent:this,lineThickness:2,onUpdate:function(t){const[e,n]=[t.stairOrigin[0]+t.totalWidth,t.stairOrigin[1]];this.points=[[e,n],[e-t.walkWidth,n+t.walkWidth]]}})),this.parts.push(new bx({selector:"walk-line",floor:ee.all,parent:this,onUpdate:function(t){const e=t.walkWidth-t.walkLineOffset,n=t.alongWalkLine(t.steps),r=t.alongWalkLine(1);this.d=`\n        M${r[0]} ${r[1]} \n        L${r[0]} ${t.stairOrigin[1]+t.walkWidth}\n        a${t.walkLineOffset},${t.walkLineOffset} 0 0 1 ${t.walkLineOffset},${-t.walkLineOffset}\n        L${t.stairOrigin[0]+t.walkWidth} ${t.stairOrigin[1]+e}\n        L${t.stairOrigin[0]+t.totalWidth-t.walkWidth} ${t.stairOrigin[1]+e}\n        a${t.walkLineOffset},${t.walkLineOffset} 0 0 1 ${t.walkLineOffset},${t.walkLineOffset}\n        L${n[0]} ${n[1]}\n        `}}))}calculateCorrectionArray(){const t=this.walkLineOffset*Math.PI/2,e=(this.totalWidth-2*this.walkWidth)/2,n=(this.stepsRight+1)*this.run,s=this.totalRun-n-t-e,o=n-t-e;this.intersections={};const c=this.getEGMethod(s+t/2,this.alongWalkLine(1)[1]-(this.stairOrigin[1]+this.walkWidth),0,0*this.run,!1),u=this.getEGMethod(e+t/2,this.totalWidth/2-this.walkWidth,c+0,0,!0),d=this.getEGMethod(e+t/2,this.totalWidth/2-this.walkWidth,c+0+u,this.run,!1);this.getEGMethod(o+t/2,this.alongWalkLine(this.steps)[1]-(this.stairOrigin[1]+this.walkWidth),c+0+u+d,0*this.run,!0)}getEGMethod(t,e,n,r,s=!1){let o,a,l,c,u;const d=t-r,h=Math.ceil(d/this.run),f=e-r;s?(o=[0,0],a=[0,d],l=[-f,0],c=DG(f,-a[1]/f,a[1]),c=[-c[0],c[1]]):(o=[0,0],a=[0,d],l=[f,0],c=DG(f,-a[1]/f,a[1]));const p=[];for(let m=0;m<h+1;m++)u=s?[0,Math.min(this.run*(h-m),d)]:[0,Math.min(this.run*m,d)],p.push(VD([o,c],[u,l]));for(let m=0;m<h+1;m++)if(0!==m)try{let g;g=s?p[m+1]:p[m-1],this.intersections[n+m]=this.run-_a(g,p[m])}catch(g){}return h}alongStinger(t){let e=(t-1)*this.run;const n=this.walkLineOffset*Math.PI/2,r=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsRight+1)*this.run,l=this.alongWalkLine(t),c=this.alongWalkLine(t+1),d=(Zc(l,c),isNaN(this.intersections[t])?0:this.intersections[t]);return e<o-r-n/2?[this.stairOrigin[0]+this.walkWidth,l[1]+d]:e<o?[l[0]+d,this.stairOrigin[1]+this.walkWidth]:e-o<r+n/2?[l[0]-d,this.stairOrigin[1]+this.walkWidth]:[this.stairOrigin[0]+this.totalWidth-this.walkWidth,l[1]+d]}alongWalkLine(t){let e=(t-1)*this.run;const n=this.walkLineOffset*Math.PI/2,r=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsRight+1)*this.run,a=o-n-r;if(e<a){const[l,c]=[this.stairOrigin[0]+this.walkWidth-this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[l,c+a-e]}if(e<a+n)return e-=a,oi(180+e/n*90,this.walkLineOffset,[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth]);if(e<o){e-=a+n;const[l,c]=[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[l+e,c]}if(e<o+r){e-=o;const[l,c]=[this.stairOrigin[0]+this.totalWidth/2,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[l+e,c]}if(e<o+r+n)return e-=o+r,oi(e/n*90-90,this.walkLineOffset,[this.stairOrigin[0]+this.totalWidth-this.walkWidth,this.stairOrigin[1]+this.walkWidth]);{e-=o+r+n;const[l,c]=[this.stairOrigin[0]+this.totalWidth-this.walkWidth+this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[l,c+e]}}}class Fye extends Rs{constructor(t){super(),this.origin=[0,0],this.scale=[1,1],this.rotate=0,Object.assign(this,t)}draw(t){var e=this;return nr(function*(){if(void 0===e.svg){if(!e.show(t))return;e.svg=On(`#${e.selector}`),e.svg1=e.svg.select(".house-wind-rose-1"),e.svg2=e.svg.select(".house-wind-rose-2"),e.svgText=e.svg.select(".house-wind-rose-text")}e.svg.style("transform",` \n      translate(${e.origin[0]}px, ${e.origin[1]}px) \n      rotate(${e.rotate}deg) \n      scale(${e.scale[0]}, ${e.scale[1]})\n      `),e.svg1.attr("points",[[0,0],[10,30],[0,20]].map(([r,s])=>[r*e.meterPerPixel,s*e.meterPerPixel]).join(" ")).attr("stroke-width",1),e.svg2.attr("points",[[0,0],[-10,30],[0,20]].map(([r,s])=>[r*e.meterPerPixel,s*e.meterPerPixel]).join(" ")).attr("stroke-width",1),e.svgText.attr("font-size",12).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6).attr("transform",`\n          translate(0 ${-8*e.meterPerPixel}) \n          rotate(${e.rotate})\n          `).text("North")})()}}class Bye extends class Nye{}{constructor(t){super(),this.outerBase=void 0,this.extensionToNorth=void 0,this.extensionToSouth=void 0,this.extensionToWest=void 0,this.extensionToEast=void 0,this.houseWidth=void 0,this.houseLength=void 0,this.gridSizeY=void 0,this.gridSizeX=void 0,this.balconyWidth=void 0,this.balconyEdge=.3,this.serverRoom=[void 0,void 0],this.cross=new Rye,this.stair=new Lye,this.stats={wall:{},floor:{}},this.tower={show:void 0,innerCoords:void 0,outerCoords:void 0,outerWallOffset:void 0,width:void 0,houseIncrement:void 0,innerIncrement:void 0,outerIncrement:void 0,innerWallLength:void 0,outerWallLength:void 0,intersectionEast:void 0,intersectionWest:void 0,wallOuterThickness:void 0,footprintVisible:!1},Object.assign(this,t),window.house=this,this.calculateHouse(),this.linkParts(),this.calculateStats(),this.createStramien(),this.createGrid(),this.createMeasures(),this.createExtra()}createExtra(){const t=new Is({selector:"view-lines",floor:ee.ground,lineThickness:3,onUpdate:function(n){const r=n.stramien.in,s=3*n.studDistance,o=r.we.b+1,a=r.ns.b+(r.ns.c-r.ns.b)/2;this.points=[[o,n.stair.stairOrigin[1]],[o,r.ns.d+s],[o,a],[r.we.a-s,a],[r.we.d+s,a]]}});this.parts.push(t);const e=new si({selector:"tower-walls",floor:ee.all,onUpdate:function(n){this.visible=n.tower.footprintVisible,this.coords=[...n.tower.innerCoords,n.tower.innerCoords[0],...[...n.tower.outerCoords].reverse(),n.tower.outerCoords[7]]}});this.parts.push(e),this.parts.push(new Is({selector:"roof-line-1",floor:ee.top,lineThickness:1,dash:[10,10],onUpdate:function(n){const r=n.stramien.in,o=[r.we.b,r.ns.b],a=[r.we.b,r.ns.a];this.points=[H([r.we.a,r.ns.b],[0,n.cross.minimumHeightWidth]),H(o,[n.cross.minimumHeightWidth,n.cross.minimumHeightWidth]),H(a,[n.cross.minimumHeightWidth,0])]}})),this.parts.push(new Is({selector:"roof-line-2",floor:ee.top,lineThickness:1,dash:[10,10],onUpdate:function(n){const r=n.stramien.in,o=n.tower.show?[r.we.c,r.ns.b-n.tower.houseIncrement-n.cross.minimumHeightWidth]:[r.we.c,r.ns.b];this.points=[H([r.we.c,r.ns.a],[-n.cross.minimumHeightWidth,0]),H(o,[-n.cross.minimumHeightWidth,n.cross.minimumHeightWidth])]}})),this.parts.push(new Is({selector:"roof-line-3",floor:ee.top,lineThickness:1,dash:[10,10],onUpdate:function(n){const r=n.stramien.in,o=[r.we.d,r.ns.b];this.points=[H(n.tower.show?[r.we.c+n.tower.houseIncrement+n.cross.minimumHeightWidth,r.ns.b]:[r.we.c,r.ns.b],[-n.cross.minimumHeightWidth,n.cross.minimumHeightWidth]),H(o,[0,n.cross.minimumHeightWidth])]}})),this.parts.push(new Is({selector:"roof-line-4",floor:ee.top,lineThickness:1,dash:[10,10],onUpdate:function(n){const r=n.stramien.in,o=[r.we.c,r.ns.c];this.points=[H([r.we.d,r.ns.c],[0,-n.cross.minimumHeightWidth]),H(o,[0,-n.cross.minimumHeightWidth])]}})),this.parts.push(new Is({selector:"roof-line-5",floor:ee.top,lineThickness:1,dash:[10,10],onUpdate:function(n){const r=n.stramien.in,o=[r.we.a,r.ns.c];this.points=[H([r.we.b,r.ns.c],[0,-n.cross.minimumHeightWidth]),H(o,[0,-n.cross.minimumHeightWidth])]}}))}createMeasures(){this.parts.push(new ji({selector:"house-total-width",floor:ee.all,direction:90,textRotate:0,onUpdate:function(t){const e=t.houseLength+2*t.studDistance;this.offsetPixels=16,this.a=[t.stramien.out.we.a,e],this.b=[t.stramien.out.we.d,e]}}));for(let t=0;t<3;t++){const e=["a","b","c","d"];this.parts.push(new ji({selector:"house-width-"+(t+1),floor:ee.all,direction:90,textRotate:0,onUpdate:function(r){const s=r.houseLength+2*r.studDistance;this.offsetPixels=0,this.a=[r.stramien.out.we[e[t+0]],s],this.b=[r.stramien.out.we[e[t+1]],s]}}))}this.parts.push(new ji({selector:"house-height-1",floor:ee.all,direction:0,textRotate:0,onUpdate:function(t){const e=t.houseWidth+1*t.studDistance;this.offsetPixels=8,this.offsetMeters=t.studDistance,this.b=[e,t.stramien.out.ns.a],this.a=[e,t.stramien.out.ns.b]}})),this.parts.push(new ji({selector:"house-height-inner",floor:ee.all,direction:180,textRotate:0,onUpdate:function(t){const e=1*-t.studDistance;this.offsetPixels=8,this.offsetMeters=t.studDistance,this.b=[e,t.stramien.in.ns.b],this.a=[e,t.stramien.in.ns.c]}})),this.parts.push(new ji({selector:"house-height-2",floor:ee.all,direction:0,textRotate:0,onUpdate:function(t){const e=t.houseWidth+1*t.studDistance;this.offsetPixels=8,this.offsetMeters=t.studDistance,this.b=[e,t.stramien.out.ns.b],this.a=[e,t.stramien.out.ns.c]}})),this.parts.push(new ji({selector:"house-height-3",floor:ee.all,direction:0,textRotate:0,onUpdate:function(t){const e=t.houseWidth+1*t.studDistance;this.offsetPixels=8,this.offsetMeters=t.studDistance,this.b=[e,t.stramien.out.ns.c],this.a=[e,t.stramien.out.ns.d]}})),this.parts.push(new ji({selector:"house-total-height",floor:ee.all,direction:0,textRotate:0,onUpdate:function(t){const e=t.houseWidth+1*t.studDistance;this.offsetPixels=32,this.offsetMeters=t.studDistance,this.b=[e,t.stramien.out.ns.a],this.a=[e,t.stramien.out.ns.d]}}))}createStramien(){const t=3*this.studDistance;for(let e of["in","out"])for(let n of["we","ns"])for(let r of["a","b","c","d"]){const s=`house-stramien-${e}-${n}-${r}`;this.parts.push(new Is("ns"===n?{floor:ee.all,selector:s,lineThickness:1.5,onUpdate:function(o){this.points=[[-t,o.stramien[e][n][r]],[o.houseWidth+t,o.stramien[e][n][r]]]}}:{floor:ee.all,selector:s,lineThickness:1.5,onUpdate:function(o){this.points=[[o.stramien[e][n][r],-t],[o.stramien[e][n][r],o.houseLength+t]]}}))}}createGrid(){const t=3*this.studDistance;this.gridSizeY=Math.round(this.houseWidth/this.studDistance+2+1);for(let n=0;n<55;n++){const r=[0,this.studAmountWest,this.studAmountWest+this.studAmount,this.studAmountWest+this.studAmount+this.studAmountEast].includes(n-1),o=new Is({selector:`grid-index-${n}.grid-vertical`,lineThickness:r?.8:.6,index:n,floor:ee.all,onUpdate:function(a){const l=(n-1)*a.studDistance;this.points=this.index<a.gridSizeY?[[l,-t],[l,a.houseLength+t]]:[],this.classes=[r?"grid-main":(n-1)%5?"grid-sub":"grid-subsub"]}});o.createSelector(),this.parts.push(o)}this.gridSizeX=Math.round(this.houseLength/this.studDistance+2+1);for(let n=0;n<55;n++){const r=[0,this.studAmountNorth,this.studAmountNorth+this.studAmount,this.studAmountNorth+this.studAmount+this.studAmountSouth].includes(n-1);this.parts.push(new Is({lineThickness:r?.8:.6,selector:`grid-index-${n}.grid-horizontal`,index:n,floor:ee.all,onUpdate:function(o){const a=(n-1)*o.studDistance;this.points=this.index<o.gridSizeX?[[-t,a],[o.houseWidth+t,a]]:[],this.classes=[r?"grid-main":(n-1)%5?"grid-sub":"grid-subsub"]}}))}this.parts[".house-wind-rose"]=new Fye({rotate:0,floor:ee.all,parent:this,onUpdate:function(n){this.origin=[2,0]}})}linkParts(){const t=(e,n)=>{void 0!==e&&(e.parent=n,e.onUpdate(this),e.createSelector(),e.parts&&e.parts.forEach(r=>t(r,e)),this.partsFlatten.push(e))};this.partsFlatten=[],this.parts.forEach(e=>t(e,this))}calculateTower(){this.tower.wallOuterThickness=this.wallOuterThickness,this.tower.outerWallOffset=Et(4,this.tower.wallOuterThickness*Math.tan(22.5*Math.PI/180)),this.tower.innerWallLength=this.towerWidth,this.tower.outerWallLength=2*this.tower.outerWallOffset+this.tower.innerWallLength,this.tower.show=this.showTower,this.tower.width=this.towerWidth,this.tower.houseIncrement=Et(5,this.tower.outerWallLength/Math.sqrt(2)+this.tower.outerWallLength)}calculateHouse(){this.outerBase=this.studAmount*this.studDistance,this.extensionToSouth=this.studAmountSouth*this.studDistance,this.extensionToNorth=this.studAmountNorth*this.studDistance,this.extensionToEast=this.studAmountEast*this.studDistance,this.extensionToWest=this.studAmountWest*this.studDistance,this.calculateTower(),this.tower.show?this.extensionToNorth=Math.max(this.extensionToNorth,Math.ceil(this.tower.houseIncrement)):this.tower.houseIncrement=0;const t={we:{a:this.wallOuterThickness,b:this.extensionToWest+1*this.wallOuterThickness,c:this.extensionToWest+1*this.outerBase+-1*this.wallOuterThickness,d:this.extensionToEast+this.outerBase+this.extensionToWest+-1*this.wallOuterThickness},ns:{a:this.wallOuterThickness,b:this.extensionToNorth+1*this.wallOuterThickness,c:this.extensionToNorth+this.outerBase+-1*this.wallOuterThickness,d:this.extensionToNorth+this.outerBase+this.extensionToSouth+-1*this.wallOuterThickness}};this.stramien={in:t,out:{we:{a:t.we.a-this.wallOuterThickness,b:t.we.b-this.wallOuterThickness,c:t.we.c+this.wallOuterThickness,d:t.we.d+this.wallOuterThickness},ns:{a:t.ns.a-this.wallOuterThickness,b:t.ns.b-this.wallOuterThickness,c:t.ns.c+this.wallOuterThickness,d:t.ns.d+this.wallOuterThickness}}},this.serverRoom=[this.stramien.in.we.c-1,this.stramien.in.ns.b-this.wallInnerThickness],this.houseWidth=Et(4,this.stramien.out.we.d-this.stramien.out.we.a),this.houseLength=Et(4,this.stramien.out.ns.d-this.stramien.out.ns.a),this.calculateTowerCoords(),this.cross.calculate(this),this.stair.calculate(this)}calculateStats(){this.getWallLength(),this.getWallArea(),this.getFloorArea()}getWallLength(){this.stats.wall.innerLength=Math.ceil(ql(Object.values(this.partsFlatten).filter(t=>t instanceof Ze).map(t=>t.type===Fe.outer?t.getLength(te.in):t.type===Fe.inner?t.getLength(te.out)+t.getLength(te.in):0))),this.stats.wall.outerLength=Math.ceil(ql(Object.values(this.partsFlatten).filter(t=>t instanceof Ze).filter(t=>t.type===Fe.outer).map(t=>t.getLength(te.out)),1))}getWallArea(){this.stats.wall.innerArea=Math.ceil(ql(Object.values(this.partsFlatten).filter(t=>t instanceof Ze).map(t=>{let e=0;return t.type===Fe.inner&&(e+=t.getArea(te.out)),e+=t.getArea(te.in),e}))),this.stats.wall.outerArea=Math.ceil(ql(Object.values(this.partsFlatten).filter(t=>t instanceof Ze).filter(t=>t.type===Fe.outer).map(t=>t.getArea(te.out)),1))}getFloorArea(){let t={};Object.keys(ee).map(e=>{t[e]={area:0,volume:0}}),this.partsFlatten.filter(e=>e instanceof Oi).filter(e=>"innerFootprint"!==e.name).filter(e=>!e.hole).forEach(e=>{t[e.floor].area+=e.area(),t[e.floor].volume+=e.volume(),t[ee.all].area+=e.area(),t[ee.all].volume+=e.volume()}),Object.keys(ee).map(e=>{t[e]={area:Et(0,t[e].area),volume:Et(0,t[e].volume)}}),this.stats.floor=t}calculateTowerCoords(){!1===this.tower.show&&(this.tower.width=0,this.tower.outerWallOffset=0,this.tower.innerWallLength=0,this.tower.outerWallLength=0,this.tower.houseIncrement=0,this.tower.wallOuterThickness=0);let t=this.tower.wallOuterThickness/Math.cos(22.5*Math.PI/180);this.tower.innerIncrement=Math.sqrt(this.tower.innerWallLength**2/2),this.tower.outerIncrement=Math.sqrt(this.tower.outerWallLength**2/2);const e=[this.stramien.out.we.c+this.tower.outerWallOffset,this.stramien.out.ns.b-this.tower.innerIncrement-this.tower.innerWallLength-this.tower.outerWallOffset],n=e,r=H(e,[this.tower.width,0]),s=oi(45,this.tower.width,r),o=H(s,[0,this.tower.width]),a=oi(135,this.tower.width,o),l=H(a,[-this.tower.width,0]),c=oi(225,this.tower.width,l),u=H(c,[0,-this.tower.width]);this.tower.innerCoords=[n,r,s,o,a,l,c,u],this.tower.outerCoords=[oi(-112.5,t,n),oi(-67.5,t,r),oi(-22.5,t,s),oi(22.5,t,o),oi(67.5,t,a),oi(112.5,t,l),oi(157.5,t,c),oi(202.5,t,u)],this.tower.intersectionWest=H(this.tower.outerCoords[0],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),this.tower.intersectionEast=H(this.tower.outerCoords[3],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),!1===this.tower.show&&(this.tower.intersectionWest=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.intersectionEast=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.innerCoords=[...Array(8).keys()].map(d=>[this.stramien.in.we.c,this.stramien.in.ns.b]),this.tower.outerCoords=[...Array(8).keys()].map(d=>[this.stramien.out.we.c,this.stramien.out.ns.b]))}redrawHouse(t,e,n){const r=(s,o)=>{o.parts.forEach(function(){var a=nr(function*(l){void 0!==l&&(yield l.redraw(s,t,n),void 0!==l.parts&&r(s,l))});return function(l){return a.apply(this,arguments)}}())};e===vr.plan&&r(this,this),e===vr.cross&&r(this.cross,this.cross),e===vr.stair&&r(this.stair,this.stair)}}class ai extends Rs{constructor(t){super(),this.width=.8,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.outside=!1,Object.assign(this,t)}draw(t){var e=this;return nr(function*(){if(void 0===e.svg&&(e.svg=On(`#${e.selector}`),e.svgOpening=e.svg.select(".door-wall-opening"),e.svgSwing=e.svg.select(".door-swing")),!e.show(t))return e.svgOpening.attr("points",""),void e.svgSwing.attr("d","");let n;n=1===e.scale[0]?[0,0]:[e.parent.thickness,0],e.svg.style("transform",` \n      translate(${e.origin[0]+n[0]}px, ${e.origin[1]+n[1]}px) \n      rotate(${e.rotate}deg) \n      scale(${e.scale[0]}, ${e.scale[1]})\n      `),e.svgOpening.attr("points",[[0,-e.width],[e.parent.thickness,-e.width],[e.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill").attr("stroke-width",e.meterPerPixel*e.lineThickness),e.svgSwing.attr("d",`M${e.parent.thickness},0 \n        L0,0  \n        L${-e.width},0  \n        A${e.width},${e.width} 0 0,1  \n        0,${-e.width}\n        L${e.parent.thickness},${-e.width}  `).attr("stroke-width",1*e.meterPerPixel)})()}}var Yl=(()=>{return(i=Yl||(Yl={})).windowWall="windowWall",i.standard="standard",i.hexagon="hexagon",Yl;var i})();class Ur extends Rs{constructor(t){super(),this.floor=ee.ground,this.windowForm=Yl.standard,this.width=2,this.height=2,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.frameThickness=.1,this.frameDepth=.1,this.innerDepthFrame=.1,this.openable=!0,Object.assign(this,t)}get outerDepthFrame(){return this.innerDepthFrame+this.frameDepth}draw(t){var e=this;return nr(function*(){if(void 0===e.svg&&(e.svg=On(`#${e.selector}`),e.svgOpening=e.svg.select(".window-wall-opening"),e.svgPane=e.svg.select(".window-pane")),!e.show(t))return e.svgOpening.attr("points",""),void e.svgPane.attr("d","");let n;n=1===e.scale[0]?[0,0]:[e.parent.thickness,0],e.svg.style("transform",` \n      translate(${e.origin[0]+n[0]}px, ${e.origin[1]+n[1]}px) \n      rotate(${e.rotate}deg) \n      scale(${e.scale[0]}, ${e.scale[1]})\n      `),e.svgOpening.attr("points",[[0,e.width],[e.parent.thickness,e.width],[e.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill").attr("stroke-width",e.meterPerPixel*e.lineThickness),e.svgPane.attr("d",`M${e.innerDepthFrame},0  \n          L${e.innerDepthFrame},${e.frameThickness} \n          L${e.outerDepthFrame},${e.frameThickness}  \n          L${e.outerDepthFrame},0  \n          \n          L${e.outerDepthFrame},${e.width}  \n          L${e.outerDepthFrame},${e.width-e.frameThickness}  \n          L${e.innerDepthFrame},${e.width-e.frameThickness} \n          L${e.innerDepthFrame},${e.width}  \n\n          L${e.innerDepthFrame},0  \n          L${e.innerDepthFrame},${e.frameThickness} \n          L${e.innerDepthFrame+e.frameDepth/2},${e.frameThickness}  \n          L${e.innerDepthFrame+e.frameDepth/2},${e.width-e.frameThickness}  \n          `).attr("stroke-width",1*e.meterPerPixel)})()}}const Vye=[new Oi({name:"Toilet-upstairs",floor:ee.top,onUpdate:function(i){this.northWestCorner=[i.stramien.in.we.b,i.stramien.in.ns.b-1-i.wallInnerThickness],this.squaredRoom(1.7,1)},parts:[new Ze({floor:ee.top,type:Fe.inner,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight,this.origin=H(this.parent.northWestCorner,[0,0]),this.sides={[te.out]:[H(this.origin,[0,-i.wallInnerThickness]),H(this.origin,[this.parent.width+i.wallInnerThickness,-i.wallInnerThickness])],[te.in]:[H(this.origin,[0,0]),H(this.origin,[this.parent.width,0])]}}}),new Ze({type:Fe.inner,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,0]),this.sides={[te.out]:[H(this.origin,[+i.wallInnerThickness,-i.wallInnerThickness]),H(this.origin,[+i.wallInnerThickness,t.height+i.wallInnerThickness])],[te.in]:[H(this.origin,[0,0]),H(this.origin,[0,t.height])]}}}),new Ze({floor:ee.top,type:Fe.inner,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,t.height]),this.sides={[te.out]:[H(this.origin,[+i.wallInnerThickness,i.wallInnerThickness]),H(this.origin,[-t.width,i.wallInnerThickness])],[te.in]:[H(this.origin,[0,0]),H(this.origin,[-t.width,0])]}},parts:[new ai({scale:[-1,1],rotate:-90,onUpdate:function(i){this.origin=H(this.parent.getPosition(te.in,0,0),[-i.wallInnerThickness,0])}})]}),new Ze({type:Fe.theoretic,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight,this.thickness=i.wallInnerThickness;const t=this.parent;this.origin=H(t.northWestCorner,[0*t.width,1*t.height]),this.innerWallLength=t.height,this.sides={[te.in]:[H(this.origin,[0,0]),H(this.origin,[0,-this.innerWallLength])]}}})]}),new Oi({name:"storage-upstairs",floor:ee.top,onUpdate:function(i){this.northWestCorner=[i.stramien.in.we.b,i.stramien.in.ns.b-1-2*i.wallInnerThickness-1],this.squaredRoom(1.7,1)},parts:[new Ze({floor:ee.top,type:Fe.inner,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight,this.origin=H(this.parent.northWestCorner,[0,0]),this.sides={[te.out]:[H(this.origin,[0,-i.wallInnerThickness]),H(this.origin,[this.parent.width+i.wallInnerThickness,-i.wallInnerThickness])],[te.in]:[H(this.origin,[0,0]),H(this.origin,[this.parent.width,0])]}}}),new Ze({type:Fe.inner,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,0]),this.sides={[te.out]:[H(this.origin,[+i.wallInnerThickness,-i.wallInnerThickness]),H(this.origin,[+i.wallInnerThickness,t.height])],[te.in]:[H(this.origin,[0,0]),H(this.origin,[0,t.height])]}},parts:[new ai({scale:[-1,1],rotate:180,onUpdate:function(i){this.origin=H(this.parent.getPosition(te.in,0,0),[-i.wallInnerThickness,0])}})]})]}),new Oi({name:"main-bedroom",floor:ee.top,onUpdate:function(i){this.width=Et(2,i.stramien.in.we.c-i.stramien.in.we.b),this.northWestCorner=[i.stramien.in.we.b,i.stramien.in.ns.a],this.height=Et(3,i.stramien.in.ns.b-this.northWestCorner[1]-i.tower.houseIncrement-i.wallInnerThickness-1);const e=i.stair.totalWidth+i.wallInnerThickness,n=i.stair.stairOrigin[1]-this.northWestCorner[1]-i.wallInnerThickness;this.coords=[this.northWestCorner,H(this.northWestCorner,[this.width,0]),H(this.northWestCorner,[this.width,this.height]),H(this.northWestCorner,[e,this.height]),H(this.northWestCorner,[e,n]),H(this.northWestCorner,[0,n])]},parts:[new Ze({floor:ee.top,type:Fe.theoretic,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight,this.thickness=i.wallOuterThickness,this.origin=H(this.parent.northWestCorner,[0,0]),this.sides={[te.in]:[H(this.origin,[0,0]),H(this.origin,[this.parent.width,0])]}},parts:[]}),new Ze({floor:ee.top,type:Fe.inner,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=t.coords[2],this.innerWallLength=_a(t.coords[3],t.coords[2]),this.sides={[te.out]:[H(this.origin,[0,i.wallInnerThickness]),H(this.origin,[-(this.innerWallLength+i.wallInnerThickness),i.wallInnerThickness])],[te.in]:[H(this.origin,[0,0]),H(this.origin,[-this.innerWallLength,0])]}},parts:[new ai({scale:[1,1],rotate:90,onUpdate:function(i){this.origin=H(this.parent.getPosition(te.in,1,0),[0,0])}})]}),new Ze({type:Fe.inner,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight,this.thickness=i.wallInnerThickness;const t=this.parent;this.origin=t.coords[3],this.innerWallLength=_a(t.coords[4],t.coords[3]),this.sides={[te.out]:[H(this.origin,[-i.wallInnerThickness,i.wallInnerThickness]),H(this.origin,[-i.wallInnerThickness,-this.innerWallLength+i.wallInnerThickness])],[te.in]:[H(this.origin,[0,0]),H(this.origin,[0,-this.innerWallLength])]}}}),new Ze({name:"SouthLeft",floor:ee.top,type:Fe.inner,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=t.coords[4],this.innerWallLength=_a(t.coords[5],t.coords[4]),this.sides={[te.out]:[H(this.origin,[-i.wallInnerThickness,i.wallInnerThickness]),H(this.origin,[-this.innerWallLength,i.wallInnerThickness])],[te.in]:[H(this.origin,[0,0]),H(this.origin,[-this.innerWallLength,0])]}}})]}),new Oi({name:"bathroom",floor:ee.top,onUpdate:function(i){const r=i.stramien.in.ns.b-i.stramien.in.ns.a-i.tower.houseIncrement+i.wallInnerThickness+i.wallInnerThickness-1,o=i.stramien.in.ns.b-.5,a=i.tower.innerCoords[3][0]-2;this.northWestCorner=[i.stair.stairOrigin[0]+i.stair.totalWidth+1.0001+i.wallInnerThickness,r],this.coords=[this.northWestCorner,[i.stramien.in.we.c,r],[i.stramien.in.we.c,i.tower.innerCoords[0][1]],i.tower.innerCoords[1],i.tower.innerCoords[2],[i.tower.innerCoords[3][0],o],[a,o],[a,i.stramien.in.ns.b-i.wallInnerThickness],[this.northWestCorner[0],i.stramien.in.ns.b-i.wallInnerThickness]]},parts:[new Ze({floor:ee.top,type:Fe.inner,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=t.coords[5],this.innerWallLength=_a(t.coords[5],t.coords[6]),this.sides={[te.out]:[H(t.coords[5],[0,i.wallInnerThickness]),H(t.coords[6],[i.wallInnerThickness,i.wallInnerThickness])],[te.in]:[H(t.coords[5],[0,0]),H(t.coords[6],[0,0])]}}}),new Ze({type:Fe.inner,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=t.coords[6],this.innerWallLength=_a(t.coords[6],t.coords[7]),this.sides={[te.out]:[H(t.coords[6],[i.wallInnerThickness,i.wallInnerThickness]),H(t.coords[7],[i.wallInnerThickness,i.wallInnerThickness])],[te.in]:[H(t.coords[6],[0,0]),H(t.coords[7],[0,0])]}}}),new Ze({name:"SouthLeft",floor:ee.top,type:Fe.inner,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=t.coords[5],this.innerWallLength=_a(t.coords[7],t.coords[8]),this.sides={[te.out]:[H(t.coords[7],[i.wallInnerThickness,i.wallInnerThickness]),H(t.coords[8],[-i.wallInnerThickness,i.wallInnerThickness])],[te.in]:[H(t.coords[7],[0,0]),H(t.coords[8],[0,0])]}},parts:[new ai({scale:[1,1],rotate:90,onUpdate:function(i){this.origin=H(this.parent.getPosition(te.in,1,0),[0,0])}})]}),new Ze({type:Fe.inner,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=t.coords[8],this.innerWallLength=_a(t.coords[8],t.coords[0]),this.sides={[te.out]:[H(t.coords[8],[-i.wallInnerThickness,i.wallInnerThickness]),H(t.coords[0],[-i.wallInnerThickness,0])],[te.in]:[H(t.coords[8],[0,0]),H(t.coords[0],[0,0])]}}})]}),new Oi({name:"Upper-east",floor:ee.top,onUpdate:function(i){const e=i.stramien;this.northWestCorner=[e.in.we.c+i.wallInnerThickness,e.in.ns.b+i.balconyWidth+i.wallInnerThickness],this.squaredRoom(e.in.we.d-e.in.we.c-i.wallInnerThickness,e.in.ns.c-e.in.ns.b-i.balconyWidth-i.wallInnerThickness)},parts:[new Ze({type:Fe.inner,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[0*t.width,0*t.height]),this.sides={[te.out]:[H(t.northWestCorner,[-i.wallInnerThickness,-i.wallInnerThickness]),H(t.northWestCorner,[1*t.width,0*t.height-i.wallInnerThickness])],[te.in]:[H(t.northWestCorner,[0*t.width,0*t.height]),H(t.northWestCorner,[1*t.width,0*t.height])]}},parts:[new ai({scale:[1,-1],rotate:-90,onUpdate:function(i){this.origin=H(this.parent.getPosition(te.in,0,0),[0,0])}})]}),new Ze({type:Fe.theoretic,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[1*t.width,0*t.height]),this.sides={[te.in]:[H(t.northWestCorner,[1*t.width,0*t.height]),H(t.northWestCorner,[1*t.width,1*t.height])]}}}),new Ze({type:Fe.theoretic,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[1*t.width,1*t.height]),this.sides={[te.in]:[H(t.northWestCorner,[1*t.width,1*t.height]),H(t.northWestCorner,[0*t.width,1*t.height])]}}}),new Ze({type:Fe.inner,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=t.coords[1],this.sides={[te.out]:[H(t.northWestCorner,[0*t.width-i.wallInnerThickness,1*t.height]),H(t.northWestCorner,[0*t.width-i.wallInnerThickness,0*t.height-i.wallInnerThickness])],[te.in]:[H(t.northWestCorner,[0*t.width,1*t.height]),H(t.northWestCorner,[0*t.width,0*t.height])]}}})]}),new Oi({name:"upper-west-one",floor:ee.top,onUpdate:function(i){const t=i.stramien,e=t.in.ns.c-t.in.ns.b-i.balconyWidth-i.wallInnerThickness,n=(t.in.we.b-t.in.we.a)/3-i.wallInnerThickness;this.northWestCorner=[t.in.we.b-1/3*(t.in.we.b-t.in.we.a),t.in.ns.b+i.balconyWidth+i.wallInnerThickness],this.squaredRoom(n,e)},parts:[new Ze({floor:ee.top,type:Fe.inner,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight,this.origin=H(this.parent.northWestCorner,[0,0]),this.sides={[te.out]:[H(this.origin,[0,-i.wallInnerThickness]),H(this.origin,[this.parent.width+i.wallInnerThickness,-i.wallInnerThickness])],[te.in]:[H(this.origin,[0,0]),H(this.origin,[this.parent.width,0])]}},parts:[new ai({scale:[1,1],rotate:-90,onUpdate:function(i){this.origin=H(this.parent.getPosition(te.in,1,0),[0,0])}})]}),new Ze({type:Fe.inner,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,0]),this.sides={[te.out]:[H(this.origin,[+i.wallInnerThickness,-i.wallInnerThickness]),H(this.origin,[+i.wallInnerThickness,t.height])],[te.in]:[H(this.origin,[0,0]),H(this.origin,[0,t.height])]}},parts:[]}),new Ze({type:Fe.theoretic,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,t.height]),this.sides={[te.in]:[H(this.origin,[0,0]),H(this.origin,[-1*t.width,0*t.height])]}},parts:[]}),new Ze({type:Fe.theoretic,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[0*t.width,1*t.height]),this.sides={[te.in]:[H(this.origin,[0,0]),H(this.origin,[0*t.width,-1*t.height])]}},parts:[]})]}),new Oi({name:"upper-west-two",floor:ee.top,onUpdate:function(i){const t=i.stramien,e=t.in.ns.c-t.in.ns.b-i.balconyWidth-i.wallInnerThickness,n=(t.in.we.b-t.in.we.a)/3-i.wallInnerThickness;this.northWestCorner=[t.in.we.b-2/3*(t.in.we.b-t.in.we.a),t.in.ns.b+i.balconyWidth+i.wallInnerThickness],this.squaredRoom(n,e)},parts:[new Ze({floor:ee.top,type:Fe.inner,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight,this.origin=H(this.parent.northWestCorner,[0,0]),this.sides={[te.out]:[H(this.origin,[0,-i.wallInnerThickness]),H(this.origin,[this.parent.width+i.wallInnerThickness,-i.wallInnerThickness])],[te.in]:[H(this.origin,[0,0]),H(this.origin,[this.parent.width,0])]}},parts:[new ai({scale:[1,1],rotate:-90,onUpdate:function(i){this.origin=H(this.parent.getPosition(te.in,1,0),[0,0])}})]}),new Ze({type:Fe.inner,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,0]),this.sides={[te.out]:[H(this.origin,[+i.wallInnerThickness,-i.wallInnerThickness]),H(this.origin,[+i.wallInnerThickness,t.height])],[te.in]:[H(this.origin,[0,0]),H(this.origin,[0,t.height])]}},parts:[]}),new Ze({type:Fe.theoretic,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,t.height]),this.sides={[te.in]:[H(this.origin,[0,0]),H(this.origin,[-1*t.width,0*t.height])]}},parts:[]}),new Ze({type:Fe.theoretic,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[0*t.width,1*t.height]),this.sides={[te.in]:[H(this.origin,[0,0]),H(this.origin,[0*t.width,-1*t.height])]}},parts:[]})]}),new Oi({name:"upper-west-three",floor:ee.top,onUpdate:function(i){const t=i.stramien,e=t.in.ns.c-t.in.ns.b,n=(t.in.we.b-t.in.we.a)/3-i.wallInnerThickness;this.northWestCorner=[t.in.we.b-1*(t.in.we.b-t.in.we.a),t.in.ns.b],this.squaredRoom(n,e)},parts:[new Ze({floor:ee.top,type:Fe.theoretic,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight,this.origin=H(this.parent.northWestCorner,[0,0]),this.sides={[te.in]:[H(this.origin,[0,0]),H(this.origin,[this.parent.width,0])]}}}),new Ze({type:Fe.inner,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,0]),this.sides={[te.out]:[H(this.origin,[+i.wallInnerThickness,0]),H(this.origin,[+i.wallInnerThickness,t.height])],[te.in]:[H(this.origin,[0,0]),H(this.origin,[0,t.height])]}},parts:[new ai({scale:[1,-1],rotate:0,onUpdate:function(i){this.origin=H(this.parent.getPosition(te.in,0,0),[0,0])}})]}),new Ze({type:Fe.theoretic,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[t.width,t.height]),this.sides={[te.in]:[H(this.origin,[0,0]),H(this.origin,[-1*t.width,0*t.height])]}},parts:[]}),new Ze({type:Fe.theoretic,floor:ee.top,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight;const t=this.parent;this.origin=H(t.northWestCorner,[0*t.width,1*t.height]),this.sides={[te.in]:[H(this.origin,[0,0]),H(this.origin,[0*t.width,-1*t.height])]}},parts:[]})]}),new Oi({name:"balcony",floor:ee.top,onUpdate:function(i){const r=i.stramien,s=i.stair,o=i.stramien.in.ns.b-i.stramien.in.ns.a-i.tower.houseIncrement+i.wallInnerThickness+i.wallInnerThickness-1,a=i.stair.stairOrigin[0]+i.stair.totalWidth+1.0001,l=i.stramien.in.ns.b-.5+i.wallInnerThickness,c=i.tower.innerCoords[3][0]-2+i.wallInnerThickness,u=H(s.stairOrigin,[s.totalWidth,s.totalHeight]),d=r.in.ns.b+i.balconyWidth,h=r.in.we.a+1/3*(r.in.we.b-r.in.we.a);this.coords=[H(u,[-s.walkWidth,0]),u,[u[0],o],[a,o],[a,r.in.ns.b],[c,r.in.ns.b],[c,l],[r.in.we.c,l],[i.tower.innerCoords[3][0],l],[i.tower.innerCoords[3][0],r.in.ns.b],[r.in.we.d,r.in.ns.b],[r.in.we.d,d],[i.tower.innerCoords[3][0],d],H([r.in.we.c,d],[0,0]),H([r.in.we.c,d],[0,i.balconyEdge]),H([r.in.we.b,d],[0,i.balconyEdge]),H([r.in.we.b,d],[0,0]),[h,d],[h,r.in.ns.b],[u[0]-s.walkWidth,r.in.ns.b]]},parts:[]}),new Oi({name:"void",floor:ee.top,hole:!0,onUpdate:function(i){const t=[i.stramien.in.we.b,i.stramien.in.ns.b+i.balconyWidth+i.balconyEdge],e=i.stramien.in.ns.d-t[1],n=i.stramien.in.we.c-i.stramien.in.we.b;this.coords=[t,H(t,[1*n,0*e]),H(t,[1*n,1*e]),H(t,[0*n,1*e])]}}),new Oi({name:"voidStairs",floor:ee.top,hole:!0,onUpdate:function(i){const t=i.stair,e=t.stairOrigin,n=i.stramien.in.ns.b-t.stairOrigin[1]-2-3*i.wallInnerThickness,r=t.totalWidth;this.coords=[e,H(e,[r-t.walkWidth,0]),H(e,[r-t.walkWidth,n]),H(e,[0,n])]}})],Hye={studAmount:10,studDistance:.61,towerWidth:1,wallInnerThickness:.2,wallOuterThickness:.4,roof70DegOffset:1,studAmountNorth:14,studAmountSouth:2,studAmountWest:12,studAmountEast:6,showTower:!0,balconyWidth:1.2,name:"Lindelund",orientation:{lat:52,log:5.2,rotation:180},parts:[new OG({floor:ee.ground,onUpdate:function(i){const t=i.stramien,e=i.tower;this.coords=[[t.in.we.b,t.in.ns.b],[t.in.we.b,t.in.ns.a],[t.in.we.c,t.in.ns.a],[t.in.we.c,e.innerCoords[0][1]],e.innerCoords[0],e.innerCoords[1],e.innerCoords[2],e.innerCoords[3],[e.innerCoords[3][0],t.in.ns.b],[t.in.we.d,t.in.ns.b],[t.in.we.d,t.in.ns.c],[t.in.we.c,t.in.ns.c],[t.in.we.c,t.in.ns.d],[t.in.we.b,t.in.ns.d],[t.in.we.b,t.in.ns.c],[t.in.we.a,t.in.ns.c],[t.in.we.a,t.in.ns.b]]},parts:[...[...Array(17).keys()].map((i,t,e)=>{const n=[3,4,5,6,7];if([3,4,5,6,7].includes(i))return;const s=[0,11,14,17],o=e.length;return new Ze({type:Fe.outer,floor:ee.all,onUpdate:function(a){const l=c=>c===n[0]||c===n[4]+1||s.includes(c)?Ht.inside:s.includes(c)?void 0:Ht.outside;this.drawByRoom(i,i+1!==o?i+1:0,a,l(i),l(i+1))},parts:[...16===i?[1,2].map(a=>new Ur({rotate:90,width:.6,onUpdate:function(l){this.origin=this.parent.getPosition(te.out,a/3,this.width/2)}})):[],...15===i?[new Ur({windowForm:Yl.hexagon,floor:ee.top,rotate:0,width:1,onUpdate:function(a){this.origin=this.parent.getPosition(te.out,.5,this.width/2)}}),...[1,2].map(a=>new Ur({rotate:0,width:.9,onUpdate:function(l){this.origin=this.parent.getPosition(te.out,a/3,this.width/2)}}))]:[],...14===i?[1,2].map(a=>new Ur({rotate:-90,onUpdate:function(l){const c=this.parent;this.width=c.innerWallLength<5?c.innerWallLength/3-.2:1.4,this.origin=c.getPosition(te.out,a/3,this.width/2)}})):[],...12===i?[1].map(a=>new Ur({rotate:-90,floor:ee.all,onUpdate:function(l){const c=this.parent;this.width=c.innerWallLength,this.origin=c.getPosition(te.out,a/2,this.width/2)}})):[],...10===i?[1].map(a=>new Ur({rotate:-90,width:1.4,onUpdate:function(l){this.origin=this.parent.getPosition(te.out,a/2,this.width/2)}})):[],...9===i?[new Ur({windowForm:Yl.hexagon,floor:ee.top,rotate:180,width:1,onUpdate:function(a){this.origin=this.parent.getPosition(te.out,.5,this.width/2)}}),...[0,1].map(a=>new Ur({rotate:180,width:.8,onUpdate:function(l){this.origin=this.parent.getPosition(te.out,a,this.width/2+(this.width+.8)*(0===a?1:-1))}}))]:[],...8===i?[1].map(a=>new Ur({rotate:90,width:.6,onUpdate:function(l){this.origin=this.parent.getPosition(te.out,.5,this.width/2-l.wallOuterThickness/2)}})):[],...2===i?[1,2.5].map(a=>new Ur({rotate:180,width:.9,onUpdate:function(l){this.origin=this.parent.getPosition(te.out,a/3,this.width/2)}})):[],...1===i?[new Ur({windowForm:Yl.hexagon,floor:ee.top,rotate:90,width:1,onUpdate:function(a){this.origin=this.parent.getPosition(te.out,.5,this.width/2)}}),...[1,2].map(a=>new Ur({rotate:90,width:.9,onUpdate:function(l){this.origin=this.parent.getPosition(te.out,a/3,this.width/2)}}))]:[],...0===i?[new ai({outside:!0,rotate:0,scale:[1,1],onUpdate:function(a){this.origin=H(this.parent.getPosition(te.in,0,1.2+a.wallInnerThickness),[-a.wallOuterThickness,0])}}),...[2,5].map(a=>new Ur({rotate:0,width:.9,onUpdate:function(l){this.origin=this.parent.getPosition(te.out,(a+1)/8,this.width/2)}}))]:[]]})}).filter(i=>i),new Ze({type:Fe.outer,floor:ee.all,onUpdate:function(i){if(this.ceiling=i.cross.ceilingHeight,this.outOfDesign=!i.showTower,this.outOfDesign)return;const t=i.wallOuterThickness-i.wallInnerThickness;this.origin=[i.stramien.in.we.c,i.tower.innerCoords[0][1]],this.innerWallLength=i.towerWidth-t,this.sides={[te.out]:[i.tower.outerCoords[0],i.tower.outerCoords[1]],[te.in]:[[i.stramien.in.we.c,i.tower.innerCoords[0][1]],i.tower.innerCoords[1]]}}}),new Ze({type:Fe.outer,floor:ee.all,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight,this.outOfDesign=!i.showTower,this.outOfDesign||(this.origin=i.tower.innerCoords[1],this.sides={[te.out]:[i.tower.outerCoords[1],i.tower.outerCoords[2]],[te.in]:[i.tower.innerCoords[1],i.tower.innerCoords[2]]})},parts:[new ai({outside:!0,rotate:135,scale:[1,1],floor:ee.ground,onUpdate:function(i){this.outOfDesign=!i.showTower,this.outOfDesign||(this.origin=this.parent.getPosition(te.out,.5,-this.width/2))}})]}),new Ze({type:Fe.outer,floor:ee.all,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight,this.outOfDesign=!i.showTower,this.outOfDesign||(this.origin=i.tower.innerCoords[2],this.sides={[te.out]:[i.tower.outerCoords[2],i.tower.outerCoords[3]],[te.in]:[i.tower.innerCoords[2],[i.tower.innerCoords[3][0],i.stramien.in.ns.b]]})},parts:[]})]}),new Oi({name:"West",floor:ee.ground,onUpdate:function(i){const t=i.stramien;this.northWestCorner=[t.in.we.a,t.in.ns.b],this.squaredRoom(t.in.we.b-t.in.we.a-i.wallInnerThickness,t.in.ns.c-t.in.ns.b)},parts:[new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.drawTheoretic("n",i,i.wallOuterThickness)},parts:[new Re({offset:[0,.3],sensorType:Te.ethernet,onUpdate:function(){const i=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(te.in,3/4,0);this.points=[t,Yt(i,t,!1),i]}}),new Re({offset:[0,.3],sensorType:Te.ethernet,onUpdate:function(){const i=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(te.in,1/4,0);this.points=[t,Yt(i,t,!1),i]}}),new Re({group:1,sensorType:Te.socket,amount:2,offset:[0,.3],onUpdate:function(){const t=H(this.parent.sides[te.in][1],[-1,0]);this.points=[t]}}),new Re({group:1,sensorType:Te.socket,amount:2,offset:[0,.3],onUpdate:function(){const e=H(this.parent.sides[te.in][1],[-this.parent.parent.width/2,0]);this.points=[e]}}),new Re({group:1,sensorType:Te.socket,amount:2,offset:[0,.3],onUpdate:function(){const t=H(this.parent.sides[te.in][0],[1,0]);this.points=[t]}})]}),new Ze({type:Fe.inner,floor:ee.ground,onUpdate:function(i){this.drawByRoom(1,2,i,Ht.straight,Ht.straight)},parts:[new Re({group:2,sensorType:Te.socket,amount:2,offset:[-.3,0],onUpdate:function(){const t=H(this.parent.sides[te.in][1],[0,-1]);this.points=[t]}}),new Re({group:1,sensorType:Te.socket,amount:2,offset:[-.3,0],onUpdate:function(){const t=H(this.parent.sides[te.in][0],[0,1]);this.points=[t]}}),new ai({scale:[1,-1],onUpdate:function(i){this.origin=H(this.parent.sides[te.in][0],[0,this.parent.parent.height/2-this.width])}}),new ai({scale:[1,1],onUpdate:function(i){this.origin=H(this.parent.sides[te.in][0],[0,this.parent.parent.height/2+this.width])}}),new Re({sensorType:Te.lightSwitch,onUpdate:function(i){const t=this.parent.getPosition(te.in,0,1.5);this.points=[t,Yt(i.serverRoom,t,!1),i.serverRoom]}})]}),new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.drawTheoretic("s",i,i.wallOuterThickness)},parts:[new Re({group:2,sensorType:Te.socket,amount:2,offset:[0,-.3],onUpdate:function(){const t=H(this.parent.sides[te.in][0],[-1,0]);this.points=[t]}}),new Re({group:2,sensorType:Te.socket,amount:2,offset:[0,-.3],onUpdate:function(){const e=H(this.parent.sides[te.in][0],[-this.parent.parent.width/2,0]);this.points=[e]}}),new Re({group:2,sensorType:Te.socket,amount:2,offset:[0,-.3],onUpdate:function(){const t=H(this.parent.sides[te.in][1],[1,0]);this.points=[t]}})]}),new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.drawTheoretic("w",i,i.wallOuterThickness)},parts:[new Re({group:1,sensorType:Te.socket,amount:2,offset:[.3,0],onUpdate:function(){const t=H(this.parent.sides[te.in][1],[0,1]);this.points=[t]}}),new Re({group:2,sensorType:Te.socket,amount:2,offset:[.3,0],onUpdate:function(){const t=H(this.parent.sides[te.in][0],[0,-1]);this.points=[t]}})]}),new Re({sensorType:Te.smoke,onUpdate:function(i){const t=H(this.parent.northWestCorner,[.8*this.parent.width,.5*this.parent.height]),e=H(t,[0,.5*-this.parent.height]);this.points=[t,e,Yt(e,i.serverRoom,!1),i.serverRoom]}}),new Re({sensorType:Te.socket,amount:2,cableOnly:!0,group:1,onUpdate:function(i){const t=this.parent;this.points=[H(t.northWestCorner,[t.width-t.parent.wallInnerThickness,t.height/2-1]),H(t.northWestCorner,[t.width-t.parent.wallInnerThickness,0]),H(t.northWestCorner,[0,0]),H(t.northWestCorner,[0,t.height/2-1])]}}),new Re({sensorType:Te.socket,amount:2,cableOnly:!0,group:2,onUpdate:function(i){const t=this.parent;this.points=[H(t.northWestCorner,[0,t.height/2+1]),H(t.northWestCorner,[0,t.height]),H(t.northWestCorner,[t.width-t.parent.wallInnerThickness,t.height]),H(t.northWestCorner,[t.width-t.parent.wallInnerThickness,t.height/2+1])]}}),new Re({group:1,sensorType:Te.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(i){const t=this.parent,e=H(t.northWestCorner,[t.width-i.wallInnerThickness,0]);this.points=[e,Yt(i.serverRoom,e,!0),i.serverRoom]}}),new Re({group:2,sensorType:Te.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(i){const t=this.parent,e=H(t.northWestCorner,[t.width,t.height/2+1]);this.points=[H(t.northWestCorner,[t.width-i.wallInnerThickness,t.height/2+1]),e,Yt(i.serverRoom,e,!1),i.serverRoom]}}),...[Te.camera,Te.poe].map(i=>new Re({sensorType:i,cableType:ha.OutsidePOE,offset:[0,-1],onUpdate:function(t){const e=this.parent,n=H(e.northWestCorner,[e.width/2,-t.wallOuterThickness]);this.points=[n,H(n,[0,1]),t.serverRoom]}})),...[Te.camera,Te.poe].map(i=>new Re({sensorType:i,cableType:ha.OutsidePOE,offset:[0,1],onUpdate:function(t){const e=this.parent,n=H(e.northWestCorner,[1,e.height+t.wallOuterThickness]);this.points=[n,H(n,[0,-1]),t.serverRoom]}}))]}),new Oi({name:"East",floor:ee.ground,onUpdate:function(i){const t=i.stramien;this.northWestCorner=[t.in.we.c+i.wallInnerThickness,t.in.ns.b],this.squaredRoom(t.in.we.d-t.in.we.c-i.wallInnerThickness,t.in.ns.c-t.in.ns.b)},parts:[new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.drawTheoretic("n",i,i.wallOuterThickness)},parts:[new Re({sensorType:Te.dimmer,onUpdate:function(i){const t=this.parent.getPosition(te.in,.3333333333333333,0);this.points=[t,Yt(i.serverRoom,t,!1),i.serverRoom]}}),new Re({group:3,sensorType:Te.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(te.in,1/3,0)]}}),new Re({group:3,sensorType:Te.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(te.in,2/3,0)]}}),new Re({offset:[0,.3],sensorType:Te.ethernet,onUpdate:function(){const i=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(te.in,3/4,0);this.points=[t,Yt(i,t,!0),i]}})]}),new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.drawTheoretic("e",i,i.wallOuterThickness)},parts:[...[Te.camera,Te.poe].map(i=>new Re({sensorType:i,cableType:ha.OutsidePOE,offsetWall:-.3,onUpdate:function(t){const e=this.parent.getPosition(te.in,0,0);this.points=[e,H(e,[-1,1]),t.serverRoom]}})),new Re({sensorType:Te.lightSwitch,onUpdate:function(i){const t=this.parent.getPosition(te.in,.3333333333333333,0);this.points=[t,Yt(i.serverRoom,t,!1),i.serverRoom]}}),new ai({scale:[-1,-1],onUpdate:function(i){const e=this.parent;this.origin=H(e.origin,[0,e.innerWallLength/2-this.width])}}),new ai({scale:[-1,1],outside:!0,onUpdate:function(i){const e=this.parent;this.origin=H(e.origin,[0,e.innerWallLength/2+this.width])}})]}),new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.drawTheoretic("s",i,i.wallOuterThickness)},parts:[new Re({group:3,amount:2,sensorType:Te.socket,onUpdate:function(){this.points=[this.parent.getPosition(te.in,1/3,0)]}}),new Re({group:3,sensorType:Te.socket,amount:2,offset:[0,.3],onUpdate:function(){this.points=[this.parent.getPosition(te.in,2/3,0)]}}),new Re({sensorType:Te.ethernet,onUpdate:function(){const i=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(te.in,1/4,0),e=this.parent.parent.northWestCorner;this.points=[t,Yt(t,e,!0),e,Yt(i,e,!0),i]}})]}),new Ze({type:Fe.inner,floor:ee.ground,onUpdate:function(i){this.drawByRoom(3,0,i,Ht.straight,Ht.straight)},parts:[new Re({sensorType:Te.lightSwitch,onUpdate:function(i){const t=this.parent.getPosition(te.in,.6666666666666666,0);this.points=[t,Yt(i.serverRoom,t,!1),i.serverRoom]}}),new ai({scale:[1,1],rotate:180,onUpdate:function(i){this.origin=H(this.parent.sides[te.in][1],[0,this.parent.parent.height/2-this.width])}}),new ai({scale:[1,-1],rotate:180,onUpdate:function(i){this.origin=H(this.parent.sides[te.in][1],[0,this.parent.parent.height/2+this.width])}})]}),new Re({sensorType:Te.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(i){const t=this.parent;this.points=[H(t.northWestCorner,[t.width,t.height/2-1]),H(t.northWestCorner,[t.width,0]),H(t.northWestCorner,[0,0]),H(t.northWestCorner,[0,t.height/2-1])]}}),new Re({sensorType:Te.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(i){const t=this.parent;this.points=[H(t.northWestCorner,[0,t.height/2+1]),H(t.northWestCorner,[0,t.height]),H(t.northWestCorner,[t.width,t.height]),H(t.northWestCorner,[t.width,t.height/2+1])]}}),new Re({group:3,sensorType:Te.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(i){const e=H(this.parent.northWestCorner,[0,0]);this.points=[e,Yt(i.serverRoom,e,!0),i.serverRoom]}}),new Re({group:3,sensorType:Te.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(i){const t=this.parent,e=H(t.northWestCorner,[-i.wallInnerThickness,t.height/2+1]);this.points=[H(t.northWestCorner,[0,t.height/2+1]),e,Yt(i.serverRoom,e,!1),i.serverRoom]}}),new Re({sensorType:Te.light,onUpdate:function(i){const e=H(this.parent.center,[0,0]);this.points=[e,Yt(i.serverRoom,e,!1),i.serverRoom]}})]}),new Oi({name:"Central",floor:ee.ground,onUpdate:function(i){this.northWestCorner=[i.stramien.in.we.b,i.stramien.in.ns.b],this.squaredRoom(i.stramien.in.we.c-i.stramien.in.we.b,i.stramien.in.ns.d-i.stramien.in.ns.b)},parts:[new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight,this.innerWallLength=i.stramien.in.ns.d-i.stramien.in.ns.c,this.origin=H(this.parent.northWestCorner,[this.parent.width,i.stramien.in.ns.c-i.stramien.in.ns.b]),this.sides={[te.in]:[H(this.origin,[i.wallOuterThickness,+i.wallOuterThickness]),H(this.origin,[i.wallOuterThickness,this.innerWallLength+i.wallOuterThickness])],[te.in]:[H(this.origin,[0,0]),H(this.origin,[0,this.innerWallLength])]}},parts:[new Re({group:4,amount:3,sensorType:Te.socket,onUpdate:function(){this.points=[this.parent.getPosition(te.in,.5,0)]}}),new Re({group:4,amount:2,sensorType:Te.socket,onUpdate:function(){this.points=[this.parent.getPosition(te.in,0,-1)]}})]}),new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.drawTheoretic("e",i,i.wallOuterThickness)},parts:[new Re({sensorType:Te.lightSwitch,onUpdate:function(i){const t=this.parent.getPosition(te.in,0,1.5);this.points=[t,Yt(i.serverRoom,t,!1),i.serverRoom]}})]}),new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.drawTheoretic("s",i,i.wallOuterThickness)},parts:[]}),new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight,this.innerWallLength=i.stramien.in.ns.d-i.stramien.in.ns.c,this.origin=H(this.parent.northWestCorner,[0,i.stramien.in.ns.d-i.stramien.in.ns.b]),this.sides={[te.in]:[H(this.origin,[-i.wallOuterThickness,+i.wallOuterThickness]),H(this.origin,[-i.wallOuterThickness,-this.innerWallLength+i.wallOuterThickness])],[te.in]:[H(this.origin,[0,0]),H(this.origin,[0,-this.innerWallLength])]}},parts:[new Re({group:5,amount:6,sensorType:Te.socket,onUpdate:function(){this.points=[this.parent.getPosition(te.in,.5,0)]}}),new Re({group:5,amount:6,sensorType:Te.socket,onUpdate:function(){this.points=[this.parent.getPosition(te.in,1,1)]}})]}),new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.drawTheoretic("w",i,i.wallOuterThickness)},parts:[new Re({sensorType:Te.lightSwitch,onUpdate:function(i){const t=this.parent.getPosition(te.in,1,-1.5);this.points=[t,Yt(i.serverRoom,t,!1),i.serverRoom]}})]}),new Ze({type:Fe.inner,floor:ee.ground,onUpdate:function(i){this.drawByRoom(0,1,i,Ht.straight,Ht.straight)},parts:[new ai({rotate:90,scale:[-1,1],onUpdate:function(i){this.origin=this.parent.getPosition(te.in,0,0)}})]}),new Re({group:7,offset:[.6,0],sensorType:Te.perilex,verticalCableLength:4,onUpdate:function(i){const t=H(this.parent.northWestCorner,[0,this.parent.height-2]);this.points=[t,Yt(t,i.serverRoom,!0),i.serverRoom]}}),new Re({group:4,cableOnly:!0,sensorType:Te.socket,amount:2,onUpdate:function(i){const t=H(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[H(this.parent.northWestCorner,[this.parent.width,this.parent.height]),H(this.parent.northWestCorner,[this.parent.width,0]),t,Yt(t,i.serverRoom,!0),i.serverRoom]}}),new Re({group:5,cableOnly:!0,sensorType:Te.socket,amount:2,onUpdate:function(i){const t=H(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[H(this.parent.northWestCorner,[0,this.parent.height]),H(this.parent.northWestCorner,[0,0]),t,Yt(t,i.serverRoom,!0),i.serverRoom]}}),new Re({group:5,amount:6,sensorType:Te.socket,onUpdate:function(i){const t=H(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),e=H(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[t,Yt(t,e,!0),e]}}),new Re({group:5,amount:2,offset:[.3,0],sensorType:Te.socket,onUpdate:function(i){const t=H(this.parent.northWestCorner,[0*this.parent.width,.15*this.parent.height]),e=H(this.parent.northWestCorner,[0,.15*this.parent.height]);this.points=[t,Yt(t,e,!0),e]}}),new Re({group:4,amount:2,offset:[-.3,0],sensorType:Te.socket,onUpdate:function(i){const t=H(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]),e=H(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]);this.points=[t,Yt(t,e,!0),e]}}),new Re({sensorType:Te.smoke,verticalCableLength:6,onUpdate:function(i){const t=H(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),e=H(this.parent.northWestCorner,[0*this.parent.width,.8*this.parent.height]),n=this.parent.northWestCorner;this.points=[t,e,n,Yt(n,i.serverRoom,!0),i.serverRoom]}}),new Re({sensorType:Te.ethernet,offset:[.3,0],onUpdate:function(){const i=this.parent.parent.serverRoom,t=H(this.parent.northWestCorner,[0,.5*this.parent.height-2]);this.points=[t,Yt(i,t,!1),i]}}),new Re({sensorType:Te.ethernet,offset:[.3,0],onUpdate:function(){const i=this.parent.parent.serverRoom,t=H(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[t,Yt(i,t,!1),i]}}),new Re({offset:[-.3,0],sensorType:Te.ethernet,onUpdate:function(){const i=this.parent.parent.serverRoom,t=H(this.parent.northWestCorner,[this.parent.width,.5*this.parent.height-2]);this.points=[t,Yt(i,t,!1),i]}}),new Re({sensorType:Te.pir,cableType:ha.SharedEthernet,offset:[0,.3],onUpdate:function(i){const t=this.parent,e=H(t.northWestCorner,[t.width/2,0]),n=Yt(e,i.serverRoom,!0);this.points=[e,n,i.serverRoom]}})]}),new Oi({name:"Hall",floor:ee.ground,onUpdate:function(i){this.northWestCorner=i.stair.stairOrigin,this.squaredRoom(i.stair.totalWidth-i.stair.walkWidth,i.stramien.in.ns.b-i.stair.stairOrigin[1]-i.wallInnerThickness)},parts:[new Re({sensorType:Te.pir,cableType:ha.SharedEthernet,offset:[-.3,0],onUpdate:function(i){const t=this.parent,e=H(t.northWestCorner,[t.width,t.height-1]),n=H(t.northWestCorner,[t.width,t.height]);this.points=[e,n,i.serverRoom]}}),new Ze({type:Fe.inner,floor:ee.ground,onUpdate:function(i){this.drawByRoom(1,2,i,Ht.straight,Ht.straight)},parts:[new ai({rotate:0,scale:[-1,1],onUpdate:function(i){this.origin=this.parent.getPosition(te.in,1,-(1.2+i.wallInnerThickness))}}),new Re({sensorType:Te.lightSwitch,onUpdate:function(i){const t=this.parent.getPosition(te.in,1,-2.5);this.points=[t,Yt(i.serverRoom,t,!1),i.serverRoom]}})]}),new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.drawTheoretic("w",i,i.wallOuterThickness)},parts:[new Re({sensorType:Te.lightSwitch,onUpdate:function(i){const t=this.parent.getPosition(te.in,0,2.5);this.points=[t,Yt(i.serverRoom,t,!1),i.serverRoom]}})]})]}),new Oi({name:"Office",floor:ee.ground,onUpdate:function(i){this.northWestCorner=[i.stramien.in.we.b,i.stramien.in.ns.a],this.squaredRoom(i.stramien.in.we.c-i.stramien.in.we.b,i.stramien.in.ns.b-i.stramien.in.ns.a-(i.stramien.in.ns.b-i.stair.stairOrigin[1])-i.wallInnerThickness)},parts:[new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.drawTheoretic("w",i,i.wallOuterThickness)},parts:[...[2/6,4/6].map(i=>new Re({offsetWall:.3,sensorType:Te.ethernet,onUpdate:function(){const t=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(te.in,i,0);this.points=[e,Yt(t,e,!1),t]}}))]}),new Ze({type:Fe.inner,onUpdate:function(i){this.drawByRoom(2,3,i,Ht.straight,Ht.straight)},parts:[new ai({rotate:90,scale:[1,1],onUpdate:function(i){this.origin=this.parent.getPosition(te.in,1,-(i.stair.totalWidth+i.wallInnerThickness-this.width))}})]}),new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.drawTheoretic("e",i,i.wallOuterThickness)},parts:[...[Te.camera,Te.poe].map(i=>new Re({sensorType:i,cableType:ha.OutsidePOE,offsetWall:-.3,onUpdate:function(t){const e=this.parent.getPosition(te.in,0,0);this.points=[e,H(e,[-1,1]),t.serverRoom]}})),...[2/6,4/6].map(i=>new Re({offsetWall:-.3,sensorType:Te.ethernet,onUpdate:function(){const t=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(te.in,i,0);this.points=[e,Yt(t,e,!1),t]}}))]}),new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.drawTheoretic("n",i,i.wallOuterThickness)},parts:[...[1/6,5/6].map(i=>new Re({offset:[0,.3],sensorType:Te.ethernet,onUpdate:function(){const t=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(te.in,i,0);this.points=[e,Yt(t,e,!1),t]}}))]}),new Re({sensorType:Te.smoke,onUpdate:function(i){const t=H(this.parent.northWestCorner,[.5*this.parent.width,.5*this.parent.height]);this.points=[t,Yt(t,i.serverRoom,!0),i.serverRoom]}}),new Re({sensorType:Te.socket,amount:2,via:ee.ceiling,group:6,offset:[0,.3],onUpdate:function(i){const n=H(this.parent.northWestCorner,[1,0]);this.points=[n]}}),new Re({sensorType:Te.socket,amount:2,group:6,offset:[0,.3],onUpdate:function(i){const t=this.parent,n=H(t.northWestCorner,[t.width-1,0]);this.points=[n]}}),new Re({sensorType:Te.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(i){const t=this.parent,n=H(t.northWestCorner,[0,t.height-1]);this.points=[n]}}),new Re({sensorType:Te.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(i){const n=H(this.parent.northWestCorner,[0,1]);this.points=[n]}}),new Re({sensorType:Te.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(i){const t=this.parent,n=H(t.northWestCorner,[t.width,1]);this.points=[n]}}),new Re({sensorType:Te.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(i){const t=this.parent,n=H(t.northWestCorner,[t.width,t.height-1]);this.points=[n]}}),new Re({sensorType:Te.socket,amount:2,cableOnly:!0,group:6,onUpdate:function(i){const t=this.parent;this.points=[H(t.northWestCorner,[0,t.height-1]),H(t.northWestCorner,[0,0]),H(t.northWestCorner,[t.width,0]),H(t.northWestCorner,[t.width,t.height]),H(t.northWestCorner,[.5*t.width,t.height]),Yt(i.serverRoom,H(t.northWestCorner,[.5*t.width,t.height]),!1),i.serverRoom]}})]}),new Oi({name:"Toilet",floor:ee.ground,onUpdate:function(i){this.northWestCorner=[i.stramien.in.we.b+i.stair.totalWidth-i.stair.walkWidth+i.wallInnerThickness,i.stramien.in.ns.b-1.2-i.wallInnerThickness],this.squaredRoom(.8,1.2)},parts:[new Ze({type:Fe.inner,onUpdate:function(i){this.drawByRoom(0,1,i,Ht.straight,Ht.outside)}}),new Ze({type:Fe.inner,onUpdate:function(i){this.drawByRoom(1,2,i,Ht.outside,Ht.straight)}}),new Ze({type:Fe.theoretic,floor:ee.ground,onUpdate:function(i){this.ceiling=i.cross.ceilingHeight,this.thickness=i.wallInnerThickness;const t=this.parent;this.origin=H(t.northWestCorner,[0*t.width,1*t.height]),this.innerWallLength=t.height,this.sides={[te.in]:[H(this.origin,[0,0]),H(this.origin,[0,-this.innerWallLength])]}},parts:[new Re({sensorType:Te.lightSwitch,onUpdate:function(i){const t=this.parent.getPosition(te.in,0,.8);this.points=[t,Yt(i.serverRoom,t,!1),i.serverRoom]}}),new ai({scale:[1,1],rotate:0,floor:ee.ground,onUpdate:function(i){this.origin=H(this.parent.getPosition(te.in,0,0),[-i.wallInnerThickness,0])}})]})]}),new Oi({name:"Server",floor:ee.ground,onUpdate:function(i){const e=i.stramien.in.we.b+i.stair.totalWidth-i.stair.walkWidth+1.2;this.northWestCorner=[e,i.stramien.in.ns.b-1-i.wallInnerThickness],this.squaredRoom(i.stramien.in.we.c-e,1)},parts:[new Ze({type:Fe.inner,onUpdate:function(i){this.drawByRoom(0,1,i,Ht.straight,Ht.straight)}}),new Re({sensorType:Te.smoke,onUpdate:function(i){const t=this.parent.center;this.points=[t,Yt(t,i.serverRoom,!0),i.serverRoom]}}),...[Te.poe,Te.wifi].map(i=>new Re({offset:[0,.3],sensorType:i,onUpdate:function(t){const e=this.parent.center;this.points=[e,Yt(e,t.serverRoom,!0),t.serverRoom]}})),...[Te.lightSwitch,Te.temperature].map(i=>new Re({sensorType:i,offset:[0,.3],onUpdate:function(t){const e=this.parent,n=H(e.northWestCorner,[.2*e.width,0*e.height]),r=H(e.northWestCorner,[0*e.width,0*e.height]);this.points=[n,r,Yt(t.serverRoom,r,!1),t.serverRoom]}}))]}),new Oi({name:"Tower",floor:ee.ground,onUpdate:function(i){this.outOfDesign=!i.showTower,this.outOfDesign||(this.northWestCorner=[i.stramien.out.we.c-(i.wallOuterThickness-i.wallInnerThickness),i.tower.innerCoords[0][1]],this.center=H(this.northWestCorner,[1,1]),this.centralElectricity=this.center,this.coords=[this.northWestCorner,i.tower.innerCoords[0],i.tower.innerCoords[1],i.tower.innerCoords[2],i.tower.innerCoords[3],[i.tower.innerCoords[3][0],i.stramien.in.ns.b-i.wallInnerThickness],[this.northWestCorner[0],i.stramien.in.ns.b-i.wallInnerThickness]])},parts:[new Ze({type:Fe.inner,floor:ee.ground,onUpdate:function(i){this.outOfDesign=!i.showTower,!this.outOfDesign&&this.drawByRoom(6,0,i,Ht.outside,Ht.straight)},parts:[new ai({scale:[1,1],rotate:180,floor:ee.ground,onUpdate:function(i){this.outOfDesign=!i.showTower,!this.outOfDesign&&(this.floor=ee.ground,this.origin=this.parent.getPosition(te.in,1,0))}})]}),new Ze({type:Fe.inner,floor:ee.ground,onUpdate:function(i){this.outOfDesign=!i.showTower,!this.outOfDesign&&this.drawByRoom(5,6,i,Ht.straight,Ht.outside)},parts:[new ai({scale:[-1,1],rotate:-90,floor:ee.ground,onUpdate:function(i){this.outOfDesign=!i.showTower,!this.outOfDesign&&(this.floor=ee.ground,this.origin=this.parent.getPosition(te.in,0,i.wallInnerThickness))}})]}),new Re({sensorType:Te.pir,cableType:ha.SharedEthernet,offset:[.3,0],onUpdate:function(i){const t=this.parent,e=H(t.northWestCorner,[0,t.height-1]),n=Yt(e,i.serverRoom,!0);this.points=[e,n,i.serverRoom]}}),new Re({sensorType:Te.socket,amount:2,cableOnly:!0,group:4,onUpdate:function(i){const e=this.parent.centralElectricity;this.points=[e,Yt(e,i.serverRoom,!0),i.serverRoom]}})]}),new Oi({name:"Laundry",floor:ee.ground,onUpdate:function(i){const t=i.stramien.in.ns.b-i.stair.stairOrigin[1]-1.2-2*i.wallInnerThickness,e=i.stramien.in.we.b+i.stair.totalWidth-i.stair.walkWidth+i.wallInnerThickness;this.northWestCorner=[e,i.stair.stairOrigin[1]];const n=[e+1.2-i.wallInnerThickness,i.stramien.in.ns.b-1-2*i.wallInnerThickness];this.width=Et(3,i.stramien.in.we.c-e);const r=this.width;this.height=Et(3,t),this.coords=[this.northWestCorner,H(this.northWestCorner,[r,0]),H(this.northWestCorner,[r,t]),[this.northWestCorner[0]+r,n[1]],n,[n[0],this.northWestCorner[1]+t],H(this.northWestCorner,[0,t])],this.center=H(this.northWestCorner,[r/2,t/2]),this.centralElectricity=this.center},parts:[new Re({sensorType:Te.smoke,onUpdate:function(i){const t=this.parent.center;this.points=[t,Yt(t,i.serverRoom,!0),i.serverRoom]}}),new Re({sensorType:Te.ethernet,offset:[.3,0],onUpdate:function(i){const t=i.serverRoom,e=this.parent,n=H(e.northWestCorner,[0*e.width,.5*e.height]);this.points=[n,Yt(t,n,!1),t]}})]}),...Vye]},zr=[];for(let i=0;i<256;i++)zr[i]=(i<16?"0":"")+i.toString(16);Math,Math;var op=(()=>{return(i=op||(op={})).amount="amount",i.name="name",i.sizeOrVersion="sizeOrVersion",i.price="price",i.priceAvg="priceAvg",i.priceMax="priceMax",i.priceTotal="priceTotal",i.remarks="other",i.unit="unit",op;var i})();class ir{constructor(t){this.amount=1,this.type="single",Object.assign(this,t)}get calcPrice(){return Et(3,this.amount*this.price)}get calcAmount(){return this.amount}}class xx extends ir{constructor(t){super(t),this.costs=[],this.type="group",this.collapsed=!1,Object.assign(this,t)}get folded(){return`<span class="material-icons">expand_${this.collapsed?"less":"more"}</span>`}toggleFold(){this.collapsed=!this.collapsed}get calcPrice(){return gD(this.costs.map(t=>t.calcPrice))}get calcAmount(){return gD(this.costs.map(t=>t.amount))}}class $ye extends xx{constructor(t){super(t),this.costs=[],this.type="total",Object.assign(this,t)}get calcPrice(){return gD(this.costs.map(t=>t.calcPrice))}get calcAmount(){return 0}get folded(){return'<span class="material-icons">remove</span>'}}let rr=(()=>{class i{constructor(e){this.appService=e,this.house$=new In(new Bye(Hye)),this.roomKeys=this.house$.value.partsFlatten.filter(n=>n instanceof Oi).map(n=>n.selector),this.wallKeys=this.house$.value.partsFlatten.filter(n=>n instanceof Ze).map(n=>n.selector),this.doorKeys=this.house$.value.partsFlatten.filter(n=>n instanceof ai).map(n=>n.selector),this.windowKeys=this.house$.value.partsFlatten.filter(n=>n instanceof Ur).map(n=>n.selector),this.sensorKeys=this.house$.value.partsFlatten.filter(n=>n instanceof Re).map(n=>n.selector).sort((n,r)=>n.localeCompare(r))}update(e="house",n,r,s){const o=this.house$.value;"house"===e&&(o[n]=r),"stair"===e&&(o.stair[n]=r),"cross"===e&&(o.cross[n]=r),o.calculateHouse(),o.calculateStats(),this.house$.next(o),void 0!==s&&(this.appService.tag$.next(s),clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.appService.tag$.next(void 0)},600))}destroyParts(){const e=r=>{r.parts.forEach(function(){var s=nr(function*(o){o.svg=void 0,void 0!==o.parts&&e(o)});return function(o){return s.apply(this,arguments)}}())},n=this.house$.value;e(n),e(n.cross),e(n.stair)}getGroups(e){return[...new Set(Object.values(this.house$.value.partsFlatten).filter(r=>r instanceof Re).filter(r=>r.sensorType===e).map(r=>r.group))].filter(r=>r).sort((r,s)=>r-s)}getOutlets(e){return Et(1,Object.values(this.house$.value.partsFlatten).filter(r=>r instanceof Re).filter(r=>r.sensorType===e).map(r=>r.amount).reduce((r,s)=>r+s,0))}getCable(e,n=1){return Et(n,Object.values(this.house$.value.partsFlatten).filter(s=>s instanceof Re).filter(s=>s.sensorType===e).map(s=>s.cableLength).reduce((s,o)=>s+o,0))}getWallLength(){const e=this.house$.value;return{innerLength:Math.ceil(ql(Object.values(e.partsFlatten).filter(s=>s instanceof Ze).map(s=>{let o=0;return s.type===Fe.inner&&(o+=s.getLength(te.out)),o+=s.getLength(te.in),o}))),outerLength:Math.ceil(ql(Object.values(e.partsFlatten).filter(s=>s instanceof Ze).filter(s=>s.type===Fe.outer).map(s=>s.getLength(te.out)),1))}}getWallArea(){const e=this.house$.value;return{innerArea:Math.ceil(ql(Object.values(e.partsFlatten).filter(s=>s instanceof Ze).map(s=>{let o=0;return s.type===Fe.inner&&(o+=s.getArea(te.out)),o+=s.getArea(te.in),o}))),outerArea:Math.ceil(ql(Object.values(e.partsFlatten).filter(s=>s instanceof Ze).filter(s=>s.type===Fe.outer).map(s=>s.getArea(te.out)),1))}}getT(e,n,r,s=(()=>!0),o=!0){const a=function Gye(){const i=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(zr[255&i]+zr[i>>8&255]+zr[i>>16&255]+zr[i>>24&255]+"-"+zr[255&t]+zr[t>>8&255]+"-"+zr[t>>16&15|64]+zr[t>>24&255]+"-"+zr[63&e|128]+zr[e>>8&255]+"-"+zr[e>>16&255]+zr[e>>24&255]+zr[255&n]+zr[n>>8&255]+zr[n>>16&255]+zr[n>>24&255]).toLowerCase()}(),l=Object.values(this.house$.value.partsFlatten.filter(c=>c instanceof e).filter(c=>s(c)).reduce((c,u)=>{const d=n.map(h=>`${u[h]}`).join(",");return d in c||(c[d]={count:0,part:u}),c[d].count+=e!==Re||o?1:u.getLength(),c},{})).map(c=>{const u=new ir(r(c.part));return u.amount=Et(1,c.count),u.uuid=a,u});if(l.length>1){const c=new xx({uuid:a,name:`${l[0].name}`,costs:l});return c[l[0].name]=!1,c}{if(!l[0])return;const c=l[0];return c.uuid=void 0,c}}}return i.\u0275fac=function(e){return new(e||i)(J(Wi))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ap=(()=>{class i{constructor(e,n){this.overlay=e,this.houseService=n,this.tooltipHTML$=new In(void 0),this.unsubscribe=new Dt}attachPopup([e,n],r){this.detachOverlay(),this.origin=r instanceof Re?r.svgIcon.node():r.svg.node(),this.overlayRef=this.overlay.create({positionStrategy:this.getPositionStrategy([e,n]),scrollStrategy:this.overlay.scrollStrategies.reposition(),hasBackdrop:!1}),this.overlayRef.backdropClick().pipe(kn(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.attachOverlay(r)}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&this.overlayRef.detach()}updateOverlay(){}attachOverlay(e){if(this.overlayRef&&!this.overlayRef.hasAttached()){const n=new Ub(kye);this.componentRef=this.overlayRef.attach(n),this.componentRef.instance.html=e.tooltip(this.houseService.house$.value)}}getPositionStrategy([e,n]){return this.overlay.position().flexibleConnectedTo(this.origin).withPositions([new zb({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"},0,-20),new zb({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"},0,20,"flipped")]).withPush(!0)}}return i.\u0275fac=function(e){return new(e||i)(J(Ul),J(rr))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),qye=(()=>{class i{constructor(e,n){this.appService=e,this.houseService=n,this.appService.states$.subscribe(r=>{this.states=r,this.house=this.houseService.house$.value,this.cross=this.house.cross,this.filterOut(),this.appService.update$.next()})}filterOut(){this.house.tower.footprintVisible=this.states.includes(Zs.towerFootprint),this.house.partsFlatten.filter(e=>e instanceof ai).forEach(e=>e.visible=this.states.includes(Zs.doors)),this.house.partsFlatten.filter(e=>e instanceof Ze).filter(e=>e.type===Fe.theoretic).forEach(e=>e.visible=this.states.includes(Zs.theoreticalWalls)),[...this.house.parts,...this.cross.parts].filter(e=>e instanceof ji).forEach(e=>e.visible=this.states.includes(Zs.measure)),this.house.parts.filter(e=>e.selector.includes("house-stramien-")).forEach(e=>{e.visible=this.states.includes(Zs.stramien)}),this.house.parts.filter(e=>e.selector.includes("grid-index")).forEach(e=>{e.visible=this.states.includes(Zs.grid)})}}return i.\u0275fac=function(e){return new(e||i)(J(Wi),J(rr))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Yye(i,t){if(1&i){const e=Eo();M(0,"div",6)(1,"button",7),$e("click",function(){on(e);const r=Qe(3);return r.setStates(r.States.doors)}),M(2,"label"),k(3," Doors "),T(),M(4,"mat-icon",8),k(5," door_front"),T()(),M(6,"button",7),$e("click",function(){on(e);const r=Qe(3);return r.setStates(r.States.theoreticalWalls)}),M(7,"label"),k(8," Theoretic walls "),T(),M(9,"mat-icon",8),k(10,"density_large"),T()(),M(11,"button",7),$e("click",function(){on(e);const r=Qe(3);return r.setStates(r.States.grid)}),M(12,"label"),k(13," Grid "),T(),M(14,"mat-icon",8),k(15,"grid_on"),T()(),M(16,"button",7),$e("click",function(){on(e);const r=Qe(3);return r.setStates(r.States.stramien)}),M(17,"label"),k(18," Stramien "),T(),M(19,"mat-icon",8),k(20,"grid_3x3"),T()(),M(21,"button",7),$e("click",function(){on(e);const r=Qe(3);return r.setStates(r.States.towerFootprint)}),M(22,"label"),k(23," Tower footprint "),T(),M(24,"mat-icon",8),k(25,"hexagon"),T()(),M(26,"button",7),$e("click",function(){on(e);const r=Qe(3);return r.setStates(r.States.measure)}),M(27,"label"),k(28," Measurements "),T(),M(29,"mat-icon",8),k(30,"square_foot"),T()()()}if(2&i){const e=Qe(2).ngIf,n=Qe();$(1),qt("active",e.includes(n.States.doors)),$(5),qt("active",e.includes(n.States.theoreticalWalls)),$(5),qt("active",e.includes(n.States.grid)),$(5),qt("active",e.includes(n.States.stramien)),$(5),qt("active",e.includes(n.States.towerFootprint)),$(5),qt("active",e.includes(n.States.measure))}}function Xye(i,t){1&i&&(M(0,"mat-icon"),k(1,"exposure_plus_1"),T())}function Kye(i,t){1&i&&(M(0,"mat-icon"),k(1,"exposure_zero"),T())}function Zye(i,t){if(1&i){const e=Eo();M(0,"button",3),$e("click",function(){return on(e),Qe(3).setFloor()}),Ge(1,Xye,2,0,"mat-icon",2),Ge(2,Kye,2,0,"mat-icon",2),T()}if(2&i){const e=t.ngIf,n=Qe(3);$(1),Z("ngIf",e===n.Floor.top),$(1),Z("ngIf",e===n.Floor.ground)}}function Qye(i,t){if(1&i){const e=Eo();Er(0),Ge(1,Yye,31,12,"div",4),M(2,"button",3),$e("click",function(){on(e);const r=Qe(2);return r.extra=!r.extra}),M(3,"mat-icon"),k(4,"keyboard_double_arrow_down "),T()(),Ge(5,Zye,3,2,"button",5),Br(6,"async"),Tr()}if(2&i){const e=Qe(2);$(1),Z("ngIf",e.extra),$(1),qt("active",e.extra),$(1),Xy("transform","rotate(",e.extra?20:180,"deg)"),Xr("transition","0.4s"),$(2),Z("ngIf",Vr(6,9,e.floor$))}}function Jye(i,t){1&i&&(M(0,"mat-icon"),k(1,"home"),T())}function e0e(i,t){1&i&&(M(0,"mat-icon",8),k(1,"home_outline"),T())}function t0e(i,t){if(1&i){const e=Eo();M(0,"div",6)(1,"button",7),$e("click",function(){on(e);const r=Qe(3);return r.setStates(r.States.measure)}),M(2,"label"),k(3," Measurements "),T(),M(4,"mat-icon"),k(5,"square_foot"),T()(),M(6,"button",7),$e("click",function(){on(e);const r=Qe(3);return r.setStates(r.States.grey)}),M(7,"label"),k(8," Silhouette "),T(),Ge(9,Jye,2,0,"mat-icon",9),Ge(10,e0e,2,0,"ng-template",null,10,ja),T()()}if(2&i){const e=hi(11),n=Qe(2).ngIf,r=Qe();$(1),qt("active",n.includes(r.States.measure)),$(5),qt("active",n.includes(r.States.grey)),$(3),Z("ngIf",!n.includes(r.States.grey))("ngIfElse",e)}}function n0e(i,t){if(1&i){const e=Eo();Er(0),Ge(1,t0e,12,6,"div",4),M(2,"button",3),$e("click",function(){on(e);const r=Qe(2);return r.extra=!r.extra}),M(3,"mat-icon"),k(4,"keyboard_double_arrow_down "),T()(),Tr()}if(2&i){const e=Qe(2);$(1),Z("ngIf",e.extra),$(1),qt("active",e.extra),$(1),Xy("transform","rotate(",e.extra?-20:-180,"deg)"),Xr("transition","0.4s")}}function i0e(i,t){1&i&&(M(0,"mat-icon"),k(1,"fullscreen"),T())}function r0e(i,t){1&i&&(M(0,"mat-icon"),k(1,"fullscreen_exit"),T())}function s0e(i,t){if(1&i){const e=Eo();M(0,"div",1),Br(1,"async"),Ge(2,Qye,7,11,"ng-container",2),Br(3,"async"),Ge(4,n0e,5,8,"ng-container",2),Br(5,"async"),M(6,"button",3),$e("click",function(){on(e);const r=Qe();return r.fullscreen=!r.fullscreen}),Ge(7,i0e,2,0,"mat-icon",2),Ge(8,r0e,2,0,"mat-icon",2),T()()}if(2&i){const e=Qe();_i("container\nsection-",Vr(1,7,e.scroll$).section,""),$(2),Z("ngIf",Vr(3,9,e.scroll$).graphic===e.Graphic.plan),$(2),Z("ngIf",Vr(5,11,e.scroll$).graphic===e.Graphic.cross),$(3),Z("ngIf",!e.fullscreen),$(1),Z("ngIf",e.fullscreen)}}let o0e=(()=>{class i{constructor(e,n,r,s){this.appService=e,this.elementRef=n,this.houseService=r,this.cookieService=s,this.house$=this.houseService.house$,this.Floor=ee,this.floor$=this.appService.floor$,this.scroll$=this.appService.scroll$,this.states$=this.appService.states$,this.setFloor=()=>this.appService.setFloor(),this.Graphic=vr,this.States=Zs,this.extra=!0,this.setStates=this.appService.setStates}get fullscreen(){return this.appService.fullscreen$.value}set fullscreen(e){this.cookieService.set("fullscreen",`${e}`),this.appService.fullscreen$.next(e)}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(C(Wi),C(Ve),C(rr),C(T0))},i.\u0275cmp=ft({type:i,selectors:[["controls"]],decls:2,vars:3,consts:[["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",3,"class",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px"],[4,"ngIf"],["mat-mini-fab","","color","accent",3,"click"],["class","sub-controls","fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",4,"ngIf"],["mat-mini-fab","","color","accent",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",1,"sub-controls"],["mat-mini-fab","",3,"click"],[2,"font-family","Material Icons Outlined"],[4,"ngIf","ngIfElse"],["elseGrey",""]],template:function(e,n){1&e&&(Ge(0,s0e,9,13,"div",0),Br(1,"async")),2&e&&Z("ngIf",Vr(1,1,n.states$))},directives:[Ks,Jg,Gf,vb,TU,fH],pipes:[If],styles:["[_nghost-%COMP%]{display:block;position:fixed;bottom:0px;z-index:9999}.controls-left[_nghost-%COMP%]{left:50px}.controls-left[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{left:-24px;bottom:8px;position:relative}.controls-left[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:left;left:50px;color:var(--color-100)}.controls-right[_nghost-%COMP%]{right:50px}.controls-right[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{right:-24px;bottom:8px;position:relative}.controls-right[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:right;right:50px;color:var(--color-100);opacity:1}.active[_ngcontent-%COMP%]{background-color:var(--accent-50)!important;box-shadow:0 0 #0003,0 0 #00000024,0 0 #000!important;color:#1b1b1b!important}.active[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{opacity:.4}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px 8px 16px}"],data:{animation:[kG]}}),i})();const FG={leading:!0,trailing:!1};let A_=(()=>{class i{constructor(e,n,r,s){this.houseService=e,this.appService=n,this.cookieService=r,this.httpClient=s}loadSVG(e,n,r){const s=new c0e(n,r);return s.get(this.httpClient,e),s}}return i.\u0275fac=function(e){return new(e||i)(J(rr),J(Wi),J(T0),J(xd))},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class c0e{constructor(t,e){this.selector=t,this.callback=e}get(t,e){t.get(e,{responseType:"text"}).pipe(Ts(1)).subscribe(n=>{On(this.selector).html(n)})}update(){this.callback(this.selector)}}const u0e=["svg"];let wx=(()=>{class i{constructor(e,n,r,s,o){this.houseService=e,this.appService=n,this.tooltipService=r,this.host=s,this.d3Service=o,this.isChild=!1,this.marginInMeters=[0,0,0,0],this.marginInPixels=[0,0,0,0],this.house$=this.houseService.house$,this.sections=Object.values(Je),this.tags=Object.values(Ao),this.resize$=new In(void 0),this.subscriptions=[],this.drawingSize=[[0,0],[200,100]],this.loaded=!1}onClick(e){const n=a=>{if(a&&a!==this.svgEl.nativeElement)return"id"in a&&`${a.id}`.length>0?a.id:n(a.parentNode)},r=n(e.target),s=()=>{this.tooltipService.detachOverlay(),document.body.classList.remove("selection-active"),document.querySelectorAll("svg .selected").forEach((a,l)=>{a.classList.remove("selected")})};if(!r)return s();const o=this.house.partsFlatten.find(a=>a.selector===r);if(!o)return console.log(`Couldnt find [${r}] in `,e.target,"probably its only a part of its full ID"),s();document.body.classList.add("selection-active"),o.select(),this.tooltipService.attachPopup([e.pageX,e.pageY],o)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.observer&&this.observer.unobserve(this.host.nativeElement),console.log("destroy",this.graphic),this.houseService.destroyParts()}svgUpdateMarginAndSize(){}setUp(){this.svg=On(this.svgEl.nativeElement),this.g=this.svg.select("g"),this.observer=new ResizeObserver(e=>this.resize$.next(e)),this.observer.observe(this.host.nativeElement),this.resize$.pipe(Xa(e=>_t(void 0))),this.subscriptions.push(Nh(this.house$.pipe(Ii(e=>{const n=this.house$.value;this.house=n,this.cross=n.cross,this.stair=n.stair})),this.appService.update$,this.appService.svgTransform$.pipe(Ii(e=>{if(!this.loaded&&this.graphic in e){const n=e[this.graphic];this.setTransform(new el(n.k,n.x,n.y))}})),this.appService.fullscreen$.pipe(Ii(e=>{e?this.svg.call(function Aye(){var u,d,h,i=Cye,t=Sye,e=Dye,n=Eye,r=Tye,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=bye,c=Gz("start","zoom","end"),f=500,m=0,g=10;function _(I){I.property("__zoom",TG).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",N).filter(r).on("touchstart.zoom",S).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",Y).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(I,z){return(z=Math.max(s[0],Math.min(s[1],z)))===I.k?I:new el(z,I.x,I.y)}function y(I,z,D){var P=z[0]-D[0]*I.k,O=z[1]-D[1]*I.k;return P===I.x&&O===I.y?I:new el(I.k,P,O)}function b(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function x(I,z,D,P){I.on("start.zoom",function(){w(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(P).end()}).tween("zoom",function(){var O=this,q=arguments,K=w(O,q).event(P),Q=t.apply(O,q),j=null==D?b(Q):"function"==typeof D?D.apply(O,q):D,we=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),fe=O.__zoom,_e="function"==typeof z?z.apply(O,q):z,re=l(fe.invert(j).concat(we/fe.k),_e.invert(j).concat(we/_e.k));return function(Ae){if(1===Ae)Ae=_e;else{var Oe=re(Ae),tt=we/Oe[2];Ae=new el(tt,j[0]-Oe[0]*tt,j[1]-Oe[1]*tt)}K.zoom(null,Ae)}})}function w(I,z,D){return!D&&I.__zooming||new E(I,z)}function E(I,z){this.that=I,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(I,z),this.taps=0}function R(I,...z){if(i.apply(this,arguments)){var D=w(this,z).event(I),P=this.__zoom,O=Math.max(s[0],Math.min(s[1],P.k*Math.pow(2,n.apply(this,arguments)))),q=Pd(I);if(D.wheel)(D.mouse[0][0]!==q[0]||D.mouse[0][1]!==q[1])&&(D.mouse[1]=P.invert(D.mouse[0]=q)),clearTimeout(D.wheel);else{if(P.k===O)return;D.mouse=[q,P.invert(q)],cx(this),D.start()}T_(I),D.wheel=setTimeout(K,150),D.zoom("mouse",e(y(v(P,O),D.mouse[0],D.mouse[1]),D.extent,o))}function K(){D.wheel=null,D.end()}}function F(I,...z){if(!h&&i.apply(this,arguments)){var D=I.currentTarget,P=w(this,z,!0).event(I),O=On(I.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",we,!0),q=Pd(I,D),K=I.clientX,Q=I.clientY;mye(I.view),BD(I),P.mouse=[q,this.__zoom.invert(q)],cx(this),P.start()}function j(fe){if(T_(fe),!P.moved){var _e=fe.clientX-K,re=fe.clientY-Q;P.moved=_e*_e+re*re>m}P.event(fe).zoom("mouse",e(y(P.that.__zoom,P.mouse[0]=Pd(fe,D),P.mouse[1]),P.extent,o))}function we(fe){O.on("mousemove.zoom mouseup.zoom",null),gye(fe.view,P.moved),T_(fe),P.event(fe).end()}}function N(I,...z){if(i.apply(this,arguments)){var D=this.__zoom,P=Pd(I.changedTouches?I.changedTouches[0]:I,this),O=D.invert(P),K=e(y(v(D,D.k*(I.shiftKey?.5:2)),P,O),t.apply(this,z),o);T_(I),a>0?On(this).transition().duration(a).call(x,K,P,I):On(this).call(_.transform,K,P,I)}}function S(I,...z){if(i.apply(this,arguments)){var q,K,Q,j,D=I.touches,P=D.length,O=w(this,z,I.changedTouches.length===P).event(I);for(BD(I),K=0;K<P;++K)j=[j=Pd(Q=D[K],this),this.__zoom.invert(j),Q.identifier],O.touch0?!O.touch1&&O.touch0[2]!==j[2]&&(O.touch1=j,O.taps=0):(O.touch0=j,q=!0,O.taps=1+!!u);u&&(u=clearTimeout(u)),q&&(O.taps<2&&(d=j[0],u=setTimeout(function(){u=null},f)),cx(this),O.start())}}function L(I,...z){if(this.__zooming){var q,K,Q,j,D=w(this,z).event(I),P=I.changedTouches,O=P.length;for(T_(I),q=0;q<O;++q)Q=Pd(K=P[q],this),D.touch0&&D.touch0[2]===K.identifier?D.touch0[0]=Q:D.touch1&&D.touch1[2]===K.identifier&&(D.touch1[0]=Q);if(K=D.that.__zoom,D.touch1){var we=D.touch0[0],fe=D.touch0[1],_e=D.touch1[0],re=D.touch1[1],Ae=(Ae=_e[0]-we[0])*Ae+(Ae=_e[1]-we[1])*Ae,Oe=(Oe=re[0]-fe[0])*Oe+(Oe=re[1]-fe[1])*Oe;K=v(K,Math.sqrt(Ae/Oe)),Q=[(we[0]+_e[0])/2,(we[1]+_e[1])/2],j=[(fe[0]+re[0])/2,(fe[1]+re[1])/2]}else{if(!D.touch0)return;Q=D.touch0[0],j=D.touch0[1]}D.zoom("touch",e(y(K,Q,j),D.extent,o))}}function Y(I,...z){if(this.__zooming){var q,K,D=w(this,z).event(I),P=I.changedTouches,O=P.length;for(BD(I),h&&clearTimeout(h),h=setTimeout(function(){h=null},f),q=0;q<O;++q)K=P[q],D.touch0&&D.touch0[2]===K.identifier?delete D.touch0:D.touch1&&D.touch1[2]===K.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),2===D.taps&&(K=Pd(K,this),Math.hypot(d[0]-K[0],d[1]-K[1])<g)){var Q=On(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return _.transform=function(I,z,D,P){var O=I.selection?I.selection():I;O.property("__zoom",TG),I!==O?x(I,z,D,P):O.interrupt().each(function(){w(this,arguments).event(P).start().zoom(null,"function"==typeof z?z.apply(this,arguments):z).end()})},_.scaleBy=function(I,z,D,P){_.scaleTo(I,function(){return this.__zoom.k*("function"==typeof z?z.apply(this,arguments):z)},D,P)},_.scaleTo=function(I,z,D,P){_.transform(I,function(){var O=t.apply(this,arguments),q=this.__zoom,K=null==D?b(O):"function"==typeof D?D.apply(this,arguments):D,Q=q.invert(K),j="function"==typeof z?z.apply(this,arguments):z;return e(y(v(q,j),K,Q),O,o)},D,P)},_.translateBy=function(I,z,D,P){_.transform(I,function(){return e(this.__zoom.translate("function"==typeof z?z.apply(this,arguments):z,"function"==typeof D?D.apply(this,arguments):D),t.apply(this,arguments),o)},null,P)},_.translateTo=function(I,z,D,P,O){_.transform(I,function(){var q=t.apply(this,arguments),K=this.__zoom,Q=null==P?b(q):"function"==typeof P?P.apply(this,arguments):P;return e(ND.translate(Q[0],Q[1]).scale(K.k).translate("function"==typeof z?-z.apply(this,arguments):-z,"function"==typeof D?-D.apply(this,arguments):-D),q,o)},P,O)},E.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,z){return this.mouse&&"mouse"!==I&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&"touch"!==I&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&"touch"!==I&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var z=On(this.that).datum();c.call(I,this.that,new wye(I,{sourceEvent:this.sourceEvent,target:_,type:I,transform:this.that.__zoom,dispatch:c}),z)}},_.wheelDelta=function(I){return arguments.length?(n="function"==typeof I?I:vx(+I),_):n},_.filter=function(I){return arguments.length?(i="function"==typeof I?I:vx(!!I),_):i},_.touchable=function(I){return arguments.length?(r="function"==typeof I?I:vx(!!I),_):r},_.extent=function(I){return arguments.length?(t="function"==typeof I?I:vx([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),_):t},_.scaleExtent=function(I){return arguments.length?(s[0]=+I[0],s[1]=+I[1],_):[s[0],s[1]]},_.translateExtent=function(I){return arguments.length?(o[0][0]=+I[0][0],o[1][0]=+I[1][0],o[0][1]=+I[0][1],o[1][1]=+I[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(I){return arguments.length?(e=I,_):e},_.duration=function(I){return arguments.length?(a=+I,_):a},_.interpolate=function(I){return arguments.length?(l=I,_):l},_.on=function(){var I=c.on.apply(c,arguments);return I===c?_:I},_.clickDistance=function(I){return arguments.length?(m=(I=+I)*I,_):Math.sqrt(m)},_.tapDistance=function(I){return arguments.length?(g=+I,_):g},_}().on("zoom",n=>{this.setTransform(n.transform,0)})):(this.svg.on(".zoom",null),this.setTransform())})),this.resize$.pipe(function l0e(i,t=I0,e=FG){const n=BN(i,t);return function a0e(i,t=FG){return Ti((e,n)=>{const{leading:r,trailing:s}=t;let o=!1,a=null,l=null,c=!1;const u=()=>{null==l||l.unsubscribe(),l=null,s&&(f(),c&&n.complete())},d=()=>{l=null,c&&n.complete()},h=p=>l=us(i(p)).subscribe(di(n,u,d)),f=()=>{if(o){o=!1;const p=a;a=null,n.next(p),!c&&h(p)}};e.subscribe(di(n,p=>{o=!0,a=p,(!l||l.closed)&&(r?f():h(p))},()=>{c=!0,(!(s&&o&&l)||l.closed)&&n.complete()}))})}(()=>n,e)}(10)),this.appService.scroll$.pipe(Ii(e=>{this.section=this.appService.scroll$.value.section}))).pipe(pi(e=>void 0!==this.house)).subscribe(e=>{this.updateSVG()})),this.loaded=!0}setTransform(e="translate(0,0) scale(1)",n=100){this.loaded&&this.appService.setTransformCookie(e,this.graphic),this.g.transition().duration(n).attr("transform",e).on("end",()=>this.updateSVG())}updateSVG(){this.tooltipService.updateOverlay(),this.svgUpdateMarginAndSize();const[[e,n],[r,s]]=this.drawingSize,o=-this.marginInMeters[3]+e,a=-this.marginInMeters[0]+n,l=r+this.marginInMeters[3]+this.marginInMeters[1],c=s+this.marginInMeters[0]+this.marginInMeters[2],u=Math.abs(Et(0,this.svgEl.nativeElement.clientWidth)-this.marginInPixels[1]-this.marginInPixels[3]),d=Math.abs(Et(0,this.svgEl.nativeElement.clientHeight)-this.marginInPixels[0]-this.marginInPixels[2]),h=Et(5,l/u),f=Et(5,c/d);this.meterPerPixel=Math.max(h,f)/this.getScale();const p=this.marginInPixels.map(m=>Et(4,m*this.meterPerPixel));this.isChild||(this.setLines(),this.svg.attr("viewBox",`\n        ${-p[3]+o} \n        ${-p[0]+a} \n        ${Math.abs(l+(p[3]+p[1]))} \n        ${Math.abs(c+(p[0]+p[2]))}`).on("end",()=>this.setLines())),this.house.redrawHouse(this.appService.floor$.value,this.graphic,this.meterPerPixel)}getScale(){const e=/scale\(\d+\.?\d*/g.exec(this.g.attr("transform"));return e?Number(e[0].replace("scale(","").replace(")","")):1}setLines(){this.svgEl.nativeElement.querySelectorAll(".scale-icon>svg").forEach(e=>{const n=Math.round(32*this.meterPerPixel*64);e.setAttribute("height",`${n}px`),e.setAttribute("width",`${n}px`),e.setAttribute("x",-n/2+"px"),e.setAttribute("y",-n/2+"px")}),this.svgEl.nativeElement.querySelectorAll(".scale-icon>*:not(svg)").forEach(e=>{const n=Et(3,32*this.meterPerPixel);e.setAttribute("transform",`scale(${n})`)})}}return i.\u0275fac=function(e){return new(e||i)(C(rr),C(Wi),C(ap),C(Ve),C(A_))},i.\u0275cmp=ft({type:i,selectors:[["app-svg-base"]],viewQuery:function(e,n){if(1&e&&ni(u0e,5),2&e){let r;Ct(r=St())&&(n.svgEl=r.first)}},hostBindings:function(e,n){1&e&&$e("click",function(s){return n.onClick(s)})},inputs:{isChild:"isChild"},decls:0,vars:0,template:function(e,n){},encapsulation:2}),i})();function d0e(i,t){1&i&&(qn(),ie(0,"circle",42)),2&i&&zn("id","roof-point-",t.$implicit,"")}const NG=function(i){return{opacity:i}},h0e=function(){return[0,1,2,3,4,5,6,7,8,9,10]};let f0e=(()=>{class i extends wx{constructor(e,n,r,s,o){super(e,n,r,s,o),this.houseService=e,this.appService=n,this.tooltipService=r,this.host=s,this.d3Service=o,this.marginInMeters=[3,3,3,3],this.graphic=vr.cross,this.RoofStyle=ks}ngAfterViewInit(){this.loadFigure(),this.setUp()}loadFigure(){this.figure=this.d3Service.loadSVG("assets/models/dude.svg",".g-figure",e=>{let s,o,a;const l=.3913732394366197;[Je.roofBasics].includes(this.section)?(s=this.house$.value.cross.groundFloorTop,o=3*this.house$.value.cross.floorThickness,a=!0):(s=this.house$.value.cross.topFloorTop,o=this.house$.value.cross.innerWidth/2-l/2+.5,a=!1),On(e).selectChild("svg").attr("height","1.9px").attr("y",-s-1.9+"px").attr("x",o+"px").attr("width",l+"px").selectChild("g").attr("transform",a?"translate(117,0) scale(-1 1)":"")})}svgUpdateMarginAndSize(){this.drawingSize=[[0,-this.cross.roofTop],[this.house.outerBase,this.cross.houseHeight]],this.drawBendPoint(),this.figure.update()}drawPoints(){const e=this.cross.getIntersectionWithRoof(this.cross.minimumHeight),n=this.cross.getIntersectionWithRoof(this.cross.minimumHeightRoom),r=this.cross;[...r.innerRoofContourLine,e,n].forEach((s,o)=>{On(`#roof-point-${o}`).attr("cx",s[0]+r.wallOuterThickness).attr("cy",-s[1]).attr("r",o<4?.1:.13).style("fill",o<4?"var(--color-50)":"var(--color-80)").attr("stroke-width",0*this.meterPerPixel)})}drawBendPoint(){On("#bend-point__h-line").attr("points",[[0,-this.cross.roof70Walls],[this.cross.bendPoint[0],-this.cross.roof70Walls],[this.cross.bendPoint[0],this.cross.bendPoint[1]+.1]].join(" ")).attr("stroke-width",2*this.meterPerPixel),On("#bend-point__h-point").attr("cx",this.cross.bendPoint[0]).attr("cy",this.cross.bendPoint[1]).attr("r",.1).attr("stroke-width",2*this.meterPerPixel)}roofCheck(e){return this.section===Je.roof70?e===ks.roof70?1:0:this.section===Je.roofCircle?e===ks.roofCircle?1:0:[ks.roofCircleAnd70,e].includes(this.house$.value.cross.roofStyle)?1:0}}return i.\u0275fac=function(e){return new(e||i)(C(rr),C(Wi),C(ap),C(Ve),C(A_))},i.\u0275cmp=ft({type:i,selectors:[["app-svg-cross"]],features:[he],decls:43,vars:8,consts:[["preserveAspectRatio","xMidYMid meet",1,"cross"],["svg",""],["id","clip-roof","d","M130.532,285.709c0,0-17.042,21.134-29.287,14.291c-20.5-11.457-98.902,19.709-98.902,19.709\n    l-5.333,253.333h152.667L130.532,285.709z"],["id","diagonalHatch","patternUnits","userSpaceOnUse","width","4","height","4","patternTransform","scale(0.1)"],["d","M-1,1 l2,-2\n               M0,4 l4,-4\n               M3,5 l2,-2",2,"stroke","black","stroke-width","0.1"],["id","clip-roof2"],[0,"xlink","href","#clip-roof","overflow","visible"],["transform","rotate(0)",1,"all"],[1,"g-figure"],[1,"g-building"],["id","building-walls"],["id","building-room"],["id","building-crawler"],["id","building-ground-line"],["id","building-fill"],["id","building-ground-fill"],["id","building-ground","fill","url(#diagonalHatch)"],[1,"g-roof-circle",3,"ngStyle"],["id","building-roof-circle-wall1"],["id","building-roof-circle-wall2"],["id","roof-circle","clip-path","url(#clip-roof2)"],["id","roof-circle-shadow"],["id","roof-circle-fill"],[1,"g-roof-70",3,"ngStyle"],["id","building-roof-70-wall1"],["id","building-roof-70-wall2"],["id","roof-70","clip-path","url(#clip-roof2)"],["id","roof-70-fill"],["id","roof-70-shadow"],[1,"g-helper"],[3,"id",4,"ngFor","ngForOf"],[1,"g-h-circle-roof"],["id","roof-circle__h-line"],["id","roof-circle__h-circle"],[1,"g-h-bend-point"],["id","bend-point__h-line"],["id","bend-point__h-point"],[1,"cross-measure"],["id","minimum"],["id","minimum-h"],["id","minimum-room"],["id","minimum-room-h"],[3,"id"]],template:function(e,n){1&e&&(qn(),M(0,"svg",0,1)(2,"defs"),ie(3,"polygon",2),M(4,"pattern",3),ie(5,"path",4),T()(),M(6,"clipPath",5),ie(7,"use",6),T(),M(8,"g",7),ie(9,"g",8),M(10,"g",9),ie(11,"polygon",10)(12,"polygon",11)(13,"polygon",12)(14,"polyline",13)(15,"polygon",14)(16,"polygon",15)(17,"polygon",16),T(),M(18,"g",17),ie(19,"polygon",18)(20,"polygon",19)(21,"polygon",20)(22,"polygon",21)(23,"polygon",22),T(),M(24,"g",23),ie(25,"polygon",24)(26,"polygon",25)(27,"polygon",26)(28,"polygon",27)(29,"polygon",28),T(),M(30,"g",29),Ge(31,d0e,1,1,"circle",30),M(32,"g",31),ie(33,"polyline",32)(34,"path",33),T(),M(35,"g",34),ie(36,"polyline",35)(37,"circle",36),T()(),M(38,"g",37),ie(39,"g",38)(40,"g",39)(41,"g",40)(42,"g",41),T()()()),2&e&&($(18),Z("ngStyle",Tl(3,NG,n.roofCheck(n.RoofStyle.roofCircle))),$(6),Z("ngStyle",Tl(5,NG,n.roofCheck(n.RoofStyle.roof70))),$(7),Z("ngForOf",td(7,h0e)))},directives:[ad,Hb,od],styles:["svg.cross{width:100%;height:100%;position:relative}  svg.cross *[id*=-fill]{stroke:none;opacity:0}  svg.cross *[id*=-fill]#building-ground-fill{opacity:1;fill:var(--color-0)}  svg.cross *{transition:fill .4s}  svg.cross .g-roof-circle,   svg.cross .g-roof-70,   svg.cross .g-building{stroke:var(--color-70);fill:var(--color-30)}  svg.cross .g-roof-circle #building-crawler,   svg.cross .g-roof-circle #building-room,   svg.cross .g-roof-70 #building-crawler,   svg.cross .g-roof-70 #building-room,   svg.cross .g-building #building-crawler,   svg.cross .g-building #building-room{fill:var(--color-0)}  svg.cross .g-helper>*{stroke:var(--primary-color)!important;opacity:0;fill:none}  svg.cross .g-helper>*[id^=roof-point-]{opacity:1!important}  .section-roof-basics #building-ground-fill{fill:transparent!important}  .tag-roof-both #roof-70-shadow,   .section-roof-choice #roof-70-shadow{opacity:.6;fill:var(--primary-color)!important}  .tag-roof-both #roof-circle-shadow,   .section-roof-choice #roof-circle-shadow{opacity:1;fill:var(--accent-color)!important}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}  .state-grey #building-roof-circle-wall1,   .state-grey #building-roof-circle-wall2,   .state-grey #building-roof-70-wall1,   .state-grey #building-roof-70-wall2,   .state-grey *[id*=-fill]:not(#building-ground-fill){fill:var(--color-90)!important;opacity:1!important}  .state-grey *[id*=-shadow]{fill:var(--color-90)!important}"]}),i})();function p0e(i,t){1&i&&(qn(),ie(0,"circle",17)),2&i&&zn("id","walk-line-dot walk-line-",t.index,"")}function m0e(i,t){1&i&&(qn(),M(0,"g",17),ie(1,"polygon",18)(2,"polyline",19)(3,"text",20),T()),2&i&&zn("id","step-plan-",t.index,"")}function g0e(i,t){1&i&&(qn(),M(0,"g",21),ie(1,"g",22)(2,"g",23)(3,"g",24)(4,"g",25)(5,"g",26),T())}const BG=function(){return[]};function _0e(i,t){if(1&i&&(qn(),M(0,"g",9)(1,"g",10),ie(2,"path",11),Ge(3,p0e,1,1,"circle",12),T(),ie(4,"polygon",13),M(5,"g",14)(6,"g",15),Ge(7,m0e,4,1,"g",12),T()(),Ge(8,g0e,6,0,"g",16),T()),2&i){const e=Qe();$(3),Z("ngForOf",td(3,BG).constructor(25)),$(4),Z("ngForOf",td(4,BG).constructor(25)),$(1),Z("ngIf",!e.isChild)}}let v0e=(()=>{class i extends wx{constructor(e,n,r,s,o){super(e,n,r,s,o),this.houseService=e,this.appService=n,this.tooltipService=r,this.host=s,this.d3Service=o,this.graphic=vr.stair,this.floor=ee.all,this.marginInMeters=[0,0,0,0],this.marginInPixels=[64,64,0,0],this.steps=new In(25)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){this.drawingSize=[this.stair.stairOrigin,[this.stair.totalWidth,this.stair.totalHeight]],this.marginInMeters=[2*this.stair.run,2*this.stair.run,2*this.stair.run,2*this.stair.run],[Je.stairStart,Je.stairBasic,Je.stairCheck].includes(this.section)?this.svg.style("opacity",0):this.svg.style("opacity",1)}}return i.\u0275fac=function(e){return new(e||i)(C(rr),C(Wi),C(ap),C(Ve),C(A_))},i.\u0275cmp=ft({type:i,selectors:[["app-svg-stair-plan"]],features:[he],decls:11,vars:3,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-plan"],["svg",""],["id","clip-roof-ref"],["id","clip-ground-floor-ref"],["id","clip-roof"],[0,"xlink","href","#clip-roof-ref","overflow","visible"],["id","clip-ground-floor"],[0,"xlink","href","#clip-ground-floor-ref","overflow","visible"],["class","floor-clip","clip-path","url(#clip-ground-floor)",4,"ngIf"],["clip-path","url(#clip-ground-floor)",1,"floor-clip"],[1,"g-walk-line"],[1,"walk-line"],[3,"id",4,"ngFor","ngForOf"],["id","outline",1,"outline"],[1,"g-step-plan"],["clip-path","url(#clip-roof)"],["class","measure-stair",4,"ngIf"],[3,"id"],[1,"step-plan-lines"],[1,"step-plan-rise"],[1,"step-plan-text"],[1,"measure-stair"],["id","plateau-width"],["id","mid-width"],["id","total-width"],["id","total-height"],["id","lesser-height"]],template:function(e,n){1&e&&(qn(),M(0,"svg",0,1)(2,"defs"),ie(3,"polygon",2)(4,"polygon",3),T(),M(5,"clipPath",4),ie(6,"use",5),T(),M(7,"clipPath",6),ie(8,"use",7),T(),Ge(9,_0e,9,5,"g",8),Br(10,"async"),T()),2&e&&($(9),Z("ngIf",Vr(10,1,n.house$)))},directives:[Ks,od],pipes:[If],styles:["svg.stairs-plan{width:100%;height:100%;position:relative;transition:.4s}  svg.stairs-plan .left-corner-line,   svg.stairs-plan .right-corner-line,   svg.stairs-plan .middleLine{stroke:#00f}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .outline,   svg.stairs-plan .step-plan-lines{fill:none;stroke:var(--color-50)}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .step-stinger,   svg.stairs-plan .walk-line-dot,   svg.stairs-plan .walk-line,   svg.stairs-plan .step-plan-text{display:none}  .section-stair-plan .step-plan-rise,   .section-stair-plan .step-stinger,   .section-stair-plan .walk-line-dot,   .section-stair-plan .walk-line,   .section-stair-plan .step-plan-text{display:initial!important}  .section-stair-plan .walk-line-dot{fill:red}  .section-stair-plan .walk-line{fill:none;transition:0s;stroke:red}  .section-stair-plan .step-stinger{fill:green}  .section-stair-plan .step-plan-text{display:initial}  .section-stair-plan .step-plan-rise{stroke-dasharray:1%}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}"]}),i})();const y0e=["render"];function b0e(i,t){1&i&&(qn(),ie(0,"polyline",70)),2&i&&zn("id","grid-index-",t.index,"")}function x0e(i,t){1&i&&(qn(),ie(0,"polyline",71)),2&i&&zn("id","grid-index-",t.index,"")}function w0e(i,t){1&i&&(qn(),ie(0,"polygon",72)),2&i&&Z("id",t.$implicit)}function M0e(i,t){1&i&&(qn(),M(0,"g",72),ie(1,"polyline",73)(2,"polyline",74)(3,"polygon",75)(4,"circle",76),T()),2&i&&Z("id",t.$implicit)}function C0e(i,t){1&i&&(qn(),M(0,"g",72),ie(1,"polygon",77)(2,"path",78),T()),2&i&&Z("id",t.$implicit)}function S0e(i,t){1&i&&(qn(),M(0,"g",72),ie(1,"polygon",79)(2,"path",80),T()),2&i&&Z("id",t.$implicit)}function E0e(i,t){if(1&i&&(qn(),ie(0,"polyline",72)),2&i){const e=Qe().$implicit;_i("sensor-cable ",e,""),qy("id",e)}}function T0e(i,t){if(1&i&&(qn(),Er(0),Ge(1,E0e,1,4,"polyline",82),Tr()),2&i){const e=t.$implicit,n=Qe().$implicit;$(1),Z("ngIf",e.includes(n))}}function D0e(i,t){if(1&i&&(qn(),M(0,"g"),Ge(1,T0e,2,1,"ng-container",81),T()),2&i){const e=t.$implicit,n=Qe();_i("g-sensor-",e,""),$(1),Z("ngForOf",n.sensorKeys)}}function A0e(i,t){if(1&i&&(qn(),ie(0,"g",72)),2&i){const e=Qe().$implicit;_i("sensor-icon scale-icon ",e,""),qy("id",e)}}function R0e(i,t){if(1&i&&(qn(),Er(0),Ge(1,A0e,1,4,"g",82),Tr()),2&i){const e=t.$implicit,n=Qe().$implicit;$(1),Z("ngIf",e.includes(n))}}function I0e(i,t){if(1&i&&(qn(),M(0,"g"),Ge(1,R0e,2,1,"ng-container",81),T()),2&i){const e=t.$implicit,n=Qe();_i("g-sensor-",e,""),$(1),Z("ngForOf",n.sensorKeys)}}const VG=function(){return[]};let k0e=(()=>{class i extends wx{constructor(e,n,r,s,o,a){super(e,n,r,s,a),this.houseService=e,this.appService=n,this.tooltipService=r,this.host=s,this.httpClient=o,this.d3Service=a,this.marginInMeters=[0,0,0,0],this.marginInPixels=[72,64,64,8],this.gridSizeX$=new In(100),this.gridSizeY$=new In(100),this.roomKeys=this.houseService.roomKeys,this.doorKeys=this.houseService.doorKeys,this.wallKeys=this.houseService.wallKeys,this.windowKeys=this.houseService.windowKeys,this.sensorKeys=this.houseService.sensorKeys,this.SensorTypes=Object.values(Te),this.graphic=vr.plan,this.transformOrigin=[0,0]}ngAfterViewInit(){this.sun=this.d3Service.loadSVG("assets/models/sun.svg",".g-sun",e=>{const n=this.house$.value,r=40*this.meterPerPixel;On(e).selectChild("svg").attr("height",r+"px").attr("width",r+"px").attr("x",n.houseWidth/2+"px").attr("y",n.houseLength+1*n.studDistance+"px")}),this.setUp(),this.setStairs(),this.renderImg=this.svg.select(".render-img").attr("xlink:href","/assets/img/top_render.jpg").attr("x",-636).attr("y",-354).attr("width",2).attr("height",2),On("svg")}svgUpdateMarginAndSize(){this.sun.update(),this.gridSizeX$.next(this.house.gridSizeX),this.gridSizeY$.next(this.house.gridSizeY);const e=3*this.house.studDistance;this.marginInMeters=[e,e,e,e],this.drawingSize=[[0,-this.house.extensionToSouth],[this.house.houseWidth,this.house.houseLength]],this.scaleRenderImage(),this.scaleStairs()}setStairs(){const e=document.querySelector(".svg-plan-stair-plan").firstChild,n=this.svg.select(".plan-stair-plan");this.svg.on("mousedown.drag",null),n.select(".plan-stair-plan").node().replaceWith(e),e.classList.add("plan-stair-plan"),setTimeout(()=>{this.updateSVG()},0)}scaleStairs(){this.svg.select(".plan-stair-plan").attr("transform-origin",`${this.stair.stairOrigin[0]+this.stair.totalWidth/2} ${this.house.stair.stairOrigin[1]+this.stair.totalHeight/2}`)}scaleRenderImage(){const e=[636,394],s=Et(1,this.house.houseWidth/this.meterPerPixel),o=Et(1,this.house.houseLength/this.meterPerPixel),a=Et(5,535/s),l=Et(5,495/o),c=Math.max(l,a);!this.renderImg||this.renderImg.attr("x",-e[0]*this.meterPerPixel/c).attr("y",-e[1]*this.meterPerPixel/c).attr("width",1920*this.meterPerPixel/c).attr("height",1080*this.meterPerPixel/c)}}return i.\u0275fac=function(e){return new(e||i)(C(rr),C(Wi),C(ap),C(Ve),C(xd),C(A_))},i.\u0275cmp=ft({type:i,selectors:[["app-svg-plan"]],viewQuery:function(e,n){if(1&e&&ni(y0e,5),2&e){let r;Ct(r=St())&&(n.renderEl=r.first)}},features:[he],decls:76,vars:10,consts:[["preserveAspectRatio","xMidYMid meet",1,"plan"],["svg",""],["type","text/css"],["id","MyGradient","gradientTransform","rotate(90)"],["offset","-10%",1,"alt-stop"],["offset","30%",1,"alt-stop"],["offset","100%",1,"main-stop"],["id","inset-shadow"],["stdDeviation","0.5","result","offset-blur"],["operator","out","in","SourceGraphic","in2","offset-blur","result","inverse"],["flood-color","black","flood-opacity","1","result","color"],["operator","in","in","color","in2","inverse","result","shadow"],["in","shadow","result","shadow"],["type","linear","slope",".175"],["transform","rotate(0)",1,"all"],[1,"house-stramien"],["clas","house-stramien",1,"house-stramien-in"],["clas","house-stramien","id","house-stramien-in-we-a"],["clas","house-stramien","id","house-stramien-in-we-b"],["clas","house-stramien","id","house-stramien-in-we-c"],["clas","house-stramien","id","house-stramien-in-we-d"],["clas","house-stramien","id","house-stramien-in-ns-a"],["clas","house-stramien","id","house-stramien-in-ns-b"],["clas","house-stramien","id","house-stramien-in-ns-c"],["clas","house-stramien","id","house-stramien-in-ns-d"],["clas","house-stramien",1,"house-stramien-out"],["clas","house-stramien","id","house-stramien-out-we-a"],["clas","house-stramien","id","house-stramien-out-we-b"],["clas","house-stramien","id","house-stramien-out-we-c"],["clas","house-stramien","id","house-stramien-out-we-d"],["clas","house-stramien","id","house-stramien-out-ns-a"],["clas","house-stramien","id","house-stramien-out-ns-b"],["clas","house-stramien","id","house-stramien-out-ns-c"],["clas","house-stramien","id","house-stramien-out-ns-d"],[1,"g-grid"],["class","grid-vertical",3,"id",4,"ngFor","ngForOf"],["class","grid-horizontal",3,"id",4,"ngFor","ngForOf"],[1,"house-wind-rose"],[1,"house-wind-rose-1"],[1,"house-wind-rose-2"],[1,"house-wind-rose-text"],[1,"g-room"],[3,"id",4,"ngFor","ngForOf"],[1,"plan-stair-plan","included-stairs-plan"],[1,"plan-stair-plan"],[1,"g-wall"],[1,"g-door"],[1,"g-window"],[1,"extra"],["id","view-lines"],["id","central-void","filter","url(#inset-shadow)"],["id","tower-walls"],["id","roof-line-1"],["id","roof-line-2"],["id","roof-line-3"],["id","roof-line-4"],["id","roof-line-5"],[1,"house-measure"],["id","house-total-height"],["id","house-total-width"],["id","house-width-1"],["id","house-width-2"],["id","house-width-3"],["id","house-height-1"],["id","house-height-2"],["id","house-height-inner"],["id","house-height-3"],[1,"g-sensor"],[3,"class",4,"ngFor","ngForOf"],[1,"g-sun"],[1,"grid-vertical",3,"id"],[1,"grid-horizontal",3,"id"],[3,"id"],[1,"wall-left"],[1,"wall-right"],[1,"wall-fill"],[1,"wall-origin"],[1,"door-wall-opening"],[1,"door-swing"],[1,"window-wall-opening"],[1,"window-pane"],[4,"ngFor","ngForOf"],[3,"id","class",4,"ngIf"]],template:function(e,n){1&e&&(qn(),M(0,"svg",0,1)(2,"style",2),k(3," .g-room { fill: url(#MyGradient) } "),T(),M(4,"defs")(5,"linearGradient",3),ie(6,"stop",4)(7,"stop",5)(8,"stop",6),T(),M(9,"filter",7),ie(10,"feGaussianBlur",8)(11,"feComposite",9)(12,"feFlood",10)(13,"feComposite",11),M(14,"feComponentTransfer",12),ie(15,"feFuncA",13),T()()(),M(16,"g",14)(17,"g",15)(18,"g",16),ie(19,"polyline",17)(20,"polyline",18)(21,"polyline",19)(22,"polyline",20)(23,"polyline",21)(24,"polyline",22)(25,"polyline",23)(26,"polyline",24),T(),M(27,"g",25),ie(28,"polyline",26)(29,"polyline",27)(30,"polyline",28)(31,"polyline",29)(32,"polyline",30)(33,"polyline",31)(34,"polyline",32)(35,"polyline",33),T()(),M(36,"g",34),Ge(37,b0e,1,1,"polyline",35),Ge(38,x0e,1,1,"polyline",36),T(),M(39,"g",37),ie(40,"polygon",38)(41,"polygon",39)(42,"text",40),T(),M(43,"g",41),Ge(44,w0e,1,1,"polygon",42),T(),M(45,"g",43),ie(46,"svg",44),T(),M(47,"g",45),Ge(48,M0e,5,1,"g",42),T(),M(49,"g",46),Ge(50,C0e,3,1,"g",42),T(),M(51,"g",47),Ge(52,S0e,3,1,"g",42),T(),M(53,"g",48),ie(54,"polyline",49)(55,"polygon",50)(56,"polygon",51)(57,"polyline",52)(58,"polyline",53)(59,"polyline",54)(60,"polyline",55)(61,"polyline",56),T(),M(62,"g",57),ie(63,"g",58)(64,"g",59)(65,"g",60)(66,"g",61)(67,"g",62)(68,"g",63)(69,"g",64)(70,"g",65)(71,"g",66),T(),M(72,"g",67),Ge(73,D0e,2,4,"g",68),Ge(74,I0e,2,4,"g",68),T(),ie(75,"g",69),T()()),2&e&&($(37),Z("ngForOf",td(8,VG).constructor(55)),$(1),Z("ngForOf",td(9,VG).constructor(55)),$(6),Z("ngForOf",n.roomKeys),$(4),Z("ngForOf",n.wallKeys),$(2),Z("ngForOf",n.doorKeys),$(2),Z("ngForOf",n.windowKeys),$(21),Z("ngForOf",n.SensorTypes),$(1),Z("ngForOf",n.SensorTypes))},directives:[od,Ks],styles:[".floor-top .included-stairs-plan .floor-clip{clip-path:inherit}  .included-stairs-plan{pointer-events:none}  .sensor-pir,   .sensor-vent-out,   .sensor-ethernet,   .sensor-perilex,   .sensor-light-switch{fill:var(--primary-color)}  .sensor-pir.sensor-cable,   .sensor-vent-out.sensor-cable,   .sensor-ethernet.sensor-cable,   .sensor-perilex.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--primary-color)!important}  .sensor-vent-in,   .sensor-camera,   .sensor-poe,   .sensor-socket,   .sensor-light{fill:var(--accent-color)}  .sensor-vent-in.sensor-cable,   .sensor-camera.sensor-cable,   .sensor-poe.sensor-cable,   .sensor-socket.sensor-cable,   .sensor-light.sensor-cable{stroke:var(--accent-color)!important}  .sensor-temperature,   .sensor-alarm,   .sensor-dlc,   .sensor-light-switch{fill:var(--first-color)}  .sensor-temperature.sensor-cable,   .sensor-alarm.sensor-cable,   .sensor-dlc.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--first-color)!important}  .sensor-wifi,   .sensor-blinds,   .sensor-dimmer{fill:var(--second-color)}  .sensor-wifi.sensor-cable,   .sensor-blinds.sensor-cable,   .sensor-dimmer.sensor-cable{stroke:var(--second-color)!important}  .sensor-smoke{fill:#a80000}  .sensor-smoke.sensor-cable{stroke:#a80000!important}  .selection-active .g-sensor>g>*:not(.selected){opacity:0!important}  svg.plan{height:100%;width:100%;position:relative}  svg.plan g.all{transition:1s ease-in-out}  svg.plan polyline[id^=roof-line-]{fill:none;stroke:var(--primary-color)}  svg.plan .g-sun{transition:.4s;opacity:0}  svg.plan .g-sun g{transform-origin:center;fill:#fdc865}  svg.plan #view-lines{fill:none;stroke:var(--primary-color);opacity:0}  svg.plan .render-img{pointer-events:none;transition:.4s;opacity:0;clip-path:polygon(0% 0%,100% 0%,100% 130%,51.7% 78.7%,51.7% 52.9%,42.4% 36.5%,33.1% 36.5%)}  svg.plan .house-wind-rose{fill:none;transition:.4s,stroke-width 1ms;stroke:#000;stroke-linecap:square}  svg.plan #tower-walls{fill:var(--accent-color);stroke:none;pointer-events:none;opacity:.6}  svg.plan .house-stramien{transition:.4s,stroke-width 1ms;stroke:var(--first-color);stroke-linecap:square}  svg.plan .house-stramien .house-stramien-out{stroke:var(--second-color)}  svg.plan .house-wind-rose{opacity:0}  svg.plan .house-wind-rose .house-wind-rose-text{stroke:none;fill:currentColor}  svg.plan .house-wind-rose .house-wind-rose-1{fill:currentColor}  svg.plan .g-grid .grid-main{stroke:var(--color-50)}  svg.plan .g-grid .grid-sub{stroke:var(--color-10)}  svg.plan .g-grid .grid-subsub{stroke:var(--color-30)}  svg.plan .g-sensor>*{opacity:0;pointer-events:none;overflow:visible}  svg.plan .g-sensor *{transition:.2s}  svg.plan .g-sensor polyline{transition:.5s;fill:none;stroke:#00f}  svg.plan .g-sensor polyline.cable-connection{stroke:#079372}  svg.plan .g-sensor>g{transition:.5s;fill:var(--primary-color);stroke:none}  svg.plan .g-room polygon{stroke:none!important;transition:.4s;fill:var(--color-0)}  svg.plan .g-room polygon:hover{fill:var(--primary-lighter-color)}  svg.plan .g-room polygon.room-hole{box-shadow:inset 3px 5px 2px #0006}  svg.plan .g-room polygon.selected{fill:var(--primary-color)}  svg.plan .g-wall{transition:.4s;opacity:1}  svg.plan .g-wall .selected polygon{fill:var(--primary-color)}  svg.plan .g-wall .selected circle{opacity:1}  svg.plan .g-wall polygon{transition:.5s;fill-rule:nonzero}  svg.plan .g-wall polygon:hover{fill:var(--primary-lighter-color)}  svg.plan .g-wall circle{stroke:none;fill:var(--color-50);opacity:0}  svg.plan .g-wall .type-outer{fill:var(--color-30);stroke:var(--color-60)}  svg.plan .g-wall .type-outer .side-out{stroke:var(--color-60)}  svg.plan .g-wall .side-out{transition:.6s}  svg.plan .g-wall .type-inner{fill:var(--color-20);stroke:#565656}  svg.plan .g-wall .type-theoretic{opacity:1;stroke:#0091b6;stroke-width:3px}  svg.plan .g-wall .wall-fill{stroke:none}  svg.plan .g-door g{transition:opacity .4s}  svg.plan .g-door polygon{transition:.5s;fill:var(--color-0);stroke:none}  svg.plan .g-door path{fill:none;stroke:var(--color-70);stroke-linecap:square}  svg.plan .g-window polygon{transition:.5s;fill:var(--color-20);stroke:var(--color-60)}  svg.plan .g-window path{fill:none;stroke:var(--color-60);stroke-linecap:square}  svg.plan .plan-stair-plan .measure-stair{display:none}  .section-welcome:not(.fullscreen) .all{transform:scale(.6) translate(25%)}  .section-welcome:not(.fullscreen) .render-img{opacity:1!important}  .section-welcome:not(.fullscreen) .g-window g{opacity:0!important}  .section-basics .house-wind-rose,   .section-basics .g-grid{transition:2s;opacity:.7!important}  .section-tower .room-f{transition:2s;fill:var(--primary-color)!important}  .section-wired-light .g-sensor *[class*=sensor-light-switch],   .section-wired-light .g-sensor *[class*=sensor-dimmer],   .section-wired-light .g-sensor *[class*=sensor-light]{opacity:1;pointer-events:all}  .section-wired-power .g-sensor *[class*=sensor-perilex],   .section-wired-power .g-sensor *[class*=sensor-socket]{opacity:1;pointer-events:all}  .section-wired-ethernet .g-sensor *[class*=sensor-poe],   .section-wired-ethernet .g-sensor *[class*=sensor-wifi],   .section-wired-ethernet .g-sensor *[class*=sensor-ethernet]{opacity:1;pointer-events:all}  .section-wired-safety .g-sensor *[class*=sensor-pir],   .section-wired-safety .g-sensor *[class*=sensor-camera],   .section-wired-safety .g-sensor *[class*=sensor-smoke],   .section-wired-safety .g-sensor *[class*=sensor-alarm]{opacity:1;pointer-events:all}  .section-wired-extra .g-sensor *[class*=sensor-pir],   .section-wired-extra .g-sensor *[class*=sensor-blinds],   .section-wired-extra .g-sensor *[class*=sensor-temperature]{opacity:1;pointer-events:all}  .tag-base-dimension #L0-West-WestWall .side-out,   .tag-base-dimension #L0-North-NorthWall .side-out,   .tag-base-dimension #L0-Central-SouthWall .side-out,   .tag-base-dimension #L0-East-EastWall .side-out{transition:.4s;stroke-width:1!important;stroke:var(--primary-color)!important;stroke-linecap:round}  .tag-orientation .main-stop{stop-color:#fdc865}  .tag-orientation .alt-stop{stop-color:var(--color-0)}  .tag-orientation .house-wind-rose{opacity:.7!important}  .tag-orientation #L0-Central{fill:#fdc865!important}  .tag-orientation #L0-West,   .tag-orientation #L0-Central,   .tag-orientation #L0-East{shape-rendering:crispEdges;fill:url(#MyGradient)!important}  .tag-orientation .g-sun{opacity:.7!important}  .tag-orientation .g-sun g{animation:spin-animation 12s infinite}  .tag-insulated .g-wall *:not(.type-inner) polygon{fill:var(--primary-color);stroke:none!important}  .tag-viewlines #view-lines{opacity:.7!important}@keyframes spin-animation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}"]}),i})();function Xl(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function HG(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}var HD,Lo,sr,Mi,No,jD,$D,qG,KG,fp,B_,l,c,u,d,h,f,i,t,e,n,r,s,o,a,p,no={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},lp={duration:.5,overwrite:!1,delay:0},Fo=1e8,Kn=1e-8,UD=2*Math.PI,O0e=UD/4,P0e=0,UG=Math.sqrt,L0e=Math.cos,F0e=Math.sin,Ir=function(t){return"string"==typeof t},Pi=function(t){return"function"==typeof t},Kl=function(t){return"number"==typeof t},zD=function(t){return void 0===t},tl=function(t){return"object"==typeof t},Os=function(t){return!1!==t},zG=function(){return"undefined"!=typeof window},Mx=function(t){return Pi(t)||Ir(t)},GG="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},es=Array.isArray,GD=/(?:-?\.?\d|\.)+/gi,WG=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,cp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,WD=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,jG=/[+-]=-?[.\d]+/,$G=/[^,'"\[\]\s]+/gi,N0e=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,io={},Cx={},YG=function(t){return(Cx=Fd(t,io))&&oo},qD=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Sx=function(t,e){return!e&&console.warn(t)},XG=function(t,e){return t&&(io[t]=e)&&Cx&&(Cx[t]=e)||io},R_=function(){return 0},B0e={suppressEvents:!0,isStart:!0},I_={suppressEvents:!0},YD={},Qc=[],XD={},ro={},KD={},ZG=30,Ex=[],ZD="",QD=function(t){var n,r,e=t[0];if(tl(e)||Pi(e)||(t=[t]),!(n=(e._gsap||{}).harness)){for(r=Ex.length;r--&&!Ex[r].targetTest(e););n=Ex[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new S5(t[r],n)))||t.splice(r,1);return t},Ld=function(t){return t._gsap||QD(Ho(t))[0]._gsap},QG=function(t,e,n){return(n=t[e])&&Pi(n)?t[e]():zD(n)&&t.getAttribute&&t.getAttribute(e)||n},Ps=function(t,e){return(t=t.split(",")).forEach(e)||t},$i=function(t){return Math.round(1e5*t)/1e5||0},Gr=function(t){return Math.round(1e7*t)/1e7||0},up=function(t,e){var n=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),"+"===n?t+r:"-"===n?t-r:"*"===n?t*r:t/r},V0e=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},Tx=function(){var n,r,t=Qc.length,e=Qc.slice(0);for(XD={},Qc.length=0,n=0;n<t;n++)(r=e[n])&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},JG=function(t,e,n,r){Qc.length&&Tx(),t.render(e,n,r||Lo),Qc.length&&Tx()},e5=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match($G).length<2?e:Ir(t)?t.trim():t},t5=function(t){return t},Bo=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Fd=function(t,e){for(var n in e)t[n]=e[n];return t},n5=function i(t,e){for(var n in e)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(t[n]=tl(e[n])?i(t[n]||(t[n]={}),e[n]):e[n]);return t},Dx=function(t,e){var r,n={};for(r in t)r in e||(n[r]=t[r]);return n},k_=function(t){var e=t.parent||Mi,n=t.keyframes?function(t){return function(e,n){for(var r in n)r in e||"duration"===r&&t||"ease"===r||(e[r]=n[r])}}(es(t.keyframes)):Bo;if(Os(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},r5=function(t,e,n,r,s){void 0===n&&(n="_first"),void 0===r&&(r="_last");var a,o=t[r];if(s)for(a=e[s];o&&o[s]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=o,e.parent=e._dp=t,e},Ax=function(t,e,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var s=e._prev,o=e._next;s?s._next=o:t[n]===e&&(t[n]=o),o?o._prev=s:t[r]===e&&(t[r]=s),e._next=e._prev=e.parent=null},Zl=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Nd=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},z0e=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},JD=function(t,e,n,r){return t._startAt&&(Lo?t._startAt.revert(I_):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},G0e=function i(t){return!t||t._ts&&i(t.parent)},s5=function(t){return t._repeat?dp(t._tTime,t=t.duration()+t._rDelay)*t:0},dp=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},Rx=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ix=function(t){return t._end=Gr(t._start+(t._tDur/Math.abs(t._ts||t._rts||Kn)||0))},kx=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=Gr(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ix(t),n._dirty||Nd(n,t)),t},o5=function(t,e){var n;if((e._time||e._initted&&!e._dur)&&(n=Rx(t.rawTime(),e),(!e._dur||P_(0,e.totalDuration(),n)-e._tTime>Kn)&&e.render(n,!0)),Nd(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-Kn}},nl=function(t,e,n,r){return e.parent&&Zl(e),e._start=Gr((Kl(n)?n:n||t!==Mi?Vo(t,n,e):t._time)+e._delay),e._end=Gr(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),r5(t,e,"_first","_last",t._sort?"_start":0),eA(e)||(t._recent=e),r||o5(t,e),t._ts<0&&kx(t,t._tTime),t},a5=function(t,e){return(io.ScrollTrigger||qD("scrollTrigger",e))&&io.ScrollTrigger.create(e,t)},l5=function(t,e,n,r){return cA(t,e),t._initted?!n&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&KG!==so.frame?(Qc.push(t),t._lazy=[e,r],1):void 0:1},W0e=function i(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||i(e))},eA=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},hp=function(t,e,n,r){var s=t._repeat,o=Gr(e)||0,a=t._tTime/t._tDur;return a&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=s?s<0?1e10:Gr(o*(s+1)+t._rDelay*s):o,a>0&&!r?kx(t,t._tTime=t._tDur*a):t.parent&&Ix(t),n||Nd(t.parent,t),t},c5=function(t){return t instanceof Ls?Nd(t):hp(t,t._dur)},q0e={_start:0,endTime:R_,totalDuration:R_},Vo=function i(t,e,n){var a,l,c,r=t.labels,s=t._recent||q0e,o=t.duration()>=Fo?s.endTime(!1):t._dur;return Ir(e)&&(isNaN(e)||e in r)?(l=e.charAt(0),c="%"===e.substr(-1),a=e.indexOf("="),"<"===l||">"===l?(a>=0&&(e=e.replace(/=/,"")),("<"===l?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(c?(a<0?s:n).totalDuration()/100:1)):a<0?(e in r||(r[e]=o),r[e]):(l=parseFloat(e.charAt(a-1)+e.substr(a+1)),c&&n&&(l=l/100*(es(n)?n[0]:n).totalDuration()),a>1?i(t,e.substr(0,a-1),n)+l:o+l)):null==e?o:+e},O_=function(t,e,n){var a,l,r=Kl(e[1]),s=(r?2:1)+(t<2?0:1),o=e[s];if(r&&(o.duration=e[1]),o.parent=n,t){for(a=o,l=n;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Os(l.vars.inherit)&&l.parent;o.immediateRender=Os(a.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new br(e[0],o,e[s+1])},Jc=function(t,e){return t||0===t?e(t):e},P_=function(t,e,n){return n<t?t:n>e?e:n},ts=function(t,e){return Ir(t)&&(e=N0e.exec(t))?e[1]:""},tA=[].slice,u5=function(t,e){return t&&tl(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&tl(t[0]))&&!t.nodeType&&t!==No},Ho=function(t,e,n){return sr&&!e&&sr.selector?sr.selector(t):!Ir(t)||n||!jD&&pp()?es(t)?function(t,e,n){return void 0===n&&(n=[]),t.forEach(function(r){var s;return Ir(r)&&!e||u5(r,1)?(s=n).push.apply(s,Ho(r)):n.push(r)})||n}(t,n):u5(t)?tA.call(t,0):t?[t]:[]:tA.call((e||$D).querySelectorAll(t),0)},nA=function(t){return t=Ho(t)[0]||Sx("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return Ho(e,n.querySelectorAll?n:n===t?Sx("Invalid scope")||$D.createElement("div"):t)}},d5=function(t){return t.sort(function(){return.5-Math.random()})},h5=function(t){if(Pi(t))return t;var e=tl(t)?t:{each:t},n=Bd(e.ease),r=e.from||0,s=parseFloat(e.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=e.axis,u=r,d=r;return Ir(r)?u=d={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(u=r[0],d=r[1]),function(h,f,p){var _,v,y,b,x,w,E,R,F,m=(p||e).length,g=o[m];if(!g){if(!(F="auto"===e.grid?0:(e.grid||[1,Fo])[1])){for(E=-Fo;E<(E=p[F++].getBoundingClientRect().left)&&F<m;);F--}for(g=o[m]=[],_=l?Math.min(F,m)*u-.5:r%F,v=F===Fo?0:l?m*d/F-.5:r/F|0,E=0,R=Fo,w=0;w<m;w++)y=w%F-_,b=v-(w/F|0),g[w]=x=c?Math.abs("y"===c?b:y):UG(y*y+b*b),x>E&&(E=x),x<R&&(R=x);"random"===r&&d5(g),g.max=E-R,g.min=R,g.v=m=(parseFloat(e.amount)||parseFloat(e.each)*(F>m?m-1:c?"y"===c?m/F:F:Math.max(F,m/F))||0)*("edges"===r?-1:1),g.b=m<0?s-m:s,g.u=ts(e.amount||e.each)||0,n=n&&m<0?w5(n):n}return m=(g[h]-g.min)/g.max||0,Gr(g.b+(n?n(m):m)*g.v)+g.u}},iA=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var r=Gr(Math.round(parseFloat(n)/t)*t*e);return(r-r%1)/e+(Kl(n)?0:ts(n))}},f5=function(t,e){var r,s,n=es(t);return!n&&tl(t)&&(r=n=t.radius||Fo,t.values?(t=Ho(t.values),(s=!Kl(t[0]))&&(r*=r)):t=iA(t.increment)),Jc(e,n?Pi(t)?function(o){return s=t(o),Math.abs(s-o)<=r?s:o}:function(o){for(var h,f,a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=Fo,u=0,d=t.length;d--;)(h=s?(h=t[d].x-a)*h+(f=t[d].y-l)*f:Math.abs(t[d]-a))<c&&(c=h,u=d);return u=!r||c<=r?t[u]:o,s||u===o||Kl(o)?u:u+ts(o)}:iA(t))},p5=function(t,e,n,r){return Jc(es(t)?!e:!0===n?!!(n=0):!r,function(){return es(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*r)/r})},m5=function(t,e,n){return Jc(n,function(r){return t[~~e(r)]})},L_=function(t){for(var r,s,o,a,e=0,n="";~(r=t.indexOf("random(",e));)o=t.indexOf(")",r),a="["===t.charAt(r+7),s=t.substr(r+7,o-r-7).match(a?$G:GD),n+=t.substr(e,r-e)+p5(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),e=o+1;return n+t.substr(e,t.length-e)},g5=function(t,e,n,r,s){var o=e-t,a=r-n;return Jc(s,function(l){return n+((l-t)/o*a||0)})},_5=function(t,e,n){var o,a,l,r=t.labels,s=Fo;for(o in r)(a=r[o]-e)<0==!!n&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Uo=function(t,e,n){var l,c,u,r=t.vars,s=r[e],o=sr,a=t._ctx;if(s)return l=r[e+"Params"],c=r.callbackScope||t,n&&Qc.length&&Tx(),a&&(sr=a),u=l?s.apply(c,l):s.call(c),sr=o,u},F_=function(t){return Zl(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&Uo(t,"onInterrupt"),t},nbe=function(t){var e=(t=!t.name&&t.default||t).name,n=Pi(t),r=e&&!n&&t.init?function(){this._props=[]}:t,s={init:R_,render:hA,add:aA,kill:vbe,modifier:_be,rawVars:0},o={targetTest:0,get:0,getSetter:dA,aliases:{},register:0};if(pp(),t!==r){if(ro[e])return;Bo(r,Bo(Dx(t,s),o)),Fd(r.prototype,Fd(s,Dx(t,o))),ro[r.prop=e]=r,t.targetTest&&(Ex.push(r),YD[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}XG(e,r),t.register&&t.register(oo,r,Fs)},Zn=255,N_={aqua:[0,Zn,Zn],lime:[0,Zn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Zn],navy:[0,0,128],white:[Zn,Zn,Zn],olive:[128,128,0],yellow:[Zn,Zn,0],orange:[Zn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Zn,0,0],pink:[Zn,192,203],cyan:[0,Zn,Zn],transparent:[Zn,Zn,Zn,0]},rA=function(t,e,n){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*Zn+.5|0},v5=function(t,e,n){var s,o,a,l,c,u,d,h,f,p,r=t?Kl(t)?[t>>16,t>>8&Zn,t&Zn]:0:N_.black;if(!r){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),N_[t])r=N_[t];else if("#"===t.charAt(0)){if(t.length<6&&(s=t.charAt(1),o=t.charAt(2),a=t.charAt(3),t="#"+s+s+o+o+a+a+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(r=parseInt(t.substr(1,6),16))>>16,r>>8&Zn,r&Zn,parseInt(t.substr(7),16)/255];r=[(t=parseInt(t.substr(1),16))>>16,t>>8&Zn,t&Zn]}else if("hsl"===t.substr(0,3))if(r=p=t.match(GD),e){if(~t.indexOf("="))return r=t.match(WG),n&&r.length<4&&(r[3]=1),r}else l=+r[0]%360/360,c=+r[1]/100,s=2*(u=+r[2]/100)-(o=u<=.5?u*(c+1):u+c-u*c),r.length>3&&(r[3]*=1),r[0]=rA(l+1/3,s,o),r[1]=rA(l,s,o),r[2]=rA(l-1/3,s,o);else r=t.match(GD)||N_.transparent;r=r.map(Number)}return e&&!p&&(s=r[0]/Zn,o=r[1]/Zn,a=r[2]/Zn,u=((d=Math.max(s,o,a))+(h=Math.min(s,o,a)))/2,d===h?l=c=0:(f=d-h,c=u>.5?f/(2-d-h):f/(d+h),l=d===s?(o-a)/f+(o<a?6:0):d===o?(a-s)/f+2:(s-o)/f+4,l*=60),r[0]=~~(l+.5),r[1]=~~(100*c+.5),r[2]=~~(100*u+.5)),n&&r.length<4&&(r[3]=1),r},y5=function(t){var e=[],n=[],r=-1;return t.split(eu).forEach(function(s){var o=s.match(cp)||[];e.push.apply(e,o),n.push(r+=o.length+1)}),e.c=n,e},b5=function(t,e,n){var l,c,u,d,r="",s=(t+r).match(eu),o=e?"hsla(":"rgba(",a=0;if(!s)return t;if(s=s.map(function(h){return(h=v5(h,e,1))&&o+(e?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),n&&(u=y5(t),(l=n.c).join(r)!==u.c.join(r)))for(d=(c=t.replace(eu,"1").split(cp)).length-1;a<d;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:n).shift());if(!c)for(d=(c=t.split(eu)).length-1;a<d;a++)r+=c[a]+s[a];return r+c[d]},eu=function(){var t,i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in N_)i+="|"+t+"\\b";return new RegExp(i+")","gi")}(),ibe=/hsl[a]?\(/,x5=function(t){var n,e=t.join(" ");if(eu.lastIndex=0,eu.test(e))return n=ibe.test(e),t[1]=b5(t[1],n),t[0]=b5(t[0],n,y5(t[1])),!0},so=(i=Date.now,t=500,e=33,n=i(),r=n,o=s=1e3/240,p=function m(g){var y,b,x,w,_=i()-r,v=!0===g;if(_>t&&(n+=_-e),((y=(x=(r+=_)-n)-o)>0||v)&&(w=++d.frame,h=x-1e3*d.time,d.time=x/=1e3,o+=y+(y>=s?4:s-y),b=1),v||(l=c(m)),b)for(f=0;f<a.length;f++)a[f](x,h,w,g)},d={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(g){return h/(1e3/(g||60))},wake:function(){qG&&(!jD&&zG()&&(No=jD=window,$D=No.document||{},io.gsap=oo,(No.gsapVersions||(No.gsapVersions=[])).push(oo.version),YG(Cx||No.GreenSockGlobals||!No.gsap&&No||{}),u=No.requestAnimationFrame),l&&d.sleep(),c=u||function(g){return setTimeout(g,o-1e3*d.time+1|0)},B_=1,p(2))},sleep:function(){(u?No.cancelAnimationFrame:clearTimeout)(l),B_=0,c=R_},lagSmoothing:function(g,_){t=g||1/Kn,e=Math.min(_,t,0)},fps:function(g){o=1e3*d.time+(s=1e3/(g||240))},add:function(g,_,v){var y=_?function(b,x,w,E){g(b,x,w,E),d.remove(y)}:g;return d.remove(g),a[v?"unshift":"push"](y),pp(),y},remove:function(g,_){~(_=a.indexOf(g))&&a.splice(_,1)&&f>=_&&f--},_listeners:a=[]}),pp=function(){return!B_&&so.wake()},mn={},rbe=/^[\d.\-M][\d.\-,\s]/,sbe=/["']/g,obe=function(t){for(var a,l,c,e={},n=t.substr(1,t.length-3).split(":"),r=n[0],s=1,o=n.length;s<o;s++)l=n[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),e[r]=isNaN(c)?c.replace(sbe,"").trim():+c,r=l.substr(a+1).trim();return e},w5=function(t){return function(e){return 1-t(1-e)}},M5=function i(t,e){for(var r,n=t._first;n;)n instanceof Ls?i(n,e):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==e&&(n.timeline?i(n.timeline,e):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=e)),n=n._next},Bd=function(t,e){return t&&(Pi(t)?t:mn[t]||function(t){var e=(t+"").split("("),n=mn[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[obe(e[1])]:function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<n?t.indexOf(")",n+1):n)}(t).split(",").map(e5)):mn._CE&&rbe.test(t)?mn._CE("",t):n}(t))||e},Vd=function(t,e,n,r){void 0===n&&(n=function(l){return 1-e(1-l)}),void 0===r&&(r=function(l){return l<.5?e(2*l)/2:1-e(2*(1-l))/2});var o,s={easeIn:e,easeOut:n,easeInOut:r};return Ps(t,function(a){for(var l in mn[a]=io[a]=s,mn[o=a.toLowerCase()]=n,s)mn[o+("easeIn"===l?".in":"easeOut"===l?".out":".inOut")]=mn[a+"."+l]=s[l]}),s},C5=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},sA=function i(t,e,n){var r=e>=1?e:1,s=(n||(t?.3:.45))/(e<1?e:1),o=s/UD*(Math.asin(1/r)||0),a=function(u){return 1===u?1:r*Math.pow(2,-10*u)*F0e((u-o)*s)+1},l="out"===t?a:"in"===t?function(c){return 1-a(1-c)}:C5(a);return s=UD/s,l.config=function(c,u){return i(t,c,u)},l},oA=function i(t,e){void 0===e&&(e=1.70158);var n=function(o){return o?--o*o*((e+1)*o+e)+1:0},r="out"===t?n:"in"===t?function(s){return 1-n(1-s)}:C5(n);return r.config=function(s){return i(t,s)},r};Ps("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,t){var e=t<5?t+1:t;Vd(i+",Power"+(e-1),t?function(n){return Math.pow(n,e)}:function(n){return n},function(n){return 1-Math.pow(1-n,e)},function(n){return n<.5?Math.pow(2*n,e)/2:1-Math.pow(2*(1-n),e)/2})}),mn.Linear.easeNone=mn.none=mn.Linear.easeIn,Vd("Elastic",sA("in"),sA("out"),sA()),function(i,t){var s=function(a){return a<.36363636363636365?i*a*a:a<.7272727272727273?i*Math.pow(a-1.5/t,2)+.75:a<.9090909090909092?i*(a-=2.25/t)*a+.9375:i*Math.pow(a-2.625/t,2)+.984375};Vd("Bounce",function(o){return 1-s(1-o)},s)}(7.5625,2.75),Vd("Expo",function(i){return i?Math.pow(2,10*(i-1)):0}),Vd("Circ",function(i){return-(UG(1-i*i)-1)}),Vd("Sine",function(i){return 1===i?1:1-L0e(i*O0e)}),Vd("Back",oA("in"),oA("out"),oA()),mn.SteppedEase=mn.steps=io.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,r=t+(e?0:1),s=e?1:0;return function(a){return((r*P_(0,.99999999,a)|0)+s)*n}}},lp.ease=mn["quad.out"],Ps("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return ZD+=i+","+i+"Params,"});var S5=function(t,e){this.id=P0e++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:QG,this.set=e?e.getSetter:dA},mp=function(){function i(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,hp(this,+e.duration,1,1),this.data=e.data,sr&&(this._ctx=sr,sr.data.push(this)),B_||so.wake()}var t=i.prototype;return t.delay=function(n){return n||0===n?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},t.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},t.totalDuration=function(n){return arguments.length?(this._dirty=0,hp(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(n,r){if(pp(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(kx(this,n),!s._dp||s.parent||o5(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&nl(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Kn||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),JG(this,n,r)),this},t.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+s5(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},t.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?n:1-n)+s5(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?dp(this._tTime,s)+1:1},t.timeScale=function(n){if(!arguments.length)return this._rts===-Kn?0:this._rts;if(this._rts===n)return this;var r=this.parent&&this._ts?Rx(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Kn?0:this._rts,this.totalTime(P_(-this._delay,this._tDur,r),!0),Ix(this),z0e(this)},t.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(pp(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Kn&&(this._tTime-=Kn)))),this):this._ps},t.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&nl(r,this,n-this._delay),this}return this._start},t.endTime=function(n){return this._start+(Os(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Rx(r.rawTime(n),this):this._tTime:this._tTime},t.revert=function(n){void 0===n&&(n=I_);var r=Lo;return Lo=n,this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents),"nested"!==this.data&&Zl(this),Lo=r,this},t.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(r._ts||1),r=r._dp;return!this.parent&&this.vars.immediateRender?-1:s},t.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,c5(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,c5(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},t.seek=function(n,r){return this.totalTime(Vo(this,n),Os(r))},t.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,Os(r))},t.play=function(n,r){return null!=n&&this.seek(n,r),this.reversed(!1).paused(!1)},t.reverse=function(n,r){return null!=n&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(n,r){return null!=n&&this.seek(n,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Kn:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Kn,this},t.isActive=function(){var s,n=this.parent||this._dp,r=this._start;return!(n&&!(this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-Kn))},t.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),"onUpdate"===n&&(this._onUpdate=r)):delete o[n],this):o[n]},t.then=function(n){var r=this;return new Promise(function(s){var o=Pi(n)?n:t5,a=function(){var c=r.then;r.then=null,Pi(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&1===r.totalProgress()&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},t.kill=function(){F_(this)},i}();Bo(mp.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Kn,_prom:0,_ps:!1,_rts:1});var Ls=function(i){function t(n,r){var s;return void 0===n&&(n={}),(s=i.call(this,n)||this).labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=Os(n.sortChildren),Mi&&nl(n.parent||Mi,Xl(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&a5(Xl(s),n.scrollTrigger),s}HG(t,i);var e=t.prototype;return e.to=function(r,s,o){return O_(0,arguments,this),this},e.from=function(r,s,o){return O_(1,arguments,this),this},e.fromTo=function(r,s,o,a){return O_(2,arguments,this),this},e.set=function(r,s,o){return s.duration=0,s.parent=this,k_(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new br(r,s,Vo(this,o),1),this},e.call=function(r,s,o){return nl(this,br.delayedCall(0,r,s),o)},e.staggerTo=function(r,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new br(r,o,Vo(this,l)),this},e.staggerFrom=function(r,s,o,a,l,c,u){return o.runBackwards=1,k_(o).immediateRender=Os(o.immediateRender),this.staggerTo(r,s,o,a,l,c,u)},e.staggerFromTo=function(r,s,o,a,l,c,u,d){return a.startAt=o,k_(a).immediateRender=Os(a.immediateRender),this.staggerTo(r,s,a,l,c,u,d)},e.render=function(r,s,o){var h,f,p,m,g,_,v,y,b,x,w,E,a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:Gr(r),d=this._zTime<0!=r<0&&(this._initted||!c);if(this!==Mi&&u>l&&r>=0&&(u=l),u!==this._tTime||o||d){if(a!==this._time&&c&&(u+=this._time-a,r+=this._time-a),h=u,b=this._start,_=!(y=this._ts),d&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(w=this._yoyo,g=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(100*g+r,s,o);if(h=Gr(u%g),u===l?(m=this._repeat,h=c):((m=~~(u/g))&&m===u/g&&(h=c,m--),h>c&&(h=c)),x=dp(this._tTime,g),!a&&this._tTime&&x!==m&&(x=m),w&&1&m&&(h=c-h,E=1),m!==x&&!this._lock){var R=w&&1&x,F=R===(w&&1&m);if(m<x&&(R=!R),a=R?0:c,this._lock=1,this.render(a||(E?0:Gr(m*g)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&Uo(this,"onRepeat"),this.vars.repeatRefresh&&!E&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,F&&(this._lock=2,this.render(a=R?c:-1e-4,!0),this.vars.repeatRefresh&&!E&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;M5(this,E)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(v=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,Gr(a),Gr(h)),v&&(u-=h-(h=v._start))),this._tTime=u,this._time=h,this._act=!y,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&h&&!s&&(Uo(this,"onStart"),this._tTime!==u))return this;if(h>=a&&r>=0)for(f=this._first;f;){if(p=f._next,(f._act||h>=f._start)&&f._ts&&v!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(h-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(h-f._start)*f._ts,s,o),h!==this._time||!this._ts&&!_){v=0,p&&(u+=this._zTime=-Kn);break}}f=p}else{o=o||Lo,f=this._last;for(var N=r<0?r:h;f;){if(p=f._prev,(f._act||N<=f._end)&&f._ts&&v!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(N-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(N-f._start)*f._ts,s,o),h!==this._time||!this._ts&&!_){v=0,p&&(u+=this._zTime=N?-Kn:Kn);break}}f=p}}if(v&&!s&&(this.pause(),v.render(h>=a?0:-Kn)._zTime=h>=a?1:-1,this._ts))return this._start=b,Ix(this),this.render(r,s,o);this._onUpdate&&!s&&Uo(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(b===this._start||Math.abs(y)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&Zl(this,1),!s&&(!(r<0)||a)&&(u||a||!l)&&(Uo(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(r,s){var o=this;if(Kl(s)||(s=Vo(this,s,r)),!(r instanceof mp)){if(es(r))return r.forEach(function(a){return o.add(a,s)}),this;if(Ir(r))return this.addLabel(r,s);if(!Pi(r))return this;r=br.delayedCall(0,r)}return this!==r?nl(this,r,s):this},e.getChildren=function(r,s,o,a){void 0===r&&(r=!0),void 0===s&&(s=!0),void 0===o&&(o=!0),void 0===a&&(a=-Fo);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof br?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},e.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},e.remove=function(r){return Ir(r)?this.removeLabel(r):Pi(r)?this.killTweensOf(r):(Ax(this,r),r===this._recent&&(this._recent=this._last),Nd(this))},e.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Gr(so.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},e.addLabel=function(r,s){return this.labels[r]=Vo(this,s),this},e.removeLabel=function(r){return delete this.labels[r],this},e.addPause=function(r,s,o){var a=br.delayedCall(0,s||R_,o);return a.data="isPause",this._hasPause=1,nl(this,a,Vo(this,r))},e.removePause=function(r){var s=this._first;for(r=Vo(this,r);s;)s._start===r&&"isPause"===s.data&&Zl(s),s=s._next},e.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)tu!==a[l]&&a[l].kill(r,s);return this},e.getTweensOf=function(r,s){for(var u,o=[],a=Ho(r),l=this._first,c=Kl(s);l;)l instanceof br?V0e(l._targets,a)&&(c?(!tu||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},e.tweenTo=function(r,s){s=s||{};var f,o=this,a=Vo(o,r),c=s.startAt,u=s.onStart,d=s.onStartParams,h=s.immediateRender,p=br.to(o,Bo({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||Kn,onStart:function(){if(o.pause(),!f){var g=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());p._dur!==g&&hp(p,g,0,1).render(p._time,!0,!0),f=1}u&&u.apply(p,d||[])}},s));return h?p.render(0):p},e.tweenFromTo=function(r,s,o){return this.tweenTo(s,Bo({startAt:{time:Vo(this,r)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(r){return void 0===r&&(r=this._time),_5(this,Vo(this,r))},e.previousLabel=function(r){return void 0===r&&(r=this._time),_5(this,Vo(this,r),1)},e.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Kn)},e.shiftChildren=function(r,s,o){void 0===o&&(o=0);for(var c,a=this._first,l=this.labels;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return Nd(this)},e.invalidate=function(){var r=this._first;for(this._lock=0;r;)r.invalidate(),r=r._next;return i.prototype.invalidate.call(this)},e.clear=function(r){void 0===r&&(r=!0);for(var o,s=this._first;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Nd(this)},e.totalDuration=function(r){var c,u,d,s=0,o=this,a=o._last,l=Fo;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(d=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),(u=a._start)>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,nl(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;hp(o,o===Mi&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(r){if(Mi._ts&&(JG(Mi,Rx(r,Mi)),KG=so.frame),so.frame>=ZG){ZG+=no.autoSleep||120;var s=Mi._first;if((!s||!s._ts)&&no.autoSleep&&so._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||so.sleep()}}},t}(mp);Bo(Ls.prototype,{_lock:0,_hasPause:0,_forcing:0});var tu,lA,cbe=function(t,e,n,r,s,o,a){var d,h,f,p,m,g,_,v,l=new Fs(this._pt,t,e,0,1,I5,null,s),c=0,u=0;for(l.b=n,l.e=r,n+="",(_=~(r+="").indexOf("random("))&&(r=L_(r)),o&&(o(v=[n,r],t,e),n=v[0],r=v[1]),h=n.match(WD)||[];d=WD.exec(r);)p=d[0],m=r.substring(c,d.index),f?f=(f+1)%5:"rgba("===m.substr(-5)&&(f=1),p!==h[u++]&&(g=parseFloat(h[u-1])||0,l._pt={_next:l._pt,p:m||1===u?m:",",s:g,c:"="===p.charAt(1)?up(g,p)-g:parseFloat(p)-g,m:f&&f<4?Math.round:0},c=WD.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(jG.test(r)||_)&&(l.e=0),this._pt=l,l},aA=function(t,e,n,r,s,o,a,l,c,u){Pi(r)&&(r=r(s||0,t,o));var p,d=t[e],h="get"!==n?n:Pi(d)?c?t[e.indexOf("set")||!Pi(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():d,f=Pi(d)?c?pbe:A5:uA;if(Ir(r)&&(~r.indexOf("random(")&&(r=L_(r)),"="===r.charAt(1)&&((p=up(h,r)+(ts(h)||0))||0===p)&&(r=p)),!u||h!==r||lA)return isNaN(h*r)||""===r?(!d&&!(e in t)&&qD(e,r),cbe.call(this,t,e,h,r,f,l||no.stringFilter,c)):(p=new Fs(this._pt,t,e,+h||0,r-(h||0),"boolean"==typeof d?gbe:R5,0,f),c&&(p.fp=c),a&&p.modifier(a,this,t),this._pt=p)},E5=function(t,e,n,r,s,o){var a,l,c,u;if(ro[t]&&!1!==(a=new ro[t]).init(s,a.rawVars?e[t]:function(t,e,n,r,s){if(Pi(t)&&(t=V_(t,s,e,n,r)),!tl(t)||t.style&&t.nodeType||es(t)||GG(t))return Ir(t)?V_(t,s,e,n,r):t;var a,o={};for(a in t)o[a]=V_(t[a],s,e,n,r);return o}(e[t],r,s,o,n),n,r,o)&&(n._pt=l=new Fs(n._pt,s,t,0,1,a.render,a,0,a.priority),n!==fp))for(c=n._ptLookup[n._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},cA=function i(t,e){var w,E,R,F,N,S,L,Y,I,z,D,P,O,n=t.vars,r=n.ease,s=n.startAt,o=n.immediateRender,a=n.lazy,l=n.onUpdate,c=n.onUpdateParams,u=n.callbackScope,d=n.runBackwards,h=n.yoyoEase,f=n.keyframes,p=n.autoRevert,m=t._dur,g=t._startAt,_=t._targets,v=t.parent,y=v&&"nested"===v.data?v.vars.targets:_,b="auto"===t._overwrite&&!HD,x=t.timeline;if(x&&(!f||!r)&&(r="none"),t._ease=Bd(r,lp.ease),t._yEase=h?w5(Bd(!0===h?r:h,lp.ease)):0,h&&t._yoyo&&!t._repeat&&(h=t._yEase,t._yEase=t._ease,t._ease=h),t._from=!x&&!!n.runBackwards,!x||f&&!n.stagger){if(P=(Y=_[0]?Ld(_[0]).harness:0)&&n[Y.prop],w=Dx(n,YD),g&&(e<0&&d&&o&&!p?g.render(-1,!0):g.revert(d&&m?I_:B0e),g._lazy=0),s){if(Zl(t._startAt=br.set(_,Bo({data:"isStart",overwrite:!1,parent:v,immediateRender:!0,lazy:Os(a),startAt:null,delay:0,onUpdate:l,onUpdateParams:c,callbackScope:u,stagger:0},s))),e<0&&(Lo||!o&&!p)&&t._startAt.revert(I_),o&&m&&e<=0)return void(e&&(t._zTime=e))}else if(d&&m&&!g)if(e&&(o=!1),R=Bo({overwrite:!1,data:"isFromStart",lazy:o&&Os(a),immediateRender:o,stagger:0,parent:v},w),P&&(R[Y.prop]=P),Zl(t._startAt=br.set(_,R)),e<0&&(Lo?t._startAt.revert(I_):t._startAt.render(-1,!0)),t._zTime=e,o){if(!e)return}else i(t._startAt,Kn);for(t._pt=t._ptCache=0,a=m&&Os(a)||a&&!m,E=0;E<_.length;E++){if(L=(N=_[E])._gsap||QD(_)[E]._gsap,t._ptLookup[E]=z={},XD[L.id]&&Qc.length&&Tx(),D=y===_?E:y.indexOf(N),Y&&!1!==(I=new Y).init(N,P||w,t,D,y)&&(t._pt=F=new Fs(t._pt,N,I.name,0,1,I.render,I,0,I.priority),I._props.forEach(function(q){z[q]=F}),I.priority&&(S=1)),!Y||P)for(R in w)ro[R]&&(I=E5(R,w,t,D,N,y))?I.priority&&(S=1):z[R]=F=aA.call(t,N,R,"get",w[R],D,y,0,n.stringFilter);t._op&&t._op[E]&&t.kill(N,t._op[E]),b&&t._pt&&(tu=t,Mi.killTweensOf(N,z,t.globalTime(e)),O=!t.parent,tu=0),t._pt&&a&&(XD[L.id]=1)}S&&k5(t),t._onInit&&t._onInit(t)}t._onUpdate=l,t._initted=(!t._op||t._pt)&&!O,f&&e<=0&&x.render(Fo,!0,!0)},fbe=function(t,e,n,r){var o,a,s=e.ease||r||"power1.inOut";if(es(e))a=n[t]||(n[t]=[]),e.forEach(function(l,c){return a.push({t:c/(e.length-1)*100,v:l,e:s})});else for(o in e)a=n[o]||(n[o]=[]),"ease"===o||a.push({t:parseFloat(t),v:e[o],e:s})},V_=function(t,e,n,r,s){return Pi(t)?t.call(e,n,r,s):Ir(t)&&~t.indexOf("random(")?L_(t):t},T5=ZD+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",D5={};Ps(T5+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return D5[i]=1});var br=function(i){function t(n,r,s,o){var a;"number"==typeof r&&(s.duration=r,r=s,s=null);var b,x,w,E,R,F,N,S,l=(a=i.call(this,o?r:k_(r))||this).vars,c=l.duration,u=l.delay,d=l.immediateRender,h=l.stagger,f=l.overwrite,p=l.keyframes,m=l.defaults,g=l.scrollTrigger,_=l.yoyoEase,v=r.parent||Mi,y=(es(n)||GG(n)?Kl(n[0]):"length"in r)?[n]:Ho(n);if(a._targets=y.length?QD(y):Sx("GSAP target "+n+" not found. https://greensock.com",!no.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,p||h||Mx(c)||Mx(u)){if(r=a.vars,(b=a.timeline=new Ls({data:"nested",defaults:m||{},targets:v&&"nested"===v.data?v.vars.targets:y})).kill(),b.parent=b._dp=Xl(a),b._start=0,h||Mx(c)||Mx(u)){if(E=y.length,N=h&&h5(h),tl(h))for(R in h)~T5.indexOf(R)&&(S||(S={}),S[R]=h[R]);for(x=0;x<E;x++)(w=Dx(r,D5)).stagger=0,_&&(w.yoyoEase=_),S&&Fd(w,S),F=y[x],w.duration=+V_(c,Xl(a),x,F,y),w.delay=(+V_(u,Xl(a),x,F,y)||0)-a._delay,!h&&1===E&&w.delay&&(a._delay=u=w.delay,a._start+=u,w.delay=0),b.to(F,w,N?N(x,F,y):0),b._ease=mn.none;b.duration()?c=u=0:a.timeline=0}else if(p){k_(Bo(b.vars.defaults,{ease:"none"})),b._ease=Bd(p.ease||r.ease||"none");var Y,I,z,L=0;if(es(p))p.forEach(function(D){return b.to(y,D,">")}),b.duration();else{for(R in w={},p)"ease"===R||"easeEach"===R||fbe(R,p[R],w,p.easeEach);for(R in w)for(Y=w[R].sort(function(D,P){return D.t-P.t}),L=0,x=0;x<Y.length;x++)(z={ease:(I=Y[x]).e,duration:(I.t-(x?Y[x-1].t:0))/100*c})[R]=I.v,b.to(y,z,L),L+=z.duration;b.duration()<c&&b.to({},{duration:c-b.duration()})}}c||a.duration(c=b.duration())}else a.timeline=0;return!0===f&&!HD&&(tu=Xl(a),Mi.killTweensOf(y),tu=0),nl(v,Xl(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(d||!c&&!p&&a._start===Gr(v._time)&&Os(d)&&G0e(Xl(a))&&"nested"!==v.data)&&(a._tTime=-Kn,a.render(Math.max(0,-u))),g&&a5(Xl(a),g),a}HG(t,i);var e=t.prototype;return e.render=function(r,s,o){var h,f,p,m,g,_,v,y,b,a=this._time,l=this._tDur,c=this._dur,u=r<0,d=r>l-Kn&&!u?l:r<Kn?0:r;if(c){if(d!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(h=d,y=this.timeline,this._repeat){if(m=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(100*m+r,s,o);if(h=Gr(d%m),d===l?(p=this._repeat,h=c):((p=~~(d/m))&&p===d/m&&(h=c,p--),h>c&&(h=c)),(_=this._yoyo&&1&p)&&(b=this._yEase,h=c-h),g=dp(this._tTime,m),h===a&&!o&&this._initted)return this._tTime=d,this;p!==g&&(y&&this._yEase&&M5(y,_),this.vars.repeatRefresh&&!_&&!this._lock&&(this._lock=o=1,this.render(Gr(m*p),!0).invalidate()._lock=0))}if(!this._initted){if(l5(this,u?r:h,o,s))return this._tTime=0,this;if(a!==this._time)return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=d,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=v=(b||this._ease)(h/c),this._from&&(this.ratio=v=1-v),h&&!a&&!s&&(Uo(this,"onStart"),this._tTime!==d))return this;for(f=this._pt;f;)f.r(v,f.d),f=f._next;y&&y.render(r<0?r:!h&&_?-Kn:y._dur*y._ease(h/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&JD(this,r,0,o),Uo(this,"onUpdate")),this._repeat&&p!==g&&this.vars.onRepeat&&!s&&this.parent&&Uo(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(u&&!this._onUpdate&&JD(this,r,0,!0),(r||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Zl(this,1),!s&&(!u||a)&&(d||a)&&(Uo(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,r){var c,u,d,s=t.ratio,o=e<0||!e&&(!t._start&&W0e(t)&&(t._initted||!eA(t))||(t._ts<0||t._dp._ts<0)&&!eA(t))?0:1,a=t._rDelay,l=0;if(a&&t._repeat&&(l=P_(0,t._tDur,e),u=dp(l,a),t._yoyo&&1&u&&(o=1-o),u!==dp(t._tTime,a)&&(s=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==s||Lo||r||t._zTime===Kn||!e&&t._zTime){if(!t._initted&&l5(t,e,r,n))return;for(d=t._zTime,t._zTime=e||(n?Kn:0),n||(n=e&&!d),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=l,c=t._pt;c;)c.r(o,c.d),c=c._next;e<0&&JD(t,e,0,!0),t._onUpdate&&!n&&Uo(t,"onUpdate"),l&&t._repeat&&!n&&t.parent&&Uo(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&Zl(t,1),!n&&!Lo&&(Uo(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,r,s,o);return this},e.targets=function(){return this._targets},e.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),i.prototype.invalidate.call(this)},e.resetTo=function(r,s,o,a){B_||so.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||cA(this,l),function(t,e,n,r,s,o,a){var c,u,d,h,l=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!l)for(l=t._ptCache[e]=[],d=t._ptLookup,h=t._targets.length;h--;){if((c=d[h][e])&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==e&&c.fp!==e;)c=c._next;if(!c)return lA=1,t.vars[e]="+=0",cA(t,a),lA=0,1;l.push(c)}for(h=l.length;h--;)(c=(u=l[h])._pt||u).s=!r&&0!==r||s?c.s+(r||0)+o*c.c:r,c.c=n-c.s,u.e&&(u.e=$i(n)+ts(u.e)),u.b&&(u.b=c.s+ts(u.b))}(this,r,s,o,a,this._ease(l/this._dur),l)?this.resetTo(r,s,o,a):(kx(this,0),this.parent||r5(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(r,s){if(void 0===s&&(s="all"),!(r||s&&"all"!==s))return this._lazy=this._pt=0,this.parent?F_(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,tu&&!0!==tu.vars.overwrite)._first||F_(this),this.parent&&o!==this.timeline.totalDuration()&&hp(this,this._dur*this.timeline._tDur/o,0,1),this}var d,h,f,p,m,g,_,a=this._targets,l=r?Ho(r):a,c=this._ptLookup,u=this._pt;if((!s||"all"===s)&&function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0}(a,l))return"all"===s&&(this._pt=0),F_(this);for(d=this._op=this._op||[],"all"!==s&&(Ir(s)&&(m={},Ps(s,function(v){return m[v]=1}),s=m),s=function(t,e){var s,o,a,l,n=t[0]?Ld(t[0]).harness:0,r=n&&n.aliases;if(!r)return e;for(o in s=Fd({},e),r)if(o in s)for(a=(l=r[o].split(",")).length;a--;)s[l[a]]=s[o];return s}(a,s)),_=a.length;_--;)if(~l.indexOf(a[_]))for(m in h=c[_],"all"===s?(d[_]=s,p=h,f={}):(f=d[_]=d[_]||{},p=s),p)(g=h&&h[m])&&((!("kill"in g.d)||!0===g.d.kill(m))&&Ax(this,g,"_pt"),delete h[m]),"all"!==f&&(f[m]=1);return this._initted&&!this._pt&&u&&F_(this),this},t.to=function(r,s){return new t(r,s,arguments[2])},t.from=function(r,s){return O_(1,arguments)},t.delayedCall=function(r,s,o,a){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},t.fromTo=function(r,s,o){return O_(2,arguments)},t.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(r,s)},t.killTweensOf=function(r,s,o){return Mi.killTweensOf(r,s,o)},t}(mp);Bo(br.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Ps("staggerTo,staggerFrom,staggerFromTo",function(i){br[i]=function(){var t=new Ls,e=tA.call(arguments,0);return e.splice("staggerFromTo"===i?5:4,0,0),t[i].apply(t,e)}});var uA=function(t,e,n){return t[e]=n},A5=function(t,e,n){return t[e](n)},pbe=function(t,e,n,r){return t[e](r.fp,n)},mbe=function(t,e,n){return t.setAttribute(e,n)},dA=function(t,e){return Pi(t[e])?A5:zD(t[e])&&t.setAttribute?mbe:uA},R5=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},gbe=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},I5=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},hA=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},_be=function(t,e,n,r){for(var o,s=this._pt;s;)o=s._next,s.p===r&&s.modifier(t,e,n),s=o},vbe=function(t){for(var n,r,e=this._pt;e;)r=e._next,e.p===t&&!e.op||e.op===t?Ax(this,e,"_pt"):e.dep||(n=1),e=r;return!n},ybe=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},k5=function(t){for(var n,r,s,o,e=t._pt;e;){for(n=e._next,r=s;r&&r.pr>e.pr;)r=r._next;(e._prev=r?r._prev:o)?e._prev._next=e:s=e,(e._next=r)?r._prev=e:o=e,e=n}t._pt=s},Fs=function(){function i(e,n,r,s,o,a,l,c,u){this.t=n,this.s=s,this.c=o,this.p=r,this.r=a||R5,this.d=l||this,this.set=c||uA,this.pr=u||0,this._next=e,e&&(e._prev=this)}return i.prototype.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=ybe,this.m=n,this.mt=s,this.tween=r},i}();Ps(ZD+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return YD[i]=1}),io.TweenMax=io.TweenLite=br,io.TimelineLite=io.TimelineMax=Ls,Mi=new Ls({sortChildren:!1,defaults:lp,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),no.stringFilter=x5;var gp=[],Ox={},bbe=[],O5=0,fA=function(t){return(Ox[t]||bbe).map(function(e){return e()})},pA=function(){var t=Date.now(),e=[];t-O5>2&&(fA("matchMediaInit"),gp.forEach(function(n){var o,a,l,c,r=n.queries,s=n.conditions;for(a in r)(o=No.matchMedia(r[a]).matches)&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(n.revert(),l&&e.push(n))}),fA("matchMediaRevert"),e.forEach(function(n){return n.onMatch(n)}),O5=t,fA("matchMedia"))},P5=function(){function i(e,n){this.selector=n&&nA(n),this.data=[],this._r=[],this.isReverted=!1,e&&this.add(e)}var t=i.prototype;return t.add=function(n,r,s){Pi(n)&&(s=r,r=n,n=Pi);var o=this,a=function(){var d,c=sr,u=o.selector;return c&&c!==o&&c.data.push(o),s&&(o.selector=nA(s)),sr=o,d=r.apply(o,arguments),Pi(d)&&o._r.push(d),sr=c,o.selector=u,o.isReverted=!1,d};return o.last=a,n===Pi?a(o):n?o[n]=a:a},t.ignore=function(n){var r=sr;sr=null,n(this),sr=r},t.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof br&&n.push(r)}),n},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(n,r){var s=this;if(n?(this.getTweens().map(function(a){return{g:a.globalTime(0),t:a}}).sort(function(a,l){return l.g-a.g||-1}).forEach(function(a){return a.t.revert(n)}),this.data.forEach(function(a){return!(a instanceof mp)&&a.revert&&a.revert(n)}),this._r.forEach(function(a){return a(n,s)}),this.isReverted=!0):this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r){var o=gp.indexOf(this);~o&&gp.splice(o,1)}},t.revert=function(n){this.kill(n||{})},i}(),xbe=function(){function i(e){this.contexts=[],this.scope=e}var t=i.prototype;return t.add=function(n,r,s){tl(n)||(n={matches:n});var l,c,u,o=new P5(0,s||this.scope),a=o.conditions={};for(c in this.contexts.push(o),r=o.add("onMatch",r),o.queries=n,n)"all"===c?u=1:(l=No.matchMedia(n[c]))&&(gp.indexOf(o)<0&&gp.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(pA):l.addEventListener("change",pA));return u&&r(o),this},t.revert=function(n){this.kill(n||{})},t.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),Px={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(r){return nbe(r)})},timeline:function(t){return new Ls(t)},getTweensOf:function(t,e){return Mi.getTweensOf(t,e)},getProperty:function(t,e,n,r){Ir(t)&&(t=Ho(t)[0]);var s=Ld(t||{}).get,o=n?t5:e5;return"native"===n&&(n=""),t&&(e?o((ro[e]&&ro[e].get||s)(t,e,n,r)):function(a,l,c){return o((ro[a]&&ro[a].get||s)(t,a,l,c))})},quickSetter:function(t,e,n){if((t=Ho(t)).length>1){var r=t.map(function(u){return oo.quickSetter(u,e,n)}),s=r.length;return function(u){for(var d=s;d--;)r[d](u)}}var o=ro[e],a=Ld(t=t[0]||{}),l=a.harness&&(a.harness.aliases||{})[e]||e,c=o?function(u){var d=new o;fp._pt=0,d.init(t,n?u+n:u,fp,0,[t]),d.render(1,d),fp._pt&&hA(1,fp)}:a.set(t,l);return o?c:function(u){return c(t,l,n?u+n:u,a,1)}},quickTo:function(t,e,n){var r,s=oo.to(t,Fd(((r={})[e]="+=0.1",r.paused=!0,r),n||{})),o=function(l,c,u){return s.resetTo(e,l,c,u)};return o.tween=s,o},isTweening:function(t){return Mi.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Bd(t.ease,lp.ease)),n5(lp,t||{})},config:function(t){return n5(no,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,s=t.defaults,o=t.extendTimeline;(t.plugins||"").split(",").forEach(function(a){return a&&!ro[a]&&!io[a]&&Sx(e+" effect requires "+a+" plugin.")}),KD[e]=function(a,l,c){return n(Ho(a),Bo(l||{},s),c)},o&&(Ls.prototype[e]=function(a,l,c){return this.add(KD[e](a,tl(l)?l:(c=l)&&{},this),c)})},registerEase:function(t,e){mn[t]=Bd(e)},parseEase:function(t,e){return arguments.length?Bd(t,e):mn},getById:function(t){return Mi.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var r,s,n=new Ls(t);for(n.smoothChildTiming=Os(t.smoothChildTiming),Mi.remove(n),n._dp=0,n._time=n._tTime=Mi._time,r=Mi._first;r;)s=r._next,(e||!(!r._dur&&r instanceof br&&r.vars.onComplete===r._targets[0]))&&nl(n,r,r._start-r._delay),r=s;return nl(Mi,n,0),n},context:function(t,e){return t?new P5(t,e):sr},matchMedia:function(t){return new xbe(t)},matchMediaRefresh:function(){return gp.forEach(function(t){var n,r,e=t.conditions;for(r in e)e[r]&&(e[r]=!1,n=1);n&&t.revert()})||pA()},addEventListener:function(t,e){var n=Ox[t]||(Ox[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=Ox[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},utils:{wrap:function i(t,e,n){var r=e-t;return es(t)?m5(t,i(0,t.length),e):Jc(n,function(s){return(r+(s-t)%r)%r+t})},wrapYoyo:function i(t,e,n){var r=e-t,s=2*r;return es(t)?m5(t,i(0,t.length-1),e):Jc(n,function(o){return t+((o=(s+(o-t)%s)%s||0)>r?s-o:o)})},distribute:h5,random:p5,snap:f5,normalize:function(t,e,n){return g5(t,e,0,1,n)},getUnit:ts,clamp:function(t,e,n){return Jc(n,function(r){return P_(t,e,r)})},splitColor:v5,toArray:Ho,selector:nA,mapRange:g5,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduce(function(s,o){return o(s)},r)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||ts(n))}},interpolate:function i(t,e,n,r){var s=isNaN(t+e)?0:function(f){return(1-f)*t+f*e};if(!s){var l,c,u,d,h,o=Ir(t),a={};if(!0===n&&(r=1)&&(n=null),o)t={p:t},e={p:e};else if(es(t)&&!es(e)){for(u=[],h=(d=t.length)-2,c=1;c<d;c++)u.push(i(t[c-1],t[c]));d--,s=function(p){p*=d;var m=Math.min(h,~~p);return u[m](p-m)},n=e}else r||(t=Fd(es(t)?[]:{},t));if(!u){for(l in e)aA.call(a,t,l,"get",e[l]);s=function(p){return hA(p,a)||(o?t.p:t)}}}return Jc(n,s)},shuffle:d5},install:YG,effects:KD,ticker:so,updateRoot:Ls.updateRoot,plugins:ro,globalTimeline:Mi,core:{PropTween:Fs,globals:XG,Tween:br,Timeline:Ls,Animation:mp,getCache:Ld,_removeLinkedListItem:Ax,reverting:function(){return Lo},context:function(t){return t&&sr&&(sr.data.push(t),t._ctx=sr),sr},suppressOverwrites:function(t){return HD=t}}};Ps("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return Px[i]=br[i]}),so.add(Ls.updateRoot),fp=Px.to({},{duration:0});var wbe=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},mA=function(t,e){return{name:t,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(Ir(s)&&(l={},Ps(s,function(u){return l[u]=1}),s=l),e){for(c in l={},s)l[c]=e(s[c]);s=l}!function(t,e){var r,s,o,n=t._targets;for(r in e)for(s=n.length;s--;)(o=t._ptLookup[s][r])&&(o=o.d)&&(o._pt&&(o=wbe(o,r)),o&&o.modifier&&o.modifier(e[r],t,n[s],r))}(a,s)}}}},oo=Px.registerPlugin({name:"attr",init:function(t,e,n,r,s){var o,a,l;for(o in this.tween=n,e)l=t.getAttribute(o)||"",(a=this.add(t,"setAttribute",(l||0)+"",e[o],r,s,0,0,o)).op=o,a.b=l,this._props.push(o)},render:function(t,e){for(var n=e._pt;n;)Lo?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},mA("roundProps",iA),mA("modifiers"),mA("snap",f5))||Px;br.version=Ls.version=oo.version="3.11.1",qG=1,zG()&&pp();var L5,nu,_p,gA,Hd,F5,_A,z5,Ql={},Ud=180/Math.PI,vp=Math.PI/180,yp=Math.atan2,N5=1e8,vA=/([A-Z])/g,Ebe=/(left|right|width|margin|padding|x)/i,Tbe=/[\s,\(]\S/,Jl={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},yA=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Dbe=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Abe=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},Rbe=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},B5=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},V5=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Ibe=function(t,e,n){return t.style[e]=n},kbe=function(t,e,n){return t.style.setProperty(e,n)},Obe=function(t,e,n){return t._gsap[e]=n},Pbe=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},Lbe=function(t,e,n,r,s){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},Fbe=function(t,e,n,r,s){var o=t._gsap;o[e]=n,o.renderTransform(s,o)},Li="transform",va=Li+"Origin",Nbe=function(t){var e=this,n=this.target,r=n.style;if(t in Ql){if(this.tfm=this.tfm||{},"transform"!==t&&(~(t=Jl[t]||t).indexOf(",")?t.split(",").forEach(function(s){return e.tfm[s]=ec(n,s)}):this.tfm[t]=n._gsap.x?n._gsap[t]:ec(n,t)),this.props.indexOf(Li)>=0)return;n._gsap.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(va,"")),t=Li}r&&this.props.push(t,r[t])},H5=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Bbe=function(){var s,o,t=this.props,e=this.target,n=e.style,r=e._gsap;for(s=0;s<t.length;s+=2)t[s+1]?n[t[s]]=t[s+1]:n.removeProperty(t[s].replace(vA,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),(s=_A())&&!s.isStart&&!n[Li]&&(H5(n),r.uncache=1)}},U5=function(t,e){var n={target:t,props:[],revert:Bbe,save:Nbe};return e&&e.split(",").forEach(function(r){return n.save(r)}),n},bA=function(t,e){var n=nu.createElementNS?nu.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):nu.createElement(t);return n.style?n:nu.createElement(t)},il=function i(t,e,n){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(vA,"-$1").toLowerCase())||r.getPropertyValue(e)||!n&&i(t,bp(e)||e,1)||""},G5="O,Moz,ms,Ms,Webkit".split(","),bp=function(t,e,n){var s=(e||Hd).style,o=5;if(t in s&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(G5[o]+t in s););return o<0?null:(3===o?"ms":o>=0?G5[o]:"")+t},xA=function(){"undefined"!=typeof window&&window.document&&(L5=window,_p=(nu=L5.document).documentElement,Hd=bA("div")||{style:{}},bA("div"),Li=bp(Li),va=Li+"Origin",Hd.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",z5=!!bp("perspective"),_A=oo.core.reverting,gA=1)},wA=function i(t){var o,e=bA("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText;if(_p.appendChild(e),e.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch(a){}else this._gsapBBox&&(o=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),_p.removeChild(e),this.style.cssText=s,o},W5=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},j5=function(t){var e;try{e=t.getBBox()}catch(n){e=wA.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===wA||(e=wA.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+W5(t,["x","cx","x1"])||0,y:+W5(t,["y","cy","y1"])||0,width:0,height:0}},$5=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!j5(t))},H_=function(t,e){if(e){var n=t.style;e in Ql&&e!==va&&(e=Li),n.removeProperty?(("ms"===e.substr(0,2)||"webkit"===e.substr(0,6))&&(e="-"+e),n.removeProperty(e.replace(vA,"-$1").toLowerCase())):n.removeAttribute(e)}},iu=function(t,e,n,r,s,o){var a=new Fs(t._pt,e,n,0,1,o?V5:B5);return t._pt=a,a.b=r,a.e=s,t._props.push(n),a},q5={deg:1,rad:1,turn:1},Vbe={grid:1,flex:1},ru=function i(t,e,n,r){var p,m,g,_,s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",a=Hd.style,l=Ebe.test(e),c="svg"===t.tagName.toLowerCase(),u=(c?"client":"offset")+(l?"Width":"Height"),d=100,h="px"===r,f="%"===r;return r===o||!s||q5[r]||q5[o]?s:("px"!==o&&!h&&(s=i(t,e,n,"px")),_=t.getCTM&&$5(t),!f&&"%"!==o||!Ql[e]&&!~e.indexOf("adius")?(a[l?"width":"height"]=d+(h?o:r),m=~e.indexOf("adius")||"em"===r&&t.appendChild&&!c?t:t.parentNode,_&&(m=(t.ownerSVGElement||{}).parentNode),(!m||m===nu||!m.appendChild)&&(m=nu.body),(g=m._gsap)&&f&&g.width&&l&&g.time===so.time&&!g.uncache?$i(s/g.width*d):((f||"%"===o)&&!Vbe[il(m,"display")]&&(a.position=il(t,"position")),m===t&&(a.position="static"),m.appendChild(Hd),p=Hd[u],m.removeChild(Hd),a.position="absolute",l&&f&&((g=Ld(m)).time=so.time,g.width=m[u]),$i(h?p*s/d:p&&s?d/p*s:0))):(p=_?t.getBBox()[l?"width":"height"]:t[u],$i(f?s/p*d:s/100*p)))},ec=function(t,e,n,r){var s;return gA||xA(),e in Jl&&"transform"!==e&&~(e=Jl[e]).indexOf(",")&&(e=e.split(",")[0]),Ql[e]&&"transform"!==e?(s=z_(t,r),s="transformOrigin"!==e?s[e]:s.svg?s.origin:Fx(il(t,va))+" "+s.zOrigin+"px"):(!(s=t.style[e])||"auto"===s||r||~(s+"").indexOf("calc("))&&(s=Lx[e]&&Lx[e](t,e,n)||il(t,e)||QG(t,e)||("opacity"===e?1:0)),n&&!~(s+"").trim().indexOf(" ")?ru(t,e,s,n)+n:s},Hbe=function(t,e,n,r){if(!n||"none"===n){var s=bp(e,t,1),o=s&&il(t,s,1);o&&o!==n?(e=s,n=o):"borderColor"===e&&(n=il(t,"borderTopColor"))}var u,d,h,f,p,m,g,_,v,y,b,a=new Fs(this._pt,t.style,e,0,1,I5),l=0,c=0;if(a.b=n,a.e=r,n+="","auto"==(r+="")&&(t.style[e]=r,r=il(t,e)||r,t.style[e]=n),x5(u=[n,r]),r=u[1],h=(n=u[0]).match(cp)||[],(r.match(cp)||[]).length){for(;d=cp.exec(r);)g=d[0],v=r.substring(l,d.index),p?p=(p+1)%5:("rgba("===v.substr(-5)||"hsla("===v.substr(-5))&&(p=1),g!==(m=h[c++]||"")&&(f=parseFloat(m)||0,b=m.substr((f+"").length),"="===g.charAt(1)&&(g=up(f,g)+b),_=parseFloat(g),y=g.substr((_+"").length),l=cp.lastIndex-y.length,y||(y=y||no.units[e]||b,l===r.length&&(r+=y,a.e+=y)),b!==y&&(f=ru(t,e,m,y)||0),a._pt={_next:a._pt,p:v||1===c?v:",",s:f,c:_-f,m:p&&p<4||"zIndex"===e?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r="display"===e&&"none"===r?V5:B5;return jG.test(r)&&(a.e=0),this._pt=a,a},Y5={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Ube=function(t){var e=t.split(" "),n=e[0],r=e[1]||"50%";return("top"===n||"bottom"===n||"left"===r||"right"===r)&&(t=n,n=r,r=t),e[0]=Y5[n]||n,e[1]=Y5[r]||r,e.join(" ")},zbe=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var a,l,c,n=e.t,r=n.style,s=e.u,o=n._gsap;if("all"===s||!0===s)r.cssText="",l=1;else for(c=(s=s.split(",")).length;--c>-1;)Ql[a=s[c]]&&(l=1,a="transformOrigin"===a?va:Li),H_(n,a);l&&(H_(n,Li),o&&(o.svg&&n.removeAttribute("transform"),z_(n,1),o.uncache=1,H5(r)))}},Lx={clearProps:function(t,e,n,r,s){if("isFromStart"!==s.data){var o=t._pt=new Fs(t._pt,e,n,0,0,zbe);return o.u=r,o.pr=-10,o.tween=s,t._props.push(n),1}}},U_=[1,0,0,1,0,0],X5={},K5=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},Z5=function(t){var e=il(t,Li);return K5(e)?U_:e.substr(7).match(WG).map($i)},MA=function(t,e){var o,a,l,c,n=t._gsap||Ld(t),r=t.style,s=Z5(t);return n.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(l=t.transform.baseVal.consolidate().matrix).a,l.b,l.c,l.d,l.e,l.f]).join(",")?U_:s:(s===U_&&!t.offsetParent&&t!==_p&&!n.svg&&(l=r.display,r.display="block",(!(o=t.parentNode)||!t.offsetParent)&&(c=1,a=t.nextElementSibling,_p.appendChild(t)),s=Z5(t),l?r.display=l:H_(t,"display"),c&&(a?o.insertBefore(t,a):o?o.appendChild(t):_p.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},CA=function(t,e,n,r,s,o){var w,E,F,a=t._gsap,l=s||MA(t,!0),c=a.xOrigin||0,u=a.yOrigin||0,d=a.xOffset||0,h=a.yOffset||0,f=l[0],p=l[1],m=l[2],g=l[3],_=l[4],v=l[5],y=e.split(" "),b=parseFloat(y[0])||0,x=parseFloat(y[1])||0;n?l!==U_&&(E=f*g-p*m)&&(F=b*(-p/E)+x*(f/E)-(f*v-p*_)/E,b=b*(g/E)+x*(-m/E)+(m*v-g*_)/E,x=F):(b=(w=j5(t)).x+(~y[0].indexOf("%")?b/100*w.width:b),x=w.y+(~(y[1]||y[0]).indexOf("%")?x/100*w.height:x)),r||!1!==r&&a.smooth?(a.xOffset=d+((_=b-c)*f+(v=x-u)*m)-_,a.yOffset=h+(_*p+v*g)-v):a.xOffset=a.yOffset=0,a.xOrigin=b,a.yOrigin=x,a.smooth=!!r,a.origin=e,a.originIsAbsolute=!!n,t.style[va]="0px 0px",o&&(iu(o,a,"xOrigin",c,b),iu(o,a,"yOrigin",u,x),iu(o,a,"xOffset",d,a.xOffset),iu(o,a,"yOffset",h,a.yOffset)),t.setAttribute("data-svg-origin",b+" "+x)},z_=function(t,e){var n=t._gsap||new S5(t);if("x"in n&&!e&&!n.uncache)return n;var u,d,h,f,p,m,g,_,v,y,b,x,w,E,R,F,N,S,L,Y,I,z,D,P,O,q,K,Q,j,we,fe,_e,r=t.style,s=n.scaleX<0,o="px",a="deg",l=getComputedStyle(t),c=il(t,va)||"0";return u=d=h=m=g=_=v=y=b=0,f=p=1,n.svg=!(!t.getCTM||!$5(t)),l.translate&&(("none"!==l.translate||"none"!==l.scale||"none"!==l.rotate)&&(r[Li]=("none"!==l.translate?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==l.rotate?"rotate("+l.rotate+") ":"")+("none"!==l.scale?"scale("+l.scale.split(" ").join(",")+") ":"")+l[Li]),r.scale=r.rotate=r.translate="none"),E=MA(t,n.svg),n.svg&&(n.uncache?(O=t.getBBox(),c=n.xOrigin-O.x+"px "+(n.yOrigin-O.y)+"px",P=""):P=!e&&t.getAttribute("data-svg-origin"),CA(t,P||c,!!P||n.originIsAbsolute,!1!==n.smooth,E)),x=n.xOrigin||0,w=n.yOrigin||0,E!==U_&&(S=E[0],L=E[1],Y=E[2],I=E[3],u=z=E[4],d=D=E[5],6===E.length?(f=Math.sqrt(S*S+L*L),p=Math.sqrt(I*I+Y*Y),m=S||L?yp(L,S)*Ud:0,(v=Y||I?yp(Y,I)*Ud+m:0)&&(p*=Math.abs(Math.cos(v*vp))),n.svg&&(u-=x-(x*S+w*Y),d-=w-(x*L+w*I))):(we=E[7],K=E[8],Q=E[9],fe=E[11],u=E[12],d=E[13],h=E[14],g=(R=yp(_e=E[6],j=E[10]))*Ud,R&&(P=z*(F=Math.cos(-R))+K*(N=Math.sin(-R)),O=D*F+Q*N,q=_e*F+j*N,K=z*-N+K*F,Q=D*-N+Q*F,j=_e*-N+j*F,fe=we*-N+fe*F,z=P,D=O,_e=q),_=(R=yp(-Y,j))*Ud,R&&(F=Math.cos(-R),fe=I*(N=Math.sin(-R))+fe*F,S=P=S*F-K*N,L=O=L*F-Q*N,Y=q=Y*F-j*N),m=(R=yp(L,S))*Ud,R&&(P=S*(F=Math.cos(R))+L*(N=Math.sin(R)),O=z*F+D*N,L=L*F-S*N,D=D*F-z*N,S=P,z=O),g&&Math.abs(g)+Math.abs(m)>359.9&&(g=m=0,_=180-_),f=$i(Math.sqrt(S*S+L*L+Y*Y)),p=$i(Math.sqrt(D*D+_e*_e)),R=yp(z,D),v=Math.abs(R)>2e-4?R*Ud:0,b=fe?1/(fe<0?-fe:fe):0),n.svg&&(P=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!K5(il(t,Li)),P&&t.setAttribute("transform",P))),Math.abs(v)>90&&Math.abs(v)<270&&(s?(f*=-1,v+=m<=0?180:-180,m+=m<=0?180:-180):(p*=-1,v+=v<=0?180:-180)),e=e||n.uncache,n.x=u-((n.xPercent=u&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-u)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+o,n.y=d-((n.yPercent=d&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-d)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+o,n.z=h+o,n.scaleX=$i(f),n.scaleY=$i(p),n.rotation=$i(m)+a,n.rotationX=$i(g)+a,n.rotationY=$i(_)+a,n.skewX=v+a,n.skewY=y+a,n.transformPerspective=b+o,(n.zOrigin=parseFloat(c.split(" ")[2])||0)&&(r[va]=Fx(c)),n.xOffset=n.yOffset=0,n.force3D=no.force3D,n.renderTransform=n.svg?Wbe:z5?Q5:Gbe,n.uncache=0,n},Fx=function(t){return(t=t.split(" "))[0]+" "+t[1]},SA=function(t,e,n){var r=ts(e);return $i(parseFloat(e)+parseFloat(ru(t,"x",n+"px",r)))+r},Gbe=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Q5(t,e)},zd="0deg",G_="0px",Gd=") ",Q5=function(t,e){var n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.z,c=n.rotation,u=n.rotationY,d=n.rotationX,h=n.skewX,f=n.skewY,p=n.scaleX,m=n.scaleY,g=n.transformPerspective,_=n.force3D,v=n.target,y=n.zOrigin,b="",x="auto"===_&&t&&1!==t||!0===_;if(y&&(d!==zd||u!==zd)){var F,w=parseFloat(u)*vp,E=Math.sin(w),R=Math.cos(w);w=parseFloat(d)*vp,F=Math.cos(w),o=SA(v,o,E*F*-y),a=SA(v,a,-Math.sin(w)*-y),l=SA(v,l,R*F*-y+y)}g!==G_&&(b+="perspective("+g+Gd),(r||s)&&(b+="translate("+r+"%, "+s+"%) "),(x||o!==G_||a!==G_||l!==G_)&&(b+=l!==G_||x?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Gd),c!==zd&&(b+="rotate("+c+Gd),u!==zd&&(b+="rotateY("+u+Gd),d!==zd&&(b+="rotateX("+d+Gd),(h!==zd||f!==zd)&&(b+="skew("+h+", "+f+Gd),(1!==p||1!==m)&&(b+="scale("+p+", "+m+Gd),v.style[Li]=b||"translate(0, 0)"},Wbe=function(t,e){var x,w,E,R,F,n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.rotation,c=n.skewX,u=n.skewY,d=n.scaleX,h=n.scaleY,f=n.target,p=n.xOrigin,m=n.yOrigin,g=n.xOffset,_=n.yOffset,v=n.forceCSS,y=parseFloat(o),b=parseFloat(a);l=parseFloat(l),c=parseFloat(c),(u=parseFloat(u))&&(c+=u=parseFloat(u),l+=u),l||c?(l*=vp,c*=vp,x=Math.cos(l)*d,w=Math.sin(l)*d,E=Math.sin(l-c)*-h,R=Math.cos(l-c)*h,c&&(u*=vp,F=Math.tan(c-u),E*=F=Math.sqrt(1+F*F),R*=F,u&&(F=Math.tan(u),x*=F=Math.sqrt(1+F*F),w*=F)),x=$i(x),w=$i(w),E=$i(E),R=$i(R)):(x=d,R=h,w=E=0),(y&&!~(o+"").indexOf("px")||b&&!~(a+"").indexOf("px"))&&(y=ru(f,"x",o,"px"),b=ru(f,"y",a,"px")),(p||m||g||_)&&(y=$i(y+p-(p*x+m*E)+g),b=$i(b+m-(p*w+m*R)+_)),(r||s)&&(F=f.getBBox(),y=$i(y+r/100*F.width),b=$i(b+s/100*F.height)),f.setAttribute("transform",F="matrix("+x+","+w+","+E+","+R+","+y+","+b+")"),v&&(f.style[Li]=F)},jbe=function(t,e,n,r,s){var d,h,o=360,a=Ir(s),c=parseFloat(s)*(a&&~s.indexOf("rad")?Ud:1)-r,u=r+c+"deg";return a&&("short"===(d=s.split("_")[1])&&(c%=o)!=c%180&&(c+=c<0?o:-o),"cw"===d&&c<0?c=(c+o*N5)%o-~~(c/o)*o:"ccw"===d&&c>0&&(c=(c-o*N5)%o-~~(c/o)*o)),t._pt=h=new Fs(t._pt,e,n,r,c,Dbe),h.e=u,h.u="deg",t._props.push(n),h},J5=function(t,e){for(var n in e)t[n]=e[n];return t},$be=function(t,e,n){var a,l,c,u,d,h,p,r=J5({},n._gsap),o=n.style;for(l in r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),o[Li]=e,a=z_(n,1),H_(n,Li),n.setAttribute("transform",c)):(c=getComputedStyle(n)[Li],o[Li]=e,a=z_(n,1),o[Li]=c),Ql)(c=r[l])!==(u=a[l])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(l)<0&&(d=ts(c)!==(p=ts(u))?ru(n,l,c,p):parseFloat(c),h=parseFloat(u),t._pt=new Fs(t._pt,a,l,d,h-d,yA),t._pt.u=p||0,t._props.push(l));J5(a,r)};Ps("padding,margin,Width,Radius",function(i,t){var e="Top",n="Right",r="Bottom",s="Left",o=(t<3?[e,n,r,s]:[e+s,e+n,r+n,r+s]).map(function(a){return t<2?i+a:"border"+a+i});Lx[t>1?"border"+i:i]=function(a,l,c,u,d){var h,f;if(arguments.length<4)return h=o.map(function(p){return ec(a,p,c)}),5===(f=h.join(" ")).split(h[0]).length?h[0]:f;h=(u+"").split(" "),f={},o.forEach(function(p,m){return f[p]=h[m]=h[m]||h[(m-1)/2|0]}),a.init(l,f,d)}});var e4={name:"css",register:xA,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,s){var c,u,d,h,f,p,m,g,_,v,y,b,x,w,E,R,o=this._props,a=t.style,l=n.vars.startAt;for(m in gA||xA(),this.styles=this.styles||U5(t),R=this.styles.props,this.tween=n,e)if("autoRound"!==m&&(u=e[m],!ro[m]||!E5(m,e,n,r,t,s)))if(p=Lx[m],"function"==(f=typeof u)&&(f=typeof(u=u.call(n,r,t,s))),"string"===f&&~u.indexOf("random(")&&(u=L_(u)),p)p(this,t,m,u,n)&&(E=1);else if("--"===m.substr(0,2))c=(getComputedStyle(t).getPropertyValue(m)+"").trim(),u+="",eu.lastIndex=0,eu.test(c)||(g=ts(c),_=ts(u)),_?g!==_&&(c=ru(t,m,c,_)+_):g&&(u+=g),this.add(a,"setProperty",c,u,r,s,0,0,m),o.push(m),R.push(m,a[m]);else if("undefined"!==f){if(l&&m in l?(c="function"==typeof l[m]?l[m].call(n,r,t,s):l[m],Ir(c)&&~c.indexOf("random(")&&(c=L_(c)),ts(c+"")||(c+=no.units[m]||ts(ec(t,m))||""),"="===(c+"").charAt(1)&&(c=ec(t,m))):c=ec(t,m),h=parseFloat(c),(v="string"===f&&"="===u.charAt(1)&&u.substr(0,2))&&(u=u.substr(2)),d=parseFloat(u),m in Jl&&("autoAlpha"===m&&(1===h&&"hidden"===ec(t,"visibility")&&d&&(h=0),R.push("visibility",a.visibility),iu(this,a,"visibility",h?"inherit":"hidden",d?"inherit":"hidden",!d)),"scale"!==m&&"transform"!==m&&~(m=Jl[m]).indexOf(",")&&(m=m.split(",")[0])),y=m in Ql)if(this.styles.save(m),b||((x=t._gsap).renderTransform&&!e.parseTransform||z_(t,e.parseTransform),w=!1!==e.smoothOrigin&&x.smooth,(b=this._pt=new Fs(this._pt,a,Li,0,1,x.renderTransform,x,0,-1)).dep=1),"scale"===m)this._pt=new Fs(this._pt,x,"scaleY",x.scaleY,(v?up(x.scaleY,v+d):d)-x.scaleY||0,yA),this._pt.u=0,o.push("scaleY",m),m+="X";else{if("transformOrigin"===m){R.push(va,a[va]),u=Ube(u),x.svg?CA(t,u,0,w,0,this):((_=parseFloat(u.split(" ")[2])||0)!==x.zOrigin&&iu(this,x,"zOrigin",x.zOrigin,_),iu(this,a,m,Fx(c),Fx(u)));continue}if("svgOrigin"===m){CA(t,u,1,w,0,this);continue}if(m in X5){jbe(this,x,m,h,v?up(h,v+u):u);continue}if("smoothOrigin"===m){iu(this,x,"smooth",x.smooth,u);continue}if("force3D"===m){x[m]=u;continue}if("transform"===m){$be(this,u,t);continue}}else m in a||(m=bp(m)||m);if(y||(d||0===d)&&(h||0===h)&&!Tbe.test(u)&&m in a)d||(d=0),(g=(c+"").substr((h+"").length))!==(_=ts(u)||(m in no.units?no.units[m]:g))&&(h=ru(t,m,c,_)),this._pt=new Fs(this._pt,y?x:a,m,h,(v?up(h,v+d):d)-h,y||"px"!==_&&"zIndex"!==m||!1===e.autoRound?yA:Rbe),this._pt.u=_||0,g!==_&&"%"!==_&&(this._pt.b=c,this._pt.r=Abe);else if(m in a)Hbe.call(this,t,m,c,v?v+u:u);else{if(!(m in t)){qD(m,u);continue}this.add(t,m,c||t[m],v?v+u:u,r,s)}y||R.push(m,a[m]),o.push(m)}E&&k5(this)},render:function(t,e){if(e.tween._time||!_A())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:ec,aliases:Jl,getSetter:function(t,e,n){var r=Jl[e];return r&&r.indexOf(",")<0&&(e=r),e in Ql&&e!==va&&(t._gsap.x||ec(t,"x"))?n&&F5===n?"scale"===e?Pbe:Obe:(F5=n||{})&&("scale"===e?Lbe:Fbe):t.style&&!zD(t.style[e])?Ibe:~e.indexOf("-")?kbe:dA(t,e)},core:{_removeProperty:H_,_getMatrix:MA}};oo.utils.checkPrefix=bp,oo.core.getStyleSaver=U5,function(i,t,e,n){var r=Ps(i+","+t+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(s){Ql[s]=1});Ps(t,function(s){no.units[s]="deg",X5[s]=1}),Jl[r[13]]=i+","+t,Ps("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(s){var o=s.split(":");Jl[o[1]]=r[o[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),Ps("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){no.units[i]="px"}),oo.registerPlugin(e4);var ao=oo.registerPlugin(e4)||oo;const Yd=1e3,_s=1001,or=1003,Fi=1006,ou=1008,Xd=1009,q_=1012,au=1015,Sp=1016,Ep=1020,Go=1023,Kd=1026,Tp=1027,Y_=2300,Dp=2301,Ap=2400,Rp=2401,nc=3e3,Dn=3001,ic="srgb",Qd="srgb-linear",X_=35044,K_=35048;class lu{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const n=this._listeners[t.type];if(void 0!==n){t.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}}const Wr=[];for(let i=0;i<256;i++)Wr[i]=(i<16?"0":"")+i.toString(16);let F4=1234567;const Jd=Math.PI/180,Z_=180/Math.PI;function lo(){const i=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Wr[255&i]+Wr[i>>8&255]+Wr[i>>16&255]+Wr[i>>24&255]+"-"+Wr[255&t]+Wr[t>>8&255]+"-"+Wr[t>>16&15|64]+Wr[t>>24&255]+"-"+Wr[63&e|128]+Wr[e>>8&255]+"-"+Wr[e>>16&255]+Wr[e>>24&255]+Wr[255&n]+Wr[n>>8&255]+Wr[n>>16&255]+Wr[n>>24&255]).toLowerCase()}function qi(i,t,e){return Math.max(t,Math.min(e,i))}function BA(i,t){return(i%t+t)%t}function Q_(i,t,e){return(1-e)*i+e*t}function VA(i){return 0==(i&i-1)&&0!==i}function N4(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Wx(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}var awe=Object.freeze({__proto__:null,DEG2RAD:Jd,RAD2DEG:Z_,generateUUID:lo,clamp:qi,euclideanModulo:BA,mapLinear:function $xe(i,t,e,n,r){return n+(i-t)*(r-n)/(e-t)},inverseLerp:function qxe(i,t,e){return i!==t?(e-i)/(t-i):0},lerp:Q_,damp:function Yxe(i,t,e,n){return Q_(i,t,1-Math.exp(-e*n))},pingpong:function Xxe(i,t=1){return t-Math.abs(BA(i,2*t)-t)},smoothstep:function Kxe(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t))*i*(3-2*i)},smootherstep:function Zxe(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t))*i*i*(i*(6*i-15)+10)},randInt:function Qxe(i,t){return i+Math.floor(Math.random()*(t-i+1))},randFloat:function Jxe(i,t){return i+Math.random()*(t-i)},randFloatSpread:function ewe(i){return i*(.5-Math.random())},seededRandom:function twe(i){void 0!==i&&(F4=i);let t=F4+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function nwe(i){return i*Jd},radToDeg:function iwe(i){return i*Z_},isPowerOfTwo:VA,ceilPowerOfTwo:N4,floorPowerOfTwo:Wx,setQuaternionFromProperEuler:function rwe(i,t,e,n,r){const s=Math.cos,o=Math.sin,a=s(e/2),l=o(e/2),c=s((t+n)/2),u=o((t+n)/2),d=s((t-n)/2),h=o((t-n)/2),f=s((n-t)/2),p=o((n-t)/2);switch(r){case"XYX":i.set(a*u,l*d,l*h,a*c);break;case"YZY":i.set(l*h,a*u,l*d,a*c);break;case"ZXZ":i.set(l*d,l*h,a*u,a*c);break;case"XZX":i.set(a*u,l*p,l*f,a*c);break;case"YXY":i.set(l*f,a*u,l*p,a*c);break;case"ZYZ":i.set(l*p,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:function owe(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}},denormalize:function swe(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}});class me{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*n-o*r+t.x,this.y=s*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}me.prototype.isVector2=!0;class kr{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,s,o,a,l,c){const u=this.elements;return u[0]=t,u[1]=r,u[2]=a,u[3]=e,u[4]=s,u[5]=l,u[6]=n,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],u=n[4],d=n[7],h=n[2],f=n[5],p=n[8],m=r[0],g=r[3],_=r[6],v=r[1],y=r[4],b=r[7],x=r[2],w=r[5],E=r[8];return s[0]=o*m+a*v+l*x,s[3]=o*g+a*y+l*w,s[6]=o*_+a*b+l*E,s[1]=c*m+u*v+d*x,s[4]=c*g+u*y+d*w,s[7]=c*_+u*b+d*E,s[2]=h*m+f*v+p*x,s[5]=h*g+f*y+p*w,s[8]=h*_+f*b+p*E,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8];return e*o*u-e*a*c-n*s*u+n*a*l+r*s*c-r*o*l}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=u*o-a*c,h=a*l-u*s,f=c*s-o*l,p=e*d+n*h+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return t[0]=d*m,t[1]=(r*c-u*n)*m,t[2]=(a*n-r*o)*m,t[3]=h*m,t[4]=(u*e-r*l)*m,t[5]=(r*s-a*e)*m,t[6]=f*m,t[7]=(n*l-c*e)*m,t[8]=(o*e-n*s)*m,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+t,-r*c,r*l,-r*(-c*o+l*a)+a+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],u=r[7];return r[0]=e*s+n*l,r[3]=e*o+n*c,r[6]=e*a+n*u,r[1]=-n*s+e*l,r[4]=-n*o+e*c,r[7]=-n*a+e*u,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function B4(i){for(let t=i.length-1;t>=0;--t)if(i[t]>65535)return!0;return!1}function J_(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function eh(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function jx(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}kr.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const HA={[ic]:{[Qd]:eh},[Qd]:{[ic]:jx}},ya={legacyMode:!0,get workingColorSpace(){return Qd},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,t,e){if(this.legacyMode||t===e||!t||!e)return i;if(HA[t]&&void 0!==HA[t][e]){const n=HA[t][e];return i.r=n(i.r),i.g=n(i.g),i.b=n(i.b),i}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(i,t){return this.convert(i,this.workingColorSpace,t)},toWorkingColorSpace:function(i,t){return this.convert(i,t,this.workingColorSpace)}},V4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},xr={r:0,g:0,b:0},ba={h:0,s:0,l:0},$x={h:0,s:0,l:0};function UA(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+6*(t-i)*(2/3-e):i}function qx(i,t){return t.r=i.r,t.g=i.g,t.b=i.b,t}let kp,Le=(()=>{class i{constructor(e,n,r){return void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=ic){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,ya.toWorkingColorSpace(this,n),this}setRGB(e,n,r,s=Qd){return this.r=e,this.g=n,this.b=r,ya.toWorkingColorSpace(this,s),this}setHSL(e,n,r,s=Qd){if(e=BA(e,1),n=qi(n,0,1),r=qi(r,0,1),0===n)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,a=2*r-o;this.r=UA(a,o,e+1/3),this.g=UA(a,o,e),this.b=UA(a,o,e-1/3)}return ya.toWorkingColorSpace(this,s),this}setStyle(e,n=ic){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const l=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,ya.toWorkingColorSpace(this,n),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,ya.toWorkingColorSpace(this,n),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const c=parseFloat(o[1])/360,u=parseInt(o[2],10)/100,d=parseInt(o[3],10)/100;return r(o[4]),this.setHSL(c,u,d,n)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,ya.toWorkingColorSpace(this,n),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,ya.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=ic){const r=V4[e.toLowerCase()];return void 0!==r?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=eh(e.r),this.g=eh(e.g),this.b=eh(e.b),this}copyLinearToSRGB(e){return this.r=jx(e.r),this.g=jx(e.g),this.b=jx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ic){return ya.fromWorkingColorSpace(qx(this,xr),e),qi(255*xr.r,0,255)<<16^qi(255*xr.g,0,255)<<8^qi(255*xr.b,0,255)<<0}getHexString(e=ic){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Qd){ya.fromWorkingColorSpace(qx(this,xr),n);const r=xr.r,s=xr.g,o=xr.b,a=Math.max(r,s,o),l=Math.min(r,s,o);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const h=a-l;switch(u=d<=.5?h/(a+l):h/(2-a-l),a){case r:c=(s-o)/h+(s<o?6:0);break;case s:c=(o-r)/h+2;break;case o:c=(r-s)/h+4}c/=6}return e.h=c,e.s=u,e.l=d,e}getRGB(e,n=Qd){return ya.fromWorkingColorSpace(qx(this,xr),n),e.r=xr.r,e.g=xr.g,e.b=xr.b,e}getStyle(e=ic){return ya.fromWorkingColorSpace(qx(this,xr),e),e!==ic?`color(${e} ${xr.r} ${xr.g} ${xr.b})`:`rgb(${255*xr.r|0},${255*xr.g|0},${255*xr.b|0})`}offsetHSL(e,n,r){return this.getHSL(ba),ba.h+=e,ba.s+=n,ba.l+=r,this.setHSL(ba.h,ba.s,ba.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(ba),e.getHSL($x);const r=Q_(ba.h,$x.h,n),s=Q_(ba.s,$x.s,n),o=Q_(ba.l,$x.l,n);return this.setHSL(r,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return i.NAMES=V4,i})();Le.prototype.isColor=!0,Le.prototype.r=1,Le.prototype.g=1,Le.prototype.b=1;class th{static getDataURL(t){if(/^data:/i.test(t.src)||"undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===kp&&(kp=J_("canvas")),kp.width=t.width,kp.height=t.height;const n=kp.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=kp}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=J_("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*eh(s[o]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e[n]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*eh(e[n]/255)):eh(e[n]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class Op{constructor(t=null){this.uuid=lo(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(zA(r[o].isDataTexture?r[o].image:r[o]))}else s=zA(r);n.url=s}return e||(t.images[this.uuid]=n),n}}function zA(i){return"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&i instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&i instanceof ImageBitmap?th.getDataURL(i):i.data?{data:Array.prototype.slice.call(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Op.prototype.isSource=!0;let cwe=0,ns=(()=>{class i extends lu{constructor(e=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=_s,s=_s,o=Fi,a=ou,l=Go,c=Xd,u=1,d=nc){super(),Object.defineProperty(this,"id",{value:cwe++}),this.uuid=lo(),this.name="",this.source=new Op(e),this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new me(0,0),this.repeat=new me(1,1),this.center=new me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new kr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Yd:e.x=e.x-Math.floor(e.x);break;case _s:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Yd:e.y=e.y-Math.floor(e.y);break;case _s:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i})();ns.prototype.isTexture=!0;class Nn{constructor(t=0,e=0,n=0,r=1){this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,s;const l=t.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],p=l[9],m=l[2],g=l[6],_=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+m)<.1&&Math.abs(p+g)<.1&&Math.abs(c+f+_-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const y=(c+1)/2,b=(f+1)/2,x=(_+1)/2,w=(u+h)/4,E=(d+m)/4,R=(p+g)/4;return y>b&&y>x?y<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(y),r=w/n,s=E/n):b>x?b<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),n=w/r,s=R/r):x<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(x),n=E/s,r=R/s),this.set(n,r,s,e),this}let v=Math.sqrt((g-p)*(g-p)+(d-m)*(d-m)+(h-u)*(h-u));return Math.abs(v)<.001&&(v=1),this.x=(g-p)/v,this.y=(d-m)/v,this.z=(h-u)/v,this.w=Math.acos((c+f+_-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Nn.prototype.isVector4=!0;class co extends lu{constructor(t,e,n={}){super(),this.width=t,this.height=e,this.depth=1,this.scissor=new Nn(0,0,t,e),this.scissorTest=!1,this.viewport=new Nn(0,0,t,e),this.texture=new ns({width:t,height:e,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Fi,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){(this.width!==t||this.height!==e||this.depth!==n)&&(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0,this.texture.image=Object.assign({},t.texture.image),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}co.prototype.isWebGLRenderTarget=!0;class Yx extends ns{constructor(t=null,e=1,n=1,r=1){super(null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=or,this.minFilter=or,this.wrapR=_s,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Yx.prototype.isDataArrayTexture=!0,class uwe extends co{constructor(t,e,n){super(t,e),this.depth=n,this.texture=new Yx(null,t,e,n),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGLArrayRenderTarget=!0;class GA extends ns{constructor(t=null,e=1,n=1,r=1){super(null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=or,this.minFilter=or,this.wrapR=_s,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}GA.prototype.isData3DTexture=!0,class dwe extends co{constructor(t,e,n){super(t,e),this.depth=n,this.texture=new GA(null,t,e,n),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGL3DRenderTarget=!0,class hwe extends co{constructor(t,e,n,r={}){super(t,e,r);const s=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=t,this.texture[r].image.height=e,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class wr{constructor(t=0,e=0,n=0,r=1){this._x=t,this._y=e,this._z=n,this._w=r}static slerp(t,e,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,r)}static slerpFlat(t,e,n,r,s,o,a){let l=n[r+0],c=n[r+1],u=n[r+2],d=n[r+3];const h=s[o+0],f=s[o+1],p=s[o+2],m=s[o+3];if(0===a)return t[e+0]=l,t[e+1]=c,t[e+2]=u,void(t[e+3]=d);if(1===a)return t[e+0]=h,t[e+1]=f,t[e+2]=p,void(t[e+3]=m);if(d!==m||l!==h||c!==f||u!==p){let g=1-a;const _=l*h+c*f+u*p+d*m,v=_>=0?1:-1,y=1-_*_;if(y>Number.EPSILON){const x=Math.sqrt(y),w=Math.atan2(x,_*v);g=Math.sin(g*w)/x,a=Math.sin(a*w)/x}const b=a*v;if(l=l*g+h*b,c=c*g+f*b,u=u*g+p*b,d=d*g+m*b,g===1-a){const x=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=x,c*=x,u*=x,d*=x}}t[e]=l,t[e+1]=c,t[e+2]=u,t[e+3]=d}static multiplyQuaternionsFlat(t,e,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],u=n[r+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return t[e]=a*p+u*d+l*f-c*h,t[e+1]=l*p+u*h+c*d-a*f,t[e+2]=c*p+u*f+a*h-l*d,t[e+3]=u*p-a*d-l*h-c*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,r=t._y,s=t._z,o=t._order,a=Math.cos,l=Math.sin,c=a(n/2),u=a(r/2),d=a(s/2),h=l(n/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"YZX":this._x=h*u*d+c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d-h*f*p;break;case"XZY":this._x=h*u*d-c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],s=e[8],o=e[1],a=e[5],l=e[9],c=e[2],u=e[6],d=e[10],h=n+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(n>a&&n>d){const f=2*Math.sqrt(1+n-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-n-d);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-n-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(qi(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,s=t._z,o=t._w,a=e._x,l=e._y,c=e._z,u=e._w;return this._x=n*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-n*c,this._z=s*u+o*c+n*l-r*a,this._w=o*u-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-e;return this._w=f*o+e*this._w,this._x=f*n+e*this._x,this._y=f*r+e*this._y,this._z=f*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-e)*u)/c,h=Math.sin(e*u)/c;return this._w=o*d+this._w*h,this._x=n*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(s),n*Math.cos(s),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}wr.prototype.isQuaternion=!0;class V{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(H4.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(H4.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*r,this.y=s[1]*e+s[4]*n+s[7]*r,this.z=s[2]*e+s[5]*n+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,s=t.x,o=t.y,a=t.z,l=t.w,c=l*e+o*r-a*n,u=l*n+a*e-s*r,d=l*r+s*n-o*e,h=-s*e-o*n-a*r;return this.x=c*l+h*-s+u*-a-d*-o,this.y=u*l+h*-o+d*-s-c*-a,this.z=d*l+h*-a+c*-o-u*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r,this.y=s[1]*e+s[5]*n+s[9]*r,this.z=s[2]*e+s[6]*n+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,s=t.z,o=e.x,a=e.y,l=e.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return WA.copy(this).projectOnVector(t),this.sub(WA)}reflect(t){return this.sub(WA.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(qi(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}V.prototype.isVector3=!0;const WA=new V,H4=new wr;class uo{constructor(t=new V(1/0,1/0,1/0),e=new V(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=t.length;l<c;l+=3){const u=t[l],d=t[l+1],h=t[l+2];u<e&&(e=u),d<n&&(n=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(s,o,a),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=t.count;l<c;l++){const u=t.getX(l),d=t.getY(l),h=t.getZ(l);u<e&&(e=u),d<n&&(n=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(s,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=nh.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){const s=n.attributes.position;for(let o=0,a=s.count;o<a;o++)nh.fromBufferAttribute(s,o).applyMatrix4(t.matrixWorld),this.expandByPoint(nh)}else null===n.boundingBox&&n.computeBoundingBox(),jA.copy(n.boundingBox),jA.applyMatrix4(t.matrixWorld),this.union(jA);const r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,nh),nh.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(ev),Xx.subVectors(this.max,ev),Pp.subVectors(t.a,ev),Lp.subVectors(t.b,ev),Fp.subVectors(t.c,ev),cu.subVectors(Lp,Pp),uu.subVectors(Fp,Lp),ih.subVectors(Pp,Fp);let e=[0,-cu.z,cu.y,0,-uu.z,uu.y,0,-ih.z,ih.y,cu.z,0,-cu.x,uu.z,0,-uu.x,ih.z,0,-ih.x,-cu.y,cu.x,0,-uu.y,uu.x,0,-ih.y,ih.x,0];return!(!$A(e,Pp,Lp,Fp,Xx)||(e=[1,0,0,0,1,0,0,0,1],!$A(e,Pp,Lp,Fp,Xx)))&&(Kx.crossVectors(cu,uu),e=[Kx.x,Kx.y,Kx.z],$A(e,Pp,Lp,Fp,Xx))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return nh.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(nh).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(rc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),rc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),rc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),rc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),rc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),rc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),rc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),rc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(rc)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}uo.prototype.isBox3=!0;const rc=[new V,new V,new V,new V,new V,new V,new V,new V],nh=new V,jA=new uo,Pp=new V,Lp=new V,Fp=new V,cu=new V,uu=new V,ih=new V,ev=new V,Xx=new V,Kx=new V,rh=new V;function $A(i,t,e,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){rh.fromArray(i,s);const a=r.x*Math.abs(rh.x)+r.y*Math.abs(rh.y)+r.z*Math.abs(rh.z),l=t.dot(rh),c=e.dot(rh),u=n.dot(rh);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const fwe=new uo,U4=new V,Zx=new V,qA=new V;class du{constructor(t=new V,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):fwe.setFromPoints(t).getCenter(n);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){qA.subVectors(t,this.center);const e=qA.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),r=.5*(n-this.radius);this.center.add(qA.multiplyScalar(r/n)),this.radius+=r}return this}union(t){return!0===this.center.equals(t.center)?Zx.set(0,0,1).multiplyScalar(t.radius):Zx.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(U4.copy(t.center).add(Zx)),this.expandByPoint(U4.copy(t.center).sub(Zx)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const sc=new V,YA=new V,Qx=new V,hu=new V,XA=new V,Jx=new V,KA=new V;class sh{constructor(t=new V,e=new V(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,sc)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=sc.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(sc.copy(this.direction).multiplyScalar(e).add(this.origin),sc.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){YA.copy(t).add(e).multiplyScalar(.5),Qx.copy(e).sub(t).normalize(),hu.copy(this.origin).sub(YA);const s=.5*t.distanceTo(e),o=-this.direction.dot(Qx),a=hu.dot(this.direction),l=-hu.dot(Qx),c=hu.lengthSq(),u=Math.abs(1-o*o);let d,h,f,p;if(u>0)if(d=o*l-a,h=o*a-l,p=s*u,d>=0)if(h>=-p)if(h<=p){const m=1/u;d*=m,h*=m,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=p?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return n&&n.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(Qx).multiplyScalar(h).add(YA),f}intersectSphere(t,e){sc.subVectors(t.center,this.origin);const n=sc.dot(this.direction),r=sc.dot(sc)-n*n,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return a<0&&l<0?null:this.at(a<0?l:a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(n=(t.min.x-h.x)*c,r=(t.max.x-h.x)*c):(n=(t.max.x-h.x)*c,r=(t.min.x-h.x)*c),u>=0?(s=(t.min.y-h.y)*u,o=(t.max.y-h.y)*u):(s=(t.max.y-h.y)*u,o=(t.min.y-h.y)*u),n>o||s>r||((s>n||n!=n)&&(n=s),(o<r||r!=r)&&(r=o),d>=0?(a=(t.min.z-h.z)*d,l=(t.max.z-h.z)*d):(a=(t.max.z-h.z)*d,l=(t.min.z-h.z)*d),n>l||a>r)||((a>n||n!=n)&&(n=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return null!==this.intersectBox(t,sc)}intersectTriangle(t,e,n,r,s){XA.subVectors(e,t),Jx.subVectors(n,t),KA.crossVectors(XA,Jx);let a,o=this.direction.dot(KA);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}hu.subVectors(this.origin,t);const l=a*this.direction.dot(Jx.crossVectors(hu,Jx));if(l<0)return null;const c=a*this.direction.dot(XA.cross(hu));if(c<0||l+c>o)return null;const u=-a*hu.dot(KA);return u<0?null:this.at(u/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class lt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,s,o,a,l,c,u,d,h,f,p,m,g){const _=this.elements;return _[0]=t,_[4]=e,_[8]=n,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=u,_[10]=d,_[14]=h,_[3]=f,_[7]=p,_[11]=m,_[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new lt).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Np.setFromMatrixColumn(t,0).length(),s=1/Np.setFromMatrixColumn(t,1).length(),o=1/Np.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,r=t.y,s=t.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===t.order){const h=o*u,f=o*d,p=a*u,m=a*d;e[0]=l*u,e[4]=-l*d,e[8]=c,e[1]=f+p*c,e[5]=h-m*c,e[9]=-a*l,e[2]=m-h*c,e[6]=p+f*c,e[10]=o*l}else if("YXZ"===t.order){const h=l*u,f=l*d,p=c*u,m=c*d;e[0]=h+m*a,e[4]=p*a-f,e[8]=o*c,e[1]=o*d,e[5]=o*u,e[9]=-a,e[2]=f*a-p,e[6]=m+h*a,e[10]=o*l}else if("ZXY"===t.order){const h=l*u,f=l*d,p=c*u,m=c*d;e[0]=h-m*a,e[4]=-o*d,e[8]=p+f*a,e[1]=f+p*a,e[5]=o*u,e[9]=m-h*a,e[2]=-o*c,e[6]=a,e[10]=o*l}else if("ZYX"===t.order){const h=o*u,f=o*d,p=a*u,m=a*d;e[0]=l*u,e[4]=p*c-f,e[8]=h*c+m,e[1]=l*d,e[5]=m*c+h,e[9]=f*c-p,e[2]=-c,e[6]=a*l,e[10]=o*l}else if("YZX"===t.order){const h=o*l,f=o*c,p=a*l,m=a*c;e[0]=l*u,e[4]=m-h*d,e[8]=p*d+f,e[1]=d,e[5]=o*u,e[9]=-a*u,e[2]=-c*u,e[6]=f*d+p,e[10]=h-m*d}else if("XZY"===t.order){const h=o*l,f=o*c,p=a*l,m=a*c;e[0]=l*u,e[4]=-d,e[8]=c*u,e[1]=h*d+m,e[5]=o*u,e[9]=f*d-p,e[2]=p*d-f,e[6]=a*u,e[10]=m*d+h}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(pwe,t,mwe)}lookAt(t,e,n){const r=this.elements;return ho.subVectors(t,e),0===ho.lengthSq()&&(ho.z=1),ho.normalize(),fu.crossVectors(n,ho),0===fu.lengthSq()&&(1===Math.abs(n.z)?ho.x+=1e-4:ho.z+=1e-4,ho.normalize(),fu.crossVectors(n,ho)),fu.normalize(),ew.crossVectors(ho,fu),r[0]=fu.x,r[4]=ew.x,r[8]=ho.x,r[1]=fu.y,r[5]=ew.y,r[9]=ho.y,r[2]=fu.z,r[6]=ew.z,r[10]=ho.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],u=n[1],d=n[5],h=n[9],f=n[13],p=n[2],m=n[6],g=n[10],_=n[14],v=n[3],y=n[7],b=n[11],x=n[15],w=r[0],E=r[4],R=r[8],F=r[12],N=r[1],S=r[5],L=r[9],Y=r[13],I=r[2],z=r[6],D=r[10],P=r[14],O=r[3],q=r[7],K=r[11],Q=r[15];return s[0]=o*w+a*N+l*I+c*O,s[4]=o*E+a*S+l*z+c*q,s[8]=o*R+a*L+l*D+c*K,s[12]=o*F+a*Y+l*P+c*Q,s[1]=u*w+d*N+h*I+f*O,s[5]=u*E+d*S+h*z+f*q,s[9]=u*R+d*L+h*D+f*K,s[13]=u*F+d*Y+h*P+f*Q,s[2]=p*w+m*N+g*I+_*O,s[6]=p*E+m*S+g*z+_*q,s[10]=p*R+m*L+g*D+_*K,s[14]=p*F+m*Y+g*P+_*Q,s[3]=v*w+y*N+b*I+x*O,s[7]=v*E+y*S+b*z+x*q,s[11]=v*R+y*L+b*D+x*K,s[15]=v*F+y*Y+b*P+x*Q,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],s=t[12],o=t[1],a=t[5],l=t[9],c=t[13],u=t[2],d=t[6],h=t[10],f=t[14];return t[3]*(+s*l*d-r*c*d-s*a*h+n*c*h+r*a*f-n*l*f)+t[7]*(+e*l*f-e*c*h+s*o*h-r*o*f+r*c*u-s*l*u)+t[11]*(+e*c*d-e*a*f-s*o*d+n*o*f+s*a*u-n*c*u)+t[15]*(-r*a*u-e*l*d+e*a*h+r*o*d-n*o*h+n*l*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],g=t[14],_=t[15],v=d*g*c-m*h*c+m*l*f-a*g*f-d*l*_+a*h*_,y=p*h*c-u*g*c-p*l*f+o*g*f+u*l*_-o*h*_,b=u*m*c-p*d*c+p*a*f-o*m*f-u*a*_+o*d*_,x=p*d*l-u*m*l-p*a*h+o*m*h+u*a*g-o*d*g,w=e*v+n*y+r*b+s*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/w;return t[0]=v*E,t[1]=(m*h*s-d*g*s-m*r*f+n*g*f+d*r*_-n*h*_)*E,t[2]=(a*g*s-m*l*s+m*r*c-n*g*c-a*r*_+n*l*_)*E,t[3]=(d*l*s-a*h*s-d*r*c+n*h*c+a*r*f-n*l*f)*E,t[4]=y*E,t[5]=(u*g*s-p*h*s+p*r*f-e*g*f-u*r*_+e*h*_)*E,t[6]=(p*l*s-o*g*s-p*r*c+e*g*c+o*r*_-e*l*_)*E,t[7]=(o*h*s-u*l*s+u*r*c-e*h*c-o*r*f+e*l*f)*E,t[8]=b*E,t[9]=(p*d*s-u*m*s-p*n*f+e*m*f+u*n*_-e*d*_)*E,t[10]=(o*m*s-p*a*s+p*n*c-e*m*c-o*n*_+e*a*_)*E,t[11]=(u*a*s-o*d*s-u*n*c+e*d*c+o*n*f-e*a*f)*E,t[12]=x*E,t[13]=(u*m*r-p*d*r+p*n*h-e*m*h-u*n*g+e*d*g)*E,t[14]=(p*a*r-o*m*r-p*n*l+e*m*l+o*n*g-e*a*g)*E,t[15]=(o*d*r-u*a*r+u*n*l-e*d*l-o*n*h+e*a*h)*E,this}scale(t){const e=this.elements,n=t.x,r=t.y,s=t.z;return e[0]*=n,e[4]*=r,e[8]*=s,e[1]*=n,e[5]*=r,e[9]*=s,e[2]*=n,e[6]*=r,e[10]*=s,e[3]*=n,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),s=1-n,o=t.x,a=t.y,l=t.z,c=s*o,u=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+n,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,s,o){return this.set(1,n,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,s=e._x,o=e._y,a=e._z,l=e._w,c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,p=s*d,m=o*u,g=o*d,_=a*d,v=l*c,y=l*u,b=l*d,x=n.x,w=n.y,E=n.z;return r[0]=(1-(m+_))*x,r[1]=(f+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(h+_))*w,r[6]=(g+v)*w,r[7]=0,r[8]=(p+y)*E,r[9]=(g-v)*E,r[10]=(1-(h+m))*E,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let s=Np.set(r[0],r[1],r[2]).length();const o=Np.set(r[4],r[5],r[6]).length(),a=Np.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],xa.copy(this);const c=1/s,u=1/o,d=1/a;return xa.elements[0]*=c,xa.elements[1]*=c,xa.elements[2]*=c,xa.elements[4]*=u,xa.elements[5]*=u,xa.elements[6]*=u,xa.elements[8]*=d,xa.elements[9]*=d,xa.elements[10]*=d,e.setFromRotationMatrix(xa),n.x=s,n.y=o,n.z=a,this}makePerspective(t,e,n,r,s,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*s/(n-r),u=(e+t)/(e-t),d=(n+r)/(n-r),h=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=2*s/(e-t),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,r,s,o){const a=this.elements,l=1/(e-t),c=1/(n-r),u=1/(o-s),d=(e+t)*l,h=(n+r)*c,f=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}lt.prototype.isMatrix4=!0;const Np=new V,xa=new lt,pwe=new V(0,0,0),mwe=new V(1,1,1),fu=new V,ew=new V,ho=new V,z4=new lt,G4=new wr;class oh{constructor(t=0,e=0,n=0,r=oh.DefaultOrder){this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],d=r[2],h=r[6],f=r[10];switch(e){case"XYZ":this._y=Math.asin(qi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-qi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(qi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-qi(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(qi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-qi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return z4.makeRotationFromQuaternion(t),this.setFromRotationMatrix(z4,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return G4.setFromEuler(this),this.setFromQuaternion(G4,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}oh.prototype.isEuler=!0,oh.DefaultOrder="XYZ",oh.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class ZA{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let gwe=0;const W4=new V,Bp=new wr,oc=new lt,tw=new V,tv=new V,_we=new V,vwe=new wr,j4=new V(1,0,0),$4=new V(0,1,0),q4=new V(0,0,1),ywe={type:"added"},Y4={type:"removed"};class An extends lu{constructor(){super(),Object.defineProperty(this,"id",{value:gwe++}),this.uuid=lo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=An.DefaultUp.clone();const t=new V,e=new oh,n=new wr,r=new V(1,1,1);e._onChange(function s(){n.setFromEuler(e,!1)}),n._onChange(function o(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new lt},normalMatrix:{value:new kr}}),this.matrix=new lt,this.matrixWorld=new lt,this.matrixAutoUpdate=An.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ZA,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Bp.setFromAxisAngle(t,e),this.quaternion.multiply(Bp),this}rotateOnWorldAxis(t,e){return Bp.setFromAxisAngle(t,e),this.quaternion.premultiply(Bp),this}rotateX(t){return this.rotateOnAxis(j4,t)}rotateY(t){return this.rotateOnAxis($4,t)}rotateZ(t){return this.rotateOnAxis(q4,t)}translateOnAxis(t,e){return W4.copy(t).applyQuaternion(this.quaternion),this.position.add(W4.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(j4,t)}translateY(t){return this.translateOnAxis($4,t)}translateZ(t){return this.translateOnAxis(q4,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(oc.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?tw.copy(t):tw.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),tv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?oc.lookAt(tv,tw,this.up):oc.lookAt(tw,tv,this.up),this.quaternion.setFromRotationMatrix(oc),r&&(oc.extractRotation(r.matrixWorld),Bp.setFromRotationMatrix(oc),this.quaternion.premultiply(Bp.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(ywe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Y4)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Y4)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),oc.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),oc.multiply(t.parent.matrixWorld)),t.applyMatrix4(oc),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(t,e);if(void 0!==o)return o}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tv,t,_we),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tv,vwe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function s(a,l){return void 0===a[l.uuid]&&(a[l.uuid]=l.toJSON(t)),l.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(t.geometries,this.geometry);const a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++)s(t.shapes,l[c]);else s(t.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(t.materials,this.material[l]));r.material=a}else r.material=s(t.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++)r.animations.push(s(t.animations,this.animations[a]))}if(e){const a=o(t.geometries),l=o(t.materials),c=o(t.textures),u=o(t.images),d=o(t.shapes),h=o(t.skeletons),f=o(t.animations),p=o(t.nodes);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),u.length>0&&(n.images=u),d.length>0&&(n.shapes=d),h.length>0&&(n.skeletons=h),f.length>0&&(n.animations=f),p.length>0&&(n.nodes=p)}return n.object=r,n;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++)this.add(t.children[n].clone());return this}}An.DefaultUp=new V(0,1,0),An.DefaultMatrixAutoUpdate=!0,An.prototype.isObject3D=!0;const wa=new V,ac=new V,QA=new V,lc=new V,Vp=new V,Hp=new V,X4=new V,JA=new V,eR=new V,tR=new V;class ar{constructor(t=new V,e=new V,n=new V){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),wa.subVectors(t,e),r.cross(wa);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,n,r,s){wa.subVectors(r,e),ac.subVectors(n,e),QA.subVectors(t,e);const o=wa.dot(wa),a=wa.dot(ac),l=wa.dot(QA),c=ac.dot(ac),u=ac.dot(QA),d=o*c-a*a;if(0===d)return s.set(-2,-1,-1);const h=1/d,f=(c*l-a*u)*h,p=(o*u-a*l)*h;return s.set(1-f-p,p,f)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,lc),lc.x>=0&&lc.y>=0&&lc.x+lc.y<=1}static getUV(t,e,n,r,s,o,a,l){return this.getBarycoord(t,e,n,r,lc),l.set(0,0),l.addScaledVector(s,lc.x),l.addScaledVector(o,lc.y),l.addScaledVector(a,lc.z),l}static isFrontFacing(t,e,n,r){return wa.subVectors(n,e),ac.subVectors(t,e),wa.cross(ac).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return wa.subVectors(this.c,this.b),ac.subVectors(this.a,this.b),.5*wa.cross(ac).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ar.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ar.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,s){return ar.getUV(t,this.a,this.b,this.c,e,n,r,s)}containsPoint(t){return ar.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ar.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,s=this.c;let o,a;Vp.subVectors(r,n),Hp.subVectors(s,n),JA.subVectors(t,n);const l=Vp.dot(JA),c=Hp.dot(JA);if(l<=0&&c<=0)return e.copy(n);eR.subVectors(t,r);const u=Vp.dot(eR),d=Hp.dot(eR);if(u>=0&&d<=u)return e.copy(r);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),e.copy(n).addScaledVector(Vp,o);tR.subVectors(t,s);const f=Vp.dot(tR),p=Hp.dot(tR);if(p>=0&&f<=p)return e.copy(s);const m=f*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),e.copy(n).addScaledVector(Hp,a);const g=u*p-f*d;if(g<=0&&d-u>=0&&f-p>=0)return X4.subVectors(s,r),a=(d-u)/(d-u+(f-p)),e.copy(r).addScaledVector(X4,a);const _=1/(g+m+h);return o=m*_,a=h*_,e.copy(n).addScaledVector(Vp,o).addScaledVector(Hp,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let bwe=0;class Ci extends lu{constructor(){super(),Object.defineProperty(this,"id",{value:bwe++}),this.uuid=lo(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const s=r(t.textures),o=r(t.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const r=e.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}Ci.prototype.isMaterial=!0,Ci.fromType=function(){return null};class vs extends Ci{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new Le(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}vs.prototype.isMeshBasicMaterial=!0;const lr=new V,nw=new me;class Gn{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=X_,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Le),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new me),e[n++]=o.x,e[n++]=o.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new V),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Nn),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)nw.fromBufferAttribute(this,e),nw.applyMatrix3(t),this.setXY(e,nw.x,nw.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)lr.fromBufferAttribute(this,e),lr.applyMatrix3(t),this.setXYZ(e,lr.x,lr.y,lr.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)lr.fromBufferAttribute(this,e),lr.applyMatrix4(t),this.setXYZ(e,lr.x,lr.y,lr.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)lr.fromBufferAttribute(this,e),lr.applyNormalMatrix(t),this.setXYZ(e,lr.x,lr.y,lr.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)lr.fromBufferAttribute(this,e),lr.transformDirection(t),this.setXYZ(e,lr.x,lr.y,lr.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,s){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==X_&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}}Gn.prototype.isBufferAttribute=!0;class K4 extends Gn{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Z4 extends Gn{constructor(t,e,n){super(new Uint32Array(t),e,n)}}(class xwe extends Gn{constructor(t,e,n){super(new Uint16Array(t),e,n)}}).prototype.isFloat16BufferAttribute=!0;class ut extends Gn{constructor(t,e,n){super(new Float32Array(t),e,n)}}let wwe=0;const Wo=new lt,nR=new An,Up=new V,fo=new uo,nv=new uo,Or=new V;class Pt extends lu{constructor(){super(),Object.defineProperty(this,"id",{value:wwe++}),this.uuid=lo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(B4(t)?Z4:K4)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new kr).getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Wo.makeRotationFromQuaternion(t),this.applyMatrix4(Wo),this}rotateX(t){return Wo.makeRotationX(t),this.applyMatrix4(Wo),this}rotateY(t){return Wo.makeRotationY(t),this.applyMatrix4(Wo),this}rotateZ(t){return Wo.makeRotationZ(t),this.applyMatrix4(Wo),this}translate(t,e,n){return Wo.makeTranslation(t,e,n),this.applyMatrix4(Wo),this}scale(t,e,n){return Wo.makeScale(t,e,n),this.applyMatrix4(Wo),this}lookAt(t){return nR.lookAt(t),nR.updateMatrix(),this.applyMatrix4(nR.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Up).negate(),this.translate(Up.x,Up.y,Up.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ut(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new uo);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++)fo.setFromBufferAttribute(e[n]),this.morphTargetsRelative?(Or.addVectors(this.boundingBox.min,fo.min),this.boundingBox.expandByPoint(Or),Or.addVectors(this.boundingBox.max,fo.max),this.boundingBox.expandByPoint(Or)):(this.boundingBox.expandByPoint(fo.min),this.boundingBox.expandByPoint(fo.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new du);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new V,1/0);if(t){const n=this.boundingSphere.center;if(fo.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++)nv.setFromBufferAttribute(e[s]),this.morphTargetsRelative?(Or.addVectors(fo.min,nv.min),fo.expandByPoint(Or),Or.addVectors(fo.max,nv.max),fo.expandByPoint(Or)):(fo.expandByPoint(nv.min),fo.expandByPoint(nv.max));fo.getCenter(n);let r=0;for(let s=0,o=t.count;s<o;s++)Or.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(Or));if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Or.fromBufferAttribute(a,c),l&&(Up.fromBufferAttribute(t,c),Or.add(Up)),r=Math.max(r,n.distanceToSquared(Or))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,s=e.normal.array,o=e.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Gn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let N=0;N<a;N++)c[N]=new V,u[N]=new V;const d=new V,h=new V,f=new V,p=new me,m=new me,g=new me,_=new V,v=new V;function y(N,S,L){d.fromArray(r,3*N),h.fromArray(r,3*S),f.fromArray(r,3*L),p.fromArray(o,2*N),m.fromArray(o,2*S),g.fromArray(o,2*L),h.sub(d),f.sub(d),m.sub(p),g.sub(p);const Y=1/(m.x*g.y-g.x*m.y);!isFinite(Y)||(_.copy(h).multiplyScalar(g.y).addScaledVector(f,-m.y).multiplyScalar(Y),v.copy(f).multiplyScalar(m.x).addScaledVector(h,-g.x).multiplyScalar(Y),c[N].add(_),c[S].add(_),c[L].add(_),u[N].add(v),u[S].add(v),u[L].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let N=0,S=b.length;N<S;++N){const L=b[N],Y=L.start;for(let z=Y,D=Y+L.count;z<D;z+=3)y(n[z+0],n[z+1],n[z+2])}const x=new V,w=new V,E=new V,R=new V;function F(N){E.fromArray(s,3*N),R.copy(E);const S=c[N];x.copy(S),x.sub(E.multiplyScalar(E.dot(S))).normalize(),w.crossVectors(R,S);const Y=w.dot(u[N])<0?-1:1;l[4*N]=x.x,l[4*N+1]=x.y,l[4*N+2]=x.z,l[4*N+3]=Y}for(let N=0,S=b.length;N<S;++N){const L=b[N],Y=L.start;for(let z=Y,D=Y+L.count;z<D;z+=3)F(n[z+0]),F(n[z+1]),F(n[z+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Gn(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let h=0,f=n.count;h<f;h++)n.setXYZ(h,0,0,0);const r=new V,s=new V,o=new V,a=new V,l=new V,c=new V,u=new V,d=new V;if(t)for(let h=0,f=t.count;h<f;h+=3){const p=t.getX(h+0),m=t.getX(h+1),g=t.getX(h+2);r.fromBufferAttribute(e,p),s.fromBufferAttribute(e,m),o.fromBufferAttribute(e,g),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),a.add(u),l.add(u),c.add(u),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,f=e.count;h<f;h+=3)r.fromBufferAttribute(e,h+0),s.fromBufferAttribute(e,h+1),o.fromBufferAttribute(e,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),n.setXYZ(h+0,u.x,u.y,u.z),n.setXYZ(h+1,u.x,u.y,u.z),n.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===t.attributes[r])continue;const o=n[r].array,a=t.attributes[r],l=a.array,c=a.itemSize*e,u=Math.min(l.length,o.length-c);for(let d=0,h=c;d<u;d++,h++)o[h]=l[d]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Or.fromBufferAttribute(t,e),Or.normalize(),t.setXYZ(e,Or.x,Or.y,Or.z)}toNonIndexed(){function t(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,p=0;for(let m=0,g=l.length;m<g;m++){f=a.isInterleavedBufferAttribute?l[m]*a.data.stride+a.offset:l[m]*u;for(let _=0;_<u;_++)h[p++]=c[f++]}return new Gn(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Pt,n=this.index.array,r=this.attributes;for(const a in r){const c=t(r[a],n);e.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=t(c[u],n);l.push(f)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];e.addGroup(c.start,c.count,c.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(t[c]=l[c]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const l in n)t.data.attributes[l]=n[l].toJSON(t.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(t.data));u.length>0&&(r[l]=u,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const c in r)this.setAttribute(c,r[c].clone(e));const s=t.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(e));this.morphAttributes[c]=u}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=t.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Pt.prototype.isBufferGeometry=!0;const Q4=new lt,zp=new sh,iR=new du,pu=new V,mu=new V,gu=new V,rR=new V,sR=new V,oR=new V,iw=new V,rw=new V,sw=new V,ow=new me,aw=new me,lw=new me,aR=new V,cw=new V;class Yi extends An{constructor(t=new Pt,e=new vs){super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),iR.copy(n.boundingSphere),iR.applyMatrix4(s),!1===t.ray.intersectsSphere(iR))||(Q4.copy(s).invert(),zp.copy(t.ray).applyMatrix4(Q4),null!==n.boundingBox&&!1===zp.intersectsBox(n.boundingBox)))return;let o;if(n.isBufferGeometry){const a=n.index,l=n.attributes.position,c=n.morphAttributes.position,u=n.morphTargetsRelative,d=n.attributes.uv,h=n.attributes.uv2,f=n.groups,p=n.drawRange;if(null!==a)if(Array.isArray(r))for(let m=0,g=f.length;m<g;m++){const _=f[m],v=r[_.materialIndex];for(let x=Math.max(_.start,p.start),w=Math.min(a.count,Math.min(_.start+_.count,p.start+p.count));x<w;x+=3){const E=a.getX(x),R=a.getX(x+1),F=a.getX(x+2);o=uw(this,v,t,zp,l,c,u,d,h,E,R,F),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=_.materialIndex,e.push(o))}}else for(let _=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);_<v;_+=3){const y=a.getX(_),b=a.getX(_+1),x=a.getX(_+2);o=uw(this,r,t,zp,l,c,u,d,h,y,b,x),o&&(o.faceIndex=Math.floor(_/3),e.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let m=0,g=f.length;m<g;m++){const _=f[m],v=r[_.materialIndex];for(let x=Math.max(_.start,p.start),w=Math.min(l.count,Math.min(_.start+_.count,p.start+p.count));x<w;x+=3)o=uw(this,v,t,zp,l,c,u,d,h,x,x+1,x+2),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=_.materialIndex,e.push(o))}else for(let _=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);_<v;_+=3)o=uw(this,r,t,zp,l,c,u,d,h,_,_+1,_+2),o&&(o.faceIndex=Math.floor(_/3),e.push(o))}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function uw(i,t,e,n,r,s,o,a,l,c,u,d){pu.fromBufferAttribute(r,c),mu.fromBufferAttribute(r,u),gu.fromBufferAttribute(r,d);const h=i.morphTargetInfluences;if(s&&h){iw.set(0,0,0),rw.set(0,0,0),sw.set(0,0,0);for(let p=0,m=s.length;p<m;p++){const g=h[p],_=s[p];0!==g&&(rR.fromBufferAttribute(_,c),sR.fromBufferAttribute(_,u),oR.fromBufferAttribute(_,d),o?(iw.addScaledVector(rR,g),rw.addScaledVector(sR,g),sw.addScaledVector(oR,g)):(iw.addScaledVector(rR.sub(pu),g),rw.addScaledVector(sR.sub(mu),g),sw.addScaledVector(oR.sub(gu),g)))}pu.add(iw),mu.add(rw),gu.add(sw)}i.isSkinnedMesh&&(i.boneTransform(c,pu),i.boneTransform(u,mu),i.boneTransform(d,gu));const f=function Mwe(i,t,e,n,r,s,o,a){let l;if(l=1===t.side?n.intersectTriangle(o,s,r,!0,a):n.intersectTriangle(r,s,o,2!==t.side,a),null===l)return null;cw.copy(a),cw.applyMatrix4(i.matrixWorld);const c=e.ray.origin.distanceTo(cw);return c<e.near||c>e.far?null:{distance:c,point:cw.clone(),object:i}}(i,t,e,n,pu,mu,gu,aR);if(f){a&&(ow.fromBufferAttribute(a,c),aw.fromBufferAttribute(a,u),lw.fromBufferAttribute(a,d),f.uv=ar.getUV(aR,pu,mu,gu,ow,aw,lw,new me)),l&&(ow.fromBufferAttribute(l,c),aw.fromBufferAttribute(l,u),lw.fromBufferAttribute(l,d),f.uv2=ar.getUV(aR,pu,mu,gu,ow,aw,lw,new me));const p={a:c,b:u,c:d,normal:new V,materialIndex:0};ar.getNormal(pu,mu,gu,p.normal),f.face=p}return f}Yi.prototype.isMesh=!0;class ah extends Pt{constructor(t=1,e=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;function p(m,g,_,v,y,b,x,w,E,R,F){const N=b/E,S=x/R,L=b/2,Y=x/2,I=w/2,z=E+1,D=R+1;let P=0,O=0;const q=new V;for(let K=0;K<D;K++){const Q=K*S-Y;for(let j=0;j<z;j++)q[m]=(j*N-L)*v,q[g]=Q*y,q[_]=I,c.push(q.x,q.y,q.z),q[m]=0,q[g]=0,q[_]=w>0?1:-1,u.push(q.x,q.y,q.z),d.push(j/E),d.push(1-K/R),P+=1}for(let K=0;K<R;K++)for(let Q=0;Q<E;Q++){const we=h+Q+z*(K+1),fe=h+(Q+1)+z*(K+1),_e=h+(Q+1)+z*K;l.push(h+Q+z*K,we,_e),l.push(we,fe,_e),O+=6}a.addGroup(f,O,F),f+=O,h+=P}p("z","y","x",-1,-1,n,e,t,o,s,0),p("z","y","x",1,-1,n,e,-t,o,s,1),p("x","z","y",1,1,t,n,e,r,o,2),p("x","z","y",1,-1,t,n,-e,r,o,3),p("x","y","z",1,-1,t,e,n,r,s,4),p("x","y","z",-1,-1,t,e,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new ut(c,3)),this.setAttribute("normal",new ut(u,3)),this.setAttribute("uv",new ut(d,2))}static fromJSON(t){return new ah(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Gp(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const r=i[e][n];t[e][n]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return t}function is(i){const t={};for(let e=0;e<i.length;e++){const n=Gp(i[e]);for(const r in n)t[r]=n[r]}return t}const Cwe={clone:Gp,merge:is};class Ma extends Ci{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Gp(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;e.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}Ma.prototype.isShaderMaterial=!0;class dw extends An{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new lt,this.projectionMatrix=new lt,this.projectionMatrixInverse=new lt}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}dw.prototype.isCamera=!0;class Mr extends dw{constructor(t=50,e=1,n=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Z_*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Jd*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Z_*Math.atan(Math.tan(.5*Jd*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,s,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Jd*this.fov)/this.zoom,n=2*e,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,e-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;0!==a&&(s+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}Mr.prototype.isPerspectiveCamera=!0;class lR extends An{constructor(t,e,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new Mr(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new V(1,0,0)),this.add(r);const s=new Mr(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new V(-1,0,0)),this.add(s);const o=new Mr(90,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new V(0,1,0)),this.add(o);const a=new Mr(90,1,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new V(0,-1,0)),this.add(a);const l=new Mr(90,1,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new V(0,0,1)),this.add(l);const c=new Mr(90,1,t,e);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new V(0,0,-1)),this.add(c)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,o,a,l,c]=this.children,u=t.getRenderTarget(),d=t.outputEncoding,h=t.toneMapping,f=t.xr.enabled;t.outputEncoding=nc,t.toneMapping=0,t.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,s),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,l),n.texture.generateMipmaps=p,t.setRenderTarget(n,5),t.render(e,c),t.setRenderTarget(u),t.outputEncoding=d,t.toneMapping=h,t.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class iv extends ns{constructor(t,e,n,r,s,o,a,l,c,u){super(t=void 0!==t?t:[],e=void 0!==e?e:301,n,r,s,o,a,l,c,u),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}iv.prototype.isCubeTexture=!0;class J4 extends co{constructor(t,e={}){super(t,t,e);const n={width:t,height:t,depth:1};this.texture=new iv([n,n,n,n,n,n],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Fi}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new ah(5,5,5),s=new Ma({name:"CubemapFromEquirect",uniforms:Gp(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=e;const o=new Yi(r,s),a=e.minFilter;return e.minFilter===ou&&(e.minFilter=Fi),new lR(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(s)}}J4.prototype.isWebGLCubeRenderTarget=!0;const cR=new V,Twe=new V,Dwe=new kr;class cc{constructor(t=new V(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=cR.subVectors(n,e).cross(Twe.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(cR),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(n).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Dwe.getNormalMatrix(t),r=this.coplanarPoint(cR).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}cc.prototype.isPlane=!0;const $p=new du,hw=new V;class fw{constructor(t=new cc,e=new cc,n=new cc,r=new cc,s=new cc,o=new cc){this.planes=[t,e,n,r,s,o]}set(t,e,n,r,s,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5],u=n[6],d=n[7],h=n[8],f=n[9],p=n[10],m=n[11],g=n[12],_=n[13],v=n[14],y=n[15];return e[0].setComponents(a-r,d-l,m-h,y-g).normalize(),e[1].setComponents(a+r,d+l,m+h,y+g).normalize(),e[2].setComponents(a+s,d+c,m+f,y+_).normalize(),e[3].setComponents(a-s,d-c,m-f,y-_).normalize(),e[4].setComponents(a-o,d-u,m-p,y-v).normalize(),e[5].setComponents(a+o,d+u,m+p,y+v).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),$p.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere($p)}intersectsSprite(t){return $p.center.set(0,0,0),$p.radius=.7071067811865476,$p.applyMatrix4(t.matrixWorld),this.intersectsSphere($p)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(hw.x=r.normal.x>0?t.max.x:t.min.x,hw.y=r.normal.y>0?t.max.y:t.min.y,hw.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(hw)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function eW(){let i=null,t=!1,e=null,n=null;function r(s,o){e(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==e&&(n=i.requestAnimationFrame(r),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){i=s}}}function Awe(i,t){const e=t.isWebGL2,n=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),n.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=n.get(c);u&&(i.deleteBuffer(u.buffer),n.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const h=n.get(c);return void((!h||h.version<c.version)&&n.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=n.get(c);void 0===d?n.set(c,function r(c,u){const d=c.array,h=c.usage,f=i.createBuffer();let p;if(i.bindBuffer(u,f),i.bufferData(u,d,h),c.onUploadCallback(),d instanceof Float32Array)p=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!e)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=5131}else p=5123;else if(d instanceof Int16Array)p=5122;else if(d instanceof Uint32Array)p=5125;else if(d instanceof Int32Array)p=5124;else if(d instanceof Int8Array)p=5120;else if(d instanceof Uint8Array)p=5121;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);p=5121}return{buffer:f,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function s(c,u,d){const h=u.array,f=u.updateRange;i.bindBuffer(d,c),-1===f.count?i.bufferSubData(d,0,h):(e?i.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):i.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}(d.buffer,c,u),d.version=c.version)}}}class qp extends Pt{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const s=t/2,o=e/2,a=Math.floor(n),l=Math.floor(r),c=a+1,u=l+1,d=t/a,h=e/l,f=[],p=[],m=[],g=[];for(let _=0;_<u;_++){const v=_*h-o;for(let y=0;y<c;y++)p.push(y*d-s,-v,0),m.push(0,0,1),g.push(y/a),g.push(1-_/l)}for(let _=0;_<l;_++)for(let v=0;v<a;v++){const b=v+c*(_+1),x=v+1+c*(_+1),w=v+1+c*_;f.push(v+c*_,b,w),f.push(b,x,w)}this.setIndex(f),this.setAttribute("position",new ut(p,3)),this.setAttribute("normal",new ut(m,3)),this.setAttribute("uv",new ut(g,2))}static fromJSON(t){return new qp(t.width,t.height,t.widthSegments,t.heightSegments)}}const ln={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},We={common:{diffuse:{value:new Le(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new kr},uv2Transform:{value:new kr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new me(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Le(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Le(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new kr}},sprite:{diffuse:{value:new Le(16777215)},opacity:{value:1},center:{value:new me(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new kr}}},rl={basic:{uniforms:is([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.fog]),vertexShader:ln.meshbasic_vert,fragmentShader:ln.meshbasic_frag},lambert:{uniforms:is([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.fog,We.lights,{emissive:{value:new Le(0)}}]),vertexShader:ln.meshlambert_vert,fragmentShader:ln.meshlambert_frag},phong:{uniforms:is([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.fog,We.lights,{emissive:{value:new Le(0)},specular:{value:new Le(1118481)},shininess:{value:30}}]),vertexShader:ln.meshphong_vert,fragmentShader:ln.meshphong_frag},standard:{uniforms:is([We.common,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.roughnessmap,We.metalnessmap,We.fog,We.lights,{emissive:{value:new Le(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag},toon:{uniforms:is([We.common,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.gradientmap,We.fog,We.lights,{emissive:{value:new Le(0)}}]),vertexShader:ln.meshtoon_vert,fragmentShader:ln.meshtoon_frag},matcap:{uniforms:is([We.common,We.bumpmap,We.normalmap,We.displacementmap,We.fog,{matcap:{value:null}}]),vertexShader:ln.meshmatcap_vert,fragmentShader:ln.meshmatcap_frag},points:{uniforms:is([We.points,We.fog]),vertexShader:ln.points_vert,fragmentShader:ln.points_frag},dashed:{uniforms:is([We.common,We.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ln.linedashed_vert,fragmentShader:ln.linedashed_frag},depth:{uniforms:is([We.common,We.displacementmap]),vertexShader:ln.depth_vert,fragmentShader:ln.depth_frag},normal:{uniforms:is([We.common,We.bumpmap,We.normalmap,We.displacementmap,{opacity:{value:1}}]),vertexShader:ln.meshnormal_vert,fragmentShader:ln.meshnormal_frag},sprite:{uniforms:is([We.sprite,We.fog]),vertexShader:ln.sprite_vert,fragmentShader:ln.sprite_frag},background:{uniforms:{uvTransform:{value:new kr},t2D:{value:null}},vertexShader:ln.background_vert,fragmentShader:ln.background_frag},cube:{uniforms:is([We.envmap,{opacity:{value:1}}]),vertexShader:ln.cube_vert,fragmentShader:ln.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ln.equirect_vert,fragmentShader:ln.equirect_frag},distanceRGBA:{uniforms:is([We.common,We.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ln.distanceRGBA_vert,fragmentShader:ln.distanceRGBA_frag},shadow:{uniforms:is([We.lights,We.fog,{color:{value:new Le(0)},opacity:{value:1}}]),vertexShader:ln.shadow_vert,fragmentShader:ln.shadow_frag}};function SCe(i,t,e,n,r,s){const o=new Le(0);let l,c,a=!0===r?0:1,u=null,d=0,h=null;function p(m,g){e.buffers.color.setClear(m.r,m.g,m.b,g,s)}return{getClearColor:function(){return o},setClearColor:function(m,g=1){o.set(m),a=g,p(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(m){a=m,p(o,a)},render:function f(m,g){let _=!1,v=!0===g.isScene?g.background:null;v&&v.isTexture&&(v=t.get(v));const y=i.xr,b=y.getSession&&y.getSession();b&&"additive"===b.environmentBlendMode&&(v=null),null===v?p(o,a):v&&v.isColor&&(p(v,1),_=!0),(i.autoClear||_)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),v&&(v.isCubeTexture||306===v.mapping)?(void 0===c&&(c=new Yi(new ah(1,1,1),new Ma({name:"BackgroundCubeMaterial",uniforms:Gp(rl.cube.uniforms),vertexShader:rl.cube.vertexShader,fragmentShader:rl.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(x,w,E){this.matrixWorld.copyPosition(E.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,(u!==v||d!==v.version||h!==i.toneMapping)&&(c.material.needsUpdate=!0,u=v,d=v.version,h=i.toneMapping),m.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new Yi(new qp(2,2),new Ma({name:"BackgroundMaterial",uniforms:Gp(rl.background.uniforms),vertexShader:rl.background.vertexShader,fragmentShader:rl.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(l)),l.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),(u!==v||d!==v.version||h!==i.toneMapping)&&(l.material.needsUpdate=!0,u=v,d=v.version,h=i.toneMapping),m.unshift(l,l.geometry,l.material,0,0,null))}}}function ECe(i,t,e,n){const r=i.getParameter(34921),s=n.isWebGL2?null:t.get("OES_vertex_array_object"),o=n.isWebGL2||null!==s,a={},l=g(null);let c=l,u=!1;function f(I){return n.isWebGL2?i.bindVertexArray(I):s.bindVertexArrayOES(I)}function p(I){return n.isWebGL2?i.deleteVertexArray(I):s.deleteVertexArrayOES(I)}function g(I){const z=[],D=[],P=[];for(let O=0;O<r;O++)z[O]=0,D[O]=0,P[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:D,attributeDivisors:P,object:I,attributes:{},index:null}}function y(){const I=c.newAttributes;for(let z=0,D=I.length;z<D;z++)I[z]=0}function b(I){x(I,0)}function x(I,z){const P=c.enabledAttributes,O=c.attributeDivisors;c.newAttributes[I]=1,0===P[I]&&(i.enableVertexAttribArray(I),P[I]=1),O[I]!==z&&((n.isWebGL2?i:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](I,z),O[I]=z)}function w(){const I=c.newAttributes,z=c.enabledAttributes;for(let D=0,P=z.length;D<P;D++)z[D]!==I[D]&&(i.disableVertexAttribArray(D),z[D]=0)}function E(I,z,D,P,O,q){!0!==n.isWebGL2||5124!==D&&5125!==D?i.vertexAttribPointer(I,z,D,P,O,q):i.vertexAttribIPointer(I,z,D,O,q)}function L(){Y(),u=!0,c!==l&&(c=l,f(c.object))}function Y(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function d(I,z,D,P,O){let q=!1;if(o){const K=function m(I,z,D){const P=!0===D.wireframe;let O=a[I.id];void 0===O&&(O={},a[I.id]=O);let q=O[z.id];void 0===q&&(q={},O[z.id]=q);let K=q[P];return void 0===K&&(K=g(function h(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}()),q[P]=K),K}(P,D,z);c!==K&&(c=K,f(c.object)),q=function _(I,z){const D=c.attributes,P=I.attributes;let O=0;for(const q in P){const K=D[q],Q=P[q];if(void 0===K||K.attribute!==Q||K.data!==Q.data)return!0;O++}return c.attributesNum!==O||c.index!==z}(P,O),q&&function v(I,z){const D={},P=I.attributes;let O=0;for(const q in P){const K=P[q],Q={};Q.attribute=K,K.data&&(Q.data=K.data),D[q]=Q,O++}c.attributes=D,c.attributesNum=O,c.index=z}(P,O)}else{const K=!0===z.wireframe;(c.geometry!==P.id||c.program!==D.id||c.wireframe!==K)&&(c.geometry=P.id,c.program=D.id,c.wireframe=K,q=!0)}!0===I.isInstancedMesh&&(q=!0),null!==O&&e.update(O,34963),(q||u)&&(u=!1,function R(I,z,D,P){if(!1===n.isWebGL2&&(I.isInstancedMesh||P.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;y();const O=P.attributes,q=D.getAttributes(),K=z.defaultAttributeValues;for(const Q in q){const j=q[Q];if(j.location>=0){let we=O[Q];if(void 0===we&&("instanceMatrix"===Q&&I.instanceMatrix&&(we=I.instanceMatrix),"instanceColor"===Q&&I.instanceColor&&(we=I.instanceColor)),void 0!==we){const fe=we.normalized,_e=we.itemSize,re=e.get(we);if(void 0===re)continue;const Ae=re.buffer,Oe=re.type,tt=re.bytesPerElement;if(we.isInterleavedBufferAttribute){const ye=we.data,vt=ye.stride,ue=we.offset;if(ye.isInstancedInterleavedBuffer){for(let pe=0;pe<j.locationSize;pe++)x(j.location+pe,ye.meshPerAttribute);!0!==I.isInstancedMesh&&void 0===P._maxInstanceCount&&(P._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let pe=0;pe<j.locationSize;pe++)b(j.location+pe);i.bindBuffer(34962,Ae);for(let pe=0;pe<j.locationSize;pe++)E(j.location+pe,_e/j.locationSize,Oe,fe,vt*tt,(ue+_e/j.locationSize*pe)*tt)}else{if(we.isInstancedBufferAttribute){for(let ye=0;ye<j.locationSize;ye++)x(j.location+ye,we.meshPerAttribute);!0!==I.isInstancedMesh&&void 0===P._maxInstanceCount&&(P._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let ye=0;ye<j.locationSize;ye++)b(j.location+ye);i.bindBuffer(34962,Ae);for(let ye=0;ye<j.locationSize;ye++)E(j.location+ye,_e/j.locationSize,Oe,fe,_e*tt,_e/j.locationSize*ye*tt)}}else if(void 0!==K){const fe=K[Q];if(void 0!==fe)switch(fe.length){case 2:i.vertexAttrib2fv(j.location,fe);break;case 3:i.vertexAttrib3fv(j.location,fe);break;case 4:i.vertexAttrib4fv(j.location,fe);break;default:i.vertexAttrib1fv(j.location,fe)}}}}w()}(I,z,D,P),null!==O&&i.bindBuffer(34963,e.get(O).buffer))},reset:L,resetDefaultState:Y,dispose:function F(){L();for(const I in a){const z=a[I];for(const D in z){const P=z[D];for(const O in P)p(P[O].object),delete P[O];delete z[D]}delete a[I]}},releaseStatesOfGeometry:function N(I){if(void 0===a[I.id])return;const z=a[I.id];for(const D in z){const P=z[D];for(const O in P)p(P[O].object),delete P[O];delete z[D]}delete a[I.id]},releaseStatesOfProgram:function S(I){for(const z in a){const D=a[z];if(void 0===D[I.id])continue;const P=D[I.id];for(const O in P)p(P[O].object),delete P[O];delete D[I.id]}},initAttributes:y,enableAttribute:b,disableUnusedAttributes:w}}function TCe(i,t,e,n){const r=n.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,u){i.drawArrays(s,c,u),e.update(u,s,1)},this.renderInstances=function l(c,u,d){if(0===d)return;let h,f;if(r)h=i,f="drawArraysInstanced";else if(h=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](s,c,u,d),e.update(u,s,d)}}function DCe(i,t,e){let n;function s(E){if("highp"===E){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return"mediump"===E&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&i instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&i instanceof WebGL2ComputeRenderingContext;let a=void 0!==e.precision?e.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||t.has("WEBGL_draw_buffers"),u=!0===e.logarithmicDepthBuffer,d=i.getParameter(34930),h=i.getParameter(35660),f=i.getParameter(3379),p=i.getParameter(34076),m=i.getParameter(34921),g=i.getParameter(36347),_=i.getParameter(36348),v=i.getParameter(36349),y=h>0,b=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){const E=t.get("EXT_texture_filter_anisotropic");n=i.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:_,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?i.getParameter(36183):0}}function ACe(i){const t=this;let e=null,n=0,r=!1,s=!1;const o=new cc,a=new kr,l={value:null,needsUpdate:!1};function c(){l.value!==e&&(l.value=e,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function u(d,h,f,p){const m=null!==d?d.length:0;let g=null;if(0!==m){if(g=l.value,!0!==p||null===g){const _=f+4*m,v=h.matrixWorldInverse;a.getNormalMatrix(v),(null===g||g.length<_)&&(g=new Float32Array(_));for(let y=0,b=f;y!==m;++y,b+=4)o.copy(d[y]).applyMatrix4(v,a),o.normal.toArray(g,b),g[b+3]=o.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=m,t.numIntersection=0,g}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const p=0!==d.length||h||0!==n||r;return r=h,e=u(d,f,0),n=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,h,f){const p=d.clippingPlanes,m=d.clipIntersection,g=d.clipShadows,_=i.get(d);if(!r||null===p||0===p.length||s&&!g)s?u(null):c();else{const v=s?0:n,y=4*v;let b=_.clippingState||null;l.value=b,b=u(p,h,y,f);for(let x=0;x!==y;++x)b[x]=e[x];_.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=v}}}function RCe(i){let t=new WeakMap;function e(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=t.get(a);void 0!==l&&(t.delete(a),l.dispose())}return{get:function n(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(t.has(o))return e(t.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new J4(l.height/2);return c.fromEquirectangularTexture(i,o),t.set(o,c),o.addEventListener("dispose",r),e(c.texture,o.mapping)}return null}}}return o},dispose:function s(){t=new WeakMap}}}rl.physical={uniforms:is([rl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new me(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Le(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Le(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Le(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag};class rv extends dw{constructor(t=-1,e=1,n=1,r=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-t,o=n+t,a=r+e,l=r-e;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}rv.prototype.isOrthographicCamera=!0;const tW=[.125,.215,.35,.446,.526,.582],uR=new rv,nW=new Le;let dR=null;const ch=(1+Math.sqrt(5))/2,Xp=1/ch,iW=[new V(1,1,1),new V(-1,1,1),new V(1,1,-1),new V(-1,1,-1),new V(0,ch,Xp),new V(0,ch,-Xp),new V(Xp,0,ch),new V(-Xp,0,ch),new V(ch,Xp,0),new V(-ch,Xp,0)];class rW{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){dR=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,n,r,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=aW(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=oW(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(dR),t.scissorTest=!1,pw(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(301===t.mapping||302===t.mapping?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),dR=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize-32,n={magFilter:Fi,minFilter:Fi,generateMipmaps:!1,type:Sp,format:Go,encoding:nc,depthBuffer:!1},r=sW(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=sW(t,e,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function ICe(i){const t=[],e=[],n=[];let r=i;const s=i-4+1+tW.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);e.push(a);let l=1/a;o>i-4?l=tW[o-i+4-1]:0===o&&(l=0),n.push(l);const c=1/(a-1),u=-c/2,d=1+c/2,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,m=3,g=2,_=1,v=new Float32Array(m*p*f),y=new Float32Array(g*p*f),b=new Float32Array(_*p*f);for(let w=0;w<f;w++){const E=w%3*2/3-1,R=w>2?0:-1;v.set([E,R,0,E+2/3,R,0,E+2/3,R+1,0,E,R,0,E+2/3,R+1,0,E,R+1,0],m*p*w),y.set(h,g*p*w),b.set([w,w,w,w,w,w],_*p*w)}const x=new Pt;x.setAttribute("position",new Gn(v,m)),x.setAttribute("uv",new Gn(y,g)),x.setAttribute("faceIndex",new Gn(b,_)),t.push(x),r>4&&r--}return{lodPlanes:t,sizeLods:e,sigmas:n}}(s)),this._blurMaterial=function kCe(i,t,e){const n=new Float32Array(20),r=new V(0,1,0);return new Ma({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,t,e)}return r}_compileMaterial(t){const e=new Yi(this._lodPlanes[0],t);this._renderer.compile(e,uR)}_sceneToCubeUV(t,e,n,r){const a=new Mr(90,1,e,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(nW),u.toneMapping=0,u.autoClear=!1;const f=new vs({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new Yi(new ah,f);let m=!1;const g=t.background;g?g.isColor&&(f.color.copy(g),t.background=null,m=!0):(f.color.copy(nW),m=!0);for(let _=0;_<6;_++){const v=_%3;0===v?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):1===v?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const y=this._cubeSize;pw(r,v*y,_>2?y:0,y,y),u.setRenderTarget(r),m&&u.render(p,a),u.render(t,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,t.background=g}_textureToCubeUV(t,e){const n=this._renderer,r=301===t.mapping||302===t.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=aW()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=oW());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Yi(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const l=this._cubeSize;pw(e,0,0,3*l,2*l),n.setRenderTarget(e),n.render(o,uR)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(t,r-1,r,s,iW[(r-1)%iW.length])}e.autoClear=n}_blur(t,e,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",s),this._halfBlur(o,t,n,n,r,"longitudinal",s)}_halfBlur(t,e,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new Yi(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[n]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,m=s/p,g=isFinite(s)?1+Math.floor(3*m):20;g>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const _=[];let v=0;for(let E=0;E<20;++E){const R=E/m,F=Math.exp(-R*R/2);_.push(F),0===E?v+=F:E<g&&(v+=2*F)}for(let E=0;E<_.length;E++)_[E]=_[E]/v;h.envMap.value=t.texture,h.samples.value=g,h.weights.value=_,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:y}=this;h.dTheta.value=p,h.mipInt.value=y-n;const b=this._sizeLods[r];pw(e,3*b*(r>y-4?r-y+4:0),4*(this._cubeSize-b),3*b,2*b),l.setRenderTarget(e),l.render(d,uR)}}function sW(i,t,e){const n=new co(i,t,e);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function pw(i,t,e,n,r){i.viewport.set(t,e,n,r),i.scissor.set(t,e,n,r)}function oW(){return new Ma({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function aW(){return new Ma({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function OCe(i){let t=new WeakMap,e=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=t.get(l);void 0!==c&&(t.delete(l),c.dispose())}return{get:function n(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=t.get(a);return null===e&&(e=new rW(i)),d=c?e.fromEquirectangular(a,d):e.fromCubemap(a,d),t.set(a,d),d.texture}if(t.has(a))return t.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){null===e&&(e=new rW(i));const h=c?e.fromEquirectangular(a):e.fromCubemap(a);return t.set(a,h),a.addEventListener("dispose",s),h.texture}return null}}}return a},dispose:function o(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function PCe(i){const t={};function e(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return t[n]=r,r}return{has:function(n){return null!==e(n)},init:function(n){n.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(n){const r=e(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function LCe(i,t,e,n){const r={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&t.remove(h.index);for(const p in h.attributes)t.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(t.remove(f),s.delete(h)),n.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,e.memory.geometries--}function c(d){const h=[],f=d.index,p=d.attributes.position;let m=0;if(null!==f){const v=f.array;m=f.version;for(let y=0,b=v.length;y<b;y+=3){const x=v[y+0],w=v[y+1],E=v[y+2];h.push(x,w,w,E,E,x)}}else{m=p.version;for(let y=0,b=p.array.length/3-1;y<b;y+=3){const x=y+0,w=y+1,E=y+2;h.push(x,w,w,E,E,x)}}const g=new(B4(h)?Z4:K4)(h,1);g.version=m;const _=s.get(d);_&&t.remove(_),s.set(d,g)}return{get:function a(d,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,e.memory.geometries++),h},update:function l(d){const h=d.attributes;for(const p in h)t.update(h[p],34962);const f=d.morphAttributes;for(const p in f){const m=f[p];for(let g=0,_=m.length;g<_;g++)t.update(m[g],34962)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return s.get(d)}}}function FCe(i,t,e,n){const r=n.isWebGL2;let s,a,l;this.setMode=function o(h){s=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function u(h,f){i.drawElements(s,f,a,h*l),e.update(f,s,1)},this.renderInstances=function d(h,f,p){if(0===p)return;let m,g;if(r)m=i,g="drawElementsInstanced";else if(m=t.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",null===m)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[g](s,f,a,h*l,p),e.update(f,s,p)}}function NCe(i){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function r(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function n(s,o,a){switch(e.calls++,o){case 4:e.triangles+=a*(s/3);break;case 1:e.lines+=a*(s/2);break;case 3:e.lines+=a*(s-1);break;case 2:e.lines+=a*s;break;case 0:e.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function BCe(i,t){return i[0]-t[0]}function VCe(i,t){return Math.abs(t[1])-Math.abs(i[1])}function fR(i,t){let e=1;const n=t.isInterleavedBufferAttribute?t.data.array:t.array;n instanceof Int8Array?e=127:n instanceof Int16Array?e=32767:n instanceof Int32Array?e=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",n),i.divideScalar(e)}function HCe(i,t,e){const n={},r=new Float32Array(8),s=new WeakMap,o=new Nn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,d,h){const f=c.morphTargetInfluences;if(!0===t.isWebGL2){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=void 0!==p?p.length:0;let g=s.get(u);if(void 0===g||g.count!==m){let z=function(){Y.dispose(),s.delete(u),u.removeEventListener("dispose",z)};void 0!==g&&g.texture.dispose();const y=void 0!==u.morphAttributes.position,b=void 0!==u.morphAttributes.normal,x=void 0!==u.morphAttributes.color,w=u.morphAttributes.position||[],E=u.morphAttributes.normal||[],R=u.morphAttributes.color||[];let F=0;!0===y&&(F=1),!0===b&&(F=2),!0===x&&(F=3);let N=u.attributes.position.count*F,S=1;N>t.maxTextureSize&&(S=Math.ceil(N/t.maxTextureSize),N=t.maxTextureSize);const L=new Float32Array(N*S*4*m),Y=new Yx(L,N,S,m);Y.type=au,Y.needsUpdate=!0;const I=4*F;for(let D=0;D<m;D++){const P=w[D],O=E[D],q=R[D],K=N*S*4*D;for(let Q=0;Q<P.count;Q++){const j=Q*I;!0===y&&(o.fromBufferAttribute(P,Q),!0===P.normalized&&fR(o,P),L[K+j+0]=o.x,L[K+j+1]=o.y,L[K+j+2]=o.z,L[K+j+3]=0),!0===b&&(o.fromBufferAttribute(O,Q),!0===O.normalized&&fR(o,O),L[K+j+4]=o.x,L[K+j+5]=o.y,L[K+j+6]=o.z,L[K+j+7]=0),!0===x&&(o.fromBufferAttribute(q,Q),!0===q.normalized&&fR(o,q),L[K+j+8]=o.x,L[K+j+9]=o.y,L[K+j+10]=o.z,L[K+j+11]=4===q.itemSize?o.w:1)}}g={count:m,texture:Y,size:new me(N,S)},s.set(u,g),u.addEventListener("dispose",z)}let _=0;for(let y=0;y<f.length;y++)_+=f[y];const v=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(i,"morphTargetBaseInfluence",v),h.getUniforms().setValue(i,"morphTargetInfluences",f),h.getUniforms().setValue(i,"morphTargetsTexture",g.texture,e),h.getUniforms().setValue(i,"morphTargetsTextureSize",g.size)}else{const p=void 0===f?0:f.length;let m=n[u.id];if(void 0===m||m.length!==p){m=[];for(let b=0;b<p;b++)m[b]=[b,0];n[u.id]=m}for(let b=0;b<p;b++){const x=m[b];x[0]=b,x[1]=f[b]}m.sort(VCe);for(let b=0;b<8;b++)b<p&&m[b][1]?(a[b][0]=m[b][0],a[b][1]=m[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(BCe);const g=u.morphAttributes.position,_=u.morphAttributes.normal;let v=0;for(let b=0;b<8;b++){const x=a[b],w=x[0],E=x[1];w!==Number.MAX_SAFE_INTEGER&&E?(g&&u.getAttribute("morphTarget"+b)!==g[w]&&u.setAttribute("morphTarget"+b,g[w]),_&&u.getAttribute("morphNormal"+b)!==_[w]&&u.setAttribute("morphNormal"+b,_[w]),r[b]=E,v+=E):(g&&!0===u.hasAttribute("morphTarget"+b)&&u.deleteAttribute("morphTarget"+b),_&&!0===u.hasAttribute("morphNormal"+b)&&u.deleteAttribute("morphNormal"+b),r[b]=0)}const y=u.morphTargetsRelative?1:1-v;h.getUniforms().setValue(i,"morphTargetBaseInfluence",y),h.getUniforms().setValue(i,"morphTargetInfluences",r)}}}}function UCe(i,t,e,n){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),e.remove(c.instanceMatrix),null!==c.instanceColor&&e.remove(c.instanceColor)}return{update:function s(l){const c=n.render.frame,d=t.get(l,l.geometry);return r.get(d)!==c&&(t.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),e.update(l.instanceMatrix,34962),null!==l.instanceColor&&e.update(l.instanceColor,34962)),d},dispose:function o(){r=new WeakMap}}}const lW=new ns,cW=new Yx,uW=new GA,dW=new iv,hW=[],fW=[],pW=new Float32Array(16),mW=new Float32Array(9),gW=new Float32Array(4);function Kp(i,t,e){const n=i[0];if(n<=0||n>0)return i;const r=t*e;let s=hW[r];if(void 0===s&&(s=new Float32Array(r),hW[r]=s),0!==t){n.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=e,i[o].toArray(s,a)}return s}function ys(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function rs(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function mw(i,t){let e=fW[t];void 0===e&&(e=new Int32Array(t),fW[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function zCe(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function GCe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(ys(e,t))return;i.uniform2fv(this.addr,t),rs(e,t)}}function WCe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(ys(e,t))return;i.uniform3fv(this.addr,t),rs(e,t)}}function jCe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(ys(e,t))return;i.uniform4fv(this.addr,t),rs(e,t)}}function $Ce(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(ys(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),rs(e,t)}else{if(ys(e,n))return;gW.set(n),i.uniformMatrix2fv(this.addr,!1,gW),rs(e,n)}}function qCe(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(ys(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),rs(e,t)}else{if(ys(e,n))return;mW.set(n),i.uniformMatrix3fv(this.addr,!1,mW),rs(e,n)}}function YCe(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(ys(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),rs(e,t)}else{if(ys(e,n))return;pW.set(n),i.uniformMatrix4fv(this.addr,!1,pW),rs(e,n)}}function XCe(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function KCe(i,t){const e=this.cache;ys(e,t)||(i.uniform2iv(this.addr,t),rs(e,t))}function ZCe(i,t){const e=this.cache;ys(e,t)||(i.uniform3iv(this.addr,t),rs(e,t))}function QCe(i,t){const e=this.cache;ys(e,t)||(i.uniform4iv(this.addr,t),rs(e,t))}function JCe(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function eSe(i,t){const e=this.cache;ys(e,t)||(i.uniform2uiv(this.addr,t),rs(e,t))}function tSe(i,t){const e=this.cache;ys(e,t)||(i.uniform3uiv(this.addr,t),rs(e,t))}function nSe(i,t){const e=this.cache;ys(e,t)||(i.uniform4uiv(this.addr,t),rs(e,t))}function iSe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2D(t||lW,r)}function rSe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture3D(t||uW,r)}function sSe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTextureCube(t||dW,r)}function oSe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2DArray(t||cW,r)}function lSe(i,t){i.uniform1fv(this.addr,t)}function cSe(i,t){const e=Kp(t,this.size,2);i.uniform2fv(this.addr,e)}function uSe(i,t){const e=Kp(t,this.size,3);i.uniform3fv(this.addr,e)}function dSe(i,t){const e=Kp(t,this.size,4);i.uniform4fv(this.addr,e)}function hSe(i,t){const e=Kp(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function fSe(i,t){const e=Kp(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function pSe(i,t){const e=Kp(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function mSe(i,t){i.uniform1iv(this.addr,t)}function gSe(i,t){i.uniform2iv(this.addr,t)}function _Se(i,t){i.uniform3iv(this.addr,t)}function vSe(i,t){i.uniform4iv(this.addr,t)}function ySe(i,t){i.uniform1uiv(this.addr,t)}function bSe(i,t){i.uniform2uiv(this.addr,t)}function xSe(i,t){i.uniform3uiv(this.addr,t)}function wSe(i,t){i.uniform4uiv(this.addr,t)}function MSe(i,t,e){const n=t.length,r=mw(e,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)e.setTexture2D(t[s]||lW,r[s])}function CSe(i,t,e){const n=t.length,r=mw(e,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)e.setTexture3D(t[s]||uW,r[s])}function SSe(i,t,e){const n=t.length,r=mw(e,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)e.setTextureCube(t[s]||dW,r[s])}function ESe(i,t,e){const n=t.length,r=mw(e,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)e.setTexture2DArray(t[s]||cW,r[s])}function DSe(i,t,e){this.id=i,this.addr=e,this.cache=[],this.setValue=function aSe(i){switch(i){case 5126:return zCe;case 35664:return GCe;case 35665:return WCe;case 35666:return jCe;case 35674:return $Ce;case 35675:return qCe;case 35676:return YCe;case 5124:case 35670:return XCe;case 35667:case 35671:return KCe;case 35668:case 35672:return ZCe;case 35669:case 35673:return QCe;case 5125:return JCe;case 36294:return eSe;case 36295:return tSe;case 36296:return nSe;case 35678:case 36198:case 36298:case 36306:case 35682:return iSe;case 35679:case 36299:case 36307:return rSe;case 35680:case 36300:case 36308:case 36293:return sSe;case 36289:case 36303:case 36311:case 36292:return oSe}}(t.type)}function _W(i,t,e){this.id=i,this.addr=e,this.cache=[],this.size=t.size,this.setValue=function TSe(i){switch(i){case 5126:return lSe;case 35664:return cSe;case 35665:return uSe;case 35666:return dSe;case 35674:return hSe;case 35675:return fSe;case 35676:return pSe;case 5124:case 35670:return mSe;case 35667:case 35671:return gSe;case 35668:case 35672:return _Se;case 35669:case 35673:return vSe;case 5125:return ySe;case 36294:return bSe;case 36295:return xSe;case 36296:return wSe;case 35678:case 36198:case 36298:case 36306:case 35682:return MSe;case 35679:case 36299:case 36307:return CSe;case 35680:case 36300:case 36308:case 36293:return SSe;case 36289:case 36303:case 36311:case 36292:return ESe}}(t.type)}function vW(i){this.id=i,this.seq=[],this.map={}}_W.prototype.updateCache=function(i){const t=this.cache;i instanceof Float32Array&&t.length!==i.length&&(this.cache=new Float32Array(i.length)),rs(t,i)},vW.prototype.setValue=function(i,t,e){const n=this.seq;for(let r=0,s=n.length;r!==s;++r){const o=n[r];o.setValue(i,t[o.id],e)}};const pR=/(\w+)(\])?(\[|\.)?/g;function yW(i,t){i.seq.push(t),i.map[t.id]=t}function ASe(i,t,e){const n=i.name,r=n.length;for(pR.lastIndex=0;;){const s=pR.exec(n),o=pR.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===r){yW(e,void 0===c?new DSe(a,i,t):new _W(a,i,t));break}{let d=e.map[a];void 0===d&&(d=new vW(a),yW(e,d)),e=d}}}function _u(i,t){this.seq=[],this.map={};const e=i.getProgramParameter(t,35718);for(let n=0;n<e;++n){const r=i.getActiveUniform(t,n);ASe(r,i.getUniformLocation(t,r.name),this)}}function bW(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}_u.prototype.setValue=function(i,t,e,n){const r=this.map[t];void 0!==r&&r.setValue(i,e,n)},_u.prototype.setOptional=function(i,t,e){const n=t[e];void 0!==n&&this.setValue(i,e,n)},_u.upload=function(i,t,e,n){for(let r=0,s=t.length;r!==s;++r){const o=t[r],a=e[o.id];!1!==a.needsUpdate&&o.setValue(i,a.value,n)}},_u.seqWithValue=function(i,t){const e=[];for(let n=0,r=i.length;n!==r;++n){const s=i[n];s.id in t&&e.push(s)}return e};let RSe=0;function xW(i,t,e){const n=i.getShaderParameter(t,35713),r=i.getShaderInfoLog(t).trim();if(n&&""===r)return"";const s=parseInt(/ERROR: 0:(\d+)/.exec(r)[1]);return e.toUpperCase()+"\n\n"+r+"\n\n"+function ISe(i,t){const e=i.split("\n"),n=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=r;o<s;o++)n.push(o+1+": "+e[o]);return n.join("\n")}(i.getShaderSource(t),s)}function OSe(i,t){const e=function kSe(i){switch(i){case nc:return["Linear","( value )"];case Dn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}(t);return"vec4 "+i+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function PSe(i,t){let e;switch(t){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="OptimizedCineon";break;case 4:e="ACESFilmic";break;case 5:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function sv(i){return""!==i}function wW(i,t){return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function MW(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const BSe=/^[ \t]*#include +<([\w\d./]+)>/gm;function mR(i){return i.replace(BSe,VSe)}function VSe(i,t){const e=ln[t];if(void 0===e)throw new Error("Can not resolve #include <"+t+">");return mR(e)}const HSe=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,USe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function CW(i){return i.replace(USe,SW).replace(HSe,zSe)}function zSe(i,t,e,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),SW(0,t,e,n)}function SW(i,t,e,n){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function EW(i){let t="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?t+="\n#define HIGH_PRECISION":"mediump"===i.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(t+="\n#define LOW_PRECISION"),t}function YSe(i,t,e,n){const r=i.getContext(),s=e.defines;let o=e.vertexShader,a=e.fragmentShader;const l=function GSe(i){let t="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(e),c=function WSe(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),u=function jSe(i){let t="ENVMAP_MODE_REFLECTION";return i.envMap&&302===i.envMapMode&&(t="ENVMAP_MODE_REFRACTION"),t}(e),d=function $Se(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(e),h=function qSe(i){const t=i.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t/32+1)+3,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}(e),f=e.isWebGL2?"":function LSe(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(sv).join("\n")}(e),p=function FSe(i){const t=[];for(const e in i){const n=i[e];!1!==n&&t.push("#define "+e+" "+n)}return t.join("\n")}(s),m=r.createProgram();let g,_,v=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(g=[p].filter(sv).join("\n"),g.length>0&&(g+="\n"),_=[f,p].filter(sv).join("\n"),_.length>0&&(_+="\n")):(g=[EW(e),"#define SHADER_NAME "+e.shaderName,p,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+e.maxBones,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+u:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.useVertexTexture?"#define BONE_TEXTURE":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors&&e.isWebGL2?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(sv).join("\n"),_=[f,EW(e),"#define SHADER_NAME "+e.shaderName,p,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+c:"",e.envMap?"#define "+u:"",e.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==e.toneMapping?"#define TONE_MAPPING":"",0!==e.toneMapping?ln.tonemapping_pars_fragment:"",0!==e.toneMapping?PSe("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",ln.encodings_pars_fragment,OSe("linearToOutputTexel",e.outputEncoding),e.depthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(sv).join("\n")),o=mR(o),o=wW(o,e),o=MW(o,e),a=mR(a),a=wW(a,e),a=MW(a,e),o=CW(o),a=CW(a),e.isWebGL2&&!0!==e.isRawShaderMaterial&&(v="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,_=["#define varying in","300 es"===e.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===e.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const b=v+_+a,x=bW(r,35633,v+g+o),w=bW(r,35632,b);if(r.attachShader(m,x),r.attachShader(m,w),void 0!==e.index0AttributeName?r.bindAttribLocation(m,0,e.index0AttributeName):!0===e.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),i.debug.checkShaderErrors){const F=r.getProgramInfoLog(m).trim(),N=r.getShaderInfoLog(x).trim(),S=r.getShaderInfoLog(w).trim();let L=!0,Y=!0;if(!1===r.getProgramParameter(m,35714)){L=!1;const I=xW(r,x,"vertex"),z=xW(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+F+"\n"+I+"\n"+z)}else""!==F?console.warn("THREE.WebGLProgram: Program Info Log:",F):(""===N||""===S)&&(Y=!1);Y&&(this.diagnostics={runnable:L,programLog:F,vertexShader:{log:N,prefix:g},fragmentShader:{log:S,prefix:_}})}let E,R;return r.deleteShader(x),r.deleteShader(w),this.getUniforms=function(){return void 0===E&&(E=new _u(r,m)),E},this.getAttributes=function(){return void 0===R&&(R=function NSe(i,t){const e={},n=i.getProgramParameter(t,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(t,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),e[o]={type:s.type,location:i.getAttribLocation(t,o),locationSize:a}}return e}(r,m)),R},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=e.shaderName,this.id=RSe++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=w,this}let XSe=0;class KSe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.fragmentShader,r=this._getShaderStage(t.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}_getShaderStage(t){const e=this.shaderCache;if(!1===e.has(t)){const n=new ZSe(t);e.set(t,n)}return e.get(t)}}class ZSe{constructor(t){this.id=XSe++,this.code=t,this.usedTimes=0}}function QSe(i,t,e,n,r,s,o){const a=new ZA,l=new KSe,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.floatVertexTextures,f=r.maxVertexUniforms,p=r.vertexTextures;let m=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function v(S,L,Y,I,z){const D=I.fog,P=z.geometry,q=(S.isMeshStandardMaterial?e:t).get(S.envMap||(S.isMeshStandardMaterial?I.environment:null)),K=q&&306===q.mapping?q.image.height:null,Q=g[S.type],j=z.isSkinnedMesh?function _(S){const Y=S.skeleton.bones;if(h)return 1024;{const z=Math.floor((f-20)/4),D=Math.min(z,Y.length);return D<Y.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Y.length+" bones. This GPU supports "+D+"."),0):D}}(z):0;null!==S.precision&&(m=r.getMaxPrecision(S.precision),m!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",m,"instead."));const we=P.morphAttributes.position||P.morphAttributes.normal||P.morphAttributes.color,fe=void 0!==we?we.length:0;let re,Ae,Oe,tt,_e=0;if(void 0!==P.morphAttributes.position&&(_e=1),void 0!==P.morphAttributes.normal&&(_e=2),void 0!==P.morphAttributes.color&&(_e=3),Q){const Ee=rl[Q];re=Ee.vertexShader,Ae=Ee.fragmentShader}else re=S.vertexShader,Ae=S.fragmentShader,l.update(S),Oe=l.getVertexShaderID(S),tt=l.getFragmentShaderID(S);const ye=i.getRenderTarget(),ue=S.clearcoat>0;return{isWebGL2:u,shaderID:Q,shaderName:S.type,vertexShader:re,fragmentShader:Ae,defines:S.defines,customVertexShaderID:Oe,customFragmentShaderID:tt,isRawShaderMaterial:!0===S.isRawShaderMaterial,glslVersion:S.glslVersion,precision:m,instancing:!0===z.isInstancedMesh,instancingColor:!0===z.isInstancedMesh&&null!==z.instanceColor,supportsVertexTextures:p,outputEncoding:null===ye?i.outputEncoding:!0===ye.isXRRenderTarget?ye.texture.encoding:nc,map:!!S.map,matcap:!!S.matcap,envMap:!!q,envMapMode:q&&q.mapping,envMapCubeUVHeight:K,lightMap:!!S.lightMap,aoMap:!!S.aoMap,emissiveMap:!!S.emissiveMap,bumpMap:!!S.bumpMap,normalMap:!!S.normalMap,objectSpaceNormalMap:1===S.normalMapType,tangentSpaceNormalMap:0===S.normalMapType,decodeVideoTexture:!!S.map&&!0===S.map.isVideoTexture&&S.map.encoding===Dn,clearcoat:ue,clearcoatMap:ue&&!!S.clearcoatMap,clearcoatRoughnessMap:ue&&!!S.clearcoatRoughnessMap,clearcoatNormalMap:ue&&!!S.clearcoatNormalMap,displacementMap:!!S.displacementMap,roughnessMap:!!S.roughnessMap,metalnessMap:!!S.metalnessMap,specularMap:!!S.specularMap,specularIntensityMap:!!S.specularIntensityMap,specularColorMap:!!S.specularColorMap,opaque:!1===S.transparent&&1===S.blending,alphaMap:!!S.alphaMap,alphaTest:S.alphaTest>0,gradientMap:!!S.gradientMap,sheen:S.sheen>0,sheenColorMap:!!S.sheenColorMap,sheenRoughnessMap:!!S.sheenRoughnessMap,transmission:S.transmission>0,transmissionMap:!!S.transmissionMap,thicknessMap:!!S.thicknessMap,combine:S.combine,vertexTangents:!!S.normalMap&&!!P.attributes.tangent,vertexColors:S.vertexColors,vertexAlphas:!0===S.vertexColors&&!!P.attributes.color&&4===P.attributes.color.itemSize,vertexUvs:!!(S.map||S.bumpMap||S.normalMap||S.specularMap||S.alphaMap||S.emissiveMap||S.roughnessMap||S.metalnessMap||S.clearcoatMap||S.clearcoatRoughnessMap||S.clearcoatNormalMap||S.displacementMap||S.transmissionMap||S.thicknessMap||S.specularIntensityMap||S.specularColorMap||S.sheenColorMap||S.sheenRoughnessMap),uvsVertexOnly:!(S.map||S.bumpMap||S.normalMap||S.specularMap||S.alphaMap||S.emissiveMap||S.roughnessMap||S.metalnessMap||S.clearcoatNormalMap||S.transmission>0||S.transmissionMap||S.thicknessMap||S.specularIntensityMap||S.specularColorMap||S.sheen>0||S.sheenColorMap||S.sheenRoughnessMap||!S.displacementMap),fog:!!D,useFog:S.fog,fogExp2:D&&D.isFogExp2,flatShading:!!S.flatShading,sizeAttenuation:S.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===z.isSkinnedMesh&&j>0,maxBones:j,useVertexTexture:h,morphTargets:void 0!==P.morphAttributes.position,morphNormals:void 0!==P.morphAttributes.normal,morphColors:void 0!==P.morphAttributes.color,morphTargetsCount:fe,morphTextureStride:_e,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:S.dithering,shadowMapEnabled:i.shadowMap.enabled&&Y.length>0,shadowMapType:i.shadowMap.type,toneMapping:S.toneMapped?i.toneMapping:0,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:S.premultipliedAlpha,doubleSided:2===S.side,flipSided:1===S.side,depthPacking:void 0!==S.depthPacking&&S.depthPacking,index0AttributeName:S.index0AttributeName,extensionDerivatives:S.extensions&&S.extensions.derivatives,extensionFragDepth:S.extensions&&S.extensions.fragDepth,extensionDrawBuffers:S.extensions&&S.extensions.drawBuffers,extensionShaderTextureLOD:S.extensions&&S.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||n.has("EXT_shader_texture_lod"),customProgramCacheKey:S.customProgramCacheKey()}},getProgramCacheKey:function y(S){const L=[];if(S.shaderID?L.push(S.shaderID):(L.push(S.customVertexShaderID),L.push(S.customFragmentShaderID)),void 0!==S.defines)for(const Y in S.defines)L.push(Y),L.push(S.defines[Y]);return!1===S.isRawShaderMaterial&&(function b(S,L){S.push(L.precision),S.push(L.outputEncoding),S.push(L.envMapMode),S.push(L.envMapCubeUVHeight),S.push(L.combine),S.push(L.vertexUvs),S.push(L.fogExp2),S.push(L.sizeAttenuation),S.push(L.maxBones),S.push(L.morphTargetsCount),S.push(L.morphAttributeCount),S.push(L.numDirLights),S.push(L.numPointLights),S.push(L.numSpotLights),S.push(L.numHemiLights),S.push(L.numRectAreaLights),S.push(L.numDirLightShadows),S.push(L.numPointLightShadows),S.push(L.numSpotLightShadows),S.push(L.shadowMapType),S.push(L.toneMapping),S.push(L.numClippingPlanes),S.push(L.numClipIntersection)}(L,S),function x(S,L){a.disableAll(),L.isWebGL2&&a.enable(0),L.supportsVertexTextures&&a.enable(1),L.instancing&&a.enable(2),L.instancingColor&&a.enable(3),L.map&&a.enable(4),L.matcap&&a.enable(5),L.envMap&&a.enable(6),L.lightMap&&a.enable(7),L.aoMap&&a.enable(8),L.emissiveMap&&a.enable(9),L.bumpMap&&a.enable(10),L.normalMap&&a.enable(11),L.objectSpaceNormalMap&&a.enable(12),L.tangentSpaceNormalMap&&a.enable(13),L.clearcoat&&a.enable(14),L.clearcoatMap&&a.enable(15),L.clearcoatRoughnessMap&&a.enable(16),L.clearcoatNormalMap&&a.enable(17),L.displacementMap&&a.enable(18),L.specularMap&&a.enable(19),L.roughnessMap&&a.enable(20),L.metalnessMap&&a.enable(21),L.gradientMap&&a.enable(22),L.alphaMap&&a.enable(23),L.alphaTest&&a.enable(24),L.vertexColors&&a.enable(25),L.vertexAlphas&&a.enable(26),L.vertexUvs&&a.enable(27),L.vertexTangents&&a.enable(28),L.uvsVertexOnly&&a.enable(29),L.fog&&a.enable(30),S.push(a.mask),a.disableAll(),L.useFog&&a.enable(0),L.flatShading&&a.enable(1),L.logarithmicDepthBuffer&&a.enable(2),L.skinning&&a.enable(3),L.useVertexTexture&&a.enable(4),L.morphTargets&&a.enable(5),L.morphNormals&&a.enable(6),L.morphColors&&a.enable(7),L.premultipliedAlpha&&a.enable(8),L.shadowMapEnabled&&a.enable(9),L.physicallyCorrectLights&&a.enable(10),L.doubleSided&&a.enable(11),L.flipSided&&a.enable(12),L.depthPacking&&a.enable(13),L.dithering&&a.enable(14),L.specularIntensityMap&&a.enable(15),L.specularColorMap&&a.enable(16),L.transmission&&a.enable(17),L.transmissionMap&&a.enable(18),L.thicknessMap&&a.enable(19),L.sheen&&a.enable(20),L.sheenColorMap&&a.enable(21),L.sheenRoughnessMap&&a.enable(22),L.decodeVideoTexture&&a.enable(23),L.opaque&&a.enable(24),S.push(a.mask)}(L,S),L.push(i.outputEncoding)),L.push(S.customProgramCacheKey),L.join()},getUniforms:function w(S){const L=g[S.type];let Y;return Y=L?Cwe.clone(rl[L].uniforms):S.uniforms,Y},acquireProgram:function E(S,L){let Y;for(let I=0,z=c.length;I<z;I++){const D=c[I];if(D.cacheKey===L){Y=D,++Y.usedTimes;break}}return void 0===Y&&(Y=new YSe(i,L,S,s),c.push(Y)),Y},releaseProgram:function R(S){if(0==--S.usedTimes){const L=c.indexOf(S);c[L]=c[c.length-1],c.pop(),S.destroy()}},releaseShaderCache:function F(S){l.remove(S)},programs:c,dispose:function N(){l.dispose()}}}function JSe(){let i=new WeakMap;return{get:function t(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function e(s){i.delete(s)},update:function n(s,o,a){i.get(s)[o]=a},dispose:function r(){i=new WeakMap}}}function eEe(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function TW(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function DW(){const i=[];let t=0;const e=[],n=[],r=[];function o(d,h,f,p,m,g){let _=i[t];return void 0===_?(_={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:m,group:g},i[t]=_):(_.id=d.id,_.object=d,_.geometry=h,_.material=f,_.groupOrder=p,_.renderOrder=d.renderOrder,_.z=m,_.group=g),t++,_}return{opaque:e,transmissive:n,transparent:r,init:function s(){t=0,e.length=0,n.length=0,r.length=0},push:function a(d,h,f,p,m,g){const _=o(d,h,f,p,m,g);f.transmission>0?n.push(_):!0===f.transparent?r.push(_):e.push(_)},unshift:function l(d,h,f,p,m,g){const _=o(d,h,f,p,m,g);f.transmission>0?n.unshift(_):!0===f.transparent?r.unshift(_):e.unshift(_)},finish:function u(){for(let d=t,h=i.length;d<h;d++){const f=i[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(d,h){e.length>1&&e.sort(d||eEe),n.length>1&&n.sort(h||TW),r.length>1&&r.sort(h||TW)}}}function tEe(){let i=new WeakMap;return{get:function t(n,r){let s;return!1===i.has(n)?(s=new DW,i.set(n,[s])):r>=i.get(n).length?(s=new DW,i.get(n).push(s)):s=i.get(n)[r],s},dispose:function e(){i=new WeakMap}}}function nEe(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new V,color:new Le};break;case"SpotLight":e={position:new V,direction:new V,color:new Le,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new V,color:new Le,distance:0,decay:0};break;case"HemisphereLight":e={direction:new V,skyColor:new Le,groundColor:new Le};break;case"RectAreaLight":e={color:new Le,position:new V,halfWidth:new V,halfHeight:new V}}return i[t.id]=e,e}}}let rEe=0;function sEe(i,t){return(t.castShadow?1:0)-(i.castShadow?1:0)}function oEe(i,t){const e=new nEe,n=function iEe(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e,e}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new V);const s=new V,o=new lt,a=new lt;return{setup:function l(u,d){let h=0,f=0,p=0;for(let F=0;F<9;F++)r.probe[F].set(0,0,0);let m=0,g=0,_=0,v=0,y=0,b=0,x=0,w=0;u.sort(sEe);const E=!0!==d?Math.PI:1;for(let F=0,N=u.length;F<N;F++){const S=u[F],L=S.color,Y=S.intensity,I=S.distance,z=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)h+=L.r*Y*E,f+=L.g*Y*E,p+=L.b*Y*E;else if(S.isLightProbe)for(let D=0;D<9;D++)r.probe[D].addScaledVector(S.sh.coefficients[D],Y);else if(S.isDirectionalLight){const D=e.get(S);if(D.color.copy(S.color).multiplyScalar(S.intensity*E),S.castShadow){const P=S.shadow,O=n.get(S);O.shadowBias=P.bias,O.shadowNormalBias=P.normalBias,O.shadowRadius=P.radius,O.shadowMapSize=P.mapSize,r.directionalShadow[m]=O,r.directionalShadowMap[m]=z,r.directionalShadowMatrix[m]=S.shadow.matrix,b++}r.directional[m]=D,m++}else if(S.isSpotLight){const D=e.get(S);if(D.position.setFromMatrixPosition(S.matrixWorld),D.color.copy(L).multiplyScalar(Y*E),D.distance=I,D.coneCos=Math.cos(S.angle),D.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),D.decay=S.decay,S.castShadow){const P=S.shadow,O=n.get(S);O.shadowBias=P.bias,O.shadowNormalBias=P.normalBias,O.shadowRadius=P.radius,O.shadowMapSize=P.mapSize,r.spotShadow[_]=O,r.spotShadowMap[_]=z,r.spotShadowMatrix[_]=S.shadow.matrix,w++}r.spot[_]=D,_++}else if(S.isRectAreaLight){const D=e.get(S);D.color.copy(L).multiplyScalar(Y),D.halfWidth.set(.5*S.width,0,0),D.halfHeight.set(0,.5*S.height,0),r.rectArea[v]=D,v++}else if(S.isPointLight){const D=e.get(S);if(D.color.copy(S.color).multiplyScalar(S.intensity*E),D.distance=S.distance,D.decay=S.decay,S.castShadow){const P=S.shadow,O=n.get(S);O.shadowBias=P.bias,O.shadowNormalBias=P.normalBias,O.shadowRadius=P.radius,O.shadowMapSize=P.mapSize,O.shadowCameraNear=P.camera.near,O.shadowCameraFar=P.camera.far,r.pointShadow[g]=O,r.pointShadowMap[g]=z,r.pointShadowMatrix[g]=S.shadow.matrix,x++}r.point[g]=D,g++}else if(S.isHemisphereLight){const D=e.get(S);D.skyColor.copy(S.color).multiplyScalar(Y*E),D.groundColor.copy(S.groundColor).multiplyScalar(Y*E),r.hemi[y]=D,y++}}v>0&&(t.isWebGL2||!0===i.has("OES_texture_float_linear")?(r.rectAreaLTC1=We.LTC_FLOAT_1,r.rectAreaLTC2=We.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=We.LTC_HALF_1,r.rectAreaLTC2=We.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=p;const R=r.hash;(R.directionalLength!==m||R.pointLength!==g||R.spotLength!==_||R.rectAreaLength!==v||R.hemiLength!==y||R.numDirectionalShadows!==b||R.numPointShadows!==x||R.numSpotShadows!==w)&&(r.directional.length=m,r.spot.length=_,r.rectArea.length=v,r.point.length=g,r.hemi.length=y,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=x,r.pointShadowMap.length=x,r.spotShadow.length=w,r.spotShadowMap.length=w,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=x,r.spotShadowMatrix.length=w,R.directionalLength=m,R.pointLength=g,R.spotLength=_,R.rectAreaLength=v,R.hemiLength=y,R.numDirectionalShadows=b,R.numPointShadows=x,R.numSpotShadows=w,r.version=rEe++)},setupView:function c(u,d){let h=0,f=0,p=0,m=0,g=0;const _=d.matrixWorldInverse;for(let v=0,y=u.length;v<y;v++){const b=u[v];if(b.isDirectionalLight){const x=r.directional[h];x.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(_),h++}else if(b.isSpotLight){const x=r.spot[p];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(_),x.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(_),p++}else if(b.isRectAreaLight){const x=r.rectArea[m];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(_),a.identity(),o.copy(b.matrixWorld),o.premultiply(_),a.extractRotation(o),x.halfWidth.set(.5*b.width,0,0),x.halfHeight.set(0,.5*b.height,0),x.halfWidth.applyMatrix4(a),x.halfHeight.applyMatrix4(a),m++}else if(b.isPointLight){const x=r.point[f];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(_),f++}else if(b.isHemisphereLight){const x=r.hemi[g];x.direction.setFromMatrixPosition(b.matrixWorld),x.direction.transformDirection(_),x.direction.normalize(),g++}}},state:r}}function AW(i,t){const e=new oEe(i,t),n=[],r=[];return{init:function s(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:e},setupLights:function l(d){e.setup(n,d)},setupLightsView:function c(d){e.setupView(n,d)},pushLight:function o(d){n.push(d)},pushShadow:function a(d){r.push(d)}}}function aEe(i,t){let e=new WeakMap;return{get:function n(s,o=0){let a;return!1===e.has(s)?(a=new AW(i,t),e.set(s,[a])):o>=e.get(s).length?(a=new AW(i,t),e.get(s).push(a)):a=e.get(s)[o],a},dispose:function r(){e=new WeakMap}}}class gR extends Ci{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}gR.prototype.isMeshDepthMaterial=!0;class _R extends Ci{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new V,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function RW(i,t,e){let n=new fw;const r=new me,s=new me,o=new Nn,a=new gR({depthPacking:3201}),l=new _R,c={},u=e.maxTextureSize,d={0:1,1:0,2:2},h=new Ma({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new me},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new Pt;p.setAttribute("position",new Gn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Yi(p,h),g=this;function _(b,x){const w=t.update(m);h.defines.VSM_SAMPLES!==b.blurSamples&&(h.defines.VSM_SAMPLES=b.blurSamples,f.defines.VSM_SAMPLES=b.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),h.uniforms.shadow_pass.value=b.map.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,i.setRenderTarget(b.mapPass),i.clear(),i.renderBufferDirect(x,null,w,h,m,null),f.uniforms.shadow_pass.value=b.mapPass.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,i.setRenderTarget(b.map),i.clear(),i.renderBufferDirect(x,null,w,f,m,null)}function v(b,x,w,E,R,F){let N=null;const S=!0===w.isPointLight?b.customDistanceMaterial:b.customDepthMaterial;if(N=void 0!==S?S:!0===w.isPointLight?l:a,i.localClippingEnabled&&!0===x.clipShadows&&0!==x.clippingPlanes.length||x.displacementMap&&0!==x.displacementScale||x.alphaMap&&x.alphaTest>0){const L=N.uuid,Y=x.uuid;let I=c[L];void 0===I&&(I={},c[L]=I);let z=I[Y];void 0===z&&(z=N.clone(),I[Y]=z),N=z}return N.visible=x.visible,N.wireframe=x.wireframe,N.side=3===F?null!==x.shadowSide?x.shadowSide:x.side:null!==x.shadowSide?x.shadowSide:d[x.side],N.alphaMap=x.alphaMap,N.alphaTest=x.alphaTest,N.clipShadows=x.clipShadows,N.clippingPlanes=x.clippingPlanes,N.clipIntersection=x.clipIntersection,N.displacementMap=x.displacementMap,N.displacementScale=x.displacementScale,N.displacementBias=x.displacementBias,N.wireframeLinewidth=x.wireframeLinewidth,N.linewidth=x.linewidth,!0===w.isPointLight&&!0===N.isMeshDistanceMaterial&&(N.referencePosition.setFromMatrixPosition(w.matrixWorld),N.nearDistance=E,N.farDistance=R),N}function y(b,x,w,E,R){if(!1===b.visible)return;if(b.layers.test(x.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&3===R)&&(!b.frustumCulled||n.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,b.matrixWorld);const S=t.update(b),L=b.material;if(Array.isArray(L)){const Y=S.groups;for(let I=0,z=Y.length;I<z;I++){const D=Y[I],P=L[D.materialIndex];if(P&&P.visible){const O=v(b,P,E,w.near,w.far,R);i.renderBufferDirect(w,null,S,O,b,D)}}}else if(L.visible){const Y=v(b,L,E,w.near,w.far,R);i.renderBufferDirect(w,null,S,Y,b,null)}}const N=b.children;for(let S=0,L=N.length;S<L;S++)y(N[S],x,w,E,R)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(b,x,w){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===b.length)return;const E=i.getRenderTarget(),R=i.getActiveCubeFace(),F=i.getActiveMipmapLevel(),N=i.state;N.setBlending(0),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);for(let S=0,L=b.length;S<L;S++){const Y=b[S],I=Y.shadow;if(void 0===I){console.warn("THREE.WebGLShadowMap:",Y,"has no shadow.");continue}if(!1===I.autoUpdate&&!1===I.needsUpdate)continue;r.copy(I.mapSize);const z=I.getFrameExtents();r.multiply(z),s.copy(I.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/z.x),r.x=s.x*z.x,I.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/z.y),r.y=s.y*z.y,I.mapSize.y=s.y)),null===I.map&&!I.isPointLightShadow&&3===this.type&&(I.map=new co(r.x,r.y),I.map.texture.name=Y.name+".shadowMap",I.mapPass=new co(r.x,r.y),I.camera.updateProjectionMatrix()),null===I.map&&(I.map=new co(r.x,r.y,{minFilter:or,magFilter:or,format:Go}),I.map.texture.name=Y.name+".shadowMap",I.camera.updateProjectionMatrix()),i.setRenderTarget(I.map),i.clear();const D=I.getViewportCount();for(let P=0;P<D;P++){const O=I.getViewport(P);o.set(s.x*O.x,s.y*O.y,s.x*O.z,s.y*O.w),N.viewport(o),I.updateMatrices(Y,P),n=I.getFrustum(),y(x,w,I.camera,Y,this.type)}!I.isPointLightShadow&&3===this.type&&_(I,w),I.needsUpdate=!1}g.needsUpdate=!1,i.setRenderTarget(E,R,F)}}function uEe(i,t,e){const n=e.isWebGL2,a=new function r(){let X=!1;const ke=new Nn;let Se=null;const xt=new Nn(0,0,0,0);return{setMask:function(ze){Se!==ze&&!X&&(i.colorMask(ze,ze,ze,ze),Se=ze)},setLocked:function(ze){X=ze},setClear:function(ze,ht,Be,Bt,Qn){!0===Qn&&(ze*=Bt,ht*=Bt,Be*=Bt),ke.set(ze,ht,Be,Bt),!1===xt.equals(ke)&&(i.clearColor(ze,ht,Be,Bt),xt.copy(ke))},reset:function(){X=!1,Se=null,xt.set(-1,0,0,0)}}},l=new function s(){let X=!1,ke=null,Se=null,xt=null;return{setTest:function(ze){ze?_e(2929):re(2929)},setMask:function(ze){ke!==ze&&!X&&(i.depthMask(ze),ke=ze)},setFunc:function(ze){if(Se!==ze){if(ze)switch(ze){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:default:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517)}else i.depthFunc(515);Se=ze}},setLocked:function(ze){X=ze},setClear:function(ze){xt!==ze&&(i.clearDepth(ze),xt=ze)},reset:function(){X=!1,ke=null,Se=null,xt=null}}},c=new function o(){let X=!1,ke=null,Se=null,xt=null,ze=null,ht=null,Be=null,Bt=null,Qn=null;return{setTest:function(pn){X||(pn?_e(2960):re(2960))},setMask:function(pn){ke!==pn&&!X&&(i.stencilMask(pn),ke=pn)},setFunc:function(pn,_o,vo){(Se!==pn||xt!==_o||ze!==vo)&&(i.stencilFunc(pn,_o,vo),Se=pn,xt=_o,ze=vo)},setOp:function(pn,_o,vo){(ht!==pn||Be!==_o||Bt!==vo)&&(i.stencilOp(pn,_o,vo),ht=pn,Be=_o,Bt=vo)},setLocked:function(pn){X=pn},setClear:function(pn){Qn!==pn&&(i.clearStencil(pn),Qn=pn)},reset:function(){X=!1,ke=null,Se=null,xt=null,ze=null,ht=null,Be=null,Bt=null,Qn=null}}};let u={},d={},h=new WeakMap,f=[],p=null,m=!1,g=null,_=null,v=null,y=null,b=null,x=null,w=null,E=!1,R=null,F=null,N=null,S=null,L=null;const Y=i.getParameter(35661);let I=!1,z=0;const D=i.getParameter(7938);-1!==D.indexOf("WebGL")?(z=parseFloat(/^WebGL (\d)/.exec(D)[1]),I=z>=1):-1!==D.indexOf("OpenGL ES")&&(z=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),I=z>=2);let P=null,O={};const q=i.getParameter(3088),K=i.getParameter(2978),Q=(new Nn).fromArray(q),j=(new Nn).fromArray(K);function we(X,ke,Se){const xt=new Uint8Array(4),ze=i.createTexture();i.bindTexture(X,ze),i.texParameteri(X,10241,9728),i.texParameteri(X,10240,9728);for(let ht=0;ht<Se;ht++)i.texImage2D(ke+ht,0,6408,1,1,0,6408,5121,xt);return ze}const fe={};function _e(X){!0!==u[X]&&(i.enable(X),u[X]=!0)}function re(X){!1!==u[X]&&(i.disable(X),u[X]=!1)}fe[3553]=we(3553,3553,1),fe[34067]=we(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),_e(2929),l.setFunc(3),Ee(!1),Ke(1),_e(2884),ue(0);const ye={100:32774,101:32778,102:32779};if(n)ye[103]=32775,ye[104]=32776;else{const X=t.get("EXT_blend_minmax");null!==X&&(ye[103]=X.MIN_EXT,ye[104]=X.MAX_EXT)}const vt={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function ue(X,ke,Se,xt,ze,ht,Be,Bt){if(0!==X){if(!1===m&&(_e(3042),m=!0),5===X)ze=ze||ke,ht=ht||Se,Be=Be||xt,(ke!==_||ze!==b)&&(i.blendEquationSeparate(ye[ke],ye[ze]),_=ke,b=ze),(Se!==v||xt!==y||ht!==x||Be!==w)&&(i.blendFuncSeparate(vt[Se],vt[xt],vt[ht],vt[Be]),v=Se,y=xt,x=ht,w=Be),g=X,E=null;else if(X!==g||Bt!==E){if((100!==_||100!==b)&&(i.blendEquation(32774),_=100,b=100),Bt)switch(X){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",X)}else switch(X){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",X)}v=null,y=null,x=null,w=null,g=X,E=Bt}}else!0===m&&(re(3042),m=!1)}function Ee(X){R!==X&&(i.frontFace(X?2304:2305),R=X)}function Ke(X){0!==X?(_e(2884),X!==F&&i.cullFace(1===X?1029:2===X?1028:1032)):re(2884),F=X}function De(X,ke,Se){X?(_e(32823),(S!==ke||L!==Se)&&(i.polygonOffset(ke,Se),S=ke,L=Se)):re(32823)}function it(X){void 0===X&&(X=33984+Y-1),P!==X&&(i.activeTexture(X),P=X)}return{buffers:{color:a,depth:l,stencil:c},enable:_e,disable:re,bindFramebuffer:function Ae(X,ke){return d[X]!==ke&&(i.bindFramebuffer(X,ke),d[X]=ke,n&&(36009===X&&(d[36160]=ke),36160===X&&(d[36009]=ke)),!0)},drawBuffers:function Oe(X,ke){let Se=f,xt=!1;if(X)if(Se=h.get(ke),void 0===Se&&(Se=[],h.set(ke,Se)),X.isWebGLMultipleRenderTargets){const ze=X.texture;if(Se.length!==ze.length||36064!==Se[0]){for(let ht=0,Be=ze.length;ht<Be;ht++)Se[ht]=36064+ht;Se.length=ze.length,xt=!0}}else 36064!==Se[0]&&(Se[0]=36064,xt=!0);else 1029!==Se[0]&&(Se[0]=1029,xt=!0);xt&&(e.isWebGL2?i.drawBuffers(Se):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(Se))},useProgram:function tt(X){return p!==X&&(i.useProgram(X),p=X,!0)},setBlending:ue,setMaterial:function pe(X,ke){2===X.side?re(2884):_e(2884);let Se=1===X.side;ke&&(Se=!Se),Ee(Se),1===X.blending&&!1===X.transparent?ue(0):ue(X.blending,X.blendEquation,X.blendSrc,X.blendDst,X.blendEquationAlpha,X.blendSrcAlpha,X.blendDstAlpha,X.premultipliedAlpha),l.setFunc(X.depthFunc),l.setTest(X.depthTest),l.setMask(X.depthWrite),a.setMask(X.colorWrite);const xt=X.stencilWrite;c.setTest(xt),xt&&(c.setMask(X.stencilWriteMask),c.setFunc(X.stencilFunc,X.stencilRef,X.stencilFuncMask),c.setOp(X.stencilFail,X.stencilZFail,X.stencilZPass)),De(X.polygonOffset,X.polygonOffsetFactor,X.polygonOffsetUnits),!0===X.alphaToCoverage?_e(32926):re(32926)},setFlipSided:Ee,setCullFace:Ke,setLineWidth:function Ne(X){X!==N&&(I&&i.lineWidth(X),N=X)},setPolygonOffset:De,setScissorTest:function je(X){X?_e(3089):re(3089)},activeTexture:it,bindTexture:function $t(X,ke){null===P&&it();let Se=O[P];void 0===Se&&(Se={type:void 0,texture:void 0},O[P]=Se),(Se.type!==X||Se.texture!==ke)&&(i.bindTexture(X,ke||fe[X]),Se.type=X,Se.texture=ke)},unbindTexture:function xn(){const X=O[P];void 0!==X&&void 0!==X.type&&(i.bindTexture(X.type,null),X.type=void 0,X.texture=void 0)},compressedTexImage2D:function W(){try{i.compressedTexImage2D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},texImage2D:function dt(){try{i.texImage2D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},texImage3D:function U(){try{i.texImage3D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},texStorage2D:function Ue(){try{i.texStorage2D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},texStorage3D:function qe(){try{i.texStorage3D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},texSubImage2D:function B(){try{i.texSubImage2D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},texSubImage3D:function le(){try{i.texSubImage3D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},compressedTexSubImage2D:function Me(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}},scissor:function Ce(X){!1===Q.equals(X)&&(i.scissor(X.x,X.y,X.z,X.w),Q.copy(X))},viewport:function nt(X){!1===j.equals(X)&&(i.viewport(X.x,X.y,X.z,X.w),j.copy(X))},reset:function Pe(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===n&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),u={},P=null,O={},d={},h=new WeakMap,f=[],p=null,m=!1,g=null,_=null,v=null,y=null,b=null,x=null,w=null,E=!1,R=null,F=null,N=null,S=null,L=null,Q.set(0,0,i.canvas.width,i.canvas.height),j.set(0,0,i.canvas.width,i.canvas.height),a.reset(),l.reset(),c.reset()}}}function dEe(i,t,e,n,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let _=!1;try{_="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(W){}function v(W,B){return _?new OffscreenCanvas(W,B):J_("canvas")}function y(W,B,le,Me){let Ue=1;if((W.width>Me||W.height>Me)&&(Ue=Me/Math.max(W.width,W.height)),Ue<1||!0===B){if("undefined"!=typeof HTMLImageElement&&W instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&W instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&W instanceof ImageBitmap){const qe=B?Wx:Math.floor,dt=qe(Ue*W.width),U=qe(Ue*W.height);void 0===m&&(m=v(dt,U));const Ce=le?v(dt,U):m;return Ce.width=dt,Ce.height=U,Ce.getContext("2d").drawImage(W,0,0,dt,U),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+W.width+"x"+W.height+") to ("+dt+"x"+U+")."),Ce}return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+W.width+"x"+W.height+")."),W}return W}function b(W){return VA(W.width)&&VA(W.height)}function w(W,B){return W.generateMipmaps&&B&&W.minFilter!==or&&W.minFilter!==Fi}function E(W){i.generateMipmap(W)}function R(W,B,le,Me,Ue=!1){if(!1===a)return B;if(null!==W){if(void 0!==i[W])return i[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let qe=B;return 6403===B&&(5126===le&&(qe=33326),5131===le&&(qe=33325),5121===le&&(qe=33321)),33319===B&&(5126===le&&(qe=33328),5131===le&&(qe=33327),5121===le&&(qe=33323)),6408===B&&(5126===le&&(qe=34836),5131===le&&(qe=34842),5121===le&&(qe=Me===Dn&&!1===Ue?35907:32856),32819===le&&(qe=32854),32820===le&&(qe=32855)),(33325===qe||33326===qe||33327===qe||33328===qe||34842===qe||34836===qe)&&t.get("EXT_color_buffer_float"),qe}function F(W,B,le){return!0===w(W,le)||W.isFramebufferTexture&&W.minFilter!==or&&W.minFilter!==Fi?Math.log2(Math.max(B.width,B.height))+1:void 0!==W.mipmaps&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?B.mipmaps.length:1}function N(W){return W===or||1004===W||1005===W?9728:9729}function S(W){const B=W.target;B.removeEventListener("dispose",S),function Y(W){const B=n.get(W);if(void 0===B.__webglInit)return;const le=W.source,Me=g.get(le);if(Me){const Ue=Me[B.__cacheKey];Ue.usedTimes--,0===Ue.usedTimes&&I(W),0===Object.keys(Me).length&&g.delete(le)}n.remove(W)}(B),B.isVideoTexture&&p.delete(B)}function L(W){const B=W.target;B.removeEventListener("dispose",L),function z(W){const B=W.texture,le=n.get(W),Me=n.get(B);if(void 0!==Me.__webglTexture&&(i.deleteTexture(Me.__webglTexture),o.memory.textures--),W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let Ue=0;Ue<6;Ue++)i.deleteFramebuffer(le.__webglFramebuffer[Ue]),le.__webglDepthbuffer&&i.deleteRenderbuffer(le.__webglDepthbuffer[Ue]);else i.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&i.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&i.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer&&i.deleteRenderbuffer(le.__webglColorRenderbuffer),le.__webglDepthRenderbuffer&&i.deleteRenderbuffer(le.__webglDepthRenderbuffer);if(W.isWebGLMultipleRenderTargets)for(let Ue=0,qe=B.length;Ue<qe;Ue++){const dt=n.get(B[Ue]);dt.__webglTexture&&(i.deleteTexture(dt.__webglTexture),o.memory.textures--),n.remove(B[Ue])}n.remove(B),n.remove(W)}(B)}function I(W){const B=n.get(W);i.deleteTexture(B.__webglTexture),delete g.get(W.source)[B.__cacheKey],o.memory.textures--}let D=0;function K(W,B){const le=n.get(W);if(W.isVideoTexture&&function $t(W){const B=o.render.frame;p.get(W)!==B&&(p.set(W,B),W.update())}(W),!1===W.isRenderTargetTexture&&W.version>0&&le.__version!==W.version){const Me=W.image;if(null===Me)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Me.complete)return void Oe(le,W,B);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.activeTexture(33984+B),e.bindTexture(3553,le.__webglTexture)}const fe={[Yd]:10497,[_s]:33071,1002:33648},_e={[or]:9728,1004:9984,1005:9986,[Fi]:9729,1007:9985,[ou]:9987};function re(W,B,le){if(le?(i.texParameteri(W,10242,fe[B.wrapS]),i.texParameteri(W,10243,fe[B.wrapT]),(32879===W||35866===W)&&i.texParameteri(W,32882,fe[B.wrapR]),i.texParameteri(W,10240,_e[B.magFilter]),i.texParameteri(W,10241,_e[B.minFilter])):(i.texParameteri(W,10242,33071),i.texParameteri(W,10243,33071),(32879===W||35866===W)&&i.texParameteri(W,32882,33071),(B.wrapS!==_s||B.wrapT!==_s)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(W,10240,N(B.magFilter)),i.texParameteri(W,10241,N(B.minFilter)),B.minFilter!==or&&B.minFilter!==Fi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const Me=t.get("EXT_texture_filter_anisotropic");if(B.type===au&&!1===t.has("OES_texture_float_linear")||!1===a&&B.type===Sp&&!1===t.has("OES_texture_half_float_linear"))return;(B.anisotropy>1||n.get(B).__currentAnisotropy)&&(i.texParameterf(W,Me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,r.getMaxAnisotropy())),n.get(B).__currentAnisotropy=B.anisotropy)}}function Ae(W,B){let le=!1;void 0===W.__webglInit&&(W.__webglInit=!0,B.addEventListener("dispose",S));const Me=B.source;let Ue=g.get(Me);void 0===Ue&&(Ue={},g.set(Me,Ue));const qe=function q(W){const B=[];return B.push(W.wrapS),B.push(W.wrapT),B.push(W.magFilter),B.push(W.minFilter),B.push(W.anisotropy),B.push(W.internalFormat),B.push(W.format),B.push(W.type),B.push(W.generateMipmaps),B.push(W.premultiplyAlpha),B.push(W.flipY),B.push(W.unpackAlignment),B.push(W.encoding),B.join()}(B);if(qe!==W.__cacheKey){void 0===Ue[qe]&&(Ue[qe]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,le=!0),Ue[qe].usedTimes++;const dt=Ue[W.__cacheKey];void 0!==dt&&(Ue[W.__cacheKey].usedTimes--,0===dt.usedTimes&&I(B)),W.__cacheKey=qe,W.__webglTexture=Ue[qe].texture}return le}function Oe(W,B,le){let Me=3553;B.isDataArrayTexture&&(Me=35866),B.isData3DTexture&&(Me=32879);const Ue=Ae(W,B),qe=B.source;if(e.activeTexture(33984+le),e.bindTexture(Me,W.__webglTexture),qe.version!==qe.__currentVersion||!0===Ue){i.pixelStorei(37440,B.flipY),i.pixelStorei(37441,B.premultiplyAlpha),i.pixelStorei(3317,B.unpackAlignment),i.pixelStorei(37443,0);const dt=function x(W){return!a&&(W.wrapS!==_s||W.wrapT!==_s||W.minFilter!==or&&W.minFilter!==Fi)}(B)&&!1===b(B.image);let U=y(B.image,dt,!1,u);U=xn(B,U);const Ce=b(U)||a,nt=s.convert(B.format,B.encoding);let ke,Pe=s.convert(B.type),X=R(B.internalFormat,nt,Pe,B.encoding,B.isVideoTexture);re(Me,B,Ce);const Se=B.mipmaps,xt=a&&!0!==B.isVideoTexture,ze=void 0===W.__version,ht=F(B,U,Ce);if(B.isDepthTexture)X=6402,a?X=B.type===au?36012:1014===B.type?33190:B.type===Ep?35056:33189:B.type===au&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===Kd&&6402===X&&B.type!==q_&&1014!==B.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=q_,Pe=s.convert(B.type)),B.format===Tp&&6402===X&&(X=34041,B.type!==Ep&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=Ep,Pe=s.convert(B.type))),xt&&ze?e.texStorage2D(3553,1,X,U.width,U.height):e.texImage2D(3553,0,X,U.width,U.height,0,nt,Pe,null);else if(B.isDataTexture)if(Se.length>0&&Ce){xt&&ze&&e.texStorage2D(3553,ht,X,Se[0].width,Se[0].height);for(let Be=0,Bt=Se.length;Be<Bt;Be++)ke=Se[Be],xt?e.texSubImage2D(3553,Be,0,0,ke.width,ke.height,nt,Pe,ke.data):e.texImage2D(3553,Be,X,ke.width,ke.height,0,nt,Pe,ke.data);B.generateMipmaps=!1}else xt?(ze&&e.texStorage2D(3553,ht,X,U.width,U.height),e.texSubImage2D(3553,0,0,0,U.width,U.height,nt,Pe,U.data)):e.texImage2D(3553,0,X,U.width,U.height,0,nt,Pe,U.data);else if(B.isCompressedTexture){xt&&ze&&e.texStorage2D(3553,ht,X,Se[0].width,Se[0].height);for(let Be=0,Bt=Se.length;Be<Bt;Be++)ke=Se[Be],B.format!==Go?null!==nt?xt?e.compressedTexSubImage2D(3553,Be,0,0,ke.width,ke.height,nt,ke.data):e.compressedTexImage2D(3553,Be,X,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xt?e.texSubImage2D(3553,Be,0,0,ke.width,ke.height,nt,Pe,ke.data):e.texImage2D(3553,Be,X,ke.width,ke.height,0,nt,Pe,ke.data)}else if(B.isDataArrayTexture)xt?(ze&&e.texStorage3D(35866,ht,X,U.width,U.height,U.depth),e.texSubImage3D(35866,0,0,0,0,U.width,U.height,U.depth,nt,Pe,U.data)):e.texImage3D(35866,0,X,U.width,U.height,U.depth,0,nt,Pe,U.data);else if(B.isData3DTexture)xt?(ze&&e.texStorage3D(32879,ht,X,U.width,U.height,U.depth),e.texSubImage3D(32879,0,0,0,0,U.width,U.height,U.depth,nt,Pe,U.data)):e.texImage3D(32879,0,X,U.width,U.height,U.depth,0,nt,Pe,U.data);else if(B.isFramebufferTexture)xt&&ze?e.texStorage2D(3553,ht,X,U.width,U.height):e.texImage2D(3553,0,X,U.width,U.height,0,nt,Pe,null);else if(Se.length>0&&Ce){xt&&ze&&e.texStorage2D(3553,ht,X,Se[0].width,Se[0].height);for(let Be=0,Bt=Se.length;Be<Bt;Be++)ke=Se[Be],xt?e.texSubImage2D(3553,Be,0,0,nt,Pe,ke):e.texImage2D(3553,Be,X,nt,Pe,ke);B.generateMipmaps=!1}else xt?(ze&&e.texStorage2D(3553,ht,X,U.width,U.height),e.texSubImage2D(3553,0,0,0,nt,Pe,U)):e.texImage2D(3553,0,X,nt,Pe,U);w(B,Ce)&&E(Me),qe.__currentVersion=qe.version,B.onUpdate&&B.onUpdate(B)}W.__version=B.version}function ye(W,B,le,Me,Ue){const qe=s.convert(le.format,le.encoding),dt=s.convert(le.type),U=R(le.internalFormat,qe,dt,le.encoding);n.get(B).__hasExternalTextures||(32879===Ue||35866===Ue?e.texImage3D(Ue,0,U,B.width,B.height,B.depth,0,qe,dt,null):e.texImage2D(Ue,0,U,B.width,B.height,0,qe,dt,null)),e.bindFramebuffer(36160,W),it(B)?h.framebufferTexture2DMultisampleEXT(36160,Me,Ue,n.get(le).__webglTexture,0,je(B)):i.framebufferTexture2D(36160,Me,Ue,n.get(le).__webglTexture,0),e.bindFramebuffer(36160,null)}function vt(W,B,le){if(i.bindRenderbuffer(36161,W),B.depthBuffer&&!B.stencilBuffer){let Me=33189;if(le||it(B)){const Ue=B.depthTexture;Ue&&Ue.isDepthTexture&&(Ue.type===au?Me=36012:1014===Ue.type&&(Me=33190));const qe=je(B);it(B)?h.renderbufferStorageMultisampleEXT(36161,qe,Me,B.width,B.height):i.renderbufferStorageMultisample(36161,qe,Me,B.width,B.height)}else i.renderbufferStorage(36161,Me,B.width,B.height);i.framebufferRenderbuffer(36160,36096,36161,W)}else if(B.depthBuffer&&B.stencilBuffer){const Me=je(B);le&&!1===it(B)?i.renderbufferStorageMultisample(36161,Me,35056,B.width,B.height):it(B)?h.renderbufferStorageMultisampleEXT(36161,Me,35056,B.width,B.height):i.renderbufferStorage(36161,34041,B.width,B.height),i.framebufferRenderbuffer(36160,33306,36161,W)}else{const Me=!0===B.isWebGLMultipleRenderTargets?B.texture[0]:B.texture,Ue=s.convert(Me.format,Me.encoding),qe=s.convert(Me.type),dt=R(Me.internalFormat,Ue,qe,Me.encoding),U=je(B);le&&!1===it(B)?i.renderbufferStorageMultisample(36161,U,dt,B.width,B.height):it(B)?h.renderbufferStorageMultisampleEXT(36161,U,dt,B.width,B.height):i.renderbufferStorage(36161,dt,B.width,B.height)}i.bindRenderbuffer(36161,null)}function pe(W){const B=n.get(W),le=!0===W.isWebGLCubeRenderTarget;if(W.depthTexture&&!B.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");!function ue(W,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,W),!B.depthTexture||!B.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),K(B.depthTexture,0);const Me=n.get(B.depthTexture).__webglTexture,Ue=je(B);if(B.depthTexture.format===Kd)it(B)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,Me,0,Ue):i.framebufferTexture2D(36160,36096,3553,Me,0);else{if(B.depthTexture.format!==Tp)throw new Error("Unknown depthTexture format");it(B)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,Me,0,Ue):i.framebufferTexture2D(36160,33306,3553,Me,0)}}(B.__webglFramebuffer,W)}else if(le){B.__webglDepthbuffer=[];for(let Me=0;Me<6;Me++)e.bindFramebuffer(36160,B.__webglFramebuffer[Me]),B.__webglDepthbuffer[Me]=i.createRenderbuffer(),vt(B.__webglDepthbuffer[Me],W,!1)}else e.bindFramebuffer(36160,B.__webglFramebuffer),B.__webglDepthbuffer=i.createRenderbuffer(),vt(B.__webglDepthbuffer,W,!1);e.bindFramebuffer(36160,null)}function je(W){return Math.min(d,W.samples)}function it(W){const B=n.get(W);return a&&W.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==B.__useRenderToTexture}function xn(W,B){const le=W.encoding,Me=W.format,Ue=W.type;return!0===W.isCompressedTexture||!0===W.isVideoTexture||1035===W.format||le!==nc&&(le===Dn?!1===a?!0===t.has("EXT_sRGB")&&Me===Go?(W.format=1035,W.minFilter=Fi,W.generateMipmaps=!1):B=th.sRGBToLinear(B):(Me!==Go||Ue!==Xd)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",le)),B}this.allocateTextureUnit=function O(){const W=D;return W>=l&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+l),D+=1,W},this.resetTextureUnits=function P(){D=0},this.setTexture2D=K,this.setTexture2DArray=function Q(W,B){const le=n.get(W);W.version>0&&le.__version!==W.version?Oe(le,W,B):(e.activeTexture(33984+B),e.bindTexture(35866,le.__webglTexture))},this.setTexture3D=function j(W,B){const le=n.get(W);W.version>0&&le.__version!==W.version?Oe(le,W,B):(e.activeTexture(33984+B),e.bindTexture(32879,le.__webglTexture))},this.setTextureCube=function we(W,B){const le=n.get(W);W.version>0&&le.__version!==W.version?function tt(W,B,le){if(6!==B.image.length)return;const Me=Ae(W,B),Ue=B.source;if(e.activeTexture(33984+le),e.bindTexture(34067,W.__webglTexture),Ue.version!==Ue.__currentVersion||!0===Me){i.pixelStorei(37440,B.flipY),i.pixelStorei(37441,B.premultiplyAlpha),i.pixelStorei(3317,B.unpackAlignment),i.pixelStorei(37443,0);const qe=B.isCompressedTexture||B.image[0].isCompressedTexture,dt=B.image[0]&&B.image[0].isDataTexture,U=[];for(let Be=0;Be<6;Be++)U[Be]=qe||dt?dt?B.image[Be].image:B.image[Be]:y(B.image[Be],!1,!0,c),U[Be]=xn(B,U[Be]);const Ce=U[0],nt=b(Ce)||a,Pe=s.convert(B.format,B.encoding),X=s.convert(B.type),ke=R(B.internalFormat,Pe,X,B.encoding),Se=a&&!0!==B.isVideoTexture,xt=void 0===W.__version;let ht,ze=F(B,Ce,nt);if(re(34067,B,nt),qe){Se&&xt&&e.texStorage2D(34067,ze,ke,Ce.width,Ce.height);for(let Be=0;Be<6;Be++){ht=U[Be].mipmaps;for(let Bt=0;Bt<ht.length;Bt++){const Qn=ht[Bt];B.format!==Go?null!==Pe?Se?e.compressedTexSubImage2D(34069+Be,Bt,0,0,Qn.width,Qn.height,Pe,Qn.data):e.compressedTexImage2D(34069+Be,Bt,ke,Qn.width,Qn.height,0,Qn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Se?e.texSubImage2D(34069+Be,Bt,0,0,Qn.width,Qn.height,Pe,X,Qn.data):e.texImage2D(34069+Be,Bt,ke,Qn.width,Qn.height,0,Pe,X,Qn.data)}}}else{ht=B.mipmaps,Se&&xt&&(ht.length>0&&ze++,e.texStorage2D(34067,ze,ke,U[0].width,U[0].height));for(let Be=0;Be<6;Be++)if(dt){Se?e.texSubImage2D(34069+Be,0,0,0,U[Be].width,U[Be].height,Pe,X,U[Be].data):e.texImage2D(34069+Be,0,ke,U[Be].width,U[Be].height,0,Pe,X,U[Be].data);for(let Bt=0;Bt<ht.length;Bt++){const pn=ht[Bt].image[Be].image;Se?e.texSubImage2D(34069+Be,Bt+1,0,0,pn.width,pn.height,Pe,X,pn.data):e.texImage2D(34069+Be,Bt+1,ke,pn.width,pn.height,0,Pe,X,pn.data)}}else{Se?e.texSubImage2D(34069+Be,0,0,0,Pe,X,U[Be]):e.texImage2D(34069+Be,0,ke,Pe,X,U[Be]);for(let Bt=0;Bt<ht.length;Bt++){const Qn=ht[Bt];Se?e.texSubImage2D(34069+Be,Bt+1,0,0,Pe,X,Qn.image[Be]):e.texImage2D(34069+Be,Bt+1,ke,Pe,X,Qn.image[Be])}}}w(B,nt)&&E(34067),Ue.__currentVersion=Ue.version,B.onUpdate&&B.onUpdate(B)}W.__version=B.version}(le,W,B):(e.activeTexture(33984+B),e.bindTexture(34067,le.__webglTexture))},this.rebindTextures=function Ee(W,B,le){const Me=n.get(W);void 0!==B&&ye(Me.__webglFramebuffer,W,W.texture,36064,3553),void 0!==le&&pe(W)},this.setupRenderTarget=function Ke(W){const B=W.texture,le=n.get(W),Me=n.get(B);W.addEventListener("dispose",L),!0!==W.isWebGLMultipleRenderTargets&&(void 0===Me.__webglTexture&&(Me.__webglTexture=i.createTexture()),Me.__version=B.version,o.memory.textures++);const Ue=!0===W.isWebGLCubeRenderTarget,qe=!0===W.isWebGLMultipleRenderTargets,dt=b(W)||a;if(Ue){le.__webglFramebuffer=[];for(let U=0;U<6;U++)le.__webglFramebuffer[U]=i.createFramebuffer()}else if(le.__webglFramebuffer=i.createFramebuffer(),qe)if(r.drawBuffers){const U=W.texture;for(let Ce=0,nt=U.length;Ce<nt;Ce++){const Pe=n.get(U[Ce]);void 0===Pe.__webglTexture&&(Pe.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(a&&W.samples>0&&!1===it(W)){le.__webglMultisampledFramebuffer=i.createFramebuffer(),le.__webglColorRenderbuffer=i.createRenderbuffer(),i.bindRenderbuffer(36161,le.__webglColorRenderbuffer);const U=s.convert(B.format,B.encoding),Ce=s.convert(B.type),nt=R(B.internalFormat,U,Ce,B.encoding),Pe=je(W);i.renderbufferStorageMultisample(36161,Pe,nt,W.width,W.height),e.bindFramebuffer(36160,le.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064,36161,le.__webglColorRenderbuffer),i.bindRenderbuffer(36161,null),W.depthBuffer&&(le.__webglDepthRenderbuffer=i.createRenderbuffer(),vt(le.__webglDepthRenderbuffer,W,!0)),e.bindFramebuffer(36160,null)}if(Ue){e.bindTexture(34067,Me.__webglTexture),re(34067,B,dt);for(let U=0;U<6;U++)ye(le.__webglFramebuffer[U],W,B,36064,34069+U);w(B,dt)&&E(34067),e.unbindTexture()}else if(qe){const U=W.texture;for(let Ce=0,nt=U.length;Ce<nt;Ce++){const Pe=U[Ce],X=n.get(Pe);e.bindTexture(3553,X.__webglTexture),re(3553,Pe,dt),ye(le.__webglFramebuffer,W,Pe,36064+Ce,3553),w(Pe,dt)&&E(3553)}e.unbindTexture()}else{let U=3553;(W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(a?U=W.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),e.bindTexture(U,Me.__webglTexture),re(U,B,dt),ye(le.__webglFramebuffer,W,B,36064,U),w(B,dt)&&E(U),e.unbindTexture()}W.depthBuffer&&pe(W)},this.updateRenderTargetMipmap=function Ne(W){const B=b(W)||a,le=!0===W.isWebGLMultipleRenderTargets?W.texture:[W.texture];for(let Me=0,Ue=le.length;Me<Ue;Me++){const qe=le[Me];if(w(qe,B)){const dt=W.isWebGLCubeRenderTarget?34067:3553,U=n.get(qe).__webglTexture;e.bindTexture(dt,U),E(dt),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function De(W){if(a&&W.samples>0&&!1===it(W)){const B=W.width,le=W.height;let Me=16384;const Ue=[36064],qe=W.stencilBuffer?33306:36096;W.depthBuffer&&Ue.push(qe);const dt=n.get(W),U=void 0!==dt.__ignoreDepthValues&&dt.__ignoreDepthValues;!1===U&&(W.depthBuffer&&(Me|=256),W.stencilBuffer&&(Me|=1024)),e.bindFramebuffer(36008,dt.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,dt.__webglFramebuffer),!0===U&&(i.invalidateFramebuffer(36008,[qe]),i.invalidateFramebuffer(36009,[qe])),i.blitFramebuffer(0,0,B,le,0,0,B,le,Me,9728),f&&i.invalidateFramebuffer(36008,Ue),e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,dt.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=pe,this.setupFrameBufferTexture=ye,this.useMultisampledRTT=it}function hEe(i,t,e){const n=e.isWebGL2;return{convert:function r(s,o=null){let a;if(s===Xd)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(s===q_)return 5123;if(1013===s)return 5124;if(1014===s)return 5125;if(s===au)return 5126;if(s===Sp)return n?5131:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===Go)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===Kd)return 6402;if(s===Tp)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===Dn){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===Dn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===Dn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===Ep?n?34042:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}_R.prototype.isMeshDistanceMaterial=!0;class IW extends Mr{constructor(t=[]){super(),this.cameras=t}}IW.prototype.isArrayCamera=!0;class uc extends An{constructor(){super(),this.type="Group"}}uc.prototype.isGroup=!0;const fEe={type:"move"};class vR{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new uc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new uc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new V,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new V),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new uc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new V,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new V),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==a&&(r=e.getPose(t.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(fEe))),c&&t.hand){o=!0;for(const m of t.hand.values()){const g=e.getJointPose(m,n);if(void 0===c.joints[m.jointName]){const v=new uc;v.matrixAutoUpdate=!1,v.visible=!1,c.joints[m.jointName]=v,c.add(v)}const _=c.joints[m.jointName];null!==g&&(_.matrix.fromArray(g.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=g.radius),_.visible=null!==g}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==l&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}}class kW extends ns{constructor(t,e,n,r,s,o,a,l,c,u){if((u=void 0!==u?u:Kd)!==Kd&&u!==Tp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Kd&&(n=q_),void 0===n&&u===Tp&&(n=Ep),super(null,r,s,o,a,l,u,n,c),this.image={width:t,height:e},this.magFilter=void 0!==a?a:or,this.minFilter=void 0!==l?l:or,this.flipY=!1,this.generateMipmaps=!1}}kW.prototype.isDepthTexture=!0;class pEe extends lu{constructor(t,e){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=null,c=null,u=null,d=null,h=null;const f=e.getContextAttributes();let p=null,m=null;const g=[],_=new Map,v=new Mr;v.layers.enable(1),v.viewport=new Nn;const y=new Mr;y.layers.enable(2),y.viewport=new Nn;const b=[v,y],x=new IW;x.layers.enable(1),x.layers.enable(2);let w=null,E=null;function R(O){const q=_.get(O.inputSource);q&&q.dispatchEvent({type:O.type,data:O.inputSource})}function F(){_.forEach(function(O,q){O.disconnect(q)}),_.clear(),w=null,E=null,t.setRenderTarget(p),d=null,u=null,c=null,r=null,m=null,P.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function N(O){const q=r.inputSources;for(let K=0;K<g.length;K++)_.set(q[K],g[K]);for(let K=0;K<O.removed.length;K++){const Q=O.removed[K],j=_.get(Q);j&&(j.dispatchEvent({type:"disconnected",data:Q}),_.delete(Q))}for(let K=0;K<O.added.length;K++){const Q=O.added[K],j=_.get(Q);j&&j.dispatchEvent({type:"connected",data:Q})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let q=g[O];return void 0===q&&(q=new vR,g[O]=q),q.getTargetRaySpace()},this.getControllerGrip=function(O){let q=g[O];return void 0===q&&(q=new vR,g[O]=q),q.getGripSpace()},this.getHand=function(O){let q=g[O];return void 0===q&&(q=new vR,g[O]=q),q.getHandSpace()},this.setFramebufferScaleFactor=function(O){s=O,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){a=O,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return null!==u?u:d},this.getBinding=function(){return c},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=function(){var O=nr(function*(q){if(r=q,null!==r){if(p=t.getRenderTarget(),r.addEventListener("select",R),r.addEventListener("selectstart",R),r.addEventListener("selectend",R),r.addEventListener("squeeze",R),r.addEventListener("squeezestart",R),r.addEventListener("squeezeend",R),r.addEventListener("end",F),r.addEventListener("inputsourceschange",N),!0!==f.xrCompatible&&(yield e.makeXRCompatible()),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2)d=new XRWebGLLayer(r,e,{antialias:void 0!==r.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:d}),m=new co(d.framebufferWidth,d.framebufferHeight,{format:Go,type:Xd,encoding:t.outputEncoding});else{let K=null,Q=null,j=null;f.depth&&(j=f.stencil?35056:33190,K=f.stencil?Tp:Kd,Q=f.stencil?Ep:q_);const we={colorFormat:t.outputEncoding===Dn?35907:32856,depthFormat:j,scaleFactor:s};c=new XRWebGLBinding(r,e),u=c.createProjectionLayer(we),r.updateRenderState({layers:[u]}),m=new co(u.textureWidth,u.textureHeight,{format:Go,type:Xd,depthTexture:new kW(u.textureWidth,u.textureHeight,Q,void 0,void 0,void 0,void 0,void 0,void 0,K),stencilBuffer:f.stencil,encoding:t.outputEncoding,samples:f.antialias?4:0}),t.properties.get(m).__ignoreDepthValues=u.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),o=yield r.requestReferenceSpace(a),P.setContext(r),P.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(q){return O.apply(this,arguments)}}();const S=new V,L=new V;function I(O,q){null===q?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(q.matrixWorld,O.matrix),O.matrixWorldInverse.copy(O.matrixWorld).invert()}this.updateCamera=function(O){if(null===r)return;x.near=y.near=v.near=O.near,x.far=y.far=v.far=O.far,(w!==x.near||E!==x.far)&&(r.updateRenderState({depthNear:x.near,depthFar:x.far}),w=x.near,E=x.far);const q=O.parent,K=x.cameras;I(x,q);for(let j=0;j<K.length;j++)I(K[j],q);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),O.position.copy(x.position),O.quaternion.copy(x.quaternion),O.scale.copy(x.scale),O.matrix.copy(x.matrix),O.matrixWorld.copy(x.matrixWorld);const Q=O.children;for(let j=0,we=Q.length;j<we;j++)Q[j].updateMatrixWorld(!0);2===K.length?function Y(O,q,K){S.setFromMatrixPosition(q.matrixWorld),L.setFromMatrixPosition(K.matrixWorld);const Q=S.distanceTo(L),j=q.projectionMatrix.elements,we=K.projectionMatrix.elements,fe=j[14]/(j[10]-1),_e=j[14]/(j[10]+1),re=(j[9]+1)/j[5],Ae=(j[9]-1)/j[5],Oe=(j[8]-1)/j[0],tt=(we[8]+1)/we[0],ye=fe*Oe,vt=fe*tt,ue=Q/(-Oe+tt),pe=ue*-Oe;q.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(pe),O.translateZ(ue),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.copy(O.matrixWorld).invert();const Ee=fe+ue,Ke=_e+ue;O.projectionMatrix.makePerspective(ye-pe,vt+(Q-pe),re*_e/Ke*Ee,Ae*_e/Ke*Ee,Ee,Ke)}(x,v,y):x.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return x},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==d?d.fixedFoveation:void 0},this.setFoveation=function(O){null!==u&&(u.fixedFoveation=O),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=O)};let z=null;const P=new eW;P.setAnimationLoop(function D(O,q){if(l=q.getViewerPose(o),h=q,null!==l){const Q=l.views;null!==d&&(t.setRenderTargetFramebuffer(m,d.framebuffer),t.setRenderTarget(m));let j=!1;Q.length!==x.cameras.length&&(x.cameras.length=0,j=!0);for(let we=0;we<Q.length;we++){const fe=Q[we];let _e=null;if(null!==d)_e=d.getViewport(fe);else{const Ae=c.getViewSubImage(u,fe);_e=Ae.viewport,0===we&&(t.setRenderTargetTextures(m,Ae.colorTexture,u.ignoreDepthValues?void 0:Ae.depthStencilTexture),t.setRenderTarget(m))}const re=b[we];re.matrix.fromArray(fe.transform.matrix),re.projectionMatrix.fromArray(fe.projectionMatrix),re.viewport.set(_e.x,_e.y,_e.width,_e.height),0===we&&x.matrix.copy(re.matrix),!0===j&&x.cameras.push(re)}}const K=r.inputSources;for(let Q=0;Q<g.length;Q++)g[Q].update(K[Q],q,o);z&&z(O,q),h=null}),this.setAnimationLoop=function(O){z=O},this.dispose=function(){}}}function mEe(i,t){function r(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,1===g.side&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),1===g.side&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const _=t.get(g).envMap;if(_&&(m.envMap.value=_,m.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const b=!0!==i.physicallyCorrectLights?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*b}let v,y;g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity),g.map?v=g.map:g.specularMap?v=g.specularMap:g.displacementMap?v=g.displacementMap:g.normalMap?v=g.normalMap:g.bumpMap?v=g.bumpMap:g.roughnessMap?v=g.roughnessMap:g.metalnessMap?v=g.metalnessMap:g.alphaMap?v=g.alphaMap:g.emissiveMap?v=g.emissiveMap:g.clearcoatMap?v=g.clearcoatMap:g.clearcoatNormalMap?v=g.clearcoatNormalMap:g.clearcoatRoughnessMap?v=g.clearcoatRoughnessMap:g.specularIntensityMap?v=g.specularIntensityMap:g.specularColorMap?v=g.specularColorMap:g.transmissionMap?v=g.transmissionMap:g.thicknessMap?v=g.thicknessMap:g.sheenColorMap?v=g.sheenColorMap:g.sheenRoughnessMap&&(v=g.sheenRoughnessMap),void 0!==v&&(v.isWebGLRenderTarget&&(v=v.texture),!0===v.matrixAutoUpdate&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix)),g.aoMap?y=g.aoMap:g.lightMap&&(y=g.lightMap),void 0!==y&&(y.isWebGLRenderTarget&&(y=y.texture),!0===y.matrixAutoUpdate&&y.updateMatrix(),m.uv2Transform.value.copy(y.matrix))}return{refreshFogUniforms:function e(m,g){m.fogColor.value.copy(g.color),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)},refreshMaterialUniforms:function n(m,g,_,v,y){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(m,g):g.isMeshToonMaterial?(r(m,g),function u(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}(m,g)):g.isMeshPhongMaterial?(r(m,g),function c(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}(m,g)):g.isMeshStandardMaterial?(r(m,g),function d(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),t.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}(m,g),g.isMeshPhysicalMaterial&&function h(m,g,_){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,1===g.side&&m.clearcoatNormalScale.value.negate())),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=_.texture,m.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}(m,g,y)):g.isMeshMatcapMaterial?(r(m,g),function f(m,g){g.matcap&&(m.matcap.value=g.matcap)}(m,g)):g.isMeshDepthMaterial?r(m,g):g.isMeshDistanceMaterial?(r(m,g),function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}(m,g)):g.isMeshNormalMaterial?r(m,g):g.isLineBasicMaterial?(function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}(m,g),g.isLineDashedMaterial&&function o(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}(m,g)):g.isPointsMaterial?function a(m,g,_,v){let y;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*_,m.scale.value=.5*v,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?y=g.map:g.alphaMap&&(y=g.alphaMap),void 0!==y&&(!0===y.matrixAutoUpdate&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix))}(m,g,_,v):g.isSpriteMaterial?function l(m,g){let _;m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest),g.map?_=g.map:g.alphaMap&&(_=g.alphaMap),void 0!==_&&(!0===_.matrixAutoUpdate&&_.updateMatrix(),m.uvTransform.value.copy(_.matrix))}(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function Bn(i={}){const t=void 0!==i.canvas?i.canvas:function gEe(){const i=J_("canvas");return i.style.display="block",i}(),e=void 0!==i.context?i.context:null,n=void 0===i.depth||i.depth,r=void 0===i.stencil||i.stencil,s=void 0!==i.antialias&&i.antialias,o=void 0===i.premultipliedAlpha||i.premultipliedAlpha,a=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,l=void 0!==i.powerPreference?i.powerPreference:"default",c=void 0!==i.failIfMajorPerformanceCaveat&&i.failIfMajorPerformanceCaveat;let u;u=void 0!==i.context?e.getContextAttributes().alpha:void 0!==i.alpha&&i.alpha;let d=null,h=null;const f=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=nc,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const m=this;let g=!1,_=0,v=0,y=null,b=-1,x=null;const w=new Nn,E=new Nn;let R=null,F=t.width,N=t.height,S=1,L=null,Y=null;const I=new Nn(0,0,F,N),z=new Nn(0,0,F,N);let D=!1;const P=new fw;let O=!1,q=!1,K=null;const Q=new lt,j=new me,we=new V,fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function _e(){return null===y?S:1}let Oe,tt,ye,vt,ue,pe,Ee,Ke,Ne,De,je,it,$t,xn,W,B,le,Me,Ue,qe,dt,U,Ce,re=e;function Ae(G,ne){for(let ce=0;ce<G.length;ce++){const ge=t.getContext(G[ce],ne);if(null!==ge)return ge}return null}try{const G={alpha:!0,depth:n,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r139"),t.addEventListener("webglcontextlost",X,!1),t.addEventListener("webglcontextrestored",ke,!1),null===re){const ne=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&ne.shift(),re=Ae(ne,G),null===re)throw Ae(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===re.getShaderPrecisionFormat&&(re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}function nt(){Oe=new PCe(re),tt=new DCe(re,Oe,i),Oe.init(tt),U=new hEe(re,Oe,tt),ye=new uEe(re,Oe,tt),vt=new NCe(re),ue=new JSe,pe=new dEe(re,Oe,ye,ue,tt,U,vt),Ee=new RCe(m),Ke=new OCe(m),Ne=new Awe(re,tt),Ce=new ECe(re,Oe,Ne,tt),De=new LCe(re,Ne,vt,Ce),je=new UCe(re,De,Ne,vt),Ue=new HCe(re,tt,pe),B=new ACe(ue),it=new QSe(m,Ee,Ke,Oe,tt,Ce,B),$t=new mEe(m,ue),xn=new tEe,W=new aEe(Oe,tt),Me=new SCe(m,Ee,ye,je,u,o),le=new RW(m,je,tt),qe=new TCe(re,Oe,vt,tt),dt=new FCe(re,Oe,vt,tt),vt.programs=it.programs,m.capabilities=tt,m.extensions=Oe,m.properties=ue,m.renderLists=xn,m.shadowMap=le,m.state=ye,m.info=vt}nt();const Pe=new pEe(m,re);function X(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ke(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const G=vt.autoReset,ne=le.enabled,ce=le.autoUpdate,oe=le.needsUpdate,ge=le.type;nt(),vt.autoReset=G,le.enabled=ne,le.autoUpdate=ce,le.needsUpdate=oe,le.type=ge}function Se(G){const ne=G.target;ne.removeEventListener("dispose",Se),function xt(G){(function ze(G){const ne=ue.get(G).programs;void 0!==ne&&(ne.forEach(function(ce){it.releaseProgram(ce)}),G.isShaderMaterial&&it.releaseShaderCache(G))})(G),ue.remove(G)}(ne)}this.xr=Pe,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const G=Oe.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=Oe.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return S},this.setPixelRatio=function(G){void 0!==G&&(S=G,this.setSize(F,N,!1))},this.getSize=function(G){return G.set(F,N)},this.setSize=function(G,ne,ce){Pe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(F=G,N=ne,t.width=Math.floor(G*S),t.height=Math.floor(ne*S),!1!==ce&&(t.style.width=G+"px",t.style.height=ne+"px"),this.setViewport(0,0,G,ne))},this.getDrawingBufferSize=function(G){return G.set(F*S,N*S).floor()},this.setDrawingBufferSize=function(G,ne,ce){F=G,N=ne,S=ce,t.width=Math.floor(G*ce),t.height=Math.floor(ne*ce),this.setViewport(0,0,G,ne)},this.getCurrentViewport=function(G){return G.copy(w)},this.getViewport=function(G){return G.copy(I)},this.setViewport=function(G,ne,ce,oe){G.isVector4?I.set(G.x,G.y,G.z,G.w):I.set(G,ne,ce,oe),ye.viewport(w.copy(I).multiplyScalar(S).floor())},this.getScissor=function(G){return G.copy(z)},this.setScissor=function(G,ne,ce,oe){G.isVector4?z.set(G.x,G.y,G.z,G.w):z.set(G,ne,ce,oe),ye.scissor(E.copy(z).multiplyScalar(S).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(G){ye.setScissorTest(D=G)},this.setOpaqueSort=function(G){L=G},this.setTransparentSort=function(G){Y=G},this.getClearColor=function(G){return G.copy(Me.getClearColor())},this.setClearColor=function(){Me.setClearColor.apply(Me,arguments)},this.getClearAlpha=function(){return Me.getClearAlpha()},this.setClearAlpha=function(){Me.setClearAlpha.apply(Me,arguments)},this.clear=function(G=!0,ne=!0,ce=!0){let oe=0;G&&(oe|=16384),ne&&(oe|=256),ce&&(oe|=1024),re.clear(oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",X,!1),t.removeEventListener("webglcontextrestored",ke,!1),xn.dispose(),W.dispose(),ue.dispose(),Ee.dispose(),Ke.dispose(),je.dispose(),Ce.dispose(),it.dispose(),Pe.dispose(),Pe.removeEventListener("sessionstart",Bt),Pe.removeEventListener("sessionend",Qn),K&&(K.dispose(),K=null),pn.stop()},this.renderBufferDirect=function(G,ne,ce,oe,ge,Tt){null===ne&&(ne=fe);const Vt=ge.isMesh&&ge.matrixWorld.determinant()<0,yt=function Ph(G,ne,ce,oe,ge){!0!==ne.isScene&&(ne=fe),pe.resetTextureUnits();const Tt=ne.fog,yt=null===y?m.outputEncoding:!0===y.isXRRenderTarget?y.texture.encoding:nc,wt=(oe.isMeshStandardMaterial?Ke:Ee).get(oe.envMap||(oe.isMeshStandardMaterial?ne.environment:null)),Sn=!0===oe.vertexColors&&!!ce.attributes.color&&4===ce.attributes.color.itemSize,_n=!!oe.normalMap&&!!ce.attributes.tangent,vn=!!ce.morphAttributes.position,Vi=!!ce.morphAttributes.normal,Lh=!!ce.morphAttributes.color,Im=oe.toneMapped?m.toneMapping:0,km=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,ml=void 0!==km?km.length:0,Pn=ue.get(oe),Om=h.state.lights;!0!==O||!0!==q&&G===x||B.setState(oe,G,G===x&&oe.id===b);let dr=!1;oe.version===Pn.__version?(Pn.needsLights&&Pn.lightsStateVersion!==Om.state.version||Pn.outputEncoding!==yt||ge.isInstancedMesh&&!1===Pn.instancing||!ge.isInstancedMesh&&!0===Pn.instancing||ge.isSkinnedMesh&&!1===Pn.skinning||!ge.isSkinnedMesh&&!0===Pn.skinning||Pn.envMap!==wt||oe.fog&&Pn.fog!==Tt||void 0!==Pn.numClippingPlanes&&(Pn.numClippingPlanes!==B.numPlanes||Pn.numIntersection!==B.numIntersection)||Pn.vertexAlphas!==Sn||Pn.vertexTangents!==_n||Pn.morphTargets!==vn||Pn.morphNormals!==Vi||Pn.morphColors!==Lh||Pn.toneMapping!==Im||!0===tt.isWebGL2&&Pn.morphTargetsCount!==ml)&&(dr=!0):(dr=!0,Pn.__version=oe.version);let gl=Pn.currentProgram;!0===dr&&(gl=Cc(oe,ne,ge));let Vu=!1,Jv=!1,nk=!1;const ls=gl.getUniforms(),ey=Pn.uniforms;if(ye.useProgram(gl.program)&&(Vu=!0,Jv=!0,nk=!0),oe.id!==b&&(b=oe.id,Jv=!0),Vu||x!==G){if(ls.setValue(re,"projectionMatrix",G.projectionMatrix),tt.logarithmicDepthBuffer&&ls.setValue(re,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),x!==G&&(x=G,Jv=!0,nk=!0),oe.isShaderMaterial||oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshStandardMaterial||oe.envMap){const Oa=ls.map.cameraPosition;void 0!==Oa&&Oa.setValue(re,we.setFromMatrixPosition(G.matrixWorld))}(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&ls.setValue(re,"isOrthographic",!0===G.isOrthographicCamera),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial||oe.isShadowMaterial||ge.isSkinnedMesh)&&ls.setValue(re,"viewMatrix",G.matrixWorldInverse)}if(ge.isSkinnedMesh){ls.setOptional(re,ge,"bindMatrix"),ls.setOptional(re,ge,"bindMatrixInverse");const Oa=ge.skeleton;Oa&&(tt.floatVertexTextures?(null===Oa.boneTexture&&Oa.computeBoneTexture(),ls.setValue(re,"boneTexture",Oa.boneTexture,pe),ls.setValue(re,"boneTextureSize",Oa.boneTextureSize)):ls.setOptional(re,Oa,"boneMatrices"))}const ik=ce.morphAttributes;return(void 0!==ik.position||void 0!==ik.normal||void 0!==ik.color&&!0===tt.isWebGL2)&&Ue.update(ge,ce,oe,gl),(Jv||Pn.receiveShadow!==ge.receiveShadow)&&(Pn.receiveShadow=ge.receiveShadow,ls.setValue(re,"receiveShadow",ge.receiveShadow)),Jv&&(ls.setValue(re,"toneMappingExposure",m.toneMappingExposure),Pn.needsLights&&function GM(G,ne){G.ambientLightColor.needsUpdate=ne,G.lightProbe.needsUpdate=ne,G.directionalLights.needsUpdate=ne,G.directionalLightShadows.needsUpdate=ne,G.pointLights.needsUpdate=ne,G.pointLightShadows.needsUpdate=ne,G.spotLights.needsUpdate=ne,G.spotLightShadows.needsUpdate=ne,G.rectAreaLights.needsUpdate=ne,G.hemisphereLights.needsUpdate=ne}(ey,nk),Tt&&oe.fog&&$t.refreshFogUniforms(ey,Tt),$t.refreshMaterialUniforms(ey,oe,S,N,K),_u.upload(re,Pn.uniformsList,ey,pe)),oe.isShaderMaterial&&!0===oe.uniformsNeedUpdate&&(_u.upload(re,Pn.uniformsList,ey,pe),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&ls.setValue(re,"center",ge.center),ls.setValue(re,"modelViewMatrix",ge.modelViewMatrix),ls.setValue(re,"normalMatrix",ge.normalMatrix),ls.setValue(re,"modelMatrix",ge.matrixWorld),gl}(G,ne,ce,oe,ge);ye.setMaterial(oe,Vt);let wt=ce.index;const Sn=ce.attributes.position;if(null===wt){if(void 0===Sn||0===Sn.count)return}else if(0===wt.count)return;let _n=1;!0===oe.wireframe&&(wt=De.getWireframeAttribute(ce),_n=2),Ce.setup(ge,oe,yt,ce,wt);let vn,Vi=qe;null!==wt&&(vn=Ne.get(wt),Vi=dt,Vi.setIndex(vn));const Lh=null!==wt?wt.count:Sn.count,Im=ce.drawRange.start*_n,km=ce.drawRange.count*_n,ml=null!==Tt?Tt.start*_n:0,Pn=null!==Tt?Tt.count*_n:1/0,Om=Math.max(Im,ml),dr=Math.min(Lh,Im+km,ml+Pn)-1,gl=Math.max(0,dr-Om+1);if(0!==gl){if(ge.isMesh)!0===oe.wireframe?(ye.setLineWidth(oe.wireframeLinewidth*_e()),Vi.setMode(1)):Vi.setMode(4);else if(ge.isLine){let Vu=oe.linewidth;void 0===Vu&&(Vu=1),ye.setLineWidth(Vu*_e()),Vi.setMode(ge.isLineSegments?1:ge.isLineLoop?2:3)}else ge.isPoints?Vi.setMode(0):ge.isSprite&&Vi.setMode(4);if(ge.isInstancedMesh)Vi.renderInstances(Om,gl,ge.count);else if(ce.isInstancedBufferGeometry){const Vu=Math.min(ce.instanceCount,ce._maxInstanceCount);Vi.renderInstances(Om,gl,Vu)}else Vi.render(Om,gl)}},this.compile=function(G,ne){h=W.get(G),h.init(),p.push(h),G.traverseVisible(function(ce){ce.isLight&&ce.layers.test(ne.layers)&&(h.pushLight(ce),ce.castShadow&&h.pushShadow(ce))}),h.setupLights(m.physicallyCorrectLights),G.traverse(function(ce){const oe=ce.material;if(oe)if(Array.isArray(oe))for(let ge=0;ge<oe.length;ge++)Cc(oe[ge],G,ce);else Cc(oe,G,ce)}),p.pop(),h=null};let ht=null;function Bt(){pn.stop()}function Qn(){pn.start()}const pn=new eW;function _o(G,ne,ce,oe){if(!1===G.visible)return;if(G.layers.test(ne.layers))if(G.isGroup)ce=G.renderOrder;else if(G.isLOD)!0===G.autoUpdate&&G.update(ne);else if(G.isLight)h.pushLight(G),G.castShadow&&h.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||P.intersectsSprite(G)){oe&&we.setFromMatrixPosition(G.matrixWorld).applyMatrix4(Q);const Vt=je.update(G),yt=G.material;yt.visible&&d.push(G,Vt,yt,ce,we.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(G.isSkinnedMesh&&G.skeleton.frame!==vt.render.frame&&(G.skeleton.update(),G.skeleton.frame=vt.render.frame),!G.frustumCulled||P.intersectsObject(G))){oe&&we.setFromMatrixPosition(G.matrixWorld).applyMatrix4(Q);const Vt=je.update(G),yt=G.material;if(Array.isArray(yt)){const wt=Vt.groups;for(let Sn=0,_n=wt.length;Sn<_n;Sn++){const vn=wt[Sn],Vi=yt[vn.materialIndex];Vi&&Vi.visible&&d.push(G,Vt,Vi,ce,we.z,vn)}}else yt.visible&&d.push(G,Vt,yt,ce,we.z,null)}const Tt=G.children;for(let Vt=0,yt=Tt.length;Vt<yt;Vt++)_o(Tt[Vt],ne,ce,oe)}function vo(G,ne,ce,oe){const ge=G.opaque,Tt=G.transmissive,Vt=G.transparent;h.setupLightsView(ce),Tt.length>0&&function Zv(G,ne,ce){const oe=tt.isWebGL2;null===K&&(K=new co(1,1,{generateMipmaps:!0,type:null!==U.convert(Sp)?Sp:Xd,minFilter:ou,samples:oe&&!0===s?4:0})),m.getDrawingBufferSize(j),oe?K.setSize(j.x,j.y):K.setSize(Wx(j.x),Wx(j.y));const ge=m.getRenderTarget();m.setRenderTarget(K),m.clear();const Tt=m.toneMapping;m.toneMapping=0,Oh(G,ne,ce),m.toneMapping=Tt,pe.updateMultisampleRenderTarget(K),pe.updateRenderTargetMipmap(K),m.setRenderTarget(ge)}(ge,ne,ce),oe&&ye.viewport(w.copy(oe)),ge.length>0&&Oh(ge,ne,ce),Tt.length>0&&Oh(Tt,ne,ce),Vt.length>0&&Oh(Vt,ne,ce),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function Oh(G,ne,ce){const oe=!0===ne.isScene?ne.overrideMaterial:null;for(let ge=0,Tt=G.length;ge<Tt;ge++){const Vt=G[ge],yt=Vt.object,wt=Vt.geometry,Sn=null===oe?Vt.material:oe,_n=Vt.group;yt.layers.test(ce.layers)&&Qv(yt,ne,ce,wt,Sn,_n)}}function Qv(G,ne,ce,oe,ge,Tt){G.onBeforeRender(m,ne,ce,oe,ge,Tt),G.modelViewMatrix.multiplyMatrices(ce.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),ge.onBeforeRender(m,ne,ce,oe,G,Tt),!0===ge.transparent&&2===ge.side?(ge.side=1,ge.needsUpdate=!0,m.renderBufferDirect(ce,ne,oe,ge,G,Tt),ge.side=0,ge.needsUpdate=!0,m.renderBufferDirect(ce,ne,oe,ge,G,Tt),ge.side=2):m.renderBufferDirect(ce,ne,oe,ge,G,Tt),G.onAfterRender(m,ne,ce,oe,ge,Tt)}function Cc(G,ne,ce){!0!==ne.isScene&&(ne=fe);const oe=ue.get(G),ge=h.state.lights,Vt=ge.state.version,yt=it.getParameters(G,ge.state,h.state.shadowsArray,ne,ce),wt=it.getProgramCacheKey(yt);let Sn=oe.programs;oe.environment=G.isMeshStandardMaterial?ne.environment:null,oe.fog=ne.fog,oe.envMap=(G.isMeshStandardMaterial?Ke:Ee).get(G.envMap||oe.environment),void 0===Sn&&(G.addEventListener("dispose",Se),Sn=new Map,oe.programs=Sn);let _n=Sn.get(wt);if(void 0!==_n){if(oe.currentProgram===_n&&oe.lightsStateVersion===Vt)return Bu(G,yt),_n}else yt.uniforms=it.getUniforms(G),G.onBuild(ce,yt,m),G.onBeforeCompile(yt,m),_n=it.acquireProgram(yt,wt),Sn.set(wt,_n),oe.uniforms=yt.uniforms;const vn=oe.uniforms;(!G.isShaderMaterial&&!G.isRawShaderMaterial||!0===G.clipping)&&(vn.clippingPlanes=B.uniform),Bu(G,yt),oe.needsLights=function WM(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&!0===G.lights}(G),oe.lightsStateVersion=Vt,oe.needsLights&&(vn.ambientLightColor.value=ge.state.ambient,vn.lightProbe.value=ge.state.probe,vn.directionalLights.value=ge.state.directional,vn.directionalLightShadows.value=ge.state.directionalShadow,vn.spotLights.value=ge.state.spot,vn.spotLightShadows.value=ge.state.spotShadow,vn.rectAreaLights.value=ge.state.rectArea,vn.ltc_1.value=ge.state.rectAreaLTC1,vn.ltc_2.value=ge.state.rectAreaLTC2,vn.pointLights.value=ge.state.point,vn.pointLightShadows.value=ge.state.pointShadow,vn.hemisphereLights.value=ge.state.hemi,vn.directionalShadowMap.value=ge.state.directionalShadowMap,vn.directionalShadowMatrix.value=ge.state.directionalShadowMatrix,vn.spotShadowMap.value=ge.state.spotShadowMap,vn.spotShadowMatrix.value=ge.state.spotShadowMatrix,vn.pointShadowMap.value=ge.state.pointShadowMap,vn.pointShadowMatrix.value=ge.state.pointShadowMatrix);const Vi=_n.getUniforms(),Lh=_u.seqWithValue(Vi.seq,vn);return oe.currentProgram=_n,oe.uniformsList=Lh,_n}function Bu(G,ne){const ce=ue.get(G);ce.outputEncoding=ne.outputEncoding,ce.instancing=ne.instancing,ce.skinning=ne.skinning,ce.morphTargets=ne.morphTargets,ce.morphNormals=ne.morphNormals,ce.morphColors=ne.morphColors,ce.morphTargetsCount=ne.morphTargetsCount,ce.numClippingPlanes=ne.numClippingPlanes,ce.numIntersection=ne.numClipIntersection,ce.vertexAlphas=ne.vertexAlphas,ce.vertexTangents=ne.vertexTangents,ce.toneMapping=ne.toneMapping}pn.setAnimationLoop(function Be(G){ht&&ht(G)}),"undefined"!=typeof self&&pn.setContext(self),this.setAnimationLoop=function(G){ht=G,Pe.setAnimationLoop(G),null===G?pn.stop():pn.start()},Pe.addEventListener("sessionstart",Bt),Pe.addEventListener("sessionend",Qn),this.render=function(G,ne){if(void 0===ne||!0===ne.isCamera){if(!0!==g){if(!0===G.autoUpdate&&G.updateMatrixWorld(),null===ne.parent&&ne.updateMatrixWorld(),!0===Pe.enabled&&!0===Pe.isPresenting&&(!0===Pe.cameraAutoUpdate&&Pe.updateCamera(ne),ne=Pe.getCamera()),!0===G.isScene&&G.onBeforeRender(m,G,ne,y),h=W.get(G,p.length),h.init(),p.push(h),Q.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),P.setFromProjectionMatrix(Q),q=this.localClippingEnabled,O=B.init(this.clippingPlanes,q,ne),d=xn.get(G,f.length),d.init(),f.push(d),_o(G,ne,0,m.sortObjects),d.finish(),!0===m.sortObjects&&d.sort(L,Y),!0===O&&B.beginShadows(),le.render(h.state.shadowsArray,G,ne),!0===O&&B.endShadows(),!0===this.info.autoReset&&this.info.reset(),Me.render(d,G),h.setupLights(m.physicallyCorrectLights),ne.isArrayCamera){const oe=ne.cameras;for(let ge=0,Tt=oe.length;ge<Tt;ge++){const Vt=oe[ge];vo(d,G,Vt,Vt.viewport)}}else vo(d,G,ne);null!==y&&(pe.updateMultisampleRenderTarget(y),pe.updateRenderTargetMipmap(y)),!0===G.isScene&&G.onAfterRender(m,G,ne),Ce.resetDefaultState(),b=-1,x=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(G,ne,ce){ue.get(G.texture).__webglTexture=ne,ue.get(G.depthTexture).__webglTexture=ce;const oe=ue.get(G);oe.__hasExternalTextures=!0,oe.__hasExternalTextures&&(oe.__autoAllocateDepthBuffer=void 0===ce,oe.__autoAllocateDepthBuffer||!0===Oe.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),oe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(G,ne){const ce=ue.get(G);ce.__webglFramebuffer=ne,ce.__useDefaultFramebuffer=void 0===ne},this.setRenderTarget=function(G,ne=0,ce=0){y=G,_=ne,v=ce;let oe=!0;if(G){const wt=ue.get(G);void 0!==wt.__useDefaultFramebuffer?(ye.bindFramebuffer(36160,null),oe=!1):void 0===wt.__webglFramebuffer?pe.setupRenderTarget(G):wt.__hasExternalTextures&&pe.rebindTextures(G,ue.get(G.texture).__webglTexture,ue.get(G.depthTexture).__webglTexture)}let ge=null,Tt=!1,Vt=!1;if(G){const wt=G.texture;(wt.isData3DTexture||wt.isDataArrayTexture)&&(Vt=!0);const Sn=ue.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(ge=Sn[ne],Tt=!0):ge=tt.isWebGL2&&G.samples>0&&!1===pe.useMultisampledRTT(G)?ue.get(G).__webglMultisampledFramebuffer:Sn,w.copy(G.viewport),E.copy(G.scissor),R=G.scissorTest}else w.copy(I).multiplyScalar(S).floor(),E.copy(z).multiplyScalar(S).floor(),R=D;if(ye.bindFramebuffer(36160,ge)&&tt.drawBuffers&&oe&&ye.drawBuffers(G,ge),ye.viewport(w),ye.scissor(E),ye.setScissorTest(R),Tt){const wt=ue.get(G.texture);re.framebufferTexture2D(36160,36064,34069+ne,wt.__webglTexture,ce)}else if(Vt){const wt=ue.get(G.texture);re.framebufferTextureLayer(36160,36064,wt.__webglTexture,ce||0,ne||0)}b=-1},this.readRenderTargetPixels=function(G,ne,ce,oe,ge,Tt,Vt){if(!G||!G.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let yt=ue.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&void 0!==Vt&&(yt=yt[Vt]),yt){ye.bindFramebuffer(36160,yt);try{const wt=G.texture,Sn=wt.format,_n=wt.type;if(Sn!==Go&&U.convert(Sn)!==re.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const vn=_n===Sp&&(Oe.has("EXT_color_buffer_half_float")||tt.isWebGL2&&Oe.has("EXT_color_buffer_float"));if(!(_n===Xd||U.convert(_n)===re.getParameter(35738)||_n===au&&(tt.isWebGL2||Oe.has("OES_texture_float")||Oe.has("WEBGL_color_buffer_float"))||vn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ne>=0&&ne<=G.width-oe&&ce>=0&&ce<=G.height-ge&&re.readPixels(ne,ce,oe,ge,U.convert(Sn),U.convert(_n),Tt)}finally{const wt=null!==y?ue.get(y).__webglFramebuffer:null;ye.bindFramebuffer(36160,wt)}}},this.copyFramebufferToTexture=function(G,ne,ce=0){if(!0!==ne.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const oe=Math.pow(2,-ce),ge=Math.floor(ne.image.width*oe),Tt=Math.floor(ne.image.height*oe);pe.setTexture2D(ne,0),re.copyTexSubImage2D(3553,ce,0,0,G.x,G.y,ge,Tt),ye.unbindTexture()},this.copyTextureToTexture=function(G,ne,ce,oe=0){const ge=ne.image.width,Tt=ne.image.height,Vt=U.convert(ce.format),yt=U.convert(ce.type);pe.setTexture2D(ce,0),re.pixelStorei(37440,ce.flipY),re.pixelStorei(37441,ce.premultiplyAlpha),re.pixelStorei(3317,ce.unpackAlignment),ne.isDataTexture?re.texSubImage2D(3553,oe,G.x,G.y,ge,Tt,Vt,yt,ne.image.data):ne.isCompressedTexture?re.compressedTexSubImage2D(3553,oe,G.x,G.y,ne.mipmaps[0].width,ne.mipmaps[0].height,Vt,ne.mipmaps[0].data):re.texSubImage2D(3553,oe,G.x,G.y,Vt,yt,ne.image),0===oe&&ce.generateMipmaps&&re.generateMipmap(3553),ye.unbindTexture()},this.copyTextureToTexture3D=function(G,ne,ce,oe,ge=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Tt=G.max.x-G.min.x+1,Vt=G.max.y-G.min.y+1,yt=G.max.z-G.min.z+1,wt=U.convert(oe.format),Sn=U.convert(oe.type);let _n;if(oe.isData3DTexture)pe.setTexture3D(oe,0),_n=32879;else{if(!oe.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");pe.setTexture2DArray(oe,0),_n=35866}re.pixelStorei(37440,oe.flipY),re.pixelStorei(37441,oe.premultiplyAlpha),re.pixelStorei(3317,oe.unpackAlignment);const vn=re.getParameter(3314),Vi=re.getParameter(32878),Lh=re.getParameter(3316),Im=re.getParameter(3315),km=re.getParameter(32877),ml=ce.isCompressedTexture?ce.mipmaps[0]:ce.image;re.pixelStorei(3314,ml.width),re.pixelStorei(32878,ml.height),re.pixelStorei(3316,G.min.x),re.pixelStorei(3315,G.min.y),re.pixelStorei(32877,G.min.z),ce.isDataTexture||ce.isData3DTexture?re.texSubImage3D(_n,ge,ne.x,ne.y,ne.z,Tt,Vt,yt,wt,Sn,ml.data):ce.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),re.compressedTexSubImage3D(_n,ge,ne.x,ne.y,ne.z,Tt,Vt,yt,wt,ml.data)):re.texSubImage3D(_n,ge,ne.x,ne.y,ne.z,Tt,Vt,yt,wt,Sn,ml),re.pixelStorei(3314,vn),re.pixelStorei(32878,Vi),re.pixelStorei(3316,Lh),re.pixelStorei(3315,Im),re.pixelStorei(32877,km),0===ge&&oe.generateMipmaps&&re.generateMipmap(_n),ye.unbindTexture()},this.initTexture=function(G){pe.setTexture2D(G,0),ye.unbindTexture()},this.resetState=function(){_=0,v=0,y=null,ye.reset(),Ce.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Bn.prototype.isWebGLRenderer=!0,class _Ee extends Bn{}.prototype.isWebGL1Renderer=!0;class gw{constructor(t,e=25e-5){this.name="",this.color=new Le(t),this.density=e}clone(){return new gw(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}gw.prototype.isFogExp2=!0;class _w{constructor(t,e=1,n=1e3){this.name="",this.color=new Le(t),this.near=e,this.far=n}clone(){return new _w(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}_w.prototype.isFog=!0;class vw extends An{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}vw.prototype.isScene=!0;class uh{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=X_,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=lo()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,s=this.stride;r<s;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=lo()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=lo()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}uh.prototype.isInterleavedBuffer=!0;const bs=new V;class vu{constructor(t,e,n,r=!1){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)bs.fromBufferAttribute(this,e),bs.applyMatrix4(t),this.setXYZ(e,bs.x,bs.y,bs.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)bs.fromBufferAttribute(this,e),bs.applyNormalMatrix(t),this.setXYZ(e,bs.x,bs.y,bs.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)bs.fromBufferAttribute(this,e),bs.transformDirection(t),this.setXYZ(e,bs.x,bs.y,bs.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,n){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,s){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=s,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return new Gn(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new vu(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}vu.prototype.isInterleavedBufferAttribute=!0;class yR extends Ci{constructor(t){super(),this.type="SpriteMaterial",this.color=new Le(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}let Zp;yR.prototype.isSpriteMaterial=!0;const ov=new V,Qp=new V,Jp=new V,em=new me,av=new me,OW=new lt,yw=new V,lv=new V,bw=new V,PW=new me,bR=new me,LW=new me;function xw(i,t,e,n,r,s){em.subVectors(i,e).addScalar(.5).multiply(n),void 0!==r?(av.x=s*em.x-r*em.y,av.y=r*em.x+s*em.y):av.copy(em),i.copy(t),i.x+=av.x,i.y+=av.y,i.applyMatrix4(OW)}(class FW extends An{constructor(t){if(super(),this.type="Sprite",void 0===Zp){Zp=new Pt;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new uh(e,5);Zp.setIndex([0,1,2,0,2,3]),Zp.setAttribute("position",new vu(n,3,0,!1)),Zp.setAttribute("uv",new vu(n,2,3,!1))}this.geometry=Zp,this.material=void 0!==t?t:new yR,this.center=new me(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Qp.setFromMatrixScale(this.matrixWorld),OW.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Jp.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Qp.multiplyScalar(-Jp.z);const n=this.material.rotation;let r,s;0!==n&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;xw(yw.set(-.5,-.5,0),Jp,o,Qp,r,s),xw(lv.set(.5,-.5,0),Jp,o,Qp,r,s),xw(bw.set(.5,.5,0),Jp,o,Qp,r,s),PW.set(0,0),bR.set(1,0),LW.set(1,1);let a=t.ray.intersectTriangle(yw,lv,bw,!1,ov);if(null===a&&(xw(lv.set(-.5,.5,0),Jp,o,Qp,r,s),bR.set(0,1),a=t.ray.intersectTriangle(yw,bw,lv,!1,ov),null===a))return;const l=t.ray.origin.distanceTo(ov);l<t.near||l>t.far||e.push({distance:l,point:ov.clone(),uv:ar.getUV(ov,yw,lv,bw,PW,bR,LW,new me),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}).prototype.isSprite=!0;const BW=new V,VW=new Nn,HW=new Nn,yEe=new V,UW=new lt;class Mw extends Yi{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new lt,this.bindMatrixInverse=new lt}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Nn,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.fromBufferAttribute(e,n);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,r=this.geometry;VW.fromBufferAttribute(r.attributes.skinIndex,t),HW.fromBufferAttribute(r.attributes.skinWeight,t),BW.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){const o=HW.getComponent(s);if(0!==o){const a=VW.getComponent(s);UW.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),e.addScaledVector(yEe.copy(BW).applyMatrix4(UW),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}Mw.prototype.isSkinnedMesh=!0;class Cw extends An{constructor(){super(),this.type="Bone"}}Cw.prototype.isBone=!0;class tm extends ns{constructor(t=null,e=1,n=1,r,s,o,a,l,c=or,u=or,d,h){super(null,o,a,l,c,u,r,s,d,h),this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}tm.prototype.isDataTexture=!0;const zW=new lt,bEe=new lt;class Sw{constructor(t=[],e=[]){this.uuid=lo(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new lt)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new lt;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=t.length;s<o;s++)zW.multiplyMatrices(t[s]?t[s].matrixWorld:bEe,e[s]),zW.toArray(n,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new Sw(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=N4(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new tm(e,t,t,Go,au);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];if(r.name===t)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const s=t.bones[n];let o=e[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Cw),this.bones.push(o),this.boneInverses.push((new lt).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,s=e.length;r<s;r++)t.bones.push(e[r].uuid),t.boneInverses.push(n[r].toArray());return t}}class nm extends Gn{constructor(t,e,n,r=1){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,n),this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}nm.prototype.isInstancedBufferAttribute=!0;const GW=new lt,WW=new lt,Ew=[],cv=new Yi;(class jW extends Yi{constructor(t,e,n){super(t,e),this.instanceMatrix=new nm(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,r=this.count;if(cv.geometry=this.geometry,cv.material=this.material,void 0!==cv.material)for(let s=0;s<r;s++){this.getMatrixAt(s,GW),WW.multiplyMatrices(n,GW),cv.matrixWorld=WW,cv.raycast(t,Ew);for(let o=0,a=Ew.length;o<a;o++){const l=Ew[o];l.instanceId=s,l.object=this,e.push(l)}Ew.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new nm(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class Pr extends Ci{constructor(t){super(),this.type="LineBasicMaterial",this.color=new Le(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}Pr.prototype.isLineBasicMaterial=!0;const $W=new V,qW=new V,YW=new lt,xR=new sh,Tw=new du;class yu extends An{constructor(t=new Pt,e=new Pr){super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let r=1,s=e.count;r<s;r++)$W.fromBufferAttribute(e,r-1),qW.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=$W.distanceTo(qW);t.setAttribute("lineDistance",new ut(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Tw.copy(n.boundingSphere),Tw.applyMatrix4(r),Tw.radius+=s,!1===t.ray.intersectsSphere(Tw))return;YW.copy(r).invert(),xR.copy(t.ray).applyMatrix4(YW);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new V,u=new V,d=new V,h=new V,f=this.isLineSegments?2:1;if(n.isBufferGeometry){const p=n.index,g=n.attributes.position;if(null!==p)for(let y=Math.max(0,o.start),b=Math.min(p.count,o.start+o.count)-1;y<b;y+=f){const x=p.getX(y),w=p.getX(y+1);if(c.fromBufferAttribute(g,x),u.fromBufferAttribute(g,w),xR.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const R=t.ray.origin.distanceTo(h);R<t.near||R>t.far||e.push({distance:R,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(let y=Math.max(0,o.start),b=Math.min(g.count,o.start+o.count)-1;y<b;y+=f){if(c.fromBufferAttribute(g,y),u.fromBufferAttribute(g,y+1),xR.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const w=t.ray.origin.distanceTo(h);w<t.near||w>t.far||e.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}yu.prototype.isLine=!0;const XW=new V,KW=new V;class dh extends yu{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let r=0,s=e.count;r<s;r+=2)XW.fromBufferAttribute(e,r),KW.fromBufferAttribute(e,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+XW.distanceTo(KW);t.setAttribute("lineDistance",new ut(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}dh.prototype.isLineSegments=!0;class wR extends yu{constructor(t,e){super(t,e),this.type="LineLoop"}}wR.prototype.isLineLoop=!0;class Dw extends Ci{constructor(t){super(),this.type="PointsMaterial",this.color=new Le(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}Dw.prototype.isPointsMaterial=!0;const ZW=new lt,MR=new sh,Aw=new du,Rw=new V;class CR extends An{constructor(t=new Pt,e=new Dw){super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Aw.copy(n.boundingSphere),Aw.applyMatrix4(r),Aw.radius+=s,!1===t.ray.intersectsSphere(Aw))return;ZW.copy(r).invert(),MR.copy(t.ray).applyMatrix4(ZW);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(n.isBufferGeometry){const c=n.index,d=n.attributes.position;if(null!==c)for(let p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);p<m;p++){const g=c.getX(p);Rw.fromBufferAttribute(d,g),QW(Rw,g,l,r,t,e,this)}else for(let p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);p<m;p++)Rw.fromBufferAttribute(d,p),QW(Rw,p,l,r,t,e,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function QW(i,t,e,n,r,s,o){const a=MR.distanceSqToPoint(i);if(a<e){const l=new V;MR.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,object:o})}}CR.prototype.isPoints=!0,class xEe extends ns{constructor(t,e,n,r,s,o,a,l,c){super(t,e,n,r,s,o,a,l,c),this.minFilter=void 0!==o?o:Fi,this.magFilter=void 0!==s?s:Fi,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(function d(){u.needsUpdate=!0,t.requestVideoFrameCallback(d)})}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t==0&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class wEe extends ns{constructor(t,e,n){super({width:t,height:e}),this.format=n,this.magFilter=or,this.minFilter=or,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class JW extends ns{constructor(t,e,n,r,s,o,a,l,c,u,d,h){super(null,o,a,l,c,u,r,s,d,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class MEe extends ns{constructor(t,e,n,r,s,o,a,l,c){super(t,e,n,r,s,o,a,l,c),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0;class jo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),s=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),s+=n.distanceTo(r),e.push(s),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const s=n.length;let o;o=e||t*n[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=n[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(s-1);const u=n[r];return(r+(o-u)/(n[r+1]-u))/(s-1)}getTangent(t,e){let r=t-1e-4,s=t+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=e||(o.isVector2?new me:new V);return l.copy(a).sub(o).normalize(),l}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new V,r=[],s=[],o=[],a=new V,l=new lt;for(let f=0;f<=t;f++)r[f]=this.getTangentAt(f/t,new V);s[0]=new V,o[0]=new V;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,n.set(1,0,0)),d<=c&&(c=d,n.set(0,1,0)),h<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=t;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(qi(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(r[f],s[f])}if(!0===e){let f=Math.acos(qi(s[0].dot(s[t]),-1,1));f/=t,r[0].dot(a.crossVectors(s[0],s[t]))>0&&(f=-f);for(let p=1;p<=t;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Iw extends jo{constructor(t=0,e=0,n=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(t,e){const n=e||new me,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+t*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*u-f*d+this.aX,c=h*d+f*u+this.aY}return n.set(l,c)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}Iw.prototype.isEllipseCurve=!0;class ej extends Iw{constructor(t,e,n,r,s,o){super(t,e,n,n,r,s,o),this.type="ArcCurve"}}function SR(){let i=0,t=0,e=0,n=0;function r(s,o,a,l){i=s,t=a,e=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+d)+(l-a)/d;h*=u,f*=u,r(o,a,h,f)},calc:function(s){const o=s*s;return i+t*s+e*o+n*(o*s)}}}ej.prototype.isArcCurve=!0;const kw=new V,ER=new SR,TR=new SR,DR=new SR;class tj extends jo{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new V){const n=e,r=this.points,s=r.length,o=(s-(this.closed?0:1))*t;let c,u,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(kw.subVectors(r[0],r[1]).add(r[0]),c=kw);const d=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(kw.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=kw),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let p=Math.pow(c.distanceToSquared(d),f),m=Math.pow(d.distanceToSquared(h),f),g=Math.pow(h.distanceToSquared(u),f);m<1e-4&&(m=1),p<1e-4&&(p=m),g<1e-4&&(g=m),ER.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,p,m,g),TR.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,p,m,g),DR.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,p,m,g)}else"catmullrom"===this.curveType&&(ER.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),TR.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),DR.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return n.set(ER.calc(l),TR.calc(l),DR.calc(l)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new V).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function nj(i,t,e,n,r){const s=.5*(n-t),o=.5*(r-e),a=i*i;return(2*e-2*n+s+o)*(i*a)+(-3*e+3*n-2*s-o)*a+s*i+e}function uv(i,t,e,n){return function CEe(i,t){const e=1-i;return e*e*t}(i,t)+function SEe(i,t){return 2*(1-i)*i*t}(i,e)+function EEe(i,t){return i*i*t}(i,n)}function dv(i,t,e,n,r){return function TEe(i,t){const e=1-i;return e*e*e*t}(i,t)+function DEe(i,t){const e=1-i;return 3*e*e*i*t}(i,e)+function AEe(i,t){return 3*(1-i)*i*i*t}(i,n)+function REe(i,t){return i*i*i*t}(i,r)}tj.prototype.isCatmullRomCurve3=!0;class AR extends jo{constructor(t=new me,e=new me,n=new me,r=new me){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new me){const n=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(dv(t,r.x,s.x,o.x,a.x),dv(t,r.y,s.y,o.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}AR.prototype.isCubicBezierCurve=!0;class ij extends jo{constructor(t=new V,e=new V,n=new V,r=new V){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new V){const n=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(dv(t,r.x,s.x,o.x,a.x),dv(t,r.y,s.y,o.y,a.y),dv(t,r.z,s.z,o.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}ij.prototype.isCubicBezierCurve3=!0;class Ow extends jo{constructor(t=new me,e=new me){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new me){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new me;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Ow.prototype.isLineCurve=!0;class RR extends jo{constructor(t=new me,e=new me,n=new me){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new me){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(uv(t,r.x,s.x,o.x),uv(t,r.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}RR.prototype.isQuadraticBezierCurve=!0;class IR extends jo{constructor(t=new V,e=new V,n=new V){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new V){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(uv(t,r.x,s.x,o.x),uv(t,r.y,s.y,o.y),uv(t,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}IR.prototype.isQuadraticBezierCurve3=!0;class kR extends jo{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new me){const n=e,r=this.points,s=(r.length-1)*t,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return n.set(nj(a,l.x,c.x,u.x,d.x),nj(a,l.y,c.y,u.y,d.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new me).fromArray(r))}return this}}kR.prototype.isSplineCurve=!0;var OR=Object.freeze({__proto__:null,ArcCurve:ej,CatmullRomCurve3:tj,CubicBezierCurve:AR,CubicBezierCurve3:ij,EllipseCurve:Iw,LineCurve:Ow,LineCurve3:class IEe extends jo{constructor(t=new V,e=new V){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new V){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:RR,QuadraticBezierCurve3:IR,SplineCurve:kR});class kEe extends jo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ow(e,t))}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t);for(let c=0;c<l.length;c++){const u=l[c];n&&n.equals(u)||(e.push(u),n=u)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const r=t.curves[e];this.curves.push((new OR[r.type]).fromJSON(r))}return this}}class hv extends kEe{constructor(t){super(),this.type="Path",this.currentPoint=new me,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Ow(this.currentPoint.clone(),new me(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const s=new RR(this.currentPoint.clone(),new me(t,e),new me(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,s,o){const a=new AR(this.currentPoint.clone(),new me(t,e),new me(n,r),new me(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new kR(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,s,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o),this}absarc(t,e,n,r,s,o){return this.absellipse(t,e,n,n,r,s,o),this}ellipse(t,e,n,r,s,o,a,l){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o,a,l),this}absellipse(t,e,n,r,s,o,a,l){const c=new Iw(t,e,n,r,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}new V,new V,new V,new ar;class sl extends hv{constructor(t){super(t),this.uuid=lo(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const r=t.holes[e];this.holes.push((new hv).fromJSON(r))}return this}}function sj(i,t,e,n,r){let s,o;if(r===function XEe(i,t,e,n){let r=0;for(let s=t,o=e-n;s<e;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}(i,t,e,n)>0)for(s=t;s<e;s+=n)o=lj(s,i[s],i[s+1],o);else for(s=e-n;s>=t;s-=n)o=lj(s,i[s],i[s+1],o);return o&&Uw(o,o.next)&&(gv(o),o=o.next),o}function xu(i,t){if(!i)return i;t||(t=i);let n,e=i;do{if(n=!1,e.steiner||!Uw(e,e.next)&&0!==Si(e.prev,e,e.next))e=e.next;else{if(gv(e),e=t=e.prev,e===e.next)break;n=!0}}while(n||e!==t);return t}function pv(i,t,e,n,r,s,o){if(!i)return;!o&&s&&function GEe(i,t,e,n){let r=i;do{null===r.z&&(r.z=LR(r.x,r.y,t,e,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,function WEe(i){let t,e,n,r,s,o,a,l,c=1;do{for(e=i,i=null,s=null,o=0;e;){for(o++,n=e,a=0,t=0;t<c&&(a++,n=n.nextZ,n);t++);for(l=c;a>0||l>0&&n;)0!==a&&(0===l||!n||e.z<=n.z)?(r=e,e=e.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;e=n}s.nextZ=null,c*=2}while(o>1)}(r)}(i,n,r,s);let l,c,a=i;for(;i.prev!==i.next;)if(l=i.prev,c=i.next,s?LEe(i,n,r,s):PEe(i))t.push(l.i/e),t.push(i.i/e),t.push(c.i/e),gv(i),i=c.next,a=c.next;else if((i=c)===a){o?1===o?pv(i=FEe(xu(i),t,e),t,e,n,r,s,2):2===o&&NEe(i,t,e,n,r,s):pv(xu(i),t,e,n,r,s,1);break}}function PEe(i){const t=i.prev,e=i,n=i.next;if(Si(t,e,n)>=0)return!1;let r=i.next.next;for(;r!==i.prev;){if(rm(t.x,t.y,e.x,e.y,n.x,n.y,r.x,r.y)&&Si(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function LEe(i,t,e,n){const r=i.prev,s=i,o=i.next;if(Si(r,s,o)>=0)return!1;const c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,d=LR(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,t,e,n),h=LR(c,u,t,e,n);let f=i.prevZ,p=i.nextZ;for(;f&&f.z>=d&&p&&p.z<=h;){if(f!==i.prev&&f!==i.next&&rm(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Si(f.prev,f,f.next)>=0||(f=f.prevZ,p!==i.prev&&p!==i.next&&rm(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Si(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=d;){if(f!==i.prev&&f!==i.next&&rm(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&Si(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==i.prev&&p!==i.next&&rm(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Si(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function FEe(i,t,e){let n=i;do{const r=n.prev,s=n.next.next;!Uw(r,s)&&oj(r,n,n.next,s)&&mv(r,s)&&mv(s,r)&&(t.push(r.i/e),t.push(n.i/e),t.push(s.i/e),gv(n),gv(n.next),n=i=s),n=n.next}while(n!==i);return xu(n)}function NEe(i,t,e,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&$Ee(o,a)){let l=aj(o,a);return o=xu(o,o.next),l=xu(l,l.next),pv(o,t,e,n,r,s),void pv(l,t,e,n,r,s)}a=a.next}o=o.next}while(o!==i)}function VEe(i,t){return i.x-t.x}function HEe(i,t){if(t=function UEe(i,t){let e=t;const n=i.x,r=i.y;let o,s=-1/0;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){const h=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(h<=n&&h>s){if(s=h,h===n){if(r===e.y)return e;if(r===e.next.y)return e.next}o=e.x<e.next.x?e:e.next}}e=e.next}while(e!==t);if(!o)return null;if(n===s)return o;const a=o,l=o.x,c=o.y;let d,u=1/0;e=o;do{n>=e.x&&e.x>=l&&n!==e.x&&rm(r<c?n:s,r,l,c,r<c?s:n,r,e.x,e.y)&&(d=Math.abs(r-e.y)/(n-e.x),mv(e,i)&&(d<u||d===u&&(e.x>o.x||e.x===o.x&&zEe(o,e)))&&(o=e,u=d)),e=e.next}while(e!==a);return o}(i,t),t){const e=aj(t,i);xu(t,t.next),xu(e,e.next)}}function zEe(i,t){return Si(i.prev,i,t.prev)<0&&Si(t.next,i,i.next)<0}function LR(i,t,e,n,r){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-e)*r)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function jEe(i){let t=i,e=i;do{(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next}while(t!==i);return e}function rm(i,t,e,n,r,s,o,a){return(r-o)*(t-a)-(i-o)*(s-a)>=0&&(i-o)*(n-a)-(e-o)*(t-a)>=0&&(e-o)*(s-a)-(r-o)*(n-a)>=0}function $Ee(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function qEe(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&oj(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}(i,t)&&(mv(i,t)&&mv(t,i)&&function YEe(i,t){let e=i,n=!1;const r=(i.x+t.x)/2,s=(i.y+t.y)/2;do{e.y>s!=e.next.y>s&&e.next.y!==e.y&&r<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next}while(e!==i);return n}(i,t)&&(Si(i.prev,i,t.prev)||Si(i,t.prev,t))||Uw(i,t)&&Si(i.prev,i,i.next)>0&&Si(t.prev,t,t.next)>0)}function Si(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function Uw(i,t){return i.x===t.x&&i.y===t.y}function oj(i,t,e,n){const r=Gw(Si(i,t,e)),s=Gw(Si(i,t,n)),o=Gw(Si(e,n,i)),a=Gw(Si(e,n,t));return!!(r!==s&&o!==a||0===r&&zw(i,e,t)||0===s&&zw(i,n,t)||0===o&&zw(e,i,n)||0===a&&zw(e,t,n))}function zw(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function Gw(i){return i>0?1:i<0?-1:0}function mv(i,t){return Si(i.prev,i,i.next)<0?Si(i,t,i.next)>=0&&Si(i,i.prev,t)>=0:Si(i,t,i.prev)<0||Si(i,i.next,t)<0}function aj(i,t){const e=new FR(i.i,i.x,i.y),n=new FR(t.i,t.x,t.y),r=i.next,s=t.prev;return i.next=t,t.prev=i,e.next=r,r.prev=e,n.next=e,e.prev=n,s.next=n,n.prev=s,n}function lj(i,t,e,n){const r=new FR(i,t,e);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function gv(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function FR(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class dc{static area(t){const e=t.length;let n=0;for(let r=e-1,s=0;s<e;r=s++)n+=t[r].x*t[s].y-t[s].x*t[r].y;return.5*n}static isClockWise(t){return dc.area(t)<0}static triangulateShape(t,e){const n=[],r=[],s=[];cj(t),uj(n,t);let o=t.length;e.forEach(cj);for(let l=0;l<e.length;l++)r.push(o),o+=e[l].length,uj(n,e[l]);const a=function(i,t,e=2){const n=t&&t.length,r=n?t[0]*e:i.length;let s=sj(i,0,r,e,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,h,f;if(n&&(s=function BEe(i,t,e,n){const r=[];let s,o,a,l,c;for(s=0,o=t.length;s<o;s++)a=t[s]*n,l=s<o-1?t[s+1]*n:i.length,c=sj(i,a,l,n,!1),c===c.next&&(c.steiner=!0),r.push(jEe(c));for(r.sort(VEe),s=0;s<r.length;s++)HEe(r[s],e),e=xu(e,e.next);return e}(i,t,s,e)),i.length>80*e){a=c=i[0],l=u=i[1];for(let p=e;p<r;p+=e)d=i[p],h=i[p+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=0!==f?1/f:0}return pv(s,o,e,a,l,f),o}(n,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function cj(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function uj(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class hc extends Pt{constructor(t=new sl([new me(.5,.5),new me(-.5,.5),new me(-.5,-.5),new me(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],s=[];for(let a=0,l=t.length;a<l;a++)o(t[a]);function o(a){const l=[],c=void 0!==e.curveSegments?e.curveSegments:12,u=void 0!==e.steps?e.steps:1;let d=void 0!==e.depth?e.depth:1,h=void 0===e.bevelEnabled||e.bevelEnabled,f=void 0!==e.bevelThickness?e.bevelThickness:.2,p=void 0!==e.bevelSize?e.bevelSize:f-.1,m=void 0!==e.bevelOffset?e.bevelOffset:0,g=void 0!==e.bevelSegments?e.bevelSegments:3;const _=e.extrudePath,v=void 0!==e.UVGenerator?e.UVGenerator:KEe;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=e.amount);let y,x,w,E,R,b=!1;_&&(y=_.getSpacedPoints(u),b=!0,h=!1,x=_.computeFrenetFrames(u,!1),w=new V,E=new V,R=new V),h||(g=0,f=0,p=0,m=0);const F=a.extractPoints(c);let N=F.shape;const S=F.holes;if(!dc.isClockWise(N)){N=N.reverse();for(let ue=0,pe=S.length;ue<pe;ue++){const Ee=S[ue];dc.isClockWise(Ee)&&(S[ue]=Ee.reverse())}}const Y=dc.triangulateShape(N,S),I=N;for(let ue=0,pe=S.length;ue<pe;ue++)N=N.concat(S[ue]);function z(ue,pe,Ee){return pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),pe.clone().multiplyScalar(Ee).add(ue)}const D=N.length,P=Y.length;function O(ue,pe,Ee){let Ke,Ne,De;const je=ue.x-pe.x,it=ue.y-pe.y,$t=Ee.x-ue.x,xn=Ee.y-ue.y,W=je*je+it*it;if(Math.abs(je*xn-it*$t)>Number.EPSILON){const le=Math.sqrt(W),Me=Math.sqrt($t*$t+xn*xn),Ue=pe.x-it/le,qe=pe.y+je/le,Ce=((Ee.x-xn/Me-Ue)*xn-(Ee.y+$t/Me-qe)*$t)/(je*xn-it*$t);Ke=Ue+je*Ce-ue.x,Ne=qe+it*Ce-ue.y;const nt=Ke*Ke+Ne*Ne;if(nt<=2)return new me(Ke,Ne);De=Math.sqrt(nt/2)}else{let le=!1;je>Number.EPSILON?$t>Number.EPSILON&&(le=!0):je<-Number.EPSILON?$t<-Number.EPSILON&&(le=!0):Math.sign(it)===Math.sign(xn)&&(le=!0),le?(Ke=-it,Ne=je,De=Math.sqrt(W)):(Ke=je,Ne=it,De=Math.sqrt(W/2))}return new me(Ke/De,Ne/De)}const q=[];for(let ue=0,pe=I.length,Ee=pe-1,Ke=ue+1;ue<pe;ue++,Ee++,Ke++)Ee===pe&&(Ee=0),Ke===pe&&(Ke=0),q[ue]=O(I[ue],I[Ee],I[Ke]);const K=[];let Q,j=q.concat();for(let ue=0,pe=S.length;ue<pe;ue++){const Ee=S[ue];Q=[];for(let Ke=0,Ne=Ee.length,De=Ne-1,je=Ke+1;Ke<Ne;Ke++,De++,je++)De===Ne&&(De=0),je===Ne&&(je=0),Q[Ke]=O(Ee[Ke],Ee[De],Ee[je]);K.push(Q),j=j.concat(Q)}for(let ue=0;ue<g;ue++){const pe=ue/g,Ee=f*Math.cos(pe*Math.PI/2),Ke=p*Math.sin(pe*Math.PI/2)+m;for(let Ne=0,De=I.length;Ne<De;Ne++){const je=z(I[Ne],q[Ne],Ke);Ae(je.x,je.y,-Ee)}for(let Ne=0,De=S.length;Ne<De;Ne++){const je=S[Ne];Q=K[Ne];for(let it=0,$t=je.length;it<$t;it++){const xn=z(je[it],Q[it],Ke);Ae(xn.x,xn.y,-Ee)}}}const we=p+m;for(let ue=0;ue<D;ue++){const pe=h?z(N[ue],j[ue],we):N[ue];b?(E.copy(x.normals[0]).multiplyScalar(pe.x),w.copy(x.binormals[0]).multiplyScalar(pe.y),R.copy(y[0]).add(E).add(w),Ae(R.x,R.y,R.z)):Ae(pe.x,pe.y,0)}for(let ue=1;ue<=u;ue++)for(let pe=0;pe<D;pe++){const Ee=h?z(N[pe],j[pe],we):N[pe];b?(E.copy(x.normals[ue]).multiplyScalar(Ee.x),w.copy(x.binormals[ue]).multiplyScalar(Ee.y),R.copy(y[ue]).add(E).add(w),Ae(R.x,R.y,R.z)):Ae(Ee.x,Ee.y,d/u*ue)}for(let ue=g-1;ue>=0;ue--){const pe=ue/g,Ee=f*Math.cos(pe*Math.PI/2),Ke=p*Math.sin(pe*Math.PI/2)+m;for(let Ne=0,De=I.length;Ne<De;Ne++){const je=z(I[Ne],q[Ne],Ke);Ae(je.x,je.y,d+Ee)}for(let Ne=0,De=S.length;Ne<De;Ne++){const je=S[Ne];Q=K[Ne];for(let it=0,$t=je.length;it<$t;it++){const xn=z(je[it],Q[it],Ke);b?Ae(xn.x,xn.y+y[u-1].y,y[u-1].x+Ee):Ae(xn.x,xn.y,d+Ee)}}}function re(ue,pe){let Ee=ue.length;for(;--Ee>=0;){const Ke=Ee;let Ne=Ee-1;Ne<0&&(Ne=ue.length-1);for(let De=0,je=u+2*g;De<je;De++){const it=D*De,$t=D*(De+1);tt(pe+Ke+it,pe+Ne+it,pe+Ne+$t,pe+Ke+$t)}}}function Ae(ue,pe,Ee){l.push(ue),l.push(pe),l.push(Ee)}function Oe(ue,pe,Ee){ye(ue),ye(pe),ye(Ee);const Ke=r.length/3,Ne=v.generateTopUV(n,r,Ke-3,Ke-2,Ke-1);vt(Ne[0]),vt(Ne[1]),vt(Ne[2])}function tt(ue,pe,Ee,Ke){ye(ue),ye(pe),ye(Ke),ye(pe),ye(Ee),ye(Ke);const Ne=r.length/3,De=v.generateSideWallUV(n,r,Ne-6,Ne-3,Ne-2,Ne-1);vt(De[0]),vt(De[1]),vt(De[3]),vt(De[1]),vt(De[2]),vt(De[3])}function ye(ue){r.push(l[3*ue+0]),r.push(l[3*ue+1]),r.push(l[3*ue+2])}function vt(ue){s.push(ue.x),s.push(ue.y)}(function fe(){const ue=r.length/3;if(h){let pe=0,Ee=D*pe;for(let Ke=0;Ke<P;Ke++){const Ne=Y[Ke];Oe(Ne[2]+Ee,Ne[1]+Ee,Ne[0]+Ee)}pe=u+2*g,Ee=D*pe;for(let Ke=0;Ke<P;Ke++){const Ne=Y[Ke];Oe(Ne[0]+Ee,Ne[1]+Ee,Ne[2]+Ee)}}else{for(let pe=0;pe<P;pe++){const Ee=Y[pe];Oe(Ee[2],Ee[1],Ee[0])}for(let pe=0;pe<P;pe++){const Ee=Y[pe];Oe(Ee[0]+D*u,Ee[1]+D*u,Ee[2]+D*u)}}n.addGroup(ue,r.length/3-ue,0)})(),function _e(){const ue=r.length/3;let pe=0;re(I,pe),pe+=I.length;for(let Ee=0,Ke=S.length;Ee<Ke;Ee++){const Ne=S[Ee];re(Ne,pe),pe+=Ne.length}n.addGroup(ue,r.length/3-ue,1)}()}this.setAttribute("position",new ut(r,3)),this.setAttribute("uv",new ut(s,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function ZEe(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++)e.shapes.push(i[n].uuid);else e.shapes.push(i.uuid);return void 0!==t.extrudePath&&(e.options.extrudePath=t.extrudePath.toJSON()),e}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let s=0,o=t.shapes.length;s<o;s++)n.push(e[t.shapes[s]]);const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new OR[r.type]).fromJSON(r)),new hc(n,t.options)}}const KEe={generateTopUV:function(i,t,e,n,r){const a=t[3*n],l=t[3*n+1],c=t[3*r],u=t[3*r+1];return[new me(t[3*e],t[3*e+1]),new me(a,l),new me(c,u)]},generateSideWallUV:function(i,t,e,n,r,s){const o=t[3*e],a=t[3*e+1],l=t[3*e+2],c=t[3*n],u=t[3*n+1],d=t[3*n+2],h=t[3*r],f=t[3*r+1],p=t[3*r+2],m=t[3*s],g=t[3*s+1],_=t[3*s+2];return Math.abs(a-u)<Math.abs(o-c)?[new me(o,1-l),new me(c,1-d),new me(h,1-p),new me(m,1-_)]:[new me(a,1-l),new me(u,1-d),new me(f,1-p),new me(g,1-_)]}};class vv extends Pt{constructor(t=new sl([new me(0,.5),new me(-.5,-.5),new me(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],r=[],s=[],o=[];let a=0,l=0;if(!1===Array.isArray(t))c(t);else for(let u=0;u<t.length;u++)c(t[u]),this.addGroup(a,l,u),a+=l,l=0;function c(u){const d=r.length/3,h=u.extractPoints(e);let f=h.shape;const p=h.holes;!1===dc.isClockWise(f)&&(f=f.reverse());for(let g=0,_=p.length;g<_;g++){const v=p[g];!0===dc.isClockWise(v)&&(p[g]=v.reverse())}const m=dc.triangulateShape(f,p);for(let g=0,_=p.length;g<_;g++)f=f.concat(p[g]);for(let g=0,_=f.length;g<_;g++){const v=f[g];r.push(v.x,v.y,0),s.push(0,0,1),o.push(v.x,v.y)}for(let g=0,_=m.length;g<_;g++){const v=m[g];n.push(v[0]+d,v[1]+d,v[2]+d),l+=3}}this.setIndex(n),this.setAttribute("position",new ut(r,3)),this.setAttribute("normal",new ut(s,3)),this.setAttribute("uv",new ut(o,2))}toJSON(){const t=super.toJSON();return function QEe(i,t){if(t.shapes=[],Array.isArray(i))for(let e=0,n=i.length;e<n;e++)t.shapes.push(i[e].uuid);else t.shapes.push(i.uuid);return t}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let r=0,s=t.shapes.length;r<s;r++)n.push(e[t.shapes[r]]);return new vv(n,t.curveSegments)}}class pj extends Ci{constructor(t){super(),this.type="ShadowMaterial",this.color=new Le(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}pj.prototype.isShadowMaterial=!0;class mj extends Ma{constructor(t){super(t),this.type="RawShaderMaterial"}}mj.prototype.isRawShaderMaterial=!0;class sm extends Ci{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Le(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}sm.prototype.isMeshStandardMaterial=!0;class wu extends sm{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new me(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return qi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenColor=new Le(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Le(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Le(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}wu.prototype.isMeshPhysicalMaterial=!0;class gj extends Ci{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new Le(16777215),this.specular=new Le(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}gj.prototype.isMeshPhongMaterial=!0;class _j extends Ci{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Le(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}_j.prototype.isMeshToonMaterial=!0;class vj extends Ci{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}vj.prototype.isMeshNormalMaterial=!0;class yj extends Ci{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new Le(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}yj.prototype.isMeshLambertMaterial=!0;class bj extends Ci{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Le(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}bj.prototype.isMeshMatcapMaterial=!0;class xj extends Pr{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}xj.prototype.isLineDashedMaterial=!0;const JEe={ShadowMaterial:pj,SpriteMaterial:yR,RawShaderMaterial:mj,ShaderMaterial:Ma,PointsMaterial:Dw,MeshPhysicalMaterial:wu,MeshStandardMaterial:sm,MeshPhongMaterial:gj,MeshToonMaterial:_j,MeshNormalMaterial:vj,MeshLambertMaterial:yj,MeshDepthMaterial:gR,MeshDistanceMaterial:_R,MeshBasicMaterial:vs,MeshMatcapMaterial:bj,LineDashedMaterial:xj,LineBasicMaterial:Pr,Material:Ci};Ci.fromType=function(i){return new JEe[i]};const yi={arraySlice:function(i,t,e){return yi.isTypedArray(i)?new i.constructor(i.subarray(t,void 0!==e?e:i.length)):i.slice(t,e)},convertArray:function(i,t,e){return!i||!e&&i.constructor===t?i:"number"==typeof t.BYTES_PER_ELEMENT?new t(i):Array.prototype.slice.call(i)},isTypedArray:function(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)},getKeyframeOrder:function(i){const e=i.length,n=new Array(e);for(let r=0;r!==e;++r)n[r]=r;return n.sort(function t(r,s){return i[r]-i[s]}),n},sortedArray:function(i,t,e){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=e[s]*t;for(let l=0;l!==t;++l)r[o++]=i[a+l]}return r},flattenJSON:function(i,t,e,n){let r=1,s=i[0];for(;void 0!==s&&void 0===s[n];)s=i[r++];if(void 0===s)return;let o=s[n];if(void 0!==o)if(Array.isArray(o))do{o=s[n],void 0!==o&&(t.push(s.time),e.push.apply(e,o)),s=i[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[n],void 0!==o&&(t.push(s.time),o.toArray(e,e.length)),s=i[r++]}while(void 0!==s);else do{o=s[n],void 0!==o&&(t.push(s.time),e.push(o)),s=i[r++]}while(void 0!==s)},subclip:function(i,t,e,n,r=30){const s=i.clone();s.name=t;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],h=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*r;if(!(p<e||p>=n)){d.push(c.times[f]);for(let m=0;m<u;++m)h.push(c.values[f*u+m])}}0!==d.length&&(c.times=yi.convertArray(d,c.times.constructor),c.values=yi.convertArray(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(i,t=0,e=i,n=30){n<=0&&(n=30);const r=e.tracks.length,s=t/n;for(let o=0;o<r;++o){const a=e.tracks[o],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=i.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(void 0===c)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const p=a.times.length-1;let m;if(s<=a.times[0])m=yi.arraySlice(a.values,u,d-u);else if(s>=a.times[p]){const _=p*d+u;m=yi.arraySlice(a.values,_,_+d-u)}else{const _=a.createInterpolant(),v=u,y=d-u;_.evaluate(s),m=yi.arraySlice(_.resultBuffer,v,y)}"quaternion"===l&&(new wr).fromArray(m).normalize().conjugate().toArray(m);const g=c.times.length;for(let _=0;_<g;++_){const v=_*f+h;if("quaternion"===l)wr.multiplyQuaternionsFlat(c.values,v,m,0,c.values,v);else{const y=f-2*h;for(let b=0;b<y;++b)c.values[v+b]-=m[b]}}}return i.blendMode=2501,i}};class fc{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],s=e[n-1];e:{t:{let o;n:{i:if(!(t<r)){for(let a=n+2;;){if(void 0===r){if(t<s)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,s)}if(n===a)break;if(s=r,r=e[++n],t<r)break t}o=e.length;break n}if(t>=s)break e;{const a=e[1];t<a&&(n=2,s=a);for(let l=n-2;;){if(void 0===s)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===l)break;if(r=s,s=e[--n-1],t>=s)break t}o=n,n=0}}for(;n<o;){const a=n+o>>>1;t<e[a]?o=a:n=a+1}if(r=e[n],s=e[n-1],void 0===s)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,s,t)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=n[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}fc.prototype.beforeStart_=fc.prototype.copySampleValue_,fc.prototype.afterEnd_=fc.prototype.copySampleValue_;class eTe extends fc{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ap,endingEnd:Ap}}intervalChanged_(t,e,n){const r=this.parameterPositions;let s=t-2,o=t+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Rp:s=t,a=2*e-n;break;case 2402:s=r.length-2,a=e+r[s]-r[s+1];break;default:s=t,a=n}if(void 0===l)switch(this.getSettings_().endingEnd){case Rp:o=t,l=2*n-e;break;case 2402:o=1,l=n+r[1]-r[0];break;default:o=t-1,l=e}const c=.5*(n-e),u=this.valueSize;this._weightPrev=c/(e-a),this._weightNext=c/(l-n),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(n-e)/(r-e),m=p*p,g=m*p,_=-h*g+2*h*m-h*p,v=(1+h)*g+(-1.5-2*h)*m+(-.5+h)*p+1,y=(-1-f)*g+(1.5+f)*m+.5*p,b=f*g-f*m;for(let x=0;x!==a;++x)s[x]=_*o[u+x]+v*o[c+x]+y*o[l+x]+b*o[d+x];return s}}class wj extends fc{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,u=(n-e)/(r-e),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class tTe extends fc{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class ol{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=yi.convertArray(e,this.TimeBufferType),this.values=yi.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:yi.convertArray(t.times,Array),values:yi.convertArray(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new tTe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new wj(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new eTe(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Y_:e=this.InterpolantFactoryMethodDiscrete;break;case Dp:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Y_;case this.InterpolantFactoryMethodLinear:return Dp;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<t;)++s;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=yi.arraySlice(n,s,o),this.values=yi.arraySlice(this.values,s*a,o*a)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),t=!1;break}o=l}if(void 0!==r&&yi.isTypedArray(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}return t}optimize(){const t=yi.arraySlice(this.times),e=yi.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),s=t.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=t[a];if(c!==t[a+1]&&(1!==a||c!==t[0]))if(r)l=!0;else{const d=a*n,h=d-n,f=d+n;for(let p=0;p!==n;++p){const m=e[d+p];if(m!==e[h+p]||m!==e[f+p]){l=!0;break}}}if(l){if(a!==o){t[o]=t[a];const d=a*n,h=o*n;for(let f=0;f!==n;++f)e[h+f]=e[d+f]}++o}}if(s>0){t[o]=t[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)e[l+c]=e[a+c];++o}return o!==t.length?(this.times=yi.arraySlice(t,0,o),this.values=yi.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=yi.arraySlice(this.times,0),e=yi.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}ol.prototype.TimeBufferType=Float32Array,ol.prototype.ValueBufferType=Float32Array,ol.prototype.DefaultInterpolation=Dp;class om extends ol{}om.prototype.ValueTypeName="bool",om.prototype.ValueBufferType=Array,om.prototype.DefaultInterpolation=Y_,om.prototype.InterpolantFactoryMethodLinear=void 0,om.prototype.InterpolantFactoryMethodSmooth=void 0;class Mj extends ol{}Mj.prototype.ValueTypeName="color";class bv extends ol{}bv.prototype.ValueTypeName="number";class nTe extends fc{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-e)/(r-e);let c=t*a;for(let u=c+a;c!==u;c+=4)wr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class hh extends ol{InterpolantFactoryMethodLinear(t){return new nTe(this.times,this.values,this.getValueSize(),t)}}hh.prototype.ValueTypeName="quaternion",hh.prototype.DefaultInterpolation=Dp,hh.prototype.InterpolantFactoryMethodSmooth=void 0;class am extends ol{}am.prototype.ValueTypeName="string",am.prototype.ValueBufferType=Array,am.prototype.DefaultInterpolation=Y_,am.prototype.InterpolantFactoryMethodLinear=void 0,am.prototype.InterpolantFactoryMethodSmooth=void 0;class xv extends ol{}xv.prototype.ValueTypeName="vector";class wv{constructor(t,e=-1,n,r=2500){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=lo(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let o=0,a=n.length;o!==a;++o)e.push(rTe(n[o]).scale(r));const s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,o=n.length;s!==o;++s)e.push(ol.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const s=e.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=yi.getKeyframeOrder(l);l=yi.sortedArray(l,1,u),c=yi.sortedArray(c,1,u),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new bv(".morphTargetInfluences["+e[a].name+"]",l,c).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const r=t;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=t.length;a<l;a++){const c=t[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=r[d];h||(r[d]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(d,h,f,p,m){if(0!==f.length){const g=[],_=[];yi.flattenJSON(f,g,_,p),0!==g.length&&m.push(new d(h,g,_))}},r=[],s=t.name||"default",o=t.fps||30,a=t.blendMode;let l=t.length||-1;const c=t.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let m=0;m<h[p].morphTargets.length;m++)f[h[p].morphTargets[m]]=-1;for(const m in f){const g=[],_=[];for(let v=0;v!==h[p].morphTargets.length;++v){const y=h[p];g.push(y.time),_.push(y.morphTarget===m?1:0)}r.push(new bv(".morphTargetInfluence["+m+"]",g,_))}l=f.length*o}else{const f=".bones["+e[d].name+"]";n(xv,f+".position",h,"pos",r),n(hh,f+".quaternion",h,"rot",r),n(xv,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let e=0;for(let n=0,r=this.tracks.length;n!==r;++n){const s=this.tracks[n];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function rTe(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function iTe(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return bv;case"vector":case"vector2":case"vector3":case"vector4":return xv;case"color":return Mj;case"quaternion":return hh;case"bool":case"boolean":return om;case"string":return am}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(i.type);if(void 0===i.times){const e=[],n=[];yi.flattenJSON(i.keys,e,n,"value"),i.times=e,i.values=n}return void 0!==t.parse?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const lm={enabled:!1,files:{},add:function(i,t){!1!==this.enabled&&(this.files[i]=t)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};const sTe=new class Cj{constructor(t,e,n){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],p=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}};class pc{constructor(t){this.manager=void 0!==t?t:sTe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(r,s){n.load(t,r,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const mc={};class al extends pc{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=lm.get(t);if(void 0!==s)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(void 0!==mc[t])return void mc[t].push({onLoad:e,onProgress:n,onError:r});mc[t]=[],mc[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===c.body||void 0===c.body.getReader)return c;const u=mc[t],d=c.body.getReader(),h=c.headers.get("Content-Length"),f=h?parseInt(h):0,p=0!==f;let m=0;const g=new ReadableStream({start(_){!function v(){d.read().then(({done:y,value:b})=>{if(y)_.close();else{m+=b.byteLength;const x=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:f});for(let w=0,E=u.length;w<E;w++){const R=u[w];R.onProgress&&R.onProgress(x)}_.enqueue(b),v()}})}()}});return new Response(g)}throw Error(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return c.json();default:if(void 0===a)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{lm.add(t,c);const u=mc[t];delete mc[t];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=mc[t];if(void 0===u)throw this.manager.itemError(t),c;delete mc[t];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(c)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Kw extends pc{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=lm.get(t);if(void 0!==o)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;const a=J_("img");function l(){u(),lm.add(t,this),e&&e(this),s.manager.itemEnd(t)}function c(d){u(),r&&r(d),s.manager.itemError(t),s.manager.itemEnd(t)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(t),a.src=t,a}}class oTe extends pc{constructor(t){super(t)}load(t,e,n,r){const s=new iv,o=new Kw(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(t[c],function(u){s.images[c]=u,a++,6===a&&(s.needsUpdate=!0,e&&e(s))},void 0,r)}for(let c=0;c<t.length;++c)l(c);return s}}class Sj extends pc{constructor(t){super(t)}load(t,e,n,r){const s=new ns,o=new Kw(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(a){s.image=a,s.needsUpdate=!0,void 0!==e&&e(s)},n,r),s}}class ll extends An{constructor(t,e=1){super(),this.type="Light",this.color=new Le(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}ll.prototype.isLight=!0;class NR extends ll{constructor(t,e,n){super(t,n),this.type="HemisphereLight",this.position.copy(An.DefaultUp),this.updateMatrix(),this.groundColor=new Le(e)}copy(t){return ll.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}NR.prototype.isHemisphereLight=!0;const Ej=new lt,Tj=new V,Dj=new V;class BR{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new me(512,512),this.map=null,this.mapPass=null,this.matrix=new lt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fw,this._frameExtents=new me(1,1),this._viewportCount=1,this._viewports=[new Nn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;Tj.setFromMatrixPosition(t.matrixWorld),e.position.copy(Tj),Dj.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Dj),e.updateMatrixWorld(),Ej.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ej),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Aj extends BR{constructor(){super(new Mr(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,n=2*Z_*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}Aj.prototype.isSpotLightShadow=!0;class VR extends ll{constructor(t,e,n=0,r=Math.PI/3,s=0,o=1){super(t,e),this.type="SpotLight",this.position.copy(An.DefaultUp),this.updateMatrix(),this.target=new An,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new Aj}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}VR.prototype.isSpotLight=!0;const Rj=new lt,Mv=new V,HR=new V;class Ij extends BR{constructor(){super(new Mr(90,1,.5,500)),this._frameExtents=new me(4,2),this._viewportCount=6,this._viewports=[new Nn(2,1,1,1),new Nn(0,1,1,1),new Nn(3,1,1,1),new Nn(1,1,1,1),new Nn(3,0,1,1),new Nn(1,0,1,1)],this._cubeDirections=[new V(1,0,0),new V(-1,0,0),new V(0,0,1),new V(0,0,-1),new V(0,1,0),new V(0,-1,0)],this._cubeUps=[new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,0,1),new V(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,s=t.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Mv.setFromMatrixPosition(t.matrixWorld),n.position.copy(Mv),HR.copy(n.position),HR.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(HR),n.updateMatrixWorld(),r.makeTranslation(-Mv.x,-Mv.y,-Mv.z),Rj.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Rj)}}Ij.prototype.isPointLightShadow=!0;class UR extends ll{constructor(t,e,n=0,r=1){super(t,e),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Ij}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}UR.prototype.isPointLight=!0;class kj extends BR{constructor(){super(new rv(-5,5,5,-5,.5,500))}}kj.prototype.isDirectionalLightShadow=!0;class Zw extends ll{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(An.DefaultUp),this.updateMatrix(),this.target=new An,this.shadow=new kj}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}Zw.prototype.isDirectionalLight=!0;(class Oj extends ll{constructor(t,e){super(t,e),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class Pj extends ll{constructor(t,e,n=10,r=10){super(t,e),this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}).prototype.isRectAreaLight=!0;class Lj{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new V)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,r=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*s),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*r*1.092548),e.addScaledVector(o[5],r*s*1.092548),e.addScaledVector(o[6],.315392*(3*s*s-1)),e.addScaledVector(o[7],n*s*1.092548),e.addScaledVector(o[8],.546274*(n*n-r*r)),e}getIrradianceAt(t,e){const n=t.x,r=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*r),e.addScaledVector(o[2],1.023328*s),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*r),e.addScaledVector(o[5],.858086*r*s),e.addScaledVector(o[6],.743125*s*s-.247708),e.addScaledVector(o[7],.858086*n*s),e.addScaledVector(o[8],.429043*(n*n-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}toArray(t=[],e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}static getBasisAt(t,e){const n=t.x,r=t.y,s=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*s,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*s,e[6]=.315392*(3*s*s-1),e[7]=1.092548*n*s,e[8]=.546274*(n*n-r*r)}}Lj.prototype.isSphericalHarmonics3=!0;class Qw extends ll{constructor(t=new Lj,e=1){super(void 0,e),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}Qw.prototype.isLightProbe=!0;class cl{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(n){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}(class Fj extends Pt{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}).prototype.isInstancedBufferGeometry=!0;class Vj extends pc{constructor(t){super(t),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=lm.get(t);if(void 0!==o)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){lm.add(t,l),e&&e(l),s.manager.itemEnd(t)}).catch(function(l){r&&r(l),s.manager.itemError(t),s.manager.itemEnd(t)}),s.manager.itemStart(t)}}let Jw;Vj.prototype.isImageBitmapLoader=!0;class uTe extends pc{constructor(t){super(t)}load(t,e,n,r){const s=this,o=new al(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(a){try{const l=a.slice(0);(void 0===Jw&&(Jw=new(window.AudioContext||window.webkitAudioContext)),Jw).decodeAudioData(l,function(u){e(u)})}catch(l){r?r(l):console.error(l),s.manager.itemError(t)}},n,r)}}(class dTe extends Qw{constructor(t,e,n=1){super(void 0,n);const r=(new Le).set(t),s=(new Le).set(e),o=new V(r.r,r.g,r.b),a=new V(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}).prototype.isHemisphereLightProbe=!0,class hTe extends Qw{constructor(t,e=1){super(void 0,e);const n=(new Le).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class vTe{constructor(t,e,n){let r,s,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,r=this.valueSize,s=t*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)n[s+a]=n[a];o=e}else o+=e,this._mixBufferRegion(n,s,0,e/o,r);this.cumulativeWeight=o}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,r=t*e+e,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(n,r,e*this._origIndex,1-s,e),o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let l=e,c=e+e;l!==c;++l)if(n[l]!==n[l+e]){a.setValue(n,r);break}}saveOriginalState(){const e=this.buffer,n=this.valueSize,r=n*this._origIndex;this.binding.getValue(e,r);for(let s=n,o=r;s!==o;++s)e[s]=e[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)t[e+o]=t[n+o]}_slerp(t,e,n,r){wr.slerpFlat(t,e,t,e,t,n,r)}_slerpAdditive(t,e,n,r,s){const o=this._workIndex*s;wr.multiplyQuaternionsFlat(t,o,t,e,t,n),wr.slerpFlat(t,e,t,e,t,o,r)}_lerp(t,e,n,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=e+a;t[l]=t[l]*o+t[n+a]*r}}_lerpAdditive(t,e,n,r,s){for(let o=0;o!==s;++o){const a=e+o;t[a]=t[a]+t[n+o]*r}}}const zR="\\[\\]\\.:\\/",yTe=new RegExp("["+zR+"]","g"),GR="[^"+zR+"]",bTe="[^"+zR.replace("\\.","")+"]",xTe=/((?:WC+[\/:])*)/.source.replace("WC",GR),wTe=/(WCOD+)?/.source.replace("WCOD",bTe),MTe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",GR),CTe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",GR),STe=new RegExp("^"+xTe+wTe+MTe+CTe+"$"),ETe=["material","materials","bones"];class TTe{constructor(t,e,n){const r=n||li.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}let li=(()=>{class i{constructor(e,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new i.Composite(e,n,r):new i(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(yTe,"")}static parseTrackName(e){const n=STe.exec(e);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==ETe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(void 0===n||""===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(void 0!==r)return r}if(e.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===n||l.uuid===n)return l;const c=r(l.children);if(c)return c}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[n++]=r[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(e||(e=i.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===u){u=d;break}break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==u){if(void 0===e[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[u]}}const a=e[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",e);let l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=TTe,i})();li.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},li.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},li.prototype.GetterByBindingType=[li.prototype._getValue_direct,li.prototype._getValue_array,li.prototype._getValue_arrayElement,li.prototype._getValue_toArray],li.prototype.SetterByBindingTypeAndVersioning=[[li.prototype._setValue_direct,li.prototype._setValue_direct_setNeedsUpdate,li.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[li.prototype._setValue_array,li.prototype._setValue_array_setNeedsUpdate,li.prototype._setValue_array_setMatrixWorldNeedsUpdate],[li.prototype._setValue_arrayElement,li.prototype._setValue_arrayElement_setNeedsUpdate,li.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[li.prototype._setValue_fromArray,li.prototype._setValue_fromArray_setNeedsUpdate,li.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class ATe{constructor(t,e,n=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const s=e.tracks,o=s.length,a=new Array(o),l={endingStart:Ap,endingEnd:Ap};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const r=this._clip.duration,s=t._clip.duration,a=r/s;t.warp(1,s/r,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+n,c[0]=t/o,c[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);const s=this._startTime;if(null!==s){const l=(t-s)*n;if(l<0||0===n)return;this._startTime=null,e=n*l}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);else for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let r=this.time+t,s=this._loopCount;const o=2202===n;if(0===t)return-1===s?r:o&&1==(1&s)?e-r:r;if(2200===n){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===s&&(t>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){const a=Math.floor(r/e);r-=e*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===l){const c=t<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&s))return e-r}return r}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=Rp,r.endingEnd=Rp):(r.endingStart=t?this.zeroSlopeAtStart?Rp:Ap:2402,r.endingEnd=e?this.zeroSlopeAtEnd?Rp:Ap:2402)}_scheduleFading(t,e,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=e,a[1]=s+t,l[1]=n,this}}(class RTe extends lu{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,s=r.length,o=t._propertyBindings,a=t._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let u=c[l];void 0===u&&(u={},c[l]=u);for(let d=0;d!==s;++d){const h=r[d],f=h.name;let p=u[f];if(void 0!==p)++p.referenceCount,o[d]=p;else{if(p=o[d],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}p=new vTe(li.create(n,f,e&&e._propertyBindings[d].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),o[d]=p}a[d].resultBuffer=p.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const n=(t._localRoot||this._root).uuid,r=t._clip.uuid,s=this._actionsByClip[r];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,r,n)}const e=t._propertyBindings;for(let n=0,r=e.length;n!==r;++n){const s=e[n];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,r=e.length;n!==r;++n){const s=e[n];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const r=this._actions,s=this._actionsByClip;let o=s[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,s[e]=o;else{const a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const s=t._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=t._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===l.length&&delete o[s],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,r=e.length;n!==r;++n){const s=e[n];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=n,e[n]=s}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=n,e[n]=s}_addInactiveBinding(t,e,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[e];void 0===o&&(o={},r[e]=o),o[n]=t,t._cacheIndex=s.length,s.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[r],l=e[e.length-1],c=t._cacheIndex;l._cacheIndex=c,e[c]=l,e.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=n,e[n]=s}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=n,e[n]=s}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new wj(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,s=e[r];t.__cacheIndex=r,e[r]=t,s.__cacheIndex=n,e[n]=s}clipAction(t,e,n){const r=e||this._root,s=r.uuid;let o="string"==typeof t?wv.findByName(r,t):t;const a=null!==o?o.uuid:t,l=this._actionsByClip[a];let c=null;if(void 0===n&&(n=null!==o?o.blendMode:2500),void 0!==l){const d=l.actionByRoot[s];if(void 0!==d&&d.blendMode===n)return d;c=l.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const u=new ATe(this,o,e,n);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(t,e){const n=e||this._root,r=n.uuid,s="string"==typeof t?wv.findByName(n,t):t,a=this._actionsByClip[s?s.uuid:t];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const t=this._actions;for(let n=this._nActiveActions-1;n>=0;--n)t[n].stop();return this}update(t){const e=this._actions,n=this._nActiveActions,r=this.time+=t*=this.timeScale,s=Math.sign(t),o=this._accuIndex^=1;for(let c=0;c!==n;++c)e[c]._update(r,t,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,s=r[n];if(void 0!==s){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=e[e.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,e[u]=d,e.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const o in n){const l=n[o].actionByRoot[e];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName[e];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class WR{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new WR(void 0===this.value.clone?this.value:this.value.clone())}}(class ITe extends uh{constructor(t,e,n=1){super(t,e),this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}).prototype.isInstancedInterleavedBuffer=!0;class qj{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(qi(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Yj=new me;class Cv{constructor(t=new me(1/0,1/0),e=new me(-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Yj.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Yj.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Cv.prototype.isBox2=!0;const Mu=new V,tM=new lt,$R=new lt;function Zj(i){const t=[];!0===i.isBone&&t.push(i);for(let e=0;e<i.children.length;e++)t.push.apply(t,Zj(i.children[e]));return t}const r8=new ArrayBuffer(4),Ca=(new Float32Array(r8),new Uint32Array(r8),new Uint32Array(512)),Sa=new Uint32Array(512);for(let i=0;i<256;++i){const t=i-127;t<-27?(Ca[i]=0,Ca[256|i]=32768,Sa[i]=24,Sa[256|i]=24):t<-14?(Ca[i]=1024>>-t-14,Ca[256|i]=1024>>-t-14|32768,Sa[i]=-t-1,Sa[256|i]=-t-1):t<=15?(Ca[i]=t+15<<10,Ca[256|i]=t+15<<10|32768,Sa[i]=13,Sa[256|i]=13):t<128?(Ca[i]=31744,Ca[256|i]=64512,Sa[i]=24,Sa[256|i]=24):(Ca[i]=31744,Ca[256|i]=64512,Sa[i]=13,Sa[256|i]=13)}const YR=new Uint32Array(2048),cm=new Uint32Array(64),a8=new Uint32Array(64);for(let i=1;i<1024;++i){let t=i<<13,e=0;for(;0==(8388608&t);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,YR[i]=t|e}for(let i=1024;i<2048;++i)YR[i]=939524096+(i-1024<<13);for(let i=1;i<31;++i)cm[i]=i<<23;cm[31]=1199570944,cm[32]=2147483648;for(let i=33;i<63;++i)cm[i]=2147483648+(i-32<<23);cm[63]=3347054592;for(let i=1;i<64;++i)32!==i&&(a8[i]=1024);jo.create=function(i,t){return console.log("THREE.Curve.create() has been deprecated"),i.prototype=Object.create(jo.prototype),i.prototype.constructor=i,i.prototype.getPoint=t,i},hv.prototype.fromPoints=function(i){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(i)},class FTe extends dh{constructor(t=10,e=10,n=4473924,r=8947848){n=new Le(n),r=new Le(r);const s=e/2,o=t/e,a=t/2,l=[],c=[];for(let h=0,f=0,p=-a;h<=e;h++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const m=h===s?n:r;m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3}const u=new Pt;u.setAttribute("position",new ut(l,3)),u.setAttribute("color",new ut(c,3)),super(u,new Pr({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class PTe extends dh{constructor(t){const e=Zj(t),n=new Pt,r=[],s=[],o=new Le(0,0,1),a=new Le(0,1,0);for(let c=0;c<e.length;c++){const u=e[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}n.setAttribute("position",new ut(r,3)),n.setAttribute("color",new ut(s,3)),super(n,new Pr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,r=n.getAttribute("position");$R.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<e.length;s++){const a=e[s];a.parent&&a.parent.isBone&&(tM.multiplyMatrices($R,a.matrixWorld),Mu.setFromMatrixPosition(tM),r.setXYZ(o,Mu.x,Mu.y,Mu.z),tM.multiplyMatrices($R,a.parent.matrixWorld),Mu.setFromMatrixPosition(tM),r.setXYZ(o+1,Mu.x,Mu.y,Mu.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},pc.prototype.extractUrlBase=function(i){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),cl.extractUrlBase(i)},pc.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Cv.prototype.center=function(i){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(i)},Cv.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Cv.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},Cv.prototype.size=function(i){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(i)},uo.prototype.center=function(i){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(i)},uo.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},uo.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},uo.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)},uo.prototype.size=function(i){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(i)},oh.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},du.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},fw.prototype.setFromMatrix=function(i){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(i)},kr.prototype.flattenToArrayOffset=function(i,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,t)},kr.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)},kr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},kr.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)},kr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},kr.prototype.getInverse=function(i){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()},lt.prototype.extractPosition=function(i){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(i)},lt.prototype.flattenToArrayOffset=function(i,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,t)},lt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new V).setFromMatrixColumn(this,3)},lt.prototype.setRotationFromQuaternion=function(i){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(i)},lt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},lt.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},lt.prototype.multiplyVector4=function(i){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},lt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},lt.prototype.rotateAxis=function(i){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),i.transformDirection(this)},lt.prototype.crossVector=function(i){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},lt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},lt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},lt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},lt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},lt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},lt.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},lt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},lt.prototype.makeFrustum=function(i,t,e,n,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(i,t,n,e,r,s)},lt.prototype.getInverse=function(i){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()},cc.prototype.isIntersectionLine=function(i){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(i)},wr.prototype.multiplyVector3=function(i){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),i.applyQuaternion(this)},wr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},sh.prototype.isIntersectionBox=function(i){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},sh.prototype.isIntersectionPlane=function(i){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(i)},sh.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)},ar.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},ar.prototype.barycoordFromPoint=function(i,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(i,t)},ar.prototype.midpoint=function(i){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(i)},ar.prototypenormal=function(i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(i)},ar.prototype.plane=function(i){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(i)},ar.barycoordFromPoint=function(i,t,e,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ar.getBarycoord(i,t,e,n,r)},ar.normal=function(i,t,e,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ar.getNormal(i,t,e,n)},sl.prototype.extractAllPoints=function(i){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(i)},sl.prototype.extrude=function(i){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new hc(this,i)},sl.prototype.makeGeometry=function(i){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new vv(this,i)},me.prototype.fromAttribute=function(i,t,e){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,t,e)},me.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},me.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},V.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},V.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},V.prototype.getPositionFromMatrix=function(i){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(i)},V.prototype.getScaleFromMatrix=function(i){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(i)},V.prototype.getColumnFromMatrix=function(i,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,i)},V.prototype.applyProjection=function(i){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(i)},V.prototype.fromAttribute=function(i,t,e){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,t,e)},V.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},V.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Nn.prototype.fromAttribute=function(i,t,e){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,t,e)},Nn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},An.prototype.getChildByName=function(i){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(i)},An.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},An.prototype.translate=function(i,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,i)},An.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},An.prototype.applyMatrix=function(i){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)},Object.defineProperties(An.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(i){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=i}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Yi.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Yi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Mw.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Mr.prototype.setLens=function(i,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(i)},Object.defineProperties(ll.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(i){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=i}},shadowCameraLeft:{set:function(i){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=i}},shadowCameraRight:{set:function(i){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=i}},shadowCameraTop:{set:function(i){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=i}},shadowCameraBottom:{set:function(i){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=i}},shadowCameraNear:{set:function(i){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=i}},shadowCameraFar:{set:function(i){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=i}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(i){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=i}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(i){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=i}},shadowMapHeight:{set:function(i){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=i}}}),Object.defineProperties(Gn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===K_},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(K_)}}}),Gn.prototype.setDynamic=function(i){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===i?K_:X_),this},Gn.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Gn.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Pt.prototype.addIndex=function(i){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(i)},Pt.prototype.addAttribute=function(i,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===i?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(i,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(i,new Gn(arguments[1],arguments[2])))},Pt.prototype.addDrawCall=function(i,t,e){void 0!==e&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(i,t)},Pt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Pt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Pt.prototype.removeAttribute=function(i){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(i)},Pt.prototype.applyMatrix=function(i){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)},Object.defineProperties(Pt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),uh.prototype.setDynamic=function(i){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===i?K_:X_),this},uh.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},hc.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},hc.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},hc.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},vw.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},WR.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Ci.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Le}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(i){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(i){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=i}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Ma.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(i){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=i}}}),Bn.prototype.clearTarget=function(i,t,e,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(i),this.clear(t,e,n)},Bn.prototype.animate=function(i){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(i)},Bn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Bn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Bn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Bn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Bn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Bn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Bn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Bn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Bn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Bn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Bn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Bn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Bn.prototype.enableScissorTest=function(i){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(i)},Bn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Bn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Bn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Bn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Bn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Bn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Bn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Bn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Bn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Bn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Bn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=i}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(i){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=i}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(i){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===i?Dn:nc}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(RW.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(co.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=i}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(i){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=i}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=i}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(i){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=i}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(i){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=i}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(i){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=i}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(i){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=i}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(i){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=i}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(i){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=i}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(i){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=i}}}),class mTe extends An{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}.prototype.load=function(i){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new uTe).load(i,function(n){t.setBuffer(n)}),this},lR.prototype.updateCubeMap=function(i,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(i,t)},lR.prototype.clear=function(i,t,e,n){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(i,t,e,n)},th.crossOrigin=void 0,th.loadTexture=function(i,t,e,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new Sj;r.setCrossOrigin(this.crossOrigin);const s=r.load(i,e,void 0,n);return t&&(s.mapping=t),s},th.loadTextureCube=function(i,t,e,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new oTe;r.setCrossOrigin(this.crossOrigin);const s=r.load(i,e,void 0,n);return t&&(s.mapping=t),s},th.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},th.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"139"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="139");const l8={type:"change"},XR={type:"start"},c8={type:"end"};class NTe extends lu{constructor(t,e){super(),void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new V,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(U){U.addEventListener("keydown",xn),this._domElementKeyEvents=U},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(l8),n.update(),s=r.NONE},this.update=function(){const U=new V,Ce=(new wr).setFromUnitVectors(t.up,new V(0,1,0)),nt=Ce.clone().invert(),Pe=new V,X=new wr,ke=2*Math.PI;return function(){const xt=n.object.position;U.copy(xt).sub(n.target),U.applyQuaternion(Ce),a.setFromVector3(U),n.autoRotate&&s===r.NONE&&F(function E(){return 2*Math.PI/60/60*n.autoRotateSpeed}()),n.enableDamping?(a.theta+=l.theta*n.dampingFactor,a.phi+=l.phi*n.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let ze=n.minAzimuthAngle,ht=n.maxAzimuthAngle;return isFinite(ze)&&isFinite(ht)&&(ze<-Math.PI?ze+=ke:ze>Math.PI&&(ze-=ke),ht<-Math.PI?ht+=ke:ht>Math.PI&&(ht-=ke),a.theta=ze<=ht?Math.max(ze,Math.min(ht,a.theta)):a.theta>(ze+ht)/2?Math.max(ze,a.theta):Math.min(ht,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),!0===n.enableDamping?n.target.addScaledVector(u,n.dampingFactor):n.target.add(u),U.setFromSpherical(a),U.applyQuaternion(nt),xt.copy(n.target).add(U),n.object.lookAt(n.target),!0===n.enableDamping?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor,u.multiplyScalar(1-n.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,!!(d||Pe.distanceToSquared(n.object.position)>o||8*(1-X.dot(n.object.quaternion))>o)&&(n.dispatchEvent(l8),Pe.copy(n.object.position),X.copy(n.object.quaternion),d=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",le),n.domElement.removeEventListener("pointerdown",Ee),n.domElement.removeEventListener("pointercancel",De),n.domElement.removeEventListener("wheel",$t),n.domElement.removeEventListener("pointermove",Ke),n.domElement.removeEventListener("pointerup",Ne),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",xn)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new qj,l=new qj;let c=1;const u=new V;let d=!1;const h=new me,f=new me,p=new me,m=new me,g=new me,_=new me,v=new me,y=new me,b=new me,x=[],w={};function R(){return Math.pow(.95,n.zoomSpeed)}function F(U){l.theta-=U}function N(U){l.phi-=U}const S=function(){const U=new V;return function(nt,Pe){U.setFromMatrixColumn(Pe,0),U.multiplyScalar(-nt),u.add(U)}}(),L=function(){const U=new V;return function(nt,Pe){!0===n.screenSpacePanning?U.setFromMatrixColumn(Pe,1):(U.setFromMatrixColumn(Pe,0),U.crossVectors(n.object.up,U)),U.multiplyScalar(nt),u.add(U)}}(),Y=function(){const U=new V;return function(nt,Pe){const X=n.domElement;if(n.object.isPerspectiveCamera){U.copy(n.object.position).sub(n.target);let Se=U.length();Se*=Math.tan(n.object.fov/2*Math.PI/180),S(2*nt*Se/X.clientHeight,n.object.matrix),L(2*Pe*Se/X.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(S(nt*(n.object.right-n.object.left)/n.object.zoom/X.clientWidth,n.object.matrix),L(Pe*(n.object.top-n.object.bottom)/n.object.zoom/X.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function I(U){n.object.isPerspectiveCamera?c/=U:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*U)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function z(U){n.object.isPerspectiveCamera?c*=U:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/U)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(U){h.set(U.clientX,U.clientY)}function O(U){m.set(U.clientX,U.clientY)}function fe(){1===x.length?h.set(x[0].pageX,x[0].pageY):h.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function _e(){1===x.length?m.set(x[0].pageX,x[0].pageY):m.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function re(){const U=x[0].pageX-x[1].pageX,Ce=x[0].pageY-x[1].pageY,nt=Math.sqrt(U*U+Ce*Ce);v.set(0,nt)}function tt(U){if(1==x.length)f.set(U.pageX,U.pageY);else{const nt=dt(U);f.set(.5*(U.pageX+nt.x),.5*(U.pageY+nt.y))}p.subVectors(f,h).multiplyScalar(n.rotateSpeed);const Ce=n.domElement;F(2*Math.PI*p.x/Ce.clientHeight),N(2*Math.PI*p.y/Ce.clientHeight),h.copy(f)}function ye(U){if(1===x.length)g.set(U.pageX,U.pageY);else{const Ce=dt(U);g.set(.5*(U.pageX+Ce.x),.5*(U.pageY+Ce.y))}_.subVectors(g,m).multiplyScalar(n.panSpeed),Y(_.x,_.y),m.copy(g)}function vt(U){const Ce=dt(U),nt=U.pageX-Ce.x,Pe=U.pageY-Ce.y,X=Math.sqrt(nt*nt+Pe*Pe);y.set(0,X),b.set(0,Math.pow(y.y/v.y,n.zoomSpeed)),I(b.y),v.copy(y)}function Ee(U){!1!==n.enabled&&(0===x.length&&(n.domElement.setPointerCapture(U.pointerId),n.domElement.addEventListener("pointermove",Ke),n.domElement.addEventListener("pointerup",Ne)),function Me(U){x.push(U)}(U),"touch"===U.pointerType?function W(U){switch(qe(U),x.length){case 1:switch(n.touches.ONE){case 0:if(!1===n.enableRotate)return;fe(),s=r.TOUCH_ROTATE;break;case 1:if(!1===n.enablePan)return;_e(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(n.touches.TWO){case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;(function Ae(){n.enableZoom&&re(),n.enablePan&&_e()})(),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function Oe(){n.enableZoom&&re(),n.enableRotate&&fe()})(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(XR)}(U):function je(U){let Ce;switch(U.button){case 0:Ce=n.mouseButtons.LEFT;break;case 1:Ce=n.mouseButtons.MIDDLE;break;case 2:Ce=n.mouseButtons.RIGHT;break;default:Ce=-1}switch(Ce){case 1:if(!1===n.enableZoom)return;(function P(U){v.set(U.clientX,U.clientY)})(U),s=r.DOLLY;break;case 0:if(U.ctrlKey||U.metaKey||U.shiftKey){if(!1===n.enablePan)return;O(U),s=r.PAN}else{if(!1===n.enableRotate)return;D(U),s=r.ROTATE}break;case 2:if(U.ctrlKey||U.metaKey||U.shiftKey){if(!1===n.enableRotate)return;D(U),s=r.ROTATE}else{if(!1===n.enablePan)return;O(U),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(XR)}(U))}function Ke(U){!1!==n.enabled&&("touch"===U.pointerType?function B(U){switch(qe(U),s){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;tt(U),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;ye(U),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;(function ue(U){n.enableZoom&&vt(U),n.enablePan&&ye(U)})(U),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function pe(U){n.enableZoom&&vt(U),n.enableRotate&&tt(U)})(U),n.update();break;default:s=r.NONE}}(U):function it(U){if(!1!==n.enabled)switch(s){case r.ROTATE:if(!1===n.enableRotate)return;!function q(U){f.set(U.clientX,U.clientY),p.subVectors(f,h).multiplyScalar(n.rotateSpeed);const Ce=n.domElement;F(2*Math.PI*p.x/Ce.clientHeight),N(2*Math.PI*p.y/Ce.clientHeight),h.copy(f),n.update()}(U);break;case r.DOLLY:if(!1===n.enableZoom)return;!function K(U){y.set(U.clientX,U.clientY),b.subVectors(y,v),b.y>0?I(R()):b.y<0&&z(R()),v.copy(y),n.update()}(U);break;case r.PAN:if(!1===n.enablePan)return;!function Q(U){g.set(U.clientX,U.clientY),_.subVectors(g,m).multiplyScalar(n.panSpeed),Y(_.x,_.y),m.copy(g),n.update()}(U)}}(U))}function Ne(U){Ue(U),0===x.length&&(n.domElement.releasePointerCapture(U.pointerId),n.domElement.removeEventListener("pointermove",Ke),n.domElement.removeEventListener("pointerup",Ne)),n.dispatchEvent(c8),s=r.NONE}function De(U){Ue(U)}function $t(U){!1===n.enabled||!1===n.enableZoom||s!==r.NONE||(U.preventDefault(),n.dispatchEvent(XR),function j(U){U.deltaY<0?z(R()):U.deltaY>0&&I(R()),n.update()}(U),n.dispatchEvent(c8))}function xn(U){!1===n.enabled||!1===n.enablePan||function we(U){let Ce=!1;switch(U.code){case n.keys.UP:Y(0,n.keyPanSpeed),Ce=!0;break;case n.keys.BOTTOM:Y(0,-n.keyPanSpeed),Ce=!0;break;case n.keys.LEFT:Y(n.keyPanSpeed,0),Ce=!0;break;case n.keys.RIGHT:Y(-n.keyPanSpeed,0),Ce=!0}Ce&&(U.preventDefault(),n.update())}(U)}function le(U){!1!==n.enabled&&U.preventDefault()}function Ue(U){delete w[U.pointerId];for(let Ce=0;Ce<x.length;Ce++)if(x[Ce].pointerId==U.pointerId)return void x.splice(Ce,1)}function qe(U){let Ce=w[U.pointerId];void 0===Ce&&(Ce=new me,w[U.pointerId]=Ce),Ce.set(U.pageX,U.pageY)}function dt(U){return w[(U.pointerId===x[0].pointerId?x[1]:x[0]).pointerId]}n.domElement.addEventListener("contextmenu",le),n.domElement.addEventListener("pointerdown",Ee),n.domElement.addEventListener("pointercancel",De),n.domElement.addEventListener("wheel",$t,{passive:!1}),this.update()}}class BTe extends pc{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new zTe(e)}),this.register(function(e){return new YTe(e)}),this.register(function(e){return new XTe(e)}),this.register(function(e){return new GTe(e)}),this.register(function(e){return new WTe(e)}),this.register(function(e){return new jTe(e)}),this.register(function(e){return new $Te(e)}),this.register(function(e){return new qTe(e)}),this.register(function(e){return new HTe(e)}),this.register(function(e){return new KTe(e)})}load(t,e,n,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:cl.extractUrlBase(t),this.manager.itemStart(t);const a=function(c){r?r(c):console.error(c),s.manager.itemError(t),s.manager.itemEnd(t)},l=new al(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(c){try{s.parse(c,o,function(u){e(u),s.manager.itemEnd(t)},a)}catch(u){a(u)}},n,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,r){let s;const o={},a={};if("string"==typeof t)s=t;else if(cl.decodeText(new Uint8Array(t,0,4))===u8){try{o[gn.KHR_BINARY_GLTF]=new ZTe(t)}catch(d){return void(r&&r(d))}s=o[gn.KHR_BINARY_GLTF].content}else s=cl.decodeText(new Uint8Array(t));const l=JSON.parse(s);if(void 0===l.asset||l.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new u1e(l,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);a[d.name]=d,o[d.name]=!0}if(l.extensionsUsed)for(let u=0;u<l.extensionsUsed.length;++u){const d=l.extensionsUsed[u],h=l.extensionsRequired||[];switch(d){case gn.KHR_MATERIALS_UNLIT:o[d]=new UTe;break;case gn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[d]=new e1e;break;case gn.KHR_DRACO_MESH_COMPRESSION:o[d]=new QTe(l,this.dracoLoader);break;case gn.KHR_TEXTURE_TRANSFORM:o[d]=new JTe;break;case gn.KHR_MESH_QUANTIZATION:o[d]=new t1e;break;default:h.indexOf(d)>=0&&void 0===a[d]&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,r)}parseAsync(t,e){const n=this;return new Promise(function(r,s){n.parse(t,e,r,s)})}}function VTe(){let i={};return{get:function(t){return i[t]},add:function(t,e){i[t]=e},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const gn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class HTe{constructor(t){this.parser=t,this.name=gn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,r=e.length;n<r;n++){const s=e[n];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&t._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let r=e.cache.get(n);if(r)return r;const s=e.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[t];let c;const u=new Le(16777215);void 0!==l.color&&u.fromArray(l.color);const d=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new Zw(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new UR(u),c.distance=d;break;case"spot":c=new VR(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,void 0!==l.intensity&&(c.intensity=l.intensity),c.name=e.createUniqueName(l.name||"light_"+t),r=Promise.resolve(c),e.cache.add(n,r),r}createNodeAttachment(t){const e=this,n=this.parser,s=n.json.nodes[t],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return n._getNodeRef(e.cache,a,l)})}}class UTe{constructor(){this.name=gn.KHR_MATERIALS_UNLIT}getMaterialType(){return vs}extendParams(t,e,n){const r=[];t.color=new Le(1,1,1),t.opacity=1;const s=e.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;t.color.fromArray(o),t.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(n.assignTexture(t,"map",s.baseColorTexture,Dn))}return Promise.all(r)}}class zTe{constructor(t){this.parser=t,this.name=gn.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?wu:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(e.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(n.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(n.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(n.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new me(a,a)}return Promise.all(s)}}class GTe{constructor(t){this.parser=t,this.name=gn.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?wu:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];e.sheenColor=new Le(0,0,0),e.sheenRoughness=0,e.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&e.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(e.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(n.assignTexture(e,"sheenColorMap",o.sheenColorTexture,Dn)),void 0!==o.sheenRoughnessTexture&&s.push(n.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class WTe{constructor(t){this.parser=t,this.name=gn.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?wu:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(e.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(n.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class jTe{constructor(t){this.parser=t,this.name=gn.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?wu:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];e.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(n.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return e.attenuationColor=new Le(a[0],a[1],a[2]),Promise.all(s)}}class $Te{constructor(t){this.parser=t,this.name=gn.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?wu:null}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return e.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class qTe{constructor(t){this.parser=t,this.name=gn.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?wu:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];e.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(n.assignTexture(e,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return e.specularColor=new Le(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(n.assignTexture(e,"specularColorMap",o.specularColorTexture,Dn)),Promise.all(s)}}class YTe{constructor(t){this.parser=t,this.name=gn.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,r=n.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=e.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,s.source,o)}}class XTe{constructor(t){this.parser=t,this.name=gn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,s=r.textures[t];if(!s.extensions||!s.extensions[e])return null;const o=s.extensions[e],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(t,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}})),this.isSupported}}class KTe{constructor(t){this.name=gn.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,o.ready]).then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,d=r.byteStride,h=new ArrayBuffer(u*d),f=new Uint8Array(a[0],l,c);return o.decodeGltfBuffer(new Uint8Array(h),u,d,f,r.mode,r.filter),h})}return null}}const u8="glTF";class ZTe{constructor(t){this.name=gn.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12);if(this.header={magic:cl.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==u8)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(t,12);let s=0;for(;s<n;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,1313821514===a){const l=new Uint8Array(t,12+s,o);this.content=cl.decodeText(l)}else if(5130562===a){const l=12+s;this.body=t.slice(l,l+o)}s+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class QTe{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=gn.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,r=this.dracoLoader,s=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=ZR[u]||u.toLowerCase();a[d]=o[u]}for(const u in t.attributes){const d=ZR[u]||u.toLowerCase();if(void 0!==o[u]){const h=n.accessors[t.attributes[u]];c[d]=Ev[h.componentType],l[d]=!0===h.normalized}}return e.getDependency("bufferView",s).then(function(u){return new Promise(function(d){r.decodeDracoFile(u,function(h){for(const f in h.attributes){const p=h.attributes[f],m=l[f];void 0!==m&&(p.normalized=m)}d(h)},a,c)})})}}class JTe{constructor(){this.name=gn.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class KR extends sm{constructor(t){super(),this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new Le).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class e1e{constructor(){this.name=gn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return KR}extendParams(t,e,n){const r=e.extensions[this.name];t.color=new Le(1,1,1),t.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;t.color.fromArray(o),t.opacity=o[3]}if(void 0!==r.diffuseTexture&&s.push(n.assignTexture(t,"map",r.diffuseTexture,Dn)),t.emissive=new Le(0,0,0),t.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,t.specular=new Le(1,1,1),Array.isArray(r.specularFactor)&&t.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const o=r.specularGlossinessTexture;s.push(n.assignTexture(t,"glossinessMap",o)),s.push(n.assignTexture(t,"specularMap",o,Dn))}return Promise.all(s)}createMaterial(t){const e=new KR(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=0,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e}}class t1e{constructor(){this.name=gn.KHR_MESH_QUANTIZATION}}class vh extends fc{constructor(t,e,n,r){super(t,e,n,r)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r*3+r;for(let o=0;o!==r;o++)e[o]=n[s+o];return e}}vh.prototype.beforeStart_=vh.prototype.copySampleValue_,vh.prototype.afterEnd_=vh.prototype.copySampleValue_,vh.prototype.interpolate_=function(i,t,e,n){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=2*o,l=3*o,c=n-t,u=(e-t)/c,d=u*u,h=d*u,f=i*l,p=f-l,m=-2*h+3*d,g=h-d,_=1-m,v=g-d+u;for(let y=0;y!==o;y++)r[y]=_*s[p+y+o]+v*(s[p+y+a]*c)+m*s[f+y+o]+g*(s[f+y]*c);return r};const n1e=new wr;class i1e extends vh{interpolate_(t,e,n,r){const s=super.interpolate_(t,e,n,r);return n1e.fromArray(s).normalize().toArray(s),s}}const Ev={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},h8={9728:or,9729:Fi,9984:1004,9985:1007,9986:1005,9987:ou},f8={33071:_s,33648:1002,10497:Yd},p8={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ZR={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Cu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},r1e={CUBICSPLINE:void 0,LINEAR:Dp,STEP:Y_};function s1e(i){return void 0===i.DefaultMaterial&&(i.DefaultMaterial=new sm({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),i.DefaultMaterial}function Tv(i,t,e){for(const n in e.extensions)void 0===i[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=e.extensions[n])}function yh(i,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(i.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function a1e(i,t){if(i.updateMorphTargets(),void 0!==t.weights)for(let e=0,n=t.weights.length;e<n;e++)i.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(i.morphTargetInfluences.length===e.length){i.morphTargetDictionary={};for(let n=0,r=e.length;n<r;n++)i.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function l1e(i){const t=i.extensions&&i.extensions[gn.KHR_DRACO_MESH_COMPRESSION];let e;return e=t?"draco:"+t.bufferView+":"+t.indices+":"+m8(t.attributes):i.indices+":"+m8(i.attributes)+":"+i.mode,e}function m8(i){let t="";const e=Object.keys(i).sort();for(let n=0,r=e.length;n<r;n++)t+=e[n]+":"+i[e[n]]+";";return t}function JR(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class u1e{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new VTe,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={},this.textureLoader="undefined"!=typeof createImageBitmap&&!1===/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?new Vj(this.options.manager):new Sj(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new al(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};Tv(s,a,r),yh(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){t(a)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=e.length;r<s;r++){const o=e[r].joints;for(let a=0,l=o.length;a<l;a++)t[o[a]].isBone=!0}for(let r=0,s=t.length;r<s;r++){const o=t[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(n[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(n,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const r=t(e[n]);if(r)return r}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let r=0;r<e.length;r++){const s=t(e[r]);s&&n.push(s)}return n}getDependency(t,e){const n=t+":"+e;let r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this.loadNode(e);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this.loadAnimation(e);break;case"camera":r=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this;e=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(s,o){return n.getDependency(t,o)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[gn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(cl.resolveURL(e.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(n){const s=e.byteOffset||0;return n.slice(s,s+(e.byteLength||0))})}loadAccessor(t){const e=this,n=this.json,r=this.json.accessors[t];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=p8[r.type],c=Ev[r.componentType],u=c.BYTES_PER_ELEMENT,h=r.byteOffset||0,f=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let m,g;if(f&&f!==u*l){const _=Math.floor(h/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count;let y=e.cache.get(v);y||(m=new c(a,_*f,r.count*f/u),y=new uh(m,f/u),e.cache.add(v,y)),g=new vu(y,l,h%f/u,p)}else m=null===a?new c(r.count*l):new c(a,h,r.count*l),g=new Gn(m,l,p);if(void 0!==r.sparse){const b=r.sparse.values.byteOffset||0,x=new(0,Ev[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*p8.SCALAR),w=new c(o[2],b,r.sparse.count*l);null!==a&&(g=new Gn(g.array.slice(),g.itemSize,g.normalized));for(let E=0,R=x.length;E<R;E++){const F=x[E];if(g.setX(F,w[E*l]),l>=2&&g.setY(F,w[E*l+1]),l>=3&&g.setZ(F,w[E*l+2]),l>=4&&g.setW(F,w[E*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(t){const e=this.json,s=e.textures[t].source,o=e.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(t,s,a)}loadTextureImage(t,e,n){const r=this,s=this.json,o=s.textures[t],a=s.images[e],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(e,n).then(function(u){u.flipY=!1,o.name&&(u.name=o.name);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=h8[h.magFilter]||Fi,u.minFilter=h8[h.minFilter]||ou,u.wrapS=f8[h.wrapS]||Yd,u.wrapT=f8[h.wrapT]||Yd,r.associations.set(u,{textures:t}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(t,e){const r=this.json,s=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(d=>d.clone());const o=r.images[t],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const h=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(h,f){let p=h;!0===e.isImageBitmapLoader&&(p=function(m){const g=new ns(m);g.needsUpdate=!0,h(g)}),e.load(cl.resolveURL(d,s.path),p,void 0,f)})}).then(function(d){return!0===c&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||function c1e(i){return i.search(/\.jpe?g($|\?)/i)>0||0===i.search(/^data\:image\/jpeg/)?"image/jpeg":i.search(/\.webp($|\?)/i)>0||0===i.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[t]=u,u}assignTexture(t,e,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(void 0!==n.texCoord&&0!=n.texCoord&&!("aoMap"===e&&1==n.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+e+" not yet supported."),s.extensions[gn.KHR_TEXTURE_TRANSFORM]){const a=void 0!==n.extensions?n.extensions[gn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[gn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.encoding=r),t[e]=o,o})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const r=void 0===e.attributes.tangent,s=void 0!==e.attributes.color,o=void 0===e.attributes.normal;if(t.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new Dw,Ci.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(t.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new Pr,Ci.prototype.copy.call(l,n),l.color.copy(n.color),this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),t.material=n}getMaterialType(){return sm}loadMaterial(t){const e=this,r=this.extensions,s=this.json.materials[t];let o;const a={},l=s.extensions||{},c=[];if(l[gn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const d=r[gn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=d.getMaterialType(),c.push(d.extendParams(a,s,e))}else if(l[gn.KHR_MATERIALS_UNLIT]){const d=r[gn.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,e))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Le(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}void 0!==d.baseColorTexture&&c.push(e.assignTexture(a,"map",d.baseColorTexture,Dn)),a.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,a.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(c.push(e.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(e.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(t)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(t,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==vs&&(c.push(e.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new me(1,1),void 0!==s.normalTexture.scale)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}return void 0!==s.occlusionTexture&&o!==vs&&(c.push(e.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==vs&&(a.emissive=(new Le).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&o!==vs&&c.push(e.assignTexture(a,"emissiveMap",s.emissiveTexture,Dn)),Promise.all(c).then(function(){let d;return d=o===KR?r[gn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),s.name&&(d.name=s.name),yh(d,s),e.associations.set(d,{materials:t}),s.extensions&&Tv(r,d,s),d})}createUniqueName(t){const e=li.sanitizeNodeName(t||"");let n=e;for(let r=1;this.nodeNamesUsed[n];++r)n=e+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(t){const e=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[gn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(l){return _8(l,a,e)})}const o=[];for(let a=0,l=t.length;a<l;a++){const c=t[a],u=l1e(c),d=r[u];if(d)o.push(d.promise);else{let h;h=c.extensions&&c.extensions[gn.KHR_DRACO_MESH_COMPRESSION]?s(c):_8(new Pt,c,e),r[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(t){const e=this,r=this.extensions,s=this.json.meshes[t],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=void 0===o[l].material?s1e(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(e.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let f=0,p=u.length;f<p;f++){const m=u[f],g=o[f];let _;const v=c[f];if(4===g.mode||5===g.mode||6===g.mode||void 0===g.mode)_=!0===s.isSkinnedMesh?new Mw(m,v):new Yi(m,v),!0===_.isSkinnedMesh&&!_.geometry.attributes.skinWeight.normalized&&_.normalizeSkinWeights(),5===g.mode?_.geometry=v8(_.geometry,1):6===g.mode&&(_.geometry=v8(_.geometry,2));else if(1===g.mode)_=new dh(m,v);else if(3===g.mode)_=new yu(m,v);else if(2===g.mode)_=new wR(m,v);else{if(0!==g.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);_=new CR(m,v)}Object.keys(_.geometry.morphAttributes).length>0&&a1e(_,s),_.name=e.createUniqueName(s.name||"mesh_"+t),yh(_,s),g.extensions&&Tv(r,_,g),e.assignFinalMaterial(_),d.push(_)}for(let f=0,p=d.length;f<p;f++)e.associations.set(d[f],{meshes:t,primitives:f});if(1===d.length)return d[0];const h=new uc;e.associations.set(h,{meshes:t});for(let f=0,p=d.length;f<p;f++)h.add(d[f]);return h})}loadCamera(t){let e;const n=this.json.cameras[t],r=n[n.type];if(r)return"perspective"===n.type?e=new Mr(awe.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(e=new rv(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),yh(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then(function(r){return n.inverseBindMatrices=r,n})}loadAnimation(t){const n=this.json.animations[t],r=[],s=[],o=[],a=[],l=[];for(let c=0,u=n.channels.length;c<u;c++){const d=n.channels[c],h=n.samplers[d.sampler],f=d.target,m=void 0!==n.parameters?n.parameters[h.input]:h.input,g=void 0!==n.parameters?n.parameters[h.output]:h.output;r.push(this.getDependency("node",void 0!==f.node?f.node:f.id)),s.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",g)),a.push(h),l.push(f)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],h=c[2],f=c[3],p=c[4],m=[];for(let _=0,v=u.length;_<v;_++){const y=u[_],b=d[_],x=h[_],w=f[_],E=p[_];if(void 0===y)continue;let R;switch(y.updateMatrix(),y.matrixAutoUpdate=!0,Cu[E.path]){case Cu.weights:R=bv;break;case Cu.rotation:R=hh;break;default:R=xv}const F=y.name?y.name:y.uuid,N=void 0!==w.interpolation?r1e[w.interpolation]:Dp,S=[];Cu[E.path]===Cu.weights?y.traverse(function(Y){Y.morphTargetInfluences&&S.push(Y.name?Y.name:Y.uuid)}):S.push(F);let L=x.array;if(x.normalized){const Y=JR(L.constructor),I=new Float32Array(L.length);for(let z=0,D=L.length;z<D;z++)I[z]=L[z]*Y;L=I}for(let Y=0,I=S.length;Y<I;Y++){const z=new R(S[Y]+"."+Cu[E.path],b.array,L,N);"CUBICSPLINE"===w.interpolation&&(z.createInterpolant=function(P){return new(this instanceof hh?i1e:vh)(this.times,this.values,this.getValueSize()/3,P)},z.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(z)}}return new wv(n.name?n.name:"animation_"+t,void 0,m)})}createNodeMesh(t){const n=this,r=this.json.nodes[t];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(t){const n=this.extensions,r=this,s=this.json.nodes[t],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(t)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(t)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(l=!0===s.isBone?new Cw:a.length>1?new uc:1===a.length?a[0]:new An,l!==a[0])for(let c=0,u=a.length;c<u;c++)l.add(a[c]);if(s.name&&(l.userData.name=s.name,l.name=o),yh(l,s),s.extensions&&Tv(n,l,s),void 0!==s.matrix){const c=new lt;c.fromArray(s.matrix),l.applyMatrix4(c)}else void 0!==s.translation&&l.position.fromArray(s.translation),void 0!==s.rotation&&l.quaternion.fromArray(s.rotation),void 0!==s.scale&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=t,l})}loadScene(t){const e=this.json,n=this.extensions,r=this.json.scenes[t],s=this,o=new uc;r.name&&(o.name=s.createUniqueName(r.name)),yh(o,r),r.extensions&&Tv(n,o,r);const a=r.nodes||[],l=[];for(let c=0,u=a.length;c<u;c++)l.push(g8(a[c],o,e,s));return Promise.all(l).then(function(){return s.associations=(u=>{const d=new Map;for(const[h,f]of s.associations)(h instanceof Ci||h instanceof ns)&&d.set(h,f);return u.traverse(h=>{const f=s.associations.get(h);null!=f&&d.set(h,f)}),d})(o),o})}}function g8(i,t,e,n){const r=e.nodes[i];return n.getDependency("node",i).then(function(s){if(void 0===r.skin)return s;let o;return n.getDependency("skin",r.skin).then(function(a){o=a;const l=[];for(let c=0,u=o.joints.length;c<u;c++)l.push(n.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const c=[],u=[];for(let d=0,h=a.length;d<h;d++){const f=a[d];if(f){c.push(f);const p=new lt;void 0!==o.inverseBindMatrices&&p.fromArray(o.inverseBindMatrices.array,16*d),u.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[d])}l.bind(new Sw(c,u),l.matrixWorld)}),s})}).then(function(s){t.add(s);const o=[];if(r.children){const a=r.children;for(let l=0,c=a.length;l<c;l++)o.push(g8(a[l],s,e,n))}return Promise.all(o)})}function _8(i,t,e){const n=t.attributes,r=[];function s(o,a){return e.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=ZR[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(void 0!==t.indices&&!i.index){const o=e.getDependency("accessor",t.indices).then(function(a){i.setIndex(a)});r.push(o)}return yh(i,t),function d1e(i,t,e){const n=t.attributes,r=new uo;if(void 0===n.POSITION)return;{const a=e.json.accessors[n.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new V(l[0],l[1],l[2]),new V(c[0],c[1],c[2])),a.normalized){const u=JR(Ev[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=t.targets;if(void 0!==s){const a=new V,l=new V;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(void 0!==d.POSITION){const h=e.json.accessors[d.POSITION],f=h.min,p=h.max;if(void 0!==f&&void 0!==p){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){const m=JR(Ev[h.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new du;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}(i,t,e),Promise.all(r).then(function(){return void 0!==t.targets?function o1e(i,t,e){let n=!1,r=!1,s=!1;for(let c=0,u=t.length;c<u;c++){const d=t[c];if(void 0!==d.POSITION&&(n=!0),void 0!==d.NORMAL&&(r=!0),void 0!==d.COLOR_0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let c=0,u=t.length;c<u;c++){const d=t[c];if(n){const h=void 0!==d.POSITION?e.getDependency("accessor",d.POSITION):i.attributes.position;o.push(h)}if(r){const h=void 0!==d.NORMAL?e.getDependency("accessor",d.NORMAL):i.attributes.normal;a.push(h)}if(s){const h=void 0!==d.COLOR_0?e.getDependency("accessor",d.COLOR_0):i.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[1],h=c[2];return n&&(i.morphAttributes.position=c[0]),r&&(i.morphAttributes.normal=d),s&&(i.morphAttributes.color=h),i.morphTargetsRelative=!0,i})}(i,t.targets,e):i})}function v8(i,t){let e=i.getIndex();if(null===e){const o=[],a=i.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i;for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),e=i.getIndex()}const n=e.count-2,r=[];if(2===t)for(let o=1;o<=n;o++)r.push(e.getX(0)),r.push(e.getX(o)),r.push(e.getX(o+1));else for(let o=0;o<n;o++)o%2==0?(r.push(e.getX(o)),r.push(e.getX(o+1)),r.push(e.getX(o+2))):(r.push(e.getX(o+2)),r.push(e.getX(o+1)),r.push(e.getX(o)));r.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s}let y8=(()=>{class i{filter(e,n){e.children.forEach(r=>{console.log(r.name,n),r.visible=!!r.name.includes(n)})}lights(e){const s=new NR(11657727,12155424,.7);e.add(s);const l=new Zw(16777215,1);l.position.set(30,30,30),l.target.position.set(0,0,0),l.castShadow=!0,l.shadow.mapSize.width=512,l.shadow.mapSize.height=512,l.shadow.camera.near=.5,l.shadow.camera.far=500,e.add(l.target),e.add(l)}createSimpleMesh(e){const s=new sl;s.moveTo(5,5),s.bezierCurveTo(5,5,4,0,0,0),s.bezierCurveTo(-6,0,-6,7,-6,7),s.bezierCurveTo(-6,11,-3,15.4,5,19),s.bezierCurveTo(12,15.4,16,11,16,7),s.bezierCurveTo(16,7,16,0,10,0),s.bezierCurveTo(7,0,5,5,5,5);const o=new hc(s,{steps:2,depth:16,bevelEnabled:!0,bevelThickness:1,bevelSize:1,bevelOffset:0,bevelSegments:1}),a=new vs({color:65280});return new Yi(o,a)}import(e,n,r){(new BTe).load("/assets/models/threejstest.glb",o=>{const a=o.scene;a.children.forEach(l=>{l.castShadow=!0,l.receiveShadow=!0}),a.castShadow=!0,a.receiveShadow=!0,a.name=n,e.add(a),r(a)})}basicGround(e){const r=new qp(100,100,1,1),s=new vs({color:16777215}),o=new Yi(r,s);o.position.set(0,-.5,0),o.rotateX(-Math.PI/2),o.receiveShadow=!0,e.add(o)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=be({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const h1e=["rendererContainer"];var jt=(()=>(function(i){i.OSB="OSB",i.Insulation="Insulation",i.construction="construction",i.drywall="drywall",i.serviceStuds="serviceStuds",i.tapes="tapes",i.floorBeam="floorBeam"}(jt||(jt={})),jt))();let f1e=(()=>{class i{constructor(e,n,r,s){this.threeService=e,this.houseService=n,this.host=r,this.appService=s,this.resize$=new In(void 0),this.renderer=new Bn({antialias:!0,alpha:!0}),this.scene=new vw,this.subscriptions=[],this.modelName="wallDetail",this.subModels={},this.showingSubModels={[jt.OSB]:!1,[jt.Insulation]:!1,[jt.construction]:!1,[jt.drywall]:!1,[jt.serviceStuds]:!1,[jt.tapes]:!1,[jt.floorBeam]:!1}}onResize(){const e=this.host.nativeElement.getBoundingClientRect(),n=e.height,r=e.width;this.camera&&(this.camera.aspect=r/n,this.camera.updateProjectionMatrix()),this.renderer.setSize(r,n),this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)}animate(){window.requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}createSceneAndCamera(){this.camera=new Mr(50,1,.1,1e3),this.camera.position.set(0,1.7,10),this.controls=new NTe(this.camera,this.renderer.domElement),this.controls.minDistance=.1,this.controls.maxDistance=50,this.controls.update(),this.scene.background=null,this.renderer.shadowMap.enabled=!0,this.rendererContainer.nativeElement.appendChild(this.renderer.domElement),this.animate()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.observer.unobserve(this.host.nativeElement)}ngAfterViewInit(){this.createSceneAndCamera(),this.observer=new ResizeObserver(e=>this.resize$.next(e)),this.observer.observe(this.host.nativeElement),this.subscriptions.push(this.resize$.subscribe(()=>{this.onResize()}),this.appService.fullscreen$.subscribe(e=>{this.onResize(),this.controls.enableZoom=e}),this.appService.tag$.subscribe(()=>{this.tag=this.appService.tag$.value,this.sectionShowing()}),this.appService.scroll$.subscribe(()=>{const e=this.appService.scroll$.value;this.section!==e.section&&(this.section=e.section,this.sectionShowing())})),this.threeService.basicGround(this.scene),this.threeService.lights(this.scene),this.threeService.import(this.scene,this.modelName,e=>{this.model=e,this.model.children.forEach(n=>{n.userData.position=n.position.clone(),n.material.transparent=!0}),this.setSubModels(),this.sectionShowing(!0),console.log("Complete model:",e)})}setSubModels(){this.subModels[jt.Insulation]=this.model.children.filter(e=>{const n=e.name.toLocaleLowerCase();return n.includes("iso")||n.includes("iso")}),this.subModels[jt.OSB]=this.model.children.filter(e=>e.name.toLocaleLowerCase().includes("g-__")),this.subModels[jt.construction]=this.model.children.filter(e=>{const n=e.name.toLocaleLowerCase();return n.includes("joist")||n.includes("stud")}),this.subModels[jt.drywall]=this.model.children.filter(e=>e.name.toLocaleLowerCase().includes("gips")),this.subModels[jt.serviceStuds]=this.model.children.filter(e=>e.name.toLocaleLowerCase().includes("service"))}sectionShowing(e=!1){!this.model||(console.log(this.section,this.subModels),[Je.contructionFoundation].includes(this.section)&&(this.showingSubModels={[jt.Insulation]:!1,[jt.OSB]:!1,[jt.construction]:!0,[jt.drywall]:!1,[jt.floorBeam]:!1,[jt.serviceStuds]:!1,[jt.tapes]:!1}),[Je.contructionCrawlerSpace].includes(this.section)&&(this.showingSubModels={[jt.Insulation]:!1,[jt.OSB]:!0,[jt.construction]:!0,[jt.drywall]:!1,[jt.floorBeam]:!1,[jt.serviceStuds]:!1,[jt.tapes]:!1}),[Je.facadeDoor].includes(this.section)&&(this.showingSubModels={[jt.Insulation]:!0,[jt.OSB]:!0,[jt.construction]:!0,[jt.drywall]:!1,[jt.floorBeam]:!1,[jt.serviceStuds]:!1,[jt.tapes]:!1}),this.toggleInsulation(),this.toggleOSB(),this.toggleContruction())}toggleContruction(){const e=this.subModels[jt.Insulation];if(!e)return;const n=this.showingSubModels[jt.Insulation];e.forEach(r=>{const s=r.material,o=r.userData.position;n?(ao.to(s,{opacity:1,duration:1,ease:"power1.out"}),console.log(r.position.y,o.y),r.position.y!==o.y&&ao.fromTo(r.position,{y:r.position.y-3},{y:o.y,duration:1,ease:"power1.out"})):ao.to(s,{opacity:0,duration:.3,ease:"power1.out"})})}toggleInsulation(){const e=this.subModels[jt.Insulation];if(!e)return;const n=this.showingSubModels[jt.Insulation];e.forEach(r=>{const s=r.material,o=r.userData.position;n?(ao.to(s,{opacity:1,duration:1,ease:"power1.out"}),console.log(r.position.y,o.y),r.position.y!==o.y&&ao.fromTo(r.position,{y:r.position.y-3},{y:o.y,duration:1,ease:"power1.out"})):ao.to(s,{opacity:0,duration:.3,ease:"power1.out"})})}toggleOSB(){const e=this.subModels[jt.OSB],n=this.showingSubModels[jt.OSB];!e||!n||e.forEach(r=>{const s=r.material,o=r.userData.position;s.transparent=!0,console.log(r),n?ao.fromTo(s,{opacity:1},{opacity:0,duration:.3,ease:"power1.out"}):(ao.fromTo(s,{opacity:0},{opacity:1,duration:1,ease:"power1.out"}),ao.fromTo(r.position,{y:o.y-3},{y:o.y,duration:1,ease:"power1.out"}))})}toggleDrywall(){const e=this.subModels[jt.drywall],n=this.showingSubModels[jt.drywall];!e||!n||e.forEach(r=>{const s=r.material,o=r.userData.position;s.transparent=!0,console.log(r),n?ao.fromTo(s,{opacity:1},{opacity:0,duration:.3,ease:"power1.out"}):(ao.fromTo(s,{opacity:0},{opacity:1,duration:1,ease:"power1.out"}),ao.fromTo(r.position,{y:o.y-3},{y:o.y,duration:1,ease:"power1.out"}))})}}return i.\u0275fac=function(e){return new(e||i)(C(y8),C(rr),C(Ve),C(Wi))},i.\u0275cmp=ft({type:i,selectors:[["app-three-window"]],viewQuery:function(e,n){if(1&e&&ni(h1e,5),2&e){let r;Ct(r=St())&&(n.rendererContainer=r.first)}},decls:2,vars:0,consts:[["rendererContainer",""]],template:function(e,n){1&e&&ie(0,"div",null,0)},styles:["[_nghost-%COMP%]{height:100%;width:100%}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),i})();function p1e(i,t){1&i&&(qn(),M(0,"g",15),ie(1,"polygon",16)(2,"polygon",17)(3,"text",18),T()),2&i&&zn("id","step-",t.index,"")}const m1e=function(){return[]};let g1e=(()=>{class i extends wx{constructor(e,n,r,s,o,a){super(e,n,r,s,a),this.houseService=e,this.appService=n,this.tooltipService=r,this.host=s,this.httpClient=o,this.d3Service=a,this.graphic=vr.stair,this.floor=ee.all,this.steps=new In(1)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){const e=this.stair.totalRise/Math.tan(Math.PI/180*30);[Je.stairCheck,Je.stairPlan].includes(this.section)?this.drawingSize=[[5*this.stair.run,9*-this.stair.rise],[4*this.stair.run,4*this.stair.rise]]:(this.drawingSize=[[-this.stair.run,-this.stair.totalRise],[e,this.stair.totalRise+this.stair.floorThickness]],this.marginInPixels=[40,0,0,0]),this.marginInMeters=[0,2*this.stair.run,0,0],[Je.stairPlan].includes(this.section)?this.svg.style("opacity",0):this.svg.style("opacity",1)}}return i.\u0275fac=function(e){return new(e||i)(C(rr),C(Wi),C(ap),C(Ve),C(xd),C(A_))},i.\u0275cmp=ft({type:i,selectors:[["app-svg-stair-steps"]],features:[he],decls:16,vars:2,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-step"],["svg",""],[1,"g-building"],["id","floor-groundfloor"],["id","floor-topfloor-shadow"],["id","floor-topfloor"],[1,"g-step"],[3,"id",4,"ngFor","ngForOf"],[1,"g-helper"],["id","nose-line"],["id","back-line"],["id","run-size"],["id","rise-size"],["id","total-run-size"],["id","total-rise-size"],[3,"id"],[1,"step-run"],[1,"step-rise"],[1,"step-text"]],template:function(e,n){1&e&&(qn(),M(0,"svg",0,1)(2,"g")(3,"g",2),ie(4,"polygon",3)(5,"polygon",4)(6,"polygon",5),T(),M(7,"g",6),Ge(8,p1e,4,1,"g",7),T(),M(9,"g",8),ie(10,"path",9)(11,"path",10)(12,"g",11)(13,"g",12)(14,"g",13)(15,"g",14),T()()()),2&e&&($(8),Z("ngForOf",td(1,m1e).constructor(25)))},directives:[od],styles:["svg.stairs-step{width:100%;height:100%;position:relative}  svg.stairs-step .g-helper,   svg.stairs-step .g-building,   svg.stairs-step .g-step{fill:#8d7d7d;transition:.4s,stroke-width 1ms;stroke:#000}  svg.stairs-step .g-step{fill:#000;stroke:none}  svg.stairs-step .g-step text{transition:.4s;opacity:0}  svg.stairs-step .nose-line{stroke-dasharray:1%;opacity:.3}  svg.stairs-step .g-building{fill:#f9f9f9}  svg.stairs-step .g-building .floor-topfloor-shadow{opacity:.3}  svg.stairs-step .measure{fill:none;transition:.4s,stroke-width 1ms;stroke:#0700de}  svg.stairs-step .measure text{stroke:#fff;paint-order:stroke;fill:#0700de}  svg.stairs-step .measure.rise-size,   svg.stairs-step .measure.run-size{transition:.4s 0s;opacity:0}  .section-stair-check .rise-size,   .section-stair-check .run-size{transition:.4s .6s!important;opacity:1!important}  .tag-amount-steps text{opacity:1!important}"]}),i})();function _1e(i,t){1&i&&ie(0,"controls",10),2&i&&Z("@slideInOut",void 0)}function v1e(i,t){1&i&&ie(0,"controls",11),2&i&&Z("@slideInOut",void 0)}function y1e(i,t){1&i&&ie(0,"app-svg-cross",15)}function b1e(i,t){1&i&&(Er(0),ie(1,"app-svg-stair-plan",16)(2,"app-svg-plan",17),Tr()),2&i&&($(1),Z("isChild",!0))}function x1e(i,t){1&i&&(Er(0),ie(1,"app-three-window"),Tr())}function w1e(i,t){1&i&&(Er(0),ie(1,"app-svg-stair-plan",18)(2,"app-svg-stair-steps",19),Tr())}function M1e(i,t){if(1&i&&(Er(0),M(1,"div",12),Ge(2,y1e,1,0,"app-svg-cross",13),T(),M(3,"div",14),Ge(4,b1e,3,1,"ng-container",8),Ge(5,x1e,2,0,"ng-container",8),Ge(6,w1e,3,0,"ng-container",8),T(),Tr()),2&i){const e=t.ngIf,n=Qe();$(2),Z("ngIf",e===n.Graphic.cross),$(2),Z("ngIf",e===n.Graphic.plan),$(1),Z("ngIf",e===n.Graphic.window),$(1),Z("ngIf",e===n.Graphic.stair)}}const C1e=function(i){return{top:i}};let S1e=(()=>{class i{constructor(e,n,r,s,o,a){this.appService=e,this.tooltipService=n,this.houseService=r,this.router=s,this.activatedRoute=o,this.visibleService=a,this.sections=Object.keys(Je),this.Tag=Ao,this.GraphicSide=Of,this.Graphic=vr,this.sectionScroll={},this.goalLine=.4,this.popupActive$=this.appService.popupActive$,this.fullscreen$=this.appService.fullscreen$,this.scroll$=this.appService.scroll$,this.floor$=this.appService.floor$,this.tag$=this.appService.tag$,this.states$=this.appService.states$,this.cssStates$=this.states$.pipe(en(l=>l.map(c=>`state-${c}`).join(" "))),this.loaded=!1}isScrolledIntoView(){this.calcSection()}ngAfterViewInit(){this.router.events.pipe(pi(e=>e instanceof $f)).subscribe(e=>{setTimeout(()=>{this.setup()},0)}),this.setup()}setup(){this.sectionEls=document.querySelectorAll("section"),this.sectionScroll={},this.sectionEls.forEach(r=>{const s=r.id;this.sectionScroll[s]={id:s,top:r.offsetTop}}),this.calcSection();const n=this.activatedRoute.snapshot.params.tag;n&&this.tag$.next(n),this.loaded=!0}calcSection(){this.section=this.getSection(),void 0!==this.section&&(this.graphic=this.setGraphic(this.section),this.graphicSide=this.getSide(),this.updateStateBasedOnSection(this.section),document.querySelector(`section#${this.section}`).classList.add("section-active"),this.appService.scroll$.next({scroll:Math.round(window.pageYOffset),percentage:this.getVerticalScrollPercentage(document.body),section:this.section,graphicSide:this.graphicSide,graphic:this.graphic}),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{section:this.section},replaceUrl:!0,queryParamsHandling:"merge"}))}getVerticalScrollPercentage(e){var n=e.parentNode;return Math.round((e.scrollTop||n.scrollTop)/(n.scrollHeight-n.clientHeight)*1e3)/1e3}setGraphic(e){let n;return[Je.welcome,Je.passiv,Je.basics,Je.extensions,Je.tower,Je.wiredPower,Je.wiredEthernet,Je.wiredExtra,Je.wiredLight,Je.wiredSafety].includes(e)&&(n=vr.plan),[Je.roof70,Je.roofBasics,Je.roofChoice,Je.roofCircle,Je.roofEdge,Je.roofIntermezzo].includes(e)&&(n=vr.cross,[Je.roof70].includes(e)&&this.houseService.update("cross","viewedRoofStyle",ks.roof70),[Je.roofBasics,Je.roofCircle].includes(e)&&this.houseService.update("cross","viewedRoofStyle",ks.roofCircle)),[Je.stairStart,Je.stairBasic,Je.stairCheck,Je.stairPlan].includes(e)&&(n=vr.stair),[Je.facadeStart,Je.facadeWindow,Je.facadeDoor].includes(e)&&(n=vr.none),[Je.contructionCrawlerSpace,Je.contructionFloor,Je.contructionFoundation,Je.contructionRoof,Je.contructionWall,Je.contructionWallFinish].includes(e)&&(n=vr.window),[Je.instaltionDrinkWater,Je.instaltionElectricity,Je.instaltionGreyWater,Je.instaltionHeating,Je.instaltionSmartHome,Je.instaltionVentilation].includes(e)&&(n=vr.none),this.graphic!==n&&(console.log("Swap side!"),this.tooltipService.detachOverlay()),this.graphic=n,n}updateStateBasedOnSection(e){this.appService.setStates(Zs.grey,[Je.roofEdge].includes(e),!this.loaded),this.appService.setStates(Zs.measure,[Je.roofBasics,Je.roof70,Je.roofCircle].includes(e),!this.loaded),this.appService.setStates(Zs.doors,![Je.passiv,Je.welcome].includes(e),!this.loaded)}getSection(){var e=Math.round(window.innerHeight*this.goalLine),r=Math.round(window.pageYOffset)+e;this.sectionEls.forEach(o=>{const a=o.id;this.sectionScroll[a].past=this.sectionScroll[a].top<r,o.classList.remove("section-active")});const s=Object.values(this.sectionScroll).filter(o=>o.past).sort((o,a)=>a.top-o.top);return s&&s[0]?s[0].id:void 0}getSide(){return[vr.cross].includes(this.graphic)?Of.left:Of.right}}return i.\u0275fac=function(e){return new(e||i)(C(Wi),C(ap),C(rr),C(Ds),C(Ed),C(qye))},i.\u0275cmp=ft({type:i,selectors:[["app-main-page"]],hostBindings:function(e,n){1&e&&$e("scroll",function(s){return n.isScrolledIntoView(s)},!1,jC)},decls:21,vars:31,consts:[[1,"page"],[1,"left-blinder","bg"],[1,"left-flex"],[1,"center"],[1,"right-flex"],[1,"right-blinder","bg"],["class","controls controls-left",4,"ngIf"],["class","controls controls-right",4,"ngIf"],[4,"ngIf"],[1,"goal-marker",3,"ngStyle"],[1,"controls","controls-left"],[1,"controls","controls-right"],[1,"floating","floating-left"],["class","svg-cross",4,"ngIf"],[1,"floating","floating-right"],[1,"svg-cross"],["fxFlex","0 0 0",1,"svg-plan-stair-plan",3,"isChild"],[1,"svg-plan"],["fxFlex","1 1 50%",1,"svg-stair-plan"],["fxFlex","1 1 50%",1,"svg-stair-steps"]],template:function(e,n){1&e&&(M(0,"div",0)(1,"div"),Br(2,"async"),Br(3,"async"),Br(4,"async"),Br(5,"async"),Br(6,"async"),Br(7,"async"),Br(8,"async"),ie(9,"div",1),M(10,"main"),ie(11,"div",2),M(12,"div",3),ie(13,"router-outlet"),T(),ie(14,"div",4),T(),ie(15,"div",5),Ge(16,_1e,1,1,"controls",6),Ge(17,v1e,1,1,"controls",7),Ge(18,M1e,7,4,"ng-container",8),Br(19,"async"),T()(),ie(20,"div",9)),2&e&&($(1),function lF(i,t,e,n,r,s,o,a,l,c,u,d,h,f,p){la(js,Wa,yf(xe(),i,t,e,n,r,s,o,a,l,c,u,d,h,f,p),!0)}("container \n  tag-",Vr(2,13,n.tag$)," \n  floor-",Vr(3,15,n.floor$)," \n  section-",Vr(4,17,n.scroll$).section," \n  show-",Vr(5,19,n.scroll$).graphicSide," \n  ",Vr(6,21,n.popupActive$)?"popup-active":""," \n  ",Vr(7,23,n.fullscreen$)?"fullscreen":"","\n  ",Vr(8,25,n.cssStates$)," \n  "),$(15),Z("ngIf",n.graphicSide===n.GraphicSide.left),$(1),Z("ngIf",n.graphicSide===n.GraphicSide.right),$(1),Z("ngIf",Vr(19,27,n.scroll$).graphic),$(2),Z("ngStyle",Tl(29,C1e,100*n.goalLine+"vh")))},directives:[kb,Ks,o0e,f0e,v0e,m1,k0e,f1e,g1e,ad,Hb],pipes:[If],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.page[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]{justify-content:center;display:flex;flex-direction:row;flex:1 1 100vw}.container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{max-width:800px;justify-content:center;display:flex;flex-direction:row;flex:10 1 800px}.container[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{transition:.6s}.container.show-left[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:1 1 100vw}.container.show-left[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container.show-right[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:1 1 0vw}.container.show-right[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%]{flex:1 1 100vw}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:1 1 100vw;border-left:0vw solid transparent;border-right:0vw solid transparent;max-width:450px;overflow-x:hidden;z-index:2}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{display:block;height:100%;width:0vw;position:absolute;z-index:5;transition:.8s ease-in;opacity:.8}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%]{left:0px}.container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{right:0px}.container.fullscreen.show-left[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container.fullscreen.show-right[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{transition:.6s ease-out;width:100vw;opacity:1}.container.fullscreen[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]{max-height:100vh!important}.container.fullscreen[_ngcontent-%COMP%]     g.all{transition:none!important}.floating[_ngcontent-%COMP%]{top:0;height:100vh;position:fixed;max-width:100vh;display:flex;flex-direction:column;justify-content:center;z-index:500;transition:1s}.floating.floating-right[_ngcontent-%COMP%]{left:50vw;width:50vw}.floating.floating-left[_ngcontent-%COMP%]{right:50vw;width:50vw}.floating[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{overflow:hidden;flex:1 1 100%;position:relative}.show-right[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:50vw;right:100vw}.show-left[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:50vw;left:100vw}.fullscreen.show-left[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:100vw;right:0vw;max-width:100vw}.fullscreen.show-right[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:100vw;left:0vw;max-width:100vw}.goal-marker[_ngcontent-%COMP%]{position:fixed;border:1px solid var(--color-30);height:13px;width:13px;transform:rotate(45deg);left:-10px}.svg-plan[_ngcontent-%COMP%]{transition:.6s;max-height:55vh}"],data:{animation:[kG,Iye]}}),i})();const E1e=["*"];let oM=(()=>{class i{constructor(e,n){this.appService=e,this.elementRef=n}mouseover(){this.appService.setTag(this.tag)}mouseout(){this.appService.setTag(void 0)}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(C(Wi),C(Ve))},i.\u0275cmp=ft({type:i,selectors:[["tag"]],hostBindings:function(e,n){1&e&&$e("mouseover",function(){return n.mouseover()})("mouseout",function(){return n.mouseout()})},inputs:{tag:"tag"},ngContentSelectors:E1e,decls:2,vars:0,consts:[["mat-flat-button","",1,"mat-button-tag"]],template:function(e,n){1&e&&(zi(),M(0,"button",0),Tn(1),T())},directives:[TU],styles:[".mat-button-tag[_ngcontent-%COMP%]{padding:3px 0 5px;border:1px solid var(--color-30);line-height:1em}.mat-button-tag[_ngcontent-%COMP%]     .mat-button-wrapper{padding:8px;font-weight:initial}"]}),i})(),T1e=(()=>{class i{constructor(e,n,r,s){this.builder=e,this.overlay=n,this.appService=r,this.viewContainerRef=s,this.open=!1,this.animate=!0,this.byClick=!1,this.unsubscribe=new Dt}mouseover(){this.attachOverlay()}mouseout(){this.appService.popupActive$.next(!1),this.detachOverlay()}onResize(e){this.updateOnChange()}getPositionStrategy(){let e;return e=this.overlay.position().flexibleConnectedTo(this.viewContainerRef.element.nativeElement).withPositions([new zb({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,-20),new zb({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,20,"flipped")]).withPush(!0),e}getScrollStrategy(){return this.overlay.scrollStrategies.reposition()}ngOnInit(){this.pageEl=document.querySelector(".center"),this.btn=this.viewContainerRef.element.nativeElement;const e=this.getPositionStrategy(),n=this.getScrollStrategy();this.overlayRef=this.overlay.create({positionStrategy:e,scrollStrategy:n,hasBackdrop:this.byClick}),this.overlayRef.backdropClick().pipe(kn(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.open&&this.attachOverlay()}ngOnDestroy(){this.detachOverlay(),this.unsubscribe.next(),this.unsubscribe.complete(),this.overlayRef.dispose()}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.arrowEl.remove(),this.overlayRef.detach())}attachOverlay(){const e=new $1(this.overlayTemplate,this.viewContainerRef);this.overlayRef&&!this.overlayRef.hasAttached()&&(this.componentRef=this.overlayRef.attach(e),this.updateOnChange(),this.createMakeMeAPopup(),this.appService.popupActive$.next(!0))}createMakeMeAPopup(){this.overlayRef.overlayElement.classList.add("popup","base"),this.arrowEl=document.createElement("div"),this.arrowEl.classList.add("popup-arrow","base"),this.setArrow(),this.overlayRef.overlayElement.append(this.arrowEl)}setArrow(){const{left:e,width:n}=this.btn.getBoundingClientRect(),{x:r}=this.pageEl.getBoundingClientRect();this.arrowEl.style.left=e-r-20+n/2+"px"}updateOnChange(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.overlayRef.updatePosition(),this.overlayRef.updateSize({width:this.pageEl.clientWidth}),this.arrowEl&&this.setArrow())}playAnimation(e,n){const s=this.builder.build(e).create(n);return s.play(),s}enterAnimation(e){return e.style.maxWidth="100%",[bt({"max-width":"0%"}),Yn("150ms ease-out",bt({"max-width":"100%"}))]}leaveAnimation(){return[Yn("200ms ease-in",bt({"max-width":"0%"}))]}}return i.\u0275fac=function(e){return new(e||i)(C(rT),C(Ul),C(Wi),C(Ar))},i.\u0275dir=ae({type:i,selectors:[["","overlayTemplate",""]],hostBindings:function(e,n){1&e&&$e("mouseover",function(){return n.mouseover()})("mouseout",function(){return n.mouseout()})("resize",function(s){return n.onResize(s)},!1,jC)},inputs:{overlayTemplate:"overlayTemplate",open:"open"}}),i})();function D1e(i,t){1&i&&k(0),2&i&&At(" Insulation keeps you warm. Passiv houses have almost no heatloss so therefore (almost) no heating is needed! The walls are thicker than you are used to: ",.5," meter ")}function A1e(i,t){1&i&&k(0," In the winter, we need the sun to warmup the house. In the summer the house needs to be shaded on the outside to prevent overheating. ")}function R1e(i,t){1&i&&(k(0," It is even a hashtag "),M(1,"b"),k(2,"#EfficiencyFirst"),T(),k(3,". Why look at green energy if we wast still alot of energy. ( Ofcourse we still need green energy! ). First insulation to the max, before thinking of solarpanels. "))}function I1e(i,t){1&i&&k(0," It is not really a thing, more a concept. The house has a west-east-length of 3 * base-dimension (Rule of thirds / Trinity). It helps the already complex roof to look good. And also, very helpfull with calculations. ")}function k1e(i,t){1&i&&k(0," This extension is to greaten the three-part south facade, creates a bigger roof on the second floor. ")}function O1e(i,t){1&i&&k(0," Dont make this too long, it does not fit with the compact design, enlarge the base-dimension if you like. ")}function P1e(i,t){1&i&&k(0," A concept, how far is the bend-point of the roof, away from the outside wall. ")}function L1e(i,t){if(1&i){const e=Eo();Er(0),M(1,"section",1)(2,"h1"),k(3),T(),M(4,"p",2),k(5," A passiv-haus but in country style, and above all open-source. We love to share our plans as a community. See it as free building plans for your own house or give it to your constructor. Its truly free. "),T()(),M(6,"section",1)(7,"h2"),k(8,"Passiv? "),M(9,"span",3),k(10,"(Its German)"),T()(),M(11,"p"),k(12,"Passive houses are the future. Feel free to "),M(13,"a",4),k(14,"search online for 'Passiv Haus'"),T(),k(15," (not really sexy or anything). Therefor let us try to explain it. Well, really short: "),T(),M(16,"ul")(17,"li")(18,"tag",5),k(19,"Great insulated"),T(),Ge(20,D1e,1,1,"ng-template",null,6,ja),T(),M(22,"li"),k(23,"Well & compact desinged"),T(),M(24,"li")(25,"tag",5),k(26,"Orientation"),T(),k(27," to the sun "),Ge(28,A1e,1,0,"ng-template",null,7,ja),T(),M(30,"li"),k(31,"No thermal bridges"),T(),M(32,"li"),k(33,"Can be houses, but also offices etc"),T(),M(34,"li"),k(35,"Sustainable (well in our opinion)"),T()(),M(36,"p"),k(37,"Passiv Haus in one punchline:"),T(),M(38,"div",8)(39,"tag",5),k(40,"Efficiency first"),T(),Ge(41,R1e,4,0,"ng-template",null,9,ja),T(),M(43,"p"),k(44," Sometimes passive houses are often not so pretty. (maybe, if you like form-follow-function). Effiency first, but style second for us! Therefore we try to combine old design styles with this great concept. "),T()(),M(45,"section",1)(46,"h2"),k(47,"The basics"),T(),M(48,"p"),k(49," The house is based on parametric design. So play with all the sliders, its interactive. Lets start at the very basics. And why does it look like a church from above? "),T(),M(50,"h3"),k(51,"Two axis"),T(),M(52,"p"),k(53,"The main house, seen from the south (up here) has two axis with a certain "),M(54,"tag",5),k(55,"base dimension"),T(),k(56,". A design seen often in classical buildings. It comes often with great "),M(57,"tag",10),k(58,"viewlines"),T(),k(59,". "),T(),Ge(60,I1e,1,0,"ng-template",null,11,ja),M(62,"label")(63,"span"),k(64,"Base dimension "),T(),M(65,"mat-slider",12),$e("input",function(r){on(e);const s=Qe();return s.update("house","studAmount",r.value,s.tags.baseDimension)}),T()(),M(66,"label",13)(67,"span"),k(68,"Technical "),T(),k(69),M(70,"tag",5),k(71,"base dimension"),T(),k(72),T(),M(73,"label",13)(74,"span"),k(75,"Design"),T(),M(76,"ul")(77,"li"),k(78,"We follow "),M(79,"a",14),k(80,"Rule of thirds"),T()()()()(),M(81,"section",1)(82,"h2"),k(83,"Extensions"),T(),M(84,"p"),k(85," Break boring lines on the southface and create more interesting view points with a "),M(86,"tag",5),k(87,"south extension"),T(),ie(88,"i"),k(89,". The colder, darker side (less windows by design) is located in the convenient "),M(90,"tag",5),k(91,"north wing"),T()(),M(92,"h3"),k(93,"Body parts "),T(),Ge(94,k1e,1,0,"ng-template",null,15,ja),Ge(96,O1e,1,0,"ng-template",null,16,ja),M(98,"label")(99,"span"),k(100,"South extension "),T(),M(101,"mat-slider",17),$e("input",function(r){on(e);const s=Qe();return s.update("house","studAmountSouth",r.value,s.tags.extensionToSouth)}),T()(),M(102,"label")(103,"span"),k(104," North wing "),T(),M(105,"mat-slider",18),$e("input",function(r){on(e);const s=Qe();return s.update("house","studAmountNorth",r.value,s.tags.extensionToNorth)}),T()(),M(106,"label")(107,"span"),k(108," West wing "),T(),M(109,"mat-slider",18),$e("input",function(r){on(e);const s=Qe();return s.update("house","studAmountWest",r.value,s.tags.extensionToWest)}),T()(),M(110,"label")(111,"span"),k(112," East wing "),T(),M(113,"mat-slider",18),$e("input",function(r){on(e);const s=Qe();return s.update("house","studAmountEast",r.value,s.tags.extensionToEast)}),T()(),M(114,"label",13)(115,"span"),k(116,"Technical "),T(),M(117,"table")(118,"tr"),ie(119,"th"),M(120,"th"),k(121,"Amount"),T()(),M(122,"tr")(123,"td"),k(124," Wall"),T(),M(125,"td"),k(126,"inside"),T(),M(127,"td"),k(128,"length"),T(),M(129,"td"),k(130),T()(),M(131,"tr"),ie(132,"td")(133,"td"),M(134,"td"),k(135,"area"),T(),M(136,"td"),k(137),T()(),M(138,"tr"),ie(139,"td"),M(140,"td"),k(141,"outside"),T(),M(142,"td"),k(143,"length"),T(),M(144,"td"),k(145),T()(),M(146,"tr"),ie(147,"td")(148,"td"),M(149,"td"),k(150,"area"),T(),M(151,"td"),k(152),T()(),M(153,"tr")(154,"td"),k(155,"Floor"),T(),M(156,"td"),k(157,"area"),T(),M(158,"td"),k(159,"ground"),T(),M(160,"td"),k(161),T()(),M(162,"tr"),ie(163,"td")(164,"td"),M(165,"td"),k(166,"top"),T(),M(167,"td"),k(168),T()(),M(169,"tr"),ie(170,"td")(171,"td"),M(172,"td"),k(173,"total"),T(),M(174,"td"),k(175),T()()()()(),M(176,"section",19)(177,"h3"),k(178,"Tower"),T(),M(179,"p"),k(180,"This tower is a practical backdoor and allows you to walk from the kitchen to the rest of the house. It creates also a viewpoint from the roof! We like the tower. "),T(),M(181,"mat-slide-toggle",20),$e("ngModelChange",function(r){return on(e),Qe().update("house","showTower",r)}),k(182,"With a practical tower "),T()(),M(183,"section",1)(184,"h1"),k(185,"Cross section"),T(),M(186,"h2"),k(187,"Slicing it, the basics"),T(),M(188,"p"),k(189,"High ceilings are nice and makes the house feel larger, they costs more but worth it. Heat problems are less with floorheathing."),T(),M(190,"label")(191,"span"),k(192),T(),M(193,"mat-slider",21),$e("input",function(r){return on(e),Qe().update("cross","ceilingHeight",r.value)}),T()(),M(194,"h3"),k(195),T(),M(196,"p"),k(197,"Way too technical in this design fase! However a crawler space can raise the whole building, changing the overall experience. It can protect more against climate change. Floodings or heavy rains. It is also more expensive and takes more time to build."),T(),M(198,"mat-slide-toggle",20),$e("ngModelChange",function(r){return on(e),Qe().update("cross","crawlerSpace",r)}),k(199),T(),M(200,"label")(201,"span"),k(202),T(),M(203,"mat-slider",22),$e("input",function(r){return on(e),Qe().update("cross","floorAboveGround",r.value)}),T()()(),M(204,"section",1)(205,"h2"),k(206,"Roof style"),T(),M(207,"p")(208,"a",23),k(209,"Mansard or Gambrel roof"),T(),k(210," is gives a nice classic countryside stylefull roof.There are three methods to create them. We check both the \"circle\" and '70\xb0/30\xb0'"),T(),M(211,"h2"),k(212,"Circle-based"),T(),M(213,"p"),k(214,"Draw a "),M(215,"tag",10),k(216,"half circle"),T(),k(217," with 45\xb0 lines to create the breakpoints. If you use the slider to create more overhang, the circle moves with it, to keep proportions. The angles are resp: 67.5\xb0, 22.5\xb0 "),T(),M(218,"label")(219,"span"),k(220,"(Fictive) 'Wider roof'"),T(),M(221,"mat-slider",24),$e("input",function(r){on(e);const s=Qe();return s.update("cross","roofCirclePullDown",r.value,s.tags.halfCircle)}),T()(),M(222,"label")(223,"span"),k(224),T(),M(225,"mat-slider",24),$e("input",function(r){return on(e),Qe().update("cross","roofCircleWalls",r.value)}),T()()(),M(226,"section",1)(227,"h2"),k(228,"The 70\xb0/30\xb0 roof"),T(),M(229,"p"),k(230,"With this technique, draw a line 70\xb0 until a "),M(231,"tag",5),k(232,"bend point"),T(),k(233,". After than follow 30\xb0. Think about the solar potential! "),T(),k(234," . A common seen classical symmetrical design. "),Ge(235,P1e,1,0,"ng-template",null,25,ja),M(237,"label")(238,"span"),k(239,"Move "),M(240,"tag",5),k(241,"bend point"),T()(),M(242,"mat-slider",24),$e("input",function(r){on(e);const s=Qe();return s.update("cross","roof70offset",r.value,s.tags.bendPoint)}),T()(),M(243,"label")(244,"span"),k(245),T(),M(246,"mat-slider",24),$e("input",function(r){on(e);const s=Qe();return s.update("cross","roof70Walls",r.value,s.tags.roofWalls)}),T()(),M(247,"label")(248,"span"),k(249),T(),M(250,"mat-slider",24),$e("input",function(r){return on(e),Qe().update("cross","roof70Extension",r.value)}),T()()(),M(251,"section",1)(252,"h3"),k(253,"Roof, 70\xb0 or Circle"),T(),M(254,"p"),k(255,"We should choose a roof. There are more possibilities in the end. But for now a mansard roof it is. "),T(),M(256,"mat-button-toggle-group",26),$e("ngModelChange",function(r){return on(e).ngIf.cross.roofStyle=r})("ngModelChange",function(r){return on(e),Qe().choosenRoofstyle(r)}),M(257,"mat-button-toggle",27),k(258,"Circle based"),T(),M(259,"mat-button-toggle",27),k(260,"Both"),T(),M(261,"mat-button-toggle",27),k(262,"70\xb0 based"),T()()(),M(263,"section",1)(264,"h3"),k(265,"The roof edge"),T(),M(266,"p"),k(267,"We can look at the silhouette to image it a bit better. We can also add or remove a gutter, and more decorative "),T()(),Tr()}if(2&i){const e=t.ngIf,n=hi(21),r=hi(29),s=hi(42),o=hi(61),a=hi(95),l=hi(97),c=hi(236),u=Qe();$(1),Z("id",u.Section.welcome),$(2),At("Welcome to ",e.name,""),$(3),Z("id",u.Section.passiv),$(12),Z("tag",u.tags.insulated)("overlayTemplate",n),$(7),Z("tag",u.tags.orientation)("overlayTemplate",r),$(14),Z("tag",u.tags.efficiency)("overlayTemplate",s),$(6),Z("id",u.Section.basics),$(9),Z("tag",u.tags.baseDimension)("overlayTemplate",o),$(3),Z("tag",u.tags.viewlines),$(8),Z("ngModel",e.studAmount),$(4),At(" We talk in studs, wooden columns in the wall. They are the core that follow a grid of ",100*e.studDistance," cm. The "),$(1),Z("tag",u.tags.baseDimension)("overlayTemplate",o),$(2),At(" wall has now ",e.studAmount," studs. "),$(9),Z("id",u.Section.extensions),$(5),Z("tag",u.tags.extensionToSouth)("overlayTemplate",a),$(4),Z("tag",u.tags.extensionToNorth)("overlayTemplate",l),$(11),Z("ngModel",e.studAmountSouth)("displayWith",u.studLabel),$(4),Z("min",9)("max",18)("ngModel",e.studAmountNorth)("displayWith",u.studLabel),$(4),Z("min",5)("max",15)("ngModel",e.studAmountWest)("displayWith",u.studLabel),$(4),Z("min",5)("max",9)("ngModel",e.studAmountEast)("displayWith",u.studLabel),$(17),At("",e.stats.wall.innerLength," m"),$(7),At("",e.stats.wall.innerArea," m2"),$(8),At("",e.stats.wall.outerLength," m"),$(7),At("",e.stats.wall.outerArea," m2"),$(9),At("",e.stats.floor.ground.area," m2"),$(7),At("",e.stats.floor.top.area," m2"),$(7),At("",null==e.stats.floor.all?null:e.stats.floor.all.area," m2"),$(1),Z("id",u.Section.tower),$(5),Z("ngModel",e.showTower),$(2),Z("id",u.Section.roofBasics),$(9),At("Ceiling height: ",e.cross.ceilingHeight," m"),$(1),Z("ngModel",e.cross.ceilingHeight),$(2),At("Foundation: ",e.cross.crawlerSpace?"crawler space":"flat foundation",""),$(3),Z("ngModel",e.cross.crawlerSpace),$(1),At("With a ",e.cross.crawlerSpace?"crawler space":"flat foundation"," "),$(3),At("Ground floor above ground: ",e.cross.floorAboveGround," m"),$(1),Z("ngModel",e.cross.floorAboveGround),$(1),Z("id",u.Section.roofCircle),$(11),Z("tag",u.tags.halfCircle),$(6),Z("ngModel",e.cross.roofCirclePullDown),$(3),At("Walls under the roof ",e.cross.roofCircleWalls,"m"),$(1),Z("ngModel",e.cross.roofCircleWalls),$(1),Z("id",u.Section.roof70),$(5),Z("tag",u.tags.bendPoint)("overlayTemplate",c),$(9),Z("tag",u.tags.bendPoint)("overlayTemplate",c),$(2),Z("ngModel",e.cross.roof70offset),$(3),At("Walls under the roof: ",e.cross.roof70Walls,"m"),$(1),Z("ngModel",e.cross.roof70Walls),$(3),At("Roof extension: ",e.cross.roof70Extension,"m"),$(1),Z("ngModel",e.cross.roof70Extension),$(1),Z("id",u.Section.roofChoice),$(5),Z("ngModel",e.cross.roofStyle),$(1),Z("value",u.RoofStyle.roofCircle),$(2),Z("value",u.RoofStyle.roofCircleAnd70),$(2),Z("value",u.RoofStyle.roof70),$(2),Z("id",u.Section.roofEdge)}}let F1e=(()=>{class i{constructor(e,n){this.houseService=e,this.appService=n,this.house$=this.houseService.house$,this.Section=Je,this.tags=Ao,this.RoofStyle=ks,this.update=this.houseService.update}ngAfterViewInit(){}studLabel(e){return`#${e} `}sizeLabel(e){return`${e} m`}choosenRoofstyle(e){this.houseService.update("cross","roofStyle",e)}}return i.\u0275fac=function(e){return new(e||i)(C(rr),C(Wi))},i.\u0275cmp=ft({type:i,selectors:[["app-page-house"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"id"],[1,"mat-caption"],[2,"font-size","0.7em"],["href","https://passivehouse.com/","target","_blank"],["cdkOverlayOrigin","",3,"tag","overlayTemplate"],["insulated",""],["orientation",""],["fxLayoutAlign","center",2,"margin","8px 0 32px"],["efficiency",""],[3,"tag"],["baseDimension",""],["min","6","max","15","tickInterval","1",3,"ngModel","input"],[1,"technical"],["href","https://en.wikipedia.org/wiki/Rule_of_thirds"],["extensionToSouth",""],["extensionToNorth",""],["min","0","max","4","thumbLabel","","tickInterval","1",3,"ngModel","displayWith","input"],["thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],[2,"padding-bottom","80px",3,"id"],[3,"ngModel","ngModelChange"],["min","1.9","max","3.6","step","0.1","tickInterval","1",3,"ngModel","input"],["min","0","max","1","step","0.1","tickInterval","1",3,"ngModel","input"],["href","https://en.wikipedia.org/wiki/Mansard_roof","target","_blank"],["min","0","max","2","step","0.1","tickInterval","1",3,"ngModel","input"],["bendPoint",""],["name","roofstyle",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,n){1&e&&(Ge(0,L1e,268,75,"ng-container",0),Br(1,"async")),2&e&&Z("ngIf",Vr(1,1,n.house$))},directives:[Ks,oM,Jde,T1e,Gf,Y1,zT,pb,KU,sz,oz],pipes:[If],styles:[""]}),i})();function N1e(i,t){if(1&i){const e=Eo();Er(0),M(1,"section",1)(2,"h1"),k(3,"Stairs"),T(),M(4,"p",2),k(5," Stairs are its own thing. There are even whole pinterest collections dedicated to stairs. "),T()(),M(6,"section",1)(7,"h2"),k(8,"Stair 101"),T(),M(9,"p"),k(10," There are different approaches to calculate stairs. We already did the following for us. "),T(),M(11,"ol")(12,"li"),k(13,"The "),M(14,"b"),k(15,"vertical"),T(),k(16),T(),M(17,"li"),k(18,"Building code allows the rise of the step to be between: 182mm and 220mm.Therefore we can only have between "),M(19,"b"),k(20),T()()(),M(21,"label")(22,"span"),k(23),T(),M(24,"mat-slider",3),$e("input",function(r){on(e);const s=Qe();return s.update("stair","steps",r.value,s.Tag.amountSteps)}),T()(),M(25,"ol",4)(26,"li"),k(27,"The min and max "),M(28,"b"),k(29,"horizontal distance"),T(),k(30," is easy, the stairs should be between 30\xb0 and 35\xb0"),T()(),M(31,"label")(32,"span"),k(33),T(),M(34,"mat-slider",5),$e("input",function(r){return on(e),Qe().update("stair","totalRun",r.value)}),T()()(),M(35,"section",1)(36,"h2"),k(37,"The good, bad and perfect stairs"),T(),M(38,"label")(39,"span"),k(40,"Checks"),T(),k(41),M(42,"div"),k(43),T(),M(44,"div"),k(45),T(),M(46,"div"),k(47),T(),M(48,"div"),k(49),T()()(),M(50,"section",1)(51,"h2"),k(52,"Stair layout"),T(),M(53,"p"),k(54," Stairs can be straight, but we like to have two bends. This makes the stairs relative more compact. It prevents to falldown the complete stairs in accidents. Sideplus, it comes with a nice open hall effect. "),T(),M(55,"label")(56,"span"),k(57),T(),M(58,"mat-slider",6),$e("input",function(r){return on(e),Qe().update("stair","walkWidth",r.value)}),T()(),M(59,"label")(60,"span"),k(61),T(),M(62,"mat-slider",6),$e("input",function(r){return on(e),Qe().update("stair","totalWidth",r.value)}),T()(),M(63,"label")(64,"span"),k(65),T(),M(66,"mat-slider",7),$e("input",function(r){return on(e),Qe().update("stair","stepsRight",r.value)}),T()(),M(67,"p"),k(68," For now we keep the model as simple as possible. Stairs are quite complex. Steps can change direction slowly to make it a piece of art by it self. "),T(),ie(69,"img",8),T(),Tr()}if(2&i){const e=t.ngIf,n=Qe();$(1),Z("id",n.Section.stairStart),$(5),Z("id",n.Section.stairBasic),$(10),At(" distance is already decided by the house: ",e.stair.totalRise,"m"),$(4),gg("",e.stair.minSteps," and ",e.stair.maxSteps," steps"),$(3),At("Total steps: horizontal ",e.stair.steps,""),$(1),Z("min",e.stair.minSteps)("max",e.stair.maxSteps)("ngModel",e.stair.steps)("displayWith",n.sizeLabel),$(9),At("Total length stairs: horizontal ",e.stair.totalRun,"m"),$(1),Z("min",n.totalRunMin)("max",n.totalRunMax)("ngModel",e.stair.totalRun)("displayWith",n.sizeLabel),$(1),Z("id",n.Section.stairCheck),$(6),At(" The angle will be ",e.stair.angle,"\xb0 "),$(2),At("Steps: ",e.stair.steps,""),$(2),At("Rise: ",e.stair.rise," m"),$(2),At("Run: ",e.stair.run," m"),$(2),At("Rise+Run+Rise: ",10*e.stair.step," cm"),$(1),Z("id",n.Section.stairPlan),$(7),At("Width ",e.stair.walkWidth,"m"),$(1),Z("min",.7)("max",1.2)("ngModel",e.stair.walkWidth),$(3),At("Total width of stairs: ",e.stair.totalWidth,"m"),$(1),Z("min",2*e.stair.walkWidth)("max",12)("ngModel",e.stair.totalWidth),$(3),gg("Steps on the rightside: ",e.stair.stepsRight," of ",e.stair.steps,""),$(1),Z("min",0)("max",e.stair.steps/2)("ngModel",e.stair.stepsRight)}}let B1e=(()=>{class i{constructor(e,n){this.houseService=e,this.appService=n,this.house$=this.houseService.house$,this.Section=Je,this.Tag=Ao,this.tagsKeys=Object.keys(Ao),this.deltas=4,this.update=this.houseService.update}ngAfterViewInit(){}sizeLabel(e){return`${e}m`}get totalRunMax(){return Et(1,this.house$.value.stair.totalRise/Math.tan(24*Math.PI/180))}get totalRunMin(){return Et(1,this.house$.value.stair.totalRise/Math.tan(40*Math.PI/180))}get rangeRun(){return this.totalRunMax-this.totalRunMin}get rangeSteps(){const e=this.house$.value.stair;return e.maxSteps-e.minSteps+1}currentRun(e){return Et(2,e/(this.deltas-1)*this.rangeRun+this.totalRunMin)}currentCell(e,n){const r=this.house$.value.stair,s=this.currentRun(n);return Et(-1,s/(r.minSteps+e)*1e3)}score(e,n){return e<220?"too-little":e>300?"too-much":void 0}select(e,n){this.update("stair","steps",e),this.update("stair","totalRun",n)}}return i.\u0275fac=function(e){return new(e||i)(C(rr),C(Wi))},i.\u0275cmp=ft({type:i,selectors:[["app-page-stairs"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"id"],[1,"mat-caption"],["step","1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["start","3"],["step","0.1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["step","0.1","tickInterval","1",3,"min","max","ngModel","input"],["step","1","tickInterval","1",3,"min","max","ngModel","input"],["width","100%","src","https://berkela.home.xs4all.nl/stijgpunten/afbeeldingen/tn_2005extra07_11.jpg"]],template:function(e,n){1&e&&(Ge(0,N1e,70,35,"ng-container",0),Br(1,"async")),2&e&&Z("ngIf",Vr(1,1,n.house$))},directives:[Ks,Y1,zT,pb],pipes:[If],styles:[".matrix[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-wrap:wrap;flex-direction:row}.matrix[_ngcontent-%COMP%]   .matrix-cell[_ngcontent-%COMP%]{display:block;border:1px solid black;border-radius:0;padding:0;margin:0;min-width:initial;min-height:inherit;line-height:1em;white-space:pre-wrap}.matrix[_ngcontent-%COMP%]   .matrix-cell.too-much[_ngcontent-%COMP%], .matrix[_ngcontent-%COMP%]   .matrix-cell.too-litte[_ngcontent-%COMP%]{border:1px solid white;opacity:.6}"]}),i})(),V1e=(()=>{class i{constructor(e,n,r){this.zone=e,this.appService=n,this.houseService=r,this.Tag=Ao,this.Section=Je}ngAfterViewInit(){this.zone.runOutsideAngular(()=>this.initMap())}initMap(){}}return i.\u0275fac=function(e){return new(e||i)(C(Ot),C(Wi),C(rr))},i.\u0275cmp=ft({type:i,selectors:[["app-page-construction"]],decls:100,vars:9,consts:[[3,"id"],[3,"tag"]],template:function(e,n){1&e&&(M(0,"h1"),k(1," Construction\n"),T(),M(2,"section",0)(3,"h2"),k(4," Foundation "),T(),M(5,"ol")(6,"li"),k(7,"Stroke"),T(),M(8,"li"),k(9,"Poles"),T(),M(10,"li"),k(11,"Slab (not for crawler spaces)"),T(),M(12,"li"),k(13,"Slab + basement"),T()(),M(14,"p"),k(15," Poles Stroke "),T()(),M(16,"section",0)(17,"h2"),k(18," Crawler space "),T(),M(19,"p"),k(20," A crawler space is a space under the ground floor. It highers the ground floor, so a handyman can go under. And change pipes and such after the house is build. Kitchen on the otherside of the house? Or even only the sink? Crawlerspaces helps a lot."),ie(21,"br")(22,"br"),k(23," It helps too keep your wooden floors dry incase of a flooding or heavy rains. (to some limit ofcourse). "),T()(),M(24,"section",0)(25,"h2"),k(26," Walls & Roof "),T(),M(27,"p"),k(28," Wood is the material for construction. It is a storage of CO"),M(29,"sub"),k(30,"2"),T(),k(31,", natural, light and easy to work with. Modern products like, "),M(32,"tag"),k(33,"I Joists"),T(),k(34,", are even stronger than their natual twins. And you don't need to have a 30cm tree to produce a 30cm beam, so trees can be used more effective. (A disadvantage can be the glue used tho). Wood can last forever, think of all the old houses in old cities."),ie(35,"br")(36,"br"),T(),M(37,"h2"),k(38,"The water problem"),T(),M(39,"p"),k(40," Warm air can contain more water, so the inside air normally would go through the wall and cools down. To a point that it cannot hold longer that amount of water, so it condens in the middle of the wall. "),ie(41,"br")(42,"br"),k(43," Traditonal building takes that problem with plastic wraps. One on the outside to keep weather out. And a even more water-closed layer in the inside. Water moves out the contsturction. It is important during the building fase, to keep everything relatively dry. "),ie(44,"br")(45,"br"),k(46," The alternative is: "),M(47,"tag"),k(48,"damp Open"),T(),k(49,". where no wraps are needed. The innerlayer of the house has a water-closed natural layer (OSB sheets). The outside layer is 'damp-open' so it would not absorble rainwater, but the moist air from inside can escape. It is more like a Dutch slogan: not fighting the water, but living with (some) water. "),ie(50,"br")(51,"br"),k(52," We try to look what is the best insulation out there. We think wood-fiber is the best most sustainable in therms of production/insulation values. Stone/glass fibers are a little bit less on the production level, but a bit more durable over time. "),ie(53,"br")(54,"br"),M(55,"tag",1),k(56,"Wood fiber panels"),T(),k(57," are treated with bitume, there are light, water-resistand and still insulating. They are a perfect layer for the outside layer of the construction (not final outer layer). "),ie(58,"br")(59,"br"),k(60," On the inside of the OSB is an extra 2cm layer and finised of with wood or drywall(gipsplates). This layer is pratical, because all the switches and wallsocket cannot interfair with the air-tight-layer. With a "),M(61,"tag",1),k(62," pipeLayer"),T(),k(63," is it: "),T(),M(64,"ol")(65,"li"),k(66,"Easier to buid keep it "),M(67,"tag",1),k(68,"air tight"),T()(),M(69,"li"),k(70,"Deal with sockets in a later stage"),T(),M(71,"li"),k(72,"Modifications"),T()()(),M(73,"section",0)(74,"h2"),k(75," Walls outerfinish "),T(),M(76,"p"),k(77," Wooden house, has wood on the outside. Not completely tru. Wood is a sustainable choice (altho we wonder, painting it every 10 years...), but in theory can we have anything on the outside. Keep in mind if you build"),M(78,"tag"),k(79,"damp-open "),T(),k(80," that the finish-layer should also be damp-open. Bricks are for example. The cement is defentily not sustainable, but there is no maintaince in the comming 100-ish years. "),ie(81,"br")(82,"br"),k(83," In l\xf6vlund did we pick for brick-strips. The reason is, its thinner/lighter and we aren't skilled in bricklaying. We can glue strips on a wall. It is for now unclear how we can attach the strips. Cement fiber plates? "),T()(),M(84,"section",0)(85,"h2"),k(86," Floor "),T(),M(87,"p"),k(88," Mass (heavy things) can keep heat. Like a stone wall after sunset would emit heat. It works also the oppostite. Like churches are nice cool in the summer. Mass balance out the heat in a nice way. A complete wooden house, would not have that effect. Therefore some mass is a good thing to have. "),ie(89,"br")(90,"br"),k(91," A holow-concrate-plate are relatively light and have the mass we look for. They can come with insulation, altho this would not be damp-open. "),T()(),M(92,"section",0)(93,"h2"),k(94," The roof "),T(),M(95,"p"),k(96," The roof looks a lot like a wall, maybe a bit thinker. The inside does not need a OSB layer ???ToDo??? "),ie(97,"br")(98,"br"),k(99," The outside layer is ofcourse no bricks, but rooftiles (sometimes architects mixed them up...). "),T()()),2&e&&($(2),Z("id",n.Section.contructionFoundation),$(14),Z("id",n.Section.contructionCrawlerSpace),$(8),Z("id",n.Section.contructionWall),$(31),Z("tag",n.Tag.woodFiberPlate),$(6),Z("tag",n.Tag.pipeLayer),$(6),Z("tag",n.Tag.airTight),$(6),Z("id",n.Section.contructionWallFinish),$(11),Z("id",n.Section.contructionFloor),$(8),Z("id",n.Section.contructionRoof))},directives:[oM],styles:[""]}),i})(),H1e=(()=>{class i{constructor(e,n,r){this.houseService=e,this.threeService=n,this.appService=r,this.house$=this.houseService.house$,this.Section=Je,this.Tag=Ao,this.wallDetail="wallDetail",this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}ngAfterViewInit(){this.subscriptions.push()}showPerSection(){}}return i.\u0275fac=function(e){return new(e||i)(C(rr),C(y8),C(Wi))},i.\u0275cmp=ft({type:i,selectors:[["app-page-facade"]],decls:41,vars:3,consts:[[3,"id"],[1,"mat-caption"],[1,"technical",2,"max-width","640px"],["fxLayout","row wrap","fxLayoutGap","8px","fxLayoutAlign","center center",2,"padding","16px 0 24px"],["src","/assets/img/window_1.jpg",2,"max-height","360px"],["src","/assets/img/window_2.jpg",2,"max-height","360px"],["src","https://ars.els-cdn.com/content/image/1-s2.0-S0378778816316383-gr9.jpg"],["src","/assets/img/door_step_1.jpg",2,"max-height","360px"]],template:function(e,n){1&e&&(M(0,"section",0)(1,"h1"),k(2,"Facade"),T(),M(3,"p",1),k(4," We cover here all the basics about the outside of the house. Windows, doors, domers and bricks. "),T()(),M(5,"section",0)(6,"h1"),k(7,"Window"),T(),M(8,"p"),k(9," Windows are a tradeoff between a nice open light house and: heatloss, heatgain, complexer builds and more exepensive. In a passiv house, belongs high end windows, triple glass and high-end framing. That makes it one of the most costly invenstments. "),T(),M(10,"label",2)(11,"span"),k(12,"Design"),T(),M(13,"span"),k(14," Dutch traditional windows have some variations. "),ie(15,"br")(16,"br"),k(17," The right one is is nicely detailed. Look how the windowframe ends in a litte stone, to keep it dry and prevent rotting. However the windowframe is missing at the bottom, the window rest on the stone. Not our modern standards. "),ie(18,"br")(19,"br"),k(20," The major difference between them is that the left one has a frame at the bottom. That is better insulated, and we do need to use less pressious stone. "),T(),M(21,"div",3),ie(22,"img",4)(23,"img",5),T(),M(24,"span"),k(25," Furthermore both window-bottom-stones go into the brickwork. If you don't do this, you would create a channel for rainwater (wind blows it in the corner). And the dirt will collect on your walls. Now it would drip off. "),T()(),M(26,"p"),k(27," Place the window in the middle of insulation "),ie(28,"img",6),T()(),M(29,"section",0)(30,"h1"),k(31,"Doors"),T(),M(32,"p"),k(33," For guests the first warm welcome "),T(),M(34,"label",2)(35,"span"),k(36,"Design"),T(),M(37,"span"),k(38,"They kinda look like windows. Ofcourse the bottomframe is missing here. The bottom frame should be wheelchair friendly, altho its a bit contradictive with a eleveated ground floor (due to crawler space). The door and frame should be extreme insulated. "),T(),M(39,"div",3),ie(40,"img",7),T()()()),2&e&&(Z("id",n.Section.facadeStart),$(5),Z("id",n.Section.facadeWindow),$(24),Z("id",n.Section.facadeDoor))},directives:[Jg,vb,Gf],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:48px;align-items:center}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),i})(),U1e=(()=>{class i{constructor(e,n,r){this.zone=e,this.appService=n,this.houseService=r,this.Tag=Ao,this.Section=Je}ngAfterViewInit(){this.zone.runOutsideAngular(()=>this.initMap())}initMap(){}}return i.\u0275fac=function(e){return new(e||i)(C(Ot),C(Wi),C(rr))},i.\u0275cmp=ft({type:i,selectors:[["app-page-installation"]],decls:93,vars:9,consts:[[3,"id"],[3,"tag"]],template:function(e,n){1&e&&(M(0,"h1"),k(1,"Installations"),T(),M(2,"section",0)(3,"h2"),k(4,"Drink water"),T(),M(5,"p"),k(6," Not anything special here on the cold side. You can have a local source if you live on the countryside. "),ie(7,"br")(8,"br"),k(9," Hot/Warm drinkwater is needed in the sinks and showers. This water can be heated up via the central "),M(10,"tag",1),k(11," warm water buffer"),T(),k(12,". A big tank that takes heat from different sources, and allows for hotwater and even heating. "),T()(),M(13,"section",0)(14,"h2"),k(15,"Heating"),T(),M(16,"p"),k(17," This is a bit of a contraverse subject. A passive house is passive, it receives energy from the sun, people and machines. The heatloss is minimum. Some passive houses don't need heating at all! In some colder climates some heating in extreme winters can be needed. There is only one real option (except air heating, which is fine for a few days, but less healty): floorheathing. It can use low-heat water from the "),M(18,"tag",1),k(19," warm water buffer"),T(),k(20,"1 "),T()(),M(21,"section",0)(22,"h2"),k(23,"Electricity"),T(),M(24,"p"),k(25," We like the off-grid principles, but still difficult to achive in the 2020s. However we can take away a huge part of the electricity needed by solar panels and store energy in form of warm water. We can use solar-heat-pannels or heating the overflow of electricity during the day to warm up the "),M(26,"tag",1),k(27," warm water buffer "),T(),k(28,". Warm water can be used in the shower, or heating. "),ie(29,"br")(30,"br"),k(31," This Mansard roof is a (near) perfect angle for solarpannels. However the to make it look nice is harder. We are still looking for the right panel types with old, classical rooftiles. "),ie(32,"br")(33,"br"),k(34," There is a balance between the time you need electricity (evening, electricity-car & cooking) and when they produce the most (around noon). If you can return-to-the-net orientation to noon is the best. Otherwise some pannels could actually more orientated to the west. "),T()(),M(35,"section",0)(36,"h2"),k(37,"Grey water"),T(),M(38,"p"),k(39," With a fancy word, climate adaption: Save rain water when it rains, like a buffer, an use it when a draught happens, or save on treated drinkwater. Rainwater water is perfect, because there are amost no levels of calculium. Water your plants with it, they love it! Flush the toilets with it and was your cloths with it, you ll see that you need less soap. "),ie(40,"br")(41,"br"),k(42," We need a big watertank outside in the ground (10m"),M(43,"sub"),k(44,"3"),T(),k(45,"), a pomp and 3-filter system. All the systems that need to use the rain water need also 'grey'-pipes. If the rainwater tank is empty, you still want the flush the toilets. There is a machine that puts normal drink-water in the 'grey'-pipes as backup. Automatically! "),ie(46,"br")(47,"br"),k(48,"In theory showering with rainwater seems perfect, but most law forbids to bend cold-rainwater with warm-drinkwater. If you do, you need less soap and your hair will be smooooth. "),T()(),M(49,"section",0)(50,"h2"),k(51,"Ventilation"),T(),M(52,"p"),k(53," A passive house is air-tight. It saves on heatloss (more than you would think). A modern house has a blow-in and suck-out ventilation system. The system can take the heatout of exit-air and warm the incomming air up. Only 6% of the heat is lost. A normal ventilation is 100% heatloss. Air-tight, than I cann't open my windows. "),ie(54,"br"),k(55," Bit of a missconception. If the outside temperature is near the inside temperature it's completely fine. Altho with a good climate system you shouldn't feel the need to open the windows! This closed system filters the air. It is perfect when there is smog or if you have hayfever or other allergies . "),ie(56,"br")(57,"br"),k(58," Some rooms get fresh air, livingroom, sleepingrooms. And some rooms the air is pomped out, the wetrooms and kitchen. This is in balance. In the floor there is some space for this ducts. In the "),M(59,"tag"),k(60,"installation room"),T(),k(61," there is a quite big pomp / filter. "),T()(),M(62,"section",0)(63,"h2"),k(64,"Domotica / Smart home"),T(),M(65,"p"),k(66," With more complex houses, house should become more smart. The air, and maybe the heating, should be automatic. You shouldn't even notice it. On hot summer days, the sunscreens should come down, and with rain up. "),ie(67,"br")(68,"br"),k(69," There is a basic level of intellicance needed but we can take it a few steps further with automatic lights and such. 'Smart home' creates some irritations here and there. And often completely undestandable. A smart light withouth a button is annoying, sometimes you used need a button and not a voicecommand or smartphone. A smart home has them all, but above all knows when you want to turn on the lamp. "),ie(70,"br")(71,"br"),k(72,"Think of (all if overrulable) "),T(),M(73,"ul")(74,"li"),k(75,"Lights dimm more if its evening"),T(),M(76,"li"),k(77,"Red nightlight in the toilet after 23:00"),T(),M(78,"li"),k(79,"Block the sunlight with screens"),T(),M(80,"li"),k(81,"Random light go on if you are on holiday"),T(),M(82,"li"),k(83,"Remote controllable (local VPN not via cloud)"),T(),M(84,"li"),k(85,"More secure, camera's and alarms"),T()(),ie(86,"br")(87,"br"),M(88,"p"),k(89," Wifi is great, but cables are better. If you build a new home, put some more internetcables than needed. A smart home can uses internet cables for sensors, camera and of course computers. Cat 6 cables are easy the work with and fine speeds for most applications (if not longer than 30m orso). Maybe put up a better cat cable for your work- or kids gamestations. "),ie(90,"br")(91,"br"),k(92," For us this is still a process we need to rethink. For now we think one single local controler per room for a more decentralized system. Light switches to has a twisted-pair wire back to the room-controller. The light is on a hotel-switch so the button would always work as the digital version. "),T()()),2&e&&($(2),Z("id",n.Section.instaltionDrinkWater),$(8),Z("tag",n.Tag.warmWaterBuffer),$(3),Z("id",n.Section.instaltionHeating),$(5),Z("tag",n.Tag.warmWaterBuffer),$(3),Z("id",n.Section.instaltionElectricity),$(5),Z("tag",n.Tag.warmWaterBuffer),$(9),Z("id",n.Section.instaltionGreyWater),$(14),Z("id",n.Section.instaltionVentilation),$(13),Z("id",n.Section.instaltionSmartHome))},directives:[oM],styles:[""]}),i})();var z1e=function(){function i(t){this.type=t,this.target=null}return i.prototype.preventDefault=function(){this.defaultPrevented=!0},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i}();const _c=z1e;var G1e=function(){function i(){this.disposed=!1}return i.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},i.prototype.disposeInternal=function(){},i}();const eI=G1e;function bh(i,t){return i>t?1:i<t?-1:0}function tI(i,t,e){var n=i.length;if(i[0]<=t)return 0;if(t<=i[n-1])return n-1;var r=void 0;if(e>0){for(r=1;r<n;++r)if(i[r]<t)return r-1}else if(e<0){for(r=1;r<n;++r)if(i[r]<=t)return r}else for(r=1;r<n;++r){if(i[r]==t)return r;if(i[r]<t)return"function"==typeof e?e(t,i[r-1],i[r])>0?r-1:r:i[r-1]-t<t-i[r]?r-1:r}return n-1}function W1e(i,t,e){for(;t<e;){var n=i[t];i[t]=i[e],i[e]=n,++t,--e}}function b8(i,t){for(var e=Array.isArray(t)?t:[t],n=e.length,r=0;r<n;r++)i[i.length]=e[r]}function xh(i,t){var e=i.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(i[n]!==t[n])return!1;return!0}function dm(){return!0}function aM(){return!1}function wh(){}var Lr="function"==typeof Object.assign?Object.assign:function(i,t){if(null==i)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(i),n=1,r=arguments.length;n<r;++n){var s=arguments[n];if(null!=s)for(var o in s)s.hasOwnProperty(o)&&(e[o]=s[o])}return e};function Dv(i){for(var t in i)delete i[t]}var x8="function"==typeof Object.values?Object.values:function(i){var t=[];for(var e in i)t.push(i[e]);return t};function Av(i){var t;for(t in i)return!1;return!t}var q1e=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Y1e=function(i){function t(e){var n=i.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return q1e(t,i),t.prototype.addEventListener=function(e,n){if(e&&n){var r=this.listeners_||(this.listeners_={}),s=r[e]||(r[e]=[]);-1===s.indexOf(n)&&s.push(n)}},t.prototype.dispatchEvent=function(e){var n="string"==typeof e,r=n?e:e.type,s=this.listeners_&&this.listeners_[r];if(s){var o=n?new _c(e):e;o.target||(o.target=this.eventTarget_||this);var a=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,l[r]=0),++a[r];for(var c,u=0,d=s.length;u<d;++u)if(!1===(c="handleEvent"in s[u]?s[u].handleEvent(o):s[u].call(this,o))||o.propagationStopped){c=!1;break}if(0==--a[r]){var h=l[r];for(delete l[r];h--;)this.removeEventListener(r,wh);delete a[r]}return c}},t.prototype.disposeInternal=function(){this.listeners_&&Dv(this.listeners_)},t.prototype.getListeners=function(e){return this.listeners_&&this.listeners_[e]||void 0},t.prototype.hasListener=function(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)},t.prototype.removeEventListener=function(e,n){var r=this.listeners_&&this.listeners_[e];if(r){var s=r.indexOf(n);-1!==s&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[s]=wh,++this.pendingRemovals_[e]):(r.splice(s,1),0===r.length&&delete this.listeners_[e]))}},t}(eI);const hm=Y1e;function Cn(i,t,e,n,r){if(n&&n!==i&&(e=e.bind(n)),r){var s=e;e=function(){i.removeEventListener(t,e),s.apply(this,arguments)}}var o={target:i,type:t,listener:e};return i.addEventListener(t,e),o}function lM(i,t,e,n){return Cn(i,t,e,n,!0)}function bi(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),Dv(i))}var X1e=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),cM=function(i){function t(){var e=i.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return X1e(t,i),t.prototype.changed=function(){++this.revision_,this.dispatchEvent("change")},t.prototype.getRevision=function(){return this.revision_},t.prototype.onInternal=function(e,n){if(Array.isArray(e)){for(var r=e.length,s=new Array(r),o=0;o<r;++o)s[o]=Cn(this,e[o],n);return s}return Cn(this,e,n)},t.prototype.onceInternal=function(e,n){var r;if(Array.isArray(e)){var s=e.length;r=new Array(s);for(var o=0;o<s;++o)r[o]=lM(this,e[o],n)}else r=lM(this,e,n);return n.ol_key=r,r},t.prototype.unInternal=function(e,n){var r=n.ol_key;if(r)!function K1e(i){if(Array.isArray(i))for(var t=0,e=i.length;t<e;++t)bi(i[t]);else bi(i)}(r);else if(Array.isArray(e))for(var s=0,o=e.length;s<o;++s)this.removeEventListener(e[s],n);else this.removeEventListener(e,n)},t}(hm);const w8=cM;function hn(){return function(){throw new Error("Unimplemented abstract method.")}()}var Z1e=0;function Rn(i){return i.ol_uid||(i.ol_uid=String(++Z1e))}var M8=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),C8=function(i){function t(e,n,r){var s=i.call(this,e)||this;return s.key=n,s.oldValue=r,s}return M8(t,i),t}(_c),Q1e=function(i){function t(e){var n=i.call(this)||this;return Rn(n),n.values_=null,void 0!==e&&n.setProperties(e),n}return M8(t,i),t.prototype.get=function(e){var n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n},t.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},t.prototype.getProperties=function(){return this.values_&&Lr({},this.values_)||{}},t.prototype.hasProperties=function(){return!!this.values_},t.prototype.notify=function(e,n){var r;r="change:".concat(e),this.hasListener(r)&&this.dispatchEvent(new C8(r,e,n)),this.hasListener(r="propertychange")&&this.dispatchEvent(new C8(r,e,n))},t.prototype.addChangeListener=function(e,n){this.addEventListener("change:".concat(e),n)},t.prototype.removeChangeListener=function(e,n){this.removeEventListener("change:".concat(e),n)},t.prototype.set=function(e,n,r){var s=this.values_||(this.values_={});if(r)s[e]=n;else{var o=s[e];s[e]=n,o!==n&&this.notify(e,o)}},t.prototype.setProperties=function(e,n){for(var r in e)this.set(r,e[r],n)},t.prototype.applyProperties=function(e){!e.values_||Lr(this.values_||(this.values_={}),e.values_)},t.prototype.unset=function(e,n){if(this.values_&&e in this.values_){var r=this.values_[e];delete this.values_[e],Av(this.values_)&&(this.values_=null),n||this.notify(e,r)}},t}(w8);const ul=Q1e;var J1e=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),eDe=function(i){function t(e){var n=this,s="Assertion failed. See https://openlayers.org/en/v"+"6.15.1".split("-")[0]+"/doc/errors/#"+e+" for details.";return(n=i.call(this,s)||this).code=e,n.name="AssertionError",n.message=s,n}return J1e(t,i),t}(Error);const S8=eDe;function fn(i,t){if(!i)throw new S8(t)}var tDe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),nDe=function(i){function t(e){var n=i.call(this)||this;return n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addChangeListener(n.geometryName_,n.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?n.setGeometry(e):n.setProperties(e)),n}return tDe(t,i),t.prototype.clone=function(){var e=new t(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&e.setGeometry(n.clone());var r=this.getStyle();return r&&e.setStyle(r),e},t.prototype.getGeometry=function(){return this.get(this.geometryName_)},t.prototype.getId=function(){return this.id_},t.prototype.getGeometryName=function(){return this.geometryName_},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.handleGeometryChange_=function(){this.changed()},t.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(bi(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=Cn(e,"change",this.handleGeometryChange_,this)),this.changed()},t.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},t.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?function iDe(i){return"function"==typeof i?i:(Array.isArray(i)?t=i:(fn("function"==typeof i.getZIndex,41),t=[i]),function(){return t});var t}(e):void 0,this.changed()},t.prototype.setId=function(e){this.id_=e,this.changed()},t.prototype.setGeometryName=function(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},t}(ul);const rDe=nDe;var D8,Su="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",sDe=-1!==Su.indexOf("firefox"),aDe=(-1!==Su.indexOf("safari")&&-1==Su.indexOf("chrom")&&(Su.indexOf("version/15.4")>=0||Su.match(/cpu (os|iphone os) 15_4 like mac os x/)),-1!==Su.indexOf("webkit")&&-1==Su.indexOf("edge")),lDe=-1!==Su.indexOf("macintosh"),E8="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,uM="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,cDe="undefined"!=typeof Image&&Image.prototype.decode,T8=function(){var i=!1;try{var t=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(e){}return i}();function cr(i,t){var e=t[0],n=t[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t}function dl(i,t,e,n,r,s,o,a){var l=Math.sin(s),c=Math.cos(s);return i[0]=n*c,i[1]=r*l,i[2]=-n*l,i[3]=r*c,i[4]=o*n*c-a*n*l+t,i[5]=o*r*l+a*r*c+e,i}function dM(i,t){var e=function hDe(i){return i[0]*i[3]-i[1]*i[2]}(t);fn(0!==e,32);var n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5];return i[0]=o/e,i[1]=-r/e,i[2]=-s/e,i[3]=n/e,i[4]=(s*l-o*a)/e,i[5]=-(n*l-r*a)/e,i}function sI(i){var t="matrix("+i.join(", ")+")";if(uM)return t;var e=D8||(D8=document.createElement("div"));return e.style.transform=t,e.style.transform}new Array(6);function A8(i){for(var t=[1/0,1/0,-1/0,-1/0],e=0,n=i.length;e<n;++e)mm(t,i[e]);return t}function oI(i,t,e){return e?(e[0]=i[0]-t,e[1]=i[1]-t,e[2]=i[2]+t,e[3]=i[3]+t,e):[i[0]-t,i[1]-t,i[2]+t,i[3]+t]}function R8(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i.slice()}function I8(i,t,e){var n,r;return(n=t<i[0]?i[0]-t:i[2]<t?t-i[2]:0)*n+(r=e<i[1]?i[1]-e:i[3]<e?e-i[3]:0)*r}function Iv(i,t){return k8(i,t[0],t[1])}function fm(i,t){return i[0]<=t[0]&&t[2]<=i[2]&&i[1]<=t[1]&&t[3]<=i[3]}function k8(i,t,e){return i[0]<=t&&t<=i[2]&&i[1]<=e&&e<=i[3]}function aI(i,t){var o=t[0],a=t[1],l=0;return o<i[0]?l|=16:o>i[2]&&(l|=4),a<i[1]?l|=8:a>i[3]&&(l|=2),0===l&&(l=1),l}function hl(i,t,e,n,r){return r?(r[0]=i,r[1]=t,r[2]=e,r[3]=n,r):[i,t,e,n]}function pm(i){return hl(1/0,1/0,-1/0,-1/0,i)}function kv(i,t){return i[0]==t[0]&&i[2]==t[2]&&i[1]==t[1]&&i[3]==t[3]}function mm(i,t){t[0]<i[0]&&(i[0]=t[0]),t[0]>i[2]&&(i[2]=t[0]),t[1]<i[1]&&(i[1]=t[1]),t[1]>i[3]&&(i[3]=t[1])}function P8(i,t,e,n,r){for(;e<n;e+=r)vDe(i,t[e],t[e+1]);return i}function vDe(i,t,e){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}function L8(i,t){var e;return!!((e=t(fM(i)))||(e=t(pM(i)),e)||(e=t(mM(i)),e)||(e=t(Mh(i)),e))&&e}function hM(i){var t=0;return uI(i)||(t=ci(i)*po(i)),t}function fM(i){return[i[0],i[1]]}function pM(i){return[i[2],i[1]]}function gm(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function yDe(i,t){var e;return"bottom-left"===t?e=fM(i):"bottom-right"===t?e=pM(i):"top-left"===t?e=Mh(i):"top-right"===t?e=mM(i):fn(!1,13),e}function lI(i,t,e,n,r){var s=cI(i,t,e,n),o=s[0],a=s[1],l=s[2],c=s[3],u=s[4],d=s[5],h=s[6],f=s[7];return hl(Math.min(o,l,u,h),Math.min(a,c,d,f),Math.max(o,l,u,h),Math.max(a,c,d,f),r)}function cI(i,t,e,n){var r=t*n[0]/2,s=t*n[1]/2,o=Math.cos(e),a=Math.sin(e),l=r*o,c=r*a,u=s*o,d=s*a,h=i[0],f=i[1];return[h-l+d,f-c-u,h-l-d,f-c+u,h+l-d,f+c+u,h+l+d,f+c-u,h-l+d,f-c-u]}function po(i){return i[3]-i[1]}function _m(i,t,e){var n=e||[1/0,1/0,-1/0,-1/0];return Ns(i,t)?(n[0]=i[0]>t[0]?i[0]:t[0],n[1]=i[1]>t[1]?i[1]:t[1],n[2]=i[2]<t[2]?i[2]:t[2],n[3]=i[3]<t[3]?i[3]:t[3]):pm(n),n}function Mh(i){return[i[0],i[3]]}function mM(i){return[i[2],i[3]]}function ci(i){return i[2]-i[0]}function Ns(i,t){return i[0]<=t[2]&&i[2]>=t[0]&&i[1]<=t[3]&&i[3]>=t[1]}function uI(i){return i[2]<i[0]||i[3]<i[1]}function F8(i,t){var e=t.getExtent(),n=gm(i);if(t.canWrapX()&&(n[0]<e[0]||n[0]>=e[2])){var r=ci(e),o=Math.floor((n[0]-e[0])/r)*r;i[0]-=o,i[2]-=o}return i}function ur(i,t,e){return Math.min(Math.max(i,t),e)}var CDe=function(){var i;return i="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},i}(),SDe=function(){var i;return i="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E},i}();function EDe(i,t,e,n,r,s){var o=r-e,a=s-n;if(0!==o||0!==a){var l=((i-e)*o+(t-n)*a)/(o*o+a*a);l>1?(e=r,n=s):l>0&&(e+=o*l,n+=a*l)}return vm(i,t,e,n)}function vm(i,t,e,n){var r=e-i,s=n-t;return r*r+s*s}function gM(i){return i*Math.PI/180}function ym(i,t){var e=i%t;return e*t<0?e+t:e}function Ch(i,t,e){return i+e*(t-i)}function dI(i,t){var e=Math.pow(10,t);return Math.round(i*e)/e}function _M(i,t){return Math.floor(dI(i,t))}function vM(i,t){return Math.ceil(dI(i,t))}var N8=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,B8=/^([a-z]*)$|^hsla?\(.*\)$/i;function V8(i){return"string"==typeof i?i:z8(i)}var DDe=function(){var t={},e=0;return function(n){var r;if(t.hasOwnProperty(n))r=t[n];else{if(e>=1024){var s=0;for(var o in t)0==(3&s++)&&(delete t[o],--e)}r=function ADe(i){var t,e,n,r,s;if(B8.exec(i)&&(i=function H8(i){var t=document.createElement("div");if(t.style.color=i,""!==t.style.color){document.body.appendChild(t);var e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}(i)),N8.exec(i)){var a,o=i.length-1;a=o<=4?1:2;var l=4===o||8===o;t=parseInt(i.substr(1+0*a,a),16),e=parseInt(i.substr(1+1*a,a),16),n=parseInt(i.substr(1+2*a,a),16),r=l?parseInt(i.substr(1+3*a,a),16):255,1==a&&(t=(t<<4)+t,e=(e<<4)+e,n=(n<<4)+n,l&&(r=(r<<4)+r)),s=[t,e,n,r/255]}else 0==i.indexOf("rgba(")?U8(s=i.slice(5,-1).split(",").map(Number)):0==i.indexOf("rgb(")?((s=i.slice(4,-1).split(",").map(Number)).push(1),U8(s)):fn(!1,14);return s}(n),t[n]=r,++e}return r}}();function yM(i){return Array.isArray(i)?i:DDe(i)}function U8(i){return i[0]=ur(i[0]+.5|0,0,255),i[1]=ur(i[1]+.5|0,0,255),i[2]=ur(i[2]+.5|0,0,255),i[3]=ur(i[3],0,1),i}function z8(i){var t=i[0];t!=(0|t)&&(t=t+.5|0);var e=i[1];e!=(0|e)&&(e=e+.5|0);var n=i[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+t+","+e+","+n+","+(void 0===i[3]?1:Math.round(100*i[3])/100)+")"}var RDe=function(){function i(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return i.prototype.clear=function(){this.cache_={},this.cacheSize_=0},i.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},i.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_)0==(3&t++)&&!this.cache_[e].hasListener()&&(delete this.cache_[e],--this.cacheSize_)}},i.prototype.get=function(t,e,n){var r=G8(t,e,n);return r in this.cache_?this.cache_[r]:null},i.prototype.set=function(t,e,n,r){var s=G8(t,e,n);this.cache_[s]=r,++this.cacheSize_},i.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},i}();function G8(i,t,e){return t+":"+i+":"+(e?V8(e):"null")}var bM=new RDe;var IDe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),kDe=function(i){function t(e){var n=i.call(this)||this;n.background_=e.background;var r=Lr({},e);return"object"==typeof e.properties&&(delete r.properties,Lr(r,e.properties)),r.opacity=void 0!==e.opacity?e.opacity:1,fn("number"==typeof r.opacity,64),r.visible=void 0===e.visible||e.visible,r.zIndex=e.zIndex,r.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,r.minResolution=void 0!==e.minResolution?e.minResolution:0,r.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,r.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,n.className_=void 0!==r.className?r.className:"ol-layer",delete r.className,n.setProperties(r),n.state_=null,n}return IDe(t,i),t.prototype.getBackground=function(){return this.background_},t.prototype.getClassName=function(){return this.className_},t.prototype.getLayerState=function(e){var n=this.state_||{layer:this,managed:void 0===e||e},r=this.getZIndex();return n.opacity=ur(Math.round(100*this.getOpacity())/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=void 0!==r||n.managed?r:1/0,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},t.prototype.getLayersArray=function(e){return hn()},t.prototype.getLayerStatesArray=function(e){return hn()},t.prototype.getExtent=function(){return this.get("extent")},t.prototype.getMaxResolution=function(){return this.get("maxResolution")},t.prototype.getMinResolution=function(){return this.get("minResolution")},t.prototype.getMinZoom=function(){return this.get("minZoom")},t.prototype.getMaxZoom=function(){return this.get("maxZoom")},t.prototype.getOpacity=function(){return this.get("opacity")},t.prototype.getSourceState=function(){return hn()},t.prototype.getVisible=function(){return this.get("visible")},t.prototype.getZIndex=function(){return this.get("zIndex")},t.prototype.setBackground=function(e){this.background_=e,this.changed()},t.prototype.setExtent=function(e){this.set("extent",e)},t.prototype.setMaxResolution=function(e){this.set("maxResolution",e)},t.prototype.setMinResolution=function(e){this.set("minResolution",e)},t.prototype.setMaxZoom=function(e){this.set("maxZoom",e)},t.prototype.setMinZoom=function(e){this.set("minZoom",e)},t.prototype.setOpacity=function(e){fn("number"==typeof e,64),this.set("opacity",e)},t.prototype.setVisible=function(e){this.set("visible",e)},t.prototype.setZIndex=function(e){this.set("zIndex",e)},t.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),i.prototype.disposeInternal.call(this)},t}(ul);const W8=kDe;var ODe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),PDe=function(i){function t(e){var n=this,r=Lr({},e);return delete r.source,(n=i.call(this,r)||this).mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.rendered=!1,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addChangeListener("source",n.handleSourcePropertyChange_),n.setSource(e.source?e.source:null),n}return ODe(t,i),t.prototype.getLayersArray=function(e){var n=e||[];return n.push(this),n},t.prototype.getLayerStatesArray=function(e){var n=e||[];return n.push(this.getLayerState()),n},t.prototype.getSource=function(){return this.get("source")||null},t.prototype.getRenderSource=function(){return this.getSource()},t.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():"undefined"},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(bi(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=Cn(e,"change",this.handleSourceChange_,this)),this.changed()},t.prototype.getFeatures=function(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise(function(n){return n([])})},t.prototype.getData=function(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null},t.prototype.render=function(e,n){var r=this.getRenderer();if(r.prepareFrame(e))return this.rendered=!0,r.renderFrame(e,n)},t.prototype.unrender=function(){this.rendered=!1},t.prototype.setMapInternal=function(e){e||this.unrender(),this.set("map",e)},t.prototype.getMapInternal=function(){return this.get("map")},t.prototype.setMap=function(e){this.mapPrecomposeKey_&&(bi(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(bi(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Cn(e,"precompose",function(n){var s=n.frameState.layerStatesArray,o=this.getLayerState(!1);fn(!s.some(function(a){return a.layer===o.layer}),67),s.push(o)},this),this.mapRenderKey_=Cn(this,"change",e.render,e),this.changed())},t.prototype.setSource=function(e){this.set("source",e)},t.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},t.prototype.hasRenderer=function(){return!!this.renderer_},t.prototype.createRenderer=function(){return null},t.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),i.prototype.disposeInternal.call(this)},t}(W8);function xM(i,t){if(!i.visible)return!1;var e=t.resolution;if(e<i.minResolution||e>=i.maxResolution)return!1;var n=t.zoom;return n>i.minZoom&&n<=i.maxZoom}const wM=PDe;function MM(i,t){for(var e=!0,n=i.length-1;n>=0;--n)if(i[n]!=t[n]){e=!1;break}return e}function hI(i,t){var e=Math.cos(t),n=Math.sin(t),s=i[1]*e+i[0]*n;return i[0]=i[0]*e-i[1]*n,i[1]=s,i}function q8(i,t){if(t.canWrapX()){var e=ci(t.getExtent()),n=function HDe(i,t,e){var n=t.getExtent(),r=0;if(t.canWrapX()&&(i[0]<n[0]||i[0]>n[2])){var s=e||ci(n);r=Math.floor((i[0]-n[0])/s)}return r}(i,t,e);n&&(i[0]-=n*e)}return i}var UDe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),zDe=function(i){function t(e){var n=i.call(this)||this;return n.map_=e,n}return UDe(t,i),t.prototype.dispatchRenderEvent=function(e,n){hn()},t.prototype.calculateMatrices2D=function(e){var n=e.viewState,r=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;dl(r,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),dM(s,r)},t.prototype.forEachFeatureAtCoordinate=function(e,n,r,s,o,a,l,c){var u,d=n.viewState;function h(z,D,P,O){return o.call(a,D,z?P:null,O)}var f=d.projection,p=q8(e.slice(),f),m=[[0,0]];if(f.canWrapX()&&s){var _=ci(f.getExtent());m.push([-_,0],[_,0])}for(var v=n.layerStatesArray,y=v.length,b=[],x=[],w=0;w<m.length;w++)for(var E=y-1;E>=0;--E){var R=v[E],F=R.layer;if(F.hasRenderer()&&xM(R,d)&&l.call(c,F)){var N=F.getRenderer(),S=F.getSource();if(N&&S){var L=S.getWrapX()?p:e,Y=h.bind(null,R.managed);x[0]=L[0]+m[w][0],x[1]=L[1]+m[w][1],u=N.forEachFeatureAtCoordinate(x,n,r,Y,b)}if(u)return u}}if(0!==b.length){var I=1/b.length;return b.forEach(function(z,D){return z.distanceSq+=D*I}),b.sort(function(z,D){return z.distanceSq-D.distanceSq}),b.some(function(z){return u=z.callback(z.feature,z.layer,z.geometry)}),u}},t.prototype.forEachLayerAtPixel=function(e,n,r,s,o){return hn()},t.prototype.hasFeatureAtCoordinate=function(e,n,r,s,o,a){return void 0!==this.forEachFeatureAtCoordinate(e,n,r,s,dm,this,o,a)},t.prototype.getMap=function(){return this.map_},t.prototype.renderFrame=function(e){hn()},t.prototype.scheduleExpireIconCache=function(e){bM.canExpireCache()&&e.postRenderFunctions.push(GDe)},t}(eI);function GDe(i,t){bM.expire()}const WDe=zDe;var jDe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),$De=function(i){function t(e,n,r,s){var o=i.call(this,e)||this;return o.inversePixelTransform=n,o.frameState=r,o.context=s,o}return jDe(t,i),t}(_c);const Y8=$De;var CM="ol-hidden",SM="ol-unselectable",fI="ol-control",X8="ol-collapsed",qDe=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),K8=["style","variant","weight","size","lineHeight","family"],Z8=function(i){var t=i.match(qDe);if(!t)return null;for(var e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,r=K8.length;n<r;++n){var s=t[n+1];void 0!==s&&(e[K8[n]]=s)}return e.families=e.family.split(/,\s?/),e};function mo(i,t,e,n){var r;return r=e&&e.length?e.shift():uM?new OffscreenCanvas(i||300,t||300):document.createElement("canvas"),i&&(r.width=i),t&&(r.height=t),r.getContext("2d",n)}function Q8(i){var t=i.canvas;t.width=1,t.height=1,i.clearRect(0,0,1,1)}function J8(i,t){var e=t.parentNode;e&&e.replaceChild(i,t)}function pI(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}var e6="10px sans-serif",vc="#000",EM="round",Ov=[],bm="round",Fv="#000",Nv="center",TM="middle",Sh=[0,0,0,0],yc=new ul;(new hm).setSize=function(){console.warn("labelCache is deprecated.")};var mI,xm=null,gI={},ZDe=function(){var s,o,t="32px ",e=["monospace","serif"],n=e.length,r="wmytzilWMYTZIL@#/&?$%10\uf013";function a(c,u,d){for(var h=!0,f=0;f<n;++f){var p=e[f];if(o=DM(c+" "+u+" "+t+p,r),d!=p){var m=DM(c+" "+u+" "+t+d+","+p,r);h=h&&m!=o}}return!!h}function l(){for(var c=!0,u=yc.getKeys(),d=0,h=u.length;d<h;++d){var f=u[d];yc.get(f)<100&&(a.apply(this,f.split("\n"))?(Dv(gI),xm=null,mI=void 0,yc.set(f,100)):(yc.set(f,yc.get(f)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){var u=Z8(c);if(u)for(var d=u.families,h=0,f=d.length;h<f;++h){var p=d[h],m=u.style+"\n"+u.weight+"\n"+p;void 0===yc.get(m)&&(yc.set(m,100,!0),a(u.style,u.weight,p)||(yc.set(m,0,!0),void 0===s&&(s=setInterval(l,32))))}}}(),QDe=function(){var i;return function(t){var e=gI[t];if(null==e){if(uM){var n=Z8(t),r=t6(t,"\u017dg");e=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else i||((i=document.createElement("div")).innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=t,document.body.appendChild(i),e=i.offsetHeight,document.body.removeChild(i);gI[t]=e}return e}}();function t6(i,t){return xm||(xm=mo(1,1)),i!=mI&&(xm.font=i,mI=xm.font),xm.measureText(t)}function DM(i,t){return t6(i,t).width}function n6(i,t,e){if(t in e)return e[t];var n=t.split("\n").reduce(function(r,s){return Math.max(r,DM(i,s))},0);return e[t]=n,n}var nAe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),iAe=function(i){function t(e){var n=i.call(this,e)||this;n.fontChangeListenerKey_=Cn(yc,"propertychange",e.redrawText.bind(e)),n.element_=document.createElement("div");var r=n.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",n.element_.className=SM+" ol-layers";var s=e.getViewport();return s.insertBefore(n.element_,s.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return nAe(t,i),t.prototype.dispatchRenderEvent=function(e,n){var r=this.getMap();if(r.hasListener(e)){var s=new Y8(e,void 0,n);r.dispatchEvent(s)}},t.prototype.disposeInternal=function(){bi(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),i.prototype.disposeInternal.call(this)},t.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent("precompose",e);var n=e.layerStatesArray.sort(function(f,p){return f.zIndex-p.zIndex}),r=e.viewState;this.children_.length=0;for(var s=[],o=null,a=0,l=n.length;a<l;++a){var c=n[a];e.layerIndex=a;var u=c.layer,d=u.getSourceState();if(!xM(c,r)||"ready"!=d&&"undefined"!=d)u.unrender();else{var h=u.render(e,o);!h||(h!==o&&(this.children_.push(h),o=h),"getDeclutter"in u&&s.push(u))}}for(a=s.length-1;a>=0;--a)s[a].renderDeclutter(e);(function XDe(i,t){for(var e=i.childNodes,n=0;;++n){var r=e[n],s=t[n];if(!r&&!s)break;if(r!==s){if(!r){i.appendChild(s);continue}if(!s){i.removeChild(r),--n;continue}i.insertBefore(s,r)}}})(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},t.prototype.forEachLayerAtPixel=function(e,n,r,s,o){for(var a=n.viewState,l=n.layerStatesArray,u=l.length-1;u>=0;--u){var d=l[u],h=d.layer;if(h.hasRenderer()&&xM(d,a)&&o(h)){var p=h.getRenderer().getDataAtPixel(e,n,r);if(p){var m=s(h,p);if(m)return m}}}},t}(WDe);const rAe=iAe;var r6=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),AM=function(i){function t(e,n,r){var s=i.call(this,e)||this;return s.element=n,s.index=r,s}return r6(t,i),t}(_c),sAe=function(i){function t(e,n){var r=i.call(this)||this;if(r.unique_=!!(n||{}).unique,r.array_=e||[],r.unique_)for(var o=0,a=r.array_.length;o<a;++o)r.assertUnique_(r.array_[o],o);return r.updateLength_(),r}return r6(t,i),t.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},t.prototype.extend=function(e){for(var n=0,r=e.length;n<r;++n)this.push(e[n]);return this},t.prototype.forEach=function(e){for(var n=this.array_,r=0,s=n.length;r<s;++r)e(n[r],r,n)},t.prototype.getArray=function(){return this.array_},t.prototype.item=function(e){return this.array_[e]},t.prototype.getLength=function(){return this.get("length")},t.prototype.insertAt=function(e,n){this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new AM("add",n,e))},t.prototype.pop=function(){return this.removeAt(this.getLength()-1)},t.prototype.push=function(e){this.unique_&&this.assertUnique_(e);var n=this.getLength();return this.insertAt(n,e),this.getLength()},t.prototype.remove=function(e){for(var n=this.array_,r=0,s=n.length;r<s;++r)if(n[r]===e)return this.removeAt(r)},t.prototype.removeAt=function(e){var n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new AM("remove",n,e)),n},t.prototype.setAt=function(e,n){var r=this.getLength();if(e<r){this.unique_&&this.assertUnique_(n,e);var s=this.array_[e];this.array_[e]=n,this.dispatchEvent(new AM("remove",s,e)),this.dispatchEvent(new AM("add",n,e))}else{for(var o=r;o<e;++o)this.insertAt(o,void 0);this.insertAt(e,n)}},t.prototype.updateLength_=function(){this.set("length",this.array_.length)},t.prototype.assertUnique_=function(e,n){for(var r=0,s=this.array_.length;r<s;++r)if(this.array_[r]===e&&r!==n)throw new S8(58)},t}(ul);const $o=sAe;var o6=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Tu=function(i){function t(e,n){var r=i.call(this,e)||this;return r.layer=n,r}return o6(t,i),t}(_c),oAe=function(i){function t(e){var n=this,r=e||{},s=Lr({},r);delete s.layers;var o=r.layers;return(n=i.call(this,s)||this).layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener("layers",n.handleLayersChanged_),o?Array.isArray(o)?o=new $o(o.slice(),{unique:!0}):fn("function"==typeof o.getArray,43):o=new $o(void 0,{unique:!0}),n.setLayers(o),n}return o6(t,i),t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(bi),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var n in this.layersListenerKeys_.push(Cn(e,"add",this.handleLayersAdd_,this),Cn(e,"remove",this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[n].forEach(bi);Dv(this.listenerKeys_);for(var r=e.getArray(),s=0,o=r.length;s<o;s++){var a=r[s];this.registerLayerListeners_(a),this.dispatchEvent(new Tu("addlayer",a))}this.changed()},t.prototype.registerLayerListeners_=function(e){var n=[Cn(e,"propertychange",this.handleLayerChange_,this),Cn(e,"change",this.handleLayerChange_,this)];e instanceof t&&n.push(Cn(e,"addlayer",this.handleLayerGroupAdd_,this),Cn(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Rn(e)]=n},t.prototype.handleLayerGroupAdd_=function(e){this.dispatchEvent(new Tu("addlayer",e.layer))},t.prototype.handleLayerGroupRemove_=function(e){this.dispatchEvent(new Tu("removelayer",e.layer))},t.prototype.handleLayersAdd_=function(e){var n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new Tu("addlayer",n)),this.changed()},t.prototype.handleLayersRemove_=function(e){var n=e.element,r=Rn(n);this.listenerKeys_[r].forEach(bi),delete this.listenerKeys_[r],this.dispatchEvent(new Tu("removelayer",n)),this.changed()},t.prototype.getLayers=function(){return this.get("layers")},t.prototype.setLayers=function(e){var n=this.getLayers();if(n)for(var r=n.getArray(),s=0,o=r.length;s<o;++s)this.dispatchEvent(new Tu("removelayer",r[s]));this.set("layers",e)},t.prototype.getLayersArray=function(e){var n=void 0!==e?e:[];return this.getLayers().forEach(function(r){r.getLayersArray(n)}),n},t.prototype.getLayerStatesArray=function(e){var n=void 0!==e?e:[],r=n.length;this.getLayers().forEach(function(u){u.getLayerStatesArray(n)});var s=this.getLayerState(),o=s.zIndex;!e&&void 0===s.zIndex&&(o=0);for(var a=r,l=n.length;a<l;a++){var c=n[a];c.opacity*=s.opacity,c.visible=c.visible&&s.visible,c.maxResolution=Math.min(c.maxResolution,s.maxResolution),c.minResolution=Math.max(c.minResolution,s.minResolution),c.minZoom=Math.max(c.minZoom,s.minZoom),c.maxZoom=Math.min(c.maxZoom,s.maxZoom),void 0!==s.extent&&(c.extent=void 0!==c.extent?_m(c.extent,s.extent):s.extent),void 0===c.zIndex&&(c.zIndex=o)}return n},t.prototype.getSourceState=function(){return"ready"},t}(W8);const RM=oAe;var aAe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),lAe=function(i){function t(e,n,r){var s=i.call(this,e)||this;return s.map=n,s.frameState=void 0!==r?r:null,s}return aAe(t,i),t}(_c);const wm=lAe;var cAe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),uAe=function(i){function t(e,n,r,s,o,a){var l=i.call(this,e,n,o)||this;return l.originalEvent=r,l.pixel_=null,l.coordinate_=null,l.dragging=void 0!==s&&s,l.activePointers=a,l}return cAe(t,i),Object.defineProperty(t.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(e){this.pixel_=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(e){this.coordinate_=e},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){i.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){i.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},t}(wm);const Du=uAe,Bi={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var dAe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),hAe=function(i){function t(e,n){var r=i.call(this,e)||this;r.map_=e,r.emulateClicks_=!1,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=void 0===n?1:n,r.down_=null;var s=r.map_.getViewport();return r.activePointers_=[],r.trackedTouches_={},r.element_=s,r.pointerdownListenerKey_=Cn(s,"pointerdown",r.handlePointerDown_,r),r.relayedListenerKey_=Cn(s,"pointermove",r.relayMoveEvent_,r),r.boundHandleTouchMove_=r.handleTouchMove_.bind(r),r.element_.addEventListener("touchmove",r.boundHandleTouchMove_,!!T8&&{passive:!1}),r}return dAe(t,i),t.prototype.emulateClick_=function(e){var n=new Du(Bi.CLICK,this.map_,e);this.dispatchEvent(n),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Du(Bi.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var r=new Du(Bi.SINGLECLICK,this.map_,e);this.dispatchEvent(r)}.bind(this),250)},t.prototype.updateActivePointers_=function(e){var n=e,r=n.pointerId;if(n.type==Bi.POINTERUP||n.type==Bi.POINTERCANCEL){for(var s in delete this.trackedTouches_[r],this.trackedTouches_)if(this.trackedTouches_[s].target!==n.target){delete this.trackedTouches_[s];break}}else(n.type==Bi.POINTERDOWN||n.type==Bi.POINTERMOVE)&&(this.trackedTouches_[r]=n);this.activePointers_=x8(this.trackedTouches_)},t.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var n=new Du(Bi.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(bi),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(e){return 0===e.button},t.prototype.handlePointerDown_=function(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);var n=new Du(Bi.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);for(var r in this.dispatchEvent(n),this.down_={},e){var s=e[r];this.down_[r]="function"==typeof s?wh:s}if(0===this.dragListenerKeys_.length){var o=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Cn(o,Bi.POINTERMOVE,this.handlePointerMove_,this),Cn(o,Bi.POINTERUP,this.handlePointerUp_,this),Cn(this.element_,Bi.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==o&&this.dragListenerKeys_.push(Cn(this.element_.getRootNode(),Bi.POINTERUP,this.handlePointerUp_,this))}},t.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;var n=new Du(Bi.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}},t.prototype.relayMoveEvent_=function(e){this.originalPointerMoveEvent_=e;var n=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new Du(Bi.POINTERMOVE,this.map_,e,n))},t.prototype.handleTouchMove_=function(e){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&("boolean"!=typeof e.cancelable||!0===e.cancelable)&&e.preventDefault()},t.prototype.isMoving_=function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(bi(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(bi(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(bi),this.dragListenerKeys_.length=0,this.element_=null,i.prototype.disposeInternal.call(this)},t}(hm);const fAe=hAe;var IM=1/0,pAe=function(){function i(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return i.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Dv(this.queuedElements_)},i.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var r=this.keyFunction_(n);return delete this.queuedElements_[r],n},i.prototype.enqueue=function(t){fn(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=IM&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},i.prototype.getCount=function(){return this.elements_.length},i.prototype.getLeftChildIndex_=function(t){return 2*t+1},i.prototype.getRightChildIndex_=function(t){return 2*t+2},i.prototype.getParentIndex_=function(t){return t-1>>1},i.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},i.prototype.isEmpty=function(){return 0===this.elements_.length},i.prototype.isKeyQueued=function(t){return t in this.queuedElements_},i.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},i.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,r=e.length,s=e[t],o=n[t],a=t;t<r>>1;){var l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),u=c<r&&n[c]<n[l]?c:l;e[t]=e[u],n[t]=n[u],t=u}e[t]=s,n[t]=o,this.siftDown_(a,t)},i.prototype.siftDown_=function(t,e){for(var n=this.elements_,r=this.priorities_,s=n[e],o=r[e];e>t;){var a=this.getParentIndex_(e);if(!(r[a]>o))break;n[e]=n[a],r[e]=r[a],e=a}n[e]=s,r[e]=o},i.prototype.reprioritize=function(){var o,a,l,t=this.priorityFunction_,e=this.elements_,n=this.priorities_,r=0,s=e.length;for(a=0;a<s;++a)(l=t(o=e[a]))==IM?delete this.queuedElements_[this.keyFunction_(o)]:(n[r]=l,e[r++]=o);e.length=r,n.length=r,this.heapify_()},i}();const mAe=pAe;var gAe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),_Ae=function(i){function t(e,n){var r=i.call(this,function(s){return e.apply(null,s)},function(s){return s[0].getKey()})||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=n,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return gAe(t,i),t.prototype.enqueue=function(e){var n=i.prototype.enqueue.call(this,e);return n&&e[0].addEventListener("change",this.boundHandleTileChange_),n},t.prototype.getTilesLoading=function(){return this.tilesLoading_},t.prototype.handleTileChange=function(e){var n=e.target,r=n.getState();if(2===r||3===r||4===r){n.removeEventListener("change",this.boundHandleTileChange_);var s=n.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}},t.prototype.loadMoreTiles=function(e,n){for(var o,a,r=0;this.tilesLoading_<e&&r<n&&this.getCount()>0;)a=(o=this.dequeue()[0]).getKey(),0===o.getState()&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++r,o.load())},t}(mAe);const vAe=_Ae;var Da={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},qo={};qo[Da.RADIANS]=6370997/(2*Math.PI),qo[Da.DEGREES]=2*Math.PI*6370997/360,qo[Da.FEET]=.3048,qo[Da.METERS]=1,qo[Da.USFEET]=1200/3937;const Ru=Da,Aa={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var wAe=function(){function i(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return i.prototype.canWrapX=function(){return this.canWrapX_},i.prototype.getCode=function(){return this.code_},i.prototype.getExtent=function(){return this.extent_},i.prototype.getUnits=function(){return this.units_},i.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||qo[this.units_]},i.prototype.getWorldExtent=function(){return this.worldExtent_},i.prototype.getAxisOrientation=function(){return this.axisOrientation_},i.prototype.isGlobal=function(){return this.global_},i.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},i.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},i.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},i.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},i.prototype.setWorldExtent=function(t){this.worldExtent_=t},i.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},i.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},i}();const a6=wAe;var MAe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Vv=6378137,Mm=Math.PI*Vv,CAe=[-Mm,-Mm,Mm,Mm],SAe=[-180,-85,180,85],kM=Vv*Math.log(Math.tan(Math.PI/2)),Cm=function(i){function t(e){return i.call(this,{code:e,units:Ru.METERS,extent:CAe,global:!0,worldExtent:SAe,getPointResolution:function(n,r){return n/CDe(r[1]/Vv)}})||this}return MAe(t,i),t}(a6),l6=[new Cm("EPSG:3857"),new Cm("EPSG:102100"),new Cm("EPSG:102113"),new Cm("EPSG:900913"),new Cm("http://www.opengis.net/def/crs/EPSG/0/3857"),new Cm("http://www.opengis.net/gml/srs/epsg.xml#3857")];function EAe(i,t,e){var n=i.length,r=e>1?e:2,s=t;void 0===s&&(s=r>2?i.slice():new Array(n));for(var o=0;o<n;o+=r){s[o]=Mm*i[o]/180;var a=Vv*Math.log(Math.tan(Math.PI*(+i[o+1]+90)/360));a>kM?a=kM:a<-kM&&(a=-kM),s[o+1]=a}return s}function TAe(i,t,e){var n=i.length,r=e>1?e:2,s=t;void 0===s&&(s=r>2?i.slice():new Array(n));for(var o=0;o<n;o+=r)s[o]=180*i[o]/Mm,s[o+1]=360*Math.atan(Math.exp(i[o+1]/Vv))/Math.PI-90;return s}var DAe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),c6=[-180,-90,180,90],RAe=6378137*Math.PI/180,Eh=function(i){function t(e,n){return i.call(this,{code:e,units:Ru.DEGREES,extent:c6,axisOrientation:n,global:!0,metersPerUnit:RAe,worldExtent:c6})||this}return DAe(t,i),t}(a6),u6=[new Eh("CRS:84"),new Eh("EPSG:4326","neu"),new Eh("urn:ogc:def:crs:OGC:1.3:CRS84"),new Eh("urn:ogc:def:crs:OGC:2:84"),new Eh("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Eh("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Eh("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],OM={},Ra={};function PM(i,t,e){var n=i.getCode(),r=t.getCode();n in Ra||(Ra[n]={}),Ra[n][r]=e}function bI(i,t,e){var n=e||6371008.8,r=gM(i[1]),s=gM(t[1]),o=(s-r)/2,a=gM(t[0]-i[0])/2,l=Math.sin(o)*Math.sin(o)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(s);return 2*n*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}var wI=!0;function MI(i,t,e){var n;if(void 0!==t){for(var r=0,s=i.length;r<s;++r)t[r]=i[r];n=t}else n=i.slice();return n}function h6(i,t,e){if(void 0!==t&&i!==t){for(var n=0,r=i.length;n<r;++n)t[n]=i[n];i=t}return i}function FAe(i){(function kAe(i,t){OM[i]=t})(i.getCode(),i),PM(i,i,MI)}function as(i){return"string"==typeof i?function IAe(i){return OM[i]||OM[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(i):i||null}function f6(i,t,e,n){var r,s=(i=as(i)).getPointResolutionFunc();if(s)r=s(t,e),n&&n!==i.getUnits()&&(o=i.getMetersPerUnit())&&(r=r*o/qo[n]);else{var a=i.getUnits();if(a==Ru.DEGREES&&!n||n==Ru.DEGREES)r=t;else{var o,l=Hv(i,as("EPSG:4326"));if(l===h6&&a!==Ru.DEGREES)r=t*i.getMetersPerUnit();else{var c=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];r=(bI((c=l(c,c,2)).slice(0,2),c.slice(2,4))+bI(c.slice(4,6),c.slice(6,8)))/2}void 0!==(o=n?qo[n]:i.getMetersPerUnit())&&(r/=o)}}return r}function p6(i){(function NAe(i){i.forEach(FAe)})(i),i.forEach(function(t){i.forEach(function(e){t!==e&&PM(t,e,MI)})})}function CI(i,t){return i?"string"==typeof i?as(i):i:as(t)}function Sm(i,t){if(i===t)return!0;var e=i.getUnits()===t.getUnits();return(i.getCode()===t.getCode()||Hv(i,t)===MI)&&e}function Hv(i,t){var r=function OAe(i,t){var e;return i in Ra&&t in Ra[i]&&(e=Ra[i][t]),e}(i.getCode(),t.getCode());return r||(r=h6),r}function Uv(i,t){return Hv(as(i),as(t))}function zv(i,t,e){return Uv(t,e)(i,void 0,i.length)}var xs=null;function _6(){return xs}function SI(i,t){return i}function bc(i,t){return wI&&!MM(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(wI=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function EI(i,t){return i}function Th(i,t){return i}function HAe(i,t){return i}function v6(i,t,e){return function(n,r,s,o,a){if(n){if(!r&&!t)return n;var l=t?0:s[0]*r,c=t?0:s[1]*r,u=a?a[0]:0,d=a?a[1]:0,h=i[0]+l/2+u,f=i[2]-l/2+u,p=i[1]+c/2+d,m=i[3]-c/2+d;h>f&&(f=h=(f+h)/2),p>m&&(m=p=(m+p)/2);var g=ur(n[0],h,f),_=ur(n[1],p,m);if(o&&e&&r){var v=30*r;g+=-v*Math.log(1+Math.max(0,h-n[0])/v)+v*Math.log(1+Math.max(0,n[0]-f)/v),_+=-v*Math.log(1+Math.max(0,p-n[1])/v)+v*Math.log(1+Math.max(0,n[1]-m)/v)}return[g,_]}}}function zAe(i){return i}function TI(i,t,e,n){var r=ci(t)/e[0],s=po(t)/e[1];return n?Math.min(i,Math.max(r,s)):Math.min(i,Math.min(r,s))}function DI(i,t,e){var n=Math.min(i,t);return n*=Math.log(1+50*Math.max(0,i/t-1))/50+1,e&&(n=Math.max(n,e),n/=Math.log(1+50*Math.max(0,e/i-1))/50+1),ur(n,e/2,2*t)}function y6(i,t,e,n,r){return function(s,o,a,l){if(void 0!==s){var c=n?TI(i,n,a,r):i;return(void 0===e||e)&&l?DI(s,c,t):ur(s,t,c)}}}function AI(i){if(void 0!==i)return 0}function b6(i){if(void 0!==i)return i}function x6(i){return Math.pow(i,3)}function Em(i){return 1-x6(1-i)}function RI(i){return 3*i*i-2*i*i*i}function qAe(i){return i}!function UAe(){p6(l6),p6(u6),function BAe(i,t,e,n){i.forEach(function(r){t.forEach(function(s){PM(r,s,e),PM(s,r,n)})})}(u6,l6,EAe,TAe)}();function Dh(i,t,e,n,r,s){for(var o=s||[],a=0,l=t;l<e;l+=n){var c=i[l],u=i[l+1];o[a++]=r[0]*c+r[2]*u+r[4],o[a++]=r[1]*c+r[3]*u+r[5]}return s&&o.length!=a&&(o.length=a),o}function w6(i,t,e,n,r,s,o){for(var a=o||[],l=Math.cos(r),c=Math.sin(r),u=s[0],d=s[1],h=0,f=t;f<e;f+=n){var p=i[f]-u,m=i[f+1]-d;a[h++]=u+p*l-m*c,a[h++]=d+p*c+m*l;for(var g=f+2;g<f+n;++g)a[h++]=i[g]}return o&&a.length!=h&&(a.length=h),a}var KAe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),M6=[1,0,0,1,0,0],ZAe=function(i){function t(){var e=i.call(this)||this;return e.extent_=[1/0,1/0,-1/0,-1/0],e.extentRevision_=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=function $1e(i){var e,n,r,t=!1;return function(){var s=Array.prototype.slice.call(arguments);return(!t||this!==r||!xh(s,n))&&(t=!0,r=this,n=s,e=i.apply(this,arguments)),e}}(function(n,r,s){if(!s)return this.getSimplifiedGeometry(r);var o=this.clone();return o.applyTransform(s),o.getSimplifiedGeometry(r)}),e}return KAe(t,i),t.prototype.simplifyTransformed=function(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)},t.prototype.clone=function(){return hn()},t.prototype.closestPointXY=function(e,n,r,s){return hn()},t.prototype.containsXY=function(e,n){var r=this.getClosestPoint([e,n]);return r[0]===e&&r[1]===n},t.prototype.getClosestPoint=function(e,n){var r=n||[NaN,NaN];return this.closestPointXY(e[0],e[1],r,1/0),r},t.prototype.intersectsCoordinate=function(e){return this.containsXY(e[0],e[1])},t.prototype.computeExtent=function(e){return hn()},t.prototype.getExtent=function(e){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&pm(n),this.extentRevision_=this.getRevision()}return function bDe(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i}(this.extent_,e)},t.prototype.rotate=function(e,n){hn()},t.prototype.scale=function(e,n,r){hn()},t.prototype.simplify=function(e){return this.getSimplifiedGeometry(e*e)},t.prototype.getSimplifiedGeometry=function(e){return hn()},t.prototype.getType=function(){return hn()},t.prototype.applyTransform=function(e){hn()},t.prototype.intersectsExtent=function(e){return hn()},t.prototype.translate=function(e,n){hn()},t.prototype.transform=function(e,n){var r=as(e),s=r.getUnits()==Ru.TILE_PIXELS?function(o,a,l){var c=r.getExtent(),u=r.getWorldExtent(),d=po(u)/po(c);return dl(M6,u[0],u[3],d,-d,0,0,0),Dh(o,0,o.length,l,M6,a),Uv(r,n)(o,a,l)}:Uv(r,n);return this.applyTransform(s),this},t}(ul);const QAe=ZAe;var JAe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),eRe=function(i){function t(){var e=i.call(this)||this;return e.layout="XY",e.stride=2,e.flatCoordinates=null,e}return JAe(t,i),t.prototype.computeExtent=function(e){return function mDe(i,t,e,n,r){return P8(pm(r),i,t,e,n)}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},t.prototype.getCoordinates=function(){return hn()},t.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.getFlatCoordinates=function(){return this.flatCoordinates},t.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},t.prototype.getLayout=function(){return this.layout},t.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)},t.prototype.getSimplifiedGeometryInternal=function(e){return this},t.prototype.getStride=function(){return this.stride},t.prototype.setFlatCoordinates=function(e,n){this.stride=C6(e),this.layout=e,this.flatCoordinates=n},t.prototype.setCoordinates=function(e,n){hn()},t.prototype.setLayout=function(e,n,r){var s;if(e)s=C6(e);else{for(var o=0;o<r;++o){if(0===n.length)return this.layout="XY",void(this.stride=2);n=n[0]}e=function tRe(i){var t;return 2==i?t="XY":3==i?t="XYZ":4==i&&(t="XYZM"),t}(s=n.length)}this.layout=e,this.stride=s},t.prototype.applyTransform=function(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},t.prototype.rotate=function(e,n){var r=this.getFlatCoordinates();if(r){var s=this.getStride();w6(r,0,r.length,s,e,n,r),this.changed()}},t.prototype.scale=function(e,n,r){var s=n;void 0===s&&(s=e);var o=r;o||(o=gm(this.getExtent()));var a=this.getFlatCoordinates();if(a){var l=this.getStride();(function YAe(i,t,e,n,r,s,o,a){for(var l=a||[],c=o[0],u=o[1],d=0,h=t;h<e;h+=n){var p=i[h+1]-u;l[d++]=c+r*(i[h]-c),l[d++]=u+s*p;for(var m=h+2;m<h+n;++m)l[d++]=i[m]}a&&l.length!=d&&(l.length=d)})(a,0,a.length,l,e,s,o,a),this.changed()}},t.prototype.translate=function(e,n){var r=this.getFlatCoordinates();if(r){var s=this.getStride();(function XAe(i,t,e,n,r,s,o){for(var a=o||[],l=0,c=t;c<e;c+=n){a[l++]=i[c]+r,a[l++]=i[c+1]+s;for(var u=c+2;u<c+n;++u)a[l++]=i[u]}o&&a.length!=l&&(a.length=l)})(r,0,r.length,s,e,n,r),this.changed()}},t}(QAe);function C6(i){var t;return"XY"==i?t=2:"XYZ"==i||"XYM"==i?t=3:"XYZM"==i&&(t=4),t}const II=eRe;function S6(i,t,e,n,r,s,o){var d,a=i[t],l=i[t+1],c=i[e]-a,u=i[e+1]-l;if(0===c&&0===u)d=t;else{var h=((r-a)*c+(s-l)*u)/(c*c+u*u);if(h>1)d=e;else{if(h>0){for(var f=0;f<n;++f)o[f]=Ch(i[t+f],i[e+f],h);return void(o.length=n)}d=t}}for(f=0;f<n;++f)o[f]=i[d+f];o.length=n}function E6(i,t,e,n,r){var s=i[t],o=i[t+1];for(t+=n;t<e;t+=n){var a=i[t],l=i[t+1],c=vm(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function D6(i,t,e,n,r,s,o,a,l,c,u){if(t==e)return c;var d,h;if(0===r){if((h=vm(o,a,i[t],i[t+1]))<c){for(d=0;d<n;++d)l[d]=i[t+d];return l.length=n,h}return c}for(var f=u||[NaN,NaN],p=t+n;p<e;)if(S6(i,p-n,p,n,o,a,f),(h=vm(o,a,f[0],f[1]))<c){for(c=h,d=0;d<n;++d)l[d]=f[d];l.length=n,p+=n}else p+=n*Math.max((Math.sqrt(h)-Math.sqrt(c))/r|0,1);if(s&&(S6(i,e-n,t,n,o,a,f),(h=vm(o,a,f[0],f[1]))<c)){for(c=h,d=0;d<n;++d)l[d]=f[d];l.length=n}return c}function R6(i,t,e,n){for(var r=0,s=e.length;r<s;++r)for(var o=e[r],a=0;a<n;++a)i[t++]=o[a];return t}function Ah(i,t){return t*Math.round(i/t)}function oRe(i,t,e,n,r,s,o){if(t==e)return o;var c,u,a=Ah(i[t],r),l=Ah(i[t+1],r);t+=n,s[o++]=a,s[o++]=l;do{if(c=Ah(i[t],r),u=Ah(i[t+1],r),(t+=n)==e)return s[o++]=c,s[o++]=u,o}while(c==a&&u==l);for(;t<e;){var d=Ah(i[t],r),h=Ah(i[t+1],r);if(t+=n,d!=c||h!=u){var f=c-a,p=u-l,m=d-a,g=h-l;if(f*g==p*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(p<0&&g<p||p==g||p>0&&g>p)){c=d,u=h;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=d,u=h}}return s[o++]=c,s[o++]=u,o}function Tm(i,t,e,n,r){for(var s=void 0!==r?r:[],o=0,a=t;a<e;a+=n)s[o++]=i.slice(a,a+n);return s.length=o,s}function NM(i,t,e,n,r){for(var s=void 0!==r?r:[],o=0,a=0,l=e.length;a<l;++a){var c=e[a];s[o++]=Tm(i,t,c,n,s[o]),t=c}return s.length=o,s}function O6(i,t,e,n,r){for(var s=void 0!==r?r:[],o=0,a=0,l=e.length;a<l;++a){var c=e[a];s[o++]=NM(i,t,c,n,s[o]),t=c[c.length-1]}return s.length=o,s}function P6(i,t,e,n){for(var r=0,s=i[e-n],o=i[e-n+1];t<e;t+=n){var a=i[t],l=i[t+1];r+=o*a-s*l,s=a,o=l}return r/2}var aRe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),lRe=function(i){function t(e,n){var r=i.call(this)||this;return r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?r.setCoordinates(e,n):r.setFlatCoordinates(n,e),r}return aRe(t,i),t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(e,n,r,s){return s<I8(this.getExtent(),e,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(E6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),D6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,r,s))},t.prototype.getArea=function(){return P6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinates=function(){return Tm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getSimplifiedGeometryInternal=function(e){var n=[];return n.length=function kI(i,t,e,n,r,s,o){var a=(e-t)/n;if(a<3){for(;t<e;t+=n)s[o++]=i[t],s[o++]=i[t+1];return o}var l=new Array(a);l[0]=1,l[a-1]=1;for(var c=[t,e-n],u=0;c.length>0;){for(var d=c.pop(),h=c.pop(),f=0,p=i[h],m=i[h+1],g=i[d],_=i[d+1],v=h+n;v<d;v+=n){var x=EDe(i[v],i[v+1],p,m,g,_);x>f&&(u=v,f=x)}f>r&&(l[(u-t)/n]=1,h+n<u&&c.push(h,u),u+n<d&&c.push(u,d))}for(v=0;v<a;++v)l[v]&&(s[o++]=i[t+v*n],s[o++]=i[t+v*n+1]);return o}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new t(n,"XY")},t.prototype.getType=function(){return"LinearRing"},t.prototype.intersectsExtent=function(e){return!1},t.prototype.setCoordinates=function(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=R6(this.flatCoordinates,0,e,this.stride),this.changed()},t}(II);const F6=lRe;var cRe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),uRe=function(i){function t(e,n){var r=i.call(this)||this;return r.setCoordinates(e,n),r}return cRe(t,i),t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,n,r,s){var o=this.flatCoordinates,a=vm(e,n,o[0],o[1]);if(a<s){for(var l=this.stride,c=0;c<l;++c)r[c]=o[c];return r.length=l,a}return s},t.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},t.prototype.computeExtent=function(e){return function pDe(i,t){var e=i[0],n=i[1];return hl(e,n,e,n,t)}(this.flatCoordinates,e)},t.prototype.getType=function(){return"Point"},t.prototype.intersectsExtent=function(e){return k8(e,this.flatCoordinates[0],this.flatCoordinates[1])},t.prototype.setCoordinates=function(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function iRe(i,t,e,n){for(var r=0,s=e.length;r<s;++r)i[t++]=e[r];return t}(this.flatCoordinates,0,e),this.changed()},t}(II);const N6=uRe;function dRe(i,t,e,n,r){var s=L8(r,function(o){return!Rh(i,t,e,n,o[0],o[1])});return!s}function Rh(i,t,e,n,r,s){for(var o=0,a=i[e-n],l=i[e-n+1];t<e;t+=n){var c=i[t],u=i[t+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return 0!==o}function OI(i,t,e,n,r,s){if(0===e.length||!Rh(i,t,e[0],n,r,s))return!1;for(var o=1,a=e.length;o<a;++o)if(Rh(i,e[o-1],e[o],n,r,s))return!1;return!0}function PI(i,t,e,n,r){var s=P8([1/0,1/0,-1/0,-1/0],i,t,e,n);return!!Ns(r,s)&&(!!(fm(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3])||function hRe(i,t,e,n,r){var s;for(t+=n;t<e;t+=n)if(s=r(i.slice(t-n,t),i.slice(t,t+n)))return s;return!1}(i,t,e,n,function(o,a){return function xDe(i,t,e){var n=!1,r=aI(i,t),s=aI(i,e);if(1===r||1===s)n=!0;else{var o=i[0],a=i[1],l=i[2],c=i[3],h=e[0],f=e[1],p=(f-t[1])/(h-t[0]),m=void 0,g=void 0;!!(2&s)&&!(2&r)&&(n=(m=h-(f-c)/p)>=o&&m<=l),n||!(4&s)||4&r||(n=(g=f-(h-l)*p)>=a&&g<=c),n||!(8&s)||8&r||(n=(m=h-(f-a)/p)>=o&&m<=l),!n&&16&s&&!(16&r)&&(n=(g=f-(h-o)*p)>=a&&g<=c)}return n}(r,o,a)}))}function V6(i,t,e,n,r){return!!(PI(i,t,e,n,r)||Rh(i,t,e,n,r[0],r[1])||Rh(i,t,e,n,r[0],r[3])||Rh(i,t,e,n,r[2],r[1])||Rh(i,t,e,n,r[2],r[3]))}function fRe(i,t,e,n){for(;t<e-n;){for(var r=0;r<n;++r){var s=i[t+r];i[t+r]=i[e-n+r],i[e-n+r]=s}t+=n,e-=n}}function LI(i,t,e,n){for(var r=0,s=i[e-n],o=i[e-n+1];t<e;t+=n){var a=i[t],l=i[t+1];r+=(a-s)*(l+o),s=a,o=l}return 0===r?void 0:r>0}function FI(i,t,e,n,r){for(var s=void 0!==r&&r,o=0,a=e.length;o<a;++o){var l=e[o],c=LI(i,t,l,n);(0===o?s&&c||!s&&!c:s&&!c||!s&&c)&&fRe(i,t,l,n),t=l}return t}var pRe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),BM=function(i){function t(e,n,r){var s=i.call(this)||this;return s.ends_=[],s.flatInteriorPointRevision_=-1,s.flatInteriorPoint_=null,s.maxDelta_=-1,s.maxDeltaRevision_=-1,s.orientedRevision_=-1,s.orientedFlatCoordinates_=null,void 0!==n&&r?(s.setFlatCoordinates(n,e),s.ends_=r):s.setCoordinates(e,n),s}return pRe(t,i),t.prototype.appendLinearRing=function(e){this.flatCoordinates?b8(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,n,r,s){return s<I8(this.getExtent(),e,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function T6(i,t,e,n,r){for(var s=0,o=e.length;s<o;++s){var a=e[s];r=E6(i,t,a,n,r),t=a}return r}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function A6(i,t,e,n,r,s,o,a,l,c,u){for(var d=u||[NaN,NaN],h=0,f=e.length;h<f;++h){var p=e[h];c=D6(i,t,p,n,r,s,o,a,l,c,d),t=p}return c}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,r,s))},t.prototype.containsXY=function(e,n){return OI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)},t.prototype.getArea=function(){return function L6(i,t,e,n){for(var r=0,s=0,o=e.length;s<o;++s){var a=e[s];r+=P6(i,t,a,n),t=a}return r}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},t.prototype.getCoordinates=function(e){var n;return void 0!==e?FI(n=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,e):n=this.flatCoordinates,NM(n,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var e=gm(this.getExtent());this.flatInteriorPoint_=function B6(i,t,e,n,r,s,o){for(var a,l,c,u,d,h,f,p=r[s+1],m=[],g=0,_=e.length;g<_;++g){var v=e[g];for(u=i[v-n],h=i[v-n+1],a=t;a<v;a+=n)d=i[a],f=i[a+1],(p<=h&&f<=p||h<=p&&p<=f)&&m.push(c=(p-h)/(f-h)*(d-u)+u),u=d,h=f}var y=NaN,b=-1/0;for(m.sort(bh),u=m[0],a=1,l=m.length;a<l;++a){d=m[a];var x=Math.abs(d-u);x>b&&OI(i,t,e,n,c=(u+d)/2,p)&&(y=c,b=x),u=d}return isNaN(y)&&(y=r[s]),o?(o.push(y,p,b),o):[y,p,b]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},t.prototype.getInteriorPoint=function(){return new N6(this.getFlatInteriorPoint(),"XYM")},t.prototype.getLinearRingCount=function(){return this.ends_.length},t.prototype.getLinearRing=function(e){return e<0||this.ends_.length<=e?null:new F6(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)},t.prototype.getLinearRings=function(){for(var e=this.layout,n=this.flatCoordinates,r=this.ends_,s=[],o=0,a=0,l=r.length;a<l;++a){var c=r[a],u=new F6(n.slice(o,c),e);s.push(u),o=c}return s},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;!function U6(i,t,e,n,r){for(var s=void 0!==r&&r,o=0,a=e.length;o<a;++o){var l=e[o],c=LI(i,t,l,n);if(0===o){if(s&&c||!s&&!c)return!1}else if(s&&!c||!s&&c)return!1;t=l}return!0}(e,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=FI(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=e,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(e){var n=[],r=[];return n.length=function k6(i,t,e,n,r,s,o,a){for(var l=0,c=e.length;l<c;++l){var u=e[l];o=oRe(i,t,u,n,r,s,o),a.push(o),t=u}return o}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,r),new t(n,"XY",r)},t.prototype.getType=function(){return"Polygon"},t.prototype.intersectsExtent=function(e){return function H6(i,t,e,n,r){if(!V6(i,t,e[0],n,r))return!1;if(1===e.length)return!0;for(var s=1,o=e.length;s<o;++s)if(dRe(i,e[s-1],e[s],n,r)&&!PI(i,e[s-1],e[s],n,r))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)},t.prototype.setCoordinates=function(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=function I6(i,t,e,n,r){for(var s=r||[],o=0,a=0,l=e.length;a<l;++a){var c=R6(i,t,e[a],n);s[o++]=c,t=c}return s.length=o,s}(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},t}(II);const mRe=BM;function z6(i){var t=i[0],e=i[1],n=i[2],r=i[3],s=[t,e,t,r,n,r,n,e,t,e];return new BM(s,"XY",[s.length])}var _Re=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),vRe=function(i){function t(e){var n=i.call(this)||this,r=Lr({},e);return n.hints_=[0,0],n.animations_=[],n.projection_=CI(r.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.nextCenter_=null,n.cancelAnchor_=void 0,r.projection&&function d6(i){wI=!(void 0===i||i)}(),r.center&&(r.center=bc(r.center)),r.extent&&(r.extent=Th(r.extent)),n.applyOptions_(r),n}return _Re(t,i),t.prototype.applyOptions_=function(e){var n=Lr({},e);for(var r in Aa)delete n[r];this.setProperties(n,!0);var s=function bRe(i){var t,e,n,o=void 0!==i.minZoom?i.minZoom:0,a=void 0!==i.maxZoom?i.maxZoom:28,l=void 0!==i.zoomFactor?i.zoomFactor:2,c=void 0!==i.multiWorld&&i.multiWorld,u=void 0===i.smoothResolutionConstraint||i.smoothResolutionConstraint,d=void 0!==i.showFullExtent&&i.showFullExtent,h=CI(i.projection,"EPSG:3857"),f=h.getExtent(),p=i.constrainOnlyCenter,m=i.extent;if(!c&&!m&&h.isGlobal()&&(p=!1,m=f),void 0!==i.resolutions){var g=i.resolutions;e=g[o],n=void 0!==g[a]?g[a]:g[g.length-1],t=i.constrainResolution?function GAe(i,t,e,n){return function(r,s,o,a){if(void 0!==r){var l=i[0],c=i[i.length-1],u=e?TI(l,e,o,n):l;if(a)return void 0===t||t?DI(r,u,c):ur(r,c,u);var h=Math.min(u,r),f=Math.floor(tI(i,h,s));return i[f]>u&&f<i.length-1?i[f+1]:i[f]}}}(g,u,!p&&m,d):y6(e,n,u,!p&&m,d)}else{var v=(f?Math.max(ci(f),po(f)):360*qo[Ru.DEGREES]/h.getMetersPerUnit())/256/Math.pow(2,0),y=v/Math.pow(2,28);void 0!==(e=i.maxResolution)?o=0:e=v/Math.pow(l,o),void 0===(n=i.minResolution)&&(n=void 0!==i.maxZoom?void 0!==i.maxResolution?e/Math.pow(l,a):v/Math.pow(l,a):y),a=o+Math.floor(Math.log(e/n)/Math.log(l)),n=e/Math.pow(l,a-o),t=i.constrainResolution?function WAe(i,t,e,n,r,s){return function(o,a,l,c){if(void 0!==o){var u=r?TI(t,r,l,s):t,d=void 0!==e?e:0;if(c)return void 0===n||n?DI(o,u,d):ur(o,d,u);var p=Math.ceil(Math.log(t/u)/Math.log(i)-1e-9),m=-a*(.5-1e-9)+.5,g=Math.min(u,o),_=Math.floor(Math.log(t/g)/Math.log(i)+m),v=Math.max(p,_);return ur(t/Math.pow(i,v),d,u)}}}(l,e,n,u,!p&&m,d):y6(e,n,u,!p&&m,d)}return{constraint:t,maxResolution:e,minResolution:n,minZoom:o,zoomFactor:l}}(e);this.maxResolution_=s.maxResolution,this.minResolution_=s.minResolution,this.zoomFactor_=s.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=s.minZoom;var o=function yRe(i){if(void 0!==i.extent)return v6(i.extent,i.constrainOnlyCenter,void 0===i.smoothExtentConstraint||i.smoothExtentConstraint);var e=CI(i.projection,"EPSG:3857");if(!0!==i.multiWorld&&e.isGlobal()){var n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,v6(n,!1,!1)}return zAe}(e),a=s.constraint,l=function xRe(i){if(void 0===i.enableRotation||i.enableRotation){var e=i.constrainRotation;return void 0===e||!0===e?function $Ae(i){var t=i||gM(5);return function(e,n){return n?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}():!1===e?b6:"number"==typeof e?function jAe(i){var t=2*Math.PI/i;return function(e,n){return n?e:void 0!==e?e=Math.floor(e/t+.5)*t:void 0}}(e):b6}return AI}(e);this.constraints_={center:o,resolution:a,rotation:l},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)},Object.defineProperty(t.prototype,"padding",{get:function(){return this.padding_},set:function(e){var n=this.padding_;this.padding_=e;var r=this.getCenter();if(r){var s=e||[0,0,0,0];n=n||[0,0,0,0];var o=this.getResolution();this.setCenterInternal([r[0]+o/2*(s[3]-n[3]+n[1]-s[1]),r[1]-o/2*(s[0]-n[0]+n[2]-s[2])])}},enumerable:!1,configurable:!0}),t.prototype.getUpdatedOptions_=function(e){var n=this.getProperties();return void 0!==n.resolution?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Lr({},n,e)},t.prototype.animate=function(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),r=0;r<n.length;++r){var s=arguments[r];s.center&&((s=Lr({},s)).center=bc(s.center,this.getProjection())),s.anchor&&((s=Lr({},s)).anchor=bc(s.anchor,this.getProjection())),n[r]=s}this.animateInternal.apply(this,n)},t.prototype.animateInternal=function(e){var r,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(r=arguments[n-1],--n);for(var s=0;s<n&&!this.isDef();++s){var o=arguments[s];o.center&&this.setCenterInternal(o.center),void 0!==o.zoom?this.setZoom(o.zoom):o.resolution&&this.setResolution(o.resolution),void 0!==o.rotation&&this.setRotation(o.rotation)}if(s!==n){for(var a=Date.now(),l=this.targetCenter_.slice(),c=this.targetResolution_,u=this.targetRotation_,d=[];s<n;++s){var h=arguments[s],f={start:a,complete:!1,anchor:h.anchor,duration:void 0!==h.duration?h.duration:1e3,easing:h.easing||RI,callback:r};if(h.center&&(f.sourceCenter=l,f.targetCenter=h.center.slice(),l=f.targetCenter),void 0!==h.zoom?(f.sourceResolution=c,f.targetResolution=this.getResolutionForZoom(h.zoom),c=f.targetResolution):h.resolution&&(f.sourceResolution=c,f.targetResolution=h.resolution,c=f.targetResolution),void 0!==h.rotation){f.sourceRotation=u;var p=ym(h.rotation-u+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=u+p,u=f.targetRotation}wRe(f)?f.complete=!0:a+=f.duration,d.push(f)}this.animations_.push(d),this.setHint(0,1),this.updateAnimations_()}else r&&VM(r,!0)},t.prototype.getAnimating=function(){return this.hints_[0]>0},t.prototype.getInteracting=function(){return this.hints_[1]>0},t.prototype.cancelAnimations=function(){this.setHint(0,-this.hints_[0]);for(var e,n=0,r=this.animations_.length;n<r;++n){var s=this.animations_[n];if(s[0].callback&&VM(s[0].callback,!1),!e)for(var o=0,a=s.length;o<a;++o){var l=s[o];if(!l.complete){e=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},t.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var e=Date.now(),n=!1,r=this.animations_.length-1;r>=0;--r){for(var s=this.animations_[r],o=!0,a=0,l=s.length;a<l;++a){var c=s[a];if(!c.complete){var d=c.duration>0?(e-c.start)/c.duration:1;d>=1?(c.complete=!0,d=1):o=!1;var h=c.easing(d);if(c.sourceCenter){var f=c.sourceCenter[0],p=c.sourceCenter[1],m=c.targetCenter[0],g=c.targetCenter[1];this.nextCenter_=c.targetCenter,this.targetCenter_=[f+h*(m-f),p+h*(g-p)]}if(c.sourceResolution&&c.targetResolution){var y=1===h?c.targetResolution:c.sourceResolution+h*(c.targetResolution-c.sourceResolution);if(c.anchor){var b=this.getViewportSize_(this.getRotation()),x=this.constraints_.resolution(y,0,b,!0);this.targetCenter_=this.calculateCenterZoom(x,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(void 0!==c.sourceRotation&&void 0!==c.targetRotation){var w=1===h?ym(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+h*(c.targetRotation-c.sourceRotation);if(c.anchor){var E=this.constraints_.rotation(w,!0);this.targetCenter_=this.calculateCenterRotate(E,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=w}if(this.applyTargetState_(!0),n=!0,!c.complete)break}}if(o){this.animations_[r]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var R=s[0].callback;R&&VM(R,!0)}}this.animations_=this.animations_.filter(Boolean),n&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},t.prototype.calculateCenterRotate=function(e,n){var r,s=this.getCenterInternal();return void 0!==s&&(hI(r=[s[0]-n[0],s[1]-n[1]],e-this.getRotation()),function LDe(i,t){i[0]+=+t[0],i[1]+=+t[1]}(r,n)),r},t.prototype.calculateCenterZoom=function(e,n){var r,s=this.getCenterInternal(),o=this.getResolution();return void 0!==s&&void 0!==o&&(r=[n[0]-e*(n[0]-s[0])/o,n[1]-e*(n[1]-s[1])/o]),r},t.prototype.getViewportSize_=function(e){var n=this.viewportSize_;if(e){var r=n[0],s=n[1];return[Math.abs(r*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(s*Math.cos(e))]}return n},t.prototype.setViewportSize=function(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},t.prototype.getCenter=function(){var e=this.getCenterInternal();return e&&SI(e,this.getProjection())},t.prototype.getCenterInternal=function(){return this.get(Aa.CENTER)},t.prototype.getConstraints=function(){return this.constraints_},t.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},t.prototype.getHints=function(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()},t.prototype.calculateExtent=function(e){return EI(this.calculateExtentInternal(e),this.getProjection())},t.prototype.calculateExtentInternal=function(e){var n=e||this.getViewportSizeMinusPadding_(),r=this.getCenterInternal();fn(r,1);var s=this.getResolution();fn(void 0!==s,2);var o=this.getRotation();return fn(void 0!==o,3),lI(r,s,o,n)},t.prototype.getMaxResolution=function(){return this.maxResolution_},t.prototype.getMinResolution=function(){return this.minResolution_},t.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},t.prototype.setMaxZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))},t.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},t.prototype.setMinZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))},t.prototype.setConstrainResolution=function(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolution=function(){return this.get(Aa.RESOLUTION)},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getResolutionForExtent=function(e,n){return this.getResolutionForExtentInternal(Th(e,this.getProjection()),n)},t.prototype.getResolutionForExtentInternal=function(e,n){var r=n||this.getViewportSizeMinusPadding_(),s=ci(e)/r[0],o=po(e)/r[1];return Math.max(s,o)},t.prototype.getResolutionForValueFunction=function(e){var n=e||2,r=this.getConstrainedResolution(this.maxResolution_),o=Math.log(r/this.minResolution_)/Math.log(n);return function(a){return r/Math.pow(n,a*o)}},t.prototype.getRotation=function(){return this.get(Aa.ROTATION)},t.prototype.getValueForResolutionFunction=function(e){var n=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),o=Math.log(r/this.minResolution_)/n;return function(a){return Math.log(r/a)/n/o}},t.prototype.getViewportSizeMinusPadding_=function(e){var n=this.getViewportSize_(e),r=this.padding_;return r&&(n=[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]),n},t.prototype.getState=function(){var e=this.getProjection(),n=this.getResolution(),r=this.getRotation(),s=this.getCenterInternal(),o=this.padding_;if(o){var a=this.getViewportSizeMinusPadding_();s=BI(s,this.getViewportSize_(),[a[0]/2+o[3],a[1]/2+o[0]],n,r)}return{center:s.slice(0),projection:void 0!==e?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}},t.prototype.getZoom=function(){var e,n=this.getResolution();return void 0!==n&&(e=this.getZoomForResolution(n)),e},t.prototype.getZoomForResolution=function(e){var r,s,n=this.minZoom_||0;if(this.resolutions_){var o=tI(this.resolutions_,e,1);n=o,r=this.resolutions_[o],s=o==this.resolutions_.length-1?2:r/this.resolutions_[o+1]}else r=this.maxResolution_,s=this.zoomFactor_;return n+Math.log(r/e)/Math.log(s)},t.prototype.getResolutionForZoom=function(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=ur(Math.floor(e),0,this.resolutions_.length-2);return this.resolutions_[n]/Math.pow(this.resolutions_[n]/this.resolutions_[n+1],ur(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)},t.prototype.fit=function(e,n){var r;if(fn(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,24),Array.isArray(e))fn(!uI(e),25),r=z6(s=Th(e,this.getProjection()));else if("Circle"===e.getType()){var s;(r=z6(s=Th(e.getExtent(),this.getProjection()))).rotate(this.getRotation(),gm(s))}else{var o=_6();r=o?e.clone().transform(o,this.getProjection()):e}this.fitInternal(r,n)},t.prototype.rotatedExtentForGeometry=function(e){for(var n=this.getRotation(),r=Math.cos(n),s=Math.sin(-n),o=e.getFlatCoordinates(),a=e.getStride(),l=1/0,c=1/0,u=-1/0,d=-1/0,h=0,f=o.length;h<f;h+=a){var p=o[h]*r-o[h+1]*s,m=o[h]*s+o[h+1]*r;l=Math.min(l,p),c=Math.min(c,m),u=Math.max(u,p),d=Math.max(d,m)}return[l,c,u,d]},t.prototype.fitInternal=function(e,n){var r=n||{},s=r.size;s||(s=this.getViewportSizeMinusPadding_());var l,o=void 0!==r.padding?r.padding:[0,0,0,0],a=void 0!==r.nearest&&r.nearest;l=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.getResolutionForZoom(r.maxZoom):0;var c=this.rotatedExtentForGeometry(e),u=this.getResolutionForExtentInternal(c,[s[0]-o[1]-o[3],s[1]-o[0]-o[2]]);u=isNaN(u)?l:Math.max(u,l),u=this.getConstrainedResolution(u,a?0:1);var d=this.getRotation(),h=Math.sin(d),f=Math.cos(d),p=gm(c);p[0]+=(o[1]-o[3])/2*u,p[1]+=(o[0]-o[2])/2*u;var _=this.getConstrainedCenter([p[0]*f-p[1]*h,p[1]*f+p[0]*h],u),v=r.callback?r.callback:wh;void 0!==r.duration?this.animateInternal({resolution:u,center:_,duration:r.duration,easing:r.easing},v):(this.targetResolution_=u,this.targetCenter_=_,this.applyTargetState_(!1,!0),VM(v,!0))},t.prototype.centerOn=function(e,n,r){this.centerOnInternal(bc(e,this.getProjection()),n,r)},t.prototype.centerOnInternal=function(e,n,r){this.setCenterInternal(BI(e,n,r,this.getResolution(),this.getRotation()))},t.prototype.calculateCenterShift=function(e,n,r,s){var o,a=this.padding_;if(a&&e){var l=this.getViewportSizeMinusPadding_(-r),c=BI(e,s,[l[0]/2+a[3],l[1]/2+a[0]],n,r);o=[e[0]-c[0],e[1]-c[1]]}return o},t.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},t.prototype.adjustCenter=function(e){var n=SI(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])},t.prototype.adjustCenterInternal=function(e){var n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])},t.prototype.adjustResolution=function(e,n){var r=n&&bc(n,this.getProjection());this.adjustResolutionInternal(e,r)},t.prototype.adjustResolutionInternal=function(e,n){var r=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,s,r);n&&(this.targetCenter_=this.calculateCenterZoom(o,n)),this.targetResolution_*=e,this.applyTargetState_()},t.prototype.adjustZoom=function(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)},t.prototype.adjustRotation=function(e,n){n&&(n=bc(n,this.getProjection())),this.adjustRotationInternal(e,n)},t.prototype.adjustRotationInternal=function(e,n){var r=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,r);n&&(this.targetCenter_=this.calculateCenterRotate(s,n)),this.targetRotation_+=e,this.applyTargetState_()},t.prototype.setCenter=function(e){this.setCenterInternal(e&&bc(e,this.getProjection()))},t.prototype.setCenterInternal=function(e){this.targetCenter_=e,this.applyTargetState_()},t.prototype.setHint=function(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]},t.prototype.setResolution=function(e){this.targetResolution_=e,this.applyTargetState_()},t.prototype.setRotation=function(e){this.targetRotation_=e,this.applyTargetState_()},t.prototype.setZoom=function(e){this.setResolution(this.getResolutionForZoom(e))},t.prototype.applyTargetState_=function(e,n){var r=this.getAnimating()||this.getInteracting()||n,s=this.constraints_.rotation(this.targetRotation_,r),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,0,o,r),l=this.constraints_.center(this.targetCenter_,a,o,r,this.calculateCenterShift(this.targetCenter_,a,s,o));this.get(Aa.ROTATION)!==s&&this.set(Aa.ROTATION,s),this.get(Aa.RESOLUTION)!==a&&(this.set(Aa.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!l||!this.get(Aa.CENTER)||!MM(this.get(Aa.CENTER),l))&&this.set(Aa.CENTER,l),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0},t.prototype.resolveConstraints=function(e,n,r){var s=void 0!==e?e:200,o=n||0,a=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(a),c=this.constraints_.resolution(this.targetResolution_,o,l),u=this.constraints_.center(this.targetCenter_,c,l,!1,this.calculateCenterShift(this.targetCenter_,c,a,l));if(0===s&&!this.cancelAnchor_)return this.targetResolution_=c,this.targetRotation_=a,this.targetCenter_=u,void this.applyTargetState_();var d=r||(0===s?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==c||this.getRotation()!==a||!this.getCenterInternal()||!MM(this.getCenterInternal(),u))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:a,center:u,resolution:c,duration:s,easing:Em,anchor:d}))},t.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},t.prototype.endInteraction=function(e,n,r){var s=r&&bc(r,this.getProjection());this.endInteractionInternal(e,n,s)},t.prototype.endInteractionInternal=function(e,n,r){this.setHint(1,-1),this.resolveConstraints(e,n,r)},t.prototype.getConstrainedCenter=function(e,n){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),r)},t.prototype.getConstrainedZoom=function(e,n){var r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,n))},t.prototype.getConstrainedResolution=function(e,n){var r=n||0,s=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,r,s)},t}(ul);function VM(i,t){setTimeout(function(){i(t)},0)}function wRe(i){return!(i.sourceCenter&&i.targetCenter&&!MM(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function BI(i,t,e,n,r){var s=Math.cos(-r),o=Math.sin(-r),a=i[0]*s-i[1]*o,l=i[1]*s+i[0]*o;return[(a+=(t[0]/2-e[0])*n)*s-(l+=(e[1]-t[1]/2)*n)*(o=-o),l*s+a*o]}const Iu=vRe;function G6(i){return i[0]>0&&i[1]>0}function Ia(i,t){return Array.isArray(i)?i:(void 0===t?t=[i,i]:(t[0]=i,t[1]=i),t)}var CRe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();function W6(i){i instanceof wM?i.setMapInternal(null):i instanceof RM&&i.getLayers().forEach(W6)}function j6(i,t){if(i instanceof wM)i.setMapInternal(t);else if(i instanceof RM)for(var e=i.getLayers().getArray(),n=0,r=e.length;n<r;++n)j6(e[n],t)}var SRe=function(i){function t(e){var n=i.call(this)||this,r=function ERe(i){var t=null;void 0!==i.keyboardEventTarget&&(t="string"==typeof i.keyboardEventTarget?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);var r,s,o,e={},n=i.layers&&"function"==typeof i.layers.getLayers?i.layers:new RM({layers:i.layers});return e.layergroup=n,e.target=i.target,e.view=i.view instanceof Iu?i.view:new Iu,void 0!==i.controls&&(Array.isArray(i.controls)?r=new $o(i.controls.slice()):(fn("function"==typeof i.controls.getArray,47),r=i.controls)),void 0!==i.interactions&&(Array.isArray(i.interactions)?s=new $o(i.interactions.slice()):(fn("function"==typeof i.interactions.getArray,48),s=i.interactions)),void 0!==i.overlays?Array.isArray(i.overlays)?o=new $o(i.overlays.slice()):(fn("function"==typeof i.overlays.getArray,49),o=i.overlays):o=new $o,{controls:r,interactions:s,keyboardEventTarget:t,overlays:o,values:e}}(e);n.loaded_=!0,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:E8,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=[1,0,0,1,0,0],n.pixelToCoordinateTransform_=[1,0,0,1,0,0],n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=e.moveTolerance,n.keyboardEventTarget_=r.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=r.controls||new $o,n.interactions=r.interactions||new $o,n.overlays_=r.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new vAe(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener("layergroup",n.handleLayerGroupChanged_),n.addChangeListener("view",n.handleViewChanged_),n.addChangeListener("size",n.handleSizeChanged_),n.addChangeListener("target",n.handleTargetChanged_),n.setProperties(r.values);var s=n;return e.view&&!(e.view instanceof Iu)&&e.view.then(function(o){s.setView(new Iu(o))}),n.controls.addEventListener("add",function(o){o.element.setMap(this)}.bind(n)),n.controls.addEventListener("remove",function(o){o.element.setMap(null)}.bind(n)),n.interactions.addEventListener("add",function(o){o.element.setMap(this)}.bind(n)),n.interactions.addEventListener("remove",function(o){o.element.setMap(null)}.bind(n)),n.overlays_.addEventListener("add",function(o){this.addOverlayInternal_(o.element)}.bind(n)),n.overlays_.addEventListener("remove",function(o){var l=o.element.getId();void 0!==l&&delete this.overlayIdIndex_[l.toString()],o.element.setMap(null)}.bind(n)),n.controls.forEach(function(o){o.setMap(this)}.bind(n)),n.interactions.forEach(function(o){o.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return CRe(t,i),t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(e){this.getControls().push(e)},t.prototype.addInteraction=function(e){this.getInteractions().push(e)},t.prototype.addLayer=function(e){this.getLayerGroup().getLayers().push(e)},t.prototype.handleLayerAdd_=function(e){j6(e.layer,this)},t.prototype.addOverlay=function(e){this.getOverlays().push(e)},t.prototype.addOverlayInternal_=function(e){var n=e.getId();void 0!==n&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)},t.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),i.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(e,n,r){if(this.frameState_&&this.renderer_){var s=this.getCoordinateFromPixelInternal(e);return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,!1!==r.checkWrapped,n,null,void 0!==r.layerFilter?r.layerFilter:dm,null)}},t.prototype.getFeaturesAtPixel=function(e,n){var r=[];return this.forEachFeatureAtPixel(e,function(s){r.push(s)},n),r},t.prototype.getAllLayers=function(){var e=[];return function n(r){r.forEach(function(s){s instanceof RM?n(s.getLayers()):e.push(s)})}(this.getLayers()),e},t.prototype.forEachLayerAtPixel=function(e,n,r){if(this.frameState_&&this.renderer_){var s=r||{};return this.renderer_.forEachLayerAtPixel(e,this.frameState_,void 0!==s.hitTolerance?s.hitTolerance:0,n,s.layerFilter||dm)}},t.prototype.hasFeatureAtPixel=function(e,n){if(!this.frameState_||!this.renderer_)return!1;var r=this.getCoordinateFromPixelInternal(e);return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,!1!==n.checkWrapped,void 0!==n.layerFilter?n.layerFilter:dm,null)},t.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},t.prototype.getEventCoordinateInternal=function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))},t.prototype.getEventPixel=function(e){var n=this.viewport_.getBoundingClientRect(),r="changedTouches"in e?e.changedTouches[0]:e;return[r.clientX-n.left,r.clientY-n.top]},t.prototype.getTarget=function(){return this.get("target")},t.prototype.getTargetElement=function(){var e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null},t.prototype.getCoordinateFromPixel=function(e){return SI(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(e){var n=this.frameState_;return n?cr(n.pixelToCoordinateTransform,e.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(e){var n=this.overlayIdIndex_[e.toString()];return void 0!==n?n:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get("layergroup")},t.prototype.setLayers=function(e){var n=this.getLayerGroup();if(e instanceof $o)n.setLayers(e);else{var r=n.getLayers();r.clear(),r.extend(e)}},t.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},t.prototype.getLoadingOrNotReady=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),n=0,r=e.length;n<r;++n){var s=e[n];if(s.visible){var o=s.layer.getRenderer();if(o&&!o.ready)return!0;var a=s.layer.getSource();if(a&&a.loading)return!0}}return!1},t.prototype.getPixelFromCoordinate=function(e){var n=bc(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},t.prototype.getPixelFromCoordinateInternal=function(e){var n=this.frameState_;return n?cr(n.coordinateToPixelTransform,e.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get("size")},t.prototype.getView=function(){return this.get("view")},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getOwnerDocument=function(){var e=this.getTargetElement();return e?e.ownerDocument:document},t.prototype.getTilePriority=function(e,n,r,s){return function yAe(i,t,e,n,r){if(!i||!(e in i.wantedTiles)||!i.wantedTiles[e][t.getKey()])return IM;var s=i.viewState.center,o=n[0]-s[0],a=n[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}(this.frameState_,e,n,r,s)},t.prototype.handleBrowserEvent=function(e,n){var s=new Du(n||e.type,this,e);this.handleMapBrowserEvent(s)},t.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){var n=e.originalEvent,r=n.type;if("pointerdown"===r||"wheel"===r||"keydown"===r){var s=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():s,a=n.target;if(this.overlayContainerStopEvent_.contains(a)||!(o===s?s.documentElement:o).contains(a))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e))for(var l=this.getInteractions().getArray().slice(),c=l.length-1;c>=0;c--){var u=l[c];if(u.getMap()===this&&u.getActive()&&this.getTargetElement()&&(!u.handleEvent(e)||e.propagationStopped))break}}},t.prototype.handlePostRender=function(){var e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var r=this.maxTilesLoading_,s=r;if(e){var o=e.viewHints;if(o[0]||o[1]){var a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new wm("loadend",this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new wm("loadstart",this,e))));for(var l=this.postRenderFunctions_,c=0,u=l.length;c<u;++c)l[c](this,e);l.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var e=0,n=this.targetChangeHandlerKeys_.length;e<n;++e)bi(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,pI(this.viewport_)}var r=this.getTargetElement();if(r){for(var s in r.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new fAe(this,this.moveTolerance_),Bi)this.mapBrowserEventHandler_.addEventListener(Bi[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!T8&&{passive:!1});var o=this.getOwnerDocument().defaultView,a=this.keyboardEventTarget_?this.keyboardEventTarget_:r;this.targetChangeHandlerKeys_=[Cn(a,"keydown",this.handleBrowserEvent,this),Cn(a,"keypress",this.handleBrowserEvent,this),Cn(o,"resize",this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(bi(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(bi(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Cn(e,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Cn(e,"change",this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(bi),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Tu("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Cn(e,"propertychange",this.render,this),Cn(e,"change",this.render,this),Cn(e,"addlayer",this.handleLayerAdd_,this),Cn(e,"removelayer",this.handleLayerRemove_,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),n=0,r=e.length;n<r;++n){var s=e[n].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(e){return this.getControls().remove(e)},t.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},t.prototype.removeLayer=function(e){return this.getLayerGroup().getLayers().remove(e)},t.prototype.handleLayerRemove_=function(e){W6(e.layer)},t.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},t.prototype.renderFrame_=function(e){var n=this,r=this.getSize(),s=this.getView(),o=this.frameState_,a=null;if(void 0!==r&&G6(r)&&s&&s.isDef()){var l=s.getHints(this.frameState_?this.frameState_.viewHints:void 0),c=s.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:lI(c.center,c.resolution,c.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:c,viewHints:l,wantedTiles:{},mapId:Rn(this),renderTargets:{}},c.nextCenter&&c.nextResolution){var u=isNaN(c.nextRotation)?c.rotation:c.nextRotation;a.nextExtent=lI(c.nextCenter,c.nextResolution,u,r)}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),o&&(!this.previousExtent_||!uI(this.previousExtent_)&&!kv(a.extent,this.previousExtent_))&&(this.dispatchEvent(new wm("movestart",this,o)),this.previousExtent_=pm(this.previousExtent_)),this.previousExtent_&&!a.viewHints[0]&&!a.viewHints[1]&&!kv(a.extent,this.previousExtent_)&&(this.dispatchEvent(new wm("moveend",this,a)),R8(a.extent,this.previousExtent_))),this.dispatchEvent(new wm("postrender",this,a)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},t.prototype.setLayerGroup=function(e){var n=this.getLayerGroup();n&&this.handleLayerRemove_(new Tu("removelayer",n)),this.set("layergroup",e)},t.prototype.setSize=function(e){this.set("size",e)},t.prototype.setTarget=function(e){this.set("target",e)},t.prototype.setView=function(e){if(!e||e instanceof Iu)this.set("view",e);else{this.set("view",new Iu);var n=this;e.then(function(r){n.setView(new Iu(r))})}},t.prototype.updateSize=function(){var e=this.getTargetElement(),n=void 0;if(e){var r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&!G6(n=[s,o])&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(n),this.updateViewportSize_()},t.prototype.updateViewportSize_=function(){var e=this.getView();if(e){var n=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(n=[parseInt(r.width,10),parseInt(r.height,10)]),e.setViewportSize(n)}},t}(ul);const TRe=SRe;var DRe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),ARe=function(i){function t(e){var n=i.call(this)||this,r=e.element;return r&&!e.target&&!r.style.pointerEvents&&(r.style.pointerEvents="auto"),n.element=r||null,n.target_=null,n.map_=null,n.listenerKeys=[],e.render&&(n.render=e.render),e.target&&n.setTarget(e.target),n}return DRe(t,i),t.prototype.disposeInternal=function(){pI(this.element),i.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(e){this.map_&&pI(this.element);for(var n=0,r=this.listenerKeys.length;n<r;++n)bi(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==wh&&this.listenerKeys.push(Cn(e,"postrender",this.render,this)),e.render())},t.prototype.render=function(e){},t.prototype.setTarget=function(e){this.target_="string"==typeof e?document.getElementById(e):e},t}(ul);const VI=ARe;var RRe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),IRe=function(i){function t(e){var n=this,r=e||{};(n=i.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).ulElement_=document.createElement("ul"),n.collapsed_=void 0===r.collapsed||r.collapsed,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=void 0!==r.collapsible,n.collapsible_=void 0===r.collapsible||r.collapsible,n.collapsible_||(n.collapsed_=!1);var s=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",a=void 0!==r.expandClassName?r.expandClassName:s+"-expand",l=void 0!==r.collapseLabel?r.collapseLabel:"\u203a",c=void 0!==r.collapseClassName?r.collapseClassName:s+"-collapse";"string"==typeof l?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=l,n.collapseLabel_.className=c):n.collapseLabel_=l;var u=void 0!==r.label?r.label:"i";"string"==typeof u?(n.label_=document.createElement("span"),n.label_.textContent=u,n.label_.className=a):n.label_=u;var d=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=o,n.toggleButton_.appendChild(d),n.toggleButton_.addEventListener("click",n.handleClick_.bind(n),!1);var f=n.element;return f.className=s+" "+SM+" "+fI+(n.collapsed_&&n.collapsible_?" "+X8:"")+(n.collapsible_?"":" ol-uncollapsible"),f.appendChild(n.toggleButton_),f.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return RRe(t,i),t.prototype.collectSourceAttributions_=function(e){for(var n={},r=[],s=!0,o=e.layerStatesArray,a=0,l=o.length;a<l;++a){var c=o[a];if(xM(c,e.viewState)){var u=c.layer.getSource();if(u){var d=u.getAttributions();if(d){var h=d(e);if(h)if(s=s&&!1!==u.getAttributionsCollapsible(),Array.isArray(h))for(var f=0,p=h.length;f<p;++f)h[f]in n||(r.push(h[f]),n[h[f]]=!0);else h in n||(r.push(h),n[h]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(s),r},t.prototype.updateElement_=function(e){if(e){var n=this.collectSourceAttributions_(e),r=n.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!xh(n,this.renderedAttributions_)){!function YDe(i){for(;i.lastChild;)i.removeChild(i.lastChild)}(this.ulElement_);for(var s=0,o=n.length;s<o;++s){var a=document.createElement("li");a.innerHTML=n[s],this.ulElement_.appendChild(a)}this.renderedAttributions_=n}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},t.prototype.handleToggle_=function(){this.element.classList.toggle(X8),this.collapsed_?J8(this.collapseLabel_,this.label_):J8(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.render=function(e){this.updateElement_(e.frameState)},t}(VI);const kRe=IRe;var ORe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),PRe=function(i){function t(e){var n=this,r=e||{};n=i.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var s=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"\u21e7",a=void 0!==r.compassClassName?r.compassClassName:"ol-compass";n.label_=null,"string"==typeof o?(n.label_=document.createElement("span"),n.label_.className=a,n.label_.textContent=o):(n.label_=o,n.label_.classList.add(a));var l=r.tipLabel?r.tipLabel:"Reset rotation",c=document.createElement("button");c.className=s+"-reset",c.setAttribute("type","button"),c.title=l,c.appendChild(n.label_),c.addEventListener("click",n.handleClick_.bind(n),!1);var d=n.element;return d.className=s+" "+SM+" "+fI,d.appendChild(c),n.callResetNorth_=r.resetNorth?r.resetNorth:void 0,n.duration_=void 0!==r.duration?r.duration:250,n.autoHide_=void 0===r.autoHide||r.autoHide,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(CM),n}return ORe(t,i),t.prototype.handleClick_=function(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},t.prototype.resetNorth_=function(){var n=this.getMap().getView();if(n){var r=n.getRotation();void 0!==r&&(this.duration_>0&&r%(2*Math.PI)!=0?n.animate({rotation:0,duration:this.duration_,easing:Em}):n.setRotation(0))}},t.prototype.render=function(e){var n=e.frameState;if(n){var r=n.viewState.rotation;if(r!=this.rotation_){var s="rotate("+r+"rad)";if(this.autoHide_){var o=this.element.classList.contains(CM);o||0!==r?o&&0!==r&&this.element.classList.remove(CM):this.element.classList.add(CM)}this.label_.style.transform=s}this.rotation_=r}},t}(VI);const LRe=PRe;var FRe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),NRe=function(i){function t(e){var n=this,r=e||{};n=i.call(this,{element:document.createElement("div"),target:r.target})||this;var s=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,a=void 0!==r.zoomInClassName?r.zoomInClassName:s+"-in",l=void 0!==r.zoomOutClassName?r.zoomOutClassName:s+"-out",c=void 0!==r.zoomInLabel?r.zoomInLabel:"+",u=void 0!==r.zoomOutLabel?r.zoomOutLabel:"\u2013",d=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",h=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=a,f.setAttribute("type","button"),f.title=d,f.appendChild("string"==typeof c?document.createTextNode(c):c),f.addEventListener("click",n.handleClick_.bind(n,o),!1);var p=document.createElement("button");p.className=l,p.setAttribute("type","button"),p.title=h,p.appendChild("string"==typeof u?document.createTextNode(u):u),p.addEventListener("click",n.handleClick_.bind(n,-o),!1);var g=n.element;return g.className=s+" "+SM+" "+fI,g.appendChild(f),g.appendChild(p),n.duration_=void 0!==r.duration?r.duration:250,n}return FRe(t,i),t.prototype.handleClick_=function(e,n){n.preventDefault(),this.zoomByDelta_(e)},t.prototype.zoomByDelta_=function(e){var r=this.getMap().getView();if(r){var s=r.getZoom();if(void 0!==s){var o=r.getConstrainedZoom(s+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:o,duration:this.duration_,easing:Em})):r.setZoom(o)}}},t}(VI);const BRe=NRe;var HRe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),URe=function(i){function t(e){var n=i.call(this)||this;return e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return HRe(t,i),t.prototype.getActive=function(){return this.get("active")},t.prototype.getMap=function(){return this.map_},t.prototype.handleEvent=function(e){return!0},t.prototype.setActive=function(e){this.set("active",e)},t.prototype.setMap=function(e){this.map_=e},t}(ul);function HI(i,t,e,n){var r=i.getZoom();if(void 0!==r){var s=i.getConstrainedZoom(r+t),o=i.getResolutionForZoom(s);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:e,duration:void 0!==n?n:250,easing:Em})}}const Gv=URe;var GRe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),WRe=function(i){function t(e){var n=i.call(this)||this,r=e||{};return n.delta_=r.delta?r.delta:1,n.duration_=void 0!==r.duration?r.duration:250,n}return GRe(t,i),t.prototype.handleEvent=function(e){var n=!1;if(e.type==Bi.DBLCLICK){var r=e.originalEvent,o=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_;HI(e.map.getView(),a,o,this.duration_),r.preventDefault(),n=!0}return!n},t}(Gv);const jRe=WRe;var $Re=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),qRe=function(i){function t(e){var n=this,r=e||{};return n=i.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return $Re(t,i),t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(e){return!1},t.prototype.handleDragEvent=function(e){},t.prototype.handleEvent=function(e){if(!e.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Bi.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Bi.POINTERUP){var r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==Bi.POINTERDOWN){var s=this.handleDownEvent(e);this.handlingDownUpSequence=s,n=this.stopDown(s)}else e.type==Bi.POINTERMOVE&&this.handleMoveEvent(e);return!n},t.prototype.handleMoveEvent=function(e){},t.prototype.handleUpEvent=function(e){return!1},t.prototype.stopDown=function(e){return e},t.prototype.updateTrackedPointers_=function(e){e.activePointers&&(this.targetPointers=e.activePointers)},t}(Gv);function UI(i){for(var t=i.length,e=0,n=0,r=0;r<t;r++)e+=i[r].clientX,n+=i[r].clientY;return[e/t,n/t]}const Wv=qRe;function zI(i){var t=arguments;return function(e){for(var n=!0,r=0,s=t.length;r<s&&(n=n&&t[r](e));++r);return n}}var YRe=function(i){var t=i.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},q6=function(i){return!i.map.getTargetElement().hasAttribute("tabindex")||function(i){var t=i.map.getTargetElement(),e=i.map.getOwnerDocument().activeElement;return t.contains(e)}(i)},KRe=dm,Y6=function(i){var t=i.originalEvent;return 0==t.button&&!(aDe&&lDe&&t.ctrlKey)},X6=function(i){var t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},ZRe=function(i){var t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},K6=function(i){var t=i.originalEvent,e=t.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e&&!t.target.isContentEditable},GI=function(i){var t=i.originalEvent;return fn(void 0!==t,56),"mouse"==t.pointerType},QRe=function(i){var t=i.originalEvent;return fn(void 0!==t,56),t.isPrimary&&0===t.button},JRe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),eIe=function(i){function t(e){var n=i.call(this,{stopDown:aM})||this,r=e||{};n.kinetic_=r.kinetic,n.lastCentroid=null,n.panning_=!1;var s=r.condition?r.condition:zI(X6,QRe);return n.condition_=r.onFocusOnly?zI(q6,s):s,n.noKinetic_=!1,n}return JRe(t,i),t.prototype.handleDragEvent=function(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,r=UI(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();(function BDe(i,t){i[0]*=t,i[1]*=t})(s,a.getResolution()),hI(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()},t.prototype.handleUpEvent=function(e){var n=e.map,r=n.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var s=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),a=r.getCenterInternal(),l=n.getPixelFromCoordinateInternal(a),c=n.getCoordinateFromPixelInternal([l[0]-s*Math.cos(o),l[1]-s*Math.sin(o)]);r.animateInternal({center:r.getConstrainedCenter(c),duration:500,easing:Em})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},t.prototype.handleDownEvent=function(e){if(this.targetPointers.length>0&&this.condition_(e)){var r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},t}(Wv);const tIe=eIe;var nIe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),iIe=function(i){function t(e){var n=this,r=e||{};return(n=i.call(this,{stopDown:aM})||this).condition_=r.condition?r.condition:YRe,n.lastAngle_=void 0,n.duration_=void 0!==r.duration?r.duration:250,n}return nIe(t,i),t.prototype.handleDragEvent=function(e){if(GI(e)){var n=e.map,r=n.getView();if(r.getConstraints().rotation!==AI){var s=n.getSize(),o=e.pixel,a=Math.atan2(s[1]/2-o[1],o[0]-s[0]/2);void 0!==this.lastAngle_&&r.adjustRotationInternal(-(a-this.lastAngle_)),this.lastAngle_=a}}},t.prototype.handleUpEvent=function(e){return!GI(e)||(e.map.getView().endInteraction(this.duration_),!1)},t.prototype.handleDownEvent=function(e){return!(!GI(e)||!Y6(e)||!this.condition_(e)||(e.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},t}(Wv);const rIe=iIe;var sIe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),oIe=function(i){function t(e){var n=i.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return sIe(t,i),t.prototype.disposeInternal=function(){this.setMap(null)},t.prototype.render_=function(){var e=this.startPixel_,n=this.endPixel_,r="px",s=this.element_.style;s.left=Math.min(e[0],n[0])+r,s.top=Math.min(e[1],n[1])+r,s.width=Math.abs(n[0]-e[0])+r,s.height=Math.abs(n[1]-e[1])+r},t.prototype.setMap=function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},t.prototype.setPixels=function(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},t.prototype.createOrUpdateGeometry=function(){var e=this.startPixel_,n=this.endPixel_,s=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new mRe([s])},t.prototype.getGeometry=function(){return this.geometry_},t}(eI);const aIe=oIe;var Z6=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),WI=function(i){function t(e,n,r){var s=i.call(this,e)||this;return s.coordinate=n,s.mapBrowserEvent=r,s}return Z6(t,i),t}(_c),lIe=function(i){function t(e){var n=i.call(this)||this,r=e||{};return n.box_=new aIe(r.className||"ol-dragbox"),n.minArea_=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(n.onBoxEnd=r.onBoxEnd),n.startPixel_=null,n.condition_=r.condition?r.condition:Y6,n.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:n.defaultBoxEndCondition,n}return Z6(t,i),t.prototype.defaultBoxEndCondition=function(e,n,r){var s=r[0]-n[0],o=r[1]-n[1];return s*s+o*o>=this.minArea_},t.prototype.getGeometry=function(){return this.box_.getGeometry()},t.prototype.handleDragEvent=function(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new WI("boxdrag",e.coordinate,e))},t.prototype.handleUpEvent=function(e){this.box_.setMap(null);var n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new WI(n?"boxend":"boxcancel",e.coordinate,e)),!1},t.prototype.handleDownEvent=function(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new WI("boxstart",e.coordinate,e)),!0)},t.prototype.onBoxEnd=function(e){},t}(Wv);const cIe=lIe;var uIe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),dIe=function(i){function t(e){var n=this,r=e||{};return(n=i.call(this,{condition:r.condition?r.condition:ZRe,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).duration_=void 0!==r.duration?r.duration:200,n.out_=void 0!==r.out&&r.out,n}return uIe(t,i),t.prototype.onBoxEnd=function(e){var r=this.getMap().getView(),s=this.getGeometry();if(this.out_){var o=r.rotatedExtentForGeometry(s),a=r.getResolutionForExtentInternal(o),l=r.getResolution()/a;(s=s.clone()).scale(l*l)}r.fitInternal(s,{duration:this.duration_,easing:Em})},t}(cIe);const hIe=dIe;var fIe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),pIe=function(i){function t(e){var n=i.call(this)||this,r=e||{};return n.defaultCondition_=function(s){return X6(s)&&K6(s)},n.condition_=void 0!==r.condition?r.condition:n.defaultCondition_,n.duration_=void 0!==r.duration?r.duration:100,n.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128,n}return fIe(t,i),t.prototype.handleEvent=function(e){var n=!1;if("keydown"==e.type){var r=e.originalEvent,s=r.keyCode;if(this.condition_(e)&&(40==s||37==s||39==s||38==s)){var a=e.map.getView(),l=a.getResolution()*this.pixelDelta_,c=0,u=0;40==s?u=-l:37==s?c=-l:39==s?c=l:u=l;var d=[c,u];hI(d,a.getRotation()),function zRe(i,t,e){var n=i.getCenterInternal();n&&i.animateInternal({duration:void 0!==e?e:250,easing:qAe,center:i.getConstrainedCenter([n[0]+t[0],n[1]+t[1]])})}(a,d,this.duration_),r.preventDefault(),n=!0}}return!n},t}(Gv);const mIe=pIe;var gIe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),_Ie=function(i){function t(e){var n=i.call(this)||this,r=e||{};return n.condition_=r.condition?r.condition:K6,n.delta_=r.delta?r.delta:1,n.duration_=void 0!==r.duration?r.duration:100,n}return gIe(t,i),t.prototype.handleEvent=function(e){var n=!1;if("keydown"==e.type||"keypress"==e.type){var r=e.originalEvent,s=r.charCode;if(this.condition_(e)&&(s=="+".charCodeAt(0)||s=="-".charCodeAt(0))){var o=e.map,a=s=="+".charCodeAt(0)?this.delta_:-this.delta_;HI(o.getView(),a,void 0,this.duration_),r.preventDefault(),n=!0}}return!n},t}(Gv);const vIe=_Ie;var yIe=function(){function i(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return i.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},i.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},i.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var r=this.points_[e+2]-this.points_[n+2];if(r<1e3/60)return!1;var s=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_},i.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},i.prototype.getAngle=function(){return this.angle_},i}();const bIe=yIe;var xIe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),wIe=function(i){function t(e){var n=this,r=e||{};(n=i.call(this,r)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==r.maxDelta?r.maxDelta:1,n.duration_=void 0!==r.duration?r.duration:250,n.timeout_=void 0!==r.timeout?r.timeout:80,n.useAnchor_=void 0===r.useAnchor||r.useAnchor,n.constrainResolution_=void 0!==r.constrainResolution&&r.constrainResolution;var s=r.condition?r.condition:KRe;return n.condition_=r.onFocusOnly?zI(q6,s):s,n.lastAnchor_=null,n.startTime_=void 0,n.mode_=void 0,n.trackpadEventGap_=400,n.deltaPerZoom_=300,n}return xIe(t,i),t.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},t.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;if("wheel"!==e.type)return!0;var o,r=e.map,s=e.originalEvent;if(s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),"wheel"==e.type&&(o=s.deltaY,sDe&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=E8),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)),0===o)return!1;this.lastDelta_=o;var a=Date.now();void 0===this.startTime_&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");var l=r.getView();if("trackpad"===this.mode_&&!l.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=o;var c=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),c),!1},t.prototype.handleWheelZoom_=function(e){var n=e.getView();n.getAnimating()&&n.cancelAnimations();var r=-ur(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),HI(n,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},t.prototype.setMouseAnchor=function(e){this.useAnchor_=e,e||(this.lastAnchor_=null)},t}(Gv);const MIe=wIe;var CIe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),SIe=function(i){function t(e){var n=this,r=e||{},s=r;return s.stopDown||(s.stopDown=aM),(n=i.call(this,s)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==r.threshold?r.threshold:.3,n.duration_=void 0!==r.duration?r.duration:250,n}return CIe(t,i),t.prototype.handleDragEvent=function(e){var n=0,r=this.targetPointers[0],s=this.targetPointers[1],o=Math.atan2(s.clientY-r.clientY,s.clientX-r.clientX);if(void 0!==this.lastAngle_){var a=o-this.lastAngle_;this.rotationDelta_+=a,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=a}this.lastAngle_=o;var l=e.map,c=l.getView();if(c.getConstraints().rotation!==AI){var u=l.getViewport().getBoundingClientRect(),d=UI(this.targetPointers);d[0]-=u.left,d[1]-=u.top,this.anchor_=l.getCoordinateFromPixelInternal(d),this.rotating_&&(l.render(),c.adjustRotationInternal(n,this.anchor_))}},t.prototype.handleUpEvent=function(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))},t.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},t}(Wv);const EIe=SIe;var TIe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),DIe=function(i){function t(e){var n=this,r=e||{},s=r;return s.stopDown||(s.stopDown=aM),(n=i.call(this,s)||this).anchor_=null,n.duration_=void 0!==r.duration?r.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return TIe(t,i),t.prototype.handleDragEvent=function(e){var n=1,r=this.targetPointers[0],s=this.targetPointers[1],o=r.clientX-s.clientX,a=r.clientY-s.clientY,l=Math.sqrt(o*o+a*a);void 0!==this.lastDistance_&&(n=this.lastDistance_/l),this.lastDistance_=l;var c=e.map,u=c.getView();1!=n&&(this.lastScaleDelta_=n);var d=c.getViewport().getBoundingClientRect(),h=UI(this.targetPointers);h[0]-=d.left,h[1]-=d.top,this.anchor_=c.getCoordinateFromPixelInternal(h),c.render(),u.adjustResolutionInternal(n,this.anchor_)},t.prototype.handleUpEvent=function(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),1))},t.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},t}(Wv);const AIe=DIe;var IIe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),kIe=function(i){function t(e){return(e=Lr({},e)).controls||(e.controls=function VRe(i){var t=i||{},e=new $o;return(void 0===t.zoom||t.zoom)&&e.push(new BRe(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new LRe(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new kRe(t.attributionOptions)),e}()),e.interactions||(e.interactions=function RIe(i){var t=i||{},e=new $o,n=new bIe(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new rIe),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new jRe({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new tIe({onFocusOnly:t.onFocusOnly,kinetic:n})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new EIe),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new AIe({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new mIe),e.push(new vIe({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new MIe({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new hIe({duration:t.zoomDuration})),e}({onFocusOnly:!0})),i.call(this,e)||this}return IIe(t,i),t.prototype.createRenderer=function(){return new rAe(this)},t}(TRe);const OIe=kIe;var PIe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),LIe=function(i){function t(e,n,r){var s=i.call(this)||this,o=r||{};return s.tileCoord=e,s.state=n,s.interimTile=null,s.key="",s.transition_=void 0===o.transition?250:o.transition,s.transitionStarts_={},s.interpolate=!!o.interpolate,s}return PIe(t,i),t.prototype.changed=function(){this.dispatchEvent("change")},t.prototype.release=function(){},t.prototype.getKey=function(){return this.key+"/"+this.tileCoord},t.prototype.getInterimTile=function(){if(!this.interimTile)return this;var e=this.interimTile;do{if(2==e.getState())return this.transition_=0,e;e=e.interimTile}while(e);return this},t.prototype.refreshInterimChain=function(){if(this.interimTile){var e=this.interimTile,n=this;do{if(2==e.getState()){e.interimTile=null;break}1==e.getState()?n=e:0==e.getState()?n.interimTile=e.interimTile:n=e,e=n.interimTile}while(e)}},t.prototype.getTileCoord=function(){return this.tileCoord},t.prototype.getState=function(){return this.state},t.prototype.setState=function(e){if(3!==this.state&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()},t.prototype.load=function(){hn()},t.prototype.getAlpha=function(e,n){if(!this.transition_)return 1;var r=this.transitionStarts_[e];if(r){if(-1===r)return 1}else this.transitionStarts_[e]=r=n;var s=n-r+1e3/60;return s>=this.transition_?1:x6(s/this.transition_)},t.prototype.inTransition=function(e){return!!this.transition_&&-1!==this.transitionStarts_[e]},t.prototype.endTransition=function(e){this.transition_&&(this.transitionStarts_[e]=-1)},t}(hm);const Q6=LIe;var FIe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),NIe=function(i){function t(e,n,r,s){var o=i.call(this)||this;return o.extent=e,o.pixelRatio_=r,o.resolution=n,o.state=s,o}return FIe(t,i),t.prototype.changed=function(){this.dispatchEvent("change")},t.prototype.getExtent=function(){return this.extent},t.prototype.getImage=function(){return hn()},t.prototype.getPixelRatio=function(){return this.pixelRatio_},t.prototype.getResolution=function(){return this.resolution},t.prototype.getState=function(){return this.state},t.prototype.load=function(){hn()},t}(hm);const BIe=NIe;var VIe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();function $I(i,t,e){var n=i,r=!0,s=!1,o=!1,a=[lM(n,"load",function(){o=!0,s||t()})];return n.src&&cDe?(s=!0,n.decode().then(function(){r&&t()}).catch(function(l){r&&(o?t():e())})):a.push(lM(n,"error",e)),function(){r=!1,a.forEach(bi)}}!function(i){function t(e,n,r,s,o,a){var l=i.call(this,e,n,r,0)||this;return l.src_=s,l.image_=new Image,null!==o&&(l.image_.crossOrigin=o),l.unlisten_=null,l.state=0,l.imageLoadFunction_=a,l}VIe(t,i),t.prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=po(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},t.prototype.load=function(){(0==this.state||3==this.state)&&(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=$I(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.setImage=function(e){this.image_=e,this.resolution=po(this.extent)/this.image_.height},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(BIe);var HIe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),UIe=function(i){function t(e,n,r,s,o,a){var l=i.call(this,e,n,a)||this;return l.crossOrigin_=s,l.src_=r,l.key=r,l.image_=new Image,null!==s&&(l.image_.crossOrigin=s),l.unlisten_=null,l.tileLoadFunction_=o,l}return HIe(t,i),t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(e){this.image_=e,this.state=2,this.unlistenImage_(),this.changed()},t.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.image_=function zIe(){var i=mo(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}(),this.changed()},t.prototype.handleImageLoad_=function(){var e=this.image_;this.state=e.naturalWidth&&e.naturalHeight?2:4,this.unlistenImage_(),this.changed()},t.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=$I(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(Q6);const J6=UIe;var jIe=function(){function i(t,e,n,r,s,o){this.sourceProj_=t,this.targetProj_=e;var a={},l=Uv(this.targetProj_,this.sourceProj_);this.transformInv_=function(y){var b=y[0]+"/"+y[1];return a[b]||(a[b]=l(y)),a[b]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ci(r)==ci(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ci(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ci(this.targetProj_.getExtent()):null;var c=Mh(n),u=mM(n),d=pM(n),h=fM(n),f=this.transformInv_(c),p=this.transformInv_(u),m=this.transformInv_(d),g=this.transformInv_(h),_=10+(o?Math.max(0,Math.ceil(SDe(hM(n)/(o*o*256*256)))):0);if(this.addQuad_(c,u,d,h,f,p,m,g,_),this.wrapsXInSource_){var v=1/0;this.triangles_.forEach(function(y,b,x){v=Math.min(v,y.source[0][0],y.source[1][0],y.source[2][0])}),this.triangles_.forEach(function(y){if(Math.max(y.source[0][0],y.source[1][0],y.source[2][0])-v>this.sourceWorldWidth_/2){var b=[[y.source[0][0],y.source[0][1]],[y.source[1][0],y.source[1][1]],[y.source[2][0],y.source[2][1]]];b[0][0]-v>this.sourceWorldWidth_/2&&(b[0][0]-=this.sourceWorldWidth_),b[1][0]-v>this.sourceWorldWidth_/2&&(b[1][0]-=this.sourceWorldWidth_),b[2][0]-v>this.sourceWorldWidth_/2&&(b[2][0]-=this.sourceWorldWidth_);var x=Math.min(b[0][0],b[1][0],b[2][0]);Math.max(b[0][0],b[1][0],b[2][0])-x<this.sourceWorldWidth_/2&&(y.source=b)}}.bind(this))}a={}}return i.prototype.addTriangle_=function(t,e,n,r,s,o){this.triangles_.push({source:[r,s,o],target:[t,e,n]})},i.prototype.addQuad_=function(t,e,n,r,s,o,a,l,c){var u=A8([s,o,a,l]),d=this.sourceWorldWidth_?ci(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&d>.5&&d<1,p=!1;if(c>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(p=ci(A8([t,e,n,r]))/this.targetWorldWidth_>.25||p),!f&&this.sourceProj_.isGlobal()&&d&&(p=d>.25||p)),!(!p&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3]))||Ns(u,this.maxSourceExtent_)){var _=0;if(!(p||isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])))if(c>0)p=!0;else if(1!=(_=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(l[0])&&isFinite(l[1])?0:1))&&2!=_&&4!=_&&8!=_)return;if(c>0){if(!p){var y=this.transformInv_([(t[0]+n[0])/2,(t[1]+n[1])/2]),b=void 0;b=f?(ym(s[0],h)+ym(a[0],h))/2-ym(y[0],h):(s[0]+a[0])/2-y[0];var w=(s[1]+a[1])/2-y[1];p=b*b+w*w>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var R=[(e[0]+n[0])/2,(e[1]+n[1])/2],F=this.transformInv_(R),N=[(r[0]+t[0])/2,(r[1]+t[1])/2],S=this.transformInv_(N);this.addQuad_(t,e,R,N,s,o,F,S,c-1),this.addQuad_(N,R,n,r,S,F,a,l,c-1)}else{var L=[(t[0]+e[0])/2,(t[1]+e[1])/2],Y=this.transformInv_(L),I=[(n[0]+r[0])/2,(n[1]+r[1])/2],z=this.transformInv_(I);this.addQuad_(t,L,I,r,s,Y,z,l,c-1),this.addQuad_(L,e,n,I,Y,o,a,z,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&_)&&this.addTriangle_(t,n,r,s,a,l),0==(14&_)&&this.addTriangle_(t,n,e,s,a,o),_&&(0==(13&_)&&this.addTriangle_(e,r,t,o,l,s),0==(7&_)&&this.addTriangle_(e,r,n,o,l,a))}},i.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,n,r){var s=e.source;mm(t,s[0]),mm(t,s[1]),mm(t,s[2])}),t},i.prototype.getTriangles=function(){return this.triangles_},i}();const $Ie=jIe;var YI,qI={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},qIe={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0},t$=[];function n$(i,t,e,n,r){i.beginPath(),i.moveTo(0,0),i.lineTo(t,e),i.lineTo(n,r),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(t,n)+1,Math.max(e,r)),i.restore()}function XI(i,t){return Math.abs(i[4*t]-210)>2||Math.abs(i[4*t+3]-191.25)>2}function i$(i,t,e,n){var r=zv(e,t,i),s=f6(t,n,e),o=t.getMetersPerUnit();void 0!==o&&(s*=o);var a=i.getMetersPerUnit();void 0!==a&&(s/=a);var l=i.getExtent();if(!l||Iv(l,r)){var c=f6(i,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}var ZIe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),QIe=function(i){function t(e,n,r,s,o,a,l,c,u,d,h,f){var p=i.call(this,o,0,{interpolate:!!f})||this;p.renderEdges_=void 0!==h&&h,p.pixelRatio_=l,p.gutter_=c,p.canvas_=null,p.sourceTileGrid_=n,p.targetTileGrid_=s,p.wrappedTileCoord_=a||o,p.sourceTiles_=[],p.sourcesListenerKeys_=null,p.sourceZ_=0;var m=s.getTileCoordExtent(p.wrappedTileCoord_),g=p.targetTileGrid_.getExtent(),_=p.sourceTileGrid_.getExtent(),v=g?_m(m,g):m;if(0===hM(v))return p.state=4,p;var y=e.getExtent();y&&(_=_?_m(_,y):y);var b=s.getResolution(p.wrappedTileCoord_[0]),x=function XIe(i,t,e,n){var r=gm(e),s=i$(i,t,r,n);return(!isFinite(s)||s<=0)&&L8(e,function(o){return s=i$(i,t,o,n),isFinite(s)&&s>0}),s}(e,r,v,b);if(!isFinite(x)||x<=0)return p.state=4,p;if(p.triangulation_=new $Ie(e,r,v,_,x*(void 0!==d?d:.5),b),0===p.triangulation_.getTriangles().length)return p.state=4,p;p.sourceZ_=n.getZForResolution(x);var E=p.triangulation_.calculateSourceExtent();if(_&&(e.canWrapX()?(E[1]=ur(E[1],_[1],_[3]),E[3]=ur(E[3],_[1],_[3])):E=_m(E,_)),hM(E)){for(var R=n.getTileRangeForExtentAndZ(E,p.sourceZ_),F=R.minX;F<=R.maxX;F++)for(var N=R.minY;N<=R.maxY;N++){var S=u(p.sourceZ_,F,N,l);S&&p.sourceTiles_.push(S)}0===p.sourceTiles_.length&&(p.state=4)}else p.state=4;return p}return ZIe(t,i),t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var e=[];if(this.sourceTiles_.forEach(function(u,d,h){u&&2==u.getState()&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(u.tileCoord),image:u.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=3;else{var n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),s="number"==typeof r?r:r[0],o="number"==typeof r?r:r[1],a=this.targetTileGrid_.getResolution(n),l=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function KIe(i,t,e,n,r,s,o,a,l,c,u,d){var h=mo(Math.round(e*i),Math.round(e*t),t$);if(d||Lr(h,qI),0===l.length)return h.canvas;function f(b){return Math.round(b*e)/e}h.scale(e,e),h.globalCompositeOperation="lighter";var p=[1/0,1/0,-1/0,-1/0];l.forEach(function(b,x,w){!function gDe(i,t){t[0]<i[0]&&(i[0]=t[0]),t[2]>i[2]&&(i[2]=t[2]),t[1]<i[1]&&(i[1]=t[1]),t[3]>i[3]&&(i[3]=t[3])}(p,b.extent)});var m=ci(p),g=po(p),_=mo(Math.round(e*m/n),Math.round(e*g/n));d||Lr(_,qI);var v=e/n;l.forEach(function(b,x,w){var E=b.extent[0]-p[0],R=-(b.extent[3]-p[3]),F=ci(b.extent),N=po(b.extent);b.image.width>0&&b.image.height>0&&_.drawImage(b.image,c,c,b.image.width-2*c,b.image.height-2*c,E*v,R*v,F*v,N*v)});var y=Mh(o);return a.getTriangles().forEach(function(b,x,w){var E=b.source,R=b.target,F=E[0][0],N=E[0][1],S=E[1][0],L=E[1][1],Y=E[2][0],I=E[2][1],z=f((R[0][0]-y[0])/s),D=f(-(R[0][1]-y[1])/s),P=f((R[1][0]-y[0])/s),O=f(-(R[1][1]-y[1])/s),q=f((R[2][0]-y[0])/s),K=f(-(R[2][1]-y[1])/s),Q=F,j=N;F=0,N=0;var fe=function TDe(i){for(var t=i.length,e=0;e<t;e++){for(var n=e,r=Math.abs(i[e][e]),s=e+1;s<t;s++){var o=Math.abs(i[s][e]);o>r&&(r=o,n=s)}if(0===r)return null;var a=i[n];i[n]=i[e],i[e]=a;for(var l=e+1;l<t;l++)for(var c=-i[l][e]/i[e][e],u=e;u<t+1;u++)e==u?i[l][u]=0:i[l][u]+=c*i[e][u]}for(var d=new Array(t),h=t-1;h>=0;h--){d[h]=i[h][t]/i[h][h];for(var f=h-1;f>=0;f--)i[f][t]-=i[f][h]*d[h]}return d}([[S-=Q,L-=j,0,0,P-z],[Y-=Q,I-=j,0,0,q-z],[0,0,S,L,O-D],[0,0,Y,I,K-D]]);if(fe){if(h.save(),h.beginPath(),function YIe(){if(void 0===YI){var i=document.createElement("canvas").getContext("2d");i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",n$(i,4,5,4,0),n$(i,4,5,0,5);var t=i.getImageData(0,0,3,3).data;YI=XI(t,0)||XI(t,4)||XI(t,8)}return YI}()||!d){h.moveTo(P,O);for(var re=z-P,Ae=D-O,Oe=0;Oe<4;Oe++)h.lineTo(P+f((Oe+1)*re/4),O+f(Oe*Ae/3)),3!=Oe&&h.lineTo(P+f((Oe+1)*re/4),O+f((Oe+1)*Ae/3));h.lineTo(q,K)}else h.moveTo(P,O),h.lineTo(z,D),h.lineTo(q,K);h.clip(),h.transform(fe[0],fe[2],fe[1],fe[3],z,D),h.translate(p[0]-Q,p[3]-j),h.scale(n/e,-n/e),h.drawImage(_.canvas,0,0),h.restore()}}),u&&(h.save(),h.globalCompositeOperation="source-over",h.strokeStyle="black",h.lineWidth=1,a.getTriangles().forEach(function(b,x,w){var E=b.target,R=(E[0][0]-y[0])/s,F=-(E[0][1]-y[1])/s,N=(E[1][0]-y[0])/s,S=-(E[1][1]-y[1])/s,L=(E[2][0]-y[0])/s,Y=-(E[2][1]-y[1])/s;h.beginPath(),h.moveTo(N,S),h.lineTo(R,F),h.lineTo(L,Y),h.closePath(),h.stroke()}),h.restore()),h.canvas}(s,o,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),a,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()},t.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,r,s){var o=n.getState();if(0==o||1==o){e++;var a=Cn(n,"change",function(l){var c=n.getState();(2==c||3==c||4==c)&&(bi(a),0==--e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(a)}}.bind(this)),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,r,s){0==n.getState()&&n.load()})}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(bi),this.sourcesListenerKeys_=null},t.prototype.release=function(){this.canvas_&&(Q8(this.canvas_.getContext("2d")),t$.push(this.canvas_),this.canvas_=null),i.prototype.release.call(this)},t}(Q6);const r$=QIe;var JIe=function(){function i(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return i.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},i.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},i.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},i.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},i.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},i.prototype.get=function(t,e){var n=this.entries_[t];return fn(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},i.prototype.remove=function(t){var e=this.entries_[t];return fn(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},i.prototype.getCount=function(){return this.count_},i.prototype.getKeys=function(){var n,t=new Array(this.count_),e=0;for(n=this.newest_;n;n=n.older)t[e++]=n.key_;return t},i.prototype.getValues=function(){var n,t=new Array(this.count_),e=0;for(n=this.newest_;n;n=n.older)t[e++]=n.value_;return t},i.prototype.peekLast=function(){return this.oldest_.value_},i.prototype.peekLastKey=function(){return this.oldest_.key_},i.prototype.peekFirstKey=function(){return this.newest_.key_},i.prototype.peek=function(t){if(this.containsKey(t))return this.entries_[t].value_},i.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},i.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},i.prototype.set=function(t,e){fn(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},i.prototype.setSize=function(t){this.highWaterMark=t},i}();const eke=JIe;function s$(i,t,e,n){return void 0!==n?(n[0]=i,n[1]=t,n[2]=e,n):[i,t,e]}function jv(i,t,e){return i+"/"+t+"/"+e}function o$(i){return jv(i[0],i[1],i[2])}var rke=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),ske=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return rke(t,i),t.prototype.expireCache=function(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()},t.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var n=function tke(i){return i.split("/").map(Number)}(this.peekFirstKey()),r=n[0];this.forEach(function(s){s.tileCoord[0]!==r&&(this.remove(o$(s.tileCoord)),s.release())}.bind(this))}},t}(eke);const a$=ske;var oke=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),ake=function(i){function t(e){var n=i.call(this)||this;n.projection=as(e.projection),n.attributions_=l$(e.attributions),n.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,n.loading=!1,n.state_=void 0!==e.state?e.state:"ready",n.wrapX_=void 0!==e.wrapX&&e.wrapX,n.interpolate_=!!e.interpolate,n.viewResolver=null,n.viewRejector=null;var r=n;return n.viewPromise_=new Promise(function(s,o){r.viewResolver=s,r.viewRejector=o}),n}return oke(t,i),t.prototype.getAttributions=function(){return this.attributions_},t.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},t.prototype.getProjection=function(){return this.projection},t.prototype.getResolutions=function(){return hn()},t.prototype.getView=function(){return this.viewPromise_},t.prototype.getState=function(){return this.state_},t.prototype.getWrapX=function(){return this.wrapX_},t.prototype.getInterpolate=function(){return this.interpolate_},t.prototype.refresh=function(){this.changed()},t.prototype.setAttributions=function(e){this.attributions_=l$(e),this.changed()},t.prototype.setState=function(e){this.state_=e,this.changed()},t}(ul);function l$(i){return i?Array.isArray(i)?function(t){return i}:"function"==typeof i?i:function(t){return[i]}:null}const c$=ake;var u$=function(){function i(t,e,n,r){this.minX=t,this.maxX=e,this.minY=n,this.maxY=r}return i.prototype.contains=function(t){return this.containsXY(t[1],t[2])},i.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},i.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},i.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},i.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},i.prototype.getHeight=function(){return this.maxY-this.minY+1},i.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},i.prototype.getWidth=function(){return this.maxX-this.minX+1},i.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},i}();function Dm(i,t,e,n,r){return void 0!==r?(r.minX=i,r.maxX=t,r.minY=e,r.maxY=n,r):new u$(i,t,e,n)}const d$=u$;var lke=[0,0,0],cke=function(){function i(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,fn(function j1e(i,t,e){var n=t||bh;return i.every(function(r,s){if(0===s)return!0;var o=n(i[s-1],r);return!(o>0||e&&0===o)})}(this.resolutions_,function(o,a){return a-o},!0),17),!t.origins)for(var n=0,r=this.resolutions_.length-1;n<r;++n)if(e){if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}else e=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,fn(this.origins_.length==this.resolutions_.length,20));var s=t.extent;void 0!==s&&!this.origin_&&!this.origins_&&(this.origin_=Mh(s)),fn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,fn(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,fn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==s?s:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(o,a){var l=new d$(Math.min(0,o[0]),Math.max(o[0]-1,-1),Math.min(0,o[1]),Math.max(o[1]-1,-1));if(s){var c=this.getTileRangeForExtentAndZ(s,a);l.minX=Math.max(c.minX,l.minX),l.maxX=Math.min(c.maxX,l.maxX),l.minY=Math.max(c.minY,l.minY),l.maxY=Math.min(c.maxY,l.maxY)}return l},this):s&&this.calculateTileRanges_(s)}return i.prototype.forEachTileCoord=function(t,e,n){for(var r=this.getTileRangeForExtentAndZ(t,e),s=r.minX,o=r.maxX;s<=o;++s)for(var a=r.minY,l=r.maxY;a<=l;++a)n([e,s,a])},i.prototype.forEachTileCoordParentTileRange=function(t,e,n,r){var o,a,l=null,c=t[0]-1;for(2===this.zoomFactor_?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);c>=this.minZoom;){if(e(c,2===this.zoomFactor_?Dm(o=Math.floor(o/2),o,a=Math.floor(a/2),a,n):this.getTileRangeForExtentAndZ(l,c,n)))return!0;--c}return!1},i.prototype.getExtent=function(){return this.extent_},i.prototype.getMaxZoom=function(){return this.maxZoom},i.prototype.getMinZoom=function(){return this.minZoom},i.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},i.prototype.getResolution=function(t){return this.resolutions_[t]},i.prototype.getResolutions=function(){return this.resolutions_},i.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*t[1],s=2*t[2];return Dm(r,r+1,s,s+1,e)}var o=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},i.prototype.getTileRangeForTileCoordAndZ=function(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;var r=t[0],s=t[1],o=t[2];if(e===r)return Dm(s,o,s,o,n);if(this.zoomFactor_){var a=Math.pow(this.zoomFactor_,e-r),l=Math.floor(s*a),c=Math.floor(o*a);return e<r?Dm(l,l,c,c,n):Dm(l,Math.floor(a*(s+1))-1,c,Math.floor(a*(o+1))-1,n)}var h=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(h,e,n)},i.prototype.getTileRangeExtent=function(t,e,n){var r=this.getOrigin(t),s=this.getResolution(t),o=Ia(this.getTileSize(t),this.tmpSize_);return hl(r[0]+e.minX*o[0]*s,r[1]+e.minY*o[1]*s,r[0]+(e.maxX+1)*o[0]*s,r[1]+(e.maxY+1)*o[1]*s,n)},i.prototype.getTileRangeForExtentAndZ=function(t,e,n){var r=lke;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,r);var s=r[1],o=r[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,r),Dm(s,r[1],o,r[2],n)},i.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=Ia(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*n,e[1]-(t[2]+.5)*r[1]*n]},i.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=Ia(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*s[0]*r,a=n[1]-(t[2]+1)*s[1]*r;return hl(o,a,o+s[0]*r,a+s[1]*r,e)},i.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},i.prototype.getTileCoordForXYAndResolution_=function(t,e,n,r,s){var o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),c=Ia(this.getTileSize(o),this.tmpSize_),u=a*(t-l[0])/n/c[0],d=a*(l[1]-e)/n/c[1];return r?(u=vM(u,5)-1,d=vM(d,5)-1):(u=_M(u,5),d=_M(d,5)),s$(o,u,d,s)},i.prototype.getTileCoordForXYAndZ_=function(t,e,n,r,s){var o=this.getOrigin(n),a=this.getResolution(n),l=Ia(this.getTileSize(n),this.tmpSize_),c=(t-o[0])/a/l[0],u=(o[1]-e)/a/l[1];return r?(c=vM(c,5)-1,u=vM(u,5)-1):(c=_M(c,5),u=_M(u,5)),s$(n,c,u,s)},i.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},i.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},i.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},i.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},i.prototype.getZForResolution=function(t,e){return ur(tI(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},i.prototype.tileCoordIntersectsViewport=function(t,e){return V6(e,0,e.length,2,this.getTileCoordExtent(t))},i.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),r=this.minZoom;r<e;++r)n[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=n},i}();const h$=cke;function f$(i){var t=i.getDefaultTileGrid();return t||(t=function fke(i,t,e,n){return function dke(i,t,e,n){var r=void 0!==n?n:"top-left",s=p$(i,t,e);return new h$({extent:i,origin:yDe(i,r),resolutions:s,tileSize:e})}(ZI(i),t,e,n)}(i),i.setDefaultTileGrid(t)),t}function p$(i,t,e,n){for(var r=void 0!==t?t:42,s=po(i),o=ci(i),a=Ia(void 0!==e?e:256),l=n>0?n:Math.max(o/a[0],s/a[1]),c=r+1,u=new Array(c),d=0;d<c;++d)u[d]=l/Math.pow(2,d);return u}function ZI(i){var t=(i=as(i)).getExtent();if(!t){var e=180*qo[Ru.DEGREES]/i.getMetersPerUnit();t=hl(-e,-e,e,e)}return t}var m$=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),pke=function(i){function t(e){var n=i.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate})||this;return n.opaque_=void 0!==e.opaque&&e.opaque,n.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,n.tileGrid&&Ia(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),[256,256]),n.tileCache=new a$(e.cacheSize||0),n.tmpSize=[0,0],n.key_=e.key||"",n.tileOptions={transition:e.transition,interpolate:e.interpolate},n.zDirection=e.zDirection?e.zDirection:0,n}return m$(t,i),t.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(e,n){var r=this.getTileCacheForProjection(e);r&&r.expireCache(n)},t.prototype.forEachLoadedTile=function(e,n,r,s){var o=this.getTileCacheForProjection(e);if(!o)return!1;for(var l,c,u,a=!0,d=r.minX;d<=r.maxX;++d)for(var h=r.minY;h<=r.maxY;++h)c=jv(n,d,h),u=!1,o.containsKey(c)&&(u=2===(l=o.get(c)).getState())&&(u=!1!==s(l)),u||(a=!1);return a},t.prototype.getGutterForProjection=function(e){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(e){this.key_!==e&&(this.key_=e,this.changed())},t.prototype.getOpaque=function(e){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},t.prototype.getTile=function(e,n,r,s,o){return hn()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(e){return this.tileGrid?this.tileGrid:f$(e)},t.prototype.getTileCacheForProjection=function(e){var n=this.getProjection();return fn(null===n||Sm(n,e),68),this.tileCache},t.prototype.getTilePixelRatio=function(e){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(e,n,r){var s=this.getTileGridForProjection(r),o=this.getTilePixelRatio(n),a=Ia(s.getTileSize(e),this.tmpSize);return 1==o?a:function MRe(i,t,e){return void 0===e&&(e=[0,0]),e[0]=i[0]*t+.5|0,e[1]=i[1]*t+.5|0,e}(a,o,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(e,n){var r=void 0!==n?n:this.getProjection(),s=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=function uke(i,t,e){var n=t[0],r=i.getTileCoordCenter(t),s=ZI(e);if(Iv(s,r))return t;var o=ci(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,i.getTileCoordForCoordAndZ(r,n)}(s,e,r)),function ike(i,t){var e=i[0],n=i[1],r=i[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;var s=t.getFullTileRange(e);return!s||s.containsXY(n,r)}(e,s)?e:null},t.prototype.clear=function(){this.tileCache.clear()},t.prototype.refresh=function(){this.clear(),i.prototype.refresh.call(this)},t.prototype.updateCacheSize=function(e,n){var r=this.getTileCacheForProjection(n);e>r.highWaterMark&&(r.highWaterMark=e)},t.prototype.useTile=function(e,n,r,s){},t}(c$),mke=function(i){function t(e,n){var r=i.call(this,e)||this;return r.tile=n,r}return m$(t,i),t}(_c);const gke=pke;function _ke(i,t){var e=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return i.replace(e,o[0].toString()).replace(n,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){var u=t.getFullTileRange(o[0]);return fn(u,55),(u.getHeight()-o[2]-1).toString()})}}var xke=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),wke=function(i){function t(e){var n=i.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===t.prototype.tileUrlFunction,n.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(n.tileUrlFunction=e.tileUrlFunction),n.urls=null,e.urls?n.setUrls(e.urls):e.url&&n.setUrl(e.url),n.tileLoadingKeys_={},n}return xke(t,i),t.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},t.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},t.prototype.getUrls=function(){return this.urls},t.prototype.handleTileChange=function(e){var o,n=e.target,r=Rn(n),s=n.getState();1==s?(this.tileLoadingKeys_[r]=!0,o="tileloadstart"):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=3==s?"tileloaderror":2==s?"tileloadend":void 0),null!=o&&this.dispatchEvent(new mke(o,n))},t.prototype.setTileLoadFunction=function(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()},t.prototype.setTileUrlFunction=function(e,n){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),void 0!==n?this.setKey(n):this.changed()},t.prototype.setUrl=function(e){var n=function bke(i){var t=[],e=/\{([a-z])-([a-z])\}/.exec(i);if(e){var n=e[1].charCodeAt(0),r=e[2].charCodeAt(0),s=void 0;for(s=n;s<=r;++s)t.push(i.replace(e[0],String.fromCharCode(s)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(i)){for(var o=parseInt(e[2],10),a=parseInt(e[1],10);a<=o;a++)t.push(i.replace(e[0],a.toString()));return t}return t.push(i),t}(e);this.urls=n,this.setUrls(n)},t.prototype.setUrls=function(e){this.urls=e;var n=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function vke(i,t){for(var e=i.length,n=new Array(e),r=0;r<e;++r)n[r]=_ke(i[r],t);return function yke(i){return 1===i.length?i[0]:function(t,e,n){if(t){var r=function nke(i){return(i[1]<<i[0])+i[2]}(t),s=ym(r,i.length);return i[s](t,e,n)}}}(n)}(e,this.tileGrid),n):this.setKey(n)},t.prototype.tileUrlFunction=function(e,n,r){},t.prototype.useTile=function(e,n,r){var s=jv(e,n,r);this.tileCache.containsKey(s)&&this.tileCache.get(s)},t}(gke);const Mke=wke;var Cke=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ske=function(i){function t(e){var n=this,r=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(r=e.interpolate),(n=i.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Eke,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:r,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this).crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,n.tileClass=void 0!==e.tileClass?e.tileClass:J6,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return Cke(t,i),t.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},t.prototype.expireCache=function(e,n){var r=this.getTileCacheForProjection(e);for(var s in this.tileCache.expireCache(this.tileCache==r?n:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[s];o.expireCache(o==r?n:{})}},t.prototype.getGutterForProjection=function(e){return this.getProjection()&&e&&!Sm(this.getProjection(),e)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getKey=function(){var e=i.prototype.getKey.call(this);return this.getInterpolate()||(e+=":disable-interpolation"),e},t.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Sm(this.getProjection(),e))&&i.prototype.getOpaque.call(this,e)},t.prototype.getTileGridForProjection=function(e){var n=this.getProjection();if(this.tileGrid&&(!n||Sm(n,e)))return this.tileGrid;var r=Rn(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=f$(e)),this.tileGridForProjection[r]},t.prototype.getTileCacheForProjection=function(e){var n=this.getProjection();if(!n||Sm(n,e))return this.tileCache;var r=Rn(e);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new a$(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},t.prototype.createTile_=function(e,n,r,s,o,a){var l=[e,n,r],c=this.getTileCoordForTileUrlFunction(l,o),u=c?this.tileUrlFunction(c,s,o):void 0,d=new this.tileClass(l,void 0!==u?0:4,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return d.key=a,d.addEventListener("change",this.handleTileChange.bind(this)),d},t.prototype.getTile=function(e,n,r,s,o){var a=this.getProjection();if(!a||!o||Sm(a,o))return this.getTileInternal(e,n,r,s,a||o);var l=this.getTileCacheForProjection(o),c=[e,n,r],u=void 0,d=o$(c);l.containsKey(d)&&(u=l.get(d));var h=this.getKey();if(u&&u.key==h)return u;var f=this.getTileGridForProjection(a),p=this.getTileGridForProjection(o),m=this.getTileCoordForTileUrlFunction(c,o),g=new r$(a,f,o,p,c,m,this.getTilePixelRatio(s),this.getGutter(),function(_,v,y,b){return this.getTileInternal(_,v,y,b,a)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return g.key=h,u?(g.interimTile=u,g.refreshInterimChain(),l.replace(d,g)):l.set(d,g),g},t.prototype.getTileInternal=function(e,n,r,s,o){var a=null,l=jv(e,n,r),c=this.getKey();if(this.tileCache.containsKey(l)){if((a=this.tileCache.get(l)).key!=c){var u=a;(a=this.createTile_(e,n,r,s,o,c)).interimTile=0==u.getState()?u.interimTile:u,a.refreshInterimChain(),this.tileCache.replace(l,a)}}else a=this.createTile_(e,n,r,s,o,c),this.tileCache.set(l,a);return a},t.prototype.setRenderReprojectionEdges=function(e){if(this.renderReprojectionEdges_!=e){for(var n in this.renderReprojectionEdges_=e,this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},t.prototype.setTileGridForProjection=function(e,n){var r=as(e);if(r){var s=Rn(r);s in this.tileGridForProjection||(this.tileGridForProjection[s]=n)}},t}(Mke);function Eke(i,t){i.getImage().src=t}const Tke=Ske;var Dke=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ake=function(i){function t(e){var n=this,r=e||{},s=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(s=r.interpolate);var o=void 0!==r.projection?r.projection:"EPSG:3857",a=void 0!==r.tileGrid?r.tileGrid:function hke(i){var t=i||{},e=t.extent||as("EPSG:3857").getExtent(),n={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:p$(e,t.maxZoom,t.tileSize,t.maxResolution)};return new h$(n)}({extent:ZI(o),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return(n=i.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:s,opaque:r.opaque,projection:o,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:a,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this).gutter_=void 0!==r.gutter?r.gutter:0,n}return Dke(t,i),t.prototype.getGutter=function(){return this.gutter_},t}(Tke);const Rke=Ake;var Ike=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Oke=function(i){function t(e){var n=e||{},r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),i.call(this,{attributions:void 0!==n.attributions?n.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],attributionsCollapsible:!1,cacheSize:n.cacheSize,crossOrigin:void 0!==n.crossOrigin?n.crossOrigin:"anonymous",interpolate:r,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,opaque:void 0===n.opaque||n.opaque,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,transition:n.transition,url:void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:n.wrapX,zDirection:n.zDirection})||this}return Ike(t,i),t}(Rke);const Pke=Oke;var Lke=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Fke=function(i){function t(e){var n=this,r=e||{},s=Lr({},r);return delete s.preload,delete s.useInterimTilesOnError,(n=i.call(this,s)||this).setPreload(void 0!==r.preload?r.preload:0),n.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),n}return Lke(t,i),t.prototype.getPreload=function(){return this.get("preload")},t.prototype.setPreload=function(e){this.set("preload",e)},t.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},t.prototype.setUseInterimTilesOnError=function(e){this.set("useInterimTilesOnError",e)},t.prototype.getData=function(e){return i.prototype.getData.call(this,e)},t}(wM);const Nke=Fke;var Bke=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Vke=function(i){function t(e){var n=i.call(this)||this;return n.ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=e,n.declutterExecutorGroup=null,n}return Bke(t,i),t.prototype.getFeatures=function(e){return hn()},t.prototype.getData=function(e){return null},t.prototype.prepareFrame=function(e){return hn()},t.prototype.renderFrame=function(e,n){return hn()},t.prototype.loadedTileCallback=function(e,n,r){e[n]||(e[n]={}),e[n][r.tileCoord.toString()]=r},t.prototype.createLoadedTileFinder=function(e,n,r){return function(s,o){var a=this.loadedTileCallback.bind(this,r,s);return e.forEachLoadedTile(n,s,o,a)}.bind(this)},t.prototype.forEachFeatureAtCoordinate=function(e,n,r,s,o){},t.prototype.getDataAtPixel=function(e,n,r){return null},t.prototype.getLayer=function(){return this.layer_},t.prototype.handleFontsChanged=function(){},t.prototype.handleImageChange_=function(e){2===e.target.getState()&&this.renderIfReadyAndVisible()},t.prototype.loadImage=function(e){var n=e.getState();return 2!=n&&3!=n&&e.addEventListener("change",this.boundHandleImageChange_),0==n&&(e.load(),n=e.getState()),2==n},t.prototype.renderIfReadyAndVisible=function(){var e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()},t.prototype.disposeInternal=function(){delete this.layer_,i.prototype.disposeInternal.call(this)},t}(w8);const Hke=Vke;var Uke=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),g$=[],Am=null,Gke=function(i){function t(e){var n=i.call(this,e)||this;return n.container=null,n.tempTransform=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n.pixelContext_=null,n.frameState=null,n}return Uke(t,i),t.prototype.getImageData=function(e,n,r){var s;Am||function zke(){var i=document.createElement("canvas");i.width=1,i.height=1,Am=i.getContext("2d")}(),Am.clearRect(0,0,1,1);try{Am.drawImage(e,n,r,1,1,0,0,1,1),s=Am.getImageData(0,0,1,1).data}catch(o){return Am=null,null}return s},t.prototype.getBackground=function(e){var r=this.getLayer().getBackground();return"function"==typeof r&&(r=r(e.viewState.resolution)),r||void 0},t.prototype.useContainer=function(e,n,r){var o,a,s=this.getLayer().getClassName();if(e&&e.className===s&&(!r||e&&e.style.backgroundColor&&xh(yM(e.style.backgroundColor),yM(r)))&&(l=e.firstElementChild)instanceof HTMLCanvasElement&&(a=l.getContext("2d")),a&&a.canvas.style.transform===n?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(o=document.createElement("div")).className=s;var l,c=o.style;c.position="absolute",c.width="100%",c.height="100%",a=mo(),o.appendChild(l=a.canvas),(c=l.style).position="absolute",c.left="0",c.transformOrigin="top left",this.container=o,this.context=a}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)},t.prototype.clipUnrotated=function(e,n,r){var s=Mh(r),o=mM(r),a=pM(r),l=fM(r);cr(n.coordinateToPixelTransform,s),cr(n.coordinateToPixelTransform,o),cr(n.coordinateToPixelTransform,a),cr(n.coordinateToPixelTransform,l);var c=this.inversePixelTransform;cr(c,s),cr(c,o),cr(c,a),cr(c,l),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.clip()},t.prototype.dispatchRenderEvent_=function(e,n,r){var s=this.getLayer();if(s.hasListener(e)){var o=new Y8(e,this.inversePixelTransform,r,n);s.dispatchEvent(o)}},t.prototype.preRender=function(e,n){this.frameState=n,this.dispatchRenderEvent_("prerender",e,n)},t.prototype.postRender=function(e,n){this.dispatchRenderEvent_("postrender",e,n)},t.prototype.getRenderTransform=function(e,n,r,s,o,a,l){var d=s/n;return dl(this.tempTransform,o/2,a/2,d,-d,-r,-e[0]+l,-e[1])},t.prototype.getDataAtPixel=function(e,n,r){var s=cr(this.inversePixelTransform,e.slice()),o=this.context,l=this.getLayer().getExtent();if(l&&!Iv(l,cr(n.pixelToCoordinateTransform,e.slice())))return null;var p,u=Math.round(s[0]),d=Math.round(s[1]),h=this.pixelContext_;if(!h){var f=document.createElement("canvas");f.width=1,f.height=1,h=f.getContext("2d"),this.pixelContext_=h}h.clearRect(0,0,1,1);try{h.drawImage(o.canvas,u,d,1,1,0,0,1,1),p=h.getImageData(0,0,1,1).data}catch(m){return"SecurityError"===m.name?(this.pixelContext_=null,new Uint8Array):p}return 0===p[3]?null:p},t.prototype.disposeInternal=function(){delete this.frameState,i.prototype.disposeInternal.call(this)},t}(Hke);const _$=Gke;var Wke=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),jke=function(i){function t(e){var n=i.call(this,e)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedProjection=null,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=[1/0,1/0,-1/0,-1/0],n.tmpTileRange_=new d$(0,0,0,0),n}return Wke(t,i),t.prototype.isDrawableTile=function(e){var n=this.getLayer(),r=e.getState(),s=n.getUseInterimTilesOnError();return 2==r||4==r||3==r&&!s},t.prototype.getTile=function(e,n,r,s){var o=s.pixelRatio,a=s.viewState.projection,l=this.getLayer(),u=l.getSource().getTile(e,n,r,o,a);return 3==u.getState()&&(l.getUseInterimTilesOnError()?l.getPreload()>0&&(this.newTiles_=!0):u.setState(2)),this.isDrawableTile(u)||(u=u.getInterimTile()),u},t.prototype.getData=function(e){var n=this.frameState;if(!n)return null;var r=this.getLayer(),s=cr(n.pixelToCoordinateTransform,e.slice()),o=r.getExtent();if(o&&!Iv(o,s))return null;for(var a=n.pixelRatio,l=n.viewState.projection,c=n.viewState,u=r.getRenderSource(),d=u.getTileGridForProjection(c.projection),h=u.getTilePixelRatio(n.pixelRatio),f=d.getZForResolution(c.resolution);f>=d.getMinZoom();--f){var p=d.getTileCoordForCoordAndZ(s,f),m=u.getTile(f,p[1],p[2],a,l);if(!(m instanceof J6||m instanceof r$))return null;if(2===m.getState()){var g=d.getOrigin(f),_=Ia(d.getTileSize(f)),v=d.getResolution(f),y=Math.floor(h*((s[0]-g[0])/v-p[1]*_[0])),b=Math.floor(h*((g[1]-s[1])/v-p[2]*_[1])),x=Math.round(h*u.getGutterForProjection(c.projection));return this.getImageData(m.getImage(),y+x,b+x)}}return null},t.prototype.loadedTileCallback=function(e,n,r){return!!this.isDrawableTile(r)&&i.prototype.loadedTileCallback.call(this,e,n,r)},t.prototype.prepareFrame=function(e){return!!this.getLayer().getSource()},t.prototype.renderFrame=function(e,n){var r=e.layerStatesArray[e.layerIndex],s=e.viewState,o=s.projection,a=s.resolution,l=s.center,c=s.rotation,u=e.pixelRatio,d=this.getLayer(),h=d.getSource(),f=h.getRevision(),p=h.getTileGridForProjection(o),m=p.getZForResolution(a,h.zDirection),g=p.getResolution(m),_=e.extent,v=e.viewState.resolution,y=h.getTilePixelRatio(u),b=Math.round(ci(_)/v*u),x=Math.round(po(_)/v*u),w=r.extent&&Th(r.extent);w&&(_=_m(_,Th(r.extent)));var E=g*b/2/y,R=g*x/2/y,F=[l[0]-E,l[1]-R,l[0]+E,l[1]+R],N=p.getTileRangeForExtentAndZ(_,m),S={};S[m]={};var L=this.createLoadedTileFinder(h,o,S),Y=this.tmpExtent,I=this.tmpTileRange_;this.newTiles_=!1;for(var z=c?cI(s.center,v,c,e.size):void 0,D=N.minX;D<=N.maxX;++D)for(var P=N.minY;P<=N.maxY;++P)if(!c||p.tileCoordIntersectsViewport([m,D,P],z)){var O=this.getTile(m,D,P,e);if(this.isDrawableTile(O)){var q=Rn(this);if(2==O.getState()&&(S[m][O.tileCoord.toString()]=O,(K=O.inTransition(q))&&1!==r.opacity&&(O.endTransition(q),K=!1),!this.newTiles_&&(K||-1===this.renderedTiles.indexOf(O))&&(this.newTiles_=!0)),1===O.getAlpha(q,e.time))continue}var Q=p.getTileCoordChildTileRange(O.tileCoord,I,Y),j=!1;Q&&(j=L(m+1,Q)),j||p.forEachTileCoordParentTileRange(O.tileCoord,L,I,Y)}var we=g/a*u/y;dl(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/u,1/u,c,-b/2,-x/2);var fe=sI(this.pixelTransform);this.useContainer(n,fe,this.getBackground(e));var _e=this.context,re=_e.canvas;dM(this.inversePixelTransform,this.pixelTransform),dl(this.tempTransform,b/2,x/2,we,we,0,-b/2,-x/2),re.width!=b||re.height!=x?(re.width=b,re.height=x):this.containerReused||_e.clearRect(0,0,b,x),w&&this.clipUnrotated(_e,e,w),h.getInterpolate()||Lr(_e,qI),this.preRender(_e,e),this.renderedTiles.length=0;var Oe,tt,ye,Ae=Object.keys(S).map(Number);Ae.sort(bh),1!==r.opacity||this.containerReused&&!h.getOpaque(e.viewState.projection)?(Oe=[],tt=[]):Ae=Ae.reverse();for(var vt=Ae.length-1;vt>=0;--vt){var ue=Ae[vt],pe=h.getTilePixelSize(ue,u,o),Ke=p.getResolution(ue)/g,Ne=pe[0]*Ke*we,De=pe[1]*Ke*we,je=p.getTileCoordForCoordAndZ(Mh(F),ue),it=p.getTileCoordExtent(je),$t=cr(this.tempTransform,[y*(it[0]-F[0])/g,y*(F[3]-it[3])/g]),xn=y*h.getGutterForProjection(o),W=S[ue];for(var B in W){var K,le=(O=W[B]).tileCoord,Me=je[1]-le[1],Ue=Math.round($t[0]-(Me-1)*Ne),qe=je[2]-le[2],dt=Math.round($t[1]-(qe-1)*De),U=Ue-(D=Math.round($t[0]-Me*Ne)),Ce=dt-(P=Math.round($t[1]-qe*De)),nt=m===ue,Pe=!1;if(!(K=nt&&1!==O.getAlpha(Rn(this),e.time)))if(Oe){ye=[D,P,D+U,P,D+U,P+Ce,D,P+Ce];for(var X=0,ke=Oe.length;X<ke;++X)if(m!==ue&&ue<tt[X]){var Se=Oe[X];Ns([D,P,D+U,P+Ce],[Se[0],Se[3],Se[4],Se[7]])&&(Pe||(_e.save(),Pe=!0),_e.beginPath(),_e.moveTo(ye[0],ye[1]),_e.lineTo(ye[2],ye[3]),_e.lineTo(ye[4],ye[5]),_e.lineTo(ye[6],ye[7]),_e.moveTo(Se[6],Se[7]),_e.lineTo(Se[4],Se[5]),_e.lineTo(Se[2],Se[3]),_e.lineTo(Se[0],Se[1]),_e.clip())}Oe.push(ye),tt.push(ue)}else _e.clearRect(D,P,U,Ce);this.drawTileImage(O,e,D,P,U,Ce,xn,nt),Oe&&!K?(Pe&&_e.restore(),this.renderedTiles.unshift(O)):this.renderedTiles.push(O),this.updateUsedTiles(e.usedTiles,h,O)}}return this.renderedRevision=f,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!kv(this.renderedExtent_,F),this.renderedExtent_=F,this.renderedPixelRatio=u,this.renderedProjection=o,this.manageTilePyramid(e,h,p,u,o,_,m,d.getPreload()),this.scheduleExpireCache(e,h),this.postRender(_e,e),r.extent&&_e.restore(),Lr(_e,qIe),fe!==re.style.transform&&(re.style.transform=fe),this.container},t.prototype.drawTileImage=function(e,n,r,s,o,a,l,c){var u=this.getTileImage(e);if(u){var d=Rn(this),h=n.layerStatesArray[n.layerIndex],f=h.opacity*(c?e.getAlpha(d,n.time):1),p=f!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(u,l,l,u.width-2*l,u.height-2*l,r,s,o,a),p&&this.context.restore(),f!==h.opacity?n.animate=!0:c&&e.endTransition(d)}},t.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},t.prototype.getTileImage=function(e){return e.getImage()},t.prototype.scheduleExpireCache=function(e,n){if(n.canExpireCache()){var r=function(s,o,a){var l=Rn(s);l in a.usedTiles&&s.expireCache(a.viewState.projection,a.usedTiles[l])}.bind(null,n);e.postRenderFunctions.push(r)}},t.prototype.updateUsedTiles=function(e,n,r){var s=Rn(n);s in e||(e[s]={}),e[s][r.getKey()]=!0},t.prototype.manageTilePyramid=function(e,n,r,s,o,a,l,c,u){var d=Rn(n);d in e.wantedTiles||(e.wantedTiles[d]={});var v,y,b,x,w,E,h=e.wantedTiles[d],f=e.tileQueue,p=r.getMinZoom(),m=e.viewState.rotation,g=m?cI(e.viewState.center,e.viewState.resolution,m,e.size):void 0,_=0;for(E=p;E<=l;++E)for(y=r.getTileRangeForExtentAndZ(a,E,y),b=r.getResolution(E),x=y.minX;x<=y.maxX;++x)for(w=y.minY;w<=y.maxY;++w)m&&!r.tileCoordIntersectsViewport([E,x,w],g)||(l-E<=c?(++_,0==(v=n.getTile(E,x,w,s,o)).getState()&&(h[v.getKey()]=!0,f.isKeyQueued(v.getKey())||f.enqueue([v,d,r.getTileCoordCenter(v.tileCoord),b])),void 0!==u&&u(v)):n.useTile(E,x,w,o));n.updateCacheSize(_,o)},t}(_$);const $ke=jke;var qke=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Yke=function(i){function t(e){return i.call(this,e)||this}return qke(t,i),t.prototype.createRenderer=function(){return new $ke(this)},t}(Nke);const Xke=Yke;var v$=Pa(402),Kke=function(){function i(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Ia(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}return i.prototype.clone=function(){var t=this.getScale();return new i({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},i.prototype.getOpacity=function(){return this.opacity_},i.prototype.getRotateWithView=function(){return this.rotateWithView_},i.prototype.getRotation=function(){return this.rotation_},i.prototype.getScale=function(){return this.scale_},i.prototype.getScaleArray=function(){return this.scaleArray_},i.prototype.getDisplacement=function(){return this.displacement_},i.prototype.getDeclutterMode=function(){return this.declutterMode_},i.prototype.getAnchor=function(){return hn()},i.prototype.getImage=function(t){return hn()},i.prototype.getHitDetectionImage=function(){return hn()},i.prototype.getPixelRatio=function(t){return 1},i.prototype.getImageState=function(){return hn()},i.prototype.getImageSize=function(){return hn()},i.prototype.getOrigin=function(){return hn()},i.prototype.getSize=function(){return hn()},i.prototype.setDisplacement=function(t){this.displacement_=t},i.prototype.setOpacity=function(t){this.opacity_=t},i.prototype.setRotateWithView=function(t){this.rotateWithView_=t},i.prototype.setRotation=function(t){this.rotation_=t},i.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=Ia(t)},i.prototype.listenImageChange=function(t){hn()},i.prototype.load=function(){hn()},i.prototype.unlistenImageChange=function(t){hn()},i}();const y$=Kke;function fl(i){return Array.isArray(i)?z8(i):i}var Zke=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Qke=function(i){function t(e){var n=this;return(n=i.call(this,{opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})||this).canvas_=void 0,n.hitDetectionCanvas_=null,n.fill_=void 0!==e.fill?e.fill:null,n.origin_=[0,0],n.points_=e.points,n.radius_=void 0!==e.radius?e.radius:e.radius1,n.radius2_=e.radius2,n.angle_=void 0!==e.angle?e.angle:0,n.stroke_=void 0!==e.stroke?e.stroke:null,n.size_=null,n.renderOptions_=null,n.render(),n}return Zke(t,i),t.prototype.clone=function(){var e=this.getScale(),n=new t({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n},t.prototype.getAnchor=function(){var e=this.size_;if(!e)return null;var n=this.getDisplacement();return[e[0]/2-n[0],e[1]/2+n[1]]},t.prototype.getAngle=function(){return this.angle_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(e){this.fill_=e,this.render()},t.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},t.prototype.getImage=function(e){var n=this.canvas_[e];if(!n){var r=this.renderOptions_,s=mo(r.size*e,r.size*e);this.draw_(r,s,e),this.canvas_[e]=n=s.canvas}return n},t.prototype.getPixelRatio=function(e){return e},t.prototype.getImageSize=function(){return this.size_},t.prototype.getImageState=function(){return 2},t.prototype.getOrigin=function(){return this.origin_},t.prototype.getPoints=function(){return this.points_},t.prototype.getRadius=function(){return this.radius_},t.prototype.getRadius2=function(){return this.radius2_},t.prototype.getSize=function(){return this.size_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(e){this.stroke_=e,this.render()},t.prototype.listenImageChange=function(e){},t.prototype.load=function(){},t.prototype.unlistenImageChange=function(e){},t.prototype.calculateLineJoinSize_=function(e,n,r){if(0===n||this.points_===1/0||"bevel"!==e&&"miter"!==e)return n;var s=this.radius_,o=void 0===this.radius2_?s:this.radius2_;if(s<o){var a=s;s=o,o=a}var c=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),u=o*Math.sin(c),h=s-Math.sqrt(o*o-u*u),f=Math.sqrt(u*u+h*h),p=f/u;if("miter"===e&&p<=r)return p*n;var m=n/2/p,g=n/2*(h/f),v=Math.sqrt((s+m)*(s+m)+g*g)-s;if(void 0===this.radius2_||"bevel"===e)return 2*v;var y=s*Math.sin(c),x=o-Math.sqrt(s*s-y*y),E=Math.sqrt(y*y+x*x)/y;return E<=r?2*Math.max(v,E*n/2-o-s):2*v},t.prototype.createRenderOptions=function(){var o,e=bm,n=0,r=null,s=0,a=0;this.stroke_&&(null===(o=this.stroke_.getColor())&&(o=Fv),o=fl(o),void 0===(a=this.stroke_.getWidth())&&(a=1),r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),void 0===(e=this.stroke_.getLineJoin())&&(e=bm),void 0===(n=this.stroke_.getMiterLimit())&&(n=10));var l=this.calculateLineJoinSize_(e,a,n),c=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:o,strokeWidth:a,size:Math.ceil(2*c+l),lineDash:r,lineDashOffset:s,lineJoin:e,miterLimit:n}},t.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]},t.prototype.draw_=function(e,n,r){if(n.scale(r,r),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){var s=this.fill_.getColor();null===s&&(s=vc),n.fillStyle=fl(s),n.fill()}this.stroke_&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,n.setLineDash&&e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())},t.prototype.createHitDetectionCanvas_=function(e){if(this.fill_){var n=this.fill_.getColor(),r=0;if("string"==typeof n&&(n=yM(n)),null===n?r=1:Array.isArray(n)&&(r=4===n.length?n[3]:1),0===r){var s=mo(e.size,e.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(e,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},t.prototype.createPath_=function(e){var n=this.points_,r=this.radius_;if(n===1/0)e.arc(0,0,r,0,2*Math.PI);else{var s=void 0===this.radius2_?r:this.radius2_;void 0!==this.radius2_&&(n*=2);for(var o=this.angle_-Math.PI/2,a=2*Math.PI/n,l=0;l<n;l++){var c=o+l*a,u=l%2==0?r:s;e.lineTo(u*Math.cos(c),u*Math.sin(c))}e.closePath()}},t.prototype.drawHitDetectionCanvas_=function(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=vc,n.fill(),this.stroke_&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())},t}(y$);const Jke=Qke;var eOe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),tOe=function(i){function t(e){var n=e||{};return i.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,scale:void 0!==n.scale?n.scale:1,rotation:void 0!==n.rotation?n.rotation:0,rotateWithView:void 0!==n.rotateWithView&&n.rotateWithView,displacement:void 0!==n.displacement?n.displacement:[0,0],declutterMode:n.declutterMode})||this}return eOe(t,i),t.prototype.clone=function(){var e=this.getScale(),n=new t({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n},t.prototype.setRadius=function(e){this.radius_=e,this.render()},t}(Jke);const nOe=tOe;var iOe=function(){function i(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return i.prototype.clone=function(){var t=this.getColor();return new i({color:Array.isArray(t)?t.slice():t||void 0})},i.prototype.getColor=function(){return this.color_},i.prototype.setColor=function(t){this.color_=t},i}();const rOe=iOe;var sOe=function(){function i(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return i.prototype.clone=function(){var t=this.getColor();return new i({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},i.prototype.getColor=function(){return this.color_},i.prototype.getLineCap=function(){return this.lineCap_},i.prototype.getLineDash=function(){return this.lineDash_},i.prototype.getLineDashOffset=function(){return this.lineDashOffset_},i.prototype.getLineJoin=function(){return this.lineJoin_},i.prototype.getMiterLimit=function(){return this.miterLimit_},i.prototype.getWidth=function(){return this.width_},i.prototype.setColor=function(t){this.color_=t},i.prototype.setLineCap=function(t){this.lineCap_=t},i.prototype.setLineDash=function(t){this.lineDash_=t},i.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},i.prototype.setLineJoin=function(t){this.lineJoin_=t},i.prototype.setMiterLimit=function(t){this.miterLimit_=t},i.prototype.setWidth=function(t){this.width_=t},i}();const oOe=sOe;var $v=function(){function i(t){var e=t||{};this.geometry_=null,this.geometryFunction_=b$,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return i.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new i({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},i.prototype.getRenderer=function(){return this.renderer_},i.prototype.setRenderer=function(t){this.renderer_=t},i.prototype.setHitDetectionRenderer=function(t){this.hitDetectionRenderer_=t},i.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},i.prototype.getGeometry=function(){return this.geometry_},i.prototype.getGeometryFunction=function(){return this.geometryFunction_},i.prototype.getFill=function(){return this.fill_},i.prototype.setFill=function(t){this.fill_=t},i.prototype.getImage=function(){return this.image_},i.prototype.setImage=function(t){this.image_=t},i.prototype.getStroke=function(){return this.stroke_},i.prototype.setStroke=function(t){this.stroke_=t},i.prototype.getText=function(){return this.text_},i.prototype.setText=function(t){this.text_=t},i.prototype.getZIndex=function(){return this.zIndex_},i.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=b$,this.geometry_=t},i.prototype.setZIndex=function(t){this.zIndex_=t},i}(),QI=null;function lOe(i,t){if(!QI){var e=new rOe({color:"rgba(255,255,255,0.4)"}),n=new oOe({color:"#3399CC",width:1.25});QI=[new $v({image:new nOe({fill:e,stroke:n,radius:5}),fill:e,stroke:n})]}return QI}function b$(i){return i.getGeometry()}var cOe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),uOe=function(i){function t(e){var n=this,r=e||{},s=Lr({},r);return delete s.style,delete s.renderBuffer,delete s.updateWhileAnimating,delete s.updateWhileInteracting,(n=i.call(this,s)||this).declutter_=void 0!==r.declutter&&r.declutter,n.renderBuffer_=void 0!==r.renderBuffer?r.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(r.style),n.updateWhileAnimating_=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,n.updateWhileInteracting_=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,n}return cOe(t,i),t.prototype.getDeclutter=function(){return this.declutter_},t.prototype.getFeatures=function(e){return i.prototype.getFeatures.call(this,e)},t.prototype.getRenderBuffer=function(){return this.renderBuffer_},t.prototype.getRenderOrder=function(){return this.get("renderOrder")},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},t.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},t.prototype.renderDeclutter=function(e){e.declutterTree||(e.declutterTree=new v$(9)),this.getRenderer().renderDeclutter(e)},t.prototype.setRenderOrder=function(e){this.set("renderOrder",e)},t.prototype.setStyle=function(e){this.style_=void 0!==e?e:lOe,this.styleFunction_=null===e?void 0:function aOe(i){var t,e;"function"==typeof i?t=i:(Array.isArray(i)?e=i:(fn("function"==typeof i.getZIndex,41),e=[i]),t=function(){return e});return t}(this.style_),this.changed()},t}(wM);const dOe=uOe;var qv={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},zM=[qv.FILL],Ou=[qv.STROKE],kh=[qv.BEGIN_PATH],w$=[qv.CLOSE_PATH];const kt=qv;var hOe=function(){function i(){}return i.prototype.drawCustom=function(t,e,n,r){},i.prototype.drawGeometry=function(t){},i.prototype.setStyle=function(t){},i.prototype.drawCircle=function(t,e){},i.prototype.drawFeature=function(t,e){},i.prototype.drawGeometryCollection=function(t,e){},i.prototype.drawLineString=function(t,e){},i.prototype.drawMultiLineString=function(t,e){},i.prototype.drawMultiPoint=function(t,e){},i.prototype.drawMultiPolygon=function(t,e){},i.prototype.drawPoint=function(t,e){},i.prototype.drawPolygon=function(t,e){},i.prototype.drawText=function(t,e){},i.prototype.setFillStrokeStyle=function(t,e){},i.prototype.setImageStyle=function(t,e){},i.prototype.setTextStyle=function(t,e){},i}();const M$=hOe;var fOe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),pOe=function(i){function t(e,n,r,s){var o=i.call(this)||this;return o.tolerance=e,o.maxExtent=n,o.pixelRatio=s,o.maxLineWidth=0,o.resolution=r,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return fOe(t,i),t.prototype.applyPixelRatio=function(e){var n=this.pixelRatio;return 1==n?e:e.map(function(r){return r*n})},t.prototype.appendFlatPointCoordinates=function(e,n){for(var r=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,o=this.coordinates,a=o.length,l=0,c=e.length;l<c;l+=n)s[0]=e[l],s[1]=e[l+1],Iv(r,s)&&(o[a++]=s[0],o[a++]=s[1]);return a},t.prototype.appendFlatLineCoordinates=function(e,n,r,s,o,a){var l=this.coordinates,c=l.length,u=this.getBufferedMaxExtent();a&&(n+=s);var m,g,_,d=e[n],h=e[n+1],f=this.tmpCoordinate_,p=!0;for(m=n+s;m<r;m+=s)f[0]=e[m],f[1]=e[m+1],(_=aI(u,f))!==g?(p&&(l[c++]=d,l[c++]=h,p=!1),l[c++]=f[0],l[c++]=f[1]):1===_?(l[c++]=f[0],l[c++]=f[1],p=!1):p=!0,d=f[0],h=f[1],g=_;return(o&&p||m===n+s)&&(l[c++]=d,l[c++]=h),c},t.prototype.drawCustomCoordinates_=function(e,n,r,s,o){for(var a=0,l=r.length;a<l;++a){var c=r[a],u=this.appendFlatLineCoordinates(e,n,c,s,!1,!1);o.push(u),n=c}return n},t.prototype.drawCustom=function(e,n,r,s){this.beginGeometry(e,n);var c,u,d,h,f,o=e.getType(),a=e.getStride(),l=this.coordinates.length;switch(o){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),h=[];var p=e.getEndss();f=0;for(var m=0,g=p.length;m<g;++m){var _=[];f=this.drawCustomCoordinates_(c,f,p[m],a,_),h.push(_)}this.instructions.push([kt.CUSTOM,l,h,e,r,O6]),this.hitDetectionInstructions.push([kt.CUSTOM,l,h,e,s||r,O6]);break;case"Polygon":case"MultiLineString":d=[],c="Polygon"==o?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(c,0,e.getEnds(),a,d),this.instructions.push([kt.CUSTOM,l,d,e,r,NM]),this.hitDetectionInstructions.push([kt.CUSTOM,l,d,e,s||r,NM]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),u=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([kt.CUSTOM,l,u,e,r,Tm]),this.hitDetectionInstructions.push([kt.CUSTOM,l,u,e,s||r,Tm]);break;case"MultiPoint":c=e.getFlatCoordinates(),(u=this.appendFlatPointCoordinates(c,a))>l&&(this.instructions.push([kt.CUSTOM,l,u,e,r,Tm]),this.hitDetectionInstructions.push([kt.CUSTOM,l,u,e,s||r,Tm]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),this.instructions.push([kt.CUSTOM,l,u=this.coordinates.length,e,r]),this.hitDetectionInstructions.push([kt.CUSTOM,l,u,e,s||r])}this.endGeometry(n)},t.prototype.beginGeometry=function(e,n){this.beginGeometryInstruction1_=[kt.BEGIN_GEOMETRY,n,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[kt.BEGIN_GEOMETRY,n,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},t.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},t.prototype.reverseHitDetectionInstructions=function(){var e=this.hitDetectionInstructions;e.reverse();var n,s,o,r=e.length,a=-1;for(n=0;n<r;++n)(o=(s=e[n])[0])==kt.END_GEOMETRY?a=n:o==kt.BEGIN_GEOMETRY&&(s[2]=n,W1e(this.hitDetectionInstructions,a,n),a=-1)},t.prototype.setFillStrokeStyle=function(e,n){var r=this.state;if(e){var s=e.getColor();r.fillStyle=fl(s||vc)}else r.fillStyle=void 0;if(n){var o=n.getColor();r.strokeStyle=fl(o||Fv);var a=n.getLineCap();r.lineCap=void 0!==a?a:EM;var l=n.getLineDash();r.lineDash=l?l.slice():Ov;var c=n.getLineDashOffset();r.lineDashOffset=c||0;var u=n.getLineJoin();r.lineJoin=void 0!==u?u:bm;var d=n.getWidth();r.lineWidth=void 0!==d?d:1;var h=n.getMiterLimit();r.miterLimit=void 0!==h?h:10,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},t.prototype.createFill=function(e){var n=e.fillStyle,r=[kt.SET_FILL_STYLE,n];return"string"!=typeof n&&r.push(!0),r},t.prototype.applyStroke=function(e){this.instructions.push(this.createStroke(e))},t.prototype.createStroke=function(e){return[kt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]},t.prototype.updateFillStyle=function(e,n){var r=e.fillStyle;("string"!=typeof r||e.currentFillStyle!=r)&&(void 0!==r&&this.instructions.push(n.call(this,e)),e.currentFillStyle=r)},t.prototype.updateStrokeStyle=function(e,n){var r=e.strokeStyle,s=e.lineCap,o=e.lineDash,a=e.lineDashOffset,l=e.lineJoin,c=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=s||o!=e.currentLineDash&&!xh(e.currentLineDash,o)||e.currentLineDashOffset!=a||e.currentLineJoin!=l||e.currentLineWidth!=c||e.currentMiterLimit!=u)&&(void 0!==r&&n.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=s,e.currentLineDash=o,e.currentLineDashOffset=a,e.currentLineJoin=l,e.currentLineWidth=c,e.currentMiterLimit=u)},t.prototype.endGeometry=function(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[kt.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)},t.prototype.getBufferedMaxExtent=function(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=R8(this.maxExtent),this.maxLineWidth>0)&&oI(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_},t}(M$);const Yv=pOe;var mOe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),gOe=function(i){function t(e,n,r,s){var o=i.call(this,e,n,r,s)||this;return o.hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o.declutterMode_=void 0,o.declutterImageWithText_=void 0,o}return mOe(t,i),t.prototype.drawPoint=function(e,n){if(this.image_){this.beginGeometry(e,n);var r=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,s);this.instructions.push([kt.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([kt.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}},t.prototype.drawMultiPoint=function(e,n){if(this.image_){this.beginGeometry(e,n);var r=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,s);this.instructions.push([kt.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([kt.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}},t.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,i.prototype.finish.call(this)},t.prototype.setImageStyle=function(e,n){var r=e.getAnchor(),s=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n},t}(Yv);const _Oe=gOe;var vOe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),yOe=function(i){function t(e,n,r,s){return i.call(this,e,n,r,s)||this}return vOe(t,i),t.prototype.drawFlatCoordinates_=function(e,n,r,s){var o=this.coordinates.length,a=this.appendFlatLineCoordinates(e,n,r,s,!1,!1),l=[kt.MOVE_TO_LINE_TO,o,a];return this.instructions.push(l),this.hitDetectionInstructions.push(l),r},t.prototype.drawLineString=function(e,n){var r=this.state;if(void 0!==r.strokeStyle&&void 0!==r.lineWidth){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,n),this.hitDetectionInstructions.push([kt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Ov,0],kh);var a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(Ou),this.endGeometry(n)}},t.prototype.drawMultiLineString=function(e,n){var r=this.state;if(void 0!==r.strokeStyle&&void 0!==r.lineWidth){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,n),this.hitDetectionInstructions.push([kt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],kh);for(var a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride(),u=0,d=0,h=a.length;d<h;++d)u=this.drawFlatCoordinates_(l,u,a[d],c);this.hitDetectionInstructions.push(Ou),this.endGeometry(n)}},t.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Ou),this.reverseHitDetectionInstructions(),this.state=null,i.prototype.finish.call(this)},t.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Ou),e.lastStroke=this.coordinates.length),e.lastStroke=0,i.prototype.applyStroke.call(this,e),this.instructions.push(kh)},t}(Yv);const bOe=yOe;var xOe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),wOe=function(i){function t(e,n,r,s){return i.call(this,e,n,r,s)||this}return xOe(t,i),t.prototype.drawFlatCoordinatess_=function(e,n,r,s){var o=this.state,a=void 0!==o.fillStyle,l=void 0!==o.strokeStyle,c=r.length;this.instructions.push(kh),this.hitDetectionInstructions.push(kh);for(var u=0;u<c;++u){var d=r[u],h=this.coordinates.length,f=this.appendFlatLineCoordinates(e,n,d,s,!0,!l),p=[kt.MOVE_TO_LINE_TO,h,f];this.instructions.push(p),this.hitDetectionInstructions.push(p),l&&(this.instructions.push(w$),this.hitDetectionInstructions.push(w$)),n=d}return a&&(this.instructions.push(zM),this.hitDetectionInstructions.push(zM)),l&&(this.instructions.push(Ou),this.hitDetectionInstructions.push(Ou)),n},t.prototype.drawCircle=function(e,n){var r=this.state;if(void 0!==r.fillStyle||void 0!==r.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(e,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([kt.SET_FILL_STYLE,vc]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([kt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);var u=[kt.CIRCLE,c];this.instructions.push(kh,u),this.hitDetectionInstructions.push(kh,u),void 0!==r.fillStyle&&(this.instructions.push(zM),this.hitDetectionInstructions.push(zM)),void 0!==r.strokeStyle&&(this.instructions.push(Ou),this.hitDetectionInstructions.push(Ou)),this.endGeometry(n)}},t.prototype.drawPolygon=function(e,n){var r=this.state;if(void 0!==r.fillStyle||void 0!==r.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(e,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([kt.SET_FILL_STYLE,vc]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([kt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(n)}},t.prototype.drawMultiPolygon=function(e,n){var r=this.state;if(void 0!==r.fillStyle||void 0!==r.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(e,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([kt.SET_FILL_STYLE,vc]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([kt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride(),u=0,d=0,h=a.length;d<h;++d)u=this.drawFlatCoordinatess_(l,u,a[d],c);this.endGeometry(n)}},t.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var n=this.coordinates,r=0,s=n.length;r<s;++r)n[r]=Ah(n[r],e);return i.prototype.finish.call(this)},t.prototype.setFillStrokeStyles_=function(){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},t}(Yv);const C$=wOe;function COe(i,t,e,n,r){var d,h,f,p,m,g,_,v,y,s=e,o=e,a=0,l=0,c=e;for(d=e;d<n;d+=r){var b=t[d],x=t[d+1];void 0!==p&&(v=b-p,y=x-m,f=Math.sqrt(v*v+y*y),void 0!==g&&(l+=h,Math.acos((g*v+_*y)/(h*f))>i&&(l>a&&(a=l,s=c,o=d),l=0,c=d-r)),h=f,g=v,_=y),p=b,m=x}return(l+=f)>a?[c,d]:[s,o]}var SOe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Xv={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},EOe=function(i){function t(e,n,r,s){var o=i.call(this,e,n,r,s)||this;return o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o.declutterImageWithText_=void 0,o}return SOe(t,i),t.prototype.finish=function(){var e=i.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},t.prototype.drawText=function(e,n){var o=this.textState_;if(""!==this.text_&&o&&(this.textFillState_||this.textStrokeState_)){var a=this.coordinates,l=a.length,c=e.getType(),u=null,d=e.getStride();if("line"!==o.placement||"LineString"!=c&&"MultiLineString"!=c&&"Polygon"!=c&&"MultiPolygon"!=c){var E=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":u=e.getFlatCoordinates();break;case"LineString":u=e.getFlatMidpoint();break;case"Circle":u=e.getCenter();break;case"MultiLineString":u=e.getFlatMidpoints(),d=2;break;case"Polygon":u=e.getFlatInteriorPoint(),o.overflow||E.push(u[2]/this.resolution),d=3;break;case"MultiPolygon":var R=e.getFlatInteriorPoints();for(u=[],p=0,m=R.length;p<m;p+=3)o.overflow||E.push(R[p+2]/this.resolution),u.push(R[p],R[p+1]);if(0===u.length)return;d=2}if((w=this.appendFlatPointCoordinates(u,d))===l)return;if(E&&(w-l)/2!=u.length/d){var F=l/2;E=E.filter(function(O,q){var K=a[2*(F+q)]===u[q*d]&&a[2*(F+q)+1]===u[q*d+1];return K||--F,K})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,n);var N=o.padding;if(N!=Sh&&(o.scale[0]<0||o.scale[1]<0)){var S=o.padding[0],L=o.padding[1],Y=o.padding[2],I=o.padding[3];o.scale[0]<0&&(L=-L,I=-I),o.scale[1]<0&&(S=-S,Y=-Y),N=[S,L,Y,I]}var z=this.pixelRatio;this.instructions.push([kt.DRAW_IMAGE,l,w,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,N==Sh?Sh:N.map(function(O){return O*z}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]);var D=1/z;this.hitDetectionInstructions.push([kt.DRAW_IMAGE,l,w,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[D,D],NaN,void 0,this.declutterImageWithText_,N,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]),this.endGeometry(n)}else{if(!Ns(this.getBufferedMaxExtent(),e.getExtent()))return;var h=void 0;if(u=e.getFlatCoordinates(),"LineString"==c)h=[u.length];else if("MultiLineString"==c)h=e.getEnds();else if("Polygon"==c)h=e.getEnds().slice(0,1);else if("MultiPolygon"==c){var f=e.getEndss();h=[];for(var p=0,m=f.length;p<m;++p)h.push(f[p][0])}this.beginGeometry(e,n);for(var g=o.textAlign,_=0,v=void 0,y=0,b=h.length;y<b;++y){if(null==g){var x=COe(o.maxAngle,u,_,h[y],d);_=x[0],v=x[1]}else v=h[y];for(p=_;p<v;p+=d)a.push(u[p],u[p+1]);var w;_=h[y],this.drawChars_(l,w=a.length),l=w}this.endGeometry(n)}}},t.prototype.saveTextStates_=function(){var e=this.textStrokeState_,n=this.textState_,r=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));var o=this.textKey_;o in this.textStates||(this.textStates[o]={font:n.font,textAlign:n.textAlign||Nv,justify:n.justify,textBaseline:n.textBaseline||TM,scale:n.scale});var a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}))},t.prototype.drawChars_=function(e,n){var r=this.textStrokeState_,s=this.textState_,o=this.strokeKey_,a=this.textKey_,l=this.fillKey_;this.saveTextStates_();var c=this.pixelRatio,u=Xv[s.textBaseline],d=this.textOffsetY_*c,h=this.text_,f=r?r.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([kt.DRAW_CHARS,e,n,u,s.overflow,l,s.maxAngle,c,d,o,f*c,h,a,1]),this.hitDetectionInstructions.push([kt.DRAW_CHARS,e,n,u,s.overflow,l,s.maxAngle,1,d,o,f,h,a,1/c])},t.prototype.setTextStyle=function(e,n){var r,s,o;if(e){var a=e.getFill();a?((s=this.textFillState_)||(this.textFillState_=s={}),s.fillStyle=fl(a.getColor()||vc)):this.textFillState_=s=null;var l=e.getStroke();if(l){(o=this.textStrokeState_)||(this.textStrokeState_=o={});var c=l.getLineDash(),u=l.getLineDashOffset(),d=l.getWidth(),h=l.getMiterLimit();o.lineCap=l.getLineCap()||EM,o.lineDash=c?c.slice():Ov,o.lineDashOffset=void 0===u?0:u,o.lineJoin=l.getLineJoin()||bm,o.lineWidth=void 0===d?1:d,o.miterLimit=void 0===h?10:h,o.strokeStyle=fl(l.getColor()||Fv)}else this.textStrokeState_=o=null;r=this.textState_;var f=e.getFont()||e6;ZDe(f);var p=e.getScaleArray();r.overflow=e.getOverflow(),r.font=f,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||TM,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||Sh,r.scale=void 0===p?[1,1]:p;var m=e.getOffsetX(),g=e.getOffsetY(),_=e.getRotateWithView(),v=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===m?0:m,this.textOffsetY_=void 0===g?0:g,this.textRotateWithView_=void 0!==_&&_,this.textRotation_=void 0===v?0:v,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:Rn(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=s?"string"==typeof s.fillStyle?s.fillStyle:"|"+Rn(s.fillStyle):""}else this.text_="";this.declutterImageWithText_=n},t}(Yv),TOe={Circle:C$,Default:Yv,Image:_Oe,LineString:bOe,Polygon:C$,Text:EOe},DOe=function(){function i(t,e,n,r){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}return i.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var n=this.buildersByZIndex_[e];for(var r in n){var s=n[r].finish();t[e][r]=s}}return t},i.prototype.getBuilder=function(t,e){var n=void 0!==t?t.toString():"0",r=this.buildersByZIndex_[n];void 0===r&&(this.buildersByZIndex_[n]=r={});var s=r[e];return void 0===s&&(s=new(0,TOe[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=s),s},i}();const S$=DOe;function AOe(i,t,e,n,r,s,o,a,l,c,u,d){var h=i[t],f=i[t+1],p=0,m=0,g=0,_=0;function v(){p=h,m=f,h=i[t+=n],f=i[t+1],_+=g,g=Math.sqrt((h-p)*(h-p)+(f-m)*(f-m))}do{v()}while(t<e-n&&_+g<s);for(var y=0===g?0:(s-_)/g,b=Ch(p,h,y),x=Ch(m,f,y),w=t-n,E=_,R=s+a*l(c,r,u);t<e-n&&_+g<R;)v();var S,F=Ch(p,h,y=0===g?0:(R-_)/g),N=Ch(m,f,y);if(d){var L=[b,x,F,N];w6(L,0,4,2,d,L,L),S=L[0]>L[2]}else S=b>F;var D,Y=Math.PI,I=[],z=w+n===t;if(g=0,_=E,h=i[t=w],f=i[t+1],z)return v(),D=Math.atan2(f-m,h-p),S&&(D+=D>0?-Y:Y),I[0]=[P=(F+b)/2,O=(N+x)/2,(R-s)/2,D,r],I;for(var q=0,K=(r=r.replace(/\n/g," ")).length;q<K;){v();var Q=Math.atan2(f-m,h-p);if(S&&(Q+=Q>0?-Y:Y),void 0!==D){var j=Q-D;if(j+=j>Y?-2*Y:j<-Y?2*Y:0,Math.abs(j)>o)return null}D=Q;for(var we=q,fe=0;q<K;++q){var re=a*l(c,r[S?K-q-1:q],u);if(t+n<e&&_+g<s+fe+re/2)break;fe+=re}if(q!==we){var Ae=S?r.substring(K-we,K-q):r.substring(we,q),P=Ch(p,h,y=0===g?0:(s+fe/2-_)/g),O=Ch(m,f,y);I.push([P,O,fe/2,Q,Ae]),s+=fe}}return I}function E$(i,t,e,n){for(var r=i[t],s=i[t+1],o=0,a=t+n;a<e;a+=n){var l=i[a],c=i[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}var Rm=[1/0,1/0,-1/0,-1/0],Pu=[],wc=[],Mc=[],Lu=[];function T$(i){return i[3].declutterBox}var ROe=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function D$(i,t){return("start"===t||"end"===t)&&!ROe.test(i)&&(t="start"===t?"left":"right"),Xv[t]}function IOe(i,t,e){return e>0&&i.push("\n",""),i.push(t,""),i}var kOe=function(){function i(t,e,n,r){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return i.prototype.createLabel=function(t,e,n,r){var s=t+e+n+r;if(this.labels_[s])return this.labels_[s];var o=r?this.strokeStates[r]:null,a=n?this.fillStates[n]:null,l=this.textStates[e],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],d=Array.isArray(t),h=l.justify?Xv[l.justify]:D$(Array.isArray(t)?t[0]:t,l.textAlign||Nv),f=r&&o.lineWidth?o.lineWidth:0,p=d?t:t.split("\n").reduce(IOe,[]),m=function JDe(i,t){for(var e=[],n=[],r=[],s=0,o=0,a=0,l=0,c=0,u=t.length;c<=u;c+=2){var d=t[c];if("\n"!==d&&c!==u){var h=t[c+1]||i.font,f=DM(h,d);e.push(f),o+=f;var p=QDe(h);n.push(p),l=Math.max(l,p)}else s=Math.max(s,o),r.push(o),o=0,a+=l}return{width:s,height:a,widths:e,heights:n,lineWidths:r}}(l,p),v=m.widths,y=m.heights,b=m.lineWidths,x=m.width+f,w=[],E=(x+2)*u[0],R=(m.height+f)*u[1],F={width:E<0?Math.floor(E):Math.ceil(E),height:R<0?Math.floor(R):Math.ceil(R),contextInstructions:w};(1!=u[0]||1!=u[1])&&w.push("scale",u),r&&(w.push("strokeStyle",o.strokeStyle),w.push("lineWidth",f),w.push("lineCap",o.lineCap),w.push("lineJoin",o.lineJoin),w.push("miterLimit",o.miterLimit),(uM?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(w.push("setLineDash",[o.lineDash]),w.push("lineDashOffset",o.lineDashOffset))),n&&w.push("fillStyle",a.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");for(var q,S=.5-h,L=h*x+S*f,Y=[],I=[],z=0,D=0,P=0,O=0,K=0,Q=p.length;K<Q;K+=2){var j=p[K];if("\n"!==j){var we=p[K+1]||l.font;we!==q&&(r&&Y.push("font",we),n&&I.push("font",we),q=we),z=Math.max(z,y[P]);var fe=[j,L+S*v[P]+h*(v[P]-b[O]),.5*(f+z)+D];L+=v[P],r&&Y.push("strokeText",fe),n&&I.push("fillText",fe),++P}else D+=z,z=0,L=h*x+S*f,++O}return Array.prototype.push.apply(w,Y),Array.prototype.push.apply(w,I),this.labels_[s]=F,F},i.prototype.replayTextBackground_=function(t,e,n,r,s,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},i.prototype.calculateImageOrLabelDimensions_=function(t,e,n,r,s,o,a,l,c,u,d,h,f,p,m,g){var F,_=n-(a*=h[0]),v=r-(l*=h[1]),y=s+c>t?t-c:s,b=o+u>e?e-u:o,x=p[3]+y*h[0]+p[1],w=p[0]+b*h[1]+p[2],E=_-p[3],R=v-p[0];return(m||0!==d)&&(Pu[0]=E,Lu[0]=E,Pu[1]=R,wc[1]=R,wc[0]=E+x,Mc[0]=wc[0],Mc[1]=R+w,Lu[1]=Mc[1]),0!==d?(cr(F=dl([1,0,0,1,0,0],n,r,1,1,d,-n,-r),Pu),cr(F,wc),cr(F,Mc),cr(F,Lu),hl(Math.min(Pu[0],wc[0],Mc[0],Lu[0]),Math.min(Pu[1],wc[1],Mc[1],Lu[1]),Math.max(Pu[0],wc[0],Mc[0],Lu[0]),Math.max(Pu[1],wc[1],Mc[1],Lu[1]),Rm)):hl(Math.min(E,E+x),Math.min(R,R+w),Math.max(E,E+x),Math.max(R,R+w),Rm),f&&(_=Math.round(_),v=Math.round(v)),{drawImageX:_,drawImageY:v,drawImageW:y,drawImageH:b,originX:c,originY:u,declutterBox:{minX:Rm[0],minY:Rm[1],maxX:Rm[2],maxY:Rm[3],value:g},canvasTransform:F,scale:h}},i.prototype.replayImageOrLabel_=function(t,e,n,r,s,o,a){var c=r.declutterBox,u=t.canvas,d=a?a[2]*r.scale[0]/2:0;return c.minX-d<=u.width/e&&c.maxX+d>=0&&c.minY-d<=u.height/e&&c.maxY+d>=0&&(!(!o&&!a)&&this.replayTextBackground_(t,Pu,wc,Mc,Lu,o,a),function eAe(i,t,e,n,r,s,o,a,l,c,u){i.save(),1!==e&&(i.globalAlpha*=e),t&&i.setTransform.apply(i,t),n.contextInstructions?(i.translate(l,c),i.scale(u[0],u[1]),function tAe(i,t){for(var e=i.contextInstructions,n=0,r=e.length;n<r;n+=2)Array.isArray(e[n+1])?t[e[n]].apply(t,e[n+1]):t[e[n]]=e[n+1]}(n,i)):u[0]<0||u[1]<0?(i.translate(l,c),i.scale(u[0],u[1]),i.drawImage(n,r,s,o,a,0,0,o,a)):i.drawImage(n,r,s,o,a,l,c,o*u[0],a*u[1]),i.restore()}(t,r.canvasTransform,s,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},i.prototype.fill_=function(t){if(this.alignFill_){var e=cr(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},i.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},i.prototype.drawLabelWithPointPlacement_=function(t,e,n,r){var s=this.textStates[e],o=this.createLabel(t,e,r,n),a=this.strokeStates[n],l=this.pixelRatio,c=D$(Array.isArray(t)?t[0]:t,s.textAlign||Nv),u=Xv[s.textBaseline||TM],d=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:c*(o.width/l-2*s.scale[0])+2*(.5-c)*d,anchorY:u*o.height/l+2*(.5-u)*d}},i.prototype.execute_=function(t,e,n,r,s,o,a,l){var c;this.pixelCoordinates_&&xh(n,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Dh(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),function uDe(i,t){i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5]}(this.renderedTransform_,n));for(var f,p,m,g,_,v,y,b,x,w,E,R,O,q,K,Q,u=0,d=r.length,h=0,F=0,N=0,S=null,L=null,Y=this.coordinateCache_,I=this.viewRotation_,z=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:I},P=this.instructions!=r||this.overlaps?0:200;u<d;){var j=r[u];switch(j[0]){case kt.BEGIN_GEOMETRY:Q=j[3],(O=j[1]).getGeometry()?void 0===a||Ns(a,Q.getExtent())?++u:u=j[2]+1:u=j[2];break;case kt.BEGIN_PATH:F>P&&(this.fill_(t),F=0),N>P&&(t.stroke(),N=0),!F&&!N&&(t.beginPath(),g=NaN,_=NaN),++u;break;case kt.CIRCLE:var fe=c[h=j[1]],_e=c[h+1],Oe=c[h+2]-fe,tt=c[h+3]-_e,ye=Math.sqrt(Oe*Oe+tt*tt);t.moveTo(fe+ye,_e),t.arc(fe,_e,ye,0,2*Math.PI,!0),++u;break;case kt.CLOSE_PATH:t.closePath(),++u;break;case kt.CUSTOM:h=j[1],f=j[2];var ue=j[4],pe=6==j.length?j[5]:void 0;D.geometry=j[3],D.feature=O,u in Y||(Y[u]=[]);var Ee=Y[u];pe?pe(c,h,f,2,Ee):(Ee[0]=c[h],Ee[1]=c[h+1],Ee.length=2),ue(Ee,D),++u;break;case kt.DRAW_IMAGE:h=j[1],f=j[2],p=j[4],m=j[5];var Ke=j[6],Ne=j[7],De=j[8],je=j[9],it=j[10],$t=j[11],xn=j[12],W=j[13],B=j[14],le=j[15];if(!(b=j[3])&&j.length>=20){var Me=this.drawLabelWithPointPlacement_(x=j[19],w=j[20],E=j[21],R=j[22]);j[3]=b=Me.label,j[4]=p=(Me.anchorX-j[23])*this.pixelRatio,j[5]=m=(Me.anchorY-j[24])*this.pixelRatio,j[6]=Ke=b.height,j[13]=W=b.width}var dt=void 0;j.length>25&&(dt=j[25]);var U=void 0,Ce=void 0,nt=void 0;j.length>17?(U=j[16],Ce=j[17],nt=j[18]):(U=Sh,Ce=!1,nt=!1),it&&z?$t+=I:!it&&!z&&($t-=I);for(var Pe=0;h<f;h+=2)if(!(dt&&dt[Pe++]<W/this.pixelRatio)){var ke=[t,e,b,X=this.calculateImageOrLabelDimensions_(b.width,b.height,c[h],c[h+1],W,Ke,p,m,De,je,$t,xn,s,U,Ce||nt,O),Ne,Ce?S:null,nt?L:null];if(l){if("none"===B)continue;if("obstacle"===B){l.insert(X.declutterBox);continue}var Se=void 0,xt=void 0;if(le){var ze=f-h;if(!le[ze]){le[ze]=ke;continue}if(Se=le[ze],delete le[ze],xt=T$(Se),l.collides(xt))continue}if(l.collides(X.declutterBox))continue;Se&&(l.insert(xt),this.replayImageOrLabel_.apply(this,Se)),l.insert(X.declutterBox)}this.replayImageOrLabel_.apply(this,ke)}++u;break;case kt.DRAW_CHARS:var ht=j[1],Be=j[2],Bt=j[3],Qn=j[4];R=j[5];var pn=j[6],_o=j[7],vo=j[8];E=j[9];var Zv=j[10];x=j[11];var Oh=[j[13],j[13]],Qv=this.textStates[w=j[12]],Cc=Qv.font,Bu=[Qv.scale[0]*_o,Qv.scale[1]*_o],Ph=void 0;Cc in this.widths_?Ph=this.widths_[Cc]:this.widths_[Cc]=Ph={};var GM=E$(c,ht,Be,2),WM=Math.abs(Bu[0])*n6(Cc,x,Ph);if(Qn||WM<=GM){var ce=AOe(c,ht,Be,2,x,(GM-WM)*Xv[this.textStates[w].textAlign],pn,Math.abs(Bu[0]),n6,Cc,Ph,z?0:this.viewRotation_);e:if(ce){var oe=[],ge=void 0,Tt=void 0,yt=void 0,wt=void 0;if(E)for(ge=0,Tt=ce.length;ge<Tt;++ge){yt=this.createLabel((wt=ce[ge])[4],w,"",E);var X=this.calculateImageOrLabelDimensions_(yt.width,yt.height,wt[0],wt[1],yt.width,yt.height,p=wt[2]+(Bu[0]<0?-Zv:Zv),m=Bt*yt.height+2*(.5-Bt)*Zv*Bu[1]/Bu[0]-vo,0,0,wt[3],Oh,!1,Sh,!1,O);if(l&&l.collides(X.declutterBox))break e;oe.push([t,e,yt,X,1,null,null])}if(R)for(ge=0,Tt=ce.length;ge<Tt;++ge){if(yt=this.createLabel((wt=ce[ge])[4],w,R,""),X=this.calculateImageOrLabelDimensions_(yt.width,yt.height,wt[0],wt[1],yt.width,yt.height,p=wt[2],m=Bt*yt.height-vo,0,0,wt[3],Oh,!1,Sh,!1,O),l&&l.collides(X.declutterBox))break e;oe.push([t,e,yt,X,1,null,null])}l&&l.load(oe.map(T$));for(var Sn=0,_n=oe.length;Sn<_n;++Sn)this.replayImageOrLabel_.apply(this,oe[Sn])}}++u;break;case kt.END_GEOMETRY:if(void 0!==o){var vn=o(O=j[1],Q);if(vn)return vn}++u;break;case kt.FILL:P?F++:this.fill_(t),++u;break;case kt.MOVE_TO_LINE_TO:for(f=j[2],y=(K=c[(h=j[1])+1])+.5|0,((v=(q=c[h])+.5|0)!==g||y!==_)&&(t.moveTo(q,K),g=v,_=y),h+=2;h<f;h+=2)v=(q=c[h])+.5|0,y=(K=c[h+1])+.5|0,(h==f-2||v!==g||y!==_)&&(t.lineTo(q,K),g=v,_=y);++u;break;case kt.SET_FILL_STYLE:S=j,this.alignFill_=j[2],F&&(this.fill_(t),F=0,N&&(t.stroke(),N=0)),t.fillStyle=j[1],++u;break;case kt.SET_STROKE_STYLE:L=j,N&&(t.stroke(),N=0),this.setStrokeStyle_(t,j),++u;break;case kt.STROKE:P?N++:t.stroke(),++u;break;default:++u}}F&&this.fill_(t),N&&t.stroke()},i.prototype.execute=function(t,e,n,r,s,o){this.viewRotation_=r,this.execute_(t,e,n,this.instructions,s,void 0,void 0,o)},i.prototype.executeHitDetection=function(t,e,n,r,s){return this.viewRotation_=n,this.execute_(t,1,e,this.hitDetectionInstructions,!0,r,s)},i}();const OOe=kOe;var JI=["Polygon","Circle","LineString","Image","Text","Default"],POe=function(){function i(t,e,n,r,s,o){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(s)}return i.prototype.clip=function(t,e){var n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},i.prototype.createExecutors_=function(t){for(var e in t){var n=this.executorsByZIndex_[e];void 0===n&&(this.executorsByZIndex_[e]=n={});var r=t[e];for(var s in r)n[s]=new OOe(this.resolution_,this.pixelRatio_,this.overlaps_,r[s])}},i.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var n=this.executorsByZIndex_[e],r=0,s=t.length;r<s;++r)if(t[r]in n)return!0;return!1},i.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,s,o){var a=2*(r=Math.round(r))+1,l=dl(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-n,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=mo(a,a));var d,u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(mm(d=[1/0,1/0,-1/0,-1/0],t),oI(d,e*(this.renderBuffer_+r),d));var f,h=function LOe(i){if(void 0!==ek[i])return ek[i];for(var t=2*i+1,e=i*i,n=new Array(e+1),r=0;r<=i;++r)for(var s=0;s<=i;++s){var o=r*r+s*s;if(o>e)break;var a=n[o];a||(n[o]=a=[]),a.push(4*((i+r)*t+(i+s))+3),r>0&&a.push(4*((i-r)*t+(i+s))+3),s>0&&(a.push(4*((i+r)*t+(i-s))+3),r>0&&a.push(4*((i-r)*t+(i-s))+3))}for(var l=[],c=(r=0,n.length);r<c;++r)n[r]&&l.push.apply(l,n[r]);return ek[i]=l,l}(r);function p(w,E){for(var R=u.getImageData(0,0,a,a).data,F=0,N=h.length;F<N;F++)if(R[h[F]]>0){if(!o||"Image"!==f&&"Text"!==f||-1!==o.indexOf(w)){var S=(h[F]-3)/4,L=r-S%a,Y=r-(S/a|0),I=s(w,E,L*L+Y*Y);if(I)return I}u.clearRect(0,0,a,a);break}}var g,_,v,y,b,m=Object.keys(this.executorsByZIndex_).map(Number);for(m.sort(bh),g=m.length-1;g>=0;--g){var x=m[g].toString();for(v=this.executorsByZIndex_[x],_=JI.length-1;_>=0;--_)if(void 0!==(y=v[f=JI[_]])&&(b=y.executeHitDetection(u,l,n,p,d)))return b}},i.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var n=e[0],r=e[1],s=e[2],o=e[3],a=[n,r,n,o,s,o,s,r];return Dh(a,0,8,2,t,a),a},i.prototype.isEmpty=function(){return Av(this.executorsByZIndex_)},i.prototype.execute=function(t,e,n,r,s,o,a){var l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(bh),this.maxExtent_&&(t.save(),this.clip(t,n));var u,d,h,f,p,m,c=o||JI;for(a&&l.reverse(),u=0,d=l.length;u<d;++u){var g=l[u].toString();for(p=this.executorsByZIndex_[g],h=0,f=c.length;h<f;++h)void 0!==(m=p[c[h]])&&m.execute(t,e,n,r,s,a)}this.maxExtent_&&t.restore()},i}(),ek={};const A$=POe;var FOe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),NOe=function(i){function t(e,n,r,s,o,a,l){var c=i.call(this)||this;return c.context_=e,c.pixelRatio_=n,c.extent_=r,c.transform_=s,c.viewRotation_=o,c.squaredTolerance_=a,c.userTransform_=l,c.contextFillState_=null,c.contextStrokeState_=null,c.contextTextState_=null,c.fillState_=null,c.strokeState_=null,c.image_=null,c.imageAnchorX_=0,c.imageAnchorY_=0,c.imageHeight_=0,c.imageOpacity_=0,c.imageOriginX_=0,c.imageOriginY_=0,c.imageRotateWithView_=!1,c.imageRotation_=0,c.imageScale_=[0,0],c.imageWidth_=0,c.text_="",c.textOffsetX_=0,c.textOffsetY_=0,c.textRotateWithView_=!1,c.textRotation_=0,c.textScale_=[0,0],c.textFillState_=null,c.textStrokeState_=null,c.textState_=null,c.pixelCoordinates_=[],c.tmpLocalTransform_=[1,0,0,1,0,0],c}return FOe(t,i),t.prototype.drawImages_=function(e,n,r,s){if(this.image_){var o=Dh(e,n,r,s,this.transform_,this.pixelCoordinates_),a=this.context_,l=this.tmpLocalTransform_,c=a.globalAlpha;1!=this.imageOpacity_&&(a.globalAlpha=c*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var d=0,h=o.length;d<h;d+=2){var f=o[d]-this.imageAnchorX_,p=o[d+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var m=f+this.imageAnchorX_,g=p+this.imageAnchorY_;dl(l,m,g,1,1,u,-m,-g),a.setTransform.apply(a,l),a.translate(m,g),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.setTransform(1,0,0,1,0,0)}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,p,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(a.globalAlpha=c)}},t.prototype.drawText_=function(e,n,r,s){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=Dh(e,n,r,s,this.transform_,this.pixelCoordinates_),a=this.context_,l=this.textRotation_;for(this.textRotateWithView_&&(l+=this.viewRotation_);n<r;n+=s){var c=o[n]+this.textOffsetX_,u=o[n+1]+this.textOffsetY_;if(0!==l||1!=this.textScale_[0]||1!=this.textScale_[1]){var d=dl(this.tmpLocalTransform_,c,u,1,1,l,-c,-u);a.setTransform.apply(a,d),a.translate(c,u),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&a.strokeText(this.text_,c,u),this.textFillState_&&a.fillText(this.text_,c,u)}}},t.prototype.moveToLineTo_=function(e,n,r,s,o){var a=this.context_,l=Dh(e,n,r,s,this.transform_,this.pixelCoordinates_);a.moveTo(l[0],l[1]);var c=l.length;o&&(c-=2);for(var u=2;u<c;u+=2)a.lineTo(l[u],l[u+1]);return o&&a.closePath(),r},t.prototype.drawRings_=function(e,n,r,s){for(var o=0,a=r.length;o<a;++o)n=this.moveToLineTo_(e,n,r[o],s,!0);return n},t.prototype.drawCircle=function(e){if(Ns(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=function nRe(i,t,e){var n=i.getFlatCoordinates();if(n){var r=i.getStride();return Dh(n,0,n.length,r,t,e)}return null}(e,this.transform_,this.pixelCoordinates_),r=n[2]-n[0],s=n[3]-n[1],o=Math.sqrt(r*r+s*s),a=this.context_;a.beginPath(),a.arc(n[0],n[1],o,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}},t.prototype.setStyle=function(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())},t.prototype.setTransform=function(e){this.transform_=e},t.prototype.drawGeometry=function(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}},t.prototype.drawFeature=function(e,n){var r=n.getGeometryFunction()(e);!r||!Ns(this.extent_,r.getExtent())||(this.setStyle(n),this.drawGeometry(r))},t.prototype.drawGeometryCollection=function(e){for(var n=e.getGeometriesArray(),r=0,s=n.length;r<s;++r)this.drawGeometry(n[r])},t.prototype.drawPoint=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),""!==this.text_&&this.drawText_(n,0,n.length,r)},t.prototype.drawMultiPoint=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),""!==this.text_&&this.drawText_(n,0,n.length,r)},t.prototype.drawLineString=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ns(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,r=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),n.stroke()}if(""!==this.text_){var s=e.getFlatMidpoint();this.drawText_(s,0,2,2)}}},t.prototype.drawMultiLineString=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=e.getExtent();if(Ns(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,s=e.getFlatCoordinates(),o=0,a=e.getEnds(),l=e.getStride();r.beginPath();for(var c=0,u=a.length;c<u;++c)o=this.moveToLineTo_(s,o,a[c],l,!1);r.stroke()}if(""!==this.text_){var d=e.getFlatMidpoints();this.drawText_(d,0,d.length,2)}}},t.prototype.drawPolygon=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ns(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_;n.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(""!==this.text_){var r=e.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},t.prototype.drawMultiPolygon=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ns(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_,r=e.getOrientedFlatCoordinates(),s=0,o=e.getEndss(),a=e.getStride();n.beginPath();for(var l=0,c=o.length;l<c;++l)s=this.drawRings_(r,s,o[l],a);this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(""!==this.text_){var d=e.getFlatInteriorPoints();this.drawText_(d,0,d.length,2)}}},t.prototype.setContextFillState_=function(e){var n=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})},t.prototype.setContextStrokeState_=function(e){var n=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,n.lineCap=e.lineCap),n.setLineDash&&(xh(r.lineDash,e.lineDash)||n.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset)),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})},t.prototype.setContextTextState_=function(e){var n=this.context_,r=this.contextTextState_,s=e.textAlign?e.textAlign:Nv;r?(r.font!=e.font&&(r.font=e.font,n.font=e.font),r.textAlign!=s&&(r.textAlign=s,n.textAlign=s),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=s,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})},t.prototype.setFillStrokeStyle=function(e,n){var r=this;if(e){var s=e.getColor();this.fillState_={fillStyle:fl(s||vc)}}else this.fillState_=null;if(n){var o=n.getColor(),a=n.getLineCap(),l=n.getLineDash(),c=n.getLineDashOffset(),u=n.getLineJoin(),d=n.getWidth(),h=n.getMiterLimit(),f=l||Ov;this.strokeState_={lineCap:void 0!==a?a:EM,lineDash:1===this.pixelRatio_?f:f.map(function(p){return p*r.pixelRatio_}),lineDashOffset:(c||0)*this.pixelRatio_,lineJoin:void 0!==u?u:bm,lineWidth:(void 0!==d?d:1)*this.pixelRatio_,miterLimit:void 0!==h?h:10,strokeStyle:fl(o||Fv)}}else this.strokeState_=null},t.prototype.setImageStyle=function(e){var n;if(e&&(n=e.getSize())){var r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*this.pixelRatio_,this.imageAnchorY_=r[1]*this.pixelRatio_,this.imageHeight_=n[1]*this.pixelRatio_,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation(),this.imageScale_=e.getScaleArray(),this.imageWidth_=n[0]*this.pixelRatio_}else this.image_=null},t.prototype.setTextStyle=function(e){if(e){var n=e.getFill();if(n){var r=n.getColor();this.textFillState_={fillStyle:fl(r||vc)}}else this.textFillState_=null;var s=e.getStroke();if(s){var o=s.getColor(),a=s.getLineCap(),l=s.getLineDash(),c=s.getLineDashOffset(),u=s.getLineJoin(),d=s.getWidth(),h=s.getMiterLimit();this.textStrokeState_={lineCap:void 0!==a?a:EM,lineDash:l||Ov,lineDashOffset:c||0,lineJoin:void 0!==u?u:bm,lineWidth:void 0!==d?d:1,miterLimit:void 0!==h?h:10,strokeStyle:fl(o||Fv)}}else this.textStrokeState_=null;var f=e.getFont(),p=e.getOffsetX(),m=e.getOffsetY(),g=e.getRotateWithView(),_=e.getRotation(),v=e.getScaleArray(),y=e.getText(),b=e.getTextAlign(),x=e.getTextBaseline();this.textState_={font:void 0!==f?f:e6,textAlign:void 0!==b?b:Nv,textBaseline:void 0!==x?x:TM},this.text_=void 0!==y?Array.isArray(y)?y.reduce(function(w,E,R){return w+(R%2?" ":E)},""):y:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==m?this.pixelRatio_*m:0,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0!==_?_:0,this.textScale_=[this.pixelRatio_*v[0],this.pixelRatio_*v[1]]}else this.text_=""},t}(M$);const BOe=NOe;var VOe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Kv=null,HOe=function(i){function t(e,n,r,s,o,a){var l=i.call(this)||this;return l.hitDetectionImage_=null,l.image_=e||new Image,null!==s&&(l.image_.crossOrigin=s),l.canvas_={},l.color_=a,l.unlisten_=null,l.imageState_=o,l.size_=r,l.src_=n,l}return VOe(t,i),t.prototype.isTainted_=function(){if(void 0===this.tainted_&&2===this.imageState_){Kv||(Kv=mo(1,1)),Kv.drawImage(this.image_,0,0);try{Kv.getImageData(0,0,1,1),this.tainted_=!1}catch(e){Kv=null,this.tainted_=!0}}return!0===this.tainted_},t.prototype.dispatchChangeEvent_=function(){this.dispatchEvent("change")},t.prototype.handleImageError_=function(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()},t.prototype.handleImageLoad_=function(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},t.prototype.getImage=function(e){return this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_},t.prototype.getPixelRatio=function(e){return this.replaceColor_(e),this.canvas_[e]?e:1},t.prototype.getImageState=function(){return this.imageState_},t.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],n=this.size_[1],r=mo(e,n);r.fillRect(0,0,e,n),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},t.prototype.getSize=function(){return this.size_},t.prototype.getSrc=function(){return this.src_},t.prototype.load=function(){if(0==this.imageState_){this.imageState_=1;try{this.image_.src=this.src_}catch(e){this.handleImageError_()}this.unlisten_=$I(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},t.prototype.replaceColor_=function(e){if(this.color_&&!this.canvas_[e]&&2===this.imageState_){var n=document.createElement("canvas");this.canvas_[e]=n,n.width=Math.ceil(this.image_.width*e),n.height=Math.ceil(this.image_.height*e);var r=n.getContext("2d");if(r.scale(e,e),r.drawImage(this.image_,0,0),r.globalCompositeOperation="multiply","multiply"===r.globalCompositeOperation||this.isTainted_())r.fillStyle=V8(this.color_),r.fillRect(0,0,n.width/e,n.height/e),r.globalCompositeOperation="destination-in",r.drawImage(this.image_,0,0);else{for(var s=r.getImageData(0,0,n.width,n.height),o=s.data,a=this.color_[0]/255,l=this.color_[1]/255,c=this.color_[2]/255,u=this.color_[3],d=0,h=o.length;d<h;d+=4)o[d]*=a,o[d+1]*=l,o[d+2]*=c,o[d+3]*=u;r.putImageData(s,0,0)}}},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(hm),zOe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),GOe=function(i){function t(e){var n=this,r=e||{};(n=i.call(this,{opacity:void 0!==r.opacity?r.opacity:1,rotation:void 0!==r.rotation?r.rotation:0,scale:void 0!==r.scale?r.scale:1,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:void 0!==r.rotateWithView&&r.rotateWithView,declutterMode:r.declutterMode})||this).anchor_=void 0!==r.anchor?r.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:"top-left",n.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:"fraction",n.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:"fraction",n.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var c=void 0!==r.img?r.img:null;n.imgSize_=r.imgSize;var u=r.src;fn(!(void 0!==u&&c),4),fn(!c||c&&n.imgSize_,5),(void 0===u||0===u.length)&&c&&(u=c.src||Rn(c)),fn(void 0!==u&&u.length>0,6);var d=void 0!==r.src?0:2;return n.color_=void 0!==r.color?yM(r.color):null,n.iconImage_=function UOe(i,t,e,n,r,s){var o=bM.get(t,n,s);return o||(o=new HOe(i,t,e,n,r,s),bM.set(t,n,s,o)),o}(c,u,void 0!==n.imgSize_?n.imgSize_:null,n.crossOrigin_,d,n.color_),n.offset_=void 0!==r.offset?r.offset:[0,0],n.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:"top-left",n.origin_=null,n.size_=void 0!==r.size?r.size:null,n}return zOe(t,i),t.prototype.clone=function(){var e=this.getScale();return new t({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(e)?e.slice():e,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},t.prototype.getAnchor=function(){var e=this.normalizedAnchor_;if(!e){e=this.anchor_;var n=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!n)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=n[0]),"fraction"==this.anchorYUnits_&&(e[1]*=n[1])}if("top-left"!=this.anchorOrigin_){if(!n)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+n[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+n[1])}this.normalizedAnchor_=e}var r=this.getDisplacement();return[e[0]-r[0],e[1]+r[1]]},t.prototype.setAnchor=function(e){this.anchor_=e,this.normalizedAnchor_=null},t.prototype.getColor=function(){return this.color_},t.prototype.getImage=function(e){return this.iconImage_.getImage(e)},t.prototype.getPixelRatio=function(e){return this.iconImage_.getPixelRatio(e)},t.prototype.getImageSize=function(){return this.iconImage_.getSize()},t.prototype.getImageState=function(){return this.iconImage_.getImageState()},t.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},t.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var e=this.offset_;if("top-left"!=this.offsetOrigin_){var n=this.getSize(),r=this.iconImage_.getSize();if(!n||!r)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=r[0]-n[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=r[1]-n[1]-e[1])}return this.origin_=e,this.origin_},t.prototype.getSrc=function(){return this.iconImage_.getSrc()},t.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},t.prototype.listenImageChange=function(e){this.iconImage_.addEventListener("change",e)},t.prototype.load=function(){this.iconImage_.load()},t.prototype.unlistenImageChange=function(e){this.iconImage_.removeEventListener("change",e)},t}(y$);const WOe=GOe;var pl=.5,R$={Point:function nPe(i,t,e,n,r){var a,s=e.getImage(),o=e.getText();if(s){if(2!=s.getImageState())return;var l=i;if(r){var c=s.getDeclutterMode();if("none"!==c)if(l=r,"obstacle"===c){var u=i.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,a),u.drawPoint(t,n)}else o&&o.getText()&&(a={})}var d=l.getBuilder(e.getZIndex(),"Image");d.setImageStyle(s,a),d.drawPoint(t,n)}if(o&&o.getText()){var h=i;r&&(h=r);var f=h.getBuilder(e.getZIndex(),"Text");f.setTextStyle(o,a),f.drawText(t,n)}},LineString:function JOe(i,t,e,n,r){var s=e.getStroke();if(s){var o=i.getBuilder(e.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(t,n)}var a=e.getText();if(a&&a.getText()){var l=(r||i).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,n)}},Polygon:function rPe(i,t,e,n,r){var s=e.getFill(),o=e.getStroke();if(s||o){var a=i.getBuilder(e.getZIndex(),"Polygon");a.setFillStrokeStyle(s,o),a.drawPolygon(t,n)}var l=e.getText();if(l&&l.getText()){var c=(r||i).getBuilder(e.getZIndex(),"Text");c.setTextStyle(l),c.drawText(t,n)}},MultiPoint:function iPe(i,t,e,n,r){var a,s=e.getImage(),o=e.getText();if(s){if(2!=s.getImageState())return;var l=i;if(r){var c=s.getDeclutterMode();if("none"!==c)if(l=r,"obstacle"===c){var u=i.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,a),u.drawMultiPoint(t,n)}else o&&o.getText()&&(a={})}var d=l.getBuilder(e.getZIndex(),"Image");d.setImageStyle(s,a),d.drawMultiPoint(t,n)}if(o&&o.getText()){var h=i;r&&(h=r);var f=h.getBuilder(e.getZIndex(),"Text");f.setTextStyle(o,a),f.drawText(t,n)}},MultiLineString:function ePe(i,t,e,n,r){var s=e.getStroke();if(s){var o=i.getBuilder(e.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(t,n)}var a=e.getText();if(a&&a.getText()){var l=(r||i).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,n)}},MultiPolygon:function tPe(i,t,e,n,r){var s=e.getFill(),o=e.getStroke();if(o||s){var a=i.getBuilder(e.getZIndex(),"Polygon");a.setFillStrokeStyle(s,o),a.drawMultiPolygon(t,n)}var l=e.getText();if(l&&l.getText()){var c=(r||i).getBuilder(e.getZIndex(),"Text");c.setTextStyle(l),c.drawText(t,n)}},GeometryCollection:function QOe(i,t,e,n,r){var o,a,s=t.getGeometriesArray();for(o=0,a=s.length;o<a;++o)(0,R$[s[o].getType()])(i,s[o],e,n,r)},Circle:function KOe(i,t,e,n,r){var s=e.getFill(),o=e.getStroke();if(s||o){var a=i.getBuilder(e.getZIndex(),"Circle");a.setFillStrokeStyle(s,o),a.drawCircle(t,n)}var l=e.getText();if(l&&l.getText()){var c=(r||i).getBuilder(e.getZIndex(),"Text");c.setTextStyle(l),c.drawText(t,n)}}};function YOe(i,t){return parseInt(Rn(i),10)-parseInt(Rn(t),10)}function tk(i,t){return.5*i/t}function I$(i,t,e,n,r,s,o){var a=!1,l=e.getImage();if(l){var c=l.getImageState();2==c||3==c?l.unlistenImageChange(r):(0==c&&l.load(),l.listenImageChange(r),a=!0)}return function ZOe(i,t,e,n,r,s){var o=e.getGeometryFunction()(t);if(o){var a=o.simplifyTransformed(n,r);e.getRenderer()?k$(i,a,e,t):(0,R$[a.getType()])(i,a,e,t,s)}}(i,t,e,n,s,o),a}function k$(i,t,e,n){if("GeometryCollection"!=t.getType())i.getBuilder(e.getZIndex(),"Default").drawCustom(t,n,e.getRenderer(),e.getHitDetectionRenderer());else for(var r=t.getGeometries(),s=0,o=r.length;s<o;++s)k$(i,r[s],e,n)}var sPe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),oPe=function(i){function t(e){var n=i.call(this,e)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=[1/0,1/0,-1/0,-1/0],n.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n.compositionContext_=null,n.opacity_=1,n}return sPe(t,i),t.prototype.renderWorlds=function(e,n,r){var s=n.extent,o=n.viewState,a=o.center,l=o.resolution,c=o.projection,u=o.rotation,d=c.getExtent(),h=this.getLayer().getSource(),f=n.pixelRatio,p=n.viewHints,m=!(p[0]||p[1]),g=this.compositionContext_,_=Math.round(n.size[0]*f),v=Math.round(n.size[1]*f),y=h.getWrapX()&&c.canWrapX(),b=y?ci(d):null,x=y?Math.ceil((s[2]-d[2])/b)+1:1,w=y?Math.floor((s[0]-d[0])/b):0;do{var E=this.getRenderTransform(a,l,u,f,_,v,w*b);e.execute(g,1,E,u,m,void 0,r)}while(++w<x)},t.prototype.setupCompositionContext_=function(){if(1!==this.opacity_){var e=mo(this.context.canvas.width,this.context.canvas.height,g$);this.compositionContext_=e}else this.compositionContext_=this.context},t.prototype.releaseCompositionContext_=function(){if(1!==this.opacity_){var e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,Q8(this.compositionContext_),g$.push(this.compositionContext_.canvas),this.compositionContext_=null}},t.prototype.renderDeclutter=function(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())},t.prototype.renderFrame=function(e,n){var r=e.pixelRatio,s=e.layerStatesArray[e.layerIndex];(function dDe(i,t,e){(function Rv(i,t,e,n,r,s,o){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i[4]=s,i[5]=o,i})(i,t,0,0,e,0,0)})(this.pixelTransform,1/r,1/r),dM(this.inversePixelTransform,this.pixelTransform);var o=sI(this.pixelTransform);this.useContainer(n,o,this.getBackground(e));var a=this.context,l=a.canvas,c=this.replayGroup_,u=this.declutterExecutorGroup;if((!c||c.isEmpty())&&(!u||u.isEmpty()))return null;var d=Math.round(e.size[0]*r),h=Math.round(e.size[1]*r);l.width!=d||l.height!=h?(l.width=d,l.height=h,l.style.transform!==o&&(l.style.transform=o)):this.containerReused||a.clearRect(0,0,d,h),this.preRender(a,e);var f=e.viewState;this.opacity_=s.opacity,this.setupCompositionContext_();var m=!1,g=!0;if(s.extent&&this.clipping){var _=Th(s.extent);(m=(g=Ns(_,e.extent))&&!fm(_,e.extent))&&this.clipUnrotated(this.compositionContext_,e,_)}return g&&this.renderWorlds(c,e),m&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(a,e),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container},t.prototype.getFeatures=function(e){return new Promise(function(n){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var r=[this.context.canvas.width,this.context.canvas.height];cr(this.pixelTransform,r);var s=this.renderedCenter_,o=this.renderedResolution_,a=this.renderedRotation_,l=this.renderedProjection_,c=this.wrappedRenderedExtent_,u=this.getLayer(),d=[],h=r[0]*pl,f=r[1]*pl;d.push(this.getRenderTransform(s,o,a,pl,h,f,0).slice());var p=u.getSource(),m=l.getExtent();if(p.getWrapX()&&l.canWrapX()&&!fm(m,c)){for(var g=c[0],_=ci(m),v=0;g<m[0];)--v,d.push(this.getRenderTransform(s,o,a,pl,h,f,_*v).slice()),g+=_;for(v=0,g=c[2];g>m[2];)++v,d.push(this.getRenderTransform(s,o,a,pl,h,f,_*v).slice()),g-=_}this.hitDetectionImageData_=function jOe(i,t,e,n,r,s,o){var c=mo(i[0]*pl,i[1]*pl);c.imageSmoothingEnabled=!1;for(var u=c.canvas,d=new BOe(c,pl,r,null,o),h=e.length,f=Math.floor(16777215/h),p={},m=1;m<=h;++m){var g=e[m-1],_=g.getStyleFunction()||n;if(n){var v=_(g,s);if(v){Array.isArray(v)||(v=[v]);for(var b="#"+("000000"+(m*f).toString(16)).slice(-6),x=0,w=v.length;x<w;++x){var E=v[x],R=E.getGeometryFunction()(g);if(R&&Ns(r,R.getExtent())){var F=E.clone(),N=F.getFill();N&&N.setColor(b);var S=F.getStroke();S&&(S.setColor(b),S.setLineDash(null)),F.setText(void 0);var L=E.getImage();if(L&&0!==L.getOpacity()){var Y=L.getImageSize();if(!Y)continue;var I=mo(Y[0],Y[1],void 0,{alpha:!1}),z=I.canvas;I.fillStyle=b,I.fillRect(0,0,z.width,z.height),F.setImage(new WOe({img:z,imgSize:Y,anchor:L.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:L.getOrigin(),opacity:1,size:L.getSize(),scale:L.getScale(),rotation:L.getRotation(),rotateWithView:L.getRotateWithView()}))}var D=F.getZIndex()||0;(P=p[D])||(p[D]=P={},P.Polygon=[],P.Circle=[],P.LineString=[],P.Point=[]),P[R.getType().replace("Multi","")].push(R,F)}}}}}for(var O=Object.keys(p).map(Number).sort(bh),q=(m=0,O.length);m<q;++m){var P=p[O[m]];for(var K in P){var Q=P[K];for(x=0,w=Q.length;x<w;x+=2){d.setStyle(Q[x+1]);for(var j=0,we=t.length;j<we;++j)d.setTransform(t[j]),d.drawGeometry(Q[x])}}}return c.getImageData(0,0,u.width,u.height)}(r,d,this.renderedFeatures_,u.getStyleFunction(),c,o,a)}n(function $Oe(i,t,e){var n=[];if(e){var r=Math.floor(Math.round(i[0])*pl),s=Math.floor(Math.round(i[1])*pl),o=4*(ur(r,0,e.width-1)+ur(s,0,e.height-1)*e.width),u=e.data[o+2]+256*(e.data[o+1]+256*e.data[o]),d=Math.floor(16777215/t.length);u&&u%d==0&&n.push(t[u/d-1])}return n}(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},t.prototype.forEachFeatureAtCoordinate=function(e,n,r,s,o){var a=this;if(this.replayGroup_){var f,l=n.viewState.resolution,c=n.viewState.rotation,u=this.getLayer(),d={},h=function(m,g,_){var v=Rn(m),y=d[v];if(y){if(!0!==y&&_<y.distanceSq){if(0===_)return d[v]=!0,o.splice(o.lastIndexOf(y),1),s(m,u,g);y.geometry=g,y.distanceSq=_}}else{if(0===_)return d[v]=!0,s(m,u,g);o.push(d[v]={feature:m,layer:u,geometry:g,distanceSq:_,callback:s})}},p=[this.replayGroup_];return this.declutterExecutorGroup&&p.push(this.declutterExecutorGroup),p.some(function(m){return f=m.forEachFeatureAtCoordinate(e,l,c,r,h,m===a.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(function(g){return g.value}):null)}),f}},t.prototype.handleFontsChanged=function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.prepareFrame=function(e){var n=this.getLayer(),r=n.getSource();if(!r)return!1;var s=e.viewHints[0],o=e.viewHints[1],a=n.getUpdateWhileAnimating(),l=n.getUpdateWhileInteracting();if(this.ready&&!a&&s||!l&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var c=e.extent,u=e.viewState,d=u.projection,h=u.resolution,f=e.pixelRatio,p=n.getRevision(),m=n.getRenderBuffer(),g=n.getRenderOrder();void 0===g&&(g=YOe);var _=u.center.slice(),v=oI(c,m*h),y=v.slice(),b=[v.slice()],x=d.getExtent();if(r.getWrapX()&&d.canWrapX()&&!fm(x,e.extent)){var w=ci(x),E=Math.max(ci(v)/2,w);v[0]=x[0]-E,v[2]=x[2]+E,q8(_,d);var R=F8(b[0],d);R[0]<x[0]&&R[2]<x[2]?b.push([R[0]+w,R[1],R[2]+w,R[3]]):R[0]>x[0]&&R[2]>x[2]&&b.push([R[0]-w,R[1],R[2]-w,R[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==p&&this.renderedRenderOrder_==g&&fm(this.wrappedRenderedExtent_,v))return xh(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var N,F=new S$(tk(h,f),v,h,f);this.getLayer().getDeclutter()&&(N=new S$(tk(h,f),v,h,f));var L,S=_6();if(S){for(var Y=0,I=b.length;Y<I;++Y){var D=EI(b[Y]);r.loadFeatures(D,HAe(h),S)}L=Hv(S,d)}else for(Y=0,I=b.length;Y<I;++Y)r.loadFeatures(b[Y],h,d);var P=function XOe(i,t){var e=tk(i,t);return e*e}(h,f),O=!0,q=function(fe){var _e,re=fe.getStyleFunction()||n.getStyleFunction();if(re&&(_e=re(fe,h)),_e){var Ae=this.renderFeature(fe,P,_e,F,L,N);O=O&&!Ae}}.bind(this),K=EI(v),Q=r.getFeaturesInExtent(K);for(g&&Q.sort(g),Y=0,I=Q.length;Y<I;++Y)q(Q[Y]);this.renderedFeatures_=Q,this.ready=O;var j=F.finish(),we=new A$(v,h,f,r.getOverlaps(),j,n.getRenderBuffer());return N&&(this.declutterExecutorGroup=new A$(v,h,f,r.getOverlaps(),N.finish(),n.getRenderBuffer())),this.renderedResolution_=h,this.renderedRevision_=p,this.renderedRenderOrder_=g,this.renderedExtent_=y,this.wrappedRenderedExtent_=v,this.renderedCenter_=_,this.renderedProjection_=d,this.replayGroup_=we,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},t.prototype.renderFeature=function(e,n,r,s,o,a){if(!r)return!1;var l=!1;if(Array.isArray(r))for(var c=0,u=r.length;c<u;++c)l=I$(s,e,r[c],n,this.boundHandleStyleImageChange_,o,a)||l;else l=I$(s,e,r,n,this.boundHandleStyleImageChange_,o,a);return l},t}(_$);const aPe=oPe;var lPe=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),cPe=function(i){function t(e){return i.call(this,e)||this}return lPe(t,i),t.prototype.createRenderer=function(){return new aPe(this)},t}(dOe);const uPe=cPe;var dPe=function(){function i(t){this.rbush_=new v$(t),this.items_={}}return i.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[Rn(e)]=n},i.prototype.load=function(t,e){for(var n=new Array(e.length),r=0,s=e.length;r<s;r++){var o=t[r],a=e[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[r]=l,this.items_[Rn(a)]=l}this.rbush_.load(n)},i.prototype.remove=function(t){var e=Rn(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},i.prototype.update=function(t,e){var n=this.items_[Rn(e)];kv([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))},i.prototype.getAll=function(){return this.rbush_.all().map(function(e){return e.value})},i.prototype.getInExtent=function(t){return this.rbush_.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).map(function(r){return r.value})},i.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},i.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},i.prototype.forEach_=function(t,e){for(var n,r=0,s=t.length;r<s;r++)if(n=e(t[r]))return n;return n},i.prototype.isEmpty=function(){return Av(this.items_)},i.prototype.clear=function(){this.rbush_.clear(),this.items_={}},i.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return hl(e.minX,e.minY,e.maxX,e.maxY,t)},i.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},i}();const O$=dPe;function hPe(i,t){return[[-1/0,-1/0,1/0,1/0]]}function L$(i,t){return function(e,n,r,s,o){var a=this;!function fPe(i,t,e,n,r,s,o){var a=new XMLHttpRequest;a.open("GET","function"==typeof i?i(e,n,r):i,!0),"arraybuffer"==t.getType()&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){var c=t.getType(),u=void 0;"json"==c||"text"==c?u=a.responseText:"xml"==c?(u=a.responseXML)||(u=(new DOMParser).parseFromString(a.responseText,"application/xml")):"arraybuffer"==c&&(u=a.response),u?s(t.readFeatures(u,{extent:e,featureProjection:r}),t.readProjection(u)):o()}else o()},a.onerror=o,a.send()}(i,t,e,n,r,function(l,c){a.addFeatures(l),void 0!==s&&s(l)},o||wh)}}var F$=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Nu=function(i){function t(e,n,r){var s=i.call(this,e)||this;return s.feature=n,s.features=r,s}return F$(t,i),t}(_c),pPe=function(i){function t(e){var n=this,r=e||{};(n=i.call(this,{attributions:r.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===r.wrapX||r.wrapX})||this).loader_=wh,n.format_=r.format,n.overlaps_=void 0===r.overlaps||r.overlaps,n.url_=r.url,void 0!==r.loader?n.loader_=r.loader:void 0!==n.url_&&(fn(n.format_,7),n.loader_=L$(n.url_,n.format_)),n.strategy_=void 0!==r.strategy?r.strategy:hPe;var o,a,s=void 0===r.useSpatialIndex||r.useSpatialIndex;return n.featuresRtree_=s?new O$:null,n.loadedExtentsRtree_=new O$,n.loadingExtentsCount_=0,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null,Array.isArray(r.features)?a=r.features:r.features&&(a=(o=r.features).getArray()),!s&&void 0===o&&(o=new $o(a)),void 0!==a&&n.addFeaturesInternal(a),void 0!==o&&n.bindFeaturesCollection_(o),n}return F$(t,i),t.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},t.prototype.addFeatureInternal=function(e){var n=Rn(e);if(this.addToIndex_(n,e)){this.setupChangeEvents_(n,e);var r=e.getGeometry();if(r){var s=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new Nu("addfeature",e))}else this.featuresCollection_&&this.featuresCollection_.remove(e)},t.prototype.setupChangeEvents_=function(e,n){this.featureChangeKeys_[e]=[Cn(n,"change",this.handleFeatureChange_,this),Cn(n,"propertychange",this.handleFeatureChange_,this)]},t.prototype.addToIndex_=function(e,n){var r=!0,s=n.getId();return void 0!==s&&(s.toString()in this.idIndex_?r=!1:this.idIndex_[s.toString()]=n),r&&(fn(!(e in this.uidIndex_),30),this.uidIndex_[e]=n),r},t.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},t.prototype.addFeaturesInternal=function(e){for(var n=[],r=[],s=[],o=0,a=e.length;o<a;o++){var c=Rn(l=e[o]);this.addToIndex_(c,l)&&r.push(l)}o=0;for(var u=r.length;o<u;o++){var l;c=Rn(l=r[o]),this.setupChangeEvents_(c,l);var d=l.getGeometry();if(d){var h=d.getExtent();n.push(h),s.push(l)}else this.nullGeometryFeatures_[c]=l}if(this.featuresRtree_&&this.featuresRtree_.load(n,s),this.hasListener("addfeature")){o=0;for(var f=r.length;o<f;o++)this.dispatchEvent(new Nu("addfeature",r[o]))}},t.prototype.bindFeaturesCollection_=function(e){var n=!1;this.addEventListener("addfeature",function(r){n||(n=!0,e.push(r.feature),n=!1)}),this.addEventListener("removefeature",function(r){n||(n=!0,e.remove(r.feature),n=!1)}),e.addEventListener("add",function(r){n||(n=!0,this.addFeature(r.element),n=!1)}.bind(this)),e.addEventListener("remove",function(r){n||(n=!0,this.removeFeature(r.element),n=!1)}.bind(this)),this.featuresCollection_=e},t.prototype.clear=function(e){if(e){for(var n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(bi);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var s=function(l){this.removeFeatureInternal(l)}.bind(this);for(var o in this.featuresRtree_.forEach(s),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[o])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var a=new Nu("clear");this.dispatchEvent(a),this.changed()},t.prototype.forEachFeature=function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},t.prototype.forEachFeatureAtCoordinateDirect=function(e,n){return this.forEachFeatureInExtent([e[0],e[1],e[0],e[1]],function(s){if(s.getGeometry().intersectsCoordinate(e))return n(s)})},t.prototype.forEachFeatureInExtent=function(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)},t.prototype.forEachFeatureIntersectingExtent=function(e,n){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var o=n(r);if(o)return o}})},t.prototype.getFeaturesCollection=function(){return this.featuresCollection_},t.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Av(this.nullGeometryFeatures_)||b8(e,x8(this.nullGeometryFeatures_))),e},t.prototype.getFeaturesAtCoordinate=function(e){var n=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){n.push(r)}),n},t.prototype.getFeaturesInExtent=function(e,n){var r=this;if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);var o=function MDe(i,t){if(t.canWrapX()){var e=t.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[e[0],i[1],e[2],i[3]]];F8(i,t);var n=ci(e);if(ci(i)>n)return[[e[0],i[1],e[2],i[3]]];if(i[0]<e[0])return[[i[0]+n,i[1],e[2],i[3]],[e[0],i[1],i[2],i[3]]];if(i[2]>e[2])return[[i[0],i[1],e[2],i[3]],[e[0],i[1],i[2]-n,i[3]]]}return[i]}(e,n);return[].concat.apply([],o.map(function(a){return r.featuresRtree_.getInExtent(a)}))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},t.prototype.getClosestFeatureToCoordinate=function(e,n){var r=e[0],s=e[1],o=null,a=[NaN,NaN],l=1/0,c=[-1/0,-1/0,1/0,1/0],u=n||dm;return this.featuresRtree_.forEachInExtent(c,function(d){if(u(d)){var h=d.getGeometry(),f=l;if((l=h.closestPointXY(r,s,a,l))<f){o=d;var p=Math.sqrt(l);c[0]=r-p,c[1]=s-p,c[2]=r+p,c[3]=s+p}}}),o},t.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},t.prototype.getFeatureById=function(e){var n=this.idIndex_[e.toString()];return void 0!==n?n:null},t.prototype.getFeatureByUid=function(e){var n=this.uidIndex_[e];return void 0!==n?n:null},t.prototype.getFormat=function(){return this.format_},t.prototype.getOverlaps=function(){return this.overlaps_},t.prototype.getUrl=function(){return this.url_},t.prototype.handleFeatureChange_=function(e){var n=e.target,r=Rn(n),s=n.getGeometry();if(s){var o=s.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[r]=n);var a=n.getId();if(void 0!==a){var l=a.toString();this.idIndex_[l]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[l]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[r]=n;this.changed(),this.dispatchEvent(new Nu("changefeature",n))},t.prototype.hasFeature=function(e){var n=e.getId();return void 0!==n?n in this.idIndex_:Rn(e)in this.uidIndex_},t.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Av(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()},t.prototype.loadFeatures=function(e,n,r){for(var s=this.loadedExtentsRtree_,o=this.strategy_(e,n,r),a=function(d,h){var f=o[d];s.forEachInExtent(f,function(m){return fm(m.extent,f)})||(++l.loadingExtentsCount_,l.dispatchEvent(new Nu("featuresloadstart")),l.loader_.call(l,f,n,r,function(m){--this.loadingExtentsCount_,this.dispatchEvent(new Nu("featuresloadend",void 0,m))}.bind(l),function(){--this.loadingExtentsCount_,this.dispatchEvent(new Nu("featuresloaderror"))}.bind(l)),s.insert(f,{extent:f.slice()}))},l=this,c=0,u=o.length;c<u;++c)a(c);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},t.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),i.prototype.refresh.call(this)},t.prototype.removeLoadedExtent=function(e){var r,n=this.loadedExtentsRtree_;n.forEachInExtent(e,function(s){if(kv(s.extent,e))return r=s,!0}),r&&n.remove(r)},t.prototype.removeFeature=function(e){if(e){var n=Rn(e);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}},t.prototype.removeFeatureInternal=function(e){var n=Rn(e),r=this.featureChangeKeys_[n];if(r){r.forEach(bi),delete this.featureChangeKeys_[n];var s=e.getId();return void 0!==s&&delete this.idIndex_[s.toString()],delete this.uidIndex_[n],this.dispatchEvent(new Nu("removefeature",e)),e}},t.prototype.removeFromIdIndex_=function(e){var n=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],n=!0;break}return n},t.prototype.setLoader=function(e){this.loader_=e},t.prototype.setUrl=function(e){fn(this.format_,7),this.url_=e,this.setLoader(L$(e,this.format_))},t}(c$);const mPe=pPe,gPe=["map"];let _Pe=(()=>{class i{constructor(e,n,r){this.zone=e,this.appService=n,this.houseService=r,this.houseFeature=new rDe({geometry:new N6([1511855.49950191,7539541.240669869])})}ngAfterViewInit(){this.zone.runOutsideAngular(()=>this.initMap())}initMap(){this.houseLayer=new uPe({source:new mPe({features:[this.houseFeature]})}),this.map=new OIe({view:new Iu({center:[1511855.49950191,7539541.240669869],zoom:19}),layers:[new Xke({source:new Pke}),this.houseLayer],target:this.mapEl.nativeElement}),window.map=this.map}}return i.\u0275fac=function(e){return new(e||i)(C(Ot),C(Wi),C(rr))},i.\u0275cmp=ft({type:i,selectors:[["app-page-map"]],viewQuery:function(e,n){if(1&e&&ni(gPe,5),2&e){let r;Ct(r=St())&&(n.mapEl=r.first)}},decls:4,vars:0,consts:[[1,"map"],["map",""]],template:function(e,n){1&e&&(M(0,"h1"),k(1,"Map"),T(),ie(2,"div",0,1))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}.map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),i})(),vPe=(()=>{class i{constructor(e,n){this.httpClient=e,this.sanitizer=n,this.height="32px",this.width="32px"}set color(e){this.fillColor="primary"===e?"var(--primary-color)":"accent"===e?"var(--accent-color)":"first"===e?"var(--first-color)":"second"===e?"var(--second-color)":"third"===e?"var(--third-color)":`${e}`}set size(e){this.width=`${e[0]}px`,this.height=`${e[1]}px`}ngOnInit(){this.httpClient.get(this.url,{responseType:"text"}).subscribe({next:e=>{e=e.replace(/height=\"64px\"/gi,"").replace(/width=\"64px\"/gi,""),this.svgData=this.sanitizer.bypassSecurityTrustHtml(e)},error:e=>{this.background="#aaa"}})}}return i.\u0275fac=function(e){return new(e||i)(C(xd),C(kg))},i.\u0275cmp=ft({type:i,selectors:[["app-svg"]],hostVars:8,hostBindings:function(e,n){2&e&&Xr("background",n.background)("fill",n.fillColor)("height",n.height)("width",n.width)},inputs:{url:"url",color:"color",size:"size"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(e,n){1&e&&ie(0,"div",0),2&e&&Z("innerHTML",n.svgData,Ku)},styles:["[_nghost-%COMP%]{display:inline-block}  svg>g>g>path:first-child{fill:#747474}"]}),i})(),yPe=(()=>{class i{constructor(e){this.houseService=e,this.Tag=Ao,this.Section=Je,this.SensorType=Te}ngAfterViewInit(){this.houseService.house$.value.partsFlatten.filter(e=>e instanceof Re).forEach(e=>e.visible=!0)}getGroups(e){return[...new Set(Object.values(this.houseService.house$.value.partsFlatten).filter(r=>r instanceof Re).filter(r=>r.sensorType===e).map(r=>r.group))].filter(r=>r).sort((r,s)=>r-s).join(", ")}getOutlets(e){return Et(1,Object.values(this.houseService.house$.value.partsFlatten).filter(r=>r instanceof Re).filter(r=>r.sensorType===e).map(r=>r.amount).reduce((r,s)=>r+s,0))}getCable(e,n=1){return Et(n,Object.values(this.houseService.house$.value.partsFlatten).filter(s=>s instanceof Re).filter(s=>s.sensorType===e).map(s=>s.cableLength).reduce((s,o)=>s+o,0))}}return i.\u0275fac=function(e){return new(e||i)(C(rr))},i.\u0275cmp=ft({type:i,selectors:[["app-page-wired"]],decls:158,vars:89,consts:[[3,"id"],[3,"url"],[1,"technical"],["href","https://community.home-assistant.io/t/circadian-lighting-custom-component/61246"]],template:function(e,n){1&e&&(M(0,"h1"),k(1,"Smart home"),T(),M(2,"section",0)(3,"h2"),k(4," Electricity "),T(),M(5,"h3"),ie(6,"app-svg",1),M(7,"span"),k(8,"Normal - 230v"),T()(),M(9,"p"),k(10," The standard in Sweden is 10amps per group (1.5mm2). In Netherlands that would be 16amps and 2.5mm2 "),T(),M(11,"label",2)(12,"span"),k(13,"Technical "),T(),k(14),ie(15,"br"),k(16),ie(17,"br"),k(18),ie(19,"br"),T(),M(20,"h3"),ie(21,"app-svg",1),M(22,"span"),k(23,"3Phase - 400v"),T()(),M(24,"p"),k(25," This weird symbol is a "),M(26,"tag"),k(27,"perilex"),T(),k(28," plug. It has 3-phase (or sometimes just two). The main goal is the devide the load over 3 wires instead of one. It requires more wires though. Think induction in the kitchen, or e-car (not this connector). "),T(),M(29,"label",2)(30,"span"),k(31,"Technical "),T(),k(32),ie(33,"br"),k(34),ie(35,"br"),k(36),ie(37,"br"),T()(),M(38,"section",0)(39,"h2"),k(40," lightning "),T(),M(41,"h3"),ie(42,"app-svg",1),M(43,"span"),k(44,"Lamps"),T()(),M(45,"p"),k(46," Lamps can come in 230v and 24v. Most lamps should be dimmable and wires run back to the PLC "),T(),M(47,"h3"),ie(48,"app-svg",1),M(49,"span"),k(50,"Double switch "),T()(),M(51,"p"),k(52," Double pulse switches. Allows for 6 options. Single, double and long press. They are 24v and wires run back to the PLC. "),T(),M(53,"h3"),ie(54,"app-svg",1),M(55,"span"),k(56,"Dimmer"),T()(),M(57,"p"),k(58," All dimmable lights have a dim level that became less bright during the evening. Following the "),M(59,"a",3),k(60,"circadian lightning."),T(),k(61,". This button is only to overrule and switch on or off "),T(),M(62,"h3"),ie(63,"app-svg",1),M(64,"span"),k(65,"DLC, or light plugs"),T()(),M(66,"p"),k(67," Completely strange for outstanders. but every fixed light has a seperate miniplug. In Sweden they had a old one, and since 2019 they follow the EU standard of DLC. "),T()(),M(68,"section",0)(69,"h2"),k(70," Network / Ethernet "),T(),M(71,"h3"),ie(72,"app-svg",1),M(73,"span"),k(74,"Ethernet (rj45)"),T()(),M(75,"p"),k(76," If you work home, you need reliable internet. A wall outlet for a normal internet cable works the best. Not limited to computers, many devices can have them as well. Like speakers, television etc. "),T(),M(77,"label",2)(78,"span"),k(79,"Technical "),T(),k(80),ie(81,"br"),k(82),ie(83,"br"),T(),M(84,"h3"),ie(85,"app-svg",1),M(86,"span"),k(87,"Power-over-Ethernet "),T()(),M(88,"p"),k(89,"Its a internet cable with (often) 48volts. So you can power up a device with only the internet cable. Perfect for a ring-doorbel, security camera or even wifi-access-points "),T(),M(90,"h3"),ie(91,"app-svg",1),M(92,"span"),k(93,"Wifi"),T()(),M(94,"p"),k(95,"Maybe most important for any mobile device, or guests "),T(),M(96,"label",2)(97,"span"),k(98,"Technical "),T(),k(99),ie(100,"br"),T()(),M(101,"section",0)(102,"h2"),k(103," Safety "),T(),M(104,"h3"),ie(105,"app-svg",1),M(106,"span"),k(107,"Smoke/heat detectors"),T()(),M(108,"p"),k(109,"We have a firefighter in the family. On a serious note, everyone should have multiple of smoke sensors. A heat sensor in the kitchen. "),T(),M(110,"label",2)(111,"span"),k(112,"Technical "),T(),k(113),ie(114,"br"),k(115),ie(116,"br"),T(),M(117,"h3"),ie(118,"app-svg",1),M(119,"span"),k(120,"Camera's"),T()(),M(121,"p"),k(122," The most optional step. Gives a bit of comfort, security wise. It does allow you to monitor your house, when you are away (via your own VPN of course) "),T(),M(123,"label",2)(124,"span"),k(125,"Technical "),T(),k(126),ie(127,"br"),T(),M(128,"h3"),ie(129,"app-svg",1)(130,"app-svg",1),M(131,"span"),k(132,"Window/Door sensors/Motion detection"),T()(),M(133,"p"),k(134," Extends the alarm functoin "),T()(),M(135,"section",0)(136,"h2"),k(137," Other smarts "),T(),M(138,"h3"),ie(139,"app-svg",1),M(140,"span"),k(141,"Sun blinds / screens"),T()(),M(142,"p"),k(143," Essential to a passive house, because the sun radiation is to much during the summer. "),T(),M(144,"h3"),ie(145,"app-svg",1),M(146,"span"),k(147,"Motion sensors"),T()(),M(148,"p"),k(149," Fun addon to help to automate the smart-home. Lights can be turned on/off automatically. "),T(),M(150,"h3"),ie(151,"app-svg",1),M(152,"span"),k(153,"Temperature"),T()(),M(154,"p"),k(155," Help to regulate the heat/cooling and ventilation in certain area's of the house "),T()(),ie(156,"app-svg",1)(157,"app-svg",1)),2&e&&($(2),Z("id",n.Section.wiredPower),$(4),_i("sensor-",n.SensorType.socket,""),zn("url","assets/svg/",n.SensorType.socket,".svg"),$(8),At(" Total cable length: ",n.getCable(n.SensorType.socket),"m"),$(2),At(" Groups: ",n.getGroups(n.SensorType.socket),""),$(2),At(" Amount: ",n.getOutlets(n.SensorType.socket),""),$(3),_i("sensor-",n.SensorType.perilex,""),zn("url","assets/svg/",n.SensorType.perilex,".svg"),$(11),At(" Total cable length: ",n.getCable(n.SensorType.perilex),"m"),$(2),At(" Groups: ",n.getGroups(n.SensorType.perilex),""),$(2),At(" Amount: ",n.getOutlets(n.SensorType.perilex),""),$(2),Z("id",n.Section.wiredLight),$(4),_i("sensor-",n.SensorType.light,""),zn("url","assets/svg/",n.SensorType.light,".svg"),$(6),_i("sensor-",n.SensorType.lightSwitch,""),zn("url","assets/svg/",n.SensorType.lightSwitch,".svg"),$(6),_i("sensor-",n.SensorType.dimmer,""),zn("url","assets/svg/",n.SensorType.dimmer,".svg"),$(9),_i("sensor-",n.SensorType.dlc,""),zn("url","assets/svg/",n.SensorType.dlc,".svg"),$(5),Z("id",n.Section.wiredEthernet),$(4),_i("sensor-",n.SensorType.ethernet,""),zn("url","assets/svg/",n.SensorType.ethernet,".svg"),$(8),At(" Amount: ",n.getOutlets(n.SensorType.ethernet),""),$(2),At(" Total cable length: ",n.getCable(n.SensorType.ethernet,0),"m"),$(3),_i("sensor-",n.SensorType.poe,""),zn("url","assets/svg/",n.SensorType.poe,".svg"),$(6),_i("sensor-",n.SensorType.wifi,""),zn("url","assets/svg/",n.SensorType.wifi,".svg"),$(8),At(" Amount: ",n.getOutlets(n.SensorType.wifi)," Access points"),$(2),Z("id",n.Section.wiredSafety),$(4),_i("sensor-",n.SensorType.smoke,""),zn("url","assets/svg/",n.SensorType.smoke,".svg"),$(8),At(" Amount: ",n.getOutlets(n.SensorType.smoke),""),$(2),At(" Total cable length: ",n.getCable(n.SensorType.smoke,0),"m"),$(3),_i("sensor-",n.SensorType.camera,""),zn("url","assets/svg/",n.SensorType.camera,".svg"),$(8),At(" Amount: ",n.getOutlets(n.SensorType.camera)," PoE"),$(3),_i("sensor-",n.SensorType.pir,""),zn("url","assets/svg/",n.SensorType.pir,".svg"),$(1),_i("sensor-",n.SensorType.alarm,""),zn("url","assets/svg/",n.SensorType.alarm,".svg"),$(5),Z("id",n.Section.wiredExtra),$(4),_i("sensor-",n.SensorType.blinds,""),zn("url","assets/svg/",n.SensorType.blinds,".svg"),$(6),_i("sensor-",n.SensorType.pir,""),zn("url","assets/svg/",n.SensorType.pir,".svg"),$(6),_i("sensor-",n.SensorType.temperature,""),zn("url","assets/svg/",n.SensorType.temperature,".svg"),$(5),_i("sensor-",n.SensorType.ventIn,""),zn("url","assets/svg/",n.SensorType.ventIn,".svg"),$(1),_i("sensor-",n.SensorType.ventOut,""),zn("url","assets/svg/",n.SensorType.ventOut,".svg"))},directives:[vPe,oM],styles:["h3[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%]{margin-right:6px}"]}),i})();const bPe=["tableRows"];function xPe(i,t){if(1&i&&(M(0,"th",7),k(1),T()),2&i){const e=Qe().$implicit;$(1),At(" ",e.name," ")}}function wPe(i,t){if(1&i&&ie(0,"span",9),2&i){const e=Qe().$implicit,n=Qe().$implicit;Z("innerHTML",n.def(e[n.id],e.unit),Ku)}}function MPe(i,t){if(1&i&&(M(0,"td",8),ie(1,"span",9),Ge(2,wPe,1,1,"span",10),ie(3,"span",9),T()),2&i){const e=t.$implicit,n=Qe().$implicit;$(1),Z("innerHTML",n.prefix,Ku),$(1),Z("ngIf",e[n.id]),$(1),Z("innerHTML",n.postfix,Ku)}}function CPe(i,t){1&i&&(Er(0,4),Ge(1,xPe,2,1,"th",5),Ge(2,MPe,4,3,"td",6),Tr()),2&i&&Z("matColumnDef",t.$implicit.id)}function SPe(i,t){1&i&&ie(0,"tr",11)}function EPe(i,t){if(1&i){const e=Eo();Er(0),M(1,"tr",12,13),$e("click",function(){const s=on(e).$implicit;return Qe().rowClick(s)}),T(),Tr()}if(2&i){const e=t.$implicit;$(1),function aF(i,t,e,n,r){la(js,Wa,pf(xe(),i,t,e,n,r),!0)}("group-",e.uuid," row-",e.type,""),qt("row-folded",e.uuid)}}let TPe=(()=>{class i{constructor(e){this.houseService=e,this.columns=[{id:"folded",name:"",def:n=>`${n}`},{id:op.name,name:"Name",def:n=>`${n}`},{id:"calcAmount",name:"#",def:(n,r="x")=>`${n}${r}`},{id:"price",name:"Piece price",def:n=>`\u20ac${this.readableNumbers(n)}`},{id:"calcPrice",name:"Sum price",def:n=>`\u20ac${this.readableNumbers(n)}`},{id:op.sizeOrVersion,name:"Size or Version",def:n=>`${n}`},{id:op.remarks,name:"remarks",def:n=>`${n}`}],this.groupRow={},this.columnNames=this.columns.map(n=>n.id),this.parts=[]}set data(e){this.costTable=e;const n=e.costs.filter(r=>r);this.dataSource=[...n.flatMap(r=>r instanceof xx?[r,...r.costs]:r),new $ye({name:`Total ${e.alias.toLocaleLowerCase()}`,costs:n})]}readableNumbers(e){return Number(e)>1e3?`${Et(-2,e).toLocaleString()}`:e}rowClick(e){e instanceof xx&&(e.toggleFold(),this.rowContainers.forEach(n=>{const r=n.nativeElement.classList;r.contains(`group-${e.uuid}`)&&r.toggle("row-folded")}))}}return i.\u0275fac=function(e){return new(e||i)(C(rr))},i.\u0275cmp=ft({type:i,selectors:[["app-table"]],viewQuery:function(e,n){if(1&e&&ni(bPe,5,Ve),2&e){let r;Ct(r=St())&&(n.rowContainers=r)}},inputs:{data:"data"},decls:4,vars:6,consts:[["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z0",3,"dataSource","id"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"innerHTML"],[3,"innerHTML",4,"ngIf"],["mat-header-row",""],["mat-row","",3,"click"],["tableRows",""]],template:function(e,n){1&e&&(M(0,"table",0),Ge(1,CPe,3,1,"ng-container",1),Ge(2,SPe,1,0,"tr",2),Ge(3,EPe,3,6,"ng-container",3),T()),2&e&&(zn("id","table-",n.costTable.name,""),Z("dataSource",n.dataSource),$(1),Z("ngForOf",n.columns),$(1),Z("matHeaderRowDef",n.columnNames)("matHeaderRowDefSticky",!0),$(1),Z("matRowDefColumns",n.columnNames))},directives:[fz,od,fD,hD,pD,dD,mD,Ks,pz,gz,mz,_z],styles:["tr[_ngcontent-%COMP%]{transition:.2s;background-color:var(--color-0)!important}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr.row-total[_ngcontent-%COMP%]{background-color:var(--color-5)!important}tr.row-group[_ngcontent-%COMP%]{background-color:var(--color-10)!important;cursor:pointer}tr[_ngcontent-%COMP%]:hover{background-color:var(--color-20)!important}tr.row-folded[_ngcontent-%COMP%]:not(.row-group){height:0}tr.row-folded[_ngcontent-%COMP%]:not(.row-group)   td[_ngcontent-%COMP%]{border-bottom-width:0px;padding:0;line-height:0px;overflow:hidden}[_nghost-%COMP%], table[_ngcontent-%COMP%]{width:100%}.mat-column-calcAmount[_ngcontent-%COMP%], .mat-column-price[_ngcontent-%COMP%], .mat-column-calcPrice[_ngcontent-%COMP%]{text-align:right;width:60px}.mat-column-calcPrice[_ngcontent-%COMP%]{padding-right:16px}.mat-column-sizeOrVersion[_ngcontent-%COMP%], .mat-column-other[_ngcontent-%COMP%]{min-width:60px}.mat-column-name[_ngcontent-%COMP%]{min-width:200px}"]}),i})();function DPe(i,t){1&i&&oa(0)}const APe=function(i){return{$implicit:i}};function RPe(i,t){if(1&i&&(Er(0),Ge(1,DPe,1,0,"ng-container",3),Tr()),2&i){const e=t.$implicit;Qe();const n=hi(6);$(1),Z("ngTemplateOutlet",n)("ngTemplateOutletContext",Tl(2,APe,e))}}function IPe(i,t){1&i&&(M(0,"span"),k(1," Nice to discover alot of moldings: https://en.wikipedia.org/wiki/Molding_(decorative) "),T())}function kPe(i,t){if(1&i&&(ie(0,"h2",4),Ge(1,IPe,2,0,"span",5),ie(2,"app-table",2)),2&i){const e=t.$implicit;Z("innerHTML",e.alias,Ku),$(1),Z("ngIf","finish"===e.name),$(1),Z("data",e)}}const OPe=[{path:"map",component:_Pe},{path:"costs",component:(()=>{class i{constructor(e){this.houseService=e,this.tables=[this.getConstruction(),this.getOpenings(),this.getElectra(),this.getFinish(),this.getPreps()],this.hiddenTables=[this.getKitchen(),this.getBathroom()],this.totals=this.getTotals()}getTable(e){return[...this.tables,...this.hiddenTables].find(n=>n.name===e)}getFinish(){const{innerLength:n}=this.houseService.getWallLength();return this.houseService.getWallArea(),{name:"finish",alias:"Finishes",costs:[new ir({amount:n,name:"Crown molding",price:3,unit:"m"}),new ir({amount:n,name:"Baseboard",price:3,unit:"m"}),this.houseService.getT(ai,[],a=>({name:"Door casing",price:60})),this.houseService.getT(Ur,[],a=>({name:"Window casing",price:60})),new ir({amount:n,name:"Gips boards",price:10,unit:"m2"})]}}getElectra(){return{name:"electra",alias:"Electra",costs:[new ir({amount:this.houseService.getGroups(Te.socket).length,name:"Circuit breaker",sizeOrVersion:"10A - 240v",price:10}),new ir({amount:Math.ceil(this.houseService.getGroups(Te.socket).length/4),name:"Group Circuit breaker",sizeOrVersion:"240v",price:80}),this.houseService.getT(Re,["sensorType"],n=>({name:"Power socket",sizeOrVersion:"230v",price:20}),n=>n.sensorType===Te.socket),this.houseService.getT(Re,["sensorType"],n=>({name:"Electric wires",sizeOrVersion:"2.5mm2 230v",price:2,unit:"m"}),n=>[Te.socket].includes(n.sensorType),!1),this.houseService.getT(Re,[],n=>({name:"Ethernet cable",sizeOrVersion:"CAT6",price:.6,unit:"m"}),n=>[Te.ethernet,Te.poe].includes(n.sensorType),!1)]}}getPreps(){return{name:"preps",alias:"Preparations",costs:[new ir({name:"Ground prep",price:9e3}),new ir({name:"Constructions calculations",price:3e3}),new ir({name:"PassivHaus Certification",price:3e3}),new ir({name:"Utilities connections /fees",price:15e3}),new ir({name:"Tool rental",price:3e3})]}}getConstruction(){return{name:"construction",alias:"Construction",costs:[new ir({name:"foundation",price:9e3}),new ir({name:"footer",price:9e3}),new ir({name:"Concrete prefab floor",price:32e3}),new ir({name:"Studs",price:1e4}),new ir({name:"OSB",price:1e4})]}}getBathroom(){return{name:"bathroom",alias:"Bathroom",costs:[new ir({name:"Complete kitchen",price:9e3})]}}getKitchen(){return{name:"kitchen",alias:"Kitchen",costs:[new ir({name:"Complete kitchen",price:9e3})]}}getOpenings(){return{name:"openings",alias:"Openings",costs:[this.houseService.getT(ai,["outside"],n=>({name:"Door",sizeOrVersion:`230x${n.width}`,price:n.outside?600:200,unit:"#",other:n.outside?"Outer door":"Inner door"})),this.houseService.getT(Ur,["width","height","windowForm"],n=>({name:"Window",sizeOrVersion:`${n.height}x${n.width}`,price:800*n.width,other:`${n.windowForm}`}),n=>![Yl.windowWall].includes(n.windowForm)),this.houseService.getT(Ur,["width","height","windowForm"],n=>({name:"Window wall",sizeOrVersion:`${n.height}x${n.width}`,price:6e4,other:"main window wall"}),n=>[Yl.windowWall].includes(n.windowForm))]}}getTotals(){return{name:"total",alias:"Total",costs:[...this.tables,...this.hiddenTables].flatMap(e=>new ir({price:ql(e.costs.filter(n=>void 0!==n).map(n=>n.calcPrice)),name:e.alias}))}}}return i.\u0275fac=function(e){return new(e||i)(C(rr))},i.\u0275cmp=ft({type:i,selectors:[["app-page-costs"]],decls:10,vars:2,consts:[[4,"ngFor","ngForOf"],["simple",""],[3,"data"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"],[4,"ngIf"]],template:function(e,n){1&e&&(M(0,"h1"),k(1,"Smart home"),T(),M(2,"p"),k(3," something about totals\n"),T(),Ge(4,RPe,2,4,"ng-container",0),Ge(5,kPe,3,3,"ng-template",null,1,ja),M(7,"h2"),k(8,"totals"),T(),ie(9,"app-table",2)),2&e&&($(4),Z("ngForOf",n.tables),$(5),Z("data",n.totals))},directives:[od,mN,Ks,TPe],styles:["[_nghost-%COMP%]{max-width:900px;display:block;margin:0 auto;padding:0 32px}app-table[_ngcontent-%COMP%]{margin:32px 0 64px;display:block}  #table-total .mat-column-sizeOrVersion,   #table-total .mat-column-other,   #table-total .mat-column-calcAmount,   #table-total .mat-column-calcAmount,   #table-total .mat-column-price{color:#0000}"]}),i})()},{path:"",component:S1e,children:[{path:"",component:F1e},{path:"stairs",component:B1e},{path:"facade",component:H1e},{path:"installations",component:U1e},{path:"construction",component:V1e},{path:"wired",component:yPe}]},{path:"**",redirectTo:"",pathMatch:"full"}];let PPe=(()=>{class i{constructor(e){e.addSvgIconSet("material-icons-outlined")}}return i.\u0275fac=function(e){return new(e||i)(J(i_))},i.\u0275mod=at({type:i,bootstrap:[ade]}),i.\u0275inj=st({providers:[T0],imports:[[RN,Ore,Mpe,jme,cle,bue.forRoot(OPe)]]}),i})();(function tJ(){H2=!1})(),cte().bootstrapModule(PPe).catch(i=>console.error(i))},402:function(Pm){Pm.exports=function(){"use strict";function Lm(se,de,Ie,ot,ct){!function rt(mt,Jt,wn,rn,ei){for(;rn>wn;){if(rn-wn>600){var Ln=rn-wn+1,Ei=Jt-wn+1,Hu=Math.log(Ln),Zo=.5*Math.exp(2*Hu/3),cs=.5*Math.sqrt(Hu*Zo*(Ln-Zo)/Ln)*(Ei-Ln/2<0?-1:1);rt(mt,Jt,Math.max(wn,Math.floor(Jt-Ei*Zo/Ln+cs)),Math.min(rn,Math.floor(Jt+(Ln-Ei)*Zo/Ln+cs)),ei)}var Mn=mt[Jt],Dc=wn,Vs=rn;for(Pa(mt,wn,Jt),ei(mt[rn],Mn)>0&&Pa(mt,wn,rn);Dc<Vs;){for(Pa(mt,Dc,Vs),Dc++,Vs--;ei(mt[Dc],Mn)<0;)Dc++;for(;ei(mt[Vs],Mn)>0;)Vs--}0===ei(mt[wn],Mn)?Pa(mt,wn,Vs):Pa(mt,++Vs,rn),Vs<=Jt&&(wn=Vs+1),Jt<=Vs&&(rn=Vs-1)}}(se,de,Ie||0,ot||se.length-1,ct||cn)}function Pa(se,de,Ie){var ot=se[de];se[de]=se[Ie],se[Ie]=ot}function cn(se,de){return se<de?-1:se>de?1:0}var Hn=function(se){void 0===se&&(se=9),this._maxEntries=Math.max(4,se),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Fm(se,de,Ie){if(!Ie)return de.indexOf(se);for(var ot=0;ot<de.length;ot++)if(Ie(se,de[ot]))return ot;return-1}function Xo(se,de){Jn(se,0,se.children.length,de,se)}function Jn(se,de,Ie,ot,ct){ct||(ct=Tc(null)),ct.minX=1/0,ct.minY=1/0,ct.maxX=-1/0,ct.maxY=-1/0;for(var rt=de;rt<Ie;rt++){var mt=se.children[rt];Sc(ct,se.leaf?ot(mt):mt)}return ct}function Sc(se,de){return se.minX=Math.min(se.minX,de.minX),se.minY=Math.min(se.minY,de.minY),se.maxX=Math.max(se.maxX,de.maxX),se.maxY=Math.max(se.maxY,de.maxY),se}function ty(se,de){return se.minX-de.minX}function ny(se,de){return se.minY-de.minY}function Ko(se){return(se.maxX-se.minX)*(se.maxY-se.minY)}function _l(se){return se.maxX-se.minX+(se.maxY-se.minY)}function Fh(se,de){return se.minX<=de.minX&&se.minY<=de.minY&&de.maxX<=se.maxX&&de.maxY<=se.maxY}function Ec(se,de){return de.minX<=se.maxX&&de.minY<=se.maxY&&de.maxX>=se.minX&&de.maxY>=se.minY}function Tc(se){return{children:se,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function iy(se,de,Ie,ot,ct){for(var rt=[de,Ie];rt.length;)if(!((Ie=rt.pop())-(de=rt.pop())<=ot)){var mt=de+Math.ceil((Ie-de)/ot/2)*ot;Lm(se,mt,de,Ie,ct),rt.push(de,mt,mt,Ie)}}return Hn.prototype.all=function(){return this._all(this.data,[])},Hn.prototype.search=function(se){var de=this.data,Ie=[];if(!Ec(se,de))return Ie;for(var ot=this.toBBox,ct=[];de;){for(var rt=0;rt<de.children.length;rt++){var mt=de.children[rt],Jt=de.leaf?ot(mt):mt;Ec(se,Jt)&&(de.leaf?Ie.push(mt):Fh(se,Jt)?this._all(mt,Ie):ct.push(mt))}de=ct.pop()}return Ie},Hn.prototype.collides=function(se){var de=this.data;if(!Ec(se,de))return!1;for(var Ie=[];de;){for(var ot=0;ot<de.children.length;ot++){var ct=de.children[ot],rt=de.leaf?this.toBBox(ct):ct;if(Ec(se,rt)){if(de.leaf||Fh(se,rt))return!0;Ie.push(ct)}}de=Ie.pop()}return!1},Hn.prototype.load=function(se){if(!se||!se.length)return this;if(se.length<this._minEntries){for(var de=0;de<se.length;de++)this.insert(se[de]);return this}var Ie=this._build(se.slice(),0,se.length-1,0);if(this.data.children.length)if(this.data.height===Ie.height)this._splitRoot(this.data,Ie);else{if(this.data.height<Ie.height){var ot=this.data;this.data=Ie,Ie=ot}this._insert(Ie,this.data.height-Ie.height-1,!0)}else this.data=Ie;return this},Hn.prototype.insert=function(se){return se&&this._insert(se,this.data.height-1),this},Hn.prototype.clear=function(){return this.data=Tc([]),this},Hn.prototype.remove=function(se,de){if(!se)return this;for(var Ie,ot,ct,rt=this.data,mt=this.toBBox(se),Jt=[],wn=[];rt||Jt.length;){if(rt||(rt=Jt.pop(),ot=Jt[Jt.length-1],Ie=wn.pop(),ct=!0),rt.leaf){var rn=Fm(se,rt.children,de);if(-1!==rn)return rt.children.splice(rn,1),Jt.push(rt),this._condense(Jt),this}ct||rt.leaf||!Fh(rt,mt)?ot?(Ie++,rt=ot.children[Ie],ct=!1):rt=null:(Jt.push(rt),wn.push(Ie),Ie=0,ot=rt,rt=rt.children[0])}return this},Hn.prototype.toBBox=function(se){return se},Hn.prototype.compareMinX=function(se,de){return se.minX-de.minX},Hn.prototype.compareMinY=function(se,de){return se.minY-de.minY},Hn.prototype.toJSON=function(){return this.data},Hn.prototype.fromJSON=function(se){return this.data=se,this},Hn.prototype._all=function(se,de){for(var Ie=[];se;)se.leaf?de.push.apply(de,se.children):Ie.push.apply(Ie,se.children),se=Ie.pop();return de},Hn.prototype._build=function(se,de,Ie,ot){var ct,rt=Ie-de+1,mt=this._maxEntries;if(rt<=mt)return Xo(ct=Tc(se.slice(de,Ie+1)),this.toBBox),ct;ot||(ot=Math.ceil(Math.log(rt)/Math.log(mt)),mt=Math.ceil(rt/Math.pow(mt,ot-1))),(ct=Tc([])).leaf=!1,ct.height=ot;var Jt=Math.ceil(rt/mt),wn=Jt*Math.ceil(Math.sqrt(mt));iy(se,de,Ie,wn,this.compareMinX);for(var rn=de;rn<=Ie;rn+=wn){var ei=Math.min(rn+wn-1,Ie);iy(se,rn,ei,Jt,this.compareMinY);for(var Ln=rn;Ln<=ei;Ln+=Jt){var Ei=Math.min(Ln+Jt-1,ei);ct.children.push(this._build(se,Ln,Ei,ot-1))}}return Xo(ct,this.toBBox),ct},Hn.prototype._chooseSubtree=function(se,de,Ie,ot){for(;ot.push(de),!de.leaf&&ot.length-1!==Ie;){for(var ct=1/0,rt=1/0,mt=void 0,Jt=0;Jt<de.children.length;Jt++){var wn=de.children[Jt],rn=Ko(wn),ei=(Ln=se,Ei=wn,(Math.max(Ei.maxX,Ln.maxX)-Math.min(Ei.minX,Ln.minX))*(Math.max(Ei.maxY,Ln.maxY)-Math.min(Ei.minY,Ln.minY))-rn);ei<rt?(rt=ei,ct=rn<ct?rn:ct,mt=wn):ei===rt&&rn<ct&&(ct=rn,mt=wn)}de=mt||de.children[0]}var Ln,Ei;return de},Hn.prototype._insert=function(se,de,Ie){var ot=Ie?se:this.toBBox(se),ct=[],rt=this._chooseSubtree(ot,this.data,de,ct);for(rt.children.push(se),Sc(rt,ot);de>=0&&ct[de].children.length>this._maxEntries;)this._split(ct,de),de--;this._adjustParentBBoxes(ot,ct,de)},Hn.prototype._split=function(se,de){var Ie=se[de],ot=Ie.children.length,ct=this._minEntries;this._chooseSplitAxis(Ie,ct,ot);var rt=this._chooseSplitIndex(Ie,ct,ot),mt=Tc(Ie.children.splice(rt,Ie.children.length-rt));mt.height=Ie.height,mt.leaf=Ie.leaf,Xo(Ie,this.toBBox),Xo(mt,this.toBBox),de?se[de-1].children.push(mt):this._splitRoot(Ie,mt)},Hn.prototype._splitRoot=function(se,de){this.data=Tc([se,de]),this.data.height=se.height+1,this.data.leaf=!1,Xo(this.data,this.toBBox)},Hn.prototype._chooseSplitIndex=function(se,de,Ie){for(var ot,ct,rt,mt,Jt,wn,rn,ei=1/0,Ln=1/0,Ei=de;Ei<=Ie-de;Ei++){var Hu=Jn(se,0,Ei,this.toBBox),Zo=Jn(se,Ei,Ie,this.toBBox),cs=(ct=Hu,rt=Zo,void 0,void 0,void 0,void 0,mt=Math.max(ct.minX,rt.minX),Jt=Math.max(ct.minY,rt.minY),wn=Math.min(ct.maxX,rt.maxX),rn=Math.min(ct.maxY,rt.maxY),Math.max(0,wn-mt)*Math.max(0,rn-Jt)),Uu=Ko(Hu)+Ko(Zo);cs<ei?(ei=cs,ot=Ei,Ln=Uu<Ln?Uu:Ln):cs===ei&&Uu<Ln&&(Ln=Uu,ot=Ei)}return ot||Ie-de},Hn.prototype._chooseSplitAxis=function(se,de,Ie){var ot=se.leaf?this.compareMinX:ty,ct=se.leaf?this.compareMinY:ny;this._allDistMargin(se,de,Ie,ot)<this._allDistMargin(se,de,Ie,ct)&&se.children.sort(ot)},Hn.prototype._allDistMargin=function(se,de,Ie,ot){se.children.sort(ot);for(var ct=this.toBBox,rt=Jn(se,0,de,ct),mt=Jn(se,Ie-de,Ie,ct),Jt=_l(rt)+_l(mt),wn=de;wn<Ie-de;wn++){var rn=se.children[wn];Sc(rt,se.leaf?ct(rn):rn),Jt+=_l(rt)}for(var ei=Ie-de-1;ei>=de;ei--){var Ln=se.children[ei];Sc(mt,se.leaf?ct(Ln):Ln),Jt+=_l(mt)}return Jt},Hn.prototype._adjustParentBBoxes=function(se,de,Ie){for(var ot=Ie;ot>=0;ot--)Sc(de[ot],se)},Hn.prototype._condense=function(se){for(var de=se.length-1,Ie=void 0;de>=0;de--)0===se[de].children.length?de>0?(Ie=se[de-1].children).splice(Ie.indexOf(se[de]),1):this.clear():Xo(se[de],this.toBBox)},Hn}()}},Pm=>{Pm(Pm.s=267)}]);